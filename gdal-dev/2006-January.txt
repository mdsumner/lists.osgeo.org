From JRAWLINSON at ngms.eu.com  Sun Jan  1 08:41:12 2006
From: JRAWLINSON at ngms.eu.com (Rawlinson, John (UK))
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] I need some help on using the SetMercator method
References: <4F8F47809A5813479AF74E3082FC0E4B13F0AF@apollo.ng.local>
Message-ID: <4F8F47809A5813479AF74E3082FC0E4B13F0B0@apollo.ng.local>

I've got some more info on the problem I'm seeing. 

It seems like I only see the problem for source files that are projected. The WKT for the Afghanistan file is as follows:
PROJCS["unnamed",GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 84",6378137,298.2572235630016,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",69],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","32642"]]

If I first warp this file to a non-projected tif file, I can then read that tif file and warp it to a Mercator projected output image ok.

Although I could do this as a two stage process it seems tortuous and won't be good for performance - is this expected behaviour or am I missing something?

Thanks,

John
-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org on behalf of Rawlinson, John (UK)
Sent: Thu 29/12/2005 17:51
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] I need some help on using the SetMercator method
 
I'm having some problems with the SetMercator method of OGRSpatialReference when using the GDAL Warp API. I'm writing an app the reads GeoTiff files and warps them into a memory raster. Things are ok without setting the target raster to be projected i.e. 

        oSRS.SetWellKnownGeogCS( "WGS84" );
        oSRS.exportToWkt( &pszSRS_WKT );
        poDstDS->SetGeoTransform( adfGeoTransform );
        poDstDS->SetProjection( pszSRS_WKT );

Source data is transferred to target raster correctly by the warp operation.

Note: I have previously calculated the GeoTransform array as follows:

        adfGeoTransform[0] = tl_lon;

        if (br_lon > tl_lon)
        {
                adfGeoTransform[1] = (br_lon - tl_lon) / iwidth;
        }
        else
        {
                adfGeoTransform[1] = (br_lon + 360.0 - tl_lon) / iwidth;
        }
        adfGeoTransform[2] = 0;
       
        adfGeoTransform[3] = tl_lat;
        adfGeoTransform[4] = 0;
        adfGeoTransform[5] = ((br_lat - tl_lat) / iheight);

Where tl_lat, tl_lon, br_lat, br_lon are the geographic extents of my target raster and iwidth and iheight are the raster sizes.

As soon as I set the target raster to be projected i.e.

        oSRS.SetProjCS("Mercator Projection");
        oSRS.SetWellKnownGeogCS( "WGS84" );
        oSRS.SetMercator (0, 0, 1.0, 0, 0);
        oSRS.exportToWkt( &pszSRS_WKT );
        poDstDS->SetGeoTransform( adfGeoTransform );
        poDstDS->SetProjection( pszSRS_WKT );

Now the target raster is not filled (all black). I've experimented a little with the parameters to the SetMercator method. Setting the scale factor to 0 caused one of my tiff files (large map of europe) to warp ok, however, a small map ~300km wide in Afghanistan didn't warp (all black in the target again).

Can anyone advise on what the parameters passed to SetMercator should be? Also, what does scale factor mean in this context? Is there anything else I should be doing?

Many thanks for any help anyone can give.

Best regards,

John Rawlinson 



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060101/a7096484/attachment.html
From perrygeo at gmail.com  Sun Jan  1 14:16:20 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_translate Question
In-Reply-To: <BAY105-F2846F55960F64B48B59610BE2A0@phx.gbl>
References: <BAY105-F2846F55960F64B48B59610BE2A0@phx.gbl>
Message-ID: <5383fa5e0601011116k64dde4aaqa2d1558bc7dcde02@mail.gmail.com>

Paul,

On 12/31/05, Paul Parisi <ppp5150@hotmail.com> wrote:
> I'm a new user and am running into a problem with the gdal_translate
> utility. I'm trying to crop a Landsat GTIFF image to fit a smaller SRTM
> elevation map. The documentation does not say what format the "ulx"
> coordinates must be, so I tried the following:
>
> gdal_translate -of GTiff -projwin -116.000168 38.000331 -114.999256
> 36.999143 Groom_1.tif Groom_1_Crop.tif

  The "ulx" and "uly" are the upper left coordinates and the "lrx" and
"lry" are the lower right. It looks like your coordinates are in the
proper order.

  Looks like you're using longitudes and latitudes for your cropping
window. Can you confirm that the original tiff is in the same
coordinate system? Try the gdalinfo command to see if the extent
values are reasonable and if the tiff has any projection information.
If it's not lat/long, you could first use gdalwarp to reproject it.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From discoduro2 at terra.es  Sun Jan  1 18:11:39 2006
From: discoduro2 at terra.es (Fernando =?ISO-8859-1?Q?Gonz=E1lez_Cort=E9s?=)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
Message-ID: <1136157099.4988.36.camel@localhost.localdomain>

Hello,

I have downloaded and decompressed this file
	
	http://www.gdal.org/dl/gdal-1.3.1.tar.gz 

after it, I've followed the build instructions in

	http://www.gdal.org/gdal_building.html

I've executed the "./configure" command without any problem but when I
execute "make" command I get the following error (after some successful
g++ commands):

 g++ -Wall -O2 -Iogrsf_frmts -I. -I../port -I../gcore -I../alg -I../ogr
-I../ogr/ogrsf_frmts -DHAVE_GEOS=1 -I-O2 -g -pipe -march=i386 -mcpu=i686
-I/usr/include -I../port -c ogrgeometryfactory.cpp  -fPIC -DPIC -o
.libs/ogrgeometryfactory.o
In file included from ogrgeometryfactory.cpp:118:
ogr_geos.h:41:25: geos/geom.h: No such file or directory
ogr_geos.h:42:23: geos/io.h: No such file or directory
ogr_geos.h:43:25: geos/util.h: No such file or directory
ogrgeometryfactory.cpp: In static member function `static OGRGeometry*
   OGRGeometryFactory::createFromGEOS(const geos::Geometry*)':
ogrgeometryfactory.cpp:827: error: `WKTWriter' undeclared in namespace
`geos'
ogrgeometryfactory.cpp:827: error: syntax error before `;' token
ogrgeometryfactory.cpp:828: error: `string' undeclared (first use this
   function)
ogrgeometryfactory.cpp:828: error: (Each undeclared identifier is
reported only
   once for each function it appears in.)
ogrgeometryfactory.cpp:832: error: `oWKT' undeclared (first use this
function)
ogrgeometryfactory.cpp:832: error: `oWKTWriter' undeclared (first use
this
   function)
ogrgeometryfactory.cpp:834: error: syntax error before `*' token
ogrgeometryfactory.cpp:840: error: `e' undeclared (first use this
function)
ogrgeometryfactory.cpp: At global scope:
ogrgeometryfactory.cpp:847: error: syntax error before `if'
ogrgeometryfactory.cpp: In static member function `static
   geos::GeometryFactory* OGRGeometryFactory::getGEOSGeometryFactory()':
ogrgeometryfactory.cpp:871: error: invalid use of undefined type `struct
   geos::GeometryFactory'
ogr_geometry.h:231: error: forward declaration of `struct
geos::GeometryFactory
   '
make: *** [ogrgeometryfactory.o] Error 1


I think there should be something like a "geos" directory under
gdal/ogr/. I'm not sure. Should I download geos sources? What I'm doing
wrong?

Thanks in advance,
Fernando


From agostino.fiorani at fastwebnet.it  Sun Jan  1 18:27:26 2006
From: agostino.fiorani at fastwebnet.it (Agostino Fiorani)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] MSG Interface
Message-ID: <1136158046.7862.10.camel@localhost.localdomain>

Great Graziano !
        It works! And thanks to attach here your results. 
Now the next question...

I am trying to rebuild  gdal after having applied  your patch to the
frmts/msg/PublicDecompWT folder. I got again a compilation error which I
append here... Can you solve also this problem?  Or have you any ideas
on what I should do to make thinks working?

Thanks very much 
Agostino. 


make -C msg install-obj
make[2]: Entering directory
`/home/agostino/programs/gdal-1.3.1/frmts/msg'
g++ -Wall -fPIC -O2   -I../../port -I../../gcore -I../../alg -I../../ogr
-I../../ogr/ogrsf_frmts -I PublicDecompWT/DISE -I
PublicDecompWT/COMP/WT/Inc -I PublicDecompWT/COMP/Inc -I. -c
-o ../o/msgdataset.o msgdataset.cpp
msgdataset.h:51: error: expected `)' before ?*? token
msgdataset.h:56: error: ?MSGDataset? has not been declared
PublicDecompWT/COMP/WT/Inc/CompressWT.h: In constructor
?COMP::CWTParams::CWTParams(unsigned int, unsigned int,
COMP::CWTParams::EWTPredictionMode, COMP::CWTParams::EWTBlockMode,
unsigned int, unsigned int)?:
PublicDecompWT/COMP/WT/Inc/CompressWT.h:140: warning: enumeration value
?e_FullWidth? not handled in switch
msgdataset.cpp: In static member function ?static GDALDataset*
MSGDataset::Open(GDALOpenInfo*)?:
msgdataset.cpp:286: error: no matching function for call to
?MSGRasterBand::MSGRasterBand(MSGDataset*&, int)?
msgdataset.h:47: note: candidates are: MSGRasterBand::MSGRasterBand()
msgdataset.h:47: note:
MSGRasterBand::MSGRasterBand(const MSGRasterBand&)
msgdataset.cpp: At global scope:
msgdataset.cpp:298: error: prototype for
?MSGRasterBand::MSGRasterBand(MSGDataset*, int)? does not match any in
class ?MSGRasterBand?
msgdataset.h:47: error: candidates are:
MSGRasterBand::MSGRasterBand(const MSGRasterBand&)
msgdataset.h:47: error:                 MSGRasterBand::MSGRasterBand()
msgdataset.cpp: In member function ?virtual CPLErr
MSGRasterBand::IReadBlock(int, int, void*)?:
msgdataset.cpp:609: error: no matching function for call to
?MSGRasterBand::rRadiometricCorrection(short unsigned int&, int&, int,
int, MSGDataset*&)?
msgdataset.h:56: note: candidates are: double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int, int*)
msgdataset.cpp:634: error: no matching function for call to
?MSGRasterBand::rRadiometricCorrection(short unsigned int&, int&, int,
int, MSGDataset*&)?
msgdataset.h:56: note: candidates are: double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int, int*)
msgdataset.cpp: At global scope:
msgdataset.cpp:653: error: prototype for ?double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int,
MSGDataset*)? does not match any in class ?MSGRasterBand?
msgdataset.h:56: error: candidate is: double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int, int*)
make[2]: *** [../o/msgdataset.o] Error 1
make[2]: Leaving directory
`/home/agostino/programs/gdal-1.3.1/frmts/msg'
make[1]: *** [msg-install-obj] Error 2
make[1]: Leaving directory `/home/agostino/programs/gdal-1.3.1/frmts'
make: *** [frmts-target] Error 2


-------------- next part --------------
An embedded message was scrubbed...
From: Agostino Fiorani <agostino.fiorani@fastwebnet.it>
Subject: [Gdal-dev] MSG Interface
Date: Mon, 02 Jan 2006 00:25:28 +0100
Size: 3473
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060102/d4d1da56/attachment.mht
From ari.jolma at tkk.fi  Mon Jan  2 03:15:07 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
In-Reply-To: <1136157099.4988.36.camel@localhost.localdomain>
References: <1136157099.4988.36.camel@localhost.localdomain>
Message-ID: <43B8E10B.2000906@tkk.fi>

Fernando Gonz?lez Cort?s wrote:
> Hello,
> 
> I have downloaded and decompressed this file
> 	
> 	http://www.gdal.org/dl/gdal-1.3.1.tar.gz 
> 
> ogr_geos.h:41:25: geos/geom.h: No such file or directory

This probably means that GEOS is enabled but not found. Try the geos switch

--with-geos[=ARG]       Include GEOS support (ARG=yes, no or geos-config
path)

in ./configure

geos source is available from http://geos.refractions.net/

Ari Jolma

> I think there should be something like a "geos" directory under
> gdal/ogr/. I'm not sure. Should I download geos sources? What I'm doing
> wrong?
> 
> Thanks in advance,
> Fernando
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From mn at blominfo.dk  Mon Jan  2 03:37:04 2006
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] RE: GDAL, and C# Access
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C66E869F@kernen.blomkbh.dk>

>Paul and Morten's work is a great start, though if we're really going
to
>put something together that is of general use to other developers, I
>might suggest a few naming changes. For instance, FWTools is just one
>particular distribution of GDAL, so it doesn't quite make sense to me
to
>use that as the primary namespace - I'd prefer "Gdal". Similarly, using
>a class called Gdal to map to the GDALDataset class doesn't feel quite
>right to me either. Why not Gdal.Dataset? Similarly, for
>Gdal.RasterBand, Gdal.Driver and so on for the other main GDAL object
>classes. In general, I think it would make sense to stick to the
>existing C++ organization of GDAL when mapping to C# classes. Morten -
>what do you think?

I do agree with you on this one. I just did a quick implementation, and
putting it all in the correct classes wasn't top priority then. There
were not that many methods wrapped (yet) so it didn't make sense to
split them in a large bunch of classes.
I still do think that SWIG is the way to go for creating and maintaining
the wrappers. In addition would be nice to see some classes (like the
ones I did on Pauls work) put above the SWIG classes where one could
utilize the full potential of .NET, including code-summaries for
intellisense, garbage collection etc. I don't much like the code that
SWIG generates for .NET. It is far from the patterns and practices that
Microsoft recommends for .NET libraries.

BR
/Morten



From discoduro2 at terra.es  Mon Jan  2 03:56:27 2006
From: discoduro2 at terra.es (Fernando =?ISO-8859-1?Q?Gonz=E1lez_Cort=E9s?=)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
In-Reply-To: <43B8E10B.2000906@tkk.fi>
References: <1136157099.4988.36.camel@localhost.localdomain>
	<43B8E10B.2000906@tkk.fi>
Message-ID: <1136192187.4896.18.camel@localhost.localdomain>

Hi!
	It worked but I haven't been able to build gdal yet. I get another
error:
	g++ ogrinfo.o -o .libs/ogrinfo  ../.libs/libgdal.so -lodbc -lgif
/usr/lib/libjpeg.so -lpng -L/usr/lib -lpq -lz -lrt -ldl -Wl,--rpath
-Wl,/usr/local/lib
../.libs/libgdal.so: undefined reference to
`geos::WKTReader::WKTReader[in-charge](geos::GeometryFactory const*)'

I've downloaded geos and executed the following commands:
./configure
make
make install

I think after the first one, a geos-config file appears under the
geos-2.2.1/tools directory. After all of this I change to gdal directory
and execute the two following commands:

./configure --with-geos=../geos-2.2.1/tools/geos-config
make

But the make fails with the error I've pasted at the top of the mail.

What's wrong? Is the geos-config I used the one you talk about?

Thanks in advance,
Fernando



El lun, 02-01-2006 a las 09:15, Ari Jolma escribi?:
> Fernando Gonz?lez Cort?s wrote:
> > Hello,
> > 
> > I have downloaded and decompressed this file
> > 	
> > 	http://www.gdal.org/dl/gdal-1.3.1.tar.gz
> > 
> > ogr_geos.h:41:25: geos/geom.h: No such file or directory
> 
> This probably means that GEOS is enabled but not found. Try the geos switch
> 
> --with-geos[=ARG]       Include GEOS support (ARG=yes, no or geos-config
> path)
> 
> in ./configure
> 
> geos source is available from http://geos.refractions.net/
> 
> Ari Jolma
> 
> > I think there should be something like a "geos" directory under
> > gdal/ogr/. I'm not sure. Should I download geos sources? What I'm doing
> > wrong?
> > 
> > Thanks in advance,
> > Fernando
> > 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> 



From ari.jolma at tkk.fi  Mon Jan  2 04:35:13 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
In-Reply-To: <1136192187.4896.18.camel@localhost.localdomain>
References: <1136157099.4988.36.camel@localhost.localdomain>
	<43B8E10B.2000906@tkk.fi>
	<1136192187.4896.18.camel@localhost.localdomain>
Message-ID: <43B8F3D1.8040601@tkk.fi>

Fernando Gonz?lez Cort?s wrote:
> Hi!
> 	It worked but I haven't been able to build gdal yet. I get another
> error:
> 	g++ ogrinfo.o -o .libs/ogrinfo  ../.libs/libgdal.so -lodbc -lgif
> /usr/lib/libjpeg.so -lpng -L/usr/lib -lpq -lz -lrt -ldl -Wl,--rpath
> -Wl,/usr/local/lib
> ../.libs/libgdal.so: undefined reference to
> `geos::WKTReader::WKTReader[in-charge](geos::GeometryFactory const*)'


Just guessing now: geos libs are installed into /usr/local/lib and you
don't have that dir in /etc/ld.so.conf? (as usual in fedora) Does
ldconfig -v report geos library?

Ari


> 
> I've downloaded geos and executed the following commands:
> ./configure
> make
> make install
> 
> I think after the first one, a geos-config file appears under the
> geos-2.2.1/tools directory. After all of this I change to gdal directory
> and execute the two following commands:
> 
> ./configure --with-geos=../geos-2.2.1/tools/geos-config
> make
> 
> But the make fails with the error I've pasted at the top of the mail.
> 
> What's wrong? Is the geos-config I used the one you talk about?
> 
> Thanks in advance,
> Fernando
> 
> 
> 
> El lun, 02-01-2006 a las 09:15, Ari Jolma escribi?:
>> Fernando Gonz?lez Cort?s wrote:
>>> Hello,
>>>
>>> I have downloaded and decompressed this file
>>> 	
>>> 	http://www.gdal.org/dl/gdal-1.3.1.tar.gz
>>>
>>> ogr_geos.h:41:25: geos/geom.h: No such file or directory
>> This probably means that GEOS is enabled but not found. Try the geos switch
>>
>> --with-geos[=ARG]       Include GEOS support (ARG=yes, no or geos-config
>> path)
>>
>> in ./configure
>>
>> geos source is available from http://geos.refractions.net/
>>
>> Ari Jolma
>>
>>> I think there should be something like a "geos" directory under
>>> gdal/ogr/. I'm not sure. Should I download geos sources? What I'm doing
>>> wrong?
>>>
>>> Thanks in advance,
>>> Fernando
>>>
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From discoduro2 at terra.es  Mon Jan  2 06:10:12 2006
From: discoduro2 at terra.es (Fernando =?ISO-8859-1?Q?Gonz=E1lez_Cort=E9s?=)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
In-Reply-To: <43B8F3D1.8040601@tkk.fi>
References: <1136157099.4988.36.camel@localhost.localdomain>
	<43B8E10B.2000906@tkk.fi>
	<1136192187.4896.18.camel@localhost.localdomain>
	<43B8F3D1.8040601@tkk.fi>
Message-ID: <1136200211.29528.29.camel@localhost.localdomain>

Hi Ari:

	As you guessed, the geos library I have built is installed into
/usr/local/lib. I haven't that dir in /etc/ld.so.conf. But, ldconfig -v
reports a geos library. I Installed long ago postgresql-postgis-7.4.1
which needs geos-1.0. That version of geos is installed in /usr/lib and
this one is the one the ldconfig command reports.

	I think it has to do with the problem, hasn't it? How can I tell the
compiler to access the geos I've just installed instead of the old one?

thank you
Fernando
	
El lun, 02-01-2006 a las 10:35, Ari Jolma escribi?:
> Fernando Gonz?lez Cort?s wrote:
> > Hi!
> > 	It worked but I haven't been able to build gdal yet. I get another
> > error:
> > 	g++ ogrinfo.o -o .libs/ogrinfo  ../.libs/libgdal.so -lodbc -lgif
> > /usr/lib/libjpeg.so -lpng -L/usr/lib -lpq -lz -lrt -ldl -Wl,--rpath
> > -Wl,/usr/local/lib
> > ../.libs/libgdal.so: undefined reference to
> > `geos::WKTReader::WKTReader[in-charge](geos::GeometryFactory const*)'
> 
> 
> Just guessing now: geos libs are installed into /usr/local/lib and you
> don't have that dir in /etc/ld.so.conf? (as usual in fedora) Does
> ldconfig -v report geos library?
> 
> Ari
> 
> 
> > 
> > I've downloaded geos and executed the following commands:
> > ./configure
> > make
> > make install
> > 
> > I think after the first one, a geos-config file appears under the
> > geos-2.2.1/tools directory. After all of this I change to gdal directory
> > and execute the two following commands:
> > 
> > ./configure --with-geos=../geos-2.2.1/tools/geos-config
> > make
> > 
> > But the make fails with the error I've pasted at the top of the mail.
> > 
> > What's wrong? Is the geos-config I used the one you talk about?
> > 
> > Thanks in advance,
> > Fernando
> > 
> > 
> > 
> > El lun, 02-01-2006 a las 09:15, Ari Jolma escribi?:
> >> Fernando Gonz?lez Cort?s wrote:
> >>> Hello,
> >>>
> >>> I have downloaded and decompressed this file
> >>> 	
> >>> 	http://www.gdal.org/dl/gdal-1.3.1.tar.gz
> >>>
> >>> ogr_geos.h:41:25: geos/geom.h: No such file or directory
> >> This probably means that GEOS is enabled but not found. Try the geos switch
> >>
> >> --with-geos[=ARG]       Include GEOS support (ARG=yes, no or geos-config
> >> path)
> >>
> >> in ./configure
> >>
> >> geos source is available from http://geos.refractions.net/
> >>
> >> Ari Jolma
> >>
> >>> I think there should be something like a "geos" directory under
> >>> gdal/ogr/. I'm not sure. Should I download geos sources? What I'm doing
> >>> wrong?
> >>>
> >>> Thanks in advance,
> >>> Fernando
> >>>
> >>> _______________________________________________
> >>> Gdal-dev mailing list
> >>> Gdal-dev@lists.maptools.org
> >>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> > 
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> 



From ari.jolma at tkk.fi  Mon Jan  2 06:49:28 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
In-Reply-To: <1136200211.29528.29.camel@localhost.localdomain>
References: <1136157099.4988.36.camel@localhost.localdomain>
	<43B8E10B.2000906@tkk.fi>
	<1136192187.4896.18.camel@localhost.localdomain>
	<43B8F3D1.8040601@tkk.fi>
	<1136200211.29528.29.camel@localhost.localdomain>
Message-ID: <43B91348.7010304@tkk.fi>

Fernando Gonz?lez Cort?s wrote:
> Hi Ari:
> 
> 	As you guessed, the geos library I have built is installed into
> /usr/local/lib. I haven't that dir in /etc/ld.so.conf. But, ldconfig -v
> reports a geos library. I Installed long ago postgresql-postgis-7.4.1
> which needs geos-1.0. That version of geos is installed in /usr/lib and
> this one is the one the ldconfig command reports.
> 
> 	I think it has to do with the problem, hasn't it? How can I tell the
> compiler to access the geos I've just installed instead of the old one?

for example

http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html

gives some advice on how to do that, I don't have much experience with this

Ari


-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From discoduro2 at terra.es  Mon Jan  2 11:31:46 2006
From: discoduro2 at terra.es (Fernando =?ISO-8859-1?Q?Gonz=E1lez_Cort=E9s?=)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] problem building gdal in linux fedora core 1
In-Reply-To: <43B91348.7010304@tkk.fi>
References: <1136157099.4988.36.camel@localhost.localdomain>
	<43B8E10B.2000906@tkk.fi>
	<1136192187.4896.18.camel@localhost.localdomain>
	<43B8F3D1.8040601@tkk.fi>
	<1136200211.29528.29.camel@localhost.localdomain>
	<43B91348.7010304@tkk.fi>
Message-ID: <1136219506.16359.43.camel@localhost.localdomain>

I've done it! Well, I've read the link contents and understood it, but
the only thing I've gotten is to crash my postgresql server (now it
works again). Well, I've just copied the geos sources I downloaded at
the ogr/goes directory. After that I just executed "configure" without
arguments, "make" and "make install" without any problem.

Thank you for your help Ari.

Fernando


El lun, 02-01-2006 a las 12:49, Ari Jolma escribi?:
> Fernando Gonz?lez Cort?s wrote:
> > Hi Ari:
> > 
> > 	As you guessed, the geos library I have built is installed into
> > /usr/local/lib. I haven't that dir in /etc/ld.so.conf. But, ldconfig -v
> > reports a geos library. I Installed long ago postgresql-postgis-7.4.1
> > which needs geos-1.0. That version of geos is installed in /usr/lib and
> > this one is the one the ldconfig command reports.
> > 
> > 	I think it has to do with the problem, hasn't it? How can I tell the
> > compiler to access the geos I've just installed instead of the old one?
> 
> for example
> 
> http://www.tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html
> 
> gives some advice on how to do that, I don't have much experience with this
> 
> Ari
> 



From ivan.mjartan at geovap.cz  Mon Jan  2 11:36:32 2006
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ECW and gdal-1.3.1 problem ?
References: <000a01c6062f$5bf9b980$1a01a8c0@PC24>
	<931f8ea90512210715p56063dd3t692fbbb4b52e58e2@mail.gmail.com>
Message-ID: <002501c60fba$b0a7abb0$1a01a8c0@pc24>

Hi Frank and all,



Thanks for your help.



After reinstall my Windows and Visual Studio I have problem free ECW SDK 
building from source.



But I have another problem.



So I have followed your instruction



I have downloaded gdalcvs-20060102.zip and build gdal from this source

(i have edited ecw option int opt file)



and everything looks fine till I tried gdal_translate.exe on one ECW file



gdal_translate.exe -of BMP -srcwin 0 0 5001 4001 -outsize 10% 10% 
c:\temp\rastry\bero204.ecw c:\temp\rastry\test.bmp



The result image looks wrong (http://80.188.225.114/temp/ivan/test.bmp)



And the source image is (http://80.188.225.114/temp/ivan/bero204.ecw)



gdal_translate.exe wrote an error ERROR 6: SetColorInterpretation() not 
supported for this dataset



but I have also wrong result if I tried get subwindow in png or tiff format.



So am I doing something wrong ? or bug is in ECW SDK or GDAL ?



Thanks a lot



Ivan



----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "Ivan Mjartan" <ivan.mjartan@geovap.cz>
Cc: <gdal-dev@lists.maptools.org>
Sent: Wednesday, December 21, 2005 4:15 PM
Subject: Re: [Gdal-dev] ECW and gdal-1.3.1 problem ?


On 12/21/05, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
>
> Hi list
> I tried to build gdal-1.3.1 library with ECW support.
> And I was not successful,
> At first I tried build gdal-1.3.1 with ECW SDK 2.46 but I was also not
> success.  So I download last version of  ECW SDK (3.3).
>
> Then start my C++ horror.
>
> I am not able compile ECW SDK with Visual Studio .Net 2003, a don't know
> why, I followed Build.txt, I downloaded latest Microsoft Platform SDK. And
> when I try build this library a get error
>
> midl : command line error MIDL1004 : cannot execute C preprocessor cl.exe

Ivan,

I haven't run into problems with midl before.

> in the build log is:
>
> NCSEcw : warning PRJ0041 : Cannot find missing dependency 'NCSEcw.tlb' for
> file 'NCSEcw.rc'.  Your project may still build, but may continue to 
> appear
> out of date until this file is found.
> Creating temporary file
> "c:\Projects\Gdal\gdal130\ecw\libecwj2-3.3\Source\C\NCSEcw\NCSEcw\Release\RSP000001.rsp"
> with contents
> [
> /I "..\..\..\include" /I "c:\Program Files\Microsoft Visual Studio .NET
> 2003\Vc7\bin" /env win32 /Oicf  /tlb ".\NCSEcw.tlb" /h "NCSEcwCom.h" /iid
> "NCSEcw_i.c"
> ".\NCSEcw.idl"]Creating command line "midl.exe
> @"c:\Projects\Gdal\gdal130\ecw\libecwj2-3.3\Source\C\NCSEcw\NCSEcw\Release\RSP000001.rsp"
> /nologo"Creating Type Library...Processing .\NCSEcw.idlmidl : command line
> error MIDL1004 : cannot execute C preprocessor cl.exe
>
> What I am doing wrong?
> And another questions Is last ECW SDK and GDAL -1.3.1 compatible?
> Can I get somewhere ECW binary? (I tried new ones from emapper.com) but
> there was not some headers.

To the best of my knowledge ERMapper has not released binaries corresponding
to ECW SDK 3.3RC. GDAL 1.3.1 is ECW SDK 3.3 compatible though you will
need to adjust the build stuff for windows somewhat.

> Or have I wrong Microsoft Platform SDK installed (I tried this PSD-x86.exe
> from
> http://www.microsoft.com/msdownload/platformsdk/sdkupdate)
>
> Or If someone is successful in building last GDAL and Last ECW Could you
> tell me pleas step by step instruction how it is possible ?

I was recently successful in building the ECW SDK 3.3 with
Visual Studio 2002, but I had to convert the 2003 solution back
to do this.  With 2003 it should be more straight forward.

In the particular build, we used /MT instead of /MD for
compatability with the end application in question.  I doubt
this is necessary and in fact it likely complicates things.

For me, aftering installing the latest x86 platform SDK, the build
of the ECW SDK was problem free.   I don't know why you are
running into problems.

But for GDAL there were a number of changes required.  I had to
change the nmake.opt to link against the libecwj2.lib instead of
the old libraries.

eg.
ECWDIR  = C:\warmerda\libecwj2-3.3
ECWLIB  = $(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib

And in gdal/frmts/ecw/makefile.vc I had to make changes to get all
the same defines as the ECW SDK is built with.  Otherwise you will
suffer "vtable hell".  The makefile now looks like:

EXTRAFLAGS = -I$(ECWDIR)\include -I$(ECWDIR)/Source/include \
/D_MBCS /D_UNICODE /DUNICODE /D_WINDOWS \
/DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI

OBJ = ecwdataset.obj ecwcreatecopy.obj jp2userbox.obj

GDAL_ROOT = ..\..

!INCLUDE $(GDAL_ROOT)\nmake.opt

default: $(OBJ)
copy *.obj ..\o

all: default testecw.exe

clean:
-del *.obj
-del *.exe


Once these changes were in place, I didn't have any
more problems with the build.

I did recently changes the ecwcreatecopy.cpp code so that it
creates the GeoTIFF for GeoJP2 support myself.  The translation
through the ERMapper "GDT" coordinate system representation
wasn't working too well for me in some cases.

Based on that, I would encourage you to upgrade to the nightly
snapshot of GDAL.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Keith at Wannamaker.org  Mon Jan  2 14:13:54 2006
From: Keith at Wannamaker.org (Keith Wannamaker)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] warping from lambert to mercator
Message-ID: <43B97B72.1080606@Wannamaker.org>

I am attempting to warp an image from lambert to mercator.  I would 
expect the top area of the image to stretch so that all the parallels 
and meridian become parallel.  However, the resulting image is slightly 
rotated but retains the signature lambert curving of the latitude lines 
and spreading of the longitude lines.  From what I understand about the 
warper engine, it should be able to do such a conversion.  Am I treading 
into uncharted territory here?

Thanks,
Keith

From ed at topozone.com  Mon Jan  2 16:19:40 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] warping from lambert to mercator
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD750@ptolemy.topozone.com>

Keith -

Could you give us the command line or the code you're using to make the
conversion?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Keith
Wannamaker
Sent: Monday, January 02, 2006 2:14 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] warping from lambert to mercator

I am attempting to warp an image from lambert to mercator.  I would
expect the top area of the image to stretch so that all the parallels
and meridian become parallel.  However, the resulting image is slightly
rotated but retains the signature lambert curving of the latitude lines
and spreading of the longitude lines.  From what I understand about the
warper engine, it should be able to do such a conversion.  Am I treading
into uncharted territory here?

Thanks,
Keith
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From Keith at Wannamaker.org  Mon Jan  2 20:21:56 2006
From: Keith at Wannamaker.org (Keith Wannamaker)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] warping from lambert to mercator
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD750@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD750@ptolemy.topozone.com>
Message-ID: <43B9D1B4.9020200@Wannamaker.org>

Hi Ed, I didn't realize that transverse mercator behaved more like a 
lambert projection, with curved parallels.  When I warped to simply 
+proj=merc, the resulting image was indeed correct with parallel 
parallels and meridians.  It always helps to use the correct projection. 
  So the answer to my question was, yes, gdalwarp will accomplish what I 
described (and, in fact, does a darn good job at it).

Thanks,
Keith


Ed McNierney wrote:
> Keith -
> 
> Could you give us the command line or the code you're using to make the
> conversion?
> 
> 	- Ed

From ppp5150 at hotmail.com  Mon Jan  2 20:41:14 2006
From: ppp5150 at hotmail.com (Paul Parisi)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_translate Question
In-Reply-To: <5383fa5e0601011116k64dde4aaqa2d1558bc7dcde02@mail.gmail.com>
Message-ID: <BAY105-F2104395565E15C71FAAA7BE2C0@phx.gbl>

Thanks for the help, Matt. It turns out the SRTM and Landsat files were 
using different coordinate systems. I found a converter online to go from 
lat/long to UTM, so I was able to use gdal_translate successfully.  gdalwarp 
will do this too?

Paul


>From: Matthew Perry <perrygeo@gmail.com>
>To: Paul Parisi <ppp5150@hotmail.com>
>CC: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] gdal_translate Question
>Date: Sun, 1 Jan 2006 11:16:20 -0800
>
>Paul,
>
>On 12/31/05, Paul Parisi <ppp5150@hotmail.com> wrote:
> > I'm a new user and am running into a problem with the gdal_translate
> > utility. I'm trying to crop a Landsat GTIFF image to fit a smaller SRTM
> > elevation map. The documentation does not say what format the "ulx"
> > coordinates must be, so I tried the following:
> >
> > gdal_translate -of GTiff -projwin -116.000168 38.000331 -114.999256
> > 36.999143 Groom_1.tif Groom_1_Crop.tif
>
>   The "ulx" and "uly" are the upper left coordinates and the "lrx" and
>"lry" are the lower right. It looks like your coordinates are in the
>proper order.
>
>   Looks like you're using longitudes and latitudes for your cropping
>window. Can you confirm that the original tiff is in the same
>coordinate system? Try the gdalinfo command to see if the extent
>values are reasonable and if the tiff has any projection information.
>If it's not lat/long, you could first use gdalwarp to reproject it.
>
>--
>Matt Perry
>perrygeo@gmail.com
>http://www.perrygeo.net



From ed at topozone.com  Mon Jan  2 20:48:28 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] warping from lambert to mercator
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD751@ptolemy.topozone.com>

Keith -

Sounds good!  Transverse Mercator and Mercator are not exactly the same
thing <g>.  You do need to make sure you avoid the undefined cases of
latitude=+/-90 degree, but I presume your input images stop at some
reasonable distance from the poles.  Let us know if you need more help.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Keith
Wannamaker
Sent: Monday, January 02, 2006 8:22 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] warping from lambert to mercator

Hi Ed, I didn't realize that transverse mercator behaved more like a
lambert projection, with curved parallels.  When I warped to simply 
+proj=merc, the resulting image was indeed correct with parallel
parallels and meridians.  It always helps to use the correct projection.

  So the answer to my question was, yes, gdalwarp will accomplish what I
described (and, in fact, does a darn good job at it).

Thanks,
Keith


Ed McNierney wrote:
> Keith -
> 
> Could you give us the command line or the code you're using to make 
> the conversion?
> 
> 	- Ed
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From james.e.hopper at saic.com  Mon Jan  2 20:58:50 2006
From: james.e.hopper at saic.com (James E. Hopper)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] 1.3.1 on mac
Message-ID: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>

Hi,

i build tiff 3.8.0 and then rebuilt gdal 1.3.1 using it.  all but one  
failure on the mac went away.

old =>

Test Script: gdalautotest_all
Succeeded: 393
Failed:    8 (1 blew exceptions)
Skipped:   192


new =>

Test Script: gdalautotest_all
Succeeded: 400
Failed:    1 (0 blew exceptions)
Skipped:   192

no more exceptions.  but the one fail is worrying, any thoughts on  
what's going on?

Running tests from gcore/gtiff_write.py
   TEST: SetGeoTransform: byte.tif ... success
   TEST: SetProjection: byte.tif ... Got:
PROJCS["NAD83 / Ohio South",
     GEOGCS["NAD83",
         DATUM["North_American_Datum_1983",
             SPHEROID["GRS 1980",6378137,298.2572221010002,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6269"]],
         PRIMEM["Greenwich",0],
         UNIT["degree",0.0174532925199433],
         AUTHORITY["EPSG","4269"]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["standard_parallel_1",40.03333333333333],
     PARAMETER["standard_parallel_2",38.73333333333333],
     PARAMETER["latitude_of_origin",38],
     PARAMETER["central_meridian",-82.5],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0],
     UNIT["US survey foot",0.3048006096012192,
         AUTHORITY["EPSG","9003"]]]
Expected:
PROJCS["NAD83 / Ohio South",
     GEOGCS["NAD83",
         DATUM["North_American_Datum_1983",
             SPHEROID["GRS 1980",6378137,298.257222101,
                 AUTHORITY["EPSG","7019"]],
             AUTHORITY["EPSG","6269"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.01745329251994328,
             AUTHORITY["EPSG","9122"]],
         AUTHORITY["EPSG","4269"]],
     PROJECTION["Lambert_Conformal_Conic_2SP"],
     PARAMETER["standard_parallel_1",40.03333333333333],
     PARAMETER["standard_parallel_2",38.73333333333333],
     PARAMETER["latitude_of_origin",38],
     PARAMETER["central_meridian",-82.5],
     PARAMETER["false_easting",1968500],
     PARAMETER["false_northing",0],
     UNIT["feet",0.3048006096012192]]
fail
     Did not get expected projection reference.





From woklist at kyngchaos.com  Tue Jan  3 00:37:40 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] 1.3.1 on mac
In-Reply-To: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>
References: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>
Message-ID: <B14B9C1B-9FBE-427C-B277-33C04C63655A@kyngchaos.com>

I get this too.  But with libtiff 3.7.4/geotiff 1.2.2/gdal 1.3.1 (I  
just saw tiff 3.8.0 and haven't had a chance to try it yet).  And on  
both Tiger/GCC 4 and Panther/GCC 3.3 (separate builds on each).

It hasn't really bothered me, since they're essentially the same, but  
it would be nice to know what's up, and if it's fixable.


On Jan 2, 2006, at 7:58 PM, James E. Hopper wrote:

> Hi,
>
> i build tiff 3.8.0 and then rebuilt gdal 1.3.1 using it.  all but  
> one failure on the mac went away.
>
> old =>
>
> Test Script: gdalautotest_all
> Succeeded: 393
> Failed:    8 (1 blew exceptions)
> Skipped:   192
>
>
> new =>
>
> Test Script: gdalautotest_all
> Succeeded: 400
> Failed:    1 (0 blew exceptions)
> Skipped:   192
>
> no more exceptions.  but the one fail is worrying, any thoughts on  
> what's going on?
>
> Running tests from gcore/gtiff_write.py
>   TEST: SetGeoTransform: byte.tif ... success
>   TEST: SetProjection: byte.tif ... Got:
> PROJCS["NAD83 / Ohio South",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",40.03333333333333],
>     PARAMETER["standard_parallel_2",38.73333333333333],
>     PARAMETER["latitude_of_origin",38],
>     PARAMETER["central_meridian",-82.5],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["US survey foot",0.3048006096012192,
>         AUTHORITY["EPSG","9003"]]]
> Expected:
> PROJCS["NAD83 / Ohio South",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.257222101,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.01745329251994328,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Lambert_Conformal_Conic_2SP"],
>     PARAMETER["standard_parallel_1",40.03333333333333],
>     PARAMETER["standard_parallel_2",38.73333333333333],
>     PARAMETER["latitude_of_origin",38],
>     PARAMETER["central_meridian",-82.5],
>     PARAMETER["false_easting",1968500],
>     PARAMETER["false_northing",0],
>     UNIT["feet",0.3048006096012192]]
> fail
>     Did not get expected projection reference.
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan

From matt.wilkie at gov.yk.ca  Tue Jan  3 13:15:32 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_translate Question
In-Reply-To: <BAY105-F2104395565E15C71FAAA7BE2C0@phx.gbl>
References: <BAY105-F2104395565E15C71FAAA7BE2C0@phx.gbl>
Message-ID: <43BABF44.4010200@gov.yk.ca>

Paul Parisi wrote:
> Thanks for the help, Matt. It turns out the SRTM and Landsat files were 
> using different coordinate systems. I found a converter online to go 
> from lat/long to UTM, so I was able to use gdal_translate successfully.  
> gdalwarp will do this too?

You can use cs2cs to translate lat/long coords into utm ones, to use for 
  a gdal_translate crop. Then use gdalwarp on the output to convert the 
  raster to a different projection. To get the two images cropped to 
exactly the same extents it might be better to gdalwarp the source image 
before cropping.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue Jan  3 14:05:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] 1.3.1 on mac
In-Reply-To: <B14B9C1B-9FBE-427C-B277-33C04C63655A@kyngchaos.com>
References: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>
	<B14B9C1B-9FBE-427C-B277-33C04C63655A@kyngchaos.com>
Message-ID: <931f8ea90601031105u78b5e4caq656792b56d78f718@mail.gmail.com>

Guys,

I have tried reproducing this but was unsuccessful.  I tried
it with GDAL CVS and GDAL 1.3.1.  There is a noteworthy
difference between the coordinate systems (the false easting).

I did my testing using --with-libtiff=internal.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Tue Jan  3 14:50:48 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] 1.3.1 on mac
In-Reply-To: <931f8ea90601031105u78b5e4caq656792b56d78f718@mail.gmail.com>
References: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>
	<B14B9C1B-9FBE-427C-B277-33C04C63655A@kyngchaos.com>
	<931f8ea90601031105u78b5e4caq656792b56d78f718@mail.gmail.com>
Message-ID: <4DDAFD39-36C0-4D59-A39D-B8473FEA1BAE@kyngchaos.com>


(missed the false easting deatil ^_^)

Is there anything different in the internal libtiff/geotiff that  
might account for that?


On Jan 3, 2006, at 1:05 PM, Frank Warmerdam wrote:

> Guys,
>
> I have tried reproducing this but was unsuccessful.  I tried
> it with GDAL CVS and GDAL 1.3.1.  There is a noteworthy
> difference between the coordinate systems (the false easting).
>
> I did my testing using --with-libtiff=internal.
>
> Best regards,
> --

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From tpl at hgl.com  Tue Jan  3 14:57:18 2006
From: tpl at hgl.com (Lillys, Theodore, P.E.)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Arc/Info Binary Grid Question(s)
Message-ID: <CA202492F79A2543917161E3D2E23D2201532C9C@mercury.hgl.com>

In an attempt to understand the storage of pixel data in the binary grid
file, I've been stepping/hacking through aitest.c and viewing the raster
using OpenEV.  I've found (for the two single-band coverages I've looked
at) that the first block in each row corresponds to the visualized
pixels in OpenEV.  What's stored in the other (nBlocksPerRow - 1) blocks
in the row?  I've encountered ESRI_GRID_NO_DATA (in a float file) and
integer data (in an integer coverage with a vat.adf) that appeared to
have a structure/pattern in the two examples I have.  For the integer
coverage, I'm assuming the vat.adf has clues to their meaning.

Another question is with respect to multi-band (RGB) binary grid files:
where/how are the "values" of the raster stored (e.g. elevation)?  As a
function of the three bands? In a particular band? Depends on the file?

TIA
Ted



From warmerdam at pobox.com  Tue Jan  3 16:13:47 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] DWG/DXF *Writing* Driver for OGR
Message-ID: <931f8ea90601031313i2fe3aaa6kd2e839877ea07abc@mail.gmail.com>

Folks,

With the support of OSGIS and the Dutch Directorate for Public
Works and Water Management, Rijkswaterstaat, Adviesdienst
Geo-informatie en ICT (RWS AGI), I have implemented an
OGR driver for writing DXF and DWG files.

The driver is documented at:
  http://www.gdal.org/ogr/drv_dxfdwg.html

It depends on the Open Design Alliance DWGdirect library,
which is not properly open source.   I would also stress
that the driver is currently write-only.  There is currently no
support for reading DXF or DWG files in OGR.

Those interested in testing the driver should build GDAL/OGR
from a nightly CVS snapshot, and will need to acquire the
DWGdirect libraries from the Open Design Alliance themselves.
I am interested in feedback.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cplist at earthlink.net  Tue Jan  3 17:09:17 2006
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] cs2cs one liner???
Message-ID: <023b01c610b2$5754b4b0$0200a8c1@latitude>

Hi, folks:

The following command works smashingly for me:

cs2cs +init=epsg:2260 +to +proj=latlong

What are my chances of taking that command and morphing it into a javascript
function that has no real projection hooks other than whatever constants and
math functions I could throw at it?  I have been poking around the web and
have found some JS one liners, but they simply don't return the results I
need for that given epsg.  I can't seem to locate the cs2cs source on my box
-- doesn't is come w/ gdal? --, but if I were to look under the hood, would
I find that a canned function for my particular source proj and dest proj
would do the trick?

Thanks, all.

Charlton



From warmerdam at pobox.com  Tue Jan  3 17:31:40 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] cs2cs one liner???
In-Reply-To: <023b01c610b2$5754b4b0$0200a8c1@latitude>
References: <023b01c610b2$5754b4b0$0200a8c1@latitude>
Message-ID: <931f8ea90601031431u99bf0ccv1945263cd47f27cb@mail.gmail.com>

On 1/3/06, Charlton Purvis <cplist@earthlink.net> wrote:
> Hi, folks:
>
> The following command works smashingly for me:
>
> cs2cs +init=epsg:2260 +to +proj=latlong
>
> What are my chances of taking that command and morphing it into a javascript
> function that has no real projection hooks other than whatever constants and
> math functions I could throw at it?  I have been poking around the web and
> have found some JS one liners, but they simply don't return the results I
> need for that given epsg.  I can't seem to locate the cs2cs source on my box
> -- doesn't is come w/ gdal? --, but if I were to look under the hood, would
> I find that a canned function for my particular source proj and dest proj
> would do the trick?

Charlton,

The cs2cs source is part of the PROJ.4 package.

The EPSG:2260 projection is transverse mercator:

 +proj=tmerc +lat_0=38.83333333333334 +lon_0=-74.5 +k=0.999900
   +x_0=150000 +y_0=0 +ellps=GRS80 +datum=NAD83
   +to_meter=0.3048006096012192

You should be able to extract JavaScript code from the
"Community MapBuilder" project for the Transverse Mercator
projection.

  http://mapbuilder.sourceforge.net/

Mike Adair is the guru on the projections support in MapBuilder.

You could also try to build TM support in JavaScript yourself, but
I think it will be hard to do it based on the TM support in PROJ.4
which is somewhat "opaque" to casual browsing.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From agostino.fiorani at fastwebnet.it  Sun Jan  1 18:25:27 2006
From: agostino.fiorani at fastwebnet.it (Agostino Fiorani)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] MSG Interface
Message-ID: <1136157927.7862.7.camel@localhost.localdomain>

Great Graziano !
	It works! And thanks to attach here your results. 
Now the next question...

I am trying to rebuild  gdal after having applied  your patch to the
frmts/msg/PublicDecompWT folder. I got again a compilation error which I
append here... Can you solve also this problem?  Or have you any ideas
on what I should do to make thinks working?

Thanks very much 
Agostino. 


make -C msg install-obj
make[2]: Entering directory
`/home/agostino/programs/gdal-1.3.1/frmts/msg'
g++ -Wall -fPIC -O2   -I../../port -I../../gcore -I../../alg -I../../ogr
-I../../ogr/ogrsf_frmts -I PublicDecompWT/DISE -I
PublicDecompWT/COMP/WT/Inc -I PublicDecompWT/COMP/Inc -I. -c
-o ../o/msgdataset.o msgdataset.cpp
msgdataset.h:51: error: expected `)' before ?*? token
msgdataset.h:56: error: ?MSGDataset? has not been declared
PublicDecompWT/COMP/WT/Inc/CompressWT.h: In constructor
?COMP::CWTParams::CWTParams(unsigned int, unsigned int,
COMP::CWTParams::EWTPredictionMode, COMP::CWTParams::EWTBlockMode,
unsigned int, unsigned int)?:
PublicDecompWT/COMP/WT/Inc/CompressWT.h:140: warning: enumeration value
?e_FullWidth? not handled in switch
msgdataset.cpp: In static member function ?static GDALDataset*
MSGDataset::Open(GDALOpenInfo*)?:
msgdataset.cpp:286: error: no matching function for call to
?MSGRasterBand::MSGRasterBand(MSGDataset*&, int)?
msgdataset.h:47: note: candidates are: MSGRasterBand::MSGRasterBand()
msgdataset.h:47: note:
MSGRasterBand::MSGRasterBand(const MSGRasterBand&)
msgdataset.cpp: At global scope:
msgdataset.cpp:298: error: prototype for
?MSGRasterBand::MSGRasterBand(MSGDataset*, int)? does not match any in
class ?MSGRasterBand?
msgdataset.h:47: error: candidates are:
MSGRasterBand::MSGRasterBand(const MSGRasterBand&)
msgdataset.h:47: error:                 MSGRasterBand::MSGRasterBand()
msgdataset.cpp: In member function ?virtual CPLErr
MSGRasterBand::IReadBlock(int, int, void*)?:
msgdataset.cpp:609: error: no matching function for call to
?MSGRasterBand::rRadiometricCorrection(short unsigned int&, int&, int,
int, MSGDataset*&)?
msgdataset.h:56: note: candidates are: double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int, int*)
msgdataset.cpp:634: error: no matching function for call to
?MSGRasterBand::rRadiometricCorrection(short unsigned int&, int&, int,
int, MSGDataset*&)?
msgdataset.h:56: note: candidates are: double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int, int*)
msgdataset.cpp: At global scope:
msgdataset.cpp:653: error: prototype for ?double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int,
MSGDataset*)? does not match any in class ?MSGRasterBand?
msgdataset.h:56: error: candidate is: double
MSGRasterBand::rRadiometricCorrection(unsigned int, int, int, int, int*)
make[2]: *** [../o/msgdataset.o] Error 1
make[2]: Leaving directory
`/home/agostino/programs/gdal-1.3.1/frmts/msg'
make[1]: *** [msg-install-obj] Error 2
make[1]: Leaving directory `/home/agostino/programs/gdal-1.3.1/frmts'
make: *** [frmts-target] Error 2



From cplist at earthlink.net  Tue Jan  3 22:28:13 2006
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] cs2cs one liner???
In-Reply-To: <931f8ea90601031431u99bf0ccv1945263cd47f27cb@mail.gmail.com>
Message-ID: <024201c610de$e54dc0a0$0200a8c1@latitude>

Frank:

> You should be able to extract JavaScript code from the
> "Community MapBuilder" project for the Transverse Mercator
> projection.
> 
>   http://mapbuilder.sourceforge.net/

You were right on the MONEY.  Exactly, precisely, incredibly what I was
looking for (Proj.js).

Thanks for the pointer!

Charlton



From bill at binko.net  Tue Jan  3 22:30:57 2006
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] cs2cs one liner???
In-Reply-To: <024201c610de$e54dc0a0$0200a8c1@latitude>
References: <024201c610de$e54dc0a0$0200a8c1@latitude>
Message-ID: <Pine.LNX.4.58.0601032230050.12192@fastcat.binko.net>

Charlton,

> You were right on the MONEY.  Exactly, precisely, incredibly what I was
> looking for (Proj.js).

You will find that Frank is irritating that way :)  Welcome aboard.

Bill

From sholl at gmx.net  Wed Jan  4 05:38:43 2006
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] OCI-Import
Message-ID: <20060104113843.66252293@localhost>

Dear List,

I have imported some datasets with OGR using GRASS v.out.ogr. When I
log into Oracle using sql*plus I cannot run a select-statement on the
dataset without quoting the column-names:

SELECT column FROM dataset;
ERROR at line 1:
ORA-00904: "COLUMN": invalid identifier

SELECT "column" FROM dataset; works.

I have found out, that the columns OGR_FID and ORA_GEOMETRY can be
selected without quotes, but for all attribute-columns the quotes are
needed.

I was also told, that this results from the initial CREATE TABLE
statement, which was done by OGR, where the attribute-columns
were enclosed in quotes, something like this:

create table dataset (
     OGR_FID number(38),
     ORA_GEOMETRY MDSYS.SDO_GEOMETRY,
     "cat" number(38),
     "column" number(38),
     [...]
  ..... ) storage (...) tablespace ... ;

For a select-statement the columns needs to be in quotes as well,
otherwise Oracle does not recognize the column-name correct.

Is this a bug or a feature? Does anybody can give me a hint how to get
arround this?

Best regards

	Stephan
-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060104/44072267/signature.bin
From warmerdam at pobox.com  Wed Jan  4 10:28:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] OCI-Import
In-Reply-To: <20060104113843.66252293@localhost>
References: <20060104113843.66252293@localhost>
Message-ID: <931f8ea90601040728i772bebb4n10bd9243bd90f090@mail.gmail.com>

On 1/4/06, Stephan Holl <sholl@gmx.net> wrote:
> I was also told, that this results from the initial CREATE TABLE
> statement, which was done by OGR, where the attribute-columns
> were enclosed in quotes, something like this:
>
> create table dataset (
>      OGR_FID number(38),
>      ORA_GEOMETRY MDSYS.SDO_GEOMETRY,
>      "cat" number(38),
>      "column" number(38),
>      [...]
>   ..... ) storage (...) tablespace ... ;
>
> For a select-statement the columns needs to be in quotes as well,
> otherwise Oracle does not recognize the column-name correct.
>
> Is this a bug or a feature? Does anybody can give me a hint how to get
> arround this?

Stepan,

I suspect the problem is that lower case field names are
being preserved by the quoting of the field name when they
are created (in OGROCIWritableLayer::CreateField()s
ALTER TABLE command.

If this is the issue, then I think a reasonable solution would
be to launder lower case names to upper, either all the time
in CreateField(), or perhaps only when the layer creation option
"LAUNDER" is set true.

Are you building from source?  If so, I could try committing a
change to do this, and you could test it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sholl at gmx.net  Wed Jan  4 10:46:30 2006
From: sholl at gmx.net (Stephan Holl)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] OCI-Import
In-Reply-To: <931f8ea90601040728i772bebb4n10bd9243bd90f090@mail.gmail.com>
References: <20060104113843.66252293@localhost>
	<931f8ea90601040728i772bebb4n10bd9243bd90f090@mail.gmail.com>
Message-ID: <20060104164630.00c5661c@localhost>

Hello Frank, 

thanks for your quick response.

On Wed, 4 Jan 2006 10:28:05 -0500 Frank Warmerdam <warmerdam@pobox.com>
wrote:

> On 1/4/06, Stephan Holl <sholl@gmx.net> wrote:
> > I was also told, that this results from the initial CREATE TABLE
> > statement, which was done by OGR, where the attribute-columns
> > were enclosed in quotes, something like this:
> >
> > create table dataset (
> >      OGR_FID number(38),
> >      ORA_GEOMETRY MDSYS.SDO_GEOMETRY,
> >      "cat" number(38),
> >      "column" number(38),
> >      [...]
> >   ..... ) storage (...) tablespace ... ;
> >
> > For a select-statement the columns needs to be in quotes as well,
> > otherwise Oracle does not recognize the column-name correct.
> >
> > Is this a bug or a feature? Does anybody can give me a hint how to
> > get arround this?
> 
> Stepan,
> 
> I suspect the problem is that lower case field names are
> being preserved by the quoting of the field name when they
> are created (in OGROCIWritableLayer::CreateField()s
> ALTER TABLE command.
> 
> If this is the issue, then I think a reasonable solution would
> be to launder lower case names to upper, either all the time
> in CreateField(), or perhaps only when the layer creation option
> "LAUNDER" is set true.
> 
> Are you building from source?  If so, I could try committing a
> change to do this, and you could test it.

I could build from source and have a quick test, if you let me know,
which sollution you prefered (LCO-option or all the time).

Best regards

	Stephan

-- 
Stephan Holl

Check headers for GnuPG Key!
http://www.gdf-hannover.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060104/55b76dda/signature.bin
From adrianl_98 at yahoo.com  Wed Jan  4 14:48:50 2006
From: adrianl_98 at yahoo.com (Adrian Lopez)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Borland visual c++ using gdal and ogr
In-Reply-To: <200601041040.k04AennT027075@duke.maptools.org>
Message-ID: <20060104194850.86084.qmail@web30911.mail.mud.yahoo.com>

Hello gdal people.
   
  I?m new using gdal libraries, and i?m trying to develop a program to extract cartographic features,on IKONOS images and math algorithms; i use to work on Borland Visual C++, does some of yours have some ideas or an example to help me to develop it???
   
   
  Thanks.....
   
  Adrian L?pez.(Student)
  Universidad de Alcal?- Madrid. Spain.
   
  

 

		
---------------------------------

Correo Yahoo!
Comprueba qu? es nuevo, aqu?
http://correo.yahoo.es
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060104/72915efb/attachment.html
From lumiousy at yahoo.com.cn  Wed Jan  4 20:50:34 2006
From: lumiousy at yahoo.com.cn (=?gb2312?q?=C2=B3=C3=F4?=)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] error while loading shared libraries: libgdal.so.l
Message-ID: <20060105015034.53639.qmail@web15102.mail.cnb.yahoo.com>

  I installed the gdal in /usr/local.
  I added the /usr/local/lib to the  /etc/ld.so.conf file.
  But I can not use it in my programe demogdal.cpp.
  I have to compile it using -L/usr/local/lib -lgdal option.
  When I run the object file, the error came up as follows:
  error while loading shared libraries: libgdal.so.l: can not open shared object file:No such file or directory.
  But there is a libgdal.so.l in my /usr/local/lib.
  How can I make it?
  Thank you very much.


__________________________________________________
?
http://cn.mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060105/dd706740/attachment.html
From warmerdam at pobox.com  Wed Jan  4 21:06:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] error while loading shared libraries: libgdal.so.l
In-Reply-To: <20060105015034.53639.qmail@web15102.mail.cnb.yahoo.com>
References: <20060105015034.53639.qmail@web15102.mail.cnb.yahoo.com>
Message-ID: <931f8ea90601041806t44f5b210wd57f0ee1b94b33df@mail.gmail.com>

On 1/4/06,  <lumiousy@yahoo.com.cn> wrote:
>
> I installed the gdal in /usr/local.
> I added the /usr/local/lib to the  /etc/ld.so.conf file.
> But I can not use it in my programe demogdal.cpp.
> I have to compile it using -L/usr/local/lib -lgdal option.
> When I run the object file, the error came up as follows:
> error while loading shared libraries: libgdal.so.l: can not open shared
> object file:No such file or directory.
> But there is a libgdal.so.l in my /usr/local/lib.
> How can I make it?

Hi,

I'm no guru on use of ld.so.conf, but don't you need
to run ld.config as root or something?   I normally
just add /usr/local/lib to my LD_LIBRARY_PATH.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Thu Jan  5 04:39:40 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal-grass-ogr plugin 64bit issue
Message-ID: <20060105093940.GD28884@bartok.itc.it>

Hi,

I tried to compile the plugin on a RHEL4 64bit box, but failed.
For some reasons LD_SHARED is set to /bin/true:


g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu\" -I/usr/local/include -I/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/include   -c -o grass57dataset.o grass57dataset.cpp
/bin/true grass57dataset.o -L/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect -lgrass_dbmibase -lgrass_dbmiclient -L/usr/local/lib -lgdal  -o gdal_GRASS.so
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu\" -I/usr/local/include -I/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/include   -c -o ogrgrassdriver.o ogrgrassdriver.cpp
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu\" -I/usr/local/include -I/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/include   -c -o ogrgrassdatasource.o ogrgrassdatasource.cpp
g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu\" -I/usr/local/include -I/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/include   -c -o ogrgrasslayer.o ogrgrasslayer.cpp
/bin/true ogrgrassdriver.o ogrgrassdatasource.o ogrgrasslayer.o -L/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect -lgrass_dbmibase -lgrass_dbmiclient -L/usr/local/lib -lgdal  -o ogr_GRASS.so
/bin/true grass57dataset.o -L/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect -lgrass_dbmibase -lgrass_dbmiclient -L/usr/local/lib -lgdal  -o gdal_GRASS.so
/bin/true ogrgrassdriver.o ogrgrassdatasource.o ogrgrasslayer.o -L/ssi0/ssi/neteler/grass61/dist.x86_64-unknown-linux-gnu/lib -lgrass_I -lgrass_vask -lgrass_gmath -lgrass_gis -lgrass_datetime -lgrass_gproj -lgrass_vect -lgrass_dbmibase -lgrass_dbmiclient -L/usr/local/lib -lgdal  -o ogr_GRASS.so
install -d /usr/local/lib/gdalplugins
cp gdal_GRASS.so /usr/local/lib/gdalplugins
cp: cannot stat `gdal_GRASS.so': No such file or directory


bartok:gdal-grass-1.3.1[4806.157] grep LD Makefile | head -2
LD      =       g++
LD_SHARED       =       /bin/true

But GDAL, GRASS etc compile well. Here related output of the
main 'configure' of GDAL:

...
checking for egrep... grep -E
checking for ld used by gcc... /usr/bin/ld
checking if the linker (/usr/bin/ld) is GNU ld... yes
checking for /usr/bin/ld option to reload object files... -r
...


There seems to be a problem in aclocal.m4 in
 gdal-grass-1.3.1/aclocal.m4
and
 frmts/grass/pkg/aclocal.m4

Thanks

 Markus

From iotc at 3i.co.za  Thu Jan  5 07:04:26 2006
From: iotc at 3i.co.za (Rob Cairns)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Identifying a DEM image programmatically
Message-ID: <01C611F0.2D5ED250.iotc@3i.co.za>

How does one distinguish a digital elevation model from other images programmatically? Hoping someone can help - Rob 

From warmerdam at pobox.com  Thu Jan  5 09:42:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal-grass-ogr plugin 64bit issue
In-Reply-To: <20060105093940.GD28884@bartok.itc.it>
References: <20060105093940.GD28884@bartok.itc.it>
Message-ID: <931f8ea90601050642p4c097655ra2e10b3e60dd586@mail.gmail.com>

On 1/5/06, Markus Neteler <neteler@itc.it> wrote:
> Hi,
>
> I tried to compile the plugin on a RHEL4 64bit box, but failed.
> For some reasons LD_SHARED is set to /bin/true:

Markus,

Can you send me your config.log file privately?  Presumably
something is going wrong with the AC_LD_SHARED
test in aclocal.m4.  If you know the right command to use
you can override it with the --with-ld-shared=<command>
configure option or hand edit it into the makefile after the
fact.  On Linuxish system "c++ -shared" is usually sufficient.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Jan  5 09:45:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Identifying a DEM image programmatically
In-Reply-To: <01C611F0.2D5ED250.iotc@3i.co.za>
References: <01C611F0.2D5ED250.iotc@3i.co.za>
Message-ID: <931f8ea90601050645w1e66b851wc2d85c6003d7a156@mail.gmail.com>

On 1/5/06, Rob Cairns <iotc@3i.co.za> wrote:
> How does one distinguish a digital elevation model from other images programmatically? Hoping someone can help - Rob

Rob,

There is no absolute way to do this with GDAL (or in
general for that matter).  If you get back "m" or "ft" for
the GetUnitType() on a band then it is presumably elevation
data.  However, many elevation formats and general formats
with elevation data will not return that.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From iotc at 3i.co.za  Thu Jan  5 12:21:18 2006
From: iotc at 3i.co.za (Rob Cairns)
Date: Wed Nov 21 11:49:56 2007
Subject: [gdal-dev] identifying a dem image programmatically
Message-ID: <01C6121D.16C7C420.iotc@3i.co.za>

Many thanks Frank. You've just saved me hours of research, I'll put it in as a user defined option - Best Regards Rob

From woklist at kyngchaos.com  Thu Jan  5 10:40:21 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] 1.3.1 on mac
In-Reply-To: <4DDAFD39-36C0-4D59-A39D-B8473FEA1BAE@kyngchaos.com>
References: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>
	<B14B9C1B-9FBE-427C-B277-33C04C63655A@kyngchaos.com>
	<931f8ea90601031105u78b5e4caq656792b56d78f718@mail.gmail.com>
	<4DDAFD39-36C0-4D59-A39D-B8473FEA1BAE@kyngchaos.com>
Message-ID: <5FE75A01-563A-4FBC-9AD8-4DABD96EC497@kyngchaos.com>

Well, I did a diff with geotiff 1.2.2 and what's in the gdal source,  
and there are a few new things from early 2005 in the gdal version -  
added cylidrical eq area, and something to do with *false east/north- 
ings*, among others.

Maybe the standalone libgeotiff is due for an updated release, so  
it's in line with what's in GDAL?

I'll try grabbing the geotiff CVS and see if that helps, when I have  
some time.


On Jan 3, 2006, at 1:50 PM, William Kyngesburye wrote:

>
> (missed the false easting deatil ^_^)
>
> Is there anything different in the internal libtiff/geotiff that  
> might account for that?
>
>
> On Jan 3, 2006, at 1:05 PM, Frank Warmerdam wrote:
>
>> Guys,
>>
>> I have tried reproducing this but was unsuccessful.  I tried
>> it with GDAL CVS and GDAL 1.3.1.  There is a noteworthy
>> difference between the coordinate systems (the false easting).
>>
>> I did my testing using --with-libtiff=internal.
>>
>> Best regards,
>> --
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect

From archer at eskimo.com  Thu Jan  5 11:24:12 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] error while loading shared libraries: libgdal.so.l
In-Reply-To: <931f8ea90601041806t44f5b210wd57f0ee1b94b33df@mail.gmail.com>
References: <20060105015034.53639.qmail@web15102.mail.cnb.yahoo.com>
	<931f8ea90601041806t44f5b210wd57f0ee1b94b33df@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0601050817370.23563@eskimo.com>

On Wed, 4 Jan 2006, Frank Warmerdam wrote:

> I'm no guru on use of ld.so.conf, but don't you need
> to run ld.config as root or something?   I normally
> just add /usr/local/lib to my LD_LIBRARY_PATH.

Edit the "/etc/ld.so.conf" file, add the line "/usr/local/lib" to
it, then run "ldconfig" as root.  This will cause the
"/etc/ld.so.cache" file to be updated to include the new directory.
Don't bother looking at that cache file as it's not human-readable.

Some systems have a directory "/etc/ld.so.conf.d/" instead.  In this
case you create a file in that directory called "local.conf" which
contains the single line "/usr/local/lib", then run "ldconfig -v".

After doing either of the above steps, the dynamic loader will be
able to find libraries in /usr/local/lib.

The LD_LIBRARY_PATH variable method works on most systems too, but
then you have to set it for each user in their shell startup files.
Changing the ld.so.conf file works for all users with just the one
change.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From christian.michels at eifelgeist.com  Thu Jan  5 11:38:46 2006
From: christian.michels at eifelgeist.com (christian.michels@eifelgeist.com)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ogr2ogr and .NET bindings
Message-ID: <6892762.23971136479126968.JavaMail.servlet@kundenserver>

hello,

I would like to use the ogr library whithin a .NET programming environment and I wonder if there is any .NET wrapper out there which makes the ogr2ogr functions accessible ?

thanx for any help !

regards 

chris

From tech_dev at wildintellect.com  Thu Jan  5 13:42:25 2006
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ogr2ogr Point not Point ZM
Message-ID: <43BD6891.6040605@wildintellect.com>

When I do:
ogr2ogr -update -append two.shp one -nln two one -nlt POINT

The appended file, which has no points to begin with(but is basically 
the same as the original with a couple of extra fields and the points 
removed) ends up with geometry of type POINT ZM(3D). I need it to simply 
be POINT(2D), no z or m values. ArcGIS software handles POINT and POINT 
ZM very  differently so they are two distinctly different options.

I thought I had solved it by adding the -nlt POINT portion but it turns 
out that didn't have any effect.

Whats really wierd is that I thought I had this working on a previous 
data set.

Anyone know anything about this?
Alex

From warmerdam at pobox.com  Thu Jan  5 14:27:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ogr2ogr Point not Point ZM
In-Reply-To: <43BD6891.6040605@wildintellect.com>
References: <43BD6891.6040605@wildintellect.com>
Message-ID: <931f8ea90601051127u2690a7dcwd0db39e892b861cc@mail.gmail.com>

On 1/5/06, Alex Mandel <tech_dev@wildintellect.com> wrote:
> When I do:
> ogr2ogr -update -append two.shp one -nln two one -nlt POINT
>
> The appended file, which has no points to begin with(but is basically
> the same as the original with a couple of extra fields and the points
> removed) ends up with geometry of type POINT ZM(3D). I need it to simply
> be POINT(2D), no z or m values. ArcGIS software handles POINT and POINT
> ZM very  differently so they are two distinctly different options.
>
> I thought I had solved it by adding the -nlt POINT portion but it turns
> out that didn't have any effect.

Alex,

If two.shp already exists, then whether it is POINT or POINTZM is
already established.  How are you creating it?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From antonin.orlik.hgf at vsb.cz  Thu Jan  5 15:06:45 2006
From: antonin.orlik.hgf at vsb.cz (Antonin Orlik)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Datum shifting in GDAL utilities
In-Reply-To: <200512040049.jB40nQoH013939@duke.maptools.org>
References: <200512040049.jB40nQoH013939@duke.maptools.org>
Message-ID: <43BD7C55.7040301@vsb.cz>

Dear developers,

please, could anybody tell me why the ogr2ogr and gdal_warp are using 
proj utility for coordinates transformation instead of cs2cs utility? 
This fact makes quite a big  position error after the coordinate 
transformation between coordinate systems based on diferent ellipsoids 
(the proj utility cannot make datum shifting).

Thank you.

Antonin Orlik



From tech_dev at wildintellect.com  Thu Jan  5 15:13:54 2006
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ogr2ogr Point not Point ZM
In-Reply-To: <931f8ea90601051127u2690a7dcwd0db39e892b861cc@mail.gmail.com>
References: <43BD6891.6040605@wildintellect.com>
	<931f8ea90601051127u2690a7dcwd0db39e892b861cc@mail.gmail.com>
Message-ID: <43BD7E02.9050002@wildintellect.com>

Frank Warmerdam wrote:
> On 1/5/06, Alex Mandel <tech_dev@wildintellect.com> wrote:
> 
>>When I do:
>>ogr2ogr -update -append two.shp one -nln two one -nlt POINT
>>
>>The appended file, which has no points to begin with(but is basically
>>the same as the original with a couple of extra fields and the points
>>removed) ends up with geometry of type POINT ZM(3D). I need it to simply
>>be POINT(2D), no z or m values. ArcGIS software handles POINT and POINT
>>ZM very  differently so they are two distinctly different options.
>>
>>I thought I had solved it by adding the -nlt POINT portion but it turns
>>out that didn't have any effect.
> 
> 
> Alex,
> 
> If two.shp already exists, then whether it is POINT or POINTZM is
> already established.  How are you creating it?
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
I made two.shp by taking one.shp opening it in ArcMap, removing the 
points, adding fields and then saving the changes.

If I check the properties on two.shp & one.shp in ArcCatalog before I do 
the append, under GEOMETRY it says
GEOMETRY Type Point
Contains Z values No
Contains M values No

After the append, two.shp says
GEOMETRY Type Point
Contains Z values Yes
Contains M values Yes

It wouldn't surprise me if there is some ESRI monkey business in the 
background that I don't know about when I go to look at the file in Arc 
after the append.

Alex

Sorry if this posts twice - wierd email glitch.

From tech_dev at wildintellect.com  Thu Jan  5 15:17:04 2006
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ogr2ogr Point not Point ZM
In-Reply-To: <931f8ea90601051127u2690a7dcwd0db39e892b861cc@mail.gmail.com>
References: <43BD6891.6040605@wildintellect.com>
	<931f8ea90601051127u2690a7dcwd0db39e892b861cc@mail.gmail.com>
Message-ID: <43BD7EC0.1050208@wildintellect.com>

Frank Warmerdam wrote:
> On 1/5/06, Alex Mandel <tech_dev@wildintellect.com> wrote:
> 
>>When I do:
>>ogr2ogr -update -append two.shp one -nln two one -nlt POINT
>>
>>The appended file, which has no points to begin with(but is basically
>>the same as the original with a couple of extra fields and the points
>>removed) ends up with geometry of type POINT ZM(3D). I need it to simply
>>be POINT(2D), no z or m values. ArcGIS software handles POINT and POINT
>>ZM very  differently so they are two distinctly different options.
>>
>>I thought I had solved it by adding the -nlt POINT portion but it turns
>>out that didn't have any effect.
> 
> 
> Alex,
> 
> If two.shp already exists, then whether it is POINT or POINTZM is
> already established.  How are you creating it?
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
I made two.shp by taking one.shp opening it in ArcMap, removing the
points, adding fields and then saving the changes.

If I check the properties on two.shp & one.shp in ArcCatalog before I do
the append, under GEOMETRY it says
GEOMETRY Type Point
Contains Z values No
Contains M values No

After the append, two.shp says
GEOMETRY Type Point
Contains Z values Yes
Contains M values Yes

It wouldn't surprise me if there is some ESRI monkey business in the
background that I don't know about when I go to look at the file in Arc
after the append.

Alex

Sorry if this posts twice - wierd email glitch.


From warmerdam at pobox.com  Thu Jan  5 15:29:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Datum shifting in GDAL utilities
In-Reply-To: <43BD7C55.7040301@vsb.cz>
References: <200512040049.jB40nQoH013939@duke.maptools.org>
	<43BD7C55.7040301@vsb.cz>
Message-ID: <931f8ea90601051229m33a355d5x6e2978d62a1b556b@mail.gmail.com>

On 1/5/06, Antonin Orlik <antonin.orlik.hgf@vsb.cz> wrote:
> Dear developers,
>
> please, could anybody tell me why the ogr2ogr and gdal_warp are using
> proj utility for coordinates transformation instead of cs2cs utility?
> This fact makes quite a big  position error after the coordinate
> transformation between coordinate systems based on diferent ellipsoids
> (the proj utility cannot make datum shifting).

Antonin,

The ogr2ogr and gdalwarp programs use the pj_transform()
entry point in libproj.so (or PROJ.DLL) the same as cs2cs.
Could you be more specific why you think the programs
aren't doing datum shifting?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dylan.beaudette at gmail.com  Fri Jan  6 13:02:09 2006
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] output types in r.out.gdal
Message-ID: <200601061002.12082.dylan.beaudette@gmail.com>

Hi everyone,

I have been working with some landsat imagery in GRASS, and am wondering if 
there is a concise description somewhere on the relative differences between 
the different "type" options that exist in the GRASS function r.out.gdal. 
i.e. what is really meant, in terms of image quality or portability, by 
'Byte', 'Int16', 'UInt16', .... etc?

Thanks!


-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From warmerdam at pobox.com  Fri Jan  6 14:13:25 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ogr2ogr Point not Point ZM
In-Reply-To: <43BD6891.6040605@wildintellect.com>
References: <43BD6891.6040605@wildintellect.com>
Message-ID: <931f8ea90601061113q21d9f23egb5aa7511ec5c9a07@mail.gmail.com>

On 1/5/06, Alex Mandel <tech_dev@wildintellect.com> wrote:
> When I do:
> ogr2ogr -update -append two.shp one -nln two one -nlt POINT
>
> The appended file, which has no points to begin with(but is basically
> the same as the original with a couple of extra fields and the points
> removed) ends up with geometry of type POINT ZM(3D). I need it to simply
> be POINT(2D), no z or m values. ArcGIS software handles POINT and POINT
> ZM very  differently so they are two distinctly different options.
>
> I thought I had solved it by adding the -nlt POINT portion but it turns
> out that didn't have any effect.
>
> Whats really wierd is that I thought I had this working on a previous
> data set.

Folks,

For posterity with Alex's help I was able to determine that
ogr2ogr was actually altering the dimension of the shapefile.
This was the result of two bugs.

1) the OGRPoint::clone() method was not preserving the
   dimension of the source point properly.  I have fixed this.

2) the OGRShapeLayer::CreateFeature() method was setup to
    fix the type of the shapefile based on the first feature written
    if it had no previous information.  I had only intended this to
    apply in the case of a newly created layer, but by a quirk of
    the code it also applied to empty existing files that get
    opened.  I have fixed this.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bhudspeth at edac.unm.edu  Fri Jan  6 15:46:53 2006
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Problems installing GDAL 1.3.1 on Red hat enterprise
	linux advanced server 3.0.
Message-ID: <1136580413.3701.7.camel@localhost.localdomain>

Hello, I am trying to install GDAL 1.3.1 on Red hat enterprise linux
advanced server 3.0. 

I have configured successfully with the following:

./configure --prefix=/usr/local/gdal --without-grass --with-python --
with-hdf4=/usr/local/hdf4/lib

But then get errors on make:

EHapi.c:3524: syntax error before "EHclose"
EHapi.c:3524: syntax error before "fid"
EHapi.c:3525: warning: return type defaults to `int'
EHapi.c: In function `EHclose':
EHapi.c:3526: `intn' undeclared (first use in this function)
EHapi.c:3526: syntax error before "status"
EHapi.c:3535: `fid' undeclared (first use in this function)
EHapi.c:3539: `fid0' undeclared (first use in this function)
EHapi.c:3544: `HDFfid' undeclared (first use in this function)
EHapi.c:3545: `sdInterfaceID' undeclared (first use in this function)
EHapi.c:3549: warning: implicit declaration of function `SDend'
EHapi.c:3562: `DFE_RANGE' undeclared (first use in this function)
/usr/include/bits/mathinline.h: At top level:
cfortHdf.h:283: warning: `c2fstrv' defined but not used
cfortHdf.h:299: warning: `f2cstrv' defined but not used
cfortHdf.h:346: warning: `vkill_trailing' defined but not used
cfortHdf.h:393: warning: `num_elem' defined but not used
cfortHdf.h:443: warning: `__cfztringv' defined but not used
make[3]: *** [../../o/EHapi.o] Error 1
make[3]: Leaving directory `/usr/local/src/gdal-1.3.1/frmts/hdf4/hdf-eos'
make[2]: *** [lib-hdfeos] Error 2
make[2]: Leaving directory `/usr/local/src/gdal-1.3.1/frmts/hdf4'
make[1]: *** [hdf4-install-obj] Error 2
make[1]: Leaving directory `/usr/local/src/gdal-1.3.1/frmts'
make: *** [frmts-target] Error 2


Thanks, Bill


From warmerdam at pobox.com  Fri Jan  6 16:46:10 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Problems installing GDAL 1.3.1 on Red hat enterprise
	linux advanced server 3.0.
In-Reply-To: <1136580413.3701.7.camel@localhost.localdomain>
References: <1136580413.3701.7.camel@localhost.localdomain>
Message-ID: <931f8ea90601061346j3f6a1409ja7b12aa96a8c51f@mail.gmail.com>

On 1/6/06, William Hudspeth <bhudspeth@edac.unm.edu> wrote:
> Hello, I am trying to install GDAL 1.3.1 on Red hat enterprise linux
> advanced server 3.0.
>
> I have configured successfully with the following:
>
> ./configure --prefix=/usr/local/gdal --without-grass --with-python --
> with-hdf4=/usr/local/hdf4/lib

Bill,

Are the following really the first errors reported?  It seems
like some of the include files may not be found, but then there
should be other errors reported.  The "--with-hdf4=/usr/local/hdf4/lib"
also seems a bit odd.  Shouldn't you be pointing it at the base
directory?  The level about the lib directory?

> But then get errors on make:
>
> EHapi.c:3524: syntax error before "EHclose"
> EHapi.c:3524: syntax error before "fid"
> EHapi.c:3525: warning: return type defaults to `int'

Best regards,
--

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dylan.beaudette at gmail.com  Fri Jan  6 17:03:32 2006
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] error while making overviews with gdaladdo on output
	from r.out.tiff
Message-ID: <200601061403.32927.dylan.beaudette@gmail.com>

Greetings,

Looks like there may be a bug in either r.out.tiff or gdaladdo:

trying to add overviews to a tiff created with r.out.tiff:
gdaladdo ca_landsat_shade_20.tif.tif 2 4 8 16

0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 1: TIFFWriteEncodedTile:ca_landsat_shade_20.tif.tif: Tile 288 out of 
range, max 9
ERROR 1: TIFFWriteEncodedTile() failed.

if first use gdal_translate to copy the problem tiff file, creation of 
overviews works fine.

Ideas? Should I post this as a bug on either project's bug tracker?

Thanks!

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From marchesini at unipg.it  Fri Jan  6 05:14:44 2006
From: marchesini at unipg.it (ivan marchesini)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ecw
Message-ID: <1136542485.5917.11.camel@geologia5.agora.ing.unipg.it>

Hi list...
I have tried to compile the gdal.1.3.1  against the ecwsdk.3.1
downloaded from http://www.gdal.org/dl/

I have a system with debian testing-unstable (a mix)
I have already installed GrassGis against gdal (without ecw)
and now I try to compile the gdal libraries with ecw support
these are the steps:

__________________________________________________
  ./configure --with-grass=/usr/local/grass-6.1.cvs/
--with-ecw=/home/ivan/Documents/GRASS/GDAL/ecwsdk-3.1.25Jan05-linux
.....
.......
.......
GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -O2
  C++ compiler:              g++ -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             grass57+
  CFITSIO support:           no
  PCRaster support:          internal
  NETCDF support:            no
  LIBPNG support:            external
  LIBTIFF support:           external
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              yes
  HDF5 support:              no
  KAKADU support:            no
  JASPER support:            yes (GeoJP2=no)
  ECW support:               yes
  MrSID support:             no
  POSTGRESQL support:        yes
  MySQL support:             no
  XERCES support:            no
  ODBC support:              no
  OCI support:               no
  DODS support:              no
  SQLite support:            no
  GEOS support:              yes

  Statically link PROJ.4:    no

  Traditional Python:        no
  NG SWIG Bindings:

  enable OGR building:       yes
_______________________________________________

It seems all ok!!!!
then "make" but I obtain this error:

___________________________________________________
 make[2]: Entering directory
`/home/ivan/Documents/GRASS/GDAL/gdal-1.3.1/frmts/ec
w'
/bin/sh ../../libtool --mode=compile g++ -Wall  -O2   -I../../port
-I../../gcore
 -I../../alg -I../../ogr -I../../ogr/ogrsf_frmts -DFRMT_ecw -I../../port
-I/home
/ivan/Documents/GRASS/GDAL/ecwsdk-3.1.25Jan05-linux/include  -c
-o ../o/ecwdatas
et.o ecwdataset.cpp
 g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr
-I../../ogr/og
rsf_frmts -DFRMT_ecw -I../../port
-I/home/ivan/Documents/GRASS/GDAL/ecwsdk-3.1.2
5Jan05-linux/include -c ecwdataset.cpp  -fPIC -DPIC
-o ../o/.libs/ecwdataset.o
/home/ivan/Documents/GRASS/GDAL/ecwsdk-3.1.25Jan05-linux/include/NCSJP2FileView.
h:820: error: ISO C++ forbids declaration of 'CNCSJPCResample' with no
type
/home/ivan/Documents/GRASS/GDAL/ecwsdk-3.1.25Jan05-linux/include/NCSJP2FileView.
h:820: error: expected ';' before '*' token
/home/ivan/Documents/GRASS/GDAL/ecwsdk-3.1.25Jan05-linux/include/NCSJPCPacket.h:
32: warning: 'class CNCSJPCPacket' has virtual functions but non-virtual
destruc
tor
make[2]: *** [../o/ecwdataset.o] Error 1
make[2]: Leaving directory
`/home/ivan/Documents/GRASS/GDAL/gdal-1.3.1/frmts/ecw
'
make[1]: *** [ecw-install-obj] Error 2
make[1]: Leaving directory
`/home/ivan/Documents/GRASS/GDAL/gdal-1.3.1/frmts'
make: *** [frmts-target] Error 2
_____________________________________________________________-


Can someone help me to solve this problem????
thank you very much for your help!!!
ivan







-- 
Ivan Marchesini
Department of Civil and Environmental Engineering
University of Perugia
Via G. Duranti 93/a 
06125
Perugia (Italy)
e-mail: marchesini@unipg.it
        ivan.marchesini@gmail.com
tel: +39(0)755853760
fax: +39(0)755853756






From tech_dev at wildintellect.com  Fri Jan  6 17:17:16 2006
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Compile just ogr2ogr on its own.
Message-ID: <43BEEC6C.1030707@wildintellect.com>

So I've got a program I wrote in python.
It relies on the ogr2ogr function currently referencing the FWtools exe.
I would prefer if I could do one of the following.

1.Wrap the C Library somehow so I can directly call the ogr2ogr in 
Python. When I originally tried this it seemed like I could get under 
the hood of ogr2ogr but not just call the function and since I don't 
know the specifics of how it works, and I'm not up to par on my C that 
just didn't pan out.

2.Compile just the ogr piece of the GDAL library to exe. Using the whole 
thing really isn't any better than just making my users install FWtools.

If you have any links  or thoughts on how to do this please let me know.
Keep in mind it all has to run on windows and I only have access to free 
tools. Cygwin, mingw, or a linux box.

Thanks - Alex

From warmerdam at pobox.com  Fri Jan  6 17:25:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] ecw
In-Reply-To: <1136542485.5917.11.camel@geologia5.agora.ing.unipg.it>
References: <1136542485.5917.11.camel@geologia5.agora.ing.unipg.it>
Message-ID: <931f8ea90601061425t7c790789gc841f1fb8ac6300b@mail.gmail.com>

On 1/6/06, ivan marchesini <marchesini@unipg.it> wrote:
> Hi list...
> I have tried to compile the gdal.1.3.1  against the ecwsdk.3.1
> downloaded from http://www.gdal.org/dl/
>
> I have a system with debian testing-unstable (a mix)
> I have already installed GrassGis against gdal (without ecw)
> and now I try to compile the gdal libraries with ecw support
> these are the steps:

Ivan,

I don't think GDAL supports the 3.1 SDK anymore.  I would
suggest downloading the current release candidate and installing
that for use with GDAL.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From chrisg at biology.usu.edu  Fri Jan  6 17:32:18 2006
From: chrisg at biology.usu.edu (Chris Garrard)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Error building with ECW support on Solaris
Message-ID: <B89F79C2B2CCFD4D9183A60092A975361D7E48@bioserver.biology.usu.edu>

Hi,

I'm trying to build GDAL 1.3.1 with support for ECW on Solaris 10.  I
got v3.3 RC1 of the ECW source code and built it and can run one of the
examples (I didn't try the others).  But when I try to compile GDAL I
get the following error.  I also tried it on Solaris 8 and had the same
problem.  I'd love it if someone could point me in the right direction
to fix this.  Thanks!

Chris

g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr
-I../../ogr/ogrsf_frmts -DFRMT_ecw -I../../port
-I/opt/csw/extras/ecw/include -I/opt/csw/extras/jasper
-I/opt/csw/extras/jasper/include -c ecwdataset.cpp  -fPIC -DPIC -o
../o/.libs/ecwdataset.o
In file included from /opt/csw/extras/ecw/include/NCSDefs.h:34,
                 from /opt/csw/extras/ecw/include/NCSECWClient.h:46,
                 from vsiiostream.h:76,
                 from ecwdataset.cpp:150:
/opt/csw/extras/ecw/include/NCSTypes.h:4:1: warning: "_LARGEFILE_SOURCE"
redefined
In file included from
/opt/csw/gcc3/lib/gcc/sparc-sun-solaris2.8/3.4.4/include/stdio.h:36,
                 from ../../port/cpl_port.h:179,
                 from ../../gcore/gdal.h:129,
                 from ../../gcore/gdal_priv.h:256,
                 from ../../gcore/gdal_pam.h:54,
                 from ecwdataset.cpp:145:
/usr/include/sys/feature_tests.h:164:1: warning: this is the location of
the previous definition
In file included from /opt/csw/extras/ecw/include/NCSDefs.h:34,
                 from /opt/csw/extras/ecw/include/NCSECWClient.h:46,
                 from vsiiostream.h:76,
                 from ecwdataset.cpp:150:
/opt/csw/extras/ecw/include/NCSTypes.h:5:28: warning: ISO C requires
whitespace after the macro name
/opt/csw/extras/ecw/include/NCSTypes.h:5:1: warning: "_FILE_OFFSET_BITS"
redefined
In file included from
/opt/csw/gcc3/lib/gcc/sparc-sun-solaris2.8/3.4.4/include/stdio.h:36,
                 from ../../port/cpl_port.h:179,
                 from ../../gcore/gdal.h:129,
                 from ../../gcore/gdal_priv.h:256,
                 from ../../gcore/gdal_pam.h:54,
                 from ecwdataset.cpp:145:
/usr/include/sys/feature_tests.h:188:1: warning: this is the location of
the previous definition
In file included from /opt/csw/extras/ecw/include/NCSDefs.h:34,
                 from /opt/csw/extras/ecw/include/NCSECWClient.h:46,
                 from vsiiostream.h:76,
                 from ecwdataset.cpp:150:
/opt/csw/extras/ecw/include/NCSTypes.h:6:30: warning: ISO C requires
whitespace after the macro name
/opt/csw/extras/ecw/include/NCSTypes.h:6:1: warning:
"_LARGEFILE64_SOURCE" redefined
In file included from
/opt/csw/gcc3/lib/gcc/sparc-sun-solaris2.8/3.4.4/include/stdio.h:36,
                 from ../../port/cpl_port.h:179,
                 from ../../gcore/gdal.h:129,
                 from ../../gcore/gdal_priv.h:256,
                 from ../../gcore/gdal_pam.h:54,
                 from ecwdataset.cpp:145:
/usr/include/sys/feature_tests.h:160:1: warning: this is the location of
the previous definition
In file included from /usr/include/fcntl.h:23,
                 from /opt/csw/extras/ecw/include/NCSFileIO.h:115,
                 from /opt/csw/extras/ecw/include/NCSJPCIOStream.h:30,
                 from /opt/csw/extras/ecw/include/NCSJP2Box.h:27,
                 from /opt/csw/extras/ecw/include/NCSJP2FileView.h:43,
                 from /opt/csw/extras/ecw/include/NCSFile.h:26,
                 from vsiiostream.h:79,
                 from ecwdataset.cpp:150:
/usr/include/sys/fcntl.h:125:23: token "=" is not valid in preprocessor
expressions
In file included from /opt/csw/extras/ecw/include/NCSFileIO.h:115,
                 from /opt/csw/extras/ecw/include/NCSJPCIOStream.h:30,
                 from /opt/csw/extras/ecw/include/NCSJP2Box.h:27,
                 from /opt/csw/extras/ecw/include/NCSJP2FileView.h:43,
                 from /opt/csw/extras/ecw/include/NCSFile.h:26,
                 from vsiiostream.h:79,
                 from ecwdataset.cpp:150:
/usr/include/fcntl.h:48:24: token "=" is not valid in preprocessor
expressions
/usr/include/fcntl.h:103:40: token "=" is not valid in preprocessor
expressions
In file included from /opt/csw/extras/ecw/include/NCSJPCPLTMarker.h:26,
                 from
/opt/csw/extras/ecw/include/NCSJPCTilePartHeader.h:33,
                 from /opt/csw/extras/ecw/include/NCSJPC.h:28,
                 from /opt/csw/extras/ecw/include/NCSJP2File.h:61,
                 from vsiiostream.h:80,
                 from ecwdataset.cpp:150:
/opt/csw/extras/ecw/include/NCSJPCNode.h: In member function `virtual
bool CNCSJPCNode::WriteLine(void*, CNCSJPCBuffer*, UINT16)':
/opt/csw/extras/ecw/include/NCSJPCNode.h:127: warning: statement has no
effect
/opt/csw/extras/ecw/include/NCSJPCNode.h:127: warning: statement has no
effect
/opt/csw/extras/ecw/include/NCSJPCNode.h:127: warning: statement has no
effect
In file included from /opt/csw/extras/ecw/include/NCSJPCPrecinct.h:25,
                 from /opt/csw/extras/ecw/include/NCSJPCResolution.h:25,
                 from /opt/csw/extras/ecw/include/NCSJPCComponent.h:31,
                 from
/opt/csw/extras/ecw/include/NCSJPCTilePartHeader.h:36,
                 from /opt/csw/extras/ecw/include/NCSJPC.h:28,
                 from /opt/csw/extras/ecw/include/NCSJP2File.h:61,
                 from vsiiostream.h:80,
                 from ecwdataset.cpp:150:
/opt/csw/extras/ecw/include/NCSJPCSubBand.h: In member function `virtual
UINT32 CNCSJPCSubBand::GetNodeWidth(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCSubBand.h:175: warning: statement has
no effect
/opt/csw/extras/ecw/include/NCSJPCSubBand.h: In member function `virtual
UINT32 CNCSJPCSubBand::GetNodeHeight(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCSubBand.h:183: warning: statement has
no effect
/opt/csw/extras/ecw/include/NCSJPCSubBand.h: In member function `virtual
UINT32 CNCSJPCSubBand::GetNumNodesWide(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCSubBand.h:191: warning: statement has
no effect
/opt/csw/extras/ecw/include/NCSJPCSubBand.h: In member function `virtual
UINT32 CNCSJPCSubBand::GetNumNodesHigh(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCSubBand.h:199: warning: statement has
no effect
In file included from /opt/csw/extras/ecw/include/NCSJPCComponent.h:31,
                 from
/opt/csw/extras/ecw/include/NCSJPCTilePartHeader.h:36,
                 from /opt/csw/extras/ecw/include/NCSJPC.h:28,
                 from /opt/csw/extras/ecw/include/NCSJP2File.h:61,
                 from vsiiostream.h:80,
                 from ecwdataset.cpp:150:
/opt/csw/extras/ecw/include/NCSJPCResolution.h: In member function
`virtual UINT32 CNCSJPCResolution::GetNodeWidth(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCResolution.h:252: warning: statement
has no effect
/opt/csw/extras/ecw/include/NCSJPCResolution.h: In member function
`virtual UINT32 CNCSJPCResolution::GetNodeHeight(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCResolution.h:260: warning: statement
has no effect
/opt/csw/extras/ecw/include/NCSJPCResolution.h: In member function
`virtual UINT32 CNCSJPCResolution::GetNumNodesWide(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCResolution.h:268: warning: statement
has no effect
/opt/csw/extras/ecw/include/NCSJPCResolution.h: In member function
`virtual UINT32 CNCSJPCResolution::GetNumNodesHigh(UINT16)':
/opt/csw/extras/ecw/include/NCSJPCResolution.h:276: warning: statement
has no effect
/opt/csw/extras/ecw/include/NCSJPCResolution.h: In member function
`virtual CNCSJPCNode* CNCSJPCResolution::GetNodePtr(UINT32, UINT16)':
/opt/csw/extras/ecw/include/NCSJPCResolution.h:285: warning: statement
has no effect
gmake[2]: *** [../o/ecwdataset.o] Error 1
gmake[2]: Leaving directory `/opt/csw/extras/gdal-1.3.1/frmts/ecw'
gmake[1]: *** [ecw-install-obj] Error 2
gmake[1]: Leaving directory `/opt/csw/extras/gdal-1.3.1/frmts'
gmake: *** [frmts-target] Error 2


From jeshua at OpenOSX.com  Sat Jan  7 07:39:45 2006
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_contour missing contours!
Message-ID: <765cd80d861914d72884766e4df5a5cf@OpenOSX.com>


Hello,

This is almost certainly a user error, though I cannot figure it out.

I have a DEM (from NED imported to a new location with r.in.gdal -oe) 
in GRASS that reports that the min/max Z values are:

   min = 958.760071 max = 2162.167236

But when I export it to a TIFF (with r.out.tiff) and use the command:

  	gdal_contour -a elev mydem.tif my-countours -i 10.0

It successfully creates a shape file with levels going in increments of 
10 from 0 to 250. But there are many missing levels (below 0 and above 
250), for example see:
	<http://OpenOSX.com/missing-contours.png>

A sample TIFF of the DEM is here:

	http://OpenOSX.com/mydem.tif

How would I get gdal_contour to use the same values for the cells that 
GRASS uses (not 0-250, but the actual DEM elevation values)? Or short 
of that, how would I get it to draw all of the contours?

Any help is greatly appreciated.


Thanks,

Jeshua Lacock ___________________________
Programmer/Owner		Phone:	877.240.1364
http://OpenOSX.com		Fax:		415.462.6211
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_


From warmerdam at pobox.com  Sat Jan  7 11:24:08 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_contour missing contours!
In-Reply-To: <765cd80d861914d72884766e4df5a5cf@OpenOSX.com>
References: <765cd80d861914d72884766e4df5a5cf@OpenOSX.com>
Message-ID: <931f8ea90601070824g14a0ca19j8592b00c8ae1d225@mail.gmail.com>

On 1/7/06, Jeshua Lacock <jeshua@openosx.com> wrote:
>
> Hello,
>
> This is almost certainly a user error, though I cannot figure it out.
>
> I have a DEM (from NED imported to a new location with r.in.gdal -oe)
> in GRASS that reports that the min/max Z values are:
>
>    min = 958.760071 max = 2162.167236
>
> But when I export it to a TIFF (with r.out.tiff) and use the command:
>
>         gdal_contour -a elev mydem.tif my-countours -i 10.0
>
> It successfully creates a shape file with levels going in increments of
> 10 from 0 to 250. But there are many missing levels (below 0 and above
> 250), for example see:
>         <http://OpenOSX.com/missing-contours.png>
>
> A sample TIFF of the DEM is here:
>
>         http://OpenOSX.com/mydem.tif
>
> How would I get gdal_contour to use the same values for the cells that
> GRASS uses (not 0-250, but the actual DEM elevation values)? Or short
> of that, how would I get it to draw all of the contours?

Jeshua,

mydem.tif isn't a DEM, it's a colored encoding of a DEM
in RGB.   You need to generate the DEM against the
original DEM data.

warmerda@gdal2200[6]% gdalinfo -mm mydem.tif
Driver: GTiff/GeoTIFF
Size is 339, 467
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  467.0)
Upper Right (  339.0,    0.0)
Lower Right (  339.0,  467.0)
Center      (  169.5,  233.5)
Band 1 Block=339x8 Type=Byte, ColorInterp=Red
    Computed Min/Max=0.000,255.000
Band 2 Block=339x8 Type=Byte, ColorInterp=Green
    Computed Min/Max=0.000,255.000
Band 3 Block=339x8 Type=Byte, ColorInterp=Blue
    Computed Min/Max=0.000,255.000


Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Dan.Putler at sauder.ubc.ca  Sat Jan  7 14:10:07 2006
From: Dan.Putler at sauder.ubc.ca (Putler, Dan)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal-grass install problems redux
Message-ID: <5EC40973-7F2D-4A71-BD02-030F96A578C9@sauder.ubc.ca>

Hi,

I am running into an identical install problem as Maik Tr?mel  
reported on 9 December. I'm running on an old P3 machine (so the  
potential problems with x64 aren't relevant in my case). In addition,  
I'm running FC4, while Maik (based on the configure output) is  
running SUSE. The particular relevant software versions I'm running are:

proj 4.4.9
gdal 1.3.1
grass 6.0.1
geos 2.2.1

I built each of these from source. The one other piece of information  
that may be relevant is that grass was build with the --with-gdal  
option. The output of the configure is:

[putler@ha667-1 gdal-grass-1.3.1]$ ./configure --with-gdal=/usr/local/ 
bin/gdal-config --with-grass=/usr/local/grass-6.0.1
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
user supplied gdal-config (/usr/local/bin/gdal-config)
using /usr/local/lib/gdalplugins as GDAL shared library autoload  
directory
checking for G_asprintf in -lgrass_gis... no
configure: error: --with-grass=/usr/local/grass-6.0.1 requested, but  
libraries not found!

Dan 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060107/d330082e/attachment.html
From jeshua at OpenOSX.com  Sat Jan  7 16:02:49 2006
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_contour missing contours!
In-Reply-To: <931f8ea90601070824g14a0ca19j8592b00c8ae1d225@mail.gmail.com>
References: <765cd80d861914d72884766e4df5a5cf@OpenOSX.com>
	<931f8ea90601070824g14a0ca19j8592b00c8ae1d225@mail.gmail.com>
Message-ID: <b1749c01b0ef4b7f2f8520edfa298725@OpenOSX.com>


On Jan 7, 2006, at 9:24 AM, Frank Warmerdam wrote:

> mydem.tif isn't a DEM, it's a colored encoding of a DEM
> in RGB.   You need to generate the DEM against the
> original DEM data.
>
> warmerda@gdal2200[6]% gdalinfo -mm mydem.tif
> Driver: GTiff/GeoTIFF
> Size is 339, 467
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  467.0)
> Upper Right (  339.0,    0.0)
> Lower Right (  339.0,  467.0)
> Center      (  169.5,  233.5)
> Band 1 Block=339x8 Type=Byte, ColorInterp=Red
>     Computed Min/Max=0.000,255.000
> Band 2 Block=339x8 Type=Byte, ColorInterp=Green
>     Computed Min/Max=0.000,255.000
> Band 3 Block=339x8 Type=Byte, ColorInterp=Blue
>     Computed Min/Max=0.000,255.000

Doh!

Of course, I was starting to suspect that myself.

Can you recommend a method of exporting a DEM from GRASS?



Thanks again,

Jeshua Lacock ___________________________
Programmer/Owner		Phone:	877.240.1364
http://OpenOSX.com		Fax:		415.462.6211
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_


From warmerdam at pobox.com  Sat Jan  7 16:29:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_contour missing contours!
In-Reply-To: <b1749c01b0ef4b7f2f8520edfa298725@OpenOSX.com>
References: <765cd80d861914d72884766e4df5a5cf@OpenOSX.com>
	<931f8ea90601070824g14a0ca19j8592b00c8ae1d225@mail.gmail.com>
	<b1749c01b0ef4b7f2f8520edfa298725@OpenOSX.com>
Message-ID: <931f8ea90601071329n48d3798ev167c50e8cb70c5e0@mail.gmail.com>

On 1/7/06, Jeshua Lacock <jeshua@openosx.com> wrote:
>
> Doh!
>
> Of course, I was starting to suspect that myself.
>
> Can you recommend a method of exporting a DEM from GRASS?

Jeshua,

I assume that r.out.gdal to an appropriate format (such as
GeoTIFF) would do the trick if you have that setup properly.
If not, I was just successful with the sequence:

r.out.bin -b input=elevation output=etopo5
gdal_contour -i 200 etopo5 contour

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Dan.Putler at sauder.ubc.ca  Sat Jan  7 19:24:20 2006
From: Dan.Putler at sauder.ubc.ca (Putler, Dan)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal-grass install problems redux
In-Reply-To: urn:content-classes:message
Message-ID: <DEE9532E-8C6B-4E6C-BED5-B94446BC9386@sauder.ubc.ca>

OK, so editing /etc/ld.so.conf to include the library and config  
locations of proj, gdal, grass, and geos, and then running ldconfig  
solves the problem. It took a while to find the appropriate email  
thread from this list to set me straight. Frank, you might want to  
mention the potential need to do this in the HELP file of gdal-grass  
to prevent posts on this topic from the the lesser informed to this  
list.

Dan

On 7-Jan-06, at 11:10 AM, Putler, Dan wrote:

> Hi,
>
> I am running into an identical install problem as Maik Tr?mel
> reported on 9 December. I'm running on an old P3 machine (so the
> potential problems with x64 aren't relevant in my case). In addition,
> I'm running FC4, while Maik (based on the configure output) is
> running SUSE. The particular relevant software versions I'm running  
> are:
>
> proj 4.4.9
> gdal 1.3.1
> grass 6.0.1
> geos 2.2.1
>
> I built each of these from source. The one other piece of information
> that may be relevant is that grass was build with the --with-gdal
> option. The output of the configure is:
>
> [putler@ha667-1 gdal-grass-1.3.1]$ ./configure --with-gdal=/usr/local/
> bin/gdal-config --with-grass=/usr/local/grass-6.0.1
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking for g++... g++
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> checking for ranlib... ranlib
> checking for g++ -shared ... yes
> user supplied gdal-config (/usr/local/bin/gdal-config)
> using /usr/local/lib/gdalplugins as GDAL shared library autoload
> directory
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/usr/local/grass-6.0.1 requested, but
> libraries not found!
>
> Dan
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060107/56ba76cf/attachment.html
From alucas at srtec.com  Sun Jan  8 07:38:44 2006
From: alucas at srtec.com (alucas@srtec.com)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <2244.81.202.152.223.1136723924.squirrel@www.srtec.com>

Hello,
I've a problem with fwtools and vc++ 6.0 gdi to show "utm.tif" sample. If
I set Bitcount= 8 the colors are showed incorrectly but if I set
BitCount=24 the colors are showed correctly but the raster is showed very
small and repeatly but the colors are correct. Any idea???

Code: OnDraw
        CPruebaDoc* pDoc = GetDocument();
	ASSERT_VALID(pDoc);
	// Bitmap Info Header
	    BITMAPINFOHEADER BIH;
	    int iSize = sizeof(BITMAPINFOHEADER);
	    memset(&BIH, 0, iSize); // lo rellenamos con 0's, por eso sale negro...

	    // Fill in the header info.
	    BIH.biSize = iSize;
	    BIH.biWidth = 512;
	    BIH.biHeight = 512;
	    BIH.biPlanes = 1; //bandas?
	    BIH.biBitCount = 24; // bpp
		BIH.biClrUsed = 256;
	    BIH.biCompression = BI_RGB;

		// BITMAPINFO
		BITMAPINFO bmi;
		bmi.bmiHeader = BIH;
/*
		if(pDoc->pData->GetRasterBand(1)->GetColorInterpretation() ==
GCI_GrayIndex)
		{
			for ( UINT i=0 ; i < BIH.biClrUsed ; i++ )
			{
				RGBQUAD q = {i,i,i,0};
				bmi.bmiColors[i] = q;
			}
		}
*/

		void* dBits;
	    GByte* src = pDoc->Buffer;

		// Nuevo DC
	    CDC m_pdc;
		m_pdc.CreateCompatibleDC(pDC);

		// Create the DIB section.
	    HBITMAP m_hbmp = CreateDIBSection(m_pdc.GetSafeHdc(),
								 &bmi,
								 DIB_RGB_COLORS,
								 &dBits,
								 NULL,
								 0);
		if(!dBits)
			MessageBox("error","msg",MB_OK);

		// creo que dBits es NULL
		GByte* dest = (unsigned char*)dBits;

		GByte* ptr_dest;
		GByte* ptr_src;
   		for(int r=0;r<512;r++)
		{
			ptr_dest = dest + r * 512;
			ptr_src = src + r * 512;
			memcpy(ptr_dest,ptr_src,512);
		}

		CRect rect;
		GetClientRect(&rect);
		ASSERT(m_hbmp);
		//m_pdc.SelectObject(m_hbmp);
		SelectObject(m_pdc.GetSafeHdc(),m_hbmp);
		pDC->BitBlt(0,0,rect.Width(),rect.Height(),&m_pdc,0,0,SRCCOPY);

		ReleaseDC(&m_pdc);
Thanks.

Antonio Lucas

Software Engineer
SER&TEC S.L
Phone: +34 96 395 95 13
www.srtec.com
Valencia (Spain)



From woklist at kyngchaos.com  Sun Jan  8 13:31:15 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] 1.3.1 on mac
In-Reply-To: <5FE75A01-563A-4FBC-9AD8-4DABD96EC497@kyngchaos.com>
References: <677DB8DB-4D5A-4A7E-9746-162900EDE0D5@saic.com>
	<B14B9C1B-9FBE-427C-B277-33C04C63655A@kyngchaos.com>
	<931f8ea90601031105u78b5e4caq656792b56d78f718@mail.gmail.com>
	<4DDAFD39-36C0-4D59-A39D-B8473FEA1BAE@kyngchaos.com>
	<5FE75A01-563A-4FBC-9AD8-4DABD96EC497@kyngchaos.com>
Message-ID: <88E4BC8F-9B88-4C4B-B87E-3E553CD7DF7F@kyngchaos.com>

I just grabbed geotiff from CVS.  Build and install, and now that  
GDAL projection test in geotiff succeeds!


On Jan 5, 2006, at 9:40 AM, William Kyngesburye wrote:

> Well, I did a diff with geotiff 1.2.2 and what's in the gdal  
> source, and there are a few new things from early 2005 in the gdal  
> version - added cylidrical eq area, and something to do with *false  
> east/north-ings*, among others.
>
> Maybe the standalone libgeotiff is due for an updated release, so  
> it's in line with what's in GDAL?
>
> I'll try grabbing the geotiff CVS and see if that helps, when I  
> have some time.
>
>
> On Jan 3, 2006, at 1:50 PM, William Kyngesburye wrote:
>
>>
>> (missed the false easting deatil ^_^)
>>
>> Is there anything different in the internal libtiff/geotiff that  
>> might account for that?
>>
>>
>> On Jan 3, 2006, at 1:05 PM, Frank Warmerdam wrote:
>>
>>> Guys,
>>>
>>> I have tried reproducing this but was unsuccessful.  I tried
>>> it with GDAL CVS and GDAL 1.3.1.  There is a noteworthy
>>> difference between the coordinate systems (the false easting).
>>>
>>> I did my testing using --with-libtiff=internal.
>>>
>>> Best regards,
>>> --
>>
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "Time is an illusion - lunchtime doubly so."
>
> - Ford Prefect
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

First Pogril: Why is life like sticking your head in a bucket filled  
with hyena offal?
Second Pogril: I don't know.  Why IS life like sticking your head in  
a bucket filled with hyena offal?
First Pogril: I don't know either.  Wretched, isn't it?

-HitchHiker's Guide to the Galaxy

From sy at perkins.net  Sun Jan  8 21:33:03 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] C# Bindings
Message-ID: <43C1CB5F.5070105@perkins.net>

Hi,

Michael Paul and Morten Nielson posted some hand-rolled C# bindings to 
this list a few weeks back. I've reworked and extended that effort to 
produce a partial set of C# bindings for GDAL that are very similar to 
the C++ classes that underlie GDAL, i.e. we have C# classes for 
Gdal.Dataset, Gdal.RasterBand, and so forth. Underneath it all, it calls 
the GDAL C API, using the C# Pinvoke mechanism (which in turn calls the 
GDAL C++ classes!). The bindings are written for C# 2.0 and use modern 
features like generics, so you'll need Visual Studio 2005 to get these 
to work.

Attached is a VS 2005 solution with two projects: the GDAL bindings 
library, and a simple windows test application that allows you to load 
in and view an image via GDAL. To see it in action, unpack the solution, 
make sure you have the GDAL library in a directory pointed to by your 
PATH variable, build and run the test application. I used the FWTools 
distribution in which the GDAL library is called gdal_fw.dll, so if you 
want to use a GDAL that's named differently, e.g. gdal13.dll, then 
change the library name defined as the gdalDll constant at the top of 
InterOp.cs.

To use the GDAL bindings in your own code, you can do things like:

string myFile = "testfile.tif";
using (Gdal.Dataset dataset = new Gdal.Dataset(myFile)) {
    // Get the width, height and number of bands
    int width = dataset.XSize;
    int height = dataset.YSize;
    int nBands = dataset.RasterCount;
    // Get the projection string
    string projection = dataset.GetProjection();
    // Get the GDAL driver for this format
    Gdal.Driver driver = dataset.GetDriver();
    // Get the format name
    string format = driver.LongName;
    // Read the first band of the image into a byte array
    Gdal.RasterBand band = dataset.GetRasterBand(1);
    byte[] buffer = new byte[width * height];
    band.RasterIO(Gdal.RWFlag.Read, 0, 0, width, height, buffer, width, 
height);
}  // Dataset is automatically closed at this point


Note that just like the GDALDataset C++ class, a Gdal.Dataset must be 
associated with a file upon construction and will automatically 
open/create that file. You can close the file either by explicitly 
calling Close(), or by making use of the using() { .. } construct as 
above. This makes sure that Dispose() is invoked on the Dataset as soon 
as the Dataset goes out of scope, which in turn just invokes Close().

The raw Pinvoke bindings are all contained in the file InterOp.cs, so in 
theory, this could be generated entirely by SWIG. Unfortunately I know 
nothing about SWIG and so far I haven't been able to get SWIG to 
successfully compile bindings with Visual Studio 2005. It's actually 
pretty straightforward to add  new Pinvoke signatures to InterOp.cs by 
hand, though getting SWIG to take care of that would be nice. Any input 
on that appreciated! I'm assuming that SWIG isn't going to be able to 
generate the C# class-oriented interface, but I don't know enough about 
it to be sure.

This partial implementation is good enough for my needs now. If anyone 
else wants to use it, please feel free. If you want to extend it and 
send updates to me, great! The code doesn't contain any explcit licence 
headers, but Michael was suggesting an MIT licence, same as GDAL. Fine 
with me.

Cheers,

Sy

-------------- next part --------------
A non-text attachment was scrubbed...
Name: GDAL_csharp.zip
Type: application/x-zip-compressed
Size: 26842 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060108/53c498d6/GDAL_csharp.bin
From bartvde at xs4all.nl  Tue Jan 10 06:47:41 2006
From: bartvde at xs4all.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] MrSID ESDK problems
Message-ID: <43C39EDD.6090705@xs4all.nl>

Hi list,

we are having some problems getting the MrSID ESDK to work with GDAL CVS 
(04-01-2006). We have bought the ESDK from Lizardtech.

It is listed as output format, but gdal_translate won't write a MrSID 
file, it reports something like output format not supported.

Any ideas what this could be? Thanks in advance.

Best regards,
Bart

-- 
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


From warmerdam at pobox.com  Tue Jan 10 09:03:16 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] MrSID ESDK problems
In-Reply-To: <43C39EDD.6090705@xs4all.nl>
References: <43C39EDD.6090705@xs4all.nl>
Message-ID: <931f8ea90601100603i3c60675mabf62eadda40e771@mail.gmail.com>

On 1/10/06, Bart van den Eijnden (OSGIS) <bartvde@xs4all.nl> wrote:
> Hi list,
>
> we are having some problems getting the MrSID ESDK to work with GDAL CVS
> (04-01-2006). We have bought the ESDK from Lizardtech.

Bart,

What version is the ESDK?

> It is listed as output format, but gdal_translate won't write a MrSID
> file, it reports something like output format not supported.

Does "gdalinfo --format mrsid" have a line reporting
"Supports: CreateCopy()..."?

> Any ideas what this could be? Thanks in advance.

Are you building on windows or linux?   Is the -DMRSID_ESDK
compile option in effect when mrsiddataset.cpp is compiled?
My guess is some sort of configuration problem is preventing
from the encoding support getting enabled.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Tue Jan 10 11:41:53 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
Message-ID: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>

(I hope this isn't bad form mentioning products...  I'm not  
affiliated with the company in question)

After patching my GDAL build on Mac OS X to use the Apple-provided  
iODBC instead of UnixODBC, I've been keeping an eye out for iODBC  
drivers, and hoping someone could test the FileMaker Pro iODBC driver.

One disappointment was that the only Access drivers I could find were  
bridges, so one still must have an Access server available.

A Mac OS X iODBC standalone driver for Access (direct from the MDB  
file) is now available:

http://www.actualtechnologies.com/product_access.php

They also have drivers for Oracle (another one of interest to GDAL/ 
GIS users), Sybase, SQL Server and Openbase.


Time to grab some MDBs from Arc and try out the GDAL personal  
geodatabase format driver!

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From warmerdam at pobox.com  Tue Jan 10 11:56:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Shapefile Driver Updates
Message-ID: <931f8ea90601100856p6d9bddbdp32c38ef219a9c67@mail.gmail.com>

Folks,

With the kind support of SANZ, I have updated the
OGR shapefile driver to support update-in-place and
feature deletion.  Update in place (via SetFeature()) will
overwrite an existing shape.  If the new geometry is bigger
than the old one, then it will be written at the end of the
.shp file, but pointed to by the same shape entry in the
.shx file (so the FID remains unchanged).

Deleting features is implemented by marking the record
for deletion in the .dbf file.  OGR also now supports ignoring
deleted features based on the marker in the .dbf file, which
it did not do before.  The GetFeatureCount() will generally
return a wrong result if called on a file with deleted features.

To repack a shapefile (compressing out wasted space and
deleted records) you can invoke the shape specific
"REPACK <tablename>" via the ExecuteSQL() method on
the datasource.

The hope is that with these changes "in place update" on
shapefiles will be full-featured.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Jan 10 11:59:48 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
In-Reply-To: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
References: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
Message-ID: <931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>

On 1/10/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
> (I hope this isn't bad form mentioning products...  I'm not
> affiliated with the company in question)

William,

This is no problem as long as the product mention is related
to GDAL in some fashion.

> Time to grab some MDBs from Arc and try out the GDAL personal
> geodatabase format driver!

I hope you will follow up on how well this works.   You may find
you need to fiddle with the line:


        sprintf( pszDSN, "DRIVER=Microsoft Access Driver (*.mdb);DBQ=%s",
                 pszNewName );

in gdal/ogr/ogrsf_frmts/pgeo/ogrpgeodatasource.cpp.  It needs
to have the proper name for the driver to be used.   Before fiddling
with that you might want to try the raw ODBC driver.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bhudspeth at edac.unm.edu  Tue Jan 10 13:12:59 2006
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Problems installing gdal-grass 1.3.1
Message-ID: <1136916779.3888.6.camel@localhost.localdomain>

I am trying to install gdal-grass 1.3.1 on Red hat enterprise linux
advanced server 3.0. I have previously installed gdal 1.3.1 without-
grass, and Grass 6.0.1 with-gdal. I have tried to configure gdal-grass
with:

./configure --with-gdal=/usr/local/gdal/bin/gdal-config --with-
grass=/usr/local/grass-6.0.1

It seems to find gdal alright, but then balks at the Grass location. The
Grass location specified above is indeed the correct location. I have
also tried adding --with-grass=/usr/local/grass-6.0.1/lib, but with no
success. My error is:

...
checking for G_asprintf in -lgrass_gis ... no
configure: error: --with-grass=/usr/local/grass-6.0.1 requested, but
libraries not found?

Any help much appreciated,

Bill



From Dan.Putler at sauder.ubc.ca  Tue Jan 10 13:44:26 2006
From: Dan.Putler at sauder.ubc.ca (Putler, Dan)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Problems installing gdal-grass 1.3.1
In-Reply-To: urn:content-classes:message
Message-ID: <456433E6-C006-4480-BBCC-0A249862D49E@sauder.ubc.ca>

Hi Bill,

Your problem is likely to be solved by editing /etc/ld.so.conf to  
include the locations of proj, gdal, grass, and geos. Specifically,  
the full path to both gdal-config and geos-config, and the full paths  
to the library locations of proj (often /usr/local/lib) and grass (/ 
usr/local/grass-6.0.1/lib). After editing ld.so.conf, run ldconfig,  
and you should be good to go.

I ran into this problem this weekend (and posted for help to this  
list), so it seems to be a pretty common issue.

Dan

On 10-Jan-06, at 10:12 AM, William Hudspeth wrote:

> I am trying to install gdal-grass 1.3.1 on Red hat enterprise linux
> advanced server 3.0. I have previously installed gdal 1.3.1 without-
> grass, and Grass 6.0.1 with-gdal. I have tried to configure gdal-grass
> with:
>
> ./configure --with-gdal=/usr/local/gdal/bin/gdal-config --with-
> grass=/usr/local/grass-6.0.1
>
> It seems to find gdal alright, but then balks at the Grass  
> location. The
> Grass location specified above is indeed the correct location. I have
> also tried adding --with-grass=/usr/local/grass-6.0.1/lib, but with no
> success. My error is:
>
> ...
> checking for G_asprintf in -lgrass_gis ... no
> configure: error: --with-grass=/usr/local/grass-6.0.1 requested, but
> libraries not found?
>
> Any help much appreciated,
>
> Bill
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060110/57f42b46/attachment.html
From szekerest at gmail.com  Tue Jan 10 14:24:34 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] C# Bindings
In-Reply-To: <43C1CB5F.5070105@perkins.net>
Message-ID: <43c409d4.23a3a098.36d1.61bf@mx.gmail.com>

Simon,

For Visual Studio 2003 SWIG binding is compilable using some minor
modifications in the make file see

 http://bugzilla.remotesensing.org/show_bug.cgi?id=949


For more details. However some additional typemaps should be constructed in
order to make this feature really usable.


I haven`t enough time to set up a VS 2005 development environment, so I
did't try to compile with it till now.

Tamas Szekeres




-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simon Perkins
Sent: Monday, January 09, 2006 3:33 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] C# Bindings

Hi,

Michael Paul and Morten Nielson posted some hand-rolled C# bindings to 
this list a few weeks back. I've reworked and extended that effort to 
produce a partial set of C# bindings for GDAL that are very similar to 
the C++ classes that underlie GDAL, i.e. we have C# classes for 
Gdal.Dataset, Gdal.RasterBand, and so forth. Underneath it all, it calls 
the GDAL C API, using the C# Pinvoke mechanism (which in turn calls the 
GDAL C++ classes!). The bindings are written for C# 2.0 and use modern 
features like generics, so you'll need Visual Studio 2005 to get these 
to work.

Attached is a VS 2005 solution with two projects: the GDAL bindings 
library, and a simple windows test application that allows you to load 
in and view an image via GDAL. To see it in action, unpack the solution, 
make sure you have the GDAL library in a directory pointed to by your 
PATH variable, build and run the test application. I used the FWTools 
distribution in which the GDAL library is called gdal_fw.dll, so if you 
want to use a GDAL that's named differently, e.g. gdal13.dll, then 
change the library name defined as the gdalDll constant at the top of 
InterOp.cs.

To use the GDAL bindings in your own code, you can do things like:

string myFile = "testfile.tif";
using (Gdal.Dataset dataset = new Gdal.Dataset(myFile)) {
    // Get the width, height and number of bands
    int width = dataset.XSize;
    int height = dataset.YSize;
    int nBands = dataset.RasterCount;
    // Get the projection string
    string projection = dataset.GetProjection();
    // Get the GDAL driver for this format
    Gdal.Driver driver = dataset.GetDriver();
    // Get the format name
    string format = driver.LongName;
    // Read the first band of the image into a byte array
    Gdal.RasterBand band = dataset.GetRasterBand(1);
    byte[] buffer = new byte[width * height];
    band.RasterIO(Gdal.RWFlag.Read, 0, 0, width, height, buffer, width, 
height);
}  // Dataset is automatically closed at this point


Note that just like the GDALDataset C++ class, a Gdal.Dataset must be 
associated with a file upon construction and will automatically 
open/create that file. You can close the file either by explicitly 
calling Close(), or by making use of the using() { .. } construct as 
above. This makes sure that Dispose() is invoked on the Dataset as soon 
as the Dataset goes out of scope, which in turn just invokes Close().

The raw Pinvoke bindings are all contained in the file InterOp.cs, so in 
theory, this could be generated entirely by SWIG. Unfortunately I know 
nothing about SWIG and so far I haven't been able to get SWIG to 
successfully compile bindings with Visual Studio 2005. It's actually 
pretty straightforward to add  new Pinvoke signatures to InterOp.cs by 
hand, though getting SWIG to take care of that would be nice. Any input 
on that appreciated! I'm assuming that SWIG isn't going to be able to 
generate the C# class-oriented interface, but I don't know enough about 
it to be sure.

This partial implementation is good enough for my needs now. If anyone 
else wants to use it, please feel free. If you want to extend it and 
send updates to me, great! The code doesn't contain any explcit licence 
headers, but Michael was suggesting an MIT licence, same as GDAL. Fine 
with me.

Cheers,

Sy


-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.371 / Virus Database: 267.14.16/225 - Release Date: 2006.01.09.
 
    

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.371 / Virus Database: 267.14.17/226 - Release Date: 2006.01.10.
 


From woklist at kyngchaos.com  Tue Jan 10 14:28:35 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
In-Reply-To: <931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>
References: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
	<931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>
Message-ID: <CFAF58BA-84F1-4AE9-8BA5-DBE5C8037C42@kyngchaos.com>


On Jan 10, 2006, at 10:59 AM, Frank Warmerdam wrote:

>> Time to grab some MDBs from Arc and try out the GDAL personal
>> geodatabase format driver!
>
> I hope you will follow up on how well this works.   You may find
> you need to fiddle with the line:
>
>
>         sprintf( pszDSN, "DRIVER=Microsoft Access Driver  
> (*.mdb);DBQ=%s",
>                  pszNewName );
>
> in gdal/ogr/ogrsf_frmts/pgeo/ogrpgeodatasource.cpp.  It needs
> to have the proper name for the driver to be used.   Before fiddling
> with that you might want to try the raw ODBC driver.
>
Ah, thanks for the tip.  I didn't think about the way you had the PDB  
driver setup - it takes a file name, but transforms that into a DSN,  
right?  Do you mean the string: "DRIVER=Microsoft Access Driver  
(*.mdb);" must match something in the ODBC driver?

I found 2 different strings when setting up an Access DSN with this  
new iODBC driver: one in the configuration dialogs telling me the  
final configuration, very long and descriptive, but it's not recorded  
anywhere when I click OK; and one short one in the DSN list where it  
shows the driver name.  Like so:

Actual ODBC Driver for Access Databases version 1.0

or driver name (from odbcinst.ini):

Actual Access

There's also the driver binary.  If I look at the resulting odbc.ini,  
it says driver = {path/to/iodbc/access/driver}


After a test with the raw ODBC format, it looks like it's the ODBC  
driver binary.  It doesn't work with the descriptive driver name or  
the odbcinst.ini driver name.  Kinda annoying.  Is that an ODBC  
thing?  I would have thought that, since the drivers are defined in  
odbcinst.ini and given a name, one would use those names for the  
driver in a DSN.

Would it be possible to add an option to the PGEO driver to override  
the ODBC driver, in case someone (on any platform even) doesn't use  
an Access driver with the name you have in the source (ie on  
different platforms and from different authors)?  (Or is it already  
possible? and how?)

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From warmerdam at pobox.com  Tue Jan 10 14:33:11 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
In-Reply-To: <CFAF58BA-84F1-4AE9-8BA5-DBE5C8037C42@kyngchaos.com>
References: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
	<931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>
	<CFAF58BA-84F1-4AE9-8BA5-DBE5C8037C42@kyngchaos.com>
Message-ID: <931f8ea90601101133t709ec78elf6737ff6c4e8ae7d@mail.gmail.com>

On 1/10/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
> After a test with the raw ODBC format, it looks like it's the ODBC
> driver binary.  It doesn't work with the descriptive driver name or
> the odbcinst.ini driver name.  Kinda annoying.  Is that an ODBC
> thing?

William,

I believe so.

> I would have thought that, since the drivers are defined in
> odbcinst.ini and given a name, one would use those names for the
> driver in a DSN.
>
> Would it be possible to add an option to the PGEO driver to override
> the ODBC driver, in case someone (on any platform even) doesn't use
> an Access driver with the name you have in the source (ie on
> different platforms and from different authors)?  (Or is it already
> possible? and how?)

I would be happy to support a "config" option for
overriding the name of the ODBC driver to use for MDB
files.  This could then be set via the environment or the
--config commandline switch.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bhudspeth at edac.unm.edu  Tue Jan 10 14:29:49 2006
From: bhudspeth at edac.unm.edu (William Hudspeth)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Continuing problems installing gdal-grass
Message-ID: <1136921389.3888.13.camel@localhost.localdomain>

Thanks for responding Dan,

I have followed your suggestions - it seems to have configured just
fine. When I try to make, however, I get the following output:

g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/local/grass-6.0.1\" -
I/usr/local/gdal/include -I/usr/local/grass-6.0.1/include   -c -o
grass57dataset.o grass57dataset.cpp
In file included from grass57dataset.cpp:63:
/usr/local/grass-6.0.1/include/gprojects.h:20:22: proj_api.h: No such file or directory
In file included from grass57dataset.cpp:63:
/usr/local/grass-6.0.1/include/gprojects.h:31: syntax error before `*' token
make: *** [grass57dataset.o] Error 1


Hi Bill,

Your problem is likely to be solved by editing /etc/ld.so.conf to   
include the locations of proj, gdal, grass, and geos. Specifically,   
the full path to both gdal-config and geos-config, and the full paths   
to the library locations of proj (often /usr/local/lib) and grass (/  
usr/local/grass-6.0.1/lib). After editing ld.so.conf, run ldconfig,   
and you should be good to go.

I ran into this problem this weekend (and posted for help to this   
list), so it seems to be a pretty common issue.

Dan

On 10-Jan-06, at 10:12 AM, William Hudspeth wrote:

> I am trying to install gdal-grass 1.3.1 on Red hat enterprise linux 
> advanced server 3.0. I have previously installed gdal 1.3.1 without- 
> grass, and Grass 6.0.1 with-gdal. I have tried to configure gdal-
grass 
> with: 
> 
> ./configure --with-gdal=/usr/local/gdal/bin/gdal-config --with- 
> grass=/usr/local/grass-6.0.1 
> 
> It seems to find gdal alright, but then balks at the Grass   
> location. The 
> Grass location specified above is indeed the correct location. I have 
> also tried adding --with-grass=/usr/local/grass-6.0.1/lib, but with
no 
> success. My error is: 
> 
> ... 
> checking for G_asprintf in -lgrass_gis ... no 
> configure: error: --with-grass=/usr/local/grass-6.0.1 requested, but 
> libraries not found? 
> 
> Any help much appreciated, 
> 
> Bill 
>


From warmerdam at pobox.com  Tue Jan 10 14:49:50 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Continuing problems installing gdal-grass
In-Reply-To: <1136921389.3888.13.camel@localhost.localdomain>
References: <1136921389.3888.13.camel@localhost.localdomain>
Message-ID: <931f8ea90601101149mcc9b158uaee37ade9fbb2492@mail.gmail.com>

On 1/10/06, William Hudspeth <bhudspeth@edac.unm.edu> wrote:
> Thanks for responding Dan,
>
> I have followed your suggestions - it seems to have configured just
> fine. When I try to make, however, I get the following output:
>
> g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/local/grass-6.0.1\" -
> I/usr/local/gdal/include -I/usr/local/grass-6.0.1/include   -c -o
> grass57dataset.o grass57dataset.cpp
> In file included from grass57dataset.cpp:63:
> /usr/local/grass-6.0.1/include/gprojects.h:20:22: proj_api.h: No such file or directory
> In file included from grass57dataset.cpp:63:
> /usr/local/grass-6.0.1/include/gprojects.h:31: syntax error before `*' token
> make: *** [grass57dataset.o] Error 1
>

William,

I think you will need to hand edit your Makefile and
add "-I/usr/local/include" or whatever is appropriate to
refer to the PROJ.4 include files.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Dan.Putler at sauder.ubc.ca  Tue Jan 10 15:02:01 2006
From: Dan.Putler at sauder.ubc.ca (Putler, Dan)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Continuing problems installing gdal-grass
Message-ID: <6C615F9F-0A8B-4A6C-93C5-11D2D74A568C@sauder.ubc.ca>

Hi Bill,

This is just a guess, but did you load proj via RPMs? If yes, you may  
need to load the proj-devel package as well. The reason why I ask  
this is the problems seems to be with proj_api.h, which is a proj  
header file. RedHat has this thing about putting header files into  
separate "product"-devel packages.

Dan

On 10-Jan-06, at 11:29 AM, William Hudspeth wrote:


> Thanks for responding Dan,
>
> I have followed your suggestions - it seems to have configured just
> fine. When I try to make, however, I get the following output:
>
> g++ -Wall -fPIC  -DUSE_CPL -DGRASS_GISBASE=\"/usr/local/grass-6.0.1 
> \" -
> I/usr/local/gdal/include -I/usr/local/grass-6.0.1/include   -c -o
> grass57dataset.o grass57dataset.cpp
> In file included from grass57dataset.cpp:63:
> /usr/local/grass-6.0.1/include/gprojects.h:20:22: proj_api.h: No  
> such file or directory
> In file included from grass57dataset.cpp:63:
> /usr/local/grass-6.0.1/include/gprojects.h:31: syntax error before  
> `*' token
> make: *** [grass57dataset.o] Error 1
>
>
> Hi Bill,
>
> Your problem is likely to be solved by editing /etc/ld.so.conf to
> include the locations of proj, gdal, grass, and geos. Specifically,
> the full path to both gdal-config and geos-config, and the full paths
> to the library locations of proj (often /usr/local/lib) and grass (/
> usr/local/grass-6.0.1/lib). After editing ld.so.conf, run ldconfig,
> and you should be good to go.
>
> I ran into this problem this weekend (and posted for help to this
> list), so it seems to be a pretty common issue.
>
> Dan
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060110/ce136668/attachment.html
From woklist at kyngchaos.com  Tue Jan 10 15:19:31 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
In-Reply-To: <931f8ea90601101133t709ec78elf6737ff6c4e8ae7d@mail.gmail.com>
References: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
	<931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>
	<CFAF58BA-84F1-4AE9-8BA5-DBE5C8037C42@kyngchaos.com>
	<931f8ea90601101133t709ec78elf6737ff6c4e8ae7d@mail.gmail.com>
Message-ID: <E689180F-ADFF-401B-A400-92A8B02B48B9@kyngchaos.com>


On Jan 10, 2006, at 1:33 PM, Frank Warmerdam wrote:

>> Would it be possible to add an option to the PGEO driver to override
>> the ODBC driver, in case someone (on any platform even) doesn't use
>> an Access driver with the name you have in the source (ie on
>> different platforms and from different authors)?  (Or is it already
>> possible? and how?)
>
> I would be happy to support a "config" option for
> overriding the name of the ODBC driver to use for MDB
> files.  This could then be set via the environment or the
> --config commandline switch.
>
But, that would still be hardwired into the binary then?  I was  
thinking more like in the datasource option in the ogr commands, like  
is done for raw ODBC.  This makes it more flexible for an end-user  
that downloads a GDAL binary package, to be able to choose ODBC  
drivers at runtime.

Something like: either specify a .mdb directly like is is now, or as  
PGEO:dsn if one needs to use an alternate ODBC driver.  You could  
provide the full range of ODBC options, but I don't know if username  
is applicable, or geometry column, but password may be needed also  
(tho this Mac Access driver currently doesn't support password  
protected MDBs, others may).

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

Theory of the Universe

There is a theory which states that if ever anyone discovers exactly  
what the universe is for and why it is here, it will instantly  
disappear and be replaced by something even more bizarrely  
inexplicable.  There is another theory which states that this has  
already happened.

-Hitchhiker's Guide to the Galaxy 2nd season intro


From list67 at netscape.net  Tue Jan 10 15:24:40 2006
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] multiple threads - VSIMemFileSystemHandler and
	nCacheUsed 
Message-ID: <25986722.6BABDF64.00066B75@netscape.net>

Hi.

I read in the FAQ that GDAL is not completely threadsafe, so this info might be insignficant.

The Intel Thread Checker is reporting "read/write data race" errors when run with a program that has multiple threads which call VSIFileFromMemBuffer(..), GDALOpen, VSIUnlink, etc. (all for reading rasters).

Many of the errors seem to be related to the accessing of the VSIMemFileSystemHandler's oFileList data member.

There are other errors reported with the accessing of the nCacheUsed data member from gdalrasterblock.cpp.

I'm using a CVS version of GDAL from December 28, 2005.

Are these particular errors to be expected, or is it probably the case that errors are the result of the program using GDAL incorrectly?

Thank you for your time.

    Mike

__________________________________________________________________
Switch to Netscape Internet Service.
As low as $9.95 a month -- Sign up today at http://isp.netscape.com/register

Netscape. Just the Net You Need.

New! Netscape Toolbar for Internet Explorer
Search from anywhere on the Web and block those annoying pop-ups.
Download now at http://channels.netscape.com/ns/search/install.jsp

From warmerdam at pobox.com  Tue Jan 10 15:30:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
In-Reply-To: <E689180F-ADFF-401B-A400-92A8B02B48B9@kyngchaos.com>
References: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
	<931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>
	<CFAF58BA-84F1-4AE9-8BA5-DBE5C8037C42@kyngchaos.com>
	<931f8ea90601101133t709ec78elf6737ff6c4e8ae7d@mail.gmail.com>
	<E689180F-ADFF-401B-A400-92A8B02B48B9@kyngchaos.com>
Message-ID: <931f8ea90601101230v7c96d8e7t77844472ba36e344@mail.gmail.com>

On 1/10/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
> Something like: either specify a .mdb directly like is is now, or as
> PGEO:dsn if one needs to use an alternate ODBC driver.  You could
> provide the full range of ODBC options, but I don't know if username
> is applicable, or geometry column, but password may be needed also
> (tho this Mac Access driver currently doesn't support password
> protected MDBs, others may).

William,

Ah, I had forgotten but the PGEO driver should still support
DSNs (as PGEO:dsn).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Tue Jan 10 15:50:59 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] iODBC drivers for Mac OS X
In-Reply-To: <931f8ea90601101230v7c96d8e7t77844472ba36e344@mail.gmail.com>
References: <2A0C4FC6-87CF-4202-9F84-3B28EEA18A89@kyngchaos.com>
	<931f8ea90601100859y61d8467end09973e85f7f68f2@mail.gmail.com>
	<CFAF58BA-84F1-4AE9-8BA5-DBE5C8037C42@kyngchaos.com>
	<931f8ea90601101133t709ec78elf6737ff6c4e8ae7d@mail.gmail.com>
	<E689180F-ADFF-401B-A400-92A8B02B48B9@kyngchaos.com>
	<931f8ea90601101230v7c96d8e7t77844472ba36e344@mail.gmail.com>
Message-ID: <79951712-7278-4335-9BA7-71ED6236DCB2@kyngchaos.com>

Should have just tried it.  But, yes, that's got it!  I guess the  
statement in the PGEO docs that "no ODBC DSN is required" threw me off.

Now I just need to buy the driver so I can see more than the first 3  
records of each table ^_^


On Jan 10, 2006, at 2:30 PM, Frank Warmerdam wrote:

> On 1/10/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
>> Something like: either specify a .mdb directly like is is now, or as
>> PGEO:dsn if one needs to use an alternate ODBC driver.  You could
>> provide the full range of ODBC options, but I don't know if username
>> is applicable, or geometry column, but password may be needed also
>> (tho this Mac Access driver currently doesn't support password
>> protected MDBs, others may).
>
> William,
>
> Ah, I had forgotten but the PGEO driver should still support
> DSNs (as PGEO:dsn).

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From warmerdam at pobox.com  Tue Jan 10 16:10:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] multiple threads - VSIMemFileSystemHandler and
	nCacheUsed
In-Reply-To: <25986722.6BABDF64.00066B75@netscape.net>
References: <25986722.6BABDF64.00066B75@netscape.net>
Message-ID: <931f8ea90601101310w2647b8a8ja4279a026e8cf056@mail.gmail.com>

On 1/10/06, list67@netscape.net <list67@netscape.net> wrote:
> Hi.
>
> I read in the FAQ that GDAL is not completely threadsafe, so this info might be insignficant.
>
> The Intel Thread Checker is reporting "read/write data race" errors when run with a program that has multiple threads which call VSIFileFromMemBuffer(..), GDALOpen, VSIUnlink, etc. (all for reading rasters).
>
> Many of the errors seem to be related to the accessing of the VSIMemFileSystemHandler's oFileList data member.

Mike,

Good point.  If you file a bug on this, I'll look into resolving it.

> There are other errors reported with the accessing of the nCacheUsed data member from gdalrasterblock.cpp.

The nCacheUsed variable is used to decide if blocks should
be released from the cache to reduce memory use below
the allowed maximum.  Because it doesn't really matter if it
is a bit off when it is being read, I haven't protected all uses
of this variable with the cache mutex.

However, I think all updates of this variable are protected.
Let me know if that is not the case.

> I'm using a CVS version of GDAL from December 28, 2005.
>
> Are these particular errors to be expected, or is it probably the case that errors are the result of the program using GDAL incorrectly?

Note that it is known to be unsafe to use gdal multithreaded
when you are *writing* files with GDAL.   It is intended that
multiple threads reading through GDAL should be ok,
with some caveats.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dion at west.nl  Tue Jan 10 17:41:10 2006
From: dion at west.nl (dion@west.nl)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] MrSID ESDK problems
In-Reply-To: <931f8ea90601100603i3c60675mabf62eadda40e771@mail.gmail.com>
References: <931f8ea90601100603i3c60675mabf62eadda40e771@mail.gmail.com>
Message-ID: <33665.80.100.121.205.1136932870.squirrel@www.west.nl>

Hello Frank,

As I'm working with Bart on the same project, let me provide the information
you asked for.

> On 1/10/06, Bart van den Eijnden (OSGIS) <bartvde@xs4all.nl> wrote:
>> Hi list,
>>
>> we are having some problems getting the MrSID ESDK to work with GDAL CVS
>> (04-01-2006). We have bought the ESDK from Lizardtech.
>
> Bart,
>
> What version is the ESDK?

ESDK-5.0.6.955

>> It is listed as output format, but gdal_translate won't write a MrSID
>> file, it reports something like output format not supported.
>
> Does "gdalinfo --format mrsid" have a line reporting
> "Supports: CreateCopy()..."?

Yes. In fact, here's the complete output:

Format Details:
  Short Name: MrSID
  Long Name: Multi-resolution Seamless Image Database (MrSID)
  Extension: sid
  Help Topic: frmt_mrsid.html
  Supports: CreateCopy() - Create dataset by copying another.
  Creation Datatypes: Byte Int16 UInt16 Int32 UInt32 Float32 Float64

<CreationOptionList>
  <Option name="COMPRESSION" type="double" description="Set compression
ratio (0.0 default is meant to be less)"/>
  <Option name="TWOPASS" type="int" description="Use twopass optimizer
algorithm"/>
  <Option name="FILESIZE" type="int" description="Set target file size (0
implies lossless compression)"/
  <Option name="WORLDFILE" type="boolean" description="Write out world
file"/>
  <Option name="VERSION" type="int" description="Valid versions are 2 and
3, default = 3"/>
</CreationOptionList>

>> Any ideas what this could be? Thanks in advance.
>
> Are you building on windows or linux?   Is the -DMRSID_ESDK
> compile option in effect when mrsiddataset.cpp is compiled?
> My guess is some sort of configuration problem is preventing
> from the encoding support getting enabled.

We are building on Linux (Redhat ES 3.0). I think the -DMRSID_ESDK
is used when building. 'config.log' contains the following:

....
configure:25219: checking for lt_base.h in
/opt/Geo_ESDK-5.0.6.955/include/support
configure:25222: result: found MrSID DSDK version 4.x or newer.
configure:25229: checking for MG3ImageWriter.h in
/opt/Geo_ESDK-5.0.6.955/include/mrsid_writers
configure:25232: result: found MrSID ESDK version 4.x or newer.
configure:25239: checking for MrSID JPEG2000 support
configure:25261: result: enabled
....
LIBS='-lclntsh -L/usr/lib -lxerces-c -lpthread
-L/opt/Geo_ESDK-5.0.6.955/lib/Release
-L/opt/Geo_ESDK-5.0.6.955/3rd-party/lib/Release -lltiesdk -lcryptopp
-lxmlparse -lltidsdk -lpthread -lltikdu -L/usr/local/lib -lNCSEcw
-lNCSCnet -lNCSUtil -ljpeg -lpng  -lm -lrt -ldl '
LIBTOOL='$(SHELL) $(top_builddir)/libtool'
LIBZ_SETTING='internal'
LN_S='ln -s'
LTLIBOBJS=''
MRSID_FLAGS='-DMRSID_J2K -DMRSID_ESDK '
MRSID_INCLUDE='-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_writers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_writers
-I/opt/Geo_ESDK-5.0.6.955/include/base
-I/opt/Geo_ESDK-5.0.6.955/include/metadata
-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_readers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_readers
-I/opt/Geo_ESDK-5.0.6.955/include/support'

Also, a 'make' in frmts/mrsid shows the following:

/bin/sh ../../libtool --mode=compile g++ -Wall  -O2 -march=i386 -mcpu=i686
  -I../../port -I../../gcore -I..  /../alg -I../../ogr
-I../../ogr/ogrsf_frmts -DMRSID_J2K -DMRSID_ESDK 
-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_writers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_writers
-I/opt/Geo_ESDK-5.0.6.955/include/base
-I/opt/Geo_ESDK-5.0.6.955/include/metadata
-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_readers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_readers
-I/opt/Geo_ESDK-5.0.6.955/include/support -I../../frmts/gtiff/libgeotiff
-D_REENTRANT  -I../../port -I/us  r/local/include  -c -o mrsiddataset.o
mrsiddataset.cpp

A problem that is probably related is that mapserver 4.8.0-rc2 also
fails to write MrSID output when doing a WCS GetCoverage request. It
throws an ServiceException:
msSaveImageGDAL(): General error message. Failed to create output MrSID file.
`/data/OGC_UMN_services/tmp/ms_tmp/1136930007234670.sid&#39; not
recognised as a supported file format.

Regards,
Dion

-- Dion Wooning, dion@west.nl, West Consulting B.V., +31 15 219 1600



From rsheykhet at sanz.com  Tue Jan 10 18:46:06 2006
From: rsheykhet at sanz.com (Sheykhet, Rostic)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] MrSID ESDK problems
Message-ID: <ED3A48B9840E594890A2BC172D11946504CA0E53@mailman.san.com>

Dion,

I think that depending on the LizardTech license, you need to set 
LT_UMDB_PATH variable to point to the directory like
/usr/local/LizardTech/ECM/db in order to write MrSID files.  


Rostic
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of dion@west.nl
Sent: Tuesday, January 10, 2006 3:41 PM
To: Frank Warmerdam
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MrSID ESDK problems

Hello Frank,

As I'm working with Bart on the same project, let me provide the
information
you asked for.

> On 1/10/06, Bart van den Eijnden (OSGIS) <bartvde@xs4all.nl> wrote:
>> Hi list,
>>
>> we are having some problems getting the MrSID ESDK to work with GDAL
CVS
>> (04-01-2006). We have bought the ESDK from Lizardtech.
>
> Bart,
>
> What version is the ESDK?

ESDK-5.0.6.955

>> It is listed as output format, but gdal_translate won't write a MrSID
>> file, it reports something like output format not supported.
>
> Does "gdalinfo --format mrsid" have a line reporting
> "Supports: CreateCopy()..."?

Yes. In fact, here's the complete output:

Format Details:
  Short Name: MrSID
  Long Name: Multi-resolution Seamless Image Database (MrSID)
  Extension: sid
  Help Topic: frmt_mrsid.html
  Supports: CreateCopy() - Create dataset by copying another.
  Creation Datatypes: Byte Int16 UInt16 Int32 UInt32 Float32 Float64

<CreationOptionList>
  <Option name="COMPRESSION" type="double" description="Set compression
ratio (0.0 default is meant to be less)"/>
  <Option name="TWOPASS" type="int" description="Use twopass optimizer
algorithm"/>
  <Option name="FILESIZE" type="int" description="Set target file size
(0
implies lossless compression)"/
  <Option name="WORLDFILE" type="boolean" description="Write out world
file"/>
  <Option name="VERSION" type="int" description="Valid versions are 2
and
3, default = 3"/>
</CreationOptionList>

>> Any ideas what this could be? Thanks in advance.
>
> Are you building on windows or linux?   Is the -DMRSID_ESDK
> compile option in effect when mrsiddataset.cpp is compiled?
> My guess is some sort of configuration problem is preventing
> from the encoding support getting enabled.

We are building on Linux (Redhat ES 3.0). I think the -DMRSID_ESDK
is used when building. 'config.log' contains the following:

....
configure:25219: checking for lt_base.h in
/opt/Geo_ESDK-5.0.6.955/include/support
configure:25222: result: found MrSID DSDK version 4.x or newer.
configure:25229: checking for MG3ImageWriter.h in
/opt/Geo_ESDK-5.0.6.955/include/mrsid_writers
configure:25232: result: found MrSID ESDK version 4.x or newer.
configure:25239: checking for MrSID JPEG2000 support
configure:25261: result: enabled
....
LIBS='-lclntsh -L/usr/lib -lxerces-c -lpthread
-L/opt/Geo_ESDK-5.0.6.955/lib/Release
-L/opt/Geo_ESDK-5.0.6.955/3rd-party/lib/Release -lltiesdk -lcryptopp
-lxmlparse -lltidsdk -lpthread -lltikdu -L/usr/local/lib -lNCSEcw
-lNCSCnet -lNCSUtil -ljpeg -lpng  -lm -lrt -ldl '
LIBTOOL='$(SHELL) $(top_builddir)/libtool'
LIBZ_SETTING='internal'
LN_S='ln -s'
LTLIBOBJS=''
MRSID_FLAGS='-DMRSID_J2K -DMRSID_ESDK '
MRSID_INCLUDE='-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_writers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_writers
-I/opt/Geo_ESDK-5.0.6.955/include/base
-I/opt/Geo_ESDK-5.0.6.955/include/metadata
-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_readers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_readers
-I/opt/Geo_ESDK-5.0.6.955/include/support'

Also, a 'make' in frmts/mrsid shows the following:

/bin/sh ../../libtool --mode=compile g++ -Wall  -O2 -march=i386
-mcpu=i686
  -I../../port -I../../gcore -I..  /../alg -I../../ogr
-I../../ogr/ogrsf_frmts -DMRSID_J2K -DMRSID_ESDK 
-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_writers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_writers
-I/opt/Geo_ESDK-5.0.6.955/include/base
-I/opt/Geo_ESDK-5.0.6.955/include/metadata
-I/opt/Geo_ESDK-5.0.6.955/include/mrsid_readers
-I/opt/Geo_ESDK-5.0.6.955/include/j2k_readers
-I/opt/Geo_ESDK-5.0.6.955/include/support -I../../frmts/gtiff/libgeotiff
-D_REENTRANT  -I../../port -I/us  r/local/include  -c -o mrsiddataset.o
mrsiddataset.cpp

A problem that is probably related is that mapserver 4.8.0-rc2 also
fails to write MrSID output when doing a WCS GetCoverage request. It
throws an ServiceException:
msSaveImageGDAL(): General error message. Failed to create output MrSID
file.
`/data/OGC_UMN_services/tmp/ms_tmp/1136930007234670.sid&#39; not
recognised as a supported file format.

Regards,
Dion

-- Dion Wooning, dion@west.nl, West Consulting B.V., +31 15 219 1600


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From woklist at kyngchaos.com  Tue Jan 10 19:46:35 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] PostGIS varchar fields
Message-ID: <B4603C78-D4C2-461D-81A3-7AF3266459DA@kyngchaos.com>

I'm not sure if it's supposed to work this way or not:  I extracted  
an area out of a big PostGIS database, to shapefile, and all the  
varchar fields from PostGIS became character fields of length 80.  So  
all those 2-8 varchar fields in the attributes balloon the dbf, and  
the few 200 char name fields get chopped off.

ogrinfo -al -so on the PostGIS DB returns "String (0.0)" for the  
field type for all varchar fields, but the correct length for all  
fixed char fields (a few 1 and 2-char fields).  The original mif/mid  
source I used to create the PostGIS DB with ogr2ogr returns the  
correct length for all char fields.  A direct ogr2ogr from the mif/ 
mid to shapefile also creates the correct field lengths in the  
shapefile, although the integer fields get changed to reals.

GDAL 1.3.1 with Postgres 8.0.4 libs on client end, Postgres 8.0.4 +  
PostGIS 1.0.6 on PG server.

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Time is an illusion - lunchtime doubly so."

- Ford Prefect


From warmerdam at pobox.com  Tue Jan 10 23:20:00 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] PostGIS varchar fields
In-Reply-To: <B4603C78-D4C2-461D-81A3-7AF3266459DA@kyngchaos.com>
References: <B4603C78-D4C2-461D-81A3-7AF3266459DA@kyngchaos.com>
Message-ID: <931f8ea90601102020m26622910p459f98a863cfb0be@mail.gmail.com>

On 1/10/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
> I'm not sure if it's supposed to work this way or not:  I extracted
> an area out of a big PostGIS database, to shapefile, and all the
> varchar fields from PostGIS became character fields of length 80.  So
> all those 2-8 varchar fields in the attributes balloon the dbf, and
> the few 200 char name fields get chopped off.
>
> ogrinfo -al -so on the PostGIS DB returns "String (0.0)" for the
> field type for all varchar fields, but the correct length for all
> fixed char fields (a few 1 and 2-char fields).  The original mif/mid
> source I used to create the PostGIS DB with ogr2ogr returns the
> correct length for all char fields.  A direct ogr2ogr from the mif/
> mid to shapefile also creates the correct field lengths in the
> shapefile, although the integer fields get changed to reals.

William,

Is there any change you used the -lco PRECISION=FALSE
option when copying the data into postgres?  If so, VARCHAR
gets used for fixed length fields otherwise the fixed length
string fields should be created as CHAR(length).

The PRECISION layer creation should default to TRUE
according to the code and docs.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From craig.miller at spatialminds.com  Wed Jan 11 00:58:45 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] E00 support?
Message-ID: <003901c61674$158f0630$0501a8c0@vaio>

I did a bit of googling, and only came across very old references to
GDAL/OGR and E00.  Has anyone cobbled together any E00 support in OGR, or
looked into what's involved?  It would be useful to have it natively
supported in OGR for my current project.

Thanks guys,
Craig

P.S.  I know how to convert E00 files with avce00.  My question is driven by
a programming objective rather than a data import use case.  :-)



From dassau at gdf-hannover.de  Wed Jan 11 08:23:25 2006
From: dassau at gdf-hannover.de (Otto Dassau)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal-grass-ogr plugin 64bit issue
Message-ID: <200601111423.25958.dassau@gdf-hannover.de>

Hi, 

I have a problem compiling gdal-grass on my SuSE 9.2 64bit pc:

[...]
checking for ranlib... ranlib
/usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/../../../../x86_64-suse-linux/bin/ld: 
conftest2.o: relocation R_X86_64_32 can not be used when making a shared 
object; recompile with -fPIC
conftest2.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
checking for g++ -shared ... no(1)
checking for ld -shared ... no
user supplied gdal-config (/usr/local/bin/gdal-config)
[...]


and found these mails in the GDAL ML.:

http://lists.maptools.org/pipermail/gdal-dev/2006-January/007577.html
http://lists.maptools.org/pipermail/gdal-dev/2006-January/007579.html

is this bug already fixed?

 thanks
   Otto

From nbarker at rsinc.com  Wed Jan 11 08:56:49 2006
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] GDAL, JPIP and OpenEV
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E81316D3@bath.uk.rsinc.com>

Hi,

just by chance when I was using OpenEV I noticed that when displaying ECW or Jpeg2000 it seems to have a progressive quality display.  

If OpenEV does implement progressive display for wavelet based images (with quality and resolution layers) how hard would it be for OpenEV to take its data from a JPIP server?

I have a JPIP image server, and will have a go with OpenEV and GDAL if someone can confirm that I haven't witnessed a trick of the eye!!

Many thanks,

Norman


From warmerdam at pobox.com  Wed Jan 11 10:20:17 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] GDAL, JPIP and OpenEV
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E81316D3@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E81316D3@bath.uk.rsinc.com>
Message-ID: <931f8ea90601110720o57fa580le21228ab5bf5c27@mail.gmail.com>

On 1/11/06, Norman Barker <nbarker@rsinc.com> wrote:
> Hi,
>
> just by chance when I was using OpenEV I noticed that when displaying ECW or Jpeg2000 it seems to have a progressive quality display.
>
> If OpenEV does implement progressive display for wavelet based images (with quality and resolution layers) how hard would it be for OpenEV to take its data from a JPIP server?
>
> I have a JPIP image server, and will have a go with OpenEV and GDAL if someone can confirm that I haven't witnessed a trick of the eye!!

Norman,

I believe it was a trick of the eye.  In particular as
you zoom in OpenEV will interpolate up the lower
resolution data till it has a chance to reload higher
resolution data.  So you are seeing full res data filled
in over time, but it isn't due to use of progressive display
from the wavelet information.  The same thing happens
with uncompressed formats.

I have had a little success in the past with GDAL
and JPIP via the JP2KAK driver but also lots of
unexplained failures.  Also, the JPIP in GDAL is only
supported on windows.  But I think you should be able to
use a jpip url with gdal (or openev) on win32 currently.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jan 11 10:25:06 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] E00 support?
In-Reply-To: <003901c61674$158f0630$0501a8c0@vaio>
References: <003901c61674$158f0630$0501a8c0@vaio>
Message-ID: <931f8ea90601110725j6078a0e8hb7d8ceeca7483f8@mail.gmail.com>

On 1/11/06, Craig Miller <craig.miller@spatialminds.com> wrote:
> I did a bit of googling, and only came across very old references to
> GDAL/OGR and E00.  Has anyone cobbled together any E00 support in OGR, or
> looked into what's involved?  It would be useful to have it natively
> supported in OGR for my current project.

Craig,

The AVC driver in OGR already uses the avce00 libraries
that support binary coverages and e00 files.  But the driver
is written in such a way that it only works for binary grids.

The correct way to incorporate e00 support in OGR would be
to update the AVC driver to support e00 files as well.  The main
challenge in accomplishing this relates to the fact that E00 files
need to be linearly scanned while the driver is built assuming you
can seek to particular features, as is possible with the binary
coverages.

I believe Andrey way hoping to implement E00 support but that
this got pushed onto the backburner.   I have no plans to do it
myself.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nbarker at rsinc.com  Wed Jan 11 11:39:59 2006
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] GDAL, JPIP and OpenEV
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E81316D4@bath.uk.rsinc.com>



-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com]On Behalf Of
Frank Warmerdam
Sent: Wednesday, January 11, 2006 3:20 PM
To: Norman Barker
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDAL, JPIP and OpenEV


On 1/11/06, Norman Barker <nbarker@rsinc.com> wrote:
> Hi,
>
> just by chance when I was using OpenEV I noticed that when displaying ECW or Jpeg2000 it seems to have a progressive quality display.
>
> If OpenEV does implement progressive display for wavelet based images (with quality and resolution layers) how hard would it be for OpenEV to take its data from a JPIP server?
>
> I have a JPIP image server, and will have a go with OpenEV and GDAL if someone can confirm that I haven't witnessed a trick of the eye!!

Norman,

I believe it was a trick of the eye.  In particular as
you zoom in OpenEV will interpolate up the lower
resolution data till it has a chance to reload higher
resolution data.  So you are seeing full res data filled
in over time, but it isn't due to use of progressive display
from the wavelet information.  The same thing happens
with uncompressed formats.

I have had a little success in the past with GDAL
and JPIP via the JP2KAK driver but also lots of
unexplained failures.  Also, the JPIP in GDAL is only
supported on windows.  But I think you should be able to
use a jpip url with gdal (or openev) on win32 currently.

Best regards,
--
Hi Frank,

thanks for the answer, I will get my eyes checked :-)!

Is is possible that you could explain how to use a URL such as jpip://149.171.92.175/meteora.jp2 (which I grabbed from the Kakadu website) with GDAL and OpenEV please?

Since OpenEV implements a display mechanism of rendering the data with a time phase, could it be easily adapted to progressive display?

Many thanks,

Norman


From warmerdam at pobox.com  Wed Jan 11 12:15:54 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] GDAL, JPIP and OpenEV
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E81316D4@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E81316D4@bath.uk.rsinc.com>
Message-ID: <931f8ea90601110915k5f56477are9bd1f5ceda1532b@mail.gmail.com>

On 1/11/06, Norman Barker <nbarker@rsinc.com> wrote:
> Is is possible that you could explain how to use a URL such as jpip://149.171.92.175/meteora.jp2 (which I grabbed from the Kakadu website) with GDAL and OpenEV please?

Norman,

I think you just use it directly.  I just tried it with the FWTools
build and get:

N:\pkg\dstile-0.2>gdalinfo jpip://149.171.92.175/meteora.jp2
ERROR 4: JPIP Protocol not supported by GDAL with Kakadu 3.4 or on Unix.
GDALOpen failed - 4
JPIP Protocol not supported by GDAL with Kakadu 3.4 or on Unix.

But if you build with a Kakadu 4.x it ought to work, at
least to some degree.

>
> Since OpenEV implements a display mechanism of rendering the data with a time phase, could it be easily adapted to progressive display?

I'm not sure what you mean about rendering with
a time phase.  Do you just mean support improving
display over time as more data is loaded?

It cannot be easily adapted to support progressive display.
But if you really wanted to do, the trick would be to get it
to load reduced resolution data in a first pass for some datasets.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From list67 at netscape.net  Wed Jan 11 12:25:48 2006
From: list67 at netscape.net (list67@netscape.net)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] multiple threads - VSIMemFileSystemHandler and
	nCacheUsed
Message-ID: <14D6D024.656E613E.00066B75@netscape.net>

Frank Warmerdam <warmerdam@pobox.com> wrote:
>The nCacheUsed variable is used to decide if blocks should
>be released from the cache to reduce memory use below
>the allowed maximum. ?Because it doesn't really matter if it
>is a bit off when it is being read, I haven't protected all uses
>of this variable with the cache mutex.
>
>However, I think all updates of this variable are protected.
>Let me know if that is not the case.

Frank,

The thread checker is reporting a "read/write data race" for the nCacheUsed variable, with the two sections of code being the GDALRasterBlock destructor and the GDALRasterBlock::Internalize() member function.  It looks like the GDALRasterBlock::Internalize has a mutex lock, but the destructor does not.

    Mike

__________________________________________________________________
Switch to Netscape Internet Service.
As low as $9.95 a month -- Sign up today at http://isp.netscape.com/register

Netscape. Just the Net You Need.

New! Netscape Toolbar for Internet Explorer
Search from anywhere on the Web and block those annoying pop-ups.
Download now at http://channels.netscape.com/ns/search/install.jsp

From nbarker at rsinc.com  Wed Jan 11 12:29:35 2006
From: nbarker at rsinc.com (Norman Barker)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] GDAL, JPIP and OpenEV
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E81316D5@bath.uk.rsinc.com>



-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com]On Behalf Of
Frank Warmerdam
Sent: Wednesday, January 11, 2006 5:16 PM
To: Norman Barker
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDAL, JPIP and OpenEV


On 1/11/06, Norman Barker <nbarker@rsinc.com> wrote:
> Is is possible that you could explain how to use a URL such as jpip://149.171.92.175/meteora.jp2 (which I grabbed from the Kakadu website) with GDAL and OpenEV please?

Norman,

I think you just use it directly.  I just tried it with the FWTools
build and get:

N:\pkg\dstile-0.2>gdalinfo jpip://149.171.92.175/meteora.jp2
ERROR 4: JPIP Protocol not supported by GDAL with Kakadu 3.4 or on Unix.
GDALOpen failed - 4
JPIP Protocol not supported by GDAL with Kakadu 3.4 or on Unix.

But if you build with a Kakadu 4.x it ought to work, at
least to some degree.

>
> Since OpenEV implements a display mechanism of rendering the data with a time phase, could it be easily adapted to progressive display?

I'm not sure what you mean about rendering with
a time phase.  Do you just mean support improving
display over time as more data is loaded?

It cannot be easily adapted to support progressive display.
But if you really wanted to do, the trick would be to get it
to load reduced resolution data in a first pass for some datasets.

Best regards,


Hi Frank,

thanks for the advice, that is very helpful regarding the URL connectivity with GDAL.

I was thinking of time based display in the first instance, but that is a little different to progressive display which
builds on the existing data, I am going to have to think about it!  A JPIP client that is open source would be useful.  I would quite like to do this with OpenEV if possible, the high level language makes this appealing. Do you have any advice?

Many thanks,

Norman Barker






From warmerdam at pobox.com  Wed Jan 11 13:02:07 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] multiple threads - VSIMemFileSystemHandler and
	nCacheUsed
In-Reply-To: <14D6D024.656E613E.00066B75@netscape.net>
References: <14D6D024.656E613E.00066B75@netscape.net>
Message-ID: <931f8ea90601111002qffba421m33e11417c8e0ef14@mail.gmail.com>

On 1/11/06, list67@netscape.net <list67@netscape.net> wrote:
> Frank,
>
> The thread checker is reporting a "read/write data race" for the nCacheUsed variable, with the two sections of code being the GDALRasterBlock destructor and the GDALRasterBlock::Internalize() member function.  It looks like the GDALRasterBlock::Internalize has a mutex lock, but the destructor does not.

Mike,

Right, but as I mentioned it doesn't really matter if the
nCacheUsed readers get an old value since at worst
the cache flushes a block too soon, or too late.  Nothing
serious.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jan 11 13:06:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] GDAL, JPIP and OpenEV
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E81316D5@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E81316D5@bath.uk.rsinc.com>
Message-ID: <931f8ea90601111006j7b84a9es1f43c1ce9a17a87a@mail.gmail.com>

On 1/11/06, Norman Barker <nbarker@rsinc.com> wrote:
> Hi Frank,
>
> thanks for the advice, that is very helpful regarding the URL connectivity with GDAL.
>
> I was thinking of time based display in the first instance, but that is a little different to progressive display which
> builds on the existing data, I am going to have to think about it!  A JPIP client that is open source would be useful.  I would quite like to do this with OpenEV if possible, the high level language makes this appealing. Do you have any advice?

Norman,

Well, I would encourage first trying to get the jpip support
working in GDAL.  If you can't even gdal_translate reliably
from a jpip source then there is no point worrying about
OpenEV.

Also, the only library I know that supports jpip is Kakadu
and that isn't open source.   So it isn't really a full open
source stack.

If you get to the point of trying to do the progressive
display in OpenEV, let me know and I will make a few
suggestions.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dburken at comcast.net  Wed Jan 11 13:47:38 2006
From: dburken at comcast.net (David Burken)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] multiple threads - VSIMemFileSystemHandler
	and	nCacheUsed
In-Reply-To: <14D6D024.656E613E.00066B75@netscape.net>
References: <14D6D024.656E613E.00066B75@netscape.net>
Message-ID: <43C552CA.7050305@comcast.net>

Mike,

>Frank,
>
>The thread checker is reporting a "read/write data race" for the nCacheUsed variable, with the two sections of code being the GDALRasterBlock destructor and the GDALRasterBlock::Internalize() member function.  It looks like the GDALRasterBlock::Internalize has a mutex lock, but the destructor does not.
>
>    Mike
>  
>
Just curious, what are you using for  a "thread checker"?

Dave
 

From woklist at kyngchaos.com  Wed Jan 11 16:18:09 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] PostGIS varchar fields
In-Reply-To: <931f8ea90601102020m26622910p459f98a863cfb0be@mail.gmail.com>
References: <B4603C78-D4C2-461D-81A3-7AF3266459DA@kyngchaos.com>
	<931f8ea90601102020m26622910p459f98a863cfb0be@mail.gmail.com>
Message-ID: <3648D3EA-90FB-4D30-83CC-5141B845B1DB@kyngchaos.com>

I did not use the precision option.  But they are varchars in the  
PostGIS DB - I verified that by browsing the DB with phppgadmin.  I  
thinks that's because I originally created it by importing just the  
geometry with no attributes (I was experimenting),then cleared it,  
then added the attribute fields with SQL commands.  Then I appended  
to the DB with OGR with mif/mid's with full attributes.  So, the  
PostGIS DB does have varchars.  I'd have to scan the DB (large), or  
test on a separate one, to see if any name strings were cut off at 80  
chars (if the fields are already varchar, does -append still cut off  
at 80 chars if the default precision=true is used?).

So, back to the question, is OGR supposed to recognize varchar field  
lengths in postgis?


(Thanks for the heads-ups on the precision option.  I should read the  
docs more carefully ^_^)


On Jan 10, 2006, at 10:20 PM, Frank Warmerdam wrote:

> On 1/10/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
>> I'm not sure if it's supposed to work this way or not:  I extracted
>> an area out of a big PostGIS database, to shapefile, and all the
>> varchar fields from PostGIS became character fields of length 80.  So
>> all those 2-8 varchar fields in the attributes balloon the dbf, and
>> the few 200 char name fields get chopped off.
>>
>> ogrinfo -al -so on the PostGIS DB returns "String (0.0)" for the
>> field type for all varchar fields, but the correct length for all
>> fixed char fields (a few 1 and 2-char fields).  The original mif/mid
>> source I used to create the PostGIS DB with ogr2ogr returns the
>> correct length for all char fields.  A direct ogr2ogr from the mif/
>> mid to shapefile also creates the correct field lengths in the
>> shapefile, although the integer fields get changed to reals.
>
> William,
>
> Is there any change you used the -lco PRECISION=FALSE
> option when copying the data into postgres?  If so, VARCHAR
> gets used for fixed length fields otherwise the fixed length
> string fields should be created as CHAR(length).
>
> The PRECISION layer creation should default to TRUE
> according to the code and docs.
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Mon Dieu! but they are all alike.  Cheating, murdering, lying,  
fighting, and all for things that the beasts of the jungle would not  
deign to possess - money to purchase the effeminate pleasures of  
weaklings.  And yet withal bound down by silly customs that make them  
slaves to their unhappy lot while firm in the belief that they be the  
lords of creation enjoying the only real pleasures of existence....

- the wisdom of Tarzan

From palmerj at xtra.co.nz  Wed Jan 11 17:30:10 2006
From: palmerj at xtra.co.nz (palmerj@xtra.co.nz)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] seg fault with ogr2ogr
Message-ID: <20060111223010.QEUI18564.mta2-rme.xtra.co.nz@[202.27.184.228]>

Hi,

I recently upgraded postgresql 8.1.0/postgis 1.04 and gdal 1.3.1 from 7.4.2/0.9/1.2.6 on a redhat 9.0 box. I have been using pg and postgres with no problems for the last 3 months or so, but I have not used ogr2ogr until now. 

Under 1.2.6 I used to be able to run a command like this with no problems:

ogr2ogr -f "Mapinfo File" testgis PG:dbname=testgis \
-sql "SELECT id,
             getappspecific(id,'SURV', 'Y') AS appellation, 
             transform(translate(shape, 160,0,0),27200) 
      FROM   crs_parcel 
      WHERE  status = 'CURR' 
      AND    toc_code ='PRIM' 
      AND    parcel_intent <> 'ROAD' 
      AND    parcel_intent <> 'HYDR'" \
-nln parcel \
-a_srs 'EPSG:27200'

However under postgis 1.0 and gdal 1.3.1 this now segfaults.

I think it seems to be the way ogr2ogr is running the specified sql statement, because I tried an alternative of creating a view in the database and populating the geometry_column table. 

i.e.

CREATE OR REPLACE VIEW hydro_parcel 
    AS
SELECT id, 
       transform(translate(shape, 160,0,0),27200) as shape
FROM   crs_parcel 
WHERE  status = 'CURR' 
AND    toc_code ='PRIM' 
AND    parcel_intent <> 'ROAD' 
AND    parcel_intent <> 'HYDR';

INSERT INTO geometry_columns (f_table_catalog, f_table_schema, f_table_name, f_geometry_column, coord_dimension, srid, type) VALUES ('', 'public', 'hydro_parcel', 'shape', 2, 27200, 'MULTIPOLYGON');


I then using the following ogr2gr  layer creation command:

ogr2ogr -f "MapInfo File" -a_srs EPSG:27200 testgis PG:dbname=testgis hydro_parcel

It and works!

Note when using the -sql option I tried simpler queries like 'SELECT id, shape FROM crs_parcel' But I still get a seg fault. I have also tried different postgis layers with different geometry type and have had interesting results. One postgis layer that had both geometry types of ?point? and ?linestring? seemed to get into an infinite loop (so it did not seg fault like the others) when creating the .map file. The command I used was:

ogr2ogr -f "MapInfo File" testgis PG: dbname=testgis -sql "SELECT id, shape FROM crs_vector" -nln crs_vector -s_srs EPSG:4326

 I stopped the creation of the mapinfo dataset once the .map file reach 1.5gb

I again used the layer selection creation approach not using the ?sql switch:

ogr2ogr -f "MapInfo File" testgis PG: dbname=testgis crs_vector

and everything worked ok and a correct dataset of about 300mb was created

Any ideas on what is causing these issues with the ogr2ogr?

Thanks

Jeremy Palmer



From warmerdam at pobox.com  Wed Jan 11 22:19:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] PostGIS varchar fields
In-Reply-To: <3648D3EA-90FB-4D30-83CC-5141B845B1DB@kyngchaos.com>
References: <B4603C78-D4C2-461D-81A3-7AF3266459DA@kyngchaos.com>
	<931f8ea90601102020m26622910p459f98a863cfb0be@mail.gmail.com>
	<3648D3EA-90FB-4D30-83CC-5141B845B1DB@kyngchaos.com>
Message-ID: <931f8ea90601111919wcc90bffk3dfc706db0e3d73a@mail.gmail.com>

On 1/11/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
> I did not use the precision option.  But they are varchars in the
> PostGIS DB - I verified that by browsing the DB with phppgadmin.  I
> thinks that's because I originally created it by importing just the
> geometry with no attributes (I was experimenting),then cleared it,
> then added the attribute fields with SQL commands.  Then I appended
> to the DB with OGR with mif/mid's with full attributes.  So, the
> PostGIS DB does have varchars.  I'd have to scan the DB (large), or
> test on a separate one, to see if any name strings were cut off at 80
> chars (if the fields are already varchar, does -append still cut off
> at 80 chars if the default precision=true is used?).
>
> So, back to the question, is OGR supposed to recognize varchar field
> lengths in postgis?

William,

I think I am confused.  If a field is declared "VARCHAR"
doesn't it have a variable length?  That is certainly
the assumption of the OGR code that builds the OGR
field definitions from a table, which means that when
going to shapefile I have to pick an arbitrary field length
for the .dbf file.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Wed Jan 11 23:20:25 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] PostGIS varchar fields
In-Reply-To: <931f8ea90601111919wcc90bffk3dfc706db0e3d73a@mail.gmail.com>
References: <B4603C78-D4C2-461D-81A3-7AF3266459DA@kyngchaos.com>
	<931f8ea90601102020m26622910p459f98a863cfb0be@mail.gmail.com>
	<3648D3EA-90FB-4D30-83CC-5141B845B1DB@kyngchaos.com>
	<931f8ea90601111919wcc90bffk3dfc706db0e3d73a@mail.gmail.com>
Message-ID: <1A4D031A-55FF-4D35-85FF-770E17DB2FB8@kyngchaos.com>

In SQL databases, a varchar field has a maximum length.  Just like a  
fixed char field, it can't store a string longer than that.  The  
variable part is just how it stores the string.  You should get that  
max length when you query the field definitions.


On Jan 11, 2006, at 9:19 PM, Frank Warmerdam wrote:

> On 1/11/06, William Kyngesburye <woklist@kyngchaos.com> wrote:
>> I did not use the precision option.  But they are varchars in the
>> PostGIS DB - I verified that by browsing the DB with phppgadmin.  I
>> thinks that's because I originally created it by importing just the
>> geometry with no attributes (I was experimenting),then cleared it,
>> then added the attribute fields with SQL commands.  Then I appended
>> to the DB with OGR with mif/mid's with full attributes.  So, the
>> PostGIS DB does have varchars.  I'd have to scan the DB (large), or
>> test on a separate one, to see if any name strings were cut off at 80
>> chars (if the fields are already varchar, does -append still cut off
>> at 80 chars if the default precision=true is used?).
>>
>> So, back to the question, is OGR supposed to recognize varchar field
>> lengths in postgis?
>
> William,
>
> I think I am confused.  If a field is declared "VARCHAR"
> doesn't it have a variable length?  That is certainly
> the assumption of the OGR code that builds the OGR
> field definitions from a table, which means that when
> going to shapefile I have to pick an arbitrary field length
> for the .dbf file.
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"I ache, therefore I am.  Or in my case - I am, therefore I ache."

- Marvin


From warmerdam at pobox.com  Wed Jan 11 23:41:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] seg fault with ogr2ogr
In-Reply-To: <20060111223010.QEUI18564.mta2-rme.xtra.co.nz@202.27.184.228>
References: <20060111223010.QEUI18564.mta2-rme.xtra.co.nz@202.27.184.228>
Message-ID: <931f8ea90601112041i457bfe61k13a5bcc6b69546fa@mail.gmail.com>

On 1/11/06, palmerj@xtra.co.nz <palmerj@xtra.co.nz> wrote:
> Hi,
>
> I recently upgraded postgresql 8.1.0/postgis 1.04 and gdal 1.3.1 from 7.4.2/0.9/1.2.6 on a redhat 9.0 box. I have been using pg and postgres with no problems for the last 3 months or so, but I have not used ogr2ogr until now.
>
> Under 1.2.6 I used to be able to run a command like this with no problems:
>
> ogr2ogr -f "Mapinfo File" testgis PG:dbname=testgis \
> -sql "SELECT id,
>              getappspecific(id,'SURV', 'Y') AS appellation,
>              transform(translate(shape, 160,0,0),27200)
>       FROM   crs_parcel
>       WHERE  status = 'CURR'
>       AND    toc_code ='PRIM'
>       AND    parcel_intent <> 'ROAD'
>       AND    parcel_intent <> 'HYDR'" \
> -nln parcel \
> -a_srs 'EPSG:27200'
>
> However under postgis 1.0 and gdal 1.3.1 this now segfaults.
...
> Any ideas on what is causing these issues with the ogr2ogr?

Jeremy,

Sorry, I've no real idea why this is happening.  Any chance
of running things in gdb so you can get a traceback?  Also,
would you consider upgrading to GDAL CVS to see if this
is something that might have been fixed?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From palmerj at xtra.co.nz  Thu Jan 12 03:33:17 2006
From: palmerj at xtra.co.nz (Jeremy Palmer)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] seg fault with ogr2ogr
In-Reply-To: <931f8ea90601112041i457bfe61k13a5bcc6b69546fa@mail.gmail.com>
Message-ID: <20060112083117.HEJG22512.web3-rme.xtra.co.nz@creeping>

> Jeremy,
> 
> Sorry, I've no real idea why this is happening.  Any chance
> of running things in gdb so you can get a traceback?  Also,
> would you consider upgrading to GDAL CVS to see if this
> is something that might have been fixed?
> 
> Best regards,
> --
> ---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent

Hi Frank,

I have compiled gdal 1.3.1 with debug information for the moment as I can?t get the cvs version to compile. I ran ogr2ogr with gdb and got the following trace back:

(gdb) set args -f "Mapinfo File" testgis PG:dbname=testgis -sql "SELECT id, transform(translate(shape, 160,0,0),27200) FROM crs_parcel WHERE status = 'CURR' AND toc_code ='PRIM' AND parcel_intent <> 'ROAD' AND parcel_intent <> 'HYDR'" -nln parcel -a_srs 'EPSG:27200'
(gdb) run
Starting program: /usr/bin/ogr2ogr -f "Mapinfo File" testgis PG:dbname=testgis -sql "SELECT id, transform(translate(shape, 160,0,0),27200) FROM crs_parcel WHERE status = 'CURR' AND toc_code ='PRIM' AND parcel_intent <> 'ROAD' AND parcel_intent <> 'HYDR'" -nln parcel -a_srs 'EPSG:27200'
Reading symbols from shared object read from target memory...done.
Loaded system supplied DSO at 0xd22000
[Thread debugging using libthread_db enabled]
[New Thread -1208776224 (LWP 19613)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread -1208776224 (LWP 19613)]
0x0041b9c9 in OGRLinearRing::_importFromWkb (this=0x9d63538, eByteOrder=wkbNDR, b3D=0,
    pabyData=0x9d3ae15 "\201?A?\016,?DA??v?A/?L?DA?3?a?A^?v\233?DAWv2??AVkZ?DA%?016?VAC??DAA?\237?VA*??DA?\235'\006?A!?\234?DAI\033?\\022?A?$?>DA?}\035\022?A+??>DA?\016\027?A\233?~>DA.\031q\"?A\214?DA\224l\035,?A?\217?DAk?a",
    nBytesAvailable=260) at ogrlinearring.cpp:227
227             memcpy( paoPoints, pabyData + 4, 16 * nPointCount );


Just for your information I'm on a fedora core 4 box at the moment (I discovered the fault on redhat 9.0) both machines are little endian 32bit Intel i686 systems.

Thanks for your help again :)

Jeremy




From mlepage at pyxisinnovation.com  Thu Jan 12 14:47:23 2006
From: mlepage at pyxisinnovation.com (Marc A. Lepage)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] GDAL/OGR 1.3.0 Released
Message-ID: <000401c617b1$01e36d90$1b00a8c0@PyxisInnovation.local>

On 8/22/05, Ben Discoe <ben at vterrain.org> wrote:
> I am just trying to build 1.3.0 for the first time today, and there is
one
> change which gives some compiler worries on MSVC:
> 
> Gdal_priv.h
>  * Revision 1.62  2005/07/25 21:24:28  ssoule
>  * Changed GDALColorTable's "GDALColorEntry *paoEntries" to
>  * "std::vector<GDALColorEntry> aoEntries".
> 
> This causes the following on MSVC 7.1:
> 
> gdal_priv.h(469) : warning C4251: 'GDALColorTable::aoEntries' : class
> 'std::vector<_Ty>' needs to have dll-interface to be used by clients
of
> class 'GDALColorTable' with [ _Ty=GDALColorEntry ]
> 
> It's just a warning, but a troubling one.  Anyone know what it means?
I
> have little idea how calling conventions affect templates like
std::vector.

Has this been resolved yet? It still appears in 1.3.1.

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.371 / Virus Database: 267.14.17/227 - Release Date:
1/11/2006
 


From ari.jolma at tkk.fi  Thu Jan 12 15:27:41 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Multilinestrings with X,Y,Z, and M values in PostGIS
Message-ID: <43C6BBBD.10702@tkk.fi>

I put some shapefiles to PostGIS database with shp2pgsql. These 
shapefiles are 3D Multilinestrings with M values. When I try to read 
this data from the DB with OGR, it fails because it finds 4 values per 
point in the WKT, which is one too many, i.e. the WKT is for example 
"MULTILINESTRING((24.8848574304277 60.4469928011955 59.9400000000005 
0,24.8844676719297 60.4470157676103 60.5599999999995 
21.6100000000006,24.8840204135758 60.4470586829545 61.1800000000003 
46.69000000"...

Am I doing something wrong or what should I correct / or which software 
is to blame? Am I clear enough here?

Ari

-- 
Prof. Ari Jolma
Kartografia ja Geoinformatiikka / Cartography and Geoinformatics
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Thu Jan 12 15:49:35 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Multilinestrings with X,Y,Z, and M values in PostGIS
In-Reply-To: <43C6BBBD.10702@tkk.fi>
References: <43C6BBBD.10702@tkk.fi>
Message-ID: <931f8ea90601121249r7912677ame23f00c9fd19441f@mail.gmail.com>

On 1/12/06, Ari Jolma <ari.jolma@tkk.fi> wrote:
> I put some shapefiles to PostGIS database with shp2pgsql. These
> shapefiles are 3D Multilinestrings with M values. When I try to read
> this data from the DB with OGR, it fails because it finds 4 values per
> point in the WKT, which is one too many, i.e. the WKT is for example
> "MULTILINESTRING((24.8848574304277 60.4469928011955 59.9400000000005
> 0,24.8844676719297 60.4470157676103 60.5599999999995
> 21.6100000000006,24.8840204135758 60.4470586829545 61.1800000000003
> 46.69000000"...
>
> Am I doing something wrong or what should I correct / or which software
> is to blame? Am I clear enough here?

Ari,

I didn't realize PostGIS supported XYZM data.  I would
appreciate it if you could file a bug on this.  At some point
I will support measures in OGR but in the meantime I
should at least modify the WKT parser to discard the
measures.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From v.honzik at gmail.com  Thu Jan 12 18:05:44 2006
From: v.honzik at gmail.com (Vojtech Honzik)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gdal_merge.py and 24 bit images with black border
Message-ID: <003201c617cc$b8eb8d90$dcffa8c0@cheetah>

Would you give me a hint how to utilize fourth (alpha) band to make RGB 24 
bit mosaic? The only hint I got was to use switch -n for no data. 
Unfortunately there is no way how to set a triplet RGB as a parameter. As 
being novice to Python as well as GDAL API, I would like to ask you for hint 
how to make transparent cells with the values 0 0 0 (black) from input.
I have found a script rgbmask.py that adds fourth channel with the values 0 
and 255, but I don't know how to handle with this channel.
Thank you for your hints.

Vojtech Honzik
tel.: +420 777 136 711
e-mail: v.honzik@gmail.com

This mail is best viewed............
.......................with a computer


From s_jubeh at yahoo.com  Thu Jan 12 06:03:54 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] GDAL on  VC7
Message-ID: <20060112110354.83987.qmail@web52714.mail.yahoo.com>

I have downloaded gdal solution, and appended the libraries and include file direcotories . but when i try to build gdal it give me this message
   
  gdal fatal error LNK1104: cannot open file 'libpng13.lib
   
   

		
---------------------------------
Yahoo! Photos ? Showcase holiday pictures in hardcover
 Photo Books. You design it and we?ll bind it!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060112/7c07644d/attachment.html
From warmerdam at pobox.com  Thu Jan 12 20:57:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gdal_merge.py and 24 bit images with black border
In-Reply-To: <003201c617cc$b8eb8d90$dcffa8c0@cheetah>
References: <003201c617cc$b8eb8d90$dcffa8c0@cheetah>
Message-ID: <931f8ea90601121757o6ea80eb0nd60a60780dd9e449@mail.gmail.com>

On 1/12/06, Vojtech Honzik <v.honzik@gmail.com> wrote:
> Would you give me a hint how to utilize fourth (alpha) band to make RGB 24
> bit mosaic? The only hint I got was to use switch -n for no data.
> Unfortunately there is no way how to set a triplet RGB as a parameter. As
> being novice to Python as well as GDAL API, I would like to ask you for hint
> how to make transparent cells with the values 0 0 0 (black) from input.
> I have found a script rgbmask.py that adds fourth channel with the values 0
> and 255, but I don't know how to handle with this channel.
> Thank you for your hints.

Vojtech,

I am not familiar with rgbmask.py.  But if it creates an alpha
channel, then you should be able to use gdalwarp normally and
it will honour the alpha channel - assuming it is properly marked
as an alpha channel.  After running rgbmask.py what does gdalinfo
report for your file?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jgreenberg at arc.nasa.gov  Thu Jan 12 21:25:48 2006
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Status of LFS under win/cygwin?
Message-ID: <200601130226.k0D2Qawq007615@duke.maptools.org>

Hi there, I was checking to see if any progress had been made to include LFS
under cygwin for windows?  Carlos Rueda posted a possible fix a few weeks
back, and I was wondering if anyone had tried to implement it?  

Thanks!

--j

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Office: 650-604-5896
Cell: 415-794-5043
AIM: jgrn307
MSN: jgrn307@hotmail.com




From warmerdam at pobox.com  Thu Jan 12 22:02:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Status of LFS under win/cygwin?
In-Reply-To: <200601130226.k0D2Qawq007615@duke.maptools.org>
References: <200601130226.k0D2Qawq007615@duke.maptools.org>
Message-ID: <931f8ea90601121902u42ef0d32u2a77fa2aed4b5127@mail.gmail.com>

On 1/12/06, Jonathan Greenberg <jgreenberg@arc.nasa.gov> wrote:
> Hi there, I was checking to see if any progress had been made to include LFS
> under cygwin for windows?  Carlos Rueda posted a possible fix a few weeks
> back, and I was wondering if anyone had tried to implement it?

Jonathan,

I have not pursued this matter.  Note that posting patches to
the mailing list is a risky way to dealing with something.  If it
is simple enough to deal with (or a pressing enough issue in
my mind) I might apply it right away.  But if I don't the chance
of my coming back to it are near zero.  Instead bug reports
in bugzilla with all the required details are more effective.

All that said, I'm under substantial pressure on a project
and am unlikely to spend much time on messy build issues
with Cygwin or other similarly un-fun sorts of things.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ben at vterrain.org  Fri Jan 13 00:03:06 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] GDAL on  VC7
In-Reply-To: <20060112110354.83987.qmail@web52714.mail.yahoo.com>
Message-ID: <002d01c617fe$a46a4dc0$9b02a8c0@DellWork>

Salah,
That's just the standard libpng library.  It is one of several dependencies
you'll need to build GDAL.  Have you read the build instructions at
http://vterrain.org/Distrib/gdal.html
-Ben


  _____  

From: salah jubeh
Sent: Thursday, January 12, 2006 1:04 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] GDAL on VC7


I have downloaded gdal solution, and appended the libraries and include file
direcotories . but when i try to build gdal it give me this message
 
gdal fatal error LNK1104: cannot open file 'libpng13.lib

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060112/d7a4fd51/attachment.html
From ben at vterrain.org  Fri Jan 13 00:04:44 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] GDAL/OGR 1.3.0 Released
In-Reply-To: <000401c617b1$01e36d90$1b00a8c0@PyxisInnovation.local>
Message-ID: <003201c617fe$deab5420$9b02a8c0@DellWork>

Marc,
Personally, i've just taken to ignoring the warning.  It has proven
harmless.
-Ben

> -----
> From: Marc A. Lepage
> Sent: Thursday, January 12, 2006 9:47 AM
> 
> On 8/22/05, Ben Discoe <ben at vterrain.org> wrote:
> > This causes the following on MSVC 7.1:
> > gdal_priv.h(469) : warning C4251: 'GDALColorTable::aoEntries' : class 
> > 'std::vector<_Ty>' needs to have dll-interface to be used by clients
[...]
> 
> Has this been resolved yet? It still appears in 1.3.1.


From bill at binko.net  Fri Jan 13 04:46:35 2006
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Frustration with MrSID and ECW
Message-ID: <Pine.LNX.4.58.0601130430480.27766@fastcat.binko.net>


Hi everyone,

I am tearing my hair out right now, trying to get GDAL to do the 
impossible: handle both ECW and MrSID in one GDAL installation (on Linux).

I would really like to get this working, as my sources of images use both, 
and I have no desire to work with uncompressed images (it would be quite a 
large dataset), nor to I want to uncompress and then re-compress them 
(MrSID->ECW, I suppose) as that would lose fidelity.

I have succeeded with this once in the past: I thought!  It turns out that 
when you throw one more variable at it (running PHP as an Apache2 module), 
it blows up.

At this point, I have been unable to get MrSID's latest SDK to build with
CVS HEAD with GCC 3.4.1 (regardless of ECW).  I have done this in the
past, and probably can again, but I'd really like some help from the two
vendors on this.

I know this is vendor-specific, and that neither of these libs are 
open-source, so I hate to ask Frank to spend his time debugging build 
issues and compatibility concerns.  However, I think it would benefit both 
LizardTech, and ERMapper to help fix the build issues (including MrSID's 
inability to build on GCC 3.4), and figure out how to play nice together.

The GDAL package is a Data Abstraction layer, and as such it makes using 
your libraries and formats very easy for those of us who don't want to 
learn 30 APIs.  Data abstraction layers are only useful when they have 
multiple back-ends, and right now, it is very difficult to get both ECW 
and MrSIDs working in the same install.

I have no corporate coffers to raid to offer cash for this support.  
However, I can offer my time and debugging efforts.  I am not a GIS expert 
by any means, but my debugging abilities are at least average, and I am 
very motivated to help.  I have also figured out GCC's library linking 
strategy and have succeeded in getting MrSIDs older libs to work on newer 
compilers.  

Anyway, I realize this is a bit of a whine, and I'm sorry about that, but 
I now have a real need for this, and it has been a long wait for a 
solution.  If there are others out there who are willing and able to help, 
I suppose it doesn't have to be ERMapper and LizardTech who help with 
this: drop me a note, and we'll have at it.

>From a grumpy, sleepy curmudgeon,

Bill

From britten at caris.com  Fri Jan 13 10:32:48 2006
From: britten at caris.com (Ian Britten)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OGRSpatialReference::GetTOWGS84()
Message-ID: <43C7C820.8050307@caris.com>

Hi all,
I'm new to using OGR, and I'm trying to work out if I've encountered a
bug, or whether I'm doing something wrong...

[ FWIW, I'm using the gdal-1.2.5-2mdk RPM on a Mandriva Linux system. ]

I'm:
     1) Creating a OGRSpatialReference, using the default constructor
     2) Setting it to be an EPSG system, using the importFromEPSG()
        method.
     3) Trying to get the WGS84 conversion parameters, using the
        GetTOWGS84() method.

All the steps succeed with no errors, except for the call to
GetTOWGS84(), which fails with an OGRERR_FAILURE error.

I've tried several different EPSG numbers, and they all seem to exhibit
the same behaviour.  Note that the OSR built successfully, and other
methods seem to be returning correct values (ie GetSemiMajor(),
GetSemiMinor(), etc).

After doing some further digging, I wondered if my problem may be
similar to bug #784
(http://bugzilla.remotesensing.org/show_bug.cgi?id=784)

OTOH, maybe there's step that I've missed...
Any help would be appreciated!
Ian
--

PS - The mailing list archive link on the GDAL home page
(http://www.remotesensing.org/gdal/ogr/) isn't correct.

From warmerdam at pobox.com  Fri Jan 13 17:34:32 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OGRSpatialReference::GetTOWGS84()
In-Reply-To: <43C7C820.8050307@caris.com>
References: <43C7C820.8050307@caris.com>
Message-ID: <931f8ea90601131434m5caac24djbd6662163884d80f@mail.gmail.com>

On 1/13/06, Ian Britten <britten@caris.com> wrote:
> Hi all,
> I'm new to using OGR, and I'm trying to work out if I've encountered a
> bug, or whether I'm doing something wrong...
>
> [ FWIW, I'm using the gdal-1.2.5-2mdk RPM on a Mandriva Linux system. ]
>
> I'm:
>      1) Creating a OGRSpatialReference, using the default constructor
>      2) Setting it to be an EPSG system, using the importFromEPSG()
>         method.
>      3) Trying to get the WGS84 conversion parameters, using the
>         GetTOWGS84() method.
>
> All the steps succeed with no errors, except for the call to
> GetTOWGS84(), which fails with an OGRERR_FAILURE error.
>
> I've tried several different EPSG numbers, and they all seem to exhibit
> the same behaviour.  Note that the OSR built successfully, and other
> methods seem to be returning correct values (ie GetSemiMajor(),
> GetSemiMinor(), etc).
>
> After doing some further digging, I wondered if my problem may be
> similar to bug #784
> (http://bugzilla.remotesensing.org/show_bug.cgi?id=784)

Ian,

Like in bug 784, your problem is likely that there
is no TOWGS84 information.  Most datums extracted
from the EPSG database do not.

You might want to dump the WKT and verify there is
not WKT entry there.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Sat Jan 14 16:53:53 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Updated Ruby SWIG Bindings
Message-ID: <43C972F1.9010206@interserv.com>

For anyone interested, I have checked in a fairly significant update to 
the Ruby bindings.  Change include:

* Fixed GNU makefiles so they should actually work

* Integrated GNU makefiles more closely with the top-level GDAL 
makefiles (grab a lot more information from them)

* Fixed some bugs in the gdal typemaps that prevented the wrappers from 
compiling

* A number of typemap changes for Ruby to bring it more inline with the 
Python typemaps

* New test suite for OSR to verify everything is working as it should. 
Its in the gdalautotest for anyone who is looking for examples of using 
Ruby with GDAL.

So the summary is the Ruby bindings for OGR and OSR are complete and in 
good shape.  On the other hand, I'd imagine the GDAL Ruby bindings do 
not work since I've never tested them or used them.  I don't have any 
immediate plans to look at GDAL bindings, so if someone wants to step in 
I'd be happy to guide the way.

One last caveat - the updated SWIG bindings are built with the upcoming 
SWIG 1.3.28 release, so to recreate them either use 1.3.28 HEAD or wait 
until it is released (not sure when that is but I don't think its too 
far in the future).  It would be plausible to backport the typemaps to 
1.3.27 but I don't really see that its worth the effort.

Thanks,

Charlie



From cfis at interserv.com  Sat Jan 14 16:58:59 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] SWIG Unified Type Maps
Message-ID: <43C97423.6070508@interserv.com>

Just a heads up - the upcoming SWIG 1.3.28 release (no date set yet, but 
I think sometime soon) has unified the typemaps used by Perl, Ruby, 
Python and TCL.  What that means for GDAL is that we could probably take 
the separate typemap files we have for those four languages at combine 
them together at some point in the future, resulting in less code to 
maintain.  There is one caveat though, which is all the basic types are 
unified but I don't think Arrays are yet.  Since there is a fair bit of 
use of Arrays in GDAL, we would have to work around that (which 
shouldn't be too hard really).

Thanks,

Charlie
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 2781 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060114/0474644c/smime.bin
From palmerj at xtra.co.nz  Sun Jan 15 17:36:01 2006
From: palmerj at xtra.co.nz (palmerj@xtra.co.nz)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] seg fault with ogr2ogr 
Message-ID: <20060115223601.CXOS1416.mta4-rme.xtra.co.nz@[202.27.184.228]>

Hi Frank,

FYI: I wondering if the handling of the postgis 1.0 geometry type in the custom sql statements is not handled correctly. I tried modifying the previous statement to return WKB format and the queries now work correctly i.e.

ogr2ogr -f "Mapinfo File" testgis PG:dbname=testgis -sql \
"SELECT id, 
 AsBinary(transform(translate(shape,160,0,0),27200), 'NDR') AS wkb_geometry 
 FROM   crs_parcel 
 WHERE  status = 'CURR' 
 AND    toc_code ='PRIM' 
 AND    parcel_intent <> 'ROAD' 
 AND    parcel_intent <> 'HYDR'" \
-nln parcel \
-a_srs EPSG:27200

Cheers
Jeremy



From jason.wangz at gmail.com  Sun Jan 15 21:37:59 2006
From: jason.wangz at gmail.com (Jason)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi, does GDAL supports shapefile?
Message-ID: <68a815150601151837w861f7a6m@mail.gmail.com>

Hi, I am a fresh man in using GDAL. I read the document of GDAL, found
that shapefile (.shp) seems doesn't supported by GDAL. And I also try
used GDALOpen () to open a shapefile file, but got errors. Does GDAL
(gdal v1.22 )supports read/write of shapefile?


From aaronr at z-pulley.com  Sun Jan 15 21:54:17 2006
From: aaronr at z-pulley.com (Aaron Racicot)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi, does GDAL supports shapefile?
In-Reply-To: <68a815150601151837w861f7a6m@mail.gmail.com>
Message-ID: <20060116025420.70B4D3640B5@smtp.easystreet.com>

GDAL is for Rasters...

Check out OGR::
http://www.gdal.org/ogr/

It supports Shapefiles and much more.

Aaron

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Jason
Sent: Sunday, January 15, 2006 6:38 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] hi, does GDAL supports shapefile?

Hi, I am a fresh man in using GDAL. I read the document of GDAL, found
that shapefile (.shp) seems doesn't supported by GDAL. And I also try
used GDALOpen () to open a shapefile file, but got errors. Does GDAL
(gdal v1.22 )supports read/write of shapefile?

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From jeshua at OpenOSX.com  Sun Jan 15 22:04:01 2006
From: jeshua at OpenOSX.com (Jeshua Lacock)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi, does GDAL supports shapefile?
In-Reply-To: <68a815150601151837w861f7a6m@mail.gmail.com>
References: <68a815150601151837w861f7a6m@mail.gmail.com>
Message-ID: <b9f8b472ddd117e4b55503c9bb993ab0@OpenOSX.com>


On Jan 15, 2006, at 7:37 PM, Jason wrote:

> Hi, I am a fresh man in using GDAL. I read the document of GDAL, found
> that shapefile (.shp) seems doesn't supported by GDAL. And I also try
> used GDALOpen () to open a shapefile file, but got errors. Does GDAL
> (gdal v1.22 )supports read/write of shapefile?

The OGR branch of GDAL handles all of the vector formats, and .shp is 
supported. This example command will convert the specified .shp file to 
OGR format:

     ogr2ogr -f GML  contours.gml contours/contour.shp


Cheers,

Jeshua Lacock ___________________________
Programmer/Owner		Phone:	877.240.1364
http://OpenOSX.com		Fax:		415.462.6211
-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_


From jason.wangz at gmail.com  Mon Jan 16 03:35:19 2006
From: jason.wangz at gmail.com (Jason)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi, does GDAL supports shapefile?
In-Reply-To: <b9f8b472ddd117e4b55503c9bb993ab0@OpenOSX.com>
References: <68a815150601151837w861f7a6m@mail.gmail.com>
	<b9f8b472ddd117e4b55503c9bb993ab0@OpenOSX.com>
Message-ID: <68a815150601160035o5707d77cj@mail.gmail.com>

hi, thanks for the replies.

I have another problem.
As for OGRPolygon Class Reference, there has a method name: virtual
int  PointOnSurface (OGRPoint *poPoint) const

Is this method provides a polygon point array? But how can I know
about the total number of OGRPoint objects in this point array?

Thanks.

2006/1/16, Jeshua Lacock <jeshua@openosx.com>:
>
> On Jan 15, 2006, at 7:37 PM, Jason wrote:
>
> > Hi, I am a fresh man in using GDAL. I read the document of GDAL, found
> > that shapefile (.shp) seems doesn't supported by GDAL. And I also try
> > used GDALOpen () to open a shapefile file, but got errors. Does GDAL
> > (gdal v1.22 )supports read/write of shapefile?
>
> The OGR branch of GDAL handles all of the vector formats, and .shp is
> supported. This example command will convert the specified .shp file to
> OGR format:
>
>     ogr2ogr -f GML  contours.gml contours/contour.shp
>
>
> Cheers,
>
> Jeshua Lacock ___________________________
> Programmer/Owner                Phone:  877.240.1364
> http://OpenOSX.com              Fax:            415.462.6211
> -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_
>
>


From s_jubeh at yahoo.com  Mon Jan 16 04:42:02 2006
From: s_jubeh at yahoo.com (salah jubeh)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Compiliing Error
Message-ID: <20060116094202.68350.qmail@web52713.mail.yahoo.com>

I am trying to compile GDAL using Msys/Mingw on WinXP. i get these errors
   
  cpl_vsi_mem.cpp:396: error: invalid use of undefined type `struct stat64'
cpl_vsi.h:211: error: forward declaration of `struct stat64'
cpl_vsi_mem.cpp:397: error: invalid use of undefined type `struct stat64'
cpl_vsi.h:211: error: forward declaration of `struct stat64'
cpl_vsi_mem.cpp:401: error: invalid use of undefined type `struct stat64'
cpl_vsi.h:211: error: forward declaration of `struct stat64'
cpl_vsi_mem.cpp:402: error: invalid use of undefined type `struct stat64'
cpl_vsi.h:211: error: forward declaration of `struct stat64'
make[1]: *** [cpl_vsi_mem.o] Error 1
make[1]: Leaving directory `/c/msys/home/salah/gdal-1.3.1/port'
make: *** [port-target] Error 2
   




Best Regard
 
Eng. Salah Al Jubeh

MCP,MCAD,MCSD 



Mobile:00306947192421

 



		
---------------------------------
Yahoo! Photos ? Showcase holiday pictures in hardcover
 Photo Books. You design it and we?ll bind it!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060116/68bb764f/attachment.html
From dion at west.nl  Mon Jan 16 08:44:19 2006
From: dion at west.nl (dion@west.nl)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Frustration with MrSID and ECW
In-Reply-To: <Pine.LNX.4.58.0601130430480.27766@fastcat.binko.net>
References: <Pine.LNX.4.58.0601130430480.27766@fastcat.binko.net>
Message-ID: <50309.145.50.39.8.1137419059.squirrel@www.west.nl>

Hello Bill,

> I am tearing my hair out right now, trying to get GDAL to do the
> impossible: handle both ECW and MrSID in one GDAL installation (on Linux).

We are having our own set of problems with MrSID, but I think we managed
to at least build a GDAL with r/w support for both. (Once we're sure our
MrSID is working correctly I will provide some feedback on the list).

> At this point, I have been unable to get MrSID's latest SDK to build with
> CVS HEAD with GCC 3.4.1 (regardless of ECW).  I have done this in the
> past, and probably can again, but I'd really like some help from the two
> vendors on this.

Were you able to do so under gcc 3.2? We are using 3.2.3, and building
gdal-cvs-2006.01.04, MrSID ESDK-5.0.6.955.

> Anyway, I realize this is a bit of a whine, and I'm sorry about that, but
> I now have a real need for this, and it has been a long wait for a
> solution.  If there are others out there who are willing and able to help,
> I suppose it doesn't have to be ERMapper and LizardTech who help with
> this: drop me a note, and we'll have at it.

I know things can get frustrating :) Where do the problems occur during
building? Could you show some relevant output of what error(s) you get?

Regards,
Dion.



From warmerdam at pobox.com  Mon Jan 16 08:45:46 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi, does GDAL supports shapefile?
In-Reply-To: <68a815150601160035o5707d77cj@mail.gmail.com>
References: <68a815150601151837w861f7a6m@mail.gmail.com>
	<b9f8b472ddd117e4b55503c9bb993ab0@OpenOSX.com>
	<68a815150601160035o5707d77cj@mail.gmail.com>
Message-ID: <931f8ea90601160545g65d3feb5v1700b91bceb248b6@mail.gmail.com>

On 1/16/06, Jason <jason.wangz@gmail.com> wrote:
> hi, thanks for the replies.
>
> I have another problem.
> As for OGRPolygon Class Reference, there has a method name: virtual
> int  PointOnSurface (OGRPoint *poPoint) const
>
> Is this method provides a polygon point array? But how can I know
> about the total number of OGRPoint objects in this point array?

Jeshua,

Currently the implementation of this method looks like:

/************************************************************************/
/*                           PointOnSurface()                           */
/************************************************************************/

int OGRPolygon::PointOnSurface( OGRPoint * ) const

{
    // notdef ... not implemented yet.

    return OGRERR_FAILURE;
}

that is, there is no implementation.

The intention was that you would pass in a pointer
to an existing OGRPoint object, and this would be
reinitialized with a point on the surface.

I think I had expected to implement this using GEOS
but looking know I don't see an obvious way to implement
it using the GEOS C API.  Perhaps I could use the centroid
function, but it isn't clear to me that the centroid is guaranteed
to be on the surface.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From maovieira at gmail.com  Mon Jan 16 08:48:19 2006
From: maovieira at gmail.com (marco vieira)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr "Failed to find required field" error message
Message-ID: <5becacd20601160548p716e6beeo@mail.gmail.com>

 <gdal-dev@lists.maptools.org>Hi list.
  Im tryng to translate a shapefile with ogr2ogr -f "ESRI Shapefile" -s_srs
"+proj=tmerc +ellps=GRS67 +lat_0=0 +lon_0=-45 +x_0=500000 +y_0=10000000
+k_0=0.9996" -t_srs "+proj=longlat +ellps=WGS84" dest source.shp
ERROR 1: Failed to find required field in datum.csv in
InitDatumMappingTable(),
using default table setup.
  In this case the shapefile was generated and appear to be OK but my real
intention is to convert to MapInfo TAB:

ogr2ogr -f "MapInfo File" -s_srs "+proj=tmerc +ellps=GRS67 +lat_0=0
+lon_0=-45 +x_0=500000 +y_0=10000000 +k_0=0.9996" -t_srs "+proj=longlat
+ellps=WGS84" dest source.shp

  In this case no error messages happend, but the .tab file don't shows
nothing.

 This happend in my linux (GDAL 1.3.1.0) and windows (FWTools 1.0.0a7) box.

--
Marco Vieira
+55 21 9499-6800
e-mail: maovieira@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060116/bab64b07/attachment.html
From bartvde at xs4all.nl  Mon Jan 16 10:29:44 2006
From: bartvde at xs4all.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr with PostgreSQL 8.1
Message-ID: <43CBBBE8.7030702@xs4all.nl>

Hi list,

shouldn't the tables created by ogr2ogr explicitly specify WITH OIDS? 
AFAIK all the Mapserver SQL assumes there is an OID column. I am using 
the latest FWTools.

CREATE TABLE percelen_region
(
  ogc_fid int4 NOT NULL DEFAULT 
nextval('percelen_region_ogc_fid_seq'::regclass),
  wkb_geometry geometry,
  aanduid char(12),
  gemcod char(5),
  sectie char(2),
  nummer char(5),
  secnum char(7),
  hoek numeric(8,3),
  CONSTRAINT enforce_dims_wkb_geometry CHECK (ndims(wkb_geometry) = 2),
  CONSTRAINT enforce_geotype_wkb_geometry CHECK 
(geometrytype(wkb_geometry) = 'MULTIPOLYGON'::text OR wkb_geometry IS NULL),
  CONSTRAINT enforce_srid_wkb_geometry CHECK (srid(wkb_geometry) = -1)
)
WITHOUT OIDS;

Best regards,
Bart

-- 
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


From bartvde at xs4all.nl  Mon Jan 16 10:55:53 2006
From: bartvde at xs4all.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr with PostgreSQL 8.1
In-Reply-To: <43CBBBE8.7030702@xs4all.nl>
References: <43CBBBE8.7030702@xs4all.nl>
Message-ID: <43CBC209.7040200@xs4all.nl>

Sorry, there seems no apparent need since in the MAP file the unique 
column is overrideable, this is my use case which works fine:

  CONNECTIONTYPE POSTGIS
  CONNECTION "user=postgres dbname=gisarts host=127.0.0.1 port=5432 
password=*****"
  DATA "wkb_geometry from percelen_region USING UNIQUE ogc_fid"

Best regards,
Bart

Bart van den Eijnden (OSGIS) wrote:

> Hi list,
>
> shouldn't the tables created by ogr2ogr explicitly specify WITH OIDS? 
> AFAIK all the Mapserver SQL assumes there is an OID column. I am using 
> the latest FWTools.
>
> CREATE TABLE percelen_region
> (
>  ogc_fid int4 NOT NULL DEFAULT 
> nextval('percelen_region_ogc_fid_seq'::regclass),
>  wkb_geometry geometry,
>  aanduid char(12),
>  gemcod char(5),
>  sectie char(2),
>  nummer char(5),
>  secnum char(7),
>  hoek numeric(8,3),
>  CONSTRAINT enforce_dims_wkb_geometry CHECK (ndims(wkb_geometry) = 2),
>  CONSTRAINT enforce_geotype_wkb_geometry CHECK 
> (geometrytype(wkb_geometry) = 'MULTIPOLYGON'::text OR wkb_geometry IS 
> NULL),
>  CONSTRAINT enforce_srid_wkb_geometry CHECK (srid(wkb_geometry) = -1)
> )
> WITHOUT OIDS;
>
> Best regards,
> Bart
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


From warmerdam at pobox.com  Mon Jan 16 10:56:47 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr with PostgreSQL 8.1
In-Reply-To: <43CBBBE8.7030702@xs4all.nl>
References: <43CBBBE8.7030702@xs4all.nl>
Message-ID: <931f8ea90601160756r154d2eb7l33ea65c24f57377f@mail.gmail.com>

On 1/16/06, Bart van den Eijnden (OSGIS) <bartvde@xs4all.nl> wrote:
> Hi list,
>
> shouldn't the tables created by ogr2ogr explicitly specify WITH OIDS?
> AFAIK all the Mapserver SQL assumes there is an OID column. I am using
> the latest FWTools.

Bart,

I gather that the need for WITH OIDS is something new,
likely in Postgres 8.1?  How would I request OIDs when
creating the table?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From bartvde at xs4all.nl  Mon Jan 16 10:59:39 2006
From: bartvde at xs4all.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr with PostgreSQL 8.1
In-Reply-To: <931f8ea90601160756r154d2eb7l33ea65c24f57377f@mail.gmail.com>
References: <43CBBBE8.7030702@xs4all.nl>
	<931f8ea90601160756r154d2eb7l33ea65c24f57377f@mail.gmail.com>
Message-ID: <43CBC2EB.8090406@xs4all.nl>

Hi Frank,

this is indeed new in PostgreSLQ 8.1. By default tables are created 
without oids.

At the end of the SQL you would just use WITH OIDS.

But see my last post, to me there is no apparent need to do this.

Best regards,
Bart

Frank Warmerdam wrote:

>On 1/16/06, Bart van den Eijnden (OSGIS) <bartvde@xs4all.nl> wrote:
>  
>
>>Hi list,
>>
>>shouldn't the tables created by ogr2ogr explicitly specify WITH OIDS?
>>AFAIK all the Mapserver SQL assumes there is an OID column. I am using
>>the latest FWTools.
>>    
>>
>
>Bart,
>
>I gather that the need for WITH OIDS is something new,
>likely in Postgres 8.1?  How would I request OIDs when
>creating the table?
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>
>  
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


From hobu at iastate.edu  Mon Jan 16 11:13:26 2006
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OGR MySQL development
Message-ID: <p06200702bff165df46b8@[192.168.11.4]>

List,

I have been making improvements to OGR's MySQL driver.  These 
improvements including being able to natively read MySQL geometries 
and eventually will include write support for MySQL.  I have been 
testing with MySQL 5.0.18 on both OS X and Fedora Core 3.  No 
guarantees for anything less than that at this point.

A summary of what has been completed so far:
- Detect geometry columns
- Read geometries from MySQL using AsBinary()
- Read geometry column from geometry_columns table
- Detect geometry type from geometry_columns table
- Read srid and srtext from spatial_ref_sys

If you are interested in playing with this, look at the load2mysq.py 
script in pymod/samples.  This can be used to load an OGR layer into 
MySQL.   It will create a spatial index as well as geometry_columns 
and spatial_ref_sys tables.  I have been testing with Schuyler's 
world_borders.shp <http://mappinghacks.com/data/world_borders.zip>, 
and you may have to edit the 4326 SRID values in the script if your 
data is in something different.

MySQL in CVS should be considered unstable until some point in the 
near future once these additions are complete.  If you decide to play 
around with it, I'd be interested in hearing how it goes and what 
troubles you have.  As always, I'm on #gdal on IRC.

Howard




From paul at warriner.us  Mon Jan 16 12:51:26 2006
From: paul at warriner.us (R. Paul Warriner)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr with PostgreSQL 8.1
Message-ID: <W3300625679221691137433886@webmail10>

Bart,

I found the same to be true. PostGIS lists had some discussion about this last year, as 8.1 was due out, but the topic seemed to drop off.

It appears you can use anything for the key, but that sort of leaves it up to the developer to make sure the identifier is not duplicated somewhere in another table being joined. As the non guru I am, it appears merging tables, that duplicate IDs, could pose a serious problem, not to mention what it might be doing with the geometry_columns table, or other geometry funtions, if duplicated.

I wonder if the OID drop was a performance or limits issue, and the PostgreSQL developers felt it was better left to the database designers.

Regards,
Paul

-----Original Message-----
From: Bart van den Eijnden (OSGIS) [mailto:bartvde@xs4all.nl]
Sent: Monday, January 16, 2006 10:55 AM
To: 'Bart van den Eijnden (OSGIS)'
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ogr2ogr with PostgreSQL 8.1

Sorry, there seems no apparent need since in the MAP file the unique 
column is overrideable, this is my use case which works fine:

 CONNECTIONTYPE POSTGIS
 CONNECTION "user=postgres dbname=gisarts host=127.0.0.1 port=5432 
password=*****"
 DATA "wkb_geometry from percelen_region USING UNIQUE ogc_fid"

Best regards,
Bart

Bart van den Eijnden (OSGIS) wrote:

> Hi list,
>
> shouldn't the tables created by ogr2ogr explicitly specify WITH OIDS? 
> AFAIK all the Mapserver SQL assumes there is an OID column. I am using 
> the latest FWTools.
>
> CREATE TABLE percelen_region
> (
> ogc_fid int4 NOT NULL DEFAULT 
> nextval('percelen_region_ogc_fid_seq'::regclass),
> wkb_geometry geometry,
> aanduid char(12),
> gemcod char(5),
> sectie char(2),
> nummer char(5),
> secnum char(7),
> hoek numeric(8,3),
> CONSTRAINT enforce_dims_wkb_geometry CHECK (ndims(wkb_geometry) = 2),
> CONSTRAINT enforce_geotype_wkb_geometry CHECK 
> (geometrytype(wkb_geometry) = 'MULTIPOLYGON'::text OR wkb_geometry IS 
> NULL),
> CONSTRAINT enforce_srid_wkb_geometry CHECK (srid(wkb_geometry) = -1)
> )
> WITHOUT OIDS;
>
> Best regards,
> Bart
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060116/d9b2c509/attachment.html
From JAMES.E.HOPPER at saic.com  Mon Jan 16 17:58:37 2006
From: JAMES.E.HOPPER at saic.com (Hopper, James E.)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Error building for mac
Message-ID: <BFF18F4D.211%james.e.hopper@saic.com>

I added a target to my xcode project so that I could build a version of gdal
with jpeg/png/gif/tiff/geotiff would use internal versions.  When I run the
autotests on it I get a lot of errors like the ones below.  Can anyone point
me at where I might have gone wrong?
Thanks jim


ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
ERROR 1: data/rgbsmall.tif:Deflate compression support is not configured
ERROR 1: TIFFReadEncodedStrip() failed.


From hobu at iastate.edu  Mon Jan 16 18:46:38 2006
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Error building for mac
In-Reply-To: <BFF18F4D.211%james.e.hopper@saic.com>
References: <BFF18F4D.211%james.e.hopper@saic.com>
Message-ID: <p06200705bff1e000e688@[192.168.11.4]>

James,

*How* did you add a build target to xcode, by using the "External 
Build Target," or by manually adding in files to an existing project. 
I've found that I've had the most success with the "External Build 
Target" layout in Xcode 2.2.  Do your normal configure process using 
the terminal, and then pointing Xcode at the directory.  It even 
picks up the CVS stuff if you're using that too.  I've found it to be 
really nice.

BTW, deflate might be related to needing zlib to be internal as well. 
Just a guess, I'm not sure though.

Howard

At 2:58 PM -0800 1/16/06, Hopper, James E. wrote:
>I added a target to my xcode project so that I could build a version of gdal
>with jpeg/png/gif/tiff/geotiff would use internal versions.  When I run the
>autotests on it I get a lot of errors like the ones below.  Can anyone point
>me at where I might have gone wrong?
>Thanks jim
>
>
>ERROR 1: IReadBlock failed at X offset 0, Y offset 0
>ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>ERROR 1: IReadBlock failed at X offset 0, Y offset 0
>ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>ERROR 1: data/rgbsmall.tif:Deflate compression support is not configured
>ERROR 1: TIFFReadEncodedStrip() failed.
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From JAMES.E.HOPPER at saic.com  Mon Jan 16 18:51:38 2006
From: JAMES.E.HOPPER at saic.com (Hopper, James E.)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Error building for mac
In-Reply-To: <p06200705bff1e000e688@[192.168.11.4]>
Message-ID: <BFF19BBA.217%james.e.hopper@saic.com>

Think I got it.  I forgot some -D options.  Now I get

Test Script: gdalautotest_all
Succeeded: 401
Failed:    0 (0 blew exceptions)
Skipped:   192


When running tests same as the make file.

I am going to try to build an intel version for the new macs next.

Thanks jim



On 1/16/06 6:46 PM, "Howard Butler" <hobu@iastate.edu> wrote:



James, 

*How* did you add a build target to xcode, by using the "External 
Build Target," or by manually adding in files to an existing project. 
I've found that I've had the most success with the "External Build 
Target" layout in Xcode 2.2.  Do your normal configure process using 
the terminal, and then pointing Xcode at the directory.  It even 
picks up the CVS stuff if you're using that too.  I've found it to be 
really nice. 

BTW, deflate might be related to needing zlib to be internal as well. 
Just a guess, I'm not sure though. 

Howard 

At 2:58 PM -0800 1/16/06, Hopper, James E. wrote: 
>I added a target to my xcode project so that I could build a version of
gdal 
>with jpeg/png/gif/tiff/geotiff would use internal versions.  When I run the

>autotests on it I get a lot of errors like the ones below.  Can anyone
point 
>me at where I might have gone wrong? 
>Thanks jim 
> 
> 
>ERROR 1: IReadBlock failed at X offset 0, Y offset 0 
>ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0 
>ERROR 1: IReadBlock failed at X offset 0, Y offset 0 
>ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0 
>ERROR 1: data/rgbsmall.tif:Deflate compression support is not configured 
>ERROR 1: TIFFReadEncodedStrip() failed. 
> 
>_______________________________________________ 
>Gdal-dev mailing list 
>Gdal-dev@lists.maptools.org 
>http://lists.maptools.org/mailman/listinfo/gdal-dev
<http://lists.maptools.org/mailman/listinfo/gdal-dev>  






From warmerdam at pobox.com  Mon Jan 16 19:06:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Error building for mac
In-Reply-To: <BFF18F4D.211%james.e.hopper@saic.com>
References: <BFF18F4D.211%james.e.hopper@saic.com>
Message-ID: <931f8ea90601161606h51bc7f05o1940b86d1c8ad0d6@mail.gmail.com>

On 1/16/06, Hopper, James E. <JAMES.E.HOPPER@saic.com> wrote:
> I added a target to my xcode project so that I could build a version of gdal
> with jpeg/png/gif/tiff/geotiff would use internal versions.  When I run the
> autotests on it I get a lot of errors like the ones below.  Can anyone point
> me at where I might have gone wrong?
> Thanks jim
>
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> ERROR 1: data/rgbsmall.tif:Deflate compression support is not configured
> ERROR 1: TIFFReadEncodedStrip() failed.

James,

If you want jpeg, deflate and pixarlog compression the
#define'd constants need to be specified.  You might want to
look at gdal/frmts/gtiff/libtiff/GNUmakefile for clues on this.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gdal at geoworld.de  Tue Jan 17 08:18:47 2006
From: gdal at geoworld.de (Nicol Hermann)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] pgeo extent output
Message-ID: <1137503927.4255.12.camel@emil.intranet.gdv.com>

Hi List,

i try to use the pgeo driver to read personal geodatabases with
ogr/mapserver. i use the windows version of the fwtools from
http://www.gdal.org/dl/fwtools/FWTools100a8.exe

I wonder if there is a bug in the output of the extent.
To me the output of miny and maxy seems to be interchanged. Is this
possible?

Extent: (2539349.025141, 5507435.329978) - (2578361.199992,
5441968.219988)

ArcGIS 9.x returns the following values:

X/Y Domain:
   Min X: 2535000.000000
   Min Y: 5440000.000000
   Max X: 2604000.000000
   Max Y: 5509000.00000

Thanks for any help.
Nicol


Whole output of orginfo:

c:\Programme\FWTools1.0.0a8\bin>ogrinfo c:\temp\saarneu.mdb Wasser -so
INFO: Open of `c:\temp\saarneu.mdb'
using driver `PGeo' successful.

Layer name: Wasser
Geometry: Unknown (any)
Feature Count: 223
Extent: (2539349.025141, 5507435.329978) - (2578361.199992,
5441968.219988)
Layer SRS WKT:
PROJCS["DHDN_3_Degree_Gauss_Zone_2",
    GEOGCS["GCS_Deutsches_Hauptdreiecksnetz",
        DATUM["Deutsches_Hauptdreiecksnetz",
            SPHEROID["Bessel_1841",6377397.155,299.1528128]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",2500000.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",6.0],
    PARAMETER["Scale_Factor",1.0],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]
OBJECTID: Integer (10.0)
Shape_Length: Real (0.0)
Shape_Area: Real (0.0)
DRVAL1: String (9.0)
DRVAL2: String (9.0)


From warmerdam at pobox.com  Tue Jan 17 08:59:12 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] pgeo extent output
In-Reply-To: <1137503927.4255.12.camel@emil.intranet.gdv.com>
References: <1137503927.4255.12.camel@emil.intranet.gdv.com>
Message-ID: <931f8ea90601170559l57673c39nf718b6c367ba94eb@mail.gmail.com>

On 1/17/06, Nicol Hermann <gdal@geoworld.de> wrote:
> Hi List,
>
> i try to use the pgeo driver to read personal geodatabases with
> ogr/mapserver. i use the windows version of the fwtools from
> http://www.gdal.org/dl/fwtools/FWTools100a8.exe
>
> I wonder if there is a bug in the output of the extent.
> To me the output of miny and maxy seems to be interchanged. Is this
> possible?
>
> Extent: (2539349.025141, 5507435.329978) - (2578361.199992,
> 5441968.219988)

Nicol,

You are correct.  The Y values were being returned incorrectly.
I have fixed this in CVS, and the next FWTools release should
have the fix.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gdal at geoworld.de  Tue Jan 17 10:36:38 2006
From: gdal at geoworld.de (Nicol Hermann)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gcp with gdal_translate
Message-ID: <1137512198.4149.7.camel@emil.intranet.gdv.com>

Hi list,

me again.
i would like to georeference a tif file with gdal_translate.
therefor i use the following lines:
gdal_translate pol.tif -gcp 1120 1696 29.65 -2.34 -gcp 2154 91
30.45-1.09 -gcp 2236 1784 30.57 -2.54  gcps.tif
gdalwarp -tps gcps.tif warped.tif

This works great.
Whenever i add more than 3 gcp's (e.g.

gdal_translate Ruanda_pol.tif -gcp 1120 1696 29.65 -2.34 -gcp 2154 91
30.45-1.09  -gcp 332 2208  29.02 -2.74 -gcp 1504 1680 29.92 -2.65
gcps.tif
)

i get this error message:

Creating output file that is 0P x 3676L.
ERROR 1: Attempt to create 0x3676x3 TIFF file, but width, height and
bands must be positive.

How can i specify more than gcp's? Do i miss something conceptual?
Thanks for any hint
Nicol


From warmerdam at pobox.com  Tue Jan 17 11:22:43 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gcp with gdal_translate
In-Reply-To: <1137512198.4149.7.camel@emil.intranet.gdv.com>
References: <1137512198.4149.7.camel@emil.intranet.gdv.com>
Message-ID: <931f8ea90601170822pc416070m3b30be048cb99e8d@mail.gmail.com>

On 1/17/06, Nicol Hermann <gdal@geoworld.de> wrote:
> Hi list,
>
> me again.
> i would like to georeference a tif file with gdal_translate.
> therefor i use the following lines:
> gdal_translate pol.tif -gcp 1120 1696 29.65 -2.34 -gcp 2154 91
> 30.45-1.09 -gcp 2236 1784 30.57 -2.54  gcps.tif
> gdalwarp -tps gcps.tif warped.tif
>
> This works great.
> Whenever i add more than 3 gcp's (e.g.
>
> gdal_translate Ruanda_pol.tif -gcp 1120 1696 29.65 -2.34 -gcp 2154 91
> 30.45-1.09  -gcp 332 2208  29.02 -2.74 -gcp 1504 1680 29.92 -2.65
> gcps.tif
> )

Nicol,

For my test file, the above worked ok as long as I put a space
before the -1.09.  I have no idea how you could be getting
the results you are.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Tue Jan 17 14:34:02 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] WKB byte order and SWIG
Message-ID: <43CD46AA.1030202@interserv.com>

Something that tripped me up today.  I see in the SWIG bindings for OGR 
  that the byte order is assumed to be big endian (from ogr.i):

OGRErr ExportToWkb( int *nLen, char **pBuf, OGRwkbByteOrder 
byte_order=wkbXDR ) {
   }

Note that default parameter.  This seems to me like a really bad idea, 
because it means you can write code on an Intel computer (which is what, 
95% of all computers people use?) like this:

wkb1 = geom1.export_to_wkb()

And have no idea that the result you just got back is wrong.  I think 
that byteOrder should not have a default value - and if it must, it 
really should be wkbNDR.

Unless someone says something, I plan on removing the default value and 
making this a required parameter, just like it is in the C OGR API.

Charlie


From warmerdam at pobox.com  Tue Jan 17 16:07:42 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] WKB byte order and SWIG
In-Reply-To: <43CD46AA.1030202@interserv.com>
References: <43CD46AA.1030202@interserv.com>
Message-ID: <931f8ea90601171307y678739cds328d2482d26c2a61@mail.gmail.com>

On 1/17/06, Charlie Savage <cfis@interserv.com> wrote:
> wkb1 = geom1.export_to_wkb()
>
> And have no idea that the result you just got back is wrong.  I think
> that byteOrder should not have a default value - and if it must, it
> really should be wkbNDR.

Charlie,

The returned WKB isn't wrong, it is just slightly suboptimal for your
platform.

> Unless someone says something, I plan on removing the default value and
> making this a required parameter, just like it is in the C OGR API.

If you like, change the default wkbNDR, but please be very careful
about unnecessary changes that could break existing scripts.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cfis at interserv.com  Tue Jan 17 17:35:24 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Re: WKB byte order and SWIG
In-Reply-To: <931f8ea90601171307y678739cds328d2482d26c2a61@mail.gmail.com>
References: <43CD46AA.1030202@interserv.com>
	<931f8ea90601171307y678739cds328d2482d26c2a61@mail.gmail.com>
Message-ID: <43CD712C.1020101@interserv.com>

> 
> The returned WKB isn't wrong, it is just slightly suboptimal for your
> platform.

Good point...

> If you like, change the default wkbNDR, but please be very careful
> about unnecessary changes that could break existing scripts.

Okay, then I'll go with wkbNDR so as not to break existing scripts.

Charlie


From cfis at interserv.com  Tue Jan 17 21:17:29 2006
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Re: ogr2ogr with PostgreSQL 8.1
In-Reply-To: <W3300625679221691137433886@webmail10>
References: <W3300625679221691137433886@webmail10>
Message-ID: <43CDA539.9070909@interserv.com>

 From the postgresql manuals:

The oid type is currently implemented as an unsigned four-byte integer. 
Therefore, it is not large enough to provide database-wide uniqueness in 
large databases, or even in large individual tables. So, using a 
user-created table's OID column as a primary key is discouraged. OIDs 
are best used only for references to system tables.

This seems like something better left to the database designer...

Charlie

R. Paul Warriner wrote:
> Bart,
> 
> I found the same to be true. PostGIS lists had some discussion about 
> this last year, as 8.1 was due out, but the topic seemed to drop off.
> 
> It appears you can use anything for the key, but that sort of leaves it 
> up to the developer to make sure the identifier is not duplicated 
> somewhere in another table being joined. As the non guru I am, it 
> appears merging tables, that duplicate IDs, could pose a serious 
> problem, not to mention what it might be doing with the geometry_columns 
> table, or other geometry funtions, if duplicated.
> 
> I wonder if the OID drop was a performance or limits issue, and the 
> PostgreSQL developers felt it was better left to the database designers.
> 
> Regards,
> Paul
> 
> -----Original Message-----
> From: Bart van den Eijnden (OSGIS) [mailto:bartvde@xs4all.nl]
> Sent: Monday, January 16, 2006 10:55 AM
> To: 'Bart van den Eijnden (OSGIS)'
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] ogr2ogr with PostgreSQL 8.1
> 
> Sorry, there seems no apparent need since in the MAP file the unique
> column is overrideable, this is my use case which works fine:
> 
> CONNECTIONTYPE POSTGIS
> CONNECTION "user=postgres dbname=gisarts host=127.0.0.1 port=5432
> password=*****"
> DATA "wkb_geometry from percelen_region USING UNIQUE ogc_fid"
> 
> Best regards,
> Bart
> 
> Bart van den Eijnden (OSGIS) wrote:
> 
>  > Hi list,
>  >
>  > shouldn't the tables created by ogr2ogr explicitly specify WITH OIDS?
>  > AFAIK all the Mapserver SQL assumes there is an OID column. I am using
>  > the latest FWTools.
>  >
>  > CREATE TABLE percelen_region
>  > (
>  > ogc_fid int4 NOT NULL DEFAULT
>  > nextval('percelen_region_ogc_fid_seq'::regclass),
>  > wkb_geometry geometry,
>  > aanduid char(12),
>  > gemcod char(5),
>  > sectie char(2),
>  > nummer char(5),
>  > secnum char(7),
>  > hoek numeric(8,3),
>  > CONSTRAINT enforce_dims_wkb_geometry CHECK (ndims(wkb_geometry) = 2),
>  > CONSTRAINT enforce_geotype_wkb_geometry CHECK
>  > (geometrytype(wkb_geometry) = 'MULTIPOLYGON'::text OR wkb_geometry IS
>  > NULL),
>  > CONSTRAINT enforce_srid_wkb_geometry CHECK (srid(wkb_geometry) = -1)
>  > )
>  > WITHOUT OIDS;
>  >
>  > Best regards,
>  > Bart
>  >
> 
> 
> -- 
> Bart van den Eijnden
> OSGIS, Open Source GIS
> http://www.osgis.nl
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From higon_jos at gva.es  Wed Jan 18 02:21:38 2006
From: higon_jos at gva.es (=?ISO-8859-1?Q?Jos=E9_Vicente_Hig=F3n_Valero?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Single ECW from multiple tiles
Message-ID: <43CDEC82.2050700@gva.es>

Hi list,
I want to get a single ECW from a set of ECW tiles. I have been reading 
into the list, specifically the thread with title "single ECW output 
from multiple input tiles". At first, I got a VRT file using the script 
posted to the list by Gabriel Ebner:
  # gdal_vrtmerge.py -o test.vrt *.ecw
Next, I tried to convert the VRT into a ECW:
  # gdal_translate -of ECW --config ECW_LARGE_OK YES test.vrt test.ecw
but I get this error after a few seconds:
  "ERROR 1: TryWinRasterIO() failed for blocked scanline."
  "ERROR 1: IReadBlock failed at X offset 0, Y offset 1449"

I'm using gdal 1.3.1 with libecwj2-3.3 on a suse 9.0.
  #uname -a
  #Linux chevi 2.4.21-99-default #1 Wed Sep 24 13:30:51 UTC 2003 i686 
i686 i386 GNU/Linux

Any clue?
Thanks in advance.
-- 

  Jos? Vicente Hig?n
  Grupo de desarrollo de gvSIG
  Conselleria de Infraestructuras y Transporte
  Generalitat Valenciana
  Valencia - Spain
  http://www.gvsig.gva.es


From holl at gdf-hannover.de  Wed Jan 18 07:34:51 2006
From: holl at gdf-hannover.de (Stephan Holl)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Oracle, v.external and FID
Message-ID: <20060118133451.20069cd6@bambule.gdf-hannover.de>

Dear developers,

since I do not know if it is a GRASS or GDAL/OGR problem, I crosspost
this email. Sorry for any inconvenience.

We are using the OCI-bindings to connect to
oracle-spatial. This works so far with ogr2ogr. 

NOw we try to use GRASS with its module v.external. Since OGR does not
have a generic method to determine the OGC_FID-column, the GRASS-lib
does a test with different column-names (which is far from optimal).

The 3rd column-name matches the dataset, so the FID-column can be
used. But, after that a strange error appears.

Command:
v.external dsn=OCI:user/pw@oracle.host.com layer=TEST.Testdata
out=TESTDATA1

The error is:
Invalid layer name, no underscore found: TESTDATA1


I am wondering whether this error comes from OGR, GRASS or even Oracle
(which I don`t think).

Has anybody come accross this error?

Thanks for any pointers.

	Stephan

-- 
GDF Hannover - Solutions for spatial data analysis and remote sensing
Hannover Office      -     Mengendamm 16d      -     D-30177 Hannover
Internet: www.gdf-hannover.de      -      Email: holl@gdf-hannover.de
Phone : ++49-(0)511.39088507       -        Fax: ++49-(0)511.39088508
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060118/d4eb6992/signature.bin
From kris_rock82 at yahoo.com  Wed Jan 18 12:48:50 2006
From: kris_rock82 at yahoo.com (kris rock)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Mrsid sdk
Message-ID: <20060118174850.68610.qmail@web35911.mail.mud.yahoo.com>

Hello all, i am not sure what sdk is used for compiling GDAL with mrsid support, ultimately i have to use mrsid with UMN mapserver. My company was planning to buy the SDK but not sure which one to buy. we are using a windows 2000 server. 
   
  Can anyone please help me out in this ......
   
  Kris

		
---------------------------------
Yahoo! Photos
 Ring in the New Year with Photo Calendars. Add photos, events, holidays, whatever.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060118/da18333c/attachment.html
From ed at topozone.com  Wed Jan 18 12:51:34 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD7CE@ptolemy.topozone.com>

Folks -

I have downloaded a few sample BSB files from the NOAA RNC distribution
site, and I'm trying to use gdal_translate to convert these to GeoTIFFs.
In each case (I've tried five) I get a "Failed to find compressed data
segment of BSB file" error message from GDAL.  I'm using a fresh build
of gdal-1.3.1, and the FWTools-1.0.0a7 versions of gdal_translate and
OpenEV, all with the same results.

I have also used the "NOAA Chart Reprojector" utility to reproject and
convert these input images to TIFF, so I'm confident that the source
data is not corrupted.

These are current BSB files (about which I know rather little).  I'd
appreciate any suggestions on how to fix this problem or how I might
best investigate it further.  Thanks!

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 


From warmerdam at pobox.com  Wed Jan 18 15:15:32 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD7CE@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD7CE@ptolemy.topozone.com>
Message-ID: <931f8ea90601181215w5c6848c7p7f5806b620957e89@mail.gmail.com>

On 1/18/06, Ed McNierney <ed@topozone.com> wrote:
> Folks -
>
> I have downloaded a few sample BSB files from the NOAA RNC distribution
> site, and I'm trying to use gdal_translate to convert these to GeoTIFFs.
> In each case (I've tried five) I get a "Failed to find compressed data
> segment of BSB file" error message from GDAL.  I'm using a fresh build
> of gdal-1.3.1, and the FWTools-1.0.0a7 versions of gdal_translate and
> OpenEV, all with the same results.
>
> I have also used the "NOAA Chart Reprojector" utility to reproject and
> convert these input images to TIFF, so I'm confident that the source
> data is not corrupted.
>
> These are current BSB files (about which I know rather little).  I'd
> appreciate any suggestions on how to fix this problem or how I might
> best investigate it further.  Thanks!

Ed,

Can you provide a direct pointer to one of these files?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Wed Jan 18 15:19:31 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD7D4@ptolemy.topozone.com>

Frank -

I've placed one of the smaller ones on
ftp://ftp.topozone.com/NOAA_BSBs20853.zip - the ZIP file is the original
distribution I downloaded from NOAA's chart distribution site.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Wednesday, January 18, 2006 3:16 PM
To: Ed McNierney
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Problems translating BSB files

On 1/18/06, Ed McNierney <ed@topozone.com> wrote:
> Folks -
>
> I have downloaded a few sample BSB files from the NOAA RNC 
> distribution site, and I'm trying to use gdal_translate to convert
these to GeoTIFFs.
> In each case (I've tried five) I get a "Failed to find compressed data

> segment of BSB file" error message from GDAL.  I'm using a fresh build

> of gdal-1.3.1, and the FWTools-1.0.0a7 versions of gdal_translate and 
> OpenEV, all with the same results.
>
> I have also used the "NOAA Chart Reprojector" utility to reproject and

> convert these input images to TIFF, so I'm confident that the source 
> data is not corrupted.
>
> These are current BSB files (about which I know rather little).  I'd 
> appreciate any suggestions on how to fix this problem or how I might 
> best investigate it further.  Thanks!

Ed,

Can you provide a direct pointer to one of these files?

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From smalgin at esri.com  Wed Jan 18 15:24:26 2006
From: smalgin at esri.com (Sergey Malgin)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] MrSID,
	ECW formats unusable when RasterIO is used - GDAL 1.3.1
Message-ID: <00e801c61c6d$2d53d6c0$1e330d0a@esri.com>

 

All,

 

I just finished writing a simple test app that uses GDAL 1.3.1 . My OS is
WinXP. 

 

I use this method:

 

CPLErr GDALRasterBand::RasterIO (
<http://www.gdal.org/gdal_8h.html#4844f11ca9da952f36f3c979b6b0d320>
GDALRWFlag  eRWFlag, int  nXOff, int  nYOff, int  nXSize, int  nYSize, void
*  pData, int  nBufXSize, int  nBufYSize,
<http://www.gdal.org/gdal_8h.html#0287768ebb5ec0ce09259acdb570eb8e>
GDALDataType  eBufType, int  nPixelSpace, int  nLineSpace ) 

 

to render and resample RGB data. It mostly works, but it's quite unusable
when I use MrSID and ECW

 

1. MrSID problem

 

It looks like RasterIO method doesn't use MrSID multiresolution support. It
takes 80 seconds to get data from 3.5MB SID file. I am trying to get full
extent with output dimensions set to approx. 500x500 pixels.

 

 

 

2. ECW problem. 

 

I have 2.5GB ECW. It shows full extent very fast, but when I zoom in a
little, I get back blank image! If I continue to zoom in, eventually I get
the data from lowest pyramid level. 

 

 

 

Please help.

 

 

Sergey Malgin

ESRI, Inc

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060118/f2d4da62/attachment.html
From warmerdam at pobox.com  Wed Jan 18 16:27:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] MrSID,
	ECW formats unusable when RasterIO is used - GDAL 1.3.1
In-Reply-To: <00e801c61c6d$2d53d6c0$1e330d0a@esri.com>
References: <00e801c61c6d$2d53d6c0$1e330d0a@esri.com>
Message-ID: <931f8ea90601181327q2c41e4d4nbae5e0437b8aeffb@mail.gmail.com>

On 1/18/06, Sergey Malgin <smalgin@esri.com> wrote:
> It looks like RasterIO method doesn't use MrSID multiresolution support. It
> takes 80 seconds to get data from 3.5MB SID file. I am trying to get full
> extent with output dimensions set to approx. 500x500 pixels.

Sergey,

There were some quirks with multiresolution level selection that may
have still existed in the code in 1.3.1.  You might want to try a nightly
snapshot of GDAL and see if the problem persists.  If it does, please
submit a minimal program, a file and any supported needed details
for me to reproduce the problem.

> 2. ECW problem.
>
> I have 2.5GB ECW. It shows full extent very fast, but when I zoom in a
> little, I get back blank image! If I continue to zoom in, eventually I get
> the data from lowest pyramid level.

I haven't encountered anything like this.  Once again, I
would suggest you try a nightly snapshot.  What version of
the ECW SDK are you using?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Jan 18 16:39:49 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] MrSID,
	ECW formats unusable when RasterIO is used - GDAL 1.3.1
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C2AD@mailman.san.com>

Sergey,

We had the same problem in 1.3.1.  You need to upgrade to the latest
version of GDAL and use the MrSID version 5.x SDK.  That problem has
been fixed.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Wednesday, January 18, 2006 2:27 PM
To: Sergey Malgin
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MrSID,ECW formats unusable when RasterIO is used
- GDAL 1.3.1

On 1/18/06, Sergey Malgin <smalgin@esri.com> wrote:
> It looks like RasterIO method doesn't use MrSID multiresolution
support. It
> takes 80 seconds to get data from 3.5MB SID file. I am trying to get
full
> extent with output dimensions set to approx. 500x500 pixels.

Sergey,

There were some quirks with multiresolution level selection that may
have still existed in the code in 1.3.1.  You might want to try a
nightly
snapshot of GDAL and see if the problem persists.  If it does, please
submit a minimal program, a file and any supported needed details
for me to reproduce the problem.

> 2. ECW problem.
>
> I have 2.5GB ECW. It shows full extent very fast, but when I zoom in a
> little, I get back blank image! If I continue to zoom in, eventually I
get
> the data from lowest pyramid level.

I haven't encountered anything like this.  Once again, I
would suggest you try a nightly snapshot.  What version of
the ECW SDK are you using?

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From prasanth at louisiana.edu  Wed Jan 18 15:17:05 2006
From: prasanth at louisiana.edu (Prasanth Chintamaneni)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gdalwarp state plane?
Message-ID: <A07A05FD38E7694FB517CFEB98779E950E25AA@cbitsrv06.CBITDEV.local>

I am trying to reproject my data using the below command, 

gdalwarp -s_srs "EPSG:26982" -t_srs "+proj=latlong +datum=WGS84" 

 

I am getting the following error

ERROR 6: EPSG PCS/GCS code 26982 not found in EPSG support files.  Is
this a valid

 

Help please?

 

Thank you,

Prasanth.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060118/6d3556aa/attachment.html
From warmerdam at pobox.com  Wed Jan 18 18:53:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD7D4@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD7D4@ptolemy.topozone.com>
Message-ID: <931f8ea90601181553x24ce60b0i531553608775250f@mail.gmail.com>

On 1/18/06, Ed McNierney <ed@topozone.com> wrote:
> Frank -
>
> I've placed one of the smaller ones on
> ftp://ftp.topozone.com/NOAA_BSBs20853.zip - the ZIP file is the original
> distribution I downloaded from NOAA's chart distribution site.

Ed,

I have tried fiddling with these a bunch, but can't seem
to get them to work.  You might want to file a bug against
GDAL to remind me to revisit this issue, but for now I
am pushing it to the backburner.

Sorry,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Wed Jan 18 19:03:15 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
In-Reply-To: <931f8ea90601181553x24ce60b0i531553608775250f@mail.gmail.com>
Message-ID: <BFF44173.30610%ed@topozone.com>

Frank -

Thanks; I'll try to spend some time debugging, but I don't know much about
the format.  This seems to be a problem with any RNCs downloaded from NOAA's
site, so it's possible someone else with more expertise will bump into it.

I'll let you know if I come across any useful info, and I'll get the bug
written up.

     - Ed


On 1/18/06 6:53 PM, "Frank Warmerdam" <warmerdam@pobox.com> wrote:

> On 1/18/06, Ed McNierney <ed@topozone.com> wrote:
>> Frank -
>> 
>> I've placed one of the smaller ones on
>> ftp://ftp.topozone.com/NOAA_BSBs20853.zip - the ZIP file is the original
>> distribution I downloaded from NOAA's chart distribution site.
> 
> Ed,
> 
> I have tried fiddling with these a bunch, but can't seem
> to get them to work.  You might want to file a bug against
> GDAL to remind me to revisit this issue, but for now I
> am pushing it to the backburner.
> 
> Sorry,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jan 18 19:25:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gdalwarp state plane?
In-Reply-To: <A07A05FD38E7694FB517CFEB98779E950E25AA@cbitsrv06.CBITDEV.local>
References: <A07A05FD38E7694FB517CFEB98779E950E25AA@cbitsrv06.CBITDEV.local>
Message-ID: <931f8ea90601181625i64197e1fj83bf52bde7e890b7@mail.gmail.com>

On 1/18/06, Prasanth Chintamaneni <prasanth@louisiana.edu> wrote:
> I am trying to reproject my data using the below command,
>
> gdalwarp -s_srs "EPSG:26982" -t_srs "+proj=latlong +datum=WGS84"
>
> I am getting the following error
>
> ERROR 6: EPSG PCS/GCS code 26982 not found in EPSG support files.  Is this a
> valid

Prasanth,

What version of GDAL are you using?  Is it from a packaged
build?  What platform?  It seems to work for me.

Most likely the support files with the EPSG definitions are not
being found.  They will have names like gcs.csv and pcs.csv.  If
you find them, try setting the GDAL_DATA environment variable
to point to the directory containing them.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From perrygeo at gmail.com  Wed Jan 18 20:30:49 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] gdalwarp state plane?
In-Reply-To: <A07A05FD38E7694FB517CFEB98779E950E25AA@cbitsrv06.CBITDEV.local>
References: <A07A05FD38E7694FB517CFEB98779E950E25AA@cbitsrv06.CBITDEV.local>
Message-ID: <5383fa5e0601181730k1e1c1451l64dfbee9cb10b910@mail.gmail.com>

Prasanth,

Try looking at your epsg file (/usr/share/proj/epsg  ?) to see if it
contains an entry for 26982 (it should).

Also try -srs "epsg:26982" or "+init=epsg:26982" and see if you get
different results. Some applications, and I'm not sure if gdalwarp is
one of them, are case-sensitive.

Matt Perry

On 1/18/06, Prasanth Chintamaneni <prasanth@louisiana.edu> wrote:
>
>
>
> I am trying to reproject my data using the below command,
>
> gdalwarp -s_srs "EPSG:26982" -t_srs "+proj=latlong +datum=WGS84"
>
>
>
> I am getting the following error
>
> ERROR 6: EPSG PCS/GCS code 26982 not found in EPSG support files.  Is this a
> valid
>
>
>
> Help please?
>
>
>
> Thank you,
>
> Prasanth.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From smalgin at esri.com  Wed Jan 18 22:14:54 2006
From: smalgin at esri.com (Sergey Malgin)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] MrSID,
	ECW formats unusable when RasterIO is used - GDAL 1.3.1 - USER ERROR
In-Reply-To: <ED3A48B9840E594890A2BC172D11946502F9C2AD@mailman.san.com>
Message-ID: <012a01c61ca6$84f2a080$1e330d0a@esri.com>

All, 

MrSID problem: User error. Had older copy of DSDK in my search path.
Thanks to Martin Chapman for giving me a clue.

ECW problem: User error (bug in output georef generator)
Sorry about this. Stupid mistake.

I have no more problems. My prototype works now. 
Keep up great job, guys.

PS I wonder how much faster it would be if I use AdviseRead()... I'll try it
soon enough :)

Sergey Malgin
ESRI, Inc

> -----Original Message-----
> From: Chapman, Martin [mailto:MChapman@sanz.com]
> Sent: 18 ?????? 2006 ?. 13:40
> To: Frank Warmerdam; Sergey Malgin
> Cc: gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] MrSID,ECW formats unusable when RasterIO is used -
> GDAL 1.3.1
> 
> Sergey,
> 
> We had the same problem in 1.3.1.  You need to upgrade to the latest
> version of GDAL and use the MrSID version 5.x SDK.  That problem has
> been fixed.
> 
> Martin
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
> Warmerdam
> Sent: Wednesday, January 18, 2006 2:27 PM
> To: Sergey Malgin
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] MrSID,ECW formats unusable when RasterIO is used
> - GDAL 1.3.1
> 
> On 1/18/06, Sergey Malgin <smalgin@esri.com> wrote:
> > It looks like RasterIO method doesn't use MrSID multiresolution
> support. It
> > takes 80 seconds to get data from 3.5MB SID file. I am trying to get
> full
> > extent with output dimensions set to approx. 500x500 pixels.
> 
> Sergey,
> 
> There were some quirks with multiresolution level selection that may
> have still existed in the code in 1.3.1.  You might want to try a
> nightly
> snapshot of GDAL and see if the problem persists.  If it does, please
> submit a minimal program, a file and any supported needed details
> for me to reproduce the problem.
> 
> > 2. ECW problem.
> >
> > I have 2.5GB ECW. It shows full extent very fast, but when I zoom in a
> > little, I get back blank image! If I continue to zoom in, eventually I
> get
> > the data from lowest pyramid level.
> 
> I haven't encountered anything like this.  Once again, I
> would suggest you try a nightly snapshot.  What version of
> the ECW SDK are you using?
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------
> ------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From bill at binko.net  Wed Jan 18 23:55:35 2006
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] A PHP/Mapscript DSO Comment (and bug?)
Message-ID: <Pine.LNX.4.58.0601182333110.28201@fastcat.binko.net>

Hi everyone,

Sorry for the cross-post, but I thought this should be in both list
archives (trying save future frustrations).

I recently went round and round trying to get PHP/Mapsript to display 
rasters using GDAL on Linux when PHP was run as an Apache DSO.  In 
particular, my environment was 

O/S: Mandrake 10.1
Apache Server version: 2.0.50 (running as Pre-Fork)
PHP 4.3.8 (built as CGI, CLI, and Apache DSO by default)
Mapserver CVS HEAD
GDAL CVS HEAD

In the process of whittling down the issue, I removed ECW, MrSID and many 
other options from GDAL and Mapserver, so that in reality, I was running a 
very stripped down version of both.

The error first showed up as occasional dropped HTTP requests (about 1 in 
10 requests).  The request would make it to the server, and PHP would 
start, but nothing would be sent back to the client, and the Apache child 
process would hang until Apache killed it (via the php max_execution_time
parameter) without any logging.

I got Apache running in debug mode and found that it was always the
_second_ PHP/Mapserver request to a particular Apache child process that
included a raster (GDAL) layer that was hanging.  The reason it seemed
less often was the number of Apache children and my settings in that area.

Debugging php_mapscript.so when PHP is loaded as a DSO is a real 
challenge(!).  In fact, I have been unable to completely get into a clean 
debugging environment for it.  The reason is that all php_mapscript.so 
calls are two "dlopen()" calls deep (first Apache loading mod_php and then 
PHP loading php_mapscript.so).

Daniel has good instructions about how to get past the second dlopen() 
here:
http://mapserver.gis.umn.edu/data2/wilma/mapserver-users/0201/msg00187.html

However, before you can do that, you need to get mod_php loaded.  I have 
been fairly unsuccessful in setting breakpoints in a successfully running 
process.  However, when the process hung, I was able to load the symbols 
for php_mapscript.so and libgdal.so by using this technique (Google is 
your friend) :

http://primates.ximian.com/~federico/news-2005-03.html#19

What I found was that GDAL was getting hung in the
_XTIFFDefaultDirectory() method.  Sometimes a floating point or divide by
zero error would occur in that place as well.  For the GDAL developers, it 
may be worthwhile to look at the type safety of the xtiffFieldInfo array, 
but I don't have enough to really put my finger on the problem.

Luckily (for me), I have found a way around this for the moment.  Don't 
think I'm not interested in finding the bug: I am!  However, I have to 
make progress on other items, and I simply need to pass the lead on this 
to someone else (if anyone cares).

The trick is to simply pre-load php_mapscript.so in the php.ini file with 
a line like this:

extension=php_mapscript.so
(and remove the dl() calls from your .php scripts)

That loads php_mapscript.so (and therefore libgdal.so) _once_ avoiding the 
problem.

If anyone has similar issues and wants to work with me on this, please let 
me know.  In the mean time, I'm not sure if this is a GDAL bug or a 
Mapserver bug, so I'm not going to create either until I get some 
feedback.  I just wanted to document this while I had the chance.

Bill

From gus at vpac.org  Thu Jan 19 00:38:12 2006
From: gus at vpac.org (Angus MacAulay)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ECW support
Message-ID: <1137649092.11325.4.camel@dhcp-221.vpac.org>

Hi,

I am trying to compile GDAL with ECW support (on Linux).  Unfortunately
I can't get libecw to compile.  Output is shown below, thanks in
advance.

Regards
Gus

Making all in Source
make[1]: Entering directory
`/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source'
Making all in NCSBuildGnu
make[2]: Entering directory
`/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/NCSBuildGnu'
make  all-am
make[3]: Entering directory
`/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/NCSBuildGnu'
if g++ -DHAVE_CONFIG_H -I. -I. -I.  -D_GNU_SOURCE -D_REENTRANT
-DLIBECWJ2 -DLINUX -D_LARGEFILE_SOURCE -D_L ARGEFILE64_SOURCE
-D_FILE_OFFSET_BITS=64 -DUNICODE -D_UNICODE -DPOSIX
-I/home/gus/Desktop/libecwj2-3.3.zip _FILES/libecwj2-3.3/Source/include
-I/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/C/NCSEcw /lcms/include -Wall -Wno-long-long -fpic -fno-common   -g -O2 -MT ______lib_libecwj2_a-NCSJP2.o -MD -MP -M F ".deps/______lib_libecwj2_a-NCSJP2.Tpo" \
  -c -o ______lib_libecwj2_a-NCSJP2.o `test -f
'../C/NCSEcw/NCSJP2/NCSJP2.cpp' || echo './'`../C/NCSEcw/NC
SJP2/NCSJP2.cpp; \
then mv -f ".deps/______lib_libecwj2_a-NCSJP2.Tpo"
".deps/______lib_libecwj2_a-NCSJP2.Po"; \
else rm -f ".deps/______lib_libecwj2_a-NCSJP2.Tpo"; exit 1; \
fi
/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/include/NCSJP2FileView.h:837: error: ISO C++ forbids declaration of ?CNCSJPCResample? with no type
/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/include/NCSJP2FileView.h:837: error: expected  ?;? before ?*? token
make[3]: *** [______lib_libecwj2_a-NCSJP2.o] Error 1
make[3]: Leaving directory
`/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/NCSBuildGnu'
make[2]: *** [all] Error 2
make[2]: Leaving directory
`/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source/NCSBuildGnu'
make[1]: *** [all-recursive] Error 1
make[1]: Leaving directory
`/home/gus/Desktop/libecwj2-3.3.zip_FILES/libecwj2-3.3/Source'
make: *** [all-recursive] Error 1



From eric.doenges at gmx.net  Thu Jan 19 02:54:41 2006
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
In-Reply-To: <BFF44173.30610%ed@topozone.com>
References: <BFF44173.30610%ed@topozone.com>
Message-ID: <C6EC4A9A-A54B-49E4-8FFE-1615FA80A299@gmx.net>


Am 19.01.2006 um 01:03 schrieb Ed McNierney:

> Frank -
>
> Thanks; I'll try to spend some time debugging, but I don't know  
> much about
> the format.  This seems to be a problem with any RNCs downloaded  
> from NOAA's
> site, so it's possible someone else with more expertise will bump  
> into it.
>
> I'll let you know if I come across any useful info, and I'll get  
> the bug
> written up.
>
>      - Ed


Ed, I think the problem is the following code in bsb_read.c (please  
note that this is
from a fairly old version of GDAL, since I have extensively rewritten  
BSB support -
unfortunately, I cannot share this code with the world at large  
because the necessary
information to do the rewrite was obtained under NDA from MapTech -  
so this might not be
exactly like this in recent GDAL code):

     {
         int    nSkipped = 0;

         while( nSkipped < 100
               && (BSBGetc( fp, bNO1 ) != 0x1A || BSBGetc( fp,  
bNO1 ) != 0x00) )
             nSkipped++;

         if( nSkipped == 100 )
         {
             BSBClose( psInfo );
             CPLError( CE_Failure, CPLE_AppDefined,
                       "Failed to find compressed data segment of BSB  
file." );
             return NULL;
         }
     }


The file in question (83116_1.KAP) look like this in the hexdump:

00000f50  32 34 33 31 0d 0a 1a 1a  00 33 01 a0 9e 04 00 02  | 
2431.....3......|

Note the two 0x1a directly following each other. So what happens is  
that in the while
loop above, a BSBGetc is executed, which fetches 0x1a, which means  
the second BSBGetc
in the || clause is executed, which also fetches a 0x1a. Since this  
is not a zero,
the test is true and nSkipped is incremented. In the next run through  
the loop,
BSBGetc gets a zero, and then we never find the 0x1a 0x00 sequence.

With kind regards,
Eric




From tflynch at gmail.com  Thu Jan 19 03:57:02 2006
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ECW support
In-Reply-To: <1137649092.11325.4.camel@dhcp-221.vpac.org>
References: <1137649092.11325.4.camel@dhcp-221.vpac.org>
Message-ID: <c39b2a650601190057v6c52ae68ya63c71cff9651e3e@mail.gmail.com>

G'day Angus,

Haven't seen that one before, but if you investigate the offending
line it does appear to be legal (and preceding lines etc.).  Although
perhaps some more subtle parsing phenomenon is at work.  It appears to
be interpreting CNCSJPCResample as a type rather than as the class
that it is, so maybe you should consider forward declaring it in
NCSJP2FileView.h.

It's possible that the error is caused by order of compilation of
files or something silly.

Put a line class CNCSJPCResample; somewhere near the top of the header
file and have another go.

Failing that, can you quote me your gcc and Linux versions?

For those who are wondering when the next ECW JPEG 2000 SDK cut will
be available: we found some positively scary bugs in 3.3 RC1 which
explains the delay.  Most of those are now fixed, so expect something
fairly soon.  I won't give a precise ETA as they seem to jinx the
whole process :-)

Cheers,

--
Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com


From armin.burger at gmx.net  Thu Jan 19 05:37:16 2006
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ECW support
References: <c39b2a650601190057v6c52ae68ya63c71cff9651e3e@mail.gmail.com>
Message-ID: <20981.1137667036@www84.gmx.net>

Tom, Angus,

I had the same problem when compiling the ECW SDK 3.3 RC 1 on Ubuntu 5.10
with GCC/G++ 4. The error never appeared on Debian 3.1 systems that use GCC
3.3. So I guess it could be related to the GCC/G++ compiler. But I hope this
problem will be fixed in newer releases.

Armin


> --- Urspr?ngliche Nachricht ---
> Von: Tom Lynch <tflynch@gmail.com>
> An: "gdal-dev@lists.maptools.org" <gdal-dev@lists.maptools.org>
> Betreff: Re: [Gdal-dev] ECW support
> Datum: Thu, 19 Jan 2006 16:57:02 +0800
> 
> G'day Angus,
> 
> Haven't seen that one before, but if you investigate the offending
> line it does appear to be legal (and preceding lines etc.).  Although
> perhaps some more subtle parsing phenomenon is at work.  It appears to
> be interpreting CNCSJPCResample as a type rather than as the class
> that it is, so maybe you should consider forward declaring it in
> NCSJP2FileView.h.
> 
> It's possible that the error is caused by order of compilation of
> files or something silly.
> 
> Put a line class CNCSJPCResample; somewhere near the top of the header
> file and have another go.
> 
> Failing that, can you quote me your gcc and Linux versions?
> 
> For those who are wondering when the next ECW JPEG 2000 SDK cut will
> be available: we found some positively scary bugs in 3.3 RC1 which
> explains the delay.  Most of those are now fixed, so expect something
> fairly soon.  I won't give a precise ETA as they seem to jinx the
> whole process :-)
> 
> Cheers,
> 
> --
> Tom Lynch
> Development, ER Mapper
> Phone:      +61 8 93882900
> Fax:        +61 8 93882901
> Email:      tom.lynch@ermapper.com
> Web:        http://www.ermapper.com
> Forums:     http://forum.ermapper.com
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

-- 
Telefonieren Sie schon oder sparen Sie noch?
NEU: GMX Phone_Flat http://www.gmx.net/de/go/telefonie

From warmerdam at pobox.com  Thu Jan 19 08:16:13 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
In-Reply-To: <C6EC4A9A-A54B-49E4-8FFE-1615FA80A299@gmx.net>
References: <BFF44173.30610%ed@topozone.com>
	<C6EC4A9A-A54B-49E4-8FFE-1615FA80A299@gmx.net>
Message-ID: <931f8ea90601190516o3d69ad5fj93e9dc7c24565ef8@mail.gmail.com>

On 1/19/06, Eric D?nges <eric.doenges@gmx.net> wrote:
> Ed, I think the problem is the following code in bsb_read.c (please
> note that this is
> from a fairly old version of GDAL, since I have extensively rewritten
> BSB support -
> unfortunately, I cannot share this code with the world at large
> because the necessary
> information to do the rewrite was obtained under NDA from MapTech -
> so this might not be
> exactly like this in recent GDAL code):
>
>      {
>          int    nSkipped = 0;
>
>          while( nSkipped < 100
>                && (BSBGetc( fp, bNO1 ) != 0x1A || BSBGetc( fp,
> bNO1 ) != 0x00) )
>              nSkipped++;
>
>          if( nSkipped == 100 )
>          {
>              BSBClose( psInfo );
>              CPLError( CE_Failure, CPLE_AppDefined,
>                        "Failed to find compressed data segment of BSB
> file." );
>              return NULL;
>          }
>      }
>
>
> The file in question (83116_1.KAP) look like this in the hexdump:
>
> 00000f50  32 34 33 31 0d 0a 1a 1a  00 33 01 a0 9e 04 00 02  |
> 2431.....3......|
>
> Note the two 0x1a directly following each other. So what happens is
> that in the while
> loop above, a BSBGetc is executed, which fetches 0x1a, which means
> the second BSBGetc
> in the || clause is executed, which also fetches a 0x1a. Since this
> is not a zero,
> the test is true and nSkipped is incremented. In the next run through
> the loop,
> BSBGetc gets a zero, and then we never find the 0x1a 0x00 sequence.

Eric,

I thought of that, and modified a local copy of bsb_read.c to identify
the 0x1a 0x00 properly.  Next I discovered that the next byte, which
should be the number of bits (often 0x04 or 0x03) was crazy (0x33).
I took a bit of a jump-of-intuition and guessed that 0x33 (ASCII '3')
should have been binary 0x03 and tried to operate on that basis.
But this still produced a corrupt image, even though it did get
a bit further.

It was at this point that I gave up, under the assumption that there
were significant things I was missing.

Good work identifying the 0x1A 0x00 issue though!  You are
a binary file dumping, reverse engineering fellow after my own
heart.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jorn at spacetec.no  Thu Jan 19 10:12:49 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr issue
Message-ID: <200601191612.49599.jorn@spacetec.no>

Hi, 

I'm sure if this is platform related.

On our Suse 9.2 server I get:
"Failed to find required field in datum.csv in InitDatumMappingTable(), using 
default table setup."

On my PC (Mandrake 10.0) it works fine

We are using FWTools-linux-1.0.0a7

Any clues?

cheers
Joern

From kris_rock82 at yahoo.com  Thu Jan 19 11:33:50 2006
From: kris_rock82 at yahoo.com (kris rock)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] GDAL compile problem
Message-ID: <20060119163350.23920.qmail@web35911.mail.mud.yahoo.com>

Hello all, i am getting an error when trying to compile my GDAL with mrsid support. The error is 
   
  LINK : fatal error LNK1104: cannot open file "c:\projects\proj-4.4.9\src.obj"
   
  I dont have a src.obj, i am not even finding the relavant src.c files so that i can try and build the object files. If anyone encountered this problem before could they please help me out ....
   
  Thanks for your time,
  kris ...

		
---------------------------------
Yahoo! Photos ? Showcase holiday pictures in hardcover
 Photo Books. You design it and we?ll bind it!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060119/77ce82bb/attachment.html
From support at geoimage.fr  Thu Jan 19 12:18:09 2006
From: support at geoimage.fr (Fabien Dachicourt)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] New project using GDAL : SpacEyes3D
Message-ID: <098301c61d1c$522034d0$3301a8c0@ANKARA>

Hi,
Our project SpacEyes3D is a commercial 3D visualisation software for 
cartographic data using GDAL.
You can try the free Viewer with sample databases on our web site : 
SpacEyes3D Viewer allows you to quickly build your own 3D model from any 
raster DTM and image.

More info here : http://www.spaceyes.com

Thanks to the GDAL community.
Regards,
Fabien


From sheb_susan at yahoo.com  Thu Jan 19 13:07:21 2006
From: sheb_susan at yahoo.com (sheba thomas)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Shape file header content
Message-ID: <20060119180721.32243.qmail@web30002.mail.mud.yahoo.com>

 can any one please tell the Shapefile header content or the structure of the shapefile header.
  

		
---------------------------------
Yahoo! Photos
 Ring in the New Year with Photo Calendars. Add photos, events, holidays, whatever.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060119/1aff6685/attachment.html
From pgao at esri.com  Thu Jan 19 13:40:35 2006
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems with creating EHdr BIL
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20160E483@firewire.esri.com>

We have run some tests on Ehdr, and found two small problems:

- colormap is not persisted
- NoData value is not persisted

The new tag PIXELTYPE SIGNEDINT works great. Thanks.

Gao, Peng


From ed at topozone.com  Thu Jan 19 15:05:50 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD7E0@ptolemy.topozone.com>

Frank & Eric -

Well I'm old enough to edit a binary file or two, too.....

Thanks very much for the help.  I located a very helpful bit of code on SourceForce called libbsb for reading and writing BSB files, written by Stuart Cunningham <stuart_hc@users.sourceforge.net>, and I read patent 5,727,090 as referenced in the header comments in the GDAL file bsb_read.c.  With a little inspection of my sample data, I now know a lot more about BSB files than I did yesterday!  Here follow my observations.

1. I also noticed the code in bsb_read.c which is fooled by a 0x1A 0x1A 0x00 sequence, and which needs a fix along the lines of what Frank mentioned.  In the patent description this sequence is described as "The header is followed by three binary values. The first is 1AH, which the DOS TYPE command will treat as an end-of-file marker. A zero is used to separate file segments or image offsets. The value of the image format is the start of the binary graphic data."  This is a little vaguely worded - I can't quite be certain whether the "value of the image format" byte is supposed to be counted in the "three binary values" or not.  All 5 of the BSB files I have downloaded from the NOAA chart distribution site contain the sequence 0x1A 0x1A 0x00 at the end of the header (after the last CR/LF) and before the "value of the image format" byte.  The bsb_read.c code makes reference to an example file "optech/World.kap" that has the sequence 0x1A 0x0D 0x0A 0x1A 0x00 after the CR/LF at the end of the header.  This does not seem consistent with the patent description of the format.  However, in all those (six) cases a corrected method for finding 0x1A 0x00 will correctly locate the beginning of the binary image data.  It is possible, however, that the safest implementation is "look for the first 0x00 after finding the first 0x1A", which would handle both the current NOAA samples and the "optech/World.kap" file.

2. The next byte is the "value of the image format" byte and it appears (from the examples) that this is supposed to be the ASCII character "3" (0x33) for image format "3", as Frank surmised below.  From a reading of the patent language, it might be intending to say the same thing there, too.  Since this is redundant information, we might want to ignore it or tolerate mismatches (see below).

3. The libbsb utility bsb2tif will correctly (apparently) convert the current NOAA BSB files to TIF images - at least, they're reasonable-looking TIFF images of NOAA charts with no obvious visual problems.  This utility reports a warning that the bit depth from the IFM tag does not match the data read from the file.  This is because the libbsb code rather overconfidently simply reads and discards two bytes where it's expecting to find 0x1A 0x00 and then loads the third byte as the image format value - it doesn't even bother to inspect those two bytes.  As a result, it reads 0x1A 0x1A and then reads 0x00 and compares it to the image format (my samples use formats 3 and 4) and reports the mismatch.

4. This mismatch does not bother the libbsb code because it uses the scanline index table to locate each line of image data, while the GDAL code iterates through the image data to find each line.  The libbsb code is more robust since a bad scanline can get GDAL irrecoverably lost, while the libbsb code should (theoretically) only mess up the remainder of each line.  The scanline index table is also described in the patent and is quite simple.  All offsets are four-byte values.  The very last four bytes of the entire .KAP file are the offset of the start of the scanline index table.  Each entry in that table is four bytes; the first four bytes are the offset in the file (the entire file, including header data) of the start of the data for scanline 1, the next four bytes are the offset for the start of scanline 2, etc.

5. Therefore, the libbsb code, after complaining about the 0x00 byte not matching, jumps to the scanline index table, which tells it to move to the start of the image data, jumping over the 0x33 byte that I believe is the image format byte it was looking for.

The run-length encoding seems to be as expected by GDAL, and I manually calculated a few scan lines and found the results to match what bsb2tif created in the TIF output file.

I have not yet had a chance to commit these observations to code.  Frank, I didn't encounter anything matching your problem of a "still corrupt image" (you seem to have gotten to the image-reading spot correctly), so there may be yet more problems.  GDAL includes some fudge code for dealing with defective scanlines, and I'm still not sure whether there are errors in the understanding of the spec or just bogus BSB files out there.  I may attempt to implement the scanline index mechanism to see if that helps GDAL get through the file.

Thanks again to both of you for the assistance, and I'll report back with more news.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242   

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Thursday, January 19, 2006 8:16 AM
To: Eric D?nges
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Problems translating BSB files

On 1/19/06, Eric D?nges <eric.doenges@gmx.net> wrote:
> Ed, I think the problem is the following code in bsb_read.c (please 
> note that this is from a fairly old version of GDAL, since I have 
> extensively rewritten BSB support - unfortunately, I cannot share this 
> code with the world at large because the necessary information to do 
> the rewrite was obtained under NDA from MapTech - so this might not be 
> exactly like this in recent GDAL code):
>
>      {
>          int    nSkipped = 0;
>
>          while( nSkipped < 100
>                && (BSBGetc( fp, bNO1 ) != 0x1A || BSBGetc( fp,
> bNO1 ) != 0x00) )
>              nSkipped++;
>
>          if( nSkipped == 100 )
>          {
>              BSBClose( psInfo );
>              CPLError( CE_Failure, CPLE_AppDefined,
>                        "Failed to find compressed data segment of BSB 
> file." );
>              return NULL;
>          }
>      }
>
>
> The file in question (83116_1.KAP) look like this in the hexdump:
>
> 00000f50  32 34 33 31 0d 0a 1a 1a  00 33 01 a0 9e 04 00 02  | 
> 2431.....3......|
>
> Note the two 0x1a directly following each other. So what happens is 
> that in the while loop above, a BSBGetc is executed, which fetches 
> 0x1a, which means the second BSBGetc in the || clause is executed, 
> which also fetches a 0x1a. Since this is not a zero, the test is true 
> and nSkipped is incremented. In the next run through the loop, BSBGetc 
> gets a zero, and then we never find the 0x1a 0x00 sequence.

Eric,

I thought of that, and modified a local copy of bsb_read.c to identify the 0x1a 0x00 properly.  Next I discovered that the next byte, which should be the number of bits (often 0x04 or 0x03) was crazy (0x33).
I took a bit of a jump-of-intuition and guessed that 0x33 (ASCII '3') should have been binary 0x03 and tried to operate on that basis.
But this still produced a corrupt image, even though it did get a bit further.

It was at this point that I gave up, under the assumption that there were significant things I was missing.

Good work identifying the 0x1A 0x00 issue though!  You are a binary file dumping, reverse engineering fellow after my own heart.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Thu Jan 19 15:49:11 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Shape file header content
In-Reply-To: <20060119180721.32243.qmail@web30002.mail.mud.yahoo.com>
References: <20060119180721.32243.qmail@web30002.mail.mud.yahoo.com>
Message-ID: <43CFFB47.7060504@loskot.net>

sheba thomas wrote:
>  can any one please tell the Shapefile header content or the structure 
> of the shapefile header.

You can read about it in ESRI Shapefile spec:

http://shapelib.maptools.org/dl/shapefile.pdf

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From ed at topozone.com  Thu Jan 19 16:47:52 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Problems translating BSB files
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD7E2@ptolemy.topozone.com>

Folks -

I now have GDAL correctly (I think) reading the NOAA-distributed BSB files.  I implemented the code as described below, using the scanline table for finding the start of each line of data and ran into two other issues:

1. I needed to handle the correct byte ordering of the four-byte scanline pointers.

2. There is something funny in the data but it doesn't appear to be the funny stuff described in the (original) GDAL code.  In each of the NOAA files the scanline data has a pattern of extra bytes at the end of each scan line.  In one sample (with an IFM/palette size of 4) the first lines are:

01 90 E2 00 00 02 00
02 90 E2 00 00 03 00
03 90 E2 00 00 04 00

The original GDAL code starts parsing at line 1 (byte 01 at the beginning), reads the byte sequence 90 E2 00 (which means 12,545 pixels of color 2), then 00 as the "end of row" null byte.  It then reads the byte 02, which looks like it's supposed to be the start of line 2.  But the next byte is 00, which is wrong, and there is some code to implement a "special hack to skip over extra zeros in some files".  The 00 is skipped over and the next 02 (at the beginning of the second line of hex bytes above) is read and treated as the REAL start of line 2.

However, if you use the presumably more reliable scanline index table at the end of the file, you'll see that the lines break as I have broken them in the text above.  The "02 00" at the end of the first line of text is not the start of line 2 with an extra 00 following it, but unexplained extra data at the end of line 1.  Line 1 as parsed above correctly produces 12,545 pixels as required, so it's not missing image data. .  It appears to consistently follow that pattern of being the byte starting the next line, followed by 00.  In fact (I just looked a little further) when the line numbering goes above 127 and takes more than one byte, the "extra" data continues to follow the pattern.  It appears as if each line is ending with the line number of the next line (and the data is repeated because the next line begins with its own line number).  However, this does not hold up throughout the file, as when I inspect the scan lines at the very end they do NOT show any extra bytes and behave just as expected.  The extra data seems to be innocuous as long as you (a) stop parsing when you're expected to stop and when you have the pixels you need and (b) use the scanline index to find the start of each line.

I need to do a little more testing and code cleanup before sending some draft bsb_read.c changes along.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ed McNierney
Sent: Thursday, January 19, 2006 3:06 PM
To: Frank Warmerdam; Eric D?nges
Cc: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] Problems translating BSB files

Frank & Eric -

Well I'm old enough to edit a binary file or two, too.....

Thanks very much for the help.  I located a very helpful bit of code on SourceForce called libbsb for reading and writing BSB files, written by Stuart Cunningham <stuart_hc@users.sourceforge.net>, and I read patent 5,727,090 as referenced in the header comments in the GDAL file bsb_read.c.  With a little inspection of my sample data, I now know a lot more about BSB files than I did yesterday!  Here follow my observations.

1. I also noticed the code in bsb_read.c which is fooled by a 0x1A 0x1A 0x00 sequence, and which needs a fix along the lines of what Frank mentioned.  In the patent description this sequence is described as "The header is followed by three binary values. The first is 1AH, which the DOS TYPE command will treat as an end-of-file marker. A zero is used to separate file segments or image offsets. The value of the image format is the start of the binary graphic data."  This is a little vaguely worded - I can't quite be certain whether the "value of the image format" byte is supposed to be counted in the "three binary values" or not.  All 5 of the BSB files I have downloaded from the NOAA chart distribution site contain the sequence 0x1A 0x1A 0x00 at the end of the header (after the last CR/LF) and before the "value of the image format" byte.  The bsb_read.c code makes reference to an example file "optech/World.kap" that has the sequence 0x1A 0x0D 0x0A 0x1A 0x00 after the CR/LF at!
  the end of the header.  This does not seem consistent with the patent description of the format.  However, in all those (six) cases a corrected method for finding 0x1A 0x00 will correctly locate the beginning of the binary image data.  It is possible, however, that the safest implementation is "look for the first 0x00 after finding the first 0x1A", which would handle both the current NOAA samples and the "optech/World.kap" file.

2. The next byte is the "value of the image format" byte and it appears (from the examples) that this is supposed to be the ASCII character "3" (0x33) for image format "3", as Frank surmised below.  From a reading of the patent language, it might be intending to say the same thing there, too.  Since this is redundant information, we might want to ignore it or tolerate mismatches (see below).

3. The libbsb utility bsb2tif will correctly (apparently) convert the current NOAA BSB files to TIF images - at least, they're reasonable-looking TIFF images of NOAA charts with no obvious visual problems.  This utility reports a warning that the bit depth from the IFM tag does not match the data read from the file.  This is because the libbsb code rather overconfidently simply reads and discards two bytes where it's expecting to find 0x1A 0x00 and then loads the third byte as the image format value - it doesn't even bother to inspect those two bytes.  As a result, it reads 0x1A 0x1A and then reads 0x00 and compares it to the image format (my samples use formats 3 and 4) and reports the mismatch.

4. This mismatch does not bother the libbsb code because it uses the scanline index table to locate each line of image data, while the GDAL code iterates through the image data to find each line.  The libbsb code is more robust since a bad scanline can get GDAL irrecoverably lost, while the libbsb code should (theoretically) only mess up the remainder of each line.  The scanline index table is also described in the patent and is quite simple.  All offsets are four-byte values.  The very last four bytes of the entire .KAP file are the offset of the start of the scanline index table.  Each entry in that table is four bytes; the first four bytes are the offset in the file (the entire file, including header data) of the start of the data for scanline 1, the next four bytes are the offset for the start of scanline 2, etc.

5. Therefore, the libbsb code, after complaining about the 0x00 byte not matching, jumps to the scanline index table, which tells it to move to the start of the image data, jumping over the 0x33 byte that I believe is the image format byte it was looking for.

The run-length encoding seems to be as expected by GDAL, and I manually calculated a few scan lines and found the results to match what bsb2tif created in the TIF output file.

I have not yet had a chance to commit these observations to code.  Frank, I didn't encounter anything matching your problem of a "still corrupt image" (you seem to have gotten to the image-reading spot correctly), so there may be yet more problems.  GDAL includes some fudge code for dealing with defective scanlines, and I'm still not sure whether there are errors in the understanding of the spec or just bogus BSB files out there.  I may attempt to implement the scanline index mechanism to see if that helps GDAL get through the file.

Thanks again to both of you for the assistance, and I'll report back with more news.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242   

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Thursday, January 19, 2006 8:16 AM
To: Eric D?nges
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Problems translating BSB files

On 1/19/06, Eric D?nges <eric.doenges@gmx.net> wrote:
> Ed, I think the problem is the following code in bsb_read.c (please 
> note that this is from a fairly old version of GDAL, since I have 
> extensively rewritten BSB support - unfortunately, I cannot share this 
> code with the world at large because the necessary information to do 
> the rewrite was obtained under NDA from MapTech - so this might not be 
> exactly like this in recent GDAL code):
>
>      {
>          int    nSkipped = 0;
>
>          while( nSkipped < 100
>                && (BSBGetc( fp, bNO1 ) != 0x1A || BSBGetc( fp,
> bNO1 ) != 0x00) )
>              nSkipped++;
>
>          if( nSkipped == 100 )
>          {
>              BSBClose( psInfo );
>              CPLError( CE_Failure, CPLE_AppDefined,
>                        "Failed to find compressed data segment of BSB 
> file." );
>              return NULL;
>          }
>      }
>
>
> The file in question (83116_1.KAP) look like this in the hexdump:
>
> 00000f50  32 34 33 31 0d 0a 1a 1a  00 33 01 a0 9e 04 00 02  | 
> 2431.....3......|
>
> Note the two 0x1a directly following each other. So what happens is 
> that in the while loop above, a BSBGetc is executed, which fetches 
> 0x1a, which means the second BSBGetc in the || clause is executed, 
> which also fetches a 0x1a. Since this is not a zero, the test is true 
> and nSkipped is incremented. In the next run through the loop, BSBGetc 
> gets a zero, and then we never find the 0x1a 0x00 sequence.

Eric,

I thought of that, and modified a local copy of bsb_read.c to identify the 0x1a 0x00 properly.  Next I discovered that the next byte, which should be the number of bits (often 0x04 or 0x03) was crazy (0x33).
I took a bit of a jump-of-intuition and guessed that 0x33 (ASCII '3') should have been binary 0x03 and tried to operate on that basis.
But this still produced a corrupt image, even though it did get a bit further.

It was at this point that I gave up, under the assumption that there were significant things I was missing.

Good work identifying the 0x1A 0x00 issue though!  You are a binary file dumping, reverse engineering fellow after my own heart.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From sheb_susan at yahoo.com  Fri Jan 20 01:20:29 2006
From: sheb_susan at yahoo.com (sheba thomas)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Shape file header content
Message-ID: <20060120062029.43346.qmail@web30001.mail.mud.yahoo.com>

 i'm trying to import shape file to a .vec  file map , but not getting the correct order .i'm not sure weather i'm  getting all the values of Shape file header . so please any one can  suggest  the header structure and order of the shape file header  content.
  

		
---------------------------------
 
 What are the most popular cars?  Find out at Yahoo! Autos
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060119/c28fc2cc/attachment.html
From jason.wangz at gmail.com  Fri Jan 20 03:14:09 2006
From: jason.wangz at gmail.com (Jason)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi,
	how can I get the longitude/latitude information through OGR?
Message-ID: <68a815150601200014q7286e5b0o@mail.gmail.com>

Which method in OGR provides these informations like longitude and
latitude. Thanks. :)


From mateusz at loskot.net  Fri Jan 20 03:22:06 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi,	how can I get the longitude/latitude information
	through OGR?
In-Reply-To: <68a815150601200014q7286e5b0o@mail.gmail.com>
References: <68a815150601200014q7286e5b0o@mail.gmail.com>
Message-ID: <43D09DAE.4090409@loskot.net>

Jason wrote:
> Which method in OGR provides these informations like longitude and
> latitude. Thanks. :)

First, look at this diagram:

Second, look at some concrete class of geometry like
http://www.gdal.org/ogr/classOGRLineString.html

Finally, look at OGRPoint class and you will get the answer:
http://www.gdal.org/ogr/classOGRPoint.html

By the way, OGC Simple Feature Specification should also provide useful 
informtion on the bigger picture.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Jan 20 03:30:04 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi,	how can I get the longitude/latitude information
	through OGR?
In-Reply-To: <43D09DAE.4090409@loskot.net>
References: <68a815150601200014q7286e5b0o@mail.gmail.com>
	<43D09DAE.4090409@loskot.net>
Message-ID: <43D09F8C.5040001@loskot.net>

Mateusz ?oskot wrote:
> Jason wrote:
> 
>> Which method in OGR provides these informations like longitude and
>> latitude. Thanks. :)
> 
> 
> First, look at this diagram:
> 

Sorry, I've forgot to past link. Here it is:
http://www.gdal.org/ogr/classOGRGeometry.html

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From jason.wangz at gmail.com  Fri Jan 20 03:50:00 2006
From: jason.wangz at gmail.com (Jason)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi,
	how can I get the longitude/latitude information through OGR?
In-Reply-To: <43D09F8C.5040001@loskot.net>
References: <68a815150601200014q7286e5b0o@mail.gmail.com>
	<43D09DAE.4090409@loskot.net> <43D09F8C.5040001@loskot.net>
Message-ID: <68a815150601200050nac04581l@mail.gmail.com>

Thanks. But, I am a software engineer lacking of GIS related
knowledge. Sorry for the stupid questions. But, how can I tranform the
x, y, z coordinated into longitude/latitude information formats, like:
120 47' 7.19 '' E.

OGRPoint::getX() return a double format variable, so how can I
translate this value into longitude liked format.

:)

2006/1/20, Mateusz ?oskot <mateusz@loskot.net>:
> Mateusz ?oskot wrote:
> > Jason wrote:
> >
> >> Which method in OGR provides these informations like longitude and
> >> latitude. Thanks. :)
> >
> >
> > First, look at this diagram:
> >
>
> Sorry, I've forgot to past link. Here it is:
> http://www.gdal.org/ogr/classOGRGeometry.html
>
> Cheers
> --
> Mateusz ?oskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From mateusz at loskot.net  Fri Jan 20 04:38:16 2006
From: mateusz at loskot.net (=?UTF-8?B?TWF0ZXVzeiDFgW9za290?=)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] hi,	how can I get the longitude/latitude information
	through OGR?
In-Reply-To: <68a815150601200050nac04581l@mail.gmail.com>
References: <68a815150601200014q7286e5b0o@mail.gmail.com>	<43D09DAE.4090409@loskot.net>
	<43D09F8C.5040001@loskot.net>
	<68a815150601200050nac04581l@mail.gmail.com>
Message-ID: <43D0AF88.5060807@loskot.net>

Jason wrote:
> Thanks. But, I am a software engineer lacking of GIS related 
> knowledge. Sorry for the stupid questions. But, how can I tranform 
> the x, y, z coordinated into longitude/latitude information formats, 
> like: 120 47' 7.19 '' E.
> 

You have to convert format of coordinates to that appropriate for your
application. Usually, you will play with 3 formats:

D M S - decimal-minutes-seconds
DD MM.MMMMMM - degrees with decimal-minutes
DD.DDDDDDDD - (decimal degrees)

> OGRPoint::getX() return a double format variable, so how can I 
> translate this value into longitude liked format.

If your coordinates are in lat/lon so you (most likely) have it in
decimal-degrees format (DD.DDDDDDD).

Here you have your coordinates (given above) converted from
DMS to DD.DDDDDD by Google:

http://www.google.pl/search?q=%28120+%2B+%2847%2F60%29+%2B+%287.19%2F3600

Here is also small piece of Python code with trivial functions
(equations + test cases) how to do it:

http://mateusz.loskot.net/software/gis/

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From neteler at itc.it  Fri Jan 20 06:12:17 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ESRI flt nbits issue
Message-ID: <20060120111217.GD26920@bartok.itc.it>

Hi,

I was trying to use an ESRI .flt file:

gdalinfo edenglcc2kfor.flt
ERROR 6: EHdr driver does not support 1541835190 NBITS value.
GDALOpen failed - 6
EHdr driver does not support 1541835190 NBITS value.

It seems that 'nbits' is not initialized if missing
in the header file:

ncols         10018
nrows         8200
xllcorner     -20
yllcorner     6.17
cellsize      0.008333
NODATA_value  -9999
byteorder     LSBFIRST

-rw-rw-rw-  1 neteler ssi        69 Oct 13 16:08 edenglcc2kfor.prj
-rw-rw-rw-  1 neteler ssi 328590400 Oct 13 16:08 edenglcc2kfor.flt
-rw-rw-rw-  1 neteler ssi      3598 Oct 14 12:51 edenglcc2kfor.xml
-rw-rw-rw-  1 neteler ssi       167 Jan 20 10:47 edenglcc2kfor.hdr

Maybe the driver could be enabled to guess the nbits size if
missing inte the .hdr file?

The dataset is available here if needed:
 http://ergodd.zoo.ox.ac.uk/eden/pubdata/glcc2k/edenglcc2kforflt.zip

To my knowledge, the files were generated with ESRI software.
A related XML file contains this reference:
  <distributionformat>Zipped archive of arcViewgrids</distributionformat>
  <datafilename>edenglcc2kforflt.zip</datafilename>


Thanks for help,
 Markus


From warmerdam at pobox.com  Fri Jan 20 08:34:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ESRI flt nbits issue
In-Reply-To: <20060120111217.GD26920@bartok.itc.it>
References: <20060120111217.GD26920@bartok.itc.it>
Message-ID: <931f8ea90601200534i50b67b93i62e45ef88084b947@mail.gmail.com>

On 1/20/06, Markus Neteler <neteler@itc.it> wrote:
> Hi,
>
> I was trying to use an ESRI .flt file:
>
> gdalinfo edenglcc2kfor.flt
> ERROR 6: EHdr driver does not support 1541835190 NBITS value.
> GDALOpen failed - 6
> EHdr driver does not support 1541835190 NBITS value.
>
> It seems that 'nbits' is not initialized if missing
> in the header file:
>
> ncols         10018
> nrows         8200
> xllcorner     -20
> yllcorner     6.17
> cellsize      0.008333
> NODATA_value  -9999
> byteorder     LSBFIRST
>
> -rw-rw-rw-  1 neteler ssi        69 Oct 13 16:08 edenglcc2kfor.prj
> -rw-rw-rw-  1 neteler ssi 328590400 Oct 13 16:08 edenglcc2kfor.flt
> -rw-rw-rw-  1 neteler ssi      3598 Oct 14 12:51 edenglcc2kfor.xml
> -rw-rw-rw-  1 neteler ssi       167 Jan 20 10:47 edenglcc2kfor.hdr
>
> Maybe the driver could be enabled to guess the nbits size if
> missing inte the .hdr file?

Markus,

I have modified the code to default to nbits=8 if not specified,
but that won't make this file work.  You will still need to add
"NBITS 32" to the .hdr file.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 20 09:27:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Shape file header content
In-Reply-To: <20060120062029.43346.qmail@web30001.mail.mud.yahoo.com>
References: <20060120062029.43346.qmail@web30001.mail.mud.yahoo.com>
Message-ID: <931f8ea90601200627t60551af9w93cc7624750bd9f7@mail.gmail.com>

On 1/20/06, sheba thomas <sheb_susan@yahoo.com> wrote:
>  i'm trying to import shape file to a .vec file map , but not getting the
> correct order .i'm not sure weather i'm getting all the values of Shape file
> header . so please any one can suggest  the header structure and order of
> the shape file header content.

Sheba,

I think you will need to provide more details.  What command
are you using?  What is a .vec file?  What makes you think the
order is wrong?

The ogr2ogr utility will convert features in the order they
appear in the shapefile with the possible exeption of when
you have an OGR supported spatial index (.qix) and you issue
a spatial query, in which case the shapes may be returned in
quadtree ordering.  Hmm, on second though, I think they are
returned "in order" even then.  I do a special pass ordering the
shapeids read from the quadtree.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jmoxley at grca.on.ca  Thu Jan 19 13:19:45 2006
From: jmoxley at grca.on.ca (Jeff Moxley)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] troubles with gdaltindex
Message-ID: <000001c61d24$f18289d0$6d02a8c0@gis1>

Hello list.
 
I am working with MS4W and want to create a WMS for our Ortho Photos.  I
am attempting to use gdaltindex to create my index file.  When I run
gdaltindex I get the following message:
ERROR 4: 'images/*.jpg' does not exist in the file system, and is not
recognized as a supported dataset name.
 
I know the path and the files do exist and they are in the specified
location.  I tried gdalinfo on one of the files and it returns the
following:
 
Driver: JPEG/JPEG JFIF
Size is 5010, 510
Coordinate system is ''
Corner Coordinates Blah blah
Band 1 Blah Blah
 
 
So it looks to me that the files are readable by GDAL. (The blah's above
are place holders for the real output that I didn't want to type.)
 
If anyone can shed some light on this it would be greatly appreciated.
 
Thanks
 
JM
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060119/076f3d06/attachment.html
From warmerdam at pobox.com  Fri Jan 20 10:23:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] troubles with gdaltindex
In-Reply-To: <000001c61d24$f18289d0$6d02a8c0@gis1>
References: <000001c61d24$f18289d0$6d02a8c0@gis1>
Message-ID: <931f8ea90601200723l7f0d382amb181d79d8d2d44ff@mail.gmail.com>

On 1/19/06, Jeff Moxley <jmoxley@grca.on.ca> wrote:
> I am working with MS4W and want to create a WMS for our Ortho Photos.  I am
> attempting to use gdaltindex to create my index file.  When I run gdaltindex
> I get the following message:
>
> ERROR 4: 'images/*.jpg' does not exist in the file system, and is not
> recognized as a supported dataset name.

Jeff,

It would seem the problems it that the gdaltindex in
MS4W was not built with wildcards enabled.   To do
so, it is necessary to build GDAL with the VCDIR
value in nmake.opt properly set, and the SETARGV
line in nmake.opt uncommented.

I am cc:ing Assefa in the hopes he could do this in a
future release.

In the meantime, you might want to download FWTools
and use gdaltindex from that.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Doug_Newcomb at fws.gov  Fri Jan 20 10:26:18 2006
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] troubles with gdaltindex
In-Reply-To: <000001c61d24$f18289d0$6d02a8c0@gis1>
Message-ID: <OFB6F39CFB.EB9B41B5-ON852570FC.005499C8-852570FC.0054CE83@fws.gov>

>ERROR 4: ?images/*.jpg? does not exist in the file system, and is not
recognized as a supported dataset name.


 Wouldn't that be 'images\*.jpg' on Windows?

Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


From michael.paul at tao.es  Fri Jan 20 11:06:00 2006
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OGR DGN driver: errors within visualization
Message-ID: <F351B61A81F4F54F92740EA8B510C2B103405DDC@ESGDASMA5VX0014.ib.gedas.vwg>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: att95516.jpg
Type: image/jpeg
Size: 6516 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060120/a6760d67/att95516.jpg
-------------- next part --------------
A non-text attachment was scrubbed...
Name: attd7339.jpg
Type: image/jpeg
Size: 8528 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060120/a6760d67/attd7339.jpg
From neteler at itc.it  Fri Jan 20 11:19:50 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ESRI flt nbits issue
In-Reply-To: <931f8ea90601200534i50b67b93i62e45ef88084b947@mail.gmail.com>
References: <20060120111217.GD26920@bartok.itc.it>
	<931f8ea90601200534i50b67b93i62e45ef88084b947@mail.gmail.com>
Message-ID: <20060120161950.GA5338@bartok.itc.it>

On Fri, Jan 20, 2006 at 08:34:15AM -0500, Frank Warmerdam wrote:
> On 1/20/06, Markus Neteler <neteler@itc.it> wrote:
> > Hi,
> >
> > I was trying to use an ESRI .flt file:
> >
> > gdalinfo edenglcc2kfor.flt
> > ERROR 6: EHdr driver does not support 1541835190 NBITS value.
> > GDALOpen failed - 6
> > EHdr driver does not support 1541835190 NBITS value.
> >
> > It seems that 'nbits' is not initialized if missing
> > in the header file:
> >
> > ncols         10018
> > nrows         8200
> > xllcorner     -20
> > yllcorner     6.17
> > cellsize      0.008333
> > NODATA_value  -9999
> > byteorder     LSBFIRST
> >
> > -rw-rw-rw-  1 neteler ssi        69 Oct 13 16:08 edenglcc2kfor.prj
> > -rw-rw-rw-  1 neteler ssi 328590400 Oct 13 16:08 edenglcc2kfor.flt
> > -rw-rw-rw-  1 neteler ssi      3598 Oct 14 12:51 edenglcc2kfor.xml
> > -rw-rw-rw-  1 neteler ssi       167 Jan 20 10:47 edenglcc2kfor.hdr
> >
> > Maybe the driver could be enabled to guess the nbits size if
> > missing inte the .hdr file?
> 
> Markus,
> 
> I have modified the code to default to nbits=8 if not specified,
> but that won't make this file work.  You will still need to add
> "NBITS 32" to the .hdr file.

Thanks, Frank.

Suggestion:
Couldn't the driver simply calculate nbits from the file size?

ncols         10018
nrows         8200
> 10018 * 8200
[1] 82147600

and
 -rw-rw-rw-  1 neteler ssi 328590400 Oct 13 16:08 edenglcc2kfor.flt

> 328590400 / 82147600
[1] 4

So I assume nbits=4 here.

I have received a number of files where the 'nbits' row is missing.

Best regards

 Markus


From ed at topozone.com  Fri Jan 20 11:36:17 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] troubles with gdaltindex
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD7ED@ptolemy.topozone.com>

Jeff -

Frank's assessment is correct; as an alternative work-around, you can
use the Windows command-line FOR statement to loop through your JPEG
files, adding them one at a time:

For %f in (*.jpg) do gdaltindex shpindex %f

There are other benefits of using the FWTools suite, so if you're at all
inclined to do that, I think it's a better solution.  The for loop is a
quick short-term fix.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
Phone: +1 (978) 251-4242
Fax: +1 (978) 251-1396
ed@topozone.com 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Friday, January 20, 2006 10:23 AM
To: Jeff Moxley
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] troubles with gdaltindex

On 1/19/06, Jeff Moxley <jmoxley@grca.on.ca> wrote:
> I am working with MS4W and want to create a WMS for our Ortho Photos.

> I am attempting to use gdaltindex to create my index file.  When I run

> gdaltindex I get the following message:
>
> ERROR 4: 'images/*.jpg' does not exist in the file system, and is not 
> recognized as a supported dataset name.

Jeff,

It would seem the problems it that the gdaltindex in
MS4W was not built with wildcards enabled.   To do
so, it is necessary to build GDAL with the VCDIR value in nmake.opt
properly set, and the SETARGV line in nmake.opt uncommented.

I am cc:ing Assefa in the hopes he could do this in a future release.

In the meantime, you might want to download FWTools and use gdaltindex
from that.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From neteler at itc.it  Fri Jan 20 11:58:24 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ESRI flt nbits issue
In-Reply-To: <20060120161950.GA5338@bartok.itc.it>
References: <20060120111217.GD26920@bartok.itc.it>
	<931f8ea90601200534i50b67b93i62e45ef88084b947@mail.gmail.com>
	<20060120161950.GA5338@bartok.itc.it>
Message-ID: <20060120165823.GA14023@bartok.itc.it>

On Fri, Jan 20, 2006 at 05:19:50PM +0100, Markus Neteler wrote:
> On Fri, Jan 20, 2006 at 08:34:15AM -0500, Frank Warmerdam wrote:
> > On 1/20/06, Markus Neteler <neteler@itc.it> wrote:
> > > Hi,
> > >
> > > I was trying to use an ESRI .flt file:
> > >
> > > gdalinfo edenglcc2kfor.flt
> > > ERROR 6: EHdr driver does not support 1541835190 NBITS value.
> > > GDALOpen failed - 6
> > > EHdr driver does not support 1541835190 NBITS value.
> > >
> > > It seems that 'nbits' is not initialized if missing
> > > in the header file:
> > >
> > > ncols         10018
> > > nrows         8200
> > > xllcorner     -20
> > > yllcorner     6.17
> > > cellsize      0.008333
> > > NODATA_value  -9999
> > > byteorder     LSBFIRST
> > >
> > > -rw-rw-rw-  1 neteler ssi        69 Oct 13 16:08 edenglcc2kfor.prj
> > > -rw-rw-rw-  1 neteler ssi 328590400 Oct 13 16:08 edenglcc2kfor.flt
> > > -rw-rw-rw-  1 neteler ssi      3598 Oct 14 12:51 edenglcc2kfor.xml
> > > -rw-rw-rw-  1 neteler ssi       167 Jan 20 10:47 edenglcc2kfor.hdr
> > >
> > > Maybe the driver could be enabled to guess the nbits size if
> > > missing inte the .hdr file?
> > 
> > Markus,
> > 
> > I have modified the code to default to nbits=8 if not specified,
> > but that won't make this file work.  You will still need to add
> > "NBITS 32" to the .hdr file.
> 
> Thanks, Frank.
> 
> Suggestion:
> Couldn't the driver simply calculate nbits from the file size?
> 
> ncols         10018
> nrows         8200
> > 10018 * 8200
> [1] 82147600
> 
> and
>  -rw-rw-rw-  1 neteler ssi 328590400 Oct 13 16:08 edenglcc2kfor.flt
> 
> > 328590400 / 82147600
> [1] 4
> 
> So I assume nbits=4 here.

To reduce confusion, it's actually 32bit here (I tested all).
So my suggestion above will not work like that.
 
> I have received a number of files where the 'nbits' row is missing.

The ESRI white paper suggests 8 bit per default, so we can consider
this issue as solved.

Markus 

From matt.wilkie at gov.yk.ca  Fri Jan 20 12:39:15 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] troubles with gdaltindex
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD7ED@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD7ED@ptolemy.topozone.com>
Message-ID: <43D12043.9000709@gov.yk.ca>

Hmm, looks like wildcards on windows are a common theme today :)

> Frank's assessment is correct; as an alternative work-around, you can
> use the Windows command-line FOR statement to loop through your JPEG
> files, adding them one at a time:
> 
> For %f in (*.jpg) do gdaltindex shpindex %f

this works well too and is faster since you only need to run gdaltindex 
once:

	dir /s/b *.jpg > jpg-files.txt
	gdaltindex index.shp --optfile jpg-files.txt

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Fri Jan 20 13:11:39 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OGR DGN driver: errors within visualization
In-Reply-To: <F351B61A81F4F54F92740EA8B510C2B103405DDC@ESGDASMA5VX0014.ib.gedas.vwg>
References: <F351B61A81F4F54F92740EA8B510C2B103405DDC@ESGDASMA5VX0014.ib.gedas.vwg>
Message-ID: <931f8ea90601201011v188c3aeaja03bce5d7f832e62@mail.gmail.com>

On 1/20/06, Paul, Michael <michael.paul@tao.es> wrote:
> we are using the OGR DGN  driver to visualize directly DGN (v7) files. The problem is that this driver  seems to apply some kind of generalization. If use the ogr2ogr utility in order  to convert the DGN file e.g. to a PostGIS database, everything works fine. This  means that the cartography loaded by the PostGIS OGR driver looks pretty much  the same as the original in Microstation. But if we load the data directly from  the DGN driver, the result looks horrible. If ogr2ogr manages to load all the  data correctly, we should to be able to do the same thing. Can anyone tell us,  whether or not there exist some kind of configuration flag to deactivate these  generalization stuff?
>
> Thanks.
> PS: all the geometries  shown are polylines, no cells, no arcs.

Michael,

I'm afraid I have no idea why you would get different results
reading the features directly from the DGN file as opposed
to translating them to another format ogr2ogr and then reading
them.

Are you using GetNextFeature() to iterate through the features?
Or accessing them (potentially) out of order with GetFeature()?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From brauplists at gmail.com  Fri Jan 20 13:41:18 2006
From: brauplists at gmail.com (Bruce Raup)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr segfaults with large SQL statement
Message-ID: <1464295a0601201041i53133933o3a20d4540ddc6a8d@mail.gmail.com>

Hello all,

I am experiencing segmentation faults with ogr2ogr when doing a query on a
PostGIS database and converting the result to a shapefile.  It happens when
the query string is very long -- the threshold is somewhere between 2500 and
3500 characters, I think.  I looked through the source code but couldn't
find any statically allocated memory related to that.  Can someone please
give me a hint on how to fix this in the source?  Or could the limit be
greatly extended officially?

I understand that I can use ogr2ogr to *add* records to a shapefile too, so
I think I can call ogr2ogr multiple times as a work-around.

Thanks in advance for any input,
Bruce

--
Bruce Raup
http://cires.colorado.edu/~braup/ <http://cires.colorado.edu/%7Ebraup/>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060120/3616a53a/attachment.html
From jmoxley at grca.on.ca  Fri Jan 20 14:24:31 2006
From: jmoxley at grca.on.ca (Jeff Moxley)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] troubles with gdaltindex
In-Reply-To: <931f8ea90601200723l7f0d382amb181d79d8d2d44ff@mail.gmail.com>
Message-ID: <001701c61df7$2804f920$6d02a8c0@gis1>

Thanks for the help on this.  I have attempted to use the FWTools
version and I get the error:  
It appears no georeferencing is available for "<imagespath>".

I am using jpg with a world file .jgw.  Is there a way to specify what
the world file is?

Jeff


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Friday, January 20, 2006 10:23 AM
To: Jeff Moxley
Cc: gdal-dev@lists.maptools.org; Assefa Yewondwossen
Subject: Re: [Gdal-dev] troubles with gdaltindex

On 1/19/06, Jeff Moxley <jmoxley@grca.on.ca> wrote:
> I am working with MS4W and want to create a WMS for our Ortho Photos.
I am
> attempting to use gdaltindex to create my index file.  When I run
gdaltindex
> I get the following message:
>
> ERROR 4: 'images/*.jpg' does not exist in the file system, and is not
> recognized as a supported dataset name.

Jeff,

It would seem the problems it that the gdaltindex in
MS4W was not built with wildcards enabled.   To do
so, it is necessary to build GDAL with the VCDIR
value in nmake.opt properly set, and the SETARGV
line in nmake.opt uncommented.

I am cc:ing Assefa in the hopes he could do this in a
future release.

In the meantime, you might want to download FWTools
and use gdaltindex from that.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Fri Jan 20 16:49:18 2006
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] [OT] determining EPSG codes
Message-ID: <007c01c61e0b$5d4c41b0$959877c6@cts1149>

Hi,
I'm trying to figure out how to load shapefiles into a PostGIS database.
(I'm also learning about PostGIS.) The next thing on my list of things to
learn is how to determine the map projection EPSG code for my data files. I
went to the EPSG.org website and downloaded lots of documentation and a
pretty nice little Access database containing all the codes and their
descriptions. However, I haven't found any simple way to determine, given a
Projection+Datum+Ellipsoid, how to find the EPSG code.

Can anyone provide a little guidance here?

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------
     That Which Does Not Kill Me
      Can Still Hurt Really Bad.



From perrygeo at gmail.com  Fri Jan 20 17:16:19 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] [OT] determining EPSG codes
In-Reply-To: <007c01c61e0b$5d4c41b0$959877c6@cts1149>
References: <007c01c61e0b$5d4c41b0$959877c6@cts1149>
Message-ID: <5383fa5e0601201416k352e5b94g6a941c5473873fbe@mail.gmail.com>

Thom,

  Concept Systems has an excellent web resource for searching the epsg
database (http://ocean.csl.co.uk/). Hope this helps.

matt

On 1/20/06, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> Hi,
> I'm trying to figure out how to load shapefiles into a PostGIS database.
> (I'm also learning about PostGIS.) The next thing on my list of things to
> learn is how to determine the map projection EPSG code for my data files. I
> went to the EPSG.org website and downloaded lots of documentation and a
> pretty nice little Access database containing all the codes and their
> descriptions. However, I haven't found any simple way to determine, given a
> Projection+Datum+Ellipsoid, how to find the EPSG code.
>
> Can anyone provide a little guidance here?
>
> Thanks,
> Thom
>
> --
> Thom DeCarlo
> -------------------------------------
>      That Which Does Not Kill Me
>       Can Still Hurt Really Bad.
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From warmerdam at pobox.com  Fri Jan 20 19:04:10 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] [OT] determining EPSG codes
In-Reply-To: <007c01c61e0b$5d4c41b0$959877c6@cts1149>
References: <007c01c61e0b$5d4c41b0$959877c6@cts1149>
Message-ID: <931f8ea90601201604q306a520cm38bf1531d1774055@mail.gmail.com>

On 1/20/06, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> Hi,
> I'm trying to figure out how to load shapefiles into a PostGIS database.
> (I'm also learning about PostGIS.) The next thing on my list of things to
> learn is how to determine the map projection EPSG code for my data files. I
> went to the EPSG.org website and downloaded lots of documentation and a
> pretty nice little Access database containing all the codes and their
> descriptions. However, I haven't found any simple way to determine, given a
> Projection+Datum+Ellipsoid, how to find the EPSG code.
>

Thom,

Are you wanting to do this programmatically or just
adhoc for a few layers?  For adhoc searches I
generally just grep around in the files like the PROJ.4
"epsg" file and compare definitions that seem reasonable.

To do it programmatically is pretty hard since there are
so many items to check.

To do it with WKT coordinate system descriptions, you
can sometimes just search for the EPSG authority code
on the PROJCS definition to get the EPSG code.   It isn't
always there though.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Fri Jan 20 19:59:30 2006
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Can we extract a band of a envisat .n1 file?
In-Reply-To: <931f8ea90601201604q306a520cm38bf1531d1774055@mail.gmail.com>
References: <007c01c61e0b$5d4c41b0$959877c6@cts1149>
	<931f8ea90601201604q306a520cm38bf1531d1774055@mail.gmail.com>
Message-ID: <43D18772.2010202@ualg.pt>

Hi,
I am thinking on something similar to the hdf4 page example
gdalinfo HDF4_SDS:MODIS_L1B:GSUB1.A2001124.0855.003.200219309451.hdf:2

Thanks

J. Luis

From dfuhry at gmail.com  Fri Jan 20 21:43:42 2006
From: dfuhry at gmail.com (Dave Fuhry)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OCI-22165 index out-of-range appending PGDB -> Oracle
	Spatial
Message-ID: <90699a8d0601201843t540d99fcp9d431454cfc831d0@mail.gmail.com>

When appending a personal geodatabase to an Oracle Spatial table with
the following command:

C:\PGDB-12202005>ogr2ogr -update -append -f OCI OCI:taxmap/taxmap1
LB011.mdb StreetCenterline -lco INDEX=OFF

I get this error:

ERROR 1: OCI-22165: given index [1048576] must be in the range of [0]
to [1048575]
 in OCICollAppend
ERROR 1: Terminating translation prematurely after failed

Without the " -update -append" it works fine.  I'm getting a little
lost in the OCI code but it looks like the error occurs in
ogrocitablelayer.cpp, line 1025 in the OCICollAppend() method call,
which OCI docs say appends an element to a collection (which would be
an SDO_ELEM_INFO_ARRAY or SDO_ORDINATE_ARRAY in out case).

This Intergraph GeoMedia FAQ entry
http://support.intergraph.com/geomedia/faq.asp#97 indicates that the
number of coordinates I'm trying to add may be maxing out the number
allowed in an Oracle SDO array.  But why would it work ok creating a
table but fail for an append?  I tried the command without "-update"
and it fails then too.

I'm using 1.3.1.  Any idea of where I should be looking to diagnose this?

Thanks,

Dave Fuhry


From warmerdam at pobox.com  Fri Jan 20 22:04:47 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OCI-22165 index out-of-range appending PGDB -> Oracle
	Spatial
In-Reply-To: <90699a8d0601201843t540d99fcp9d431454cfc831d0@mail.gmail.com>
References: <90699a8d0601201843t540d99fcp9d431454cfc831d0@mail.gmail.com>
Message-ID: <931f8ea90601201904s10d25c06t873f1083b4e26b64@mail.gmail.com>

On 1/20/06, Dave Fuhry <dfuhry@gmail.com> wrote:
> When appending a personal geodatabase to an Oracle Spatial table with
> the following command:
>
> C:\PGDB-12202005>ogr2ogr -update -append -f OCI OCI:taxmap/taxmap1
> LB011.mdb StreetCenterline -lco INDEX=OFF
>
> I get this error:
>
> ERROR 1: OCI-22165: given index [1048576] must be in the range of [0]
> to [1048575]
>  in OCICollAppend
> ERROR 1: Terminating translation prematurely after failed
>
> Without the " -update -append" it works fine.  I'm getting a little
> lost in the OCI code but it looks like the error occurs in
> ogrocitablelayer.cpp, line 1025 in the OCICollAppend() method call,
> which OCI docs say appends an element to a collection (which would be
> an SDO_ELEM_INFO_ARRAY or SDO_ORDINATE_ARRAY in out case).
>
> This Intergraph GeoMedia FAQ entry
> http://support.intergraph.com/geomedia/faq.asp#97 indicates that the
> number of coordinates I'm trying to add may be maxing out the number
> allowed in an Oracle SDO array.  But why would it work ok creating a
> table but fail for an append?  I tried the command without "-update"
> and it fails then too.

Dave,

There are two implementations of CreateFeature().
One creates a complete textual INSERT statement
while the other uses bound variables for some objects,
including the geometry.  I suspect that creating a new
layer is using the "unbound", and the append is
using the "bound" method.  But I'm not exactly sure
why this would be.  Looking through the code, the
MULTI_LOAD option controls this.  Are you using
that by any chance?  Note that layer creation options
are ignored in the -append case since the layer isn't
actually being created.

Do you have a geometry with more than a million
vertices?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 20 22:14:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] ogr2ogr segfaults with large SQL statement
In-Reply-To: <1464295a0601201041i53133933o3a20d4540ddc6a8d@mail.gmail.com>
References: <1464295a0601201041i53133933o3a20d4540ddc6a8d@mail.gmail.com>
Message-ID: <931f8ea90601201914i444cf704s91a3f4eac60ed9ac@mail.gmail.com>

On 1/20/06, Bruce Raup <brauplists@gmail.com> wrote:
> Hello all,
>
>  I am experiencing segmentation faults with ogr2ogr when doing a query on a
> PostGIS database and converting the result to a shapefile.  It happens when
> the query string is very long -- the threshold is somewhere between 2500 and
> 3500 characters, I think.  I looked through the source code but couldn't
> find any statically allocated memory related to that.  Can someone please
> give me a hint on how to fix this in the source?  Or could the limit be
> greatly extended officially?
>
>  I understand that I can use ogr2ogr to *add* records to a shapefile too, so
> I think I can call ogr2ogr multiple times as a work-around.

Bruce,

Could you be more specific about what you are doing?
Are you using ExecuteSQL()?  Or does this happen
doing a "normal" read from a table/layer?  Is the query
long because of alot of fieldnames?  Is there a long
attribute query in effect?

Assuming you are accessing a table normally (rather
than via ExecuteSQL()), I see that the WHERE clause
is assembled into a fixed size 4096 byte buffer in
OGRPGTableLayer::BuildWhere().

I will commit a patch for the limit on the WHERE
clause size.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 20 22:20:24 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] Can we extract a band of a envisat .n1 file?
In-Reply-To: <43D18772.2010202@ualg.pt>
References: <007c01c61e0b$5d4c41b0$959877c6@cts1149>
	<931f8ea90601201604q306a520cm38bf1531d1774055@mail.gmail.com>
	<43D18772.2010202@ualg.pt>
Message-ID: <931f8ea90601201920k72712979ofaf5562721d651bb@mail.gmail.com>

On 1/20/06, jluis <jluis@ualg.pt> wrote:
> Hi,
> I am thinking on something similar to the hdf4 page example
> gdalinfo HDF4_SDS:MODIS_L1B:GSUB1.A2001124.0855.003.200219309451.hdf:2

J. Luis,

The HDF4 driver treats each image array in a
dataset as a distinct "subdataset" with the funky
naming convention you see above.

The Envisat driver does not do that since all the
data layers have the same geometry.  Instead
it treats them all as "bands".  If you do a gdalinfo on
an envisat data you should see something like (partial):

Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)
Band 1 Block=512x1 Type=Int16, ColorInterp=Undefined
  Description = 11500_12500_NM_NADIR_TOA_MDS
Band 2 Block=512x1 Type=Int16, ColorInterp=Undefined
  Description = 10400_11300_NM_NADIR_TOA_MDS
Band 3 Block=512x1 Type=Int16, ColorInterp=Undefined
  Description = 03505_03895_NM_NADIR_TOA_MDS

So, based on the band descriptions you can identify
what each band is.  Then you can use normal GDAL
mechanisms to select a band.  For instance, to translate
just the first band to GeoTIFF you could use:

  gdal_translate -b 1 ATS.N1 11500_12500_NM.tif

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dfuhry at gmail.com  Fri Jan 20 23:40:28 2006
From: dfuhry at gmail.com (Dave Fuhry)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OCI-22165 index out-of-range appending PGDB -> Oracle
	Spatial
In-Reply-To: <931f8ea90601201904s10d25c06t873f1083b4e26b64@mail.gmail.com>
References: <90699a8d0601201843t540d99fcp9d431454cfc831d0@mail.gmail.com>
	<931f8ea90601201904s10d25c06t873f1083b4e26b64@mail.gmail.com>
Message-ID: <90699a8d0601202040s377b8e97p1c53aa937367098e@mail.gmail.com>

Frank,

ogr2ogr -f OCI OCI:taxmap/taxmap1 LB011.mdb StreetCenterline -lco
MULTI_LOAD=YES -lco INDEX=OFF
succeeds where
C:\PGDB-12202005>ogr2ogr -f OCI OCI:taxmap/taxmap1 LB011.mdb StreetCenterline -l
co MULTI_LOAD=NO -lco INDEX=OFF
fails.

   I located the offending geometry.  I'm not sure how to return the
exact element count of an extended VARRAY but its
SDO_UTIL.GETNUMVERTICES(ORA_GEOMETRY) is 349525.333.  Since I'm
loading in 3D it looks like the number of coordinates allowed is at
its max.  I don't have Arc* handy to determine the number of vertices
it really has, although I could check on this if you'd like.  Its
SHAPE_Length is 124806671.920244 which is way out of whack with the
rest of the features in this state plane coordinate system, so I'm
going to consider it bogus.

   It looks like BoundCreateFeature() truncates oversized arrays
whereas UnboundCreateFeature() causes them to throw an OCI-22165
exception.  I can't think of any way to improve OGR in this situation
since any such geometry is going to be way out of the norm.  Even a
check on (nElemInfoCount > 1048575) could get stale if Oracle decides
to up the size of those VARRAYS someday.  I'll just leave this
information in your hands.

   Thanks for your help.  Support for ESRI Personal Geodatabase export
in particular is saving us a lot of time and runaround.  If SDE BLOB
data is stored similarly, I would be excited to have that exportable
via ODBC someday.

-Dave Fuhry

On 1/20/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 1/20/06, Dave Fuhry <dfuhry@gmail.com> wrote:
> > When appending a personal geodatabase to an Oracle Spatial table with
> > the following command:
> >
> > C:\PGDB-12202005>ogr2ogr -update -append -f OCI OCI:taxmap/taxmap1
> > LB011.mdb StreetCenterline -lco INDEX=OFF
> >
> > I get this error:
> >
> > ERROR 1: OCI-22165: given index [1048576] must be in the range of [0]
> > to [1048575]
> >  in OCICollAppend
> > ERROR 1: Terminating translation prematurely after failed
> >
> > Without the " -update -append" it works fine.  I'm getting a little
> > lost in the OCI code but it looks like the error occurs in
> > ogrocitablelayer.cpp, line 1025 in the OCICollAppend() method call,
> > which OCI docs say appends an element to a collection (which would be
> > an SDO_ELEM_INFO_ARRAY or SDO_ORDINATE_ARRAY in out case).
> >
> > This Intergraph GeoMedia FAQ entry
> > http://support.intergraph.com/geomedia/faq.asp#97 indicates that the
> > number of coordinates I'm trying to add may be maxing out the number
> > allowed in an Oracle SDO array.  But why would it work ok creating a
> > table but fail for an append?  I tried the command without "-update"
> > and it fails then too.
>
> Dave,
>
> There are two implementations of CreateFeature().
> One creates a complete textual INSERT statement
> while the other uses bound variables for some objects,
> including the geometry.  I suspect that creating a new
> layer is using the "unbound", and the append is
> using the "bound" method.  But I'm not exactly sure
> why this would be.  Looking through the code, the
> MULTI_LOAD option controls this.  Are you using
> that by any chance?  Note that layer creation options
> are ignored in the -append case since the layer isn't
> actually being created.
>
> Do you have a geometry with more than a million
> vertices?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>


From warmerdam at pobox.com  Sat Jan 21 10:45:22 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:57 2007
Subject: [Gdal-dev] OCI-22165 index out-of-range appending PGDB -> Oracle
	Spatial
In-Reply-To: <90699a8d0601202040s377b8e97p1c53aa937367098e@mail.gmail.com>
References: <90699a8d0601201843t540d99fcp9d431454cfc831d0@mail.gmail.com>
	<931f8ea90601201904s10d25c06t873f1083b4e26b64@mail.gmail.com>
	<90699a8d0601202040s377b8e97p1c53aa937367098e@mail.gmail.com>
Message-ID: <931f8ea90601210745t4f4cc3d4g9e4c43c65f86b7c0@mail.gmail.com>

On 1/20/06, Dave Fuhry <dfuhry@gmail.com> wrote:
>    It looks like BoundCreateFeature() truncates oversized arrays
> whereas UnboundCreateFeature() causes them to throw an OCI-22165
> exception.  I can't think of any way to improve OGR in this situation
> since any such geometry is going to be way out of the norm.  Even a
> check on (nElemInfoCount > 1048575) could get stale if Oracle decides
> to up the size of those VARRAYS someday.  I'll just leave this
> information in your hands.

Dave,

I suspect that BoundCreateFeature() is getting back errors as it
grows the arrays, but is ignoring them, hence the truncation.   I
don't see any obvious action for me to take.  If you do need to
append features to an existing table, you might want to try using
the -skipfailures flag to ogr2ogr.  This should mean the translation
continues after the one really big feature fails.

>    Thanks for your help.  Support for ESRI Personal Geodatabase export
> in particular is saving us a lot of time and runaround.  If SDE BLOB
> data is stored similarly, I would be excited to have that exportable
> via ODBC someday.

Sweet.

I have recently implement read support for SDE, but it is based on
the ESRI SDE API rather than going through ODBC.  I have established
the binary format for SDE geometries is not the same as in the personal
geodatabase.  And in fact there are several formats for geometry in
SDE depending on the underlying database.

It should be possible to do SDE via ODBC too, but it would be
quite a bit of work.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rsoricone at usgs.gov  Sat Jan 21 14:47:14 2006
From: rsoricone at usgs.gov (Robert Soricone)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] adding new readers
Message-ID: <OF7940BDBE.10CA3B66-ON072570FC.00707F2C-072570FD.006CB067@usgs.gov>

I've just created 2 new readers, which are derived from rawdataset.  If I 
add either one of the drivers to the gdal tree, everything runs fine 
(gdal_translate, gdalinfo...).  If I add both drivers to the gdal tree at 
the same time, the output from the apps (which seem to be running fine for 
the new drivers) is appended with the either: 

Open GDAL Datasets:
  1 N DriverIsNULL 512x512x0

or

Open GDAL Datasets:
  Segmentation fault

Does this indicate a problem with my drivers, or did I add the drivers to 
the tree improperly?

Thanks in advance,
Rob
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060121/7de5dd12/attachment.html
From warmerdam at pobox.com  Sat Jan 21 17:52:02 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] adding new readers
In-Reply-To: <OF7940BDBE.10CA3B66-ON072570FC.00707F2C-072570FD.006CB067@usgs.gov>
References: <OF7940BDBE.10CA3B66-ON072570FC.00707F2C-072570FD.006CB067@usgs.gov>
Message-ID: <931f8ea90601211452g72a9cc12q8831df5f043c30a7@mail.gmail.com>

On 1/21/06, Robert Soricone <rsoricone@usgs.gov> wrote:
>
> I've just created 2 new readers, which are derived from rawdataset.  If I
> add either one of the drivers to the gdal tree, everything runs fine
> (gdal_translate, gdalinfo...).  If I add both drivers to the gdal tree at
> the same time, the output from the apps (which seem to be running fine for
> the new drivers) is appended with the either:
>
> Open GDAL Datasets:
>   1 N DriverIsNULL 512x512x0
>
> or
>
> Open GDAL Datasets:
>   Segmentation fault
>
> Does this indicate a problem with my drivers, or did I add the drivers to
> the tree improperly?

Rob,

I'm sorry, but there just isn't enough information here for me to
diagnose your problem.

I will say that:

 o When you are adding driver you should take care to not
    use the same short name for the drivers or they will conflict.
 o The above open datasets message indicates a dataset with zero
    bands.  Zero band datasets can be quite problematic for some
    applications.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From adrianl_98 at yahoo.com  Sun Jan 22 15:14:55 2006
From: adrianl_98 at yahoo.com (Adrian Lopez)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Borland Visual c++ problem to link the libreries.
Message-ID: <20060122201455.24322.qmail@web30901.mail.mud.yahoo.com>

Hello.
   
  I has been trying to link the ogr and gdal libreries to Borland Visual C++ 6.0 Builder but i have some problems to link it and i have been reading that is necessary a make file that let do it, could someone help me to do this or has developed this makefile before.
   
  Thanks....
   
   Adrian L?pez  

		
---------------------------------

LLama Gratis a cualquier PC del Mundo.
Llamadas a fijos y m?viles desde 1 c?ntimo por minuto.
http://es.voice.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060122/ac34bcd0/attachment.html
From cees at pcraster.nl  Mon Jan 23 05:13:19 2006
From: cees at pcraster.nl (Cees Wesseling)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] EHdr: was ESRI flt nbits issue
In-Reply-To: <20060120165823.GA14023@bartok.itc.it>
References: <20060120111217.GD26920@bartok.itc.it>	<931f8ea90601200534i50b67b93i62e45ef88084b947@mail.gmail.com>	<20060120161950.GA5338@bartok.itc.it>
	<20060120165823.GA14023@bartok.itc.it>
Message-ID: <43D4AC3F.40108@pcraster.nl>

Markus,

The problem is that the EHdr driver is "misused" to read the .flt 
format. That ESRI format is generated from the ESRI GRIDFLOAT command.
That command will not generate the nbits line.
The ESRI white paper does not mentioned float data at all.

At present the GDAL EHdr driver can read the flt format by recognizing 
some additional tags such as xllcorner, etc. in addition to ulxmap etc 
mentioned in the white paper.
However the Create call of the EHdr driver will not create a format 
compatible with the ESRI FLOATGRID command.
A new separate driver should be the best option to support the .flt 
format more robust. That can easily be programmed by cloning some of the 
EHdr code.

But all confusion arises from the fact that some applications generate 
float data as ".bil" format while that is not supported in the white 
paper and some of these applications use "a different from the rest" 
approach to mixing the .flt and .bil format  for their purposes.

Regards, Cees

-- 
Cees Wesseling
PCRaster Environmental Software
van Swindenstraat 97
3514 XP Utrecht
The Netherlands
Tel. 0031-(0)30-238012-4 (-5 Fax)

From neteler at itc.it  Mon Jan 23 05:38:09 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] EHdr: was ESRI flt nbits issue
In-Reply-To: <43D4AC3F.40108@pcraster.nl>
References: <20060120111217.GD26920@bartok.itc.it>
	<931f8ea90601200534i50b67b93i62e45ef88084b947@mail.gmail.com>
	<20060120161950.GA5338@bartok.itc.it>
	<20060120165823.GA14023@bartok.itc.it> <43D4AC3F.40108@pcraster.nl>
Message-ID: <20060123103809.GG5442@bartok.itc.it>

Cees,

On Mon, Jan 23, 2006 at 11:13:19AM +0100, Cees Wesseling wrote:
> Markus,
> 
> The problem is that the EHdr driver is "misused" to read the .flt 
> format. That ESRI format is generated from the ESRI GRIDFLOAT command.
> That command will not generate the nbits line.

thanks for telling me - I was about to complain to my
data provider!

> The ESRI white paper does not mentioned float data at all.
> 
> At present the GDAL EHdr driver can read the flt format by recognizing 
> some additional tags such as xllcorner, etc. in addition to ulxmap etc 
> mentioned in the white paper.
> However the Create call of the EHdr driver will not create a format 
> compatible with the ESRI FLOATGRID command.
> A new separate driver should be the best option to support the .flt 
> format more robust. That can easily be programmed by cloning some of the 
> EHdr code.
> 
> But all confusion arises from the fact that some applications generate 
> float data as ".bil" format while that is not supported in the white 
> paper and some of these applications use "a different from the rest" 
> approach to mixing the .flt and .bil format  for their purposes.

Thanks for the update!

 Markus


From christian.michels at eifelgeist.com  Mon Jan 23 09:43:13 2006
From: christian.michels at eifelgeist.com (christian.michels@eifelgeist.com)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal (ogr2ogr) C API
Message-ID: <20074673.8921138027393194.JavaMail.servlet@kundenserver>

Hello,

I have to import a bunch of shp files to a postgres database every month from a .NET environment. I do this at the moment using FWTools ogr2ogr.exe in batch mode. This is not very handy since I do want to skip some attributes and add some new attributes during import. I wonder if somebody is out there who made some experience with the C API of the gdal library to write a kind of wrapper for the needed ogr functions (reading shp -> execute sql query -> write to postgres). Since I am not a experienced C programmer I would be very happy to get some samples to start with !

Thanx & regards

Chris

From jorn at spacetec.no  Mon Jan 23 09:45:42 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GML generation
Message-ID: <200601231545.42587.jorn@spacetec.no>

Hi all,

can ogr2ogr be used to convert CSV to GML?

cheers
Joern 

From jorn at spacetec.no  Mon Jan 23 10:12:02 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Re: GML generation
In-Reply-To: <200601231545.42587.jorn@spacetec.no>
References: <200601231545.42587.jorn@spacetec.no>
Message-ID: <200601231612.02810.jorn@spacetec.no>

On Monday 23 January 2006 15:45, J?rn Vegard R?snes wrote:
> Hi all,
>
> can ogr2ogr be used to convert CSV to GML?
>

I can partly answer this myself, but the output is not correct

platform.csv
x,y,id
-233950.35,6518319.86,16/11-S
-213912.58,6338485.11,2/4-EFS
-222473.01,6329200.33,2/4-FTP

platform.vrt
<OGRVRTDataSource>
    <OGRVRTLayer name="platforms">
        <SrcDataSource 
relativeToVRT="0">/home/jorn/ogr_trials/platform.csv</SrcDataSource>
        <SrcLayer>platform</SrcLayer>
        <GeometryType>wkbPoint</GeometryType>
        <GeometryField encoding="PointFromColumns" x="x" y="y"/>
        <LayerSRS>epsg:32633</LayerSRS>
    </OGRVRTLayer>
</OGRVRTDataSource>

GML output:
<?xml version="1.0" encoding="utf-8" ?>
<ogr:FeatureCollection
     xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://ogr.maptools.org/ output.xsd"
     xmlns:ogr="http://ogr.maptools.org/"
     xmlns:gml="http://www.opengis.net/gml">
</ogr:FeatureCollection>

From warmerdam at pobox.com  Mon Jan 23 10:15:22 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GML generation
In-Reply-To: <200601231545.42587.jorn@spacetec.no>
References: <200601231545.42587.jorn@spacetec.no>
Message-ID: <931f8ea90601230715y2ec23d5ag69fc2c677ec65a4f@mail.gmail.com>

On 1/23/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> Hi all,
>
> can ogr2ogr be used to convert CSV to GML?

J?rn,

Yes, something like:

   ogr2ogr -f GML pcs.gml ~/gdal/data/pcs.csv

If you have geometry in your csv file, you will have to do
the normal things to make it useful to OGR.  (VRT file, etc).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jan 23 13:32:47 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Large Files on Win32
Message-ID: <931f8ea90601231032t7e396625o96e9214392722900@mail.gmail.com>

Folks,

For a client, I have been trying to produce fairly large
mosaic files on Win32.  I ran into a problem with writing
files larger than about 150GB and after some investigation
have come to the conclusion that there is some sort of a
page pool in the kernal that limits the total disk space for
open disk files (or something like that).

Based on the MS knowledge page article at:
  http://support.microsoft.com/default.aspx?scid=kb;en-us;247904

I tried setting registry entry:

  "HKLM\System\CurrentControlSet\Control\Session Manager\Memory
Management\SystemPages"

to a value like 200000 hex and found I could write somewhat
larger files.

So, if you run into inexplicable problems with large files,
consider modifying the setting with care.  You might destabilize
your system, so do appropriate backups first.  After modifying
with regedit, remember to reboot for it to take effect.

PS. Also keep in mind that FAT32 file systems don't support
very large files.  Use NTFS for large files.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From smalgin at esri.com  Mon Jan 23 17:29:12 2006
From: smalgin at esri.com (Sergey Malgin)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal13.dll fails to load if called from different
	directory (WinXP) - GIF format only
Message-ID: <001701c6206c$6fa13330$1e330d0a@esri.com>

Ok, it sounds a bit confusing. Let me explain:

 

1.	I have FOO_PLUGIN DLL that uses GDAL to read images 
2.	FOO_DLL is located under PLUGINS/FOO and loaded on-the-fly by the
process 
3.	GDAL13.DLL sits in DGAL_DIR. PATH variable has GDAL_DIR listed. 

 

It all works OK for ECW, TIFF and MrSID. However, when I try to load GIFs,
LoadLibrary(FOO_PLUGIN.DLL) fails with Win32 code 126 (library couldn't be
found) and pop-up appears - 'GDAL13.DLL was not found'. 

When I copy GDAL13.DLL into my process' working dir, it starts to complain
about HD420M.DLL etc etc. 

All these DLLs are in GDAL_DIR together and yes, GDAL_DIR is listed in PATH.


 

Again, this only happens when I try to read GIFs. ECW, TIFF and MrSID
formats work OK.

 

I suppose I somehow should tell GDAL where GDAL13.DLL is located. But how? I
couldn't find anything in documentation. 

 

This is my GDAL initialization code from FOO_PLUGIN.DLL:

 

    GDALAllRegister();

    CPLSetConfigOption("GDAL_PAM_ENABLED", "YES");

    CPLSetConfigOption("USE_RRD", "YES");

CPLSetConfigOption("HFA_USE_RRD", "YES");

 

 

Any help would be greatly appreciated.

 

Sergey Malgin

ESRI, Inc

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060123/e5b0ac86/attachment.html
From warmerdam at pobox.com  Mon Jan 23 19:51:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal13.dll fails to load if called from different
	directory (WinXP) - GIF format only
In-Reply-To: <001701c6206c$6fa13330$1e330d0a@esri.com>
References: <001701c6206c$6fa13330$1e330d0a@esri.com>
Message-ID: <931f8ea90601231651h3f3a7fb1mc8b9753b9f2fad80@mail.gmail.com>

On 1/23/06, Sergey Malgin <smalgin@esri.com> wrote:
> Ok, it sounds a bit confusing. Let me explain:
>
> It all works OK for ECW, TIFF and MrSID. However, when I try to load GIFs,
> LoadLibrary(FOO_PLUGIN.DLL) fails with Win32 code 126 (library couldn't be
> found) and pop-up appears ? 'GDAL13.DLL was not found'.

Sergey,

I have no idea why this doesn't work for GIF, but does work for the
other file types.  I *suspect* there is something different in how the
FOO_PLUGIN.DLL is built, but that is in your domain so I can't check.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From e63788 at ems.rmit.edu.au  Mon Jan 23 01:33:05 2006
From: e63788 at ems.rmit.edu.au (Hu Qinyou)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] s57 update
Message-ID: <43D513510200000D00306D81@its-gw-inet57.its.rmit.edu.au>

Hi everyone,
 
does anybody know whether OGR supports s57 update files in its latest
version? I read the source file,and it seems to support s57 update files
but I have not see any example or similar work been done.
 
Regards,
 
Hu
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060123/bbaff357/attachment.html
From warmerdam at pobox.com  Mon Jan 23 23:03:29 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] s57 update
In-Reply-To: <43D513510200000D00306D81@its-gw-inet57.its.rmit.edu.au>
References: <43D513510200000D00306D81@its-gw-inet57.its.rmit.edu.au>
Message-ID: <931f8ea90601232003l9370fb6j358885b5818aa15@mail.gmail.com>

On 1/23/06, Hu Qinyou <e63788@ems.rmit.edu.au> wrote:
>
> Hi everyone,
>
> does anybody know whether OGR supports s57 update files in its latest
> version? I read the source file,and it seems to support s57 update files but
> I have not see any example or similar work been done.

Hu,

Yes, OGR will automatically apply S-57 updates as long as they
are in the same directory as the .000 file, and as long as they
have not been deliberately disabled with the config option
UPDATE=FALSE.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jorn at spacetec.no  Tue Jan 24 04:34:31 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Re: GML generation
In-Reply-To: <200601231612.02810.jorn@spacetec.no>
References: <200601231545.42587.jorn@spacetec.no>
	<200601231612.02810.jorn@spacetec.no>
Message-ID: <200601241034.31204.jorn@spacetec.no>

Any clues?

cheers
Joern

On Monday 23 January 2006 16:12, J?rn Vegard R?snes wrote:
> On Monday 23 January 2006 15:45, J?rn Vegard R?snes wrote:
> > Hi all,
> >
> > can ogr2ogr be used to convert CSV to GML?
>
> I can partly answer this myself, but the output is not correct
>
> platform.csv
> x,y,id
> -233950.35,6518319.86,16/11-S
> -213912.58,6338485.11,2/4-EFS
> -222473.01,6329200.33,2/4-FTP
>
> platform.vrt
> <OGRVRTDataSource>
>     <OGRVRTLayer name="platforms">
>         <SrcDataSource
> relativeToVRT="0">/home/jorn/ogr_trials/platform.csv</SrcDataSource>
>         <SrcLayer>platform</SrcLayer>
>         <GeometryType>wkbPoint</GeometryType>
>         <GeometryField encoding="PointFromColumns" x="x" y="y"/>
>         <LayerSRS>epsg:32633</LayerSRS>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
>
> GML output:
> <?xml version="1.0" encoding="utf-8" ?>
> <ogr:FeatureCollection
>      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>      xsi:schemaLocation="http://ogr.maptools.org/ output.xsd"
>      xmlns:ogr="http://ogr.maptools.org/"
>      xmlns:gml="http://www.opengis.net/gml">
> </ogr:FeatureCollection>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From jorn at spacetec.no  Tue Jan 24 04:41:18 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GML generation
In-Reply-To: <931f8ea90601230715y2ec23d5ag69fc2c677ec65a4f@mail.gmail.com>
References: <200601231545.42587.jorn@spacetec.no>
	<931f8ea90601230715y2ec23d5ag69fc2c677ec65a4f@mail.gmail.com>
Message-ID: <200601241041.18318.jorn@spacetec.no>

Ah,

my scripts was wrong
I used 
ogr2ogr -f GML pipelines.gml pipelines pipelines.vrt

should be 
ogr2ogr -f GML pipelines.gml pipelines.vrt

just as Frank said.

cheers
Jorn

On Monday 23 January 2006 16:15, Frank Warmerdam wrote:
> On 1/23/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> > Hi all,
> >
> > can ogr2ogr be used to convert CSV to GML?
>
> J?rn,
>
> Yes, something like:
>
>    ogr2ogr -f GML pcs.gml ~/gdal/data/pcs.csv
>
> If you have geometry in your csv file, you will have to do
> the normal things to make it useful to OGR.  (VRT file, etc).
>
> Best regards,
> --
>
> ---------------------------------------+-----------------------------------
>--- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Programmer for Rent

From jorn at spacetec.no  Tue Jan 24 12:22:01 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GML reading
Message-ID: <200601241822.01009.jorn@spacetec.no>

Hi,

I'm testing ogr2ogr's GML reading capabilities (with PostGIS output).

I wonder if ogr2ogr has some contraints reading of GML (besides only GML 2.0 
support), because it won't read the GML from
http://en.wikipedia.org/wiki/Geography_Markup_Language#Features_using_geometries
http://en.wikipedia.org/wiki/Geography_Markup_Language#Point_Profile

however 
http://www.geotools.org/display/GEOTOOLS/GMLDataStore
is read successfully.

It could be that the two first ones aren't valid GMLs, but I'm not able to 
validate that. Well, that's partly true, 
http://cite.occamlab.com/gmlTools/validateInstance.jsp, tells me that neither 
of the GMLs are perfect.

Any thoughts?

cheers
Joern

From warmerdam at pobox.com  Tue Jan 24 13:34:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GML reading
In-Reply-To: <200601241822.01009.jorn@spacetec.no>
References: <200601241822.01009.jorn@spacetec.no>
Message-ID: <931f8ea90601241034y73953b1fmaf28b555ca45ee15@mail.gmail.com>

On 1/24/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> Hi,
>
> I'm testing ogr2ogr's GML reading capabilities (with PostGIS output).
>
> I wonder if ogr2ogr has some contraints reading of GML (besides only GML 2.0
> support), because it won't read the GML from
> http://en.wikipedia.org/wiki/Geography_Markup_Language#Features_using_geometries
> http://en.wikipedia.org/wiki/Geography_Markup_Language#Point_Profile
>
> however
> http://www.geotools.org/display/GEOTOOLS/GMLDataStore
> is read successfully.
>
> It could be that the two first ones aren't valid GMLs, but I'm not able to
> validate that. Well, that's partly true,
> http://cite.occamlab.com/gmlTools/validateInstance.jsp, tells me that neither
> of the GMLs are perfect.

Joern,

The OGR GML2 reader does not use XML schemas, and
as such is far from being a "proper" GML reader.  One of
it's jiffy rules is to look for "featureMember" elements in
order to identify what parts of the xml file are features.  I
think this is missing in the problem files, and so they don't
work.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From matthew.d.dolloff at nasa.gov  Tue Jan 24 17:08:52 2006
From: matthew.d.dolloff at nasa.gov (Dolloff, Matthew D. (JSC-ER7))
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Help With Transparent Colors
Message-ID: <A8EC18764D27D04383CE3564CA19EA74432D79@NDJSEVS14.ndc.nasa.gov>

Hello.  I am trying to convert some MrSID images into Geotiffs and
tiling them together.  The MrSIDs are in state plane coordinate system
and I need them in WGS84.  So I convert the MrSIDs to geotiffs using
mrsiddecode from lizard tech.  Then I use gdal warp to change the
projection type.  Then use gdal_merge to merge them together.  The
problem is that I end up with a black collar when I warp the images and
then when I merge them the images cover each other up.  Is there anyway,
that I can crop those collars out?  Here is the link where I am getting
the sids
http://www.nysgis.state.ny.us/gateway/mg/2001/suffolk/01ic_t_babylon_l06
col.htm 

 

Thanks,

Matt

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060124/95fc3e79/attachment.html
From warmerdam at pobox.com  Tue Jan 24 18:06:48 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Help With Transparent Colors
In-Reply-To: <A8EC18764D27D04383CE3564CA19EA74432D79@NDJSEVS14.ndc.nasa.gov>
References: <A8EC18764D27D04383CE3564CA19EA74432D79@NDJSEVS14.ndc.nasa.gov>
Message-ID: <931f8ea90601241506i45fba508n56c7aa24a582311@mail.gmail.com>

On 1/24/06, Dolloff, Matthew D. (JSC-ER7) <matthew.d.dolloff@nasa.gov> wrote:
>
>
>
> Hello.  I am trying to convert some MrSID images into Geotiffs and tiling
> them together.  The MrSIDs are in state plane coordinate system and I need
> them in WGS84.  So I convert the MrSIDs to geotiffs using mrsiddecode from
> lizard tech.  Then I use gdal warp to change the projection type.  Then use
> gdal_merge to merge them together.  The problem is that I end up with a
> black collar when I warp the images and then when I merge them the images
> cover each other up.  Is there anyway, that I can crop those collars out?
> Here is the link where I am getting the sids
> http://www.nysgis.state.ny.us/gateway/mg/2001/suffolk/01ic_t_babylon_l06col.htm

Matt,

A couple of approaches would be:

 o Use gdal_merge to merge the TIFFs before
    reprojecting them.  Then gdalwarp the resulting
    mosaic.

 o Or create a big WGS84 mosaic file and gdalwarp
    each non-WGS84 file into that, mosaicing at the
    same time as reprojecting.

In the future gdalwarp will support multiple input
files, essentially replacing gdal_merge for many
purposes.  This is already in CVS if you were building
from source.  Another option would be to generate a
nodata value or better yet an alpha channel in the files
output by gdalwarp to keep track of the nodata pixels.

My suggestion would be the top most option, mosaic
then reproject.  Keep in mind that GeoTIFF only
supports file sizes up to 4GB.  So if your mosaic is
going to be large, you may need to do it in a format
like Erdas Imagine.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rec at geodesign.com.br  Tue Jan 24 18:48:24 2006
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Help With Transparent Colors
In-Reply-To: <931f8ea90601241506i45fba508n56c7aa24a582311@mail.gmail.com
 >
References: <A8EC18764D27D04383CE3564CA19EA74432D79@NDJSEVS14.ndc.nasa.gov>
	<931f8ea90601241506i45fba508n56c7aa24a582311@mail.gmail.com>
Message-ID: <6.2.1.2.0.20060124214324.042c8dd8@mailhost.geodesign.com.br>

You can also use the GeoExpress 5.0 trial download from LizardTech 
(www.lizardtech.com) that allows you to mosaic and reproject .sid images in 
one step.  The trial download allows you to work with images that already 
are in .sid format without problems.  That way you don't need to go from 
MrSID to GeoTiff and make a large mosaic as a .sid image.

Best regards,

Reinaldo

At 09:06 PM 1/24/2006, Frank Warmerdam wrote:
>On 1/24/06, Dolloff, Matthew D. (JSC-ER7) <matthew.d.dolloff@nasa.gov> wrote:
> >
> >
> >
> > Hello.  I am trying to convert some MrSID images into Geotiffs and tiling
> > them together.  The MrSIDs are in state plane coordinate system and I need
> > them in WGS84.  So I convert the MrSIDs to geotiffs using mrsiddecode from
> > lizard tech.  Then I use gdal warp to change the projection type.  Then use
> > gdal_merge to merge them together.  The problem is that I end up with a
> > black collar when I warp the images and then when I merge them the images
> > cover each other up.  Is there anyway, that I can crop those collars out?
> > Here is the link where I am getting the sids
> > 
> http://www.nysgis.state.ny.us/gateway/mg/2001/suffolk/01ic_t_babylon_l06col.htm
>
>Matt,
>
>A couple of approaches would be:
>
>  o Use gdal_merge to merge the TIFFs before
>     reprojecting them.  Then gdalwarp the resulting
>     mosaic.
>
>  o Or create a big WGS84 mosaic file and gdalwarp
>     each non-WGS84 file into that, mosaicing at the
>     same time as reprojecting.
>
>In the future gdalwarp will support multiple input
>files, essentially replacing gdal_merge for many
>purposes.  This is already in CVS if you were building
>from source.  Another option would be to generate a
>nodata value or better yet an alpha channel in the files
>output by gdalwarp to keep track of the nodata pixels.
>
>My suggestion would be the top most option, mosaic
>then reproject.  Keep in mind that GeoTIFF only
>supports file sizes up to 4GB.  So if your mosaic is
>going to be large, you may need to do it in a format
>like Erdas Imagine.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev

Reinaldo Escada Chohfi, Ph.D.
Diretor
GeoDesign Internacional

www.geodesign.com.br

E-mail: rec@geodesign.com.br

Tel./Fax: 0-XX-12-3153-5115 (Local)
       55-12-3153-5115 (Intl.)

Intelig?ncia e Tecnologia Espacial de Ponta

Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
Sensoriamento Remoto: Imagens de Sat?lites

Compress?o de Imagens e Documentos Escanerizados
Servidor de Conte?do - Sistemas de Visualiza??o - Integra??o de Sistemas

Revendedor Autorizado da LizardTech e da Applied Imagery no Brasil

Vila Peralta, 42
12607-040 - Lorena - SP - Brasil

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2005 GeoDesign Internacional
Todos os direitos reservados.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060124/a82fd6b5/attachment.html
From matthew.d.dolloff at nasa.gov  Tue Jan 24 19:15:27 2006
From: matthew.d.dolloff at nasa.gov (Dolloff, Matthew D. (JSC-ER7))
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Help With Transparent Colors
Message-ID: <A8EC18764D27D04383CE3564CA19EA74432D80@NDJSEVS14.ndc.nasa.gov>

I'm not sure how well GeoExpress is an option because we are talking about thousands of files and GB of data.  I need to batch the process.

 

________________________________

From: Reinaldo Escada Chohfi [mailto:rec@geodesign.com.br] 
Sent: Tuesday, January 24, 2006 5:48 PM
To: Frank Warmerdam; Dolloff, Matthew D. (JSC-ER7)
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Help With Transparent Colors

 

You can also use the GeoExpress 5.0 trial download from LizardTech ( www.lizardtech.com <http://www.lizardtech.com/> ) that allows you to mosaic and reproject .sid images in one step.  The trial download allows you to work with images that already are in .sid format without problems.  That way you don't need to go from MrSID to GeoTiff and make a large mosaic as a .sid image.

Best regards,

Reinaldo

At 09:06 PM 1/24/2006, Frank Warmerdam wrote:



On 1/24/06, Dolloff, Matthew D. (JSC-ER7) <matthew.d.dolloff@nasa.gov> wrote:
>
>
>
> Hello.  I am trying to convert some MrSID images into Geotiffs and tiling
> them together.  The MrSIDs are in state plane coordinate system and I need
> them in WGS84.  So I convert the MrSIDs to geotiffs using mrsiddecode from
> lizard tech.  Then I use gdal warp to change the projection type.  Then use
> gdal_merge to merge them together.  The problem is that I end up with a
> black collar when I warp the images and then when I merge them the images
> cover each other up.  Is there anyway, that I can crop those collars out?
> Here is the link where I am getting the sids
> http://www.nysgis.state.ny.us/gateway/mg/2001/suffolk/01ic_t_babylon_l06col.htm 

Matt,

A couple of approaches would be:

 o Use gdal_merge to merge the TIFFs before
    reprojecting them.  Then gdalwarp the resulting
    mosaic.

 o Or create a big WGS84 mosaic file and gdalwarp
    each non-WGS84 file into that, mosaicing at the
    same time as reprojecting.

In the future gdalwarp will support multiple input
files, essentially replacing gdal_merge for many
purposes.  This is already in CVS if you were building
from source.  Another option would be to generate a
nodata value or better yet an alpha channel in the files
output by gdalwarp to keep track of the nodata pixels.

My suggestion would be the top most option, mosaic
then reproject.  Keep in mind that GeoTIFF only
supports file sizes up to 4GB.  So if your mosaic is
going to be large, you may need to do it in a format
like Erdas Imagine.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev 

Reinaldo Escada Chohfi, Ph.D.
Diretor 
GeoDesign Internacional

www.geodesign.com.br

<http://www.geodesign.com.br/> E-mail: rec@geodesign.com.br

Tel./Fax: 0-XX-12-3153-5115 (Local)
      55-12-3153-5115 (Intl.)

Intelig?ncia e Tecnologia Espacial de Ponta

Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
Sensoriamento Remoto: Imagens de Sat?lites 

Compress?o de Imagens e Documentos Escanerizados
Servidor de Conte?do - Sistemas de Visualiza??o - Integra??o de Sistemas

Revendedor Autorizado da LizardTech e da Applied Imagery no Brasil

Vila Peralta, 42
12607-040 - Lorena - SP - Brasil

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2005 GeoDesign Internacional
Todos os direitos reservados.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060124/a21eae01/attachment.html
From rec at geodesign.com.br  Tue Jan 24 20:08:04 2006
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Help With Transparent Colors
In-Reply-To: <A8EC18764D27D04383CE3564CA19EA74432D80@NDJSEVS14.ndc.nasa. gov>
References: <A8EC18764D27D04383CE3564CA19EA74432D80@NDJSEVS14.ndc.nasa.gov>
Message-ID: <6.2.1.2.0.20060124230542.042c8dd8@mailhost.geodesign.com.br>

GeoExpress has both GUI and command line versions for batch 
processing.  You can add 1000s of images to process using either version.

R.

At 10:15 PM 1/24/2006, Dolloff, Matthew D. (JSC-ER7) wrote:
>I?m not sure how well GeoExpress is an option because we are talking about 
>thousands of files and GB of data.  I need to batch the process.
>
>
>----------
>From: Reinaldo Escada Chohfi [mailto:rec@geodesign.com.br]
>Sent: Tuesday, January 24, 2006 5:48 PM
>To: Frank Warmerdam; Dolloff, Matthew D. (JSC-ER7)
>Cc: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] Help With Transparent Colors
>
>You can also use the GeoExpress 5.0 trial download from LizardTech ( 
>www.lizardtech.com) that allows you to mosaic and reproject .sid images in 
>one step.  The trial download allows you to work with images that already 
>are in .sid format without problems.  That way you don't need to go from 
>MrSID to GeoTiff and make a large mosaic as a .sid image.
>
>Best regards,
>
>Reinaldo
>
>At 09:06 PM 1/24/2006, Frank Warmerdam wrote:
>
>On 1/24/06, Dolloff, Matthew D. (JSC-ER7) <matthew.d.dolloff@nasa.gov> wrote:
> >
> >
> >
> > Hello.  I am trying to convert some MrSID images into Geotiffs and tiling
> > them together.  The MrSIDs are in state plane coordinate system and I need
> > them in WGS84.  So I convert the MrSIDs to geotiffs using mrsiddecode from
> > lizard tech.  Then I use gdal warp to change the projection type.  Then use
> > gdal_merge to merge them together.  The problem is that I end up with a
> > black collar when I warp the images and then when I merge them the images
> > cover each other up.  Is there anyway, that I can crop those collars out?
> > Here is the link where I am getting the sids
> > 
> http://www.nysgis.state.ny.us/gateway/mg/2001/suffolk/01ic_t_babylon_l06col.htm 
>
>
>Matt,
>
>A couple of approaches would be:
>
>  o Use gdal_merge to merge the TIFFs before
>     reprojecting them.  Then gdalwarp the resulting
>     mosaic.
>
>  o Or create a big WGS84 mosaic file and gdalwarp
>     each non-WGS84 file into that, mosaicing at the
>     same time as reprojecting.
>
>In the future gdalwarp will support multiple input
>files, essentially replacing gdal_merge for many
>purposes.  This is already in CVS if you were building
>from source.  Another option would be to generate a
>nodata value or better yet an alpha channel in the files
>output by gdalwarp to keep track of the nodata pixels.
>
>My suggestion would be the top most option, mosaic
>then reproject.  Keep in mind that GeoTIFF only
>supports file sizes up to 4GB.  So if your mosaic is
>going to be large, you may need to do it in a format
>like Erdas Imagine.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>Reinaldo Escada Chohfi, Ph.D.
>Diretor
>GeoDesign Internacional
>
>www.geodesign.com.br
>
>E-mail: rec@geodesign.com.br
>
>Tel./Fax: 0-XX-12-3153-5115 (Local)
>       55-12-3153-5115 (Intl.)
>
>Intelig?ncia e Tecnologia Espacial de Ponta
>
>Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
>Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
>Sensoriamento Remoto: Imagens de Sat?lites
>
>Compress?o de Imagens e Documentos Escanerizados
>Servidor de Conte?do - Sistemas de Visualiza??o - Integra??o de Sistemas
>
>Revendedor Autorizado da LizardTech e da Applied Imagery no Brasil
>
>Vila Peralta, 42
>12607-040 - Lorena - SP - Brasil
>
>Informa??o confidencial. N?o retransmitir sem autoriza??o.
>Copyright (c) 2005 GeoDesign Internacional
>Todos os direitos reservados.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060124/c058ad8e/attachment.html
From olivier.wymann at itelios.com  Thu Jan 26 05:33:39 2006
From: olivier.wymann at itelios.com (Olivier Wymann)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] (little) Problem with the gdal_translate srcwin option
Message-ID: <68995FD0DC688C41BC6D1BB4BA67425E0B8B8D@it-serv-02.intranet.itelios.net>

Hi,

 

I'm using gdal v1.3.1.0, and I got a problem when I try to extract a
subwin from a geotiff file :

 

gdal_translate -srcwin 400 400 230 360 test.tif dest.tif

 

The output file size and new geocoordinates seem to be ok, but the
problem is the new file itself : in TatukGIS, the dest.tif file looks as
if the 3 bans where displayed with 3 different vertical offsets (not
very easy to explain...imagine the red band starting at y=0, the green
at y= n and the blue starting at y=approximately n+n), but curiously,
where I open the file in Photoshop, or if I translate it in JPEG, it
looks great. Any Idea ?

 

FILE INFORMATIONS :

 

Original

 

Driver: GTiff/GeoTIFF

Size is 2299, 1686

Coordinate System is:

GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.2572235630016,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0],

    UNIT["degree",0.0174532925199433],

    AUTHORITY["EPSG","4326"]]

Origin = (1.356243,43.109269)

Pixel Size = (0.00005390,-0.00005390)

Metadata:

  AREA_OR_POINT=Area

Corner Coordinates:

Upper Left  (   1.3562432,  43.1092686) (  1d21'22.48"E, 43d

Lower Left  (   1.3562432,  43.0183852) (  1d21'22.48"E, 43d

Upper Right (   1.4801703,  43.1092686) (  1d28'48.61"E, 43d

Lower Right (   1.4801703,  43.0183852) (  1d28'48.61"E, 43d

Center      (   1.4182067,  43.0638269) (  1d25'5.54"E, 43d

Band 1 Block=2299x1 Type=Byte, ColorInterp=Red

Band 2 Block=2299x1 Type=Byte, ColorInterp=Green

Band 3 Block=2299x1 Type=Byte, ColorInterp=Blue

 

COMMAND

 

>gdal_translate -srcwin 400 400 230 360 test.tif dest.tif

(performs without warnings)

 

SUBWIN FILE

 

>gdalinfo dest.tif

 

Driver: GTiff/GeoTIFF

Size is 230, 360

Coordinate System is:

GEOGCS["WGS 84",

    DATUM["WGS_1984",

        SPHEROID["WGS 84",6378137,298.2572235630016,

            AUTHORITY["EPSG","7030"]],

        AUTHORITY["EPSG","6326"]],

    PRIMEM["Greenwich",0],

    UNIT["degree",0.0174532925199433],

    AUTHORITY["EPSG","4326"]]

Origin = (1.377805,43.087707)

Pixel Size = (0.00005390,-0.00005390)

Metadata:

  AREA_OR_POINT=Area

Corner Coordinates:

Upper Left  (   1.3778051,  43.0877067) (  1d22'40.10"E, 43d 5'15.74"N)

Lower Left  (   1.3778051,  43.0683010) (  1d22'40.10"E, 43d 4'5.88"N)

Upper Right (   1.3902032,  43.0877067) (  1d23'24.73"E, 43d 5'15.74"N)

Lower Right (   1.3902032,  43.0683010) (  1d23'24.73"E, 43d 4'5.88"N)

Center      (   1.3840042,  43.0780038) (  1d23'2.41"E, 43d 4'40.81"N)

Band 1 Block=230x35 Type=Byte, ColorInterp=Red

Band 2 Block=230x35 Type=Byte, ColorInterp=Green

Band 3 Block=230x35 Type=Byte, ColorInterp=Blue

 

Thank you for your help

 

 

Olivier

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060126/be467f75/attachment.html
From warmerdam at pobox.com  Thu Jan 26 08:44:55 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] (little) Problem with the gdal_translate srcwin option
In-Reply-To: <68995FD0DC688C41BC6D1BB4BA67425E0B8B8D@it-serv-02.intranet.itelios.net>
References: <68995FD0DC688C41BC6D1BB4BA67425E0B8B8D@it-serv-02.intranet.itelios.net>
Message-ID: <931f8ea90601260544n6d49e3ebob5a7174adcbf3977@mail.gmail.com>

On 1/26/06, Olivier Wymann <olivier.wymann@itelios.com> wrote:
>
> I'm using gdal v1.3.1.0, and I got a problem when I try to extract a subwin
> from a geotiff file :
>
>
>
> gdal_translate -srcwin 400 400 230 360 test.tif dest.tif
>
>
>
> The output file size and new geocoordinates seem to be ok, but the problem
> is the new file itself : in TatukGIS, the dest.tif file looks as if the 3
> bans where displayed with 3 different vertical offsets (not very easy to

Olivier,

Try:

  gdal_translate -co INTERLEAVE=PIXEL -srcwin 400 400 230 360 test.tif dest.tif

And see if the resulting file is ok in TatukGIS.  If it is, then
the problem is that TatukGIS doesn't support band interleaved
(Planar Configuration: Separate) files.  These are not "baseline"
TIFF, so you could make the case that GDAL should not generate
them by default.  You could also make the case that it is lame for
a respected piece of software like TatukGIS to not support them.

Of course, it could be something else.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From olivier.wymann at itelios.com  Thu Jan 26 11:05:13 2006
From: olivier.wymann at itelios.com (Olivier Wymann)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] (little) Problem with the gdal_translate srcwin option
Message-ID: <68995FD0DC688C41BC6D1BB4BA67425E0B8B8E@it-serv-02.intranet.itelios.net>

Frank,

Thank you, that was the solution ! 

'gonna send a mail to M. TatukGIS :)


Olivier


-----Message d'origine-----
De?: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] De la part de Frank Warmerdam
Envoy??: jeudi 26 janvier 2006 14:45
??: Olivier Wymann
Cc?: gdal-dev@lists.maptools.org
Objet?: Re: [Gdal-dev] (little) Problem with the gdal_translate srcwin option

On 1/26/06, Olivier Wymann <olivier.wymann@itelios.com> wrote:
>
> I'm using gdal v1.3.1.0, and I got a problem when I try to extract a subwin
> from a geotiff file :
>
>
>
> gdal_translate -srcwin 400 400 230 360 test.tif dest.tif
>
>
>
> The output file size and new geocoordinates seem to be ok, but the problem
> is the new file itself : in TatukGIS, the dest.tif file looks as if the 3
> bans where displayed with 3 different vertical offsets (not very easy to

Olivier,

Try:

  gdal_translate -co INTERLEAVE=PIXEL -srcwin 400 400 230 360 test.tif dest.tif

And see if the resulting file is ok in TatukGIS.  If it is, then
the problem is that TatukGIS doesn't support band interleaved
(Planar Configuration: Separate) files.  These are not "baseline"
TIFF, so you could make the case that GDAL should not generate
them by default.  You could also make the case that it is lame for
a respected piece of software like TatukGIS to not support them.

Of course, it could be something else.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Todd.Southen at bentley.com  Thu Jan 26 13:52:56 2006
From: Todd.Southen at bentley.com (Todd.Southen@bentley.com)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
Message-ID: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>

Hello all,

I'm having problems reading a MID file with OGR.  It appears that it
doesn't like my data as there are spaces after the commas (even though
the delimiter is properly set as ", " in the MIF header).  If I change
the delimiter entry in the MIF to "," from ", " then things work fine.
Does OGR not like multicharacter delimiters?

For what its worth, these same files load just fine in MapInfo.

Thank-you,
Todd.


From armin.burger at gmx.net  Thu Jan 26 13:55:05 2006
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GDAL with ECW SDK 3.3 on Mac OS X
Message-ID: <43D91B09.5030305@gmx.net>

Hello

I guess that some folks succeeded in compiling GDAL with ECW support 
under Max OS X (Tiger).  I tried the combination GDAL 1.3.1 and ECW SDK 
3.3 RC1. After applying the once on this list mentioned small patch for 
the SDK it compiled fine.

Then GDAL gives an error during the configure script:

...
checking for libNCSEcw.so or libecwj2... configure: error: not found in 
/usr/local/lib or /usr/local/bin.


The libraries of ECW are under /usr/local/lib. I checked the configure 
script and just tried a link

  /usr/local/libecwj2.dylib -> /usr/local/lib/libNCSEcw.0.0.0.dylib

The configure then went on. Also the compilation went quite far. But 
somewhere towards the end of the make I get the error

...
ld: Undefined symbols:
__ZN10CNCSThread10GetCurrentEv
__ZN10CNCSThread11EnableStatsEv
__ZN10CNCSThread11GetPriorityEv
__ZN10CNCSThread11IsSuspendedEv
__ZN10CNCSThread11SetPriorityE17NCSThreadPriority
__ZN10CNCSThread11ThreadYieldEv
__ZN10CNCSThread12DisableStatsEv
__ZN10CNCSThread3RunEv
__ZN10CNCSThread4ExitEi
__ZN10CNCSThread4StopEb
__ZN10CNCSThread5GetIDEv
__ZN10CNCSThread5SpawnEPvb
__ZN10CNCSThread6ResumeEv
__ZN10CNCSThread7SuspendEv
__ZN10CNCSThread8GetStatsEv
__ZN10CNCSThread8GetSysIDEv
__ZN10CNCSThread9IsRunningEv
__ZN10CNCSThread9TerminateEv
__ZN9CNCSError15GetErrorMessageEPcz
__ZN9CNCSErrorC1E8NCSErrorPciN7CNCSLog11NCSLogLevelEPKc
__ZN9CNCSErrorC1ERKS_
__ZN9CNCSErrorD1Ev
__ZN9CNCSErroraSERKS_
_NCSGetErrorText
/usr/bin/libtool: internal link edit command failed
make[1]: *** [libgdal.la] Error 1
make: *** [check-lib] Error 2


Does anybody have a clue what this could mean?

I set the LD_LIBRARY_PATH and LD_INCLUDE_PATH to all directories where I 
think it was needed.

Thanks for any help,

Armin

From dmorissette at dmsolutions.ca  Thu Jan 26 14:05:52 2006
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
In-Reply-To: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>
References: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>
Message-ID: <43D91D90.9050601@dmsolutions.ca>

Todd.Southen@bentley.com wrote:
> Hello all,
> 
> I'm having problems reading a MID file with OGR.  It appears that it
> doesn't like my data as there are spaces after the commas (even though
> the delimiter is properly set as ", " in the MIF header).  If I change
> the delimiter entry in the MIF to "," from ", " then things work fine.
> Does OGR not like multicharacter delimiters?
> 
> For what its worth, these same files load just fine in MapInfo.
> 

I did a quick test with the MITAB library's test programs (MITAB what 
OGR uses to read MIF files) and it worked fine with the following MID 
records:

42, 123.45, ""
100, "100.5", "12345678901234567890"
100, "100.5", "12345678901234567890"
100, "100.5", "12345678901234567890"

Can you please provide a test file that reproduces the problem?

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From warmerdam at pobox.com  Thu Jan 26 14:11:21 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
In-Reply-To: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>
References: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>
Message-ID: <931f8ea90601261111v5150c6f8q93a53c9c15e3c91f@mail.gmail.com>

On 1/26/06, Todd.Southen@bentley.com <Todd.Southen@bentley.com> wrote:
> Hello all,
>
> I'm having problems reading a MID file with OGR.  It appears that it
> doesn't like my data as there are spaces after the commas (even though
> the delimiter is properly set as ", " in the MIF header).  If I change
> the delimiter entry in the MIF to "," from ", " then things work fine.
> Does OGR not like multicharacter delimiters?
>
> For what its worth, these same files load just fine in MapInfo.

Todd,

I don't believe multi-character delimeters are supported.
Could you submit a bug against MITAB about this?  Please
assign it directly to me, since the issue relates in part to
the line parsing.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Todd.Southen at bentley.com  Thu Jan 26 14:17:30 2006
From: Todd.Southen at bentley.com (Todd.Southen@bentley.com)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
Message-ID: <EE8C2D034A022444B87B1332B397810504ADD10B@extonpo1.bentley.com>

I've attached some tiny files and have included their contents as text
below.

Here's the output from ogrinfo for these files, if you look at the BLOCK
attribute it is incorrect:

C:\temp\mif>ogrinfo small.mif small
Had to open data source read-only.
INFO: Open of `small.mif'
using driver `MapInfo File' successful.

Layer name: small
Geometry: Unknown (any)
Feature Count: 2
Extent: (407128.974000, 155312.559000) - (407142.741000, 155329.616000)
Layer SRS WKT:
LOCAL_CS["Nonearth",
    UNIT["Meter",1]]
NAME: String (50.0)
BLOCK: Integer (0.0)
OWNER: String (64.0)
APPRAISED_VALUE: Real (0.0)
TAXES: Real (0.0)
FLOODZONE: Integer (0.0)
NUM: String (254.0)
OGRFeature(small):1
  NAME (String) =  S. 11th St.
  BLOCK (Integer) = 0
  OWNER (String) = 4
  APPRAISED_VALUE (Real) = 0
  TAXES (Real) = 0
  FLOODZONE (Integer) = 0
  NUM (String) = 56115.58
  Style =
BRUSH(fc:#000000,bc:#ffffff,id:"mapinfo-brush-1.ogr-brush-1");PEN(w:1px,
c:#000000,id:"mapinfo-pen-2.ogr-pen-0")
  POLYGON ((407131.72100000002 155322.44099999999,407134.46799999999
155329.61600000001,407142.74099999998 155327.242,407141.50300000003
155322.467,40
7140.875 155320.049,407131.72100000002 155322.44099999999))

OGRFeature(small):2
  NAME (String) =  S. 11th St.
  BLOCK (Integer) = 0
  OWNER (String) = 4
  APPRAISED_VALUE (Real) = 0
  TAXES (Real) = 0
  FLOODZONE (Integer) = 0
  NUM (String) = 62480.53
  Style =
BRUSH(fc:#000000,bc:#ffffff,id:"mapinfo-brush-1.ogr-brush-1");PEN(w:1px,
c:#000000,id:"mapinfo-pen-2.ogr-pen-0")
  POLYGON ((407128.97399999999 155315.266,407131.72100000002
155322.44099999999,407140.875 155320.049,407139.55200000003
155314.94899999999,407138.931
99999997 155312.55900000001,407128.97399999999 155315.266))

SMALL.MIF

Version 300
Charset "WindowsLatin1"
Delimiter ", "
CoordSys Nonearth Units "M" Bounds (406547, 153897) (407967, 155532)
Columns 7
  NAME Char (50)
  BLOCK Integer
  OWNER Char (64)
  APPRAISED_VALUE Float
  TAXES Float
  FLOODZONE Integer
  NUM Char (254)

Data
Region 1
6
407131.721 155322.441
407134.468 155329.616
407142.741 155327.242
407141.503 155322.467
407140.875 155320.049
407131.721 155322.441
Brush (1, 0, 16777215)
Pen (1, 2, 0)
Region 1
6
407128.974 155315.266
407131.721 155322.441
407140.875 155320.049
407139.552 155314.949
407138.932 155312.559
407128.974 155315.266
Brush (1, 0, 16777215)
Pen (1, 2, 0)

SMALL.MID

" S. 11th St.", 4, "Shiffer James A and Martha L", 56115.58, 637.68, 10,
"230"
" S. 11th St.", 4, "Guarino Sandra", 62480.53, 710.01, 10, "232" 

-----Original Message-----
From: Daniel Morissette [mailto:dmorissette@dmsolutions.ca] 
Sent: Thursday, January 26, 2006 2:06 PM
To: Todd Southen - Consultant
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MIF/MID problem

Todd.Southen@bentley.com wrote:
> Hello all,
> 
> I'm having problems reading a MID file with OGR.  It appears that it 
> doesn't like my data as there are spaces after the commas (even though

> the delimiter is properly set as ", " in the MIF header).  If I change

> the delimiter entry in the MIF to "," from ", " then things work fine.
> Does OGR not like multicharacter delimiters?
> 
> For what its worth, these same files load just fine in MapInfo.
> 

I did a quick test with the MITAB library's test programs (MITAB what
OGR uses to read MIF files) and it worked fine with the following MID
records:

42, 123.45, ""
100, "100.5", "12345678901234567890"
100, "100.5", "12345678901234567890"
100, "100.5", "12345678901234567890"

Can you please provide a test file that reproduces the problem?

Daniel
--
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------
-------------- next part --------------
A non-text attachment was scrubbed...
Name: small.mif
Type: application/octet-stream
Size: 654 bytes
Desc: small.mif
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060126/536ca16a/small.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: small.mid
Type: audio/mid
Size: 146 bytes
Desc: small.mid
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060126/536ca16a/small.bin
From dmorissette at dmsolutions.ca  Thu Jan 26 14:39:39 2006
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
In-Reply-To: <931f8ea90601261111v5150c6f8q93a53c9c15e3c91f@mail.gmail.com>
References: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>
	<931f8ea90601261111v5150c6f8q93a53c9c15e3c91f@mail.gmail.com>
Message-ID: <43D9257B.1060303@dmsolutions.ca>

Frank Warmerdam wrote:
> 
> I don't believe multi-character delimeters are supported.
> Could you submit a bug against MITAB about this?  Please
> assign it directly to me, since the issue relates in part to
> the line parsing.
> 

I have created a bug and attached Todd's test files to it:
http://bugzilla.maptools.org/show_bug.cgi?id=1265

What's odd is that my own test file with spaces after the commas is read 
just fine, but I was able to reproduce the problem with Todd's files.

Do you still want to take it Frank?  ;)

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

From Todd.Southen at bentley.com  Thu Jan 26 14:41:06 2006
From: Todd.Southen at bentley.com (Todd.Southen@bentley.com)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
Message-ID: <EE8C2D034A022444B87B1332B397810504ADD199@extonpo1.bentley.com>

Done, here's the link: http://bugzilla.maptools.org/show_bug.cgi?id=1266


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
Frank Warmerdam
Sent: Thursday, January 26, 2006 2:11 PM
To: Todd Southen - Consultant
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] MIF/MID problem

On 1/26/06, Todd.Southen@bentley.com <Todd.Southen@bentley.com> wrote:
> Hello all,
>
> I'm having problems reading a MID file with OGR.  It appears that it 
> doesn't like my data as there are spaces after the commas (even though

> the delimiter is properly set as ", " in the MIF header).  If I change

> the delimiter entry in the MIF to "," from ", " then things work fine.
> Does OGR not like multicharacter delimiters?
>
> For what its worth, these same files load just fine in MapInfo.

Todd,

I don't believe multi-character delimeters are supported.
Could you submit a bug against MITAB about this?  Please assign it
directly to me, since the issue relates in part to the line parsing.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Jan 26 15:16:17 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] MIF/MID problem
In-Reply-To: <43D9257B.1060303@dmsolutions.ca>
References: <EE8C2D034A022444B87B1332B397810504ADD04F@extonpo1.bentley.com>
	<931f8ea90601261111v5150c6f8q93a53c9c15e3c91f@mail.gmail.com>
	<43D9257B.1060303@dmsolutions.ca>
Message-ID: <931f8ea90601261216n44fb5636tc327cdcf154256b3@mail.gmail.com>

On 1/26/06, Daniel Morissette <dmorissette@dmsolutions.ca> wrote:
> I have created a bug and attached Todd's test files to it:
> http://bugzilla.maptools.org/show_bug.cgi?id=1265
>
> What's odd is that my own test file with spaces after the commas is read
> just fine, but I was able to reproduce the problem with Todd's files.
>
> Do you still want to take it Frank?  ;)

Daniel,

I've marked your 1265 as a dup of 1266, and will dig into
it this afternoon to see what's going on.  I had no problem
reproducing an error with the sample provided.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From woklist at kyngchaos.com  Thu Jan 26 15:18:04 2006
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GDAL with ECW SDK 3.3 on Mac OS X
In-Reply-To: <43D91B09.5030305@gmx.net>
References: <43D91B09.5030305@gmx.net>
Message-ID: <57DD3A4C-0D11-4C6D-BA02-76C6A120BFA4@kyngchaos.com>

Well, succeeded in building, yes.  But I get a crash in GDAL when  
trying to read ECW files.  It's apparently a known problem for the  
ECW developers, so I didn't pursue it to see what could be done, and  
I wait for them to fix it.


Anyways, the GDAL configure check problem is because when you specify  
the ecw path, it looks for the linux-style .so library, not a Mac  
dylib, but it does check for libecwj2.dylib.  So, when you link in  
libecwj2, it finds that and sets the lib options accordingly, - 
lecwj2, instead of -lNCSEcw -lNCSCnet -lNCSUtil as it needs to be.   
My fix is to edit the GDAL configure and change libNCSCnet.so to  
libNCSCnet.dylib, instead of linking libecwj2.

There is another problem that will probably crop up next - the ECW  
libraries need the Carbon framework, but the version of libtool used  
by GDAL doesn't pass framework options thru, so you will get some  
more undefined symbols errors.  In configure, find where it sets  
CARBON_FRAMEWORK, and change it to:

   CARBON_FRAMEWORK="-XCClinker framework -XCClinker Carbon"


On Jan 26, 2006, at 12:55 PM, Armin Burger wrote:

> Hello
>
> I guess that some folks succeeded in compiling GDAL with ECW  
> support under Max OS X (Tiger).  I tried the combination GDAL 1.3.1  
> and ECW SDK 3.3 RC1. After applying the once on this list mentioned  
> small patch for the SDK it compiled fine.
>
> Then GDAL gives an error during the configure script:
>
> ...
> checking for libNCSEcw.so or libecwj2... configure: error: not  
> found in /usr/local/lib or /usr/local/bin.
>
>
> The libraries of ECW are under /usr/local/lib. I checked the  
> configure script and just tried a link
>
>  /usr/local/libecwj2.dylib -> /usr/local/lib/libNCSEcw.0.0.0.dylib
>
> The configure then went on. Also the compilation went quite far.  
> But somewhere towards the end of the make I get the error
>
> ...
> ld: Undefined symbols:
> __ZN10CNCSThread10GetCurrentEv
> __ZN10CNCSThread11EnableStatsEv
> __ZN10CNCSThread11GetPriorityEv
> __ZN10CNCSThread11IsSuspendedEv
> __ZN10CNCSThread11SetPriorityE17NCSThreadPriority
> __ZN10CNCSThread11ThreadYieldEv
> __ZN10CNCSThread12DisableStatsEv
> __ZN10CNCSThread3RunEv
> __ZN10CNCSThread4ExitEi
> __ZN10CNCSThread4StopEb
> __ZN10CNCSThread5GetIDEv
> __ZN10CNCSThread5SpawnEPvb
> __ZN10CNCSThread6ResumeEv
> __ZN10CNCSThread7SuspendEv
> __ZN10CNCSThread8GetStatsEv
> __ZN10CNCSThread8GetSysIDEv
> __ZN10CNCSThread9IsRunningEv
> __ZN10CNCSThread9TerminateEv
> __ZN9CNCSError15GetErrorMessageEPcz
> __ZN9CNCSErrorC1E8NCSErrorPciN7CNCSLog11NCSLogLevelEPKc
> __ZN9CNCSErrorC1ERKS_
> __ZN9CNCSErrorD1Ev
> __ZN9CNCSErroraSERKS_
> _NCSGetErrorText
> /usr/bin/libtool: internal link edit command failed
> make[1]: *** [libgdal.la] Error 1
> make: *** [check-lib] Error 2
>
>
> Does anybody have a clue what this could mean?
>
> I set the LD_LIBRARY_PATH and LD_INCLUDE_PATH to all directories  
> where I think it was needed.
>
> Thanks for any help,
>
> Armin
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Oh, look, I seem to have fallen down a deep, dark hole.  Now what  
does that remind me of?  Ah, yes - life."

- Marvin


From armin.burger at gmx.net  Thu Jan 26 15:44:47 2006
From: armin.burger at gmx.net (Armin Burger)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] GDAL with ECW SDK 3.3 on Mac OS X
In-Reply-To: <57DD3A4C-0D11-4C6D-BA02-76C6A120BFA4@kyngchaos.com>
References: <43D91B09.5030305@gmx.net>
	<57DD3A4C-0D11-4C6D-BA02-76C6A120BFA4@kyngchaos.com>
Message-ID: <43D934BF.6000407@gmx.net>

William,

thanks for the clarifications. I guess one has then to wait until the ER 
Mapper developers get the things corrected.

Armin

William Kyngesburye wrote:
> Well, succeeded in building, yes.  But I get a crash in GDAL when trying 
> to read ECW files.  It's apparently a known problem for the ECW 
> developers, so I didn't pursue it to see what could be done, and I wait 
> for them to fix it.
> 
> 
> Anyways, the GDAL configure check problem is because when you specify 
> the ecw path, it looks for the linux-style .so library, not a Mac dylib, 
> but it does check for libecwj2.dylib.  So, when you link in libecwj2, it 
> finds that and sets the lib options accordingly, -lecwj2, instead of 
> -lNCSEcw -lNCSCnet -lNCSUtil as it needs to be.  My fix is to edit the 
> GDAL configure and change libNCSCnet.so to libNCSCnet.dylib, instead of 
> linking libecwj2.
> 
> There is another problem that will probably crop up next - the ECW 
> libraries need the Carbon framework, but the version of libtool used by 
> GDAL doesn't pass framework options thru, so you will get some more 
> undefined symbols errors.  In configure, find where it sets 
> CARBON_FRAMEWORK, and change it to:
> 
>   CARBON_FRAMEWORK="-XCClinker framework -XCClinker Carbon"
> 
> 
> On Jan 26, 2006, at 12:55 PM, Armin Burger wrote:
> 
>> Hello
>>
>> I guess that some folks succeeded in compiling GDAL with ECW support 
>> under Max OS X (Tiger).  I tried the combination GDAL 1.3.1 and ECW 
>> SDK 3.3 RC1. After applying the once on this list mentioned small 
>> patch for the SDK it compiled fine.
>>
>> Then GDAL gives an error during the configure script:
>>
>> ...
>> checking for libNCSEcw.so or libecwj2... configure: error: not found 
>> in /usr/local/lib or /usr/local/bin.
>>
>>
>> The libraries of ECW are under /usr/local/lib. I checked the configure 
>> script and just tried a link
>>
>>  /usr/local/libecwj2.dylib -> /usr/local/lib/libNCSEcw.0.0.0.dylib
>>
>> The configure then went on. Also the compilation went quite far. But 
>> somewhere towards the end of the make I get the error
>>
>> ...
>> ld: Undefined symbols:
>> __ZN10CNCSThread10GetCurrentEv
>> __ZN10CNCSThread11EnableStatsEv
>> __ZN10CNCSThread11GetPriorityEv
>> __ZN10CNCSThread11IsSuspendedEv
>> __ZN10CNCSThread11SetPriorityE17NCSThreadPriority
>> __ZN10CNCSThread11ThreadYieldEv
>> __ZN10CNCSThread12DisableStatsEv
>> __ZN10CNCSThread3RunEv
>> __ZN10CNCSThread4ExitEi
>> __ZN10CNCSThread4StopEb
>> __ZN10CNCSThread5GetIDEv
>> __ZN10CNCSThread5SpawnEPvb
>> __ZN10CNCSThread6ResumeEv
>> __ZN10CNCSThread7SuspendEv
>> __ZN10CNCSThread8GetStatsEv
>> __ZN10CNCSThread8GetSysIDEv
>> __ZN10CNCSThread9IsRunningEv
>> __ZN10CNCSThread9TerminateEv
>> __ZN9CNCSError15GetErrorMessageEPcz
>> __ZN9CNCSErrorC1E8NCSErrorPciN7CNCSLog11NCSLogLevelEPKc
>> __ZN9CNCSErrorC1ERKS_
>> __ZN9CNCSErrorD1Ev
>> __ZN9CNCSErroraSERKS_
>> _NCSGetErrorText
>> /usr/bin/libtool: internal link edit command failed
>> make[1]: *** [libgdal.la] Error 1
>> make: *** [check-lib] Error 2
>>
>>
>> Does anybody have a clue what this could mean?
>>
>> I set the LD_LIBRARY_PATH and LD_INCLUDE_PATH to all directories where 
>> I think it was needed.
>>
>> Thanks for any help,
>>
>> Armin
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
> 
> "Oh, look, I seem to have fallen down a deep, dark hole.  Now what does 
> that remind me of?  Ah, yes - life."
> 
> - Marvin
> 
> 

From pgao at esri.com  Thu Jan 26 16:49:38 2006
From: pgao at esri.com (Peng Gao)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ECW SDK licensing
Message-ID: <54808B311D66EB4E9CF4647B0DE707C20309DC34@firewire.esri.com>

I can see the licensing agreements for public use, free and commercial
non-server
use. Is there an agreement for commercial server use?

Gao, Peng


From matt.wilkie at gov.yk.ca  Thu Jan 26 17:18:44 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal_merge invalid literal for int(): -3.40282e+038
Message-ID: <43D94AC4.4050408@gov.yk.ca>

Hi, I'm trying to use gdal_merge to mosiack some dems, but how do I get 
it to ignore a float32 nodata number?

gdlainfo says "NoData Value=-3.40282e+038" but when I try and use it 
gdal_merge pukes:

gdal_merge -o d:\scratch\merged.tif dem1 dem2 -n -3.40282e+038

Traceback (most recent call last):
   File "c:\local\fwtools\bin\gdal_merge.py", line 362, in ?
     nodata = int(argv[i])
ValueError: invalid literal for int(): -3.40282e+038

thanks!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From bryan at geomega.com  Thu Jan 26 17:49:34 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal_merge invalid literal for int(): -3.40282e+038
In-Reply-To: <43D94AC4.4050408@gov.yk.ca>
References: <43D94AC4.4050408@gov.yk.ca>
Message-ID: <43D951FE.6080200@geomega.com>

Matt,

I was having some problems with gdal and no data values of 
-3.40282e+038.  I think I had the problem with gdal_contour so I had a 
sequence like this:

gdalwarp -t_srs UTMNAD83Z13m.wkt -tr 30 30 -srcnodata 
-340282346638528860000000000000000000000.000 -dstnodata -99999 -rb 
t57r83_g t57r83_g.tif

gdal_contour -a elevation -snodata -99999 -i 10 t57r83_g.tif t57r83_ln.shp

I also see that later in my batch file I used this syntax with gdal_merge:

gdal_merge -o shpodft.tif -ul_lr 1149856.82 16290955.21 1176503.90 
16266648.39 -n -340282346638528860000000000000000000000 t56r83_g t55r83_g

I realize this is more of a work-around than a good solution.  I'm not 
sure where I came up with so much precision for the -3.40282e+038 value.

Bryan

Bryan Keith
GIS Specialist
Geomega, Inc.
Boulder, CO, USA

Matt Wilkie wrote:

> Hi, I'm trying to use gdal_merge to mosiack some dems, but how do I 
> get it to ignore a float32 nodata number?
>
> gdlainfo says "NoData Value=-3.40282e+038" but when I try and use it 
> gdal_merge pukes:
>
> gdal_merge -o d:\scratch\merged.tif dem1 dem2 -n -3.40282e+038
>
> Traceback (most recent call last):
>   File "c:\local\fwtools\bin\gdal_merge.py", line 362, in ?
>     nodata = int(argv[i])
> ValueError: invalid literal for int(): -3.40282e+038
>
> thanks!
>

From warmerdam at pobox.com  Thu Jan 26 18:41:17 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal_merge invalid literal for int(): -3.40282e+038
In-Reply-To: <43D94AC4.4050408@gov.yk.ca>
References: <43D94AC4.4050408@gov.yk.ca>
Message-ID: <931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>

On 1/26/06, Matt Wilkie <matt.wilkie@gov.yk.ca> wrote:
> Hi, I'm trying to use gdal_merge to mosiack some dems, but how do I get
> it to ignore a float32 nodata number?
>
> gdlainfo says "NoData Value=-3.40282e+038" but when I try and use it
> gdal_merge pukes:
>
> gdal_merge -o d:\scratch\merged.tif dem1 dem2 -n -3.40282e+038
>
> Traceback (most recent call last):
>    File "c:\local\fwtools\bin\gdal_merge.py", line 362, in ?
>      nodata = int(argv[i])
> ValueError: invalid literal for int(): -3.40282e+038

Matt,

Please change the above line to "nodata = float(argv[i])"
and see if that works better.

I have committed this change in CVS.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jarrett_l_redd at yahoo.com  Fri Jan 27 03:59:35 2006
From: jarrett_l_redd at yahoo.com (Jarrett L. Redd)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Dataset mismatch?
Message-ID: <20060127085936.48496.qmail@web35604.mail.mud.yahoo.com>

Howdy...

Please forgive the long cross-posting.  I'm new to this and don't know exactly
who will have a possible answer for this issue of mine.

I'm a volunteer working on a avalanche terrain and runout mapping project for
potential use by our mountain search and rescue teams.  I'm using DRG 24k
topographical geotiff slices in UTM NAD27 and then processing 1/3 arc-sec
elevation .adf files in lat/lon NAD83 to match up and plot slopes and such. 
All this is downloaded from the NED seamless website.

Problem is, the two data sets don't match up precisely.  That is, the features
on the topo seem to match up precisely with elevation data in some places and
not so precisely in others.  At the worst, the error is around 500 feet.  I'm
using "libproj" to convert coordinates between the two datums.  I'm currently
processing a section of Colorado, and I'm building "libproj" to include the
"conus" correction file.  I've also verified my coordinate conversions are
correct by comparing against openEV and topoUSA.  I'm also using "libgdal" to
pull out the elevation data and "libgeotiff" to grab the image raster data and
geo tags.

However, like I said, I'm new to this.  I'm converting the NW and SE corners of
the geotiff into NAD83 and then interpolating for each pixel to match up with
the elevation data using the origin and resolution of the various elevation
pieces.  I have a sneaky feeling that life isn't that simple.  Am I missing
some fancy projection to correct for curvature of the earth or something?  Or
is this just an inherent mismatch between the data sets?  Or both?  Other
suggestions to try?

Please don't suggest using a commercially available mapping package since we
have no money and I need to do very extensive data processing once I have the
data sets matching up properly.

Thanks.

-Jarrett

P.S.  Here's an example of a nearly 500 foot mismatch error:

A tiny rock spire on the topo map:
13 0394704 4334970

And the corresponding spike in elevation data:
13 0394571 4335039

[Coords provided by OpenEV cursor]

I don't expect a perfect matchup, but the worst areas need to be corrected
somehow to make the avalanche terrain maps useful.

I can email an example image showing the error if someone is really interested.

Thanks again.


From marc.jacquin at magellium.fr  Fri Jan 27 05:59:09 2006
From: marc.jacquin at magellium.fr (Marc Jacquin)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <200601271059.k0RAxT6L000893@smtp1.clb.oleane.net>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 3588 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/43acc3a3/attachment.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/jpeg
Size: 2885 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/43acc3a3/attachment.jpe
From DCarreira at edia.pt  Fri Jan 27 07:44:40 2006
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] arcsde raster datasets
Message-ID: <94C0F903807262438796839A98A9BA50C2F97D@beja001.edia.pt>

I'm searching for a way to export portions (clips) of arcsde raster
datasets.
Can GDAL read this format or are there any plugins available?
 
Thank you.
Duarte Carreira
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/e8282dcb/attachment.html
From andreas.fischer at kreis-unna.de  Fri Jan 27 07:53:53 2006
From: andreas.fischer at kreis-unna.de (Fischer, Andreas)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ogr2ogr convert PostGIS-data to MapInfo TAB/ MIF-Files 
Message-ID: <A45C4BB6E895D711BD5A002035847D4D6D5315@NTKU4>

Hello,
a couple of weeks ago we had an issue about problems converting PostGis-data
to MapInfo TAB or MIF-files using ogr2ogr. 
You will find the description of the problem under
http://bugzilla.maptools.org/show_bug.cgi?id=1198. 
Can anyone let me know, if this problem is considered to be fixed? 
I Would be glad to hear from you.
Thanks so far
Regards
Andreas Fischer

Kreis Unna
Dezernat III - Projektteam GIS
Platanenallee 16
59425 Unna

(02303) 27-2507
andreas.fischer@kreis-unna.de


From jorn at spacetec.no  Fri Jan 27 08:02:32 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ogr2ogr more GML 3.1 compatible
Message-ID: <200601271402.32636.jorn@spacetec.no>

Hi,

I'm continuing my experiments with ogr2ogr and GML.

GML 3.1 is not using gml:coordinates anymore (deprecated)
Instead is this used in GML 3.1:
<gml:pos>17.0 69.0</gml:pos>
Unfortunately isn't this supported by ogr2ogr. Could this be implemented soon?

Another thing I notice is that only direct childs of the <feature> element is 
extracted to PostGIS. Is it possible to implement so that all childs and 
sub-elements are extracted?

cheers
Joenrn

From warmerdam at pobox.com  Fri Jan 27 08:04:13 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] arcsde raster datasets
In-Reply-To: <94C0F903807262438796839A98A9BA50C2F97D@beja001.edia.pt>
References: <94C0F903807262438796839A98A9BA50C2F97D@beja001.edia.pt>
Message-ID: <931f8ea90601270504r416f1c91p1a0584ab99c6a66d@mail.gmail.com>

On 1/27/06, Duarte Carreira <DCarreira@edia.pt> wrote:
>
> I'm searching for a way to export portions (clips) of arcsde raster
> datasets.
> Can GDAL read this format or are there any plugins available?

Duarte,

GDAL does not support direct access to ArcSDE rasters at this
time.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 27 09:03:07 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ogr2ogr more GML 3.1 compatible
In-Reply-To: <200601271402.32636.jorn@spacetec.no>
References: <200601271402.32636.jorn@spacetec.no>
Message-ID: <931f8ea90601270603x6e7d18e4xa0e3f750d3effc50@mail.gmail.com>

On 1/27/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> Hi,
>
> I'm continuing my experiments with ogr2ogr and GML.
>
> GML 3.1 is not using gml:coordinates anymore (deprecated)
> Instead is this used in GML 3.1:
> <gml:pos>17.0 69.0</gml:pos>
> Unfortunately isn't this supported by ogr2ogr. Could this be implemented soon?

J?rn,

I wouldn't mind doing this.  Please submit a bugreport against OGR
with an example of a GML 3.1 file that you think would work if the
gml:pos handling was added.  I will attempt to add it in the fairly
near future.

> Another thing I notice is that only direct childs of the <feature> element is
> extracted to PostGIS. Is it possible to implement so that all childs and
> sub-elements are extracted?

This is possible, but I have avoided it in the past due to the
complexity.  I am assuming that nested elements would be
treated as having unrolled column names?

so
<date>
  <year>2005</year>
  <month>December</month>
  <day>25</day>
</date>

would appear in the result as attributes:
date_year: 2005
date_month: December
date_day: 25

Does that seem reasonable?  Please file a separate bug
report with this suggestion but I don't have any plans to
do it in the near term.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 27 09:09:46 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] (no subject)
In-Reply-To: <200601271059.k0RAxT6L000893@smtp1.clb.oleane.net>
References: <200601271059.k0RAxT6L000893@smtp1.clb.oleane.net>
Message-ID: <931f8ea90601270609w7d319ff6h50ab8797d5fc7a4c@mail.gmail.com>

On 1/27/06, Marc Jacquin <marc.jacquin@magellium.fr> wrote:
> I am trying to use ogr2ogr to export a layer from PostGis to MapInfo file (in fact I was testing the shapefile output).
>
> The command line I am using looks like :
>
> ogr2ogr -f "ESRI Shapefile" country PG:"user=xxx dbname=postgres host=localhost port=5432 password=xxxx"  country.shp

Marc,

I'm not exactly sure why there is no error, but your request
above is really asking for country.shp to be translate into
shapefile format and put in your postgis database.

To dump the table country from postgres to shape you would use:

ogr2ogr country.shp PG:"user=..." country

To dump to mapinfo format you would do:

ogr2ogr country.mif PG:"user=..." country

The key is:

 ogr2ogr -f format <dest> <source> layernames...

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 27 09:31:41 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Re: ogr2ogr convert PostGIS-data to MapInfo TAB/
	MIF-Files
In-Reply-To: <A45C4BB6E895D711BD5A002035847D4D6D5315@NTKU4>
References: <A45C4BB6E895D711BD5A002035847D4D6D5315@NTKU4>
Message-ID: <931f8ea90601270631s519a6b33r757a912149483f4b@mail.gmail.com>

On 1/27/06, Fischer, Andreas <andreas.fischer@kreis-unna.de> wrote:
> Hello,
> a couple of weeks ago we had an issue about problems converting PostGis-data
> to MapInfo TAB or MIF-files using ogr2ogr.
> You will find the description of the problem under
> http://bugzilla.maptools.org/show_bug.cgi?id=1198.
> Can anyone let me know, if this problem is considered to be fixed?
> I Would be glad to hear from you.

Andreas,

With your prompting I have dug into this and fixed it in CVS.
Let me know if you have further problems.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Fri Jan 27 09:40:47 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Dataset mismatch?
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD855@ptolemy.topozone.com>

Jarrett -

I looked at both of your coordinates on TopoZone, and - assuming that
I'm identifying the "tiny rock spire" correctly, neither one of those
coordinates seems to be correct.

Assuming the coordinates you list below are NAD83, here is the "topo
map" location:

http://www.topozone.com/map.asp?z=13&e=394704&n=4334970&datum=NAD83&u=4

And here is the "elevation spike" location:

http://www.topozone.com/map.asp?z=13&e=394571&n=4335039&datum=NAD83&u=4 

Using the USGS NED data, I find a local elevation maximum of 11,999.8
feet at UTM 13 394644E 4335185N (NAD83), which corresponds quite well
with the location of the little "ring" on the topo map you can see in
both the links above.

Perhaps if you could give us the data you're using and walk through the
process showing intermediate results we can help diagnose the
problem(s).

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Jarrett L.
Redd
Sent: Friday, January 27, 2006 4:00 AM
To: gdal-dev@lists.maptools.org; proj@lists.maptools.org;
geotiff@lists.maptools.org
Subject: [Gdal-dev] Dataset mismatch?

Howdy...

Please forgive the long cross-posting.  I'm new to this and don't know
exactly who will have a possible answer for this issue of mine.

I'm a volunteer working on a avalanche terrain and runout mapping
project for potential use by our mountain search and rescue teams.  I'm
using DRG 24k topographical geotiff slices in UTM NAD27 and then
processing 1/3 arc-sec elevation .adf files in lat/lon NAD83 to match up
and plot slopes and such. 
All this is downloaded from the NED seamless website.

Problem is, the two data sets don't match up precisely.  That is, the
features on the topo seem to match up precisely with elevation data in
some places and not so precisely in others.  At the worst, the error is
around 500 feet.  I'm using "libproj" to convert coordinates between the
two datums.  I'm currently processing a section of Colorado, and I'm
building "libproj" to include the "conus" correction file.  I've also
verified my coordinate conversions are correct by comparing against
openEV and topoUSA.  I'm also using "libgdal" to pull out the elevation
data and "libgeotiff" to grab the image raster data and geo tags.

However, like I said, I'm new to this.  I'm converting the NW and SE
corners of the geotiff into NAD83 and then interpolating for each pixel
to match up with the elevation data using the origin and resolution of
the various elevation pieces.  I have a sneaky feeling that life isn't
that simple.  Am I missing some fancy projection to correct for
curvature of the earth or something?  Or is this just an inherent
mismatch between the data sets?  Or both?  Other suggestions to try?

Please don't suggest using a commercially available mapping package
since we have no money and I need to do very extensive data processing
once I have the data sets matching up properly.

Thanks.

-Jarrett

P.S.  Here's an example of a nearly 500 foot mismatch error:

A tiny rock spire on the topo map:
13 0394704 4334970

And the corresponding spike in elevation data:
13 0394571 4335039

[Coords provided by OpenEV cursor]

I don't expect a perfect matchup, but the worst areas need to be
corrected somehow to make the avalanche terrain maps useful.

I can email an example image showing the error if someone is really
interested.

Thanks again.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From jorn at spacetec.no  Fri Jan 27 11:15:02 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ogr2ogr more GML 3.1 compatible
In-Reply-To: <931f8ea90601270603x6e7d18e4xa0e3f750d3effc50@mail.gmail.com>
References: <200601271402.32636.jorn@spacetec.no>
	<931f8ea90601270603x6e7d18e4xa0e3f750d3effc50@mail.gmail.com>
Message-ID: <200601271715.02355.jorn@spacetec.no>

On Friday 27 January 2006 15:03, Frank Warmerdam wrote:
> On 1/27/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> > Hi,
> >
> > I'm continuing my experiments with ogr2ogr and GML.
> >
> > GML 3.1 is not using gml:coordinates anymore (deprecated)
> > Instead is this used in GML 3.1:
> > <gml:pos>17.0 69.0</gml:pos>
> > Unfortunately isn't this supported by ogr2ogr. Could this be implemented
> > soon?
>
> J?rn,
>
> I wouldn't mind doing this.  Please submit a bugreport against OGR
> with an example of a GML 3.1 file that you think would work if the
> gml:pos handling was added.  I will attempt to add it in the fairly
> near future.
>
Filed in bugzilla.

> > Another thing I notice is that only direct childs of the <feature>
> > element is extracted to PostGIS. Is it possible to implement so that all
> > childs and sub-elements are extracted?
>
> This is possible, but I have avoided it in the past due to the
> complexity.  I am assuming that nested elements would be
> treated as having unrolled column names?
>
> so
> <date>
>   <year>2005</year>
>   <month>December</month>
>   <day>25</day>
> </date>
>
> would appear in the result as attributes:
> date_year: 2005
> date_month: December
> date_day: 25
>
> Does that seem reasonable?  Please file a separate bug
> report with this suggestion but I don't have any plans to
> do it in the near term.
>
Sounds reasonable, may introduce some issues if element name contains 
underscore.
Another solution is to have XML subelements as separate tables with foreign 
keys, for example:

<gml:featureMember>
                <ais:feature>
                        <ais:MMSI>123456</ais:MMSI>
                        <ais:callsign>"CallMe"</ais:callsign>
                        <ais:name>"MS Ship</ais:name>
                        <ais:IMONumber>65432d1</ais:IMONumber>
                        <ais:length>75.3</ais:length>
                        <ais:beam>35.</ais:beam>
                        <ais:wesselType>cargo</ais:wesselType>
                        <ais:antennaLocation>aft of bow</ais:antennaLocation>
                        <ais:draught>3.2</ais:draught>
                        <ais:hazardousCargo>none</ais:hazardousCargo>
                        <ais:destination>Rotterdam</ais:destination>
                        <ais:expectedTimeOfArrival>2005-08-13T15:00:00</ais:expectedTimeOfArrival>
                        <ais:extraInfo>none</ais:extraInfo>
                        <ais:trackProperty>
                                <ais:track>
                                        <ais:objectStatus>
                                                <gml:pos 
srsName="LL-WGS84">17.0 69.0</gml:pos>
                                                <ais:time>2005-08-13T04:37:15</ais:time>
                                                <ais:speedOverGround>11.</ais:speedOverGround>
                                                <ais:courseOverGround>17.3</ais:courseOverGround>
                                                <ais:heading>16.0</ais:heading>
                                                <ais:bearing>15.3</ais:bearing>
                                                <ais:rateOfTurn>2.14</ais:rateOfTurn>
                                                <ais:navigationalStatus>underway</ais:navigationalStatus>
                                                <ais:safetyMessage>none</ais:safetyMessage>
                                                <ais:dataSource>AIS transp. 
sys. x</ais:dataSource>
                                        </ais:objectStatus>
                                        <ais:objectStatus>
                                                <gml:pos>17.5 69.5</gml:pos>
                                                <ais:time>2005-08-13T04:38:00</ais:time>
                                                <ais:speedOverGround>11.</ais:speedOverGround>
                                                <ais:courseOverGround>17.3</ais:courseOverGround>
                                        </ais:objectStatus>
                                </ais:track>
                        </ais:trackProperty>
                        <ais:time>1967-08-13T17:39:15</ais:time>
                        <ais:dataSource>Kystverket</ais:dataSource>
                        </ais:feature>
        </gml:featureMember>

would in PostGIS result in the following tables:
ais:feature
ais:trackProperty with foreign key (fk) to ais:feature
ais:track with fk to ais:trackPropery
ais:objectStatus with fk to ais:track


If someone has ideas how to redesign this XML I would appreciate it. The XML 
is a response to a AIS query (WFS or DB),  with one static part (ship info) 
and one dynamic part (ship tracking info).

cheers
Joern
Have a nice weekend!

From warmerdam at pobox.com  Fri Jan 27 11:51:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ogr2ogr more GML 3.1 compatible
In-Reply-To: <200601271715.02355.jorn@spacetec.no>
References: <200601271402.32636.jorn@spacetec.no>
	<931f8ea90601270603x6e7d18e4xa0e3f750d3effc50@mail.gmail.com>
	<200601271715.02355.jorn@spacetec.no>
Message-ID: <931f8ea90601270851p46dfa330qf39bf2cbba7f6389@mail.gmail.com>

On 1/27/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> Sounds reasonable, may introduce some issues if element name contains
> underscore.
> Another solution is to have XML subelements as separate tables with foreign
> keys, for example:
>
> <gml:featureMember>
>                 <ais:feature>
>                         <ais:MMSI>123456</ais:MMSI>
>                         <ais:callsign>"CallMe"</ais:callsign>
>                         <ais:name>"MS Ship</ais:name>
>                         <ais:IMONumber>65432d1</ais:IMONumber>
>                         <ais:length>75.3</ais:length>
>                         <ais:beam>35.</ais:beam>
>                         <ais:wesselType>cargo</ais:wesselType>
>                         <ais:antennaLocation>aft of bow</ais:antennaLocation>
>                         <ais:draught>3.2</ais:draught>
>                         <ais:hazardousCargo>none</ais:hazardousCargo>
>                         <ais:destination>Rotterdam</ais:destination>
>                         <ais:expectedTimeOfArrival>2005-08-13T15:00:00</ais:expectedTimeOfArrival>
>                         <ais:extraInfo>none</ais:extraInfo>
>                         <ais:trackProperty>
>                                 <ais:track>
>                                         <ais:objectStatus>
>                                                 <gml:pos
> srsName="LL-WGS84">17.0 69.0</gml:pos>
>                                                 <ais:time>2005-08-13T04:37:15</ais:time>
>                                                 <ais:speedOverGround>11.</ais:speedOverGround>
>                                                 <ais:courseOverGround>17.3</ais:courseOverGround>
>                                                 <ais:heading>16.0</ais:heading>
>                                                 <ais:bearing>15.3</ais:bearing>
>                                                 <ais:rateOfTurn>2.14</ais:rateOfTurn>
>                                                 <ais:navigationalStatus>underway</ais:navigationalStatus>
>                                                 <ais:safetyMessage>none</ais:safetyMessage>
>                                                 <ais:dataSource>AIS transp.
> sys. x</ais:dataSource>
>                                         </ais:objectStatus>
>                                         <ais:objectStatus>
>                                                 <gml:pos>17.5 69.5</gml:pos>
>                                                 <ais:time>2005-08-13T04:38:00</ais:time>
>                                                 <ais:speedOverGround>11.</ais:speedOverGround>
>                                                 <ais:courseOverGround>17.3</ais:courseOverGround>
>                                         </ais:objectStatus>
>                                 </ais:track>
>                         </ais:trackProperty>
>                         <ais:time>1967-08-13T17:39:15</ais:time>
>                         <ais:dataSource>Kystverket</ais:dataSource>
>                         </ais:feature>
>         </gml:featureMember>
>
> would in PostGIS result in the following tables:
> ais:feature
> ais:trackProperty with foreign key (fk) to ais:feature
> ais:track with fk to ais:trackPropery
> ais:objectStatus with fk to ais:track

J?rn,

This is certainly the sort of complexity I *don't* want to
try and address.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Fri Jan 27 13:29:26 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] RE: [Proj] Dataset mismatch?
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD85F@ptolemy.topozone.com>

Mike -
 
Yes, the USGS used thousands of points, but they needed to cover the
whole country!  For CONUS that's around 50,000 quads worth.  We're only
talking about one quad that's only about 10 x 15 kilometers.  If the NGS
used 400 points per quad they would have needed over 20 million points.
 
I took a look at the Mount Sherman, CO quad that is the subject of the
original post.  The northwest corner of that quad is at 392131E 4345059N
(NAD27) and 392084E 4345267N (NAD83).  The NAD27 -> NAD83 datum shift at
that point is (-47E, +208N).  If I go to the southeast corner of that
quad, the coordinates are 402746E 4331044N (NAD27) and 402699E 4331252N
(NAD93).  The NAD27 -> NAD83 datum shift at that opposite corner is
(-47E, +208N) - identical to the datum shift at the opposite corner!  I
cannot imagine one would require 400 intermediate control points to
accurately calculate a datum shift across an area the size of a
7.5-minute quad - especially when the shift at opposite corners is the
same.  You might, I suppose, manage to get off by a meter or two, but
since a single pixel on a 1:24K DRG is 2.4384 meters on a side, you're
literally below the threshold of precision on the data.
 
Jarrett's seeing discrepancies of hundreds of meters.  Even if you
measured only one point and presumed the datum shift was identical
across the entire quad, you couldn't produce an error that large.
 
     - Ed
 
Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

 
 
 

________________________________

From: proj-bounces@lists.maptools.org
[mailto:proj-bounces@lists.maptools.org] On Behalf Of Michael P Finn
Sent: Friday, January 27, 2006 12:52 PM
To: PROJ.4 and general Projections Discussions
Cc: geotiff@lists.maptools.org; proj@lists.maptools.org;
gdal-dev@lists.maptools.org; proj-bounces@lists.maptools.org
Subject: Re: [Proj] Dataset mismatch?



>From my colleague Lynn Usery (USGS/ Geospatial Information Office).
Mike Finn 




Using 2 points is not sufficient. The user should use a grid of at least

20 x 20 points (400 total points) over the quad. Transform those between

the datums and resample the pixels based on this approach. This is a 
simple operation in Imagine which automatically locates the control 
points then applies the datum tranformation, interpolates and resamples 
the data. Of course Jarrett said no commercial software, so he must find

a way to implement this process with open source code.

To perform the datum transformation, two points is just not enough to 
handle the differences between the two datums. NGS used thousands of 
points in the transformation to determine the NADCON shifts between NAD 
27 and NAD 83 for the US.

Lynn 





"Jarrett L. Redd" <jarrett_l_redd@yahoo.com> 
Sent by: proj-bounces@lists.maptools.org 

01/27/2006 02:59 AM 
Please respond to
"PROJ.4 and general Projections Discussions"
<proj@lists.maptools.org>


To
gdal-dev@lists.maptools.org, proj@lists.maptools.org,
geotiff@lists.maptools.org 
cc
Subject
[Proj] Dataset mismatch?

	




Howdy...

Please forgive the long cross-posting.  I'm new to this and don't know
exactly
who will have a possible answer for this issue of mine.

I'm a volunteer working on a avalanche terrain and runout mapping
project for
potential use by our mountain search and rescue teams.  I'm using DRG
24k
topographical geotiff slices in UTM NAD27 and then processing 1/3
arc-sec
elevation .adf files in lat/lon NAD83 to match up and plot slopes and
such. 
All this is downloaded from the NED seamless website.

Problem is, the two data sets don't match up precisely.  That is, the
features
on the topo seem to match up precisely with elevation data in some
places and
not so precisely in others.  At the worst, the error is around 500 feet.
I'm
using "libproj" to convert coordinates between the two datums.  I'm
currently
processing a section of Colorado, and I'm building "libproj" to include
the
"conus" correction file.  I've also verified my coordinate conversions
are
correct by comparing against openEV and topoUSA.  I'm also using
"libgdal" to
pull out the elevation data and "libgeotiff" to grab the image raster
data and
geo tags.

However, like I said, I'm new to this.  I'm converting the NW and SE
corners of
the geotiff into NAD83 and then interpolating for each pixel to match up
with
the elevation data using the origin and resolution of the various
elevation
pieces.  I have a sneaky feeling that life isn't that simple.  Am I
missing
some fancy projection to correct for curvature of the earth or
something?  Or
is this just an inherent mismatch between the data sets?  Or both?
Other
suggestions to try?

Please don't suggest using a commercially available mapping package
since we
have no money and I need to do very extensive data processing once I
have the
data sets matching up properly.

Thanks.

-Jarrett

P.S.  Here's an example of a nearly 500 foot mismatch error:

A tiny rock spire on the topo map:
13 0394704 4334970

And the corresponding spike in elevation data:
13 0394571 4335039

[Coords provided by OpenEV cursor]

I don't expect a perfect matchup, but the worst areas need to be
corrected
somehow to make the avalanche terrain maps useful.

I can email an example image showing the error if someone is really
interested.

Thanks again.

_______________________________________________
Proj mailing list
Proj@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/4f7a3caf/attachment.html
From cplist at earthlink.net  Fri Jan 27 13:30:28 2006
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] filtering on an OGRVRTDataSource
Message-ID: <04fe01c6236f$bfed9bc0$0200a8c1@latitude>

Hi, folks:

Can I do any type of filtering on a OGRVRTDataSource?  Specifically, I'm
looking to stick something into a MapServer FILTER string that would look
something like:

FILTER "WHERE lon % 5 = 0 and lat % 5 = 0"

Where the '%' is mod.  Basically, give me every 5DD value.

I just pinged the MS folks to see if I could add the % functionality to the
EXPRESSION string, but it would be nicer to get OGR to do it before shipping
the result set to MS.

Thanks,

Charlton

    CONNECTIONTYPE OGR
    CONNECTION "<OGRVRTDataSource>
        <OGRVRTLayer name=blah_blah_dir_Zref'>
          <SrcDataSource>blah_blah_dir_Zref.csv</SrcDataSource> 
            <GeometryType>wkbPoint</GeometryType>
            <GeometryField encoding='PointFromColumns' x='lon' y='lat'/>
          </OGRVRTLayer>
      </OGRVRTDataSource>"





From jarrett_l_redd at yahoo.com  Fri Jan 27 13:53:05 2006
From: jarrett_l_redd at yahoo.com (Jarrett L. Redd)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Dataset mismatch?
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD855@ptolemy.topozone.com>
Message-ID: <20060127185305.36831.qmail@web35602.mail.mud.yahoo.com>

Howdy, Ed...

Thanks for the response.  Sorry, I didn't specify that the coords I gave for
the rock spire are in NAD27.  I checked with topozone and it seems to match up
for that datum.

However, I think I may have found part of my problem.  I need to find the NAD83
coords for each pixel in the geotiff to match it up with the elevation data. 
To do this, I was linearly interpolating from the NW/SE corner coords.  This
seems to be the source of the error.  When I switch to using GTIFImageToPCS to
go from pixels to NAD27 UTM, then "libproj" to go from NAD27 to NAD83, I get a
pretty good match.  However, this is very slow, so I guess I'll still
interpolate, but over smaller regions.

However, once I have the pixel coords, I have to figure out the associated
elevation value.  I don't see any other way to do this but to interpolate from
the provided origin and lat/lon pixel resolutions in the ADF file.  Is this the
proper way?

Thanks.

-Jarrett

--- Ed McNierney <ed@topozone.com> wrote:

> Jarrett -
> 
> I looked at both of your coordinates on TopoZone, and - assuming that
> I'm identifying the "tiny rock spire" correctly, neither one of those
> coordinates seems to be correct.
> 
> Assuming the coordinates you list below are NAD83, here is the "topo
> map" location:
> 
> http://www.topozone.com/map.asp?z=13&e=394704&n=4334970&datum=NAD83&u=4
> 
> And here is the "elevation spike" location:
> 
> http://www.topozone.com/map.asp?z=13&e=394571&n=4335039&datum=NAD83&u=4 
> 
> Using the USGS NED data, I find a local elevation maximum of 11,999.8
> feet at UTM 13 394644E 4335185N (NAD83), which corresponds quite well
> with the location of the little "ring" on the topo map you can see in
> both the links above.
> 
> Perhaps if you could give us the data you're using and walk through the
> process showing intermediate results we can help diagnose the
> problem(s).
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> ed@topozone.com
> (978) 251-4242 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Jarrett L.
> Redd
> Sent: Friday, January 27, 2006 4:00 AM
> To: gdal-dev@lists.maptools.org; proj@lists.maptools.org;
> geotiff@lists.maptools.org
> Subject: [Gdal-dev] Dataset mismatch?
> 
> Howdy...
> 
> Please forgive the long cross-posting.  I'm new to this and don't know
> exactly who will have a possible answer for this issue of mine.
> 
> I'm a volunteer working on a avalanche terrain and runout mapping
> project for potential use by our mountain search and rescue teams.  I'm
> using DRG 24k topographical geotiff slices in UTM NAD27 and then
> processing 1/3 arc-sec elevation .adf files in lat/lon NAD83 to match up
> and plot slopes and such. 
> All this is downloaded from the NED seamless website.
> 
> Problem is, the two data sets don't match up precisely.  That is, the
> features on the topo seem to match up precisely with elevation data in
> some places and not so precisely in others.  At the worst, the error is
> around 500 feet.  I'm using "libproj" to convert coordinates between the
> two datums.  I'm currently processing a section of Colorado, and I'm
> building "libproj" to include the "conus" correction file.  I've also
> verified my coordinate conversions are correct by comparing against
> openEV and topoUSA.  I'm also using "libgdal" to pull out the elevation
> data and "libgeotiff" to grab the image raster data and geo tags.
> 
> However, like I said, I'm new to this.  I'm converting the NW and SE
> corners of the geotiff into NAD83 and then interpolating for each pixel
> to match up with the elevation data using the origin and resolution of
> the various elevation pieces.  I have a sneaky feeling that life isn't
> that simple.  Am I missing some fancy projection to correct for
> curvature of the earth or something?  Or is this just an inherent
> mismatch between the data sets?  Or both?  Other suggestions to try?
> 
> Please don't suggest using a commercially available mapping package
> since we have no money and I need to do very extensive data processing
> once I have the data sets matching up properly.
> 
> Thanks.
> 
> -Jarrett
> 
> P.S.  Here's an example of a nearly 500 foot mismatch error:
> 
> A tiny rock spire on the topo map:
> 13 0394704 4334970
> 
> And the corresponding spike in elevation data:
> 13 0394571 4335039
> 
> [Coords provided by OpenEV cursor]
> 
> I don't expect a perfect matchup, but the worst areas need to be
> corrected somehow to make the avalanche terrain maps useful.
> 
> I can email an example image showing the error if someone is really
> interested.
> 
> Thanks again.
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From jarrett_l_redd at yahoo.com  Fri Jan 27 14:03:20 2006
From: jarrett_l_redd at yahoo.com (Jarrett L. Redd)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] RE: [Proj] Dataset mismatch?
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD85F@ptolemy.topozone.com>
Message-ID: <20060127190320.30855.qmail@web35608.mail.mud.yahoo.com>

Sorry... saw these messages after my previous response.  Believe it or not,
this seems to be the problem.  I had my suspicions that it was a non-linear
problem associated with the datum conversion, and when I did the conversion,
the error goes away (mostly).  I didn't bother at first because I also believed
it was too small an area to show such an error.  I guess not!  By the way, it
may not be possible to answer this question, but I thought I'd try anyway: 
anyone know what maximum error mismatch to expect due to the datasets
themselves?  I'm seeing 50 feet in various areas, and occasionally up to 150
feet (in narrow canyons, etc).  Perhaps I still have a problem somewhere.

Thanks.

-Jarrett

--- Ed McNierney <ed@topozone.com> wrote:

> Mike -
>  
> Yes, the USGS used thousands of points, but they needed to cover the
> whole country!  For CONUS that's around 50,000 quads worth.  We're only
> talking about one quad that's only about 10 x 15 kilometers.  If the NGS
> used 400 points per quad they would have needed over 20 million points.
>  
> I took a look at the Mount Sherman, CO quad that is the subject of the
> original post.  The northwest corner of that quad is at 392131E 4345059N
> (NAD27) and 392084E 4345267N (NAD83).  The NAD27 -> NAD83 datum shift at
> that point is (-47E, +208N).  If I go to the southeast corner of that
> quad, the coordinates are 402746E 4331044N (NAD27) and 402699E 4331252N
> (NAD93).  The NAD27 -> NAD83 datum shift at that opposite corner is
> (-47E, +208N) - identical to the datum shift at the opposite corner!  I
> cannot imagine one would require 400 intermediate control points to
> accurately calculate a datum shift across an area the size of a
> 7.5-minute quad - especially when the shift at opposite corners is the
> same.  You might, I suppose, manage to get off by a meter or two, but
> since a single pixel on a 1:24K DRG is 2.4384 meters on a side, you're
> literally below the threshold of precision on the data.
>  
> Jarrett's seeing discrepancies of hundreds of meters.  Even if you
> measured only one point and presumed the datum shift was identical
> across the entire quad, you couldn't produce an error that large.
>  
>      - Ed
>  
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> ed@topozone.com
> (978) 251-4242 
> 
>  
>  
>  
> 
> ________________________________
> 
> From: proj-bounces@lists.maptools.org
> [mailto:proj-bounces@lists.maptools.org] On Behalf Of Michael P Finn
> Sent: Friday, January 27, 2006 12:52 PM
> To: PROJ.4 and general Projections Discussions
> Cc: geotiff@lists.maptools.org; proj@lists.maptools.org;
> gdal-dev@lists.maptools.org; proj-bounces@lists.maptools.org
> Subject: Re: [Proj] Dataset mismatch?
> 
> 
> 
> >From my colleague Lynn Usery (USGS/ Geospatial Information Office).
> Mike Finn 
> 
> 
> 
> 
> Using 2 points is not sufficient. The user should use a grid of at least
> 
> 20 x 20 points (400 total points) over the quad. Transform those between
> 
> the datums and resample the pixels based on this approach. This is a 
> simple operation in Imagine which automatically locates the control 
> points then applies the datum tranformation, interpolates and resamples 
> the data. Of course Jarrett said no commercial software, so he must find
> 
> a way to implement this process with open source code.
> 
> To perform the datum transformation, two points is just not enough to 
> handle the differences between the two datums. NGS used thousands of 
> points in the transformation to determine the NADCON shifts between NAD 
> 27 and NAD 83 for the US.
> 
> Lynn 
> 
> 
> 
> 
> 
> "Jarrett L. Redd" <jarrett_l_redd@yahoo.com> 
> Sent by: proj-bounces@lists.maptools.org 
> 
> 01/27/2006 02:59 AM 
> Please respond to
> "PROJ.4 and general Projections Discussions"
> <proj@lists.maptools.org>
> 
> 
> To
> gdal-dev@lists.maptools.org, proj@lists.maptools.org,
> geotiff@lists.maptools.org 
> cc
> Subject
> [Proj] Dataset mismatch?
> 
> 	
> 
> 
> 
> 
> Howdy...
> 
> Please forgive the long cross-posting.  I'm new to this and don't know
> exactly
> who will have a possible answer for this issue of mine.
> 
> I'm a volunteer working on a avalanche terrain and runout mapping
> project for
> potential use by our mountain search and rescue teams.  I'm using DRG
> 24k
> topographical geotiff slices in UTM NAD27 and then processing 1/3
> arc-sec
> elevation .adf files in lat/lon NAD83 to match up and plot slopes and
> such. 
> All this is downloaded from the NED seamless website.
> 
> Problem is, the two data sets don't match up precisely.  That is, the
> features
> on the topo seem to match up precisely with elevation data in some
> places and
> not so precisely in others.  At the worst, the error is around 500 feet.
> I'm
> using "libproj" to convert coordinates between the two datums.  I'm
> currently
> processing a section of Colorado, and I'm building "libproj" to include
> the
> "conus" correction file.  I've also verified my coordinate conversions
> are
> correct by comparing against openEV and topoUSA.  I'm also using
> "libgdal" to
> pull out the elevation data and "libgeotiff" to grab the image raster
> data and
> geo tags.
> 
> However, like I said, I'm new to this.  I'm converting the NW and SE
> corners of
> the geotiff into NAD83 and then interpolating for each pixel to match up
> with
> the elevation data using the origin and resolution of the various
> elevation
> pieces.  I have a sneaky feeling that life isn't that simple.  Am I
> missing
> some fancy projection to correct for curvature of the earth or
> something?  Or
> is this just an inherent mismatch between the data sets?  Or both?
> Other
> suggestions to try?
> 
> Please don't suggest using a commercially available mapping package
> since we
> have no money and I need to do very extensive data processing once I
> have the
> data sets matching up properly.
> 
> Thanks.
> 
> -Jarrett
> 
> P.S.  Here's an example of a nearly 500 foot mismatch error:
> 
> A tiny rock spire on the topo map:
> 13 0394704 4334970
> 
> And the corresponding spike in elevation data:
> 13 0394571 4335039
> 
> [Coords provided by OpenEV cursor]
> 
> I don't expect a perfect matchup, but the worst areas need to be
> corrected
> somehow to make the avalanche terrain maps useful.
> 
> I can email an example image showing the error if someone is really
> interested.
> 
> Thanks again.
> 
> _______________________________________________
> Proj mailing list
> Proj@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> > _______________________________________________
> Proj mailing list
> Proj@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj


From warmerdam at pobox.com  Fri Jan 27 14:14:02 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] filtering on an OGRVRTDataSource
In-Reply-To: <04fe01c6236f$bfed9bc0$0200a8c1@latitude>
References: <04fe01c6236f$bfed9bc0$0200a8c1@latitude>
Message-ID: <931f8ea90601271114o43f22055taa5f84a93bf4df4@mail.gmail.com>

On 1/27/06, Charlton Purvis <cplist@earthlink.net> wrote:
> Hi, folks:
>
> Can I do any type of filtering on a OGRVRTDataSource?  Specifically, I'm
> looking to stick something into a MapServer FILTER string that would look
> something like:
>
> FILTER "WHERE lon % 5 = 0 and lat % 5 = 0"
>
> Where the '%' is mod.  Basically, give me every 5DD value.
>
> I just pinged the MS folks to see if I could add the % functionality to the
> EXPRESSION string, but it would be nicer to get OGR to do it before shipping
> the result set to MS.

Charlton,

I can see that such capability would be desirable, but it
doesn't existing in OGR at this time, except for cases where
the underlying database supports it.

What would need to be done is to add the evaluation of
mathematical operators to the OGR SQL expression parser
and evaluator.   This would be a substantial effort, and I'm not
planning to do it in the near future.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jan 27 14:15:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Problems with creating EHdr BIL
In-Reply-To: <54808B311D66EB4E9CF4647B0DE707C20160E483@firewire.esri.com>
References: <AcYdJ9XSSAqFJLp5RQuVl7GDAM+49A==>
	<54808B311D66EB4E9CF4647B0DE707C20160E483@firewire.esri.com>
Message-ID: <931f8ea90601271115n4f3c69a9j7e75fc84670ae68d@mail.gmail.com>

On 1/19/06, Peng Gao <pgao@esri.com> wrote:
> We have run some tests on Ehdr, and found two small problems:
>
> - colormap is not persisted
> - NoData value is not persisted

Gao,

I have modified the EHDR driver to support saving color
tables as a .clr file, and saving nodata values in the .hdr
NODATA keyword.  I also added tests of this new
functionality to the EHDR test script.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ed at topozone.com  Fri Jan 27 14:24:09 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] RE: [Proj] Dataset mismatch?
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD863@ptolemy.topozone.com>

Jarrett -

Why do you think it is the problem?  Are you indeed operating at a scale
where you're using two corner points per 7.5-minute quad?  And can you
give examples (with specific coordinates) of where you see substantial
datum shifts on multiple points on a single quad?  I'm skeptical...

Is it possible that the error is in the way you calculate the
interpolated values?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 

-----Original Message-----
From: proj-bounces@lists.maptools.org
[mailto:proj-bounces@lists.maptools.org] On Behalf Of Jarrett L. Redd
Sent: Friday, January 27, 2006 2:03 PM
To: PROJ.4 and general Projections Discussions
Cc: proj-bounces@lists.maptools.org; gdal-dev@lists.maptools.org
Subject: RE: [Proj] Dataset mismatch?

Sorry... saw these messages after my previous response.  Believe it or
not, this seems to be the problem.  I had my suspicions that it was a
non-linear problem associated with the datum conversion, and when I did
the conversion, the error goes away (mostly).  I didn't bother at first
because I also believed it was too small an area to show such an error.
I guess not!  By the way, it may not be possible to answer this
question, but I thought I'd try anyway: 
anyone know what maximum error mismatch to expect due to the datasets
themselves?  I'm seeing 50 feet in various areas, and occasionally up to
150 feet (in narrow canyons, etc).  Perhaps I still have a problem
somewhere.

Thanks.

-Jarrett

--- Ed McNierney <ed@topozone.com> wrote:

> Mike -
>  
> Yes, the USGS used thousands of points, but they needed to cover the 
> whole country!  For CONUS that's around 50,000 quads worth.  We're 
> only talking about one quad that's only about 10 x 15 kilometers.  If 
> the NGS used 400 points per quad they would have needed over 20
million points.
>  
> I took a look at the Mount Sherman, CO quad that is the subject of the

> original post.  The northwest corner of that quad is at 392131E 
> 4345059N
> (NAD27) and 392084E 4345267N (NAD83).  The NAD27 -> NAD83 datum shift 
> at that point is (-47E, +208N).  If I go to the southeast corner of 
> that quad, the coordinates are 402746E 4331044N (NAD27) and 402699E 
> 4331252N (NAD93).  The NAD27 -> NAD83 datum shift at that opposite 
> corner is (-47E, +208N) - identical to the datum shift at the opposite

> corner!  I cannot imagine one would require 400 intermediate control 
> points to accurately calculate a datum shift across an area the size 
> of a 7.5-minute quad - especially when the shift at opposite corners 
> is the same.  You might, I suppose, manage to get off by a meter or 
> two, but since a single pixel on a 1:24K DRG is 2.4384 meters on a 
> side, you're literally below the threshold of precision on the data.
>  
> Jarrett's seeing discrepancies of hundreds of meters.  Even if you 
> measured only one point and presumed the datum shift was identical 
> across the entire quad, you couldn't produce an error that large.
>  
>      - Ed
>  
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> ed@topozone.com
> (978) 251-4242
> 
>  
>  
>  
> 
> ________________________________
> 
> From: proj-bounces@lists.maptools.org
> [mailto:proj-bounces@lists.maptools.org] On Behalf Of Michael P Finn
> Sent: Friday, January 27, 2006 12:52 PM
> To: PROJ.4 and general Projections Discussions
> Cc: geotiff@lists.maptools.org; proj@lists.maptools.org; 
> gdal-dev@lists.maptools.org; proj-bounces@lists.maptools.org
> Subject: Re: [Proj] Dataset mismatch?
> 
> 
> 
> >From my colleague Lynn Usery (USGS/ Geospatial Information Office).
> Mike Finn
> 
> 
> 
> 
> Using 2 points is not sufficient. The user should use a grid of at 
> least
> 
> 20 x 20 points (400 total points) over the quad. Transform those 
> between
> 
> the datums and resample the pixels based on this approach. This is a 
> simple operation in Imagine which automatically locates the control 
> points then applies the datum tranformation, interpolates and 
> resamples the data. Of course Jarrett said no commercial software, so 
> he must find
> 
> a way to implement this process with open source code.
> 
> To perform the datum transformation, two points is just not enough to 
> handle the differences between the two datums. NGS used thousands of 
> points in the transformation to determine the NADCON shifts between 
> NAD
> 27 and NAD 83 for the US.
> 
> Lynn
> 
> 
> 
> 
> 
> "Jarrett L. Redd" <jarrett_l_redd@yahoo.com> Sent by: 
> proj-bounces@lists.maptools.org
> 
> 01/27/2006 02:59 AM
> Please respond to
> "PROJ.4 and general Projections Discussions"
> <proj@lists.maptools.org>
> 
> 
> To
> gdal-dev@lists.maptools.org, proj@lists.maptools.org, 
> geotiff@lists.maptools.org cc Subject [Proj] Dataset mismatch?
> 
> 	
> 
> 
> 
> 
> Howdy...
> 
> Please forgive the long cross-posting.  I'm new to this and don't know

> exactly who will have a possible answer for this issue of mine.
> 
> I'm a volunteer working on a avalanche terrain and runout mapping 
> project for potential use by our mountain search and rescue teams.  
> I'm using DRG 24k topographical geotiff slices in UTM NAD27 and then 
> processing 1/3 arc-sec elevation .adf files in lat/lon NAD83 to match 
> up and plot slopes and such.
> All this is downloaded from the NED seamless website.
> 
> Problem is, the two data sets don't match up precisely.  That is, the 
> features on the topo seem to match up precisely with elevation data in

> some places and not so precisely in others.  At the worst, the error 
> is around 500 feet.
> I'm
> using "libproj" to convert coordinates between the two datums.  I'm 
> currently processing a section of Colorado, and I'm building "libproj"

> to include the "conus" correction file.  I've also verified my 
> coordinate conversions are correct by comparing against openEV and 
> topoUSA.  I'm also using "libgdal" to pull out the elevation data and 
> "libgeotiff" to grab the image raster data and geo tags.
> 
> However, like I said, I'm new to this.  I'm converting the NW and SE 
> corners of the geotiff into NAD83 and then interpolating for each 
> pixel to match up with the elevation data using the origin and 
> resolution of the various elevation pieces.  I have a sneaky feeling 
> that life isn't that simple.  Am I missing some fancy projection to 
> correct for curvature of the earth or something?  Or is this just an 
> inherent mismatch between the data sets?  Or both?
> Other
> suggestions to try?
> 
> Please don't suggest using a commercially available mapping package 
> since we have no money and I need to do very extensive data processing

> once I have the data sets matching up properly.
> 
> Thanks.
> 
> -Jarrett
> 
> P.S.  Here's an example of a nearly 500 foot mismatch error:
> 
> A tiny rock spire on the topo map:
> 13 0394704 4334970
> 
> And the corresponding spike in elevation data:
> 13 0394571 4335039
> 
> [Coords provided by OpenEV cursor]
> 
> I don't expect a perfect matchup, but the worst areas need to be 
> corrected somehow to make the avalanche terrain maps useful.
> 
> I can email an example image showing the error if someone is really 
> interested.
> 
> Thanks again.
> 
> _______________________________________________
> Proj mailing list
> Proj@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> 
> > _______________________________________________
> Proj mailing list
> Proj@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj

_______________________________________________
Proj mailing list
Proj@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj


From cplist at earthlink.net  Fri Jan 27 14:39:00 2006
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] filtering on an OGRVRTDataSource
In-Reply-To: <931f8ea90601271114o43f22055taa5f84a93bf4df4@mail.gmail.com>
Message-ID: <050f01c62379$5302b860$0200a8c1@latitude>

Hi, Frank:

> and evaluator.   This would be a substantial effort, and I'm not
> planning to do it in the near future.

Understood, and I appreciate the feedback.

Charlton



From ed at topozone.com  Fri Jan 27 14:49:34 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] RE: [Proj] Dataset mismatch?
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD864@ptolemy.topozone.com>

Jarrett -

Just to give you a feel for the situation, take a look at the NGS NADCON
page at:

http://www.ngs.noaa.gov/TOOLS/Nadcon/Nadcon.shtml

The top of the page shows two rough graphics charting the NAD27/NAD83
datum shift in both latitude and longitude.  The heavy blue isolines are
in 0.5-second increments, so you need to move from one line to the next
for the size of the datum shift to change by 0.5 seconds.  Very roughly
speaking, 0.5 seconds of arc in the US is about 12 - 15 meters, so these
charts show how far you have to travel for the size of the datum shift
to get to be 12 - 15 meters.

I realize you can't do precise calculations from these charts, but the
longitude isolines are generally closer together and they look to be
about 5 degrees of longitude apart.  That would mean the longitude datum
shift might be - on average) about 0.5 seconds per 5 degrees or 0.1
seconds per degree.  A 7.5-minute quad is one-eighth of a degree on a
side, so one would expect a datum shift (in each of latitude and
longitude) on the order of one-eigth of 0.1 or 0.0125 seconds.  That's
about a third of a meter in each direction, or perhaps as much as half a
meter altogether.

These are VERY rough "in the ballpark" calculations, but they're
intended to get a feel for the order of magnitude of the shift.  That's
why I would be surprised to find a datum shift that varies by more than
one pixel across a 7.5-minute quad.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 


From doug.coward at 21csi.com  Fri Jan 27 16:01:01 2006
From: doug.coward at 21csi.com (Douglas Coward)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] New user having a problem reading a HDF5 formatted file
Message-ID: <WorldClient-F200601271501.AA01010291@21csi.com>

 Hi Everone,
   I am trying trouble opening a file to read data from a DBDBV (digital 
bathymetric data base variable resolution) HDF5 formatted file using GDAL. 
And I?m sure I?m just going something real dumb. 
    I needed to update to the latest version to get the HDF5 capable GDAL, 
so I downloaded FWTools100a7.exe and installed it.
    I copied the C:\Program Files\FWTools1.0.0a7\include directory and the 
C:\Program Files\FWTools1.0.0a7\lib directory to my source code tree. And I 
link gdal_i.lib into my project and include the gdal_priv.h header in my 
source file.
    I also downloaded 5-165-win.zip, the precompiled binaries of the HDF5 
library 1.6.5.
I copied the 5-165-win\include directory and the 5-165-win\lib directory to 
my source code tree. And I link hdf5.lib into my project and include the 
hdf5.h header in my source file.
 
I have had success doing tests used the gdalinfo utility on the database 
file:
 
C:\Program Files\FWTools1.0.0a7\bin>gdalinfo dbdbv_level0.h5
< Prints all the metadata, all the subdataset information>
 
I have had no success with tests of using gdal_translate on the database 
file:
 
C:\Program Files\FWTools1.0.0a7\bin>gdal_translate -of JPEG 
HDF5:"dbdbv_level0.h5":34477 ds34477.jpg
szFilenname dbdbv_level0.h5
Open!!
<After about 10 seconds the program crashes as it prints 
?/dbdbv/0.500/g/34477? which is the complete name of the correct dataset.>
 
   My real problem is that using the GDAL API Tutorial for opening a file to 
read, my program will calls GDALAllRegister(); just fine, then it calls 
poDataset = (GDALDataset *) GDALOpen( filename_, GA_ReadOnly );
with the filename set to ?..\..\terrain\DBDBV4_0\dbdbv_level0.h5? and 
GDALOpen() never returns.
(Ooops, for two weeks I have been thinking that this function never returns, 
but I just accidentally left the debugger running while writting this email 
and GDALOpen did return with the file open, 22 minutes later.)
 
Then when I get the file open, how would I read a particular dataset (like 
?/dbdbv/0.500/g/34477?) through the API?
 
Thank you for your time,
 Doug Coward
 Software Engineer
 21st Century Systems Inc.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/2676042c/attachment.html
From matt.wilkie at gov.yk.ca  Fri Jan 27 16:29:31 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] gdal_merge invalid literal for int(): -3.40282e+038
In-Reply-To: <931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
References: <43D94AC4.4050408@gov.yk.ca>
	<931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
Message-ID: <43DA90BB.8080705@gov.yk.ca>

>> Traceback (most recent call last):
>>    File "c:\local\fwtools\bin\gdal_merge.py", line 362, in ?
>>      nodata = int(argv[i])
>> ValueError: invalid literal for int(): -3.40282e+038
> 
> Matt,
> 
> Please change the above line to "nodata = float(argv[i])"
> and see if that works better.
> 
> I have committed this change in CVS.

That works perfectly, thanks Frank!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From rayg at daylongraphics.com  Fri Jan 27 19:51:18 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Structure member alignment suggestion
In-Reply-To: <43DA90BB.8080705@gov.yk.ca>
References: <43D94AC4.4050408@gov.yk.ca>
	<931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
	<43DA90BB.8080705@gov.yk.ca>
Message-ID: <43DAC006.5060204@daylongraphics.com>

FWIW, I came across a runtime problem when a project uses a different 
structure member alignment (e.g., 4 bytes) than whatever was used to 
build GDAL with (normally 8 bytes in MSVC/Pentium). For example, the 
OGRSpatialReference class will become misinterpreted. Below are the 
current and suggested member layouts:

class CPL_DLL OGRSpatialReference
{
     int         nRefCount;
     OGR_SRSNode *poRoot;
     int         bNormInfoSet;
     double      dfFromGreenwich;
     double      dfToMeter;
     double      dfToDegrees;
     ...
};


Suggested:
     double      dfFromGreenwich;
     double      dfToMeter;
     double      dfToDegrees;
     OGR_SRSNode *poRoot;
     int         nRefCount;
     int         bNormInfoSet;


Another possibility is to enclose structures in

#ifdef MSVC
#pragma(pack, push, 8)
#endif
...
#ifdef MSVC
#pragma(pack, pop)
#endif

Ray

From akkineni.vijay at gmail.com  Fri Jan 27 20:32:27 2006
From: akkineni.vijay at gmail.com (Vijay Akkineni)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Can we read the NALPS NDF Data format to extract the
	Pixel data
Message-ID: <7941d88c0601271732n7ab35216g3ec608da3e5ddbf9@mail.gmail.com>

Hi Guys,

                I am a computer science student at Texas tech University ..
I am new to Gdal ..can we use gdal to read the NDF Data Format Images of
Landsat and extract the pixel values along with latitude and longitutde of
the image ..Please help  me...

Thanks and Regards,
Vijay Akkineni.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/9057ec91/attachment.html
From bill at binko.net  Sat Jan 28 03:41:31 2006
From: bill at binko.net (Bill Binko)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Parzen Window Kernel Density Filter
Message-ID: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>

Hi everyone,

So, I've looked at the various solutions for kernel density mapping, and 
I think I know the approach I'd like to take.  I'd appreciate some 
feedback and a sanity check before I write any code.

I've found several references that describe the Parzen Window Kernel 
Density method, with the simplest being this 1D version:

http://en.wikipedia.org/wiki/Parzen_window

I've considered using R (or GRASS) to generate a raster image of my vector 
point data.  Both have methods to do this (I believe the GRASS code 
actually uses R though).  However, my point data covers the entire state 
of florida, so to have any resolution of value, the result of this method 
would be massive.

Also, one of the key things I've learned about this method is the fact
that the choice of variance (aka kernel or window) makes a huge difference
in the usefulness of the output.  It seems to me (I Am Not A Statistician
or even a GIS expert for that matter), but for best use I would like to
have the variance dependant on the scale of the map.  In other words, as
you zoom into the map, the kernel should shrink so that you could see more
detail regarding the area you're looking at.

So!  I would like to write a filter that takes a vector point set (OGR 
Data Source, probably), a display window, and some parameters such as 
resolution, color range values, etc. and produces a raster output through 
GDAL. 

I would like to invoke this through mapserver (PHP/Mapscript) and have it 
look like a layer that can be turned on/off etc.

I realize this is ambitious, but I think its very doable, and worthwhile.  
If there is desire, I would be happy to release it to others who are 
interested (either through GDAL, or other means).

So, here are my questions:

1) Is this sane?  I know there are alternatives, but they all (so far)  
seem to involve calling out to tools that are not highly suitable for 
real-time web-based mapping.
2) Are there examples of filters that sit between GDAL and OGR like this:

Browser->PHP/Mapscript->Mapserver->GDAL->EXAMPLE FILTER->OGR

and finally, one technical question that I've got on my mind:

3) How much would I need to buffer around the viewable area?  I've been 
thinking about it, I don't think I need to use all of the points in the 
dataset, only the viewable area + a buffer for the impact of those points 
just outside of the area.  I am thinking that I will only need to buffer 
by, say, 4 times the variance (kernel size) since anything farther than 
that won't cause much impact... does that sound right?

Thanks in advance.

Bill


From mbrudka at aster.pl  Sat Jan 28 06:31:46 2006
From: mbrudka at aster.pl (Marek Brudka)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Parzen Window Kernel Density Filter
In-Reply-To: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>
References: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>
Message-ID: <43DB5622.7040304@aster.pl>

Hi,

Bill Binko wrote:

>3) How much would I need to buffer around the viewable area?  I've been 
>thinking about it, I don't think I need to use all of the points in the 
>dataset, only the viewable area + a buffer for the impact of those points 
>just outside of the area.  I am thinking that I will only need to buffer 
>by, say, 4 times the variance (kernel size) since anything farther than 
>that won't cause much impact... does that sound right?
>  
>
While I did not ever consider to use gaussian mixture densities (Parzen 
Window with gaussian kernel) for the interpolation  of geospatial data, 
I suppose that 4 times the covariance is even more than necessary. 
Usually 3 covariances are enough to neglect the "tails" of gaussian 
density (especially in more than one dimension :-) ).

If I've understood you the well, I suppose that your problem is not from 
a statistics domain but rather from the interpolation one. I assume that 
you are interested in a kind of smooth transition between data in sample 
grid (irregular?) and you do not insist on interpreting the resulting 
function as a probability density.  Did you considered to apply radial 
basis function (RBF) approximators? In fact, if RBF is a gaussian one, 
which is a common case, you have something very similar to Parzen 
Window, but without (unnecessary) probability interpretation.

You question regarding the relation between covariance and scale can be 
nicely answered using classic Shanon sampling theory and spectral 
analysis. I remember one great paper on this

"Sanner, R., and Slotine, J.J.E., "Gaussian Networks for Direct Adaptive 
Control," I.E.E.E. Trans. Neural Networks, 3(6), 1992. (best paper award)"

where you can read a lot about RBF approximations (and adaptive control 
too, but approximation is more important)

HTH

Marek Brudka


From neteler at itc.it  Sat Jan 28 12:10:54 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Parzen Window Kernel Density Filter
In-Reply-To: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>
References: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>
Message-ID: <20060128171054.GC31175@bartok.itc.it>

On Sat, Jan 28, 2006 at 03:41:31AM -0500, Bill Binko wrote:
> Hi everyone,
> 
> So, I've looked at the various solutions for kernel density mapping, and 
> I think I know the approach I'd like to take.  I'd appreciate some 
> feedback and a sanity check before I write any code.
> 
> I've found several references that describe the Parzen Window Kernel 
> Density method, with the simplest being this 1D version:
> 
> http://en.wikipedia.org/wiki/Parzen_window
> 
> I've considered using R (or GRASS) to generate a raster image of my vector 
> point data.  Both have methods to do this (I believe the GRASS code 
> actually uses R though).  However, my point data covers the entire state 
> of florida, so to have any resolution of value, the result of this method 
> would be massive.

There is v.kernel in GRASS 6:
 http://grass.itc.it/grass61/manuals/html61_user/v.kernel.html

"Generates a raster density map from vector points data using a moving 2D isotropic Gaussian kernel or optionally generates a vector density map on vector network with a 1D kernel"

Markus


From asimpson at i-55.com  Sat Jan 28 19:51:30 2006
From: asimpson at i-55.com (Simpson)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ELAS
In-Reply-To: <20060128171054.GC31175@bartok.itc.it>
Message-ID: <NFBBKOADOLGDLPMAAHMDGEMNDNAA.asimpson@i-55.com>

Hello,

I am running gdal 1.2.6.0 on Linux and would like to read ELAS files
natively instead of dumping out to tif first.
'gdalinfo --formats' lists ELAS, but when executing 'gdalinfo
some_elas_file.geo', I get 'not recognised as a supported file format'.
Do I have to provide command line switch to tell it to use ELAS?
The version of ELAS may be slightly newer than what the gdal ELAS code was
developed for, but was told by developers the file structure hasn't changed.

Thanks for any info,
Drew.



From mfinn at usgs.gov  Fri Jan 27 12:52:09 2006
From: mfinn at usgs.gov (Michael P Finn)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Re: [Proj] Dataset mismatch?
In-Reply-To: <20060127085936.48496.qmail@web35604.mail.mud.yahoo.com>
Message-ID: <OF994356CB.DFC6D75D-ON86257103.0061FB54-86257103.00622915@usgs.gov>

>From my colleague Lynn Usery (USGS/ Geospatial Information Office).   Mike 
Finn




Using 2 points is not sufficient. The user should use a grid of at least 
20 x 20 points (400 total points) over the quad. Transform those between 
the datums and resample the pixels based on this approach. This is a 
simple operation in Imagine which automatically locates the control 
points then applies the datum tranformation, interpolates and resamples 
the data. Of course Jarrett said no commercial software, so he must find 
a way to implement this process with open source code.

To perform the datum transformation, two points is just not enough to 
handle the differences between the two datums. NGS used thousands of 
points in the transformation to determine the NADCON shifts between NAD 
27 and NAD 83 for the US.

Lynn





"Jarrett L. Redd" <jarrett_l_redd@yahoo.com> 
Sent by: proj-bounces@lists.maptools.org
01/27/2006 02:59 AM
Please respond to
"PROJ.4 and general Projections Discussions"    <proj@lists.maptools.org>


To
gdal-dev@lists.maptools.org, proj@lists.maptools.org, 
geotiff@lists.maptools.org
cc

Subject
[Proj] Dataset mismatch?






Howdy...

Please forgive the long cross-posting.  I'm new to this and don't know 
exactly
who will have a possible answer for this issue of mine.

I'm a volunteer working on a avalanche terrain and runout mapping project 
for
potential use by our mountain search and rescue teams.  I'm using DRG 24k
topographical geotiff slices in UTM NAD27 and then processing 1/3 arc-sec
elevation .adf files in lat/lon NAD83 to match up and plot slopes and 
such. 
All this is downloaded from the NED seamless website.

Problem is, the two data sets don't match up precisely.  That is, the 
features
on the topo seem to match up precisely with elevation data in some places 
and
not so precisely in others.  At the worst, the error is around 500 feet. 
I'm
using "libproj" to convert coordinates between the two datums.  I'm 
currently
processing a section of Colorado, and I'm building "libproj" to include 
the
"conus" correction file.  I've also verified my coordinate conversions are
correct by comparing against openEV and topoUSA.  I'm also using "libgdal" 
to
pull out the elevation data and "libgeotiff" to grab the image raster data 
and
geo tags.

However, like I said, I'm new to this.  I'm converting the NW and SE 
corners of
the geotiff into NAD83 and then interpolating for each pixel to match up 
with
the elevation data using the origin and resolution of the various 
elevation
pieces.  I have a sneaky feeling that life isn't that simple.  Am I 
missing
some fancy projection to correct for curvature of the earth or something? 
Or
is this just an inherent mismatch between the data sets?  Or both?  Other
suggestions to try?

Please don't suggest using a commercially available mapping package since 
we
have no money and I need to do very extensive data processing once I have 
the
data sets matching up properly.

Thanks.

-Jarrett

P.S.  Here's an example of a nearly 500 foot mismatch error:

A tiny rock spire on the topo map:
13 0394704 4334970

And the corresponding spike in elevation data:
13 0394571 4335039

[Coords provided by OpenEV cursor]

I don't expect a perfect matchup, but the worst areas need to be corrected
somehow to make the avalanche terrain maps useful.

I can email an example image showing the error if someone is really 
interested.

Thanks again.

_______________________________________________
Proj mailing list
Proj@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/proj

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060127/72edb875/attachment.html
From EMiller at dfg.ca.gov  Fri Jan 27 14:33:55 2006
From: EMiller at dfg.ca.gov (Eric Miller)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Re: [Proj] Dataset mismatch?
Message-ID: <s3da0539.052@dfg.ca.gov>

I think this may be a job for gdalwarp in the GDAL Utilities package:

http://www.remotesensing.org/gdal/gdalwarp.html 


>>> jarrett_l_redd@yahoo.com 1/27/2006 12:59 AM >>>
Howdy...

Please forgive the long cross-posting.  I'm new to this and don't know exactly
who will have a possible answer for this issue of mine.

I'm a volunteer working on a avalanche terrain and runout mapping project for
potential use by our mountain search and rescue teams.  I'm using DRG 24k
topographical geotiff slices in UTM NAD27 and then processing 1/3 arc-sec
elevation .adf files in lat/lon NAD83 to match up and plot slopes and such. 
All this is downloaded from the NED seamless website.

Problem is, the two data sets don't match up precisely.  That is, the features
on the topo seem to match up precisely with elevation data in some places and
not so precisely in others.  At the worst, the error is around 500 feet.  I'm
using "libproj" to convert coordinates between the two datums.  I'm currently
processing a section of Colorado, and I'm building "libproj" to include the
"conus" correction file.  I've also verified my coordinate conversions are
correct by comparing against openEV and topoUSA.  I'm also using "libgdal" to
pull out the elevation data and "libgeotiff" to grab the image raster data and
geo tags.

However, like I said, I'm new to this.  I'm converting the NW and SE corners of
the geotiff into NAD83 and then interpolating for each pixel to match up with
the elevation data using the origin and resolution of the various elevation
pieces.  I have a sneaky feeling that life isn't that simple.  Am I missing
some fancy projection to correct for curvature of the earth or something?  Or
is this just an inherent mismatch between the data sets?  Or both?  Other
suggestions to try?

Please don't suggest using a commercially available mapping package since we
have no money and I need to do very extensive data processing once I have the
data sets matching up properly.

Thanks.

-Jarrett

P.S.  Here's an example of a nearly 500 foot mismatch error:

A tiny rock spire on the topo map:
13 0394704 4334970

And the corresponding spike in elevation data:
13 0394571 4335039

[Coords provided by OpenEV cursor]

I don't expect a perfect matchup, but the worst areas need to be corrected
somehow to make the avalanche terrain maps useful.

I can email an example image showing the error if someone is really interested.

Thanks again.

_______________________________________________
Proj mailing list
Proj@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/proj



From warmerdam at pobox.com  Sat Jan 28 23:04:13 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] ELAS
In-Reply-To: <NFBBKOADOLGDLPMAAHMDGEMNDNAA.asimpson@i-55.com>
References: <20060128171054.GC31175@bartok.itc.it>
	<NFBBKOADOLGDLPMAAHMDGEMNDNAA.asimpson@i-55.com>
Message-ID: <931f8ea90601282004g1da77a93jcf2a2b1f5d131f8f@mail.gmail.com>

On 1/28/06, Simpson <asimpson@i-55.com> wrote:
> Hello,
>
> I am running gdal 1.2.6.0 on Linux and would like to read ELAS files
> natively instead of dumping out to tif first.
> 'gdalinfo --formats' lists ELAS, but when executing 'gdalinfo
> some_elas_file.geo', I get 'not recognised as a supported file format'.
> Do I have to provide command line switch to tell it to use ELAS?
> The version of ELAS may be slightly newer than what the gdal ELAS code was
> developed for, but was told by developers the file structure hasn't changed.

Drew,

GDAL is supposed to auto-recognise file formats.  So
if gdalinfo doesn't recognise the format it is presumably
something different than the driver was written for.   Can
you point me to a sample file?

By the way, the ELAS test files I have all end with the
extension .odf.  I don't know if that is significant.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jarrett_l_redd at yahoo.com  Mon Jan 30 00:23:05 2006
From: jarrett_l_redd at yahoo.com (Jarrett L. Redd)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] RE: [Proj] Dataset mismatch?
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD863@ptolemy.topozone.com>
Message-ID: <20060130052305.37590.qmail@web35605.mail.mud.yahoo.com>

Ed,

Indeed, the datum conversion was never the problem.  Instead, it was a faulty
assumption on my part.  I assumed that the skew between the dataset projections
was negligable on such a small area when it fact it is quite significant.  By
skew, I mean that if you project a square from one dataset into the other
dataset, you will not get exactly a square.  Therefore, if you just perform a
normal bi-nodal interpolation, you will get a significant error.  But if you
account for a 2D skew with a quad-nodal interpolation, then the error goes
away.  This is why the error vanished when I started translating every point
directly.  FYI, if you interpolate from just the 4 corners of the quad versus
hundreds of internal points, you get a max position difference of around 2.5
feet, just as you predicted.  This is obviously way below the DRG 24k
resolution and can be ignored.  Another interesting thing is that the 1/3 arc
second elevation data plots around 1.5m low on the topo maps.  That is, the
plotted contour lines are always just below the topo contour lines.  Since I
only care about slopes, lifting everything 1.5m makes them line up very nicely.

Thanks again to everyone for their help.  I think this tool is going to save
some lives once it gets out into the field.  At that time, I will be releasing
the source so that it can continue to be modified as avalanche prediction
models improve.

-Jarrett

--- Ed McNierney <ed@topozone.com> wrote:

> Jarrett -
> 
> Why do you think it is the problem?  Are you indeed operating at a scale
> where you're using two corner points per 7.5-minute quad?  And can you
> give examples (with specific coordinates) of where you see substantial
> datum shifts on multiple points on a single quad?  I'm skeptical...
> 
> Is it possible that the error is in the way you calculate the
> interpolated values?
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> ed@topozone.com
> (978) 251-4242 
> 
> -----Original Message-----
> From: proj-bounces@lists.maptools.org
> [mailto:proj-bounces@lists.maptools.org] On Behalf Of Jarrett L. Redd
> Sent: Friday, January 27, 2006 2:03 PM
> To: PROJ.4 and general Projections Discussions
> Cc: proj-bounces@lists.maptools.org; gdal-dev@lists.maptools.org
> Subject: RE: [Proj] Dataset mismatch?
> 
> Sorry... saw these messages after my previous response.  Believe it or
> not, this seems to be the problem.  I had my suspicions that it was a
> non-linear problem associated with the datum conversion, and when I did
> the conversion, the error goes away (mostly).  I didn't bother at first
> because I also believed it was too small an area to show such an error.
> I guess not!  By the way, it may not be possible to answer this
> question, but I thought I'd try anyway: 
> anyone know what maximum error mismatch to expect due to the datasets
> themselves?  I'm seeing 50 feet in various areas, and occasionally up to
> 150 feet (in narrow canyons, etc).  Perhaps I still have a problem
> somewhere.
> 
> Thanks.
> 
> -Jarrett
> 
> --- Ed McNierney <ed@topozone.com> wrote:
> 
> > Mike -
> >  
> > Yes, the USGS used thousands of points, but they needed to cover the 
> > whole country!  For CONUS that's around 50,000 quads worth.  We're 
> > only talking about one quad that's only about 10 x 15 kilometers.  If 
> > the NGS used 400 points per quad they would have needed over 20
> million points.
> >  
> > I took a look at the Mount Sherman, CO quad that is the subject of the
> 
> > original post.  The northwest corner of that quad is at 392131E 
> > 4345059N
> > (NAD27) and 392084E 4345267N (NAD83).  The NAD27 -> NAD83 datum shift 
> > at that point is (-47E, +208N).  If I go to the southeast corner of 
> > that quad, the coordinates are 402746E 4331044N (NAD27) and 402699E 
> > 4331252N (NAD93).  The NAD27 -> NAD83 datum shift at that opposite 
> > corner is (-47E, +208N) - identical to the datum shift at the opposite
> 
> > corner!  I cannot imagine one would require 400 intermediate control 
> > points to accurately calculate a datum shift across an area the size 
> > of a 7.5-minute quad - especially when the shift at opposite corners 
> > is the same.  You might, I suppose, manage to get off by a meter or 
> > two, but since a single pixel on a 1:24K DRG is 2.4384 meters on a 
> > side, you're literally below the threshold of precision on the data.
> >  
> > Jarrett's seeing discrepancies of hundreds of meters.  Even if you 
> > measured only one point and presumed the datum shift was identical 
> > across the entire quad, you couldn't produce an error that large.
> >  
> >      - Ed
> >  
> > Ed McNierney
> > President and Chief Mapmaker
> > TopoZone.com / Maps a la carte, Inc.
> > 73 Princeton Street, Suite 305
> > North Chelmsford, MA  01863
> > ed@topozone.com
> > (978) 251-4242
> > 
> >  
> >  
> >  
> > 
> > ________________________________
> > 
> > From: proj-bounces@lists.maptools.org
> > [mailto:proj-bounces@lists.maptools.org] On Behalf Of Michael P Finn
> > Sent: Friday, January 27, 2006 12:52 PM
> > To: PROJ.4 and general Projections Discussions
> > Cc: geotiff@lists.maptools.org; proj@lists.maptools.org; 
> > gdal-dev@lists.maptools.org; proj-bounces@lists.maptools.org
> > Subject: Re: [Proj] Dataset mismatch?
> > 
> > 
> > 
> > >From my colleague Lynn Usery (USGS/ Geospatial Information Office).
> > Mike Finn
> > 
> > 
> > 
> > 
> > Using 2 points is not sufficient. The user should use a grid of at 
> > least
> > 
> > 20 x 20 points (400 total points) over the quad. Transform those 
> > between
> > 
> > the datums and resample the pixels based on this approach. This is a 
> > simple operation in Imagine which automatically locates the control 
> > points then applies the datum tranformation, interpolates and 
> > resamples the data. Of course Jarrett said no commercial software, so 
> > he must find
> > 
> > a way to implement this process with open source code.
> > 
> > To perform the datum transformation, two points is just not enough to 
> > handle the differences between the two datums. NGS used thousands of 
> > points in the transformation to determine the NADCON shifts between 
> > NAD
> > 27 and NAD 83 for the US.
> > 
> > Lynn
> > 
> > 
> > 
> > 
> > 
> > "Jarrett L. Redd" <jarrett_l_redd@yahoo.com> Sent by: 
> > proj-bounces@lists.maptools.org
> > 
> > 01/27/2006 02:59 AM
> > Please respond to
> > "PROJ.4 and general Projections Discussions"
> > <proj@lists.maptools.org>
> > 
> > 
> > To
> > gdal-dev@lists.maptools.org, proj@lists.maptools.org, 
> > geotiff@lists.maptools.org cc Subject [Proj] Dataset mismatch?
> > 
> > 	
> > 
> > 
> > 
> > 
> > Howdy...
> > 
> > Please forgive the long cross-posting.  I'm new to this and don't know
> 
> > exactly who will have a possible answer for this issue of mine.
> > 
> > I'm a volunteer working on a avalanche terrain and runout mapping 
> > project for potential use by our mountain search and rescue teams.  
> > I'm using DRG 24k topographical geotiff slices in UTM NAD27 and then 
> > processing 1/3 arc-sec elevation .adf files in lat/lon NAD83 to match 
> > up and plot slopes and such.
> > All this is downloaded from the NED seamless website.
> > 
> > Problem is, the two data sets don't match up precisely.  That is, the 
> > features on the topo seem to match up precisely with elevation data in
> 
> > some places and not so precisely in others.  At the worst, the error 
> > is around 500 feet.
> > I'm
> > using "libproj" to convert coordinates between the two datums.  I'm 
> > currently processing a section of Colorado, and I'm building "libproj"
> 
> > to include the "conus" correction file.  I've also verified my 
> > coordinate conversions are correct by comparing against openEV and 
> > topoUSA.  I'm also using "libgdal" to pull out the elevation data and 
> > "libgeotiff" to grab the image raster data and geo tags.
> > 
> > However, like I said, I'm new to this.  I'm converting the NW and SE 
> > corners of the geotiff into NAD83 and then interpolating for each 
> > pixel to match up with the elevation data using the origin and 
> > resolution of the various elevation pieces.  I have a sneaky feeling 
> > that life isn't that simple.  Am I missing some fancy projection to 
> > correct for curvature of the earth or something?  Or is this just an 
> > inherent mismatch between the data sets?  Or both?
> > Other
> > suggestions to try?
> > 
> > Please don't suggest using a commercially available mapping package 
> > since we have no money and I need to do very extensive data processing
> 
> > once I have the data sets matching up properly.
> > 
> > Thanks.
> > 
> > -Jarrett
> > 
> > P.S.  Here's an example of a nearly 500 foot mismatch error:
> > 
> > A tiny rock spire on the topo map:
> > 13 0394704 4334970
> > 
> > And the corresponding spike in elevation data:
> > 13 0394571 4335039
> > 
> > [Coords provided by OpenEV cursor]
> > 
> > I don't expect a perfect matchup, but the worst areas need to be 
> > corrected somehow to make the avalanche terrain maps useful.
> > 
> > I can email an example image showing the error if someone is really 
> > interested.
> > 
> > Thanks again.
> > 
> > _______________________________________________
> > Proj mailing list
> > Proj@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> > 
> > 
> > > _______________________________________________
> > Proj mailing list
> > Proj@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/proj
> 
> _______________________________________________
> Proj mailing list
> Proj@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 
> _______________________________________________
> Proj mailing list
> Proj@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/proj
> 


From schut at sarvision.nl  Mon Jan 30 05:39:32 2006
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] updates of deflate compressed tiff still broken?
Message-ID: <43DDECE4.6020002@sarvision.nl>

Frank et al.,

I'm trying to generate overviews for a compressed (deflate) tiff, which
doesn't work. I remember updating compressed tiff files being broken,
either in gdal or in libtiff or both, but has this since never been fixed?


details:

gentoo amd64 linux system, using gdal from cvs (yesterday, clean build),
gdal's internal libtiff and libgeotiff (checked with ld
/usr/local/bin/gdal_translate, which doesn't show any reference to
libtiff), and I've tried both to add oveviews to an existing file, as to
create a new .ovr file by running gdaladdo on a .vrt file. However, in
any case this error is the result:


gdaladdo -r average --config COMPRESS_OVERVIEW DEFLATE srtm_NW.tif 2 4 8
16 32 64 128 256 512 1024
0ERROR 1: ZIPDecode:srtm_NW.tif: Decoding error at scanline 0, incorrect
header check
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
ERROR 1: ZIPDecode:srtm_NW.tif: Decoding error at scanline 0, incorrect
header check
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
ERROR 1: ZIPDecode:srtm_NW.tif: Decoding error at scanline 0, incorrect
header check
ERROR 1: TIFFReadEncodedTile() failed.

... <going on for some more errors of the same kind>...

btw. the tif file is quite large, 2.3 Gb (compressed). I do get the same
kind of error however also on a smaller file.

Regards,
Vincent.


BTW I tried to send this message to the list through gmane which I 
usually use to read my lists, but it failed because that still seems to 
point to gdal-dev@remotesensing.org instead of 
gdal-dev@lists.maptools.org. Don't know if and who could change that at 
gmane, but thought I'd let you know...

From neteler at itc.it  Mon Jan 30 08:01:28 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] NOAA 14 geocoding?
Message-ID: <20060130130128.GA20345@bartok.itc.it>

Hi,

I have ordered a coulpe of AVHRR images from CLASS archives
(http://www.class.noaa.gov) for Northern Italy:

ftp://ftp.class.noaa.gov/A2585871/
(each image 3-4MB).

To geocode them, I used gdalwarp but the images didn't
cover Northern Italy after geocoding (they appear East of
the Caspian Sea):

# apply GCPs with thin plate spline transformer
gdalwarp -tps -of HFA -t_srs "EPSG:4326" -co COMPRESS=YES \
  NSS.LHRR.NJ.D99174.S1236.E1248.B2308484.GC.L1261491 \
  NSS.LHRR.NJ.D99174.S1236.E1248.B2308484.GC.L1261491.img

The resulting images are also almost North-South oriented which
is unlikely.

I used the "generate map" feature of CLASS to verify the
position before ordering.

Is it possible that the NOAA 14 format differs?

Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From szekeres.tamas at freemail.hu  Sun Jan 29 13:14:28 2006
From: szekeres.tamas at freemail.hu (=?iso-8859-2?Q?Szekeres_Tam=E1s?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] OGR Attribute filter expression limitation
Message-ID: <20060129181413.HAIJ24926.viefep20-int.chello.at@szekerespc>

Hi list,

 

Does OGR support filtering by fields having field names in both side of an
operator such as:

 

(myfield1 > myfield2) and (myfield2 > 0)

 

Both of the fields are numeric.

 

I seems this type of expression is not supported. What restrictions do I
have to take into account then?

 

 

Tamas


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.23/243 - Release Date: 2006.01.27.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060129/06a22085/attachment.html
From szekerest at chello.hu  Sun Jan 29 15:11:40 2006
From: szekerest at chello.hu (=?iso-8859-2?Q?Szekeres_Tam=E1s?=)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] OGR Attribute filter expression limitation
Message-ID: <20060129201123.OCDK6338.viefep14-int.chello.at@szekerespc>

 

Hi list,

 

Does OGR support filtering by fields having field names in both side of an
operator such as:

 

(myfield1 > myfield2) and (myfield2 > 0)

 

Both of the fields are numeric.

 

I seems this type of expression is not supported. What restrictions do I
have to take into account then?

 

 

Tamas


--
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.23/243 - Release Date: 2006.01.27.



-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.375 / Virus Database: 267.14.23/243 - Release Date: 2006.01.27.
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060129/f7d62735/attachment.html
From warmerdam at pobox.com  Mon Jan 30 08:50:03 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] updates of deflate compressed tiff still broken?
In-Reply-To: <43DDECE4.6020002@sarvision.nl>
References: <43DDECE4.6020002@sarvision.nl>
Message-ID: <931f8ea90601300550w43b7066eja33c2a9cc8ce0d8c@mail.gmail.com>

On 1/30/06, Vincent Schut <schut@sarvision.nl> wrote:
> Frank et al.,
>
> I'm trying to generate overviews for a compressed (deflate) tiff, which
> doesn't work. I remember updating compressed tiff files being broken,
> either in gdal or in libtiff or both, but has this since never been fixed?

Vincent,

I'm not too sure what is going wrong still with this.   I was able
to reproduce the problems with an averaged overview build on my
test file (http://home.gdal.org/~warmerda/world.tif - converted to
deflate) but without averaging it worked fine.

Also, I found that addtiffo works fine with averaging, so
till this is properly fixed, you might want to just use that.

eg.

addtiffo -r average abc.tif 2 4 8 ...

The code should be very similar between gdaladdo and addtiffo
but apparently there are significant differences.

In the past my assumption has been that these problems related
to issues in the "statefulness" of some of the libtiff codecs, but
I'm not too sure of that anymore.

You can file a bug on this if you wish, but I'm not sure when I'll
get around to digging in deeply.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jan 30 09:20:21 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] OGR Attribute filter expression limitation
In-Reply-To: <20060129181413.HAIJ24926.viefep20-int.chello.at@szekerespc>
References: <20060129181413.HAIJ24926.viefep20-int.chello.at@szekerespc>
Message-ID: <931f8ea90601300620x6ca464fcr98960db1d06f1068@mail.gmail.com>

On 1/29/06, Szekeres Tam?s <szekeres.tamas@freemail.hu> wrote:
> Does OGR support filtering by fields having field names in both side of an
> operator such as:
>
> (myfield1 > myfield2) and (myfield2 > 0)
>
>
>
> Both of the fields are numeric.
>
>
>
> I seems this type of expression is not supported. What restrictions do I
> have to take into account then?

Tamas,

I'm afraid it is a limitation of the half-baked SQL support
in OGR that fieldnames can only be on the left side of the
binary operators.

So there is way of comparing two fields in an expression.

It would be a fair amount of work to fix this, and I worry
about the logic to sinking alot of time into replicating alot
of SQL expression handling.  I wonder if I wouldn't be better
off looking for a real sql engine someday.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From schut at sarvision.nl  Mon Jan 30 09:27:26 2006
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] updates of deflate compressed tiff still broken?
In-Reply-To: <931f8ea90601300550w43b7066eja33c2a9cc8ce0d8c@mail.gmail.com>
References: <43DDECE4.6020002@sarvision.nl>
	<931f8ea90601300550w43b7066eja33c2a9cc8ce0d8c@mail.gmail.com>
Message-ID: <43DE224E.8060302@sarvision.nl>

Frank Warmerdam wrote:

>On 1/30/06, Vincent Schut <schut@sarvision.nl> wrote:
>  
>
>>Frank et al.,
>>
>>I'm trying to generate overviews for a compressed (deflate) tiff, which
>>doesn't work. I remember updating compressed tiff files being broken,
>>either in gdal or in libtiff or both, but has this since never been fixed?
>>    
>>
>
>Vincent,
>
>I'm not too sure what is going wrong still with this.   I was able
>to reproduce the problems with an averaged overview build on my
>test file (http://home.gdal.org/~warmerda/world.tif - converted to
>deflate) but without averaging it worked fine.
>
>Also, I found that addtiffo works fine with averaging, so
>till this is properly fixed, you might want to just use that.
>
>eg.
>
>addtiffo -r average abc.tif 2 4 8 ...
>
>The code should be very similar between gdaladdo and addtiffo
>but apparently there are significant differences.
>
>In the past my assumption has been that these problems related
>to issues in the "statefulness" of some of the libtiff codecs, but
>I'm not too sure of that anymore.
>
>You can file a bug on this if you wish, but I'm not sure when I'll
>get around to digging in deeply.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>  
>

Frank,

thanks for the info. I'll try with addtiffo. I already tried with the 
ossim app img2rr but that is very slow... I liked the speed of gdaladdo.

Vincent.

From charles.wivell at dnr.state.mn.us  Mon Jan 30 10:37:40 2006
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Can we read the NALPS NDF Data format to
	extract the Pixel data
Message-ID: <s3ddde95.040@co5.dnr.state.mn.us>

Do you mean NLAPS?

The NLAPS header files are just ASCII, so any text editor will display the header info. This info. will tell you how the image data is arranged and the projection information. To get the projection information to Lat/Lon you'll need to use a cartograph library, such as GCTP.

Chuck Wivell
MN DNR, Grand Rapids, MN



>>> Vijay Akkineni <akkineni.vijay@gmail.com> 01/27/06 7:32 PM >>>
Hi Guys,

                I am a computer science student at Texas tech University ..
I am new to Gdal ..can we use gdal to read the NDF Data Format Images of
Landsat and extract the pixel values along with latitude and longitutde of
the image ..Please help  me...

Thanks and Regards,
Vijay Akkineni.



From charles.wivell at dnr.state.mn.us  Mon Jan 30 10:38:27 2006
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] NOAA 14 geocoding?
Message-ID: <s3dddeb4.047@co5.dnr.state.mn.us>

Are the NOAA 14 images raw images? (still in sensor space?).

The AVHRR sensor has a very wide foot print (scan angles of +/- 55 degrees). This sensor requires a full satellite/sensor/earth/DEM model to accurately correct the images to map space. The AVHRR pixels bloom from 1.1 km to over 6 km (at end of scan) and there is a lot of parallax at end of scan, so a simple warp will not work well. While at EROS Data Center I wrote the model used to process AVHRR images.

I'd recommend acquiring an already geocoded image.

Chuck Wivell
MN DNR, Grand Rapids, MN


>>> Markus Neteler <neteler@itc.it> 01/30/06 7:01 AM >>>
Hi,

I have ordered a coulpe of AVHRR images from CLASS archives
(http://www.class.noaa.gov) for Northern Italy:

ftp://ftp.class.noaa.gov/A2585871/ 
(each image 3-4MB).

To geocode them, I used gdalwarp but the images didn't
cover Northern Italy after geocoding (they appear East of
the Caspian Sea):

# apply GCPs with thin plate spline transformer
gdalwarp -tps -of HFA -t_srs "EPSG:4326" -co COMPRESS=YES \
  NSS.LHRR.NJ.D99174.S1236.E1248.B2308484.GC.L1261491 \
  NSS.LHRR.NJ.D99174.S1236.E1248.B2308484.GC.L1261491.img

The resulting images are also almost North-South oriented which
is unlikely.

I used the "generate map" feature of CLASS to verify the
position before ordering.

Is it possible that the NOAA 14 format differs?

Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it 
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From ivan.mjartan at geovap.cz  Mon Jan 30 10:57:41 2006
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] compression  CCITTFAX4 ?
Message-ID: <001a01c625b5$e7843f70$1a01a8c0@pc24>

Hi list,

I have little problem with one raster 

This raster is info by gdalinfo.exe

Driver: GTiff/GeoTIFF
Size is 29320, 23915
Coordinate System is `'
Origin = (-526217.400234,-1169079.558552)
Pixel Size = (0.20988818,-0.20988818)
Metadata:
  TIFFTAG_XRESOLUTION=1000
  TIFFTAG_YRESOLUTION=1000
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
Corner Coordinates:
Upper Left  ( -526217.400,-1169079.559)
Lower Left  ( -526217.400,-1174099.034)
Upper Right ( -520063.479,-1169079.559)
Lower Right ( -520063.479,-1174099.034)
Center      ( -523140.439,-1171589.296)
Band 1 Block=29320x23915 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255

But problem is when I tried 

gdal_translate.exe -of BMP bohuslavice_pk.tif bohuslavice_pk.bmp 

I got following error 

ERROR 1: Internalize failed
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

The problem is also the same when I tried small subwindow.

What is wrong?  It is unsupported compression?  CCITTFAX4
Can I fix this problem with external tif library?

Thanks for your reply.


ivan mjartan 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20060130/9a82bda5/attachment.html
From warmerdam at pobox.com  Mon Jan 30 11:04:53 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Can we read the NALPS NDF Data format to extract the
	Pixel data
In-Reply-To: <7941d88c0601271732n7ab35216g3ec608da3e5ddbf9@mail.gmail.com>
References: <7941d88c0601271732n7ab35216g3ec608da3e5ddbf9@mail.gmail.com>
Message-ID: <931f8ea90601300804t54bbdb53xc8b8cae657f214a@mail.gmail.com>

On 1/27/06, Vijay Akkineni <akkineni.vijay@gmail.com> wrote:
> Hi Guys,
>
>                 I am a computer science student at Texas tech University ..
> I am new to Gdal ..can we use gdal to read the NDF Data Format Images of
> Landsat and extract the pixel values along with latitude and longitutde of
> the image ..Please help  me...

Vijay,

Yes, GDAL will read NLAPS NDF format images, as well
as returning the coordinate system.  The data I have are in
UTM, so you would need to go through a reprojection step
to determine where pixels lie in lat/long.   You can accomplish
this with the OGRCoordinateTransformation as long as you
have PROJ.4 installed on your system (and findable).  I good
test is to run gdalinfo on your file and see if it returns corner
coordinates in UTM *and* lat/long.

You might want to look at the GDALInfoReportCorner()  function
in gdal/apps/gdalinfo.c to see an example of reprojecting pixel/line
locations to lat/long.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jan 30 11:54:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] compression CCITTFAX4 ?
In-Reply-To: <001a01c625b5$e7843f70$1a01a8c0@pc24>
References: <001a01c625b5$e7843f70$1a01a8c0@pc24>
Message-ID: <931f8ea90601300854l1f2f2d1o2b08067e5051c1a8@mail.gmail.com>

On 1/30/06, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
>
> Hi list,
>
> I have little problem with one raster
>
> This raster is info by gdalinfo.exe
>
> Driver: GTiff/GeoTIFF
> Size is 29320, 23915
> Coordinate System is `'
> Origin = (-526217.400234,-1169079.558552)
> Pixel Size = (0.20988818,-0.20988818)
> Metadata:
>   TIFFTAG_XRESOLUTION=1000
>   TIFFTAG_YRESOLUTION=1000
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>   COMPRESSION=CCITTFAX4
> Corner Coordinates:
> Upper Left  ( -526217.400,-1169079.559)
> Lower Left  ( -526217.400,-1174099.034)
> Upper Right ( -520063.479,-1169079.559)
> Lower Right ( -520063.479,-1174099.034)
> Center      ( -523140.439,-1171589.296)
> Band 1 Block=29320x23915 Type=Byte, ColorInterp=Palette
>   Color Table (RGB with 2 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
>
> But problem is when I tried
>
> gdal_translate.exe -of BMP bohuslavice_pk.tif bohuslavice_pk.bmp
>
> I got following error
>
> ERROR 1: Internalize failed
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

Ivan,

I believe the problem is that to GDAL the TIFF files seems to be
one big tile.  So when it reads it, it allocates a 29320x23915
memory array which fails, resulting in the error message you see.

I would suggest using tiffcp to convert the file into a stripped
file with a reasonable strip size.

eg.

tiffcp -s -r 200 your.tif stripped.tif

Then it should be possible to operate on it with gdal_translate.

But the other thing I must warn you is that GDAL treats 1bit TIFF
files as 8bit so the resulting image may be much larger than you
would expect (circa 500MB).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jan 30 12:44:40 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Structure member alignment suggestion
In-Reply-To: <43DAC006.5060204@daylongraphics.com>
References: <43D94AC4.4050408@gov.yk.ca>
	<931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
	<43DA90BB.8080705@gov.yk.ca> <43DAC006.5060204@daylongraphics.com>
Message-ID: <931f8ea90601300944l525c2436s7ad1800533fdb8b3@mail.gmail.com>

On 1/27/06, Ray Gardener <rayg@daylongraphics.com> wrote:
> FWIW, I came across a runtime problem when a project uses a different
> structure member alignment (e.g., 4 bytes) than whatever was used to
> build GDAL with (normally 8 bytes in MSVC/Pentium). For example, the
> OGRSpatialReference class will become misinterpreted. Below are the
> current and suggested member layouts:
>
> class CPL_DLL OGRSpatialReference
> {
>      int         nRefCount;
>      OGR_SRSNode *poRoot;
>      int         bNormInfoSet;
>      double      dfFromGreenwich;
>      double      dfToMeter;
>      double      dfToDegrees;
>      ...
> };
>
>
> Suggested:
>      double      dfFromGreenwich;
>      double      dfToMeter;
>      double      dfToDegrees;
>      OGR_SRSNode *poRoot;
>      int         nRefCount;
>      int         bNormInfoSet;

Ray,

I have made the suggested change in ogr_spatialref.h
(warning ... ABI change!) but I think that depending on this
or pragmas to ensure compatible structure packing is
problematic at best so this isn't something I am going to
pursue religiously in all include files.

Ultimately, you are safer accessing things through the C
API if portability and "mixability" of environments is very
important to you.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jan 30 12:51:54 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Re: Parzen Window Kernel Density Filter
In-Reply-To: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>
References: <Pine.LNX.4.58.0601280322270.23714@fastcat.binko.net>
Message-ID: <931f8ea90601300951v30be58a4u2c83521ad9e3ac59@mail.gmail.com>

On 1/28/06, Bill Binko <bill@binko.net> wrote:
>
> I've found several references that describe the Parzen Window Kernel
> Density method,
...
> So!  I would like to write a filter that takes a vector point set (OGR
> Data Source, probably), a display window, and some parameters such as
> resolution, color range values, etc. and produces a raster output through
> GDAL.
>
> I would like to invoke this through mapserver (PHP/Mapscript) and have it
> look like a layer that can be turned on/off etc.
>
> I realize this is ambitious, but I think its very doable, and worthwhile.
> If there is desire, I would be happy to release it to others who are
> interested (either through GDAL, or other means).
>
> So, here are my questions:
>
> 1) Is this sane?  I know there are alternatives, but they all (so far)
> seem to involve calling out to tools that are not highly suitable for
> real-time web-based mapping.

Bill,

I think I won't touch the sanity issue. :-)

> 2) Are there examples of filters that sit between GDAL and OGR like this:
> Browser->PHP/Mapscript->Mapserver->GDAL->EXAMPLE FILTER->OGR

No, I can't think of anything setup this way currently.

If you wanted to be really fancy, you could implement
your algorithm in such a way that it is a kind of virtual layer
in the VRT driver.

Alternatively, you could just have mapscript invoke a function
(or an external program) for your selected area and parameters
and generate a temporary file for use in the map rendering.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From packalen at cs.joensuu.fi  Mon Jan 30 13:34:59 2006
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Wrong geometry type detected
Message-ID: <Pine.GSO.4.61.0601302033130.12639@cs.joensuu.fi>

Frank et al.

I observed that the OGR recognizes incorrect point type in some occasions. 
When the real point type is wkbPoint25D but the Z-value is exactly zero 
getGeometryType() returns wkbPoint. This happens at least when the 
shapefile driver is used (GDAL 1.2.6.0).

I cannot see this to be preferred logic, or do I miss something?

Best regards,
Petteri

=========================================================================
Petteri Packal?n 
University of Joensuu 
Faculty of Forestry 
P.O. Box 111 
80101 Joensuu
Finland 
e-mail: packalen@cs.joensuu.fi 
=========================================================================
From warmerdam at pobox.com  Mon Jan 30 14:12:17 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:58 2007
Subject: [Gdal-dev] Wrong geometry type detected
In-Reply-To: <Pine.GSO.4.61.0601302033130.12639@cs.joensuu.fi>
References: <Pine.GSO.4.61.0601302033130.12639@cs.joensuu.fi>
Message-ID: <931f8ea90601301112j3d987f1dp6e0f9ce212ae677d@mail.gmail.com>

On 1/30/06, Petteri Packalen <packalen@cs.joensuu.fi> wrote:
> Frank et al.
>
> I observed that the OGR recognizes incorrect point type in some occasions.
> When the real point type is wkbPoint25D but the Z-value is exactly zero
> getGeometryType() returns wkbPoint. This happens at least when the
> shapefile driver is used (GDAL 1.2.6.0).
>
> I cannot see this to be preferred logic, or do I miss something?

Petteri,

There was a major overhaul of OGR geometry in the
early fall of 2005 to carry along coordinate dimension
information explicitly.   That overhaul should fix the particular
problem you are seeing.

I would encourage you to upgrad eto GDAL 1.3.1.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Mon Jan 30 15:46:05 2006
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] Wrong geometry type detected
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C2DC@mailman.san.com>

If that doesn't work just call flattenTo2D() before using the geometry
and that will make sure it's 2D.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Monday, January 30, 2006 12:12 PM
To: Petteri Packalen
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Wrong geometry type detected

On 1/30/06, Petteri Packalen <packalen@cs.joensuu.fi> wrote:
> Frank et al.
>
> I observed that the OGR recognizes incorrect point type in some
occasions.
> When the real point type is wkbPoint25D but the Z-value is exactly
zero
> getGeometryType() returns wkbPoint. This happens at least when the
> shapefile driver is used (GDAL 1.2.6.0).
>
> I cannot see this to be preferred logic, or do I miss something?

Petteri,

There was a major overhaul of OGR geometry in the
early fall of 2005 to carry along coordinate dimension
information explicitly.   That overhaul should fix the particular
problem you are seeing.

I would encourage you to upgrad eto GDAL 1.3.1.

Best regards,
--
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From dylan.beaudette at gmail.com  Mon Jan 30 19:54:06 2006
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] gdal/ogr python issues after re-compile
Message-ID: <200601301654.06490.dylan.beaudette@gmail.com>

This morning I had a working copy of the GDAL python modules. 

After a re-compile with postgresql enabled this time, I found the following 
problem:

a python script using the .Buffer() method from ogr.py causes a segfault.

All of my python stuff is installed via debian packages, while GDAL and 
PostgreSQL are done via source code.

re-compiling with the --without-pg option, i find that the python program 
still segfaults!

any thoughts on what could be messed up with my OGR python modules? I have 
confirmed that i can in fact use ogr2ogr, so it must be something with the 
python stuff.

thanks in advance,


-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From warmerdam at pobox.com  Mon Jan 30 22:20:57 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] NOAA 14 geocoding?
In-Reply-To: <20060130130128.GA20345@bartok.itc.it>
References: <20060130130128.GA20345@bartok.itc.it>
Message-ID: <931f8ea90601301920u22c1c2ccs31c0ca68009d54e6@mail.gmail.com>

On 1/30/06, Markus Neteler <neteler@itc.it> wrote:
> Hi,
>
> I have ordered a coulpe of AVHRR images from CLASS archives
> (http://www.class.noaa.gov) for Northern Italy:
>
> ftp://ftp.class.noaa.gov/A2585871/
> (each image 3-4MB).
>
> To geocode them, I used gdalwarp but the images didn't
> cover Northern Italy after geocoding (they appear East of
> the Caspian Sea):
>
> # apply GCPs with thin plate spline transformer
> gdalwarp -tps -of HFA -t_srs "EPSG:4326" -co COMPRESS=YES \
>   NSS.LHRR.NJ.D99174.S1236.E1248.B2308484.GC.L1261491 \
>   NSS.LHRR.NJ.D99174.S1236.E1248.B2308484.GC.L1261491.img
>
> The resulting images are also almost North-South oriented which
> is unlikely.

Markus,

I have tried one of the images, and the GCPs reported
by GDAL are indeed stretching from Iran to north of the
Caspian.  So, the problem isn't gdalwarp, but rather the
GCP extraction in the AVHRR driver.  I'll leave that for you
to follow up with Andrey since I don't normally deal with
that driver.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Jan 30 22:25:35 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] gdal/ogr python issues after re-compile
In-Reply-To: <200601301654.06490.dylan.beaudette@gmail.com>
References: <200601301654.06490.dylan.beaudette@gmail.com>
Message-ID: <931f8ea90601301925t74834a4ya3d0faac180ed39c@mail.gmail.com>

On 1/30/06, Dylan Beaudette <dylan.beaudette@gmail.com> wrote:
> This morning I had a working copy of the GDAL python modules.
>
> After a re-compile with postgresql enabled this time, I found the following
> problem:
>
> a python script using the .Buffer() method from ogr.py causes a segfault.
>
> All of my python stuff is installed via debian packages, while GDAL and
> PostgreSQL are done via source code.
>
> re-compiling with the --without-pg option, i find that the python program
> still segfaults!
>
> any thoughts on what could be messed up with my OGR python modules? I have
> confirmed that i can in fact use ogr2ogr, so it must be something with the
> python stuff.

Dylan,

The Buffer() operator uses GEOS.  Any chance that you upgraded
your GEOS (perhaps as part of a PostGIS install) without realizing it?
If you have, you will certainly need to recompile GDAL against the newer
version.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jorn at spacetec.no  Tue Jan 31 05:50:46 2006
From: jorn at spacetec.no (=?iso-8859-1?q?J=F8rn_Vegard_R=F8snes?=)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] KML support
Message-ID: <200601311150.46599.jorn@spacetec.no>

Hi,

are there plans to implement KML/Google Earth support in ogr2ogr.

KML files can have points, linestrings and polygons.
http://www.keyhole.com/kml/kml_tut.html

cheers
Joern

From rayg at daylongraphics.com  Tue Jan 31 07:15:20 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] Structure member alignment suggestion
In-Reply-To: <931f8ea90601300944l525c2436s7ad1800533fdb8b3@mail.gmail.com>
References: <43D94AC4.4050408@gov.yk.ca>
	<931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
	<43DA90BB.8080705@gov.yk.ca> <43DAC006.5060204@daylongraphics.com>
	<931f8ea90601300944l525c2436s7ad1800533fdb8b3@mail.gmail.com>
Message-ID: <43DF54D8.8080902@daylongraphics.com>

Frank Warmerdam wrote:
> I have made the suggested change in ogr_spatialref.h
> (warning ... ABI change!) but I think that depending on this
> or pragmas to ensure compatible structure packing is
> problematic at best so this isn't something I am going to
> pursue religiously in all include files.

Yeah, it's not a crisis since one can build GDAL with whatever packing 
is needed. A note in the INSTALL docs or wherever might be handy though, 
just in case someone runs into this issue (which can be hard to 
troubleshoot sometimes).

Oh, something else, not a huge deal either but would make life easier in 
the MSVC debugger, which has trouble telling module-level and 
function-level static vars of the same name apart:

port\cpl_findfile.cpp has
   static CPL_THREADLOCAL int bFinderInitialized = FALSE;

and port\cpl_csv.cpp has
   const char * GDALDefaultCSVFilename( const char *pszBasename )
   {
       static CPL_THREADLOCAL int bFinderInitialized = FALSE;
   	...
   }

The first time through the function, the debugger thinks 
bFinderInitialized is TRUE, not realizing its showing the contents of 
the module-level var, not the function's. The program flow behaves 
correctly, however; it's just a debugger display error -- probably takes 
whatever symbol of the desired name is first in the globals section and 
goes with that.

FWIW, I'd suggest prefixing the module-level static with 's' or 'g' to 
show higher scope and uniquely id'ing it in one shot. Plus if one is 
doing a 'Find in files' with 'match whole word' one won't get both vars 
showing in the search results.

Ray

From warmerdam at pobox.com  Tue Jan 31 07:51:09 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] Structure member alignment suggestion
In-Reply-To: <43DF54D8.8080902@daylongraphics.com>
References: <43D94AC4.4050408@gov.yk.ca>
	<931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
	<43DA90BB.8080705@gov.yk.ca> <43DAC006.5060204@daylongraphics.com>
	<931f8ea90601300944l525c2436s7ad1800533fdb8b3@mail.gmail.com>
	<43DF54D8.8080902@daylongraphics.com>
Message-ID: <931f8ea90601310451rf5c1148ja1cd1adebf32e659@mail.gmail.com>

On 1/31/06, Ray Gardener <rayg@daylongraphics.com> wrote:
> Yeah, it's not a crisis since one can build GDAL with whatever packing
> is needed. A note in the INSTALL docs or wherever might be handy though,
> just in case someone runs into this issue (which can be hard to
> troubleshoot sometimes).

Ray,

The appropriate place would likely be:
  http://www.gdal.org/gdal_building.html

But I am hesitant to complicate this page with structure packing issues,
especially since I'm not sure what to say.

> Oh, something else, not a huge deal either but would make life easier in
> the MSVC debugger, which has trouble telling module-level and
> function-level static vars of the same name apart:
>
> port\cpl_findfile.cpp has
>    static CPL_THREADLOCAL int bFinderInitialized = FALSE;
>
> and port\cpl_csv.cpp has
>    const char * GDALDefaultCSVFilename( const char *pszBasename )
>    {
>        static CPL_THREADLOCAL int bFinderInitialized = FALSE;
>         ...
>    }

I have renamed bFinderInitialized to bCSVFinderInitialized in
cpl_csv.cpp to avoid the name conflict.

> The first time through the function, the debugger thinks
> bFinderInitialized is TRUE, not realizing its showing the contents of
> the module-level var, not the function's. The program flow behaves
> correctly, however; it's just a debugger display error -- probably takes
> whatever symbol of the desired name is first in the globals section and
> goes with that.
>
> FWIW, I'd suggest prefixing the module-level static with 's' or 'g' to
> show higher scope and uniquely id'ing it in one shot. Plus if one is
> doing a 'Find in files' with 'match whole word' one won't get both vars
> showing in the search results.

Well, the "s" prefix is not a convention I follow and I'm hesitant to add
it now after all these years.  I do try to prefix true globals (not just
module scoped variables) with "g" but then I also try to avoid having
real globals.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ivan.mjartan at geovap.cz  Tue Jan 31 07:55:57 2006
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] compression CCITTFAX4 ?
References: <001a01c625b5$e7843f70$1a01a8c0@pc24>
	<931f8ea90601300854l1f2f2d1o2b08067e5051c1a8@mail.gmail.com>
Message-ID: <001601c62665$ae14a9e0$1a01a8c0@pc24>

Hi, list

At first thank you Frank for your help.

I used

c:\Projects\GDAL\library\tiff-3.8.0\tools>tiffcp -s -r 200 -c g3:2d:fill 
c:\temp\problemraster.tif c:\temp\rastr.tif

and than I am able use gdal_translate.exe

I am programming viewer for our geodata with raster support, I am using gdal 
library.

Whole algorithm is working in 5 steps.

1) Get intersection of raster and window of application
2) Compute coordinate of intersection
3) Call createSubImage function
4) Load result image (bitmap) from disk and display it in window.
5) Delete tempimage

createSubImage function looks like follow, this function is fragment of 
gedal_translate.exe and returns small subwindow of input raster.

But problem is when I get on input this large raster.

It is possible use something else then createcopy? I am not sure but 
mapserver is working properly on this raster.

Is my function createSubImage correct ?


thanks a lot Ivan Mjartan


void createSubImage(char *pszSrcFilename,char *pszDesFilename,int x, int 
y,int xsize,int ysize,int outXsize,int outYsize){
    GDALDatasetH hDataset,hOutDS;
    GDALDriverH hDriver;
    VRTDataset *poVDS;
    int nBandCount = 0;
    int i;

    GDALAllRegister();
    hDriver = GetGDALDriverManager()->GetDriverByName("BMP");
    hDataset = GDALOpenShared( pszSrcFilename, GA_ReadOnly );
    poVDS = new VRTDataset(outXsize, outYsize);

    nBandCount = GDALGetRasterCount( hDataset );

    for( i = 0; i < nBandCount; i++ ){
       VRTSourcedRasterBand   *poVRTBand;
       GDALRasterBand  *poSrcBand;
       GDALDataType    eBandType;

      poSrcBand = ((GDALDataset *)hDataset)->GetRasterBand(i+1);
      eBandType = poSrcBand->GetRasterDataType();
      poVDS->AddBand( eBandType, NULL );
      poVRTBand = (VRTSourcedRasterBand *) poVDS->GetRasterBand( i+1 );

      poVRTBand->AddSimpleSource( poSrcBand,x, y, xsize, ysize,0, 0, 
outXsize, outYsize );
      poVRTBand->CopyCommonInfoFrom( poSrcBand );
   }


     hOutDS = GDALCreateCopy( hDriver,pszDesFilename, (GDALDatasetH) poVDS,
                             FALSE, NULL,
                             NULL, NULL );

     if( hOutDS != NULL )
    {
        GDALClose( hOutDS );
    }

    GDALClose( (GDALDatasetH) poVDS );

    GDALClose( hDataset );
    GDALDestroyDriverManager();

}


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "Ivan Mjartan" <ivan.mjartan@geovap.cz>
Cc: <gdal-dev@lists.maptools.org>
Sent: Monday, January 30, 2006 5:54 PM
Subject: Re: [Gdal-dev] compression CCITTFAX4 ?


On 1/30/06, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
>
> Hi list,
>
> I have little problem with one raster
>
> This raster is info by gdalinfo.exe
>
> Driver: GTiff/GeoTIFF
> Size is 29320, 23915
> Coordinate System is `'
> Origin = (-526217.400234,-1169079.558552)
> Pixel Size = (0.20988818,-0.20988818)
> Metadata:
>   TIFFTAG_XRESOLUTION=1000
>   TIFFTAG_YRESOLUTION=1000
>   TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>   COMPRESSION=CCITTFAX4
> Corner Coordinates:
> Upper Left  ( -526217.400,-1169079.559)
> Lower Left  ( -526217.400,-1174099.034)
> Upper Right ( -520063.479,-1169079.559)
> Lower Right ( -520063.479,-1174099.034)
> Center      ( -523140.439,-1171589.296)
> Band 1 Block=29320x23915 Type=Byte, ColorInterp=Palette
>   Color Table (RGB with 2 entries)
>     0: 255,255,255,255
>     1: 0,0,0,255
>
> But problem is when I tried
>
> gdal_translate.exe -of BMP bohuslavice_pk.tif bohuslavice_pk.bmp
>
> I got following error
>
> ERROR 1: Internalize failed
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

Ivan,

I believe the problem is that to GDAL the TIFF files seems to be
one big tile.  So when it reads it, it allocates a 29320x23915
memory array which fails, resulting in the error message you see.

I would suggest using tiffcp to convert the file into a stripped
file with a reasonable strip size.

eg.

tiffcp -s -r 200 your.tif stripped.tif

Then it should be possible to operate on it with gdal_translate.

But the other thing I must warn you is that GDAL treats 1bit TIFF
files as 8bit so the resulting image may be much larger than you
would expect (circa 500MB).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent





From warmerdam at pobox.com  Tue Jan 31 08:11:45 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] KML support
In-Reply-To: <200601311150.46599.jorn@spacetec.no>
References: <200601311150.46599.jorn@spacetec.no>
Message-ID: <931f8ea90601310511i5f0b0e94y87c9ca41c3a1c1bc@mail.gmail.com>

On 1/31/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> Hi,
>
> are there plans to implement KML/Google Earth support in ogr2ogr.
>
> KML files can have points, linestrings and polygons.
> http://www.keyhole.com/kml/kml_tut.html

Joern,

I have no plans to implement KML support.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Jan 31 09:17:39 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] compression CCITTFAX4 ?
In-Reply-To: <001601c62665$ae14a9e0$1a01a8c0@pc24>
References: <001a01c625b5$e7843f70$1a01a8c0@pc24>
	<931f8ea90601300854l1f2f2d1o2b08067e5051c1a8@mail.gmail.com>
	<001601c62665$ae14a9e0$1a01a8c0@pc24>
Message-ID: <931f8ea90601310617j4cb5196dj3249341f15b2f0e3@mail.gmail.com>

On 1/31/06, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
> 1) Get intersection of raster and window of application
> 2) Compute coordinate of intersection
> 3) Call createSubImage function
> 4) Load result image (bitmap) from disk and display it in window.
> 5) Delete tempimage

Ivan,

Do you need to have a BMP on disk in order to display it
in your window?  If you can short circuit things so that
the "load result image from disk" step actually loads directly
from the original file with one GDALDatasetRasterIO() call
you will get much better performance.  Skipping all the temp
BMP file copying to disk.  I would add the VRT mechanism isn't
always that efficient as a way of accessing data.

> createSubImage function looks like follow, this function is fragment of
> gedal_translate.exe and returns small subwindow of input raster.
>
> But problem is when I get on input this large raster.
>
> It is possible use something else then createcopy? I am not sure but
> mapserver is working properly on this raster.

I'm not sure why mapserver works on this raster.

> Is my function createSubImage correct ?

As far as I can see, it is correct though an inefficient approach.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From perrygeo at gmail.com  Tue Jan 31 12:10:38 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] KML support
In-Reply-To: <931f8ea90601310511i5f0b0e94y87c9ca41c3a1c1bc@mail.gmail.com>
References: <200601311150.46599.jorn@spacetec.no>
	<931f8ea90601310511i5f0b0e94y87c9ca41c3a1c1bc@mail.gmail.com>
Message-ID: <5383fa5e0601310910u6e9d91ben8f1904dc6c89cb82@mail.gmail.com>

Joern,

 If you need to get KML into an ogr compatible format, I came up with
a method to convert kml to a shapefile. It's just a simple shell
script that converts kml -> gml (using Christian Spanring's xslt) then
gml -> shp (using ogr2ogr).

http://www.perrygeo.net/wordpress/?p=3

Matt Perry

On 1/31/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On 1/31/06, J?rn Vegard R?snes <jorn@spacetec.no> wrote:
> > Hi,
> >
> > are there plans to implement KML/Google Earth support in ogr2ogr.
> >
> > KML files can have points, linestrings and polygons.
> > http://www.keyhole.com/kml/kml_tut.html
>
> Joern,
>
> I have no plans to implement KML support.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From rayg at daylongraphics.com  Tue Jan 31 17:13:16 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:49:59 2007
Subject: [Gdal-dev] Structure member alignment suggestion
In-Reply-To: <931f8ea90601310451rf5c1148ja1cd1adebf32e659@mail.gmail.com>
References: <43D94AC4.4050408@gov.yk.ca>
	<931f8ea90601261541ne3789c5n625ecb59d789cea6@mail.gmail.com>
	<43DA90BB.8080705@gov.yk.ca> <43DAC006.5060204@daylongraphics.com>
	<931f8ea90601300944l525c2436s7ad1800533fdb8b3@mail.gmail.com>
	<43DF54D8.8080902@daylongraphics.com>
	<931f8ea90601310451rf5c1148ja1cd1adebf32e659@mail.gmail.com>
Message-ID: <43DFE0FC.3080800@daylongraphics.com>

> The appropriate place would likely be:
>   http://www.gdal.org/gdal_building.html
> 
> But I am hesitant to complicate this page with structure packing issues,
> especially since I'm not sure what to say.

Oh, something like "When building GDAL, be sure to use the same 
structure member alignment that your application uses, otherwise the 
layout and/or size of some GDAL structures may differ between the 
library's and the application's perspective, causing subtle runtime 
errors."

Ray


