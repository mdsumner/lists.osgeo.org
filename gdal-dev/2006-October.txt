From rayg at daylongraphics.com  Sun Oct  1 01:27:19 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] Transparency in 8bit geotiffs with a color table
In-Reply-To: <6550742.post@talk.nabble.com>
References: <6550742.post@talk.nabble.com>
Message-ID: <451F51B7.7030904@daylongraphics.com>

As far as I understand the TIFF 6 spec:

Set SamplesPerPixel to 2, and BitsPerSample to [8 8], to store 8-bit 
pixels with an 8-bit alpha mask.

If you're premultplying alpha into the palette's colors, set 
ExtraSamples to 1, otherwise set it to 2.

After writing each pixel's value (the palette index), write its alpha value.

Hope this helps,
Ray


aaime74 wrote:
 > Hi,
 > I'm trying, without success, to create a geotiff, byte format, with 
the last
 > entry of the
 > color table as a transparent color (by playing with alpha), but 
apparently I
 > keep on
 > getting opaque images.
 >
 > Is there any way to get transparent output in 8bit geotiffs with a color
 > table?
 > Cheers
 > Andrea Aime




From ilanza at ceis.cujae.edu.cu  Mon Oct  2 08:13:54 2006
From: ilanza at ceis.cujae.edu.cu (ilanza@ceis.cujae.edu.cu)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] Help about gdal..
Message-ID: <1159791234.452102821d18a@ceismail.cujae.edu.cu>


 Hello friends! I starting to make a desktop GIS aplication in java, and I want
 to connect to a Web Map Server, and make the standar function for map
handling.
 
I am new using gdal, what can I do with it?
How can I use gdal functions in a java project?? Can I compile gdal libraries
into a java project?
Please, i will waiting for your answer. Thanks
Indira






---------------------------------------------------------------
Mensaje enviado con el cliente web CeisMail.
Power by HORDE (http://horde.org)
RED-CEIS 2004




__________________________________________

XIII Convenci?n Cient?fica de Ingenier?a y Arquitectura
28/noviembre al 1/diciembre de 2006
Cujae, Ciudad de la Habana, Cuba
http://www.cujae.edu.cu/eventos/convencion

From tflynch at gmail.com  Tue Oct  3 01:39:52 2006
From: tflynch at gmail.com (Tom Lynch)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] no sucess trying to build ECW for GDAL
In-Reply-To: <2d1782780609270544n156a47e9o1cab63041a3f3425@mail.gmail.com>
References: <2d1782780609270544n156a47e9o1cab63041a3f3425@mail.gmail.com>
Message-ID: <c39b2a650610022239k21047ee9j50cfd3f3fe5ac29d@mail.gmail.com>

On 9/27/06, Eduardo Patto Kanegae <epk.lists@gmail.com> wrote:Hi,

I'm under SuSE 10.1 machine trying to build ECW toolkit and then build GDAL
against it but got no sucess.

I tryed to build libecwj2-3.3 package using:

$ cd Source/NCSBuildQmake/
$ make -f Makefile-linux-shared
.... then outputs:
g++ -c -pipe -Wall -W -O2 -D_REENTRANT -fPIC  -DUNICODE -DLINUX
-D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64
-D_GNU_SOURCE -DPOSIX -D_REENTRANT -DLIBECWJ2 -I. -I../../Source/include
-I../../Source/C/NCSEcw/lcms/include -o ../../obj/linux-g++/shared/NCSJP2.o
../../Source/C/NCSEcw/NCSJP2/NCSJP2.cpp
../../Source/include/NCSString.h: In copy constructor
'CNCSString::CNCSString(const CNCSString&)':
../../Source/include/NCSString.h:41: warning: base class 'struct
std::basic_string<wchar_t, std::char_traits<wchar_t>,
std::allocator<wchar_t> >' should be explicitly initialized in the copy
constructor
../../Source/include/NCSJPCBuffer.h: At global scope:
../../Source/include/NCSJPCBuffer.h:176: error: extra qualification
'CNCSJPCBuffer::' on member 'CNCSJPCBuffer'
../../Source/include/NCSJPCBuffer.h:189: error: extra qualification
'CNCSJPCBuffer::' on member 'operator='
../../Source/include/NCSJP2FileView.h:837: error: ISO C++ forbids
declaration of 'CNCSJPCResample' with no type
../../Source/include/NCSJP2FileView.h:837: error: expected ';' before '*'
token
make: *** [../../obj/linux-g++/shared/NCSJP2.o] Error 1


Hi Eduardo,

I may have seen that issue before.  I've got a feeling that it was fixed
with a forward declaration

class CNCSJPCResample;

in NCSJP2FileView.h.  The problem didn't occur with most compilers, and it's
caused by the compiler being unaware that CNCSJPCResample is a type (and
hence anticipating it to be a variable name).

Alternatively, May I suggest you use the GNU autotools build files instead,
if convenient?  If you continue to see issues with those files I'll assist
you until you get things working.

Regards

-- 
Tom Lynch
Development, ER Mapper
Phone:      +61 8 93882900
Fax:        +61 8 93882901
Email:      tom.lynch@ermapper.com
Web:        http://www.ermapper.com
Forums:     http://forum.ermapper.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061003/f0baac62/attachment.html
From linux at celticblues.com  Tue Oct  3 11:27:52 2006
From: linux at celticblues.com (linux@celticblues.com)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] Building GDAL on 64 bit linux
Message-ID: <20061003112752.kd5t1yj7977k4kss@celticblues.com>

Is building GDAL on 64 bit linux as simple as

make ARCH=64

?

Ed


From warmerdam at pobox.com  Tue Oct  3 12:42:57 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] Building GDAL on 64 bit linux
In-Reply-To: <20061003112752.kd5t1yj7977k4kss@celticblues.com>
References: <20061003112752.kd5t1yj7977k4kss@celticblues.com>
Message-ID: <45229311.4030202@pobox.com>

linux@celticblues.com wrote:
> Is building GDAL on 64 bit linux as simple as
> 
> make ARCH=64

Ed,

Generally speaking it should be a matter of "configure ; make ; make install".
I'm not sure what ARCH=64 is supposed to do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jdjohnso at google.com  Tue Oct  3 13:50:13 2006
From: jdjohnso at google.com (John Johnson)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] no sucess trying to build ECW for GDAL
Message-ID: <d0b0f8b0610031050j16bcb3afi242b0625899dce12@mail.gmail.com>

>
>
> I'm under SuSE 10.1 machine trying to build ECW toolkit and then build
> GDAL
> against it but got no sucess.
>

Two comments:

(1)  The are three places in the ECW source code where functions are
declared in the class body that contain the class name as a qualifier. Newer
versions of gcc don't like this.

-    void CNCSJPCMarker::operator=( const class CNCSJPCMarker& src );
+    void operator=( const class CNCSJPCMarker& src );

(2) BEWARE, ECW decompression is horribly broken in MT apps on linux. The
ECW folks off-handedly admit the problem and with each release of ECW, they
claim to have cleaned up their posix threading code. Sometimes the crashes
get a little less frequent. But I can _never_ run ECW decompression in a MT
app for more than 2 minutes before the thread I/o structures start getting
corrupted. Note, this has nothing to do with using GDAL from multiple
threads. These are apps with one dedicated thread for all things GDAL, and
ECW still clobbers my other threads.
If you're trying this for a single threaded app, please ignore my comments
as the ravings of somebody who's spent _way_ too much time on this issue.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061003/3adeb2a3/attachment.html
From myicqmail at 163.com  Wed Oct  4 04:20:56 2006
From: myicqmail at 163.com (qq)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] how to get aitest_dist.zip?
Message-ID: <45236EE8.0000A3.31657@bj163app40.163.com>

 
Hi:
  
  There is a example for dealing with Arc/Info Binary Grid using GDAL ("<A href="ftp://home.gdal.org/pub/outgoing/aitest_dist.zip">aitest_dist.zip</A>" )in the website http://home.gdal.org/projects/aigrid/index.html.  But i can't download it. Does anyone tell me How can i get it ? Thanks!
   
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061004/4f8bf047/attachment.html
From warmerdam at pobox.com  Wed Oct  4 11:56:40 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] how to get aitest_dist.zip?
In-Reply-To: <45236EE8.0000A3.31657@bj163app40.163.com>
References: <45236EE8.0000A3.31657@bj163app40.163.com>
Message-ID: <4523D9B8.7090806@pobox.com>

qq wrote:
>  
> Hi:
>  
>   There is a example for dealing with Arc/Info Binary Grid using GDAL 
> ("aitest_dist.zip <ftp://home.gdal.org/pub/outgoing/aitest_dist.zip>" 
> )in the website http://home.gdal.org/projects/aigrid/index.html.  But i 
> can't download it. Does anyone tell me How can i get it ? Thanks!

qq,

I've emailed the file directly - it isn't accessable since my home
ftp server is no longer reachable from outside.  However, everything
in that file can already be found in gdal/frmts/aigrid, and the
last aitest_dist.zip is somewhat out of date relative to the code in
GDAL - so I'd suggest looking at the gdal code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct  4 12:27:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] no sucess trying to build ECW for GDAL
In-Reply-To: <d0b0f8b0610031050j16bcb3afi242b0625899dce12@mail.gmail.com>
References: <d0b0f8b0610031050j16bcb3afi242b0625899dce12@mail.gmail.com>
Message-ID: <4523E0EF.90301@pobox.com>


Folks,

All I would add is that I've now built the new libecw with gcc 3.3.3 and
it seems to build, and install fine.  I build GDAL against it with no problem
and the ecw.py autotest passes.  This on Intel Linux.

Perhaps a brief beta cycle before final release could have identified the
problems with newer gcc's!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct  4 13:12:40 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
Message-ID: <4523EB88.4040601@pobox.com>

Folks,

I have received client funding for a new driver for GDAL, with
GDAL acting as a WCS client.  The proposal (less the pricing)
is included below.  Normally, I'd just launch into something like
this and announce it upon completion, but it occurs to me that
perhaps I should be requesting permission from PSC to add a new
driver since it represents "Adding a substantial amount of new
code" per RFC 1.  I'm not sure this needs to be written as an RFC
though.

So, I hereby request permission from the GDAL PSC to implement the
below described read-only WCS client driver.  Feedback on technical
details is also welcome.



	WCS Client Driver for GDAL
	==========================

Purpose
=======

To implement a new GDAL driver for accessing a remote WCS coverage
in a manner analygous to any local raster dataset.


Technical Details
=================

Overall
-------

The WCS coverage driver will read a service description file to establish
the parameters it requires to make GetCoverage calls on a WCS server.  If
the the service description file lacks DescribeCoverage information for
the coverage, the driver will invoke DescribeCoverage, and fill in the
service description file on disk.

Specification Features
----------------------

Version:
  o The driver will support WCS version 1.0.0.
  o The driver will support WCS version 1.1.0 based on current draft. (Phase 2)
  o The driver will *not* support WCS version 0.7.

Encodings:
  o The driver will support GET keyword/value requests.
  o The driver will *not* support POST XML requests.

Georeferencing:
  o The driver will support coordinate systems defined only in "EPSG:xyz",
    "AUTO:xyz" or "OGC:xyz" formats, not GML CRS encodings.
  o The driver will support georeferencing information for grids only if
    it is presented as a RectifiedGrid element in the DescribeCoverage.

NullValues:
  o The driver will support only one "singleValue" null values.  It will
    not support multiple singleValues, nor intervals.

SupportedFormats:
  o The driver will support images returned in GeoTIFF, DTED and NITF
    formats.  Other formats will also be supported if GDAL drivers exist
    (such as HDF-EOS if GDAL is configured with HDF-EOS format support).
    At this time GML coverage responses will *not* be supported.
  o The driver will support multi-part mime bundles as a mechanism to
    return multiple files (such as JPEG+world file).  (Phase 2)

Interpolation:
  o The driver will default to use of nearest neighbour interpolation.

Time/Parameter Support:
  o Supported via overrides in the Service Description File.


Service Description File
------------------------

The service description file is an XML format file that can hold all the
information GDAL requires to access a WCS coverage, as well as various
optional items that can be used to control particular behaviors.

It may include:

  1) The service URL - the base url to which DescribeCoverage and
     GetCoverage requests is made.

  2) The result of the DescribeCoverage request for the coverage.  This
     includes the spatial extents, and resolution.

  3) Override values for various parameters, including interpolation,
     and request format.

  4) The pixel data type for the coverage.

  5) Request values for time and other parameter dimensions.

  6) The coordinate system in Well Known Text format (overrides coordinate
     system information in the DescribeCoverage).

  7) The geotransform for the coverage (overrides values in the
     DescribeCoverage).

  8) A preferred block size, and other reading strategy information that
     may affect performance.


Remote Access Strategies
------------------------

Getting respectable performance for client applications accessing remote
WCS servers will in large part depend on the approach taken to turning
local requests into remote requests.  In particular, because some GDAL
client applications take a fine grained approach to requesting data from
drivers, it can be very helpful to aggregate several requests based on
some blocking scheme.  But other applications may make single large
read requests of exactly all the data required.  It is desirable to handle
these as a single request to the remote WCS server that pull back just
the desired data.

Because the of diversity of situations several read strategies will be
supported.

1) Block oriented with caching.  All requests to the remote server will
made based on the block size, and the blocks will be cached normally in
the GDAL memory block cache.  The default block size should be substantial,
perhaps 2MB blocks the width of the image.

2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request will result in a
remote GetCoverage request at the resolution and for the exact region
requested.  Because of the irregular nature of requests, caching is
impractical.

3) Hybrid.  Block oriented with caching will be used for smallish requests,
while very large RasterIO() requests will be done as an immediate call but
expanded to block boundaries and the result pushed into the block cache.  The
benefit is that several blocks may be handled in a single request.

The default operation will be to use the Hybrid mode.  Specific strategies
and block sizes can be forced via the service description file.

Overviews
---------

WCS servers will be represented to the client application as having power
of 2 reduced resolution overview layers.  When using block oriented IO,
requests will be made at reduced resolutions based on the overview levels
when appropriate.

Other Issues
------------

1) The DescribeCoverage information does not include any clue as to
the actual pixel data type of data.  In order for GDALOpen() to return
for a WCS based on a service description file that contains only the url,
it will be necessary to perform a DescribeCoverage(), and also to fetch
a small sample file to establish the pixel data type.

2) GDAL currently supports opening several file formats from "in memory"
buffers.  Other file formats do not support this.  As part of this project,
the driver will first attempt to open the returned datasets using the
in-memory mechanism.  If that fails, the data will be written to a temporary
file on disk for access.  Suitable logic for placing temporary files will
be needed.

3) The WCS client capability will need to be able to do remote HTTP requests.
I have used the curl open source library (http://curl.haxx.se/libcurl)
in several projects very successfully, and would plan to use it for GDAL
WCS as well.  It will be a requirement for building the WCS support.


Testing
=======

The WCS client will be tested against several WCS servers, including
hopefully UMN MapServer, IONIC Red Spider, Cubewerx, and PCI Geomatics
WCS servers.  The GDAL "autotest" suite will also be extended with test
scripts for the WCS client driver operating against stable public WCS
servers.


Documentation
=============

Standard "user" documentation will be written for the WCS driver in HTML
format.  It will include a detailed specification for the service description
file, and all it's parameters.


Intellectual Property
=====================

The WCS driver will become a regular part of the GDAL library, and it's
source code and documentation will be released under the normal GDAL
open source license.


Timetable
=========

Phase 1 (essentially WCS 1.0.0) will be completed within 5 weeks of
project approval.

Phase 2 (WCS 1.1.0) will be completed within 7 weeks of phase 1 completion
if approved.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bartvde at osgis.nl  Wed Oct  4 13:36:51 2006
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <4523EB88.4040601@pobox.com>
References: <4523EB88.4040601@pobox.com>
Message-ID: <4523F133.7070101@osgis.nl>

Hi Frank,

very interesting!

I assume this will be available through Mapserver as well?

Best regards,
Bart

Frank Warmerdam schreef:
> Folks,
>
> I have received client funding for a new driver for GDAL, with
> GDAL acting as a WCS client.  The proposal (less the pricing)
> is included below.  Normally, I'd just launch into something like
> this and announce it upon completion, but it occurs to me that
> perhaps I should be requesting permission from PSC to add a new
> driver since it represents "Adding a substantial amount of new
> code" per RFC 1.  I'm not sure this needs to be written as an RFC
> though.
>
> So, I hereby request permission from the GDAL PSC to implement the
> below described read-only WCS client driver.  Feedback on technical
> details is also welcome.
>
>
>
>     WCS Client Driver for GDAL
>     ==========================
>
> Purpose
> =======
>
> To implement a new GDAL driver for accessing a remote WCS coverage
> in a manner analygous to any local raster dataset.
>
>
> Technical Details
> =================
>
> Overall
> -------
>
> The WCS coverage driver will read a service description file to establish
> the parameters it requires to make GetCoverage calls on a WCS server.  If
> the the service description file lacks DescribeCoverage information for
> the coverage, the driver will invoke DescribeCoverage, and fill in the
> service description file on disk.
>
> Specification Features
> ----------------------
>
> Version:
>  o The driver will support WCS version 1.0.0.
>  o The driver will support WCS version 1.1.0 based on current draft. 
> (Phase 2)
>  o The driver will *not* support WCS version 0.7.
>
> Encodings:
>  o The driver will support GET keyword/value requests.
>  o The driver will *not* support POST XML requests.
>
> Georeferencing:
>  o The driver will support coordinate systems defined only in "EPSG:xyz",
>    "AUTO:xyz" or "OGC:xyz" formats, not GML CRS encodings.
>  o The driver will support georeferencing information for grids only if
>    it is presented as a RectifiedGrid element in the DescribeCoverage.
>
> NullValues:
>  o The driver will support only one "singleValue" null values.  It will
>    not support multiple singleValues, nor intervals.
>
> SupportedFormats:
>  o The driver will support images returned in GeoTIFF, DTED and NITF
>    formats.  Other formats will also be supported if GDAL drivers exist
>    (such as HDF-EOS if GDAL is configured with HDF-EOS format support).
>    At this time GML coverage responses will *not* be supported.
>  o The driver will support multi-part mime bundles as a mechanism to
>    return multiple files (such as JPEG+world file).  (Phase 2)
>
> Interpolation:
>  o The driver will default to use of nearest neighbour interpolation.
>
> Time/Parameter Support:
>  o Supported via overrides in the Service Description File.
>
>
> Service Description File
> ------------------------
>
> The service description file is an XML format file that can hold all the
> information GDAL requires to access a WCS coverage, as well as various
> optional items that can be used to control particular behaviors.
>
> It may include:
>
>  1) The service URL - the base url to which DescribeCoverage and
>     GetCoverage requests is made.
>
>  2) The result of the DescribeCoverage request for the coverage.  This
>     includes the spatial extents, and resolution.
>
>  3) Override values for various parameters, including interpolation,
>     and request format.
>
>  4) The pixel data type for the coverage.
>
>  5) Request values for time and other parameter dimensions.
>
>  6) The coordinate system in Well Known Text format (overrides coordinate
>     system information in the DescribeCoverage).
>
>  7) The geotransform for the coverage (overrides values in the
>     DescribeCoverage).
>
>  8) A preferred block size, and other reading strategy information that
>     may affect performance.
>
>
> Remote Access Strategies
> ------------------------
>
> Getting respectable performance for client applications accessing remote
> WCS servers will in large part depend on the approach taken to turning
> local requests into remote requests.  In particular, because some GDAL
> client applications take a fine grained approach to requesting data from
> drivers, it can be very helpful to aggregate several requests based on
> some blocking scheme.  But other applications may make single large
> read requests of exactly all the data required.  It is desirable to 
> handle
> these as a single request to the remote WCS server that pull back just
> the desired data.
>
> Because the of diversity of situations several read strategies will be
> supported.
>
> 1) Block oriented with caching.  All requests to the remote server will
> made based on the block size, and the blocks will be cached normally in
> the GDAL memory block cache.  The default block size should be 
> substantial,
> perhaps 2MB blocks the width of the image.
>
> 2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request will result 
> in a
> remote GetCoverage request at the resolution and for the exact region
> requested.  Because of the irregular nature of requests, caching is
> impractical.
>
> 3) Hybrid.  Block oriented with caching will be used for smallish 
> requests,
> while very large RasterIO() requests will be done as an immediate call 
> but
> expanded to block boundaries and the result pushed into the block 
> cache.  The
> benefit is that several blocks may be handled in a single request.
>
> The default operation will be to use the Hybrid mode.  Specific 
> strategies
> and block sizes can be forced via the service description file.
>
> Overviews
> ---------
>
> WCS servers will be represented to the client application as having power
> of 2 reduced resolution overview layers.  When using block oriented IO,
> requests will be made at reduced resolutions based on the overview levels
> when appropriate.
>
> Other Issues
> ------------
>
> 1) The DescribeCoverage information does not include any clue as to
> the actual pixel data type of data.  In order for GDALOpen() to return
> for a WCS based on a service description file that contains only the url,
> it will be necessary to perform a DescribeCoverage(), and also to fetch
> a small sample file to establish the pixel data type.
>
> 2) GDAL currently supports opening several file formats from "in memory"
> buffers.  Other file formats do not support this.  As part of this 
> project,
> the driver will first attempt to open the returned datasets using the
> in-memory mechanism.  If that fails, the data will be written to a 
> temporary
> file on disk for access.  Suitable logic for placing temporary files will
> be needed.
>
> 3) The WCS client capability will need to be able to do remote HTTP 
> requests.
> I have used the curl open source library (http://curl.haxx.se/libcurl)
> in several projects very successfully, and would plan to use it for GDAL
> WCS as well.  It will be a requirement for building the WCS support.
>
>
> Testing
> =======
>
> The WCS client will be tested against several WCS servers, including
> hopefully UMN MapServer, IONIC Red Spider, Cubewerx, and PCI Geomatics
> WCS servers.  The GDAL "autotest" suite will also be extended with test
> scripts for the WCS client driver operating against stable public WCS
> servers.
>
>
> Documentation
> =============
>
> Standard "user" documentation will be written for the WCS driver in HTML
> format.  It will include a detailed specification for the service 
> description
> file, and all it's parameters.
>
>
> Intellectual Property
> =====================
>
> The WCS driver will become a regular part of the GDAL library, and it's
> source code and documentation will be released under the normal GDAL
> open source license.
>
>
> Timetable
> =========
>
> Phase 1 (essentially WCS 1.0.0) will be completed within 5 weeks of
> project approval.
>
> Phase 2 (WCS 1.1.0) will be completed within 7 weeks of phase 1 
> completion
> if approved.
>
> Best regards,


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


From cplist at earthlink.net  Wed Oct  4 13:40:36 2006
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <4523EB88.4040601@pobox.com>
Message-ID: <003801c6e7dc$33ee3b70$0300a8c1@latitude>

> I have received client funding for a new driver for GDAL, with
> GDAL acting as a WCS client.  The proposal (less the pricing)

Frank, this is FANTASTIC news.  I'll be paying close attention and will help
whenever and wherever possible (likely from a testing point of view).

Charlton



From Tom.Kralidis at ec.gc.ca  Wed Oct  4 13:45:37 2006
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
Message-ID: <2576812186CDD411BF1500508B6DCE950FF39EF8@ecnwri1.ontario.int.ec.gc.ca>


Hi,

(jumping up and down -- good news!).

This will undoubtedly increase the usage of WCS servers.

Though I'm not a part of the PSC, I provide the following comments
(interleaved): 

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Frank Warmerdam
> Sent: 04 October, 2006 1:13 PM
> To: gdal-dev
> Subject: [Gdal-dev] WCS Client Driver
> 
> Folks,
> 
> I have received client funding for a new driver for GDAL, 
> with GDAL acting as a WCS client.  The proposal (less the 
> pricing) is included below.  Normally, I'd just launch into 
> something like this and announce it upon completion, but it 
> occurs to me that perhaps I should be requesting permission 
> from PSC to add a new driver since it represents "Adding a 
> substantial amount of new code" per RFC 1.  I'm not sure this 
> needs to be written as an RFC though.
> 
> So, I hereby request permission from the GDAL PSC to 
> implement the below described read-only WCS client driver.  
> Feedback on technical details is also welcome.
> 
> 
> 
> 	WCS Client Driver for GDAL
> 	==========================
> 
> Purpose
> =======
> 
> To implement a new GDAL driver for accessing a remote WCS 
> coverage in a manner analygous to any local raster dataset.
> 
> 
> Technical Details
> =================
> 
> Overall
> -------
> 
> The WCS coverage driver will read a service description file 
> to establish the parameters it requires to make GetCoverage 
> calls on a WCS server.  If the the service description file 
> lacks DescribeCoverage information for the coverage, the 
> driver will invoke DescribeCoverage, and fill in the service 
> description file on disk.
> 

In terms of MapServer, this is a bit different than the other OWS client
approaches (i.e. the code is in MapServer itself for WMS, WFS client).
I would be interested in how this functionality will "roll up" to
MapServer and what the relationship is.  Just want to make sure there
are little/no duplications.

> Specification Features
> ----------------------
> 
> Version:
>   o The driver will support WCS version 1.0.0.
>   o The driver will support WCS version 1.1.0 based on 
> current draft. (Phase 2)

I'm pretty sure 1.1.0 implements the owsCommon specification.  It would
be valuable when implementing anything from owsCommon that it can be
reused in some way.  I could see this being leveraged in MapServer (even
as a code copy/paste) for the logic.

>   o The driver will *not* support WCS version 0.7.
> 
> Encodings:
>   o The driver will support GET keyword/value requests.
>   o The driver will *not* support POST XML requests.
> 
> Georeferencing:
>   o The driver will support coordinate systems defined only 
> in "EPSG:xyz",
>     "AUTO:xyz" or "OGC:xyz" formats, not GML CRS encodings.
>   o The driver will support georeferencing information for 
> grids only if
>     it is presented as a RectifiedGrid element in the 
> DescribeCoverage.
> 
> NullValues:
>   o The driver will support only one "singleValue" null 
> values.  It will
>     not support multiple singleValues, nor intervals.
> 
> SupportedFormats:
>   o The driver will support images returned in GeoTIFF, DTED and NITF
>     formats.  Other formats will also be supported if GDAL 
> drivers exist
>     (such as HDF-EOS if GDAL is configured with HDF-EOS 
> format support).
>     At this time GML coverage responses will *not* be supported.
>   o The driver will support multi-part mime bundles as a mechanism to
>     return multiple files (such as JPEG+world file).  (Phase 2)
> 
> Interpolation:
>   o The driver will default to use of nearest neighbour interpolation.
> 
> Time/Parameter Support:
>   o Supported via overrides in the Service Description File.
> 
> 
> Service Description File
> ------------------------
> 
> The service description file is an XML format file that can 
> hold all the information GDAL requires to access a WCS 
> coverage, as well as various optional items that can be used 
> to control particular behaviors.
> 
> It may include:
> 
>   1) The service URL - the base url to which DescribeCoverage and
>      GetCoverage requests is made.
> 
>   2) The result of the DescribeCoverage request for the 
> coverage.  This
>      includes the spatial extents, and resolution.
> 
>   3) Override values for various parameters, including interpolation,
>      and request format.
> 
>   4) The pixel data type for the coverage.
> 
>   5) Request values for time and other parameter dimensions.
> 
>   6) The coordinate system in Well Known Text format 
> (overrides coordinate
>      system information in the DescribeCoverage).
> 
>   7) The geotransform for the coverage (overrides values in the
>      DescribeCoverage).
> 
>   8) A preferred block size, and other reading strategy 
> information that
>      may affect performance.
> 

Frank: you may want to look at what we did for the OWSContext work for
binding to a WCS in a context doc.

> 
> Remote Access Strategies
> ------------------------
> 
> Getting respectable performance for client applications 
> accessing remote WCS servers will in large part depend on the 
> approach taken to turning local requests into remote 
> requests.  In particular, because some GDAL client 
> applications take a fine grained approach to requesting data 
> from drivers, it can be very helpful to aggregate several 
> requests based on some blocking scheme.  But other 
> applications may make single large read requests of exactly 
> all the data required.  It is desirable to handle these as a 
> single request to the remote WCS server that pull back just 
> the desired data.
> 
> Because the of diversity of situations several read 
> strategies will be supported.
> 
> 1) Block oriented with caching.  All requests to the remote 
> server will made based on the block size, and the blocks will 
> be cached normally in the GDAL memory block cache.  The 
> default block size should be substantial, perhaps 2MB blocks 
> the width of the image.
> 
> 2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request 
> will result in a remote GetCoverage request at the resolution 
> and for the exact region requested.  Because of the irregular 
> nature of requests, caching is impractical.
> 
> 3) Hybrid.  Block oriented with caching will be used for 
> smallish requests, while very large RasterIO() requests will 
> be done as an immediate call but expanded to block boundaries 
> and the result pushed into the block cache.  The benefit is 
> that several blocks may be handled in a single request.
> 
> The default operation will be to use the Hybrid mode.  
> Specific strategies and block sizes can be forced via the 
> service description file.
> 
> Overviews
> ---------
> 
> WCS servers will be represented to the client application as 
> having power of 2 reduced resolution overview layers.  When 
> using block oriented IO, requests will be made at reduced 
> resolutions based on the overview levels when appropriate.
> 
> Other Issues
> ------------
> 
> 1) The DescribeCoverage information does not include any clue 
> as to the actual pixel data type of data.  In order for 
> GDALOpen() to return for a WCS based on a service description 
> file that contains only the url, it will be necessary to 
> perform a DescribeCoverage(), and also to fetch a small 
> sample file to establish the pixel data type.
> 
> 2) GDAL currently supports opening several file formats from 
> "in memory"
> buffers.  Other file formats do not support this.  As part of 
> this project, the driver will first attempt to open the 
> returned datasets using the in-memory mechanism.  If that 
> fails, the data will be written to a temporary file on disk 
> for access.  Suitable logic for placing temporary files will 
> be needed.
> 
> 3) The WCS client capability will need to be able to do 
> remote HTTP requests.
> I have used the curl open source library 
> (http://curl.haxx.se/libcurl) in several projects very 
> successfully, and would plan to use it for GDAL WCS as well.  
> It will be a requirement for building the WCS support.
> 
> 
> Testing
> =======
> 
> The WCS client will be tested against several WCS servers, 
> including hopefully UMN MapServer, IONIC Red Spider, 
> Cubewerx, and PCI Geomatics WCS servers.  The GDAL "autotest" 
> suite will also be extended with test scripts for the WCS 
> client driver operating against stable public WCS servers.
> 
> 
> Documentation
> =============
> 
> Standard "user" documentation will be written for the WCS 
> driver in HTML format.  It will include a detailed 
> specification for the service description file, and all it's 
> parameters.
> 
> 
> Intellectual Property
> =====================
> 
> The WCS driver will become a regular part of the GDAL 
> library, and it's source code and documentation will be 
> released under the normal GDAL open source license.
> 
> 
> Timetable
> =========
> 
> Phase 1 (essentially WCS 1.0.0) will be completed within 5 
> weeks of project approval.
> 
> Phase 2 (WCS 1.1.0) will be completed within 7 weeks of phase 
> 1 completion if approved.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
> http://osgeo.org
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Wed Oct  4 14:00:50 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <2576812186CDD411BF1500508B6DCE950FF39EF8@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE950FF39EF8@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <4523F6D2.9060305@pobox.com>

Kralidis,Tom [Burlington] wrote:
> Hi,
> 
> (jumping up and down -- good news!).
> 
> This will undoubtedly increase the usage of WCS servers.
> 
> Though I'm not a part of the PSC, I provide the following comments
> (interleaved): 
...
>> The WCS coverage driver will read a service description file 
>> to establish the parameters it requires to make GetCoverage 
>> calls on a WCS server.  If the the service description file 
>> lacks DescribeCoverage information for the coverage, the 
>> driver will invoke DescribeCoverage, and fill in the service 
>> description file on disk.
>>
> 
> In terms of MapServer, this is a bit different than the other OWS client
> approaches (i.e. the code is in MapServer itself for WMS, WFS client).
> I would be interested in how this functionality will "roll up" to
> MapServer and what the relationship is.  Just want to make sure there
> are little/no duplications.

Tom,

This is indeed quite different from the approach in MapServer for
WFS and WMS client support.  Mainly this different is because the
client isn't using GDAL from MapServer, so I needed to implement a
GDAL-only approach.

So, in a sense there will be some duplication of mechanisms but
I don't see it as easily avoidable.

>> Specification Features
>> ----------------------
>>
>> Version:
>>   o The driver will support WCS version 1.0.0.
>>   o The driver will support WCS version 1.1.0 based on 
>> current draft. (Phase 2)
> 
> I'm pretty sure 1.1.0 implements the owsCommon specification.  It would
> be valuable when implementing anything from owsCommon that it can be
> reused in some way.  I could see this being leveraged in MapServer (even
> as a code copy/paste) for the logic.

I'm not sure how easy sharing will be (other than as example code).

BTW, what version(s) of WMS and WFS use owsCommon?  It might make sense
at some point to implement WFS and WMS client support in OGR and GDAL
respectively, and some leverage of owsCommon might apply at that point.

> Frank: you may want to look at what we did for the OWSContext work for
> binding to a WCS in a context doc.

Could you provide a specific pointer for me, and what I should be
looking for?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct  4 14:02:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <003801c6e7dc$33ee3b70$0300a8c1@latitude>
References: <003801c6e7dc$33ee3b70$0300a8c1@latitude>
Message-ID: <4523F727.2070006@pobox.com>

Charlton Purvis wrote:
>> I have received client funding for a new driver for GDAL, with
>> GDAL acting as a WCS client.  The proposal (less the pricing)
> 
> Frank, this is FANTASTIC news.  I'll be paying close attention and will help
> whenever and wherever possible (likely from a testing point of view).

Charlton,

Excellent.  I'll make sure to announce here when the first reasonably
workable version is in place.  At that point testing would be valuable.
I'll also be trying to collect a variety of public WCS servers (based on
distinct back end implementations) for compatability testing against.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Tom.Kralidis at ec.gc.ca  Wed Oct  4 14:18:47 2006
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
Message-ID: <2576812186CDD411BF1500508B6DCE950FF39F08@ecnwri1.ontario.int.ec.gc.ca>

 

> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Sent: 04 October, 2006 2:01 PM
> To: Kralidis,Tom [Burlington]
> Cc: gdal-dev; Bart van den Eijnden (OSGIS)
> Subject: Re: [Gdal-dev] WCS Client Driver
> 
> Kralidis,Tom [Burlington] wrote:
> > Hi,
> > 
> > (jumping up and down -- good news!).
> > 
> > This will undoubtedly increase the usage of WCS servers.
> > 
> > Though I'm not a part of the PSC, I provide the following comments
> > (interleaved): 
> ...
> >> The WCS coverage driver will read a service description file to 
> >> establish the parameters it requires to make GetCoverage 
> calls on a 
> >> WCS server.  If the the service description file lacks 
> >> DescribeCoverage information for the coverage, the driver 
> will invoke 
> >> DescribeCoverage, and fill in the service description file on disk.
> >>
> > 
> > In terms of MapServer, this is a bit different than the other OWS 
> > client approaches (i.e. the code is in MapServer itself for 
> WMS, WFS client).
> > I would be interested in how this functionality will "roll up" to 
> > MapServer and what the relationship is.  Just want to make 
> sure there 
> > are little/no duplications.
> 
> Tom,
> 
> This is indeed quite different from the approach in MapServer 
> for WFS and WMS client support.  Mainly this different is 
> because the client isn't using GDAL from MapServer, so I 
> needed to implement a GDAL-only approach.
> 
> So, in a sense there will be some duplication of mechanisms 
> but I don't see it as easily avoidable.
> 
> >> Specification Features
> >> ----------------------
> >>
> >> Version:
> >>   o The driver will support WCS version 1.0.0.
> >>   o The driver will support WCS version 1.1.0 based on 
> current draft. 
> >> (Phase 2)
> > 
> > I'm pretty sure 1.1.0 implements the owsCommon specification.  It 
> > would be valuable when implementing anything from owsCommon that it 
> > can be reused in some way.  I could see this being leveraged in 
> > MapServer (even as a code copy/paste) for the logic.
> 
> I'm not sure how easy sharing will be (other than as example code).
> 
> BTW, what version(s) of WMS and WFS use owsCommon?  It might 
> make sense at some point to implement WFS and WMS client 
> support in OGR and GDAL respectively, and some leverage of 
> owsCommon might apply at that point.
> 

OGC:WMS does not use it yet, but will (1.4.0?).  OGC:WFS 1.1.0 uses
owsCommon (http://schemas.opengis.net/wfs/1.1.0/wfs.xsd).

> > Frank: you may want to look at what we did for the 
> OWSContext work for 
> > binding to a WCS in a context doc.
> 
> Could you provide a specific pointer for me, and what I 
> should be looking for?
> 

If you're an OGC member, an example is available at:

https://portal.opengeospatial.org/wiki/twiki/bin/view/OWSContextie/Web

Else, here's an XML snippet of what a WCS Coverge binding would look
like:

		<Coverage hidden="0">
			<Server service="OGC:WCS" version="1.0.0"
title="Boston Indexed Geotiff imagery">
				<OnlineResource method="GET"
xlink:type="simple"
xlink:href="http://webservices.ionicsoft.com/ionicwcs/coverage/BOSTONPOO
L"/>
			</Server>
			<Name>MOD_Grid_L2g_2d</Name>
			<Title>MOD_Grid_L2g_2d Coverage Offering</Title>
			<Abstract>MOD_Grid_L2g_2d Coverage Offering,
MOD09GHK data</Abstract>
			<MetadataURL format="text/xml">
				<OnlineResource xlink:type="simple"
xlink:href="http://webservices.ionicsoft.com/ionicwcs/coverage/BOSTONPOO
L/REQUEST/getdir/DIR/metadata/DATA/LPR/BOSTONPOOL/MOD_Grid_L2g_2d.xml"/>
			</MetadataURL>
			<SRS>EPSG:4326</SRS>
			<FormatList>
				<Format current="1">GEOTIFF</Format>
			</FormatList>
			<DimensionList>
				<Dimension name="time"
units="ISO8601">2003-12-01T14:55:00Z/2003-12-03T20:50:00Z</Dimension>
			</DimensionList>
			<ParameterList>
				<Parameter>
					<param:kvp name="band"
value="band1"/>
				</Parameter>
				<Parameter>
					<param:kvp name="interpolation"
value="nearest neighbor"/>
				</Parameter>
			</ParameterList>
		</Coverage>


From dmorissette at mapgears.com  Wed Oct  4 16:54:09 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <4523EB88.4040601@pobox.com>
References: <4523EB88.4040601@pobox.com>
Message-ID: <45241F71.9050009@mapgears.com>

See question below...

Frank Warmerdam wrote:
> 
> Because the of diversity of situations several read strategies will be
> supported.
> 
> 1) Block oriented with caching.  All requests to the remote server will
> made based on the block size, and the blocks will be cached normally in
> the GDAL memory block cache.  The default block size should be substantial,
> perhaps 2MB blocks the width of the image.
> 
> 2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request will result in a
> remote GetCoverage request at the resolution and for the exact region
> requested.  Because of the irregular nature of requests, caching is
> impractical.
> 
> 3) Hybrid.  Block oriented with caching will be used for smallish requests,
> while very large RasterIO() requests will be done as an immediate call but
> expanded to block boundaries and the result pushed into the block 
> cache.  The
> benefit is that several blocks may be handled in a single request.
> 
> The default operation will be to use the Hybrid mode.  Specific strategies
> and block sizes can be forced via the service description file.
> 

If I'm not mistaken, none of these approach will allow caching that can 
benefit stateless applications such as MapServer. i.e. if I use the 
GDAL-WCS driver to access a remote WCS with MapServer, since each 
request launches a new process then I won't get any caching, right?

While it is true that most requests to MapServer apps use different 
BBOXes, it is very common to have an initial view that is always the 
same or to have a set of predefined views and these predefined views may 
account for a large portion of all hits to a server, so caching can be 
beneficial in that case.

Would it be possible to have another method, possibly an extension of 
the hybrid method, but that caches the images on disk. This way, image 
blocks that are used frequently by apps such as MapServer would already 
be on disk.

The implementation could be as simple as using the WCS request data (GET 
URL) to forge the filename of the file in the cache. Then before issuing 
a request you check if you already have the file on disk. This is how 
the WFS client code does caching in MapServer.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Wed Oct  4 17:20:20 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <45241F71.9050009@mapgears.com>
References: <4523EB88.4040601@pobox.com> <45241F71.9050009@mapgears.com>
Message-ID: <45242594.3040504@pobox.com>

Daniel Morissette wrote:
> See question below...
> 
> Frank Warmerdam wrote:
>>
>> Because the of diversity of situations several read strategies will be
>> supported.
>>
>> 1) Block oriented with caching.  All requests to the remote server will
>> made based on the block size, and the blocks will be cached normally in
>> the GDAL memory block cache.  The default block size should be 
>> substantial,
>> perhaps 2MB blocks the width of the image.
>>
>> 2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request will result 
>> in a
>> remote GetCoverage request at the resolution and for the exact region
>> requested.  Because of the irregular nature of requests, caching is
>> impractical.
>>
>> 3) Hybrid.  Block oriented with caching will be used for smallish 
>> requests,
>> while very large RasterIO() requests will be done as an immediate call 
>> but
>> expanded to block boundaries and the result pushed into the block 
>> cache.  The
>> benefit is that several blocks may be handled in a single request.
>>
>> The default operation will be to use the Hybrid mode.  Specific 
>> strategies
>> and block sizes can be forced via the service description file.
>>
> 
> If I'm not mistaken, none of these approach will allow caching that can 
> benefit stateless applications such as MapServer. i.e. if I use the 
> GDAL-WCS driver to access a remote WCS with MapServer, since each 
> request launches a new process then I won't get any caching, right?
> 
> While it is true that most requests to MapServer apps use different 
> BBOXes, it is very common to have an initial view that is always the 
> same or to have a set of predefined views and these predefined views may 
> account for a large portion of all hits to a server, so caching can be 
> beneficial in that case.
> 
> Would it be possible to have another method, possibly an extension of 
> the hybrid method, but that caches the images on disk. This way, image 
> blocks that are used frequently by apps such as MapServer would already 
> be on disk.
> 
> The implementation could be as simple as using the WCS request data (GET 
> URL) to forge the filename of the file in the cache. Then before issuing 
> a request you check if you already have the file on disk. This is how 
> the WFS client code does caching in MapServer.

Daniel,

Yes, it is true that local caching could be done as you describe.  I think
it is worth keeping in mind as an additional strategy though I must say I'm
not entirely keen on having to manage a cache on disk.

For stateful applications (including MapServer in FastCGI mode if we
could do some stuff to defer closing raster files) use of the "block oriented
with caching" strategy effectively accomplishing something similar in memory.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct  4 22:08:16 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] New GDAL Icons
Message-ID: <45246910.9060704@pobox.com>

Folks,

I have committed new GDAL icons in SVG format in the gdal/data
directory.  I've also regenerated the gdalicon.png from the new
design.

The new design was prepared by Marin Byrne (David Bitner's wife), for
which I'm very appreciative.

The design is very similar to the original by Martin Daly - his contribution
is not forgotten!

I'm not very creative myself, but eventually I'd like to build the icon into
the web pages more prominently than the little 32x32 icon on the main page.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Thu Oct  5 14:20:03 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <45242594.3040504@pobox.com>
References: <4523EB88.4040601@pobox.com> <45241F71.9050009@mapgears.com>
	<45242594.3040504@pobox.com>
Message-ID: <45254CD3.1070700@mapgears.com>

Sounds good. +1 from me.

Daniel


Frank Warmerdam wrote:
> Daniel Morissette wrote:
>> See question below...
>>
>> Frank Warmerdam wrote:
>>>
>>> Because the of diversity of situations several read strategies will be
>>> supported.
>>>
>>> 1) Block oriented with caching.  All requests to the remote server will
>>> made based on the block size, and the blocks will be cached normally in
>>> the GDAL memory block cache.  The default block size should be 
>>> substantial,
>>> perhaps 2MB blocks the width of the image.
>>>
>>> 2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request will result 
>>> in a
>>> remote GetCoverage request at the resolution and for the exact region
>>> requested.  Because of the irregular nature of requests, caching is
>>> impractical.
>>>
>>> 3) Hybrid.  Block oriented with caching will be used for smallish 
>>> requests,
>>> while very large RasterIO() requests will be done as an immediate 
>>> call but
>>> expanded to block boundaries and the result pushed into the block 
>>> cache.  The
>>> benefit is that several blocks may be handled in a single request.
>>>
>>> The default operation will be to use the Hybrid mode.  Specific 
>>> strategies
>>> and block sizes can be forced via the service description file.
>>>
>>
>> If I'm not mistaken, none of these approach will allow caching that 
>> can benefit stateless applications such as MapServer. i.e. if I use 
>> the GDAL-WCS driver to access a remote WCS with MapServer, since each 
>> request launches a new process then I won't get any caching, right?
>>
>> While it is true that most requests to MapServer apps use different 
>> BBOXes, it is very common to have an initial view that is always the 
>> same or to have a set of predefined views and these predefined views 
>> may account for a large portion of all hits to a server, so caching 
>> can be beneficial in that case.
>>
>> Would it be possible to have another method, possibly an extension of 
>> the hybrid method, but that caches the images on disk. This way, image 
>> blocks that are used frequently by apps such as MapServer would 
>> already be on disk.
>>
>> The implementation could be as simple as using the WCS request data 
>> (GET URL) to forge the filename of the file in the cache. Then before 
>> issuing a request you check if you already have the file on disk. This 
>> is how the WFS client code does caching in MapServer.
> 
> Daniel,
> 
> Yes, it is true that local caching could be done as you describe.  I think
> it is worth keeping in mind as an additional strategy though I must say I'm
> not entirely keen on having to manage a cache on disk.
> 
> For stateful applications (including MapServer in FastCGI mode if we
> could do some stuff to defer closing raster files) use of the "block 
> oriented
> with caching" strategy effectively accomplishing something similar in 
> memory.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From hobu at iastate.edu  Thu Oct  5 15:54:50 2006
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] WCS Client Driver
In-Reply-To: <45254CD3.1070700@mapgears.com>
References: <4523EB88.4040601@pobox.com> <45241F71.9050009@mapgears.com>
	<45242594.3040504@pobox.com> <45254CD3.1070700@mapgears.com>
Message-ID: <6.2.3.4.2.20061005145400.02891000@hobu.mail.iastate.edu>

+1 from me as well.

At 01:20 PM 10/5/2006, Daniel Morissette wrote:
>Sounds good. +1 from me.
>
>Daniel
>
>
>Frank Warmerdam wrote:
>>Daniel Morissette wrote:
>>>See question below...
>>>
>>>Frank Warmerdam wrote:
>>>>
>>>>Because the of diversity of situations several read strategies will be
>>>>supported.
>>>>
>>>>1) Block oriented with caching.  All requests to the remote server will
>>>>made based on the block size, and the blocks will be cached normally in
>>>>the GDAL memory block cache.  The default block size should be substantial,
>>>>perhaps 2MB blocks the width of the image.
>>>>
>>>>2) 1:1 RasterIO() to GetCoverage. Each RasterIO() request will result in a
>>>>remote GetCoverage request at the resolution and for the exact region
>>>>requested.  Because of the irregular nature of requests, caching is
>>>>impractical.
>>>>
>>>>3) Hybrid.  Block oriented with caching will be used for smallish requests,
>>>>while very large RasterIO() requests will be done as an immediate call but
>>>>expanded to block boundaries and the result pushed into the block 
>>>>cache.  The
>>>>benefit is that several blocks may be handled in a single request.
>>>>
>>>>The default operation will be to use the Hybrid mode.  Specific strategies
>>>>and block sizes can be forced via the service description file.
>>>
>>>If I'm not mistaken, none of these approach will allow caching 
>>>that can benefit stateless applications such as MapServer. i.e. if 
>>>I use the GDAL-WCS driver to access a remote WCS with MapServer, 
>>>since each request launches a new process then I won't get any caching, right?
>>>
>>>While it is true that most requests to MapServer apps use 
>>>different BBOXes, it is very common to have an initial view that 
>>>is always the same or to have a set of predefined views and these 
>>>predefined views may account for a large portion of all hits to a 
>>>server, so caching can be beneficial in that case.
>>>
>>>Would it be possible to have another method, possibly an extension 
>>>of the hybrid method, but that caches the images on disk. This 
>>>way, image blocks that are used frequently by apps such as 
>>>MapServer would already be on disk.
>>>
>>>The implementation could be as simple as using the WCS request 
>>>data (GET URL) to forge the filename of the file in the cache. 
>>>Then before issuing a request you check if you already have the 
>>>file on disk. This is how the WFS client code does caching in MapServer.
>>Daniel,
>>Yes, it is true that local caching could be done as you describe.  I think
>>it is worth keeping in mind as an additional strategy though I must say I'm
>>not entirely keen on having to manage a cache on disk.
>>For stateful applications (including MapServer in FastCGI mode if we
>>could do some stuff to defer closing raster files) use of the "block oriented
>>with caching" strategy effectively accomplishing something similar in memory.
>>Best regards,
>
>
>--
>Daniel Morissette
>http://www.mapgears.com/
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From ricardoluis at ufs.br  Thu Oct  5 15:55:01 2006
From: ricardoluis at ufs.br (Ricardo)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] GDAL compilation with PGCHIP driver
In-Reply-To: <200610051602.k95G21lp021450@duke.maptools.org>
References: <200610051602.k95G21lp021450@duke.maptools.org>
Message-ID: <20061005195208.M5084@ufs.br>

Hi Mr. Benjamin,
I'm trying to compile the GDAL library with PGCHIP driver, under Fedora 4, 
so when I execute the " make " command it returns to me the followinh 
menssage;
 
-------------------------------------------------------------
make -C pgchip install-obj
make[2]: Entering directory `/usr/src/gdal-1.3.2/frmts/pgchip'
/bin/sh /usr/src/gdal-1.3.2/libtool --mode=compile g++ -Wall -O2 -I/usr/incl 
ude -I/usr/share/pgsql/contrib/postgis-1.1.2/lwgeom -I/usr/src/gdal-
1.3.2/port -I/usr/src/gdal-1.3.2/gcore -I/usr/src/gdal-1.3.2/alg -
I/usr/src/gdal-1.3.2/ogr -I/usr/src/gdal-1.3.2/ogr/ogrsf_frmts -c -
o ../o/pgchipdataset.o pgchipdataset. cpp
g++ -Wall -O2 -I/usr/include -I/usr/share/pgsql/contrib/postgis-
1.1.2/lwgeom -I /usr/src/gdal-1.3.2/port -I/usr/src/gdal-1.3.2/gcore -
I/usr/src/gdal-1.3.2/alg - I/usr/src/gdal-1.3.2/ogr -I/usr/src/gdal-
1.3.2/ogr/ogrsf_frmts -c pgchipdataset. cpp -fPIC -DPIC -
o ../o/.libs/pgchipdataset.o
pgchipdataset.cpp: In function 'GDALDataset* PGCHIPCreateCopy(const char*, 
GDALD ataset*, int, char**, int (*)(double, const char*, void*), void*)':
pgchipdataset.cpp:957: error: invalid conversion from 'unsigned char*' 
to 'char* '
pgchipdataset.cpp:957: error: initializing argument 2 of 'void deparse_hex
(uch ar, char*)'
pgchipdataset.cpp:964: error: invalid conversion from 'unsigned char*' 
to 'char* '
pgchipdataset.cpp:964: error: initializing argument 2 of 'void deparse_hex
(uch ar, char*)'
pgchipdataset.cpp:971: error: invalid conversion from 'unsigned char*' 
to 'char* '
pgchipdataset.cpp:971: error: initializing argument 2 of 'void deparse_hex
(uch ar, char*)'
make[2]: ** [../o/pgchipdataset.o] Erro 1
make[2]: Leaving directory `/usr/src/gdal-1.3.2/frmts/pgchip'
make[1]: ** [pgchip-install-obj] Erro 2
make[1]: Leaving directory `/usr/src/gdal-1.3.2/frmts'
make: ** [frmts-target] Erro 2
--------------------------------------------------------------------
 
May you help me?
Thank you anyway.
Ricardo Lu?s


From ricardoluis at ufs.br  Thu Oct  5 15:58:02 2006
From: ricardoluis at ufs.br (Ricardo)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] GDAL compilation with PGCHIP driver
In-Reply-To: <200610051602.k95G21lp021450@duke.maptools.org>
References: <200610051602.k95G21lp021450@duke.maptools.org>
Message-ID: <20061005195736.M12526@ufs.br>

Hi all,
I'm trying to compile the GDAL library with PGCHIP driver, under Fedora 4, 
so when I execute the " make " command it returns to me the followinh 
menssage;
 
-------------------------------------------------------------
make -C pgchip install-obj
make[2]: Entering directory `/usr/src/gdal-1.3.2/frmts/pgchip'
/bin/sh /usr/src/gdal-1.3.2/libtool --mode=compile g++ -Wall -O2 -I/usr/incl 
ude -I/usr/share/pgsql/contrib/postgis-1.1.2/lwgeom -I/usr/src/gdal-
1.3.2/port -I/usr/src/gdal-1.3.2/gcore -I/usr/src/gdal-1.3.2/alg -
I/usr/src/gdal-1.3.2/ogr -I/usr/src/gdal-1.3.2/ogr/ogrsf_frmts -c -
o ../o/pgchipdataset.o pgchipdataset. cpp
g++ -Wall -O2 -I/usr/include -I/usr/share/pgsql/contrib/postgis-
1.1.2/lwgeom -I /usr/src/gdal-1.3.2/port -I/usr/src/gdal-1.3.2/gcore -
I/usr/src/gdal-1.3.2/alg - I/usr/src/gdal-1.3.2/ogr -I/usr/src/gdal-
1.3.2/ogr/ogrsf_frmts -c pgchipdataset. cpp -fPIC -DPIC -
o ../o/.libs/pgchipdataset.o
pgchipdataset.cpp: In function 'GDALDataset* PGCHIPCreateCopy(const char*, 
GDALD ataset*, int, char**, int (*)(double, const char*, void*), void*)':
pgchipdataset.cpp:957: error: invalid conversion from 'unsigned char*' 
to 'char* '
pgchipdataset.cpp:957: error: initializing argument 2 of 'void deparse_hex
(uch ar, char*)'
pgchipdataset.cpp:964: error: invalid conversion from 'unsigned char*' 
to 'char* '
pgchipdataset.cpp:964: error: initializing argument 2 of 'void deparse_hex
(uch ar, char*)'
pgchipdataset.cpp:971: error: invalid conversion from 'unsigned char*' 
to 'char* '
pgchipdataset.cpp:971: error: initializing argument 2 of 'void deparse_hex
(uch ar, char*)'
make[2]: ** [../o/pgchipdataset.o] Erro 1
make[2]: Leaving directory `/usr/src/gdal-1.3.2/frmts/pgchip'
make[1]: ** [pgchip-install-obj] Erro 2
make[1]: Leaving directory `/usr/src/gdal-1.3.2/frmts'
make: ** [frmts-target] Erro 2
--------------------------------------------------------------------
 
May you help me?
Thank you anyway.
Ricardo Lu?s

From wilken at ohb-system.de  Fri Oct  6 03:16:52 2006
From: wilken at ohb-system.de (Holger Wilken)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] easy way to create tile index of dted (dt0) files?
Message-ID: <FDEOJHHKMJJBMPHGGGCLCEPLCCAA.wilken@ohb-system.de>


I want to create a tile index of dted files (dt0) as a shapefile (shp), to show the boundaries of dted cells on my map.

So far, I have succeeded in using the steps:
- generate a file with all dt0 filenames (dir /b /s *.dt0 > all_dt0.txt)
- use the DOS FOR command in combination with gdal_translate and the all_dt0.txt file to build a geotiff for each dt0 file
- use gdaltindex on the resulting tif files to create a tile index.

my question: is there another (faster) way to create the tile index directly out of the dt0 files, without the detour via tif? 

thanks in advance

Holger




From jschwerdt at swbb.de  Fri Oct  6 02:54:08 2006
From: jschwerdt at swbb.de (Joerg Schwerdt)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] OGR DXF export crashes
Message-ID: <6674131.post@talk.nabble.com>


Hi,

I want to export some objects using OGR DXF export.  A function (see below)
is doing this job.
The function is implemented in Delphi and uses der C interface to OGR.

Everything works fine the first time I call this function.  The second (or
third) time this function 
is called the "OGR_Dr_CreateDataSource" command crashes.  (Every call of the
function uses a 
newly created empty directory.)  After restarting my program I can call the
function again once 
(or sometimes twice) without a crash and on the next call it crashes again.

Is there something missing in my function?  May be some things are not freed
properly.

The error message of my (german) Delphi is the following:
"Zugriffsverletzung bei Adresse 02F8925F in Modul 'DD_Root.dll'. Lesen von
Adresse 00040014."
This means "access violation on address 02F8925F in modul 'DD_Root.dll'.
reading address 00040014."

Thanks a lot,

J?rg Schwerdt

---------------------------------------------------------------------------------
The mentioned function:

procedure ExportDXF;
var
  hDriver: OGRSFDriverH;
  SL: tStringList;
  ptrMain: pointer;
  datasource: OGRDataSourceH;
  DateTimeStamp: string;
  APath: DLLString;
  Target: string;
  layerDefn: OGRFeatureDefnH;
  feature: OGRFeatureH;
  geometry: OGRGeometryH;
  hOGRLayer: OGRLayerH;
begin
  OGRRegisterAll;
  hDriver := OGRGetDriverByName('DXF');

  DateTimeStamp := FormatDateTime('yyyymmdd_hhnnss', Now);
  GetTempPath(APath);
  Target := IncludeTrailingPathDelimiter(APath) + 'ShapeExport_AllVisible_'+
DateTimeStamp + '\DXF\export.dxf';
  ForceDirectories(ExtractFilePath(Target));

  SL := TStringList.Create;
  SL.Add('VERSION=15');
  ptrMain := OGR_JS_SLToCStringArray(SL);
  datasource := OGR_Dr_CreateDataSource(hDriver, PChar(Target), ptrMain);
  OGR_JS_SLToCStringArray_FreePointer(SL,ptrMain);
  SL.Free;

  if (datasource<>nil) then begin
    hOGRLayer := OGR_DS_CreateLayer(datasource, pchar('Test_js'), nil,
wkbLineString, nil);
    layerDefn := OGR_L_GetLayerDefn(hOGRLayer);

    // Create a new polyline
    feature := OGR_F_Create(layerDefn);
    geometry := OGR_G_CreateGeometry(wkbLineString);
    OGR_G_AddPoint(geometry, 10.0, 20.0, 10.0);
    OGR_G_AddPoint(geometry, 20.0, 10.0, 10.0);
    OGR_G_AddPoint(geometry, 30.0, 20.0, 10.0);
    OGR_F_SetGeometryDirectly(feature, geometry);
    OGR_L_CreateFeature(hOGRLayer, feature);

    OGR_DS_Destroy(datasource);
  end; {endif}
end;

-- 
View this message in context: http://www.nabble.com/OGR-DXF-export-crashes-tf2393756.html#a6674131
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Fri Oct  6 07:11:06 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] RFC DRAFT: Unicode support in GDAL
In-Reply-To: <20060925222623.b5e9eb0a.takubo@saruga-tondara.net>
References: <29bcc0df0609210600r6ff22e94g86c61996a7eba1fe@mail.gmail.com>	<20060922052407.e13c8755.takubo@saruga-tondara.net>	<4513DD3A.8080504@loskot.net>	<20060924125805.0d43b715.takubo@saruga-tondara.net>	<451694E3.60407@loskot.net>
	<20060925222623.b5e9eb0a.takubo@saruga-tondara.net>
Message-ID: <452639CA.9090501@loskot.net>

Akio Takubo wrote:
> On Sun, 24 Sep 2006 16:23:31 +0200
> Mateusz Loskot <mateusz@loskot.net> wrote:
>> Akio Takubo wrote:
>>
>> About a month ago I've just talked with a japanese developer 
>> about dbf's LDID, he had written it in his blog,
>>
>> I'm curious about it, could you give the blog URL?
> 
> Following URL is these.
> First one is Mr. Tetsushi Iida's article. He wrote that Shp2pgsql's iconv 
> support patch, which have been commited. 
> He found LDID information from ESRI's resources. It may be useful,
> if GDAL/OGR supports LDID info. 
> Other two aritcle is mine's.
> Sorry for all article (both Tetsushi's and mine) were written in Japanese.
> You may read them as English or other lang via traslation service...
> 
> http://d.hatena.ne.jp/hogeman/20060831#p1
> http://www.saruga-tondara.net/d/?date=20060901
> http://www.saruga-tondara.net/d/?date=20060902
> 
> Some topic of these article are...
> * How Arc* control encoding for shpfile? (something same as you did)
> * What value LDID is supported? (Where do we find LDID information?)
> * Should OSS product support LDID or not?
> * About better API with encoding.

Thank you for these URLs, however I'm not able to read them in
details :-)
I believe we can find LDID values quite easily.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Oct  6 10:20:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] easy way to create tile index of dted (dt0) files?
In-Reply-To: <FDEOJHHKMJJBMPHGGGCLCEPLCCAA.wilken@ohb-system.de>
References: <FDEOJHHKMJJBMPHGGGCLCEPLCCAA.wilken@ohb-system.de>
Message-ID: <4526662B.30600@pobox.com>

Holger Wilken wrote:
> I want to create a tile index of dted files (dt0) as a shapefile (shp), to show the boundaries of dted cells on my map.
> 
> So far, I have succeeded in using the steps:
> - generate a file with all dt0 filenames (dir /b /s *.dt0 > all_dt0.txt)
> - use the DOS FOR command in combination with gdal_translate and the all_dt0.txt file to build a geotiff for each dt0 file
> - use gdaltindex on the resulting tif files to create a tile index.
> 
> my question: is there another (faster) way to create the tile index directly out of the dt0 files, without the detour via tif? 
> 
> thanks in advance

Holger,

I'm not sure why you converted them to TIFF.  Gdaltindex will work fine
against .dt0 files.  As long as your gdaltindex is built with wildcard
support on windows (as the one in FWTools is for instance) you should
be able to just do something like:

  gdaltindex index.shp *.dt0

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Peter.Rushforth at statcan.ca  Fri Oct  6 10:53:47 2006
From: Peter.Rushforth at statcan.ca (Peter.Rushforth@statcan.ca)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] ogr gml driver multipolygon parts or vertex count limit
Message-ID: <AB38021D12570A4AB907F442AE548807011A8278@stcem04.statcan.ca>

Hi list,

I am using the ogr2ogr utility 1.3.1 on solaris 10 to
convert gml files to shapefiles and mapinfo files.

I have come across a problem where when it encounters
a large multipolygon, ogr2ogr seems to hang.

Has anyone else encountered this problem?  is there 
a workaround?

Cheers and thanks,

Peter


From warmerdam at pobox.com  Fri Oct  6 11:49:50 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:23 2007
Subject: [Gdal-dev] ogr gml driver multipolygon parts or vertex count limit
In-Reply-To: <AB38021D12570A4AB907F442AE548807011A8278@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE548807011A8278@stcem04.statcan.ca>
Message-ID: <45267B1E.2020304@pobox.com>

Peter.Rushforth@statcan.ca wrote:
> Hi list,
> 
> I am using the ogr2ogr utility 1.3.1 on solaris 10 to
> convert gml files to shapefiles and mapinfo files.
> 
> I have come across a problem where when it encounters
> a large multipolygon, ogr2ogr seems to hang.
> 
> Has anyone else encountered this problem?  is there 
> a workaround?

Peter,

Could you provide an example me to (offlist)?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From blazrepnik at mail386.com  Wed Oct  4 03:05:17 2006
From: blazrepnik at mail386.com (GeoUser)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
Message-ID: <6634781.post@talk.nabble.com>


Hey list!

I have a question. Where can i get a version of ogr2ogr that supports OCI? I
downloaded FWTools106 but the ogr2ogr there doesn't support oracle database.
-- 
View this message in context: http://www.nabble.com/ogr2ogr-tf2380732.html#a6634781
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Sat Oct  7 01:39:46 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <6634781.post@talk.nabble.com>
References: <6634781.post@talk.nabble.com>
Message-ID: <45273DA2.7020703@loskot.net>

GeoUser wrote:
> Hey list!
> 
> I have a question. Where can i get a version of ogr2ogr that supports OCI? I
> downloaded FWTools106 but the ogr2ogr there doesn't support oracle database.

AFAIK, the only officially known distribution of GDAL that includes OCI
support is MS4W (http://www.maptools.org/ms4w/).
For specific features like Oracle support, it's usually to build GDAL on
your own.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sat Oct  7 01:47:49 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] GDAL compilation with PGCHIP driver
In-Reply-To: <20061005195736.M12526@ufs.br>
References: <200610051602.k95G21lp021450@duke.maptools.org>
	<20061005195736.M12526@ufs.br>
Message-ID: <45273F85.4000706@pobox.com>

Ricardo wrote:
> Hi all,
> I'm trying to compile the GDAL library with PGCHIP driver, under Fedora 4, 
> so when I execute the " make " command it returns to me the followinh 
> menssage;
>  
> -------------------------------------------------------------
> make -C pgchip install-obj
> make[2]: Entering directory `/usr/src/gdal-1.3.2/frmts/pgchip'
> /bin/sh /usr/src/gdal-1.3.2/libtool --mode=compile g++ -Wall -O2 -I/usr/incl 
> ude -I/usr/share/pgsql/contrib/postgis-1.1.2/lwgeom -I/usr/src/gdal-
> 1.3.2/port -I/usr/src/gdal-1.3.2/gcore -I/usr/src/gdal-1.3.2/alg -
> I/usr/src/gdal-1.3.2/ogr -I/usr/src/gdal-1.3.2/ogr/ogrsf_frmts -c -
> o ../o/pgchipdataset.o pgchipdataset. cpp
> g++ -Wall -O2 -I/usr/include -I/usr/share/pgsql/contrib/postgis-
> 1.1.2/lwgeom -I /usr/src/gdal-1.3.2/port -I/usr/src/gdal-1.3.2/gcore -
> I/usr/src/gdal-1.3.2/alg - I/usr/src/gdal-1.3.2/ogr -I/usr/src/gdal-
> 1.3.2/ogr/ogrsf_frmts -c pgchipdataset. cpp -fPIC -DPIC -
> o ../o/.libs/pgchipdataset.o
> pgchipdataset.cpp: In function 'GDALDataset* PGCHIPCreateCopy(const char*, 
> GDALD ataset*, int, char**, int (*)(double, const char*, void*), void*)':
> pgchipdataset.cpp:957: error: invalid conversion from 'unsigned char*' 
> to 'char* '
> pgchipdataset.cpp:957: error: initializing argument 2 of 'void deparse_hex
> (uch ar, char*)'
> pgchipdataset.cpp:964: error: invalid conversion from 'unsigned char*' 
> to 'char* '
> pgchipdataset.cpp:964: error: initializing argument 2 of 'void deparse_hex
> (uch ar, char*)'
> pgchipdataset.cpp:971: error: invalid conversion from 'unsigned char*' 
> to 'char* '
> pgchipdataset.cpp:971: error: initializing argument 2 of 'void deparse_hex
> (uch ar, char*)'
> make[2]: ** [../o/pgchipdataset.o] Erro 1
> make[2]: Leaving directory `/usr/src/gdal-1.3.2/frmts/pgchip'
> make[1]: ** [pgchip-install-obj] Erro 2
> make[1]: Leaving directory `/usr/src/gdal-1.3.2/frmts'
> make: ** [frmts-target] Erro 2
> --------------------------------------------------------------------
>  
> May you help me?
> Thank you anyway.
> Ricardo Lu?s

Ricardo,

The PGCHIP driver is not supported, and I think can be thought of as
an experiment that was never really completed.  Well at least I'm not
too sure of whether it is supposed to be working.

However, if you are still interested, the above errors look like simple
casting issues, just cast the results by inserting "(char *)" at the
appropriate places.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From myicqmail at 163.com  Mon Oct  9 09:26:35 2006
From: myicqmail at 163.com (qq)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about  "RasterIO"
Message-ID: <452A4E0B.00007F.06031@bj163app39.163.com>

HI:
 
  I tried to read a .tif file with data type of "GDT_Byte" using the method of "RasterIO". It did well without problem. But When I tied to read a .tif file with data type of "GDT_Int32", it did't work.  My code is here:
 
if (RasterBand->GetRasterDataType() == GDT_Int32){
  LONG* pData;
  pData = (LONG*) CPLMalloc(sizeof(LONG)*nXSize*nYSize);
  RasterBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, pData, nXSize, nYSize,   GDT_Int32, 0, 0 );   
  }
 
The pData is NULL. And the image data can't be read from the file. Would anyone tell what is the wrong? Thanks !
  
 
 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061009/d3b58541/attachment.html
From dron at ak4719.spb.edu  Mon Oct  9 09:11:53 2006
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Changes in OGRStyleTool class
Message-ID: <20061009131153.GA15697@ak4719.spb.edu>

Folks,

I have made several changes in OGRStyleTool class. In first of all I
have changed the OGRStyleTool:Parse() function, because it was broken
when parsing boolean statements, such as "it", "bo" etc. If such a
statement arrives in the style string the parsing function either fails
or produces completely wrong results. It was vquite surprizing that this
problem wasn't noticed until now. Also I have introduced OGRSTypeBoolean
type which should be used for such style options in the future. Also I
started to check the return value of the Parse() function, so the same
should be done in the user's code.

Regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Mon Oct  9 13:17:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about  "RasterIO"
In-Reply-To: <452A4E0B.00007F.06031@bj163app39.163.com>
References: <452A4E0B.00007F.06031@bj163app39.163.com>
Message-ID: <452A8447.4060604@pobox.com>

qq wrote:
> HI:
>  
>   I tried to read a .tif file with data type of "GDT_Byte" using the 
> method of "RasterIO". It did well without problem. But When I tied to 
> read a .tif file with data type of "GDT_Int32", it did't work.  My code 
> is here:
>  
> if (RasterBand->GetRasterDataType() == GDT_Int32){
>   LONG* pData;
>   pData = (LONG*) CPLMalloc(sizeof(LONG)*nXSize*nYSize);
>   RasterBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, pData, nXSize, 
> nYSize,   GDT_Int32, 0, 0 );  
>   }
>  
> The pData is NULL. And the image data can't be read from the file. Would 
> anyone tell what is the wrong? Thanks !

QQ,

It sounds like the buffer allocation is failing because of a lack
of memory.  Is your file large?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Mon Oct  9 14:44:00 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233AEC1AC@COMAIL01.digitalglobe.com>

I believe you'll still need to install the OCI client libraries as I'm
sure it's not kosher to distribute those.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Friday, October 06, 2006 11:40 PM
To: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ogr2ogr

GeoUser wrote:
> Hey list!
> 
> I have a question. Where can i get a version of ogr2ogr that supports
OCI? I
> downloaded FWTools106 but the ogr2ogr there doesn't support oracle
database.

AFAIK, the only officially known distribution of GDAL that includes OCI
support is MS4W (http://www.maptools.org/ms4w/).
For specific features like Oracle support, it's usually to build GDAL on
your own.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Mon Oct  9 15:31:24 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233AEC1AC@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233AEC1AC@COMAIL01.digitalglobe.com>
Message-ID: <452AA38C.1090300@loskot.net>

Ethan Alpert wrote:
> I believe you'll still need to install the OCI client libraries

Yes, exactly.
User has to provide its own installation of Oracle/OCI stuff.

> as I'm sure it's not kosher to distribute those.

I'm not sure. AFAIK, this issue is being clarified.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From astewart at TerraGoTech.com  Mon Oct  9 18:20:29 2006
From: astewart at TerraGoTech.com (Alan Stewart)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] MrSID support kills gdal_translate?
Message-ID: <452ACB2D.3040906@TerraGoTech.com>

When I enable MrSID support in nmake.opt, the resulting gdal_translate 
seems non-functional. It simply returns with no output, no matter what 
the input is, including requesting the version with "--version". I don't 
see any errors in the output from nmake. Anyone have any idea on what 
could be wrong?

-- 

 Alan Stewart
 Senior Software Architect
 TerraGo Technologies, Inc.
 astewart@TerraGoTech.com
 678-391-9700 x9615

-------------- next part --------------
A non-text attachment was scrubbed...
Name: astewart.vcf
Type: text/x-vcard
Size: 307 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061009/f9f032e4/astewart.vcf
From myicqmail at 163.com  Mon Oct  9 20:59:45 2006
From: myicqmail at 163.com (qq)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about "RasterI
 O"
In-Reply-To: <452A8447.4060604@pobox.com>
References: <452A4E0B.00007F.06031@bj163app39.163.com>
	<452A8447.4060604@pobox.com>
Message-ID: <452AF081.000005.21191@bj163app41.163.com>

Hi Warmerdam:
 
    The first file I tried to read is a .tif about 70M. Another file is a  .img
file about 10M. Both those two files can be opend by ArcGIS software. But I failed to read them by GDAL. Are the parameters which i set in RasterIO wrong ?
  
Best regards.
 
 
 
 
 
 
 
 



----------
:"Frank Warmerdam" 
:2006-10-10 01:17:59
:"qq" 
:gdal-dev@lists.maptools.org
:Re: [Gdal-dev] problem about "RasterIO"


qq wrote:
> HI:
>  
>   I tried to read a .tif file with data type of "GDT_Byte" using the 
> method of "RasterIO". It did well without problem. But When I tied to 
> read a .tif file with data type of "GDT_Int32", it did't work.  My code 
> is here:
>  
> if (RasterBand->GetRasterDataType() == GDT_Int32){
>   LONG* pData;
>   pData = (LONG*) CPLMalloc(sizeof(LONG)*nXSize*nYSize);
>   RasterBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, pData, nXSize, 
> nYSize,   GDT_Int32, 0, 0 );  
>   }
>  
> The pData is NULL. And the image data can't be read from the file. Would 
> anyone tell what is the wrong? Thanks !

QQ,

It sounds like the buffer allocation is failing because of a lack
of memory.  Is your file large?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061010/9b6947c6/attachment.html
From rayg at daylongraphics.com  Tue Oct 10 00:46:23 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about "RasterI O"
In-Reply-To: <452AF081.000005.21191@bj163app41.163.com>
References: <452A4E0B.00007F.06031@bj163app39.163.com>
	<452A8447.4060604@pobox.com> <452AF081.000005.21191@bj163app41.163.com>
Message-ID: <452B259F.1080702@daylongraphics.com>

The size of the TIFF files may be misleading if they are compressed; the
final nXSize and nYSize may require a buffer that takes too much memory.
Do you know the pixel dimensions of the files?

Ray


qq wrote:
> Hi Warmerdam:
> 
> The first file I tried to read is a .tif about 70M. Another file is a
> .img file about 10M. Both those two files can be opend by ArcGIS
> software. But I failed to read them by GDAL. Are the parameters which
> i set in RasterIO wrong ?
> 
> Best regards.
> 
> 
> 
> 
> 
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> ---------- :"Frank Warmerdam" :2006-10-10 01:17:59 :
> "qq" :gdal-dev@lists.maptools.org :Re: [Gdal-dev] problem about
> "RasterIO"
> 
> 
> qq wrote:
>> HI:
>> 
>> I tried to read a .tif file with data type of "GDT_Byte" using the
>>  method of "RasterIO". It did well without problem. But When I tied
>> to read a .tif file with data type of "GDT_Int32", it did't work.
>> My code is here:
>> 
>> if (RasterBand->GetRasterDataType() == GDT_Int32){ LONG* pData; 
>> pData = (LONG*) CPLMalloc(sizeof(LONG)*nXSize*nYSize); 
>> RasterBand->RasterIO( GF_Read, 0, 0, nXSize, nYSize, pData, nXSize,
>>  nYSize,   GDT_Int32, 0, 0 ); }
>> 
>> The pData is NULL. And the image data can't be read from the file.
>> Would anyone tell what is the wrong? Thanks !
> 
> QQ,
> 
> It sounds like the buffer allocation is failing because of a lack of
> memory.  Is your file large?
> 
> Best regards, -- 
> ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> President OSGeo, http://osgeo.org <http://osgeo.org/>
> 
> 
> 
> 
> 
> 
> 
> 
>        (   )     !     8         (   ) 
> <http://adtaobao.allyes.com/main/adfclick?db=adtaobao&bid=600,597,58&cid=29985,198,1&sid=32501&show=ignore&url=http://www.taobao.com/vertical/lady/pro.php>
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> 
> _______________________________________________ Gdal-dev mailing list
>  Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From blazrepnik at mail386.com  Tue Oct 10 03:14:04 2006
From: blazrepnik at mail386.com (GeoUser)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <45273DA2.7020703@loskot.net>
References: <6634781.post@talk.nabble.com> <45273DA2.7020703@loskot.net>
Message-ID: <6731330.post@talk.nabble.com>


Thanks for the answer but i downloaded the MS4W but the OCI was not present
in ogr2ogr...


Mateusz Loskot wrote:
> 
> GeoUser wrote:
>> Hey list!
>> 
>> I have a question. Where can i get a version of ogr2ogr that supports
>> OCI? I
>> downloaded FWTools106 but the ogr2ogr there doesn't support oracle
>> database.
> 
> AFAIK, the only officially known distribution of GDAL that includes OCI
> support is MS4W (http://www.maptools.org/ms4w/).
> For specific features like Oracle support, it's usually to build GDAL on
> your own.
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/ogr2ogr-tf2380732.html#a6731330
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From yjacolin at free.fr  Tue Oct 10 04:51:43 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
Message-ID: <200610101051.43946.yjacolin@free.fr>

Hello,

I try to build GDAL-OGR with the OGDI driver. I want to use VMAP0 and 
transform these layers to shapefile then in mapserver.

First I try to use the libogdi binaire from my distribution (Mandriva2006). I 
success to connect to but I get 0 feature ! Altough in VPFviewer I get much 
more.

After looking for in the mailing list, I read that my OGDI driver may be a 
little bit too old, so I build the last one (OGDI-3.1.5). I build again 
gdal-ogr and ... altough all seems ok,  I get this error message :

[yjacolin@TI-PC2 ~]$ gdalinfo
Exception en point flottant

I can not translate this, because I do not understand it in french :-/, 
something like "exception in floating point" may be?!

Anybody can help me ? Thanks in advance.

Y.

From yjacolin at free.fr  Tue Oct 10 05:39:34 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <200610101051.43946.yjacolin@free.fr>
References: <200610101051.43946.yjacolin@free.fr>
Message-ID: <200610101139.34889.yjacolin@free.fr>

Hello,
I don't know why and how, but I success to build gdal with ogdi driver ...
Well, I think I success by adding "--with-proj --with-zlib --with-expat" 
options.

Thanks,

Y.
Le Mardi 10 Octobre 2006 10:51, Jacolin Yves a ?crit?:
> Hello,
>
> I try to build GDAL-OGR with the OGDI driver. I want to use VMAP0 and
> transform these layers to shapefile then in mapserver.
>
> First I try to use the libogdi binaire from my distribution (Mandriva2006).
> I success to connect to but I get 0 feature ! Altough in VPFviewer I get
> much more.
>
> After looking for in the mailing list, I read that my OGDI driver may be a
> little bit too old, so I build the last one (OGDI-3.1.5). I build again
> gdal-ogr and ... altough all seems ok,  I get this error message :
>
> [yjacolin@TI-PC2 ~]$ gdalinfo
> Exception en point flottant
>
> I can not translate this, because I do not understand it in french :-/,
> something like "exception in floating point" may be?!
>
> Anybody can help me ? Thanks in advance.
>
> Y.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin
---
HBS-Research
Tel. : 01 46 97 25 14
51 rue de Verdun
92 158 Suresnes Cedex
FRANCE


From yjacolin at free.fr  Tue Oct 10 05:47:09 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <200610101051.43946.yjacolin@free.fr>
References: <200610101051.43946.yjacolin@free.fr>
Message-ID: <200610101147.09970.yjacolin@free.fr>

Hi again !
Sorry, I wrote too fast. The driver is working, but I always 0 feature ! Here 
my command :
ogrinfo -ro -summary 
gltp:/vrf/home/yjacolin/Documents/SIG_local/Echange/Recu/v0eur/vmaplv0/eurnasia 
'polbnda@bnd(*)_area'

Any idea ?

Y.
Le Mardi 10 Octobre 2006 10:51, Jacolin Yves a ?crit?:
> Hello,
>
> I try to build GDAL-OGR with the OGDI driver. I want to use VMAP0 and
> transform these layers to shapefile then in mapserver.
>
> First I try to use the libogdi binaire from my distribution (Mandriva2006).
> I success to connect to but I get 0 feature ! Altough in VPFviewer I get
> much more.
>
> After looking for in the mailing list, I read that my OGDI driver may be a
> little bit too old, so I build the last one (OGDI-3.1.5). I build again
> gdal-ogr and ... altough all seems ok,  I get this error message :
>
> [yjacolin@TI-PC2 ~]$ gdalinfo
> Exception en point flottant
>
> I can not translate this, because I do not understand it in french :-/,
> something like "exception in floating point" may be?!
>
> Anybody can help me ? Thanks in advance.
>
> Y.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin
---
HBS-Research
Tel. : 01 46 97 25 14
51 rue de Verdun
92 158 Suresnes Cedex
FRANCE


From yjacolin at free.fr  Tue Oct 10 08:50:33 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <452B95A1.70605@m4com.de>
References: <200610101051.43946.yjacolin@free.fr>
	<200610101147.09970.yjacolin@free.fr> <452B95A1.70605@m4com.de>
Message-ID: <200610101450.33441.yjacolin@free.fr>

Hello,

Thanks for your answer ! Indeed, after moving v0eur directory 
to /home/yjacolin/ it is working !

The driver seems really sensitive!

Thanks again.

Yves.
Le Mardi 10 Octobre 2006 14:44, vous avez ?crit?:
> Yves,
>
> the VRF driver is sensitive against mixed case pathnames. This is due to
> some complex name mangling when accessing the data set. Try to move the
> data to a path with all lowercase directories; e.g.
> "/home/yjacolin/v0eur/vmaplv0/eurnasia".
>
> You can search the GDAL mailing list archive for more info by using the
> keyword "vmap". Look for the thread "[Gdal-dev] ogr2ogr issues for vmap0
> on Ubuntu Breezy".
>
> HTH
>
> Cheers
> Reiner
>
> > Hi again !
> > Sorry, I wrote too fast. The driver is working, but I always 0 feature !
> > Here my command :
> > ogrinfo -ro -summary
> > gltp:/vrf/home/yjacolin/Documents/SIG_local/Echange/Recu/v0eur/vmaplv0/eu
> >rnasia 'polbnda@bnd(*)_area'
> >
> > Any idea ?
> >
> > Y.
> >
> > Le Mardi 10 Octobre 2006 10:51, Jacolin Yves a ?crit :
> >> Hello,
> >>
> >> I try to build GDAL-OGR with the OGDI driver. I want to use VMAP0 and
> >> transform these layers to shapefile then in mapserver.
> >>
> >> First I try to use the libogdi binaire from my distribution
> >> (Mandriva2006). I success to connect to but I get 0 feature ! Altough in
> >> VPFviewer I get much more.
> >>
> >> After looking for in the mailing list, I read that my OGDI driver may be
> >> a little bit too old, so I build the last one (OGDI-3.1.5). I build
> >> again gdal-ogr and ... altough all seems ok,  I get this error message :
> >>
> >> [yjacolin@TI-PC2 ~]$ gdalinfo
> >> Exception en point flottant
> >>
> >> I can not translate this, because I do not understand it in french :-/,
> >> something like "exception in floating point" may be?!
> >>
> >> Anybody can help me ? Thanks in advance.
> >>
> >> Y.
> >> _______________________________________________
> >> Gdal-dev mailing list
> >> Gdal-dev@lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/gdal-dev


From R.Beck at m4com.de  Tue Oct 10 08:55:55 2006
From: R.Beck at m4com.de (Reiner Beck)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <200610101147.09970.yjacolin@free.fr>
References: <200610101051.43946.yjacolin@free.fr>
	<200610101147.09970.yjacolin@free.fr>
Message-ID: <452B985B.2090308@m4com.de>

Yves,

the VRF driver is sensitive against mixed case pathnames. This is due to 
some complex name mangling when accessing the data set. Try to move the 
data to a path with all lowercase directories; e.g. 
"/home/yjacolin/v0eur/vmaplv0/eurnasia".

You can search the GDAL mailing list archive for more info by using the 
keyword "vmap". Look for the thread "[Gdal-dev] ogr2ogr issues for vmap0 
on Ubuntu Breezy".

HTH

Cheers
Reiner

> Hi again !
> Sorry, I wrote too fast. The driver is working, but I always 0 feature ! Here 
> my command :
> ogrinfo -ro -summary 
> gltp:/vrf/home/yjacolin/Documents/SIG_local/Echange/Recu/v0eur/vmaplv0/eurnasia 
> 'polbnda@bnd(*)_area'
>
> Any idea ?
>
> Y.
> Le Mardi 10 Octobre 2006 10:51, Jacolin Yves a ?crit :
>   
>> Hello,
>>
>> I try to build GDAL-OGR with the OGDI driver. I want to use VMAP0 and
>> transform these layers to shapefile then in mapserver.
>>
>> First I try to use the libogdi binaire from my distribution (Mandriva2006).
>> I success to connect to but I get 0 feature ! Altough in VPFviewer I get
>> much more.
>>
>> After looking for in the mailing list, I read that my OGDI driver may be a
>> little bit too old, so I build the last one (OGDI-3.1.5). I build again
>> gdal-ogr and ... altough all seems ok,  I get this error message :
>>
>> [yjacolin@TI-PC2 ~]$ gdalinfo
>> Exception en point flottant
>>
>> I can not translate this, because I do not understand it in french :-/,
>> something like "exception in floating point" may be?!
>>
>> Anybody can help me ? Thanks in advance.
>>
>> Y.
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>     
>
>   



From warmerdam at pobox.com  Tue Oct 10 10:54:07 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <200610101450.33441.yjacolin@free.fr>
References: <200610101051.43946.yjacolin@free.fr>	<200610101147.09970.yjacolin@free.fr>
	<452B95A1.70605@m4com.de> <200610101450.33441.yjacolin@free.fr>
Message-ID: <452BB40F.6080904@pobox.com>

Jacolin Yves wrote:
> Hello,
> 
> Thanks for your answer ! Indeed, after moving v0eur directory 
> to /home/yjacolin/ it is working !
> 
> The driver seems really sensitive!

Jacolin,

Yes it is indeed very sensitive.

The problem with the floating point exception has something to do with
mixing two versions of PROJ.4 (an old one embedded in OGDI and the generally
used newer one).  The case sensitivity problem is somehow related to a time
when CD drivers on unix systems often used a variety of file naming
conventions (upper case, lower case and sometimes adding a period to
filenames with no extension).  I think the driver attempts to do some
uppercase/lowercase mapping but this can easily screw things up if applied
to path portions that are not on the CD.  Well - or something like that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yjacolin at free.fr  Tue Oct 10 11:11:14 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <452BB40F.6080904@pobox.com>
References: <200610101051.43946.yjacolin@free.fr>
	<200610101450.33441.yjacolin@free.fr> <452BB40F.6080904@pobox.com>
Message-ID: <200610101711.14335.yjacolin@free.fr>

Thanks for your answer and your explication!

I success to convert vmap data to shapefile! 

Y.
Le Mardi 10 Octobre 2006 16:54, vous avez ?crit?:
> Jacolin Yves wrote:
> > Hello,
> >
> > Thanks for your answer ! Indeed, after moving v0eur directory
> > to /home/yjacolin/ it is working !
> >
> > The driver seems really sensitive!
>
> Jacolin,
>
> Yes it is indeed very sensitive.
>
> The problem with the floating point exception has something to do with
> mixing two versions of PROJ.4 (an old one embedded in OGDI and the
> generally used newer one).  The case sensitivity problem is somehow related
> to a time when CD drivers on unix systems often used a variety of file
> naming conventions (upper case, lower case and sometimes adding a period to
> filenames with no extension).  I think the driver attempts to do some
> uppercase/lowercase mapping but this can easily screw things up if applied
> to path portions that are not on the CD.  Well - or something like that.
>
> Best regards,


From warmerdam at pobox.com  Tue Oct 10 11:30:06 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <6731330.post@talk.nabble.com>
References: <6634781.post@talk.nabble.com> <45273DA2.7020703@loskot.net>
	<6731330.post@talk.nabble.com>
Message-ID: <452BBC7E.8080907@pobox.com>

GeoUser wrote:
> Thanks for the answer but i downloaded the MS4W but the OCI was not present
> in ogr2ogr...
> 

Anonymous GeoUser,

I believe you need to copy C:\MS4W\gdalplugins\ignored\ogr_OCI.dll into
C:\MS4W\gdalplugins.

I think this is discussed in C:\MS4W\README_INSTALL.TXT in the section about
Oracle 10g.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Oct 10 11:34:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] MrSID support kills gdal_translate?
In-Reply-To: <452ACB2D.3040906@TerraGoTech.com>
References: <452ACB2D.3040906@TerraGoTech.com>
Message-ID: <452BBD6D.4020006@pobox.com>

Alan Stewart wrote:
> When I enable MrSID support in nmake.opt, the resulting gdal_translate 
> seems non-functional. It simply returns with no output, no matter what 
> the input is, including requesting the version with "--version". I don't 
> see any errors in the output from nmake. Anyone have any idea on what 
> could be wrong?

Alan,

I have not run into this myself.  I presume it is some sort of nasty
incompatibility of build options.

What version of the MrSID SDK, and visual studio are you using?

could you list your OPTFLAGS line, and the MRSID_DIR, MRSID_INCLUDE and
MRSID_LIB settings?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From astewart at TerraGoTech.com  Tue Oct 10 11:47:02 2006
From: astewart at TerraGoTech.com (Alan Stewart)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] MrSID support kills gdal_translate?
In-Reply-To: <452ACB2D.3040906@TerraGoTech.com>
References: <452ACB2D.3040906@TerraGoTech.com>
Message-ID: <452BC076.1090601@TerraGoTech.com>

I figured it out. Gdal is configured by default to use the LizardTech 
DLL rather than the static lib. The DLL needs to either be copied to the 
same directory gdal is installed to or the path to the DLL needs to be 
in the PATH environment variable. Or nmake.opt can be modified to link 
to lti_dsdk.lib instead of lti_dsdk_dll.lib

Alan Stewart wrote:
> When I enable MrSID support in nmake.opt, the resulting gdal_translate 
> seems non-functional. It simply returns with no output, no matter what 
> the input is, including requesting the version with "--version". I 
> don't see any errors in the output from nmake. Anyone have any idea on 
> what could be wrong?
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 

 Alan Stewart
 Senior Software Architect
 TerraGo Technologies, Inc.
 astewart@TerraGoTech.com
 678-391-9700 x9615

-------------- next part --------------
A non-text attachment was scrubbed...
Name: astewart.vcf
Type: text/x-vcard
Size: 307 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061010/dd6bd92e/astewart.vcf
From warmerdam at pobox.com  Tue Oct 10 12:46:44 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about "RasterI O"
In-Reply-To: <452AF081.000005.21191@bj163app41.163.com>
References: <452A4E0B.00007F.06031@bj163app39.163.com>	<452A8447.4060604@pobox.com>
	<452AF081.000005.21191@bj163app41.163.com>
Message-ID: <452BCE74.1040307@pobox.com>

qq wrote:
> Hi Warmerdam:
>  
>     The first file I tried to read is a .tif about 70M. Another file is 
> a  .img
> file about 10M. Both those two files can be opend by ArcGIS software. 
> But I failed to read them by GDAL. Are the parameters which i set in 
> RasterIO wrong ?

QQ,

>From what you wrote there is no obvious problem in the code.  But
I am surprised that CPLMalloc() returned NULL for pData.  This should
never happen.  Even if the allocation fails, it is supposed to report
an out of memory condition and call exit().  What are the values for xsize
and ysize?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jmckenna at dmsolutions.ca  Tue Oct 10 13:46:31 2006
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <452BBC7E.8080907@pobox.com>
References: <6634781.post@talk.nabble.com>
	<45273DA2.7020703@loskot.net>	<6731330.post@talk.nabble.com>
	<452BBC7E.8080907@pobox.com>
Message-ID: <452BDC77.50407@dmsolutions.ca>

For the record here are the steps in the readme: 
http://www.maptools.org/ms4w/index.phtml?page=README_INSTALL.html#oracle-10g

jeff



Frank Warmerdam wrote:
> GeoUser wrote:
>> Thanks for the answer but i downloaded the MS4W but the OCI was not 
>> present
>> in ogr2ogr...
>>
> 
> Anonymous GeoUser,
> 
> I believe you need to copy C:\MS4W\gdalplugins\ignored\ogr_OCI.dll into
> C:\MS4W\gdalplugins.
> 
> I think this is discussed in C:\MS4W\README_INSTALL.TXT in the section 
> about
> Oracle 10g.
> 
> Best regards,


-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From warmerdam at pobox.com  Tue Oct 10 14:02:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Re: ogr limitation?
In-Reply-To: <AB38021D12570A4AB907F442AE548807011A827F@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE548807011A827F@stcem04.statcan.ca>
Message-ID: <452BE019.5080202@pobox.com>

Peter.Rushforth@statcan.ca wrote:
> Hi Frank,
> 
> I was able to reduce each polygon in the multipolygon to its
> bounding box, which substantially reduces the filesize.  ogr2ogr
> appears to still hang.  I wonder if this is actually a limit on the 
> number of
> multipolygon polygon members in ogr itself and not just with the gml
> driver?
> 
> Any light you might be able to shed on where to look in the code would
> also be helpful, if you don't have time to address it yourself!
> 
> Simply rename the attached .zap file to .zip and it should unzip.  I have
> bundled a gfs file which should work with it.

Peter,

I have determined that the internal logic in the gml reader for aggregating
complex large geometries was very non-optimal.  It seems that the driver
wasn't really hanging - just taking a very very long time.  I have
restructured the gml driver code a bit, and now the file you sent is handled
quite smoothly.  The changes are in CVS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yjacolin at hbs-research.com  Tue Oct 10 05:46:22 2006
From: yjacolin at hbs-research.com (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGDI driver with GDAL-ogr
In-Reply-To: <200610101051.43946.yjacolin@free.fr>
References: <200610101051.43946.yjacolin@free.fr>
Message-ID: <200610101146.22948.yjacolin@hbs-research.com>

Hi again !
Sorry, I wrote too fast. The driver is working, but I always 0 feature ! Here 
my command :
ogrinfo -ro -summary 
gltp:/vrf/home/yjacolin/Documents/SIG_local/Echange/Recu/v0eur/vmaplv0/eurnasia 
'polbnda@bnd(*)_area'

Any idea ?

Y.
Le Mardi 10 Octobre 2006 10:51, Jacolin Yves a ?crit?:
> Hello,
>
> I try to build GDAL-OGR with the OGDI driver. I want to use VMAP0 and
> transform these layers to shapefile then in mapserver.
>
> First I try to use the libogdi binaire from my distribution (Mandriva2006).
> I success to connect to but I get 0 feature ! Altough in VPFviewer I get
> much more.
>
> After looking for in the mailing list, I read that my OGDI driver may be a
> little bit too old, so I build the last one (OGDI-3.1.5). I build again
> gdal-ogr and ... altough all seems ok,  I get this error message :
>
> [yjacolin@TI-PC2 ~]$ gdalinfo
> Exception en point flottant
>
> I can not translate this, because I do not understand it in french :-/,
> something like "exception in floating point" may be?!
>
> Anybody can help me ? Thanks in advance.
>
> Y.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Yves Jacolin
---
HBS-Research
Tel. : 01 46 97 25 14
51 rue de Verdun
92 158 Suresnes Cedex
FRANCE


From vjetly at i3.com  Wed Oct 11 01:04:12 2006
From: vjetly at i3.com (Vikalpa Jetly)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] geographic coordinates in PCI files
Message-ID: <009901c6ecf2$b13e78e0$1b28c80a@i3.local>

I am finding that gdalinfo or using the dataset.GetProjection() method
returns the coordinate system as null "", for PCI files with a geographic
coordinates (Lat/Long WGS84 or NAD83). For other coordinate systems like
UTM, I am getting correct values. What am I missing here?

 

Thanks for any insights.

Vikalpa

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061010/9adabd6e/attachment.html
From myicqmail at 163.com  Wed Oct 11 02:00:07 2006
From: myicqmail at 163.com (qq)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about "RasterI
  O"
In-Reply-To: <452BCE74.1040307@pobox.com>
References: <452A4E0B.00007F.06031@bj163app39.163.com>	<452A8447.4060604@pobox.com>
	<452AF081.000005.21191@bj163app41.163.com>
	<452BCE74.1040307@pobox.com>
Message-ID: <452C8867.000024.10566@bj163app47.163.com>

Warmerdam and Gardener :
   
   I got the xSize and ySzie of the .tif file with GetXSize() nad GetYSize().THe
xSize is 4833 and the ySize is 4141. The file is about 70M. Is the file large?
Thanks for your help!
 
    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061011/18bad2a4/attachment.html
From rayg at daylongraphics.com  Wed Oct 11 05:34:31 2006
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] problem about "RasterI  O"
In-Reply-To: <452C8867.000024.10566@bj163app47.163.com>
References: <452A4E0B.00007F.06031@bj163app39.163.com>
	<452A8447.4060604@pobox.com> <452AF081.000005.21191@bj163app41.163.com>
	<452BCE74.1040307@pobox.com> <452C8867.000024.10566@bj163app47.163.com>
Message-ID: <452CBAA7.30602@daylongraphics.com>

Two things:

Your code should read:

  GUInt32* pData;
  pData = (GUInt32*) CPLMalloc(sizeof(GUInt32)*nXSize*nYSize);

just to be safe (i.e., LONG on your machine may be 64 bits).

Second, just set a debugger breakpoint on the call to
CPLMalloc and step into it.

Ray



qq wrote:
> /Warmerdam and Gardener :/
> /   /
> /   I got the xSize and ySzie of the .tif file with GetXSize() nad 
> GetYSize().THe/
> /xSize is 4833 and the ySize is 4141. The file is about 70M. Is the file 
> large?/
> /Thanks for your help!/
> // 
> /    /
> 
> 
> 
> 
> 
> 
> 
>        (   )
>     !     8         (   ) 
> <http://adtaobao.allyes.com/main/adfclick?db=adtaobao&bid=600,597,58&cid=29985,198,1&sid=32501&show=ignore&url=http://www.taobao.com/vertical/lady/pro.php> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Oct 11 10:21:50 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] geographic coordinates in PCI files
In-Reply-To: <009901c6ecf2$b13e78e0$1b28c80a@i3.local>
References: <009901c6ecf2$b13e78e0$1b28c80a@i3.local>
Message-ID: <452CFDFE.1070204@pobox.com>

Vikalpa Jetly wrote:
> I am finding that gdalinfo or using the dataset.GetProjection() method 
> returns the coordinate system as null ??, for PCI files with a 
> geographic coordinates (Lat/Long WGS84 or NAD83). For other coordinate 
> systems like UTM, I am getting correct values. What am I missing here?

Vikalpa,

I have confirmed the bug in GDAL and have applied a fix.  If you need
the fix, you can grab from CVS or put the following file in your gdal/ogr
directory and rebuild.

   http://www.gdal.org/srctree/ogr/ogr_srs_pci.cpp

Thanks for the bug report!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ricardoluis at ufs.br  Wed Oct 11 14:55:28 2006
From: ricardoluis at ufs.br (Ricardo)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] GDAL  with PGCHIP driver segmentation fault
In-Reply-To: <20061005195736.M12526@ufs.br>
References: <200610051602.k95G21lp021450@duke.maptools.org>
	<20061005195736.M12526@ufs.br>
Message-ID: <20061011184113.M25041@ufs.br>

Hi all,

I just compile GDAL with PGCHIP driver to write and read raster data on my 
PostGIS data base. When I execute the "gdalinfo --formats" command it 
returns all suported formats including PGCHIP but when I try to use 
the "gdal_translate" command it returns a segmentation fault to me. I've 
realise tests with various files and the same response was given, when I use 
a compilation without PGCHIP it works fine, I know that driver is not done, 
but I suposse someone allread use it, so someone has a clue? Or other option 
to read and write raster data on my postGIS data base?

thanks you all.

Ricardo Lu?s


From vjetly at i3.com  Wed Oct 11 18:04:08 2006
From: vjetly at i3.com (Vikalpa Jetly)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] geographic coordinates in PCI files
In-Reply-To: <452CFDFE.1070204@pobox.com>
Message-ID: <011001c6ed81$2cdb9530$1b28c80a@i3.local>

Thanks Frank. I have no experience with building GDAL from source, so I'll
hack a sort of 'assume geographic' solution for such cases till these get
passed in the next binary release.

Vikalpa


Vikalpa,

I have confirmed the bug in GDAL and have applied a fix.  If you need
the fix, you can grab from CVS or put the following file in your gdal/ogr
directory and rebuild.

   http://www.gdal.org/srctree/ogr/ogr_srs_pci.cpp

Thanks for the bug report!

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org




From craig.miller at spatialminds.com  Wed Oct 11 20:44:12 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Where does the CPLError list get freed?
Message-ID: <005c01c6ed97$89ad5300$3301a8c0@vaio>

I'm on the warpath to get rid of a few niggling memory leaks that I'm
detecting.  A couple of items have me a bit puzzled at this point and I was
hoping to get a bit of clarification.

1.  If I call CPLGetLastErrorMsg() when there is no error, it obtains a
CPLErrorContext via CPLGetErrorContext() which creates an empty
CPLErrorContext and adds it to the list if it doesn't exist.  I've looked a
fair amount now, but can't seem to locate where this memory gets freed.


2.  Does CPLErrorReset clobber any szLastErrMsg that may have already been
assigned?

/**
 * Erase any traces of previous errors.
 *
 * This is normally used to ensure that an error which has been recovered
 * from does not appear to be still in play with high level functions.
 */

void CPL_STDCALL CPLErrorReset()
{
    CPLErrorContext *psCtx = CPLGetErrorContext();

    psCtx->nLastErrNo = CPLE_None;
    psCtx->szLastErrMsg[0] = '\0';
    psCtx->eLastErrType = CE_None;
}


----------
Here is the stack trace showing where the memory is being allocated that
isn't being freed.

Call Stack:
    c:\vault\gdal\port\cpl_vsisimple.cpp (323): VSICalloc
    c:\vault\gdal\port\cpl_conv.cpp (240): CPLCalloc
    c:\vault\gdal\port\cpl_error.cpp (122): CPLGetErrorContext
    c:\vault\gdal\port\cpl_error.cpp (436): CPLGetLastErrorMsg
    c:\vault\freeworlddesktop\geolib\geodatabase.cpp (53):
CGeoDatabase::SetConnection

Line 53 of CGeoDatabase::SetConnection is:
   const char* errMsg = CPLGetLastErrorMsg();

CPLErrorReset() is called 2 lines later.

The documentation for CPLGetLastErrorMsg indicates that the string returned
should not be freed by the caller.

Thanks for any pointers (pun intended).  :-)  I appreciate the help.

--Craig


From warmerdam at pobox.com  Wed Oct 11 22:02:12 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Where does the CPLError list get freed?
In-Reply-To: <005c01c6ed97$89ad5300$3301a8c0@vaio>
References: <005c01c6ed97$89ad5300$3301a8c0@vaio>
Message-ID: <452DA224.108@pobox.com>

Craig Miller wrote:
> I'm on the warpath to get rid of a few niggling memory leaks that I'm
> detecting.  A couple of items have me a bit puzzled at this point and I was
> hoping to get a bit of clarification.
> 
> 1.  If I call CPLGetLastErrorMsg() when there is no error, it obtains a
> CPLErrorContext via CPLGetErrorContext() which creates an empty
> CPLErrorContext and adds it to the list if it doesn't exist.  I've looked a
> fair amount now, but can't seem to locate where this memory gets freed.

Craig,

It took some digging but I have determined that error contexts are
registered with the CPL TLS (thread local storage) services when
created (via CPLSetTLS()) and the context is marked to be deleted on
cleanup.  That is when CPLCleanupTLS() gets called.  The actual
error buffer is part of the same memory block as the error context so
they get cleaned up together.

CPLCleanupTLS() is called by the GDALDriverManager() cleanup, so it should
be sufficient to call GDALDestroyDriverManager() (and to avoid calling any
CPL services after that).

> 2.  Does CPLErrorReset clobber any szLastErrMsg that may have already been
> assigned?

Yes, it deliberately clears the last error message and code set.

> ----------
> Here is the stack trace showing where the memory is being allocated that
> isn't being freed.
> 
> Call Stack:
>     c:\vault\gdal\port\cpl_vsisimple.cpp (323): VSICalloc
>     c:\vault\gdal\port\cpl_conv.cpp (240): CPLCalloc
>     c:\vault\gdal\port\cpl_error.cpp (122): CPLGetErrorContext
>     c:\vault\gdal\port\cpl_error.cpp (436): CPLGetLastErrorMsg
>     c:\vault\freeworlddesktop\geolib\geodatabase.cpp (53):
> CGeoDatabase::SetConnection
> 
> Line 53 of CGeoDatabase::SetConnection is:
>    const char* errMsg = CPLGetLastErrorMsg();
> 
> CPLErrorReset() is called 2 lines later.
> 
> The documentation for CPLGetLastErrorMsg indicates that the string returned
> should not be freed by the caller.

As mentioned above, calling GDALDestroyDriverManager() on application shutdown
should be sufficient to cleanup the error buffer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From taka_www at sinaman.com  Wed Oct 11 23:28:39 2006
From: taka_www at sinaman.com (taka_www@sinaman.com)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Does OGR support oracle Express?
Message-ID: <20061012032839.14934.qmail@mysinamail.com>

Dear All

I have just set a windoews ODBC connect to ORacle Express 10g relational Database, say DNS name is ABC. And I use ogrinfo myname/mypass@ABC, it cannot detect my DB and hang. Are there any addional procedure to be done inorder to get support on ORacle Express 10g. Please advice.

Many Thanks

Regards
Taka Wong 
______________________________________

===================================================================
X\@BGu~i@BvKOu@{
http://adimages.sina.com.hk/WSI_0610a.html
~A@voPartywIAI
http://adimages.sina.com.hk/Hallo_0610.html
m_pnBBeAoNqv~
http://adimages.sina.com.hk/Mov1_0610.html
===================================================================

From warmerdam at pobox.com  Wed Oct 11 23:59:24 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Does OGR support oracle Express?
In-Reply-To: <20061012032839.14934.qmail@mysinamail.com>
References: <20061012032839.14934.qmail@mysinamail.com>
Message-ID: <452DBD9C.8080701@pobox.com>

taka_www@sinaman.com wrote:
> Dear All
> 
> I have just set a windoews ODBC connect to ORacle Express 10g relational
> Database, say DNS name is ABC. And I use ogrinfo myname/mypass@ABC, it
> cannot detect my DB and hang. Are there any addional procedure to be done
> inorder to get support on ORacle Express 10g. Please advice.

Taka,

Are you prefixing the datasource name with ODBC:?

eg.

"ogrinfo ODBC:myname/mypass@ABC"

As long as you have your ODBC DSN working properly, you should be able
to access Oracle Express 10g as a non-spatial database using the ODBC
driver.  Note that the OGR ODBC driver generally tries to collect details
on visible tables when first connecting.  This can be pretty slow for a
database with many tables (do system tables show as tables via ODBC from
oracle?) so you might want to limit yourself to one or a few tables
explicitly.

eg.

"ogrinfo ODBC:myname/mypass@ABC,mytable"

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From blazrepnik at mail386.com  Thu Oct 12 04:17:28 2006
From: blazrepnik at mail386.com (GeoUser)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <452BDC77.50407@dmsolutions.ca>
References: <6634781.post@talk.nabble.com> <45273DA2.7020703@loskot.net>
	<6731330.post@talk.nabble.com> <452BBC7E.8080907@pobox.com>
	<452BDC77.50407@dmsolutions.ca>
Message-ID: <6771753.post@talk.nabble.com>


thanks all!

well i followed the steps on the site. but (i guess i'm missing something)
the problem is still here. if i copy the correct dlls into correct dirs i
still can not execute:

ogr2ogr -update -append -f "OCI" "OCI:user/pass@host2" "OCI:user/pass@host1"

i still get:

FAILURE:
Unable to open datasource `OCI:user/pass@host1' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> ODBC
  -> PGeo
  -> PostgreSQL
  -> MySQL

how do i use the OCI dll with ogr2ogr?




Jeff McKenna wrote:
> 
> For the record here are the steps in the readme: 
> http://www.maptools.org/ms4w/index.phtml?page=README_INSTALL.html#oracle-10g
> 
> jeff
> 
> 
> 
> Frank Warmerdam wrote:
>> GeoUser wrote:
>>> Thanks for the answer but i downloaded the MS4W but the OCI was not 
>>> present
>>> in ogr2ogr...
>>>
>> 
>> Anonymous GeoUser,
>> 
>> I believe you need to copy C:\MS4W\gdalplugins\ignored\ogr_OCI.dll into
>> C:\MS4W\gdalplugins.
>> 
>> I think this is discussed in C:\MS4W\README_INSTALL.TXT in the section 
>> about
>> Oracle 10g.
>> 
>> Best regards,
> 
> 
> -- 
> Jeff McKenna
> DM Solutions Group Inc.
> http://www.dmsolutions.ca
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/ogr2ogr-tf2380732.html#a6771753
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From blazrepnik at mail386.com  Thu Oct 12 05:46:42 2006
From: blazrepnik at mail386.com (GeoUser)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr
In-Reply-To: <452BDC77.50407@dmsolutions.ca>
References: <6634781.post@talk.nabble.com> <45273DA2.7020703@loskot.net>
	<6731330.post@talk.nabble.com> <452BBC7E.8080907@pobox.com>
	<452BDC77.50407@dmsolutions.ca>
Message-ID: <6773107.post@talk.nabble.com>


thanks all!! it works now!
-- 
View this message in context: http://www.nabble.com/ogr2ogr-tf2380732.html#a6773107
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Thu Oct 12 10:57:38 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Does OGR support oracle Express?
In-Reply-To: <20061012032839.14934.qmail@mysinamail.com>
References: <20061012032839.14934.qmail@mysinamail.com>
Message-ID: <452E57E2.7080301@loskot.net>

taka_www@sinaman.com wrote:
> I have just set a windoews ODBC connect to ORacle Express 10g
> relational Database, say DNS name is ABC. And I use ogrinfo
> myname/mypass@ABC, it cannot detect my DB and hang. Are there any
> addional procedure to be done inorder to get support on ORacle
> Express 10g. Please advice.

You can also access Oracle Express without ODBC, but directly
connecting with OCI.

BTW, have you compiled GDAL yourself?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Thu Oct 12 11:47:25 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR and measure support
Message-ID: <452E638D.4020206@pobox.com>

Ari,

I just wanted to let you know that I do - in the long term - hope to add
measure values to the OGR geometry model.  I am waiting for the new SFSQL
specification which includes an upgraded geometry model including measures.
Once that is adopted, we can start working on an RFC to upgrade the geometry
to XYZM, and also adding some of the other new constructs like curves.  Of
course the total job is big so I may seek some financial or additional
developer support to implement it.

I'll assign these bugs to Mateusz, as he has been doing some related
improvements in WKT and WKB processing.  But it may be some time before
he gets to correcting them.  Hopefully before the next GDAL release though.

   http://bugzilla.remotesensing.org/show_bug.cgi?id=1323
   http://bugzilla.remotesensing.org/show_bug.cgi?id=1036

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Oct 12 12:05:45 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR and measure support
In-Reply-To: <452E638D.4020206@pobox.com>
References: <452E638D.4020206@pobox.com>
Message-ID: <452E67D9.1080606@loskot.net>

Frank Warmerdam wrote:
> Ari,
> 
> I just wanted to let you know that I do - in the long term - hope to add
> measure values to the OGR geometry model.  I am waiting for the new SFSQL
> specification which includes an upgraded geometry model including measures.
> Once that is adopted, we can start working on an RFC to upgrade the
> geometry to XYZM, and also adding some of the other new constructs like curves.
> Of course the total job is big so I may seek some financial or additional
> developer support to implement it.
> 
> I'll assign these bugs to Mateusz, as he has been doing some related
> improvements in WKT and WKB processing.  But it may be some time before
> he gets to correcting them.  Hopefully before the next GDAL release though.
> 
>   http://bugzilla.remotesensing.org/show_bug.cgi?id=1323
>   http://bugzilla.remotesensing.org/show_bug.cgi?id=1036

Frank,

I've read these reports and accepted.
I'll be back to it in November.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From matt.wilkie at gov.yk.ca  Thu Oct 12 13:56:54 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] troubleshooting "Option -prjwin incomplete,
	or not recognised."
Message-ID: <452E81E6.9000303@gov.yk.ca>

Hi all,

I'm trying to extract a subset of a PCI .pix image with gdal_translate 
but I keep getting the error "Option -prjwin incomplete, or not 
recognised.". What is wrong with my command syntax?

 >>   gdal_translate -prjwin 527609.250, 6699639.000 562350.500, 
6667716.500 -outsize 600 600  bigass.pix test.tif
    Option -prjwin incomplete, or not recognised.

    Usage: gdal_translate [--help-general]
        [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
...snip...

gdalinfo for the source image reports:

 >> gdalinfo bigass.pix
Driver: PCIDSK/PCIDSK Database File
Size is 138965, 127690
Coordinate System is:
PROJCS["UTM Zone 8, Northern Hemisphere",
	...blah blah...
Metadata:
   SOFTWARE=PACEV9.1
	...blah blah...
Corner Coordinates:
Upper Left  (  492868.000, 6731561.500) (135d 7'50.57"W, 60d43'10.52"N)
Lower Left  (  492868.000, 6667716.500) (135d 7'42.36"W, 60d 8'46.84"N)
Upper Right (  562350.500, 6731561.500) (133d51'26.58"W, 60d42'53.22"N)
Lower Right (  562350.500, 6667716.500) (133d52'38.36"W, 60d 8'29.94"N)
Center      (  527609.250, 6699639.000) (134d29'54.44"W, 60d25'55.53"N)
Band 1 Block=138965x1 Type=Byte, ColorInterp=Undefined
	...blah blah...


note that in this example I extracted the projwin coordinates from the 
gdalinfo center point and the lower right.

thanks in advance for your time.

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From bryan at geomega.com  Thu Oct 12 14:36:25 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] troubleshooting "Option -prjwin incomplete,	or not
	recognised."
In-Reply-To: <452E81E6.9000303@gov.yk.ca>
References: <452E81E6.9000303@gov.yk.ca>
Message-ID: <452E8B29.2020008@geomega.com>

Matt,

Try removing the commas:

gdal_translate -prjwin 527609.250 6699639.000 562350.500 6667716.500 
-outsize 600 600  bigass.pix test.tif

Bryan

Matt Wilkie wrote:
> Hi all,
> 
> I'm trying to extract a subset of a PCI .pix image with gdal_translate 
> but I keep getting the error "Option -prjwin incomplete, or not 
> recognised.". What is wrong with my command syntax?
> 
>  >>   gdal_translate -prjwin 527609.250, 6699639.000 562350.500, 
> 6667716.500 -outsize 600 600  bigass.pix test.tif
>     Option -prjwin incomplete, or not recognised.
> 
>     Usage: gdal_translate [--help-general]
>         [-ot {Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/
> ...snip...
> 
> gdalinfo for the source image reports:
> 
>  >> gdalinfo bigass.pix
> Driver: PCIDSK/PCIDSK Database File
> Size is 138965, 127690
> Coordinate System is:
> PROJCS["UTM Zone 8, Northern Hemisphere",
> 	...blah blah...
> Metadata:
>    SOFTWARE=PACEV9.1
> 	...blah blah...
> Corner Coordinates:
> Upper Left  (  492868.000, 6731561.500) (135d 7'50.57"W, 60d43'10.52"N)
> Lower Left  (  492868.000, 6667716.500) (135d 7'42.36"W, 60d 8'46.84"N)
> Upper Right (  562350.500, 6731561.500) (133d51'26.58"W, 60d42'53.22"N)
> Lower Right (  562350.500, 6667716.500) (133d52'38.36"W, 60d 8'29.94"N)
> Center      (  527609.250, 6699639.000) (134d29'54.44"W, 60d25'55.53"N)
> Band 1 Block=138965x1 Type=Byte, ColorInterp=Undefined
> 	...blah blah...
> 
> 
> note that in this example I extracted the projwin coordinates from the 
> gdalinfo center point and the lower right.
> 
> thanks in advance for your time.
> 

From warmerdam at pobox.com  Thu Oct 12 14:39:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] troubleshooting "Option -prjwin incomplete,	or not
	recognised."
In-Reply-To: <452E81E6.9000303@gov.yk.ca>
References: <452E81E6.9000303@gov.yk.ca>
Message-ID: <452E8BE2.1030003@pobox.com>

Matt Wilkie wrote:
> Hi all,
> 
> I'm trying to extract a subset of a PCI .pix image with gdal_translate 
> but I keep getting the error "Option -prjwin incomplete, or not 
> recognised.". What is wrong with my command syntax?
> 
>  >>   gdal_translate -prjwin 527609.250, 6699639.000 562350.500, 
> 6667716.500 -outsize 600 600  bigass.pix test.tif
>    Option -prjwin incomplete, or not recognised.

Matt,

The problem is that the supported option is "-projwin", not "-prjwin".  :-)

It was you that implemented this option, right?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Oct 13 06:32:56 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Added new macro AX_LIB_ORACLE_OCI
Message-ID: <452F6B58.80104@loskot.net>

Hi,

I added new macro autoconf detecting Oracle OCI libraries,
available in CVS.
The macro is called AX_LIB_ORACLE_OCI and is defined
in m4/ax_oracle_oci.m4 file.
Generally, nothing revolutionary has been added,
but only a few new features.

Motivation
------------------------

The motivation was to support Oracle in versions >= 10, also the free
Oracle 10g Express Edition.
As I've discovered, the version 10.x has inroduced new
library libnnz10 - a security library - that's required and
used by OCI client library (libclntsh).
So, when building GDAL with OCI support from Oracle 10,
both linker flags -lclntsh and -lnnz10 are required.
When building GDAL with earlier versions (< 10) of Oracle client
libraries, only -lclntsh flag is used.

And the AX_LIB_ORACLE_OCI macro does care about all this differences
detection and appropriate flags setting.

The macro can be used to extend following variables in autotools
output files:

AC_SUBST(ORACLE_OCI_CFLAGS)
AC_SUBST(ORACLE_OCI_LDFLAGS)
AC_SUBST(ORACLE_OCI_VERSION)

It also sets HAVE_ORACLE_OCI="yes" or HAVE_ORACLE_OCI="no".


Features
------------------------

Now, ./configure script supports following OCI options:

1. --with-oci=[ARG]

Where ARG is a placeholder for:
- [DIR] - explicitly given path to ORACLE_HOME location
- yes   - then the macro checks for ORACLE_HOME environment variable
          and tests if it points to a directory location
- no    - macro disables Oracle OCI support

2.  --with-oci-include=[DIR] and --with-oci-lib=[DIR]

These two options enable user to pass paths to libs and
headers separately. If Oracle will change structure of folders
under ORACLE_HOME, it will be still possible to point new locations.

As DIR placeholder suggests, it's *only* possible to pass path using
these options. yes|no values are not supported.



Usage examples + output
------------------------

1. Explicitly request to disable Oracle OCI support

$ ./configure --with-oci=no

or

$ ./configure --without-oci

In both cases, the ./configure will print follownig messages:

...
checking if Oracle support is enabled... no

...
  OCI support:               no


2. Explicitly request to enable Oracle OCI

a) using predefined ORACLE_HOME environment variable

$ echo $ORACLE_HOME
/usr/lib/oracle/xe/app/oracle/product/10.2.0/server
$ ./configure --with-oci=yes

b) passing ORACLE_HOME

$ ./configure --with-oci=/path/to/oracle/home

c) passing lib/include paths separately

$ ./configure \
	--with-oci-include=/path/to/oracle/include \
	--with-oci-lib=/path/to/oracle/somewhere/lib


In all a), b), c) cases above, the ./configure script output is similar:

...
checking for Oracle OCI headers in
/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/rdbms/public... yes
checking for Oracle OCI libraries in
/usr/lib/oracle/xe/app/oracle/product/10.2.0/server/lib... yes
checking if Oracle OCI version is >= 8.1.7... yes
checking for Oracle version >= 10.x to use -lnnz10 flag... yes
checking if Oracle support is enabled... yes

...
  OCI support:               yes


As you can see in the message above, the line:
"checking for Oracle version >= 10.x to use -lnnz10 flag... yes"
shouts about adding (or not) libnnz10 to linker flags.




If anyone could test it with older versions of Oracle (< 10),
please give me some feedback.

If you have any questions, comments or bug reports,
please drop me a note.

There are other similar macros waiting to incorporate to GDAL,
like macros detecting PostgreSQL, MySQL and SQLite.
I hope to add them in future.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From matt.wilkie at gov.yk.ca  Fri Oct 13 12:13:27 2006
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] troubleshooting "Option -prjwin incomplete,	or not
	recognised."
In-Reply-To: <452E8BE2.1030003@pobox.com>
References: <452E81E6.9000303@gov.yk.ca> <452E8BE2.1030003@pobox.com>
Message-ID: <452FBB27.2010107@gov.yk.ca>

> The problem is that the supported option is "-projwin", not "-prjwin".  :-)

! Oh for the love of $DIETY !!

> It was you that implemented this option, right?

sigh, well it was at my request. that's two for two now I believe. i 
need a memory upgrade or something. :)

(((some history for the onlookers: a number of months ago I asked for 
help on another option, also implemented at my request. 'twas --optfile 
I believe. see? how bad is that? I don't even remember the particulars 
of the last embarassing moment! )))

be well,
be happy,
be memorious!

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Sat Oct 14 07:40:00 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] GDAL doesn't build
Message-ID: <4530CC90.70305@loskot.net>

Hi,

GDAL has stopped to compile after changes submitted yesterday/today.
Please, check builds number 67 and 63:

http://198.202.74.219:8500/

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Oct 14 08:29:10 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] GDAL doesn't build
In-Reply-To: <4530CC90.70305@loskot.net>
References: <4530CC90.70305@loskot.net>
Message-ID: <4530D816.7040200@loskot.net>

Mateusz Loskot wrote:
> Hi,
> 
> GDAL has stopped to compile after changes submitted yesterday/today.
> Please, check builds number 67 and 63:
> 
> http://198.202.74.219:8500/

OK, I found and fixed this issue (see gdal/ogr/ogr_spatialref.h,
revision 1.71)

Here are test builds:

http://198.202.74.219:8500/athlonxp_linux_quick/builds/13
http://198.202.74.219:8500/xeon_linux_quick/builds/10
http://198.202.74.219:8500/ppc_osx_quick/builds/10

Please, ignore builds on my Windows XP boxes (p4_winxp_quick,
p4_winxp_full).


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Peter.Rushforth at statcan.ca  Mon Oct 16 15:13:12 2006
From: Peter.Rushforth at statcan.ca (Peter.Rushforth@statcan.ca)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <AB38021D12570A4AB907F442AE548807011A82AD@stcem04.statcan.ca>

Hello,

I have been working with ogr2ogr and its built in projection
facility.  I notice what I think is some slight
coordinate drift ( less than a metre) when projecting
from lambert to NAD83 and back again.  I wonder 
if this is a result of single-precision coordinate 
representation in the projection engine?  Is there a 
way to request double precision usage in the system, or
perhaps to build it in at compile time?

Cheers,
Peter


From warmerdam at pobox.com  Mon Oct 16 17:20:22 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] (no subject)
In-Reply-To: <AB38021D12570A4AB907F442AE548807011A82AD@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE548807011A82AD@stcem04.statcan.ca>
Message-ID: <4533F796.7090903@pobox.com>

Peter.Rushforth@statcan.ca wrote:
> Hello,
> 
> I have been working with ogr2ogr and its built in projection
> facility.  I notice what I think is some slight
> coordinate drift ( less than a metre) when projecting
> from lambert to NAD83 and back again.  I wonder 
> if this is a result of single-precision coordinate 
> representation in the projection engine?  Is there a 
> way to request double precision usage in the system, or
> perhaps to build it in at compile time?

Peter,

I tested a point in California using the following commands (testepsg is
a testing app that can be build by cd'ing into gdal/ogr and doing "make
testepsg").

warmerda@gdal2200[806]% testepsg -t '+proj=utm +zone=11 +datum=NAD27' 
'+proj=utm +zone=11 +datum=NAD83' 440720 3751320
(440720.000000,3751320.000000,0.000000) -> (440639.480881,3751516.308207,0.000033)

warmerda@gdal2200[807]% testepsg -t '+proj=utm +zone=11 +datum=NAD83' 
'+proj=utm +zone=11 +datum=NAD27' 440639.480881 3751516.308207
(440639.480881,3751516.308207,0.000000) -> 
(440720.000000,3751320.000000,-0.000033)

This seems to indicate that datum shifting going through the OGR
facilities is preserving roughly six decimal places of accuracy when
going forward and back again.

Could you provide a specific example of a point and what values
you got for each step of the round trip (before, once, and then
back again).

The above example is using the "conus" files.  Perhaps you had a
problem in an area using NTv1 or NTv2 files?

I'd add that positions in OGR and PROJ.4 are carried around as
double precision.  The offsets read from the grid shift files
are likely in other formats (single precision, or some form of
integer form).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From stanley at fresco.sr.unh.edu  Mon Oct 16 21:52:28 2006
From: stanley at fresco.sr.unh.edu (Stanley Glidden)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] gdalwarp and lcc irregularly spaced grids
Message-ID: <Pine.LNX.4.64.0610162143170.309@fresco.sr.unh.edu>


Hi,

Can Gdal re-project irregular lambert conformal grids stored as NetCDF 
files?


If possible I would like to use gdalwarp to project the NCEP North 
American Regional Reanalysis NetCDF files to Geographic.

This is what I tried:

gdalwarp -s_srs '+proj=lcc +ellps=WGS84 +lat_1=50dN +lon_0=107dW 
+x_0=5632642.22547 +y_0=4612545.65137 +k_0=0.99995696 +units=m +no_defs' -t_srs 
'+proj=longlat +ellps=GRS80 +datum=wgs84 +no_defs' NETCDF:"air.197901.nc":air 
test.tif

This is the error I get:

ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates. There is no affine transformation and no GCPs

Is there missing required information in the NetCDF files, or is the problem 
simply that they are irregularly spaced grids?


Thanks.

Stanley
-----------------------------------------------------------------------

The data files were downloaded from:

http://www.cdc.noaa.gov/cdc/data.narr.pressure.html


ftp://ftp.cdc.noaa.gov/Datasets/NARR/pressure/


Results of gdalinfo:

Driver: netCDF/Network Common Data Format
Size is 512, 512
Coordinate System is `'
Metadata:
   NC_GLOBAL#Conventions=CF-1.0
   NC_GLOBAL#title=Daily NARR
   NC_GLOBAL#history=created 2005/07 by Hoop (netCDF2.3)
   NC_GLOBAL#comments=Data is from North American Regional Reanalysis
(8x/day).  It consists of most variables interpolated to
pressure surfaces from model (sigma) surfaces.
   NC_GLOBAL#institution=National Centers for Environmental Prediction
   NC_GLOBAL#platform=Model
   NC_GLOBAL#references=http://wwwt.emc.ncep.noaa.gov/mmb/rreanl/index.html
http://www.cdc.noaa.gov/cdc/data.narr.html
Subdatasets:
   SUBDATASET_1_NAME=NETCDF:"/net/usr/spool/air.197901.nc":lat
   SUBDATASET_1_DESC=[277x349] latitude (32-bit floating-point)
   SUBDATASET_2_NAME=NETCDF:"/net/usr/spool/air.197901.nc":lon
   SUBDATASET_2_DESC=[277x349] longitude (32-bit floating-point)
   SUBDATASET_3_NAME=NETCDF:"/net/usr/spool/air.197901.nc":time_bnds
   SUBDATASET_3_DESC=[31x2] time_bnds (64-bit floating-point)
   SUBDATASET_4_NAME=NETCDF:"/net/usr/spool/air.197901.nc":air
   SUBDATASET_4_DESC=[31x29x277x349] air_temperature (8-bit integer)
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)


Information about the files:

The native model grid is converted to a Northern Lambert Conformal Conic 
grid which is what we archive. Corners of this grid are 12.2N;133.5W, 
54.5N; 152.9W, 57.3N; 49.4W ,14.3N;65.1W (essentially, North America). The 
grid resolution is 349x277 which is approximately 0.3 degrees (32km) 
resolution at the lowest latitude. A page describing the coverage along 
with information on reading the projection is available.

More info:
http://www.cdc.noaa.gov/NARR/format.html



From warmerdam at pobox.com  Mon Oct 16 23:16:13 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] gdalwarp and lcc irregularly spaced grids
In-Reply-To: <Pine.LNX.4.64.0610162143170.309@fresco.sr.unh.edu>
References: <Pine.LNX.4.64.0610162143170.309@fresco.sr.unh.edu>
Message-ID: <45344AFD.7030600@pobox.com>

Stanley Glidden wrote:
> 
> Hi,
> 
> Can Gdal re-project irregular lambert conformal grids stored as NetCDF 
> files?
> 
> 
> If possible I would like to use gdalwarp to project the NCEP North 
> American Regional Reanalysis NetCDF files to Geographic.
> 
> This is what I tried:
> 
> gdalwarp -s_srs '+proj=lcc +ellps=WGS84 +lat_1=50dN +lon_0=107dW 
> +x_0=5632642.22547 +y_0=4612545.65137 +k_0=0.99995696 +units=m +no_defs' 
> -t_srs '+proj=longlat +ellps=GRS80 +datum=wgs84 +no_defs' 
> NETCDF:"air.197901.nc":air test.tif
> 
> This is the error I get:
> 
> ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates. There is no affine transformation and no 
> GCPs
> 
> Is there missing required information in the NetCDF files, or is the 
> problem simply that they are irregularly spaced grids?

Stanley,

This means that GDAL does not recognise any georeferencing information
in the NetCDF file.  If it has an "irregular grid" it is unlikely that
anything can be accomplished with GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From maestrini_andrea at virgilio.it  Tue Oct 17 06:02:17 2006
From: maestrini_andrea at virgilio.it (maestrini_andrea@virgilio.it)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] how to translate .asc files (Info ASCII Grid) to .dem
 files (USGS ASCII DEM)
Message-ID: <10e55b8b2d2.maestrini_andrea@virgilio.it>

Hello gdal-dev,
I'm very new to gdal so please cope with my ignorance.
I have two questions for you

1.  .dem files are same things SRTM files 
(used by Radio Mobile Radio Propagation tool)???

2. when I invoke the 
command:

./gdal_translate -of USGSDEM input.asc output.dem

I have 
this error:
Input file size is 6592, 5728
ERROR 1: DEM Default Setup: 
Importing source dataset projection failed

what it means?

Is the 
command right?
Can I translate a file .asc into a file .dem and How I 
can do it????

Thank you,
Andrea

 

From frederic.claudel at magellium.fr  Tue Oct 17 06:54:11 2006
From: frederic.claudel at magellium.fr (Frederic Claudel)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Header files installed on Windows
In-Reply-To: <452E81E6.9000303@gov.yk.ca>
Message-ID: <004101c6f1da$94546040$a401a8c0@pc164>

Hi all,
Is there any reason why some format headers are installed on UNIX (using
GNUmakefile files), but are missing in the install directory on Windows
(using makefile.vc)?

I'm refering to:
-rawdataset.h
-memdataset.h
-vrtdataset.h

=> I'd be happy to provide updated nmake makefiles to get the same behaviour
in Windows as in UNIX.

Regards,
Frederic Claudel



From warmerdam at pobox.com  Tue Oct 17 11:10:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Header files installed on Windows
In-Reply-To: <004101c6f1da$94546040$a401a8c0@pc164>
References: <004101c6f1da$94546040$a401a8c0@pc164>
Message-ID: <4534F249.7020106@pobox.com>

Frederic Claudel wrote:
> Hi all,
> Is there any reason why some format headers are installed on UNIX (using
> GNUmakefile files), but are missing in the install directory on Windows
> (using makefile.vc)?
> 
> I'm refering to:
> -rawdataset.h
> -memdataset.h
> -vrtdataset.h
> 
> => I'd be happy to provide updated nmake makefiles to get the same behaviour
> in Windows as in UNIX.
> 
> Regards,
> Frederic Claudel

Frederic,

The above header files ought to also be installed on windows since it is
quite reasonable for application code to need them (for writing custom
datasets or utilizing special VRT features).

If you submit a patch by bugzilla I'll apply (or list of changes to
apply - it doesn't need to be a formal patch).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Oct 17 11:20:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] how to translate .asc files (Info ASCII Grid) to .dem
	files (USGS ASCII DEM)
In-Reply-To: <10e55b8b2d2.maestrini_andrea@virgilio.it>
References: <10e55b8b2d2.maestrini_andrea@virgilio.it>
Message-ID: <4534F4C5.2030404@pobox.com>

maestrini_andrea@virgilio.it wrote:
> Hello gdal-dev,
> I'm very new to gdal so please cope with my ignorance.
> I have two questions for you
> 
> 1.  .dem files are same things SRTM files 
> (used by Radio Mobile Radio Propagation tool)???
> 
> 2. when I invoke the 
> command:
> 
> ./gdal_translate -of USGSDEM input.asc output.dem
> 
> I have 
> this error:
> Input file size is 6592, 5728
> ERROR 1: DEM Default Setup: 
> Importing source dataset projection failed
> 
> what it means?
> 
> Is the 
> command right?
> Can I translate a file .asc into a file .dem and How I 
> can do it????

Andrea,

USGS DEM is digital elevation format, and so suitable to hold data like
SRTM elevation data.

The error you see is likely because the source .asc file does not have
an apparent coordinate system and we can't write a USGS DEM file without
knowing the coordinate system.  If your .asc file is sampled on a latlong
grid (ie. it is geographic) then you could like do:

   gdal_translate -of USGSDEM -a_srs WGS84 input.asc output.dem

This tells the system that the coordinate system is lat/long WGS84.

I've just tried the translator and I see the USGSDEM writer only seems
to produce very specific products (essentially CDED - a Canadian version
of USGS DEM) in UTM.  It will almost certainly not be suitable for
your purposes.

Assuming you want to take your elevation data into another program, I'd
suggest looking for another more general intermediate format it supports.
Perhaps GeoTIFF?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Oct 17 11:22:01 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] how to translate .asc files (Info ASCII Grid) to .dem
	files (USGS ASCII DEM)
In-Reply-To: <4534F4C5.2030404@pobox.com>
References: <10e55b8b2d2.maestrini_andrea@virgilio.it>
	<4534F4C5.2030404@pobox.com>
Message-ID: <4534F519.7070502@pobox.com>

Frank Warmerdam wrote:
> I've just tried the translator and I see the USGSDEM writer only seems
> to produce very specific products (essentially CDED - a Canadian version
> of USGS DEM) in UTM.  It will almost certainly not be suitable for
> your purposes.

Umm, it turns out I was mixed up.  The translation to WGS84 worked fine
(though the result gets labelled as NAD83).  Using GDAL to translate to
USGS DEM should work fine with the -a_srs WGS84 on the commandline.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sieczka at biol.uni.wroc.pl  Wed Oct 18 05:22:27 2006
From: sieczka at biol.uni.wroc.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering mode
Message-ID: <4535F253.7020908@biol.uni.wroc.pl>

Frank,

OpenEV from FWTools 1.5, on Ubuntu dapper, in software rendering mode,
crashes opening any data (tif/png/shapefile I tried) and the following
error is printed:

/home/shoofi/bin/FWtools/bin/openev: line 25:  9336 Illegal instruction
    ${OPENEV_HOME}/bin/python ${OPENEV_HOME}/pymod/openev.py "$@"

No crashes in -h(ardware) mode... Only that in -h mode the following
warnings are issued, I don't know if that's OK:

---
Setup for user installed hardware acceleration

Gdk-WARNING **: Missing charsets in FontSet creation


Gdk-WARNING **:     JISX0208.1983-0


Gdk-WARNING **:     KSC5601.1987-0


Gdk-WARNING **:     GB2312.1980-0


Gdk-WARNING **:     JISX0201.1976-0
---

Maciek

From nic at ilu.ch  Wed Oct 18 06:03:21 2006
From: nic at ilu.ch (nic)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Projection SOMERC
Message-ID: <4535FBE9.6010409@ilu.ch>

I tried to use gdalwarp with the option

+proj=somerc
(swiss oblique mercator projection)

it seems that gdal doesn't know this projection. Is there a way to add 
this to a initialization file? The proj library works perfectly with somerc

Thanks for any suggestions

From maestrini_andrea at virgilio.it  Wed Oct 18 08:45:56 2006
From: maestrini_andrea at virgilio.it (maestrini_andrea@virgilio.it)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Help about conversion .dem to .hgt
Message-ID: <10e5b74e085.maestrini_andrea@virgilio.it>

Hi!

Can anyone help me in converting .dem format into .hgt format (for 
Radio Mobile tool that used SRTM maps )?
I have converted .asc format 
in .dem format with Gdal, but Radio Mobile works with SRTM format 
(Radio Mobile uses .hgt format) it doesn't work with .dem!!!

Thanks!!!!

Kind Regards
Andrea

From mateusz at loskot.net  Wed Oct 18 08:57:44 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering mode
In-Reply-To: <4535F253.7020908@biol.uni.wroc.pl>
References: <4535F253.7020908@biol.uni.wroc.pl>
Message-ID: <453624C8.4050304@loskot.net>

Maciej Sieczka wrote:
> Frank,
> 
> OpenEV from FWTools 1.5, on Ubuntu dapper, in software rendering mode,
> crashes opening any data (tif/png/shapefile I tried) and the following
> error is printed:
> 
> /home/shoofi/bin/FWtools/bin/openev: line 25:  9336 Illegal instruction
>     ${OPENEV_HOME}/bin/python ${OPENEV_HOME}/pymod/openev.py "$@"
> 
> No crashes in -h(ardware) mode... Only that in -h mode the following
> warnings are issued, I don't know if that's OK:

I've not used FWTools on Linux.
I use OpenEV 1.8 on my Ubuntu Dapper using software rendering
and hardware acceleration, on following hardware:

mloskot:~$ fglrxinfo
display: :0.0  screen: 0
OpenGL vendor string: ATI Technologies Inc.
OpenGL renderer string: MOBILITY/RADEON 9000 DDR Generic
OpenGL version string: 1.3.1072 (X4.3.0-8.25.18)

and I've not met any problems, no crashes and no Gdk-WARNING
messages too.

I know this information doesn't help you Maciej,
but may be it will help OpenEV developers.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Oct 18 09:31:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] SRTM .hgt generation
In-Reply-To: <10e5b7bbdf1.maestrini_andrea@virgilio.it>
References: <10e5b7bbdf1.maestrini_andrea@virgilio.it>
Message-ID: <45362C99.6030505@pobox.com>

maestrini_andrea@virgilio.it wrote:
>  Hi!
> 
> Can you help me in converting .dem format into .hgt format (for
> Radio Mobile tool that used SRTM maps )?
> I have converted .asc format
> in .dem format with Gdal, but Radio Mobile works with SRTM format
> (Radio Mobile uses .hgt format) it doesn't work with .dem!!!

Andrea,

I *think* that .hgt files are just raw 16bit raster files with a particular
product size and a particular resolution/extent.  This could be produced by
GDAL but I don't know the srtm particulars off hand.

OK, I skimmed the GRASS r.in.srtm script for particulars, and I it looks like
SRTM .hgt files are 1 degree by 1 degree files of 1201 x 1201 pixels, with
16bit data.  The files seem to be named stuff like e100s10.hgt.

To produce something like the e100s10.hgt file you should be able to do
something like:

gdalwarp -of EHDR -ot Int16 -te 100 9 101 10 -ts 1201 1201 -rb \
          in.tif e100s10.hgt

then delete e100s10.hdr, and e100s10.prj which you shouldn't need.

Ah, shoot, I see that .hgt files need to be in big endian order which is
not the default for the EHDR writer.  So in fact you will need to do:

gdalwarp -of EHDR -ot Int16 -te 100 9 101 10 -ts 1201 1201 -rb \
          in.tif e100s10.hgt

edit e100s10.hdr, modify "BYTEORDER   I" to "BYTEORDER   M" and then rerun
the warp:

gdalwarp -of EHDR -rb in.tif e100s10.hgt

You will need to take care to produce only tiles for regions you have input
data for.

I have taken the liberty of cc:ing gdal-dev in case this is of interest to
others.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 18 10:07:54 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Projection SOMERC
In-Reply-To: <4535FBE9.6010409@ilu.ch>
References: <4535FBE9.6010409@ilu.ch>
Message-ID: <4536353A.2030105@pobox.com>

nic wrote:
> I tried to use gdalwarp with the option
> 
> +proj=somerc
> (swiss oblique mercator projection)
> 
> it seems that gdal doesn't know this projection. Is there a way to add 
> this to a initialization file? The proj library works perfectly with somerc

Nic,

There is some support for handling proj=somerc in GDAL/OGR since late 2004.
Can you provide some specifics of what does not work and what error you get?
The logic for converting to/from proj.4 looks like this:

     else if( EQUAL(pszProj,"somerc") )
     {
         SetHOM( OSR_GDV( papszNV, "lat_0", 0.0 ),
                 OSR_GDV( papszNV, "lon_0", 0.0 )+dfFromGreenwich,
                 90.0,  90.0,
                 OSR_GDV( papszNV, "k", 1.0 ),
                 OSR_GDV( papszNV, "x_0", 0.0 ),
                 OSR_GDV( papszNV, "y_0", 0.0 ) );
     }

     else if( EQUAL(pszProjection,SRS_PT_HOTINE_OBLIQUE_MERCATOR) )
     {
         /* not clear how ProjParm[3] - angle from rectified to skewed grid -
            should be applied ... see the +not_rot flag for PROJ.4.
            Just ignoring for now. */

         /* special case for swiss oblique mercator : see bug 423 */
         if( fabs(GetNormProjParm(SRS_PP_AZIMUTH,0.0) - 90.0) < 0.0001
             && fabs(GetNormProjParm(SRS_PP_RECTIFIED_GRID_ANGLE,0.0)-90.0) < 
0.0001 )
         {
             sprintf( szProj4+strlen(szProj4),
                      "+proj=somerc +lat_0=%.16g +lon_0=%.16g"
                      " +x_0=%.16g +y_0=%.16g ",
                      GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
                      GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
                      GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
                      GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
         }
         else
         {
             sprintf( szProj4+strlen(szProj4),
                      "+proj=omerc +lat_0=%.16g +lonc=%.16g +alpha=%.16g"
                      " +k=%.16g +x_0=%.16g +y_0=%.16g ",
                      GetNormProjParm(SRS_PP_LATITUDE_OF_ORIGIN,0.0),
                      GetNormProjParm(SRS_PP_CENTRAL_MERIDIAN,0.0),
                      GetNormProjParm(SRS_PP_AZIMUTH,0.0),
                      GetNormProjParm(SRS_PP_SCALE_FACTOR,1.0),
                      GetNormProjParm(SRS_PP_FALSE_EASTING,0.0),
                      GetNormProjParm(SRS_PP_FALSE_NORTHING,0.0) );
         }
     }


So somerc (Swiss Oblique Mercator) is represented in Well Known Text format
as Hotine Oblique Mercator, and it seems that specific parameter values
are mapped to somerc on the "way back" to proj.4.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 18 10:11:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Re: OpenEV/FWTools 1.5 - crash in software rendering mode
In-Reply-To: <4535F253.7020908@biol.uni.wroc.pl>
References: <4535F253.7020908@biol.uni.wroc.pl>
Message-ID: <45363619.5080602@pobox.com>

Maciej Sieczka wrote:
> Frank,
> 
> OpenEV from FWTools 1.5, on Ubuntu dapper, in software rendering mode,
> crashes opening any data (tif/png/shapefile I tried) and the following
> error is printed:
> 
> /home/shoofi/bin/FWtools/bin/openev: line 25:  9336 Illegal instruction
>     ${OPENEV_HOME}/bin/python ${OPENEV_HOME}/pymod/openev.py "$@"
> 
> No crashes in -h(ardware) mode... Only that in -h mode the following
> warnings are issued, I don't know if that's OK:

Maciej,

This is (unfortunately) fairly common.  It seems that the all-software
OpenGL version shipped with FWTools OpenEV does not work on some linux
systems for reasons I don't understand.  In that case switching to hardware
mode often does work.  I am wondering if hardware mode ought to be the
default, and software mode a fallback. I'm not sure if that might not
be much worse.

I will add an FAQ about this on the fwtools.maptools.org/linux-main.html
page.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Wed Oct 18 10:26:40 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering mode
In-Reply-To: <453624C8.4050304@loskot.net>
References: <4535F253.7020908@biol.uni.wroc.pl> <453624C8.4050304@loskot.net>
Message-ID: <453639A0.70508@o2.pl>

Mateusz Loskot wrote:
> Maciej Sieczka wrote:
>> Frank,
>>
>> OpenEV from FWTools 1.5, on Ubuntu dapper, in software rendering mode,
>> crashes opening any data (tif/png/shapefile I tried) and the following
>> error is printed:
>>
>> /home/shoofi/bin/FWtools/bin/openev: line 25:  9336 Illegal instruction
>>     ${OPENEV_HOME}/bin/python ${OPENEV_HOME}/pymod/openev.py "$@"
>>
>> No crashes in -h(ardware) mode... Only that in -h mode the following
>> warnings are issued, I don't know if that's OK:

> I've not used FWTools on Linux.
> I use OpenEV 1.8 on my Ubuntu Dapper using software rendering
> and hardware acceleration, on following hardware:
> 
> mloskot:~$ fglrxinfo
> display: :0.0  screen: 0
> OpenGL vendor string: ATI Technologies Inc.
> OpenGL renderer string: MOBILITY/RADEON 9000 DDR Generic
> OpenGL version string: 1.3.1072 (X4.3.0-8.25.18)
>
> and I've not met any problems, no crashes and no Gdk-WARNING
> messages too.
> 
> I know this information doesn't help you Maciej,
> but may be it will help OpenEV developers.

Oh, I can see you are using ATI binary driver. I've been using XORG's
free 'radeon' driver, as the ATI one doesn't give me the 3D
acceleration on my X700, despite of no errors or relevant warnings in
the XORG log and the fact, that direct rendering *is* turned on - while
the free 'radeon' does provide a pretty decent 3D accel. Thus using ATI
binary driver is not an option for me, even if that helped with OpenEV.

Best,
Maciek

From mateusz at loskot.net  Wed Oct 18 10:30:37 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering mode
In-Reply-To: <453639A0.70508@o2.pl>
References: <4535F253.7020908@biol.uni.wroc.pl> <453624C8.4050304@loskot.net>
	<453639A0.70508@o2.pl>
Message-ID: <45363A8D.8020304@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
>>
>> mloskot:~$ fglrxinfo
>> display: :0.0  screen: 0
>> OpenGL vendor string: ATI Technologies Inc.
>> OpenGL renderer string: MOBILITY/RADEON 9000 DDR Generic
>> OpenGL version string: 1.3.1072 (X4.3.0-8.25.18)
>>
>> and I've not met any problems, no crashes and no Gdk-WARNING
>> messages too.
>>
>> I know this information doesn't help you Maciej,
>> but may be it will help OpenEV developers.
> 
> Oh, I can see you are using ATI binary driver. I've been using XORG's
> free 'radeon' driver, as the ATI one doesn't give me the 3D
> acceleration on my X700, despite of no errors or relevant warnings in
> the XORG log and the fact, that direct rendering *is* turned on - while
> the free 'radeon' does provide a pretty decent 3D accel. Thus using ATI
> binary driver is not an option for me, even if that helped with OpenEV.

Maciej,

I just followed instructions from the ubuntuforums.org, about how to
configure 3D acceleration for ATI.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Wed Oct 18 11:02:48 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering mode
In-Reply-To: <45363A8D.8020304@loskot.net>
References: <4535F253.7020908@biol.uni.wroc.pl>
	<453624C8.4050304@loskot.net>	<453639A0.70508@o2.pl>
	<45363A8D.8020304@loskot.net>
Message-ID: <45364218.3080303@o2.pl>

Mateusz Loskot wrote:
> Maciej Sieczka wrote:
>> Mateusz Loskot wrote:
>> Oh, I can see you are using ATI binary driver. I've been using XORG's
>> free 'radeon' driver, as the ATI one doesn't give me the 3D
>> acceleration on my X700, despite of no errors or relevant warnings in
>> the XORG log and the fact, that direct rendering *is* turned on - while
>> the free 'radeon' does provide a pretty decent 3D accel. Thus using ATI
>> binary driver is not an option for me, even if that helped with OpenEV.

> I just followed instructions from the ubuntuforums.org, about how to
> configure 3D acceleration for ATI.

I did the same, no good. Do you mean the link:
http://wiki.cchtml.com/index.php/Ubuntu_Dapper_Installation_Guide?

I did all as suggested. Like I'm saying - driver loads, X starts, no
errors, warnings, any signs of anything wrong, fglrx* programs work OK.
Only no 3D acceleration, despite direct rendering enabled. I used the
most actuall binary deb available for Dapper, ie. 8.28.8, provided in
seveas Dapper repo. I should give it a shot with the older one,
Dapper's stock 8.25.18, if time allows. Anyway - ATI sucks. I wish I
bought a laptop with NVIDIA instead.

Maciek

From epk.lists at gmail.com  Wed Oct 18 11:06:49 2006
From: epk.lists at gmail.com (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] no sucess trying to build ECW for GDAL
In-Reply-To: <4523E0EF.90301@pobox.com>
References: <d0b0f8b0610031050j16bcb3afi242b0625899dce12@mail.gmail.com>
	<4523E0EF.90301@pobox.com>
Message-ID: <2d1782780610180806t7354e7e5ya59f46b01b3913de@mail.gmail.com>

Hi folks, thanks for the tips.

Now I got sucess on Fedora 5 ( which GCC 4 is default, but GCC 3 is
available also)
with:

$ CC=/usr/bin/gcc32 CXX=/usr/bin/gcc32 ./configure
$ make
$ make install

I didn't build MapServer or any other viewer yet to check is this library
was really setup with sucess, but if I found any other problems, I'll post
here.

Thanks

Eduardo

On 10/4/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
>
> Folks,
>
> All I would add is that I've now built the new libecw with gcc 3.3.3 and
> it seems to build, and install fine.  I build GDAL against it with no
> problem
> and the ecw.py autotest passes.  This on Intel Linux.
>
> Perhaps a brief beta cycle before final release could have identified the
> problems with newer gcc's!
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Eduardo Patto Kanegae
http://www.webmapit.com.br
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061018/93d1fd98/attachment.html
From nkumaran78 at yahoo.com  Wed Oct 18 13:16:19 2006
From: nkumaran78 at yahoo.com (Kumaran)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Read/Write LAS format using GDAL/OGR
Message-ID: <20061018171619.40722.qmail@web35303.mail.mud.yahoo.com>

Hello,
   
  Has anyone implemented Drivers to Read/Write LAS format using GDAL/OGR? If so Can you please provide the approach?
   
  Regards
  Kumaran
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061018/9ca4951d/attachment.html
From perrygeo at gmail.com  Thu Oct 19 02:30:36 2006
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Read/Write LAS format using GDAL/OGR
In-Reply-To: <20061018171619.40722.qmail@web35303.mail.mud.yahoo.com>
References: <20061018171619.40722.qmail@web35303.mail.mud.yahoo.com>
Message-ID: <5383fa5e0610182330u7ea4f61r63b0b03b2e557329@mail.gmail.com>

Kumaran,

On 10/18/06, Kumaran <nkumaran78@yahoo.com> wrote:
> Has anyone implemented Drivers to Read/Write LAS format using GDAL/OGR? If
> so Can you please provide the approach?


  I'm not aware of an OGR driver for LAS formats but I wrote a cursory
python module to read LAS formats into a point shapefile,

http://www.perrygeo.net/wordpress/?p=38



-- 
Matthew T. Perry
GIS Analyst / Software Engineer
National Center for Ecological Analysis and Synthesis (NCEAS)
work: perry@nceas.ucsb.edu
web: http://www.perrygeo.net

From tutey at o2.pl  Thu Oct 19 09:58:48 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering mode
In-Reply-To: <45364218.3080303@o2.pl>
References: <4535F253.7020908@biol.uni.wroc.pl>	<453624C8.4050304@loskot.net>	<453639A0.70508@o2.pl>	<45363A8D.8020304@loskot.net>
	<45364218.3080303@o2.pl>
Message-ID: <45378498.2020005@o2.pl>

> Mateusz Loskot wrote:

>> I just followed instructions from the ubuntuforums.org, about how to
>> configure 3D acceleration for ATI.

A followup: I managed to get fglrx 8.25.18 running (with 8.28.8 still
no acceleration...) and the error is not gone. It is exactly the same
like it was when I was using 'radeon' driver. I have disabled all
tweaks I'm using in the xorg.conf, but it doesn't help.

I don't have a big problem with this, I can use -h and all is fine.
Just letting you know that the driver doesn't matter.

Maciek

From bartvde at osgis.nl  Thu Oct 19 11:05:30 2006
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] converting ECW to MrSID
Message-ID: <79900e6a082c85c3c8e300d76af25947@145.50.39.8>

Hi list,

I am trying to convert a large (56 Gb) ECW file on Red Hat Enterprise Linux
3 to MrSID.

After a while I run into a segfault. The size of the MrSID file at the time
of the crash is 369 Mb. The machine has 4 Gb of memory. 

Version info:
mrsid: 5.0.6
ecw: 3.3RC2
gdal: 1.3.2

Output from gdal_translate:

Input file size is 690000, 800000
0free(): invalid pointer 0x3abad2f1!

Any ideas on how to make this conversion work?

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl


--------- Oorspronkelijk bericht --------
Van: Maciej Sieczka <tutey@o2.pl>
Naar: Mateusz Loskot <mateusz@loskot.net>
Cc: gdal-dev@lists.maptools.org
Onderwerp: Re: [Gdal-dev] OpenEV/FWTools 1.5 - crash in software rendering
mode
Datum: 19/10/06 12:33

> &gt; Mateusz Loskot wrote:
> 
> &gt;&gt; I just followed instructions from the ubuntuforums.org, about how
to
> &gt;&gt; configure 3D acceleration for ATI.
> 
> A followup: I managed to get fglrx 8.25.18 running (with 8.28.8 still
> no acceleration...) and the error is not gone. It is exactly the same
> like it was when I was using 'radeon' driver. I have disabled all
> tweaks I'm using in the xorg.conf, but it doesn't help.
> 
> I don't have a big problem with this, I can use -h and all is fine.
> Just letting you know that the driver doesn't matter.
> 
> Maciek
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 




From naiara at mail.utexas.edu  Thu Oct 19 18:48:06 2006
From: naiara at mail.utexas.edu (Naiara Pinto)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] gdalwarp error 33
Message-ID: <9d4084070610191548j379b27f5y9201f0a9791df7cb@mail.gmail.com>

Hi all,

I have the most recent version of FWTools and I am having trouble
using Gdalwarp in one of my layers. Here is what I did:

gdalwarp -s_srs '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
-t_srs '+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0
+y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs' -tr 500 500 -rb
-srcnodata 251 -dstnodata -9999 LatLon.NA.2001.Tree.tif ptree.tif

I am getting the following error:
Creating output file that is 36225P x 17963L.
ERROR 1: no system list, errno: 33

ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
the pfnTransformer failed.
*** glibc detected *** corrupted double-linked list: 0x08078570 ***
Aborted

I have used this dataset before and it worked ok when I tried to
project it to Lambert Azimuthal Equal Area. But now that I am trying
to project it to Albers Equal Area, I am getting the error above.

Does anyone have any ideas why this happens?

Thanks,

Naiara.

From szekerest at gmail.com  Fri Oct 20 19:45:02 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] RFC 6: OGR support for querying and selection by
	geometry and feature style
Message-ID: <f3b73b7d0610201645t3c8b5a6bq5a63fd07b0deb7b8@mail.gmail.com>

Hi Folks,

Let me introduce a proposed new feature described in RFC-6.

This proposal addresses and issue have been discovered long ago, and
OGR provides
no equivalent solution so far.

Some of the supported formats like Mapinfo.tab may contain multiple
geometry types
and style information. In order to handle this kind of data sources properly a
support for selecting the layers by geometry type or by the style info would be
highly required.

All of the proposed changes can be found at the tracking bug of this RFC
referenced later in this letter.

The most reasonable way to support this feature is to extend the currently
existing 'special field' approach to allow specifying more than one fields.
Along with the already definied 'FID' field we will add the following ones:

'OGR_GEOMETRY' containing the geometry type like 'POINT' or 'POLYGON'.
'OGR_STYLE' containing the style string.
'OGR_GEOM_WKT' containing the full WKT of the geometry.

By providing the aforementioned fields one can make for example
the following selections:

select FID, OGR_GEOMETRY, OGR_STYLE, OGR_GEOM_WKT, * from MyTable
where OGR_GEOMETRY='POINT' OR OGR_GEOMETRY='POLYGON'

select FID, OGR_GEOMETRY, OGR_STYLE, OGR_GEOM_WKT, * from MyTable
where OGR_STYLE LIKE '%BRUSH%'

select FID, OGR_GEOMETRY, OGR_STYLE, OGR_GEOM_WKT, * from MyTable
where OGR_GEOM_WKT LIKE 'POLYGON%'

select distinct OGR_GEOMETRY from MyTable order by OGR_GEOMETRY desc

For more details see RFC-6 and the related bugs:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1333
http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=1129
http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=1438

Best Regards,

Tamas

From flightline at airtelbroadband.in  Sun Oct 22 06:18:25 2006
From: flightline at airtelbroadband.in (flightline)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
Message-ID: <453B4571.1010908@airtelbroadband.in>

Dear Sir,

Do you have hfatest.exe with you. May I request a copy?

The .ovr file I have has an EHFA Header Tag
and I can't figure it out.

Unfortunately I can't send you a sample but have requested for another sample set.

Any / all help with the tag and decoding it's contents is welcome


Thanks
Francis


From yjacolin at free.fr  Sun Oct 22 09:59:20 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] French translation of the GDAl documentation
Message-ID: <200610221559.20656.yjacolin@free.fr>

Hi,

I begin to translate the gdal doc in french a few monthes ago. I would like to 
know if the licence allow me to do it and if I can use the english files to 
give you my final french translation (if your are interested to) ?

Thanks,

Yves Jacolin
----
Yves Jacolin
htp://yjacolin.gloobe.org

From rainer.spittel at terralink.co.nz  Thu Oct 19 23:27:15 2006
From: rainer.spittel at terralink.co.nz (Rainer Spittel)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] gdal-1.3.2 - compiling errors on fedora 5
Message-ID: <12B8F225666F99489CEFA8B3F261540C5F2E48@geneva.local.terralink>

Hi,

  I try to compile gdal on fedora 5 (gcc version 4.1.1) and get error
messages during installation. To set up the make files, I run following
configure command:

>> ./configure  --with-ogr --without-python --with-xerces
>> make

  During the compiling, I get following error message:

[...]
make[3]: Entering directory
`/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts/pg'
make[3]: Nothing to be done for `default'.
make[3]: Leaving directory
`/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts/pg'
make -C ili
make[3]: Entering directory
`/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts/ili'
make -C iom
make[4]: Entering directory
`/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts/ili/iom'
make[4]: Nothing to be done for `default'.
make[4]: Leaving directory
`/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts/ili/iom'
/bin/sh /usr/local/src/gdal-1.3.2/libtool --mode=compile g++ -Wall  -O2
-I.. -I../.. -I/usr/local/src/gdal-1.3.2/port
-I/usr/local/src/gdal-1.3.2/gcore -I/usr/local/src/gdal-1.3.2/alg
-I/usr/local/src/gdal-1.3.2/ogr
-I/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts -I/usr/local/include
-I/usr/local/include/xercesc -DHAVE_GEOS=1 -I/usr/local/include
-DOGR_ENABLED -I/usr/local/src/gdal-1.3.2/port  -c -o
../o/ogrili2layer.o ogrili2layer.cpp
 g++ -Wall -O2 -I.. -I../.. -I/usr/local/src/gdal-1.3.2/port
-I/usr/local/src/gdal-1.3.2/gcore -I/usr/local/src/gdal-1.3.2/alg
-I/usr/local/src/gdal-1.3.2/ogr
-I/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts -I/usr/local/include
-I/usr/local/include/xercesc -DHAVE_GEOS=1 -I/usr/local/include
-DOGR_ENABLED -I/usr/local/src/gdal-1.3.2/port -c ogrili2layer.cpp
-fPIC -DPIC -o ../o/.libs/ogrili2layer.o
ogrili2layer.cpp: In constructor 'OGRILI2Layer::OGRILI2Layer(const
char*, OGRSpatialReference*, int, OGRwkbGeometryType,
OGRILI2DataSource*)':
ogrili2layer.cpp:76: error: no match for 'operator=' in
'((OGRILI2Layer*)this)->OGRILI2Layer::listFeatureIt = 0'
/usr/lib/gcc/i386-redhat-linux/4.1.1/../../../../include/c++/4.1.1/bits/
stl_list.h:189: note: candidates are:
std::_List_const_iterator<OGRFeature*>&
std::_List_const_iterator<OGRFeature*>::operator=(const
std::_List_const_iterator<OGRFeature*>&)
ogrili2layer.cpp: In member function 'virtual OGRFeature*
OGRILI2Layer::GetNextFeature()':
ogrili2layer.cpp:135: error: no match for 'operator==' in
'((OGRILI2Layer*)this)->OGRILI2Layer::listFeatureIt == 0'
/usr/lib/gcc/i386-redhat-linux/4.1.1/../../../../include/c++/4.1.1/bits/
stl_list.h:251: note: candidates are: bool
std::_List_const_iterator<_Tp>::operator==(const
std::_List_const_iterator<_Tp>&) const [with _Tp = OGRFeature*]
make[3]: *** [../o/ogrili2layer.o] Error 1
make[3]: Leaving directory
`/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts/ili'
make[2]: *** [ili-target] Error 2
make[2]: Leaving directory `/usr/local/src/gdal-1.3.2/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/usr/local/src/gdal-1.3.2/ogr'

I have installed xerces 2.7 from source code.

Any suggestion?

rainer spittel
Senior Developer


From warmerdam at pobox.com  Sun Oct 22 18:43:39 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] French translation of the GDAl documentation
In-Reply-To: <200610221559.20656.yjacolin@free.fr>
References: <200610221559.20656.yjacolin@free.fr>
Message-ID: <453BF41B.7080908@pobox.com>

Jacolin Yves wrote:
> Hi,
> 
> I begin to translate the gdal doc in french a few monthes ago. I would like to 
> know if the licence allow me to do it and if I can use the english files to 
> give you my final french translation (if your are interested to) ?

Yves,

There is no explicit license for the web site stuff on the web site, but as
part of the source tree I think of it being under the same MIT/X license as
the source code.   So you can definitely produce translations, etc.

I haven't thought too much about translations.  Andrey has some some
translation for a Russian version of the web site, primarily (as I understand
it) by producing a "ru" version of various gdal/doc files in gdal/doc/ru and
having them references by selecting Russian from the main index page.

I see no problem with using a similar approach for French if you would like.

My initial impression would be that the most useful things to translate would
be the user oriented documentation (describing utilities, etc).  One problem
is that the driver documents - important for users - are distributed all over
the place in the actual driver directories.

The main concern with translations is that it will be hard to keep them up
to date as the English content changes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sun Oct 22 19:43:35 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] gdal-1.3.2 - compiling errors on fedora 5
In-Reply-To: <12B8F225666F99489CEFA8B3F261540C5F2E48@geneva.local.terralink>
References: <12B8F225666F99489CEFA8B3F261540C5F2E48@geneva.local.terralink>
Message-ID: <453C0227.1040101@loskot.net>

Rainer Spittel wrote:
>   I try to compile gdal on fedora 5 (gcc version 4.1.1) and get error
> messages during installation. To set up the make files, I run following
> configure command:
> 
>>> ./configure  --with-ogr --without-python --with-xerces
>>> make
> 
>   During the compiling, I get following error message:
> 
> [...]
> ogrili2layer.cpp: In constructor 'OGRILI2Layer::OGRILI2Layer(const
> char*, OGRSpatialReference*, int, OGRwkbGeometryType,
> OGRILI2DataSource*)':
> ogrili2layer.cpp:76: error: no match for 'operator=' in
> '((OGRILI2Layer*)this)->OGRILI2Layer::listFeatureIt = 0'
> /usr/lib/gcc/i386-redhat-linux/4.1.1/../../../../include/c++/4.1.1/bits/
> stl_list.h:189: note: candidates are:
> std::_List_const_iterator<OGRFeature*>&
> std::_List_const_iterator<OGRFeature*>::operator=(const
> std::_List_const_iterator<OGRFeature*>&)
> ogrili2layer.cpp: In member function 'virtual OGRFeature*
> OGRILI2Layer::GetNextFeature()':
> ogrili2layer.cpp:135: error: no match for 'operator==' in
> '((OGRILI2Layer*)this)->OGRILI2Layer::listFeatureIt == 0'
> /usr/lib/gcc/i386-redhat-linux/4.1.1/../../../../include/c++/4.1.1/bits/
> stl_list.h:251: note: candidates are: bool
> std::_List_const_iterator<_Tp>::operator==(const
> std::_List_const_iterator<_Tp>&) const [with _Tp = OGRFeature*]
> make[3]: *** [../o/ogrili2layer.o] Error 1
>
> [...] 
> Any suggestion?

Rainer,

This is a known bug in OGR Interlis (ili) driver in GDAL 1.3.2.
Here is detailed Bug 1247 report:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1247

I suggest you to use GDAL from current CVS, where the bug has been fixed.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Sun Oct 22 23:41:37 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
Message-ID: <453C39F1.7080009@perkins.net>

Hi GDALers,

After bashing my head against the brick wall that is Visual Studio 2005 
for most of the day, I made a discovery that I figured I'd share with 
you guys to perhaps save some of you the same headaches...

The problem I have been getting is that I've been unable to compile 
applications in Visual Studio 2005 using the /MDd compile switch (link 
with the debug C runtime), when I link them against the GDAL library 
compiled with the /MD switch (link with the non-debug CRT, which is what 
the GDAL makefiles do). Doing this results in a "MSVCR80.DLL not found" 
error when I try to run the program. Compiling my code with /MD fixes 
things, but this is not the default for Visual Studio debug builds, and 
simply changing the switch to /MD breaks other things in the debug 
build. Trying to copy the MSVCR80.DLL file that comes with Visual Studio 
into my program's folder changes the error to "an application tried to 
load the C runtime incorrectly".

Officially, mixing code that uses /MDd with libraries that use /MD is 
not supported, so you won't find much help in the MS documentation. In 
practice however, this combination is almost impossible to avoid this if 
you use third party DLLs such as GDAL (often only available built with 
/MD) with your own code in the Visual Studio IDE. Anyway, after much 
searching and experimentation, I found the answer.

You MUST embed the manifest file that is generated by the GDAL 
compilation process into the GDAL DLL. It is NOT enough to simply have 
the gdal13.dll.manifest file in the same directory as the DLL. 
Previously I thought this was enough (and I updated the makefile.vc 
files to install this manifest file), but it isn't.

To embed the manifest use, the mt.exe tool:

 > mt -manifest gdal13.dll.manifest -outputresource:gdal13.dll;2

Probably the makefile.vc files should be updated to do this. I'll 
hopefully get to it in a few days time if nobody beats me to it...

Cheers,

Sy




From ben at vterrain.org  Mon Oct 23 01:23:52 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <453C39F1.7080009@perkins.net>
Message-ID: <003901c6f663$6e09a980$6501a8c0@DellWork>

Hi Simon,

I just went through the learning process on VC8 and manifests myself
recently, so let me share some insight.. 

> -----Original Message-----
> From: Simon Perkins
> Sent: Sunday, October 22, 2006 5:42 PM
> 
> The problem I have been getting is that I've been unable to 
> compile applications in Visual Studio 2005 using the /MDd 
> compile switch (link with the debug C runtime), when I link 
> them against the GDAL library compiled with the /MD switch 
> (link with the non-debug CRT, which is what the GDAL 
> makefiles do). Doing this results in a "MSVCR80.DLL not found" 
> error when I try to run the program. Compiling my code with 
> /MD fixes things

Note that it doesn't really "fix" things.  It just happens to work if the
machine you're running on already has the release-mode runtime library DLLs
(msvcp80.dll, msvcr80.dll).  Some machines will have this, especially if
they have some recent .NET framework installed.

> but this is not the default for Visual 
> Studio debug builds, and simply changing the switch to /MD 
> breaks other things in the debug build.

Yes, you should _always_ build your application and GDAL with the same
version of the runtime library (/MD, or /MDd).

Since some machines won't have either the release-mode OR debug-mode
(msvcp80d.dll, msvcr80d.dll) you must include a copy of these DLLs with your
executable.  And, as you've observed, you need to include your application's
manifest, preferably embedded.  Note, this is different than the GDAL
manifest, which _should_ be already embedded by default when VC8 upgraded
your VC7 project file.

Unless, of course, you're trying to use makefile.vc, which i strongly
recommend to avoid.  There is no way VC8 can fix it when upgrading from VC7
to VC8 standards.  Use gdal.vcproj.

> Trying to copy the 
> MSVCR80.DLL file that comes with Visual Studio into my 
> program's folder changes the error to "an application tried 
> to load the C runtime incorrectly".

Yes, you'll want the manifests embedded in both your app and your DLL, and
(important!) you'll also want to copy over the file
"Microsoft.VC80.CRT.manifest".

> Probably the makefile.vc files should be updated to do this. 

The makefile.vc file would need a lot of other work to produce correct and
suitable VC8 DLLs.  Again, avoid it if possible.

-Ben


From yjacolin at free.fr  Mon Oct 23 05:16:15 2006
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] French translation of the GDAl documentation
In-Reply-To: <453BF41B.7080908@pobox.com>
References: <200610221559.20656.yjacolin@free.fr> <453BF41B.7080908@pobox.com>
Message-ID: <200610231116.15510.yjacolin@free.fr>

Le Lundi 23 Octobre 2006 00:43, Frank Warmerdam a ?crit?:
> Jacolin Yves wrote:
> > Hi,
> >
> > I begin to translate the gdal doc in french a few monthes ago. I would
> > like to know if the licence allow me to do it and if I can use the
> > english files to give you my final french translation (if your are
> > interested to) ?
>
> Yves,
>
> There is no explicit license for the web site stuff on the web site, but as
> part of the source tree I think of it being under the same MIT/X license as
> the source code.   So you can definitely produce translations, etc.
Ok Thank you.
>
> I haven't thought too much about translations.  Andrey has some some
> translation for a Russian version of the web site, primarily (as I
> understand it) by producing a "ru" version of various gdal/doc files in
> gdal/doc/ru and having them references by selecting Russian from the main
> index page.
>
> I see no problem with using a similar approach for French if you would
> like.
> My initial impression would be that the most useful things to translate
> would be the user oriented documentation (describing utilities, etc).  One
> problem is that the driver documents - important for users - are
> distributed all over the place in the actual driver directories.

Well, tell me how you want I use these files. It is ok for me. At the begining 
I would like to write one document in OOo format (as I began to do it). I can 
use your file, if you want, or send you the final document.
> The main concern with translations is that it will be hard to keep them up
> to date as the English content changes.
That's why I begin to write one document, independantly of the website. If a 
first document exist in french, a lot of people won't ask for simple 
question, or to know what we can do with gdal in french forum :-)

Tell me what you think about this.

Regards,

Y.
-- 
Yves Jacolin
---
http://yjacolin.gloobe.org


From Michele.Sanges at otomelara.it  Mon Oct 23 07:38:48 2006
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr - more utm zones
Message-ID: <A954C33928E9FC4687E8E21E73FFDCDD09355E@OTOCLEX1.otomelara.it>

Hello everybody,

how do I use the ogr2ogr utility in order to convert a shapefile from latlon to utm projection, when the file extends in more utm zones?

Thanks.
Michele



From mateusz at loskot.net  Mon Oct 23 09:20:52 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <003901c6f663$6e09a980$6501a8c0@DellWork>
References: <003901c6f663$6e09a980$6501a8c0@DellWork>
Message-ID: <453CC1B4.4020005@loskot.net>

Ben Discoe wrote:
> The makefile.vc file would need a lot of other work to produce correct and
> suitable VC8 DLLs.  Again, avoid it if possible.

Ben,

Here is the whole procedure of embedding manifest using nmake explained:

http://msdn2.microsoft.com/en-us/library/ms235591.aspx


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ed at topozone.com  Mon Oct 23 09:22:01 2006
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogr2ogr - more utm zones
Message-ID: <4BF377919225F449BB097CB76FFE9BC801987AA7@ptolemy.topozone.com>

Michele -

The "UTM Projection" isn't really a projection, but a family of related
projections.  Each UTM Zone represents a separate projection; they are
all the same except for the central meridian of the projection.  If your
shapefile extends over more than one UTM Zone, you simply need to choose
which UTM projection (i.e. which zone) you would like to use.  There is
no such thing as a UTM projection spanning more than one zone, although
you can project data "outside" a UTM zone into that zone.  For example,
you can certainly project a shapefile running from 0 degrees longitude
to 18 degrees longitude into UTM Zone 32 even though the data nominally
run from zone 30 through zone 32.  You will begin to get serious
distortion at the edges of the map, and you should be aware that there
are applications in which that error is unacceptable.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Sanges Michele
Sent: Monday, October 23, 2006 7:39 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] ogr2ogr - more utm zones

Hello everybody,

how do I use the ogr2ogr utility in order to convert a shapefile from
latlon to utm projection, when the file extends in more utm zones?

Thanks.
Michele


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Oct 23 09:59:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] French translation of the GDAl documentation
In-Reply-To: <200610231116.15510.yjacolin@free.fr>
References: <200610221559.20656.yjacolin@free.fr> <453BF41B.7080908@pobox.com>
	<200610231116.15510.yjacolin@free.fr>
Message-ID: <453CCAD8.5090300@pobox.com>

Yves Jacolin wrote:
> Well, tell me how you want I use these files. It is ok for me. At the begining 
> I would like to write one document in OOo format (as I began to do it). I can 
> use your file, if you want, or send you the final document.
>> The main concern with translations is that it will be hard to keep them up
>> to date as the English content changes.
> That's why I begin to write one document, independantly of the website. If a 
> first document exist in french, a lot of people won't ask for simple 
> question, or to know what we can do with gdal in french forum :-)
> 

Yves,

Well, it seems that this approach is a substantial restructuring as well
as a translation.  If you would like to do it this way, I'd be happy to
include a pointer to the french document in OOo format.  In this case you
can approach the work pretty much as you wish.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.pettis at thomson.com  Mon Oct 23 11:56:02 2006
From: matt.pettis at thomson.com (matt.pettis@thomson.com)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
Message-ID: <89C159F45B13A24682D98BDEF58E451F0A8A7AA8@TLRUSMNEAGMBX28.ERF.THOMSON.COM>

Is there a way to use ogrinfo to get a listing of just the .dbf
attribute values without listing the line/polygon coordinates with them?
my coordinate sets are large, and i am interested in exploring the .dbf
values of my shapefiles.
 
Thanks,
Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061023/eb494e6b/attachment.html
From sy at perkins.net  Mon Oct 23 12:17:54 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <003901c6f663$6e09a980$6501a8c0@DellWork>
References: <003901c6f663$6e09a980$6501a8c0@DellWork>
Message-ID: <453CEB32.9010806@perkins.net>

Ben Discoe wrote:
>> The problem I have been getting is that I've been unable to 
>> compile applications in Visual Studio 2005 using the /MDd 
>> compile switch (link with the debug C runtime), when I link 
>> them against the GDAL library compiled with the /MD switch 
>> (link with the non-debug CRT, which is what the GDAL 
>> makefiles do). Doing this results in a "MSVCR80.DLL not found" 
>> error when I try to run the program. Compiling my code with 
>> /MD fixes things
>>     
>
> Note that it doesn't really "fix" things.  It just happens to work if the
> machine you're running on already has the release-mode runtime library DLLs
> (msvcp80.dll, msvcr80.dll).  Some machines will have this, especially if
> they have some recent .NET framework installed.
>   

Note that I'm ONLY talking about development builds here. Until I made 
the fixes I described earlier, I couldn't get my code to run at all 
(compiling with /MDd, linked against GDAL compiled with /MD), e.g. for 
debugging within Visual Studio without giving me the MSVCR80.DLL not 
found error.

For distributing apps, then sure, you have to worry about giving people 
the CRT libraries. But then I'd be compiling everything in release mode 
anyway. As I understand it, the correct way(s) to do this with Visual 
Studio 2005 are:

(a) Distribute the Microsoft.VC80.CRT assembly directory found in the VC 
redist directory as a sub-directory of your application's directory 
(this is the "private assembly" approach).

(b) Incorporate the CRT "merge module" into your installer package that 
will then install the CRT in the global cache if required.

(c) Have the user install the runtime libraries separately using the VS8 
CRT installer (available on MS's site)


>> but this is not the default for Visual 
>> Studio debug builds, and simply changing the switch to /MD 
>> breaks other things in the debug build.
>>     
>
> Yes, you should _always_ build your application and GDAL with the same
> version of the runtime library (/MD, or /MDd).
>   

OK, that's nice in theory, but in practice I found it to be a bit of a 
nightmare. It's not just GDAL I have to worry about, but a host 
(alright, a small host...) of other third party DLLs that my application 
depends upon. Most of those do not have .vcproj files, and many of them 
have build scripts that only build with /MD, rather like GDAL's 
makefile.vc. Maintaining separate debug and release versions of each of 
those DLLs, plus their associated import libraries, and making sure that 
the library paths are set correctly during builds, and the PATH is set 
correctly during debugging / testing, is a pain in the butt. The debug 
and release versions of the files all look the same of course and it's 
very easy to make mistakes. I'm sure I'm not the only person who finds 
it much easier to just maintain release versions of those third party 
libraries, and to just switch the code I'm working on between release 
and debug compiles.

Now, I am aware of a few problems with this approach. In particular, the 
debug and release CRTs use different memory allocation procedures, so if 
you allocate memory in some library code compiled with /MD and then 
release it in your calling code, compiled with /MDd, you'll get crashes. 
And if you're passing STL containers around that do automatic memory 
management, this is an easy trap to fall into. But if the third party 
libraries are relatively simple and are pure C, then you can probably 
get away with it. In any case, code you give out will be compiled in 
release mode and so won't be affected by this problem.

But to avoid these issues completely, AFAIK, under VS 2003, it was quite 
common to always compile with /MD, even when debugging. However, VS 2005 
has made this harder. If you just change your debug configuration to 
build with /MD instead of /MDd, you'll see lots of linker errors about 
not finding _CrtDbgReportW(). This is a function that is inserted into 
debug builds, but is only found in the debug library. You can fix this, 
by undefining _DEBUG, but I don't know what other consequences that has. 
I think the debug vs release CRT thing is poorly thought out in 
general... We don't have this problem on Linux!


> Unless, of course, you're trying to use makefile.vc, which i strongly
> recommend to avoid.  There is no way VC8 can fix it when upgrading from VC7
> to VC8 standards.  Use gdal.vcproj.
>   

gdal.vcproj is a splendid thing, but has two problems. First, it's not 
part of the canonical GDAL distribution. Second it's significantly more 
tedious to do custom configurations, e.g. linking against optional third 
party libraries such as MrSID, JPEG2000, FITS, etc, than it is with the 
nmake.opt config file used with the makefile.vc builds.

I've used the makefile.vc build under VS 2003 for several years with no 
problems. I've had some issues with VS 2005, as described, but I think 
I've just about got it cracked now. I think with the manifest embedding, 
it'll work OK. Not nearly as nice as a project file if you're interested 
in debugging GDAL, agreed, but it's easy to use and configure.if you 
just want to use GDAL as a black box.

A few weeks back, I started a discussion about adding VS 2005 project 
files to the GDAL distribution. One of the concerns raised was the 
plethora of different build scripts that GDAL is becoming encumbered 
with. We already have GNU makefiles and makefile.vc, a partial 
implementation of WinCE project files, and unofficial VS  2003 project 
files.

One solution that has been suggested is to embrace a universal build 
system like Cmake, with which we can maintain one set of scripts, and 
then generate project files, makefiles, or whatever as needed. I've only 
used CMake as a user rather than a developer, but it seems to me this 
would also solve the configuration problem. CMake has an interactive 
configuration phase, and generates native build scripts for any platform 
you can think of. Personally, I think this is the best idea for moving 
forward.

If I get the time I might look into CMake, but if anyone else beats me 
to it, I wouldn't be offended... :)

> The makefile.vc file would need a lot of other work to produce correct and
> suitable VC8 DLLs.  Again, avoid it if possible.
>   

Apart from embedding the manifests into the DLLs and executables, what 
other changes do you think need making? With my latest fixes, I can 
produce DLLs that seem to work fine in my VC8 applications.

Cheers,

Sy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061023/65fd375c/attachment.html
From bryan at geomega.com  Mon Oct 23 12:21:22 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
In-Reply-To: <89C159F45B13A24682D98BDEF58E451F0A8A7AA8@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
References: <89C159F45B13A24682D98BDEF58E451F0A8A7AA8@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
Message-ID: <453CEC02.3030407@geomega.com>

Matt,

I don't know if you can do that with an sql string or where clause in 
ogrinfo, but you could use grep to remove all ogrinfo output that 
contained the word LINESTRING, e.g.:

ogrinfo myfile.shp -al | grep LINESTRING -v

I also sometimes use a tool called dbview to look at data in dbf files. 
  Maybe those ideas help.

Bryan

matt.pettis@thomson.com wrote:
> Is there a way to use ogrinfo to get a listing of just the .dbf
> attribute values without listing the line/polygon coordinates with them?
> my coordinate sets are large, and i am interested in exploring the .dbf
> values of my shapefiles.
>  
> Thanks,
> Matt
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From matt.pettis at thomson.com  Mon Oct 23 12:23:42 2006
From: matt.pettis at thomson.com (matt.pettis@thomson.com)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
Message-ID: <89C159F45B13A24682D98BDEF58E451F0A8A7B84@TLRUSMNEAGMBX28.ERF.THOMSON.COM>

They do... I'm trying this all out on windows xp, so I'll have to
modify, but those are good ideas.

Thanks,
matt 

-----Original Message-----
From: Bryan Keith [mailto:bryan@geomega.com] 
Sent: Monday, October 23, 2006 11:21 AM
To: Pettis, Matthew (TLR Corp)
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ogrinfo and sql option

Matt,

I don't know if you can do that with an sql string or where clause in
ogrinfo, but you could use grep to remove all ogrinfo output that
contained the word LINESTRING, e.g.:

ogrinfo myfile.shp -al | grep LINESTRING -v

I also sometimes use a tool called dbview to look at data in dbf files. 
  Maybe those ideas help.

Bryan

matt.pettis@thomson.com wrote:
> Is there a way to use ogrinfo to get a listing of just the .dbf 
> attribute values without listing the line/polygon coordinates with
them?
> my coordinate sets are large, and i am interested in exploring the 
> .dbf values of my shapefiles.
>  
> Thanks,
> Matt
> 
> 
> 
> ----------------------------------------------------------------------
> --
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Oct 23 12:25:16 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
In-Reply-To: <89C159F45B13A24682D98BDEF58E451F0A8A7AA8@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
References: <89C159F45B13A24682D98BDEF58E451F0A8A7AA8@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
Message-ID: <453CECEC.1050702@pobox.com>

matt.pettis@thomson.com wrote:
> Is there a way to use ogrinfo to get a listing of just the .dbf 
> attribute values without listing the line/polygon coordinates with 
> them?  my coordinate sets are large, and i am interested in exploring 
> the .dbf values of my shapefiles.

Matt,

Unfortunately, the geometries get implicitly carried along with sql
statement results, so I can't think of an easy way of just selecting
attributes.  But you could use grep (on linux or cygwin) or something
similar to filter the geometries out of the text result.

eg.
ogrinfo polygon.shp -al | grep -v POLYGON

This will drop all lines with POLYGON in them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From bryan at geomega.com  Mon Oct 23 12:29:17 2006
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
In-Reply-To: <89C159F45B13A24682D98BDEF58E451F0A8A7B84@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
References: <89C159F45B13A24682D98BDEF58E451F0A8A7B84@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
Message-ID: <453CEDDD.4070607@geomega.com>

Matt,

I haven't used windows xp, but I use unxutils (grep is included) on a 
windows 2000 machine with ogr

http://sourceforge.net/projects/unxutils/

I don't know if dbview (or other dbf to ascii executables) are available 
for windows.

Bryan

matt.pettis@thomson.com wrote:
> They do... I'm trying this all out on windows xp, so I'll have to
> modify, but those are good ideas.
> 
> Thanks,
> matt 
> 
> -----Original Message-----
> From: Bryan Keith [mailto:bryan@geomega.com] 
> Sent: Monday, October 23, 2006 11:21 AM
> To: Pettis, Matthew (TLR Corp)
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] ogrinfo and sql option
> 
> Matt,
> 
> I don't know if you can do that with an sql string or where clause in
> ogrinfo, but you could use grep to remove all ogrinfo output that
> contained the word LINESTRING, e.g.:
> 
> ogrinfo myfile.shp -al | grep LINESTRING -v
> 
> I also sometimes use a tool called dbview to look at data in dbf files. 
>   Maybe those ideas help.
> 
> Bryan
> 
> matt.pettis@thomson.com wrote:
>> Is there a way to use ogrinfo to get a listing of just the .dbf 
>> attribute values without listing the line/polygon coordinates with
> them?
>> my coordinate sets are large, and i am interested in exploring the 
>> .dbf values of my shapefiles.
>>  
>> Thanks,
>> Matt
>>
>>
>>
>> ----------------------------------------------------------------------
>> --
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

From mateusz at loskot.net  Mon Oct 23 12:54:20 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
In-Reply-To: <453CEDDD.4070607@geomega.com>
References: <89C159F45B13A24682D98BDEF58E451F0A8A7B84@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
	<453CEDDD.4070607@geomega.com>
Message-ID: <453CF3BC.6010801@loskot.net>

Bryan Keith wrote:
> Matt,
> 
> I haven't used windows xp, but I use unxutils (grep is included) on a
> windows 2000 machine with ogr
> 
> http://sourceforge.net/projects/unxutils/

There is also GnuWin32 package with nice installers:

http://gnuwin32.sourceforge.net/

I use it on Windows box intensively.
Note, there are some issues with these tools, for example you have to
rename find.exe tool form GnuWin32 to something other,
because find/FIND is a build-in Windows command.
I usually rename it to findu.exe with 'u' like Unix :-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From matt.pettis at thomson.com  Mon Oct 23 14:02:58 2006
From: matt.pettis at thomson.com (matt.pettis@thomson.com)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Dissolving internal boundaries
Message-ID: <89C159F45B13A24682D98BDEF58E451F0A8A7EAC@TLRUSMNEAGMBX28.ERF.THOMSON.COM>

Is there any way with gdal/ogr tools to join polygons into a single
polygon based upon a .dbf attribute and dissolve the interior boundaries
of constituent shapefile polygons?  I created an ascii visual at the
bottom to describe what I want if the verbage is not clear.
 
thanks,
matt
 
Before:
 
----------------------
|  Polygon 1         |
-----------------------------
| Polygon 2  | Polygon 3    |
-----------------------------
 
After:
 
----------------------
|                    |
|   Joined Region    |_______
|                           |
-----------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061023/d4c678db/attachment.html
From ILucena at clarku.edu  Mon Oct 23 14:10:23 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455020D6555@Iris.ad.clarku.edu>

Hi Matt,

I knew you would say that, but just to let you know, grep.exe for DOS
comes in all Borland IDE products since 1992 and now you can get "Turbo
C++ Explorer" for free. I try to compile GDAL on it, but that is another
history...

===
C:\Program Files\Borland\BDS\4.0\Bin>grep
Turbo GREP 5.5 Copyright (c) 1992, 1998 Borland International
Syntax:  GREP [-rlcnvidzuwo] searchstring file[s] or @filelist
         GREP ? for help
===

Ivan


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
matt.pettis@thomson.com
Sent: Monday, October 23, 2006 12:24 PM
To: bryan@geomega.com
Cc: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] ogrinfo and sql option

They do... I'm trying this all out on windows xp, so I'll have to
modify, but those are good ideas.

Thanks,
matt 

-----Original Message-----
From: Bryan Keith [mailto:bryan@geomega.com] 
Sent: Monday, October 23, 2006 11:21 AM
To: Pettis, Matthew (TLR Corp)
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ogrinfo and sql option

Matt,

I don't know if you can do that with an sql string or where clause in
ogrinfo, but you could use grep to remove all ogrinfo output that
contained the word LINESTRING, e.g.:

ogrinfo myfile.shp -al | grep LINESTRING -v

I also sometimes use a tool called dbview to look at data in dbf files. 
  Maybe those ideas help.

Bryan

matt.pettis@thomson.com wrote:
> Is there a way to use ogrinfo to get a listing of just the .dbf 
> attribute values without listing the line/polygon coordinates with
them?
> my coordinate sets are large, and i am interested in exploring the 
> .dbf values of my shapefiles.
>  
> Thanks,
> Matt
> 
> 
> 
> ----------------------------------------------------------------------
> --
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From matt.pettis at thomson.com  Mon Oct 23 14:22:20 2006
From: matt.pettis at thomson.com (matt.pettis@thomson.com)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] ogrinfo and sql option
Message-ID: <89C159F45B13A24682D98BDEF58E451F0A8A7F49@TLRUSMNEAGMBX28.ERF.THOMSON.COM>

Thanks to Ivan and everybody who has suggested finding the Unix-like
tools to do this processing.  I'll probably end up getting some flavor
of them if only because I am a tool glutton... :>)

To add to the discussion, thought, since I don't need to do this
anaylysis frequently (I currently only have one shapefile to deal with),
I've taken the route of using Perl and a CPAN module named
Geo::ShapeFile from Jason Kohles to process my .dbf file and do custom
summarization on the info I get out of there.  If there are other Perl
users out there, I highly recommend it, as it imports all of the info
into a custom Shapefile object which you can operate on with all of the
ease that Perl provides for any data processing.

Thanks,
Matt



-----Original Message-----
From: Ivan Lucena [mailto:ILucena@clarku.edu] 
Sent: Monday, October 23, 2006 1:10 PM
To: Pettis, Matthew (TLR Corp)
Cc: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] ogrinfo and sql option

Hi Matt,

I knew you would say that, but just to let you know, grep.exe for DOS
comes in all Borland IDE products since 1992 and now you can get "Turbo
C++ Explorer" for free. I try to compile GDAL on it, but that is another
history...

===
C:\Program Files\Borland\BDS\4.0\Bin>grep Turbo GREP 5.5 Copyright (c)
1992, 1998 Borland International
Syntax:  GREP [-rlcnvidzuwo] searchstring file[s] or @filelist
         GREP ? for help
===

Ivan


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
matt.pettis@thomson.com
Sent: Monday, October 23, 2006 12:24 PM
To: bryan@geomega.com
Cc: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] ogrinfo and sql option

They do... I'm trying this all out on windows xp, so I'll have to
modify, but those are good ideas.

Thanks,
matt 

-----Original Message-----
From: Bryan Keith [mailto:bryan@geomega.com]
Sent: Monday, October 23, 2006 11:21 AM
To: Pettis, Matthew (TLR Corp)
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] ogrinfo and sql option

Matt,

I don't know if you can do that with an sql string or where clause in
ogrinfo, but you could use grep to remove all ogrinfo output that
contained the word LINESTRING, e.g.:

ogrinfo myfile.shp -al | grep LINESTRING -v

I also sometimes use a tool called dbview to look at data in dbf files. 
  Maybe those ideas help.

Bryan

matt.pettis@thomson.com wrote:
> Is there a way to use ogrinfo to get a listing of just the .dbf 
> attribute values without listing the line/polygon coordinates with
them?
> my coordinate sets are large, and i am interested in exploring the 
> .dbf values of my shapefiles.
>  
> Thanks,
> Matt
> 
> 
> 
> ----------------------------------------------------------------------
> --
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From archer at eskimo.com  Mon Oct 23 14:49:37 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Dissolving internal boundaries
In-Reply-To: <89C159F45B13A24682D98BDEF58E451F0A8A7EAC@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
References: <89C159F45B13A24682D98BDEF58E451F0A8A7EAC@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
Message-ID: <Pine.SUN.4.58.0610231147250.15326@eskimo.com>

On Mon, 23 Oct 2006 matt.pettis@thomson.com wrote:

> Is there any way with gdal/ogr tools to join polygons into a single
> polygon based upon a .dbf attribute and dissolve the interior boundaries
> of constituent shapefile polygons?  I created an ascii visual at the
> bottom to describe what I want if the verbage is not clear.

We did such a thing using a modified Python script, processing
Tiger/Line files into Shapefiles for our project.  The original
script we started with was "tigerpoly.py" from GDAL/OGR, and our
modified version is "xastir/scripts/Xastir_tigerpoly.py".

So yes, it's possible, and there are a couple of pointers for you!

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From yjacolin at free.fr  Mon Oct 23 15:22:59 2006
From: yjacolin at free.fr (Jacolin Yves)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] French translation of the GDAl documentation
In-Reply-To: <453CCAD8.5090300@pobox.com>
References: <200610221559.20656.yjacolin@free.fr>
	<200610231116.15510.yjacolin@free.fr> <453CCAD8.5090300@pobox.com>
Message-ID: <200610232122.59556.yjacolin@free.fr>

Hi,
Ok, I will contact you when I will finish the gdal part.

thank you,

Y.
Le Lundi 23 Octobre 2006 15:59, Frank Warmerdam a ?crit?:
> Yves Jacolin wrote:
> > Well, tell me how you want I use these files. It is ok for me. At the
> > begining I would like to write one document in OOo format (as I began to
> > do it). I can use your file, if you want, or send you the final document.
> >
> >> The main concern with translations is that it will be hard to keep them
> >> up to date as the English content changes.
> >
> > That's why I begin to write one document, independantly of the website.
> > If a first document exist in french, a lot of people won't ask for simple
> > question, or to know what we can do with gdal in french forum :-)
>
> Yves,
>
> Well, it seems that this approach is a substantial restructuring as well
> as a translation.  If you would like to do it this way, I'd be happy to
> include a pointer to the french document in OOo format.  In this case you
> can approach the work pretty much as you wish.
>
> Best regards,

-- 
----
Yves Jacolin
htp://yjacolin.gloobe.org


From tutey at o2.pl  Mon Oct 23 16:50:51 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Help about conversion .dem to .hgt
In-Reply-To: <10e5b74e085.maestrini_andrea@virgilio.it>
References: <10e5b74e085.maestrini_andrea@virgilio.it>
Message-ID: <453D2B2B.8010404@o2.pl>

maestrini_andrea@virgilio.it wrote:

> Can anyone help me in converting .dem format into .hgt format (for 
> Radio Mobile tool that used SRTM maps )?
> I have converted .asc format 
> in .dem format with Gdal, but Radio Mobile works with SRTM format 
> (Radio Mobile uses .hgt format) it doesn't work with .dem!!!

Maybe with GRASS? Look at the r.in.srtm script[1] for inspiration.

Maciek

[1]http://freegis.org/cgi-bin/viewcvs.cgi/grass6/scripts/r.in.srtm/r.in.srtm?rev=1.18.4.1&content-type=text/vnd.viewcvs-markup


From craig.miller at spatialminds.com  Mon Oct 23 17:14:53 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Free SRSs allocated with OGRSFDriverRegistrar::Open?
Message-ID: <016301c6f6e8$4a8bcf80$3301a8c0@vaio>

In an ongoing effort to remove memory leaks and better understand GDAL/OGRs
memory management I'm still observing quite a few leaks.  Is there a global
command to free random SRS related info that gets allocated as a normal part
of using OGR?  I thought I saw one when browsing the class documentation the
other day, but I can't seem to locate it now.


I believe that I'm observing a memory leak when I allocate a Datsource with 

m_poDS = OGRSFDriverRegistrar::Open(...); 

and destroy it with: 

OGRDataSource::DestroyDataSource( m_poDS );
m_poDS =NULL;
    
The memory that is leaked when visually inspected seems to contain SRS
related information.  The call stack (below) confirms the same thing.  

c:\vault\gdal\port\cpl_vsisimple.cpp (343): VSIRealloc
c:\vault\gdal\port\cpl_conv.cpp (345): CPLRealloc
c:\vault\gdal\ogr\ogr_srsnode.cpp (324): OGR_SRSNode::InsertChild
c:\vault\gdal\ogr\ogr_srsnode.cpp (297): OGR_SRSNode::AddChild
c:\vault\gdal\ogr\ogr_srsnode.cpp (724): OGR_SRSNode::importFromWkt
c:\vault\gdal\ogr\ogr_srsnode.cpp (718): OGR_SRSNode::importFromWkt
c:\vault\gdal\ogr\ogrspatialreference.cpp (686):
OGRSpatialReference::importFromWkt
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp (953):
OGRPGDataSource::FetchSRS
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpglayer.cpp (1051):
OGRPGLayer::GetSpatialRef
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpgtablelayer.cpp (1515):
OGRPGTableLayer::GetSpatialRef
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpgtablelayer.cpp (168):
OGRPGTableLayer::OGRPGTableLayer
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp (529):
OGRPGDataSource::OpenTable
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpgdatasource.cpp (509):
OGRPGDataSource::Open
c:\vault\gdal\ogr\ogrsf_frmts\pg\ogrpgdriver.cpp (84): OGRPGDriver::Open
c:\vault\gdal\ogr\ogrsf_frmts\generic\ogrsfdriverregistrar.cpp (225):
OGRSFDriverRegistrar::Open


From warmerdam at pobox.com  Mon Oct 23 23:18:42 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Free SRSs allocated with OGRSFDriverRegistrar::Open?
In-Reply-To: <016301c6f6e8$4a8bcf80$3301a8c0@vaio>
References: <016301c6f6e8$4a8bcf80$3301a8c0@vaio>
Message-ID: <453D8612.9000301@pobox.com>

Craig Miller wrote:
> In an ongoing effort to remove memory leaks and better understand GDAL/OGRs
> memory management I'm still observing quite a few leaks.  Is there a global
> command to free random SRS related info that gets allocated as a normal part
> of using OGR?  I thought I saw one when browsing the class documentation the
> other day, but I can't seem to locate it now.
> 
> 
> I believe that I'm observing a memory leak when I allocate a Datsource with 

Craig,

I have confirmed and fixed this memory leak in CVS.  It turns out the
FetchSRS() method was not incrementing nKnownSRID so the destructor
was never trying to release the spatial reference.

I also found that the CVS code in OGRPGTableLayer::GetSpatialRef() was
not querying against the proper schema field and so in fact spatial
references were never successfully fetched in the CVS OGR version.
I'm not sure if this is a recent problem or not ... I think the schema
support is pretty recent.

This is also now fixed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Tue Oct 24 04:40:18 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
 integer as real, in error)
Message-ID: <453DD172.2040904@o2.pl>

Hi,

ogrinfo (and other apps based on OGR, eg. OpenEV, QGIS) returns wrong
floating point values querying my shapefiles. Eg.:

$ ogrinfo -al -q streams.shp

Layer name: streams
OGRFeature(streams):523
  CAT (Real) =         484
  LCAT (Real) =          73
  Z (Real) =      101.583309999999997
  Z_BREACH (Real) =      101.583309999999997
  Z_BREACH1 (Real) =      100.583309999999997
  LENGTH (Real) =        2.036246000000000
  LINESTRING (598549.144524969975464 5677309.376777020283043,598550.0
5677311.224603090435266)


After opening the dbf in oocalc 2.03, I can see the values should
recpectively be:

CAT	  484
LCAT	  73
Z	  101.58331
Z_BREACH  101.58331
Z_BREACH1 100.58331
LENGTH	  2.036246

Why the spurious "09999999997" in case of Z, Z_BREACH, Z_BREACH1 in
OGR? Note that, interestingly, LENGTH is OK though.

Morevover, CAT and LCAT are not Real numbers. They are integer. Why
reported as real?

Is any of the issues fixed in newer GDAL? I've been using 1.3.2 CVS
2006-07-24.

The shapefile is attached if needed.

Maciek

-------------- next part --------------
A non-text attachment was scrubbed...
Name: streams.tar.bz2
Type: application/x-bzip
Size: 716 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061024/b98f1eb4/streams.tar.bin
From Roger.Bivand at nhh.no  Tue Oct 24 05:43:20 2006
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453DD172.2040904@o2.pl>
Message-ID: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>

On Tue, 24 Oct 2006, Maciej Sieczka wrote:

> Hi,
> 
> ogrinfo (and other apps based on OGR, eg. OpenEV, QGIS) returns wrong
> floating point values querying my shapefiles. Eg.:
> 
> $ ogrinfo -al -q streams.shp
> 
> Layer name: streams
> OGRFeature(streams):523
>   CAT (Real) =         484
>   LCAT (Real) =          73
>   Z (Real) =      101.583309999999997
>   Z_BREACH (Real) =      101.583309999999997
>   Z_BREACH1 (Real) =      100.583309999999997
>   LENGTH (Real) =        2.036246000000000
>   LINESTRING (598549.144524969975464 5677309.376777020283043,598550.0
> 5677311.224603090435266)
> 
> 
> After opening the dbf in oocalc 2.03, I can see the values should
> recpectively be:
> 
> CAT	  484
> LCAT	  73
> Z	  101.58331
> Z_BREACH  101.58331
> Z_BREACH1 100.58331
> LENGTH	  2.036246
> 
> Why the spurious "09999999997" in case of Z, Z_BREACH, Z_BREACH1 in
> OGR? Note that, interestingly, LENGTH is OK though.

Not spurious, just two different decimal "views" of the same underlying 
floating-point value, see e.g. David Goldberg (1991), What Every Computer 
Scientist Should Know About Floating-Point Arithmetic, ACM Computing 
Surveys, 23/1, 548, also available via 
http://docs.sun.com/source/806-3568/ncg_goldberg.html.

> 
> Morevover, CAT and LCAT are not Real numbers. They are integer. Why
> reported as real?

That will depend on the functions reading the underlying DBF, I see both 
all reals or a mixture in several shapefiles. It may be that when 
"integer" precision is non-zero, it may be being taken as real?

In R:

library(rgdal)
ogrInfo("streams", "streams")$iteminfo

says:

$name
[1] "CAT"       "LCAT"      "Z"         "Z_BREACH"  "Z_BREACH1" "LENGTH"   

$precision
[1] 2 2 2 2 2 2

$length
[1] 11 11 24 24 24 24

> t1 <- readOGR("streams", "streams")
OGR data source with driver: ESRI Shapefile 
Source: "streams", layer: "streams"
with  1  rows and  6  columns
> str(as(t1, "data.frame"))
'data.frame':   1 obs. of  6 variables:
 $ CAT      : num 484
 $ LCAT     : num 73
 $ Z        : num 102
 $ Z_BREACH : num 102
 $ Z_BREACH1: num 101
 $ LENGTH   : num 2.04

R will not print 24 digits, but for 22 digits:

> print(t2, digits=22)
  CAT LCAT                       Z                Z_BREACH
1 484   73 101.5833099999999973306 101.5833099999999973306
                Z_BREACH1                  LENGTH
1 100.5833099999999973306 2.036245999999999778396

so your first issue is simply that floating point numbers have fuzz, which 
the application may shave or not.

Have a look for example at http://shapelib.maptools.org/dbf_api.html, 
which suggests that integers should have zero-precision.

Roger

> 
> Is any of the issues fixed in newer GDAL? I've been using 1.3.2 CVS
> 2006-07-24.
> 
> The shapefile is attached if needed.
> 
> Maciek
> 
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no



From C.Strobl at dlr.de  Tue Oct 24 06:09:15 2006
From: C.Strobl at dlr.de (C.Strobl@dlr.de)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] coordinates for csv-files with ogr2ogr
Message-ID: <AC78B6BABBC9A74C95028F87A0EACF790B0163@exbe04.intra.dlr.de>


hello all,
is there a possibility to generate with ogr2ogr a csv-file which
contains also the coordinates and not only the attributes.
thanks and greetings from munich.
christian
p.s. besides this ogr2ogr generates always with the csv-option a folder
AND a file with the same name, e.g. .../file.csv/file.csv 


From tutey at o2.pl  Tue Oct 24 06:45:39 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
References: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
Message-ID: <453DEED3.8040108@o2.pl>

Roger Bivand wrote:
> On Tue, 24 Oct 2006, Maciej Sieczka wrote:

>> ogrinfo (and other apps based on OGR, eg. OpenEV, QGIS) returns wrong
>> floating point values querying my shapefiles. Eg.:
>>
>> $ ogrinfo -al -q streams.shp
>>
>> Layer name: streams
>> OGRFeature(streams):523
>>   CAT (Real) =         484
>>   LCAT (Real) =          73
>>   Z (Real) =      101.583309999999997
>>   Z_BREACH (Real) =      101.583309999999997
>>   Z_BREACH1 (Real) =      100.583309999999997
>>   LENGTH (Real) =        2.036246000000000
>>   LINESTRING (598549.144524969975464 5677309.376777020283043,598550.0
>> 5677311.224603090435266)
>>
>>
>> After opening the dbf in oocalc 2.03, I can see the values should
>> recpectively be:
>>
>> CAT	  484
>> LCAT	  73
>> Z	  101.58331
>> Z_BREACH  101.58331
>> Z_BREACH1 100.58331
>> LENGTH	  2.036246
>>
>> Why the spurious "09999999997" in case of Z, Z_BREACH, Z_BREACH1 in
>> OGR? Note that, interestingly, LENGTH is OK though.

> Not spurious, just two different decimal "views" of the same underlying 
> floating-point value, see e.g. David Goldberg (1991), What Every Computer 
> Scientist Should Know About Floating-Point Arithmetic, ACM Computing 
> Surveys, 23/1, 548, also available via 
> http://docs.sun.com/source/806-3568/ncg_goldberg.html.

<snip>

> so your first issue is simply that floating point numbers have fuzz,
> which the application may shave or not.

Why doesn't the OGR "shave the fuzz" then? That would make sense I
think - data easier to read and parse, less for the OGR to print, the
user not puzzled. If it shouldn't - then why?

>> Morevover, CAT and LCAT are not Real numbers. They are integer. Why
>> reported as real?

> That will depend on the functions reading the underlying DBF, I see both 
> all reals or a mixture in several shapefiles. It may be that when 
> "integer" precision is non-zero, it may be being taken as real?

> In R:
> 
> library(rgdal)
> ogrInfo("streams", "streams")$iteminfo
> 
> says:
> 
> $name
> [1] "CAT"       "LCAT"      "Z"         "Z_BREACH"  "Z_BREACH1" "LENGTH"   
> 
> $precision
> [1] 2 2 2 2 2 2

Hmm, this looks wrong (?) - my CAT and LCAT *do* have a zero precision.
So I'd expect them to be treated as integer. And the other 4 columns
have 15 decimal places precision, not 2. Open the dbf in a spreadsheet
to see that:

CAT,N,11,0
LCAT,N,11,0
Z,N,24,15
Z_BREACH,N,24,15
Z_BREACH1,N,24,15
LENGTH,N,24,15

> $length
> [1] 11 11 24 24 24 24

This seems correct.

Maciek


From Roger.Bivand at nhh.no  Tue Oct 24 07:55:03 2006
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453DEED3.8040108@o2.pl>
Message-ID: <Pine.LNX.4.44.0610241335270.23994-100000@reclus.nhh.no>

On Tue, 24 Oct 2006, Maciej Sieczka wrote:

> Roger Bivand wrote:
> > On Tue, 24 Oct 2006, Maciej Sieczka wrote:
> 
> >> ogrinfo (and other apps based on OGR, eg. OpenEV, QGIS) returns wrong
> >> floating point values querying my shapefiles. Eg.:
> >>
> >> $ ogrinfo -al -q streams.shp
> >>
> >> Layer name: streams
> >> OGRFeature(streams):523
> >>   CAT (Real) =         484
> >>   LCAT (Real) =          73
> >>   Z (Real) =      101.583309999999997
> >>   Z_BREACH (Real) =      101.583309999999997
> >>   Z_BREACH1 (Real) =      100.583309999999997
> >>   LENGTH (Real) =        2.036246000000000
> >>   LINESTRING (598549.144524969975464 5677309.376777020283043,598550.0
> >> 5677311.224603090435266)
> >>
> >>
> >> After opening the dbf in oocalc 2.03, I can see the values should
> >> recpectively be:
> >>
> >> CAT	  484
> >> LCAT	  73
> >> Z	  101.58331
> >> Z_BREACH  101.58331
> >> Z_BREACH1 100.58331
> >> LENGTH	  2.036246
> >>
> >> Why the spurious "09999999997" in case of Z, Z_BREACH, Z_BREACH1 in
> >> OGR? Note that, interestingly, LENGTH is OK though.
> 
> > Not spurious, just two different decimal "views" of the same underlying 
> > floating-point value, see e.g. David Goldberg (1991), What Every Computer 
> > Scientist Should Know About Floating-Point Arithmetic, ACM Computing 
> > Surveys, 23/1, 548, also available via 
> > http://docs.sun.com/source/806-3568/ncg_goldberg.html.
> 
> <snip>
> 
> > so your first issue is simply that floating point numbers have fuzz,
> > which the application may shave or not.
> 
> Why doesn't the OGR "shave the fuzz" then? That would make sense I
> think - data easier to read and parse, less for the OGR to print, the
> user not puzzled. If it shouldn't - then why?

I can't see the printf() in the source, but it is an arbitratry formatting 
decision, I guess influenced by the field width.

> 
> >> Morevover, CAT and LCAT are not Real numbers. They are integer. Why
> >> reported as real?
> 
> > That will depend on the functions reading the underlying DBF, I see both 
> > all reals or a mixture in several shapefiles. It may be that when 
> > "integer" precision is non-zero, it may be being taken as real?
> 
> > In R:
> > 
> > library(rgdal)
> > ogrInfo("streams", "streams")$iteminfo
> > 
> > says:
> > 
> > $name
> > [1] "CAT"       "LCAT"      "Z"         "Z_BREACH"  "Z_BREACH1" "LENGTH"   
> > 
> > $precision
> > [1] 2 2 2 2 2 2
> 
> Hmm, this looks wrong (?) - my CAT and LCAT *do* have a zero precision.
> So I'd expect them to be treated as integer. And the other 4 columns
> have 15 decimal places precision, not 2. Open the dbf in a spreadsheet
> to see that:
> 
> CAT,N,11,0
> LCAT,N,11,0
> Z,N,24,15
> Z_BREACH,N,24,15
> Z_BREACH1,N,24,15
> LENGTH,N,24,15
> 
> > $length
> > [1] 11 11 24 24 24 24
> 
> This seems correct.

But it isn't what OGR is seeing. And since the DBF header is binary, we 
can't see directly what is in the file (I can see something with od, but I 
can't interpret enough of it to make sense). The file does though contain 
verbatim fuzz:

0000340  \r                                       4   8   4            
0000360                           7   3                       1   0   1
0000400   .   5   8   3   3   0   9   9   9   9   9   9   9   9   9   7
0000420                       1   0   1   .   5   8   3   3   0   9   9
0000440   9   9   9   9   9   9   9   7                       1   0   0
0000460   .   5   8   3   3   0   9   9   9   9   9   9   9   9   9   7
0000500                               2   .   0   3   6   2   4   6   0
0000520   0   0   0   0   0   0   0   0

Roger

> 
> Maciek
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no


From warmerdam at pobox.com  Tue Oct 24 09:00:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] coordinates for csv-files with ogr2ogr
In-Reply-To: <AC78B6BABBC9A74C95028F87A0EACF790B0163@exbe04.intra.dlr.de>
References: <AC78B6BABBC9A74C95028F87A0EACF790B0163@exbe04.intra.dlr.de>
Message-ID: <453E0E71.3060807@pobox.com>

C.Strobl@dlr.de wrote:
> hello all,
> is there a possibility to generate with ogr2ogr a csv-file which
> contains also the coordinates and not only the attributes.
> thanks and greetings from munich.

Christian,

This is not possible with the current csv driver.  Geometries are always
discarded.  In theory it would not be hard to modify it to allow geometries
to be emitted as a WKT column, or perhaps for point data to be split into
an X, Y (and Z) column.

> christian
> p.s. besides this ogr2ogr generates always with the csv-option a folder
> AND a file with the same name, e.g. .../file.csv/file.csv 

Right - on creation the driver always creates a directory and creates
each layer as a csv file inside that.  Some drivers, like the shapefile
driver, have hacky logic to try and determine if a single shp/shx/dbf file
set should be created or a whole directory.  But this is complex and problem
prone and this capability was not replicated in the csv driver which is by
design fairly simple.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From archer at eskimo.com  Tue Oct 24 09:09:20 2006
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] Dissolving internal boundaries
In-Reply-To: <y74u01ud8m8.fsf@tenma.swcp.com>
References: <89C159F45B13A24682D98BDEF58E451F0A8A7EAC@TLRUSMNEAGMBX28.ERF.THOMSON.COM>
	<Pine.SUN.4.58.0610231147250.15326@eskimo.com>
	<y74u01ud8m8.fsf@tenma.swcp.com>
Message-ID: <Pine.SUN.4.58.0610240606330.28406@eskimo.com>


FYI (see below response from Tom).  Tom knows a whole lot more about
this stuff than I do.  I apologize if I wasted a bit of Matt's time.
--Curt


On Mon, 23 Oct 2006, Tom Russo wrote:

> On Mon, 23 Oct 2006 11:49:37 -0700 (PDT), Mr. Richard Fayler of Fort Lee, New Jersey <"Curt, WE7U" <archer@eskimo.com>> writes:  Dear Roseanne Rosannadanna:
>
> > On Mon, 23 Oct 2006 matt.pettis@thomson.com wrote:
> >> Is there any way with gdal/ogr tools to join polygons into a single
> >> polygon based upon a .dbf attribute and dissolve the interior boundaries
> >> of constituent shapefile polygons?  I created an ascii visual at the
> >> bottom to describe what I want if the verbage is not clear.
>
> > We did such a thing using a modified Python script, processing
> > Tiger/Line files into Shapefiles for our project.  The original
> > script we started with was "tigerpoly.py" from GDAL/OGR, and our
> > modified version is "xastir/scripts/Xastir_tigerpoly.py".
>
> > So yes, it's possible, and there are a couple of pointers for you!
>
> [Not posted to the GDAL list, coz I'm not actually subscribed and only
> read it via the gmane mail-to-news interface--- you can forward it if you
> like]
>
> Those pointers are a bit of a bum steer, I'm sorry to say.
>
> tigerpoly.py doesn't start from a shapefile with dbf attributes.  It starts
> from the TIGER/Line data, which is a topological storage format (i.e. each
> line that is a polygon boundary carries with it information about the two
> polygons it is a boundary between), and constructs a shapefile from that.  I
> was able to hack it to dissolve polygons only because of the topological
> format of the input data -- knowing that a given line has two polygons with
> equal attributes as left and right polygon makes it easy -- you simply tweak
> the topological information and don't count those lines as boundary lines.
> There's no similar information in a general shapefile, which has no
> topological information like that.
>
> Dissolving a general polygon shapefile (one in which topological data isn't
> stored in the DBF file to augment the "simple features" so you could fake it)
> would require a lot more work.  If OGR provides such a capability, it's going
> to be more involved than the task "Xastir_tigerpoly" had before it.
>
> --
> Tom Russo    KM5VY   SAR502   DM64ux          http://www.swcp.com/~russo/
> Tijeras, NM  QRPL#1592 K2#398  SOC#236 AHTB#1 http://kevan.org/brain.cgi?DDTNM
> "And, isn't sanity really just a one-trick pony anyway? I mean all you get is
>  one trick, rational thinking, but when you're good and crazy, oooh, oooh,
>  oooh, the sky is the limit!"  --- The Tick


From C.Strobl at dlr.de  Tue Oct 24 09:17:12 2006
From: C.Strobl at dlr.de (C.Strobl@dlr.de)
Date: Wed Nov 21 11:50:24 2007
Subject: AW: [Gdal-dev] coordinates for csv-files with ogr2ogr
In-Reply-To: <453E0E71.3060807@pobox.com>
Message-ID: <AC78B6BABBC9A74C95028F87A0EACF790B01B9@exbe04.intra.dlr.de>


hallo frank,
thanks for your fast answers. so the way to get ascii-coordinates with ogr is to export in gml or kml. or is there another possibility?
best regards
christian

> -----Urspr?ngliche Nachricht-----
> Von: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Gesendet: Dienstag, 24. Oktober 2006 15:01
> An: Strobl, Christian
> Cc: gdal-dev@lists.maptools.org
> Betreff: Re: [Gdal-dev] coordinates for csv-files with ogr2ogr
> 
> C.Strobl@dlr.de wrote:
> > hello all,
> > is there a possibility to generate with ogr2ogr a csv-file which 
> > contains also the coordinates and not only the attributes.
> > thanks and greetings from munich.
> 
> Christian,
> 
> This is not possible with the current csv driver.  Geometries 
> are always discarded.  In theory it would not be hard to 
> modify it to allow geometries to be emitted as a WKT column, 
> or perhaps for point data to be split into an X, Y (and Z) column.
> 
> > christian
> > p.s. besides this ogr2ogr generates always with the csv-option a 
> > folder AND a file with the same name, e.g. .../file.csv/file.csv
> 
> Right - on creation the driver always creates a directory and 
> creates each layer as a csv file inside that.  Some drivers, 
> like the shapefile driver, have hacky logic to try and 
> determine if a single shp/shx/dbf file set should be created 
> or a whole directory.  But this is complex and problem prone 
> and this capability was not replicated in the csv driver 
> which is by design fairly simple.
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, 
> http://osgeo.org
> 
> 


From mateusz at loskot.net  Tue Oct 24 09:27:54 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] coordinates for csv-files with ogr2ogr
In-Reply-To: <AC78B6BABBC9A74C95028F87A0EACF790B0163@exbe04.intra.dlr.de>
References: <AC78B6BABBC9A74C95028F87A0EACF790B0163@exbe04.intra.dlr.de>
Message-ID: <453E14DA.5040103@loskot.net>

C.Strobl@dlr.de wrote:
> hello all,
> is there a possibility to generate with ogr2ogr a csv-file which
> contains also the coordinates and not only the attributes.

According to OGR CSV driver docs [1] it's not possible:

"OGR supports reading and writing non-spatial tabular data stored in
text CSV files."

"OGR CSV layer never have any geometry on features, nor do they have an
associated coordinate system."

[1] http://www.gdal.org/ogr/drv_csv.html

If you want to read your CSV file, here is example of a trick
where geometry is stored in CSV as WKT, next you access it through VRT
model:


1. CSV file with geometries encoded in WKT

ID,THEGEOM
1,"LINESTRING (12.375 49.618, 12.380 49.61, 12.474 49.634)"
2,"LINESTRING (16.198 50.431, 16.205 50.434, 16.334 50.405)"
3,"LINESTRING (19.628 51.389, 20.278 51.782, 20.350 51.840)"


2. VRT definition [2]

<OGRVRTDataSource>
    <OGRVRTLayer name="test">
        <SrcDataSource
relativeToVRT="0">test.csv</SrcDataSource>
        <SrcLayer>test</SrcLayer>
        <GeometryType>wkbLineString</GeometryType>
        <GeometryField encoding="WKT" field="THEGEOM" />
        <LayerSRS>epsg:4326</LayerSRS>
    </OGRVRTLayer>
</OGRVRTDataSource>

[2] http://www.gdal.org/ogr/drv_vrt.html


Now, you can dump the CSV file, in example, to ESRI Shapefile:

$ ogr2ogr -f "ESRI Shapefile" test.shp test.vrt
$ ogrinfo test.shp
OGR: OGROpen(test.shp/0x804dcb8) succeeded as ESRI Shapefile.
INFO: Open of `test.shp'
      using driver `ESRI Shapefile' successful.
OGR: GetLayerCount() = 1

1: test (Line String)


Obviously, this solution requires to preprocess CSV file and encode
geometries to WKT format. Small script should do it well.

> thanks and greetings from munich.
> christian
> p.s. besides this ogr2ogr generates always with the csv-option a folder
> AND a file with the same name, e.g. .../file.csv/file.csv 

Not exactly. The idea is to create or add .csv file to directory.

As OGR CSV doc [1] says:
"The driver supports creating new databases (as a directory of .csv
files), adding new .csv files to an existing directory or .csv file"

So, the command looks like:
$ ogr2ogr -f CSV somedir point.shp
$ ls somedir/
point.csv

'somedir' is called as a CSV database.
Now, you can add new .csv file to this database:

ogr2ogr -update -f CSV somedir line.shp

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Oct 24 09:40:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: AW: [Gdal-dev] coordinates for csv-files with ogr2ogr
In-Reply-To: <AC78B6BABBC9A74C95028F87A0EACF790B01B9@exbe04.intra.dlr.de>
References: <AC78B6BABBC9A74C95028F87A0EACF790B01B9@exbe04.intra.dlr.de>
Message-ID: <453E17BF.6010806@pobox.com>

C.Strobl@dlr.de wrote:
> hallo frank, thanks for your fast answers. so the way to get
> ascii-coordinates with ogr is to export in gml or kml. or is there another
> possibility?

Christian,

Export to gml or kml would work well.  You could also write a little
Python script to dump out features in any desired custom text format.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Oct 24 09:55:23 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453DD172.2040904@o2.pl>
References: <453DD172.2040904@o2.pl>
Message-ID: <453E1B4B.30508@loskot.net>

Maciej Sieczka wrote:
> Hi,
> 
> ogrinfo (and other apps based on OGR, eg. OpenEV, QGIS) returns wrong
> floating point values querying my shapefiles. Eg.:
> 
> $ ogrinfo -al -q streams.shp
> 
> Layer name: streams
> OGRFeature(streams):523
>   CAT (Real) =         484
>   LCAT (Real) =          73
>   Z (Real) =      101.583309999999997
>   Z_BREACH (Real) =      101.583309999999997
>   Z_BREACH1 (Real) =      100.583309999999997
>   LENGTH (Real) =        2.036246000000000
>   LINESTRING (598549.144524969975464 5677309.376777020283043,598550.0
> 5677311.224603090435266)
> 
> 
> After opening the dbf in oocalc 2.03, I can see the values should
> recpectively be:
> 
> CAT	  484
> LCAT	  73
> Z	  101.58331
> Z_BREACH  101.58331
> Z_BREACH1 100.58331
> LENGTH	  2.036246
> 
> Why the spurious "09999999997" in case of Z, Z_BREACH, Z_BREACH1 in
> OGR? Note that, interestingly, LENGTH is OK though.

As Roger has explained, this is *only* a view, a format, a way of
presentation. The underlying number is still the same, in both cases.

OGR could display these values also using scientific notation,
ie. 1.0158331e+2 or engineering notation 101.58331e+0 or with only 3
decimal places 101.583.
In all these cases it's still a way of displaying, no data is
truncated or extended.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Oct 24 10:11:07 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453DEED3.8040108@o2.pl>
References: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
	<453DEED3.8040108@o2.pl>
Message-ID: <453E1EFB.2080206@pobox.com>

Maciej Sieczka wrote:
> 
> Hmm, this looks wrong (?) - my CAT and LCAT *do* have a zero precision.
> So I'd expect them to be treated as integer. And the other 4 columns
> have 15 decimal places precision, not 2. Open the dbf in a spreadsheet
> to see that:
> 
> CAT,N,11,0
> LCAT,N,11,0
> Z,N,24,15
> Z_BREACH,N,24,15
> Z_BREACH1,N,24,15
> LENGTH,N,24,15

Maciej,

Because Shapelib does not have a 64bit integer type, it automatically
treats integer fields that are potentially to large to fit in a 32bit
integer as floating point.  This isn't a great approach and causes a
number of problems, but it isn't completely without reason.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From tutey at o2.pl  Tue Oct 24 10:43:00 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453E1EFB.2080206@pobox.com>
References: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
	<453DEED3.8040108@o2.pl> <453E1EFB.2080206@pobox.com>
Message-ID: <453E2674.5000503@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:
>>
>> Hmm, this looks wrong (?) - my CAT and LCAT *do* have a zero precision.
>> So I'd expect them to be treated as integer. And the other 4 columns
>> have 15 decimal places precision, not 2. Open the dbf in a spreadsheet
>> to see that:
>>
>> CAT,N,11,0
>> LCAT,N,11,0
>> Z,N,24,15
>> Z_BREACH,N,24,15
>> Z_BREACH1,N,24,15
>> LENGTH,N,24,15

> Because Shapelib does not have a 64bit integer type, it automatically
> treats integer fields that are potentially to large to fit in a 32bit
> integer as floating point.  This isn't a great approach and causes a
> number of problems,

One of which is that after v.out.ogr->v.in.ogr one gets his previous
integer fields imported as double floating point.

> but it isn't completely without reason.

But is that planned to be fixed?

Maciek

From warmerdam at pobox.com  Tue Oct 24 11:21:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:24 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453E2674.5000503@o2.pl>
References: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
	<453DEED3.8040108@o2.pl> <453E1EFB.2080206@pobox.com>
	<453E2674.5000503@o2.pl>
Message-ID: <453E2F97.9050801@pobox.com>

Maciej Sieczka wrote:
> Frank Warmerdam wrote:
>> Maciej Sieczka wrote:
>>> Hmm, this looks wrong (?) - my CAT and LCAT *do* have a zero precision.
>>> So I'd expect them to be treated as integer. And the other 4 columns
>>> have 15 decimal places precision, not 2. Open the dbf in a spreadsheet
>>> to see that:
>>>
>>> CAT,N,11,0
>>> LCAT,N,11,0
>>> Z,N,24,15
>>> Z_BREACH,N,24,15
>>> Z_BREACH1,N,24,15
>>> LENGTH,N,24,15
> 
>> Because Shapelib does not have a 64bit integer type, it automatically
>> treats integer fields that are potentially to large to fit in a 32bit
>> integer as floating point.  This isn't a great approach and causes a
>> number of problems,
> 
> One of which is that after v.out.ogr->v.in.ogr one gets his previous
> integer fields imported as double floating point.
> 
>> but it isn't completely without reason.
> 
> But is that planned to be fixed?

Maciek,

It is a known problem that I hope to address eventually but there is no
timeline for a fix.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Roger.Bivand at nhh.no  Tue Oct 24 11:51:30 2006
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453E2F97.9050801@pobox.com>
Message-ID: <Pine.LNX.4.44.0610241733240.23994-100000@reclus.nhh.no>

On Tue, 24 Oct 2006, Frank Warmerdam wrote:

> Maciej Sieczka wrote:
> > Frank Warmerdam wrote:
> >> Maciej Sieczka wrote:
> >>> Hmm, this looks wrong (?) - my CAT and LCAT *do* have a zero precision.
> >>> So I'd expect them to be treated as integer. And the other 4 columns
> >>> have 15 decimal places precision, not 2. Open the dbf in a spreadsheet
> >>> to see that:
> >>>
> >>> CAT,N,11,0
> >>> LCAT,N,11,0
> >>> Z,N,24,15
> >>> Z_BREACH,N,24,15
> >>> Z_BREACH1,N,24,15
> >>> LENGTH,N,24,15
> > 
> >> Because Shapelib does not have a 64bit integer type, it automatically
> >> treats integer fields that are potentially to large to fit in a 32bit
> >> integer as floating point.  This isn't a great approach and causes a
> >> number of problems,
> > 
> > One of which is that after v.out.ogr->v.in.ogr one gets his previous
> > integer fields imported as double floating point.
> > 
> >> but it isn't completely without reason.
> > 
> > But is that planned to be fixed?
> 
> Maciek,
> 
> It is a known problem that I hope to address eventually but there is no
> timeline for a fix.

That seems fair, given that only widths < 10 match 32-bit integers. The
problem is that we need to read wide fields as double anyway (and they've
only got 16 digits), and then check to see if there is no difference
between the value and the rounded value, having taken fuzz into account, 
and keeping missing values handled properly. Not easy. So one route is to 
make sure that integer fields get written with the tightest width 
possible, but I'm not sure where this happens in v.out.ogr, 
OGR_L_CreateField, maybe?

Roger

> 
> Best regards,
> 

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no


From sy at perkins.net  Tue Oct 24 12:47:21 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <453CEB32.9010806@perkins.net>
References: <003901c6f663$6e09a980$6501a8c0@DellWork>
	<453CEB32.9010806@perkins.net>
Message-ID: <1161708441.4843.274105067@webmail.messagingengine.com>



> > Yes, you should _always_ build your application and GDAL with the same
> > version of the runtime library (/MD, or /MDd).
> >   
> 
> Now, I am aware of a few problems with this approach. In particular, the 
> debug and release CRTs use different memory allocation procedures, so if 
> you allocate memory in some library code compiled with /MD and then 
> release it in your calling code, compiled with /MDd, you'll get crashes. 
> And if you're passing STL containers around that do automatic memory 
> management, this is an easy trap to fall into. But if the third party 
> libraries are relatively simple and are pure C, then you can probably 
> get away with it. In any case, code you give out will be compiled in 
> release mode and so won't be affected by this problem.


I've been playing a bit more with the code and want to revise my earlier
opinion...

Although my code is now starting up OK (an improvement on where I was a
couple of days ago), as yet, I've been unable to get even relatively
simple code compiled with /MDd to run correctly with DLLs (e.g. GDAL)
compiled with /MD under Visual Studio 2005. I get a segmentation fault
when I call GDALOpen() in my code, for instance. Now, I thought I used
to be able to do this kind of thing with VS 2003, so either I'm
mis-remembering, or VS 2005 has made the debug and non-debug CRTs more
incompatible.

In any case, if I really do have to use the same CRT throughout all my
code, I seem to have two options:

(a) Compile separate versions of GDAL and all my other third party DLLs
in both debug and release modes (i.e. with both /MDd and /MD), keep the
import libraries and DLLs separate, and make sure my library path and
PATH are set appropriately when compiling / testing my code. A real
pain, if you ask me.

(b) Compile everything with /MD, but disable optimization in those
sections of code I want to debug. Also ensure that the _DEBUG flag is
undefined everywhere to avoid _CrtDbgReportW() link errors.

I've been using (b) and so far it seems to be working fine. I can step
through code, set breakpoints etc.

Out of curiosity, does using the debug CRT provide any benefit that
anyone knows of? I guess it allows you to step into some of the standard
C/C++ library routines, but that seems like a relatively small win for
the extra pain...

Cheers,

Sy

From warmerdam at pobox.com  Tue Oct 24 13:07:56 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <453B4571.1010908@airtelbroadband.in>
References: <453B4571.1010908@airtelbroadband.in>
Message-ID: <453E486C.2020108@pobox.com>

flightline wrote:
> Dear Sir,
> 
> Do you have hfatest.exe with you. May I request a copy?
> 
> The .ovr file I have has an EHFA Header Tag
> and I can't figure it out.
> 
> Unfortunately I can't send you a sample but have requested for another 
> sample set.
> 
> Any / all help with the tag and decoding it's contents is welcome

Francis,

It isn't terribly convenient to send you a hfatest executable.  Can you
download GDAL and build it?  If so, then you can cd into gdal/frmts/hfa
and specifically build hfatest.  On linux:

  make hfatest

on windows:

  nmake /f makefile.vc hfatest.exe

If this is impractical, I can build a hfatest.exe that should work with
the last FWTools build for windows.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Oct 24 13:08:33 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <453C39F1.7080009@perkins.net>
References: <453C39F1.7080009@perkins.net>
Message-ID: <453E4891.50707@loskot.net>

Simon Perkins wrote:
> Probably the makefile.vc files should be updated to do this. I'll
> hopefully get to it in a few days time if nobody beats me to it...

FYI, this issue has been reported as a bug and should be fixed in
next 1-2 weeks:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1334

Suggestions and comments about best solution are welcome.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Oct 24 13:23:38 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <1161708441.4843.274105067@webmail.messagingengine.com>
References: <003901c6f663$6e09a980$6501a8c0@DellWork>	<453CEB32.9010806@perkins.net>
	<1161708441.4843.274105067@webmail.messagingengine.com>
Message-ID: <453E4C1A.80002@pobox.com>

Simon Perkins wrote:
> (b) Compile everything with /MD, but disable optimization in those
> sections of code I want to debug. Also ensure that the _DEBUG flag is
> undefined everywhere to avoid _CrtDbgReportW() link errors.
> 
> I've been using (b) and so far it seems to be working fine. I can step
> through code, set breakpoints etc.

Simon,

This is what I do.  I use /MD and /Zi for debuggin and /MD and /Ox for
optimized releases.

> Out of curiosity, does using the debug CRT provide any benefit that
> anyone knows of? I guess it allows you to step into some of the standard
> C/C++ library routines, but that seems like a relatively small win for
> the extra pain...

My understanding is tha the /MDd CRT does extra runtime checking, watching
for heap corruption, and possible some stuff like illegal arguments to system
functions.  Perhaps better debugging into system functions?  However, whatever
it does has never seemed very important to me.

PS. with all due respect to Ben, I think that one can be quite functional,
including gui debugging, with GDAL built using makefile.vc.  I'm sure there
are advantages to using a fully project file based approach, but they are not
so enormous as to leave those using the makefiles crippled in comparison.  And
there are costs in complexity and maintainability for the project files.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Oct 24 14:10:38 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <1161708441.4843.274105067@webmail.messagingengine.com>
References: <003901c6f663$6e09a980$6501a8c0@DellWork>	<453CEB32.9010806@perkins.net>
	<1161708441.4843.274105067@webmail.messagingengine.com>
Message-ID: <453E571E.9030805@loskot.net>

Simon Perkins wrote:
> In any case, if I really do have to use the same CRT throughout all my
> code, I seem to have two options:
> 
> (a) Compile separate versions of GDAL and all my other third party DLLs
> in both debug and release modes (i.e. with both /MDd and /MD), keep the
> import libraries and DLLs separate, and make sure my library path and
> PATH are set appropriately when compiling / testing my code. A real
> pain, if you ask me.

You're likely asking for troubles when mixing debug and release
dependencies. Debug and release libraries use different memory
allocators, etc. Generally, linking against multiple versions of CRT is
not supported by VC++.

That's why Microsoft's concept of cycle of development is based on
run-time modules compiled as Release and development modules compiled as
Debug and shipped in a SDK package by vendors.
So, according to Microsoft style of development, developer is
supposed to use Debug versions of every libraries he uses.
Visual C++ IDE supports it by physically separating Debug and Release
files to <project>/Debug and <project>/Release.


Personally, regardless if I use VC++ IDE or nmake with makefiles,
I always name DLL using following scheme

1) Debug:
<module>d.dll
<module>d_i.lib

2) Release:
<module>.dll
<module>_i.dll

Next, test program / executable linked against Debug version is named as
<program>d.exe but linked against Release as <program>.exe.

Yes, it requires some configuration steps in VC++ project or makefiles,
but finally I've never met any conflicts. Also my PATH stays clean.

Finally, and I think most *important* here, is that according to Visual
Studio EULA, you can NOT redistribute Debug modules of Microsoft C
Run-Time. This also explains why it's hard to deploy and run debug
versions on machines where no Visual C++ IDE and SDKs are installed.

> (b) Compile everything with /MD, but disable optimization in those
> sections of code I want to debug. Also ensure that the _DEBUG flag is
> undefined everywhere to avoid _CrtDbgReportW() link errors.
> 
> I've been using (b) and so far it seems to be working fine. I can step
> through code, set breakpoints etc.

I'd say such builds are not usable for serious development and debugging.

> Out of curiosity, does using the debug CRT provide any benefit that
> anyone knows of? I guess it allows you to step into some of the standard
> C/C++ library routines, but that seems like a relatively small win for
> the extra pain...

You can try to run following program compiled in Debug, in Release, and
compare which version is better for a developer:

#include <stdlib.h>
int main( void )
{
    wchar_t buf[20];
    mbstowcs(buf, NULL, 20);

    return 0;
}

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Oct 24 14:59:32 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdalwarp error 33
In-Reply-To: <9d4084070610191548j379b27f5y9201f0a9791df7cb@mail.gmail.com>
References: <9d4084070610191548j379b27f5y9201f0a9791df7cb@mail.gmail.com>
Message-ID: <453E6294.7060102@pobox.com>

Naiara Pinto wrote:
> Hi all,
> 
> I have the most recent version of FWTools and I am having trouble
> using Gdalwarp in one of my layers. Here is what I did:
> 
> gdalwarp -s_srs '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
> -t_srs '+proj=aea +lat_1=29.5 +lat_2=45.5 +lat_0=23 +lon_0=-96 +x_0=0
> +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m +no_defs' -tr 500 500 -rb
> -srcnodata 251 -dstnodata -9999 LatLon.NA.2001.Tree.tif ptree.tif
> 
> I am getting the following error:
> Creating output file that is 36225P x 17963L.
> ERROR 1: no system list, errno: 33
> 
> ERROR 1: GDALWarperOperation::ComputeSourceWindow() failed because
> the pfnTransformer failed.
> *** glibc detected *** corrupted double-linked list: 0x08078570 ***
> Aborted
> 
> I have used this dataset before and it worked ok when I tried to
> project it to Lambert Azimuthal Equal Area. But now that I am trying
> to project it to Albers Equal Area, I am getting the error above.
> 
> Does anyone have any ideas why this happens?

Naiara,

The failure to reproject can be for a number of reasons, including that
the location is invalid for the projection specified.  Many projections
don't support "over the horizon" locations for instance.

If you would like me to reproduce the problem, I would need a gdalinfo
report for the source file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Oct 24 15:04:59 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] converting ECW to MrSID
In-Reply-To: <79900e6a082c85c3c8e300d76af25947@145.50.39.8>
References: <79900e6a082c85c3c8e300d76af25947@145.50.39.8>
Message-ID: <453E63DB.2040305@pobox.com>

Bart van den Eijnden (OSGIS) wrote:
> Hi list,
> 
> I am trying to convert a large (56 Gb) ECW file on Red Hat Enterprise Linux
> 3 to MrSID.
> 
> After a while I run into a segfault. The size of the MrSID file at the time
> of the crash is 369 Mb. The machine has 4 Gb of memory. 
> 
> Version info:
> mrsid: 5.0.6
> ecw: 3.3RC2
> gdal: 1.3.2
> 
> Output from gdal_translate:
> 
> Input file size is 690000, 800000
> 0free(): invalid pointer 0x3abad2f1!
> 
> Any ideas on how to make this conversion work?

Bart,

I'd suggest upgrading to libecw 3.3 final.  I haven't run into this problem
myself.

I hope the MrSID compressor isn't burning off your "compressor cartridge"
money for failed compressions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From brian at thetimoneygroup.com  Tue Oct 24 01:28:28 2006
From: brian at thetimoneygroup.com (Brian Timoney)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] -spat switch in ogr2ogr
Message-ID: <453DA47C.8060205@thetimoneygroup.com>


All:

At the risk of disproving the adage that the only dumb question is the 
one left unasked, I'm having some trouble applying the -spat switch 
using ogr2ogr from the command line.

I have a table of US cities in PostGIS called..."cities" in lat/long NAD 
83 (EPSG:4269)

I want to pull cities from the middle of the country from a BBOX of  
(-114,30,-100,45) and throw them into a new shapefile.

So I hazarded...

ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat '-114 30 -100 45'

No dice (empty shapefile).  There are 75+ features that fall inside the 
bounding box.

I've also tried double quotes and no quotes around the xmin ymin xmax 
ymax values.

Converting the table using other switches works fine.

Any tips, including what should have been blindingly obvious, are 
appreciated.


Thanks,

Brian




From hamish_nospam at yahoo.com  Tue Oct 24 02:57:16 2006
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Dissolving internal boundaries
Message-ID: <20061024195716.0bf64e25.hamish_nospam@yahoo.com>

> Is there any way with gdal/ogr tools to join polygons into a single
> polygon based upon a .dbf attribute and dissolve the interior
> boundaries of constituent shapefile polygons?

fwiw, this is possible in GRASS GIS 6.2 with the v.dissolve module.

it dissolves by category (feature ID) so you'll want reset the cat
column to whatever integer column in the DBF with v.reclass. Or,
(harder) if the common attribute isn't an integer, create a new column
(v.db.addcol) and populate it with a unique integer which refers to each
attribute, then v.reclass & v.dissolve as above.

using a second "layer" (attached DBF) might be a better way
(v.db.addcol) vs adding an additional column to your attribute table.

see also v.category, v.to.db, and v.distance.

if you figure out a good method for "the hard way", let me know & I'll
add it to v.dissolve as a new option.


Hamish

From mwtoews at sfu.ca  Tue Oct 24 14:43:12 2006
From: mwtoews at sfu.ca (Michael Toews)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal_translate for netCDF to AAIGrid
Message-ID: <453E5EC0.70807@sfu.ca>

Hi all,
'gdal_translate' on a netCDF file to an AAIGrid has odd behaviour using 
GDAL 1.3.2.0 under Cygwin. My conversion:
$ gdal_translate -of AAIGrid -sds test.nc test.asc
$ mv test.asc1 test.asc
No errors were generated during the conversion.

The header of the AAIGrid output is:
ncols        86
nrows        225
xllcorner    747700.000000000000
yllcorner    5441461.627906977199
dx           98.837209302326
dy           99.555555555556
NODATA_value  -9999

However, these headers should read:
ncols         86
nrows         225
xllcorner     747700
yllcorner     5441200
cellsize      100
NODATA_value  -9999

The dx/dy in the output of the file was incorrectly calculated as:
dx=cellsize*(ncol-1)/ncol
dy=cellsize*(nrow-1)/nrow

which is both why they are different (dx != dy because ncols != nrows), 
and why they are not correct, since they are multiplied by the ratio of 
base0/base1 representations of their dimension lengths.

My netCDF file (attached) should has a cellsize of exactly 100, since my 
data are spaced every 100 m in the x- and y-dims. This netCDF file was 
produced using a custom python script, which uses Scientific.IO.NetCDF 
for python 2.3. The file was later averaged, using 'ncra', which is part 
of NCO (command viewed in 'history' global attribute). My netCDF file is 
not perfect; I've recently discovered that my 'ydim' is 5463700, 
5463600, ..., 5441300; or it is in reverse order (dy = -100). For netCDF 
files, this should not matter (although I'll admit that it is a bit 
sloppy); I've been able to use the file as normal with 'ncview' and NCO. 
(As a caution, I have also seen some netCDF files which order their 
latitudes from North to South, which is also in reverse order; I'm not 
sure if this is tested, and corrected in GDAL, but I would highly advise 
it for netCDF files).

I also get strange behaviour with 'gdalinfo'. Try:
$ gdalinfo test.nc
$ gdalinfo test.asc # using the correct header

Both the 'Size' and the 'Corner Coordinates' are pretty strange for the 
test.nc file, as it seems to think that it is 512x512.

Thanks!
+mt
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.nc
Type: application/x-netcdf
Size: 79980 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061024/d9458190/test.nc
From warmerdam at pobox.com  Tue Oct 24 23:49:51 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 6: OGR support for querying and selection
	by	geometry and feature style
In-Reply-To: <f3b73b7d0610201645t3c8b5a6bq5a63fd07b0deb7b8@mail.gmail.com>
References: <f3b73b7d0610201645t3c8b5a6bq5a63fd07b0deb7b8@mail.gmail.com>
Message-ID: <453EDEDF.2030502@pobox.com>

Tamas,

I'm quite pleased with RFC-6.  Am I correct in understanding that
your existing patch addresses fetching the special fields, and using
them in WHERE clauses?

Some things I'd like to see in the proposal:

  1) I think we should have constants for the special fields!  All
     these case statements with "1", "2", etc in them scare me!

  2) I'd like to be able to register a function to fetch the special
     fields so we don't have to have the special fetch code appearing
     in so many places.  At the very least a way of registering a function
     in an array parallel to the SpecialFieldNames[] and SpecialFieldTypes[]
     arrays. But perhaps it would be better to actually have methods on the
     OGRFeature like:
        const char *GetSpecialFieldAsString( int nSpecialFieldCode );
        int         GetSpecialFieldAsInteger( int nSpecialFieldCode );

  3) I'd like the RFC to include a section on "how to add a new special
     field".  Hopefully if the special field accessor on the OGRFeature
     idea works, it won't be too complicated.

  4) I'm a bit concerned about the lifespan for dynamically allocated
     return strings.  How carefully have you analysed the lifespan for
     the strings for which you propose the StringFinalizer class?  If
     the lifespan is appropriate, I was thinking that perhaps we could
     hold them in the OGRFeature in a temporary string value that would
     last till the next Get*AsString() request on that particular
     OGRFeature.  Would that be a long enough life span, even if there
     were multiple special fields that required dynamically allocated
     values?  Actually, I'd like to use the current approach for regular
     non-string values requested on OGRFeature::GetFieldAsString().
     Currently these are held in a static buffer, causing a substantial
     thread-safety issue.

  5) I'd like to see a section in the RFC describing the test suite items
     you will add to the GDAL autotest.

  6) I think the backward compatibility section of the RFC should mention
     that the new special fields will potentially conflict with regard
     fields with the given names, and to describe which will take precidence
     when there is a conflict.

I think the feature this RFC describes will be a fantastic addition to the
OGR SQLish engine.  If you wish, I'd be willing to implement items (4) and
(5) above if you can take care of the rest.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Oct 25 00:20:23 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] -spat switch in ogr2ogr
In-Reply-To: <453DA47C.8060205@thetimoneygroup.com>
References: <453DA47C.8060205@thetimoneygroup.com>
Message-ID: <453EE607.1000609@pobox.com>

Brian Timoney wrote:
> 
> All:
> 
> At the risk of disproving the adage that the only dumb question is the 
> one left unasked, I'm having some trouble applying the -spat switch 
> using ogr2ogr from the command line.
> 
> I have a table of US cities in PostGIS called..."cities" in lat/long NAD 
> 83 (EPSG:4269)
> 
> I want to pull cities from the middle of the country from a BBOX of  
> (-114,30,-100,45) and throw them into a new shapefile.
> 
> So I hazarded...
> 
> ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat '-114 30 -100 
> 45'
> 
> No dice (empty shapefile).  There are 75+ features that fall inside the 
> bounding box.
> 
> I've also tried double quotes and no quotes around the xmin ymin xmax 
> ymax values.

Brian,

It should work with:

  ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat -114 30 -100 45

Would it be fair for me to guess that the following works fine?

  ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities

So if my suggested approach (no quotes on -spat argument) doesn't work, then
I'm at a bit of a loss.  I guess I'd have to actually test things at my end!

By the way, you might want to set the CPL_DEBUG environment variable to ON.
This will produce various debug output of the actual SQL being sent to
postgis.  This might give clues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ben at vterrain.org  Wed Oct 25 04:36:35 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <1161708441.4843.274105067@webmail.messagingengine.com>
Message-ID: <00bb01c6f810$aeba7be0$6501a8c0@DellWork>

Not to flog a dead horse here, but i do have something useful to add:

> -----
> From: Simon Perkins [mailto:sy@perkins.net] 
> Sent: Tuesday, October 24, 2006 6:47 AM
> 
> as yet, I've been unable to get even relatively
> simple code compiled with /MDd to run correctly with DLLs (e.g. GDAL)
> compiled with /MD under Visual Studio 2005.
> [..]
> I seem to have two options:
> 
> (a) Compile separate versions of GDAL and all my other third 
> party DLLs in both debug and release modes (i.e. with both /MDd and 
> /MD), keep the import libraries and DLLs separate [..]
> A real pain, if you ask me.

It is something of a pain, but not _every_ library needs it.  Only those
that do things like share the heap or pass file descriptors.  Let me give an
example.  My project (VTP) has around 16 library dependencies.  Some need to
be built on the same runtime library (and runtime version!), some do not:

Must be built with same runtime (/MDd vs. /MD, VC7.1 vc. VC8):
------------------
GDAL
wxWidgets
OSG, OpenThreads
zlib (if using the gzdopen function)

Does not need to match (Can be /MD, or built with older or non-VC compiler):
-------------------
libpng
libjpeg
libcurl
netcdf
QuikGrid
bzip2
expat
freetype
libMini
PROJ.4
unzip
zlib (if not using the gzdopen function)

>From this, i hope you can see that the pain is not that widespread.

> and make sure
> my library path and PATH are set appropriately when compiling /
> testing my code.

You can put your debug and release DLLs (e.g. gdal.dll and gdald.dll) in the
same folder on your path so there is nothing to switch.

-Ben


From tutey at o2.pl  Wed Oct 25 05:57:46 2006
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453E2F97.9050801@pobox.com>
References: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
	<453DEED3.8040108@o2.pl> <453E1EFB.2080206@pobox.com>
	<453E2674.5000503@o2.pl> <453E2F97.9050801@pobox.com>
Message-ID: <453F351A.1030101@o2.pl>

Frank Warmerdam wrote:
> Maciej Sieczka wrote:
>> Frank Warmerdam wrote:

>>> Because Shapelib does not have a 64bit integer type, it automatically
>>> treats integer fields that are potentially to large to fit in a 32bit
>>> integer as floating point.  This isn't a great approach and causes a
>>> number of problems,

>> One of which is that after v.out.ogr->v.in.ogr one gets his previous
>> integer fields imported as double floating point.

>>> but it isn't completely without reason.

>> But is that planned to be fixed?

> It is a known problem that I hope to address eventually but there is no
> timeline for a fix.

What about the other issue - could OGR output the

Z_BREACH (Real) =      101.583309999999997

as

Z_BREACH (Real) =      101.58331

instead?

I don't think it is just me accustomed to the latter form. It is more
human readable and shorter, cleaner. Users would like it I believe.

Maciek

From sy at perkins.net  Wed Oct 25 10:02:01 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <00bb01c6f810$aeba7be0$6501a8c0@DellWork>
References: <00bb01c6f810$aeba7be0$6501a8c0@DellWork>
Message-ID: <453F6E59.8000401@perkins.net>

Ben Discoe wrote:
> Not to flog a dead horse here, but i do have something useful to add:
>   

Oh, there's a little life in this horse still... :)

> You can put your debug and release DLLs (e.g. gdal.dll and gdald.dll) in the
> same folder on your path so there is nothing to switch.
>   

Yes, I see that the naming convention idea does help significantly here. 
One question: do you build GDAL and then manually copy the DLLs from the 
release or debug directories (as appropriate) into a common directory 
that is on your PATH? Or do you modify the GDAL build configurations so 
that both debug and release versions get built in the same directory, 
and then put _that_ on your path (if that is even possible)? I'm just 
trying to automate as much as possible...

Cheers,

Sy


From warmerdam at pobox.com  Wed Oct 25 10:07:05 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] OGR returns wrong floating values for shapefiles (and
	integer as real, in error)
In-Reply-To: <453F351A.1030101@o2.pl>
References: <Pine.LNX.4.44.0610241120190.23994-100000@reclus.nhh.no>
	<453DEED3.8040108@o2.pl> <453E1EFB.2080206@pobox.com>
	<453E2674.5000503@o2.pl> <453E2F97.9050801@pobox.com>
	<453F351A.1030101@o2.pl>
Message-ID: <453F6F89.4010807@pobox.com>

Maciej Sieczka wrote:
> What about the other issue - could OGR output the
> 
> Z_BREACH (Real) =      101.583309999999997
> 
> as
> 
> Z_BREACH (Real) =      101.58331
> 
> instead?
> 
> I don't think it is just me accustomed to the latter form. It is more
> human readable and shorter, cleaner. Users would like it I believe.

Maciek,

The "fuzzy" form of the number apparently reflects a fuzzy form of the
number stored in the file.  Generally I try to report up to "near" double
precision when giving textual output.  I am hesitant to alter ogrinfo
in this regard, even though the numbers are ugly.

Ogrinfo is, amoung other things, a debugging tool, and having it report
quite closely the underlying values can be valuable.

Of course, other OGR applications can choose how they want to report
the numbers.

In short, I'm not inclined to make any change in this regard.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Wed Oct 25 10:07:28 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <453F6E59.8000401@perkins.net>
References: <00bb01c6f810$aeba7be0$6501a8c0@DellWork>
	<453F6E59.8000401@perkins.net>
Message-ID: <453F6FA0.3070807@perkins.net>

Simon Perkins wrote:
> Yes, I see that the naming convention idea does help significantly 
> here. One question: do you build GDAL and then manually copy the DLLs 
> from the release or debug directories (as appropriate) into a common 
> directory that is on your PATH? Or do you modify the GDAL build 
> configurations so that both debug and release versions get built in 
> the same directory, and then put _that_ on your path (if that is even 
> possible)? I'm just trying to automate as much as possible...

Or do you put both debug and release build directories on your PATH?

Sy


From com at navicon.dk  Wed Oct 25 10:33:01 2006
From: com at navicon.dk (oland)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/java dumps core
Message-ID: <6993229.post@talk.nabble.com>


Hello List

I have built the swing/java bindings in gdal-1.3.2. When I try to run the
gdalinfo java app it dumps core see below.

java -cp .:../gdal.jar -Djava.library.path=../.libs/ gdalinfo
/opt/Mapdata/BSB_ROOT/11006/11006_1.KAP
Driver: BSB/Maptech BSB Nautical Charts
Size is 10967, 9389
Coordinate System is:

Origin = (0.0,0.0)
Pixel Size = (1.0,1.0)
  0.0, 1.0, 0.0
  0.0, 0.0, 1.0
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xb78475ff, pid=24875, tid=3085108928
#
# Java VM: Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x1695ff]
#
# An error report file with more information is saved as hs_err_pid24875.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#
Abort

Any hints?

The error log can be seen here

http://www.nabble.com/file/3845/hs_err_pid24875.log hs_err_pid24875.log 

Carsten
-- 
View this message in context: http://www.nabble.com/swig-java-dumps-core-tf2507983.html#a6993229
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From szekerest at gmail.com  Wed Oct 25 12:02:20 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 6: OGR support for querying and selection by
	geometry and feature style
In-Reply-To: <453EDEDF.2030502@pobox.com>
References: <f3b73b7d0610201645t3c8b5a6bq5a63fd07b0deb7b8@mail.gmail.com>
	<453EDEDF.2030502@pobox.com>
Message-ID: <f3b73b7d0610250902n38b526b3wcd96b9141e47abe7@mail.gmail.com>

2006/10/25, Frank Warmerdam <warmerdam@pobox.com>:
> Tamas,
>
> I'm quite pleased with RFC-6.  Am I correct in understanding that
> your existing patch addresses fetching the special fields, and using
> them in WHERE clauses?

Frank,

Both of them were addressed according to your previous notes in
http://mapserver.gis.umn.edu/bugs/show_bug.cgi?id=1438
Special fields can now appear in the select list, the where
expression and even in the orderby clause as well.

>
> Some things I'd like to see in the proposal:
>
>   1) I think we should have constants for the special fields!  All
>      these case statements with "1", "2", etc in them scare me!
>

No problem.

>   2) I'd like to be able to register a function to fetch the special
>      fields so we don't have to have the special fetch code appearing
>      in so many places.  At the very least a way of registering a function
>      in an array parallel to the SpecialFieldNames[] and SpecialFieldTypes[]
>      arrays. But perhaps it would be better to actually have methods on the
>      OGRFeature like:
>         const char *GetSpecialFieldAsString( int nSpecialFieldCode );
>         int         GetSpecialFieldAsInteger( int nSpecialFieldCode );
>

No problem about adding the field value accessor function for every special
field. I have already been thinking of it but would not want to
disturb the existing
code so much. Anyway it would make the things more clear with the overhead
of an extra function call.

>   3) I'd like the RFC to include a section on "how to add a new special
>      field".  Hopefully if the special field accessor on the OGRFeature
>      idea works, it won't be too complicated.
>

Well, that was the only area where the code should be significantly
changed when addig a new field. However I haven't dealt with this
problem so far, because the ownership of the returned values was not
handled uniformly. (With regard to 4)

>   4) I'm a bit concerned about the lifespan for dynamically allocated
>      return strings.  How carefully have you analysed the lifespan for
>      the strings for which you propose the StringFinalizer class?  If
>      the lifespan is appropriate, I was thinking that perhaps we could
>      hold them in the OGRFeature in a temporary string value that would
>      last till the next Get*AsString() request on that particular
>      OGRFeature.  Would that be a long enough life span, even if there
>      were multiple special fields that required dynamically allocated
>      values?  Actually, I'd like to use the current approach for regular
>      non-string values requested on OGRFeature::GetFieldAsString().
>      Currently these are held in a static buffer, causing a substantial
>      thread-safety issue.

It causes much of pain figuring out how GDAL/OGR handles the ownership
of the function parameters and return values. In this case the difference of
the usage between exportToWkt and GetStyleString/getGeometryName scared
me highly. I would be the happiest if we eliminated the need of the
StringFinalizer class. The current solution preserves the returned wkt
within the
scope of the function. However it will not cause problems if the subsequent
Get*AsString() overrides the value because we are using the returned value just
after the funcion call.
At this point I will leave you the task to consider how it will affect the other
part of the OGR library. But I like this idea as being the warrior
against unnecessary
allocations and static variables.

>
>   5) I'd like to see a section in the RFC describing the test suite items
>      you will add to the GDAL autotest.
>

I'm afraid I'm not too familiar with GDAL autotest but I'm keen to dig into it
more deeply if i have time. But now I can provide only the data (in
mapinfo format) and
the SQL query samples if needed. Currently I am testing the code using
step by step execution of ogrinfo in debug mode.

>   6) I think the backward compatibility section of the RFC should mention
>      that the new special fields will potentially conflict with regard
>      fields with the given names, and to describe which will take precidence
>      when there is a conflict.
>

No problem with this either. I would suggest a preceding control
character like '@' but it
will break my existing mapfiles (~500)  ;-)

> I think the feature this RFC describes will be a fantastic addition to the
> OGR SQLish engine.  If you wish, I'd be willing to implement items (4) and
> (5) above if you can take care of the rest.
>

I would be helpful if you can do (4) and (5) notify me when you get
ready with it.

Best Regards,

Tamas

From collinsb at mitre.org  Wed Oct 25 12:04:51 2006
From: collinsb at mitre.org (Collins, Benjamin)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/java dumps core
In-Reply-To: <6993229.post@talk.nabble.com>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C014B7930@IMCSRV1.MITRE.ORG>

Carsten,

You are probably having problems with the retrieval of GCPs.  In order
to make the retrieval as natural as possible in Java, I put the results
in a Vector.  Since I have no files with GCPs sitting around to test
this approach on, it remains mostly untested.  I can take a look at
this problem if you have a sample that I can access.

--
Ben Collins 

>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org 
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of oland
>Sent: Wednesday, October 25, 2006 10:33 AM
>To: gdal-dev@lists.maptools.org
>Subject: [Gdal-dev] swig/java dumps core
>
>
>Hello List
>
>I have built the swing/java bindings in gdal-1.3.2. When I try 
>to run the
>gdalinfo java app it dumps core see below.
>
>java -cp .:../gdal.jar -Djava.library.path=../.libs/ gdalinfo
>/opt/Mapdata/BSB_ROOT/11006/11006_1.KAP
>Driver: BSB/Maptech BSB Nautical Charts
>Size is 10967, 9389
>Coordinate System is:
>
>Origin = (0.0,0.0)
>Pixel Size = (1.0,1.0)
>  0.0, 1.0, 0.0
>  0.0, 0.0, 1.0
>GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0
>,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORIT
>Y["EPSG",8901]],UNIT["degree",0.0174532925199433,AUTHORITY["EPS
>G",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
>#
># An unexpected error has been detected by HotSpot Virtual Machine:
>#
>#  SIGSEGV (0xb) at pc=0xb78475ff, pid=24875, tid=3085108928
>#
># Java VM: Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode)
># Problematic frame:
># V  [libjvm.so+0x1695ff]
>#
># An error report file with more information is saved as 
>hs_err_pid24875.log
>#
># If you would like to submit a bug report, please visit:
>#   http://java.sun.com/webapps/bugreport/crash.jsp
>#
>Abort
>
>Any hints?
>
>The error log can be seen here
>
>http://www.nabble.com/file/3845/hs_err_pid24875.log 
>hs_err_pid24875.log 
>
>Carsten
>-- 
>View this message in context: 
>http://www.nabble.com/swig-java-dumps-core-tf2507983.html#a6993229
>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Wed Oct 25 12:36:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 6: OGR support for querying and selection by
	geometry and feature style
In-Reply-To: <f3b73b7d0610250902n38b526b3wcd96b9141e47abe7@mail.gmail.com>
References: <f3b73b7d0610201645t3c8b5a6bq5a63fd07b0deb7b8@mail.gmail.com>	
	<453EDEDF.2030502@pobox.com>
	<f3b73b7d0610250902n38b526b3wcd96b9141e47abe7@mail.gmail.com>
Message-ID: <453F9291.40705@pobox.com>

Tamas Szekeres wrote:
>>   2) I'd like to be able to register a function to fetch the special
>>      fields so we don't have to have the special fetch code appearing
>>      in so many places.  At the very least a way of registering a 
>> function
>>      in an array parallel to the SpecialFieldNames[] and 
>> SpecialFieldTypes[]
>>      arrays. But perhaps it would be better to actually have methods 
>> on the
>>      OGRFeature like:
>>         const char *GetSpecialFieldAsString( int nSpecialFieldCode );
>>         int         GetSpecialFieldAsInteger( int nSpecialFieldCode );
>>
> 
> No problem about adding the field value accessor function for every special
> field. I have already been thinking of it but would not want to
> disturb the existing
> code so much. Anyway it would make the things more clear with the overhead
> of an extra function call.

Tamas,

I'll let you take a first crack at updating the RFC to reflect this.  I'd
suggest not updating your patches for the time being in case there is any
other changes suggested.

> It causes much of pain figuring out how GDAL/OGR handles the ownership
> of the function parameters and return values. In this case the 
> difference of
> the usage between exportToWkt and GetStyleString/getGeometryName scared
> me highly. I would be the happiest if we eliminated the need of the
> StringFinalizer class. The current solution preserves the returned wkt
> within the
> scope of the function. However it will not cause problems if the subsequent
> Get*AsString() overrides the value because we are using the returned 
> value just
> after the funcion call.
> At this point I will leave you the task to consider how it will affect 
> the other
> part of the OGR library. But I like this idea as being the warrior
> against unnecessary
> allocations and static variables.

Excellent.  Lets go with this process.

By the way, the documentation for methods like exportToWkt() should make
it clear that the call gets ownership of the returned string.  For methods
that return a "const char *" and that don't talk about ownership, it should
be assumed that this is a pointer to an internal string that should not
be altered by the caller and that may be altered in the future.

>>   5) I'd like to see a section in the RFC describing the test suite items
>>      you will add to the GDAL autotest.
>>
> 
> I'm afraid I'm not too familiar with GDAL autotest but I'm keen to dig 
> into it
> more deeply if i have time. But now I can provide only the data (in
> mapinfo format) and
> the SQL query samples if needed. Currently I am testing the code using
> step by step execution of ogrinfo in debug mode.

OK, I've added a note in the RFC on this topic, and will implement the test
script myself.  I've also taken the liberty of adding a section addressing
"who does what".

>>   6) I think the backward compatibility section of the RFC should mention
>>      that the new special fields will potentially conflict with regard
>>      fields with the given names, and to describe which will take 
>> precidence
>>      when there is a conflict.
>>
> 
> No problem with this either. I would suggest a preceding control
> character like '@' but it
> will break my existing mapfiles (~500)  ;-)

I don't mind there being a conflict as long as the circumstances are
clear.

I have also taken the liberty of adding a note in the RFC that the OGR SQL
document (gdal/ogr/ogr_sql.dox) needs to be updated, and changing the overall
name of the RFC to be briefer.  It should be updated on the web site by the
time this email arrives anywhere.

   http://www.gdal.org/rfc6_sqlgeom.html

I've left the rest of the updates to you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Wed Oct 25 13:19:45 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Import WorldClim data byte issue
Message-ID: <20061025171945.GA13801@bartok.itc.it>

hi,

we tried to import the worldclim tile data (generic format BIL)
from
http://www.worldclim.org/tiles.php

Unfortunately the result ranges from 0-65535.
The page http://www.worldclim.org/format.htm describes
"The data files (.BIL) are sequential binary files in which
 values are stored line by line from the upper-left to the
 lower-right corner. Each cell (pixel) is an integer value
 (2 bytes; -32768..32767).
"

Do I need postprocessing (such as r.mapcalc in GRASS) to
read these maps or is there another nice trick?

thanks
markus

From com at navicon.dk  Wed Oct 25 14:13:07 2006
From: com at navicon.dk (oland)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RE: swig/java dumps core
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C014B7930@IMCSRV1.MITRE.ORG>
References: <6993229.post@talk.nabble.com>
	<8D27E2CDAF11D34F97E7445BCCCDB92C014B7930@IMCSRV1.MITRE.ORG>
Message-ID: <6997341.post@talk.nabble.com>


Just tested the GDALtest app with the geotiffs from here 
http://www.hydro.gov.au/seafarer/geotiff/geotiff-sample/AUS00605.zip AUS
Hydro Tiffs  loading them in to the application causes

Exception in thread "main" java.lang.UnsupportedOperationException: This
method is not supported by this color model
        at java.awt.image.ColorModel.coerceData(ColorModel.java:1518)
        at java.awt.image.BufferedImage.coerceData(BufferedImage.java:1189)
        at java.awt.image.BufferedImage.<init>(BufferedImage.java:635)
        at GDALtest.openFile(GDALtest.java:303)
        at GDALtest.<init>(GDALtest.java:91)
        at GDALtest.main(GDALtest.java:345)

I tried altering the code at line 303 to:

	img = new BufferedImage(xsize, ysize,
						data_type, (IndexColorModel)cm);
        img.setData(raster);

That eliminated the exception but no image appeared?

Carsten
			


Collins, Benjamin wrote:
> 
> Carsten,
> 
> You are probably having problems with the retrieval of GCPs.  In order
> to make the retrieval as natural as possible in Java, I put the results
> in a Vector.  Since I have no files with GCPs sitting around to test
> this approach on, it remains mostly untested.  I can take a look at
> this problem if you have a sample that I can access.
> 
> --
> Ben Collins 
> 
>>-----Original Message-----
>>From: gdal-dev-bounces@lists.maptools.org 
>>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of oland
>>Sent: Wednesday, October 25, 2006 10:33 AM
>>To: gdal-dev@lists.maptools.org
>>Subject: [Gdal-dev] swig/java dumps core
>>
>>
>>Hello List
>>
>>I have built the swing/java bindings in gdal-1.3.2. When I try 
>>to run the
>>gdalinfo java app it dumps core see below.
>>
>>java -cp .:../gdal.jar -Djava.library.path=../.libs/ gdalinfo
>>/opt/Mapdata/BSB_ROOT/11006/11006_1.KAP
>>Driver: BSB/Maptech BSB Nautical Charts
>>Size is 10967, 9389
>>Coordinate System is:
>>
>>Origin = (0.0,0.0)
>>Pixel Size = (1.0,1.0)
>>  0.0, 1.0, 0.0
>>  0.0, 0.0, 1.0
>>GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>>84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0
>>,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORIT
>>Y["EPSG",8901]],UNIT["degree",0.0174532925199433,AUTHORITY["EPS
>>G",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
>>#
>># An unexpected error has been detected by HotSpot Virtual Machine:
>>#
>>#  SIGSEGV (0xb) at pc=0xb78475ff, pid=24875, tid=3085108928
>>#
>># Java VM: Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode)
>># Problematic frame:
>># V  [libjvm.so+0x1695ff]
>>#
>># An error report file with more information is saved as 
>>hs_err_pid24875.log
>>#
>># If you would like to submit a bug report, please visit:
>>#   http://java.sun.com/webapps/bugreport/crash.jsp
>>#
>>Abort
>>
>>Any hints?
>>
>>The error log can be seen here
>>
>>http://www.nabble.com/file/3845/hs_err_pid24875.log 
>>hs_err_pid24875.log 
>>
>>Carsten
>>-- 
>>View this message in context: 
>>http://www.nabble.com/swig-java-dumps-core-tf2507983.html#a6993229
>>Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@lists.maptools.org
>>http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/swig-java-dumps-core-tf2507983.html#a6997341
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mlepage at pyxisinnovation.com  Wed Oct 25 14:24:28 2006
From: mlepage at pyxisinnovation.com (Marc Lepage)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] GDAL 1.3.2 SWIG C# Bindings?
Message-ID: <8B5901C2B9E9094AA4028CF5E33980D7062FF9@aristotle.PyxisInnovation.local>

Hi all.

 

I've tried to build the gdal-1.3.2 SWIG bindings for csharp, which
generate, but fail on C# compilation as noted below.

 

Basically, I think SpatialReference is put in the OSR namespace, but not
scoped (and therefore inaccessible) from the OGR namespace. I don't see
anything in the SWIG interface files or makefiles that would make this
work, but admittedly I'm a SWIG newbie. (Actually, I was rather hoping
to do something similar with namespaces in another project I am wrapping
with SWIG, and therefore curious as to how GDAL accomplished this.)

 

Should this work? Or am I doing something wrong? Thanks.

 

 

csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs

Microsoft (R) Visual C# 2005 Compiler version 8.00.50727.42

for Microsoft (R) Windows (R) 2005 Framework version 2.0.50727

Copyright (C) Microsoft Corporation 2001-2005. All rights reserved.

ogr\DataSource.cs(78,41): error CS0246: The type or namespace name

        'SpatialReference' could not be found (are you missing a using
directive

        or an assembly reference?)

ogr\Geometry.cs(219,26): error CS0246: The type or namespace name

        'SpatialReference' could not be found (are you missing a using
directive

        or an assembly reference?)

ogr\Geometry.cs(224,24): error CS0246: The type or namespace name

        'CoordinateTransformation' could not be found (are you missing a
using

        directive or an assembly reference?)

ogr\Geometry.cs(229,10): error CS0246: The type or namespace name

        'SpatialReference' could not be found (are you missing a using
directive

        or an assembly reference?)

ogr\Geometry.cs(235,38): error CS0246: The type or namespace name

        'SpatialReference' could not be found (are you missing a using
directive

        or an assembly reference?)

ogr\Layer.cs(147,10): error CS0246: The type or namespace name

        'SpatialReference' could not be found (are you missing a using
directive

        or an assembly reference?)

ogr\ogr.cs(15,57): error CS0246: The type or namespace name
'SpatialReference'

        could not be found (are you missing a using directive or an
assembly

        reference?)

ogr\ogr.cs(21,71): error CS0246: The type or namespace name
'SpatialReference'

        could not be found (are you missing a using directive or an
assembly

        reference?)

NMAKE : fatal error U1077:
'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.EX

E' : return code '0x1'

Stop.

NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
8\VC\BIN\n

make.EXE"' : return code '0x2'

Stop.

 

-- 

Marc Lepage

the PYXIS innovation - common ground for digital earth

www.pyxisinnovation.com <http://www.pyxisinnovation.com/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061025/b3c242b2/attachment.html
From brian at thetimoneygroup.com  Wed Oct 25 14:46:37 2006
From: brian at thetimoneygroup.com (Brian Timoney)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] -spat switch in ogr2ogr
In-Reply-To: <453EE607.1000609@pobox.com>
References: <453DA47C.8060205@thetimoneygroup.com> <453EE607.1000609@pobox.com>
Message-ID: <453FB10D.2000308@thetimoneygroup.com>

Frank Warmerdam wrote:
> Brian Timoney wrote:
>>
>> All:
>>
>> At the risk of disproving the adage that the only dumb question is 
>> the one left unasked, I'm having some trouble applying the -spat 
>> switch using ogr2ogr from the command line.
>>
>> I have a table of US cities in PostGIS called..."cities" in lat/long 
>> NAD 83 (EPSG:4269)
>>
>> I want to pull cities from the middle of the country from a BBOX of  
>> (-114,30,-100,45) and throw them into a new shapefile.
>>
>> So I hazarded...
>>
>> ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat '-114 30 
>> -100 45'
>>
>> No dice (empty shapefile).  There are 75+ features that fall inside 
>> the bounding box.
>>
>> I've also tried double quotes and no quotes around the xmin ymin xmax 
>> ymax values.
>
> Brian,
>
> It should work with:
>
>  ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat -114 30 
> -100 45
>
> Would it be fair for me to guess that the following works fine?
>
>  ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities
>
> So if my suggested approach (no quotes on -spat argument) doesn't 
> work, then
> I'm at a bit of a loss.  I guess I'd have to actually test things at 
> my end!
>
> By the way, you might want to set the CPL_DEBUG environment variable 
> to ON.
> This will produce various debug output of the actual SQL being sent to
> postgis.  This might give clues.
>
> Best regards,

Frank:

OK, switching the debugging on--

$ CPL_DEBUG=ON ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities 
-spat -114 30 -100 45

Gave me what ogr2ogr is passing to PostGIS.  The key part is the WHERE 
statement--

WHERE the_geom && GeometryFromText('BOX3D(-114.000000 
30.000000,-100.00000 45.000000)'::box3d,-2))

I fooled around replicating the WHERE statement in PgAdmin's SQL window 
and ran into the following issues--

1)  The GeometryFromText function no longer honors 'BOX3D'

http://postgis.refractions.net/pipermail/postgis-users/2005-July/008631.html

2)  Following the suggestion above, I tried

WHERE the_geom && SetSRID('BOX3D(-114 30,-100 45)::box3d,-1)

and received an error for "Operation on two geometries with different SRIDs"

3)  Since my PostGIS table has an SRID of 4269, I tried

WHERE the_geom && SetSRID('BOX3D(-114 30,-100 45)::box3d,4269)

and everything worked swimmingly....


I hope the above helps,


Brian





-- 













-----------------------
The Timoney Group
518 17th Street 
Suite 980
Denver, CO 80202

Ph:  (303) 929-3722
Fax: (303) 571-4304

www.thetimoneygroup.com
-----------------------


From ben at vterrain.org  Wed Oct 25 15:12:47 2006
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <453F6FA0.3070807@perkins.net>
Message-ID: <006801c6f869$8ee93320$6501a8c0@DellWork>

>  do you build GDAL and then manually copy the DLLs 
> from the release or debug directories (as appropriate) into 
> a common  directory that is on your PATH?  Or do you modify
> the GDAL build configurations so that both debug and release
> versions get built in the same directory

Simon,

Have you tried using the gdal sln/vcproj files, provided on our page, which
gdal.org links to in the GDAL build instruction?

http://vterrain.org/Distrib/gdal.html

You'll find that there is no manual copy (certainly not :) but instead a
'post-build step' which puts the DLLs into gdal\distro\bin, and the LIBs
into gdal\distro\lib.

This way, you only have to build GDAL once, when there is a new release.
You point your system PATH to distro\bin, your VC libpath tp distro\lib, and
you're set.

Or (if you're not picky about GDAL's configuration) you can just download
the GDAL 'distro', from that same page, and avoid the whole process of
building it.

-Ben


From sy at perkins.net  Wed Oct 25 15:14:06 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <026101c6f844$d51f2310$3301a8c0@vaio>
References: <026101c6f844$d51f2310$3301a8c0@vaio>
Message-ID: <1161803646.27852.274216558@webmail.messagingengine.com>


Hi,

Yep, that's a possible approach. Still, it does require me to remember
to copy those DLLs to whatever application debug and release directories
I'm currently working on. If I have more than one application (in
different solutions), that depend upon the GDAL, then I have to remember
to copy the DLLs to all applications that might need it.

Currently, what I do is have a little script that copies DLLs from my
GDAL release and debug build directories into a central location (e.g.
c:\dev\usr\bin) that is on my path. That central location also acts as a
convenient staging area for all the things that are eventually going to
get wrapped up into a windows installer.

Cheers,

Sy


On Wed, 25 Oct 2006 07:49:54 -0700, "Craig Miller"
<craig.miller@spatialminds.com> said:
> Personally I copy the files into my applications Debug/Release directory.
> That way I know for sure what versions of the DLLs are being used by my
> application.  Just one way to help manage DLL hell.
> 
> It also means that I can use experimental or unstable versions of 3rd
> party
> DLLs in my development application while using stable release versions
> with
> installed software.
> 
> --Craig
> 
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simon Perkins
> Sent: Wednesday, October 25, 2006 7:02 AM
> To: Ben Discoe
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
> 
> Ben Discoe wrote:
> > Not to flog a dead horse here, but i do have something useful to add:
> >   
> 
> Oh, there's a little life in this horse still... :)
> 
> > You can put your debug and release DLLs (e.g. gdal.dll and gdald.dll) 
> > in the same folder on your path so there is nothing to switch.
> >   
> 
> Yes, I see that the naming convention idea does help significantly here. 
> One question: do you build GDAL and then manually copy the DLLs from the
> release or debug directories (as appropriate) into a common directory
> that
> is on your PATH? Or do you modify the GDAL build configurations so that
> both
> debug and release versions get built in the same directory, and then put
> _that_ on your path (if that is even possible)? I'm just trying to
> automate
> as much as possible...
> 
> Cheers,
> 
> Sy
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

From sy at perkins.net  Wed Oct 25 16:01:02 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Visual Studio 2005, GDAL and Manifests
In-Reply-To: <006801c6f869$8ee93320$6501a8c0@DellWork>
References: <006801c6f869$8ee93320$6501a8c0@DellWork>
Message-ID: <1161806462.358.274220440@webmail.messagingengine.com>

Hi,

Thanks to everyone for the discussion on this matter - it's cleared up
several issues for me as to how to make this Visual Studio thing work.
Guess I didn't look at Ben's project files quite as closely as I should
have...

Cheers,

Sy



On Wed, 25 Oct 2006 09:12:47 -1000, "Ben Discoe" <ben@vterrain.org>
said:
> >  do you build GDAL and then manually copy the DLLs 
> > from the release or debug directories (as appropriate) into 
> > a common  directory that is on your PATH?  Or do you modify
> > the GDAL build configurations so that both debug and release
> > versions get built in the same directory
> 
> Simon,
> 
> Have you tried using the gdal sln/vcproj files, provided on our page,
> which
> gdal.org links to in the GDAL build instruction?
> 
> http://vterrain.org/Distrib/gdal.html
> 
> You'll find that there is no manual copy (certainly not :) but instead a
> 'post-build step' which puts the DLLs into gdal\distro\bin, and the LIBs
> into gdal\distro\lib.
> 
> This way, you only have to build GDAL once, when there is a new release.
> You point your system PATH to distro\bin, your VC libpath tp distro\lib,
> and
> you're set.
> 
> Or (if you're not picky about GDAL's configuration) you can just download
> the GDAL 'distro', from that same page, and avoid the whole process of
> building it.
> 
> -Ben
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From szekerest at gmail.com  Wed Oct 25 16:15:48 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] GDAL 1.3.2 SWIG C# Bindings?
In-Reply-To: <8B5901C2B9E9094AA4028CF5E33980D7062FF9@aristotle.PyxisInnovation.local>
References: <8B5901C2B9E9094AA4028CF5E33980D7062FF9@aristotle.PyxisInnovation.local>
Message-ID: <f3b73b7d0610251315y1450285cy749168c01f9ab716@mail.gmail.com>

Hi,

I would encourage you to use the latest CVS version. There were some fundamental
changes since 1.3.2 to make the things work.

You might run into the same issue described at:
http://bugzilla.remotesensing.org/show_bug.cgi?id=949

Some parts of the GDAL C# is still incomplete, I hope we can get them
work for the next release.


Best Regards,


Tamas Szekeres


2006/10/25, Marc Lepage <mlepage@pyxisinnovation.com>:
>
>
>
>
> Hi all.
>
>
>
> I've tried to build the gdal-1.3.2 SWIG bindings for csharp, which generate,
> but fail on C# compilation as noted below.
>
>
>
> Basically, I think SpatialReference is put in the OSR namespace, but not
> scoped (and therefore inaccessible) from the OGR namespace. I don't see
> anything in the SWIG interface files or makefiles that would make this work,
> but admittedly I'm a SWIG newbie. (Actually, I was rather hoping to do
> something similar with namespaces in another project I am wrapping with
> SWIG, and therefore curious as to how GDAL accomplished this.)
>
>
>
> Should this work? Or am I doing something wrong? Thanks.
>
>
>
>
>
> csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs
>
> Microsoft (R) Visual C# 2005 Compiler version 8.00.50727.42
>
> for Microsoft (R) Windows (R) 2005 Framework version 2.0.50727
>
> Copyright (C) Microsoft Corporation 2001-2005. All rights reserved.
>
> ogr\DataSource.cs(78,41): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Geometry.cs(219,26): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Geometry.cs(224,24): error CS0246: The type or namespace name
>
>         'CoordinateTransformation' could not be found (are you missing a
> using
>
>         directive or an assembly reference?)
>
> ogr\Geometry.cs(229,10): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Geometry.cs(235,38): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Layer.cs(147,10): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\ogr.cs(15,57): error CS0246: The type or namespace name
> 'SpatialReference'
>
>         could not be found (are you missing a using directive or an assembly
>
>         reference?)
>
> ogr\ogr.cs(21,71): error CS0246: The type or namespace name
> 'SpatialReference'
>
>         could not be found (are you missing a using directive or an assembly
>
>         reference?)
>
> NMAKE : fatal error U1077:
> 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.EX
>
> E' : return code '0x1'
>
> Stop.
>
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 8\VC\BIN\n
>
> make.EXE"' : return code '0x2'
>
> Stop.
>
>
>
> --
>
> Marc Lepage
>
> the PYXIS innovation - common ground for digital earth
>
> www.pyxisinnovation.com
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>

From warmerdam at pobox.com  Wed Oct 25 16:31:15 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] -spat switch in ogr2ogr
In-Reply-To: <453FB10D.2000308@thetimoneygroup.com>
References: <453DA47C.8060205@thetimoneygroup.com> <453EE607.1000609@pobox.com>
	<453FB10D.2000308@thetimoneygroup.com>
Message-ID: <453FC993.8000904@pobox.com>

Brian Timoney wrote:
> Frank Warmerdam wrote:
>> Brian Timoney wrote:
>>>
>>> All:
>>>
>>> At the risk of disproving the adage that the only dumb question is 
>>> the one left unasked, I'm having some trouble applying the -spat 
>>> switch using ogr2ogr from the command line.
>>>
>>> I have a table of US cities in PostGIS called..."cities" in lat/long 
>>> NAD 83 (EPSG:4269)
>>>
>>> I want to pull cities from the middle of the country from a BBOX of  
>>> (-114,30,-100,45) and throw them into a new shapefile.
>>>
>>> So I hazarded...
>>>
>>> ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat '-114 30 
>>> -100 45'
>>>
>>> No dice (empty shapefile).  There are 75+ features that fall inside 
>>> the bounding box.
>>>
>>> I've also tried double quotes and no quotes around the xmin ymin xmax 
>>> ymax values.
>>
>> Brian,
>>
>> It should work with:
>>
>>  ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities -spat -114 30 
>> -100 45
>>
>> Would it be fair for me to guess that the following works fine?
>>
>>  ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities
>>
>> So if my suggested approach (no quotes on -spat argument) doesn't 
>> work, then
>> I'm at a bit of a loss.  I guess I'd have to actually test things at 
>> my end!
>>
>> By the way, you might want to set the CPL_DEBUG environment variable 
>> to ON.
>> This will produce various debug output of the actual SQL being sent to
>> postgis.  This might give clues.
>>
>> Best regards,
> 
> Frank:
> 
> OK, switching the debugging on--
> 
> $ CPL_DEBUG=ON ogr2ogr mid_city.shp PG:'dbname=mydb user=me' cities 
> -spat -114 30 -100 45
> 
> Gave me what ogr2ogr is passing to PostGIS.  The key part is the WHERE 
> statement--
> 
> WHERE the_geom && GeometryFromText('BOX3D(-114.000000 
> 30.000000,-100.00000 45.000000)'::box3d,-2))
> 
> I fooled around replicating the WHERE statement in PgAdmin's SQL window 
> and ran into the following issues--
> 
> 1)  The GeometryFromText function no longer honors 'BOX3D'
> 
> http://postgis.refractions.net/pipermail/postgis-users/2005-July/008631.html 
> 
> 
> 2)  Following the suggestion above, I tried
> 
> WHERE the_geom && SetSRID('BOX3D(-114 30,-100 45)::box3d,-1)
> 
> and received an error for "Operation on two geometries with different 
> SRIDs"
> 
> 3)  Since my PostGIS table has an SRID of 4269, I tried
> 
> WHERE the_geom && SetSRID('BOX3D(-114 30,-100 45)::box3d,4269)
> 
> and everything worked swimmingly....

Brian,

OK, there are two issues here.  One is that the SRID was wrong.  The value
-2 is a special marker kept around till the SRID can be looked up.  The
looking up was broken (recently?) and this may have been the cause of that
problem.  the other issue is use of SetSRID(...) and that seems to have been
fixed in the development version of the code too, though I can't see exactly
when from the log messages.

An ogrinfo with -spat for me does:
OGR_PG: PQexec(DECLARE OGRPGLayerReader CURSOR for SELECT "ogc_fid", 
AsEWKT("wkb_geometry"), "city", "id", "mapid", "milltype", "mslink", "owner", 
"state", "yrly_capacity" FROM "Mills" WHERE wkb_geometry && 
SetSRID('BOX3D(831000.000000000000 3525000.000000000000, 832000.000000000000 
3526000.000000000000)'::box3d,32767) )

and works right.

Would you possibly be willing to try a GDAL night cvs snapshot and see if it
works properly for you?  If not I'd appreciate your filing a bug and I can
look into it more deeply.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mlepage at pyxisinnovation.com  Wed Oct 25 17:16:27 2006
From: mlepage at pyxisinnovation.com (Marc Lepage)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] GDAL 1.3.2 SWIG C# Bindings?
In-Reply-To: <f3b73b7d0610251315y1450285cy749168c01f9ab716@mail.gmail.com>
Message-ID: <8B5901C2B9E9094AA4028CF5E33980D7063010@aristotle.PyxisInnovation.local>

Yes it does seem to be the same issue reported in that bug. The fix
noted there is to effectively bundle all of OSR in with OGR. I was
hoping to learn of a more elegant solution to the namespace issue. :-)

With regards to the getCPtr issue, that can be solved by providing a
SWIG typemap for csbody to change its access protection from internal to
public, as noted earlier today on the swig-users mailing list. But this
isn't necessary when it's all in the same assembly.


-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: Wednesday, October 25, 2006 4:16 PM
To: Marc Lepage
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] GDAL 1.3.2 SWIG C# Bindings?

Hi,

I would encourage you to use the latest CVS version. There were some
fundamental
changes since 1.3.2 to make the things work.

You might run into the same issue described at:
http://bugzilla.remotesensing.org/show_bug.cgi?id=949

Some parts of the GDAL C# is still incomplete, I hope we can get them
work for the next release.


Best Regards,


Tamas Szekeres


2006/10/25, Marc Lepage <mlepage@pyxisinnovation.com>:
>
>
>
>
> Hi all.
>
>
>
> I've tried to build the gdal-1.3.2 SWIG bindings for csharp, which
generate,
> but fail on C# compilation as noted below.
>
>
>
> Basically, I think SpatialReference is put in the OSR namespace, but
not
> scoped (and therefore inaccessible) from the OGR namespace. I don't
see
> anything in the SWIG interface files or makefiles that would make this
work,
> but admittedly I'm a SWIG newbie. (Actually, I was rather hoping to do
> something similar with namespaces in another project I am wrapping
with
> SWIG, and therefore curious as to how GDAL accomplished this.)
>
>
>
> Should this work? Or am I doing something wrong? Thanks.
>
>
>
>
>
> csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs
>
> Microsoft (R) Visual C# 2005 Compiler version 8.00.50727.42
>
> for Microsoft (R) Windows (R) 2005 Framework version 2.0.50727
>
> Copyright (C) Microsoft Corporation 2001-2005. All rights reserved.
>
> ogr\DataSource.cs(78,41): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Geometry.cs(219,26): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Geometry.cs(224,24): error CS0246: The type or namespace name
>
>         'CoordinateTransformation' could not be found (are you missing
a
> using
>
>         directive or an assembly reference?)
>
> ogr\Geometry.cs(229,10): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Geometry.cs(235,38): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\Layer.cs(147,10): error CS0246: The type or namespace name
>
>         'SpatialReference' could not be found (are you missing a using
> directive
>
>         or an assembly reference?)
>
> ogr\ogr.cs(15,57): error CS0246: The type or namespace name
> 'SpatialReference'
>
>         could not be found (are you missing a using directive or an
assembly
>
>         reference?)
>
> ogr\ogr.cs(21,71): error CS0246: The type or namespace name
> 'SpatialReference'
>
>         could not be found (are you missing a using directive or an
assembly
>
>         reference?)
>
> NMAKE : fatal error U1077:
> 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.EX
>
> E' : return code '0x1'
>
> Stop.
>
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 8\VC\BIN\n
>
> make.EXE"' : return code '0x2'
>
> Stop.
>
>
>
> --
>
> Marc Lepage
>
> the PYXIS innovation - common ground for digital earth
>
> www.pyxisinnovation.com
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From szekerest at gmail.com  Wed Oct 25 17:40:11 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] GDAL 1.3.2 SWIG C# Bindings?
In-Reply-To: <8B5901C2B9E9094AA4028CF5E33980D7063010@aristotle.PyxisInnovation.local>
References: <f3b73b7d0610251315y1450285cy749168c01f9ab716@mail.gmail.com>
	<8B5901C2B9E9094AA4028CF5E33980D7063010@aristotle.PyxisInnovation.local>
Message-ID: <f3b73b7d0610251440q213a7882n92d17b38562a3ef0@mail.gmail.com>

Since OGR handles those OSR classes for internal use there's not too
much sense to
to separate them into different assemblies. If you want to use OSR
solely then you may use the gdal_osr_csharp otherwise use the
gdal_ogr_csharp assembly. One should avoid setting up C# specific
typemaps to make getCPtr of some of the classes public.

The changes mentioned at the bug (along with many other changes) are
already in the CVS head. Feel free to checkout and see how it works
for you.

Best Regards,

Tamas Szekeres



2006/10/25, Marc Lepage <mlepage@pyxisinnovation.com>:
> Yes it does seem to be the same issue reported in that bug. The fix
> noted there is to effectively bundle all of OSR in with OGR. I was
> hoping to learn of a more elegant solution to the namespace issue. :-)
>
> With regards to the getCPtr issue, that can be solved by providing a
> SWIG typemap for csbody to change its access protection from internal to
> public, as noted earlier today on the swig-users mailing list. But this
> isn't necessary when it's all in the same assembly.
>
>
> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: Wednesday, October 25, 2006 4:16 PM
> To: Marc Lepage
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] GDAL 1.3.2 SWIG C# Bindings?
>
> Hi,
>
> I would encourage you to use the latest CVS version. There were some
> fundamental
> changes since 1.3.2 to make the things work.
>
> You might run into the same issue described at:
> http://bugzilla.remotesensing.org/show_bug.cgi?id=949
>
> Some parts of the GDAL C# is still incomplete, I hope we can get them
> work for the next release.
>
>
> Best Regards,
>
>
> Tamas Szekeres
>
>
> 2006/10/25, Marc Lepage <mlepage@pyxisinnovation.com>:
> >
> >
> >
> >
> > Hi all.
> >
> >
> >
> > I've tried to build the gdal-1.3.2 SWIG bindings for csharp, which
> generate,
> > but fail on C# compilation as noted below.
> >
> >
> >
> > Basically, I think SpatialReference is put in the OSR namespace, but
> not
> > scoped (and therefore inaccessible) from the OGR namespace. I don't
> see
> > anything in the SWIG interface files or makefiles that would make this
> work,
> > but admittedly I'm a SWIG newbie. (Actually, I was rather hoping to do
> > something similar with namespaces in another project I am wrapping
> with
> > SWIG, and therefore curious as to how GDAL accomplished this.)
> >
> >
> >
> > Should this work? Or am I doing something wrong? Thanks.
> >
> >
> >
> >
> >
> > csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs
> >
> > Microsoft (R) Visual C# 2005 Compiler version 8.00.50727.42
> >
> > for Microsoft (R) Windows (R) 2005 Framework version 2.0.50727
> >
> > Copyright (C) Microsoft Corporation 2001-2005. All rights reserved.
> >
> > ogr\DataSource.cs(78,41): error CS0246: The type or namespace name
> >
> >         'SpatialReference' could not be found (are you missing a using
> > directive
> >
> >         or an assembly reference?)
> >
> > ogr\Geometry.cs(219,26): error CS0246: The type or namespace name
> >
> >         'SpatialReference' could not be found (are you missing a using
> > directive
> >
> >         or an assembly reference?)
> >
> > ogr\Geometry.cs(224,24): error CS0246: The type or namespace name
> >
> >         'CoordinateTransformation' could not be found (are you missing
> a
> > using
> >
> >         directive or an assembly reference?)
> >
> > ogr\Geometry.cs(229,10): error CS0246: The type or namespace name
> >
> >         'SpatialReference' could not be found (are you missing a using
> > directive
> >
> >         or an assembly reference?)
> >
> > ogr\Geometry.cs(235,38): error CS0246: The type or namespace name
> >
> >         'SpatialReference' could not be found (are you missing a using
> > directive
> >
> >         or an assembly reference?)
> >
> > ogr\Layer.cs(147,10): error CS0246: The type or namespace name
> >
> >         'SpatialReference' could not be found (are you missing a using
> > directive
> >
> >         or an assembly reference?)
> >
> > ogr\ogr.cs(15,57): error CS0246: The type or namespace name
> > 'SpatialReference'
> >
> >         could not be found (are you missing a using directive or an
> assembly
> >
> >         reference?)
> >
> > ogr\ogr.cs(21,71): error CS0246: The type or namespace name
> > 'SpatialReference'
> >
> >         could not be found (are you missing a using directive or an
> assembly
> >
> >         reference?)
> >
> > NMAKE : fatal error U1077:
> > 'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.EX
> >
> > E' : return code '0x1'
> >
> > Stop.
> >
> > NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> > 8\VC\BIN\n
> >
> > make.EXE"' : return code '0x2'
> >
> > Stop.
> >
> >
> >
> > --
> >
> > Marc Lepage
> >
> > the PYXIS innovation - common ground for digital earth
> >
> > www.pyxisinnovation.com
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >
>

From warmerdam at pobox.com  Wed Oct 25 21:13:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Import WorldClim data byte issue
In-Reply-To: <20061025171945.GA13801@bartok.itc.it>
References: <20061025171945.GA13801@bartok.itc.it>
Message-ID: <45400BBE.3030309@pobox.com>

Markus Neteler wrote:
> hi,
> 
> we tried to import the worldclim tile data (generic format BIL)
> from
> http://www.worldclim.org/tiles.php
> 
> Unfortunately the result ranges from 0-65535.
> The page http://www.worldclim.org/format.htm describes
> "The data files (.BIL) are sequential binary files in which
>  values are stored line by line from the upper-left to the
>  lower-right corner. Each cell (pixel) is an integer value
>  (2 bytes; -32768..32767).
> "
> 
> Do I need postprocessing (such as r.mapcalc in GRASS) to
> read these maps or is there another nice trick?

Markus,

The EHDR (ESRI .HDR labelled BIL) driver now supports a keyword in
the file called PIXELTYPE which can have values like SIGNEDINT,
UNSIGNEDINT or FLOATINGPOINT.  So just add a line like the following in
the .hdr file.

PIXELTYPE SIGNEDINT

Future versions of ArcGIS, and possibly 9.2 should also honour this
keyword.  The capability was included in GDAL 1.3.2.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Oct 26 00:53:18 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
Message-ID: <45403F3E.307@pobox.com>

Folks,

For some time now, I've been intending to write up guidelines for GDAL/OGR
commiters.  I have finally done so:

   http://www.gdal.org/rfc3_commiters.html

I'd appreciate any feedback, or if there are no objections, statements of
support for the proposal.  There is a fairly extensive list of existing
commiters.  I presume several of them will not desire to remain commiters
since they have not been active for some time.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dieter.lehmann at hfwu.de  Thu Oct 26 02:40:55 2006
From: dieter.lehmann at hfwu.de (Dieter Lehmann)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Import WorldClim data byte issue
In-Reply-To: <20061025171945.GA13801@bartok.itc.it>
References: <20061025171945.GA13801@bartok.itc.it>
Message-ID: <20061026084055.ua6ummdoafxko4w0@mail.hfwu.de>

Hi Markus,
some time ago I get stucked with the same issue. I wrote to Robert and  
got this
answer...where a reclass is recomended.

Dieter

------------------------------------------------------
Well, this points at a familiar problem.
16-bit (2 byte) integer data can store  65536 numbers
Normally, an integer value of this type can therefore be between
-32768..32767
But it can also represent a "word", i.e. a value between 0 - 65535

if a program confuses one type with the other, like I think happened in
this case, -1 becomes 66535, -2 becomes 66534, etc. 66615 should really be
-20.

So a reclass like

if (oldvalue > 23768)
    then newvalue = 66535 - value
    else newvalue - oldvalue

should correct this.

------------------------------------------------





Quoting Markus Neteler <neteler@itc.it>:

> hi,
>
> we tried to import the worldclim tile data (generic format BIL)
> from
> http://www.worldclim.org/tiles.php
>
> Unfortunately the result ranges from 0-65535.
> The page http://www.worldclim.org/format.htm describes
> "The data files (.BIL) are sequential binary files in which
>  values are stored line by line from the upper-left to the
>  lower-right corner. Each cell (pixel) is an integer value
>  (2 bytes; -32768..32767).
> "
>
> Do I need postprocessing (such as r.mapcalc in GRASS) to
> read these maps or is there another nice trick?
>
> thanks
> markus
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-----------------------------------
Dipl. Ing. (FH) Dieter Lehmann (MAS)
Rechenzentrum HfWU
Tel. 07022-404-235
dieter.lehmann@hfwu.de


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.



From com at navicon.dk  Thu Oct 26 03:02:59 2006
From: com at navicon.dk (oland)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/java dumps core
In-Reply-To: <6993229.post@talk.nabble.com>
References: <6993229.post@talk.nabble.com>
Message-ID: <7006154.post@talk.nabble.com>


Just more info on the GDALtest app. Running it on 
http://dl.maptools.org/dl/gdal/data/gxf/latlong.gxf latlon.gfx  causes the
following exception

Projection is `GEOGCS["GRS 1980",DATUM["GRS_1980",SPHEROID["GRS
1980",6378137,298.257222413682]],PRIMEM["unnamed",0],UNIT["degree",0.0174532925199433]]'
0 items of metadata found (via Hashtable dict):
0 items of metadata found (via Vector list):
Got 0 GCPs
Origin = (-63.4706495, 61.874544500000006)
Pixel Size = (5.63E-4, -5.63E-4)
 Data Type = Float32
 ColorInterp = Undefined
Band size is: 473x173
  No Min/Max values stored in raster.
Allocating ByteBuffer of size: 327316
Exception in thread "main" java.lang.NullPointerException: SampleModel and
DataBuffer cannot be null
        at java.awt.image.Raster.createWritableRaster(Raster.java:969)
        at GDALtest.openFile(GDALtest.java:292)
        at GDALtest.<init>(GDALtest.java:91)
        at GDALtest.main(GDALtest.java:345)

Carsten


oland wrote:
> 
> Hello List
> 
> I have built the swing/java bindings in gdal-1.3.2. When I try to run the
> gdalinfo java app it dumps core see below.
> 
> java -cp .:../gdal.jar -Djava.library.path=../.libs/ gdalinfo
> /opt/Mapdata/BSB_ROOT/11006/11006_1.KAP
> Driver: BSB/Maptech BSB Nautical Charts
> Size is 10967, 9389
> Coordinate System is:
> 
> Origin = (0.0,0.0)
> Pixel Size = (1.0,1.0)
>   0.0, 1.0, 0.0
>   0.0, 0.0, 1.0
> GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
> #
> # An unexpected error has been detected by HotSpot Virtual Machine:
> #
> #  SIGSEGV (0xb) at pc=0xb78475ff, pid=24875, tid=3085108928
> #
> # Java VM: Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode)
> # Problematic frame:
> # V  [libjvm.so+0x1695ff]
> #
> # An error report file with more information is saved as
> hs_err_pid24875.log
> #
> # If you would like to submit a bug report, please visit:
> #   http://java.sun.com/webapps/bugreport/crash.jsp
> #
> Abort
> 
> Any hints?
> 
> The error log can be seen here
> 
>  http://www.nabble.com/file/3845/hs_err_pid24875.log hs_err_pid24875.log 
> 
> Carsten
> 

-- 
View this message in context: http://www.nabble.com/swig-java-dumps-core-tf2507983.html#a7006154
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From neteler at itc.it  Thu Oct 26 04:25:28 2006
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Import WorldClim data byte issue
In-Reply-To: <20061026083915.x60yuiv73r4w0sww@mail.hfwu.de>
References: <20061025171945.GA13801@bartok.itc.it>
	<20061026083915.x60yuiv73r4w0sww@mail.hfwu.de>
Message-ID: <20061026082528.GC17811@bartok.itc.it>

Frank Warmerdam wrote:
> > Markus Neteler <neteler@itc.it> wrote:
> > >hi,
> > >
> > >we tried to import the worldclim tile data (generic format BIL)
> > >from
> > >http://www.worldclim.org/tiles.php
> > >
> > >Unfortunately the result ranges from 0-65535.
> > >The page http://www.worldclim.org/format.htm describes
> > >"The data files (.BIL) are sequential binary files in which
> > > values are stored line by line from the upper-left to the
> > > lower-right corner. Each cell (pixel) is an integer value
> > > (2 bytes; -32768..32767).
> > >"
> > >
> > >Do I need postprocessing (such as r.mapcalc in GRASS) to
> > >read these maps or is there another nice trick?
> > >
> > >thanks
> > >markus
>
>
> Markus,
> 
> The EHDR (ESRI .HDR labelled BIL) driver now supports a keyword in
> the file called PIXELTYPE which can have values like SIGNEDINT,
> UNSIGNEDINT or FLOATINGPOINT.  So just add a line like the following in
> the .hdr file.
> 
> PIXELTYPE SIGNEDINT
> 
> Future versions of ArcGIS, and possibly 9.2 should also honour this
> keyword.  The capability was included in GDAL 1.3.2.

Frank,

great, this works!

# being lazy (apparently the PIXELTYPE can appear anywhere in .hdr):
  echo "PIXELTYPE SIGNEDINT" >> tmean4_16.hdr
  gdalinfo -mm tmean4_16.bil
  ...
  Band 1 Block=3600x1 Type=Int16, ColorInterp=Undefined
      Computed Min/Max=-154.000,228.000
    NoData Value=-9999

# ... looks ok (temperatures are multiplied by 10)


# GRASS Import:
r.in.gdal tmean4_16.bil out=tmean4_16 -o
# ... now successful.

thanks,
Markus


From RMcCulley at county24.com  Thu Oct 26 11:43:12 2006
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Get Line Length
Message-ID: <8563B9D6767C904A912272A2D56548E4095EAC@vermilion.County24.local>

Hi All,

 

I'm trying to write a script that will calculate the total length of a
polyline shapefile using ogr in python.  I see in the ogr documentation
that both the OGRCurve and OGRLineString class support the method
get_Length().  The problem I'm having is that I can't figure out how to
get a linestring or curve object.  Here  is what I have so far:

 

shp = ogr.Open(gpsfilelocation)

lyr = shp.GetLayer()

totalLength = 0

for i in range(lyr.GetFeatureCount()):

            ftr = lyr.GetFeature(i)

            geom = lyr.GetGeometryRef()

            length = ?

            totalLength = totalLength + length

 

At this point I could iterate through the points of the geometry and
calculate the length of each segment, but using a get_Length() function
seems much more elegant.

 

How do I access the curve or linestring class to calculate the length?

 

Rob McCulley

GIS Coordinator

County of Vermilion River No. 24

(780) 846-2244

www.vermilion-river.ab.ca

 


-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.
MailScanner thanks transtec Computers for their support.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061026/d4bfb022/attachment.html
From warmerdam at pobox.com  Thu Oct 26 12:30:34 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Get Line Length
In-Reply-To: <8563B9D6767C904A912272A2D56548E4095EAC@vermilion.County24.local>
References: <8563B9D6767C904A912272A2D56548E4095EAC@vermilion.County24.local>
Message-ID: <4540E2AA.2030408@pobox.com>

Rob McCulley wrote:
> Hi All,
> 
>  
> 
> I?m trying to write a script that will calculate the total length of a 
> polyline shapefile using ogr in python.  I see in the ogr documentation 
> that both the OGRCurve and OGRLineString class support the method 
> get_Length().  The problem I?m having is that I can?t figure out how to 
> get a linestring or curve object.  Here  is what I have so far:
> 
>  
> 
> shp = ogr.Open(gpsfilelocation)
> 
> lyr = shp.GetLayer()
> 
> totalLength = 0
> 
> for i in range(lyr.GetFeatureCount()):
> 
>             ftr = lyr.GetFeature(i)
> 
>             geom = lyr.GetGeometryRef()
> 
>             length = ?
> 
>             totalLength = totalLength + length
> 
>  
> 
> At this point I could iterate through the points of the geometry and 
> calculate the length of each segment, but using a get_Length() function 
> seems much more elegant.

Rob,

I'm afraid that get_Length() is not currently exposed to python.

The python (and other mapscript bindings and OGR C API) arranged
such that you work only with OGRGeometry handles - you can't turn
these into specific geometry classes though underneath they are
of course of a particular class.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Christian.Ratliff at delorme.com  Thu Oct 26 13:23:59 2006
From: Christian.Ratliff at delorme.com (Christian Ratliff)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] SDE Driver Change
Message-ID: <AE33BBD284E832478242F2E6AABA1E1B01F1C11A@franklin.earth.delorme.com>

 
  During the QA process for our product, we noticed polygons were being
read from ARC/SDE with a reversed (left hand) winding.  This results in
isClockwise() returning the wrong value for all such polygons.  I
updated the SDE driver with the change indicated below and then
re-tested SDE and non-SDE data sources.  Everything looks good now:
 
src/ogr/ogrsf_formats/sde/ogrsdelayer.cpp
719c723
<     nSDEErr = SE_shape_get_all_points( hShape, SE_DEFAULT_ROTATION, 
---
>     nSDEErr = SE_shape_get_all_points( hShape, SE_RIGHT_HAND_ROTATION,

 
christian
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061026/996b4da9/attachment.html
From warmerdam at pobox.com  Thu Oct 26 14:15:02 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] SDE Driver Change
In-Reply-To: <AE33BBD284E832478242F2E6AABA1E1B01F1C11A@franklin.earth.delorme.com>
References: <AE33BBD284E832478242F2E6AABA1E1B01F1C11A@franklin.earth.delorme.com>
Message-ID: <4540FB26.3090503@pobox.com>

Christian Ratliff wrote:
>  
>   During the QA process for our product, we noticed polygons were being 
> read from ARC/SDE with a reversed (left hand) winding.  This results in 
> isClockwise() returning the wrong value for all such polygons.  I 
> updated the SDE driver with the change indicated below and then 
> re-tested SDE and non-SDE data sources.  Everything looks good now:
>  
> src/ogr/ogrsf_formats/sde/ogrsdelayer.cpp
> 719c723
> <     nSDEErr = SE_shape_get_all_points( hShape, SE_DEFAULT_ROTATION,
> ---
>>     nSDEErr = SE_shape_get_all_points( hShape, SE_RIGHT_HAND_ROTATION,

Christian,

There is no harm in doing this, but I would note that OGRPolygon rings
are not guaranteed to have any particular handedness.  So it is unwise
to build application on this assumption.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Oct 26 16:13:59 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <45403F3E.307@pobox.com>
References: <45403F3E.307@pobox.com>
Message-ID: <45411707.8050305@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> For some time now, I've been intending to write up guidelines for GDAL/OGR
> commiters.  I have finally done so:
> 
>   http://www.gdal.org/rfc3_commiters.html
> 
> I'd appreciate any feedback, or if there are no objections, statements of
> support for the proposal.  There is a fairly extensive list of existing
> commiters.  I presume several of them will not desire to remain commiters
> since they have not been active for some time.

For me, everything is clear in this RFC.
I'd only propose to add one statement to the "SVN Commit Practices" section:

- Keep every SVN branch compilable


Are you going to describe branching policy and guidelines as well?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From schut at sarvision.nl  Fri Oct 27 06:09:04 2006
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal-python and numpy
Message-ID: <4541DAC0.6070401@sarvision.nl>

Hello list,

Numpy 1.0 has been released!
I haven't heard any news on the porting of gdal-python from numeric to 
numpy for a long time... Could someone enlighten me? I'd love to have a 
numpy-based gdal.py...

Vincent.

From Christian.Ratliff at delorme.com  Fri Oct 27 08:47:13 2006
From: Christian.Ratliff at delorme.com (Christian Ratliff)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] SDE Driver Change
In-Reply-To: <4540FB26.3090503@pobox.com>
Message-ID: <AE33BBD284E832478242F2E6AABA1E1B01F1C1E4@franklin.earth.delorme.com>


  Perhaps you can help me figure out this puzzle. In a multi-polygon,
from what I can find, the OGRLinearRing::isClockwise() function is the
way to determine if a ring is a contour (clockwise) or a hole
(counter-clockwise). When reading GML, MIF, TAB and SHP if isClockwise()
is true then the ring is a contour, otherwise it is a hole.  However,
when reading from ARC/SDE the behavior was opposite.

  I would rather avoid encoding knowledge of the data source in to the
OGR geometry processor code, up in my application.  Except for that
option, how is one to determine the implication of isClockwise() or
perhaps I totally flubbed and missed a 'isHole()' method somewhere?

Thanks!
christian

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Thursday, October 26, 2006 2:15 PM
To: Christian Ratliff
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] SDE Driver Change

Christian Ratliff wrote:
>  
>   During the QA process for our product, we noticed polygons were 
> being read from ARC/SDE with a reversed (left hand) winding.  This 
> results in
> isClockwise() returning the wrong value for all such polygons.  I 
> updated the SDE driver with the change indicated below and then 
> re-tested SDE and non-SDE data sources.  Everything looks good now:
>  
> src/ogr/ogrsf_formats/sde/ogrsdelayer.cpp
> 719c723
> <     nSDEErr = SE_shape_get_all_points( hShape, SE_DEFAULT_ROTATION,
> ---
>>     nSDEErr = SE_shape_get_all_points( hShape, 
>> SE_RIGHT_HAND_ROTATION,

Christian,

There is no harm in doing this, but I would note that OGRPolygon rings
are not guaranteed to have any particular handedness.  So it is unwise
to build application on this assumption.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org




From dmorissette at mapgears.com  Fri Oct 27 09:32:21 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <45403F3E.307@pobox.com>
References: <45403F3E.307@pobox.com>
Message-ID: <45420A65.1010400@mapgears.com>

Frank Warmerdam wrote:
> Folks,
> 
> For some time now, I've been intending to write up guidelines for GDAL/OGR
> commiters.  I have finally done so:
> 
>   http://www.gdal.org/rfc3_commiters.html
> 

Looks good to me. I can't think of anything missing right now... well, 
except perhaps to add my name to the list of existing committers.  :)

BTW, this talks about SVN, not CVS. I assume this is because we'd move 
to SVN after OSGeo has completed its switch from Collabnet to its own 
infrastructure?

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From dron at ak4719.spb.edu  Fri Oct 27 09:56:46 2006
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <45403F3E.307@pobox.com>
References: <45403F3E.307@pobox.com>
Message-ID: <20061027135646.GA29194@ak4719.spb.edu>

On Thu, Oct 26, 2006 at 12:53:18AM -0400, Frank Warmerdam wrote:
> For some time now, I've been intending to write up guidelines for
> GDAL/OGR commiters.  I have finally done so:
> 
>   http://www.gdal.org/rfc3_commiters.html
> 
> I'd appreciate any feedback, or if there are no objections, statements
> of support for the proposal.  There is a fairly extensive list of
> existing commiters.  I presume several of them will not desire to
> remain commiters since they have not been active for some time.

That looks fine to me with except of the term 'stable branch'. I think
it should be a policy related to release numbering and SVN branching 
scheme, where it is supposed to be? Will it go in the separate RFC or be
added to RFC3 later?

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From bthoen at gisnet.com  Fri Oct 27 10:09:39 2006
From: bthoen at gisnet.com (Bill Thoen)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] SDE Driver Change
In-Reply-To: <AE33BBD284E832478242F2E6AABA1E1B01F1C1E4@franklin.earth.delorme.com>
References: <4540FB26.3090503@pobox.com>
	<AE33BBD284E832478242F2E6AABA1E1B01F1C1E4@franklin.earth.delorme.com>
Message-ID: <20061027140939.GA9451@www.gisnet.com>

Watch out for MIF and TAB files... In MapInfo formats there are no enforced
associations between interior rings ordered deosil or widdershins (or
clockwise/counterclockwise) and whether they are holes or
contours/islands. In fact, the first ring isn't necessarily the exterior
ring either (although it usually is). I think MapInfo uses some sort of a
border crossing algorithm to determine what's a hole and what's a part of
the region (multipolygon). They definitely don't rely on ring point
ordering.

- Bill Thoen

 
On Fri, Oct 27, 2006 at 08:47:13AM -0400, Christian Ratliff wrote:
> 
>   Perhaps you can help me figure out this puzzle. In a multi-polygon,
> from what I can find, the OGRLinearRing::isClockwise() function is the
> way to determine if a ring is a contour (clockwise) or a hole
> (counter-clockwise). When reading GML, MIF, TAB and SHP if isClockwise()
> is true then the ring is a contour, otherwise it is a hole.  However,
> when reading from ARC/SDE the behavior was opposite.
> 
>   I would rather avoid encoding knowledge of the data source in to the
> OGR geometry processor code, up in my application.  Except for that
> option, how is one to determine the implication of isClockwise() or
> perhaps I totally flubbed and missed a 'isHole()' method somewhere?
> 
> Thanks!
> christian
> 
> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Sent: Thursday, October 26, 2006 2:15 PM
> To: Christian Ratliff
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] SDE Driver Change
> 
> Christian Ratliff wrote:
> >  
> >   During the QA process for our product, we noticed polygons were 
> > being read from ARC/SDE with a reversed (left hand) winding.  This 
> > results in
> > isClockwise() returning the wrong value for all such polygons.  I 
> > updated the SDE driver with the change indicated below and then 
> > re-tested SDE and non-SDE data sources.  Everything looks good now:
> >  
> > src/ogr/ogrsf_formats/sde/ogrsdelayer.cpp
> > 719c723
> > <     nSDEErr = SE_shape_get_all_points( hShape, SE_DEFAULT_ROTATION,
> > ---
> >>     nSDEErr = SE_shape_get_all_points( hShape, 
> >> SE_RIGHT_HAND_ROTATION,
> 
> Christian,
> 
> There is no harm in doing this, but I would note that OGRPolygon rings
> are not guaranteed to have any particular handedness.  So it is unwise
> to build application on this assumption.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo,
> http://osgeo.org
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

From warmerdam at pobox.com  Fri Oct 27 10:20:21 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <45420A65.1010400@mapgears.com>
References: <45403F3E.307@pobox.com> <45420A65.1010400@mapgears.com>
Message-ID: <454215A5.8040403@pobox.com>

Daniel Morissette wrote:
> Looks good to me. I can't think of anything missing right now... well, 
> except perhaps to add my name to the list of existing committers.  :)

Daniel,

I have done so.  It wasn't in the existing COMMITERS file either so I
added it there.

> BTW, this talks about SVN, not CVS. I assume this is because we'd move 
> to SVN after OSGeo has completed its switch from Collabnet to its own 
> infrastructure?

Correct.  We have already passed the RFC to move to SVN so I mostly spoke
in terms of SVN though really it could all be read as "source control".
Once the new SVN repository is setup off the CN infrastructure at OSGeo
it is my intention to finally complete that migration.  (well perhaps we
can give Mapguide a few weeks to shake out any bugs in it.)

Should I take "Looks good to me" as a +1?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From epk.lists at gmail.com  Fri Oct 27 10:28:47 2006
From: epk.lists at gmail.com (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] setup GDAL : from GDAL source or FWTools?
Message-ID: <2d1782780610270728h43cd0dbcsc3fe2fb4dbeba493@mail.gmail.com>

hi folks,

I setup GDAL 1.3.2 on Fedora5 againts external libraries such as ECW SDK,
GeoExpress(MrSID) SDK, OCI and others.

I did it using standard --prefix=/usr/local/lib , and I'd like to know if I
set FWTools 1.0.6 on this same machine
it will or not conflict with already existing GDAL installation.

Or should uninstall GDAL and only install FWTools?

thanks

-- 
Eduardo Patto Kanegae
http://www.webmapit.com.br
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061027/3abcaf2e/attachment.html
From warmerdam at pobox.com  Fri Oct 27 10:33:45 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <45411707.8050305@loskot.net>
References: <45403F3E.307@pobox.com> <45411707.8050305@loskot.net>
Message-ID: <454218C9.2040901@pobox.com>

Mateusz Loskot wrote:
> Frank Warmerdam wrote:
>> Folks,
>>
>> For some time now, I've been intending to write up guidelines for GDAL/OGR
>> commiters.  I have finally done so:
>>
>>   http://www.gdal.org/rfc3_commiters.html
>>
>> I'd appreciate any feedback, or if there are no objections, statements of
>> support for the proposal.  There is a fairly extensive list of existing
>> commiters.  I presume several of them will not desire to remain commiters
>> since they have not been active for some time.
> 
> For me, everything is clear in this RFC.
> I'd only propose to add one statement to the "SVN Commit Practices" section:
> 
> - Keep every SVN branch compilable

Mateusz,

I think this is adequately covered by:

<li> When committing new features or significant changes to existing source
code, the committer should take reasonable measures to insure that the source
code continues to build and work on the most commonly supported platforms
(currently Linux and Windows), either by testing on those platforms directly,
running buildbot tests, or by getting help from other developers working on
those platforms. If new files or library dependencies are added, then the
configure.in, Makefile.in, Makefile.vc and related documentations should be
kept up to date.

> Are you going to describe branching policy and guidelines as well?

I was thinking there would be a separate RFC some day addressing how we
handle releases that could talk about release branches and tags in more
detail.  I did mention that new branches should not be created without the
permission of the PSC or a release manager though to be honest the "cost"
of creating a branch in SVN isn't as high as in CVS so we might relax this
at some point.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Fri Oct 27 10:37:11 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <454215A5.8040403@pobox.com>
References: <45403F3E.307@pobox.com> <45420A65.1010400@mapgears.com>
	<454215A5.8040403@pobox.com>
Message-ID: <45421997.1090409@mapgears.com>

Frank Warmerdam wrote:
> 
> Should I take "Looks good to me" as a +1?
> 

I was kind of waiting until everyone had time to comment before voting, 
but unless major issues are raised by others then my "looks good" should 
turn into a +1 whenever the comments period is over and the vote opens.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Fri Oct 27 10:39:19 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] SDE Driver Change
In-Reply-To: <AE33BBD284E832478242F2E6AABA1E1B01F1C1E4@franklin.earth.delorme.com>
References: <AE33BBD284E832478242F2E6AABA1E1B01F1C1E4@franklin.earth.delorme.com>
Message-ID: <45421A17.4070708@pobox.com>

Christian Ratliff wrote:
>   Perhaps you can help me figure out this puzzle. In a multi-polygon,
> from what I can find, the OGRLinearRing::isClockwise() function is the
> way to determine if a ring is a contour (clockwise) or a hole
> (counter-clockwise). When reading GML, MIF, TAB and SHP if isClockwise()
> is true then the ring is a contour, otherwise it is a hole.  However,
> when reading from ARC/SDE the behavior was opposite.
> 
>   I would rather avoid encoding knowledge of the data source in to the
> OGR geometry processor code, up in my application.  Except for that
> option, how is one to determine the implication of isClockwise() or
> perhaps I totally flubbed and missed a 'isHole()' method somewhere?

Christian,

An OGRMultiPolygon consists of a list of set OGRPolygons.

An OGRPolygon consts of an outer ring, and zero or more inner rings.

The outer ring of an OGRPolygon is fetched using OGRPolygon::getExteriorRing()
while interior rings are fetched using OGRPolygon::getInteriorRing().  There
should never be any ambiguity about which ring is an outer ring or an inner
ring.  And it is not based on clockwise or counterclockwise winding order.
And apparent relationship between outer/inner ringedness and winding order
is a coincidental and must not be depended upon.

So if a ring is an interior ring, then it is a hole.  Otherwise it is not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From craig.miller at spatialminds.com  Fri Oct 27 10:46:04 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] SDE Driver Change
In-Reply-To: <20061027140939.GA9451@www.gisnet.com>
Message-ID: <018a01c6f9d6$a0e83d50$3301a8c0@vaio>

An IsHole() could certainly be added to GDAL or implemented stand-alone
(GEOS?) fairly easily following just that approach.  Start outside the
outermost polygon and draw a line through the polygon.  Cross 1 line (odd)
you are in the polygon, cross another (even) you are in a hole (or outside
again), another line (odd) inside the polygon, another (even) in a hole  (or
outside again), etc.

--Craig 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Bill Thoen
Sent: Friday, October 27, 2006 7:10 AM
To: Christian Ratliff
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] SDE Driver Change

Watch out for MIF and TAB files... In MapInfo formats there are no enforced
associations between interior rings ordered deosil or widdershins (or
clockwise/counterclockwise) and whether they are holes or contours/islands.
In fact, the first ring isn't necessarily the exterior ring either (although
it usually is). I think MapInfo uses some sort of a border crossing
algorithm to determine what's a hole and what's a part of the region
(multipolygon). They definitely don't rely on ring point ordering.

- Bill Thoen

 
On Fri, Oct 27, 2006 at 08:47:13AM -0400, Christian Ratliff wrote:
> 
>   Perhaps you can help me figure out this puzzle. In a multi-polygon, 
> from what I can find, the OGRLinearRing::isClockwise() function is the 
> way to determine if a ring is a contour (clockwise) or a hole 
> (counter-clockwise). When reading GML, MIF, TAB and SHP if 
> isClockwise() is true then the ring is a contour, otherwise it is a 
> hole.  However, when reading from ARC/SDE the behavior was opposite.
> 
>   I would rather avoid encoding knowledge of the data source in to the 
> OGR geometry processor code, up in my application.  Except for that 
> option, how is one to determine the implication of isClockwise() or 
> perhaps I totally flubbed and missed a 'isHole()' method somewhere?
> 
> Thanks!
> christian
> 
> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com]
> Sent: Thursday, October 26, 2006 2:15 PM
> To: Christian Ratliff
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] SDE Driver Change
> 
> Christian Ratliff wrote:
> >  
> >   During the QA process for our product, we noticed polygons were 
> > being read from ARC/SDE with a reversed (left hand) winding.  This 
> > results in
> > isClockwise() returning the wrong value for all such polygons.  I 
> > updated the SDE driver with the change indicated below and then 
> > re-tested SDE and non-SDE data sources.  Everything looks good now:
> >  
> > src/ogr/ogrsf_formats/sde/ogrsdelayer.cpp
> > 719c723
> > <     nSDEErr = SE_shape_get_all_points( hShape, SE_DEFAULT_ROTATION,
> > ---
> >>     nSDEErr = SE_shape_get_all_points( hShape, 
> >> SE_RIGHT_HAND_ROTATION,
> 
> Christian,
> 
> There is no harm in doing this, but I would note that OGRPolygon rings 
> are not guaranteed to have any particular handedness.  So it is unwise 
> to build application on this assumption.
> 
> Best regards,
> --
> ---------------------------------------+------------------------------
> ---------------------------------------+--
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo,
> http://osgeo.org
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Oct 27 10:46:52 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal-python and numpy
In-Reply-To: <4541DAC0.6070401@sarvision.nl>
References: <4541DAC0.6070401@sarvision.nl>
Message-ID: <45421BDC.2060007@pobox.com>

Vincent Schut wrote:
> Hello list,
> 
> Numpy 1.0 has been released!
> I haven't heard any news on the porting of gdal-python from numeric to 
> numpy for a long time... Could someone enlighten me? I'd love to have a 
> numpy-based gdal.py...

Vincent,

This work is currently stalled.  Mateusz had been working on it but got
pulled onto other high priority work.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From schut at sarvision.nl  Fri Oct 27 11:09:34 2006
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal-python and numpy
In-Reply-To: <45421BDC.2060007@pobox.com>
References: <4541DAC0.6070401@sarvision.nl> <45421BDC.2060007@pobox.com>
Message-ID: <4542212E.2000402@sarvision.nl>

Frank Warmerdam wrote:
> Vincent Schut wrote:
>> Hello list,
>>
>> Numpy 1.0 has been released!
>> I haven't heard any news on the porting of gdal-python from numeric 
>> to numpy for a long time... Could someone enlighten me? I'd love to 
>> have a numpy-based gdal.py...
>
> Vincent,
>
> This work is currently stalled.  Mateusz had been working on it but got
> pulled onto other high priority work.
>
> Best regards,
I see, thanks for the info. Pity, but I have no time myself either. So 
for the time being I'll keep working with my current hacks... (some 
wrapper functions instantiating arrays from buffers, really ugly code... 
:) ).

VS.


From warmerdam at pobox.com  Fri Oct 27 11:15:57 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] setup GDAL : from GDAL source or FWTools?
In-Reply-To: <2d1782780610270728h43cd0dbcsc3fe2fb4dbeba493@mail.gmail.com>
References: <2d1782780610270728h43cd0dbcsc3fe2fb4dbeba493@mail.gmail.com>
Message-ID: <454222AD.6050203@pobox.com>

Eduardo Patto Kanegae wrote:
> hi folks,
> 
> I setup GDAL 1.3.2 on Fedora5 againts external libraries such as ECW 
> SDK, GeoExpress(MrSID) SDK, OCI and others.
> 
> I did it using standard --prefix=/usr/local/lib , and I'd like to know 
> if I set FWTools 1.0.6 on this same machine
> it will or not conflict with already existing GDAL installation.
> 
> Or should uninstall GDAL and only install FWTools?

Eduardo,

FWTools is deliberately intended to avoid conflicts with system libraries
and other applications.  If you use the approach of adding the
FWTools/bin_safe directory to your path, then the only conflict should
be with regard to deciding which executable to run (/usr/local/bin/gdalinfo
or FWTools/bin_safe/gdalinfo for instance) which will be determined by
order in the path.

The bin_safe executables setup their own environment, forcing use of
FWTools shared libraries.

At no other time should the FWTools libraries interfere with anything else
on your system.

The situation is different if you source the fwtools environment setup
scripts (fwtools_env.csh or fwtools_env.sh).  If you do this, you run
substantial risk of cross polination in ways likely to be bad.  I normally
only do this on an otherwise quite clean system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Oct 27 11:21:33 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <20061027135646.GA29194@ak4719.spb.edu>
References: <45403F3E.307@pobox.com> <20061027135646.GA29194@ak4719.spb.edu>
Message-ID: <454223FD.4060101@pobox.com>

Andrey Kiselev wrote:
> That looks fine to me with except of the term 'stable branch'. I think
> it should be a policy related to release numbering and SVN branching 
> scheme, where it is supposed to be? Will it go in the separate RFC or be
> added to RFC3 later?

Andrey,

I'm not sure what you mean.  Are you suggesting that we won't want to have
stable branches? Or that we should avoid talking about branching till we
more fully describe it?  I am assuming that when we start having branches it
will be for stable release branches primarily, but the proposal isn't
intended to describe all use of branches, nor to set release strategy.
It does imply that such a thing as a "stable branch" may exist for some
reason, and that such a branch should be considered as requiring greater
care and rigor than "non stable" branches or trunks.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Fri Oct 27 11:41:35 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <454218C9.2040901@pobox.com>
References: <45403F3E.307@pobox.com> <45411707.8050305@loskot.net>
	<454218C9.2040901@pobox.com>
Message-ID: <454228AF.9010901@mapgears.com>

Frank Warmerdam wrote:
> 
> I was thinking there would be a separate RFC some day addressing how we
> handle releases that could talk about release branches and tags in more
> detail.  I did mention that new branches should not be created without the
> permission of the PSC or a release manager though to be honest the "cost"
> of creating a branch in SVN isn't as high as in CVS so we might relax this
> at some point.
> 

Sorry for going off-topic, but what is the "cost" of creating a branch 
in CVS? It's just a flag in CVS that you create and use with a single 
command-line switch, that can't cost more than 0.02$. ;)

 From what I read it seems that SVN automagically duplicates all the 
branched directories and files in all copies that you checkout... that's 
a cost in download time and hard drive space. So if you ask me I'd be 
tempted to think that branching costs more in messiness, time and disk 
space with SVN than CVS.

Please show me the light.  ;)

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From dron at ak4719.spb.edu  Fri Oct 27 12:17:56 2006
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <454223FD.4060101@pobox.com>
References: <45403F3E.307@pobox.com> <20061027135646.GA29194@ak4719.spb.edu>
	<454223FD.4060101@pobox.com>
Message-ID: <20061027161756.GA30129@ak4719.spb.edu>

Frank,

On Fri, Oct 27, 2006 at 11:21:33AM -0400, Frank Warmerdam wrote:
> >That looks fine to me with except of the term 'stable branch'. I
> >think it should be a policy related to release numbering and SVN
> >branching scheme, where it is supposed to be? Will it go in the
> >separate RFC or be added to RFC3 later?
> 
> I'm not sure what you mean.  Are you suggesting that we won't want to
> have stable branches?

Stable branches are great, definitely I like such a thing!

> Or that we should avoid talking about branching till we more fully
> describe it?  I am assuming that when we start having branches it will
> be for stable release branches primarily, but the proposal isn't
> intended to describe all use of branches, nor to set release strategy.
> It does imply that such a thing as a "stable branch" may exist for
> some reason, and that such a branch should be considered as requiring
> greater care and rigor than "non stable" branches or trunks.

Ok, that is clear for me now, the branching strategy will be defined
separately. You can count my "+1" for RFC3.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From warmerdam at pobox.com  Fri Oct 27 13:41:30 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <454228AF.9010901@mapgears.com>
References: <45403F3E.307@pobox.com>
	<45411707.8050305@loskot.net>	<454218C9.2040901@pobox.com>
	<454228AF.9010901@mapgears.com>
Message-ID: <454244CA.1020406@pobox.com>

Daniel Morissette wrote:
> Sorry for going off-topic, but what is the "cost" of creating a branch 
> in CVS? It's just a flag in CVS that you create and use with a single 
> command-line switch, that can't cost more than 0.02$. ;)

Daniel,

The cost is the extra complication in the CVS history - ie. the log
command gets much more complicated and less comprehensible.  I will
conceed the cost is perhaps more in my head than in reality.

>  From what I read it seems that SVN automagically duplicates all the 
> branched directories and files in all copies that you checkout... that's 
> a cost in download time and hard drive space. So if you ask me I'd be 
> tempted to think that branching costs more in messiness, time and disk 
> space with SVN than CVS.

Normally one does not pull down the full repository, just one branch or
the trunk.  In this case the branches don't take extra traffic.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Fri Oct 27 14:40:04 2006
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <454244CA.1020406@pobox.com>
References: <45403F3E.307@pobox.com>
	<45411707.8050305@loskot.net>	<454218C9.2040901@pobox.com>
	<454228AF.9010901@mapgears.com> <454244CA.1020406@pobox.com>
Message-ID: <45425284.8070804@mapgears.com>

Frank Warmerdam wrote:
> 
> The cost is the extra complication in the CVS history - ie. the log
> command gets much more complicated and less comprehensible.  

True. The cvs logs are globally polluted by the log messages of all 
branches. Glad to hear this is fixed in SVN.

> 
> Normally one does not pull down the full repository, just one branch or
> the trunk.  In this case the branches don't take extra traffic.
> 

I have to admit I don't know SVN much, I had just assumed from what I 
read that the default behavior was to pull all branches unless you 
specify a single branch or the trunk at checkout time. If the default is 
to only pull the trunk (like CVS does) then you're right that solves 
this issue.

Thanks for the clarifications

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From com at navicon.dk  Wed Oct 25 10:33:01 2006
From: com at navicon.dk (oland)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/java dumps core
Message-ID: <6993229.post@talk.nabble.com>


Hello List

I have built the swing/java bindings in gdal-1.3.2. When I try to run the
gdalinfo java app it dumps core see below.

java -cp .:../gdal.jar -Djava.library.path=../.libs/ gdalinfo
/opt/Mapdata/BSB_ROOT/11006/11006_1.KAP
Driver: BSB/Maptech BSB Nautical Charts
Size is 10967, 9389
Coordinate System is:

Origin = (0.0,0.0)
Pixel Size = (1.0,1.0)
  0.0, 1.0, 0.0
  0.0, 0.0, 1.0
GCP Projection = GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG",7030]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG",6326]],PRIMEM["Greenwich",0,AUTHORITY["EPSG",8901]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG",9108]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG",4326]]
#
# An unexpected error has been detected by HotSpot Virtual Machine:
#
#  SIGSEGV (0xb) at pc=0xb78475ff, pid=24875, tid=3085108928
#
# Java VM: Java HotSpot(TM) Client VM (1.5.0-b64 mixed mode)
# Problematic frame:
# V  [libjvm.so+0x1695ff]
#
# An error report file with more information is saved as hs_err_pid24875.log
#
# If you would like to submit a bug report, please visit:
#   http://java.sun.com/webapps/bugreport/crash.jsp
#
Abort

Any hints?

The error log can be seen here

http://www.nabble.com/file/3845/hs_err_pid24875.log hs_err_pid24875.log 

Carsten
-- 
View this message in context: http://www.nabble.com/swig-java-dumps-core-tf2507983.html#a6993229
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From geognu at infinito.it  Fri Oct 27 06:00:13 2006
From: geognu at infinito.it (Patti Giuseppe)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Color table
Message-ID: <4541D8AD.9020308@infinito.it>

I'm trying to understand hoe to keep the colortable during a 
gdal_translate operation.
I'm translating a geotiff with Colortabel=RGB with 2 entries and i get 
Colortable=RGB with 256 entries. The problem is that the file size 
increases a lot during conversion, because it adds so many entries not 
needed (because the source is a raster with white=0 and black=1)

From mjtrent at wisc.edu  Fri Oct 27 15:57:56 2006
From: mjtrent at wisc.edu (MIKAH JAMES TRENT)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] GDAL in C#
Message-ID: <e82f977bc17c.45421e74@wiscmail.wisc.edu>

Hi,
I am working for the University of Wisconsin, Madison, and we are
inquiring abou GDAL.  I noticed that on the gdal website,
http://www.gdal.org/ as well as in the news section there is mention of
a C# version, that isn't quite done yet.  Is it possible to get a BETA
of this somewhere??
Thanks,
-Mikah

From paulp1_adsl at hotkey.net.au  Fri Oct 27 18:13:02 2006
From: paulp1_adsl at hotkey.net.au (paulp1_adsl@hotkey.net.au)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Converting DTED to image file format
Message-ID: <000601c6fa15$120b3760$6401a8c0@sdx3jl5bf2wfyc>

I'm new to GDAL and I have a directory of .dto files - obviously tiled and I would like to know how I specify the command gdal_translate to convert a whole directory of .dt0 files to one .png image file. Is this possible to do? 

Kind Regards

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061028/ca2f16c4/attachment.html
From simboss1 at gmail.com  Fri Oct 27 21:32:06 2006
From: simboss1 at gmail.com (Simone Giannecchini)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Digging Java JNI bindings
Message-ID: <961f4d9e0610271832o26ff6970hf476b6e9645c68c@mail.gmail.com>

Hi list,
I am playing with the GDAL SWIG bindings for Java in order to continue
the work that Daniele Romagnoli carried out for the Summer Of Code
program. So far we have achieved to built  ImageIO plugins to read
ECW, JPEG2K and HDF dataset. I am starting to play around with
creating datasets but I am a bit stuck. Before starting to look at
extending the actual Java bindings to best work in a tile(block)
oriented way I wanted to play around a bit with what it is availaible
right now. I am trying with the following code in order to convert a
jpeg image into a tiff image. I get no error but the output tiff
appears to be empty.

final File outFile = new File("c:/out.tiff");
		final BufferedImage im = ImageIO.read(new File("c:/2.jpg"));
		outFile.createNewFile();
		Driver jp2kDriver = gdal.GetDriverByName("GTiff");
		Dataset ds = jp2kDriver.Create(outFile.getAbsolutePath(),
				im.getWidth(), im.getHeight(), 3, gdalconstConstants.GDT_Byte,
				null);
		RenderedOp b0 = BandSelectDescriptor.create(im, new int[] { 0 }, null);
		RenderedOp b1 = BandSelectDescriptor.create(im, new int[] { 1 }, null);
		RenderedOp b2 = BandSelectDescriptor.create(im, new int[] { 2 }, null);

		ds.GetRasterBand(1).WriteRaster_Direct(
				0,
				0,
				im.getWidth(),
				im.getHeight(),
				0,
				0,
				gdalconstConstants.GDT_Byte,
				ByteBuffer.wrap(((DataBufferByte) b0.getAsBufferedImage()
						.getData().getDataBuffer()).getData(0)));
		ds.GetRasterBand(2).WriteRaster_Direct(
				0,
				0,
				im.getWidth(),
				im.getHeight(),
				0,
				0,
				gdalconstConstants.GDT_Byte,
				ByteBuffer.wrap(((DataBufferByte) b1.getAsBufferedImage()
						.getData().getDataBuffer()).getData(0)));
		ds.GetRasterBand(2).WriteRaster_Direct(
				0,
				0,
				im.getWidth(),
				im.getHeight(),
				0,
				0,
				gdalconstConstants.GDT_Byte,
				ByteBuffer.wrap(((DataBufferByte) b2.getAsBufferedImage()
						.getData().getDataBuffer()).getData(0)));



I am sure I am missing something, any hint is greatly appreciated!


Thx,
Simone.

-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions

http://www.geo-solutions.it

-------------------------------------------------------

From paulselormey at gmail.com  Sat Oct 28 04:48:07 2006
From: paulselormey at gmail.com (Paul Selormey)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] OT: Shapefile's multipatch
Message-ID: <c67bb03d0610280148l766effd9j8325c33a298d8ce9@mail.gmail.com>

Please I need help in understand some aspect of the multipatch format
of the shapefile.
In particular, I want understand some points on
0. triangle strip
1. triangle fan

The question is: Does the "NumParts" includes the number of triangles
in the strip or fan? (my own understand is that it does NOT, but wish
to confirm, just in case!).

Best regards,
Paul.

From eric.doenges at gmx.net  Sat Oct 28 08:39:03 2006
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] VSIFOpenL/VSIFOpen question
Message-ID: <9BFE033F-D906-4FB6-A155-7BC53EB37A6B@gmx.net>

Hi,

after spending about an hour or so debugging a heavily modified gdal  
driver that kept crashing in the OS's sseek function, I realized that  
my problem was that while VSIFOpenL
claims to return a FILE * (and all the related VSIFXXXL functions  
claim to expect FILE *),
what it returns is not really a FILE *. I think this is an absolutely  
horrid design
decision (and whoever thought it up should be thoroughly ashamed of  
themselves). Wouldn't
it be better to create a new type name for these functions, for  
instance VFILE (or VSIFILE
*)? That way, the compiler could warn naive programmers like me when  
I pass the wrong type
of file handle. Or am I missing something important here ?

With kind regards,
Eric

P.S.: I'm probably going to regret this, but I'll volunteer to do the  
necessary work to
fix this if the steering committee agrees that this needs to be fixed.

From szekerest at gmail.com  Sat Oct 28 09:59:02 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] GDAL in C#
In-Reply-To: <f3b73b7d0610280657t604a4881m4497ff2201fc240a@mail.gmail.com>
References: <e82f977bc17c.45421e74@wiscmail.wisc.edu>
	<f3b73b7d0610280657t604a4881m4497ff2201fc240a@mail.gmail.com>
Message-ID: <f3b73b7d0610280659i673d809fm26c00bda03ad17bd@mail.gmail.com>

Hi,

The GDAL-C# can be found in the '\gdal\swig\csharp' directory. You can
find 2 sample apps to demonstrate how to use the OGR and OSR library.
I recommend to use the latest CVS version, currently only the Windows
build is supported.

To compile the C# interface use the following steps:

1. Compile GDAL
2. CD into '\gdal\swig\csharp
3. nmake -f makefile.vc interface
4. nmake -f makefile.vc

To test the compilation you can use:

5. nmake -f makefile.vc test

Best Regards

Tamas Szekeres



2006/10/27, MIKAH JAMES TRENT <mjtrent@wisc.edu>:
> Hi,
> I am working for the University of Wisconsin, Madison, and we are
> inquiring abou GDAL.  I noticed that on the gdal website,
> http://www.gdal.org/ as well as in the news section there is mention of
> a C# version, that isn't quite done yet.  Is it possible to get a BETA
> of this somewhere??
> Thanks,
> -Mikah
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Sat Oct 28 11:59:35 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] VSIFOpenL/VSIFOpen question
In-Reply-To: <9BFE033F-D906-4FB6-A155-7BC53EB37A6B@gmx.net>
References: <9BFE033F-D906-4FB6-A155-7BC53EB37A6B@gmx.net>
Message-ID: <45437E67.4090108@pobox.com>

Eric D?nges wrote:
> P.S.: I'm probably going to regret this, but I'll volunteer to do the 
> necessary work to
> fix this if the steering committee agrees that this needs to be fixed.

Eric,

Thanks for the kudos.  If you wish to pursue this, you would need to
submit an RFC and also request committer access from the PSC.  The change
is far too broad to handle as a patch.

I would agree that altering the "L" api to working with a VSILFILE handle
would be prudent.

I won't bother trying to explain the origins of the current approach.

Regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ILucena at clarku.edu  Sat Oct 28 12:36:12 2006
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Color table
Message-ID: <6FD7C9DB26540B42A1207C69BF92D455020D6D67@Iris.ad.clarku.edu>

If you are translating *to* geotiff with color table it will always have
256. I guess hat is how TIF was designed.

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Patti Giuseppe
Sent: Friday, October 27, 2006 6:00 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Color table

I'm trying to understand hoe to keep the colortable during a 
gdal_translate operation.
I'm translating a geotiff with Colortabel=RGB with 2 entries and i get 
Colortable=RGB with 256 entries. The problem is that the file size 
increases a lot during conversion, because it adds so many entries not 
needed (because the source is a raster with white=0 and black=1)
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From maphew at gmail.com  Sun Oct 29 02:49:56 2006
From: maphew at gmail.com (matt wilkie)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] how to "for each poly do X" ?
Message-ID: <7058496.post@talk.nabble.com>


Hi All, this is likely a little offtopic for this list, or at least off the
beaten path, but the folks who hang out here are likely to know where to
point me... I'm working on a project processing a lot of landsat7 and other
images and tile-management is so far the hardest part I've tackled. I need
to break things into pieces, do some work on them, and then reassemble them
and stuff them somewhere else, largely unattended.

Under ArcInfo I'd use AML and cursors: basically for each polygon in an
index cover do X,Y and Z. I'm at a loss so far to how to do the same thing
with the open source tools I have. Namely fwtools, qgis and ossim (all on
windows). Where do I begin?  I imagine this to be common scenario, how
are/have other people handled it?

thanks in advance for your thoughts,

-matt
-- 
View this message in context: http://www.nabble.com/how-to-%22for-each-poly-do-X%22---tf2533494.html#a7058496
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From warmerdam at pobox.com  Sun Oct 29 11:17:43 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Color table
In-Reply-To: <6FD7C9DB26540B42A1207C69BF92D455020D6D67@Iris.ad.clarku.edu>
References: <6FD7C9DB26540B42A1207C69BF92D455020D6D67@Iris.ad.clarku.edu>
Message-ID: <4544D427.3010303@pobox.com>

Ivan Lucena wrote:
> If you are translating *to* geotiff with color table it will always have
> 256. I guess hat is how TIF was designed.
> 
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Patti Giuseppe
> Sent: Friday, October 27, 2006 6:00 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] Color table
> 
> I'm trying to understand hoe to keep the colortable during a 
> gdal_translate operation.
> I'm translating a geotiff with Colortabel=RGB with 2 entries and i get 
> Colortable=RGB with 256 entries. The problem is that the file size 
> increases a lot during conversion, because it adds so many entries not 
> needed (because the source is a raster with white=0 and black=1)

Ivan / Patti,

Somehow I seem to have missed the original message.

The GDAL GeoTIFF writer currently does not support writing 1bit per pixel
images.  The smallest data type it supports writing is 8bit.  So 1bit
(bitonal) images will come out of a translation as 8bit images.  If you don't
use any compression these will be quite a bit larger. If you apply a
decent compression technique (eg. DEFLATE/ZIP or LZW) the result shouldn't
be too much larger, or might even be a lot smaller if the source was not
compressed.

The color table size in TIFF is always dependent on the sample size.  So
8bit images will always have 256 color entries even if 254 of them are
unused, as in your case.

The GDAL GeoTIFF driver may implement support for 1/2/4 bit images in
the future, though it hasn't been a priority for me in the past.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct 29 11:27:21 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Converting DTED to image file format
In-Reply-To: <000601c6fa15$120b3760$6401a8c0@sdx3jl5bf2wfyc>
References: <000601c6fa15$120b3760$6401a8c0@sdx3jl5bf2wfyc>
Message-ID: <4544D669.6060009@pobox.com>

paulp1_adsl@hotkey.net.au wrote:
> I'm new to GDAL and I have a directory of .dto files - obviously tiled 
> and I would like to know how I specify the command gdal_translate to 
> convert a whole directory of .dt0 files to one .png image file. Is this 
> possible to do?

Paul,

There are two GDAL commands for merging many files.  The gdal_merge.py
Python script, and in GDAL 1.3.2 and later you can use gdalwarp.

You might try something like:

   gdalwarp abc/*.dt0 mosaic.tif

If you wish to output them as a PNG file then you need to do things in
a two step process since PNG is not a randomly writable format.  So the
second stage would be something like:

   gdal_translate -of PNG mosaic.tif mosaic.png

Are you wanting 16bit elevation PNGs for some special purpose, or just
an 8bit greyscale result for display in normal web browsers?  If you want
an 8bit result then you would need to rescale the pixel values.

   gdal_translate -of PNG -scale mosaic.tif mosaic.png

If you also need a world file with the png file (for geolocation in
some applications) use a command like:

   gdal_translate -of PNG -scale -co WORLDFILE=YES mosaic.tif mosaic.png

You might find it helpful to read up on the gdalwarp, and gdal_translate
program (under "GDAL Utility Programs" on the web page), and the PNG driver
(under "Supported Formats" on the web page).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Oct 29 11:34:41 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] OT: Shapefile's multipatch
In-Reply-To: <c67bb03d0610280148l766effd9j8325c33a298d8ce9@mail.gmail.com>
References: <c67bb03d0610280148l766effd9j8325c33a298d8ce9@mail.gmail.com>
Message-ID: <4544D821.10101@pobox.com>

Paul Selormey wrote:
> Please I need help in understand some aspect of the multipatch format
> of the shapefile.
> In particular, I want understand some points on
> 0. triangle strip
> 1. triangle fan
> 
> The question is: Does the "NumParts" includes the number of triangles
> in the strip or fan? (my own understand is that it does NOT, but wish
> to confirm, just in case!).

Paul,

 From reading the specification it seems the NumParts does not
address the number of triangles in a strip or fan.  Rather it
indicates the number of parts, each part potentially being a
triangle strip, triangle fan, outer ring, inner ring, first
ring or plain ring.

I don't actually have much first hand experience with multipatch
data.  When I have encountered it I think it was typical for each
shape to be a single part, either a triangle strip or a triangle
fan.  But I don't recall details.

If you have a couple not too large, but "real world" multipatch
examples that are redistributable, I'd love to have a copy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From JAMES.E.HOPPER at saic.com  Sun Oct 29 15:28:35 2006
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Converting DTED to image file format
In-Reply-To: <200610291700.k9TH06n9022294@duke.maptools.org>
Message-ID: <C16A7923.2412%james.e.hopper@saic.com>

Frank,

If you merge dted like you show below what is the pixel type (float or
integer)?

Thanks jim



On 10/29/06 12:00 PM, "gdal-dev-request@lists.maptools.org"
<gdal-dev-request@lists.maptools.org> wrote:

> There are two GDAL commands for merging many files.  The gdal_merge.py
> Python script, and in GDAL 1.3.2 and later you can use gdalwarp.
> 
> You might try something like:
> 
>    gdalwarp abc/*.dt0 mosaic.tif
> 


From ari.jolma at tkk.fi  Sun Oct 29 16:25:52 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Renaming the Perl modules
Message-ID: <45451C60.3010203@tkk.fi>

I suggest that for the next release the Perl binding modules are renamed 
to follow the standard Perl naming practises. The new module names 
would/could be:

gdal => Geo::GDAL
gdalconst => Geo::GDAL::Const
ogr => Geo::OGR
osr => Geo::OSR

Thus we would override the existing Geo::GDAL name, which currently 
refers to the now obsolete old module. I also own the Geo::GDAL name in 
CPAN.

Does anybody have a good idea of what to put to CPAN, since the actual 
modules will be in gdal distribution?

I have a fancy design of more Perlish modules, but it is likely to be an 
alternative to the more "raw" swig API. On the other hand, these name 
changes should be done in any case.

Any comments?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From paulselormey at gmail.com  Sun Oct 29 17:41:46 2006
From: paulselormey at gmail.com (Paul Selormey)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] OT: Shapefile's multipatch
In-Reply-To: <4544D821.10101@pobox.com>
References: <c67bb03d0610280148l766effd9j8325c33a298d8ce9@mail.gmail.com>
	<4544D821.10101@pobox.com>
Message-ID: <c67bb03d0610291441o7b553969y1d605ec1b7c10dc2@mail.gmail.com>

Hello Frank,
Thanks for the mail and the information.
I am currently trying to implement a shape geometry reader/writer similar to
WKT/WKB readers/writers as part of my .NET port of JTS.
However, I wanted to make it very complete and therefore started looking for
information on the multipatch - currently no open source project I know includes
the support.

I do not have any data for testing yet, I am actually also looking for
some. So far,
there is a Geotools patch for multipatch that includes some data. However, the
patch does not support the triangle fan and strip and therefore does not include
any search test data.

Please can anyone on the list with experience in this field help with the data,
may be create them with ArcView for testing?

Best regards,
Paul.

On 10/30/06, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Paul Selormey wrote:
> > Please I need help in understand some aspect of the multipatch format
> > of the shapefile.
> > In particular, I want understand some points on
> > 0. triangle strip
> > 1. triangle fan
> >
> > The question is: Does the "NumParts" includes the number of triangles
> > in the strip or fan? (my own understand is that it does NOT, but wish
> > to confirm, just in case!).
>
> Paul,
>
>  From reading the specification it seems the NumParts does not
> address the number of triangles in a strip or fan.  Rather it
> indicates the number of parts, each part potentially being a
> triangle strip, triangle fan, outer ring, inner ring, first
> ring or plain ring.
>
> I don't actually have much first hand experience with multipatch
> data.  When I have encountered it I think it was typical for each
> shape to be a single part, either a triangle strip or a triangle
> fan.  But I don't recall details.
>
> If you have a couple not too large, but "real world" multipatch
> examples that are redistributable, I'd love to have a copy.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From warmerdam at pobox.com  Sun Oct 29 23:27:44 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Re: CSharpBindings bugzilla component
In-Reply-To: <f3b73b7d0610291333r4f0e82e7wc1cd38c97345e6d9@mail.gmail.com>
References: <f3b73b7d0610291333r4f0e82e7wc1cd38c97345e6d9@mail.gmail.com>
Message-ID: <45457F40.90908@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Would you mind creating a CSharpBindings component to the GDAL
> bugzilla for me, please?

Tamas,

Done, with you as the default assignee for this component.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Oct 30 02:28:38 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <454218C9.2040901@pobox.com>
References: <45403F3E.307@pobox.com> <45411707.8050305@loskot.net>
	<454218C9.2040901@pobox.com>
Message-ID: <4545A9A6.5040406@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Frank Warmerdam wrote:
>>> Folks,
>>>
>>> For some time now, I've been intending to write up guidelines for
>>> GDAL/OGR
>>> commiters.  I have finally done so:
>>>
>>>   http://www.gdal.org/rfc3_commiters.html
>>>
>>> I'd appreciate any feedback, or if there are no objections,
>>> statements of
>>> support for the proposal.  There is a fairly extensive list of existing
>>> commiters.  I presume several of them will not desire to remain
>>> commiters
>>> since they have not been active for some time.
>>
>> For me, everything is clear in this RFC.
>> I'd only propose to add one statement to the "SVN Commit Practices"
>> section:
>>
>> - Keep every SVN branch compilable
> 
> Mateusz,
> 
> I think this is adequately covered by:
> 
> <li> When committing new features or significant changes to existing source
> code, the committer should take reasonable measures to insure that the
> source
> code continues to build and work on the most commonly supported platforms
> (currently Linux and Windows), either by testing on those platforms
> directly,
> running buildbot tests, or by getting help from other developers working on
> those platforms. If new files or library dependencies are added, then the
> configure.in, Makefile.in, Makefile.vc and related documentations should be
> kept up to date.

Frank,

You're absolutely right. I've missed this point in some way.

>> Are you going to describe branching policy and guidelines as well?
> 
> I was thinking there would be a separate RFC some day addressing how we
> handle releases that could talk about release branches and tags in more
> detail. 

I understand it, but my question about branching policy was more about
describing how branches work in GDAL project to help committers to
understand it in range they are supposed to understand it.
I mean, to help to not to break anything ;-)

> I did mention that new branches should not be created without the
> permission of the PSC or a release manager though to be honest
> the "cost" of creating a branch in SVN isn't as high as in CVS
> so we might relax this at some point.

I think it's worth to discuss it in future.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Oct 30 02:40:13 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 3: GDAL Commiter Guildlines
In-Reply-To: <45425284.8070804@mapgears.com>
References: <45403F3E.307@pobox.com>	<45411707.8050305@loskot.net>	<454218C9.2040901@pobox.com>	<454228AF.9010901@mapgears.com>
	<454244CA.1020406@pobox.com> <45425284.8070804@mapgears.com>
Message-ID: <4545AC5D.5050009@loskot.net>

Daniel Morissette wrote:
> I have to admit I don't know SVN much, I had just assumed from what I
>  read that the default behavior was to pull all branches unless you 
> specify a single branch or the trunk at checkout time. If the default
> is to only pull the trunk (like CVS does) then you're right that
> solves this issue.

Daniel,

The main difference between CVS and SVN branches is that SVN
branches are physical copies of directory tree(s).
Most common strategy of SVN repository layout is to have 3 directories:
trunk
tags
branches

where
trunk is equivalent to CVS HEAD.
tags stores tagged snapshots
branches stores forked development lines, usually copies of trunk

In fact, trunk copies in tags and branches do not differ, you can still
commit to tags or branches, etc.
It's mainly based on project policies that developers are supposed to
respect.

It's possible to arrange SVN repositories as developers like.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From zuyuan.wang at wsl.ch  Mon Oct 30 05:45:35 2006
From: zuyuan.wang at wsl.ch (Zuyuan Wang)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Compliler errors in GDAL 1.3.2 on windows with VC6
Message-ID: <5.2.1.1.1.20061030114458.01f68250@mail.wsl.ch>

Hello, there,

   I am a newer to GDAL. I have already updated the two files : 
IdrisiDataset.cpp, and  cpl_odbc.cpp. as the instruction as

  ************
  http://lists.maptools.org/pipermail/gdal-dev/2006-May/008789.html
  **************

   But when I used VC6 on windows to compile GDAL 1.3.2 again , I still got 
the following error info:

   *******************
   cpl_odbc.cpp
   cpl_odbc.cpp(412) : error C2440: '=' : cannot convert from 'int *' to 
'long *'
         Types pointed to are unrelated; conversion requires 
reinterpret_cast, C-
    style cast or function-style cast
   NMAKE : fatal error U1077: 'cl' : return code '0x2'
   Stop.
   NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual 
Studio\VC98\bin\N
   MAKE.EXE"' : return code '0x2'
   Stop.

  *******************



   Any suggestion will be grateful!

   Best regards!

   Zuyuan Wang



- - - - - -
Dr.  Zuyuan Wang
Swiss Federal Research Institute WSL
Zuercherstr. 111, CH-8903 Birmensdorf, SWITZERLAND
Phone: +41 1 739 2691   Fax: +41 1 739 2215
Email:  zuyuan.wang@wsl.ch  


From nbarker at ittvis.com  Mon Oct 30 05:59:07 2006
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Digging Java JNI bindings
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131C37@bath.uk.rsinc.com>



-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simone
Giannecchini
Sent: 28 October 2006 02:32
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Digging Java JNI bindings

Hi list,
I am playing with the GDAL SWIG bindings for Java in order to continue
the work that Daniele Romagnoli carried out for the Summer Of Code
program. So far we have achieved to built  ImageIO plugins to read
ECW, JPEG2K and HDF dataset. I am starting to play around with
creating datasets but I am a bit stuck. Before starting to look at
extending the actual Java bindings to best work in a tile(block)
oriented way I wanted to play around a bit with what it is availaible
right now. I am trying with the following code in order to convert a
jpeg image into a tiff image. I get no error but the output tiff
appears to be empty.

final File outFile = new File("c:/out.tiff");
		final BufferedImage im = ImageIO.read(new
File("c:/2.jpg"));
		outFile.createNewFile();
		Driver jp2kDriver = gdal.GetDriverByName("GTiff");
		Dataset ds =
jp2kDriver.Create(outFile.getAbsolutePath(),
				im.getWidth(), im.getHeight(), 3,
gdalconstConstants.GDT_Byte,
				null);
		RenderedOp b0 = BandSelectDescriptor.create(im, new
int[] { 0 }, null);
		RenderedOp b1 = BandSelectDescriptor.create(im, new
int[] { 1 }, null);
		RenderedOp b2 = BandSelectDescriptor.create(im, new
int[] { 2 }, null);

		ds.GetRasterBand(1).WriteRaster_Direct(
				0,
				0,
				im.getWidth(),
				im.getHeight(),
				0,
				0,
				gdalconstConstants.GDT_Byte,
				ByteBuffer.wrap(((DataBufferByte)
b0.getAsBufferedImage()
	
.getData().getDataBuffer()).getData(0)));
		ds.GetRasterBand(2).WriteRaster_Direct(
				0,
				0,
				im.getWidth(),
				im.getHeight(),
				0,
				0,
				gdalconstConstants.GDT_Byte,
				ByteBuffer.wrap(((DataBufferByte)
b1.getAsBufferedImage()
	
.getData().getDataBuffer()).getData(0)));
		ds.GetRasterBand(2).WriteRaster_Direct(
				0,
				0,
				im.getWidth(),
				im.getHeight(),
				0,
				0,
				gdalconstConstants.GDT_Byte,
				ByteBuffer.wrap(((DataBufferByte)
b2.getAsBufferedImage()
	
.getData().getDataBuffer()).getData(0)));



I am sure I am missing something, any hint is greatly appreciated!


Thx,
Simone.

-- 

Simone,

If by the output tiff being empty, you mean you only get the 8 byte tiff
header then you need to add
		
ds.FlushCache();
ds.delete();

to the end your routine this forces the file to be created, this could
be added to a finalizer of one of your base classes if you wanted to
hide it, I have just tried it with your code and it creates the whole
file.

Norman



From astewart at TerraGoTech.com  Mon Oct 30 10:05:39 2006
From: astewart at TerraGoTech.com (Alan Stewart)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] sample scaling
Message-ID: <454614C3.6000504@TerraGoTech.com>

I've got NITF files that have three bands @ 16 bits per sample. I need 
to produce a GeoTIFF with 8-bit samples, JPEG compressed. In my first 
attempts the resulting image appeared black. I discovered a GDAL 
metadata item. "NITF_USE00A_DYNAMIC_RANGE=02047", which I take it means 
that sample values range from 0 to 2047. If I use "-scale 0 2047 0 
65535" the resulting TIFF looks fine, but if I use "-scale 0 2047 0 255 
-ot Byte" the image is much darker and greenish. I thought this would 
just rescale the sample values to fit in the range 0-255 and create a 
TIFF with 8-bit samples. I didn't expect the color balance of the image 
to change. Is "Byte" actually a signed value or something? If so, how do 
I get an unsigned 8-bit sample?

-- 

Alan Stewart
Senior Software Architect
TerraGo Technologies, Inc.
astewart@TerraGoTech.com
678-391-9700 x9615

"TerraGo Technologies? GeoPDF is proving to be the smart choice for key players in the intelligence community."
	- Amy Stankiewicz, Editor-in-Chief, Geospatial Solutions


From warmerdam at pobox.com  Mon Oct 30 10:50:27 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] sample scaling
In-Reply-To: <454614C3.6000504@TerraGoTech.com>
References: <454614C3.6000504@TerraGoTech.com>
Message-ID: <45461F43.9050101@pobox.com>

Alan Stewart wrote:
> I've got NITF files that have three bands @ 16 bits per sample. I need 
> to produce a GeoTIFF with 8-bit samples, JPEG compressed. In my first 
> attempts the resulting image appeared black. I discovered a GDAL 
> metadata item. "NITF_USE00A_DYNAMIC_RANGE=02047", which I take it means 
> that sample values range from 0 to 2047. If I use "-scale 0 2047 0 
> 65535" the resulting TIFF looks fine, but if I use "-scale 0 2047 0 255 
> -ot Byte" the image is much darker and greenish. I thought this would 
> just rescale the sample values to fit in the range 0-255 and create a 
> TIFF with 8-bit samples. I didn't expect the color balance of the image 
> to change. Is "Byte" actually a signed value or something? If so, how do 
> I get an unsigned 8-bit sample?

Alan,

Your understanding of how things should work sound right.  I don't know
why the results are bad.  How are you checking the results?  What viewer
did you use with the -scale 0 2047 0 65536 output tiff that looked good?

You might want to view your image in OpenEV, and inspect various pixels
to make sure that the dynamic range info of 02047 is accurate.  Or
use "gdalinfo -mm your.ntf" to actually scan the data for min and max values.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ealpert at digitalglobe.com  Mon Oct 30 11:33:19 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/perl install question
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233B6CA08@COMAIL01.digitalglobe.com>



Anyone know how I can build and install the swig/perl part of gdal in a
directory other than my machines
/usr/lib/perl5/site_perl/5.8.0/i386-linux-thread-multi/auto/ directory?


From ari.jolma at tkk.fi  Mon Oct 30 12:56:27 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/perl install question
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233B6CA08@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233B6CA08@COMAIL01.digitalglobe.com>
Message-ID: <45463CCB.7050001@tkk.fi>

Ethan Alpert kirjoitti:
> Anyone know how I can build and install the swig/perl part of gdal in a
> directory other than my machines
> /usr/lib/perl5/site_perl/5.8.0/i386-linux-thread-multi/auto/ directory?
>   

The perl Makefile.PL PREFIX=/path_to_somewhere is for this but I have 
never used it with gdal swig bindings so I'm not sure if it works out of 
box.

Ari

> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From simboss1 at gmail.com  Mon Oct 30 13:30:56 2006
From: simboss1 at gmail.com (Simone Giannecchini)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Digging Java JNI bindings
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E8131C37@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131C37@bath.uk.rsinc.com>
Message-ID: <961f4d9e0610301030p44beca35u84a5d4baebcbd981@mail.gmail.com>

Ciao Norman,
I have tried adding your code while updating and rebuilding gdal from
sources with no luck. Do you mind if I send you a self contained test
case (code+sample image) to test?


Thx,
Simone.

On 10/30/06, Norman Barker <nbarker@ittvis.com> wrote:
>
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Simone
> Giannecchini
> Sent: 28 October 2006 02:32
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] Digging Java JNI bindings
>
> Hi list,
> I am playing with the GDAL SWIG bindings for Java in order to continue
> the work that Daniele Romagnoli carried out for the Summer Of Code
> program. So far we have achieved to built  ImageIO plugins to read
> ECW, JPEG2K and HDF dataset. I am starting to play around with
> creating datasets but I am a bit stuck. Before starting to look at
> extending the actual Java bindings to best work in a tile(block)
> oriented way I wanted to play around a bit with what it is availaible
> right now. I am trying with the following code in order to convert a
> jpeg image into a tiff image. I get no error but the output tiff
> appears to be empty.
>
> final File outFile = new File("c:/out.tiff");
>                final BufferedImage im = ImageIO.read(new
> File("c:/2.jpg"));
>                outFile.createNewFile();
>                Driver jp2kDriver = gdal.GetDriverByName("GTiff");
>                Dataset ds =
> jp2kDriver.Create(outFile.getAbsolutePath(),
>                                im.getWidth(), im.getHeight(), 3,
> gdalconstConstants.GDT_Byte,
>                                null);
>                RenderedOp b0 = BandSelectDescriptor.create(im, new
> int[] { 0 }, null);
>                RenderedOp b1 = BandSelectDescriptor.create(im, new
> int[] { 1 }, null);
>                RenderedOp b2 = BandSelectDescriptor.create(im, new
> int[] { 2 }, null);
>
>                ds.GetRasterBand(1).WriteRaster_Direct(
>                                0,
>                                0,
>                                im.getWidth(),
>                                im.getHeight(),
>                                0,
>                                0,
>                                gdalconstConstants.GDT_Byte,
>                                ByteBuffer.wrap(((DataBufferByte)
> b0.getAsBufferedImage()
>
> .getData().getDataBuffer()).getData(0)));
>                ds.GetRasterBand(2).WriteRaster_Direct(
>                                0,
>                                0,
>                                im.getWidth(),
>                                im.getHeight(),
>                                0,
>                                0,
>                                gdalconstConstants.GDT_Byte,
>                                ByteBuffer.wrap(((DataBufferByte)
> b1.getAsBufferedImage()
>
> .getData().getDataBuffer()).getData(0)));
>                ds.GetRasterBand(2).WriteRaster_Direct(
>                                0,
>                                0,
>                                im.getWidth(),
>                                im.getHeight(),
>                                0,
>                                0,
>                                gdalconstConstants.GDT_Byte,
>                                ByteBuffer.wrap(((DataBufferByte)
> b2.getAsBufferedImage()
>
> .getData().getDataBuffer()).getData(0)));
>
>
>
> I am sure I am missing something, any hint is greatly appreciated!
>
>
> Thx,
> Simone.
>
> --
>
> Simone,
>
> If by the output tiff being empty, you mean you only get the 8 byte tiff
> header then you need to add
>
> ds.FlushCache();
> ds.delete();
>
> to the end your routine this forces the file to be created, this could
> be added to a finalizer of one of your base classes if you wanted to
> hide it, I have just tried it with your code and it creates the whole
> file.
>
> Norman
>
>


-- 
-------------------------------------------------------
Eng. Simone Giannecchini
President /CEO GeoSolutions

http://www.geo-solutions.it

-------------------------------------------------------

From nicky666 at gmail.com  Mon Oct 30 13:53:35 2006
From: nicky666 at gmail.com (Nicolas Ribot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal_merge.py failed for ENVI format
Message-ID: <28de5e310610301053w59b85705wbb7543b0d97f113d@mail.gmail.com>

Hi all
(I'm glad to join the list for the first time)

I tried to merge several TIF files (representing Canada, in WGS84).
These files represent about 6 Gb of data, so I chose the ENVI file
type, to circumvent the 4 Gb limit of tiff files.

When I launch the command (see at the end of this message), it stops
immediatly, generating a header that look correct:

ENVI
samples = 86403
lines   = 38253
bands   = 3
header offset = 0
file type = ENVI Standard
data type = 1
interleave = bsq
byte order = 0
band names = {
Band 1,
Band 2,
Band 3}

but the data themselves are an only 2-bytes file.
I can't understand why it does not generate the right file (about 6Gb)

I'm using FWTools-1.0.7 on Ubuntu (intel 32 bits)
Data are on a USB disk, formatted in ext2.
I moved the data from a fat32 partition to a NTFS one, then format the
partition in ext2, and moved data back on this partition.
Can this be the reason of the failure ?

Thank you
Nicolas

Command line:
__________________
 gdal_merge.py -o /media/usbdisk/win_data/canada_wgs84 -of ENVI
/media/usbdisk/win_data/N40.tif /media/usbdisk/win_data/N45.tif
/media/usbdisk/win_data/N50.tif /media/usbdisk/win_data/N55.tif
/media/usbdisk/win_data/N60.tif /media/usbdisk/win_data/N65.tif
/media/usbdisk/win_data/N70.tif /media/usbdisk/win_data/N75.tif
/media/usbdisk/win_data/N80.tif

From eric.doenges at gmx.net  Mon Oct 30 14:03:34 2006
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 7: API Change for the VSIxxxL family of file
	functions
Message-ID: <5170F248-52A4-4C7E-9E8C-EC62B85A62E1@gmx.net>

Hi list,


in response to my gripe about VSIOpenL claiming to return a FILE*  
when it's not,
Frank said I should submit an RFC, so here it is.

--- snip ---

RFC 7: API Change for the VSIxxxL family of file functions

Author: Eric D?nges
Contact: Eric.Doenges@gmx.net
Status: Proposed


Purpose

To change the API for the VSIxxxL family of functions to use a new  
data-type
VSILFILE* instead of the current FILE*.

Background, Rationale

Currently, GDAL offers two APIs to abstract file access functions  
(referred to
as VSIxxx and VSIxxxL in this document). Both APIs claim to operate  
on FILE*;
however, the VSIxxxL functions can only operate on FILE* created by the
VSIOpenL function. This is because VSIOpenL returns a pointer to an  
internal
C++ class typecast to FILE*, not an actual FILE*. This makes it  
impossible
for the compiler to warn when the VSIxxx and VSIxxxL functions are
inappropriately mixed.

Proposed Fix

A new opaque data-type VSILFILE* shall be declared. All VSIxxxL  
functions shall
be changed to use this new type instead of FILE*. Additionally, any  
GDAL code
that uses the VSIxxxL functions must be changed to use this data-type  
as well.

Implementation Details

While it would seem natural to declare VSILFILE* as a typedef of a  
void pointer
similar to the way GDAL defines the data-type handles for the C API,  
this has
the disadvantage that the compiler will not be able to warn about  
improper
pointer conversions since any type of pointer can be converted to a void
pointer. Instead, it is proposed to declare VSIFILE with the help of  
an empty
forward declaration, i.e. "typedef struct VSILFILE VSILFILE", with  
the struct
VSILFILE left undefined.

--- snip ---

The necessary changes should be very simple, if a lot of busywork. As  
as I said in my
initial post, I volunteer to do the required work. (However, I can  
only test on
MacOS or Linux).

With kind regards,
Eric



From astewart at TerraGoTech.com  Mon Oct 30 14:09:08 2006
From: astewart at TerraGoTech.com (Alan Stewart)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] sample scaling
In-Reply-To: <45461F43.9050101@pobox.com>
References: <454614C3.6000504@TerraGoTech.com> <45461F43.9050101@pobox.com>
Message-ID: <45464DD4.3030105@TerraGoTech.com>

Thanks for the response, Frank.

I didn't know about the -mm flag for gdalinfo. However, it does reveal
the sample values as lying in the 0-2047 range. I was using Global
Mapper, but OpenEV has the same issue. I also have been provided a JPEG
overview; the overview color balance matches the display of the 16 bit
per sample image.

In looking more closely at tiffinfo output, I see one difference other
than the expected change in bits per sample. The 16 bit per sample image
has a Photometric Interpretation of "min-is-black" and has an Extra
Samples tag not present in the 8 bit per sample image. The 8 bit per
sample image has a Photometric Interpretation of "RGB color".

Frank Warmerdam wrote:
> Alan Stewart wrote:
>> I've got NITF files that have three bands @ 16 bits per sample. I 
>> need to produce a GeoTIFF with 8-bit samples, JPEG compressed. In my 
>> first attempts the resulting image appeared black. I discovered a 
>> GDAL metadata item. "NITF_USE00A_DYNAMIC_RANGE=02047", which I take 
>> it means that sample values range from 0 to 2047. If I use "-scale 0 
>> 2047 0 65535" the resulting TIFF looks fine, but if I use "-scale 0 
>> 2047 0 255 -ot Byte" the image is much darker and greenish. I thought 
>> this would just rescale the sample values to fit in the range 0-255 
>> and create a TIFF with 8-bit samples. I didn't expect the color 
>> balance of the image to change. Is "Byte" actually a signed value or 
>> something? If so, how do I get an unsigned 8-bit sample?
>
> Alan,
>
> Your understanding of how things should work sound right.  I don't know
> why the results are bad.  How are you checking the results?  What viewer
> did you use with the -scale 0 2047 0 65536 output tiff that looked good?
>
> You might want to view your image in OpenEV, and inspect various pixels
> to make sure that the dynamic range info of 02047 is accurate.  Or
> use "gdalinfo -mm your.ntf" to actually scan the data for min and max 
> values.
>
> Best regards,

-- 

Alan Stewart
Senior Software Architect
TerraGo Technologies, Inc.
astewart@TerraGoTech.com
678-391-9700 x9615

"TerraGo Technologies? GeoPDF is proving to be the smart choice for key
players in the intelligence community."
	- Amy Stankiewicz, Editor-in-Chief, Geospatial Solutions




From warmerdam at pobox.com  Mon Oct 30 14:28:37 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal_merge.py failed for ENVI format
In-Reply-To: <28de5e310610301053w59b85705wbb7543b0d97f113d@mail.gmail.com>
References: <28de5e310610301053w59b85705wbb7543b0d97f113d@mail.gmail.com>
Message-ID: <45465265.8080105@pobox.com>

Nicolas Ribot wrote:
> Hi all
> (I'm glad to join the list for the first time)
> 
> I tried to merge several TIF files (representing Canada, in WGS84).
> These files represent about 6 Gb of data, so I chose the ENVI file
> type, to circumvent the 4 Gb limit of tiff files.

Nicolas,

The gdal_merge script loads the entire source image into RAM so
if your source images are large it will generally fail.  It may or
may not properly report the out of memory condition.

> I'm using FWTools-1.0.7 on Ubuntu (intel 32 bits)
> Data are on a USB disk, formatted in ext2.
> I moved the data from a fat32 partition to a NTFS one, then format the
> partition in ext2, and moved data back on this partition.
> Can this be the reason of the failure ?

I vaguely recall some odd issue with fat32 bit partitions and
large files on win32, but I don't think this will be affecting
things on linux.  I gather the output is being written to an ext2
partition?

It is likely just an out of memory condition as mentioned above.

BTW, the solution is to use gdalwarp to merge the datasets as mentioned
in another recent post here (or perhaps on fwtools mailing list?).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Oct 30 14:43:10 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 7: API Change for the VSIxxxL family of
	file	functions
In-Reply-To: <5170F248-52A4-4C7E-9E8C-EC62B85A62E1@gmx.net>
References: <5170F248-52A4-4C7E-9E8C-EC62B85A62E1@gmx.net>
Message-ID: <454655CE.6070809@pobox.com>

Eric D?nges wrote:
> Hi list,
> 
> 
> in response to my gripe about VSIOpenL claiming to return a FILE* when 
> it's not,
> Frank said I should submit an RFC, so here it is.
> 
> --- snip ---
> 
> RFC 7: API Change for the VSIxxxL family of file functions

Folks,

Eric has volunteered to make the changes which touch a lot of files.  I
think we would either need to grant Eric commiter access or else have
an existing commiter take responsibility for applying all Eric's changes.

There are some classes, like the Raw dataset classes that use FILE *
and a boolean to indicate that the FILE * should either be interpreted
as a "large file API" pointer (ie. VSIFOpenL()) or a small file api pointer
(ie. VSIFOpen()).  So there will be a few changes at the api and class
contents level (beyond just the type change).

Also, this change will require a code change in any application (or private
driver) code that uses the large file API.  That is, we are making a
backwards incompatible source level change in the C API (at the CPL level).
I am generally very nervous about doing this.

At the very least, I think backward compatibility issues need to be
addressed in the RFC.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From eric.doenges at gmx.net  Tue Oct 31 05:16:16 2006
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 7: API Change for the VSIxxxL family of
	file	functions
In-Reply-To: <454655CE.6070809@pobox.com>
References: <5170F248-52A4-4C7E-9E8C-EC62B85A62E1@gmx.net>
	<454655CE.6070809@pobox.com>
Message-ID: <CFD0C2D4-07A5-4EB3-9A4D-11216DFEA8B7@gmx.net>


Am 30.10.2006 um 20:43 schrieb Frank Warmerdam:

> There are some classes, like the Raw dataset classes that use FILE *
> and a boolean to indicate that the FILE * should either be interpreted
> as a "large file API" pointer (ie. VSIFOpenL()) or a small file api  
> pointer
> (ie. VSIFOpen()).  So there will be a few changes at the api and class
> contents level (beyond just the type change).

Good point; I wasn't aware that there are drivers that use both  
VSIFOpen and VSIFOpenL
at the same time. Perhaps this would be a good time to move those  
drivers over
to using VSIFOpenL exclusively ? (I'm assuming that VSIFOpenL and  
friends can serve as
a complete replacement for VSIFOpen).

> Also, this change will require a code change in any application (or  
> private
> driver) code that uses the large file API.  That is, we are making a
> backwards incompatible source level change in the C API (at the CPL  
> level).
> I am generally very nervous about doing this.

The only possible way to avoid this problem would be to typedef  
VSILFILE* to a void
pointer since any pointer can be converted to a void pointer without  
warnings or
errors in C and C++. However, this way we would loose the better type  
checking by the
compiler.

So, IMO the question to answer here is how much code outside of gdal/ 
ogr itself uses
the VSIFxxxL family of functions ?

> At the very least, I think backward compatibility issues need to be
> addressed in the RFC.

Ok, so I'll add the following section:

-- snip --

Backwards compatibility issues

Any code that uses the VSIFxxxL family of functions must be changed  
to use VSILFILE
instead of FILE, since unchanged code will fail to compile with C++  
compilers and
generate warnings with (most) C compilers. However, binary  
compatibility when using gdal
as a shared library should not be affected, since the VSIFxxxL family  
of functions are C
wrapper functions that are not subject to C++ type mangling rules,  
and the actual
implementation of the functions remains unchanged.

-- snip --

With kind regards,
Eric

From warmerdam at pobox.com  Tue Oct 31 10:32:48 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RFC 7: API Change for the VSIxxxL family
	of	file	functions
In-Reply-To: <CFD0C2D4-07A5-4EB3-9A4D-11216DFEA8B7@gmx.net>
References: <5170F248-52A4-4C7E-9E8C-EC62B85A62E1@gmx.net>	<454655CE.6070809@pobox.com>
	<CFD0C2D4-07A5-4EB3-9A4D-11216DFEA8B7@gmx.net>
Message-ID: <45476CA0.7050609@pobox.com>

Eric D?nges wrote:
> Good point; I wasn't aware that there are drivers that use both VSIFOpen 
> and VSIFOpenL
> at the same time. Perhaps this would be a good time to move those 
> drivers over
> to using VSIFOpenL exclusively ? (I'm assuming that VSIFOpenL and 
> friends can serve as
> a complete replacement for VSIFOpen).

Eric,

VSIFOpenL() is not an across the board replacement for VSIFOpen().
The non-L version of the functions continue to exist because
some drivers use stdio functions that are not implemented for in
the "L" api, such as VSIFGets().  In some cases driver code directly
calls stdio functions using the FILE *.

Nevertheless, most of the "non-L" drivers using the raw dataset
classes could likely be upgraded to use the "L" api.

>> Also, this change will require a code change in any application (or 
>> private
>> driver) code that uses the large file API.  That is, we are making a
>> backwards incompatible source level change in the C API (at the CPL 
>> level).
>> I am generally very nervous about doing this.
> 
> The only possible way to avoid this problem would be to typedef 
> VSILFILE* to a void
> pointer since any pointer can be converted to a void pointer without 
> warnings or
> errors in C and C++. However, this way we would loose the better type 
> checking by the
> compiler.

Agreed.  One approach might be to make VSILFILE* a void pointer for now
with the intention of making it something else that would trigger type
checking failures later - perhaps when we switch to GDAL 2.0 and are
willing to sacrifice some backwards compatibility anyways.

In the meantime applications can upgrade to the new mechanisms without
too much disruption.

> So, IMO the question to answer here is how much code outside of gdal/ogr 
> itself uses
> the VSIFxxxL family of functions ?

This is of course unknowable.  I have delivered some applications to
clients that will stop building without changes, but not too many.  But
one can never know how much of this sort of thing is out there.

Use and manipulation of the "L" api is the preferred way of handling
files read from memory buffers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From zuyuan.wang at wsl.ch  Mon Oct 30 05:37:59 2006
From: zuyuan.wang at wsl.ch (Zuyuan Wang)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] COmpliler errors in GDAL 1.3.2 on windows with VC6
Message-ID: <5.2.1.1.1.20061030112939.01f5a0a8@mail.wsl.ch>

Hello, there,

   I am a newer to GDAL. I have already updated the two files : 
IdrisiDataset.cpp, and  cpl_odbc.cpp. as the instruction as

  ************
  http://lists.maptools.org/pipermail/gdal-dev/2006-May/008789.html
  **************

   But when I used VC6 on windows to compile GDAL 1.3.2 again , I still got 
the following error info:

   *******************
   cpl_odbc.cpp
   cpl_odbc.cpp(412) : error C2440: '=' : cannot convert from 'int *' to 
'long *'
         Types pointed to are unrelated; conversion requires 
reinterpret_cast, C-
    style cast or function-style cast
   NMAKE : fatal error U1077: 'cl' : return code '0x2'
   Stop.
   NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual 
Studio\VC98\bin\N
   MAKE.EXE"' : return code '0x2'
   Stop.

  *******************



   Any suggestion will be grateful!

   Best regards!

   Zuyuan Wang








- - - - - -
Dr.  Zuyuan Wang
Swiss Federal Research Institute WSL
Zuercherstr. 111, CH-8903 Birmensdorf, SWITZERLAND
Phone: +41 1 739 2691   Fax: +41 1 739 2215
Email:  zuyuan.wang@wsl.ch  


From cgeorges at CSO.Net  Mon Oct 30 03:27:56 2006
From: cgeorges at CSO.Net (Cgeorges)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] password-enabled postgres databases
Message-ID: <200610300827.k9U8Ruh6012470@Mail.CSO.Net>

Hi all,

any chances to provide postgres a login password?

I am thinking of something like:
ogrinfo -ro PG:'host=myhost user=postgis dbname=mydb pass=mypw'

If not:
Are there any workarounds to deal with password-enabled postgres databases?


Thanks in advance,
christian Georges

_________________________________________________________________
E-Mail
versendet via WebMail von CSO.Net Austria


From cgeorges at CSO.Net  Mon Oct 30 04:05:41 2006
From: cgeorges at CSO.Net (Cgeorges)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] RE: password-enabled postgres databases
Message-ID: <200610300905.k9U95fh6019639@Mail.CSO.Net>

Hi again,

you better look twice!

For all who are interested in a solution:
ogrinfo -ro PG:'host=myhost user=postgis dbname=mydb password=mypw'
works perfectly!

Just a hint: I couldn't find any reference to the 'password' option
in the postgres driver documentation (drv_pg.html).

Thanks anyhow,
Christian

--------- Original-Nachricht --------

Von: Cgeorges <cgeorges@CSO.Net>

An: gdal-dev@lists.maptools.org <gdal-dev@lists.maptools.org>

Betreff: password-enabled postgres databases

Datum: 30/10/06 09:27



> Hi all,
>
> any chances to provide postgres a login password?
>
> I am thinking of something like:
> ogrinfo -ro PG:'host=myhost user=postgis dbname=mydb pass=mypw'
>
> If not:
> Are there any workarounds to deal with password-enabled postgres
databases?
>
>
> Thanks in advance,
> christian Georges
>
> _________________________________________________________________
> E-Mail
> versendet via WebMail von CSO.Net Austria
>
>
>
>
> 

_________________________________________________________________
E-Mail
versendet via WebMail von CSO.Net Austria


From ealpert at digitalglobe.com  Tue Oct 31 11:06:20 2006
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] swig/perl CVS compile issue
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233B6CB3E@COMAIL01.digitalglobe.com>

Ari, et al,

I downloaded the CVS version of gdal yesterday and got a compile error
in the swig perl directory. The problem is with gdalconst_wrap.c . Since
it's a .c and not a .cpp it is compiled with gcc (I'm using version gcc
3.2.3 and perl 5.8.0). When I manually compile with g++ I get no errors.

Below is the error:

gcc -c  -I../../gcore -I../../alg -I../../ogr -I../../port -fpic -O2 -g
-pipe -march=i386 -mcpu=i686   -DVERSION=\"\" -DXS_VERSION=\"\" -fPIC
"-I/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE"   gdalconst_wrap.c
In file included from
/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/op.h:480,
                 from
/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/perl.h:2268,
                 from gdalconst_wrap.c:705:
/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/reentr.h:602: field
`_crypt_struct' has incomplete type
/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/reentr.h:747: confused
by earlier errors, bailing out
make[1]: *** [gdalconst_wrap.o] Error 1
make[1]: Leaving directory
`/home/ealpert/src/geo_build_mongoose/base_libraries/gdal/swig/perl'
make: *** [build] Error 2


Compiling with g++ creates the .o successfully:

-bash-2.05b$ g++ -c  -I../../gcore -I../../alg -I../../ogr -I../../port
-fpic -O2 -g -pipe -march=i386 -mcpu=i686   -DVERSION=\"\"
-DXS_VERSION=\"\" -fPIC
"-I/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE"   gdalconst_wrap.c
-bash-2.05b$



From ollerery at engr.orst.edu  Tue Oct 31 11:45:46 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <453FC993.8000904@pobox.com>
References: <453DA47C.8060205@thetimoneygroup.com>
	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>
	<453FC993.8000904@pobox.com>
Message-ID: <45477DBA.9000406@engr.orst.edu>

I keep getting the following error:

$ ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.cvs
FAILURE:
Unable to open datasource `thick18_test.cvs' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> PostgreSQL


My CSV file looks like this:
-180,90.00,0.00,4.84
-179,90.00,0.00,4.84
-178,90.00,0.00,4.84
-177,90.00,0.00,4.84
-176,90.00,0.00,4.84
-175,90.00,0.00,4.84

I am not sure why i am getting an unable to open datasource, any ideas 
on what i could be doing wrong would be much appreciated.

Thanks,
-Ryan

From bartvde at osgis.nl  Tue Oct 31 12:11:23 2006
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45477DBA.9000406@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>
	<45477DBA.9000406@engr.orst.edu>
Message-ID: <454783BB.5090804@osgis.nl>

Your filename extension is cvs, are you sure it should not be csv?

Best regards,
Bart

Ryan Ollerenshaw schreef:
> I keep getting the following error:
>
> $ ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.cvs
> FAILURE:
> Unable to open datasource `thick18_test.cvs' with the following drivers.
>  -> ESRI Shapefile
>  -> MapInfo File
>  -> UK .NTF
>  -> SDTS
>  -> TIGER
>  -> S57
>  -> DGN
>  -> VRT
>  -> AVCBin
>  -> REC
>  -> Memory
>  -> CSV
>  -> GML
>  -> PostgreSQL
>
>
> My CSV file looks like this:
> -180,90.00,0.00,4.84
> -179,90.00,0.00,4.84
> -178,90.00,0.00,4.84
> -177,90.00,0.00,4.84
> -176,90.00,0.00,4.84
> -175,90.00,0.00,4.84
>
> I am not sure why i am getting an unable to open datasource, any ideas 
> on what i could be doing wrong would be much appreciated.
>
> Thanks,
> -Ryan
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde@osgis.nl
http://www.osgis.nl


From ollerery at engr.orst.edu  Tue Oct 31 12:17:13 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <454783BB.5090804@osgis.nl>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>
	<45477DBA.9000406@engr.orst.edu> <454783BB.5090804@osgis.nl>
Message-ID: <45478519.1060107@engr.orst.edu>

Bart van den Eijnden (OSGIS) wrote:
> Your filename extension is cvs, are you sure it should not be csv?
>
> Best regards,
> Bart
>
Yes it did just appear to be a typo,But i am running into a new problem, 
the command:
ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.csv
only seems to create a dbf file, why is there no shp file created?

> Ryan Ollerenshaw schreef:
>> I keep getting the following error:
>>
>> $ ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.cvs
>> FAILURE:
>> Unable to open datasource `thick18_test.cvs' with the following drivers.
>>  -> ESRI Shapefile
>>  -> MapInfo File
>>  -> UK .NTF
>>  -> SDTS
>>  -> TIGER
>>  -> S57
>>  -> DGN
>>  -> VRT
>>  -> AVCBin
>>  -> REC
>>  -> Memory
>>  -> CSV
>>  -> GML
>>  -> PostgreSQL
>>
>>
>> My CSV file looks like this:
>> -180,90.00,0.00,4.84
>> -179,90.00,0.00,4.84
>> -178,90.00,0.00,4.84
>> -177,90.00,0.00,4.84
>> -176,90.00,0.00,4.84
>> -175,90.00,0.00,4.84
>>
>> I am not sure why i am getting an unable to open datasource, any 
>> ideas on what i could be doing wrong would be much appreciated.
>>
>>
>
>


From bartvde at osgis.nl  Tue Oct 31 12:49:00 2006
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45478519.1060107@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>
	<454783BB.5090804@osgis.nl> <45478519.1060107@engr.orst.edu>
Message-ID: <45478C8C.1030001@osgis.nl>

AFAIK, in order to get a shapefile with the actual geometry, you would 
need to use the VRT driver on the CSV file:

http://www.gdal.org/ogr/drv_vrt.html

Best regards,
Bart

Ryan Ollerenshaw schreef:
> Bart van den Eijnden (OSGIS) wrote:
>> Your filename extension is cvs, are you sure it should not be csv?
>>
>> Best regards,
>> Bart
>>
> Yes it did just appear to be a typo,But i am running into a new 
> problem, the command:
> ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.csv
> only seems to create a dbf file, why is there no shp file created?
>
>> Ryan Ollerenshaw schreef:
>>> I keep getting the following error:
>>>
>>> $ ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.cvs
>>> FAILURE:
>>> Unable to open datasource `thick18_test.cvs' with the following 
>>> drivers.
>>>  -> ESRI Shapefile
>>>  -> MapInfo File
>>>  -> UK .NTF
>>>  -> SDTS
>>>  -> TIGER
>>>  -> S57
>>>  -> DGN
>>>  -> VRT
>>>  -> AVCBin
>>>  -> REC
>>>  -> Memory
>>>  -> CSV
>>>  -> GML
>>>  -> PostgreSQL
>>>
>>>
>>> My CSV file looks like this:
>>> -180,90.00,0.00,4.84
>>> -179,90.00,0.00,4.84
>>> -178,90.00,0.00,4.84
>>> -177,90.00,0.00,4.84
>>> -176,90.00,0.00,4.84
>>> -175,90.00,0.00,4.84
>>>
>>> I am not sure why i am getting an unable to open datasource, any 
>>> ideas on what i could be doing wrong would be much appreciated.
>>>
>>>
>>
>>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


-- 
Bart van den Eijnden
OSGIS, Open Source GIS
bartvde@osgis.nl
http://www.osgis.nl


From warmerdam at pobox.com  Tue Oct 31 13:03:56 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45478519.1060107@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>
	<454783BB.5090804@osgis.nl> <45478519.1060107@engr.orst.edu>
Message-ID: <4547900C.6000309@pobox.com>

Ryan Ollerenshaw wrote:
> Bart van den Eijnden (OSGIS) wrote:
>> Your filename extension is cvs, are you sure it should not be csv?
>>
>> Best regards,
>> Bart
>>
> Yes it did just appear to be a typo,But i am running into a new problem, 
> the command:
> ogr2ogr -f "ESRI Shapefile" thick18.shp thick18_test.csv
> only seems to create a dbf file, why is there no shp file created?

Ryan,

Because as far as OGR knows the csv file is non-spatial, so when it creates
the "shapefile" it just creates the .dbf file and no spatial files.

If you want to treat the first two columns as a point location you need to
follow extra steps (ie. using an OGR VRT file) to turn them into a spatial
location.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Tue Oct 31 13:30:04 2006
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Re: swig/perl CVS compile issue
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233B6CB3E@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233B6CB3E@COMAIL01.digitalglobe.com>
Message-ID: <4547962C.2000805@tkk.fi>

Ethan Alpert kirjoitti:
> Ari, et al,
>
> I downloaded the CVS version of gdal yesterday and got a compile error
> in the swig perl directory. The problem is with gdalconst_wrap.c . Since
> it's a .c and not a .cpp it is compiled with gcc (I'm using version gcc
> 3.2.3 and perl 5.8.0). When I manually compile with g++ I get no errors.
>   

Ok, my fault. The CCFLAGS=>"-fpic" which I added to Makefile.PL last 
June is the culprit. I don't remember why I added it, in the Makefile.PL 
I comment "needed for SELinux". The problem is that "-fpic" should be 
probably added to CFLAGS for SELinux, now it overrides the default contents.

I don't know how to add to CCFLAGS, so maybe this line should be 
commented out and SELinux dealt separately somehow.

Renaming the file to gdalconst_wrap.cpp seems to help too.

Ari

> Below is the error:
>
> gcc -c  -I../../gcore -I../../alg -I../../ogr -I../../port -fpic -O2 -g
> -pipe -march=i386 -mcpu=i686   -DVERSION=\"\" -DXS_VERSION=\"\" -fPIC
> "-I/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE"   gdalconst_wrap.c
> In file included from
> /usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/op.h:480,
>                  from
> /usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/perl.h:2268,
>                  from gdalconst_wrap.c:705:
> /usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/reentr.h:602: field
> `_crypt_struct' has incomplete type
> /usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE/reentr.h:747: confused
> by earlier errors, bailing out
> make[1]: *** [gdalconst_wrap.o] Error 1
> make[1]: Leaving directory
> `/home/ealpert/src/geo_build_mongoose/base_libraries/gdal/swig/perl'
> make: *** [build] Error 2
>
>
> Compiling with g++ creates the .o successfully:
>
> -bash-2.05b$ g++ -c  -I../../gcore -I../../alg -I../../ogr -I../../port
> -fpic -O2 -g -pipe -march=i386 -mcpu=i686   -DVERSION=\"\"
> -DXS_VERSION=\"\" -fPIC
> "-I/usr/lib/perl5/5.8.0/i386-linux-thread-multi/CORE"   gdalconst_wrap.c
> -bash-2.05b$
>
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ollerery at engr.orst.edu  Tue Oct 31 13:44:21 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <4547900C.6000309@pobox.com>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>
	<454783BB.5090804@osgis.nl> <45478519.1060107@engr.orst.edu>
	<4547900C.6000309@pobox.com>
Message-ID: <45479985.9030606@engr.orst.edu>

>
>
> Because as far as OGR knows the csv file is non-spatial, so when it 
> creates
> the "shapefile" it just creates the .dbf file and no spatial files.
>
> If you want to treat the first two columns as a point location you 
> need to
> follow extra steps (ie. using an OGR VRT file) to turn them into a 
> spatial
> location.
>
> Best regards,

Thank you for the help but the documentation for using an OGR VRT file 
does not seem to be clear.  I created a ovf file (see below) and ran
# ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.cvs
but still no change only a dbf file is created.  I do not see in the VRT 
documentation how to use the ovf file.

Resources I have found:
http://gdal.maptools.org/ogr/drv_vrt.html
http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData

-Ryan

From nicky666 at gmail.com  Tue Oct 31 13:52:13 2006
From: nicky666 at gmail.com (Nicolas Ribot)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] gdal_merge.py failed for ENVI format
In-Reply-To: <45465265.8080105@pobox.com>
References: <28de5e310610301053w59b85705wbb7543b0d97f113d@mail.gmail.com>
	<45465265.8080105@pobox.com>
Message-ID: <28de5e310610311052g7080942btc5f4b1ea55a31dea@mail.gmail.com>

>
> The gdal_merge script loads the entire source image into RAM so
> if your source images are large it will generally fail.  It may or
> may not properly report the out of memory condition.

Complete image is about 6 Gb, and I have 1 Gb of RAM...

> I vaguely recall some odd issue with fat32 bit partitions and
> large files on win32, but I don't think this will be affecting
> things on linux.  I gather the output is being written to an ext2
> partition?
>

Yes it is.

>
> BTW, the solution is to use gdalwarp to merge the datasets as mentioned
> in another recent post here (or perhaps on fwtools mailing list?).
>

I will search the lists for this post.

Thanx  a lot.

From ollerery at engr.orst.edu  Tue Oct 31 13:54:17 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45479985.9030606@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>	<454783BB.5090804@osgis.nl>
	<45478519.1060107@engr.orst.edu>	<4547900C.6000309@pobox.com>
	<45479985.9030606@engr.orst.edu>
Message-ID: <45479BD9.1020509@engr.orst.edu>


Ryan Ollerenshaw wrote:
>>
>>
>> Because as far as OGR knows the csv file is non-spatial, so when it 
>> creates
>> the "shapefile" it just creates the .dbf file and no spatial files.
>>
>> If you want to treat the first two columns as a point location you 
>> need to
>> follow extra steps (ie. using an OGR VRT file) to turn them into a 
>> spatial
>> location.
>>
>> Best regards,
>
> Thank you for the help but the documentation for using an OGR VRT file 
> does not seem to be clear.  I created a ovf file (see below) and ran
> # ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.cvs
> but still no change only a dbf file is created.  I do not see in the 
> VRT documentation how to use the ovf file.
>
> Resources I have found:
> http://gdal.maptools.org/ogr/drv_vrt.html
> http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData 
>

ovf file:
<OGRVRTDataSource>
        <OGRVRTLayer  name="thick18">
        <SrcDataSource>thick18</SrcDataSource>
        <SrcLayer>thick18.csv</SrcLayer>
        <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
        <GeometryType>wkbPoint</GeometryType>
        </OGRVRTLayer>
</OGRVRTDataSource>

csv file:
lat,long,water_thic,error
-180,     90.00,      0.00,      4.84 
-179,     90.00,      0.00,      4.84 
-178,     90.00,      0.00,      4.84 
-177,     90.00,      0.00,      4.84 
-176,     90.00,      0.00,      4.84 
-175,     90.00,      0.00,      4.84 
-174,     90.00,      0.00,      4.84 
....
....
>
> -Ryan
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From devon at avenza.com  Tue Oct 31 13:54:47 2006
From: devon at avenza.com (Devon Noonan)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Opening E00 files
Message-ID: <200610311854.k9VIshPX019478@liam.avenza.com>

Here is my situation; I originally used the ogrinfo utility to see if there
was support for the E00 sections that I am looking for. It opened the file
(not a binary source but a single e00 file) and gave me the sections back.
Excellent, no problems here. Now I have integrated it in to my program and
tried to open a file, it continually tells me that the file could not be
opened. I used the RegisterOGRAVCBin() call to initialize the driver. When
the driver tries to open the file it throws the error. Do I need to call in
to the AVC library before or after I try to open the file?

Any help would be appreciated!

Devon Noonan


From warmerdam at pobox.com  Tue Oct 31 14:03:08 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45479985.9030606@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>	<454783BB.5090804@osgis.nl>
	<45478519.1060107@engr.orst.edu>	<4547900C.6000309@pobox.com>
	<45479985.9030606@engr.orst.edu>
Message-ID: <45479DEC.4030202@pobox.com>

Ryan Ollerenshaw wrote:
> Thank you for the help but the documentation for using an OGR VRT file 
> does not seem to be clear.  I created a ovf file (see below) and ran
> # ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.cvs
> but still no change only a dbf file is created.  I do not see in the VRT 
> documentation how to use the ovf file.
> 
> Resources I have found:
> http://gdal.maptools.org/ogr/drv_vrt.html
> http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData

Ryan,

You would use the .ovf file as the input file.

eg.
ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.ovf

The OGR VRT driver will then open the referenced .csv file, and transform
the features read from it to have a spatial component.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ollerery at engr.orst.edu  Tue Oct 31 14:14:10 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45479DEC.4030202@pobox.com>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>	<454783BB.5090804@osgis.nl>
	<45478519.1060107@engr.orst.edu>	<4547900C.6000309@pobox.com>
	<45479985.9030606@engr.orst.edu> <45479DEC.4030202@pobox.com>
Message-ID: <4547A082.2090908@engr.orst.edu>


Frank Warmerdam wrote:
> Ryan Ollerenshaw wrote:
>> Thank you for the help but the documentation for using an OGR VRT 
>> file does not seem to be clear.  I created a ovf file (see below) and 
>> ran
>> # ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.cvs
>> but still no change only a dbf file is created.  I do not see in the 
>> VRT documentation how to use the ovf file.
>>
>> Resources I have found:
>> http://gdal.maptools.org/ogr/drv_vrt.html
>> http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData 
>>
>
> Ryan,
>
> You would use the .ovf file as the input file.
>
> eg.
> ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.ovf
>
> The OGR VRT driver will then open the referenced .csv file, and transform
> the features read from it to have a spatial component.
Still not quite there, when i try to use the ovf file as my input i get 
the following error, i also tried to name my input file .vrt but still 
the same error.

FAILURE:
Unable to open datasource `E:\Ryan\solid_earth\thick18.ovf' with the 
following drivers.
  -> ESRI Shapefile
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> MapInfo File
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> SQLite
  -> ODBC
  -> OGDI
  -> PostgreSQL
  -> FMEObjects Gateway

ovf file:
<OGRVRTDataSource>
        <OGRVRTLayer  name="thick18">
        <SrcDataSource>thick18</SrcDataSource>
        <SrcLayer>E:\Ryan\solid_earth</SrcLayer>
        <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
        <GeometryType>wkbPoint</GeometryType>
        </OGRVRTLayer>
</OGRVRTDataSource>


From ollerery at engr.orst.edu  Tue Oct 31 14:26:10 2006
From: ollerery at engr.orst.edu (Ryan Ollerenshaw)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <4547A082.2090908@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>	<454783BB.5090804@osgis.nl>	<45478519.1060107@engr.orst.edu>	<4547900C.6000309@pobox.com>	<45479985.9030606@engr.orst.edu>
	<45479DEC.4030202@pobox.com> <4547A082.2090908@engr.orst.edu>
Message-ID: <4547A352.2090902@engr.orst.edu>


>
> Frank Warmerdam wrote:
>> Ryan Ollerenshaw wrote:
>>> Thank you for the help but the documentation for using an OGR VRT 
>>> file does not seem to be clear.  I created a ovf file (see below) 
>>> and ran
>>> # ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.cvs
>>> but still no change only a dbf file is created.  I do not see in the 
>>> VRT documentation how to use the ovf file.
>>>
>>> Resources I have found:
>>> http://gdal.maptools.org/ogr/drv_vrt.html
>>> http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData 
>>>
>>
>> Ryan,
>>
>> You would use the .ovf file as the input file.
>>
>> eg.
>> ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.ovf
>>
>> The OGR VRT driver will then open the referenced .csv file, and 
>> transform
>> the features read from it to have a spatial component.
> Still not quite there, when i try to use the ovf file as my input i 
> get the following error, i also tried to name my input file .vrt but 
> still the same error.
>
> FAILURE:
> Unable to open datasource `E:\Ryan\solid_earth\thick18.ovf' with the 
> following drivers.
>  -> ESRI Shapefile
>  -> UK .NTF
>  -> SDTS
>  -> TIGER
>  -> S57
>  -> MapInfo File
>  -> DGN
>  -> VRT
>  -> AVCBin
>  -> REC
>  -> Memory
>  -> CSV
>  -> GML
>  -> SQLite
>  -> ODBC
>  -> OGDI
>  -> PostgreSQL
>  -> FMEObjects Gateway
>
> ovf file:
> <OGRVRTDataSource>
>        <OGRVRTLayer  name="thick18">
>        <SrcDataSource>thick18</SrcDataSource>
>        <SrcLayer>E:\Ryan\solid_earth</SrcLayer>
>        <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
>        <GeometryType>wkbPoint</GeometryType>
>        </OGRVRTLayer>
> </OGRVRTDataSource>
>

Ok i got it the problem was in my ovf file, correct format for use with 
a cvs file is:
<OGRVRTDataSource>
        <OGRVRTLayer  name="thick18">
        <SrcDataSource>E:\Ryan\solid_earth\thick18.csv</SrcDataSource>
        <SrcLayer>thick18</SrcLayer>
        <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
        <GeometryType>wkbPoint</GeometryType>
        </OGRVRTLayer>
</OGRVRTDataSource>

thanks for your help!

From craig.miller at spatialminds.com  Tue Oct 31 14:28:26 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:25 2007
Subject: [Gdal-dev] Opening E00 files
In-Reply-To: <200610311854.k9VIshPX019478@liam.avenza.com>
Message-ID: <019401c6fd22$bd10fb80$3301a8c0@vaio>

In case you don't get any solid replies, I'm going to go out on a limb here.
I thought I saw in the latest CVS source that there is in fact a new
separate E00 driver now defined.  I have a vague memory of it being
integrated with the AVCBin driver before, but I'm not sure that it get's
compiled in by default.  I thought I saw a new E00 #define or something
similar when I was in that file last week manually setting #defines so I
could use non-default drivers (postgis) with Visual Studio .sln files.  I
made a note of it, because E00 import is something I'd like to add and would
prefer to do it within the OGR framework.

--Craig
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Devon Noonan
Sent: Tuesday, October 31, 2006 10:55 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Opening E00 files

Here is my situation; I originally used the ogrinfo utility to see if there
was support for the E00 sections that I am looking for. It opened the file
(not a binary source but a single e00 file) and gave me the sections back.
Excellent, no problems here. Now I have integrated it in to my program and
tried to open a file, it continually tells me that the file could not be
opened. I used the RegisterOGRAVCBin() call to initialize the driver. When
the driver tries to open the file it throws the error. Do I need to call in
to the AVC library before or after I try to open the file?

Any help would be appreciated!

Devon Noonan

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Oct 31 14:36:41 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <4547A082.2090908@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>	<454783BB.5090804@osgis.nl>	<45478519.1060107@engr.orst.edu>	<4547900C.6000309@pobox.com>	<45479985.9030606@engr.orst.edu>
	<45479DEC.4030202@pobox.com> <4547A082.2090908@engr.orst.edu>
Message-ID: <4547A5C9.3080904@pobox.com>

Ryan Ollerenshaw wrote:

> ovf file:
> <OGRVRTDataSource>
>        <OGRVRTLayer  name="thick18">
>        <SrcDataSource>thick18</SrcDataSource>
>        <SrcLayer>E:\Ryan\solid_earth</SrcLayer>
>        <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
>        <GeometryType>wkbPoint</GeometryType>
>        </OGRVRTLayer>
> </OGRVRTDataSource>

Ryan,

Normally the SrcDataSource would point to your csv file, and SrcLayer would
be the basename of your .csv file. So if you csv file was thick18.csv in
the E:\Ryan\solid_earth directory you would use:

<OGRVRTDataSource>
        <OGRVRTLayer  name="thick18">
         <SrcDataSource>E:\Ryan\solid_earth\thick18.csv</SrcDataSource>
         <SrcLayer>thick18</SrcLayer>
         <GeometryField encoding="PointFromColumns" x="long" y="lat"/>
         <GeometryType>wkbPoint</GeometryType>
         </OGRVRTLayer>
</OGRVRTDataSource>

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From craig.miller at spatialminds.com  Tue Oct 31 14:37:08 2006
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] Opening E00 files
In-Reply-To: <200610311854.k9VIshPX019478@liam.avenza.com>
Message-ID: <019d01c6fd23$f4528810$3301a8c0@vaio>

Followup to my previous post.  In the file
gdal\ogr\ogrsf_frmts\generic\ogrregisterall.cpp there are several calls to
RegisterXYZ() each of which is nestled between a pair of #ifdef XYZ_ENABLED
#endif statements.  At the bottom of this file is a call to RegisterOGRE00()
that is commented out (no #define).  I've never tried it, but you might try
calling RegisterOGRE00 manually and/or uncomment this line if you want to
use OGRRegisterAll();.

--Craig
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Devon Noonan
Sent: Tuesday, October 31, 2006 10:55 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Opening E00 files

Here is my situation; I originally used the ogrinfo utility to see if there
was support for the E00 sections that I am looking for. It opened the file
(not a binary source but a single e00 file) and gave me the sections back.
Excellent, no problems here. Now I have integrated it in to my program and
tried to open a file, it continually tells me that the file could not be
opened. I used the RegisterOGRAVCBin() call to initialize the driver. When
the driver tries to open the file it throws the error. Do I need to call in
to the AVC library before or after I try to open the file?

Any help would be appreciated!

Devon Noonan

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From devon at avenza.com  Tue Oct 31 14:53:04 2006
From: devon at avenza.com (Devon Noonan)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] Opening E00 files
In-Reply-To: <019401c6fd22$bd10fb80$3301a8c0@vaio>
Message-ID: <200610311953.k9VJr1OQ022607@liam.avenza.com>

To clarify a little, I used the ogrinfo tool from the fwtools install. I
also noted the commented out register call, and that is why I am confused. 

-----Original Message-----
From: Craig Miller [mailto:craig.miller@spatialminds.com] 
Sent: October 31, 2006 2:28 PM
To: 'Devon Noonan'; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] Opening E00 files

In case you don't get any solid replies, I'm going to go out on a limb here.
I thought I saw in the latest CVS source that there is in fact a new
separate E00 driver now defined.  I have a vague memory of it being
integrated with the AVCBin driver before, but I'm not sure that it get's
compiled in by default.  I thought I saw a new E00 #define or something
similar when I was in that file last week manually setting #defines so I
could use non-default drivers (postgis) with Visual Studio .sln files.  I
made a note of it, because E00 import is something I'd like to add and would
prefer to do it within the OGR framework.

--Craig
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Devon Noonan
Sent: Tuesday, October 31, 2006 10:55 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Opening E00 files

Here is my situation; I originally used the ogrinfo utility to see if there
was support for the E00 sections that I am looking for. It opened the file
(not a binary source but a single e00 file) and gave me the sections back.
Excellent, no problems here. Now I have integrated it in to my program and
tried to open a file, it continually tells me that the file could not be
opened. I used the RegisterOGRAVCBin() call to initialize the driver. When
the driver tries to open the file it throws the error. Do I need to call in
to the AVC library before or after I try to open the file?

Any help would be appreciated!

Devon Noonan

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Oct 31 16:08:13 2006
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] Re: WFS and default namespace
In-Reply-To: <2576812186CDD411BF1500508B6DCE9510413F16@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE9510413F16@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <4547BB3D.8040505@pobox.com>


Folks,

The logic to strip namespaces from gml attributes and feature class names
has been committed in CVS.  I have also written a simple test script as
part of the gdalautotest suite for the gml reading support.  It previously
lacked one.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sebastian at palladiumconsulting.com  Tue Oct 31 17:04:27 2006
From: sebastian at palladiumconsulting.com (Sebastian Good)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] OGR thread-safety; .NET wrapper
Message-ID: <4547C86B.6070809@palladiumconsulting.com>

I understand from previous posts that GDAL and OGR are not thread-safe. 
Is there an authoritative discussion somewhere about which components 
are and aren't? I am interested in using OGR components in a 
server-based application, and would be willing to contribute 
modifications to ensure thread-safety, but am not sure where to start.

I am working with a .NET wrapper of my own doing, which might also be of 
interest, as it properly encapsulates pointers in objects which ensure 
proper garbage collection.

-- 
Sebastian Good
Palladium Consulting


-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3301 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20061031/3923b74c/smime.bin
From mateusz at loskot.net  Tue Oct 31 17:22:25 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] ogr2ogr Unable to open datasource
In-Reply-To: <45479985.9030606@engr.orst.edu>
References: <453DA47C.8060205@thetimoneygroup.com>	<453EE607.1000609@pobox.com>	<453FB10D.2000308@thetimoneygroup.com>	<453FC993.8000904@pobox.com>	<45477DBA.9000406@engr.orst.edu>	<454783BB.5090804@osgis.nl>
	<45478519.1060107@engr.orst.edu>	<4547900C.6000309@pobox.com>
	<45479985.9030606@engr.orst.edu>
Message-ID: <4547CCA1.7020707@loskot.net>

Ryan Ollerenshaw wrote:
>>
>>
>> Because as far as OGR knows the csv file is non-spatial, so when it
>> creates
>> the "shapefile" it just creates the .dbf file and no spatial files.
>>
>> If you want to treat the first two columns as a point location you
>> need to
>> follow extra steps (ie. using an OGR VRT file) to turn them into a
>> spatial
>> location.
>>
>> Best regards,
> 
> Thank you for the help but the documentation for using an OGR VRT file
> does not seem to be clear.  I created a ovf file (see below) and ran
> # ogr2ogr -f "ESRI Shapefile" thick18.shp thick18.cvs
> but still no change only a dbf file is created.  I do not see in the VRT
> documentation how to use the ovf file.
> 
> Resources I have found:
> http://gdal.maptools.org/ogr/drv_vrt.html
> http://mapserver.gis.umn.edu/docs/reference/vector_data/VirtualSpatialData

Ryan,

There was similar problem discussed a few a week ago.
Here is explanation of how to work with CSV through VRT:

http://lists.maptools.org/pipermail/gdal-dev/2006-October/010377.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Oct 31 17:26:13 2006
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] COmpliler errors in GDAL 1.3.2 on windows with VC6
In-Reply-To: <5.2.1.1.1.20061030112939.01f5a0a8@mail.wsl.ch>
References: <5.2.1.1.1.20061030112939.01f5a0a8@mail.wsl.ch>
Message-ID: <4547CD85.9040108@loskot.net>

Zuyuan Wang wrote:
> Hello, there,
> 
>   I am a newer to GDAL. I have already updated the two files :
> IdrisiDataset.cpp, and  cpl_odbc.cpp. as the instruction as
> 
>  ************
>  http://lists.maptools.org/pipermail/gdal-dev/2006-May/008789.html
>  **************
> 
>   But when I used VC6 on windows to compile GDAL 1.3.2 again , I still
> got the following error info:
> 
>   *******************
>   cpl_odbc.cpp
>   cpl_odbc.cpp(412) : error C2440: '=' : cannot convert from 'int *' to
> 'long *'
>         Types pointed to are unrelated; conversion requires
> reinterpret_cast, C-
>    style cast or function-style cast
>   NMAKE : fatal error U1077: 'cl' : return code '0x2'
>   Stop.
>   NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual
> Studio\VC98\bin\N
>   MAKE.EXE"' : return code '0x2'
>   Stop.
> 
>  *******************
> 
> 
> 
>   Any suggestion will be grateful!

Zuyuan,

Are you sure you've updated cpl_odbc.cpp but not cpl_odbc.h ?

In the link with solution you pasted above directs to cpl_odbc.h:

http://www.gdal.org/srctree/port/cpl_odbc.h

but

it should point to

http://www.gdal.org/srctree/port/cpl_odbc.cpp

So, please check it and try to compile again.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Tue Oct 31 18:35:30 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] OGR thread-safety; .NET wrapper
In-Reply-To: <4547C86B.6070809@palladiumconsulting.com>
References: <4547C86B.6070809@palladiumconsulting.com>
Message-ID: <f3b73b7d0610311535j2006e42by22569e2edb830bf@mail.gmail.com>

Sebastian,

> I understand from previous posts that GDAL and OGR are not thread-safe.
> Is there an authoritative discussion somewhere about which components
> are and aren't? I am interested in using OGR components in a
> server-based application, and would be willing to contribute
> modifications to ensure thread-safety, but am not sure where to start.
>

You can search for the static variables and see how GDAL is using
them. All of the subsequent libraries (such as Proj.4) may also affect
the thread safety.

> I am working with a .NET wrapper of my own doing, which might also be of
> interest, as it properly encapsulates pointers in objects which ensure
> proper garbage collection.
>

How about the SWIG generated C# API?

Best Regards,

Tamas Szekeres

From sy at perkins.net  Tue Oct 31 18:51:20 2006
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] OGR thread-safety; .NET wrapper
In-Reply-To: <f3b73b7d0610311535j2006e42by22569e2edb830bf@mail.gmail.com>
References: <4547C86B.6070809@palladiumconsulting.com>
	<f3b73b7d0610311535j2006e42by22569e2edb830bf@mail.gmail.com>
Message-ID: <1162338680.12862.274692331@webmail.messagingengine.com>


On Wed, 1 Nov 2006 00:35:30 +0100, "Tamas Szekeres"
<szekerest@gmail.com> said:

> > I am working with a .NET wrapper of my own doing, which might also be of
> > interest, as it properly encapsulates pointers in objects which ensure
> > proper garbage collection.
> >
> 
> How about the SWIG generated C# API?

I haven't looked into the SWIG C# bindings yet, but now that they're
being officially looked after, I'd second Tamas' comment that that's the
way to go.

Though if you really want to roll your own bindings a few of us put
together a set which was posted to the GDAL list a few months back. You
should be able to find it on GMANE.

While I'm here: Tamas: do the SWIG C# bindings implement the IDisposable
interface?

Cheers,

Sy

From szekerest at gmail.com  Tue Oct 31 19:49:01 2006
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:26 2007
Subject: [Gdal-dev] OGR thread-safety; .NET wrapper
In-Reply-To: <1162338680.12862.274692331@webmail.messagingengine.com>
References: <4547C86B.6070809@palladiumconsulting.com>
	<f3b73b7d0610311535j2006e42by22569e2edb830bf@mail.gmail.com>
	<1162338680.12862.274692331@webmail.messagingengine.com>
Message-ID: <f3b73b7d0610311649v49742868t4411affb5f1a4631@mail.gmail.com>

Simon,

>
> While I'm here: Tamas: do the SWIG C# bindings implement the IDisposable
> interface?
>

Yes, every object having reference to unmanaged memory implement IDisposable.


Tamas


PS: Some of the typemaps are missing for the GDAL part of the
interface, but I hope it can be completed for the next release.

