From kruegerj at gmx.de  Sun Jul 25 19:59:32 2004
From: kruegerj at gmx.de (=?ISO-8859-1?Q?Jochen_Kr=FCger?=)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] MinGW & GDAL: "[Linker error] undefined reference..."
Message-ID: <41044964.3000402@gmx.de>

Hello,

I'm trying to use the gdal libraries with MinGW (Dev-C++) - but even 
after checking the respective threads in this newsgroup I can't get it 
to work. This is most likely rooted in my lack of experience with C/C++ 
and/or the compilation and installation of libraries. I'm not a 
professional programmer, just someone in need of a specific tool, with 
no budget but enough enthusiasm to try it myself - so please bare with 
me if the following seems trivial to you:

I need a working GCC library with HDF4 support for a tool essential for 
one of my projects. I tried to use the binary that came with OpenEV and 
also the one available from the gdal website, but with both I get the 
following errors when compiling my programme:

  "[Linker error] undefined reference to `GDALAllRegister'"
  "[Linker error] undefined reference to `GDALOpen'"

Similar error messages are given for any instance where I use one of the 
libraries instructions. I have configured the paths to the includes and 
the library in Dev-C++ correctly, so I must assume that it's something 
with the library I'm using or with the way I'm using it...

I tried to google for some answers, but all I could come up was to use 
extern "C" {} around the include for gdal - but that didn't resolve it. 
Neither did some hints about the absolute path work, as the library is 
not in a seperate path of its own but directly in the compilers lib 
folder. Others mentioned possible problems if the library was compiled 
with a different version of the compiler (the MinGW version I'm using is 
GCC 3.2). In that case I'm damned, as I already tried to compile the 
library and failed completely - even with all the hints available in 
this newsgroup. :(

Here's a part of my code, maybe one of you spots the problem, so I can 
get this running:

-cut-
#include <iostream>
#include <stdlib.h>
#include <gdal_priv.h>

using namespace std;
...
GDALDataset *panDataset;
...
int main(int argc, char *argv[])
{
...
   GDALAllRegister();
   const char* pan_infile=argv[1];
   // Open Pan
   panDataset = (GDALDataset *) GDALOpen( pan_infile, GA_ReadOnly );
   if( panDataset == NULL ) {
     cout << endl << "Pan-Input kann nicht geoeffnet werden!" << endl;
     errorvalue=2;
...
-cut-

From kruegerj at gmx.de  Mon Jul 26 03:59:37 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <EKEJIKAILPONGGENMBGAKEBPHKAA.nhv@cape.com>
References: <41044964.3000402@gmx.de> <EKEJIKAILPONGGENMBGAKEBPHKAA.nhv@cape.com>
Message-ID: <4104B9E9.9030008@gmx.de>

Norman Vine wrote:
>>  "[Linker error] undefined reference to `GDALAllRegister'"
>>  "[Linker error] undefined reference to `GDALOpen'"
> What is the command you are using to link the program
> 
> Note Win32 does not allow undefined symbols so the order of the libraries 
> presented to the linker is important

Here's the Makefile Dev-C++ is creating:

-cut-
# Project: test
# Makefile created by Dev-C++ 4.9.8.9

CPP  = mingw32-g++.exe
CC   = mingw32-gcc.exe
WINDRES = windres.exe
RES  =
OBJ  = main.o $(RES)
LINKOBJ  = main.o $(RES)
LIBS =  -L"C:/Dev-Cpp/lib" -L"C:/Dev-Cpp/gdal/lib"
INCS =  -I"C:/Dev-Cpp/include"
CXXINCS =  -I"C:/Dev-Cpp/include/c++" 
-I"C:/Dev-Cpp/include/c++/mingw32"  -I"C:/Dev-Cpp/include/c++/backward" 
  -I"C:/Dev-Cpp/lib/gcc-lib/mingw32/3.2/include"  -I"C:/Dev-Cpp/include" 
  -I"C:/Dev-Cpp/gdal/include"
BIN  = test.exe
CXXFLAGS = $(CXXINCS)
CFLAGS = $(INCS)

.PHONY: all all-before all-after clean clean-custom

all: all-before test.exe all-after


clean: clean-custom
	rm -f $(OBJ) $(BIN)

$(BIN): $(OBJ)
	$(CPP) $(LINKOBJ) -o "sigma.exe" $(LIBS)

main.o: main.cpp
	$(CPP) -c main.cpp -o main.o $(CXXFLAGS)
-cut-

I tried varying the order of the libraries and the includes, but it 
doesn't change the outcome. :(

From kruegerj at gmx.de  Mon Jul 26 17:26:51 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <ahdcb0l5cmurejcfgss1homr2rpb0s01a6@4ax.com>
References: <41044964.3000402@gmx.de> <ahdcb0l5cmurejcfgss1homr2rpb0s01a6@4ax.com>
Message-ID: <4105771B.4080102@gmx.de>

Hi Mario,

Mario Beauchamp wrote:
> LIBS =  -L/local/bin -lgdal12 
> [...] Also note the "LIBS" line:
> it means that we link directly with the gdal12.dll in /local/bin.

That did it! Thank you.

In the compiler options (linker command line) I added the path to the 
library as shown in your example ("-Lc:/dev-cpp/gdal/lib -lgdal_i"), and 
suddenly it worked. The only problem I see with that method is that I 
suddenly seem to need about 20 additional dlls to run my program (I 
found them all in the OpenEV path, tho). Any way to solve that?

> May I ask what you're trying to do? I see you open a "panDataset": is it for a fusion with an RGB
> dataset?

Jupp, I'm trying to fix (and somewhat improve) an old fusion tool I 
often use at work. It only reads single-layer .lan files, so you have to 
seperate the multispectral layers first and export them to the old ERDAS 
format - which is annoying and time consuming (and that's where GDAL 
comes in handy). At the same time I'm trying to make it more 
user-friendly, adding a GUI and porting it to Win32 (while keeping it 
platform independent). Basically I need to rewrite the tool from scratch 
(but for the main algorithm).

From kruegerj at gmx.de  Mon Jul 26 21:13:09 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <41044964.3000402@gmx.de>
References: <41044964.3000402@gmx.de>
Message-ID: <4105AC25.9090203@gmx.de>

Ok, I thought I had managed it, but while I can open files now, I am now 
getting this damn error again - only this time not for all gdal 
instructions. For example I can open/close datasets, but I can't query 
them for certain (any?) information:

-cut-
   Dataset1 = (GDALDataset *) GDALOpen( filename1, GA_ReadOnly );
   int xsizefile1 = Dataset1->GetRasterXSize();
   int ysizefile1 = Dataset1->GetRasterYSize();
-cut-

results in the following error messages:
[Linker error] undefined reference to `GDALDataset::GetRasterXSize()'
[Linker error] undefined reference to `GDALDataset::GetRasterYSize()'

The mere opening of the Dataset does not cause any problems. As soon as 
I uncomment the GetRasterXSize/GetRasterYSize instructions the program 
compiles properly and the Image files can be accessed.

Any ideas? Do I have to add something more to my compiler/linker 
switches, or is it just a problem with the code? If I'm still missing a 
switch: where can I find some detailed info/documentation on what is 
needed, so I don't have to ask here every time?


From kruegerj at gmx.de  Tue Jul 27 09:18:22 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL:   "[Linker error] undefined reference..."
In-Reply-To: <q2adb09bhr3bdb676tu3tfeim3rc8k1tgt@4ax.com>
References: <41044964.3000402@gmx.de> <ahdcb0l5cmurejcfgss1homr2rpb0s01a6@4ax.com> <4105771B.4080102@gmx.de> <q2adb09bhr3bdb676tu3tfeim3rc8k1tgt@4ax.com>
Message-ID: <4106561E.9030807@gmx.de>

Mario Beauchamp wrote:
> You probably have Frank's OpenEV version and the gdal lib is built with some extra features which I
> don't really know about. But why are you linking with gdal_i?
> If you installed OpenEV in c:\openev_fw for example, you could use "-Lc:/openev_fw/bin -lgdal12" and
> it should work (ie, ld will link with gdal12.dll). Maybe it will also solve the problem you mention
> in your later post.

I tried the OpenEV library and the nt-binary that's for download (not as 
part of OpenEV) on the GDAL website (that's the gdal_i library). 
Actually I found that it doesn't matter wether I link using the dll or 
the lib file - as long as it's explicitly stated in the linker call.

> I tried that fusion thing myself and made it as an OpenEV tool. Maybe you saw my posts about that a
> few weeks ago...
> It's there if you want to have a look: http://pages.infinit.net/starged/openev/fusion.py

Thanks, I'll have a look at it. There's so many different fusion 
algorithms out there. What algorythms are you using?

From kruegerj at gmx.de  Tue Jul 27 13:53:10 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com>
Message-ID: <41069686.7090405@gmx.de>

Chapman, Martin wrote:
> Try this:
[...]
> I just cut and pasted some code, so it might need a couple of tweaks.  Send me what the output is from this code.  What platform are you running this on?  If it's visual studio on windows you need to link the gdal_i.lib in your project settings.  If you are using Linux it needs to be linked in the make file. 

-cut-
Compiler: Default compiler
Executing  mingw32-g++.exe...
mingw32-g++.exe "C:\Dev-Cpp\clessons\sigma\test.cpp" -o 
"C:\Dev-Cpp\clessons\sigma\test.exe"   -fexpensive-optimizations -O2 
-I"C:\Dev-Cpp\include\c++"  -I"C:\Dev-Cpp\include\c++\mingw32" 
-I"C:\Dev-Cpp\include\c++\backward" 
-I"C:\Dev-Cpp\lib\gcc-lib\mingw32\3.2\include"  -I"C:\Dev-Cpp\include" 
-I"C:\Dev-Cpp\gdal\include"   -L"C:\Dev-Cpp\lib" -L"C:\Dev-Cpp\gdal\lib" 
-Lc:/dev-cpp/gdal/bin -lgdal12
C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0x6b):test.cpp: 
undefined reference to `GDALDataset::GetRasterCount()'

C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0xe8):test.cpp: 
undefined reference to `GDALDataset::GetRasterBand(int)'
C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0xf0):test.cpp: 
undefined reference to `GDALRasterBand::GetXSize()'
C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0xff):test.cpp: 
undefined reference to `GDALDataset::GetRasterBand(int)'
C:\DOKUME~1\JOCHEN~1.GOG\LOKALE~1\Temp/ccMXbaaa.o(.text+0x107):test.cpp: 
undefined reference to `GDALRasterBand::GetYSize()'

Execution terminated
-cut-

it's the same problem. I can use the gdal functions to open the 
datafiles, but as soon as there's any instructions that to query 
information from inside the dataset I can't link the binary anymore.

Btw: I'm using gcc (Dev-C++ IDE with MinGW) to compile the file. And I 
already have the library in the linker's command line (else I'd get the 
same errors for the

Here's the comple function that's giving me the headaches:

-cut-
int evaluate_Inputfiles(char* infile1, char* infile2) {
   GDALAllRegister();
   // Can the files be opened at all?
   int check=0;
   check=evaluate_Inputfile(infile1);
   if (check) return 1;
   check=evaluate_Inputfile(infile2);
   if (check) return 1;
   // Do they have the same size?
   const char* filename1=infile1;
   const char* filename2=infile2;
   highresDataset = (GDALDataset *) GDALOpen( filename1, GA_ReadOnly );
   rastersizex = (highresDataset.GetRasterXSize());
   rastersizey = (highresDataset.GetRasterYSize());
   int xsize1 = rastersizex;
   int ysize1 = rastersizey;
   lowresDataset = (GDALDataset *) GDALOpen( filename2, GA_ReadOnly );
   rastersizex = (lowresDataset->GetRasterXSize());
   rastersizey = (lowresDataset->GetRasterYSize());
   int xsize2 = rastersizex;
   int ysize2 = rastersizey;
   if ((xsize1 != xsize2) || (ysize1 != ysize2)) {
       cout << endl << "Die beiden Inputfiles sind verschieden gro?!" << 
endl;
       return 1;
   };
   return 0;
}
-cut-

The function 'evaluate_inputfile' simply tries to open the datafiles. 
That function's working fine, as is the whole as soon as I unmark the 
parts where I try to get the size of the files:

   rastersizex = (lowresDataset->GetRasterXSize());
   rastersizey = (lowresDataset->GetRasterYSize());

Without these lines the function (and the rest of the code) compiles 
fine. Same with your code - as soon as all parts that actually query 
information from within the dataset are remove it compiles fine...

From kruegerj at gmx.de  Tue Jul 27 16:35:18 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <40B789F5.9090100@pobox.com>
References: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com> <41069686.7090405@gmx.de> <40B789F5.9090100@pobox.com>
Message-ID: <4106BC86.2000900@gmx.de>

Frank Warmerdam wrote:
> I must confess I haven't been following this build issue closely.  However,
> there is one major issue.  GCC and GCC derived compilers used radically
> different "name munging" rules for C++ methods than MS Visual C++ does.  
> So, in general you won't be able to interact with C++ objects from a VC++ built
> library from gcc.

That would mean if I actually succeeded in building my own c++ gdal 
library with gcc I could use it, right? Or is that a code issue? If that 
would work I'd be happy if someone could provide me with his working 
library (if possible with support for the ERDAS .img format), as I tried 
my luck with the library already - without success (most likely due to 
my lack of experience).

> However, you should be able to use the GDAL C API as
> C function naming is uniform across compilers.
> So try implementing your code more along the lines of:
> 
>  int evaluate_Inputfiles(char* infile1, char* infile2) {
>   GDALAllRegister();
>   // Can the files be opened at all?
>   int check=0;
>   check=evaluate_Inputfile(infile1);
>   if (check) return 1;
>   check=evaluate_Inputfile(infile2);
>   if (check) return 1;
>   // Do they have the same size?
>   const char* filename1=infile1;
>   const char* filename2=infile2;
>   GDALDatasetH highresDataset, lowresDataset;
>   highresDataset = GDALOpen( filename1, GA_ReadOnly );
>   rastersizex = GDALGetRasterXSize( highresDataset );
>   rastersizey = GDALGetRasterYSize( highresDataset );
>   int xsize1 = rastersizex;
>   int ysize1 = rastersizey;
> ...
>   return 0;
> }

Mhh... the only change I see is that you're using 'GDALDatasetH' now 
instead of GDALDataset. Is that all I'd have to change? As I said in my 
first post - I'm a mere beginner as far as C/C++ is concerned. Basically 
I'm using my need for the tool I work on as a motivation to learn C++, 
so some stupid questions are to be expected... ;)

From kruegerj at gmx.de  Tue Jul 27 19:51:11 2004
From: kruegerj at gmx.de (J.Krueger)
Date: Wed Nov 21 11:49:11 2007
Subject: [Gdal-dev] Re: MinGW & GDAL: "[Linker error] undefined reference..."
In-Reply-To: <40B7C051.40307@pobox.com>
References: <ED3A48B9840E594890A2BC172D119465E63B0C@mailman.san.com> <41069686.7090405@gmx.de> <40B789F5.9090100@pobox.com> <4106BC86.2000900@gmx.de> <40B7C051.40307@pobox.com>
Message-ID: <4106EA6F.2090301@gmx.de>

Frank Warmerdam wrote:
>> Mhh... the only change I see is that you're using 'GDALDatasetH' now 
>> instead of GDALDataset. Is that all I'd have to change? As I said in 
>> my first post - I'm a mere beginner as far as C/C++ is concerned. 
>> Basically I'm using my need for the tool I work on as a motivation to 
>> learn C++, so some stupid questions are to be expected... ;)
> Well, now instead of calling GetRasterXSize() (or GetXSize()?) on the
> GDALDataset object, I am now calling GDALGetRasterXSize() and passing in
> the GDALDatasetH.  Basically, there are C API functions corresponding to
> most C++ methods.  Use it that way and you will be OK.

Yeah, I found those - didn't read your quote thoroughly enough. So 
basically I change any call like

<variable> = <dataset>-><instruction>;
to
<variable> = GDAL<instruction>(<dataset>);

and it will work? Nice!

 > Though of course you won't learn so much about C++.

I think I'll get enough chances to do that once I try translating the 
library myself... For the moment I'm just happy that I got it working at 
all.

Thank you (and all the others that helped me)!

From Michele.Sanges at otomelara.it  Thu Jul  1 05:04:58 2004
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] 8-bit grayscale
Message-ID: <BDCFDAEC07D52A4ABDAC29167EA2BA6D0182EBA3@OTOCLEX.otomelara.it>

Hi all,

I'm trying to develop an embedded application, which must have also the functionalities of a GIS. The application runs on Linux operating system (kernel 2.4.x, busybox filesystem); for the graphic side I use the Microwindows server (a small X server), and the GUI is writted  by means the FLTK library. I successfully compiled and installed GDAL 1.2.0 on my system.

Now, some beginner questions:

- when the method GetColorInterpretation() returns "Undefined" (for example, the "/aig/dblbnd.adf" test file), in order to represent the dataset in an 8?bit grayscale, I used the following conversion:

int nRasterCnt = poDataset->GetRasterCount();
int nRasterXSize =  poDataset->GetRasterXSize();
int nRasterYSize =  poDataset->GetRasterYSize();
double adfMinMax[2];
int bGotMin, bGotMax;
adfMinMax[0]=poBand->GetMinimum(&bGotMin);
adfMinMax[1]=poBand->GetMaximum(&bGotMax);

poBand->RasterIO(GF_Read, 0, 0, nXSize, nYSize, pImageData, nXSize, nYSize, poBand->GetRasterDataType(), 0, 0 );

for (int nByte = 0; nByte < nRasterCnt*nRasterXSize*nRasterYSize; nByte++)
{
	// convert in 0..255 range /(8?bit grayscale)
	int nApp = (255 / (adfMinMax[1] - adfMinMax[0])) * (*(pImageData + nByte) - adfMinMax[0]); 

	if (nApp < 0)
	{
		nApp = 0;
	}
	else if  (nApp > 255)
	{
		nApp = 255;
	}

	*(pData + nByte) =  nApp;
}

Fl_RGB_Image * RGBImg = new Fl_RGB_Image((uchar*)(pData), nRasterXSize, nRasterYSize, poDataset->GetRasterCount());

Using this conversion, the dblbnd.adf file is represented too dark, probabily because the dataset has many low values.
I can solve this problem reducing the range of 8 bit grayscale to [N..255] (N > 0), but how do you generally converted the dataset?

- Somebody is using the FLTK graphic library?

Thanks.



Michele Sanges


From jclonts at hot.rr.com  Fri Jul  2 10:57:55 2004
From: jclonts at hot.rr.com (jclonts)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] test post
Message-ID: <6481667.1088780275375.JavaMail.Administrator@atp>

Hello,

I am a new subscriber.  I have a possible bug and fix to submit but want to
make sure this thing is working first :)

Cheers,
John Clonts
Temple, Texas

From jclonts at hot.rr.com  Fri Jul  2 11:37:38 2004
From: jclonts at hot.rr.com (jclonts)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Geotiff Key Issue
Message-ID: <13170974.1088782658796.JavaMail.Administrator@atp>

Hello gdal'ers,

I am trying to use some geotiffs in Oziexplorer which were
generated/transformed by gdal.  There was some discussion on the Ozi-users
list which suggested that the geotiff produced by gdal was providing the key
"ProjFalseOriginLongGeoKey" where it should be providing the key
"ProjNatOriginLongGeoKey".

The gdal code I am using looks about like this:
  a = gdal.Open('a.tif')
  b = gdal.GetDriverByName('GTiff').CreateCopy( 'b.tif', a)

a.tif is a geo tiff that comes from the FAA, works properly in Oziexplorer,
and includes the key ProjNatOriginLongGeoKey.

b.tif is produced with the key ProjFalseOriginLongGeoKey, and does not work
properly in Oziexplorer (nor in some other tools according to my
Oziusers-List source, "J.G.").
   
I downloaded gdal 1.2.1 and changed the file 

gdal-1.2.1\frmts\gtiff\gt_wkt_srs.cpp, line 1419:

   /* jcc 7/2/04 changed from ProjFalseOriginLongGeoKey */
   GTIFKeySet(psGTIF, ProjNatOriginLongGeoKey, TYPE_DOUBLE, 1,
        poSRS->GetProjParm( SRS_PP_CENTRAL_MERIDIAN, 0.0 ) );


It then produced a geotiff which Oziexplorer was happy with.

I don't know much about this stuff but would be happy to convey any
additional info between the Lists to resolve this mis-match.

Cheers,
John Clonts
Temple, Texas




From j.l.h.hartmann at uva.nl  Fri Jul  2 11:38:37 2004
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] color table in ESRI BIL format
In-Reply-To: <40D9E51C.9060502@pobox.com>
References: <40D9E51C.9060502@pobox.com>
Message-ID: <40E5817D.7000603@uva.nl>


Is it possible to translate an ESRI BIL file with an associated ASCII 
color table (.clr file) to other GDAL-supported formats and keep the 
color table information? It seems that color information gets lost in 
this case (ColorInterp=undefined, note that GDAL supports color tables 
with ESRI Binary Grids). If this is not directly possible, is there a 
way to do it in steps?

Jan

From dron at ak4719.spb.edu  Sat Jul  3 06:02:40 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] 8-bit grayscale
In-Reply-To: <BDCFDAEC07D52A4ABDAC29167EA2BA6D0182EBA3@OTOCLEX.otomelara.it>
References: <BDCFDAEC07D52A4ABDAC29167EA2BA6D0182EBA3@OTOCLEX.otomelara.it>
Message-ID: <20040703100240.GA2308@ak4719.spb.edu>

Hello, Michele,

On Thu, Jul 01, 2004 at 11:04:58AM +0200, Sanges Michele wrote:
> - when the method GetColorInterpretation() returns "Undefined" (for
> example, the "/aig/dblbnd.adf" test file), in order to represent the
> dataset in an 8?bit grayscale, I used the following conversion:
> 
> int nRasterCnt = poDataset->GetRasterCount();
> int nRasterXSize =  poDataset->GetRasterXSize();
> int nRasterYSize =  poDataset->GetRasterYSize();
> double adfMinMax[2];
> int bGotMin, bGotMax;
> adfMinMax[0]=poBand->GetMinimum(&bGotMin);
> adfMinMax[1]=poBand->GetMaximum(&bGotMax);

Don't forget to check bGotMin and bGotMax before using min/max values.

> poBand->RasterIO(GF_Read, 0, 0, nXSize, nYSize, pImageData, nXSize, nYSize, poBand->GetRasterDataType(), 0, 0 );
> 
> for (int nByte = 0; nByte < nRasterCnt*nRasterXSize*nRasterYSize; nByte++)
> {
> 	// convert in 0..255 range /(8?bit grayscale)
> 	int nApp = (255 / (adfMinMax[1] - adfMinMax[0])) * (*(pImageData + nByte) - adfMinMax[0]); 
> 
> 	if (nApp < 0)
> 	{
> 		nApp = 0;
> 	}
> 	else if  (nApp > 255)
> 	{
> 		nApp = 255;
> 	}
> 
> 	*(pData + nByte) =  nApp;
> }
> 
> Fl_RGB_Image * RGBImg = new Fl_RGB_Image((uchar*)(pData), nRasterXSize, nRasterYSize, poDataset->GetRasterCount());
> 
> Using this conversion, the dblbnd.adf file is represented too dark,
> probabily because the dataset has many low values. I can solve this
> problem reducing the range of 8 bit grayscale to [N..255] (N > 0), but
> how do you generally converted the dataset?

It is not possible to wrap an arbitrary dataset into 8-bit. Any good
viewer for non-8bit data should have several scaling algorithms: linear
stretch (as in your code), equalization, logarithmic stretch. User can
select one of them which will be best suited for particular dataset. We
don't know, what parts of image are interesting for user. Ocean and land
on the single space image will have significantly different histograms
and user will use different methods to highlight water or land depending
on his interests.

						Regards,
						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sat Jul  3 06:08:33 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] color table in ESRI BIL format
In-Reply-To: <40E5817D.7000603@uva.nl>
References: <40D9E51C.9060502@pobox.com> <40E5817D.7000603@uva.nl>
Message-ID: <20040703100832.GB2308@ak4719.spb.edu>

On Fri, Jul 02, 2004 at 05:38:37PM +0200, Jan Hartmann wrote:
> Is it possible to translate an ESRI BIL file with an associated ASCII
> color table (.clr file) to other GDAL-supported formats and keep the
> color table information? It seems that color information gets lost in
> this case (ColorInterp=undefined, note that GDAL supports color tables
> with ESRI Binary Grids). If this is not directly possible, is there a
> way to do it in steps?

It is possible to extend the EHdr driver to handle the color tables. Do
you have a sample file with color table?

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Sun Jul  4 02:34:21 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] JPEG2000 support with MrSID DSDK
Message-ID: <20040704063421.GA10914@ak4719.spb.edu>

Folks,

Recent versions of the MrSID DSDK has support for decoding JPEG2000
data. I have updated the MrSID driver to use this feature, so both MrSID
and JPEG2000 files can be decoded with that driver. Tested with latest
technology preview from LizardTech.

							Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From jbensabat at ewre.com  Sun Jul  4 10:14:28 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Creating a map and saving it
Message-ID: <cc9058$11c$1@sea.gmane.org>

Hello
I am trying to do the following sequence:
1. I have a map that I have created and stored in some internal data
structure.
2. I would like to create an OGR data structure from my internal data
structure (including spatial ref.,    polygons, polylines, lines and labels)
3. I would like to save the OGR data structure into one of the vector
formats that are supported
by gdal (shp, mif, gml etc).

I have some trouble doing that, as when I seem to fail writing to the file
(0 bytes).
a simple example could be of great help
thanks,
jac.




From warmerdam at pobox.com  Mon Jul  5 19:46:15 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Perl bindings for GDAL
In-Reply-To: <20040626053535.GL23320@vishnu.tridity.org>
References: <20040626053535.GL23320@vishnu.tridity.org>
Message-ID: <40E9E847.7020100@pobox.com>

Schuyler Erle wrote:
> Hi, folks, I've written some Perl bindings for the GDAL C API, under the
> Geo::GDAL namespace. They're not complete yet, but they're good enough
> for reading data out of GDAL-supported rasters. The code can be had from:
> 
>     http://search.cpan.org/~sderle/Geo-GDAL/
> 
> Comments and patches are welcome. Thanks!

Schuyler,

I have added a link to your link on the main GDAL page. Should show up by
tomorrow I think.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Jul  6 09:53:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Memory leaks
Message-ID: <40EAAEDF.8030102@pobox.com>

Jacob Bensabat wrote:

 > Hi
 > We are using gdal to load vector maps (format mif, shp) under windows 2000
 > and visual c++ 6.0. What I see is that there is a large number of small
 > memory leaks. Has anybody
 > experienced such kind of feature ?
 > thanks


Jacob,

As I notice them I try to fix memory leaks, and in general I think the
shapefile and mif code is pretty clean currently.  I just tried a mif to
tab conversion and there were no leaks that I consider to be significant.

I would suggest you try working with recent code, and then report the
circumstances under which you see the problem ... ideall with details
memory leak details.  I use "valgrind" on Linux to identify the exact
memory blocks that appear to be leaked.  On windows Purify can fulfil a
similar role if you have it.

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From fx.prunayre at oieau.fr  Tue Jul  6 11:58:12 2004
From: fx.prunayre at oieau.fr (=?iso-8859-1?Q?Fran=E7ois-Xavier_Prunayre?=)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR2OGR / OCI / French character
Message-ID: <156401c46372$0a637bd0$c6b239c2@NT2.oieau.fr>

Hi, 
importing data to Oracle Spatial using ogr2ogr, French character are replaced by "?" ... any ideas ? Is this an Oracle configuration option, something to deal with NLS parameters ? or something with gdal ?

Config : GDAL 1.2; Oracle 10g; under Suse 9.0 & Window XP

Thanks a lot for your help. 

Francois
-- 
Ce message a ete verifie par MailScanner pour des virus ou des polluriels et rien de suspect n'a ete trouve.

Les donnees et renseignements contenus dans ce message sont personnels, confidentiels et prives. Toute publication, utilisation ou diffusion, meme partielle, doit etre autorisee.

Any data and information contained in this electronic mail is personal, confidential and secret. Any total or partial publication, use or distribution must be authorized.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040706/71f8be13/attachment.html
From roger at beardandsandals.co.uk  Tue Jul  6 13:47:24 2004
From: roger at beardandsandals.co.uk (Roger James)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Memory leaks
In-Reply-To: <40EAAEDF.8030102@pobox.com>
Message-ID: <20040706174741.62E065B0CE@cmlapp11.siteprotect.com>

The visual studio leak reporting function is notoriously inaccurate. It
reports any allocations made in any dll initialization called before the
main program is started as a leak.

Step into your program and then see what heap allocation number currently is
right at the start. It is held in a static _lRequestCur in the CRT library.
A watch on

{,,msvcr71d.dll}_lRequestCurr

usually works if you are using the debug DLL runtime.

Anything in the heap dump which is lower than this number is probably
erroneous.

Roger


> 
> Jacob Bensabat wrote:
> 
>  > Hi
>  > We are using gdal to load vector maps (format mif, shp) under windows
> 2000
>  > and visual c++ 6.0. What I see is that there is a large number of small
>  > memory leaks. Has anybody
>  > experienced such kind of feature ?
>  > thanks



From warmerdam at pobox.com  Tue Jul  6 14:12:04 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR2OGR / OCI / French character
In-Reply-To: <156401c46372$0a637bd0$c6b239c2@NT2.oieau.fr>
References: <156401c46372$0a637bd0$c6b239c2@NT2.oieau.fr>
Message-ID: <40EAEB74.6000005@pobox.com>

Fran?ois-Xavier Prunayre wrote:
> Hi,
> importing data to Oracle Spatial using ogr2ogr, French character are 
> replaced by "?" ... any ideas ? Is this an Oracle configuration option, 
> something to deal with NLS parameters ? or something with gdal ?
>  
> Config : GDAL 1.2; Oracle 10g; under Suse 9.0 & Window XP
>  
> Thanks a lot for your help.
>  
> Francois

Francois,

I don't know off hand why this would be occuring.  Are you seeing this
result when you use ogrinfo or just with ogr2ogr?  I would encourage you
to test with ogrinfo as this will give a report less affected by particulars
of the ogr2ogr output format.

Internally I am just using a "SELECT <list of fields> FROM <table name>" to
fetch the field values.  The result fetching is done based on the following
field binding:

             OCIDefineByPos( hStatement, &hDefn, poSession->hError,
                             iParm+1,
                             (ub1 *) papszCurColumn[nOGRField], nBufWidth,
                             SQLT_STR, panCurColumnInd + nOGRField,
                             NULL, NULL, OCI_DEFAULT ),

As you can see the results are requested as datatype SQLT_STR. I don't do
anything special with regard to setting the OCI_ATTR_CHARSET_ID, or anything
else related to language rules.

It seems likely to me that the OCI library is taking care of converting
unusual characters into '?' during the fetch because I haven't setup appropriate
parameters.  However, I don't know what I would be doing wrong, or how to fix
it off hand.

I would try and investigate some more, but I would have to boot to the handed
Windows XP partition.  I should really get an instance working properly on
Linux.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Michele.Sanges at otomelara.it  Wed Jul  7 04:25:04 2004
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:49:19 2007
Subject: R: [Gdal-dev] 8-bit grayscale
Message-ID: <BDCFDAEC07D52A4ABDAC29167EA2BA6D01864610@OTOCLEX.otomelara.it>



> -----Messaggio originale-----
> Da: Andrey Kiselev [mailto:dron@ak4719.spb.edu]
> Inviato: sabato 3 luglio 2004 11.03
> A: gdal-dev@xserve.flids.com
> Oggetto: Re: [Gdal-dev] 8-bit grayscale
> 
> It is not possible to wrap an arbitrary dataset into 8-bit. Any good
> viewer for non-8bit data should have several scaling 
> algorithms: linear
> stretch (as in your code), equalization, logarithmic stretch. User can
> select one of them which will be best suited for particular 
> dataset. We
> don't know, what parts of image are interesting for user. 
> Ocean and land
> on the single space image will have significantly different histograms
> and user will use different methods to highlight water or 
> land depending
> on his interests.
> 
> 						Regards,
> 						Andrey


Hi Andrey,
thanks for your reply.
Ok, so can you give me some references (internet sites, documents, ...) that speaking about the different scaling algorithms?

Best regards.
Michele

From jbensabat at ewre.com  Wed Jul  7 08:30:12 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] problem saving files
Message-ID: <ccgn5r$4qq$1@sea.gmane.org>

Hello
I am trying to save a file using OGR. The test I do is the following:
I use the ogr2ogr program and load a mif file that I try to save as mif file
too.
Everything goes fine, at the exception of the color, pen and brush items
which do not seem
to be saved. Is it by definition or is it a bug.

also Is there a limitation to the size of the field name in an attribute
table ?
I trieds names with size > 10 characters and it seems to be problem.

thanks
jac




From warmerdam at pobox.com  Wed Jul  7 11:32:50 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] problem saving files
In-Reply-To: <ccgn5r$4qq$1@sea.gmane.org>
References: <ccgn5r$4qq$1@sea.gmane.org>
Message-ID: <40EC17A2.4090401@pobox.com>

Jacob Bensabat wrote:
> Hello
> I am trying to save a file using OGR. The test I do is the following:
> I use the ogr2ogr program and load a mif file that I try to save as mif file
> too.
> Everything goes fine, at the exception of the color, pen and brush items
> which do not seem
> to be saved. Is it by definition or is it a bug.

Jacob,

Ogr2ogr *should* support writing styling information for to mif and tab,
but I seem to be running into some problems making this work right here.  I
think it must be somewhat broken.  But this is a bug, rather than by definition.

> also Is there a limitation to the size of the field name in an attribute
> table ?
> I trieds names with size > 10 characters and it seems to be problem.

I am not aware of such a limit.  Daniel might be better to speak to this.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Jul  7 11:37:57 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit interleaved data with
	GDALRasterBand::RasterIO 
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B32@mailman.san.com>

All,
 
If I have raster data stored as bit interleaved (r,g,b,r,g,b,r,g,b...),
can I use the GDALRasterBand::RasterIO function to write this data to
disc?  I read that the nPixelSpace and nLineSpace parameters allow
reading into or writing from unusually organized buffers.  If this is
possible, could someone please provide me a brief example of how to use
these parameters with this type of data structure?
 
Thanks,
 
Martin Chapman
Cell 303-885-1936
Office 303-495-6300 x326
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040707/33249a5f/attachment.html
From warmerdam at pobox.com  Wed Jul  7 12:01:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit interleaved data
	with	GDALRasterBand::RasterIO
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63B32@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63B32@mailman.san.com>
Message-ID: <40EC1E77.5050506@pobox.com>

Chapman, Martin wrote:
> All,
>  
> If I have raster data stored as bit interleaved (r,g,b,r,g,b,r,g,b...), 
> can I use the GDALRasterBand::RasterIO function to write this data to 
> disc?  I read that the nPixelSpace and nLineSpace parameters allow 
> reading into or writing from unusually organized buffers.  If this is 
> possible, could someone please provide me a brief example of how to use 
> these parameters with this type of data structure?

Martin,

Do you literally mean bit interleaved?  Or pixel interleaved?

I'll assume you mean pixel interleaved.   To write from a pixel interleaved
1 line buffer of 8bit data you might use:

poBandRed->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 0, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

poBandGreen->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 1, xsize, 1, GDT_Byte,
                      3, xsize * 3 );
poBandBlue->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 2, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

Note that the buffer pointer you pass in needs to point to the beginning
of the data to be written (hence the +1 and +2 offsets on pabyRGB for green
and blue).  The nPixelSpace is the number of bytes from the beginning of one
pixel to the beginning of the next.  3 in this case since there are 3 bytes
of data for for each pixel written.  The linespacing is the offset from the
beginning of one line to the next, so xsize * 3 in this case.

I hope this helps. If your data is really "bit" interleaved you will need
to repack stuff before writing.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Jul  7 12:35:29 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit interleaved data
	with	GDALRasterBand::RasterIO
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B33@mailman.san.com>

Frank,

I'm not sure if I mean byte or pixel interleave.  I want to save data
the I have in a windows DIB.  When I create the DIB from a gdal dataset
I interleave the bits into the following structure something like
this...

unsigned char* pCombinedBytes = (unsigned char*)
CPLMalloc(sizeof(unsigned char) * nWidth * nHeight * nSize);
//Where nSize is the number of bands and nWidth and nHeight is the aoi w
and h...

//then I retrieve the bytes for each band something like this...

void** pBandBuffer = (void**) new unsigned char*[nSize];
//for each band 
	pBandBytes = (unsigned char*) CPLMalloc(sizeof(unsigned char) *
nWidth * nHeight);
	pBand->RasterIO(GF_Read, nXOffset, nYOffset, nWidth, nHeight,
pBandBytes, nWidth , nHeight, GDT_Byte, 0, 0);
	pBandBuffer[n] = pBandBytes;
//end if

// then I interleave the bytes into one array...

for (long i = 0, long j = 0; i < (nWidth * nHeight * nSize); i += nSize,
j++)
{
	int k = i;

	for (int m = nSize - 1; m >= 0; m--, k++)
	{
		unsigned char* pBytes = (unsigned char*) pBandBuffer[m];
		ptr_dest = pCombinedBytes + k;
		unsigned char b = pBytes[j];

		if (pCT != NULL)
		{
			GDALColorEntry ce;
			unsigned int c = (unsigned int) b;
			c = pCT->GetColorEntryAsRGB(c, &ce);
			if (m == 0) c = ce.c1;
			if (m == 1) c = ce.c2;
			if (m == 2) c = ce.c3;
			b = (unsigned char) c;
		}

		ptr_src = &b;
		memcpy(ptr_dest, ptr_src, 1);
	}
}

// then I realign the bytes for a windows DIB...

m_pDIBSection->Create(nWidth ,nHeight, 24);
unsigned int dibwidth = m_pDIBSection->GetTotalWidth();

GByte* dest = (GByte*) m_pDIBSection->GetBits();
GByte* src = (GByte*) pCombinedBytes;

for (int row = 0; row < nHeight; row++)
{
	ptr_dest = dest + row * dibwidth * nSize;
	ptr_src = src + row * nWidth * nSize;
	memcpy(ptr_dest, ptr_src, nWidth * nSize);
}

So I think I am pixel interleaving then?  Anyway, I think the example
you sent me will work if I undo the windows DIB realignment, (which
would be really cool).  I'll let you know if it works.

Thanks for the quick response.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, July 07, 2004 10:02 AM
To: Chapman, Martin
Cc: gdal-dev
Subject: Re: [Gdal-dev] Writing bit interleaved data with
GDALRasterBand::RasterIO


Chapman, Martin wrote:
> All,
>  
> If I have raster data stored as bit interleaved 
> (r,g,b,r,g,b,r,g,b...),
> can I use the GDALRasterBand::RasterIO function to write this data to 
> disc?  I read that the nPixelSpace and nLineSpace parameters allow 
> reading into or writing from unusually organized buffers.  If this is 
> possible, could someone please provide me a brief example of how to
use 
> these parameters with this type of data structure?

Martin,

Do you literally mean bit interleaved?  Or pixel interleaved?

I'll assume you mean pixel interleaved.   To write from a pixel
interleaved
1 line buffer of 8bit data you might use:

poBandRed->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 0, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

poBandGreen->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 1, xsize, 1, GDT_Byte,
                      3, xsize * 3 );
poBandBlue->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 2, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

Note that the buffer pointer you pass in needs to point to the beginning
of the data to be written (hence the +1 and +2 offsets on pabyRGB for
green and blue).  The nPixelSpace is the number of bytes from the
beginning of one pixel to the beginning of the next.  3 in this case
since there are 3 bytes of data for for each pixel written.  The
linespacing is the offset from the beginning of one line to the next, so
xsize * 3 in this case.

I hope this helps. If your data is really "bit" interleaved you will
need to repack stuff before writing.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ar at navpoch.com  Wed Jul  7 13:11:23 2004
From: ar at navpoch.com (Alain Rist)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit interleaved
	datawith	GDALRasterBand::RasterIO
References: <ED3A48B9840E594890A2BC172D119465E63B33@mailman.san.com>
Message-ID: <01c501c46445$717d88f0$0201a8c0@Alain>

Hi Martin,
This is what I wrote for GDALView.
Hope it helps.

Alain

----- Original Message ----- 
From: "Chapman, Martin" <MChapman@sanz.com>
To: "Frank Warmerdam" <warmerdam@pobox.com>
Cc: "gdal-dev" <gdal-dev@remotesensing.org>
Sent: Wednesday, July 07, 2004 6:35 PM
Subject: RE: [Gdal-dev] Writing bit interleaved datawith
GDALRasterBand::RasterIO


Frank,

I'm not sure if I mean byte or pixel interleave.  I want to save data
the I have in a windows DIB.  When I create the DIB from a gdal dataset
I interleave the bits into the following structure something like
this...

unsigned char* pCombinedBytes = (unsigned char*)
CPLMalloc(sizeof(unsigned char) * nWidth * nHeight * nSize);
//Where nSize is the number of bands and nWidth and nHeight is the aoi w
and h...

//then I retrieve the bytes for each band something like this...

void** pBandBuffer = (void**) new unsigned char*[nSize];
//for each band
pBandBytes = (unsigned char*) CPLMalloc(sizeof(unsigned char) *
nWidth * nHeight);
pBand->RasterIO(GF_Read, nXOffset, nYOffset, nWidth, nHeight,
pBandBytes, nWidth , nHeight, GDT_Byte, 0, 0);
pBandBuffer[n] = pBandBytes;
//end if

// then I interleave the bytes into one array...

for (long i = 0, long j = 0; i < (nWidth * nHeight * nSize); i += nSize,
j++)
{
int k = i;

for (int m = nSize - 1; m >= 0; m--, k++)
{
unsigned char* pBytes = (unsigned char*) pBandBuffer[m];
ptr_dest = pCombinedBytes + k;
unsigned char b = pBytes[j];

if (pCT != NULL)
{
GDALColorEntry ce;
unsigned int c = (unsigned int) b;
c = pCT->GetColorEntryAsRGB(c, &ce);
if (m == 0) c = ce.c1;
if (m == 1) c = ce.c2;
if (m == 2) c = ce.c3;
b = (unsigned char) c;
}

ptr_src = &b;
memcpy(ptr_dest, ptr_src, 1);
}
}

// then I realign the bytes for a windows DIB...

m_pDIBSection->Create(nWidth ,nHeight, 24);
unsigned int dibwidth = m_pDIBSection->GetTotalWidth();

GByte* dest = (GByte*) m_pDIBSection->GetBits();
GByte* src = (GByte*) pCombinedBytes;

for (int row = 0; row < nHeight; row++)
{
ptr_dest = dest + row * dibwidth * nSize;
ptr_src = src + row * nWidth * nSize;
memcpy(ptr_dest, ptr_src, nWidth * nSize);
}

So I think I am pixel interleaving then?  Anyway, I think the example
you sent me will work if I undo the windows DIB realignment, (which
would be really cool).  I'll let you know if it works.

Thanks for the quick response.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Wednesday, July 07, 2004 10:02 AM
To: Chapman, Martin
Cc: gdal-dev
Subject: Re: [Gdal-dev] Writing bit interleaved data with
GDALRasterBand::RasterIO


Chapman, Martin wrote:
> All,
>
> If I have raster data stored as bit interleaved
> (r,g,b,r,g,b,r,g,b...),
> can I use the GDALRasterBand::RasterIO function to write this data to
> disc?  I read that the nPixelSpace and nLineSpace parameters allow
> reading into or writing from unusually organized buffers.  If this is
> possible, could someone please provide me a brief example of how to
use
> these parameters with this type of data structure?

Martin,

Do you literally mean bit interleaved?  Or pixel interleaved?

I'll assume you mean pixel interleaved.   To write from a pixel
interleaved
1 line buffer of 8bit data you might use:

poBandRed->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 0, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

poBandGreen->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 1, xsize, 1, GDT_Byte,
                      3, xsize * 3 );
poBandBlue->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 2, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

Note that the buffer pointer you pass in needs to point to the beginning
of the data to be written (hence the +1 and +2 offsets on pabyRGB for
green and blue).  The nPixelSpace is the number of bytes from the
beginning of one pixel to the beginning of the next.  3 in this case
since there are 3 bytes of data for for each pixel written.  The
linespacing is the offset from the beginning of one line to the next, so
xsize * 3 in this case.

I hope this helps. If your data is really "bit" interleaved you will
need to repack stuff before writing.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev
-------------- next part --------------
/******************************************************************************
 * Purpose:  Create a Windows bitmap from a GDALDataSet.  
 *	
 * Author:   Alain Rist, ar@navpoch.com
 *
 ******************************************************************************
 * Copyright (c) 2004, Alain Rist
 *
 * Permission is hereby granted, free of charge, to any person obtaining a
 * copy of this software and associated documentation files (the "Software"),
 * to deal in the Software without restriction, including without limitation
 * the rights to use, copy, modify, merge, publish, distribute, sublicense,
 * and/or sell copies of the Software, and to permit persons to whom the
 * Software is furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included
 * in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
 * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
 * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
 * DEALINGS IN THE SOFTWARE.
 ******************************************************************************
 */

#pragma once

#include <windows.h>
#include <gdal_priv.h>
/*
	GDALCreateDib returns a HBITMAP from a RGB, grayscale, or 8bits paletted GDALDataset. 
	Returns NULL if fails.
	If the failure comes from Windows(r) ( file too big for this system ) GetLastError() will
	return ERROR_NO_SYSTEM_RESOURCES .
	Otherwise the format is not implemented.
*/


HBITMAP GDALCreateDib( GDALDataset * poDataset)
{
	struct DIBINFO : public BITMAPINFO
	{
		RGBQUAD	 arColors[255];    // Color table info - adds an extra 255 entries to palette
		DIBINFO(BITMAPINFO bm) : BITMAPINFO(bm) {}
		operator LPBITMAPINFO()          { return (LPBITMAPINFO) this; }
		RGBQUAD* ColorTable( int i=0 )   { return bmiColors + i ; }
	};

	BITMAPINFO bm = { sizeof(BITMAPINFOHEADER), 
		poDataset->GetRasterXSize(), - poDataset->GetRasterYSize(), 1, 24, BI_RGB };
	DIBINFO bmi(bm);

	int nBands = poDataset->GetRasterCount();

	if ( nBands == 1 )
	{
		bmi.bmiHeader.biBitCount = 8 ;

		switch ( poDataset->GetRasterBand(1)->GetColorInterpretation())
		{
		case GCI_PaletteIndex :
			{
				GDALColorTable * pgdColorTable = poDataset->GetRasterBand(1)->GetColorTable();
				bmi.bmiHeader.biClrUsed = pgdColorTable->GetColorEntryCount();
				if ( ( bmi.bmiHeader.biClrUsed > 256 ) || 
					( pgdColorTable->GetPaletteInterpretation() != GPI_RGB ))
					return NULL; // unsupported image format
				// Fill the color table
				for ( UINT i=0 ; i < bmi.bmiHeader.biClrUsed ; i++ )
				{
					bmi.ColorTable(i)->rgbBlue =(BYTE) pgdColorTable->GetColorEntry(i)->c3;
					bmi.ColorTable(i)->rgbGreen =(BYTE) pgdColorTable->GetColorEntry(i)->c2;
					bmi.ColorTable(i)->rgbRed =(BYTE) pgdColorTable->GetColorEntry(i)->c1;
					bmi.ColorTable(i)->rgbReserved = 0;
				}
				break;
			}
		case GCI_GrayIndex :
			bmi.bmiHeader.biClrUsed = 256 ;
			// Fill the color table
			for ( UINT i=0 ; i < bmi.bmiHeader.biClrUsed ; i++ )
			{
				RGBQUAD q = {i,i,i,0} ;
				*bmi.ColorTable(i) = q ;
			}
			break;
		default : 
			return NULL ;
		}
	}
	// Create the DIB
	HDC dc = CreateCompatibleDC( NULL );
	LPVOID pBits;
	HBITMAP hbm = CreateDIBSection( dc, bmi, DIB_RGB_COLORS, &pBits, NULL, NULL );
	DeleteDC(dc);
	if ( ! hbm )
	{
		SetLastError( ERROR_NO_SYSTEM_RESOURCES );
		LocalFree(pBits);
		return hbm;
	}
	// Fill the Bits
	CPLErr gdErr = CE_Failure;
	int nScanSize = ((bmi.bmiHeader.biWidth  * bmi.bmiHeader.biBitCount + 31) & (~31) ) / 8;
	int nBandsRead = 1 ;
	
	if ( bmi.bmiHeader.biBitCount == 8 ) // Paletted or Gray
		gdErr = poDataset->GetRasterBand(1)->RasterIO( 
			GF_Read , 0 ,0 , poDataset->GetRasterXSize(), poDataset->GetRasterYSize(),
			pBits,bmi.bmiHeader.biWidth,-bmi.bmiHeader.biHeight,GDT_Byte, 
			1, nScanSize );
	else
		for ( int iBand = 1 ,nBandsRead = 0 ; iBand <= nBands ; iBand ++ )
		{
			int iColorOffset;
			switch( poDataset->GetRasterBand(iBand)->GetColorInterpretation() )
			{	// BGR 
				case GCI_RedBand : iColorOffset = 2; 
					break;
				case GCI_GreenBand : iColorOffset = 1;
					break;
				case GCI_BlueBand : iColorOffset = 0;
					break;
				default : continue ;
			}
			gdErr = poDataset->GetRasterBand(iBand)->RasterIO( 
				GF_Read , 0 ,0 , poDataset->GetRasterXSize(), poDataset->GetRasterYSize(),
				 ((LPBYTE)pBits) + iColorOffset ,bmi.bmiHeader.biWidth,-bmi.bmiHeader.biHeight,
				GDT_Byte, 3, nScanSize );
			nBandsRead ++;
	}
	if  (( gdErr != CE_None ) || !nBandsRead )
	{
		::DeleteObject(hbm);
		hbm=NULL;
	}
	return hbm ;
};
From wlwoon at must.edu.my  Wed Jul  7 15:09:39 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problem writing to MapInfo files
Message-ID: <20040708030939.23c97982.wlwoon@must.edu.my>

Hi all

I have been trying to put together a little program to re-write data from an existing *.TAB file to a new layer but with different colours for the features (I am working on an app to process traffic data then return a colour-coded congestion map) but the ogr library refuses to transfer the stylestring info over to the new layer. 

I noticed from a previous posting that this is a known bug ( http://xserve.flids.com/pipermail/gdal-dev/2004-July/006558.html ) so I thought I could have a short at debugging it but I can't seem to find the relevant part of the ogr source. 

My program uses the function OGR_L_CreateFeature() from the c api which is a wrapper for OGRLayer::CreateFeature() but the closest I can find is this bit of code from ogrlayer.cpp:

OGRErr OGRLayer::CreateFeature( OGRFeature * )

{
    return OGRERR_UNSUPPORTED_OPERATION;
}

which presumably is a stub for some driver specific version which is contained in another file.. however I just can't find where the "real" function is. Could anyone help me out please??

Regards
Wei Lee

From MChapman at sanz.com  Wed Jul  7 15:20:19 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit interleaved
	datawith	GDALRasterBand::RasterIO
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B34@mailman.san.com>

Alain,

Thank you very much for the code, but I am trying to write a dib section
out to a raster file rather than read into a dib section.  I was
wondering if the rasterio() function could handle the data in pixel
interleave versus band interleave.  That way I could just save contents
from the dib section directly into the rasterio() function without
having to take the extra time to reformat the interleaving to be band
interleave.  Frank said that's what the nPixelSpace and nLineSpace
params are for.  Do you have code that can do that? 

Thanks again,
Martin

-----Original Message-----
From: Alain Rist [mailto:ar@navpoch.com] 
Sent: Wednesday, July 07, 2004 11:11 AM
To: gdal-dev
Cc: Chapman, Martin
Subject: Re: [Gdal-dev] Writing bit interleaved datawith
GDALRasterBand::RasterIO


Hi Martin,
This is what I wrote for GDALView.
Hope it helps.

Alain

----- Original Message ----- 
From: "Chapman, Martin" <MChapman@sanz.com>
To: "Frank Warmerdam" <warmerdam@pobox.com>
Cc: "gdal-dev" <gdal-dev@remotesensing.org>
Sent: Wednesday, July 07, 2004 6:35 PM
Subject: RE: [Gdal-dev] Writing bit interleaved datawith
GDALRasterBand::RasterIO


Frank,

I'm not sure if I mean byte or pixel interleave.  I want to save data
the I have in a windows DIB.  When I create the DIB from a gdal dataset
I interleave the bits into the following structure something like
this...

unsigned char* pCombinedBytes = (unsigned char*)
CPLMalloc(sizeof(unsigned char) * nWidth * nHeight * nSize); //Where
nSize is the number of bands and nWidth and nHeight is the aoi w and
h...

//then I retrieve the bytes for each band something like this...

void** pBandBuffer = (void**) new unsigned char*[nSize];
//for each band
pBandBytes = (unsigned char*) CPLMalloc(sizeof(unsigned char) * nWidth *
nHeight);
pBand->RasterIO(GF_Read, nXOffset, nYOffset, nWidth, nHeight,
pBandBytes, nWidth , nHeight, GDT_Byte, 0, 0);
pBandBuffer[n] = pBandBytes;
//end if

// then I interleave the bytes into one array...

for (long i = 0, long j = 0; i < (nWidth * nHeight * nSize); i += nSize,
j++)
{
int k = i;

for (int m = nSize - 1; m >= 0; m--, k++)
{
unsigned char* pBytes = (unsigned char*) pBandBuffer[m]; ptr_dest =
pCombinedBytes + k; unsigned char b = pBytes[j];

if (pCT != NULL)
{
GDALColorEntry ce;
unsigned int c = (unsigned int) b;
c = pCT->GetColorEntryAsRGB(c, &ce);
if (m == 0) c = ce.c1;
if (m == 1) c = ce.c2;
if (m == 2) c = ce.c3;
b = (unsigned char) c;
}

ptr_src = &b;
memcpy(ptr_dest, ptr_src, 1);
}
}

// then I realign the bytes for a windows DIB...

m_pDIBSection->Create(nWidth ,nHeight, 24);
unsigned int dibwidth = m_pDIBSection->GetTotalWidth();

GByte* dest = (GByte*) m_pDIBSection->GetBits();
GByte* src = (GByte*) pCombinedBytes;

for (int row = 0; row < nHeight; row++)
{
ptr_dest = dest + row * dibwidth * nSize;
ptr_src = src + row * nWidth * nSize;
memcpy(ptr_dest, ptr_src, nWidth * nSize);
}

So I think I am pixel interleaving then?  Anyway, I think the example
you sent me will work if I undo the windows DIB realignment, (which
would be really cool).  I'll let you know if it works.

Thanks for the quick response.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Wednesday, July 07, 2004 10:02 AM
To: Chapman, Martin
Cc: gdal-dev
Subject: Re: [Gdal-dev] Writing bit interleaved data with
GDALRasterBand::RasterIO


Chapman, Martin wrote:
> All,
>
> If I have raster data stored as bit interleaved 
> (r,g,b,r,g,b,r,g,b...), can I use the GDALRasterBand::RasterIO 
> function to write this data to disc?  I read that the nPixelSpace and 
> nLineSpace parameters allow reading into or writing from unusually 
> organized buffers.  If this is possible, could someone please provide 
> me a brief example of how to
use
> these parameters with this type of data structure?

Martin,

Do you literally mean bit interleaved?  Or pixel interleaved?

I'll assume you mean pixel interleaved.   To write from a pixel
interleaved
1 line buffer of 8bit data you might use:

poBandRed->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 0, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

poBandGreen->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 1, xsize, 1, GDT_Byte,
                      3, xsize * 3 );
poBandBlue->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 2, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

Note that the buffer pointer you pass in needs to point to the beginning
of the data to be written (hence the +1 and +2 offsets on pabyRGB for
green and blue).  The nPixelSpace is the number of bytes from the
beginning of one pixel to the beginning of the next.  3 in this case
since there are 3 bytes of data for for each pixel written.  The
linespacing is the offset from the beginning of one line to the next, so
xsize * 3 in this case.

I hope this helps. If your data is really "bit" interleaved you will
need to repack stuff before writing.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From dmorissette at dmsolutions.ca  Wed Jul  7 15:26:25 2004
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problem writing to MapInfo files
In-Reply-To: <20040708030939.23c97982.wlwoon@must.edu.my>
References: <20040708030939.23c97982.wlwoon@must.edu.my>
Message-ID: <40EC4E61.3020606@dmsolutions.ca>

Woon Wei Lee wrote:
> Hi all
> 
> I have been trying to put together a little program to re-write data from an existing *.TAB file to a new layer but with different colours for the features (I am working on an app to process traffic data then return a colour-coded congestion map) but the ogr library refuses to transfer the stylestring info over to the new layer. 
> 
> I noticed from a previous posting that this is a known bug ( http://xserve.flids.com/pipermail/gdal-dev/2004-July/006558.html ) so I thought I could have a short at debugging it but I can't seem to find the relevant part of the ogr source. 
> 
> My program uses the function OGR_L_CreateFeature() from the c api which is a wrapper for OGRLayer::CreateFeature() but the closest I can find is this bit of code from ogrlayer.cpp:
> 
> OGRErr OGRLayer::CreateFeature( OGRFeature * )
> 
> {
>     return OGRERR_UNSUPPORTED_OPERATION;
> }
> 
> which presumably is a stub for some driver specific version which is contained in another file.. however I just can't find where the "real" function is. Could anyone help me out please??
> 

The TAB driver's CreateFeature() is implemented in 
gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp

-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From warmerdam at pobox.com  Wed Jul  7 16:50:26 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problem writing to MapInfo files
In-Reply-To: <20040708030939.23c97982.wlwoon@must.edu.my>
References: <20040708030939.23c97982.wlwoon@must.edu.my>
Message-ID: <40EC6212.2070404@pobox.com>

Woon Wei Lee wrote:
> Hi all
> 
> I have been trying to put together a little program to re-write data from an existing *.TAB file to a new layer but with different colours for the features (I am working on an app to process traffic data then return a colour-coded congestion map) but the ogr library refuses to transfer the stylestring info over to the new layer. 
> 
> I noticed from a previous posting that this is a known bug ( http://xserve.flids.com/pipermail/gdal-dev/2004-July/006558.html ) so I thought I could have a short at debugging it but I can't seem to find the relevant part of the ogr source. 
> 
> My program uses the function OGR_L_CreateFeature() from the c api which is a wrapper for OGRLayer::CreateFeature() but the closest I can find is this bit of code from ogrlayer.cpp:
> 
> OGRErr OGRLayer::CreateFeature( OGRFeature * )
> 
> {
>     return OGRERR_UNSUPPORTED_OPERATION;
> }
> 
> which presumably is a stub for some driver specific version which is contained in another file.. however I just can't find where the "real" function is. Could anyone help me out please??

Wei Lee,

The MITAB driver overrides the CreateFeature in the IMapInfoFile class found
in gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp.  Looking at this method,
I see it makes no effort to transfer the style string to the internal feature.
I am suspecting this is responsible for the problems generating proper styling
results.  Try adding something like this down just before the SetFeature() call
to apply the passed in style string to the real MapInfo feature object used for
writing and see if that helps.

     if( poFeature->GetStyleString() != NULL )
         poTABFeature->SetStyleString( poFeature->GetStyleString() );

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jul  7 17:41:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit
	interleaved	datawith	GDALRasterBand::RasterIO
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63B34@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63B34@mailman.san.com>
Message-ID: <40EC6E09.5040802@pobox.com>

Chapman, Martin wrote:
> Alain,
> 
> Thank you very much for the code, but I am trying to write a dib section
> out to a raster file rather than read into a dib section.  I was
> wondering if the rasterio() function could handle the data in pixel
> interleave versus band interleave.  That way I could just save contents
> from the dib section directly into the rasterio() function without
> having to take the extra time to reformat the interleaving to be band
> interleave.  Frank said that's what the nPixelSpace and nLineSpace
> params are for.  Do you have code that can do that? 

Martin,

The concern I had before was that you talked about "bit" interleaving
rather than byte or pixel interleaving.  I assume you meant byte interleaving
all along.

The calls I suggested before assume byte (pixel) interleaved data in RGB
format but normal top to bottom orientation.  I believe DIB's are bottom
to top and in BGR format.  For that you would need to either process one
scanline at a time, or properly account for the upsidedownness in the
nLineSpacing values and the offset into the image provided for whatever
y offset you are at.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Jul  7 17:50:48 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing
	bitinterleaved	datawith	GDALRasterBand::RasterIO
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B35@mailman.san.com>

Frank,

You are right, I said bit when I meant byte, sorry for the confusion.
You're also right about the BGR thing, I forgot about that.  I think it
will work then if I handle my offsets correctly and reverse the sign of
the y value.  I haven't tried it yet but when I do I'll let you know if
it works.  It would be a really slick way to save out DIB sections if it
works.  Otherwise, I will stop being lazy and repack my data correctly
before I save it.  Thanks for all the help everyone.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, July 07, 2004 3:41 PM
To: Chapman, Martin
Cc: gdal-dev
Subject: Re: [Gdal-dev] Writing bitinterleaved datawith
GDALRasterBand::RasterIO


Chapman, Martin wrote:
> Alain,
> 
> Thank you very much for the code, but I am trying to write a dib 
> section out to a raster file rather than read into a dib section.  I 
> was wondering if the rasterio() function could handle the data in 
> pixel interleave versus band interleave.  That way I could just save 
> contents from the dib section directly into the rasterio() function 
> without having to take the extra time to reformat the interleaving to 
> be band interleave.  Frank said that's what the nPixelSpace and 
> nLineSpace params are for.  Do you have code that can do that?

Martin,

The concern I had before was that you talked about "bit" interleaving
rather than byte or pixel interleaving.  I assume you meant byte
interleaving all along.

The calls I suggested before assume byte (pixel) interleaved data in RGB
format but normal top to bottom orientation.  I believe DIB's are bottom
to top and in BGR format.  For that you would need to either process one
scanline at a time, or properly account for the upsidedownness in the
nLineSpacing values and the offset into the image provided for whatever
y offset you are at.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From ar at navpoch.com  Wed Jul  7 18:43:53 2004
From: ar at navpoch.com (Alain Rist)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Writing bit interleaved
	datawith	GDALRasterBand::RasterIO
References: <ED3A48B9840E594890A2BC172D119465E63B34@mailman.san.com>
Message-ID: <020c01c46473$e37c5750$0201a8c0@Alain>

Martin,

Just use the code in reverse flow.
Change GF_Read to GF_Write , CreateDIBSection to GetDIBits and get the
dimensions from your DIB.

Alain

 ----- Original Message ----- 
From: "Chapman, Martin" <MChapman@sanz.com>
To: "Alain Rist" <ar@navpoch.com>; "gdal-dev" <gdal-dev@remotesensing.org>
Sent: Wednesday, July 07, 2004 9:20 PM
Subject: RE: [Gdal-dev] Writing bit interleaved datawith
GDALRasterBand::RasterIO


Alain,

Thank you very much for the code, but I am trying to write a dib section
out to a raster file rather than read into a dib section.  I was
wondering if the rasterio() function could handle the data in pixel
interleave versus band interleave.  That way I could just save contents
from the dib section directly into the rasterio() function without
having to take the extra time to reformat the interleaving to be band
interleave.  Frank said that's what the nPixelSpace and nLineSpace
params are for.  Do you have code that can do that?

Thanks again,
Martin

-----Original Message-----
From: Alain Rist [mailto:ar@navpoch.com]
Sent: Wednesday, July 07, 2004 11:11 AM
To: gdal-dev
Cc: Chapman, Martin
Subject: Re: [Gdal-dev] Writing bit interleaved datawith
GDALRasterBand::RasterIO


Hi Martin,
This is what I wrote for GDALView.
Hope it helps.

Alain

----- Original Message ----- 
From: "Chapman, Martin" <MChapman@sanz.com>
To: "Frank Warmerdam" <warmerdam@pobox.com>
Cc: "gdal-dev" <gdal-dev@remotesensing.org>
Sent: Wednesday, July 07, 2004 6:35 PM
Subject: RE: [Gdal-dev] Writing bit interleaved datawith
GDALRasterBand::RasterIO


Frank,

I'm not sure if I mean byte or pixel interleave.  I want to save data
the I have in a windows DIB.  When I create the DIB from a gdal dataset
I interleave the bits into the following structure something like
this...

unsigned char* pCombinedBytes = (unsigned char*)
CPLMalloc(sizeof(unsigned char) * nWidth * nHeight * nSize); //Where
nSize is the number of bands and nWidth and nHeight is the aoi w and
h...

//then I retrieve the bytes for each band something like this...

void** pBandBuffer = (void**) new unsigned char*[nSize];
//for each band
pBandBytes = (unsigned char*) CPLMalloc(sizeof(unsigned char) * nWidth *
nHeight);
pBand->RasterIO(GF_Read, nXOffset, nYOffset, nWidth, nHeight,
pBandBytes, nWidth , nHeight, GDT_Byte, 0, 0);
pBandBuffer[n] = pBandBytes;
//end if

// then I interleave the bytes into one array...

for (long i = 0, long j = 0; i < (nWidth * nHeight * nSize); i += nSize,
j++)
{
int k = i;

for (int m = nSize - 1; m >= 0; m--, k++)
{
unsigned char* pBytes = (unsigned char*) pBandBuffer[m]; ptr_dest =
pCombinedBytes + k; unsigned char b = pBytes[j];

if (pCT != NULL)
{
GDALColorEntry ce;
unsigned int c = (unsigned int) b;
c = pCT->GetColorEntryAsRGB(c, &ce);
if (m == 0) c = ce.c1;
if (m == 1) c = ce.c2;
if (m == 2) c = ce.c3;
b = (unsigned char) c;
}

ptr_src = &b;
memcpy(ptr_dest, ptr_src, 1);
}
}

// then I realign the bytes for a windows DIB...

m_pDIBSection->Create(nWidth ,nHeight, 24);
unsigned int dibwidth = m_pDIBSection->GetTotalWidth();

GByte* dest = (GByte*) m_pDIBSection->GetBits();
GByte* src = (GByte*) pCombinedBytes;

for (int row = 0; row < nHeight; row++)
{
ptr_dest = dest + row * dibwidth * nSize;
ptr_src = src + row * nWidth * nSize;
memcpy(ptr_dest, ptr_src, nWidth * nSize);
}

So I think I am pixel interleaving then?  Anyway, I think the example
you sent me will work if I undo the windows DIB realignment, (which
would be really cool).  I'll let you know if it works.

Thanks for the quick response.

Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Wednesday, July 07, 2004 10:02 AM
To: Chapman, Martin
Cc: gdal-dev
Subject: Re: [Gdal-dev] Writing bit interleaved data with
GDALRasterBand::RasterIO


Chapman, Martin wrote:
> All,
>
> If I have raster data stored as bit interleaved
> (r,g,b,r,g,b,r,g,b...), can I use the GDALRasterBand::RasterIO
> function to write this data to disc?  I read that the nPixelSpace and
> nLineSpace parameters allow reading into or writing from unusually
> organized buffers.  If this is possible, could someone please provide
> me a brief example of how to
use
> these parameters with this type of data structure?

Martin,

Do you literally mean bit interleaved?  Or pixel interleaved?

I'll assume you mean pixel interleaved.   To write from a pixel
interleaved
1 line buffer of 8bit data you might use:

poBandRed->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 0, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

poBandGreen->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 1, xsize, 1, GDT_Byte,
                      3, xsize * 3 );
poBandBlue->RasterIO( GF_Write, 0, line, xsize, 1,
                      pabyRGB + 2, xsize, 1, GDT_Byte,
                      3, xsize * 3 );

Note that the buffer pointer you pass in needs to point to the beginning
of the data to be written (hence the +1 and +2 offsets on pabyRGB for
green and blue).  The nPixelSpace is the number of bytes from the
beginning of one pixel to the beginning of the next.  3 in this case
since there are 3 bytes of data for for each pixel written.  The
linespacing is the offset from the beginning of one line to the next, so
xsize * 3 in this case.

I hope this helps. If your data is really "bit" interleaved you will
need to repack stuff before writing.

Best regards,

-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev





From wlwoon at must.edu.my  Thu Jul  8 04:54:12 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problem writing to MapInfo files
In-Reply-To: <40EC6212.2070404@pobox.com>
References: <20040708030939.23c97982.wlwoon@must.edu.my>
Message-ID: <40ED7C34.5129.23A32600@localhost>

Hi all

Thanks for all the comments. I tried inserting a

poTABFeature->SetStyleString(poFeature->GetStyleString())

just before the setfeature line but still no go (actually this is probably required as well 
because before this the poTABFeature->GetStyleString() returned a NULL when going 
into the setfeature() -  it definitely wouldn't work with that! However it looks like it's not 
the only problem :-(

The really strange part is that the TAB2TAB command from MITAB uses almost exactly 
the same syntax (in fact I inserted some debugging commands into function 
SetFeature() in mitab_tabfile.cpp and it looks like almost exactly the same functions are 
being called, etc, and yet it works for tab2tab!

Am stumped but will keep trying and will update everyone if I make any progress...

Cheers
Wei Lee



From dem at acri-st.fr  Thu Jul  8 06:08:51 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Fwd: Is GDAL "errno-safe" ?
Message-ID: <5.0.2.1.2.20040708120759.00af00f8@pop3>

I forward my message to gdal-dev@remotesensing.org because 
gdal-dev@xserve.flids.co seams to failed...

>Date: Thu, 08 Jul 2004 12:03:39 +0200
>To: gdal-dev@xserve.flids.co
>From: Julien Demaria <dem@acri-st.fr>
>Subject: Is GDAL "errno-safe" ?
>Cc: tiff@remotesensing.org
>
>Hi,
>
>I maintain an application which used libTIFF and I'm "upgrading" to GDAL.
>I want to use GDAL directly for all drivers except for TIFF files to keep 
>our existent optimized code for TIFF files (the major argument is that 
>with GDAL we must always read RGB contigu TIFF in 3 separate bands and 
>this is slower than using directly the contigu data, above all you want 
>finally rewrite the data in a contigu TIFF, isn't it ?)
>So for TIFF files I try to use tiff functions embedded in GDAL shared 
>library ; and it seams to work very well.
>
>All works well except when I try to open a TIFF file in write mode, 
>because my application handle a errno 9 ("Bad file descriptor") after the 
>XTIFFOpen call :
>
>I call XTIFFOpen in write mode => ... TIFFClientOpen
>and in TIFFClientOpen fuction at line 278 in tif_open.c, I understand that 
>we test if we can read the file (even for write mode) with ReadOK function 
>which finally calls fread in cpl_vsisimple.cpp
>This fread call set errno to 9 ("Bad file descriptor"), but this is a 
>"normal" case handled by TIFFClientOpen.
>The problem is that errno is set to 9, but there isn't any "real error".
>
>Maybe it is possible to modify TIFFClientOpen to be "errno-safe" ?
>
>I've also noted in the past a similar problem also in TIFFClientOpen at 
>line 365 when try to use memory-mapped file : if the test of mmap fails, 
>errno is set to ENOMEM.
>
>I think also GDALOpen isn't "errno-safe" when it try to open the file with 
>each driver ; I've a least one example which set errno to 2 I believe... 
>If you want I can search the driver in cause...
>
>Best Regards,
>
>Julien


From rpandey at delhi.tcs.co.in  Thu Jul  8 02:53:07 2004
From: rpandey at delhi.tcs.co.in (Rajesh Pandey)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal project info.
Message-ID: <000801c464b8$3ec11da0$57020eac@ptidelhi>

Skipped content of type multipart/alternative
From warmerdam at pobox.com  Thu Jul  8 09:25:32 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Fwd: Is GDAL "errno-safe" ?
In-Reply-To: <5.0.2.1.2.20040708120759.00af00f8@pop3>
References: <5.0.2.1.2.20040708120759.00af00f8@pop3>
Message-ID: <40ED4B4C.40606@pobox.com>

Julien Demaria wrote:
> I forward my message to gdal-dev@remotesensing.org because 
> gdal-dev@xserve.flids.co seams to failed...

Julien,

I encourage use of gdal-dev@remotesensing.org.  The other address is
gdal-dev@xserve.flids.com (note them "m" in com).

>> Hi,
>>
>> I maintain an application which used libTIFF and I'm "upgrading" to GDAL.
>> I want to use GDAL directly for all drivers except for TIFF files to 
>> keep our existent optimized code for TIFF files (the major argument is 
>> that with GDAL we must always read RGB contigu TIFF in 3 separate 
>> bands and this is slower than using directly the contigu data, above 
>> all you want finally rewrite the data in a contigu TIFF, isn't it ?)

There is a GDAL approach to reading interleaved data in one pass by using
the GDALDataset::RasterIO() call.  However, no support has yet been
introduced into the GeoTIFF driver to do this efficiently.  I should
really look into this at some point.

>> So for TIFF files I try to use tiff functions embedded in GDAL shared 
>> library ; and it seams to work very well.
 >>
>> All works well except when I try to open a TIFF file in write mode, 
>> because my application handle a errno 9 ("Bad file descriptor") after 
>> the XTIFFOpen call :
 >>
>> I call XTIFFOpen in write mode => ... TIFFClientOpen
>> and in TIFFClientOpen fuction at line 278 in tif_open.c, I understand 
>> that we test if we can read the file (even for write mode) with ReadOK 
>> function which finally calls fread in cpl_vsisimple.cpp
>> This fread call set errno to 9 ("Bad file descriptor"), but this is a 
>> "normal" case handled by TIFFClientOpen.
>> The problem is that errno is set to 9, but there isn't any "real error".
>>
>> Maybe it is possible to modify TIFFClientOpen to be "errno-safe" ?

In general libtiff and GDAL do not try to clear errno after recoverable
errors.  I gather you want it too so that you can use errno for post
call decisions, is that right?  I am not at all convinced that it is
wise of you to try and do this precisely because neither library attempts
to maintain any errno state after calls.

I am hesitant to start trying to maintain "clean" errno semantics at this
late date.  It seems it would be quite difficult (especially for GDAL) to
ensure that errno is always explicitly cleared when appropriate.  This is
really not the sort of constratain that should be engineered in "after the
fact".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Jul  8 09:28:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal project info.
In-Reply-To: <000801c464b8$3ec11da0$57020eac@ptidelhi>
References: <000801c464b8$3ec11da0$57020eac@ptidelhi>
Message-ID: <40ED4C03.6060802@pobox.com>

Rajesh Pandey wrote:
> sir,
> I am an engineering student, presently I am working on your GDAL library 
> as my summer project.
>     I wanted to know how I can convert the GDAL dll into a COM dll so 
> that I can use it in a project developed in VB,also tell me how can I 
> compile seperate dll of gdal as
> independent dlls.
>     kindly help me in my project,It will be a great help to me.
> thanking you

Rajesh,

Building proper COM bindings for all the GDAL entry points would be a
substantial effort.  The more common approach for folks wanting to use
libraries like GDAL from VB is to compile it with the appropriate calling
conventions (stdcall I think) and then just call the C API entry points
directly from VB.  There are definately difficulties with some of the
data types but this is (I think) acheivable.

In fact, rather than pursuing COM bindings in the future, I would be more
interested in seeing .net bindings prepared for GDAL at some point in the
future.  This would make it available to all the .net enabled languages on
windows, including VB.net.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Jul  8 09:25:32 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Tiff] Re: [Gdal-dev] Fwd: Is GDAL "errno-safe" ?
In-Reply-To: <5.0.2.1.2.20040708120759.00af00f8@pop3>
References: <5.0.2.1.2.20040708120759.00af00f8@pop3>
Message-ID: <40ED4B4C.40606@pobox.com>

Julien Demaria wrote:
> I forward my message to gdal-dev@remotesensing.org because 
> gdal-dev@xserve.flids.co seams to failed...

Julien,

I encourage use of gdal-dev@remotesensing.org.  The other address is
gdal-dev@xserve.flids.com (note them "m" in com).

>> Hi,
>>
>> I maintain an application which used libTIFF and I'm "upgrading" to GDAL.
>> I want to use GDAL directly for all drivers except for TIFF files to 
>> keep our existent optimized code for TIFF files (the major argument is 
>> that with GDAL we must always read RGB contigu TIFF in 3 separate 
>> bands and this is slower than using directly the contigu data, above 
>> all you want finally rewrite the data in a contigu TIFF, isn't it ?)

There is a GDAL approach to reading interleaved data in one pass by using
the GDALDataset::RasterIO() call.  However, no support has yet been
introduced into the GeoTIFF driver to do this efficiently.  I should
really look into this at some point.

>> So for TIFF files I try to use tiff functions embedded in GDAL shared 
>> library ; and it seams to work very well.
 >>
>> All works well except when I try to open a TIFF file in write mode, 
>> because my application handle a errno 9 ("Bad file descriptor") after 
>> the XTIFFOpen call :
 >>
>> I call XTIFFOpen in write mode => ... TIFFClientOpen
>> and in TIFFClientOpen fuction at line 278 in tif_open.c, I understand 
>> that we test if we can read the file (even for write mode) with ReadOK 
>> function which finally calls fread in cpl_vsisimple.cpp
>> This fread call set errno to 9 ("Bad file descriptor"), but this is a 
>> "normal" case handled by TIFFClientOpen.
>> The problem is that errno is set to 9, but there isn't any "real error".
>>
>> Maybe it is possible to modify TIFFClientOpen to be "errno-safe" ?

In general libtiff and GDAL do not try to clear errno after recoverable
errors.  I gather you want it too so that you can use errno for post
call decisions, is that right?  I am not at all convinced that it is
wise of you to try and do this precisely because neither library attempts
to maintain any errno state after calls.

I am hesitant to start trying to maintain "clean" errno semantics at this
late date.  It seems it would be quite difficult (especially for GDAL) to
ensure that errno is always explicitly cleared when appropriate.  This is
really not the sort of constratain that should be engineered in "after the
fact".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Tiff mailing list
Tiff@remotesensing.org
http://xserve.flids.com/mailman/listinfo/tiff




From Silke.Reimer at intevation.de  Thu Jul  8 11:03:45 2004
From: Silke.Reimer at intevation.de (Silke Reimer)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <20040708150345.GF21864@intevation.de>

proj@xserve.flids.com 
Cc: 
Bcc: 
Subject: Fedora package for grass and a few libraries
Reply-To: 


Hallo!

I created a grass 5.7 package for fedora version 2 and a few library
packages (gdal, proj and shapelib) which are normally necessary when
you want use free GIS software ;-)

You can download the Spec-files with the patches as well as srpms
and rpms from
	http://ftp.intevation.de/users/silke/packages/fedora/
They are located in SPECS, SOURCES, RPMS and SRPMS respectivly.

Please feel free to test the packages and make comments on them.

Many greetings,

	Silke

P.S.: Sorry for cross posting. I am aware that most of you will be
on more than one of those lists.

-- 
Silke Reimer

Intevation GmbH                      http://intevation.de/
FreeGIS                                http://freegis.org/

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040708/149403f6/attachment.bin
From nil5-ksa at yandex.ru  Thu Jul  8 06:05:07 2004
From: nil5-ksa at yandex.ru (ksa)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] problem getting style of point features
Message-ID: <01c301c4658c$e96bf610$0511a8c0@moon>

Hi!
I'm using version 1.2.1 of OGR. I've got some diffiiculties in getting the
style of point features.

There is no field 'fontName' (or something like this) in the OGR Feature
Style Specification for symbol style. So there is no ability to get the full
information about the vector symbols. The system returns information about
the symbol code but it never returns information about the font name for
that symbol.
For example, getStyleString() returns id:"mapinfo-sym-45". It's 45th symbol
in the MapInfo Weather symbol table (font) actually.
The question is: can I receive the font name for that symbol? If not, how
can I guess what a font was used for that symbol? Should I maintain a
private list of styles, used by different vendors in their products?
Thanks!

Karin Sergey
ICQ# 337538451


From neteler at itc.it  Fri Jul  9 05:32:13 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR and PostGIS: Geometry type not reported
Message-ID: <20040709093213.GK8116@thuille.itc.it>

Hi,

it seems that the PG driver of OGR does not report the Geometry
type:

ogrinfo -summary PG:'host=localhost user=postgres dbname=vmap0' roadl_eurnasia
INFO: Open of `PG:host=localhost user=postgres dbname=vmap0'
using driver `PostgreSQL' successful.

Layer name: roadl_eurnasia
Geometry: Unknown (any)
Feature Count: 165714
Extent: (-28.819973, 30.000000) - (179.445129, 74.034302)
Layer SRS WKT:
GEOGCS["NAD83",
    DATUM["North_American_Datum_1983",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
[...]

However, it's present in the table:
SELECT * from geometry_columns ;
f_table_catalog|f_table_schema|f_table_name|f_geometry_column|coord_dimension|srid|type|attrelid|varattnum|stats
|vmap0|polbnda_eurnasia|wkb_geometry|3|104306|POLYGON|425867661|2|
|vmap0|coastl_eurnasia|wkb_geometry|3|104306|LINESTRING|425875636|2|
|vmap0|watrcrsl_eurnasia|wkb_geometry|3|104306|LINESTRING|425882461|2|
[...]

I tried to find the problem, but I am no CPP programmer.

The bugtracker is still down, so I'm posting here.

Kind regards

 Markus Neteler

From disen at geo.unizh.ch  Fri Jul  9 08:43:15 2004
From: disen at geo.unizh.ch (Daniel Isenegger)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal config icluding xerces
In-Reply-To: <40EE5D4A.2070300@geo.unizh.ch>
References: <40EE5D4A.2070300@geo.unizh.ch>
Message-ID: <40EE92E3.4040801@geo.unizh.ch>

Hi

i have installed grass57 on suse9.1 and want to use gdal for the 
grass-commands v.in.ogr and v.out.ogr. When applying v.out.ogr xerces is 
needed by gdal.

when compiling gdal to use xerces i get the following errors (2 
different tries in the following):

- when using xerces 2.1.0 (built from source):

./configure --with-grass=/usr/local/grass-5.7.0 
--with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
--with-xerces-inc=/downloads/xerces/xerces-c-src2_1_0/include 
--with-xerces-lib="-L/downloads/xerces/xerces-c-src2_1_0/lib -lpthread" 
--with-odbc=/usr/local/lib --with-static-proj4=/usr/lib/libproj.so | tee 
configure_disen.log

...
checking for Xerces C++... requested, but compile or link fails!

g++ -I/downloads/xerces/xerces-c-src2_1_0/include -o conftest 
conftest.cpp -L/downloads/xerces/xerces-c-src2_1_0/lib -lpthread 
-L/usr/local/grass-5.7.0 -L/usr/local/grass-5.7.0/lib -lgrass5 -lz -lm -ldl

conftest.cpp:1:34: util/PlatformUtils.hpp: No such file or directory
conftest.cpp: In function `int main()':
conftest.cpp:5: error: `XMLPlatformUtils' undeclared (first use this 
function)
conftest.cpp:5: error: (Each undeclared identifier is reported only once 
for
   each function it appears in.)
conftest.cpp:5: error: syntax error before `::' token

configure: error: Please correct Xerces options, or don't enable Xerces.





- when using Xerces 1.6.0 (binary):

./configure --with-grass=/usr/local/grass-5.7.0 
--with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
--with-xerces-inc=/downloads/xerces/xerc./configure 
--with-grass=/usr/local/grass-5.7.0 
--with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
--with-xerces-inc=/downloads/xerces/xerces-c1_6_0-linux/include 
--with-xerces-lib="-L/downloads/xerces/xerces-c1_6_0-linux/lib 
-lxerces-c1_6_0 -lpthread" --with-odbc=/usr/local/lib 
--with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log

...
checking for Xerces C++... requested, but compile or link fails!

g++ -I/downloads/xerces/xerces-c1_6_0-linux/include -o conftest 
conftest.cpp -L/downloads/xerces/xerces-c1_6_0-linux/lib -lxerces-c1_6_0 
-lpthread -L/usr/local/grass-5.7.0 -L/usr/local/grass-5.7.0/lib -lgrass5 
-lz -lm -ldl

/usr/lib/gcc-lib/i586-suse-linux/3.3.3/../../../../i586-suse-linux/bin/ld: 
cannot find -lgrass5
collect2: ld returned 1 exit status

configure: error: Please correct Xerces options, or don't enable Xerces


- with xerces 2.1.0: the file util/PlatformUtils.hpp is there
(The environment variables XERCESROOT, PATH, LD_LIBRARY_PATH are set to 
the appropriate directories)
- with xerces 1.6: what is the difference in the error message? coming 
from the same problems?
- how to solve them?

I browsed trough the archives and found similar errors, but no 
suggestions to fix them (:-(

Any ideas?

Thanks Dani


From warmerdam at pobox.com  Fri Jul  9 10:48:59 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal config icluding xerces
In-Reply-To: <40EE92E3.4040801@geo.unizh.ch>
References: <40EE5D4A.2070300@geo.unizh.ch> <40EE92E3.4040801@geo.unizh.ch>
Message-ID: <40EEB05B.4050205@pobox.com>

Daniel Isenegger wrote:
> Hi
> 
> i have installed grass57 on suse9.1 and want to use gdal for the 
> grass-commands v.in.ogr and v.out.ogr. When applying v.out.ogr xerces is 
> needed by gdal.
> 
> when compiling gdal to use xerces i get the following errors (2 
> different tries in the following):
> 
> - when using xerces 2.1.0 (built from source):
> 
> ./configure --with-grass=/usr/local/grass-5.7.0 
> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
> --with-xerces-inc=/downloads/xerces/xerces-c-src2_1_0/include 
> --with-xerces-lib="-L/downloads/xerces/xerces-c-src2_1_0/lib -lpthread" 
> --with-odbc=/usr/local/lib --with-static-proj4=/usr/lib/libproj.so | tee 
> configure_disen.log

Daniel,

I tried this out and found I had to do things a bit differently:

   ./configure --with-xerces --with-xerces-inc=/u/pkg/xerces-c-src2_2_0/include/xercesc 
--with-xerces-lib="-L/u/pkg/xerces-c-src2_2_0/lib -lxerces-c -lpthread"

Note:
  o the include directory is <base>/include/xercesc, not just <base>/include.
  o The lib directive needs to include the library (-lxerces-c) as well as the
    path and pthread.

With this it worked for me.  In general though I find it much easier to just
"make install" xerces and use --with-xerces alone to find the library.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tjmitchell at riverside.bc.ca  Fri Jul  9 11:54:49 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR and PostGIS: Geometry type not reported
In-Reply-To: <20040709093213.GK8116@thuille.itc.it>
Message-ID: <OF0C19819C.705AE6DA-ON88256ECC.00575C23-88256ECC.005769ED@Riverside.bc.ca>

> it seems that the PG driver of OGR does not report the Geometry
> type:

I confirmed this at my end too.

Tyler

From tugrul at galatali.com  Fri Jul  9 13:19:22 2004
From: tugrul at galatali.com (Tugrul Galatali)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] California/CASIL's NAD27 DRGs
Message-ID: <1089393562.10939.16.camel@duality.galatali.com>

	I've found that in reprojecting the original NAD27 DRGs from CASIL
using gdalwarp to the local UTM zone, there are significant errors in
the registration of the resulting DRG. The source projection is outlined
on this page:

http://casil.ucdavis.edu/casil/gis.ca.gov/drg/projection.html

	Other programs like Global Mapper (somewhat unsuitable for batch
conversion) don't have any issue with these DRGs, and I can't find any
reference to this issue with gdal online. There are new NAD83 DRGs CASIL
just released that gdalwarp handles fine, but I'd like to avoid
redownloading the significant number of DRGs currently in use.

	Tugrul Galatali



From ed at topozone.com  Fri Jul  9 13:28:16 2004
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] California/CASIL's NAD27 DRGs
Message-ID: <2A6FDD75AE04BE4A9E8C918D3C09FB070B37D8@ptolemy.topozone.com>

Tugrul -

Is your PROJ installation set up to include datum-shift support
(assuming you're trying to go to NAD83 UTM)?  Could you give us specific
information about a specific input file and the exact problems you see
with the corresponding output file?

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242 s 

-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Tugrul Galatali
Sent: Friday, July 09, 2004 1:19 PM
To: gdal-dev@xserve.flids.com
Subject: [Gdal-dev] California/CASIL's NAD27 DRGs

	I've found that in reprojecting the original NAD27 DRGs from
CASIL using gdalwarp to the local UTM zone, there are significant errors
in the registration of the resulting DRG. The source projection is
outlined on this page:

http://casil.ucdavis.edu/casil/gis.ca.gov/drg/projection.html

	Other programs like Global Mapper (somewhat unsuitable for batch
conversion) don't have any issue with these DRGs, and I can't find any
reference to this issue with gdal online. There are new NAD83 DRGs CASIL
just released that gdalwarp handles fine, but I'd like to avoid
redownloading the significant number of DRGs currently in use.

	Tugrul Galatali


_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From tugrul at galatali.com  Fri Jul  9 13:59:21 2004
From: tugrul at galatali.com (Tugrul Galatali)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] California/CASIL's NAD27 DRGs
In-Reply-To: <2A6FDD75AE04BE4A9E8C918D3C09FB070B37D8@ptolemy.topozone.com>
References: <2A6FDD75AE04BE4A9E8C918D3C09FB070B37D8@ptolemy.topozone.com>
Message-ID: <1089395961.14315.6.camel@duality.galatali.com>

On Fri, 2004-07-09 at 13:28, Ed McNierney wrote:
> Tugrul -
> 
> Is your PROJ installation set up to include datum-shift support
> (assuming you're trying to go to NAD83 UTM)?  

	I was using the stock debian package. After feeling a bit silly for not
checking the Proj4 faq, I rebuilt it per the instructions there and
things appear to be working now.

	Thanks for the quick reponse.

	Tugrul Galatali



From qjhart at ucdavis.edu  Fri Jul  9 14:13:22 2004
From: qjhart at ucdavis.edu (Quinn Hart)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] California/CASIL's NAD27 DRGs
In-Reply-To: <1089395961.14315.6.camel@duality.galatali.com>
References: <2A6FDD75AE04BE4A9E8C918D3C09FB070B37D8@ptolemy.topozone.com>
	<1089395961.14315.6.camel@duality.galatali.com>
Message-ID: <1089396802.947.16.camel@q>

Tugrul,

As a testimonial, CaSIL uses GDAL as our primary tool for manipulating
our data products, (although the new NAD83 drgs were contributed by Ca
Fish and Game).  You add the following file to your shared proj
directory, /usr/share/proj for debian, to get somewhat better support
for CaSIL's Albers projection.  Then you can do reprojections like:

ogr2ogr -t_srs '+init=casil:2' foo.shp bar.shp

/usr/share/proj/casil
#
PROJCS["Custom",GEOGCS["GCS_North_American_1927",DATUM["D_North_American_1927",SPHEROID["Clarke_1866",6378206.4,294.9786982]],PRIMEM["Greenwich",0],UNIT["Degree",0.0174532925199433]],PROJECTION["Albers"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",-4000000],PARAMETER["Central_Meridian",-120],PARAMETER["Standard_Parallel_1",34],PARAMETER["Standard_Parallel_2",40.5],UNIT["Meter",1]]
<1> +proj=aea +lat_1=34.00 +lat_2=40.50 +lat_0=0.00 +lon_0=-120.00
+x_0=0.000 +y_0=-4000000.000 +ellps=clrk66 +units=m +datum=NAD27 no_defs
<>
# 
PROJCS["Custom",GEOGCS["NAD83",DATUM["North_American_Datum_1983",SPHEROID["GRS 1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]],PROJECTION["Albers"],PARAMETER["False_Easting",0],PARAMETER["False_Northing",-4000000],PARAMETER["Central_Meridian",-120],PARAMETER["Standard_Parallel_1",34],PARAMETER["Standard_Parallel_2",40.5],UNIT["Meter",1]]
<2> +proj=aea +lat_1=34.00 +lat_2=40.50 +lat_0=0.00 +lon_0=-120.00
+x_0=0.000 +y_0=-4000000.000 +ellps=GRS80 +units=m +datum=NAD83 no_defs
<>

On Fri, 2004-07-09 at 10:59, Tugrul Galatali wrote:
> On Fri, 2004-07-09 at 13:28, Ed McNierney wrote:
> > Tugrul -
> > 
> > Is your PROJ installation set up to include datum-shift support
> > (assuming you're trying to go to NAD83 UTM)?  
> 
> 	I was using the stock debian package. After feeling a bit silly for not
> checking the Proj4 faq, I rebuilt it per the instructions there and
> things appear to be working now.
> 
> 	Thanks for the quick reponse.
> 
> 	Tugrul Galatali
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
-- 
Quinn Hart <qjhart@ucdavis.edu>
University of California, Davis

From dron at ak4719.spb.edu  Sat Jul 10 08:33:47 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] color table in ESRI BIL format
In-Reply-To: <40E5817D.7000603@uva.nl>
References: <40D9E51C.9060502@pobox.com> <40E5817D.7000603@uva.nl>
Message-ID: <20040710123347.GA21799@ak4719.spb.edu>

On Fri, Jul 02, 2004 at 05:38:37PM +0200, Jan Hartmann wrote:
> Is it possible to translate an ESRI BIL file with an associated ASCII
> color table (.clr file) to other GDAL-supported formats and keep the
> color table information?

I have implemented reading .clr files for ESRI format. The code is
available in CVS. Please, test with your data.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From wlwoon at must.edu.my  Sun Jul 11 12:50:01 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problem writing to MapInfo files
In-Reply-To: <40EC6212.2070404@pobox.com>
References: <20040708030939.23c97982.wlwoon@must.edu.my>
Message-ID: <40F1E039.22081.34C64C2B@localhost>

Dear all,

It turns out that the problem seems to be that the pen style isn't transferred across by 
simply doing a "setstylestring()" command -> this is a member of class TABFeature but 
what really matters when writing to a file seems to be class ITABFeature (class 
TABPolyline is derived from both these classes).

Somehow there is some kind of problem with synching the pen styles between the two 
so it is possible to appear to get the correct settings when executing a "setstylestring()" 
(and checking the outcome using getstylestring()) on the feature object, but 
TABPolyline->GetPenColor() still returns a zero...

I was able to get the pen colors to transfer correctly by adding something like this to the 
function CreateFeature() in file mitab_imapinfofile.cpp:

  // Declaring utility pointers
  TABPolyline *mod_poTABFeature,*mod_poFeature;

  // Cast as pointers to TABPolyline object so that we can call the class functions
  // GetPenColor() and GetPenPattern()
  mod_poFeature=(TABPolyline*) poFeature;    
  mod_poTABFeature=(TABPolyline*) poTABFeature;

  // Set the Pen Colors and Pen Patterns
  mod_poTABFeature->SetPenColor(mod_poFeature->GetPenColor());
  mod_poTABFeature->SetPenPattern(mod_poFeature->GetPenPattern());

I'm afraid it's a bit of a hack and only works for Polylines (plus it doesn't address the 
underlying problem of how the two styles came to be different in the first place) - I 
haven't had time to really understand the full class structure or to figure out how to 
devise a proper fix yet but I hope this sheds some light on the problem which some of 
us have encountered.. 

Best Regards
Wei Lee




On 7 Jul 2004 at 16:50, Frank Warmerdam wrote:

> Woon Wei Lee wrote:
> > Hi all
> > 
> > I have been trying to put together a little program to re-write data
> > from an existing *.TAB file to a new layer but with different
> > colours for the features (I am working on an app to process traffic
> > data then return a colour-coded congestion map) but the ogr library
> > refuses to transfer the stylestring info over to the new layer. 
> > 
> > I noticed from a previous posting that this is a known bug (
> > http://xserve.flids.com/pipermail/gdal-dev/2004-July/006558.html )
> > so I thought I could have a short at debugging it but I can't seem
> > to find the relevant part of the ogr source. 
> > 
> > My program uses the function OGR_L_CreateFeature() from the c api
> > which is a wrapper for OGRLayer::CreateFeature() but the closest I
> > can find is this bit of code from ogrlayer.cpp:
> > 
> > OGRErr OGRLayer::CreateFeature( OGRFeature * )
> > 
> > {
> >     return OGRERR_UNSUPPORTED_OPERATION;
> > }
> > 
> > which presumably is a stub for some driver specific version which is
> > contained in another file.. however I just can't find where the
> > "real" function is. Could anyone help me out please??
> 
> Wei Lee,
> 
> The MITAB driver overrides the CreateFeature in the IMapInfoFile class
> found in gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp.  Looking
> at this method, I see it makes no effort to transfer the style string
> to the internal feature. I am suspecting this is responsible for the
> problems generating proper styling results.  Try adding something like
> this down just before the SetFeature() call to apply the passed in
> style string to the real MapInfo feature object used for writing and
> see if that helps.
> 
>      if( poFeature->GetStyleString() != NULL )
>          poTABFeature->SetStyleString( poFeature->GetStyleString() );
> 
> Best regards,
> 
> -- 
> ---------------------------------------+------------------------------
> -------- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> Geospatial Programmer for Rent
> 
> 



From warmerdam at pobox.com  Sun Jul 11 15:16:24 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GEOS Integration
Message-ID: <40F19208.8000106@pobox.com>

Folks,

I have completed a preliminary integration of the GEOS simple features
geometry operations library with the OGRGeometry class.  The OGRGeometry
now has a variety of operators including:

     // ISpatialRelation
     virtual OGRBoolean  Intersect( OGRGeometry * ) const;
     virtual OGRBoolean  Equal( OGRGeometry * ) const = 0;
     virtual OGRBoolean  Disjoint( const OGRGeometry * ) const;
     virtual OGRBoolean  Touches( const OGRGeometry * ) const;
     virtual OGRBoolean  Crosses( const OGRGeometry * ) const;
     virtual OGRBoolean  Within( const OGRGeometry * ) const;
     virtual OGRBoolean  Contains( const OGRGeometry * ) const;
     virtual OGRBoolean  Overlaps( const OGRGeometry * ) const;
//    virtual OGRBoolean  Relate( const OGRGeometry *, const char * ) const;

     virtual OGRGeometry *getBoundary() const;
     virtual double  Distance( const OGRGeometry * ) const;
     virtual OGRGeometry *ConvexHull() const;
     virtual OGRGeometry *Buffer( double dfDist, int nQuadSegs = 30 ) const;
     virtual OGRGeometry *Intersection( const OGRGeometry *) const;
     virtual OGRGeometry *Union( const OGRGeometry * ) const;
     virtual OGRGeometry *Difference( const OGRGeometry * ) const;
     virtual OGRGeometry *SymmetricDifference( const OGRGeometry * ) const;

There are also methods to convert OGRGeometries to geos::geometry and back
again.   Python bindings and documentation have been added for the new methods.

There is currently no way to use the new operations from the commandline
of any of the programs, but it is available to scripters and programmers.
I have only used it on Linux.  No effort has been made to update the windows
builds to support GEOS yet.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wlwoon at must.edu.my  Sun Jul 11 23:19:48 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Problem writing to MapInfo files
In-Reply-To: <40F1E039.22081.34C64C2B@localhost>
References: <40EC6212.2070404@pobox.com>
Message-ID: <40F273D4.21353.3706E481@localhost>

Hi again

Actually it turns out that the problem can also be fixed by simply passing the reference 
to the feature straight to setfeature() 
i.e.: so by changing the following line in function createfeature() in 
mitab_imapinfofile.cpp:
 if (SetFeature(poTABFeature) > -1)

to:
 if (SetFeature((TABFeature*) poFeature) > -1)

Is there any problem with doing this instead of transferring all the definitions from the 
original feature to a copy??

Cheers
Wei Lee



On 12 Jul 2004 at 0:50, Woon Wei Lee wrote:

> Dear all,
> 
> It turns out that the problem seems to be that the pen style isn't
> transferred across by simply doing a "setstylestring()" command ->
> this is a member of class TABFeature but what really matters when
> writing to a file seems to be class ITABFeature (class TABPolyline is
> derived from both these classes).
> 
> Somehow there is some kind of problem with synching the pen styles
> between the two so it is possible to appear to get the correct
> settings when executing a "setstylestring()" (and checking the outcome
> using getstylestring()) on the feature object, but
> TABPolyline->GetPenColor() still returns a zero...
> 
> I was able to get the pen colors to transfer correctly by adding
> something like this to the function CreateFeature() in file
> mitab_imapinfofile.cpp:
> 
>   // Declaring utility pointers
>   TABPolyline *mod_poTABFeature,*mod_poFeature;
> 
>   // Cast as pointers to TABPolyline object so that we can call the
>   class functions // GetPenColor() and GetPenPattern()
>   mod_poFeature=(TABPolyline*) poFeature;   
>   mod_poTABFeature=(TABPolyline*) poTABFeature;
> 
>   // Set the Pen Colors and Pen Patterns
>   mod_poTABFeature->SetPenColor(mod_poFeature->GetPenColor());
>   mod_poTABFeature->SetPenPattern(mod_poFeature->GetPenPattern());
> 
> I'm afraid it's a bit of a hack and only works for Polylines (plus it
> doesn't address the underlying problem of how the two styles came to
> be different in the first place) - I haven't had time to really
> understand the full class structure or to figure out how to devise a
> proper fix yet but I hope this sheds some light on the problem which
> some of us have encountered.. 
> 
> Best Regards
> Wei Lee
> 
> 
> 
> 
> On 7 Jul 2004 at 16:50, Frank Warmerdam wrote:
> 
> > Woon Wei Lee wrote:
> > > Hi all
> > > 
> > > I have been trying to put together a little program to re-write
> > > data from an existing *.TAB file to a new layer but with different
> > > colours for the features (I am working on an app to process
> > > traffic data then return a colour-coded congestion map) but the
> > > ogr library refuses to transfer the stylestring info over to the
> > > new layer. 
> > > 
> > > I noticed from a previous posting that this is a known bug (
> > > http://xserve.flids.com/pipermail/gdal-dev/2004-July/006558.html )
> > > so I thought I could have a short at debugging it but I can't seem
> > > to find the relevant part of the ogr source. 
> > > 
> > > My program uses the function OGR_L_CreateFeature() from the c api
> > > which is a wrapper for OGRLayer::CreateFeature() but the closest I
> > > can find is this bit of code from ogrlayer.cpp:
> > > 
> > > OGRErr OGRLayer::CreateFeature( OGRFeature * )
> > > 
> > > {
> > >     return OGRERR_UNSUPPORTED_OPERATION;
> > > }
> > > 
> > > which presumably is a stub for some driver specific version which
> > > is contained in another file.. however I just can't find where the
> > > "real" function is. Could anyone help me out please??
> > 
> > Wei Lee,
> > 
> > The MITAB driver overrides the CreateFeature in the IMapInfoFile
> > class found in gdal/ogr/ogrsf_frmts/mitab/mitab_imapinfofile.cpp. 
> > Looking at this method, I see it makes no effort to transfer the
> > style string to the internal feature. I am suspecting this is
> > responsible for the problems generating proper styling results.  Try
> > adding something like this down just before the SetFeature() call to
> > apply the passed in style string to the real MapInfo feature object
> > used for writing and see if that helps.
> > 
> >      if( poFeature->GetStyleString() != NULL )
> >          poTABFeature->SetStyleString( poFeature->GetStyleString()
> >          );
> > 
> > Best regards,
> > 
> > -- 
> > ---------------------------------------+----------------------------
> > -- -------- I set the clouds in motion - turn up   | Frank
> > Warmerdam, warmerdam@pobox.com light and sound - activate the
> > windows | http://pobox.com/~warmerdam and watch the world go round -
> > Rush    | Geospatial Programmer for Rent
> > 
> > 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 


Woon Wei Lee, Ph.D
Assistant Professor,
Malaysia University of Science and Technology.
Tel: 603-78801777 ext 129   
Fax: 603-78801762


From disen at geo.unizh.ch  Mon Jul 12 05:27:49 2004
From: disen at geo.unizh.ch (Daniel Isenegger)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal config icluding xerces
In-Reply-To: <40EEB05B.4050205@pobox.com>
References: <40EE5D4A.2070300@geo.unizh.ch> <40EE92E3.4040801@geo.unizh.ch>
	<40EEB05B.4050205@pobox.com>
Message-ID: <40F25995.7000204@geo.unizh.ch>

Frank Warmerdam schrieb:

> Daniel Isenegger wrote:
>
>> Hi
>>
>> i have installed grass57 on suse9.1 and want to use gdal for the 
>> grass-commands v.in.ogr and v.out.ogr. When applying v.out.ogr xerces 
>> is needed by gdal.
>>
>> when compiling gdal to use xerces i get the following errors (2 
>> different tries in the following):
>>
>> - when using xerces 2.1.0 (built from source):
>>
>> ./configure --with-grass=/usr/local/grass-5.7.0 
>> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
>> --with-xerces-inc=/downloads/xerces/xerces-c-src2_1_0/include 
>> --with-xerces-lib="-L/downloads/xerces/xerces-c-src2_1_0/lib 
>> -lpthread" --with-odbc=/usr/local/lib 
>> --with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log
>
>
> Daniel,
>
> I tried this out and found I had to do things a bit differently:
>
>   ./configure --with-xerces 
> --with-xerces-inc=/u/pkg/xerces-c-src2_2_0/include/xercesc 
> --with-xerces-lib="-L/u/pkg/xerces-c-src2_2_0/lib -lxerces-c -lpthread"
>
> Note:
>  o the include directory is <base>/include/xercesc, not just 
> <base>/include.
>  o The lib directive needs to include the library (-lxerces-c) as well 
> as the
>    path and pthread. 

Hi Frank,
thanks for for your advice. Unfortunately it still doesn't work. I 
included your advices:

./configure --with-grass=/usr/local/grass-5.7.0 
--with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
--with-xerces-inc=/usr/local/xerces-c-src2_2_0/include/xercesc 
--with-xerces-lib="-L/usr/local/xerces-c-src2_2_0/lib -lxerces-c 
-lpthread" --with-odbc=/usr/local/lib 
--with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log

the error is: cannot find files, e.g. file xercesc/util/XercesDefs.hpp 
(which is at that location). Does gdal search only the paths given in 
the configuration or also consider environment vars?

g++ -I/usr/local/xerces-c-src2_2_0/include/xercesc 
/usr/local/xerces-c-src2_2_0/include -o conftest conftest.cpp 
-L/usr/local/xerces-c-src2_2_0/lib -lxerces-c -lpthread 
-L/usr/local/grass-5.7.0 -L/usr/local/grass-5.7.0/lib -lgrass5 -lz -lm -ldl


In file included from conftest.cpp:1:
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:65:39: 
xercesc/util/XercesDefs.hpp: No such file or directory
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:66:41: 
xercesc/util/XMLException.hpp: No such file or directory
In file included from conftest.cpp:1:
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:70: 
error: syntax
   error before `;' token
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:82: 
error: syntax
   error before `{' token
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:91: 
error: syntax
   error before `&' token
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:91: 
error: `
   void operator=(...)' must be a nonstatic member function
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:91: 
error: `
   void operator=(...)' must take exactly two arguments
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:104: 
error: syntax
   error before `{' token
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:175: 
error: `
   XMLUni' was not declared in this scope
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:175: 
error: syntax
   error before `::' token
/usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:200: 
error: syntax
   error before `)' token

i don't know if my paths are wrong??
echo $LD_LIBRARY_PATH
/lib:/usr/lib:/usr/local/lib:/usr/X11R6/lib:/opt/lib:/usr/local/grass-5.7.0/lib:/usr/local/pgsql/lib:
/usr/local/qt/lib:/usr/local/xerces-c-src2_2_0/lib

echo $PATH
/usr/sbin:/bin:/usr/bin:/sbin:/usr/X11R6/bin:/usr/local/grass-5.7.0/bin:/usr/local/pgsql/bin:
/usr/local/qt/bin:/usr/local/xerces-c-src2_2_0/bin

>
>
> With this it worked for me.  In general though I find it much easier 
> to just
> "make install" xerces and use --with-xerces alone to find the library.

 if i understand you right, you suggest to just install xerces-binaries 
at the default place and let gdal-config script look for xerces?
My problem is, there are no xerces-binaries for suse9.1 and in the 
binaries of former versions, there is no default installation path 
suggested.
if i have installed xerces as i have it now and just run the gdal-config 
script with --with-xerces the same error as described in the first mail 
occurs (conftest.cpp:1:34: util/PlatformUtils.hpp: No such file or 
directory ).

Thanks Dani









From warmerdam at pobox.com  Mon Jul 12 07:55:52 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal config icluding xerces
In-Reply-To: <40F25995.7000204@geo.unizh.ch>
References: <40EE5D4A.2070300@geo.unizh.ch> <40EE92E3.4040801@geo.unizh.ch>
	<40EEB05B.4050205@pobox.com> <40F25995.7000204@geo.unizh.ch>
Message-ID: <40F27C48.2050909@pobox.com>

Daniel Isenegger wrote:
> Hi Frank,
> thanks for for your advice. Unfortunately it still doesn't work. I 
> included your advices:
> 
> ./configure --with-grass=/usr/local/grass-5.7.0 
> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
> --with-xerces-inc=/usr/local/xerces-c-src2_2_0/include/xercesc 
> --with-xerces-lib="-L/usr/local/xerces-c-src2_2_0/lib -lxerces-c 
> -lpthread" --with-odbc=/usr/local/lib 
> --with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log

Daniel,

In your earlier example you were using Xerces 2.1 but now you are showing
2.2 paths.  Did you build 2.2 as well in trying the new paths?  I used
2.2 in my examples because that is what I have installed.

> the error is: cannot find files, e.g. file xercesc/util/XercesDefs.hpp 
> (which is at that location). Does gdal search only the paths given in 
> the configuration or also consider environment vars?

I am not aware of the makefiles or configure using environment vars for
include file search paths.

> g++ -I/usr/local/xerces-c-src2_2_0/include/xercesc 
> /usr/local/xerces-c-src2_2_0/include -o conftest conftest.cpp 
> -L/usr/local/xerces-c-src2_2_0/lib -lxerces-c -lpthread 
> -L/usr/local/grass-5.7.0 -L/usr/local/grass-5.7.0/lib -lgrass5 -lz -lm -ldl
> 
> 
> In file included from conftest.cpp:1:
> /usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:65:39: 
> xercesc/util/XercesDefs.hpp: No such file or directory

Hmm, there seems to be a conflict between how I refer to include files
from xerces in my code (not including the xercesc prefix) and how they
are referred to by Xerces code itself, including the xercesc prefix.
This happens to work for me because due to stuff already having been
pre-installed.

I think you will need an include path that includes the xercesc directory
and the directory above it.  This can't be easily controlled by configure
options as things stand, so you will likely need to hand edit GDALmake.opt
and change the XERCES_INCLUDE to look something like:

XERCES_INCLUDE = -I/usr/local/xerces-c-src2_2_0/include/xercesc \
                  -I/usr/local/xerces-c-src2_2_0/include

I have altered the configure logic in CVS to include both locations and
now the appropriate value to pass in --with-xerces-inc would be the
directory *above* the xercesc directory.

> if i understand you right, you suggest to just install xerces-binaries 
> at the default place and let gdal-config script look for xerces?
> My problem is, there are no xerces-binaries for suse9.1 and in the 
> binaries of former versions, there is no default installation path 
> suggested.

I am suggesting building Xerces from source, and then doing a "make install".
The default install location is under /usr/local and if this had been done
everything would have worked on the first time.  I haven't done a very good
job in explaining other options partly because behind the scenes the
compiler was still finding the stuff under /usr/local even when I tried to
force it to use a different copy.

> if i have installed xerces as i have it now and just run the gdal-config 
> script with --with-xerces the same error as described in the first mail 
> occurs (conftest.cpp:1:34: util/PlatformUtils.hpp: No such file or 
> directory ).

Well, currently you have a *build* tree under /usr/local, as opposed to
having installed it (apparently).

Boy, I just hate build problems on machines I don't have access too. It is
so hard for me to deduce what can be going wrong through the narrow window
of email bug reports.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jianwei_wu1981 at msn.com  Sun Jul 11 09:18:21 2004
From: jianwei_wu1981 at msn.com (wu jianwei)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] losing geoinformation when doing fomat convertion
Message-ID: <BAY5-F11tj1OPtzUnai00081cc8@hotmail.com>

hello,I have built the GDAL for my application.When i use the GDAL 
untilities gdal_translate to translate
from Erdas(*.img) Format to Geotiff,the 
coordinates X,Yof the Start pointthe projection information exists but 
the spheroid information ,coordinate type gets lost.When i translate from 
the Erdas(*.img) format to the MFF(*.hdr) format,the gdal_translate 
says"unable to load PROJ.4 library <proj.dll>creation of OGRCoordinate 
Transformation failed." But the GDAL built result i got do not include  
PROJ.4 library <proj.dll> at all.Maybe there are  some preparations should 
be made before building 
the GDAL,or should make some choice during the GDAL building,would you 
please give me some advice on this? Thanks!

_________________________________________________________________
 MSN Messenger:  http://messenger.msn.com/cn  


From tjmitchell at riverside.bc.ca  Mon Jul 12 11:16:27 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GEOS Integration
In-Reply-To: <40F19208.8000106@pobox.com>
Message-ID: <OFC7B86C74.2CE8165F-ON88256ECF.0053DF58-88256ECF.0053E763@Riverside.bc.ca>

Right on, I've been looking forward to this.
Thanks.

gdal-dev-bounces@xserve.flids.com wrote on 07/11/2004 12:16:24 PM:

> Folks,
> 
> I have completed a preliminary integration of the GEOS simple features
> geometry operations library with the OGRGeometry class.  The OGRGeometry
> now has a variety of operators including:
> 
>      // ISpatialRelation
>      virtual OGRBoolean  Intersect( OGRGeometry * ) const;
>      virtual OGRBoolean  Equal( OGRGeometry * ) const = 0;
>      virtual OGRBoolean  Disjoint( const OGRGeometry * ) const;
>      virtual OGRBoolean  Touches( const OGRGeometry * ) const;
>      virtual OGRBoolean  Crosses( const OGRGeometry * ) const;
>      virtual OGRBoolean  Within( const OGRGeometry * ) const;
>      virtual OGRBoolean  Contains( const OGRGeometry * ) const;
>      virtual OGRBoolean  Overlaps( const OGRGeometry * ) const;
> //    virtual OGRBoolean  Relate( const OGRGeometry *, const char * ) 
const;
> 
>      virtual OGRGeometry *getBoundary() const;
>      virtual double  Distance( const OGRGeometry * ) const;
>      virtual OGRGeometry *ConvexHull() const;
>      virtual OGRGeometry *Buffer( double dfDist, int nQuadSegs = 30 ) 
const;
>      virtual OGRGeometry *Intersection( const OGRGeometry *) const;
>      virtual OGRGeometry *Union( const OGRGeometry * ) const;
>      virtual OGRGeometry *Difference( const OGRGeometry * ) const;
>      virtual OGRGeometry *SymmetricDifference( const OGRGeometry * ) 
const;
> 
> There are also methods to convert OGRGeometries to geos::geometry and 
back
> again.   Python bindings and documentation have been added for the 
> new methods.
> 
> There is currently no way to use the new operations from the commandline
> of any of the programs, but it is available to scripters and 
programmers.
> I have only used it on Linux.  No effort has been made to update the 
windows
> builds to support GEOS yet.
> 
> Best regards,
> -- 
> 
---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From bernhard at intevation.de  Mon Jul 12 09:39:00 2004
From: bernhard at intevation.de (Bernhard Reiter)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] GDAL install patch
In-Reply-To: <20040708150345.GF21864@intevation.de>
References: <20040708150345.GF21864@intevation.de>
Message-ID: <20040712133900.GD8605@intevation.de>

There is a small change to GDAL's install-sh
and a fedora2 rpm.spec behind the link below.

Will that be taken up by GDAL development?
	Bernhard

On Thu, Jul 08, 2004 at 05:03:45PM +0200, Silke Reimer wrote:
> I created a grass 5.7 package for fedora version 2 and a few library
> packages (gdal, proj and shapelib) which are normally necessary when
> you want use free GIS software ;-)
> 
> You can download the Spec-files with the patches as well as srpms
> and rpms from
> 	http://ftp.intevation.de/users/silke/packages/fedora/
> They are located in SPECS, SOURCES, RPMS and SRPMS respectivly.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040712/59654ae2/attachment.bin
From gagant at hotmail.com  Mon Jul 12 16:09:07 2004
From: gagant at hotmail.com (Gagan Tandon)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Calling GDAL functions in IDL
Message-ID: <BAY8-F83Zd26widmjKa00089abf@hotmail.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040713/6cd66198/attachment.html
From warmerdam at pobox.com  Mon Jul 12 16:25:14 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Calling GDAL functions in IDL
In-Reply-To: <BAY8-F83Zd26widmjKa00089abf@hotmail.com>
References: <BAY8-F83Zd26widmjKa00089abf@hotmail.com>
Message-ID: <40F2F3AA.6040107@pobox.com>

Gagan Tandon wrote:
> Hi all,
> 
> I am writing a lidar analysis software in IDL (Interactive data 
> language). I am interested in using GDAL for some analysis purpose. 
> Therefore, I would like to use GDAL functions in IDL. For example, I 
> wish to use the function LoadFile in gdalnumeric. How do I call that in 
> IDL? What I may have to do to allow calling the GDAL functions through 
> an IDL interpreter. Do I have to register the gdal11.dll or write a 
> wrapper etc ?

Gagan,

I am not aware of any IDL wrappers for GDAL and I don't know what would
be involved in integrating them.  Basically, there is a C API for GDAL that
is normally used when integrating into other languages (like Python, or IDL).

Perhaps some other IDL users will know more.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Mon Jul 12 16:28:27 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Calling GDAL functions in IDL
In-Reply-To: <BAY8-F83Zd26widmjKa00089abf@hotmail.com>
Message-ID: <EKEJIKAILPONGGENMBGAIEGOIBAA.nhv@cape.com>

Gagan Tandon writes:
>
> Hi all,
> I am writing a lidar analysis software in IDL (Interactive data language). 
> I am interested in using GDAL for some analysis purpose. 
> Therefore, I would like to use GDAL functions in IDL. 
> For example, I wish to use the function LoadFile in gdalnumeric. 
> How do I call that in IDL? 
> What I may have to do to allow calling the GDAL functions through an IDL interpreter. 
> Do I have to register the gdal11.dll or write a wrapper etc ?
>  Any sample code/links would be helpful.

I don't know how or if it even possible to link Python with IDL,
please note that gdalnumeric is a Python extension.

IDL and Python Numeric have a similar syntax and perhaps
you would find it easiest to just write your routines in Python

This page is a summary of the mapping between IDL and numarray
commands
http://www.johnny-lin.com/cdat_tips/tips_array/idl2num.html

HTH

Norman


From mhodder at highermappingsolutions.com  Mon Jul 12 17:39:09 2004
From: mhodder at highermappingsolutions.com (Martin Hodder)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Ogr2Ogr
Message-ID: <20040712213912.165B1122B5C@xserve.flids.com>

Hi,

 

I am new to this program but I am getting on OK.

 

I can specify ogr2ogr -f "MapInfo File" -dsco FORMAT=MIF C:\ogr\test.mif
test.tab and all works fine

 

But when I try ogr2ogr -f "ESRI Shapefile" C:\ogr\test.shp c:\ogr\test.mif
it does not work.

It fails with the following message:-

 

Error 4: Failed to open shapefile C:\ogrC:\ogr\test.shp.

 

Error 1: terminating translation. 

 

Note I have correctly given the error message in Error 4! It does not like
path names. I can do in the same directory with path names and it works
fine. The directory exists and the MIF file contains only points.

 

Does any know what is happening?

 

Many thanks

 

Martin

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040712/4fde8650/attachment.html
From disen at geo.unizh.ch  Tue Jul 13 06:31:21 2004
From: disen at geo.unizh.ch (Daniel Isenegger)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal config icluding xerces
In-Reply-To: <40F27C48.2050909@pobox.com>
References: <40EE5D4A.2070300@geo.unizh.ch> <40EE92E3.4040801@geo.unizh.ch>
	<40EEB05B.4050205@pobox.com> <40F25995.7000204@geo.unizh.ch>
	<40F27C48.2050909@pobox.com>
Message-ID: <40F3B9F9.3050305@geo.unizh.ch>

Hi
after some problems with installing Xerces in default paths, i think i 
overcome (with the patient help of Frank) this problems (now it seems 
that gdal finds the Xerces libs and includes), at least i got a new 
error message (:-)

checking for Xerces C++... requested, but compile or link fails!

./configure --with-grass=/usr/local/grass-5.7.0 
--with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
--with-odbc=/usr/local/lib --with-static-proj4=/usr/lib/libproj.so | tee 
configure_disen.log


g++ -I/usr/local/include/xercesc -o conftest conftest.cpp 
-L/usr/local/lib -lxerces-c -L/usr/local/grass-5.7.0 
-L/usr/local/grass-5.7.0/lib -lgrass5 -lz -lm -ldl

/usr/lib/gcc-lib/i586-suse-linux/3.3.3/../../../../i586-suse-linux/bin/ld: 
cannot find -lgrass5
collect2: ld returned 1 exit status

what i don't understand here:
is still Xerces causing the problem or is it grass

for info:
grass57 installed in /usr/local/grass-5.7.0 (as indicated in 
config-statement)

Thanks Dani







Frank Warmerdam schrieb:

> Daniel Isenegger wrote:
>
>> Hi Frank,
>> thanks for for your advice. Unfortunately it still doesn't work. I 
>> included your advices:
>>
>> ./configure --with-grass=/usr/local/grass-5.7.0 
>> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
>> --with-xerces-inc=/usr/local/xerces-c-src2_2_0/include/xercesc 
>> --with-xerces-lib="-L/usr/local/xerces-c-src2_2_0/lib -lxerces-c 
>> -lpthread" --with-odbc=/usr/local/lib 
>> --with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log
>
>
> Daniel,
>
> In your earlier example you were using Xerces 2.1 but now you are showing
> 2.2 paths.  Did you build 2.2 as well in trying the new paths?  I used
> 2.2 in my examples because that is what I have installed.
>
>> the error is: cannot find files, e.g. file 
>> xercesc/util/XercesDefs.hpp (which is at that location). Does gdal 
>> search only the paths given in the configuration or also consider 
>> environment vars?
>
>
> I am not aware of the makefiles or configure using environment vars for
> include file search paths.
>
>> g++ -I/usr/local/xerces-c-src2_2_0/include/xercesc 
>> /usr/local/xerces-c-src2_2_0/include -o conftest conftest.cpp 
>> -L/usr/local/xerces-c-src2_2_0/lib -lxerces-c -lpthread 
>> -L/usr/local/grass-5.7.0 -L/usr/local/grass-5.7.0/lib -lgrass5 -lz 
>> -lm -ldl
>>
>>
>> In file included from conftest.cpp:1:
>> /usr/local/xerces-c-src2_2_0/include/xercesc/util/PlatformUtils.hpp:65:39: 
>> xercesc/util/XercesDefs.hpp: No such file or directory
>
>
> Hmm, there seems to be a conflict between how I refer to include files
> from xerces in my code (not including the xercesc prefix) and how they
> are referred to by Xerces code itself, including the xercesc prefix.
> This happens to work for me because due to stuff already having been
> pre-installed.
>
> I think you will need an include path that includes the xercesc directory
> and the directory above it.  This can't be easily controlled by configure
> options as things stand, so you will likely need to hand edit 
> GDALmake.opt
> and change the XERCES_INCLUDE to look something like:
>
> XERCES_INCLUDE = -I/usr/local/xerces-c-src2_2_0/include/xercesc \
>                  -I/usr/local/xerces-c-src2_2_0/include
>
> I have altered the configure logic in CVS to include both locations and
> now the appropriate value to pass in --with-xerces-inc would be the
> directory *above* the xercesc directory.
>
>> if i understand you right, you suggest to just install 
>> xerces-binaries at the default place and let gdal-config script look 
>> for xerces?
>> My problem is, there are no xerces-binaries for suse9.1 and in the 
>> binaries of former versions, there is no default installation path 
>> suggested.
>
>
> I am suggesting building Xerces from source, and then doing a "make 
> install".
> The default install location is under /usr/local and if this had been 
> done
> everything would have worked on the first time.  I haven't done a very 
> good
> job in explaining other options partly because behind the scenes the
> compiler was still finding the stuff under /usr/local even when I 
> tried to
> force it to use a different copy.
>
>> if i have installed xerces as i have it now and just run the 
>> gdal-config script with --with-xerces the same error as described in 
>> the first mail occurs (conftest.cpp:1:34: util/PlatformUtils.hpp: No 
>> such file or directory ).
>
>
> Well, currently you have a *build* tree under /usr/local, as opposed to
> having installed it (apparently).
>
> Boy, I just hate build problems on machines I don't have access too. 
> It is
> so hard for me to deduce what can be going wrong through the narrow 
> window
> of email bug reports.
>
> Best regards,




From warmerdam at pobox.com  Tue Jul 13 11:04:05 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] gdal config icluding xerces
In-Reply-To: <40F3B9F9.3050305@geo.unizh.ch>
References: <40EE5D4A.2070300@geo.unizh.ch>
	<40EE92E3.4040801@geo.unizh.ch>	<40EEB05B.4050205@pobox.com>
	<40F25995.7000204@geo.unizh.ch>	<40F27C48.2050909@pobox.com>
	<40F3B9F9.3050305@geo.unizh.ch>
Message-ID: <40F3F9E5.1090608@pobox.com>

Daniel Isenegger wrote:
> Hi
> after some problems with installing Xerces in default paths, i think i 
> overcome (with the patient help of Frank) this problems (now it seems 
> that gdal finds the Xerces libs and includes), at least i got a new 
> error message (:-)
> 
> checking for Xerces C++... requested, but compile or link fails!
> 
> ./configure --with-grass=/usr/local/grass-5.7.0 
> --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
> --with-odbc=/usr/local/lib --with-static-proj4=/usr/lib/libproj.so | tee 
> configure_disen.log
> 
> 
> g++ -I/usr/local/include/xercesc -o conftest conftest.cpp 
> -L/usr/local/lib -lxerces-c -L/usr/local/grass-5.7.0 
> -L/usr/local/grass-5.7.0/lib -lgrass5 -lz -lm -ldl
> 
> /usr/lib/gcc-lib/i586-suse-linux/3.3.3/../../../../i586-suse-linux/bin/ld: 
> cannot find -lgrass5
> collect2: ld returned 1 exit status
> 
> what i don't understand here:
> is still Xerces causing the problem or is it grass
> 
> for info:
> grass57 installed in /usr/local/grass-5.7.0 (as indicated in 
> config-statement)

Daniel,

GRASS support currently only works with libgrass, not by pointing to
the regular GRASS tree.  So either skip GRASS (--without-grass) or
get libgrass and configure accordingly.  Note that if you want to use GDAL
with r.in.gdal and other GRASS code then GDAL should be built *without*
GRASS support builtin to avoid library conflicts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tjmitchell at riverside.bc.ca  Tue Jul 13 11:17:43 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Ogr2Ogr
In-Reply-To: <20040712213912.165B1122B5C@xserve.flids.com>
Message-ID: <OFC0EDA8A3.8985247E-ON88256ED0.0053EEE4-88256ED0.005404F5@Riverside.bc.ca>

That's sounds strange to me too.
Perhaps try changing your slashes like:
c:/ogr/test.shp
and see it that helps.

gdal-dev-bounces@xserve.flids.com wrote on 07/12/2004 02:39:09 PM:

> Hi,
> 
> I am new to this program but I am getting on OK.
> 
> I can specify ogr2ogr -f "MapInfo File" -dsco FORMAT=MIF C:
> \ogr\test.mif test.tab and all works fine
> 
> But when I try ogr2ogr -f "ESRI Shapefile" C:\ogr\test.shp c:
> \ogr\test.mif    it does not work.
> It fails with the following message:-
> 
> Error 4: Failed to open shapefile C:\ogrC:\ogr\test.shp.
> 
> Error 1: terminating translation. 
> 
> Note I have correctly given the error message in Error 4! It does 
> not like path names. I can do in the same directory with path names 
> and it works fine. The directory exists and the MIF file contains only 
points.
> 
> Does any know what is happening?
> 
> Many thanks
> 
> Martin
>  _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From wlwoon at must.edu.my  Tue Jul 13 11:22:49 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <OFC0EDA8A3.8985247E-ON88256ED0.0053EEE4-88256ED0.005404F5@Riverside.bc.ca>
References: <20040712213912.165B1122B5C@xserve.flids.com>
	<OFC0EDA8A3.8985247E-ON88256ED0.0053EEE4-88256ED0.005404F5@Riverside.bc.ca>
Message-ID: <20040713232249.4fd361c6.wlwoon@must.edu.my>

Hi all

Has anyone tried compiling gdal on win32 using mingw (or perhaps cross-compiling from linux)??
I'm not even sure how to get started! ;-(

Cheers
Wei Lee

From alexamici at fastwebnet.it  Tue Jul 13 15:53:11 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <20040713232249.4fd361c6.wlwoon@must.edu.my>
References: <20040712213912.165B1122B5C@xserve.flids.com>
	<OFC0EDA8A3.8985247E-ON88256ED0.0053EEE4-88256ED0.005404F5@Riverside.bc.ca>
	<20040713232249.4fd361c6.wlwoon@must.edu.my>
Message-ID: <200407132153.11179.alexamici@fastwebnet.it>


Wei Lee,

On Tuesday 13 July 2004 17:22, Woon Wei Lee wrote:
> Has anyone tried compiling gdal on win32 using mingw (or perhaps
> cross-compiling from linux)??

mingw on windows mostly works. the main problem is that you don't get python 
support.

the static library is built out-of-the-box, i'm not sure if the dll is built 
as well. if not, you certainly can get it to build with a tiny bit of 
Makefile magic.

cross-compile from linux (debian with mingw32* packages) is not much harder 
than native bompile. it has the additional problem that the gdal configure 
system is not really coss-compile-proof ;). (--without-pg is your friend)

search the mail archives you should find more info.

> I'm not even sure how to get started! ;-( 

as a start:
in the msys environment run "./configure" ;)

cheers,
alessandro

From warmerdam at pobox.com  Tue Jul 13 16:56:29 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR SQLite Driver Added
Message-ID: <40F44C7D.3080501@pobox.com>

Folks,

I have implemented a new OGR driver for SQLite databases.  SQLite is
essentially a lightweight "all in one file" RDBMS.  No external servers
to install or run, no complicated data management.  But it does have
sophisticated SQL support.

The OGR driver includes support for spatial and non-spatial data.  However,
spatial data is just stored as a text field named WKT_GEOMETRY with no
special spatial indexing or anything.  So there is no spatial indexing.

Anyways, I think SQLite will be a handy light weight way of managing spatial
and non spatial data with SQL capabilities and I hope to start including it
in some of my default GDAL/OGR builds.

   http://www.remotesensing.org:16080/gdal/ogr/drv_sqlite.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From starged at videotron.ca  Tue Jul 13 18:40:04 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <200407132153.11179.alexamici@fastwebnet.it>
References: <20040712213912.165B1122B5C@xserve.flids.com>
	<OFC0EDA8A3.8985247E-ON88256ED0.0053EEE4-88256ED0.005404F5@Riverside.bc.ca>
	<20040713232249.4fd361c6.wlwoon@must.edu.my>
	<200407132153.11179.alexamici@fastwebnet.it>
Message-ID: <vro8f0daiijinj63o2c04lopkhpuni58ji@4ax.com>

Hi Alessandro and Wei Lee,

On Tue, 13 Jul 2004 21:53:11 +0200, Alessandro Amici <alexamici@fastwebnet.it> wrote:

>mingw on windows mostly works. the main problem is that you don't get python support.

It's possible to get Python support under MinGW but it requires some hacking...

>the static library is built out-of-the-box, i'm not sure if the dll is built 
>as well. if not, you certainly can get it to build with a tiny bit of 
>Makefile magic.

You can easily get the dll from the static lib.

>cross-compile from linux (debian with mingw32* packages) is not much harder 
>than native bompile. it has the additional problem that the gdal configure 
>system is not really coss-compile-proof ;). (--without-pg is your friend)

And "--without-libtool" :)

Wei Lee, contact me for more info...
--
Mario B.

From Michele.Sanges at otomelara.it  Wed Jul 14 06:00:24 2004
From: Michele.Sanges at otomelara.it (Sanges Michele)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR code examples
Message-ID: <BDCFDAEC07D52A4ABDAC29167EA2BA6D018B8D4C@OTOCLEX.otomelara.it>

Are there some code examples of how reading data files by means the OGR library, in C++?
Thanks.

Michele Sanges

From disen at geo.unizh.ch  Wed Jul 14 06:19:41 2004
From: disen at geo.unizh.ch (Daniel Isenegger)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] make error
Message-ID: <40F508BD.3060504@geo.unizh.ch>

Hi

the configuring the way Frank suggested worked well:

./configure --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
--with-xerces-inc=/usr/local/include/xercesc 
--with-xerces-lib="-L/usr/local/lib/libxerces-c.so.22.0 -lxerces-c 
-lpthread" --with-odbc=/usr/local/lib 
--with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log

GDAL is now configured for i686-pc-linux-gnu
  Installation directory:    /usr/local
   C compiler:                gcc -O2
   C++ compiler:              g++ -O2
   LIBTOOL support:           yes
LIBZ support:              external
   GRASS support:             no
   CFITSIO support:           no
   NETCDF support:            no
   LIBPNG support:            external
   LIBTIFF support:           external
   LIBGEOTIFF support:        internal
   LIBJPEG support:           external
   LIBGIF support:            internal
   OGDI support:              no
   HDF4 support:              no
   JASPER support:            yes (GeoJP2=no)
   ECW support:               no
   MrSID support:             no
   POSTGRESQL support:        yes
   XERCES support:            yes
   ODBC support:              yes
   OCI support:               no
   DODS support:              no
Statically link PROJ.4:    yes
  enable OGR building:       yes


the following make statement failed then (the same thing with gmake)
make | tee makeOutput_disen.log
output:
/bin/sh ../libtool --mode=link  g++  ogrinfo.o ../libgdal.la -o ogrinfo
g++ ogrinfo.o -o .libs/ogrinfo  ../.libs/libgdal.so 
-L/usr/lib/libproj.so/src /usr/lib/libproj.so -L/usr/local/lib 
-L/usr/local/lib/lib -lodbc -L/usr/local/lib/libxerces-c.so.22.0 
-lxerces-c -lpthread /usr/lib/libjasper.so /usr/lib/libjpeg.so -ltiff 
-lpng -lz -ldl -L/usr/local/pgsql/lib -lpq /usr/lib/libstdc++.so
../.libs/libgdal.so: undefined reference to `GMLReader::PopState()'
../.libs/libgdal.so: undefined reference to 
`GMLReader::IsFeatureElement(char const*)'
../.libs/libgdal.so: undefined reference to 
`GMLReader::SetFeatureProperty(char const*, char const*)'
../.libs/libgdal.so: undefined reference to 
`GMLReader::IsAttributeElement(char const*)'
../.libs/libgdal.so: undefined reference to `GMLReader::PushFeature(char 
const*, xercesc_2_2::Attributes const&)'
collect2: ld returned 1 exit status
make[1]: *** [ogrinfo] Error 1
make[1]: Leaving directory `/downloads/gdal-1.2.1/ogr'
make: *** [ogr-apps] Error 2

any ideas why?

thanks dani


From wlwoon at must.edu.my  Wed Jul 14 10:48:00 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <200407132153.11179.alexamici@fastwebnet.it>
References: <20040713232249.4fd361c6.wlwoon@must.edu.my>
Message-ID: <40F5B820.25389.6BC7657@localhost>

Thanks for the tips... 
I can't use the pre-built binaries because I made some modifications to the mitab source 
which i need in order for my application to work. (it already works on linux but now i 
want to create a windows version)

Sorry, feeling really ignorant here but I don't quite get what u mean by running 
./configure on windows... afaik configure is a bourne shell script so it won't work on 
windows (unless I use cygwin, but I'm really trying to avoid that - would rather use 
mingw if possible) ... I hope I'm missing something really obvious here...  :-(

Cheers
Wei Lee



On 13 Jul 2004 at 21:53, Alessandro Amici wrote:

> 
> Wei Lee,
> 
> On Tuesday 13 July 2004 17:22, Woon Wei Lee wrote:
> > Has anyone tried compiling gdal on win32 using mingw (or perhaps
> > cross-compiling from linux)??
> 
> mingw on windows mostly works. the main problem is that you don't get
> python support.
> 
> the static library is built out-of-the-box, i'm not sure if the dll is
> built as well. if not, you certainly can get it to build with a tiny
> bit of Makefile magic.
> 
> cross-compile from linux (debian with mingw32* packages) is not much
> harder than native bompile. it has the additional problem that the
> gdal configure system is not really coss-compile-proof ;).
> (--without-pg is your friend)
> 
> search the mail archives you should find more info.
> 
> > I'm not even sure how to get started! ;-( 
> 
> as a start:
> in the msys environment run "./configure" ;)
> 
> cheers,
> alessandro
> 



From warmerdam at pobox.com  Wed Jul 14 11:13:33 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <40F5B820.25389.6BC7657@localhost>
References: <20040713232249.4fd361c6.wlwoon@must.edu.my>
	<40F5B820.25389.6BC7657@localhost>
Message-ID: <40F54D9D.8090504@pobox.com>

Woon Wei Lee wrote:
> Thanks for the tips... 
> I can't use the pre-built binaries because I made some modifications to the mitab source 
> which i need in order for my application to work. (it already works on linux but now i 
> want to create a windows version)
> 
> Sorry, feeling really ignorant here but I don't quite get what u mean by running 
> ./configure on windows... afaik configure is a bourne shell script so it won't work on 
> windows (unless I use cygwin, but I'm really trying to avoid that - would rather use 
> mingw if possible) ... I hope I'm missing something really obvious here...  :-(

Wei Lee,

I believe the suggestion is to use Cygwin as the shell, but mingw as the
compiler.  Just avoid installing the Cygwin compiler packages.  This allows
you to use the goodness of Cygwin shell tools to configure things while avoiding
the cygwin.dll dependentness of using the Cygwin compiler.

Of course, I could be missing something.  I haven't tried mingw myself yet.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Wed Jul 14 11:18:38 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <40F5B820.25389.6BC7657@localhost>
Message-ID: <EKEJIKAILPONGGENMBGAAEMHIBAA.nhv@cape.com>

Woon Wei Lee writes:
> > 
> Sorry, feeling really ignorant here but I don't quite get what u mean by running 
> ./configure on windows... afaik configure is a bourne shell script so it won't work on 
> windows (unless I use cygwin, but I'm really trying to avoid that - would rather use 
> mingw if possible) ... I hope I'm missing something really obvious here...  :-(

http://mingw.org/msys.shtml

or do as I do and install a MingW tree inside of Cygwin

i.e.  I have established my MingW root at /usr/mingw
and install mingw files under it

then  # mingw make doesn't understand Unix filenames
% cp /bin/make.exe to /usr/mingw/bin

and when I configure a MingW build I use

./configure --prefix=/usr/mingw --host=mingw32

note

$ gdal-config --libs
-L/usr/mingw/lib -lgdal

$ gdal-config --prefix
/usr/mingw

$ gdalinfo --version     
GDAL 1.2.1.0, released 2004/06/23

HTH

Norman

From nhv at cape.com  Wed Jul 14 11:35:14 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <EKEJIKAILPONGGENMBGAAEMHIBAA.nhv@cape.com>
Message-ID: <EKEJIKAILPONGGENMBGAAEMIIBAA.nhv@cape.com>

Norman Vine writes:
> 
> or do as I do and install a MingW tree inside of Cygwin
> 
> i.e.  I have established my MingW root at /usr/mingw
> and install mingw files under it
> 
> then  # mingw make doesn't understand Unix filenames
> % cp /bin/make.exe to /usr/mingw/bin
> 
> and when I configure a MingW build I use
> 
> ./configure --prefix=/usr/mingw --host=mingw32

OF course you need to insure that 

Of course when using MingW like this you have to setup your path
appropriately too

i.e.
% export PATH="/usr/mingw/bin:$PATH"

HTH

Norman

From warmerdam at pobox.com  Wed Jul 14 11:53:28 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] make error
In-Reply-To: <40F508BD.3060504@geo.unizh.ch>
References: <40F508BD.3060504@geo.unizh.ch>
Message-ID: <40F556F8.8050408@pobox.com>

Daniel Isenegger wrote:
> Hi
> 
> the configuring the way Frank suggested worked well:
> 
> ./configure --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
> --with-xerces-inc=/usr/local/include/xercesc 
> --with-xerces-lib="-L/usr/local/lib/libxerces-c.so.22.0 -lxerces-c 
> -lpthread" --with-odbc=/usr/local/lib 
> --with-static-proj4=/usr/lib/libproj.so | tee configure_disen.log

Daniel,

I don't imagine it is related, but -L/usr/local/lib/libxerces-c.so.22.0 doesn't
make sense. The -L flag should have a directory as it's argument - not the
name of a shared library.  It likely doesn't matter since I imagine
/usr/local/lib is already in your -L path.

> the following make statement failed then (the same thing with gmake)
> make | tee makeOutput_disen.log
> output:
> /bin/sh ../libtool --mode=link  g++  ogrinfo.o ../libgdal.la -o ogrinfo
> g++ ogrinfo.o -o .libs/ogrinfo  ../.libs/libgdal.so 
> -L/usr/lib/libproj.so/src /usr/lib/libproj.so -L/usr/local/lib 
> -L/usr/local/lib/lib -lodbc -L/usr/local/lib/libxerces-c.so.22.0 
> -lxerces-c -lpthread /usr/lib/libjasper.so /usr/lib/libjpeg.so -ltiff 
> -lpng -lz -ldl -L/usr/local/pgsql/lib -lpq /usr/lib/libstdc++.so
> ../.libs/libgdal.so: undefined reference to `GMLReader::PopState()'
> ../.libs/libgdal.so: undefined reference to 
> `GMLReader::IsFeatureElement(char const*)'
> ../.libs/libgdal.so: undefined reference to 
> `GMLReader::SetFeatureProperty(char const*, char const*)'
> ../.libs/libgdal.so: undefined reference to 
> `GMLReader::IsAttributeElement(char const*)'
> ../.libs/libgdal.so: undefined reference to `GMLReader::PushFeature(char 
> const*, xercesc_2_2::Attributes const&)'
> collect2: ld returned 1 exit status

My suspicion is that some object code is out of date with the current
build directives.  Try doing a make clean in the gdal/ogr/ogrsf_frmts/gml
directory or even a full clean and rebuild.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gagant at hotmail.com  Wed Jul 14 15:10:58 2004
From: gagant at hotmail.com (Gagan Tandon)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Calling GDAL functions in IDL
Message-ID: <BAY8-F6gy9NYb17TWSE00019f1f@hotmail.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040715/63d58fee/attachment.html
From warmerdam at pobox.com  Wed Jul 14 15:37:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Calling GDAL functions in IDL
In-Reply-To: <BAY8-F6gy9NYb17TWSE00019f1f@hotmail.com>
References: <BAY8-F6gy9NYb17TWSE00019f1f@hotmail.com>
Message-ID: <40F58B6D.6010309@pobox.com>

Gagan Tandon wrote:
> Hi all,
> 
> Thanks to Norman and Frank for their response.
> 
> I read in the IDL user manual on how to call external functions. It says 
> that if the external library is packaged as a DLL then one can register 
> the DLL (using regsvr32) and wrap the COM object into an IDL object and 
> use it from there. I thought gdal11.dll was the one I should be looking 
> for. I tried registering the DLL, it threw an error that No 
> DLLRegistryServer entry point found, Registration failed.  I guess I am 
> using the wrong DLL or there is some other kind of library that allows 
> me access to all the GDAL methods.  I would appreciate if somebody could 
> provide leads on this.
> 
> I am using windows XP, IDL 6.0. I do not wish to use 
> python/numarray/numeric etc. I want to build the software that is python 
> independent. Do I need to build the GDAL again? (since I am using the 
> GDAL that was built "with" python support)

Gagan,

GDAL does not provide a COM interface in it's DLL, so there is no support
for registering it.  However, if IDL provided a means to call out to
C functions in a DLL (many scripting environments have ways of doing this
- vb does for instance) then you might be able to accomplish what you
want from IDL.  Alternatively, you could prepare a small COM wrapper for
the services you need and utilize that, but COM isn't my speciality.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jul 14 16:29:40 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR code examples
In-Reply-To: <BDCFDAEC07D52A4ABDAC29167EA2BA6D018B8D4C@OTOCLEX.otomelara.it>
References: <BDCFDAEC07D52A4ABDAC29167EA2BA6D018B8D4C@OTOCLEX.otomelara.it>
Message-ID: <40F597B4.4@pobox.com>

Sanges Michele wrote:
> Are there some code examples of how reading data files by means the OGR library, in C++?
> Thanks.

Hi,

I am not aware of C++ examples other than the utility programs like
ogrinfo.cpp and ogr2ogr.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Wed Jul 14 16:35:40 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR code examples
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B3A@mailman.san.com>

Michele,

Check out the code below.  It will give you the basic idea of how to get
geometries and features from ogr:


COgrShapeLayer* COgrDataSource::ExecuteSQL(string sStatement,
	
CSXBasicGeometry* pSpatialFilter,
	
string sDialect)
{
	try
	{
		if (!m_pDatasource)
			throw "Invalid data source null in
COgrDataSource::ExecuteSQL().";

		OGRSpatialReference* pSpatialRef =
m_pDatasource->GetLayer(0)->GetSpatialRef();
		OGRLinearRing* pRing = NULL;

		if (dynamic_cast< CSXPolygon*>(pSpatialFilter))
		{
			CSXPolygon* pPolygon = (CSXPolygon*)
pSpatialFilter;
			pRing = new OGRLinearRing();
			vector< double>::iterator it;
			vector< double>* pPoints =
pPolygon->GetPoints();
			double nX = 0.0, nY = 0.0;

			for (it = pPoints->begin(); it !=
pPoints->end(); it++)
			{
				nY = *it;
				it++;
				nX = *it;
				pRing->addPoint(nX, nY);
			}

			pRing->addPoint(pPoints->at(1), pPoints->at(0));
		}
		else
			throw "Invalid spatial reference data type in
COgrDataSource::ExecuteSQL().";

		OGRPolygon* pPolygon = new OGRPolygon();
		if (pSpatialRef)
pPolygon->assignSpatialReference(pSpatialRef);
		pPolygon->addRingDirectly(pRing);

		OGRLayer* pLayer = m_pDatasource->ExecuteSQL((const
char*) sStatement.c_str(),
	
pPolygon,
	
(const char*) sDialect.c_str());
		if (pLayer == NULL) throw (char*) CPLGetLastErrorMsg();

		COgrShapeLayer* pShapeLayer = CreateShapeLayer(pLayer);
		m_pDatasource->ReleaseResultSet(pLayer);
		if (CPLGetLastErrorNo() != OGRERR_NONE) throw (char*)
CPLGetLastErrorMsg();
		return pShapeLayer;
	}
	catch(exception e)
		{throw e;}
	catch(char* e)
		{throw e;}
	catch(...)
		{throw "An unexpected error occurred in
COgrDataSource::ExecuteSQL().";}
}

CSXFeatureTable* COgrDataSource::CreateFeatureTable(OGRLayer* pOgrLayer)
{
	try
	{
		if (!pOgrLayer)
			throw "Invalid parameter null in
COgrDataSource::CreateFeatureTable().";

		OGRFeatureDefn* pFeatureDefn =
pOgrLayer->GetLayerDefn();
		int nFieldCount = pFeatureDefn->GetFieldCount();
		const char* pszLayerName = (char*)
pFeatureDefn->GetName();

		CSXFeatureTable* pFeatureTable = new
CSXFeatureTable(pszLayerName, nFieldCount + 1);

		pFeatureTable->SetColumnName(0, "FID");
		pFeatureTable->SetType(0, DBF_TYPE_NUMERIC);
		pFeatureTable->SetLength(0, 4);
		pFeatureTable->SetDecimalCount(0, 0);

		for (int i = 0; i < nFieldCount; i++)
		{
			OGRFieldDefn* pFieldDefn =
pFeatureDefn->GetFieldDefn(i);
			const char* pszNameRef =
pFieldDefn->GetNameRef();
			unsigned char cDataType =
GetShapeDataType(pFieldDefn->GetType());
			unsigned char cWidth = (unsigned char)
pFieldDefn->GetWidth();
			unsigned char cPrecision = (unsigned char)
pFieldDefn->GetPrecision();

			pFeatureTable->SetColumnName(i + 1, pszNameRef);
			pFeatureTable->SetType(i + 1, cDataType);
			pFeatureTable->SetLength(i + 1, cWidth);
			pFeatureTable->SetDecimalCount(i + 1,
cPrecision);
		}

		OGRFeature* pOgrFeature = pOgrLayer->GetNextFeature();
		while (pOgrFeature)
		{
			vector< string>* pRecord = new vector< string>;
			char pszBuffer [sizeof(long) * 8 + 1];
            sprintf(pszBuffer, "%d", pOgrFeature->GetFID());
			pRecord->push_back(pszBuffer);

			for (long j = 0; j < nFieldCount; j++)
	
pRecord->push_back(pOgrFeature->GetFieldAsString(j));

			pFeatureTable->AddRecord(pRecord);
			delete pOgrFeature;
			pOgrFeature = pOgrLayer->GetNextFeature();
		}

		pOgrLayer->ResetReading();
		return pFeatureTable;
	}
	catch(exception e)
		{throw e;}
	catch(char* e)
		{throw e;}
	catch(...)
		{throw "An unexpected error occurred in
COgrDataSource::CreateFeatureTable().";}
}

COgrGraphicList* COgrDataSource::GetPointGeometry(OGRLayer* pOgrLayer,
CSXDrawingAttributes* pDrawingAttributes)
{
	try
	{
		if (!pOgrLayer || !pDrawingAttributes)
			throw "Invalid parameter null in
COgrDataSource::GetPointGeometry().";

		double nLat, nLon;
		CSXGraphic* pSXPoint = NULL;
		OGRPoint* pOgrPoint = NULL;
		vector< float> vXYPoint;
		COgrGraphicList* pList = new COgrPointList();

		OGRFeature* pFeature = pOgrLayer->GetNextFeature();

		while (pFeature != NULL)
		{
			OGRGeometry* pGeometry =
pFeature->GetGeometryRef();
			if (!pGeometry) continue;

			pOgrPoint = (OGRPoint*) pGeometry;
			long nFID = pFeature->GetFID();
			int nShapeType = (int)
pGeometry->getGeometryType();
			if (nShapeType == SHAPE_TYPE_NULL)
				continue;

			nLon = pOgrPoint->getX();
			nLat = pOgrPoint->getY();
			pSXPoint = new COgrPoint(nLat, nLon);
			pSXPoint->SetAppObject((unsigned int) nFID);
			pDrawingAttributes->SetTo((CSXGraphic*)
pSXPoint);

			pList->Add(pSXPoint);
			pFeature = pOgrLayer->GetNextFeature();
		}

		pOgrLayer->ResetReading();
		return pList;
	}
	catch(exception e)
		{throw e;}
	catch(char* e)
		{throw e;}
	catch(...)
		{throw "An unexpected error occurred in
COgrDataSource::GetPointGeometry().";}
}

COgrGraphicList* COgrDataSource::GetPolyGeometry(OGRLayer* pOgrLayer,
CSXDrawingAttributes* pDrawingAttributes, int nShapeType)
{
	try
	{
		if (!pOgrLayer || !pDrawingAttributes)
			throw "Invalid parameter null in
COgrDataSource::GetPolyGeometry().";

		COgrGraphicList* pList = NULL;
		OGREnvelope pEnvelope;

		if (nShapeType == SHAPE_TYPE_POLYLINE)
			pList = new COgrPolyLineList();
		else if (nShapeType == SHAPE_TYPE_POLYGON)
			pList = new COgrPolygonList();

		pOgrLayer->ResetReading();
		OGRFeature* pFeature = pOgrLayer->GetNextFeature();

		while (pFeature != NULL)
		{
			OGRGeometry* pGeometry =
pFeature->GetGeometryRef();
			if (!pGeometry)
			{
				pFeature = pOgrLayer->GetNextFeature();
				continue;
			}

			int nShapeType = SHAPE_TYPE_NULL;
			int nGeomType = pGeometry->getGeometryType();
			if (nGeomType == wkbUnknown)
			{
				pFeature = pOgrLayer->GetNextFeature();
				continue;
			}
			else if (nGeomType == wkbLineString || nGeomType
== wkbMultiLineString)
				nShapeType = SHAPE_TYPE_POLYLINE;
			else if (nGeomType == wkbPolygon || nGeomType ==
wkbMultiPolygon)
				nShapeType = SHAPE_TYPE_POLYGON;

			long nVertexCount = 0;
			long nFID = pFeature->GetFID();
			int nPartCount = 1;

			if (nGeomType == wkbLineString)
				nPartCount = 1;
			else if (nGeomType == wkbMultiLineString)
				nPartCount = ((OGRMultiLineString*)
pGeometry)->getNumGeometries();
			else if (nGeomType == wkbPolygon)
				nPartCount =
((OGRPolygon*)pGeometry)->getNumInteriorRings() + 1;
			else if (nGeomType == wkbMultiPolygon)
				nPartCount = ((OGRMultiPolygon*)
pGeometry)->getNumGeometries();

			CSXGraphic* pPolygon = NULL;
			COgrGraphicList* pSubList = NULL;

			if (nPartCount > 1)
			{
				if (nShapeType == SHAPE_TYPE_POLYLINE)
					pSubList = new
COgrPolyLineList();
				else if (nShapeType ==
SHAPE_TYPE_POLYGON)
					pSubList = new
COgrPolygonList();
			}

			for (long j = 0; j < nPartCount; j++)
			{
				vector< double>* pPoints = new vector<
double>;

				if (nShapeType == SHAPE_TYPE_POLYLINE)
				{
					if (nGeomType == wkbLineString)
					{
						OGRLineString*
pLinearString = (OGRLineString*) pGeometry;
						nVertexCount =
pLinearString->getNumPoints();

						for (int n = 0; n <
nVertexCount; n++)
						{
							double nLambda =
pLinearString->getX(n);
							double nPhi =
pLinearString->getY(n);

	
pPoints->push_back((double) nPhi);
	
pPoints->push_back((double) nLambda);
						}
					}
					else if (nGeomType ==
wkbMultiLineString)
					{
						OGRMultiLineString*
pMultiLineString = (OGRMultiLineString*) pGeometry;
						OGRLineString*
pLinearString = (OGRLineString*) pMultiLineString->getGeometryRef(j);
						nVertexCount =
pLinearString->getNumPoints();

						for (int n = 0; n <
nVertexCount; n++)
						{
							double nLambda =
pLinearString->getX(n);
							double nPhi =
pLinearString->getY(n);

	
pPoints->push_back((double) nPhi);
	
pPoints->push_back((double) nLambda);
						}
					}
				}
				else if (nShapeType ==
SHAPE_TYPE_POLYGON)
				{
					if (nGeomType == wkbPolygon)
					{
						OGRLinearRing*
pLinearRing = NULL;

						if (j == 0)
							pLinearRing =
((OGRPolygon*)pGeometry)->getExteriorRing();
						else
							pLinearRing =
((OGRPolygon*)pGeometry)->getInteriorRing(j - 1);

						nVertexCount =
pLinearRing->getNumPoints();

						for (int n = 0; n <
nVertexCount; n++)
						{
							double nLambda =
pLinearRing->getX(n);
							double nPhi =
pLinearRing->getY(n);

							//if (nFID ==
1240)
								//cout
<< "Lat: " << nPhi << " Lon: " << nLambda << endl;

	
pPoints->push_back((double) nPhi);
	
pPoints->push_back((double) nLambda);
						}
					}
					else if (nGeomType ==
wkbMultiPolygon)
					{
						OGRLinearRing*
pLinearRing = NULL;
						OGRMultiPolygon*
pMultiPolygon = (OGRMultiPolygon*) pGeometry;
						OGRPolygon* pOGRPolygon
= (OGRPolygon*) pMultiPolygon->getGeometryRef(j);

						if (j == 0)
							pLinearRing =
pOGRPolygon->getExteriorRing();
						else
							pLinearRing =
pOGRPolygon->getInteriorRing(j - 1);

						nVertexCount =
pLinearRing->getNumPoints();

						for (int n = 0; n <
nVertexCount; n++)
						{
							double nLambda =
pLinearRing->getX(n);
							double nPhi =
pLinearRing->getY(n);

	
pPoints->push_back((double) nPhi);
	
pPoints->push_back((double) nLambda);
						}
					}
				}

				if (nShapeType == SHAPE_TYPE_POLYLINE)
					pPolygon = new
COgrPolyLine(pPoints, DECIMAL_DEGREES, LINETYPE_STRAIGHT);
				else if (nShapeType ==
SHAPE_TYPE_POLYGON)
					pPolygon = new
COgrPolygon(pPoints, DECIMAL_DEGREES, LINETYPE_STRAIGHT);

				pPolygon->SetAppObject((unsigned int)
nFID);
				pPolygon->SetAppObjectPart((int) j);

				if (pDrawingAttributes != NULL)
	
pDrawingAttributes->SetTo((CSXGraphic*) pPolygon);

				if
(dynamic_cast<COgrPolyLine*>(pPolygon))
				{
					CSXColor clear(0.0f, 0.0f, 0.0f,
0.0f);
					pPolygon->SetFillColor(&clear);
				}

				if (pSubList != NULL)
	
pSubList->AddSXGraphic(pPolygon);
			}

			if (pSubList != NULL)
			{
				pGeometry->getEnvelope(&pEnvelope);
				vector< double>* pExtents = new vector<
double>;
				pExtents->push_back((double)
pEnvelope.MinY);
				pExtents->push_back((double)
pEnvelope.MinX);
				pExtents->push_back((double)
pEnvelope.MaxY);
				pExtents->push_back((double)
pEnvelope.MaxX);
				pSubList->SetExtents(pExtents);
				pSubList->SetAppObject((unsigned int)
nFID);
				pList->Add(pSubList);
			}
			else
				pList->Add(pPolygon);

			pFeature = pOgrLayer->GetNextFeature();
		}

		pOgrLayer->ResetReading();
		return pList;
	}
	catch(exception e)
		{throw e;}
	catch(char* e)
		{throw e;}
	catch(...)
		{throw "An unexpected error occurred in
COgrDataSource::GetPolyGeometry().";}
}

If you have questions let me know.
Martin


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, July 14, 2004 2:30 PM
To: Sanges Michele
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] OGR code examples


Sanges Michele wrote:
> Are there some code examples of how reading data files by means the 
> OGR library, in C++? Thanks.

Hi,

I am not aware of C++ examples other than the utility programs like
ogrinfo.cpp and ogr2ogr.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From MChapman at sanz.com  Wed Jul 14 16:38:43 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR code examples
Message-ID: <ED3A48B9840E594890A2BC172D11946501CFFC63@mailman.san.com>

Michele,

Also, Here is some code to open the datasource as well, where
m_pDatasource is an OGRDataSource*:

COgrDataSource::COgrDataSource(string sConnectString, int nUpdate)
{
	try
	{
		m_pDatasource = NULL;
		m_sConnectString = sConnectString;
		OGRRegisterAll();
		OpenDataSource(m_sConnectString, nUpdate);
	}
	catch(exception e)	
		{throw e;}
	catch(char* e)	
		{throw e;}
	catch(...)	
		{throw "An unexpected error occurred in
COgrDataSource::COgrDataSource().";}
}

int COgrDataSource::OpenDataSource(string sConnectString, int nUpdate)
{
	try
	{
		CloseDataSource();
		m_sConnectString = sConnectString;
		m_pDatasource =
OGRSFDriverRegistrar::Open(m_sConnectString.c_str(), nUpdate);
		if (m_pDatasource == NULL) throw (char*)
CPLGetLastErrorMsg();
		return 0;
	}
	catch(exception e)
		{throw e;}
	catch(char* e)
		{throw e;}
	catch(...)
		{throw "An unexpected error occurred in
COgrDataSource::OpenDataSource().";}
}

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Wednesday, July 14, 2004 2:30 PM
To: Sanges Michele
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] OGR code examples


Sanges Michele wrote:
> Are there some code examples of how reading data files by means the 
> OGR library, in C++? Thanks.

Hi,

I am not aware of C++ examples other than the utility programs like
ogrinfo.cpp and ogr2ogr.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev

From nil5-ksa at yandex.ru  Thu Jul 15 08:47:45 2004
From: nil5-ksa at yandex.ru (ksa)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] problem getting style of point features
References: <01c301c4658c$e96bf610$0511a8c0@moon> <40EECD2E.5040900@pobox.com>
Message-ID: <00aa01c46a69$edb15a30$0511a8c0@moon>

Hi, Frank!
I have follow MIF file:

--top of MIF file
Version 300
Charset "WindowsCyrillic"
Delimiter ","
CoordSys Earth Projection 1, 0
Columns 2
  ID Integer
  Code Char(8)
Data

Point 36.145654 54.531409
    Symbol (45,0,10,"MapInfo Weather",0,0)
--end of MIF file

The corresponding style string is:
SYMBOL(a:0,c:#000000,s:10pt,id:"mapinfo-sym-45.ogr-sym-8").
There is no information about font name in that style string. How I can get
information about font name? MIF-file contains the information about font
name ("MapInfo Weather").


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "ksa" <nil5-ksa@yandex.ru>
Sent: Friday, July 09, 2004 8:51 PM
Subject: Re: [Gdal-dev] problem getting style of point features


> ksa wrote:
> > Hi!
> > I'm using version 1.2.1 of OGR. I've got some diffiiculties in getting
the
> > style of point features.
> >
> > There is no field 'fontName' (or something like this) in the OGR Feature
> > Style Specification for symbol style. So there is no ability to get the
full
> > information about the vector symbols. The system returns information
about
> > the symbol code but it never returns information about the font name for
> > that symbol.
> > For example, getStyleString() returns id:"mapinfo-sym-45". It's 45th
symbol
> > in the MapInfo Weather symbol table (font) actually.
> > The question is: can I receive the font name for that symbol? If not,
how
> > can I guess what a font was used for that symbol? Should I maintain a
> > private list of styles, used by different vendors in their products?
> > Thanks!
>
> Karin,
>
> I'm afraid I don't entirely follow this.  Can you provide a .mid/mif file
with
> just one problem feature and what you are getting from the corresponding
style
> string?
>
> Best regards,
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


From gdal at geoworld.de  Thu Jul 15 09:43:07 2004
From: gdal at geoworld.de (Nicol Hermann)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OCI driver and views
Message-ID: <1089905615.31493.13.camel@emil>

Hi List, 

i was wondering about the behaviour of the OGR/OCI driver. May be
someone can shed any light on that. 

When i do a: 
ogrinfo OCI:<user>/<pass>@oracle -so -sql 'select * from water' 

I get back the summary of the table 'water' but i also get back error
messages form some objects 

e.g. 
ERROR 1: ORA-04043: Objekt VW_STAND ist nicht vorhanden 
in OCIDescribeAny 

I assume that the OCI driver could not handle views because all the
objects identified as errors are views which are registered in the
sdo_geom_metadata_table. Is that true? 
How can i avoid the error messages in the output which refers to tables
i am not interested in? 

I'am using gdal 1.2.0 on a debian 3.0r2 box. 

Thanks for any help 
Nicol



From warmerdam at pobox.com  Thu Jul 15 10:22:19 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OCI driver and views
In-Reply-To: <1089905615.31493.13.camel@emil>
References: <1089905615.31493.13.camel@emil>
Message-ID: <40F6931B.3080405@pobox.com>

Nicol Hermann wrote:
> Hi List, 
> 
> i was wondering about the behaviour of the OGR/OCI driver. May be
> someone can shed any light on that. 
> 
> When i do a: 
> ogrinfo OCI:<user>/<pass>@oracle -so -sql 'select * from water' 
> 
> I get back the summary of the table 'water' but i also get back error
> messages form some objects 
> 
> e.g. 
> ERROR 1: ORA-04043: Objekt VW_STAND ist nicht vorhanden 
> in OCIDescribeAny 
> 
> I assume that the OCI driver could not handle views because all the
> objects identified as errors are views which are registered in the
> sdo_geom_metadata_table. Is that true? 
> How can i avoid the error messages in the output which refers to tables
> i am not interested in? 
> 
> I'am using gdal 1.2.0 on a debian 3.0r2 box. 

Nicol,

A few options come to mind:
  o Use an explicit list of tables you are interested in when you open the
    database.  Only those tables will be queried so there won't be any extra
    noise like you are seeing.
  o Modify the current error message to be a debug statement.
  o Modify the code to support getting a description of views.

Hmm, looking through the code briefly, it doesn't seem that the oracle
driver currently supports passing in a table list to use as layers, so the
first option is out for now.

I have a mounting list of Oracle issues to look into.  I will see if I can
do something about this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From wlwoon at must.edu.my  Thu Jul 15 13:53:06 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Compiling ogr/gdal on win32 using MingW
In-Reply-To: <EKEJIKAILPONGGENMBGAAEMIIBAA.nhv@cape.com>
References: <EKEJIKAILPONGGENMBGAAEMHIBAA.nhv@cape.com>
	<EKEJIKAILPONGGENMBGAAEMIIBAA.nhv@cape.com>
Message-ID: <20040716015306.5756e4f1.wlwoon@must.edu.my>

Dear all

Thanks for all the hints. I'd never heard of MSys before this but it rocks!! Also, think it works with cross compiling as well (I didn't know to use "-host=mingw32" before this -> tried with host=win32, win9x, windows, etc etc, without any luck)

In case anyone is coding in C like i was (I was using the C API): I had a million undefined symbols when compiling (this doesn't occur normally because it is dynamically linked under the usual configuration) - the simple fix was to compile to object files with gcc, then proceed using g++... 

Cheers
Wei Lee



On Wed, 14 Jul 2004 11:35:14 -0400
"Norman Vine" <nhv@cape.com> wrote:

> Norman Vine writes:
> > 
> > or do as I do and install a MingW tree inside of Cygwin
> > 
> > i.e.  I have established my MingW root at /usr/mingw
> > and install mingw files under it
> > 
> > then  # mingw make doesn't understand Unix filenames
> > % cp /bin/make.exe to /usr/mingw/bin
> > 
> > and when I configure a MingW build I use
> > 
> > ./configure --prefix=/usr/mingw --host=mingw32
> 
> OF course you need to insure that 
> 
> Of course when using MingW like this you have to setup your path
> appropriately too
> 
> i.e.
> % export PATH="/usr/mingw/bin:$PATH"
> 
> HTH
> 
> Norman
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 

From wlwoon at must.edu.my  Thu Jul 15 14:11:48 2004
From: wlwoon at must.edu.my (Woon Wei Lee)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] OGR code examples
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63B3A@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63B3A@mailman.san.com>
Message-ID: <20040716021148.60451dc7.wlwoon@must.edu.my>

Michele

If you're just starting out with OGR, it might be worth your time to try out the python bindings. I found the python interface to be loads easier to start with due to its interactive nature (for eg, you get instant feedback on every command you issue, automatic type instantiation, etc).

However, because it uses the same underlying classes as the C++ library, migrating over to C++ (or the C API) later on is much easier. Alternatively, you might find that the python bindings achieve all that you'd set out to do anyway! ;-)

Cheers
Wei Lee






On Wed, 14 Jul 2004 14:35:40 -0600
"Chapman, Martin" <MChapman@sanz.com> wrote:

> Michele,
> 
> Check out the code below.  It will give you the basic idea of how to get
> geometries and features from ogr:
> 
> 
> COgrShapeLayer* COgrDataSource::ExecuteSQL(string sStatement,
> 	
> CSXBasicGeometry* pSpatialFilter,
> 	
> string sDialect)
> {
> 	try
> 	{
> 		if (!m_pDatasource)
> 			throw "Invalid data source null in
> COgrDataSource::ExecuteSQL().";
> 
> 		OGRSpatialReference* pSpatialRef =
> m_pDatasource->GetLayer(0)->GetSpatialRef();
> 		OGRLinearRing* pRing = NULL;
> 
> 		if (dynamic_cast< CSXPolygon*>(pSpatialFilter))
> 		{
> 			CSXPolygon* pPolygon = (CSXPolygon*)
> pSpatialFilter;
> 			pRing = new OGRLinearRing();
> 			vector< double>::iterator it;
> 			vector< double>* pPoints =
> pPolygon->GetPoints();
> 			double nX = 0.0, nY = 0.0;
> 
> 			for (it = pPoints->begin(); it !=
> pPoints->end(); it++)
> 			{
> 				nY = *it;
> 				it++;
> 				nX = *it;
> 				pRing->addPoint(nX, nY);
> 			}
> 
> 			pRing->addPoint(pPoints->at(1), pPoints->at(0));
> 		}
> 		else
> 			throw "Invalid spatial reference data type in
> COgrDataSource::ExecuteSQL().";
> 
> 		OGRPolygon* pPolygon = new OGRPolygon();
> 		if (pSpatialRef)
> pPolygon->assignSpatialReference(pSpatialRef);
> 		pPolygon->addRingDirectly(pRing);
> 
> 		OGRLayer* pLayer = m_pDatasource->ExecuteSQL((const
> char*) sStatement.c_str(),
> 	
> pPolygon,
> 	
> (const char*) sDialect.c_str());
> 		if (pLayer == NULL) throw (char*) CPLGetLastErrorMsg();
> 
> 		COgrShapeLayer* pShapeLayer = CreateShapeLayer(pLayer);
> 		m_pDatasource->ReleaseResultSet(pLayer);
> 		if (CPLGetLastErrorNo() != OGRERR_NONE) throw (char*)
> CPLGetLastErrorMsg();
> 		return pShapeLayer;
> 	}
> 	catch(exception e)
> 		{throw e;}
> 	catch(char* e)
> 		{throw e;}
> 	catch(...)
> 		{throw "An unexpected error occurred in
> COgrDataSource::ExecuteSQL().";}
> }
> 
> CSXFeatureTable* COgrDataSource::CreateFeatureTable(OGRLayer* pOgrLayer)
> {
> 	try
> 	{
> 		if (!pOgrLayer)
> 			throw "Invalid parameter null in
> COgrDataSource::CreateFeatureTable().";
> 
> 		OGRFeatureDefn* pFeatureDefn =
> pOgrLayer->GetLayerDefn();
> 		int nFieldCount = pFeatureDefn->GetFieldCount();
> 		const char* pszLayerName = (char*)
> pFeatureDefn->GetName();
> 
> 		CSXFeatureTable* pFeatureTable = new
> CSXFeatureTable(pszLayerName, nFieldCount + 1);
> 
> 		pFeatureTable->SetColumnName(0, "FID");
> 		pFeatureTable->SetType(0, DBF_TYPE_NUMERIC);
> 		pFeatureTable->SetLength(0, 4);
> 		pFeatureTable->SetDecimalCount(0, 0);
> 
> 		for (int i = 0; i < nFieldCount; i++)
> 		{
> 			OGRFieldDefn* pFieldDefn =
> pFeatureDefn->GetFieldDefn(i);
> 			const char* pszNameRef =
> pFieldDefn->GetNameRef();
> 			unsigned char cDataType =
> GetShapeDataType(pFieldDefn->GetType());
> 			unsigned char cWidth = (unsigned char)
> pFieldDefn->GetWidth();
> 			unsigned char cPrecision = (unsigned char)
> pFieldDefn->GetPrecision();
> 
> 			pFeatureTable->SetColumnName(i + 1, pszNameRef);
> 			pFeatureTable->SetType(i + 1, cDataType);
> 			pFeatureTable->SetLength(i + 1, cWidth);
> 			pFeatureTable->SetDecimalCount(i + 1,
> cPrecision);
> 		}
> 
> 		OGRFeature* pOgrFeature = pOgrLayer->GetNextFeature();
> 		while (pOgrFeature)
> 		{
> 			vector< string>* pRecord = new vector< string>;
> 			char pszBuffer [sizeof(long) * 8 + 1];
>             sprintf(pszBuffer, "%d", pOgrFeature->GetFID());
> 			pRecord->push_back(pszBuffer);
> 
> 			for (long j = 0; j < nFieldCount; j++)
> 	
> pRecord->push_back(pOgrFeature->GetFieldAsString(j));
> 
> 			pFeatureTable->AddRecord(pRecord);
> 			delete pOgrFeature;
> 			pOgrFeature = pOgrLayer->GetNextFeature();
> 		}
> 
> 		pOgrLayer->ResetReading();
> 		return pFeatureTable;
> 	}
> 	catch(exception e)
> 		{throw e;}
> 	catch(char* e)
> 		{throw e;}
> 	catch(...)
> 		{throw "An unexpected error occurred in
> COgrDataSource::CreateFeatureTable().";}
> }
> 
> COgrGraphicList* COgrDataSource::GetPointGeometry(OGRLayer* pOgrLayer,
> CSXDrawingAttributes* pDrawingAttributes)
> {
> 	try
> 	{
> 		if (!pOgrLayer || !pDrawingAttributes)
> 			throw "Invalid parameter null in
> COgrDataSource::GetPointGeometry().";
> 
> 		double nLat, nLon;
> 		CSXGraphic* pSXPoint = NULL;
> 		OGRPoint* pOgrPoint = NULL;
> 		vector< float> vXYPoint;
> 		COgrGraphicList* pList = new COgrPointList();
> 
> 		OGRFeature* pFeature = pOgrLayer->GetNextFeature();
> 
> 		while (pFeature != NULL)
> 		{
> 			OGRGeometry* pGeometry =
> pFeature->GetGeometryRef();
> 			if (!pGeometry) continue;
> 
> 			pOgrPoint = (OGRPoint*) pGeometry;
> 			long nFID = pFeature->GetFID();
> 			int nShapeType = (int)
> pGeometry->getGeometryType();
> 			if (nShapeType == SHAPE_TYPE_NULL)
> 				continue;
> 
> 			nLon = pOgrPoint->getX();
> 			nLat = pOgrPoint->getY();
> 			pSXPoint = new COgrPoint(nLat, nLon);
> 			pSXPoint->SetAppObject((unsigned int) nFID);
> 			pDrawingAttributes->SetTo((CSXGraphic*)
> pSXPoint);
> 
> 			pList->Add(pSXPoint);
> 			pFeature = pOgrLayer->GetNextFeature();
> 		}
> 
> 		pOgrLayer->ResetReading();
> 		return pList;
> 	}
> 	catch(exception e)
> 		{throw e;}
> 	catch(char* e)
> 		{throw e;}
> 	catch(...)
> 		{throw "An unexpected error occurred in
> COgrDataSource::GetPointGeometry().";}
> }
> 
> COgrGraphicList* COgrDataSource::GetPolyGeometry(OGRLayer* pOgrLayer,
> CSXDrawingAttributes* pDrawingAttributes, int nShapeType)
> {
> 	try
> 	{
> 		if (!pOgrLayer || !pDrawingAttributes)
> 			throw "Invalid parameter null in
> COgrDataSource::GetPolyGeometry().";
> 
> 		COgrGraphicList* pList = NULL;
> 		OGREnvelope pEnvelope;
> 
> 		if (nShapeType == SHAPE_TYPE_POLYLINE)
> 			pList = new COgrPolyLineList();
> 		else if (nShapeType == SHAPE_TYPE_POLYGON)
> 			pList = new COgrPolygonList();
> 
> 		pOgrLayer->ResetReading();
> 		OGRFeature* pFeature = pOgrLayer->GetNextFeature();
> 
> 		while (pFeature != NULL)
> 		{
> 			OGRGeometry* pGeometry =
> pFeature->GetGeometryRef();
> 			if (!pGeometry)
> 			{
> 				pFeature = pOgrLayer->GetNextFeature();
> 				continue;
> 			}
> 
> 			int nShapeType = SHAPE_TYPE_NULL;
> 			int nGeomType = pGeometry->getGeometryType();
> 			if (nGeomType == wkbUnknown)
> 			{
> 				pFeature = pOgrLayer->GetNextFeature();
> 				continue;
> 			}
> 			else if (nGeomType == wkbLineString || nGeomType
> == wkbMultiLineString)
> 				nShapeType = SHAPE_TYPE_POLYLINE;
> 			else if (nGeomType == wkbPolygon || nGeomType ==
> wkbMultiPolygon)
> 				nShapeType = SHAPE_TYPE_POLYGON;
> 
> 			long nVertexCount = 0;
> 			long nFID = pFeature->GetFID();
> 			int nPartCount = 1;
> 
> 			if (nGeomType == wkbLineString)
> 				nPartCount = 1;
> 			else if (nGeomType == wkbMultiLineString)
> 				nPartCount = ((OGRMultiLineString*)
> pGeometry)->getNumGeometries();
> 			else if (nGeomType == wkbPolygon)
> 				nPartCount =
> ((OGRPolygon*)pGeometry)->getNumInteriorRings() + 1;
> 			else if (nGeomType == wkbMultiPolygon)
> 				nPartCount = ((OGRMultiPolygon*)
> pGeometry)->getNumGeometries();
> 
> 			CSXGraphic* pPolygon = NULL;
> 			COgrGraphicList* pSubList = NULL;
> 
> 			if (nPartCount > 1)
> 			{
> 				if (nShapeType == SHAPE_TYPE_POLYLINE)
> 					pSubList = new
> COgrPolyLineList();
> 				else if (nShapeType ==
> SHAPE_TYPE_POLYGON)
> 					pSubList = new
> COgrPolygonList();
> 			}
> 
> 			for (long j = 0; j < nPartCount; j++)
> 			{
> 				vector< double>* pPoints = new vector<
> double>;
> 
> 				if (nShapeType == SHAPE_TYPE_POLYLINE)
> 				{
> 					if (nGeomType == wkbLineString)
> 					{
> 						OGRLineString*
> pLinearString = (OGRLineString*) pGeometry;
> 						nVertexCount =
> pLinearString->getNumPoints();
> 
> 						for (int n = 0; n <
> nVertexCount; n++)
> 						{
> 							double nLambda =
> pLinearString->getX(n);
> 							double nPhi =
> pLinearString->getY(n);
> 
> 	
> pPoints->push_back((double) nPhi);
> 	
> pPoints->push_back((double) nLambda);
> 						}
> 					}
> 					else if (nGeomType ==
> wkbMultiLineString)
> 					{
> 						OGRMultiLineString*
> pMultiLineString = (OGRMultiLineString*) pGeometry;
> 						OGRLineString*
> pLinearString = (OGRLineString*) pMultiLineString->getGeometryRef(j);
> 						nVertexCount =
> pLinearString->getNumPoints();
> 
> 						for (int n = 0; n <
> nVertexCount; n++)
> 						{
> 							double nLambda =
> pLinearString->getX(n);
> 							double nPhi =
> pLinearString->getY(n);
> 
> 	
> pPoints->push_back((double) nPhi);
> 	
> pPoints->push_back((double) nLambda);
> 						}
> 					}
> 				}
> 				else if (nShapeType ==
> SHAPE_TYPE_POLYGON)
> 				{
> 					if (nGeomType == wkbPolygon)
> 					{
> 						OGRLinearRing*
> pLinearRing = NULL;
> 
> 						if (j == 0)
> 							pLinearRing =
> ((OGRPolygon*)pGeometry)->getExteriorRing();
> 						else
> 							pLinearRing =
> ((OGRPolygon*)pGeometry)->getInteriorRing(j - 1);
> 
> 						nVertexCount =
> pLinearRing->getNumPoints();
> 
> 						for (int n = 0; n <
> nVertexCount; n++)
> 						{
> 							double nLambda =
> pLinearRing->getX(n);
> 							double nPhi =
> pLinearRing->getY(n);
> 
> 							//if (nFID ==
> 1240)
> 								//cout
> << "Lat: " << nPhi << " Lon: " << nLambda << endl;
> 
> 	
> pPoints->push_back((double) nPhi);
> 	
> pPoints->push_back((double) nLambda);
> 						}
> 					}
> 					else if (nGeomType ==
> wkbMultiPolygon)
> 					{
> 						OGRLinearRing*
> pLinearRing = NULL;
> 						OGRMultiPolygon*
> pMultiPolygon = (OGRMultiPolygon*) pGeometry;
> 						OGRPolygon* pOGRPolygon
> = (OGRPolygon*) pMultiPolygon->getGeometryRef(j);
> 
> 						if (j == 0)
> 							pLinearRing =
> pOGRPolygon->getExteriorRing();
> 						else
> 							pLinearRing =
> pOGRPolygon->getInteriorRing(j - 1);
> 
> 						nVertexCount =
> pLinearRing->getNumPoints();
> 
> 						for (int n = 0; n <
> nVertexCount; n++)
> 						{
> 							double nLambda =
> pLinearRing->getX(n);
> 							double nPhi =
> pLinearRing->getY(n);
> 
> 	
> pPoints->push_back((double) nPhi);
> 	
> pPoints->push_back((double) nLambda);
> 						}
> 					}
> 				}
> 
> 				if (nShapeType == SHAPE_TYPE_POLYLINE)
> 					pPolygon = new
> COgrPolyLine(pPoints, DECIMAL_DEGREES, LINETYPE_STRAIGHT);
> 				else if (nShapeType ==
> SHAPE_TYPE_POLYGON)
> 					pPolygon = new
> COgrPolygon(pPoints, DECIMAL_DEGREES, LINETYPE_STRAIGHT);
> 
> 				pPolygon->SetAppObject((unsigned int)
> nFID);
> 				pPolygon->SetAppObjectPart((int) j);
> 
> 				if (pDrawingAttributes != NULL)
> 	
> pDrawingAttributes->SetTo((CSXGraphic*) pPolygon);
> 
> 				if
> (dynamic_cast<COgrPolyLine*>(pPolygon))
> 				{
> 					CSXColor clear(0.0f, 0.0f, 0.0f,
> 0.0f);
> 					pPolygon->SetFillColor(&clear);
> 				}
> 
> 				if (pSubList != NULL)
> 	
> pSubList->AddSXGraphic(pPolygon);
> 			}
> 
> 			if (pSubList != NULL)
> 			{
> 				pGeometry->getEnvelope(&pEnvelope);
> 				vector< double>* pExtents = new vector<
> double>;
> 				pExtents->push_back((double)
> pEnvelope.MinY);
> 				pExtents->push_back((double)
> pEnvelope.MinX);
> 				pExtents->push_back((double)
> pEnvelope.MaxY);
> 				pExtents->push_back((double)
> pEnvelope.MaxX);
> 				pSubList->SetExtents(pExtents);
> 				pSubList->SetAppObject((unsigned int)
> nFID);
> 				pList->Add(pSubList);
> 			}
> 			else
> 				pList->Add(pPolygon);
> 
> 			pFeature = pOgrLayer->GetNextFeature();
> 		}
> 
> 		pOgrLayer->ResetReading();
> 		return pList;
> 	}
> 	catch(exception e)
> 		{throw e;}
> 	catch(char* e)
> 		{throw e;}
> 	catch(...)
> 		{throw "An unexpected error occurred in
> COgrDataSource::GetPolyGeometry().";}
> }
> 
> If you have questions let me know.
> Martin
> 
> 
> -----Original Message-----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> Sent: Wednesday, July 14, 2004 2:30 PM
> To: Sanges Michele
> Cc: gdal-dev@xserve.flids.com
> Subject: Re: [Gdal-dev] OGR code examples
> 
> 
> Sanges Michele wrote:
> > Are there some code examples of how reading data files by means the 
> > OGR library, in C++? Thanks.
> 
> Hi,
> 
> I am not aware of C++ examples other than the utility programs like
> ogrinfo.cpp and ogr2ogr.cpp.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------
> ---------------------------------------+------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 

From dem at acri-st.fr  Fri Jul 16 09:00:13 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Use TIFF functions embedded in gdal win32 DLL
Message-ID: <5.0.2.1.2.20040716142135.00af4798@pop3>

Hi,

I use libtiff (and also GeoTIFF) functions embedded in gdal shared library.
It works well on Unix/Linux, but on Win32 platform the TIFF functions 
aren't exported (with CPL_DLL).
I understand that all libtiff functions aren't supposed to be exported, 
because they are (supposed) only used internally for the TIFF GDAL driver, 
and aren't in the GDAL API... (but this will be useful for me :-).
On the other hand, there are others functions (not in the API) used 
internally which are exported in the DLL, as HFAOpen, all png_xx functions, 
... (maybe because some embedded libraries for some drivers export 
automatically their functions...)

Is it an easy solution for me to export libtiff functions in the GDAL DLL ?
The only solution I see is modify my local GDAL sources and add the CPL_DLL 
macro for each TIFF function I use...

Thanks in advance,

Julien


From dem at acri-st.fr  Fri Jul 16 09:26:35 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Kakadu Driver Dynamic Creation
Message-ID: <5.0.2.1.2.20040716150016.028dad00@pop3>

Hi,

I need dynamic creation for the Kakadu driver...
Are there any plans to implement it, or any existing contributions which 
partially implement this ?
I don't know exactly if this is a complex or easy work and the time 
required to implement this...
(I've rapidly walked on the driver code and this doesn't seam very hard... 
but maybe I'm wrong ? I think the createcopy method code seams to be a good 
starting point...)

Thanks in advance (all advices are welcome),

Julien


From warmerdam at pobox.com  Fri Jul 16 09:43:07 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Use TIFF functions embedded in gdal win32 DLL
In-Reply-To: <5.0.2.1.2.20040716142135.00af4798@pop3>
References: <5.0.2.1.2.20040716142135.00af4798@pop3>
Message-ID: <40F7DB6B.6030708@pobox.com>

Julien Demaria wrote:
> Hi,
> 
> I use libtiff (and also GeoTIFF) functions embedded in gdal shared library.
> It works well on Unix/Linux, but on Win32 platform the TIFF functions 
> aren't exported (with CPL_DLL).
> I understand that all libtiff functions aren't supposed to be exported, 
> because they are (supposed) only used internally for the TIFF GDAL 
> driver, and aren't in the GDAL API... (but this will be useful for me :-).
> On the other hand, there are others functions (not in the API) used 
> internally which are exported in the DLL, as HFAOpen, all png_xx 
> functions, ... (maybe because some embedded libraries for some drivers 
> export automatically their functions...)
> 
> Is it an easy solution for me to export libtiff functions in the GDAL DLL ?
> The only solution I see is modify my local GDAL sources and add the 
> CPL_DLL macro for each TIFF function I use...

Julien,

It is possible to add lots of CPL_DLL declarations but that can be quite an
effort.  Instead, I would encourage you to build libtiff and libgeotiff
seperately and use those for GDAL and your own purposes.  When built free
standing libtiff and libgeotiff do export their entry points properly.  I
think libtiff uses a .def file and libgeotiff uses CPL_DLL (really
_declspec(dllexport)) declarations for the functions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dem at acri-st.fr  Fri Jul 16 10:05:32 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Kakadu float rasters and 16bits lossless
Message-ID: <5.0.2.1.2.20040716155333.0278c108@pop3>

Hi,

The Kakadu driver can create float rasters and compress 16bits rasters 
lossless, so this line in the driver sources should be updated :

         poDriver->SetMetadataItem( GDAL_DMD_CREATIONDATATYPES,
                                    "Byte Int16 UInt16" );

and also the driver documentation (http://gdal.maptools.org/frmt_jp2kak.html) :

"... When reading images this driver will represent the bands as being Byte 
(8bit unsigned), 16 bit signed or 16 bit unsigned.
...
NOTE: QUALITY=100 will not be lossless for 16bit images."


Regards,

Julien


From warmerdam at pobox.com  Fri Jul 16 10:05:58 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Kakadu Driver Dynamic Creation
In-Reply-To: <5.0.2.1.2.20040716150016.028dad00@pop3>
References: <5.0.2.1.2.20040716150016.028dad00@pop3>
Message-ID: <40F7E0C6.4080300@pobox.com>

Julien Demaria wrote:
> Hi,
> 
> I need dynamic creation for the Kakadu driver...
> Are there any plans to implement it, or any existing contributions which 
> partially implement this ?
> I don't know exactly if this is a complex or easy work and the time 
> required to implement this...
> (I've rapidly walked on the driver code and this doesn't seam very 
> hard... but maybe I'm wrong ? I think the createcopy method code seams 
> to be a good starting point...)
> 
> Thanks in advance (all advices are welcome),

Julien,

As far as I know, it is not possible to do proper dynamic creation of
JPEG2000 files via Kakadu.  Basically, the data needs to be written scanline
by scanline - something which a dynamically created file can't ensure will
happen.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jul 16 11:12:31 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:19 2007
Subject: [Gdal-dev] Kakadu float rasters and 16bits lossless
In-Reply-To: <5.0.2.1.2.20040716155333.0278c108@pop3>
References: <5.0.2.1.2.20040716155333.0278c108@pop3>
Message-ID: <40F7F05F.60500@pobox.com>

Julien Demaria wrote:
> Hi,
> 
> The Kakadu driver can create float rasters and compress 16bits rasters 
> lossless, so this line in the driver sources should be updated :
> 
>         poDriver->SetMetadataItem( GDAL_DMD_CREATIONDATATYPES,
>                                    "Byte Int16 UInt16" );
> 
> and also the driver documentation 
> (http://gdal.maptools.org/frmt_jp2kak.html) :
> 
> "... When reading images this driver will represent the bands as being 
> Byte (8bit unsigned), 16 bit signed or 16 bit unsigned.
> ...
> NOTE: QUALITY=100 will not be lossless for 16bit images."

Julien,

Have you verified broadly that 16bit signed and unsigned images can be
compressed losslessly?  I can't remember why I put this comment in the
document, but I am hesitant to remove it without being able to remember.

Also, the floating point support depends on the data being prescaled between
0.0 and 1.0 which is then internally implicitly treated as integers as I
understand it.  So I don't think there is really proper support for floating
point data, though I didn't realize when I first implemented the code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dem at acri-st.fr  Fri Jul 16 11:49:12 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Kakadu float rasters and 16bits lossless
In-Reply-To: <40F7F05F.60500@pobox.com>
References: <5.0.2.1.2.20040716155333.0278c108@pop3>
	<5.0.2.1.2.20040716155333.0278c108@pop3>
Message-ID: <5.0.2.1.2.20040716172426.027a1f70@pop3>

Frank,

sorry I've just seen in the source this comment (and thought the 
documentation was outdated...) :

  * Revision 1.20  2004/01/15 21:21:04  warmerda
  * added lossless compression of 16bit values
  *

but haven't verified that... (a little test with diff seams fails...)

Other question :
I searched on gdal web sites for a CVSWeb ; is it disabled ? (I've found 
only http://www.remotesensing.org/cgi-bin/cvsweb.cgi/osrs/gdal/ on 
http://gdal.maptools.org/download.html but it doesn't works...)

Regards,

Julien


At 11:12 16/07/2004 -0400, Frank Warmerdam wrote:
>Julien Demaria wrote:
>>Hi,
>>The Kakadu driver can create float rasters and compress 16bits rasters 
>>lossless, so this line in the driver sources should be updated :
>>         poDriver->SetMetadataItem( GDAL_DMD_CREATIONDATATYPES,
>>                                    "Byte Int16 UInt16" );
>>and also the driver documentation 
>>(http://gdal.maptools.org/frmt_jp2kak.html) :
>>"... When reading images this driver will represent the bands as being 
>>Byte (8bit unsigned), 16 bit signed or 16 bit unsigned.
>>...
>>NOTE: QUALITY=100 will not be lossless for 16bit images."
>
>Julien,
>
>Have you verified broadly that 16bit signed and unsigned images can be
>compressed losslessly?  I can't remember why I put this comment in the
>document, but I am hesitant to remove it without being able to remember.
>
>Also, the floating point support depends on the data being prescaled between
>0.0 and 1.0 which is then internally implicitly treated as integers as I
>understand it.  So I don't think there is really proper support for floating
>point data, though I didn't realize when I first implemented the code.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jul 16 12:01:11 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Kakadu float rasters and 16bits lossless
In-Reply-To: <5.0.2.1.2.20040716172426.027a1f70@pop3>
References: <5.0.2.1.2.20040716155333.0278c108@pop3>
	<5.0.2.1.2.20040716155333.0278c108@pop3>
	<5.0.2.1.2.20040716172426.027a1f70@pop3>
Message-ID: <40F7FBC7.6000704@pobox.com>

Julien Demaria wrote:
> Frank,
> 
> sorry I've just seen in the source this comment (and thought the 
> documentation was outdated...) :
> 
>  * Revision 1.20  2004/01/15 21:21:04  warmerda
>  * added lossless compression of 16bit values
>  *
> 
> but haven't verified that... (a little test with diff seams fails...)
> 
> Other question :
> I searched on gdal web sites for a CVSWeb ; is it disabled ? (I've found 
> only http://www.remotesensing.org/cgi-bin/cvsweb.cgi/osrs/gdal/ on 
> http://gdal.maptools.org/download.html but it doesn't works...)

Julien,

I haven't setup cvsweb on the new remotesensing.org.  I'll remove it from
the download.html.  Moving machines has been a huge hassle.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From andreas.wimmer at joanneum.at  Fri Jul 16 09:20:55 2004
From: andreas.wimmer at joanneum.at (Andreas Wimmer)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Improving img support
Message-ID: <cd8knp$vhn$1@sea.gmane.org>

Hi!
I am currently working on using gdal specifically the img driver to access
erdas img-images from our image processing framework.
While working on it I found a number of issues with the gdal support for 
img images. I solved these issues with the patches I append to this posting.

1) clean_force_external_spill.patch
In the latest version of gdal (1.2.1) support for a use-option SPILL_FILE
was added. Unfortunately a similar option named USE_SPILL already existed
for some time. This patch cleans up this inconsitency by using the USE_SPILL
option. (which is the better name IMO ).
Additionally this patch changes the behaviour of the img-driver to now
always creating the HFA Entry "IMGFormatInfo" (of type ImgFormatInfo831)
When using an external spill file the element "spaceUsedForRasterData" is
set to zero, otherwiese to the number of bytes used for the blocks stored
in the file (ie. nBytesPerBlock*nBlocks*nBands ) This is done for
compliance with Erdas imagine which also sets this Elemten the same way.

2) block_size_support.patch
This patch addes a new user option named "BLOCKSIZE" which allows the 
specification of the Blocksize used to write the images. Until now the 
blocksize was fixed to 64 Pixels, which was rather small for our purposes
and gave poor results when doing image io over network connections.
The patch includes a sanity check which only allows sizes between 32 and 
2048 Pixels, if values outside this range are specified the default value of
64 Pixels is used.
Addtionally this patch cures a problem with 32 bit unsigned integer files.
The img file format documentation states thet the dictionaryPtr element of
the Ehfa_Layer entry shall point to an Dictionary of the form
"{<n>:<t>,}RasterDMS,." where the t shall be the char ?i? for uint32. For
some reason the leads to errors ("out of memory") for erdas imagine. Erdas
imagine itself uses an "L" in this case so I changed the gdal-code
accordingly.


3) metadata_infrastructure.patch
In an attempt to improve the handling of statistics and histogram I used
the Set/GetMetadataInterface. The img-driver uses a fixed set of
metadata-items which are read from hfa-entries used by imagine and the
meta-data entry specific to gdal, but these value are always written to the
gdal specific meta-data entry. Hence erdas imagine cannot make use of
statistics created with gdal based img files.
This patch moves and extends the fixed set of meta-data items form
hfadataset.cpp to hfaopen.cpp. Additionally it adds a declaration for a
function "GetHFAAuxMetaDataList" to hfa_p.h. This function is implemented
in hfaopen.h and returns the list of metadata item definitions.
This list is also extended by some histgram related items. This definition
now contains four elements instead of 3 for the item definitions to
additionally specify the hfa-entry element where the items should be read
from.

4) set_metadata.patch
requires metadata_infrastructure.patch.
This patch changes the behaviour of HFASetMetadata. Instead of writing the
metadata infor the a gdal specific hfa entry, the new code writes the data
to the entries which are used by erdas imagine, namely the entry
"Statistics" of type Esta_Statistics or "HistogramParameters" of type
Eimg_StatisticsParameters830 (specified by the meta-data definition).

5) histogram.patch
requires set_metadata.patch
This patch adds the ability to read and store Histogram data in img files in 
and erdas imagine compatible way. The histogram data is passed over the
Metadata interface in the "STATISTICS_HISTOBINVALUES" item.
This item is supposed to be a list of integer values separated by a '|'
(vertical bar). Additional parameters are STATISTICS_HISTONUMBINS (the
number of bins),  STATISTICS_HISTOMIN (the min value coverd by the
histogram) and STATISTICS_HISTOMAX (the max value).
The patch always creates "linear histgrams" with integer counter fields.
The skip-factor fields are set to 1. The read functionality for histograms 
support integer and double counters.

I hope these patches are usefull and can be included in the gdal
distribution

Best Regards,
Andreas


-- 
Andreas Wimmer
andreas.wimmer@joanneum.at
-------------- next part --------------
A non-text attachment was scrubbed...
Name: block_size_support.patch
Type: text/x-diff
Size: 1500 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040716/acb465ef/block_size_support.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: clean_force_external_spill.patch
Type: text/x-diff
Size: 1418 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040716/acb465ef/clean_force_external_spill.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: histogram.patch
Type: text/x-diff
Size: 5176 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040716/acb465ef/histogram.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: metadata_infrastructure.patch
Type: text/x-diff
Size: 4736 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040716/acb465ef/metadata_infrastructure.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: set_metadata.patch
Type: text/x-diff
Size: 5094 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040716/acb465ef/set_metadata.bin
From warmerdam at pobox.com  Fri Jul 16 16:44:14 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Improving img support
In-Reply-To: <cd8knp$vhn$1@sea.gmane.org>
References: <cd8knp$vhn$1@sea.gmane.org>
Message-ID: <40F83E1E.9050003@pobox.com>

Andreas Wimmer wrote:
> Hi!
> I am currently working on using gdal specifically the img driver to access
> erdas img-images from our image processing framework.
> While working on it I found a number of issues with the gdal support for 
> img images. I solved these issues with the patches I append to this posting.

Andreas,

I have committed all your patches after a rudimentary inspection, and a
verification that my imagine test suite still passes.  They are most
impressive!

Would you mind preparing one more patch?  A patch to frmt_hfa.html
explaining the current state of things?

PS. I take it this means I don't need to investigate the bug report that
came to me indirectly via Geosystems?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at pf.pl  Mon Jul 19 15:49:08 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] gdal/python
Message-ID: <006a01c46dd3$635bbca0$9ee163d9@podyadeck>

Hi!

I've been trying to build Gdal 1.2.1 on Linux and I'm an absolute beginner.
I'm having problems with Python. Though I've installed plenty of Python
stuff which I think Gdal may require the Python part still fails in
configure. What Python bits are needed to build Gdal with Python actually?

I'm configuring this way:

CPPFLAGS="-I/usr/include/python2.3/Numeric -I/usr/include/mpatrol"
CXXFLAGS="-march=athlon-xp -O3 -Wall" CFLAGS="-march=athlon-xp -O3 -Wall"
./configure

And in the config.log I get:

(...)
configure:24160: checking for python
configure:24176: found /usr/bin/python
configure:24186: result: python
configure:24202: checking where python Makefiles are
configure:24217: result: found
configure:24221: checking Python makefile
configure:24228: result: missing, python disabled.
configure:24335: checking for NumPy include files
configure:24345: result: missing
(...)
PYTHON='no'
PYTHON_CC=''
PYTHON_CFLAGS=''
PYTHON_INCLUDES=''
PYTHON_LIBS=''
PYTHON_LINK=''
PYTHON_OPT=''
PYTHON_SO=''
(...)
pyexecdir='/usr/lib/python2.3/site-packages'
pymoddir=''
pythondir='/usr/lib/python2.3/site-packages'
(...)

Can somebody tell me BTW what options to pass to configure to optimise the
Fortran code (there is some in Gdal, right?)? I can't make it out of the g77
info and man, as for an amateur the gcc man is much more understandable I
think.


From warmerdam at pobox.com  Mon Jul 19 22:43:25 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] gdal/python
In-Reply-To: <006a01c46dd3$635bbca0$9ee163d9@podyadeck>
References: <006a01c46dd3$635bbca0$9ee163d9@podyadeck>
Message-ID: <40FC86CD.3060904@pobox.com>

Maciek Sieczka wrote:
> Hi!
> 
> I've been trying to build Gdal 1.2.1 on Linux and I'm an absolute beginner.
> I'm having problems with Python. Though I've installed plenty of Python
> stuff which I think Gdal may require the Python part still fails in
> configure. What Python bits are needed to build Gdal with Python actually?
> 
> I'm configuring this way:
> 
> CPPFLAGS="-I/usr/include/python2.3/Numeric -I/usr/include/mpatrol"
> CXXFLAGS="-march=athlon-xp -O3 -Wall" CFLAGS="-march=athlon-xp -O3 -Wall"
> ./configure
> 
> And in the config.log I get:
> 
> (...)
> configure:24160: checking for python
> configure:24176: found /usr/bin/python
> configure:24186: result: python
> configure:24202: checking where python Makefiles are
> configure:24217: result: found
> configure:24221: checking Python makefile
> configure:24228: result: missing, python disabled.
> configure:24335: checking for NumPy include files
> configure:24345: result: missing
> (...)
> PYTHON='no'
> PYTHON_CC=''
> PYTHON_CFLAGS=''
> PYTHON_INCLUDES=''
> PYTHON_LIBS=''
> PYTHON_LINK=''
> PYTHON_OPT=''
> PYTHON_SO=''
> (...)
> pyexecdir='/usr/lib/python2.3/site-packages'
> pymoddir=''
> pythondir='/usr/lib/python2.3/site-packages'
> (...)

Maciek,

I don't know what is up with the python configuration.  I gather you
have some sort of non-standard python installation?  Do you have a
/usr/lib/python2.3/config/Makefile file?  The python config code tries
to find this to extract various build options from.

> Can somebody tell me BTW what options to pass to configure to optimise the
> Fortran code (there is some in Gdal, right?)? I can't make it out of the g77
> info and man, as for an amateur the gcc man is much more understandable I
> think.

There is no FORTRAN code in GDAL.  I haven't even had many requests to
build FORTRAN interfaces to GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dem at acri-st.fr  Tue Jul 20 06:48:41 2004
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] MrSID Driver v. 4.0.x overviews
Message-ID: <6.1.1.1.0.20040720124724.0242be38@pop3>

Hi,

I' ve added overviews support in the new driver using MrSID DSDK v. 4.0.x 
and tested it (with OpenEV) under Windows with MrSID and JPEG2000 files ; 
and made minors modifications to update to the last DSDK 
"Geo_DSDK-4.0.9.713". (I've attached the zipped new mrsid\mrsiddataset.cpp 
file)

I've noted one bug with the driver when reading the last MrSID strip I 
believe (black zone under OpenEV) ; maybe a problem in the IReadBlock 
function on last truncated strip...
I suspect also another bug with nBlockSize that isn't well initialized when 
sample size > 8 bits
(Should I put a bug report in bugzilla ?)

About performances (tested with OpenEV) on a large RGB image (10000x10000), 
now large zoom-out are fast with overviews, but I find navigating in the 
image between 1/3 and 1/1 zoom factor is slow, and the viewer freeze for a 
moment before starting display tiles (initialization cost ?).
I cannot compare with old 3.x.x DSDK because I haven't one.

Maybe one reason is that to read an RGB image I believe each tile is 
decompressed 3 time, one time per component...
About the same problem with the GeoTIFF driver, Frank said that we can 
optimize this by reading interleaved data in one pass by using
the GDALDataset::RasterIO() ; maybe we can also implement this for the 
MrSID Driver ?
Maybe we can also try to remove the memcpy in the IReadBlock function and 
read directly data into the GDAL buffer.
(Maybe there are some optimization to do using the MrSID API differently ?)

I've a little question about JPEG2000 in MrSID : I see in 
Geo_DSDK-4.0.9.713/doc/README-3rdparty.txt that :
"This application uses Kakadu software, licensed from Unisearch Software, Ltd."
Is MrSID SDK use Kakadu for all its JPEG2000 support ?


Thanks in advance,

Julien 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: mrsiddataset.cpp.gz
Type: application/octet-stream
Size: 15610 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040720/509ce840/mrsiddataset.cpp.obj
From tjmitchell at riverside.bc.ca  Tue Jul 20 11:43:59 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] ogrinfo -sql doesn't work with GML files?
Message-ID: <OF92C78B85.0E612AB5-ON88256ED7.00560BF6-88256ED7.00566C0C@Riverside.bc.ca>

I can't seem to get ogrinfo to reduce my set of features in a GML file 
using the -sql or -where parameters.  Should this be expected?  It doesn't 
fail, but still returns the full set.  I've tested this using openev_fw 
(windows) and a nightly build of gdal from yesterday (linux).

I'm attaching a gml file for your reference.
Here is the syntax of the command I was using:
>ogrinfo airports.gml -sql "select name from airports where quadname like 
'%Lake'"
Works great on shapefiles!

Tyler


p.s. Bugzillla down?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: airports.xsd
Type: application/octet-stream
Size: 2659 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040720/2bea52aa/airports.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: airports.gml
Type: application/octet-stream
Size: 5447 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040720/2bea52aa/airports-0001.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: airports.gfs
Type: application/octet-stream
Size: 1102 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040720/2bea52aa/airports-0002.obj
From warmerdam at pobox.com  Tue Jul 20 13:33:34 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] ogrinfo -sql doesn't work with GML files?
In-Reply-To: <OF92C78B85.0E612AB5-ON88256ED7.00560BF6-88256ED7.00566C0C@Riverside.bc.ca>
References: <OF92C78B85.0E612AB5-ON88256ED7.00560BF6-88256ED7.00566C0C@Riverside.bc.ca>
Message-ID: <40FD576E.2060702@pobox.com>

Tyler Mitchell wrote:
> I can't seem to get ogrinfo to reduce my set of features in a GML file 
> using the -sql or -where parameters.  Should this be expected?  It doesn't 
> fail, but still returns the full set.  I've tested this using openev_fw 
> (windows) and a nightly build of gdal from yesterday (linux).

Tyler,

I checked, and sure enough, I never implemented the spatial or attribute
query capability in the GML driver.  I have incorporated it now in CVS.

>>ogrinfo airports.gml -sql "select name from airports where quadname like 
> 
> '%Lake'"
> Works great on shapefiles!
> 
> Tyler
> 
> 
> p.s. Bugzillla down?

Yes, bugzilla is still inaccessable unfortunately.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dron at ak4719.spb.edu  Tue Jul 20 13:57:18 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] MrSID Driver v. 4.0.x overviews
In-Reply-To: <6.1.1.1.0.20040720124724.0242be38@pop3>
References: <6.1.1.1.0.20040720124724.0242be38@pop3>
Message-ID: <20040720175718.GA12362@ak4719.spb.edu>

On Tue, Jul 20, 2004 at 12:48:41PM +0200, Julien Demaria wrote:
> I' ve added overviews support in the new driver using MrSID DSDK v.
> 4.0.x and tested it (with OpenEV) under Windows with MrSID and
> JPEG2000 files ; and made minors modifications to update to the last
> DSDK "Geo_DSDK-4.0.9.713". (I've attached the zipped new
> mrsid\mrsiddataset.cpp file)

Hi, Julien,

Thank you for the patch. Unfortunately I have a bit older version of the
DSDK, but I shall try to incorporate your changes.

> I've noted one bug with the driver when reading the last MrSID strip I
> believe (black zone under OpenEV) ; maybe a problem in the IReadBlock
> function on last truncated strip...

It seems that you are right and there is a problem with the last strip.
Strange that I haven't noticed it previously. I shall look into the
problem.

> I suspect also another bug with nBlockSize that isn't well initialized
> when sample size > 8 bits (Should I put a bug report in bugzilla ?)

I don't have the MrSID files other than 8 bit, do you have a samples? It
will be enough for me to fix that bug.

> About performances (tested with OpenEV) on a large RGB image
> (10000x10000), now large zoom-out are fast with overviews, but I find
> navigating in the image between 1/3 and 1/1 zoom factor is slow, and
> the viewer freeze for a moment before starting display tiles
> (initialization cost ?). I cannot compare with old 3.x.x DSDK because
> I haven't one.
> 
> Maybe one reason is that to read an RGB image I believe each tile is
> decompressed 3 time, one time per component... About the same problem
> with the GeoTIFF driver, Frank said that we can optimize this by
> reading interleaved data in one pass by using the
> GDALDataset::RasterIO() ; maybe we can also implement this for the
> MrSID Driver ? Maybe we can also try to remove the memcpy in the
> IReadBlock function and read directly data into the GDAL buffer.
> (Maybe there are some optimization to do using the MrSID API
> differently ?)

Well, I don't remember why I have used memcpy() and didn't made more
optimizations, but there are was several issues with DSDK and its API
was not stable at the time when the driver was written. There are
certainly ways to improve perfomance and it seems the time to do that
comes. I will look what can be done to make things better.

> I've a little question about JPEG2000 in MrSID : I see in
> Geo_DSDK-4.0.9.713/doc/README-3rdparty.txt that : "This application
> uses Kakadu software, licensed from Unisearch Software, Ltd." Is MrSID
> SDK use Kakadu for all its JPEG2000 support ?

I can't answer this question, but perhaps LizardTech developers which
read this list can do. It is interesting for me too.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From tjmitchell at riverside.bc.ca  Tue Jul 20 14:09:57 2004
From: tjmitchell at riverside.bc.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] ogrinfo -sql doesn't work with GML files?
In-Reply-To: <40FD576E.2060702@pobox.com>
Message-ID: <OFC9C1B773.181FE8CC-ON88256ED7.0063B5E7-88256ED7.0063C9A6@Riverside.bc.ca>

> I checked, and sure enough, I never implemented the spatial or attribute
> query capability in the GML driver.  I have incorporated it now in CVS.

Right on, thanks.  Have you aimed to have these capabilities in every 
driver?

Tyler

From warmerdam at pobox.com  Tue Jul 20 14:50:09 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] ogrinfo -sql doesn't work with GML files?
In-Reply-To: <OFC9C1B773.181FE8CC-ON88256ED7.0063B5E7-88256ED7.0063C9A6@Riverside.bc.ca>
References: <OFC9C1B773.181FE8CC-ON88256ED7.0063B5E7-88256ED7.0063C9A6@Riverside.bc.ca>
Message-ID: <40FD6961.1040108@pobox.com>

Tyler Mitchell wrote:
>>I checked, and sure enough, I never implemented the spatial or attribute
>>query capability in the GML driver.  I have incorporated it now in CVS.
> 
> 
> Right on, thanks.  Have you aimed to have these capabilities in every 
> driver?

Tyler,

Yes, ever driver should implement spatial and attribute queries, though most
just implement it in a mundane way within the GetNextFeature() call after
reading the features.  The lack of this in the GML driver was an unfortunate
ommission on my part.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Jul 20 16:40:46 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGC Spec getExteriorRing() for a Polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B3E@mailman.san.com>

Frank,
 
The OGC Spec says that the Polygon method getExteriorRing() should
return a LineString.  Just out of curiosity, why do you return a
LinearRing from your implementation OGRPolygon::getExteriorRing()?  It
would make sense to me that the spec is wrong and what you want is
always a ring.  Do you think the OGC spec is wrong.  The following is
from the spec:
 
OpenGIS Simple Features Specification for SQL, Revision1.1

2.1.10.1 Methods

ExteriorRing( ):LineString-Returns the exterior ring of this Polygon.

NumInteriorRing( ):Integer-Returns the number of interior rings in this
Polygon.

InteriorRingN(N:Integer):LineString-Returns the Nth interior ring for
this Polygon as a LineString.

 

OGR is:

OGRLinearRing *getExteriorRing();
00553     const OGRLinearRing *getExteriorRing() const;
00554     int         getNumInteriorRings() const;
00555     OGRLinearRing *getInteriorRing( int );
00556     const OGRLinearRing *getInteriorRing( int ) const;
 

Thanks,

Martin Chapman
Cell 303-885-1936
Office 303-495-6300 x326
mchapman@sanz.com
http://www.sanz.com <http://www.sanz.com/> 
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040720/2adc84bb/attachment.html
From werchowyna at pf.pl  Tue Jul 20 16:43:35 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] gdal/python
References: <006a01c46dd3$635bbca0$9ee163d9@podyadeck>
	<40FC86CD.3060904@pobox.com>
Message-ID: <000b01c46e9a$6d23d3e0$805d4cd5@podyadeck>

Hi Frank!

> I don't know what is up with the python configuration.  I gather you
> have some sort of non-standard python installation?  Do you have a
> /usr/lib/python2.3/config/Makefile file?  The python config code tries
> to find this to extract various build options from.

I'm using Mandrake 9.2 BlueHawk. I don't even have the
/usr/lib/python2.3/config folder (but plenty of other floders in the
/usr/lib/python2.3). I checked my urpmi database (all the rpms
on my CDs and the Madrake's ftp 'contrib' repository) with
"urpmf python -a python2.3/config"  which gave no result and
with "urpmf python -a Makefile" which gave as follows:

swig:/usr/share/doc/swig-1.3.19/Examples/python/callback/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/class/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/constants/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/enum/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/exception/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/exceptshadow/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/extend/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/funcattr/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/funcptr/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/funcptr2/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/functor/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/import/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/import_template/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/libffi/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/mpointer/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/multimap/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/operator/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/pointer/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/reference/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/shadow/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/simple/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/smartptr/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/std_vector/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/template/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/value/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/varargs/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/python/variables/Makefile
swig:/usr/share/doc/swig-1.3.19/Examples/test-suite/python/Makefile
pymol:/usr/lib/python2.2/site-packages/pymol/modules/chempy/tinker/Makefile
python-reportlab:/usr/lib/python2.3/reportlab/lib/Makefile.pre.in

Is any of these the one I need?

Besides I have also checked the python-2.3-3mdk.src.rpm where I've found

/Python-2.3/Makefile.pre.in
/Python-2.3/Demo/embed/Makefile
/Python-2.3/Demo/pysvr/Makefile
/Python-2.3/Doc/Makefile
/Python-2.3/Doc/Makefile.deps
/Python-2.3/Doc/info/Makefile
/Python-2.3/Doc/tools/sgmlconv/Makefile
/Python-2.3/Mac/MPW/Makefile
/Python-2.3/Mac/OSX/Makefile
/Python-2.3/Modules/expat/Makefile.in
/Python-2.3/PC/os2emx/Makefile
/Python-2.3/PC/os2vacpp/makefile
/Python-2.3/PC/os2vacpp/makefile.omk
/Python-2.3/RISCOS/Makefile
/Python-2.3/Tools/freeze/makemakefile.py
/Python-2.3/Tools/freeze/winmakemakefile.py

Any of these?

Do I have to build Python on my own?

What do I actually need the Python for in Gdal? Would Gdal build anyway if I
couldn't make Python cooperate and how far would the usability of Gdal be
limited if so?

> > Can somebody tell me BTW what options to pass to configure to optimise
> > the Fortran code (there is some in Gdal, right?)? I can't make it out of
> > the g77 info and man, as for an amateur the gcc man is much more
> > understandable I think.

> There is no FORTRAN code in GDAL.  I haven't even had many requests to
> build FORTRAN interfaces to GDAL.

Thanks. As I wrote I'm a complete beginner. I simply thought that since
there was g77 and fortran mentioned several times in the config.log there
must be a fortran code in Gdal :).

Maciek


From warmerdam at pobox.com  Tue Jul 20 18:08:02 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGC Spec getExteriorRing() for a Polygon
In-Reply-To: <ED3A48B9840E594890A2BC172D119465E63B3E@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D119465E63B3E@mailman.san.com>
Message-ID: <40FD97C2.3090207@pobox.com>

Chapman, Martin wrote:
> Frank,
>  
> The OGC Spec says that the Polygon method getExteriorRing() should 
> return a LineString.  Just out of curiosity, why do you return a 
> LinearRing from your implementation OGRPolygon::getExteriorRing()?  It 
> would make sense to me that the spec is wrong and what you want is 
> always a ring.  Do you think the OGC spec is wrong.  The following is 
> from the spec:

Martin,

Since a linearring is a subclass of linestring, a linearring is technically
a linestring.  I don't know why the Simple Features for SQL specifies
line string.  It seems kind of brain dead, and not something I'm going to
change OGR to adhere to.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Tue Jul 20 18:24:17 2004
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGC Spec getExteriorRing() for a Polygon
Message-ID: <ED3A48B9840E594890A2BC172D119465E63B3F@mailman.san.com>

Frank,

Ok, I agree, I was just curious why you did that.  According to the OGC,
the only difference is a that a LinearRing is both closed and simple,
whereas a LineString does not need to be closed or simple.  According to
OGC a Polygon consists of a set of LinearRings that make up its exterior
and interior
boundaries.  Thus, sounds like the OGC docs are incorrect and have
conflicting definitions.  Shall I inform the OGC board that their spec
is not to spec?....HA, just kidding.
 
Martin

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, July 20, 2004 4:08 PM
To: Chapman, Martin
Cc: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] OGC Spec getExteriorRing() for a Polygon


Chapman, Martin wrote:
> Frank,
>  
> The OGC Spec says that the Polygon method getExteriorRing() should
> return a LineString.  Just out of curiosity, why do you return a 
> LinearRing from your implementation OGRPolygon::getExteriorRing()?  It

> would make sense to me that the spec is wrong and what you want is 
> always a ring.  Do you think the OGC spec is wrong.  The following is 
> from the spec:

Martin,

Since a linearring is a subclass of linestring, a linearring is
technically a linestring.  I don't know why the Simple Features for SQL
specifies line string.  It seems kind of brain dead, and not something
I'm going to change OGR to adhere to.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From eduardo at consultoria.eti.br  Wed Jul 21 10:24:16 2004
From: eduardo at consultoria.eti.br (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] about HDF and netCDF support
Message-ID: <40FE7C90.70806@consultoria.eti.br>

Hi all,

I was compiling GDAL/OGR and analysing some configure options, when I 
found that
GDAL support HDF and netCDF formats.

Sorry, my ignorance, but what are these formats for?

I looked at them websites and seems that both are FREE formats,

but didn't understands their real purpose...or what kind of applications 
and data must use these formats.

thanks in advance.

-- 
Eduardo Patto Kanegae
http://www.consultoria.eti.br
UIN: 303747254

Treinamento em UMN MapServer - http://www.consultoria.eti.br/ptbr/?menuoption=mapserver
I Encontro Nacional de Usu?rios MapServer - http://mapserver.cttmar.univali.br/encontro2004
F?rum MapServer Brasil - http://mapserver.cttmar.univali.br/forum

***Fim da Mensagem / End of Message ***


From warmerdam at pobox.com  Wed Jul 21 10:35:32 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] about HDF and netCDF support
In-Reply-To: <40FE7C90.70806@consultoria.eti.br>
References: <40FE7C90.70806@consultoria.eti.br>
Message-ID: <40FE7F34.6040702@pobox.com>

Eduardo Patto Kanegae wrote:
> Hi all,
> 
> I was compiling GDAL/OGR and analysing some configure options, when I 
> found that
> GDAL support HDF and netCDF formats.
> 
> Sorry, my ignorance, but what are these formats for?
> 
> I looked at them websites and seems that both are FREE formats,
 >
> but didn't understands their real purpose...or what kind of applications 
> and data must use these formats.

Eduardo,

Like many file formats they can have a variety of applications and they are
both quite general purpose formats.  However, a brief answer closing over
complexities might be something like:

HDF - Primariliy used by NASA for distribution of various satellite data
products.  It is a complex and featureful format.

netCDF - Primarily in GDAL so we can easily export data in a form directly
usable in the GMT package.  The format is actually very general (not just
for raster data) but we only produce and consume a very specific profile
used in GMT for raster data.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mpg at lizardtech.com  Wed Jul 21 12:50:13 2004
From: mpg at lizardtech.com (Michael P. Gerlek)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] MrSID Driver v. 4.0.x overviews
Message-ID: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C2B0@sea-srv-ms1.lizardtech.com>

Julien and/or Andrey wrote:

> I' ve added overviews support in the new driver using MrSID DSDK v.
> 4.0.x and tested it (with OpenEV) under Windows with MrSID and
> JPEG2000 files ; and made minors modifications to update to the last
> DSDK "Geo_DSDK-4.0.9.713".

Thanks to Julien and Andrey their patchings!

PLUG: For those keeping score at home, this is our final, public 4.0
SDK release.  You can download it for free (click-through license) at
developer.lizardtech.com.


> I don't have the MrSID files other than 8 bit, do you have a samples? It
> will be enough for me to fix that bug.

...And I have way too many MrSID files that are other than 8 bit. :-(
I think there's at least shipping in the SDK examples directory now, if
not I will mail you one separately.


> Maybe one reason is that to read an RGB image I believe each tile is
> decompressed 3 time, one time per component... About the same problem
> with the GeoTIFF driver, Frank said that we can optimize this by
> reading interleaved data in one pass by using the
> GDALDataset::RasterIO() ; maybe we can also implement this for the
> MrSID Driver ? Maybe we can also try to remove the memcpy in the
> IReadBlock function and read directly data into the GDAL buffer.
> (Maybe there are some optimization to do using the MrSID API
> differently ?)

Yes, one scene read will decode all three bands at once (they are encoded
together, due to the RGB->YIQ color transform).

I think you can easily use the GDAL buffer instead of having to memcpy;
the LTISceneBuffer is designed specifically for this kind of thing.  What
is the format/organization of the GDAL buffer?


> I've a little question about JPEG2000 in MrSID : I see in
> Geo_DSDK-4.0.9.713/doc/README-3rdparty.txt that : "This application
> uses Kakadu software, licensed from Unisearch Software, Ltd." Is MrSID
> SDK use Kakadu for all its JPEG2000 support ?

Yes, the 4.0 release uses Kakadu internally (a modified 4.2 kernel).
I've been happy with it -- the performance is good and the low-level
interfaces are very, umm, "comprehensive".  However, our public SDK
are designed to be "codec-neutral" and we may choose to swap out the
use of Kakadu in the future.

Please note that our SDK will not (yet!) support all Part 1 JP2 files.
In particular, we don't support images that:
  - use >16 bits per component
  - use funky colourspaces (none, gray, and RGB are all okay)
  - have components of differing sizes
  - have components aligned to different grid sizes or origins
I doubt GDAL would support such images anyway, though..?

-mpg

-----------------------------------
Michael P. Gerlek
Software Architect / MrSID team
mpg/AT/lizardtech.com
LizardTech, a Celartem company
Seattle, Washington


From dron at ak4719.spb.edu  Wed Jul 21 13:32:50 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] MrSID Driver v. 4.0.x overviews
In-Reply-To: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C2B0@sea-srv-ms1.lizardtech.com>
References: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C2B0@sea-srv-ms1.lizardtech.com>
Message-ID: <20040721173250.GB11380@ak4719.spb.edu>

Hi, Michael,

Thank you for your comments!

On Wed, Jul 21, 2004 at 09:50:13AM -0700, Michael P. Gerlek wrote:
> > Maybe one reason is that to read an RGB image I believe each tile is
> > decompressed 3 time, one time per component... About the same
> > problem with the GeoTIFF driver, Frank said that we can optimize
> > this by reading interleaved data in one pass by using the
> > GDALDataset::RasterIO() ; maybe we can also implement this for the
> > MrSID Driver ? Maybe we can also try to remove the memcpy in the
> > IReadBlock function and read directly data into the GDAL buffer.
> > (Maybe there are some optimization to do using the MrSID API
> > differently ?)
> 
> Yes, one scene read will decode all three bands at once (they are
> encoded together, due to the RGB->YIQ color transform).
> 
> I think you can easily use the GDAL buffer instead of having to
> memcpy; the LTISceneBuffer is designed specifically for this kind of
> thing.  What is the format/organization of the GDAL buffer?

I'm not sure that we can use LTISceneBuffer directly... The buffer
is sized to hold data for the single band, so if we read 8-bit image
using X*Y blocks it will be X*Y bytes long. But it is not enough for
LTISceneBuffer, because it wants to decode all image bands, so the buffer
size should be X*Y*nBands bytes. That's why I'm using separate buffer
created by the LTISceneBuffer and copy the date into GDAL buffer
afterwards.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dem at acri-st.fr  Wed Jul 21 16:51:01 2004
From: dem at acri-st.fr (dem@acri-st.fr)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] MrSID Driver v. 4.0.x overviews
In-Reply-To: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C2B0@sea-srv-ms1.lizardtech.com>
References: <B78A4DC4AD9EE14FB014E9444BD2D30EF8C2B0@sea-srv-ms1.lizardtech.com>
Message-ID: <1090443061.40fed73566914@mail.acri.fr>

Hi Michael,

> > I don't have the MrSID files other than 8 bit, do you have a samples? It
> > will be enough for me to fix that bug.
>
> ...And I have way too many MrSID files that are other than 8 bit. :-(
> I think there's at least shipping in the SDK examples directory now, if
> not I will mail you one separately.

I see only 8 bit .sid datas in the example directory ; maybe we should put
various MrSID example files (different bits per samples, color interpretations,
..) on remotesensing FTP (in /gdal/data/mrsid) ? (example files on
remotesensing FTP have to be small files and without patent I believe...)

> > Maybe one reason is that to read an RGB image I believe each tile is
> > decompressed 3 time, one time per component... About the same problem
> > with the GeoTIFF driver, Frank said that we can optimize this by
> > reading interleaved data in one pass by using the
> > GDALDataset::RasterIO() ; maybe we can also implement this for the
> > MrSID Driver ? Maybe we can also try to remove the memcpy in the
> > IReadBlock function and read directly data into the GDAL buffer.
> > (Maybe there are some optimization to do using the MrSID API
> > differently ?)
>
> Yes, one scene read will decode all three bands at once (they are encoded
> together, due to the RGB->YIQ color transform).

Yes but GDAL Data Model and API allows to read only "band per band" from a
dataset ; so to read an RGB MrSID File you have to read the 3 bands separately
; this implies 3 redundant decompressions phases of the MrSID data (and each
MrSID DSDK decompression phases decompress the 3 bands...).

> Please note that our SDK will not (yet!) support all Part 1 JP2 files.
> In particular, we don't support images that:
>   - use >16 bits per component
>   - use funky colourspaces (none, gray, and RGB are all okay)
>   - have components of differing sizes
>   - have components aligned to different grid sizes or origins
> I doubt GDAL would support such images anyway, though..?

GDAL support these datatypes : Byte, UInt16, Int16, UInt32, Int32, Float32,
Float64, and the complex types CInt16, CInt32, CFloat32, and CFloat64
but not all drivers support all of them...

Best Regards,

Julien


----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From jpalmer at paradise.net.nz  Thu Jul 22 05:09:40 2004
From: jpalmer at paradise.net.nz (Jeremy Palmer)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Mapinfo performance - tabfile spatial index
Message-ID: <20040722090938.59819AE416@smtp-3.paradise.net.nz>

Hi,

I'm having problems with the performance of gdal created MapInfo tab files
from a postgis database. It seems that the tab file does not get spatially
index upon creation... I used OGR2OGR to extract geometries from a postgis
database. The source postgis table has a 'geometry' type. The command I used
to create the table was:

ogr2ogr -f "Mapinfo File" parcel PG:dbname=testgis -sql "SELECT id
translate(shape, 160,0,0) FROM crs_parcel" -nln parcel -a_srs "EPSG:4167"

My question is: I'm I doing something wrong with the creation of the file,
or is it just that the MapInfo driver does not support spatial indexing?

Thanks Jeremy



From jbensabat at ewre.com  Thu Jul 22 09:01:10 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] what about OGRCircle , OGRArc and OGREllipse
Message-ID: <cdoaki$9lp$1@sea.gmane.org>

hello to all
I have seen the need to draw arcs, ellipses and circles using ogr. The
problem is that these
geometric features are not directly supported by OGR. There seems to be no
problem adding
them so my question is why these are not supported. Is there any reason
(conceptual or practical
one) ?
Thanks
jac




From dmorissette at dmsolutions.ca  Thu Jul 22 08:54:14 2004
From: dmorissette at dmsolutions.ca (Daniel Morissette)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Mapinfo performance - tabfile spatial index
In-Reply-To: <20040722090938.59819AE416@smtp-3.paradise.net.nz>
References: <20040722090938.59819AE416@smtp-3.paradise.net.nz>
Message-ID: <40FFB8F6.6010003@dmsolutions.ca>

Jeremy Palmer wrote:
> Hi,
> 
> I'm having problems with the performance of gdal created MapInfo tab files
> from a postgis database. It seems that the tab file does not get spatially
> index upon creation... I used OGR2OGR to extract geometries from a postgis
> database. The source postgis table has a 'geometry' type. The command I used
> to create the table was:
> 
> ogr2ogr -f "Mapinfo File" parcel PG:dbname=testgis -sql "SELECT id
> translate(shape, 160,0,0) FROM crs_parcel" -nln parcel -a_srs "EPSG:4167"
> 
> My question is: I'm I doing something wrong with the creation of the file,
> or is it just that the MapInfo driver does not support spatial indexing?
> 

I don't think you're doing something wrong. The MapInfo TAB driver does 
create a spatial index but it is not always properly balanced, that 
could explain the poor performance in some cases. Unfortunately there is 
not much you can do about this, unless you feel like spending time 
understanding and improving the generation of the spatial index in the 
code (or are able to fund someone to do it).

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------


From warmerdam at pobox.com  Thu Jul 22 09:19:09 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] what about OGRCircle , OGRArc and OGREllipse
In-Reply-To: <cdoaki$9lp$1@sea.gmane.org>
References: <cdoaki$9lp$1@sea.gmane.org>
Message-ID: <40FFBECD.4000200@pobox.com>

Jacob Bensabat wrote:
> hello to all
> I have seen the need to draw arcs, ellipses and circles using ogr. The
> problem is that these
> geometric features are not directly supported by OGR. There seems to be no
> problem adding
> them so my question is why these are not supported. Is there any reason
> (conceptual or practical
> one) ?

Jacob,

Basically, they aren't there because they aren't part of the simple features
geometry model, though they do have obvious (and intended) places to fit as
add-ons to that geometry model.  While I wouldn't necessarily mind having
OGR classes for them, it is important to note that alot of stuff wouldn't
work properly for them.  For instance, there would presumably be hardly
any drivers that would support them.  Also, translation to WKT and WKB would
not be compatible with stuff like GEOS or PostGIS.

Basically, my concern is that they wouldn't be well supported and that in many
cases it would be better to have just converted them into polyline or polygon
approximations.

An important step in any system design is coming up with a data model.   I
chose the OpenGIS Simple Features geometry model as a basis for OGR and it
has provided me with a great deal of leverage in terms of compatibility with
other systems.

Of course it does not lend itself to accurate or efficient representation of
some feature from CAD oriented systems.  However, that hasn't been a huge issue
for me till this point.

In short, if you are interested I wouldn't necessarily mind having classes for
ellipse, circle and so on, but I would want to include big disclaimers on them
that they are not widely supported.  Furthermore, I would likely not want to
make drivers like DGN actually return these geometries even where it would make
sense as they would not be translatable to other drivers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From uli.mueller at gmx.ch  Tue Jul 20 19:27:29 2004
From: uli.mueller at gmx.ch (uli)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] xyz to gdal
Message-ID: <cdk9p3$hgf$1@sea.gmane.org>

Hi
I need to convert lots of ASCII XYZ files to GDAL. Is there any utility 
to accomplish this in batch mode? I would like not having to go for any 
large GIS packages like GRASS. I have found gdal2xyz.py, but I would 
need it the other way round.
Uli



From jnielsen at aero-graphics.com  Thu Jul 22 10:51:53 2004
From: jnielsen at aero-graphics.com (Jason M. Nielsen)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] xyz to gdal
In-Reply-To: <cdk9p3$hgf$1@sea.gmane.org>
References: <cdk9p3$hgf$1@sea.gmane.org>
Message-ID: <1090507913.40ffd489b2b99@www.agi-lan.com>

Quoting uli <uli.mueller@gmx.ch>:

> Hi
> I need to convert lots of ASCII XYZ files to GDAL. Is there any utility 
> to accomplish this in batch mode? I would like not having to go for any 
> large GIS packages like GRASS. I have found gdal2xyz.py, but I would 
> need it the other way round.
> Uli
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev
> 


If you can get the xyz data in an ArcGRID (AAIGrid) format you can easily
transform that to others such as img.

For example:

gdal_translate foo.AAIGrid foo.img -of HFA

It wouldnt be too difficult to make a program translate the xyz to the arcgrid.
    Just sort into rows of Y(northing) by columns X(easting) starting with max Y
min X at the beginning. For each X in Y write out the elevations then start a
new line on each new Y of elevations. Of course if you do not have NO_DATA
points represented in the xyz data then you will have to watch for those missing
entities and make sure to add them in the arcgrid file otherwise your data will
be "skewed". ie: Current Y exceeds previous Y by more than cellsize(distance
between each grid point). The same applies to X.



From uli.mueller at gmx.ch  Thu Jul 22 11:36:59 2004
From: uli.mueller at gmx.ch (uli)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] xyz to gdal
In-Reply-To: <1090507913.40ffd489b2b99@www.agi-lan.com>
References: <cdk9p3$hgf$1@sea.gmane.org>
	<1090507913.40ffd489b2b99@www.agi-lan.com>
Message-ID: <40FFDF1B.3090105@gmx.ch>

In the meantime I have done exactly what Jason Nielsen proposed by means 
of an awk script. Although it is thought only for GaussKrueger-System 
and 5-digit ("%5.1f") z-values, it may be easily adapted to other systems.
Frank: It would however be nice to have this format in GDAL, maybe with 
support for irregularly spaced points...
Uli
-- 
geOps GeoInformatics
Stephanienstr. 4
D-79100 Freiburg

###############################################################################
# xyz2ascii.awk
#
# Purpose:  AWK script to convert xyz ASCII data to ArcInfo-ASCII-Grid
#           Expects three space-delimited columns with xyz data
#           Expects coordinates with seven relevant digits (originally 
made for German Gauss Krueger system...) and z-values with 5 digits.
#           Only for regularly spaced grids
#           Accounts for missing data
#           call with parameters e.g. -v ncols=500 -v xmin=2600000 -v 
ymin=5500000 -v cellsize=20 -v no_data=-9999
# Author:   Uli M?ller, uli@geops.de
#
###############################################################################
# This library is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
###############################################################################

#create header
BEGIN {

	print ("ncols " ncols);
	print ("nrows " ncols);
	print ("xllcorner " xmin);
	print ("yllcorner " ymin);
	print ("cellsize " cellsize);
	print ("nodata_value " no_data);	
#create empty grid	
   for (y = 1; y <= ncols; y++)
     {ycoord=ymin+((y-1)*cellsize);
     	for (x = 1; x <= ncols; x++)
     	{ xcoord=xmin+((x-1)*cellsize);
     		grid[substr(xcoord,1,7),substr(ycoord,1,7)] = no_data;
     }
   }
}
#fill grid with data where available
{
  	grid[substr($1,1,7),substr($2,1,7)] = $3;
}
#write data from top to bottom row
END  {
   for (y = ncols; y >= 1; y--)
     {ycoord=ymin+((y-1)*cellsize);
     	for (x = 1; x <= ncols; x++)
     	{ xcoord=xmin+((x-1)*cellsize);
     		#printf"%7.0f ",xcoord;
     		#printf"%7.0f ",ycoord;
     		if (x!=ncols) {printf"%5.1f ",grid[xcoord,ycoord]} else \
     		{printf"%5.1f\n",grid[xcoord,ycoord]}
     }
   }

}



Jason M. Nielsen wrote:

> Quoting uli <uli.mueller@gmx.ch>:
> 
> 
>>Hi
>>I need to convert lots of ASCII XYZ files to GDAL. Is there any utility 
>>to accomplish this in batch mode? I would like not having to go for any 
>>large GIS packages like GRASS. I have found gdal2xyz.py, but I would 
>>need it the other way round.
>>Uli
>>
>>
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@xserve.flids.com
>>http://xserve.flids.com/mailman/listinfo/gdal-dev
>>
> 
> 
> 
> If you can get the xyz data in an ArcGRID (AAIGrid) format you can easily
> transform that to others such as img.
> 
> For example:
> 
> gdal_translate foo.AAIGrid foo.img -of HFA
> 
> It wouldnt be too difficult to make a program translate the xyz to the arcgrid.
>     Just sort into rows of Y(northing) by columns X(easting) starting with max Y
> min X at the beginning. For each X in Y write out the elevations then start a
> new line on each new Y of elevations. Of course if you do not have NO_DATA
> points represented in the xyz data then you will have to watch for those missing
> entities and make sure to add them in the arcgrid file otherwise your data will
> be "skewed". ie: Current Y exceeds previous Y by more than cellsize(distance
> between each grid point). The same applies to X.
> 
> 
> 



From dron at ak4719.spb.edu  Thu Jul 22 15:31:13 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] xyz to gdal
In-Reply-To: <40FFDF1B.3090105@gmx.ch>
References: <cdk9p3$hgf$1@sea.gmane.org>
	<1090507913.40ffd489b2b99@www.agi-lan.com>
	<40FFDF1B.3090105@gmx.ch>
Message-ID: <20040722193113.GA6760@ak4719.spb.edu>

On Thu, Jul 22, 2004 at 05:36:59PM +0200, uli wrote:
> In the meantime I have done exactly what Jason Nielsen proposed by
> means of an awk script. Although it is thought only for
> GaussKrueger-System and 5-digit ("%5.1f") z-values, it may be easily
> adapted to other systems. Frank: It would however be nice to have this
> format in GDAL, maybe with support for irregularly spaced points...

I should note that there are many methods of regularization of the
irregular points. Moreover, those methods are closely related to the
nature of your data and to the results you are are want to get. So it is
not so trivial task. If we want to prepare the regularzation module we
should implement a bunch of the different methods, at least kriging,
tringulation, inverse distance --- those are come to mind in first of all.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Thu Jul 22 15:56:42 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] xyz to gdal
In-Reply-To: <20040722193113.GA6760@ak4719.spb.edu>
References: <cdk9p3$hgf$1@sea.gmane.org>	<1090507913.40ffd489b2b99@www.agi-lan.com>	<40FFDF1B.3090105@gmx.ch>
	<20040722193113.GA6760@ak4719.spb.edu>
Message-ID: <41001BFA.6090802@pobox.com>

Andrey Kiselev wrote:
> On Thu, Jul 22, 2004 at 05:36:59PM +0200, uli wrote:
> 
>>In the meantime I have done exactly what Jason Nielsen proposed by
>>means of an awk script. Although it is thought only for
>>GaussKrueger-System and 5-digit ("%5.1f") z-values, it may be easily
>>adapted to other systems. Frank: It would however be nice to have this
>>format in GDAL, maybe with support for irregularly spaced points...
> 
> 
> I should note that there are many methods of regularization of the
> irregular points. Moreover, those methods are closely related to the
> nature of your data and to the results you are are want to get. So it is
> not so trivial task. If we want to prepare the regularzation module we
> should implement a bunch of the different methods, at least kriging,
> tringulation, inverse distance --- those are come to mind in first of all.

Folks,

Andrey is quite right and this is why I'm not keen to get into the realm
of point to raster interpolation without some substantial funding.

I will add that GRASS does have a variety of point interpolation methods,
though I realize the original request didn't want to go to something that
complex.

I wrote a couple of point interpolators within OpenEV (inverse distance
and a few variants) but they don't necessarily work efficiently for large
numbers of points.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mhodder at highermappingsolutions.com  Thu Jul 22 17:06:12 2004
From: mhodder at highermappingsolutions.com (Martin Hodder)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Mapinfo performance - tabfile spatial index
In-Reply-To: <40FFB8F6.6010003@dmsolutions.ca>
Message-ID: <20040722210622.A012F156616@xserve.flids.com>


If you have MapInfo you could export to MIF and then get MapInfo to import
the file. MapInfo will then build the spatial index correctly

Regards

Martin
-----Original Message-----
From: gdal-dev-bounces@xserve.flids.com
[mailto:gdal-dev-bounces@xserve.flids.com] On Behalf Of Daniel Morissette
Sent: 22 July 2004 13:54
To: Jeremy Palmer
Cc: gdal-dev@xserve.flids.com
Subject: Re: [Gdal-dev] Mapinfo performance - tabfile spatial index

Jeremy Palmer wrote:
> Hi,
> 
> I'm having problems with the performance of gdal created MapInfo tab files
> from a postgis database. It seems that the tab file does not get spatially
> index upon creation... I used OGR2OGR to extract geometries from a postgis
> database. The source postgis table has a 'geometry' type. The command I
used
> to create the table was:
> 
> ogr2ogr -f "Mapinfo File" parcel PG:dbname=testgis -sql "SELECT id
> translate(shape, 160,0,0) FROM crs_parcel" -nln parcel -a_srs "EPSG:4167"
> 
> My question is: I'm I doing something wrong with the creation of the file,
> or is it just that the MapInfo driver does not support spatial indexing?
> 

I don't think you're doing something wrong. The MapInfo TAB driver does 
create a spatial index but it is not always properly balanced, that 
could explain the poor performance in some cases. Unfortunately there is 
not much you can do about this, unless you feel like spending time 
understanding and improving the generation of the spatial index in the 
code (or are able to fund someone to do it).

Daniel
-- 
------------------------------------------------------------
  Daniel Morissette               dmorissette@dmsolutions.ca
  DM Solutions Group              http://www.dmsolutions.ca/
------------------------------------------------------------

_______________________________________________
Gdal-dev mailing list
Gdal-dev@xserve.flids.com
http://xserve.flids.com/mailman/listinfo/gdal-dev





From jicicuendez at gmv.es  Fri Jul 23 10:32:50 2004
From: jicicuendez at gmv.es (Juan Cicuendez)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Problems when warping
Message-ID: <loom.20040723T161943-650@post.gmane.org>

Hi everybody,

I am trying to change the projection of an RGB scanned map. This is my first 
experience with GDAL and I followed the instructions of the Warping tutorial. 
In order to process all the three bands I set psWarpOptions->nBandCount = 0;
I finally obtained the geotiff file but when I try to visualised it from ERDAS 
it only recognises the first band, however if I try from ENVI it goes fine an 
sees all the bands. Looking at the image with windows Imaging application, it 
looks very strange and this could be a problem with the interleaving of the 
data. Has anybody come across this problem before? Does anybody know how to fix 
this problems in order that the files can be visualised from ERDAS?

I would appreciate if anyone could give me hand, I tried many things but 
nothing seemed to work.

Thanks in advance,
Juan 




From warmerdam at pobox.com  Fri Jul 23 14:09:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Problems when warping
In-Reply-To: <loom.20040723T161943-650@post.gmane.org>
References: <loom.20040723T161943-650@post.gmane.org>
Message-ID: <4101545F.2030606@pobox.com>

Juan Cicuendez wrote:
> Hi everybody,
> 
> I am trying to change the projection of an RGB scanned map. This is my first 
> experience with GDAL and I followed the instructions of the Warping tutorial. 
> In order to process all the three bands I set psWarpOptions->nBandCount = 0;
> I finally obtained the geotiff file but when I try to visualised it from ERDAS 
> it only recognises the first band, however if I try from ENVI it goes fine an 
> sees all the bands. Looking at the image with windows Imaging application, it 
> looks very strange and this could be a problem with the interleaving of the 
> data. Has anybody come across this problem before? Does anybody know how to fix 
> this problems in order that the files can be visualised from ERDAS?
> 
> I would appreciate if anyone could give me hand, I tried many things but 
> nothing seemed to work.

Juan,

By default GDAL creates TIFF files with PLANARCONFIG_SEPERATE (band interleaved)
but I have observed some versions of Erdas tools and other applications having
problems with this.  You can pass the INTERLEAVE=PIXEL creation option to the
GTiff driver when creating a new TIFF file to create a pixel interleaved file.

Of course, if you could provide a smallish sample file demonstrating the
problem it would be easier to determine if this is the issue.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sschnick at yahoo.com  Fri Jul 23 16:25:30 2004
From: sschnick at yahoo.com (Steve Schnick)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGR ODBC Virtual Data Source (VRT) with Oracle View
Message-ID: <20040723202530.64365.qmail@web40307.mail.yahoo.com>

I have successfully setup the OGR Virtual Data Source for an Oracle table. I then created an
Oracle View using some of the same columns, but I cannot get OGR to open this view.

Has this been tried before? Any ideas on how to get it work?

Thanks.

Steve


	
		
__________________________________
Do you Yahoo!?
Vote for the stars of Yahoo!'s next ad campaign!
http://advision.webevents.yahoo.com/yahoo/votelifeengine/

From sschnick at yahoo.com  Fri Jul 23 16:43:35 2004
From: sschnick at yahoo.com (Steve Schnick)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGR ODBC Virtual Data Source (VRT) Select with SQL
	statement
Message-ID: <20040723204335.96309.qmail@web40305.mail.yahoo.com>

Using an .ovf file similar to the one below, I can get the OGR VRT to work, but only if the
OGRVRTLayer name is the same as one of the tables in my database.

<OGRVRTDataSource>
    <OGRVRTLayer name="mylayer">
        <SrcDataSource>ODBC:user/pass@DSN</SrcDataSource> 
 	<SrcLayer>table</SrcLayer> 
	<GeometryType>wkbPoint</GeometryType> 
        <LayerSRS>WGS84</LayerSRS>
	<GeometryField encoding="PointFromColumns" x="x" y="y"/> 
    </OGRVRTLayer>
</OGRVRTDataSource>

If I try the .ovf below, it will work but, like before, only if the name of the layer is the same
as a table. However, it appears that the SrcSQL statement is not being applied because I always
get all of the features in the layer. Even if I enter garbage text in the SQL, it still returns
all records.

<OGRVRTDataSource>
    <OGRVRTLayer name="mylayer">
        <SrcDataSource>ODBC:user/pass@DSN</SrcDataSource> 
 	<SrcSQL>SELECT * FROM table WHERE time LIKE SUBSTR("%time%", 0, 4)</SrcSQL> 
	<GeometryType>wkbPoint</GeometryType> 
        <LayerSRS>WGS84</LayerSRS>
	<GeometryField encoding="PointFromColumns" x="x" y="y"/> 
    </OGRVRTLayer>
</OGRVRTDataSource>

Can anyone shed some light on this for me?

Thanks.

Steve


	
		
__________________________________
Do you Yahoo!?
Vote for the stars of Yahoo!'s next ad campaign!
http://advision.webevents.yahoo.com/yahoo/votelifeengine/

From lorenzo.moretti at bologna.enea.it  Fri Jul 23 18:14:24 2004
From: lorenzo.moretti at bologna.enea.it (Lorenzo Moretti)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Built gdal with python support - error
Message-ID: <a06100400bd273b9e507d@[81.211.211.104]>

Hi everybody

I want to build a Python support for Gdal on OS X.
Python version is 2.3.

I have this error message in make:

(cd pymod; make)
GNUmakefile:35: warning: overriding commands for target `_gdalmodule.la'
GNUmakefile:29: warning: ignoring old commands for target `_gdalmodule.la'
/bin/sh ../libtool --mode=compile gcc   -Wall  -O3 -fno-common 
-no-cpp-precomp -DCPL_MULTIPROC_PTHREAD   -I../port -I../gcore 
-I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include   -c -o 
gdal_wrap.o gdal_wrap.c
  gcc -Wall -O3 -fno-common -no-cpp-precomp -DCPL_MULTIPROC_PTHREAD 
-I../port -I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include -c gdal_wrap.c 
-fno-common -DPIC -o .libs/gdal_wrap.o
In file included from 
/Library/Frameworks/Python.framework/Versions/Current/include/python2.3/Python.h:70,
                  from gdal_wrap.c:44:
/Library/Frameworks/Python.framework/Versions/Current/include/python2.3/objimpl.h:255: 
warning: use of `long double' type; its size may change in a future 
release
/Library/Frameworks/Python.framework/Versions/Current/include/python2.3/objimpl.h:255: 
warning: (Long double usage is reported only once for each file.
/Library/Frameworks/Python.framework/Versions/Current/include/python2.3/objimpl.h:255: 
warning: To disable this warning, use -Wno-long-double.)
gdal_wrap.c: In function `ptrset':
gdal_wrap.c:868: warning: unused variable `obj'
gdal_wrap.c: In function `ptradd':
gdal_wrap.c:954: warning: `obj' might be used uninitialized in this function
gdal_wrap.c: At top level:
gdal_wrap.c:211: warning: `SWIG_addvarlink' defined but not used
  gcc -Wall -O3 -fno-common -no-cpp-precomp -DCPL_MULTIPROC_PTHREAD 
-I../port -I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include -c gdal_wrap.c -o 
gdal_wrap.o >/dev/null 2>&1
/bin/sh ../libtool --mode=compile g++   -Wall  -O3 -fno-common 
-no-cpp-precomp -Wno-long-double -DCPL_MULTIPROC_PTHREAD   -I../port 
-I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include   -c -o 
numpydataset.o numpydataset.cpp
  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double 
-DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include -c 
numpydataset.cpp  -fno-common -DPIC -o .libs/numpydataset.o
  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double 
-DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include -c 
numpydataset.cpp -o numpydataset.o >/dev/null 2>&1
/bin/sh ../libtool --mode=compile g++   -Wall  -O3 -fno-common 
-no-cpp-precomp -Wno-long-double -DCPL_MULTIPROC_PTHREAD   -I../port 
-I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include   -c -o 
gdalnumeric.o gdalnumeric.cpp
  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double 
-DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include -c 
gdalnumeric.cpp  -fno-common -DPIC -o .libs/gdalnumeric.o
  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double 
-DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I/Library/Frameworks/Python.framework/Versions/Current/include/python2.3 
-I../port -I/usr/local/grasslib -I/usr/local/grasslib/include 
-I/usr/local/grasslib -I/usr/local/grasslib/include -c 
gdalnumeric.cpp -o gdalnumeric.o >/dev/null 2>&1
/bin/sh ../libtool --mode=link  g++ gdal_wrap.lo numpydataset.lo 
gdalnumeric.lo 
-L/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3 
-L/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3 
../libgdal.la -o _gdalmodule.la \
         -rpath 
/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3/site-packages 
\
         -no-undefined \
         -avoid-version \
         -module
g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle 
.libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o 
-L/usr/local/pgsql/lib /usr/local/grasslib/lib/libdl.dylib 
/usr/local/grasslib/lib/libjpeg.dylib 
/usr/local/grasslib/lib/libodbc.dylib -L/usr/local/grasslib/lib 
-L/usr/local/grasslib /usr/local/grasslib/lib/libproj.dylib 
-L/usr/local/grasslib/src 
-L/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3 
../.libs/libgdal.dylib
ld: Undefined symbols:
_PyArg_Parse
_PyArg_ParseTuple
_PyDict_New
_PyDict_Next
_PyDict_SetItem
_PyDict_Type
_PyErr_Clear
_PyErr_SetString
_PyEval_CallObjectWithKeywords
_PyExc_MemoryError
_PyExc_NameError
_PyExc_TypeError
_PyExc_ValueError
_PyFloat_AsDouble
_PyFloat_FromDouble
_PyInt_AsLong
_PyInt_FromLong
_PyInt_Type
_PyList_New
_PyList_SetItem
_PyList_Size
_PyList_Type
_PyModule_GetDict
_PyObject_AsWriteBuffer
_PyString_AsString
_PyString_FromString
_PyString_FromStringAndSize
_PyString_Type
_PyTuple_Size
_PyTuple_Type
_PyType_IsSubtype
_PyType_Type
_Py_BuildValue
_Py_InitModule4
__Py_NoneStruct
make[1]: *** [_gdalmodule.la] Error 1
make: *** [py-module] Error 2


There is a problem in gdalwarp.c with some variables...
Thanx for help

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040724/4bcb89e5/attachment.html
From denzel1812 at yahoo.com.cn  Sat Jul 24 06:03:21 2004
From: denzel1812 at yahoo.com.cn (=?gb2312?q?Denzel?=)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] why have warning message when building GDAL-1.2.0 on
	windows ?
Message-ID: <20040724100321.59762.qmail@web15307.mail.bjs.yahoo.com>

Hi

  I compile gdal-1.2.0 on windows2000,it seems some
warning message?!

My Server: Windows2000 advance Server (with sp4) 
Visual Studio 6 (with sp5).And I have compile
zlib-1.2.1 in the directory c:\projects\zlib

  my gdal compile step:

(1)download gdal-1.2.0.tar.gz
(2)unzip it to c:\projects\gdal
(3)edit nmake.opt(you can see it below ,while I paste
the content of nmake.opt)
Edit c:\projects\gdal\nmake.opt at 
Line 6:
GDAL_HOME = "C:\projects\gdal"
Line 33:
VCDIR   = 	c:\Program Files\Microsoft Visual
Studio\VC98



(3)run command:vcvars32.bat
(4)run command:nmake /f makefile.vc >gdal-1.2.0.log
(you can see below,I paste the content of nmake.opt)

   Why I get these warning message? Thanks!!

Here is some  log file gdal-1.2.0.log I get it when
compile the gdal-1.2.0

----------------------------------------------
avc_e00read.c
avc_e00read.c(635) : warning C4047: '==' : 'int '
differs in levels of indirection from 'void *'


tif_overview.c
tif_overview.c(155) : warning C4761: integral size
mismatch in argument; conversion supplied


tif_fax3sm.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_getimage.c
tif_getimage.c
tif_getimage.c(2036) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2037) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2038) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2039) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2040) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2041) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2077) : warning C4550: expression
evaluates to a function which is missing an argument
list


..\..\jpeg\libjpeg\jmorecfg.h(162) : warning C4142:
benign redefinition of type
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_flush.c


tif_version.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_warning.c
tif_warning.c



gdal_translate.cpp
gdal_translate.cpp(778) : warning C4508: 'main' :
function should return a value; 'void' return type
assumed
   Creating library gdal_translate.lib and object
gdal_translate.exp

 Creating library gdal_translate.lib and object
gdal_translate.exp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdalinfo.c  ..\gdal_i.lib  /link 
gdalinfo.c
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdaladdo.cpp  ..\gdal_i.lib  /link

gdaladdo.cpp
gdaladdo.cpp(133) : warning C4508: 'main' : function
should return a value; 'void' return type assumed
   Creating library gdaladdo.lib and object
gdaladdo.exp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdalwarp.cpp  ..\gdal_i.lib  /link

gdalwarp.cpp
gdalwarp.cpp(521) : warning C4508: 'main' : function
should return a value; 'void' return type assumed






_________________________________________________________
Do You Yahoo!?
150MP3
http://music.yisou.com/

http://image.yisou.com
100
http://cn.rd.yahoo.com/mail_cn/tag/100m/*http://cn.promo.yahoo.com/minisite/100m/

From alexamici at fastwebnet.it  Sat Jul 24 16:14:59 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Built gdal with python support - error
In-Reply-To: <a06100400bd273b9e507d@[81.211.211.104]>
References: <a06100400bd273b9e507d@[81.211.211.104]>
Message-ID: <200407242214.59832.alexamici@fastwebnet.it>


Lorenzo,

On Saturday 24 July 2004 00:14, Lorenzo Moretti wrote:
> I want to build a Python support for Gdal on OS X.
> Python version is 2.3.
>
> I have this error message in make:

yes, this is a known and yet unresolved bug... (but see below)

> (cd pymod; make)

[snip]

there are at least two old threads on the subject, where you can get a bit 
more background, the more interesting is the one with subject: Python Module 
Build in april this year.

you may try the following:
edit the setup.py script in the root directory changing:
LIBRARY_DIRS = ["./libs"]
to
LIBRARY_DIRS = ["./.libs"]
on line 69 (yes, this was a brain-not-found kind of error on my part back in 
april... sigh! and i think i don't have cvs write access anymore).

then:
$ ./configure <...> --without-python 
$ make 
$ python setup.py build
$ su root "python setup.py install"

please report to the list if this finally works.

cheers,
alessandro

-- 
Alessandro Amici - Responsabile tecnico
B-Open Solutions srl - Via Casilina 3/T - 00182 Roma
Tel: +39-06-978450-62 - Fax: +39-06-978450-01

From zak-ms at hoppsan.org  Sun Jul 25 12:05:55 2004
From: zak-ms at hoppsan.org (Zak James)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Built gdal with python support - error
In-Reply-To: <a06100400bd273b9e507d@[81.211.211.104]>
References: <a06100400bd273b9e507d@[81.211.211.104]>
Message-ID: <82B425A1-DE54-11D8-B64D-000D933576F4@hoppsan.org>

I recently built gdal's python support on OS X 10.3 (with the OS  
supplied Python 2.3) by relying on the apple compiler's support for  
frameworks.

After you configure --without-python, edit the python section of  
GDALMake.opt like so:

PYTHON_INCLUDES =  
-I/System/Library/Frameworks/Python.framework/Versions/2.3/include/ 
python2.3
PYTHON_LIBS = -framework Python
PYTHON_CFLAGS =
PYTHON = yes

and run make. The only other problem seems to be that the shared  
library is not created as a bundle so after everything is built, you  
need to build the python module using something like:

  g++ -bundle -flat_namespace gdal_wrap.o numpydataset.o gdalnumeric.o  
-L.. -lgdal -framework Python -ljpeg -lpng -lz -ldl -o _gdalmodule.so

If you run otool -L on the .so file, you can verify that it is using  
the appropriate libraries.

zak
--
Zak James
Applications and Software Development
DM Solutions Group Inc.
http://www.dmsolutions.ca


On Jul 23, 2004, at 6:14 PM, Lorenzo Moretti wrote:

> Hi everybody
>
> I want to build a Python support for Gdal on OS X.
> Python version is 2.3.
>
> I have this error message in make:
>
> (cd pymod; make)
> GNUmakefile:35: warning: overriding commands for target  
> `_gdalmodule.la'
> GNUmakefile:29: warning: ignoring old commands for target  
> `_gdalmodule.la'
> /bin/sh ../libtool --mode=compile gcc   -Wall  -O3 -fno-common  
> -no-cpp-precomp -DCPL_MULTIPROC_PTHREAD   -I../port -I../gcore  
> -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include   -c -o gdal_wrap.o gdal_wrap.c
>  gcc -Wall -O3 -fno-common -no-cpp-precomp -DCPL_MULTIPROC_PTHREAD  
> -I../port -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -c gdal_wrap.c -fno-common -DPIC -o  
> .libs/gdal_wrap.o
> In file included from  
> /Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3/Python.h:70,
>                  from gdal_wrap.c:44:
> /Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3/objimpl.h:255: warning: use of `long double' type; its size  
> may change in a future release
> /Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3/objimpl.h:255: warning: (Long double usage is reported only  
> once for each file.
> /Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3/objimpl.h:255: warning: To disable this warning, use  
> -Wno-long-double.)
> gdal_wrap.c: In function `ptrset':
> gdal_wrap.c:868: warning: unused variable `obj'
> gdal_wrap.c: In function `ptradd':
> gdal_wrap.c:954: warning: `obj' might be used uninitialized in this  
> function
> gdal_wrap.c: At top level:
> gdal_wrap.c:211: warning: `SWIG_addvarlink' defined but not used
>  gcc -Wall -O3 -fno-common -no-cpp-precomp -DCPL_MULTIPROC_PTHREAD  
> -I../port -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -c gdal_wrap.c -o gdal_wrap.o >/dev/null  
> 2>&1
> /bin/sh ../libtool --mode=compile g++   -Wall  -O3 -fno-common  
> -no-cpp-precomp -Wno-long-double -DCPL_MULTIPROC_PTHREAD   -I../port  
> -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include   -c -o numpydataset.o numpydataset.cpp
>  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double  
> -DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -c numpydataset.cpp  -fno-common -DPIC  
> -o .libs/numpydataset.o
>  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double  
> -DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -c numpydataset.cpp -o numpydataset.o  
> >/dev/null 2>&1
> /bin/sh ../libtool --mode=compile g++   -Wall  -O3 -fno-common  
> -no-cpp-precomp -Wno-long-double -DCPL_MULTIPROC_PTHREAD   -I../port  
> -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include   -c -o gdalnumeric.o gdalnumeric.cpp
>  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double  
> -DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -c gdalnumeric.cpp  -fno-common -DPIC -o  
> .libs/gdalnumeric.o
>  g++ -Wall -O3 -fno-common -no-cpp-precomp -Wno-long-double  
> -DCPL_MULTIPROC_PTHREAD -I../port -I../gcore -I../ogr  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3  
> -I/Library/Frameworks/Python.framework/Versions/Current/include/ 
> python2.3 -I../port -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -I/usr/local/grasslib  
> -I/usr/local/grasslib/include -c gdalnumeric.cpp -o gdalnumeric.o  
> >/dev/null 2>&1
> /bin/sh ../libtool --mode=link  g++ gdal_wrap.lo numpydataset.lo  
> gdalnumeric.lo  
> -L/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3  
> -L/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3  
> ../libgdal.la -o _gdalmodule.la \
>         -rpath  
> /Library/Frameworks/Python.framework/Versions/Current/lib/python2.3/ 
> site-packages \
>         -no-undefined \
>         -avoid-version \
>         -module
> g++ -Wl,-bind_at_load  -o .libs/_gdalmodule.so -bundle  
> .libs/gdal_wrap.o .libs/numpydataset.o .libs/gdalnumeric.o  
> -L/usr/local/pgsql/lib /usr/local/grasslib/lib/libdl.dylib  
> /usr/local/grasslib/lib/libjpeg.dylib  
> /usr/local/grasslib/lib/libodbc.dylib -L/usr/local/grasslib/lib  
> -L/usr/local/grasslib /usr/local/grasslib/lib/libproj.dylib  
> -L/usr/local/grasslib/src  
> -L/Library/Frameworks/Python.framework/Versions/Current/lib/python2.3  
> ../.libs/libgdal.dylib
> ld: Undefined symbols:
> _PyArg_Parse
> _PyArg_ParseTuple
> _PyDict_New
> _PyDict_Next
> _PyDict_SetItem
> _PyDict_Type
> _PyErr_Clear
> _PyErr_SetString
> _PyEval_CallObjectWithKeywords
> _PyExc_MemoryError
> _PyExc_NameError
> _PyExc_TypeError
> _PyExc_ValueError
> _PyFloat_AsDouble
> _PyFloat_FromDouble
> _PyInt_AsLong
> _PyInt_FromLong
> _PyInt_Type
> _PyList_New
> _PyList_SetItem
> _PyList_Size
> _PyList_Type
> _PyModule_GetDict
> _PyObject_AsWriteBuffer
> _PyString_AsString
> _PyString_FromString
> _PyString_FromStringAndSize
> _PyString_Type
> _PyTuple_Size
> _PyTuple_Type
> _PyType_IsSubtype
> _PyType_Type
> _Py_BuildValue
> _Py_InitModule4
> __Py_NoneStruct
> make[1]: *** [_gdalmodule.la] Error 1
> make: *** [py-module] Error 2
>
>
> There is a problem in gdalwarp.c with some variables...
> Thanx for help
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev


From j.l.h.hartmann at uva.nl  Mon Jul 26 10:02:17 2004
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] color table in ESRI BIL format
In-Reply-To: <20040710123347.GA21799@ak4719.spb.edu>
References: <40D9E51C.9060502@pobox.com> <40E5817D.7000603@uva.nl>
	<20040710123347.GA21799@ak4719.spb.edu>
Message-ID: <41050EE9.1010205@uva.nl>



Andrey Kiselev wrote:

> 
> I have implemented reading .clr files for ESRI format. The code is
> available in CVS. Please, test with your data.
> 
> 						Andrey

Hi Andrey,

It works! Thanks.

Jan

From warmerdam at pobox.com  Mon Jul 26 10:41:08 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] why have warning message when building GDAL-1.2.0
	on	windows ?
In-Reply-To: <20040724100321.59762.qmail@web15307.mail.bjs.yahoo.com>
References: <20040724100321.59762.qmail@web15307.mail.bjs.yahoo.com>
Message-ID: <41051804.7070604@pobox.com>

Denzel wrote:
>    Why I get these warning message? Thanks!!
> 
> Here is some  log file gdal-1.2.0.log I get it when
> compile the gdal-1.2.0
> 
> ----------------------------------------------
> avc_e00read.c
> avc_e00read.c(635) : warning C4047: '==' : 'int '
> differs in levels of indirection from 'void *'

Denzel,

The current release is GDAL 1.2.1.  Several of the messages
you report (including the avc_e00read one above) are not at
the same line in the current release and aren't easily related.

In the case of the AVC code, it comes from an upstream library
I don't directly maintain. Nevertheless the error looks odd
enough I would like to fix it if possible.  I would add it does
not happen with "gcc -Wall" on linux ... at least not with the
current code.

> tif_overview.c
> tif_overview.c(155) : warning C4761: integral size
> mismatch in argument; conversion supplied

I have corrected this upstream in libtiff, and migrated it into
GDAL.  I don't believe there was any actual error occuring.

> tif_getimage.c(2041) : warning C4550: expression
> evaluates to a function which is missing an argument
> list
> tif_getimage.c(2077) : warning C4550: expression
> evaluates to a function which is missing an argument
> list

I have found it difficult to avoid this warning without
introducing problems on at least some support libtiff
architectures so I have learned to live with it.

> ..\..\jpeg\libjpeg\jmorecfg.h(162) : warning C4142:
> benign redefinition of type
> 	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
> -I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
> -I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_flush.c

The above warning means that a type was redefined, but the
redefinition was essentially the same - hence it is benign.
I have also had a great deal of difficulty over the years
dealing with build problems related to libjpeg on windows
due to the large mixture of includes files that come
together when compiling libtiff and libjpeg on windows.

> gdal_translate.cpp
> gdal_translate.cpp(778) : warning C4508: 'main' :
> function should return a value; 'void' return type
> assumed

I was unable to track this down.  It doesn't happen on
Linux and may have already been fixed.  In any event it
is "mostly harmless".


> gdaladdo.cpp
> gdaladdo.cpp(133) : warning C4508: 'main' : function
> should return a value; 'void' return type assumed
>    Creating library gdaladdo.lib and object
> gdaladdo.exp

I committed a change (to return a proper exit status via
exit()) that I think will correct this.

> 	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
> -I..\frmts -I..\alg gdalwarp.cpp  ..\gdal_i.lib  /link
> 
> gdalwarp.cpp
> gdalwarp.cpp(521) : warning C4508: 'main' : function
> should return a value; 'void' return type assumed

I think this is already corrected.  I see that gdalwarp's
main() now ends with exit(0).

In general, different compilers tend to turn up different sorts of
warnings.  Generally speaking they are harmless, but it is hard to
notice dangerous warnings without fixing harmless warnings as they arise.
So I do make an effort to ensure all my software compiles warning free -
at least on my reference platform (gcc 3.x with -Wall).  However, I am
not always successful and things tend to be noisier on platforms other
than gcc (such as windows).  Nevertheless - as far as I can I am
interested in cleaning up warnings.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From normanb at comsine.co.uk  Mon Jul 26 14:43:47 2004
From: normanb at comsine.co.uk (Norman Barker)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Python USGS ASCII DEM
Message-ID: <410550E3.2080101@comsine.co.uk>

Hi,

We are writing an GDAL program using the python wrappers and everything 
is going well (the wrappers
around GDAL are really cool!). 

I am having problems with a bottleneck with the USGS ASCII DEMs that we 
are using.  I understand from
http://www.remotesensing.org/gdal/frmt_usgsdem.html that they are 
treated as one tile and are thus loaded in
completely.

The line we are using is
        dem_src_data = dem_band.ReadAsArray(0, (start_row + iY) , 
src_tif.RasterXSize, 1)
so we are trying to read a section as long as the input tif file from 
the DEM.  The DEMS are over 100mb.

All the other code is very fast thanks to GDAL, but is there a work 
around for this bottle neck?

Many thanks,

Norman

-- 
Norman Barker
Software Engineer
ComSine Ltd
Tel: +44 (0)1483 457121
Web: http://www.comsine.com
*Please Note:*
This text is confidential. If you are not the named addressee, it could be unlawful for you to read, copy, distribute, disclose or use the information contained herewith. If you are not the intended recipient please telephone +44(0)1483 457121.


From nhv at cape.com  Mon Jul 26 15:15:27 2004
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Python USGS ASCII DEM
In-Reply-To: <410550E3.2080101@comsine.co.uk>
Message-ID: <EKEJIKAILPONGGENMBGAAENIIDAA.nhv@cape.com>

Norman Barker writes:
> 
> I am having problems with a bottleneck with the USGS ASCII DEMs that we 
> are using.  I understand from
> http://www.remotesensing.org/gdal/frmt_usgsdem.html that they are 
> treated as one tile and are thus loaded in
> completely.
> 
> The line we are using is
>         dem_src_data = dem_band.ReadAsArray(0, (start_row + iY) , 
> src_tif.RasterXSize, 1)
> so we are trying to read a section as long as the input tif file from 
> the DEM.  The DEMS are over 100mb.
> 
> All the other code is very fast thanks to GDAL, but is there a work 
> around for this bottle neck?

I reccomend translating all of your DEMS to 16bit greyscale geotiffs
ahead of time off line

HTH

Norman

From warmerdam at pobox.com  Mon Jul 26 16:35:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Python USGS ASCII DEM
In-Reply-To: <410550E3.2080101@comsine.co.uk>
References: <410550E3.2080101@comsine.co.uk>
Message-ID: <41056B2D.9030208@pobox.com>

Norman Barker wrote:
> Hi,
> 
> We are writing an GDAL program using the python wrappers and everything 
> is going well (the wrappers
> around GDAL are really cool!).
> I am having problems with a bottleneck with the USGS ASCII DEMs that we 
> are using.  I understand from
> http://www.remotesensing.org/gdal/frmt_usgsdem.html that they are 
> treated as one tile and are thus loaded in
> completely.
> 
> The line we are using is
>        dem_src_data = dem_band.ReadAsArray(0, (start_row + iY) , 
> src_tif.RasterXSize, 1)
> so we are trying to read a section as long as the input tif file from 
> the DEM.  The DEMS are over 100mb.
> 
> All the other code is very fast thanks to GDAL, but is there a work 
> around for this bottle neck?

Norman,

There are two related issues here I think:

  1) Reading any part of a large USGS DEM is slow because the GDAL USGS DEM
     driver processes the whole file on disk.

  2) If you GDAL cache size is smaller than the size of the one big tile in a
     USGS DEM file, then you are even worse off as that one tile will be
     freed before the RasterIO() call returns.  To deal with this ensure you
     set the GDAL cache size at least large enough to hold that one tile.

There isn't much that can be practically done about problem 1.  Note that in
the file, USGS DEM data is stored in vertical profiles.  So, regardless of
how a driver is written, reading part of one horizontal scanline will always
result in most profiles having to be scanned.

As Norman Vine suggested, you should really consider converting these DEMs
into another format if you plan to work with them alot.  Otherwise ensure that
at least your cache size is set large enough for the big tile to remain
resident.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From friedm69 at msu.edu  Tue Jul 27 11:07:03 2004
From: friedm69 at msu.edu (Steve Friedman)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] configuring gdal ?
Message-ID: <loom.20040727T170232-317@post.gmane.org>

Hi,

I am new to gdal and we are having difficulty 
configuring gdal on my Solaris workstations.

We have created a gdal directory. 
After I cd gdal I attempt to configure as follows:

cd /gdal
./configure

This runs for about 20-30secs returning a few lines
and then reports that it can not find a c program 
on the system.  I have the c++ as well as g++ on
the system and a path defined for these.  

Which g++ and Which c++ returns the proper path
to these programs.

What am I doing incorrectly?

Thanks in advance
Steve


From friedm69 at msu.edu  Tue Jul 27 12:40:15 2004
From: friedm69 at msu.edu (Steve Friedman)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Error messages with Configure
Message-ID: <4106856F.8080800@msu.edu>

This is a follow-up regarding the errors I'm rec'ing as I try to 
configure gdal.

# ./configure
checking build system type... sparc-sun-solaris2.8
checking host system type... sparc-sun-solaris2.8
checking target system type... sparc-sun-solaris2.8
checking for gcc... no
checking for cc... no
checking for cc... no
checking for cl... no
configure: error: no acceptable C compiler found in $PATH
See `config.log' for more details.

Inspecting the config.log file shows:

PATH: /usr/sbin
PATH: /usr/bin

However:
 > which c++ returns
/opt/sfw/bin/c++

and
 > which g++ returns
/opt/sfw/bin/g++

Furthermore, in setenv PATH is defined to include /opt/sfw/bin, which is 
where these programs are located.

Why is configure only searching in /usr/bin and /usr/sbin?

Steve



From gillian.walter at atlantis-scientific.com  Tue Jul 27 12:53:47 2004
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Error messages with Configure
In-Reply-To: <4106856F.8080800@msu.edu>
References: <4106856F.8080800@msu.edu>
Message-ID: <4106889B.3010207@atlantis-scientific.com>

Hi,

I've never seen this problem on solaris.  I generally build from a tcsh 
shell, and make sure that /opt/sfw/bin is in PATH and /opt/sfw/lib is in 
LD_LIBRARY_PATH.  Are you sure that the script that sets path is 
actually being called in the terminal you're configuring from (entering 
"echo $PATH" and "echo $LD_LIBRARY_PATH" should show these values)? 

Gillian

Steve Friedman wrote:

> This is a follow-up regarding the errors I'm rec'ing as I try to 
> configure gdal.
>
> # ./configure
> checking build system type... sparc-sun-solaris2.8
> checking host system type... sparc-sun-solaris2.8
> checking target system type... sparc-sun-solaris2.8
> checking for gcc... no
> checking for cc... no
> checking for cc... no
> checking for cl... no
> configure: error: no acceptable C compiler found in $PATH
> See `config.log' for more details.
>
> Inspecting the config.log file shows:
>
> PATH: /usr/sbin
> PATH: /usr/bin
>
> However:
> > which c++ returns
> /opt/sfw/bin/c++
>
> and
> > which g++ returns
> /opt/sfw/bin/g++
>
> Furthermore, in setenv PATH is defined to include /opt/sfw/bin, which 
> is where these programs are located.
>
> Why is configure only searching in /usr/bin and /usr/sbin?
>
> Steve
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@xserve.flids.com
> http://xserve.flids.com/mailman/listinfo/gdal-dev




From zhang at aero.und.edu  Tue Jul 27 13:12:34 2004
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] a used-to-be running program crashed under RedHat new
	kernal 3.0
Message-ID: <1090948354.41068d02ba162@webmail.aero.und.edu>

Hi,

We have a simple program using gdal library to get information for a tiff image.
It has been running OK under linux 8 and 9. On a redhat AS 3.0, we downloaded
and installed without any problem the most recent gdal 1.2.1.0, release
2004/06/23. We then recompiled our program, however, running it cause a
segmentation error. I noticed that Redhat AS 3.0 uses a newer version of gcc and
g++ thatn redhat 8 and 9.

Note our program, which is attached, is also named as tiffinfo; it is a just
code for our own purpose.

Any help is appreciated.

Xiaodong


-------------- next part --------------
A non-text attachment was scrubbed...
Name: tiffinfo.cpp
Type: application/octet-stream
Size: 2827 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20040727/82692ddd/tiffinfo.obj
From Fulko.vanWestrenen at dto.tudelft.nl  Tue Jul 27 14:35:39 2004
From: Fulko.vanWestrenen at dto.tudelft.nl (Fulko van Westrenen)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] extent of a file/map
Message-ID: <20040727203539.A8219@lina.dto.tudelft.nl>

Hello,

I have some python code to retrieve layer information from a
s57 file. This works nice, but I would like to know the area 
covered by a file.

The documentation suggests the use of GetExtent, but that is 
for a layer. What is the proper way to get the extent of a file?


Thanks,
Fulko

-- 
Fulko van Westrenen
Fulko.vanWestrenen@DTO.TUDelft.NL

From jdenisgiguere at fastmail.fm  Tue Jul 27 15:16:32 2004
From: jdenisgiguere at fastmail.fm (Jean-Denis Giguere)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OCIDescribeAny() error
Message-ID: <4106AA10.2060609@fastmail.fm>

Hello everyone,

I'm using OCI driver to convert data from Oracle Spatial to Postgis and 
it works well.
But, I receive a lot of error messages from Oracle that dirt my log and 
hide real errors when they happen.

If  I take an ogrinfo request for exemple
$ ogrinfo OCI:cw_b50kv/***@spatial CW50KV.ZOO_2

I get some errors that look like
ERROR 1: ORA-04043: object BDGT.TRAVERSE_L does not exist.

In fact, object BDGT.TRAVERSE_L exist, but the user that connects the 
database doesn't have privilege on object BDGT.TRAVERSE_L.

Why OGR look to every table ? Is there a way to avoid all these error ? 
Maybye just limited to a specific schema will be enough, but I don't 
know how do that.

Thank you for you attention,

Jean-Denis

From warmerdam at pobox.com  Tue Jul 27 16:12:18 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] extent of a file/map
In-Reply-To: <20040727203539.A8219@lina.dto.tudelft.nl>
References: <20040727203539.A8219@lina.dto.tudelft.nl>
Message-ID: <4106B722.800@pobox.com>

Fulko van Westrenen wrote:
> Hello,
> 
> I have some python code to retrieve layer information from a
> s57 file. This works nice, but I would like to know the area 
> covered by a file.
> 
> The documentation suggests the use of GetExtent, but that is 
> for a layer. What is the proper way to get the extent of a file?

Fulko,

In general I think you would need to merge the extents of all the layers.
But I'm pretty sure that all S-57 layers return the extent of the whole
datasource so just using the extent of the first layer should be fine.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at larc.nasa.gov  Tue Jul 27 16:12:17 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
Message-ID: <005001c47416$03bd59e0$959877c6@cts1149>

I've downloaded all of the SRTM-3 for North America and want to translate it
into HFA. This was a lot easier when processing the SRTM30 data since it had
all of the necessary header files for each of the data files. The higher
resolution data doesn't provide these headers, but the documentation shows
what should be in the .hdr file. 

As there are more than 2000 files, I'd rather not hand-edit the headers. Has
anyone made a script to generate these files? And maybe the .prj files, too?
Or is there another way to do this mass translate?

Thanks,
Thom



From sewell at dramail.com  Tue Jul 27 17:14:42 2004
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Question about gdal and ENVI.
Message-ID: <Pine.LNX.4.53.0407271707580.28532@server.dramail.com>


I'm trying to use gdal to translate imagery generated by ENVI 4.0, but I'm
encountering some issues I don't quite understand.  First if I run
gdalinfo on my envi file, it says the Cordinate system is:
LOCAL_CS["Geographic Lat/Lon",
    UNIT["Meter",1]]

If I use envi to save it as a geotiff then the Cordinate system is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
...

>From what I found on the mailing lists LOCAL_CS basically means GDAL
doesn't understand the projection, is this correct?

Does anyone know why this would happen?

Thanks.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-431-1644                 Beavercreek, Ohio 45431-1608
sewell@dramail.com

From warmerdam at pobox.com  Tue Jul 27 18:07:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Question about gdal and ENVI.
In-Reply-To: <Pine.LNX.4.53.0407271707580.28532@server.dramail.com>
References: <Pine.LNX.4.53.0407271707580.28532@server.dramail.com>
Message-ID: <4106D231.6030408@pobox.com>

Ken Sewell wrote:
> I'm trying to use gdal to translate imagery generated by ENVI 4.0, but I'm
> encountering some issues I don't quite understand.  First if I run
> gdalinfo on my envi file, it says the Cordinate system is:
> LOCAL_CS["Geographic Lat/Lon",
>     UNIT["Meter",1]]
> 
> If I use envi to save it as a geotiff then the Cordinate system is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
> ...
> 
>>From what I found on the mailing lists LOCAL_CS basically means GDAL
> doesn't understand the projection, is this correct?
> 
> Does anyone know why this would happen?

Ken,

Correct, this means the georeferencing was not understood. I believe the
coordinate system implementation in the GDAL ENVI driver is pretty poor.
Can you provide the envi header file?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From zhang at aero.und.edu  Tue Jul 27 23:59:38 2004
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] problem of gdal_translate 1.1.9 and 1.2.1 with multiple
	bands
Message-ID: <1090987178.410724aa99a0c@webmail.aero.und.edu>

Hi,

I have tried both gdal 1.1.9 and 1.2.1, but it seemed that for both versions,
gdal_translate can only return one band after subsetting a multiband image.

For example,

gdalinfo /mnt/dngp_images/3328_092002.tif, would retrun the following
------------------------------------------
Driver: GTiff/GeoTIFF
Size is 7450, 7092
Coordinate System is:
PROJCS["WGS 84 / UTM zone 13N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree (supplier to define representation)",0.01745329251994328],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-105],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32613"]]
Origin = (593925.000000,5207115.000000)
Pixel Size = (30.00000000,-30.00000000)
Metadata:
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.9.2.2 $ $Date: 2002/01/14 13:57:53EST $
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (  593925.000, 5207115.000) (103d45'51.49"W, 47d 0'39.20"N)
Lower Left  (  593925.000, 4994355.000) (103d48'22.63"W, 45d 5'47.13"N)
Upper Right (  817425.000, 5207115.000) (100d49'44.62"W, 46d56'29.49"N)
Lower Right (  817425.000, 4994355.000) (100d58'13.21"W, 45d 1'53.45"N)
Center      (  705675.000, 5100735.000) (102d20'32.55"W, 46d 1'45.41"N)
Band 1 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
Band 2 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
Band 3 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
Band 4 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
Band 5 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
Band 6 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
Band 7 Block=7450x1 Type=Byte, ColorInterp=Gray
  Overviews: 3725x3546, 1863x1773, 932x887, 466x444, 233x222, 117x111, 59x56, 30x28
-------------------------------------
Then I run,

gdal_translate -b 1,2,3 -srcwin 100 100 200 200 /mnt/dngp_images/3328_092002.tif
tmp.tif

and

gdalinfo tmp.tif, I got the following

----------------------------------
Driver: GTiff/GeoTIFF
Size is 200, 200
Coordinate System is:
PROJCS["WGS 84 / UTM zone 13N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree (supplier to define representation)",0.01745329251994328],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-105],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32613"]]
Origin = (596925.000000,5204115.000000)
Pixel Size = (30.00000000,-30.00000000)
Metadata:
  TIFFTAG_SOFTWARE=IMAGINE TIFF Support
Copyright 1991 - 1999 by ERDAS, Inc. All Rights Reserved
@(#)$RCSfile: etif.c $ $Revision: 1.9.2.2 $ $Date: 2002/01/14 13:57:53EST $
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  (  596925.000, 5204115.000) (103d43'31.75"W, 46d59'0.48"N)
Lower Left  (  596925.000, 5198115.000) (103d43'36.36"W, 46d55'46.15"N)
Upper Right (  602925.000, 5204115.000) (103d38'47.80"W, 46d58'57.22"N)
Lower Right (  602925.000, 5198115.000) (103d38'52.70"W, 46d55'42.90"N)
Center      (  599925.000, 5201115.000) (103d41'12.15"W, 46d57'21.71"N)
Band 1 Block=200x40 Type=Byte, ColorInterp=Gray
---------------------------------------------------------

Note, there is only band left.

What could be wrong?

Thanks
Xiaodong





From jbensabat at ewre.com  Fri Jul 23 02:44:36 2004
From: jbensabat at ewre.com (Jacob Bensabat)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Re: what about OGRCircle , OGRArc and OGREllipse
References: <cdoaki$9lp$1@sea.gmane.org> <40FFBECD.4000200@pobox.com>
Message-ID: <ce86qj$rfp$1@sea.gmane.org>

Hi and thanks for your message.
I understand now your point of view.
jac


"Frank Warmerdam" <warmerdam@pobox.com> wrote in message
news:40FFBECD.4000200@pobox.com...
> Jacob Bensabat wrote:
> > hello to all
> > I have seen the need to draw arcs, ellipses and circles using ogr. The
> > problem is that these
> > geometric features are not directly supported by OGR. There seems to be
no
> > problem adding
> > them so my question is why these are not supported. Is there any reason
> > (conceptual or practical
> > one) ?
>
> Jacob,
>
> Basically, they aren't there because they aren't part of the simple
features
> geometry model, though they do have obvious (and intended) places to fit
as
> add-ons to that geometry model.  While I wouldn't necessarily mind having
> OGR classes for them, it is important to note that alot of stuff wouldn't
> work properly for them.  For instance, there would presumably be hardly
> any drivers that would support them.  Also, translation to WKT and WKB
would
> not be compatible with stuff like GEOS or PostGIS.
>
> Basically, my concern is that they wouldn't be well supported and that in
many
> cases it would be better to have just converted them into polyline or
polygon
> approximations.
>
> An important step in any system design is coming up with a data model.   I
> chose the OpenGIS Simple Features geometry model as a basis for OGR and it
> has provided me with a great deal of leverage in terms of compatibility
with
> other systems.
>
> Of course it does not lend itself to accurate or efficient representation
of
> some feature from CAD oriented systems.  However, that hasn't been a huge
issue
> for me till this point.
>
> In short, if you are interested I wouldn't necessarily mind having classes
for
> ellipse, circle and so on, but I would want to include big disclaimers on
them
> that they are not widely supported.  Furthermore, I would likely not want
to
> make drivers like DGN actually return these geometries even where it would
make
> sense as they would not be translatable to other drivers.
>
> Best regards,
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent




From halset at pvv.ntnu.no  Wed Jul 28 08:54:39 2004
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] S57 Driver: holes in areas
Message-ID: <4966E250-E095-11D8-92D3-000A95CD827E@pvv.ntnu.no>

Hello.

I am using ogr2ogr to store S57 data into a Postgis database and have a 
question. How are an area like DEPARE with holes stored? It looks like 
FSPT-ORNT and FSPT-USAG are not stored. Should I traverse the polygons 
and see if the direction is counter-clockwise?

Regards,
  - Tore.


From warmerdam at pobox.com  Wed Jul 28 09:44:55 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] problem of gdal_translate 1.1.9 and 1.2.1 with multiple
	bands
In-Reply-To: <1090987178.410724aa99a0c@webmail.aero.und.edu>
References: <1090987178.410724aa99a0c@webmail.aero.und.edu>
Message-ID: <4107ADD7.3030106@pobox.com>

Xiaodong Zhang wrote:

> -------------------------------------
> Then I run,
> 
> gdal_translate -b 1,2,3 -srcwin 100 100 200 200 /mnt/dngp_images/3328_092002.tif
> tmp.tif

Hi,

I think you need to use a seperate -b for each band requested.

eg.
gdal_translate -b 1 -b 2 -b 3 -srcwin 100 100 200 200 /mnt/dngp_images/3328_092002.tif tmp.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jul 28 10:35:57 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Question about gdal and ENVI.
In-Reply-To: <Pine.LNX.4.53.0407281016510.8584@server.dramail.com>
References: <Pine.LNX.4.53.0407271707580.28532@server.dramail.com>
	<4106D231.6030408@pobox.com>
	<Pine.LNX.4.53.0407281016510.8584@server.dramail.com>
Message-ID: <4107B9CD.8050804@pobox.com>

Ken Sewell wrote:
> Frank,
> 	Attached is one of the envi headers I'm having problems with.
> If you need, I can provide more.  Thanks, I appreciate your help.

Ken,

I have added code in CVS to handle map_info systems of "Geographic Lat/Long"
and to convert units=seconds back to degrees in GDAL.  I would like to get
a list of possible coordinate systems, units and projections for ENVI if
possible.  Sample .hdr files with different map_info setups are welcome
as would any documentation on the map_info directive.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From zhang at aero.und.edu  Wed Jul 28 10:41:25 2004
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] problem of gdal_translate 1.1.9 and 1.2.1 with
	multiplebands
In-Reply-To: <4107ADD7.3030106@pobox.com>
References: <1090987178.410724aa99a0c@webmail.aero.und.edu>
	<4107ADD7.3030106@pobox.com>
Message-ID: <1091025685.4107bb15b0376@webmail.aero.und.edu>

Thanks Frank,

Yes you are right, I have to use gdal_translate -b 1 -b 2 -b 3 ... to spectrally
subset an image, but it only works for version 1.2.1 but not for 1.1.9. Version
1.1.9 produces only one band regardless. Both ways of sending '-b' arguments,
i.e., -b 1,2,3,4 or -b 1 -b 2 -b 3 -b 3, work for earlier version, 1.1.8.

On aother note, are there any significant changes for versions later than 1.1.8.
In another email, I reported that our program using gdal api crashes for both
version 1.1.9 and 1.2.1, while it works perfectly for version 1.1.8.

Thanks again.
Xiaodong

-- 
Xiaodong Zhang, Ph.D.
Assistant Professor
Earth System Science and Policy Program
University of North Dakota
Grand Fors, ND 58202-9007
(701)777-6087


Quoting Frank Warmerdam <warmerdam@pobox.com>:

> Xiaodong Zhang wrote:
> 
> > -------------------------------------
> > Then I run,
> > 
> > gdal_translate -b 1,2,3 -srcwin 100 100 200 200
> /mnt/dngp_images/3328_092002.tif
> > tmp.tif
> 
> Hi,
> 
> I think you need to use a seperate -b for each band requested.
> 
> eg.
> gdal_translate -b 1 -b 2 -b 3 -srcwin 100 100 200 200
> /mnt/dngp_images/3328_092002.tif tmp.tif
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 



From warmerdam at pobox.com  Wed Jul 28 10:54:22 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] problem of gdal_translate 1.1.9 and 1.2.1 with
	multiplebands
In-Reply-To: <1091025685.4107bb15b0376@webmail.aero.und.edu>
References: <1090987178.410724aa99a0c@webmail.aero.und.edu>
	<4107ADD7.3030106@pobox.com>
	<1091025685.4107bb15b0376@webmail.aero.und.edu>
Message-ID: <4107BE1E.5060503@pobox.com>

Xiaodong Zhang wrote:
> Thanks Frank,
> 
> Yes you are right, I have to use gdal_translate -b 1 -b 2 -b 3 ... to spectrally
> subset an image, but it only works for version 1.2.1 but not for 1.1.9. Version
> 1.1.9 produces only one band regardless. Both ways of sending '-b' arguments,
> i.e., -b 1,2,3,4 or -b 1 -b 2 -b 3 -b 3, work for earlier version, 1.1.8.

Hi,

Are you sure the -b stuff is working in 1.1.8?  It might just be ignoring it and
copying all bands.

> On aother note, are there any significant changes for versions later than 1.1.8.
> In another email, I reported that our program using gdal api crashes for both
> version 1.1.9 and 1.2.1, while it works perfectly for version 1.1.8.

Well, there have been lots of changes - significant and otherwise since 1.1.8.
I think you will need to debug your problem or provide something simple I can
use to reproduce your problem if you would like help with it.  I can't imagine
there is any fundamental reason you can't use 1.2.1.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at pf.pl  Wed Jul 28 11:00:31 2004
From: werchowyna at pf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
References: <005001c47416$03bd59e0$959877c6@cts1149>
Message-ID: <004101c474b3$d09c78e0$03e163d9@podyadeck>

From: "Thom DeCarlo" <t.r.decarlo@larc.nasa.gov>

> As there are more than 2000 files, I'd rather not hand-edit the headers.
> Has anyone made a script to generate these files? And maybe the .prj
> files, too? Or is there another way to do this mass translate?

try Markus Neteler's "srtm_generate_hdr.sh" from http://mpa.itc.it/rs/srtm/

Maciek


From zhang at aero.und.edu  Wed Jul 28 11:05:38 2004
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] problem of gdal_translate 1.1.9 and 1.2.1 with
	multiplebands
In-Reply-To: <4107BE1E.5060503@pobox.com>
References: <1090987178.410724aa99a0c@webmail.aero.und.edu>
	<4107ADD7.3030106@pobox.com>
	<1091025685.4107bb15b0376@webmail.aero.und.edu>
	<4107BE1E.5060503@pobox.com>
Message-ID: <1091027138.4107c0c2e80f6@webmail.aero.und.edu>

Hi Frank,

I'm absolutely positive that 1.1.8 can use -b 1,2,3,4. This is how we have 
been using it for the past 1.5 years.

Xiaodong

-- 
Xiaodong Zhang, Ph.D.
Assistant Professor
Earth System Science and Policy Program
University of North Dakota
Grand Fors, ND 58202-9007
(701)777-6087


Quoting Frank Warmerdam <warmerdam@pobox.com>:

> Xiaodong Zhang wrote:
> > Thanks Frank,
> > 
> > Yes you are right, I have to use gdal_translate -b 1 -b 2 -b 3 ... to
> spectrally
> > subset an image, but it only works for version 1.2.1 but not for 1.1.9.
> Version
> > 1.1.9 produces only one band regardless. Both ways of sending '-b'
> arguments,
> > i.e., -b 1,2,3,4 or -b 1 -b 2 -b 3 -b 3, work for earlier version, 1.1.8.
> 
> Hi,
> 
> Are you sure the -b stuff is working in 1.1.8?  It might just be ignoring it
> and
> copying all bands.
> 
> > On aother note, are there any significant changes for versions later than
> 1.1.8.
> > In another email, I reported that our program using gdal api crashes for
> both
> > version 1.1.9 and 1.2.1, while it works perfectly for version 1.1.8.
> 
> Well, there have been lots of changes - significant and otherwise since
> 1.1.8.
> I think you will need to debug your problem or provide something simple I
> can
> use to reproduce your problem if you would like help with it.  I can't
> imagine
> there is any fundamental reason you can't use 1.2.1.
> 
> Best regards,
> -- 
> ---------------------------------------+-------------------------------------
-
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 



From warmerdam at pobox.com  Wed Jul 28 11:09:20 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] S57 Driver: holes in areas
In-Reply-To: <4966E250-E095-11D8-92D3-000A95CD827E@pvv.ntnu.no>
References: <4966E250-E095-11D8-92D3-000A95CD827E@pvv.ntnu.no>
Message-ID: <4107C1A0.70704@pobox.com>

Tore Halset wrote:
> Hello.
> 
> I am using ogr2ogr to store S57 data into a Postgis database and have a 
> question. How are an area like DEPARE with holes stored? It looks like 
> FSPT-ORNT and FSPT-USAG are not stored. Should I traverse the polygons 
> and see if the direction is counter-clockwise?

Tore,

I am not convinced that holes are actually a particular order.  My technique
for assembling rings ignores USAG and ORNT.  It just stitches segments together
into rings till there are no attachable segments left without regard to what
the orientation "should be".  So you will likely need a more sophisticated
technique to establish which rings are holes.

Hmm, according to the Simple Features data model, I it should be that only
the first ring of a Polygon is exterior.  The rest are holes.  A multi-island
area should be a multipolygon with each island a sub-polygon.  If this isn't
true in OGR's S-57 driver return results let me know and I will try and correct
it.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sewell at dramail.com  Wed Jul 28 11:52:30 2004
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Gdal CVS and VRTSourcedRasterBand
Message-ID: <Pine.LNX.4.53.0407281147440.11721@server.dramail.com>


I'm failing to compile the current cvs (as of 11:44am EST) because it
seems that the type VRTSourcedRasterBand is undefined.  Was this type not
checked in?  The code that calls it is frmts/vrt/vrtdataset.cpp.
Thanks.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-431-1644                 Beavercreek, Ohio 45431-1608
sewell@dramail.com

From t.r.decarlo at LARC.NASA.GOV  Wed Jul 28 11:56:28 2004
From: t.r.decarlo at LARC.NASA.GOV (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <004101c474b3$d09c78e0$03e163d9@podyadeck>
Message-ID: <006001c474bb$72605a00$959877c6@cts1149>

Thanks Maciek! That was exactly what I needed. Well, almost... (drat that
WinXP!) Fortunately, I have the fsf bash shell available on my computer and
was able to make it work.

Thanks again,
Thom


> -----Original Message-----
> From: Maciek Sieczka
> Sent: Wednesday, July 28, 2004 11:01 AM
> To: gdal-dev@xserve.flids.com
> Subject: Re: [Gdal-dev] processing SRTM-3?
> 
> From: "Thom DeCarlo" <t.r.decarlo@larc.nasa.gov>
> 
> > As there are more than 2000 files, I'd rather not hand-edit the headers.
> > Has anyone made a script to generate these files? And maybe the .prj
> > files, too? Or is there another way to do this mass translate?
> 
> try Markus Neteler's "srtm_generate_hdr.sh" from
> http://mpa.itc.it/rs/srtm/
> 
> Maciek



From zhang at aero.und.edu  Wed Jul 28 13:27:53 2004
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGRSpatialReference::exportToProj4 causes segmentation
	error
Message-ID: <1091035673.4107e2190cc94@portal.aero.und.edu>

Hi,

One of our code, which works with Gdal 1.1.8 causes a segmentation fault with
newer version of Gdal 1.1.9  and Gdal 1.2.1. It seemed that the following part
causes the problem.

char ** ppProj;
....
proj = srcDataset->GetProjectionRef();
/* so far is OK after open an image with GDALOpen and get the projection info

OGRSpatialReference hProj(proj); // it is still OK up to here
hProj.exportToProj4 (ppProj); // it crashes here

Also the OGR documentation says to de-allocate ppProj using CPLfree(), how to
use it exactly?

Thanks

-- 
Xiaodong Zhang, Ph.D.
Assistant Professor
Earth System Science and Policy Program
University of North Dakota
Grand Fors, ND 58202-9007
(701)777-6087






From Fulko.vanWestrenen at dto.tudelft.nl  Wed Jul 28 13:33:00 2004
From: Fulko.vanWestrenen at dto.tudelft.nl (Fulko van Westrenen)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] extent of a file/map [2]
Message-ID: <20040728193300.A9658@lina.dto.tudelft.nl>

On Tue, Jul 27, 2004 at 04:12:18PM -0400, Frank Warmerdam wrote:
> Fulko van Westrenen wrote:                                                                                           
> >Hello,                                                                                                              
> >                                                                                                                    
> >I have some python code to retrieve layer information from a                                                        
> >s57 file. This works nice, but I would like to know the area                                                        
> >covered by a file.                                                                                                  
> >                                                                                                                    
> >The documentation suggests the use of GetExtent, but that is                                                        
> >for a layer. What is the proper way to get the extent of a file?                                                    
>                                                                                                                      
> Fulko,                                                                                                               
>                                                                                                                      
> In general I think you would need to merge the extents of all the layers.                                            
> But I'm pretty sure that all S-57 layers return the extent of the whole                                              
> datasource so just using the extent of the first layer should be fine.                                               

Frank,

Thank you for your reply. I tried some code, but it does not behave as
expected:
  File "./mooring65.gtk.py", line 846, in load_objects
      feat = objects.GetNextFeature()
  File "/usr/lib/python2.3/site-packages/ogr.py", line 383, in GetNextFeature
    return Feature( obj = f_o )
TypeError: a float is required


A snippet of the offending code:

def load_objects(dataset,name,sumloc):
    try:
       objects=dataset.GetLayerByName( name )
    except:
       return sumloc
    if objects is not None:
       extent = objects.GetExtent(0)
       print extent
       feat = objects.GetNextFeature() #this is the line that generates the error
       while feat is not None:
          geom=feat.GetGeometryRef()

I inserted objects.ResetReading() after the print instruction, but
that didn't help much. I have the feeling I do not understand the
behaviour of osr. Any help is much appreciated.

Thanks,
Fulko
										    


-- 
Fulko van Westrenen
Fulko.vanWestrenen@DTO.TUDelft.NL

From sewell at dramail.com  Wed Jul 28 13:47:52 2004
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Problems compiling gdal_translate.
Message-ID: <Pine.LNX.4.53.0407281345250.11721@server.dramail.com>


The current cvs stops compiling with the following messages:
gdal_translate.cpp:749: error: `AddComplexSource' undeclared (first use this function)
gdal_translate.cpp:749: error: (Each undeclared identifier is reported only once for each function it appears in.)
gdal_translate.cpp:755: error: `AddSimpleSource' undeclared (first use this function)


Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-431-1644                 Beavercreek, Ohio 45431-1608
sewell@dramail.com

From warmerdam at pobox.com  Wed Jul 28 13:41:02 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGRSpatialReference::exportToProj4 causes segmentation
	error
In-Reply-To: <1091035673.4107e2190cc94@portal.aero.und.edu>
References: <1091035673.4107e2190cc94@portal.aero.und.edu>
Message-ID: <4107E52E.8090104@pobox.com>

Xiaodong Zhang wrote:
> Hi,
> 
> One of our code, which works with Gdal 1.1.8 causes a segmentation fault with
> newer version of Gdal 1.1.9  and Gdal 1.2.1. It seemed that the following part
> causes the problem.
> 
> char ** ppProj;
> ....
> proj = srcDataset->GetProjectionRef();
> /* so far is OK after open an image with GDALOpen and get the projection info
> 
> OGRSpatialReference hProj(proj); // it is still OK up to here
> hProj.exportToProj4 (ppProj); // it crashes here
> 
> Also the OGR documentation says to de-allocate ppProj using CPLfree(), how to
> use it exactly?

Hi,

You need to pass a pointer to a pointer where the resulting string can be
assigned.  I'm not sure why it would work with 1.1.8 unless it was just a
coincidental thing about where the unitialized ppProj pointed.

It should be something like:

   char **pszProjWKT = NULL;

   OGRSpatialReferenceh oProj( srcDataset->GetProjectionRef() );

   oProj.exportToProj4( &pszProjWKT );

   printf( "%s", pszProjWKT );

   CPLFree( pszProjWKT );

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From zhang at aero.und.edu  Wed Jul 28 13:55:22 2004
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGRSpatialReference::exportToProj4 causes
	segmentationerror
In-Reply-To: <4107E52E.8090104@pobox.com>
References: <1091035673.4107e2190cc94@portal.aero.und.edu>
	<4107E52E.8090104@pobox.com>
Message-ID: <1091037322.4107e88a60b46@portal.aero.und.edu>

Hi Frank,

Thanks but please see my comments below:

Quoting Frank Warmerdam <warmerdam@pobox.com>:

> Xiaodong Zhang wrote:
> > Hi,
> > 
> > One of our code, which works with Gdal 1.1.8 causes a segmentation fault
> with
> > newer version of Gdal 1.1.9  and Gdal 1.2.1. It seemed that the following
> part
> > causes the problem.
> > 
> > char ** ppProj;
> > ....
> > proj = srcDataset->GetProjectionRef();
> > /* so far is OK after open an image with GDALOpen and get the projection
> info
> > 
> > OGRSpatialReference hProj(proj); // it is still OK up to here
> > hProj.exportToProj4 (ppProj); // it crashes here
> > 
> > Also the OGR documentation says to de-allocate ppProj using CPLfree(), how
> to
> > use it exactly?
> 
> Hi,
> 
> You need to pass a pointer to a pointer where the resulting string can be
> assigned.  I'm not sure why it would work with 1.1.8 unless it was just a
> coincidental thing about where the unitialized ppProj pointed.
> 
> It should be something like:
> 
>    char **pszProjWKT = NULL;

It has to be 'char *pszProjWKT' instead of double pointers, otherwise the
compile gives the following error

`OGRSpatialReference::exportToProj4 (char ***)'
/usr/local/include/ogr_spatialref.h:209: candidates are: OGRErr
OGRSpatialReference::exportToProj4
(char **) const

Is this what to be expected?

Thanks

> 
>    OGRSpatialReferenceh oProj( srcDataset->GetProjectionRef() );
> 
>    oProj.exportToProj4( &pszProjWKT );
> 
>    printf( "%s", pszProjWKT );
> 
>    CPLFree( pszProjWKT );
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 



From warmerdam at pobox.com  Wed Jul 28 13:58:00 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Gdal CVS and VRTSourcedRasterBand
In-Reply-To: <Pine.LNX.4.53.0407281147440.11721@server.dramail.com>
References: <Pine.LNX.4.53.0407281147440.11721@server.dramail.com>
Message-ID: <4107E928.2000607@pobox.com>

Ken Sewell wrote:
> I'm failing to compile the current cvs (as of 11:44am EST) because it
> seems that the type VRTSourcedRasterBand is undefined.  Was this type not
> checked in?  The code that calls it is frmts/vrt/vrtdataset.cpp.
> Thanks.

Ken,

Sorry about that.  I was holding a pile of VRT changes while I do some work, but
ended up accidentally commiting part of them when adding another feature for
VRT files.  I have committed all the VRT code now, including makefile updates
and the gdal/apps/gdal_translate.cpp changes.

Please update from CVS and try again.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jul 28 14:24:49 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] OGRSpatialReference::exportToProj4 causes
	segmentationerror
In-Reply-To: <1091037322.4107e88a60b46@portal.aero.und.edu>
References: <1091035673.4107e2190cc94@portal.aero.und.edu>
	<4107E52E.8090104@pobox.com>
	<1091037322.4107e88a60b46@portal.aero.und.edu>
Message-ID: <4107EF71.2010508@pobox.com>

Xiaodong Zhang wrote:

>>You need to pass a pointer to a pointer where the resulting string can be
>>assigned.  I'm not sure why it would work with 1.1.8 unless it was just a
>>coincidental thing about where the unitialized ppProj pointed.
>>
>>It should be something like:
>>
>>   char **pszProjWKT = NULL;
> 
> 
> It has to be 'char *pszProjWKT' instead of double pointers, otherwise the
> compile gives the following error
> 
> `OGRSpatialReference::exportToProj4 (char ***)'
> /usr/local/include/ogr_spatialref.h:209: candidates are: OGRErr
> OGRSpatialReference::exportToProj4
> (char **) const
> 
> Is this what to be expected?

Hi,

Sorry, yes, you are right.  I got too caught up in deciding on a name
for the variable and forgot to adjust to being just "char *" instead of "char **".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From t.r.decarlo at LARC.NASA.GOV  Wed Jul 28 14:54:13 2004
From: t.r.decarlo at LARC.NASA.GOV (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <006001c474bb$72605a00$959877c6@cts1149>
Message-ID: <006501c474d4$469d9e00$959877c6@cts1149>

Oops, found another... issue. The SRTM documentation states that the NODATA
value is -32768 and the shell script accommodates that by setting the
appropriate value in the header file. However, it appears that the rest of
the gdal software assumes that the NODATA value is -9999. Is there any way
to tell the gdal_translate program to change any NODATA values it encounters
to be -9999?

Thanks,
Thom


> -----Original Message-----
> From: Thom DeCarlo
> Sent: Wednesday, July 28, 2004 11:56 AM
> To: gdal-dev@xserve.flids.com
> Subject: RE: [Gdal-dev] processing SRTM-3?
> 
> Thanks Maciek! That was exactly what I needed. Well, almost... (drat that
> WinXP!) Fortunately, I have the fsf bash shell available on my computer
> and
> was able to make it work.
> 
> Thanks again,
> Thom
> 
> 
> > -----Original Message-----
> > From: Maciek Sieczka
> > Sent: Wednesday, July 28, 2004 11:01 AM
> > To: gdal-dev@xserve.flids.com
> > Subject: Re: [Gdal-dev] processing SRTM-3?
> >
> > From: "Thom DeCarlo" <t.r.decarlo@larc.nasa.gov>
> >
> > > As there are more than 2000 files, I'd rather not hand-edit the
> headers.
> > > Has anyone made a script to generate these files? And maybe the .prj
> > > files, too? Or is there another way to do this mass translate?
> >
> > try Markus Neteler's "srtm_generate_hdr.sh" from
> > http://mpa.itc.it/rs/srtm/
> >
> > Maciek



From warmerdam at pobox.com  Wed Jul 28 15:05:20 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <006501c474d4$469d9e00$959877c6@cts1149>
References: <006501c474d4$469d9e00$959877c6@cts1149>
Message-ID: <4107F8F0.40002@pobox.com>

Thom DeCarlo wrote:
> Oops, found another... issue. The SRTM documentation states that the NODATA
> value is -32768 and the shell script accommodates that by setting the
> appropriate value in the header file. However, it appears that the rest of
> the gdal software assumes that the NODATA value is -9999. Is there any way
> to tell the gdal_translate program to change any NODATA values it encounters
> to be -9999?

Thom,

The GDAL libraries should not assume a nodata value of -9999.  The data is
being imported via the ESRI BIL format, right?  What does the .hdr file have
for a NODATA value?  What does gdalinfo report about a dataset?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at LARC.NASA.GOV  Wed Jul 28 15:34:25 2004
From: t.r.decarlo at LARC.NASA.GOV (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <4107F8F0.40002@pobox.com>
Message-ID: <006601c474d9$e45aaed0$959877c6@cts1149>

Frank Warmerdam wrote:
> 
> Thom DeCarlo wrote:
> > Oops, found another... issue. The SRTM documentation states that the
> > NODATA value is -32768 and the shell script accommodates that by
> > setting the appropriate value in the header file. However, it appears
> > that the rest of the gdal software assumes that the NODATA value is 
> > -9999. Is there any way to tell the gdal_translate program to change
> > any NODATA values it encounters to be -9999?
> 
> Thom,
> 
> The GDAL libraries should not assume a nodata value of -9999.  The data is
> being imported via the ESRI BIL format, right?  What does the .hdr file
> have for a NODATA value?  What does gdalinfo report about a dataset?
> 
> Best regards,
> --

Unfortunately, I need to use geotiff format for the output terrain data and
I don't think geotiff has a defined NODATA value. One use of this terrain is
to feed a couple different 3D model builders and construct terrain models.
It seems that some of these tools fall back to a default NODATA value of 
-9999 for datasets that do not define their own value. That causes incorrect
interpretation of the -32768 value in the geotiff files as being valid data.




From t.r.decarlo at LARC.NASA.GOV  Wed Jul 28 15:40:20 2004
From: t.r.decarlo at LARC.NASA.GOV (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <006601c474d9$e45aaed0$959877c6@cts1149>
Message-ID: <006701c474da$b7e2c080$959877c6@cts1149>

I wrote:
> 
> Frank Warmerdam wrote:
> >
> > Thom DeCarlo wrote:
> > > Oops, found another... issue. The SRTM documentation states that the
> > > NODATA value is -32768 and the shell script accommodates that by
> > > setting the appropriate value in the header file. However, it appears
> > > that the rest of the gdal software assumes that the NODATA value is
> > > -9999. Is there any way to tell the gdal_translate program to change
> > > any NODATA values it encounters to be -9999?
> >
> > Thom,
> >
> > The GDAL libraries should not assume a nodata value of -9999.  The data
> is
> > being imported via the ESRI BIL format, right?  What does the .hdr file
> > have for a NODATA value?  What does gdalinfo report about a dataset?
> >
> > Best regards,
> > --
> 
> Unfortunately, I need to use geotiff format for the output terrain data
> and
> I don't think geotiff has a defined NODATA value. One use of this terrain
> is
> to feed a couple different 3D model builders and construct terrain models.
> It seems that some of these tools fall back to a default NODATA value of
> -9999 for datasets that do not define their own value. That causes
> incorrect
> interpretation of the -32768 value in the geotiff files as being valid
> data.
> 

ACK! I should have checked this first. (I was working from old, outdated,
memories.) running gdalinfo on the geotiff files shows that there *is* a
NODATA value of -32768 in there. I'd better check the other applications to
make sure that they are handling this properly and not just assuming that
the NODATA value is -9999.

Sorry,
Thom



From warmerdam at pobox.com  Wed Jul 28 16:12:35 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <006701c474da$b7e2c080$959877c6@cts1149>
References: <006701c474da$b7e2c080$959877c6@cts1149>
Message-ID: <410808B3.7000000@pobox.com>

Thom DeCarlo wrote:
> 
> ACK! I should have checked this first. (I was working from old, outdated,
> memories.) running gdalinfo on the geotiff files shows that there *is* a
> NODATA value of -32768 in there. I'd better check the other applications to
> make sure that they are handling this properly and not just assuming that
> the NODATA value is -9999.

Thom,

Sometime relatively recently a hack was put into the GDAL GTiff driver to
save a nodata valuei in a GDAL-custom tag in the TIFF file.  It isn't likely
that any non-GDAL application will recognise the nodata value in the TIFF
file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Jul 28 16:16:30 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] extent of a file/map [2]
In-Reply-To: <20040728193300.A9658@lina.dto.tudelft.nl>
References: <20040728193300.A9658@lina.dto.tudelft.nl>
Message-ID: <4108099E.5010304@pobox.com>

Fulko van Westrenen wrote:
> Frank,
> 
> Thank you for your reply. I tried some code, but it does not behave as
> expected:
>   File "./mooring65.gtk.py", line 846, in load_objects
>       feat = objects.GetNextFeature()
>   File "/usr/lib/python2.3/site-packages/ogr.py", line 383, in GetNextFeature
>     return Feature( obj = f_o )
> TypeError: a float is required

Fulko,

Sorry, I have no idea why you are getting the above exception with the
following code.  Your approach seems reasonable.  I gather you do get the
extent?

> A snippet of the offending code:
> 
> def load_objects(dataset,name,sumloc):
>     try:
>        objects=dataset.GetLayerByName( name )
>     except:
>        return sumloc
>     if objects is not None:
>        extent = objects.GetExtent(0)
>        print extent
>        feat = objects.GetNextFeature() #this is the line that generates the error
>        while feat is not None:
>           geom=feat.GetGeometryRef()
> 
> I inserted objects.ResetReading() after the print instruction, but
> that didn't help much. I have the feeling I do not understand the
> behaviour of osr. Any help is much appreciated.
> 
> Thanks,
> Fulko
> 										    
> 
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at LARC.NASA.GOV  Wed Jul 28 16:24:25 2004
From: t.r.decarlo at LARC.NASA.GOV (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <410808B3.7000000@pobox.com>
Message-ID: <006801c474e0$e01315e0$959877c6@cts1149>

Frank Warmerdam wrote:
> 
> Thom,
> 
> Sometime relatively recently a hack was put into the GDAL GTiff driver to
> save a nodata valuei in a GDAL-custom tag in the TIFF file.  It isn't
> likely
> that any non-GDAL application will recognise the nodata value in the TIFF
> file.
> 
> Best regards,
> --

Ok, then I still need to find a way to change the values in the data from
the current -32768 to the default value of -9999. Any ideas?

Thanks,
Thom



From warmerdam at pobox.com  Wed Jul 28 16:29:50 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <006801c474e0$e01315e0$959877c6@cts1149>
References: <006801c474e0$e01315e0$959877c6@cts1149>
Message-ID: <41080CBE.3030004@pobox.com>

Thom DeCarlo wrote:
> Frank Warmerdam wrote:
> 
>>Thom,
>>
>>Sometime relatively recently a hack was put into the GDAL GTiff driver to
>>save a nodata valuei in a GDAL-custom tag in the TIFF file.  It isn't
>>likely
>>that any non-GDAL application will recognise the nodata value in the TIFF
>>file.
>>
>>Best regards,
>>--
> 
> 
> Ok, then I still need to find a way to change the values in the data from
> the current -32768 to the default value of -9999. Any ideas?

Thom,

Take a look at gdal/pymod/samples/val_repl.py.  It should do what you want I
think.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From t.r.decarlo at LARC.NASA.GOV  Wed Jul 28 16:46:35 2004
From: t.r.decarlo at LARC.NASA.GOV (Thom DeCarlo)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <41080CBE.3030004@pobox.com>
Message-ID: <006901c474e3$f9220110$959877c6@cts1149>

Frank Warmerdam wrote:
> 
> Thom,
> 
> Take a look at gdal/pymod/samples/val_repl.py.  It should do what you want
> I think.
> 

Ok, thanks. I'll look at that. 

Thom

(hmmm... now to figure out python... ;)



From sewell at dramail.com  Wed Jul 28 17:02:33 2004
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Filesize limit exceeded using Jpeg2000
Message-ID: <Pine.LNX.4.53.0407281638020.11721@server.dramail.com>


I'm running on the latest GDAL CVS and I'm trying to convert a file that
is about 4-5G into a .jp2  As soon as the .jp2 file reaches 2G in size I
get this error:

Input file size is 22920, 28830
0...10...20...30...40...50..ERROR 1:
TIFFAppendToStrip:03feb22182535_ortho_sharp.jp2: Write error at scanline
18017
ERROR 1: TIFFWriteScanline failed.
Filesize limit exceeded

My system certainly supports large files, so I'm assuming its a gdal or
jasper issue.  I have gdal compiled against the hacked jasper
( jasper-1.701.0.uuid ).  Any ideas?  Thanks.

Ken.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-431-1644                 Beavercreek, Ohio 45431-1608
sewell@dramail.com

From warmerdam at pobox.com  Wed Jul 28 17:15:23 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Filesize limit exceeded using Jpeg2000
In-Reply-To: <Pine.LNX.4.53.0407281638020.11721@server.dramail.com>
References: <Pine.LNX.4.53.0407281638020.11721@server.dramail.com>
Message-ID: <4108176B.8030101@pobox.com>

Ken Sewell wrote:
> I'm running on the latest GDAL CVS and I'm trying to convert a file that
> is about 4-5G into a .jp2  As soon as the .jp2 file reaches 2G in size I
> get this error:
> 
> Input file size is 22920, 28830
> 0...10...20...30...40...50..ERROR 1:
> TIFFAppendToStrip:03feb22182535_ortho_sharp.jp2: Write error at scanline
> 18017
> ERROR 1: TIFFWriteScanline failed.
> Filesize limit exceeded
> 
> My system certainly supports large files, so I'm assuming its a gdal or
> jasper issue.  I have gdal compiled against the hacked jasper
> ( jasper-1.701.0.uuid ).  Any ideas?  Thanks.

Ken,

First, I don't think you can practically produce JP2 files of this size
using JasPer.  As far as I know it needs to hold everything in RAM.   You
normally need the JP2KAK driver to produce large JP2 files.

Second, are you sure you are writting in JP2 format?  It is in the middle
of the TIFF driver where you run into problems.  What was the command you
issued?

Third, is VSI_LARGE_API_SUPPORTED defined to 1 in gdal/port/cpl_config.h?
If not, you won't be able to operate on files larger than 4GB.  If it is
and you are unable to product TIFF files in the 2-4GB range there is an
issue I would like to look into.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sewell at dramail.com  Wed Jul 28 18:04:51 2004
From: sewell at dramail.com (Ken Sewell)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Filesize limit exceeded using Jpeg2000
In-Reply-To: <4108176B.8030101@pobox.com>
References: <Pine.LNX.4.53.0407281638020.11721@server.dramail.com>
	<4108176B.8030101@pobox.com>
Message-ID: <Pine.LNX.4.53.0407281753300.11721@server.dramail.com>


1) I couldn't find any information on limits within JasPer, so I gave it
a shot :)

2) My mistake, I wasn't giving it the -of JPEG2000 option.  I thought
gdal could figure it out from the extension.  Using the following command:

gdal_translate -of JPEG2000 03feb22182535_ortho_sharp 03feb22182535_ortho_sharp.jp2

I get the following:

Input file size is 22920, 28830
0...10...20...30.ERROR 1: Unable to write scanline 0 of the component 1.

The first file is in ENVI format (which works great now, thanks alot).

3) Yes, VSI_LARGE_API_SUPPORTED is defined to 1.


I forgot to mention it but the system I'm running on is Suse linux 9.1, so
the kernel is a fairly recent 2.6.  Thanks.

Ken.

Ken Sewell                   Defense Research Associates
Project Engineer             3915 Germany Lane, Suite 102
937-431-1644                 Beavercreek, Ohio 45431-1608
sewell@dramail.com

On Wed, 28 Jul 2004, Frank Warmerdam wrote:

> Ken Sewell wrote:
> > I'm running on the latest GDAL CVS and I'm trying to convert a file that
> > is about 4-5G into a .jp2  As soon as the .jp2 file reaches 2G in size I
> > get this error:
> >
> > Input file size is 22920, 28830
> > 0...10...20...30...40...50..ERROR 1:
> > TIFFAppendToStrip:03feb22182535_ortho_sharp.jp2: Write error at scanline
> > 18017
> > ERROR 1: TIFFWriteScanline failed.
> > Filesize limit exceeded
> >
> > My system certainly supports large files, so I'm assuming its a gdal or
> > jasper issue.  I have gdal compiled against the hacked jasper
> > ( jasper-1.701.0.uuid ).  Any ideas?  Thanks.
>
> Ken,
>
> First, I don't think you can practically produce JP2 files of this size
> using JasPer.  As far as I know it needs to hold everything in RAM.   You
> normally need the JP2KAK driver to produce large JP2 files.
>
> Second, are you sure you are writting in JP2 format?  It is in the middle
> of the TIFF driver where you run into problems.  What was the command you
> issued?
>
> Third, is VSI_LARGE_API_SUPPORTED defined to 1 in gdal/port/cpl_config.h?
> If not, you won't be able to operate on files larger than 4GB.  If it is
> and you are unable to product TIFF files in the 2-4GB range there is an
> issue I would like to look into.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>

From schut at sarvision.com  Thu Jul 29 03:29:11 2004
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Question about gdal and ENVI.
In-Reply-To: <4107B9CD.8050804@pobox.com>
References: <Pine.LNX.4.53.0407271707580.28532@server.dramail.com>
	<Pine.LNX.4.53.0407281016510.8584@server.dramail.com>
	<4107B9CD.8050804@pobox.com>
Message-ID: <200407290929.11085.schut@sarvision.com>

Frank,

we do have a licensed copy of ENVI here, including documentation. Would it be 
legal if I simply copy and paste (read: type over) some interesting parts? I 
mean, scanning and sending this to you probably definitely is not legal. I 
could of course try to rephrase some things in my own words.
Reason I ask is, I don't know if you might get in trouble by 'hacking' the 
envi format this way...

Though probably illegal too, I'll cite the 'Permission to Reproduce this 
Manual':
'If you are a licensed user of this product, Research Systems, Inc. grants you 
a limited, nontransferable license to reproduce this particular document 
provided such copies are for your use only and are not sold or distributed to 
third parties. All such copies must contain the title page and this notice 
page in their entirety.'

Cheers,
Vincent.

On Wednesday 28 July 2004 16:35, Frank Warmerdam wrote:
> Ken Sewell wrote:
> > Frank,
> > 	Attached is one of the envi headers I'm having problems with.
> > If you need, I can provide more.  Thanks, I appreciate your help.
>
> Ken,
>
> I have added code in CVS to handle map_info systems of "Geographic
> Lat/Long" and to convert units=seconds back to degrees in GDAL.  I would
> like to get a list of possible coordinate systems, units and projections
> for ENVI if possible.  Sample .hdr files with different map_info setups are
> welcome as would any documentation on the map_info directive.
>
> Best regards,

-- 
-----------------------------
 Vincent Schut
 SarVision B.V.
 Wageningen, The Netherlands
 www.sarvision.com

From neteler at itc.it  Thu Jul 29 03:40:51 2004
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <4107F8F0.40002@pobox.com>
References: <006501c474d4$469d9e00$959877c6@cts1149> <4107F8F0.40002@pobox.com>
Message-ID: <20040729074051.GA30290@thuille.itc.it>

On Wed, Jul 28, 2004 at 03:05:20PM -0400, Frank Warmerdam wrote:
> Thom DeCarlo wrote:
> >Oops, found another... issue. The SRTM documentation states that the NODATA
> >value is -32768 and the shell script accommodates that by setting the
> >appropriate value in the header file. However, it appears that the rest of
> >the gdal software assumes that the NODATA value is -9999. Is there any way
> >to tell the gdal_translate program to change any NODATA values it 
> >encounters
> >to be -9999?
> 
> Thom,
> 
> The GDAL libraries should not assume a nodata value of -9999.  The data is
> being imported via the ESRI BIL format, right?  What does the .hdr file have
> for a NODATA value?  What does gdalinfo report about a dataset?

The .hdr is created in the script (example N59E018):

cat N59E018.hdr
BYTEORDER M
LAYOUT BIL
NROWS 1201
NCOLS 1201
NBANDS 1
NBITS 16
BANDROWBYTES 2402
TOTALROWBYTES 2402
BANDGAPBYTES 0
NODATA -32768
ULXMAP 18.0
ULYMAP 60.0
XDIM 0.000833333333333
YDIM 0.000833333333333


The resulting GeoTIFF file reports:

gdalinfo N59E018.tif
Driver: GTiff/GeoTIFF
Size is 1201, 1201
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (17.999583,60.000417)
Pixel Size = (0.00083333,-0.00083333)
Corner Coordinates:
Upper Left  (  17.9995833,  60.0004167) ( 17d59'58.50"E, 60d 0'1.50"N)
Lower Left  (  17.9995833,  58.9995833) ( 17d59'58.50"E, 58d59'58.50"N)
Upper Right (  19.0004167,  60.0004167) ( 19d 0'1.50"E, 60d 0'1.50"N)
Lower Right (  19.0004167,  58.9995833) ( 19d 0'1.50"E, 58d59'58.50"N)
Center      (  18.5000000,  59.5000000) ( 18d30'0.00"E, 59d30'0.00"N)
Band 1 Block=1201x3 Type=Int16, ColorInterp=Gray
  NoData Value=-32768

---------------------

BUT - Thom: 
Please have a look at the other script on that page
as some more bit shuffling is needed to get a correct
map. The output of above script is not sufficient.

Shell script:
 http://mpa.itc.it/rs/srtm/r.in.srtm

The relevant piece is:
 echo "mapping down large values due to INT16 format..."
 r.mapcalc "$FILE.meters=if($FILE >= 32767, $FILE - 32768, $FILE)"

I hope I got that right in the script.


Markus


From jluis at ualg.pt  Thu Jul 29 12:02:52 2004
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
References: <006001c474bb$72605a00$959877c6@cts1149>
Message-ID: <41091FAC.5F11237E@ualg.pt>

Hi,
I did a cvs yesterday night and now gdalinfo does not report the "GEOGCS[...
lines anymore.
This happens when reading a SRTM file.
However, gdalinfo of a ENVI or USGS SDST files those lines are reported.

J. Luis


From dron at ak4719.spb.edu  Thu Jul 29 12:48:26 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Filesize limit exceeded using Jpeg2000
In-Reply-To: <Pine.LNX.4.53.0407281753300.11721@server.dramail.com>
References: <Pine.LNX.4.53.0407281638020.11721@server.dramail.com>
	<4108176B.8030101@pobox.com>
	<Pine.LNX.4.53.0407281753300.11721@server.dramail.com>
Message-ID: <20040729164826.GA31648@ak4719.spb.edu>

On Wed, Jul 28, 2004 at 06:04:51PM -0400, Ken Sewell wrote:
> 1) I couldn't find any information on limits within JasPer, so I gave
> it a shot :)
> 
> 2) My mistake, I wasn't giving it the -of JPEG2000 option.  I thought
> gdal could figure it out from the extension.  Using the following command:
> 
> gdal_translate -of JPEG2000 03feb22182535_ortho_sharp 03feb22182535_ortho_sharp.jp2
> 
> I get the following:
> 
> Input file size is 22920, 28830
> 0...10...20...30.ERROR 1: Unable to write scanline 0 of the component 1.

It is definetely not possible to work with large files using JasPer. It
is limited by the 32-bit ofssets and sizes used in output streams, so
you should consider using other approaches. I shall make the appropriate
note at the GDAL format page. Anyway, it is interesting, is there any
size limit for the Kakadu?

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Thu Jul 29 13:00:27 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <41091FAC.5F11237E@ualg.pt>
References: <006001c474bb$72605a00$959877c6@cts1149>
	<41091FAC.5F11237E@ualg.pt>
Message-ID: <41092D2B.6090309@pobox.com>

Joaquim Luis wrote:
> Hi,
> I did a cvs yesterday night and now gdalinfo does not report the "GEOGCS[...
> lines anymore.
> This happens when reading a SRTM file.

Joaquim,

Is there an action item here?  Should it be reporting GEOGCS[]?  Is this
an ESRI BIL file?  What is in the .hdr?  Is there a .prj file?

Please provide more details, and assume I have forgotten everything you told
me before.  My interrupt beaten brain has alot of difficulty keeping track of
what is going on in the many email-slow conversations I am having at any
given time.

> However, gdalinfo of a ENVI or USGS SDST files those lines are reported.

Good.  It was you that reported the problem with the ENVI files not reporting
the coordinate system properly, right?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From greenberg at ucdavis.edu  Fri Jul 23 12:54:15 2004
From: greenberg at ucdavis.edu (Jonathan Greenberg)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Vector to raster?
Message-ID: <loom.20040723T185024-629@post.gmane.org>

Hi there, we are interested in developing an application that creates a list of 
raster-based x,y locations from input vector data (point, line or polygon) 
(e.g. we want to rasterize the vector data for use in extracting pixel-level 
data from satellite imagery).  Can OGR or GDAL perform this task?  If so, are 
point and line rasterization calculated in an optimal way (e.g. can I go 
directly from a point or line coverage to a set of x,y coordinates without 
needing to create a large raster coverage of the extent of the line or point 
coverage first?)  Thanks!

--j


From denzel1812 at yahoo.com.cn  Sat Jul 24 05:45:06 2004
From: denzel1812 at yahoo.com.cn (=?gb2312?q?Denzel?=)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] warning message when building GDAL-1.2.0 on window
Message-ID: <20040724094506.41483.qmail@web15309.mail.cnb.yahoo.com>

Hi

  I compile gdal-1.2.0 on windows2000,it seems some
warning message?!

My Server: Windows2000 advance Server (with sp4) 
Visual Studio 6 (with sp5) 

  my compile step:

(1)download gdal-1.2.0.tar.gz
(2)unzip it to c:\projects\gdal
(3)edit nmake.opt(you can see it below ,while I paste
the content of nmake.opt)
Edit c:\projects\gdal\nmake.opt at 
Line 6:
GDAL_HOME = "C:\projects\gdal"
Line 33:
VCDIR   = 	c:\Program Files\Microsoft Visual
Studio\VC98



(3)run command:vcvars32.bat
(4)run command:nmake /f makefile.vc >gdal-1.2.0.log
(you can see below,I paste the content of nmake.opt)

  Question: Why I get these warning message? Thanks!!

-------------------------------------------------
This is the  log file gdal-1.2.0.log I get it when
compile the gdal-1.2.0
-------------------------------------------------

	cd port
	nmake /nologo /f makefile.vc
	copy cpl_config.h.vc cpl_config.h
        1 file(s) copied.
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_conv.cpp
cpl_conv.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_error.cpp
cpl_error.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_string.cpp
cpl_string.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_vsisimple.cpp
cpl_vsisimple.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cplgetsymbol.cpp
cplgetsymbol.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_dir.cpp
cpl_dir.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_path.cpp
cpl_path.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_csv.cpp
cpl_csv.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_findfile.cpp
cpl_findfile.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_vsil_win32.cpp
cpl_vsil_win32.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_minixml.cpp
cpl_minixml.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_multiproc.cpp
cpl_multiproc.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_list.cpp
cpl_list.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
cpl_odbc.cpp
cpl_odbc.cpp
	lib /out:cpl.lib *.obj
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

	cd ..
	cd frmts/iso8211
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ddfmodule.cpp
ddfmodule.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ddfutils.cpp
ddfutils.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ddffielddefn.cpp
ddffielddefn.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ddfrecord.cpp
ddfrecord.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ddffield.cpp
ddffield.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ddfsubfielddefn.cpp
ddfsubfielddefn.cpp
	lib /out:libiso8211.lib ddfmodule.obj ddfutils.obj
ddffielddefn.obj ddfrecord.obj  ddffield.obj
ddfsubfielddefn.obj
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

	copy *.obj ..\o
ddffield.obj
ddffielddefn.obj
ddfmodule.obj
ddfrecord.obj
ddfsubfielddefn.obj
ddfutils.obj
        6 file(s) copied.
	cd ..\sdts
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtsdataset.cpp
sdtsdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtsiref.cpp
sdtsiref.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtscatd.cpp
sdtscatd.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtslinereader.cpp
sdtslinereader.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtslib.cpp
sdtslib.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtspointreader.cpp
sdtspointreader.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtsattrreader.cpp
sdtsattrreader.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtstransfer.cpp
sdtstransfer.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtspolygonreader.cpp
sdtspolygonreader.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtsxref.cpp
sdtsxref.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtsrasterreader.cpp
sdtsrasterreader.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c sdtsindexedreader.cpp
sdtsindexedreader.cpp
	copy *.obj ..\o
sdtsattrreader.obj
sdtscatd.obj
sdtsdataset.obj
sdtsindexedreader.obj
sdtsiref.obj
sdtslib.obj
sdtslinereader.obj
sdtspointreader.obj
sdtspolygonreader.obj
sdtsrasterreader.obj
sdtstransfer.obj
sdtsxref.obj
       12 file(s) copied.
	cd ..\..\ogr
	nmake /nologo ogr.lib frmts
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c
ogrgeometryfactory.cpp
ogrgeometryfactory.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrpoint.cpp
ogrpoint.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrcurve.cpp
ogrcurve.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_api.cpp
ogr_api.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrlinestring.cpp
ogrlinestring.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrpolygon.cpp
ogrpolygon.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrlinearring.cpp
ogrlinearring.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrutils.cpp
ogrutils.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrgeometry.cpp
ogrgeometry.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c
ogrgeometrycollection.cpp
ogrgeometrycollection.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrmultipolygon.cpp
ogrmultipolygon.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c
ogrmultilinestring.cpp
ogrmultilinestring.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_opt.cpp
ogr_opt.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrmultipoint.cpp
ogrmultipoint.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrfeature.cpp
ogrfeature.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrfeaturedefn.cpp
ogrfeaturedefn.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrfielddefn.cpp
ogrfielddefn.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srsnode.cpp
ogr_srsnode.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c
ogrspatialreference.cpp
ogrspatialreference.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_proj4.cpp
ogr_srs_proj4.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_fromepsg.cpp
ogr_fromepsg.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrct.cpp
ogrct.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c swq.c
swq.c
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrfeaturestyle.cpp
ogrfeaturestyle.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_esri.cpp
ogr_srs_esri.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrfeaturequery.cpp
ogrfeaturequery.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_validate.cpp
ogr_srs_validate.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_xml.cpp
ogr_srs_xml.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c
ograssemblepolygon.cpp
ograssemblepolygon.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr2gmlgeometry.cpp
ogr2gmlgeometry.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c gml2ogrgeometry.cpp
gml2ogrgeometry.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_pci.cpp
ogr_srs_pci.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_usgs.cpp
ogr_srs_usgs.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr_srs_dict.cpp
ogr_srs_dict.cpp
	lib /out:ogr.lib ogrgeometryfactory.obj ogrpoint.obj
ogrcurve.obj ogr_api.obj  ogrlinestring.obj
ogrpolygon.obj ogrlinearring.obj  ogrutils.obj
ogrgeometry.obj ogrgeometrycollection.obj 
ogrmultipolygon.obj ogrmultilinestring.obj ogr_opt.obj
 ogrmultipoint.obj ogrfeature.obj ogrfeaturedefn.obj 
ogrfielddefn.obj ogr_srsnode.obj
ogrspatialreference.obj  ogr_srs_proj4.obj
ogr_fromepsg.obj ogrct.obj swq.obj 
ogrfeaturestyle.obj ogr_srs_esri.obj
ogrfeaturequery.obj  ogr_srs_validate.obj
ogr_srs_xml.obj ograssemblepolygon.obj 
ogr2gmlgeometry.obj gml2ogrgeometry.obj
ogr_srs_pci.obj  ogr_srs_usgs.obj ogr_srs_dict.obj
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

	cd ogrsf_frmts
	nmake /nologo
	for %d in ( generic shape ntf sdts tiger s57 dgn
mitab gml avc  rec mem vrt      odbc ) do  cd %d  &&
nmake /NOLOGO /f makefile.vc  && cd ..

c:\projects\gdal\ogr\ogrsf_frmts>cd generic   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogrsfdriverregistrar.cpp
ogrsfdriverregistrar.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogrlayer.cpp
ogrlayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogr_gensql.cpp
ogr_gensql.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogrdatasource.cpp
ogrdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogrsfdriver.cpp
ogrsfdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogrregisterall.cpp
ogrregisterall.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogr_attrind.cpp
ogr_attrind.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..     -DODBC_ENABLED /c
ogr_miattrind.cpp
ogr_miattrind.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd shape   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
shape2ogr.cpp
shape2ogr.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
shpopen.c
shpopen.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
dbfopen.c
dbfopen.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
ogrshapedriver.cpp
ogrshapedriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
ogrshapedatasource.cpp
ogrshapedatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
ogrshapelayer.cpp
ogrshapelayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /DSHAPELIB_DLLEXPORT /c
shptree.c
shptree.c

C:\projects\gdal\ogr\ogrsf_frmts>cd ntf   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntf_estlayers.cpp
ntf_estlayers.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntffilereader.cpp
ntffilereader.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntfrecord.cpp
ntfrecord.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrntfdatasource.cpp
ogrntfdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrntfdriver.cpp
ogrntfdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrntflayer.cpp
ogrntflayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
ogrntffeatureclasslayer.cpp
ogrntffeatureclasslayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntf_generic.cpp
ntf_generic.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntf_raster.cpp
ntf_raster.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntf_codelist.cpp
ntf_codelist.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ntfstroke.cpp
ntfstroke.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd sdts   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/sdts 
-I..\..\../frmts/iso8211 /c ogrsdtsdatasource.cpp
ogrsdtsdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/sdts 
-I..\..\../frmts/iso8211 /c ogrsdtsdriver.cpp
ogrsdtsdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/sdts 
-I..\..\../frmts/iso8211 /c ogrsdtslayer.cpp
ogrsdtslayer.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd tiger   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrtigerdriver.cpp
ogrtigerdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
ogrtigerdatasource.cpp
ogrtigerdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrtigerlayer.cpp
ogrtigerlayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
tigercompletechain.cpp
tigercompletechain.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerfilebase.cpp
tigerfilebase.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigeraltname.cpp
tigeraltname.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerfeatureids.cpp
tigerfeatureids.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerzipcodes.cpp
tigerzipcodes.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerlandmarks.cpp
tigerlandmarks.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
tigerarealandmarks.cpp
tigerarealandmarks.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerkeyfeatures.cpp
tigerkeyfeatures.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
tigerpolychainlink.cpp
tigerpolychainlink.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerpolygon.cpp
tigerpolygon.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerpip.cpp
tigerpip.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerentitynames.cpp
tigerentitynames.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigeridhistory.cpp
tigeridhistory.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigertlidrange.cpp
tigertlidrange.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerzipplus4.cpp
tigerzipplus4.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
tigerpolygoncorrections.cpp
tigerpolygoncorrections.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerzerocellid.cpp
tigerzerocellid.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigeroverunder.cpp
tigeroverunder.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c tigerpoint.cpp
tigerpoint.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
tigerpolygoneconomic.cpp
tigerpolygoneconomic.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd s57   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c ogrs57driver.cpp
ogrs57driver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c ogrs57datasource.cpp
ogrs57datasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c ogrs57layer.cpp
ogrs57layer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c s57classregistrar.cpp
s57classregistrar.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c s57reader.cpp
s57reader.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c ddfrecordindex.cpp
ddfrecordindex.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c s57featuredefns.cpp
s57featuredefns.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c s57filecollector.cpp
s57filecollector.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\..\../frmts/iso8211
/c s57writer.cpp
s57writer.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd dgn   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c dgnopen.cpp
dgnopen.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c dgnread.cpp
dgnread.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c dgnfloat.cpp
dgnfloat.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c dgnstroke.cpp
dgnstroke.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c dgnhelp.cpp
dgnhelp.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c dgnwrite.cpp
dgnwrite.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrdgndriver.cpp
ogrdgndriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrdgndatasource.cpp
ogrdgndatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrdgnlayer.cpp
ogrdgnlayer.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd mitab   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_rawbinblock.cpp
mitab_rawbinblock.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_mapheaderblock.cpp
mitab_mapheaderblock.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_mapindexblock.cpp
mitab_mapindexblock.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_indfile.cpp
mitab_indfile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_tabview.cpp
mitab_tabview.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_bounds.cpp
mitab_bounds.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_mapobjectblock.cpp
mitab_mapobjectblock.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_mapcoordblock.cpp
mitab_mapcoordblock.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_feature.cpp
mitab_feature.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_feature_mif.cpp
mitab_feature_mif.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_mapfile.cpp
mitab_mapfile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_idfile.cpp
mitab_idfile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_datfile.cpp
mitab_datfile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_tabfile.cpp
mitab_tabfile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_miffile.cpp
mitab_miffile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c mitab_utils.cpp
mitab_utils.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_imapinfofile.cpp
mitab_imapinfofile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_middatafile.cpp
mitab_middatafile.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_maptoolblock.cpp
mitab_maptoolblock.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_coordsys.cpp
mitab_coordsys.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_tooldef.cpp
mitab_tooldef.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_spatialref.cpp
mitab_spatialref.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_ogr_driver.cpp
mitab_ogr_driver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_ogr_datasource.cpp
mitab_ogr_datasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_geometry.cpp
mitab_geometry.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -DOGR /c
mitab_tabseamless.cpp
mitab_tabseamless.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd gml   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
gmlpropertydefn.cpp
gmlpropertydefn.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
gmlfeatureclass.cpp
gmlfeatureclass.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
gmlfeature.cpp
gmlfeature.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
gmlreader.cpp
gmlreader.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
ogrgmldriver.cpp
ogrgmldriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
ogrgmldatasource.cpp
ogrgmldatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\..  -DHAVE_XERCES=0 /c
ogrgmllayer.cpp
ogrgmllayer.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd avc   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c avc_bin.c
avc_bin.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_binwr.c
avc_binwr.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_e00gen.c
avc_e00gen.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_e00parse.c
avc_e00parse.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_e00write.c
avc_e00write.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_e00read.c
avc_e00read.c
avc_e00read.c(635) : warning C4047: '==' : 'int '
differs in levels of indirection from 'void *'
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_mbyte.c
avc_mbyte.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c avc_misc.c
avc_misc.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
avc_rawbin.c
avc_rawbin.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
ogravcbindriver.cpp
ogravcbindriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
ogravcbindatasource.cpp
ogravcbindatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
ogravcbinlayer.cpp
ogravcbinlayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
ogravclayer.cpp
ogravclayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. -I..\shape /c
ogravcdatasource.cpp
ogravcdatasource.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd rec   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrrecdriver.cpp
ogrrecdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrrecdatasource.cpp
ogrrecdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrreclayer.cpp
ogrreclayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ll_recio.cpp
ll_recio.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd mem   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrmemdriver.cpp
ogrmemdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrmemdatasource.cpp
ogrmemdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrmemlayer.cpp
ogrmemlayer.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd vrt   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrvrtdriver.cpp
ogrvrtdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrvrtdatasource.cpp
ogrvrtdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrvrtlayer.cpp
ogrvrtlayer.cpp

C:\projects\gdal\ogr\ogrsf_frmts>cd odbc   && nmake
/NOLOGO /f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrodbcdriver.cpp
ogrodbcdriver.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrodbcdatasource.cpp
ogrodbcdatasource.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrodbclayer.cpp
ogrodbclayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c ogrodbctablelayer.cpp
ogrodbctablelayer.cpp
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I.. -I..\.. /c
ogrodbcselectlayer.cpp
ogrodbcselectlayer.cpp
	lib /out:ogrsf_frmts.lib generic\*.obj shape\*.obj
ntf\*.obj  sdts\*.obj s57\*.obj tiger\*.obj gml\*.obj 
mitab\*.obj dgn\*.obj avc\*.obj mem\*.obj  vrt\*.obj  
odbc\*.obj     rec\*.obj
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

	lib /out:ogrsf_frmts_sup.lib 
..\..\frmts\iso8211\*.obj 
..\..\frmts\sdts\sdtsattrreader.obj 
..\..\frmts\sdts\sdtscatd.obj 
..\..\frmts\sdts\sdtsiref.obj 
..\..\frmts\sdts\sdtslib.obj 
..\..\frmts\sdts\sdtslinereader.obj 
..\..\frmts\sdts\sdtspointreader.obj 
..\..\frmts\sdts\sdtspolygonreader.obj 
..\..\frmts\sdts\sdtsrasterreader.obj 
..\..\frmts\sdts\sdtstransfer.obj 
..\..\frmts\sdts\sdtsindexedreader.obj 
..\..\frmts\sdts\sdtsxref.obj
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

	cd ..
	cd ..
	cd gcore
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalopen.cpp
gdalopen.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdaldrivermanager.cpp
gdaldrivermanager.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdaldriver.cpp
gdaldriver.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdaldataset.cpp
gdaldataset.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalrasterband.cpp
gdalrasterband.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdal_misc.cpp
gdal_misc.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
rasterio.cpp
rasterio.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalrasterblock.cpp
gdalrasterblock.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalcolortable.cpp
gdalcolortable.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
overview.cpp
overview.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdaldefaultoverviews.cpp
gdaldefaultoverviews.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalmajorobject.cpp
gdalmajorobject.cpp
	cd ..\alg
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdaldither.cpp
gdaldither.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalmediancut.cpp
gdalmediancut.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdal_crs.c
gdal_crs.c
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdaltransformer.cpp
gdaltransformer.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalsimplewarp.cpp
gdalsimplewarp.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalwarper.cpp
gdalwarper.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalwarpkernel.cpp
gdalwarpkernel.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalwarpoperation.cpp
gdalwarpoperation.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdalchecksum.cpp
gdalchecksum.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
gdal_rpc.cpp
gdal_rpc.cpp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore  /c
contour.cpp
contour.cpp
	cd ..
	cd frmts
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-DFRMT_ceos -DFRMT_aigrid -DFRMT_elas -DFRMT_hfa
-DFRMT_gtiff -DFRMT_sdts -DFRMT_raw -DFRMT_gxf
-DFRMT_ceos2 -DFRMT_png  -DFRMT_dted -DFRMT_mem
-DFRMT_jdem -DFRMT_gif  -DFRMT_envisat -DFRMT_aaigrid
-DFRMT_usgsdem -DFRMT_l1b  -DFRMT_fit -DFRMT_vrt
-DFRMT_xpm -DFRMT_bmp  -DFRMT_nitf -DFRMT_pcidsk
-DFRMT_jpeg -DFRMT_bsb -DFRMT_zlib  /c
gdalallregister.cpp
gdalallregister.cpp
	copy gdalallregister.obj o
        1 file(s) copied.
	for %d in ( ceos aigrid elas hfa gtiff sdts raw gxf
ceos2 png  dted mem jdem gif  envisat aaigrid usgsdem
l1b  fit vrt xpm bmp  nitf pcidsk jpeg bsb zlib ) do 
cd %d  && nmake /NOLOGO /f makefile.vc  && cd ..

c:\projects\gdal\frmts>cd ceos   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ceosopen.c
ceosopen.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ceosdataset.cpp
ceosdataset.cpp
	copy *.obj ..\o
ceosdataset.obj
ceosopen.obj
        2 file(s) copied.

C:\projects\gdal\frmts>cd aigrid   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c aigdataset.cpp
aigdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c giodataset.cpp
giodataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c aigopen.c
aigopen.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c gridlib.c
gridlib.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c aigccitt.c
aigccitt.c
	copy *.obj ..\o
aigccitt.obj
aigdataset.obj
aigopen.obj
giodataset.obj
gridlib.obj
        5 file(s) copied.

C:\projects\gdal\frmts>cd elas   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c elasdataset.cpp
elasdataset.cpp
	copy *.obj ..\o
elasdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd hfa   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfaband.cpp
hfaband.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfadataset.cpp
hfadataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfadictionary.cpp
hfadictionary.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfaentry.cpp
hfaentry.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfafield.cpp
hfafield.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfaopen.cpp
hfaopen.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hfatype.cpp
hfatype.cpp
	copy *.obj ..\o
hfaband.obj
hfadataset.obj
hfadictionary.obj
hfaentry.obj
hfafield.obj
hfaopen.obj
hfatype.obj
        7 file(s) copied.

C:\projects\gdal\frmts>cd gtiff   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibtiff -Ilibgeotiff /c geotiff.cpp
geotiff.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibtiff -Ilibgeotiff /c gt_wkt_srs.cpp
gt_wkt_srs.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibtiff -Ilibgeotiff /c
gt_overview.cpp
gt_overview.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibtiff -Ilibgeotiff /c tif_overview.c
tif_overview.c
tif_overview.c(155) : warning C4761: integral size
mismatch in argument; conversion supplied
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibtiff -Ilibgeotiff /c tif_ovrcache.c
tif_ovrcache.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibtiff -Ilibgeotiff /c tif_memio.c
tif_memio.c
	cd libtiff
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_aux.c
tif_aux.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_close.c
tif_close.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_codec.c
tif_codec.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_color.c
tif_color.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_compress.c
tif_compress.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_dir.c
tif_dir.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_dirinfo.c
tif_dirinfo.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_dirread.c
tif_dirread.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_dirwrite.c
tif_dirwrite.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_dumpmode.c
tif_dumpmode.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_error.c
tif_error.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_extension.c
tif_extension.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_fax3.c
tif_fax3.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_fax3sm.c
tif_fax3sm.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_getimage.c
tif_getimage.c
tif_getimage.c(2036) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2037) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2038) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2039) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2040) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2041) : warning C4550: expression
evaluates to a function which is missing an argument
list
tif_getimage.c(2077) : warning C4550: expression
evaluates to a function which is missing an argument
list
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_jpeg.c
tif_jpeg.c
..\..\jpeg\libjpeg\jmorecfg.h(162) : warning C4142:
benign redefinition of type
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_flush.c
tif_flush.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_luv.c
tif_luv.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_lzw.c
tif_lzw.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_next.c
tif_next.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_open.c
tif_open.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_packbits.c
tif_packbits.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_pixarlog.c
tif_pixarlog.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_predict.c
tif_predict.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_print.c
tif_print.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_read.c
tif_read.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_swab.c
tif_swab.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_strip.c
tif_strip.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_thunder.c
tif_thunder.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_tile.c
tif_tile.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_vsi.c
tif_vsi.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_version.c
tif_version.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_warning.c
tif_warning.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_write.c
tif_write.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib -DZIP_SUPPORT
-I..\..\jpeg\libjpeg -DJPEG_SUPPORT /c tif_zip.c
tif_zip.c
	copy *.obj ..\..\o
tif_aux.obj
tif_close.obj
tif_codec.obj
tif_color.obj
tif_compress.obj
tif_dir.obj
tif_dirinfo.obj
tif_dirread.obj
tif_dirwrite.obj
tif_dumpmode.obj
tif_error.obj
tif_extension.obj
tif_fax3.obj
tif_fax3sm.obj
tif_flush.obj
tif_getimage.obj
tif_jpeg.obj
tif_luv.obj
tif_lzw.obj
tif_next.obj
tif_open.obj
tif_packbits.obj
tif_pixarlog.obj
tif_predict.obj
tif_print.obj
tif_read.obj
tif_strip.obj
tif_swab.obj
tif_thunder.obj
tif_tile.obj
tif_version.obj
tif_vsi.obj
tif_warning.obj
tif_write.obj
tif_zip.obj
       35 file(s) copied.
	cd ..
	cd libgeotiff
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c xtiff.c
xtiff.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_free.c
geo_free.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_get.c
geo_get.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_names.c
geo_names.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_new.c
geo_new.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_print.c
geo_print.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_set.c
geo_set.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_tiffp.c
geo_tiffp.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_write.c
geo_write.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_normalize.c
geo_normalize.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geo_extra.c
geo_extra.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\libtiff /c geotiff_proj4.c
geotiff_proj4.c
	copy *.obj ..\..\o
geotiff_proj4.obj
geo_extra.obj
geo_free.obj
geo_get.obj
geo_names.obj
geo_new.obj
geo_normalize.obj
geo_print.obj
geo_set.obj
geo_tiffp.obj
geo_write.obj
xtiff.obj
       12 file(s) copied.
	cd ..
	copy *.obj ..\o
geotiff.obj
gt_overview.obj
gt_wkt_srs.obj
tif_memio.obj
tif_overview.obj
tif_ovrcache.obj
        6 file(s) copied.

C:\projects\gdal\frmts>cd sdts   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	copy *.obj ..\o
sdtsattrreader.obj
sdtscatd.obj
sdtsdataset.obj
sdtsindexedreader.obj
sdtsiref.obj
sdtslib.obj
sdtslinereader.obj
sdtspointreader.obj
sdtspolygonreader.obj
sdtsrasterreader.obj
sdtstransfer.obj
sdtsxref.obj
       12 file(s) copied.

C:\projects\gdal\frmts>cd raw   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c rawdataset.cpp
rawdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c ehdrdataset.cpp
ehdrdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c pauxdataset.cpp
pauxdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c doq1dataset.cpp
doq1dataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c hkvdataset.cpp
hkvdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c mffdataset.cpp
mffdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c pnmdataset.cpp
pnmdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c fujibasdataset.cpp
fujibasdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c doq2dataset.cpp
doq2dataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c envidataset.cpp
envidataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c gscdataset.cpp
gscdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c fastdataset.cpp
fastdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c atlsci_spheroid.cpp
atlsci_spheroid.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c btdataset.cpp
btdataset.cpp
	copy *.obj ..\o
atlsci_spheroid.obj
btdataset.obj
doq1dataset.obj
doq2dataset.obj
ehdrdataset.obj
envidataset.obj
fastdataset.obj
fujibasdataset.obj
gscdataset.obj
hkvdataset.obj
mffdataset.obj
pauxdataset.obj
pnmdataset.obj
rawdataset.obj
       14 file(s) copied.

C:\projects\gdal\frmts>cd gxf   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c gxfopen.c
gxfopen.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c gxfdataset.cpp
gxfdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c gxf_ogcwkt.c
gxf_ogcwkt.c
	copy *.obj ..\o
gxfdataset.obj
gxfopen.obj
gxf_ogcwkt.obj
        3 file(s) copied.

C:\projects\gdal\frmts>cd ceos2   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c sar_ceosdataset.cpp
sar_ceosdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c ceosrecipe.c
ceosrecipe.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c ceossar.c
ceossar.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c ceos.c
ceos.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c link.c
link.c
	copy *.obj ..\o
ceos.obj
ceosrecipe.obj
ceossar.obj
link.obj
sar_ceosdataset.obj
        5 file(s) copied.

C:\projects\gdal\frmts>cd png   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\zlib -Ilibpng /c pngdataset.cpp
pngdataset.cpp
	copy *.obj ..\o
pngdataset.obj
        1 file(s) copied.
	cd libpng
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c png.c
png.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngerror.c
pngerror.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pnggccrd.c
pnggccrd.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngget.c
pngget.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngmem.c
pngmem.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngpread.c
pngpread.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngread.c
pngread.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngrio.c
pngrio.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngrtran.c
pngrtran.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngrutil.c
pngrutil.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngset.c
pngset.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngtrans.c
pngtrans.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngvcrd.c
pngvcrd.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngwio.c
pngwio.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngwrite.c
pngwrite.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngwtran.c
pngwtran.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore -I..\..\zlib /c pngwutil.c
pngwutil.c
	copy *.obj ..\..\o
png.obj
pngerror.obj
pnggccrd.obj
pngget.obj
pngmem.obj
pngpread.obj
pngread.obj
pngrio.obj
pngrtran.obj
pngrutil.obj
pngset.obj
pngtrans.obj
pngvcrd.obj
pngwio.obj
pngwrite.obj
pngwtran.obj
pngwutil.obj
       17 file(s) copied.
	cd ..

C:\projects\gdal\frmts>cd dted   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c dted_api.c
dted_api.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c dteddataset.cpp
dteddataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c dted_create.c
dted_create.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c dted_ptstream.c
dted_ptstream.c
	copy *.obj ..\o
dteddataset.obj
dted_api.obj
dted_create.obj
dted_ptstream.obj
        4 file(s) copied.

C:\projects\gdal\frmts>cd mem   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c memdataset.cpp
memdataset.cpp
	copy *.obj ..\o
memdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd jdem   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c jdemdataset.cpp
jdemdataset.cpp
	copy *.obj ..\o
jdemdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd gif   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibungif /c gifdataset.cpp
gifdataset.cpp
	copy *.obj ..\o
gifdataset.obj
        1 file(s) copied.
	cd libungif
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c dgif_lib.c
dgif_lib.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c egif_lib.c
egif_lib.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c gif_err.c
gif_err.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c gifalloc.c
gifalloc.c
	copy *.obj ..\..\o
dgif_lib.obj
egif_lib.obj
gifalloc.obj
gif_err.obj
        4 file(s) copied.
	cd ..

C:\projects\gdal\frmts>cd envisat   && nmake /NOLOGO
/f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c envisatdataset.cpp
envisatdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c EnvisatFile.c
EnvisatFile.c
	copy *.obj ..\o
envisatdataset.obj
EnvisatFile.obj
        2 file(s) copied.

C:\projects\gdal\frmts>cd aaigrid   && nmake /NOLOGO
/f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c aaigriddataset.cpp
aaigriddataset.cpp
	copy *.obj ..\o
aaigriddataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd usgsdem   && nmake /NOLOGO
/f makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\iso8211 /c usgsdemdataset.cpp
usgsdemdataset.cpp
	copy *.obj ..\o
usgsdemdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd l1b   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c l1bdataset.cpp
l1bdataset.cpp
	copy *.obj ..\o
l1bdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd fit   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c fit.cpp
fit.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c fitdataset.cpp
fitdataset.cpp
	copy *.obj ..\o
fit.obj
fitdataset.obj
        2 file(s) copied.

C:\projects\gdal\frmts>cd vrt   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c vrtdataset.cpp
vrtdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c vrtrasterband.cpp
vrtrasterband.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c vrtdriver.cpp
vrtdriver.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c vrtsources.cpp
vrtsources.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c vrtfilters.cpp
vrtfilters.cpp
	copy *.obj ..\o
vrtdataset.obj
vrtdriver.obj
vrtfilters.obj
vrtrasterband.obj
vrtsources.obj
        5 file(s) copied.

C:\projects\gdal\frmts>cd xpm   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\mem /c xpmdataset.cpp
xpmdataset.cpp
	copy *.obj ..\o
xpmdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd bmp   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c bmpdataset.cpp
bmpdataset.cpp
	copy *.obj ..\o
bmpdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd nitf   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c nitfdataset.cpp
nitfdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c nitffile.c
nitffile.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c nitfimage.c
nitfimage.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c mgrs.c
mgrs.c
	copy *.obj ..\o
mgrs.obj
nitfdataset.obj
nitffile.obj
nitfimage.obj
        4 file(s) copied.

C:\projects\gdal\frmts>cd pcidsk   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -I..\raw /c pcidskdataset.cpp
pcidskdataset.cpp
	copy *.obj ..\o
pcidskdataset.obj
        1 file(s) copied.

C:\projects\gdal\frmts>cd jpeg   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore -Ilibjpeg /c jpgdataset.cpp
jpgdataset.cpp
	copy *.obj ..\o
jpgdataset.obj
        1 file(s) copied.
	cd libjpeg
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcapimin.c
jcapimin.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcapistd.c
jcapistd.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jccoefct.c
jccoefct.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jccolor.c
jccolor.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcdctmgr.c
jcdctmgr.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jchuff.c
jchuff.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcinit.c
jcinit.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcmainct.c
jcmainct.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcmarker.c
jcmarker.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcmaster.c
jcmaster.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcomapi.c
jcomapi.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcparam.c
jcparam.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcphuff.c
jcphuff.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcprepct.c
jcprepct.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jcsample.c
jcsample.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jctrans.c
jctrans.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdapimin.c
jdapimin.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdapistd.c
jdapistd.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdatadst.c
jdatadst.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdatasrc.c
jdatasrc.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdcoefct.c
jdcoefct.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdcolor.c
jdcolor.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jddctmgr.c
jddctmgr.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdhuff.c
jdhuff.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdinput.c
jdinput.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdmainct.c
jdmainct.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdmarker.c
jdmarker.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdmaster.c
jdmaster.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdmerge.c
jdmerge.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdphuff.c
jdphuff.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdpostct.c
jdpostct.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdsample.c
jdsample.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jdtrans.c
jdtrans.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jerror.c
jerror.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jfdctflt.c
jfdctflt.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jfdctfst.c
jfdctfst.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jfdctint.c
jfdctint.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jidctflt.c
jidctflt.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jidctfst.c
jidctfst.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jidctint.c
jidctint.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jidctred.c
jidctred.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jquant1.c
jquant1.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jquant2.c
jquant2.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jutils.c
jutils.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jmemmgr.c
jmemmgr.c
	cl /nologo /Ox /MD -I..\..\..\port -I..\..\..\ogr
-I..\..\..\gcore  /c jmemansi.c
jmemansi.c
	lib /out:libjpeg.lib jcapimin.obj jcapistd.obj
jccoefct.obj jccolor.obj jcdctmgr.obj jchuff.obj 
jcinit.obj jcmainct.obj jcmarker.obj jcmaster.obj
jcomapi.obj jcparam.obj  jcphuff.obj jcprepct.obj
jcsample.obj jctrans.obj jdapimin.obj jdapistd.obj 
jdatadst.obj jdatasrc.obj jdcoefct.obj jdcolor.obj
jddctmgr.obj jdhuff.obj  jdinput.obj jdmainct.obj
jdmarker.obj jdmaster.obj jdmerge.obj jdphuff.obj 
jdpostct.obj jdsample.obj jdtrans.obj jerror.obj
jfdctflt.obj jfdctfst.obj  jfdctint.obj jidctflt.obj
jidctfst.obj jidctint.obj jidctred.obj jquant1.obj 
jquant2.obj jutils.obj jmemmgr.obj jmemansi.obj
Microsoft (R) Library Manager Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

	copy *.obj ..\..\o
jcapimin.obj
jcapistd.obj
jccoefct.obj
jccolor.obj
jcdctmgr.obj
jchuff.obj
jcinit.obj
jcmainct.obj
jcmarker.obj
jcmaster.obj
jcomapi.obj
jcparam.obj
jcphuff.obj
jcprepct.obj
jcsample.obj
jctrans.obj
jdapimin.obj
jdapistd.obj
jdatadst.obj
jdatasrc.obj
jdcoefct.obj
jdcolor.obj
jddctmgr.obj
jdhuff.obj
jdinput.obj
jdmainct.obj
jdmarker.obj
jdmaster.obj
jdmerge.obj
jdphuff.obj
jdpostct.obj
jdsample.obj
jdtrans.obj
jerror.obj
jfdctflt.obj
jfdctfst.obj
jfdctint.obj
jidctflt.obj
jidctfst.obj
jidctint.obj
jidctred.obj
jmemansi.obj
jmemmgr.obj
jquant1.obj
jquant2.obj
jutils.obj
       46 file(s) copied.
	cd ..

C:\projects\gdal\frmts>cd bsb   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c bsbdataset.cpp
bsbdataset.cpp
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c bsb_read.c
bsb_read.c
	copy *.obj ..\o
bsbdataset.obj
bsb_read.obj
        2 file(s) copied.

C:\projects\gdal\frmts>cd zlib   && nmake /NOLOGO /f
makefile.vc   && cd .. 
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c adler32.c
adler32.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c compress.c
compress.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c crc32.c
crc32.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c deflate.c
deflate.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c gzio.c
gzio.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c infblock.c
infblock.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c infcodes.c
infcodes.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c inffast.c
inffast.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c inflate.c
inflate.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c infutil.c
infutil.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c inftrees.c
inftrees.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c trees.c
trees.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c uncompr.c
uncompr.c
	cl /nologo /Ox /MD -I..\..\port -I..\..\ogr
-I..\..\gcore  /c zutil.c
zutil.c
	copy *.obj ..\o
adler32.obj
compress.obj
crc32.obj
deflate.obj
gzio.obj
infblock.obj
infcodes.obj
inffast.obj
inflate.obj
inftrees.obj
infutil.obj
trees.obj
uncompr.obj
zutil.obj
       14 file(s) copied.
	cd ..
	link /dll /debug
/INCLUDE:_OCTNewCoordinateTransformation 
/INCLUDE:_OGRRegisterAll 
/INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate
 /INCLUDE:_OPTGetProjectionMethods 
/INCLUDE:_OGR_G_GetPointCount
/INCLUDE:_GDALSimpleImageWarp 
/INCLUDE:_GDALSuggestedWarpOutput 
/INCLUDE:_GDALGCPTransform 
/INCLUDE:_GDALComputeMedianCutPCT 
/INCLUDE:_GDALDitherRGB2PCT port\*.obj gcore\*.obj
alg\*.obj frmts\o\*.obj
ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib     
odbc32.lib                   /out:gdal12.dll
/implib:gdal_i.lib 
Microsoft (R) Incremental Linker Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

   Creating library gdal_i.lib and object gdal_i.exp
	cd apps
	nmake /nologo /f makefile.vc
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdal_translate.cpp  ..\gdal_i.lib 
/link 
gdal_translate.cpp
gdal_translate.cpp(778) : warning C4508: 'main' :
function should return a value; 'void' return type
assumed
   Creating library gdal_translate.lib and object
gdal_translate.exp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdalinfo.c  ..\gdal_i.lib  /link 
gdalinfo.c
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdaladdo.cpp  ..\gdal_i.lib  /link

gdaladdo.cpp
gdaladdo.cpp(133) : warning C4508: 'main' : function
should return a value; 'void' return type assumed
   Creating library gdaladdo.lib and object
gdaladdo.exp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore 
-I..\frmts -I..\alg gdalwarp.cpp  ..\gdal_i.lib  /link

gdalwarp.cpp
gdalwarp.cpp(521) : warning C4508: 'main' : function
should return a value; 'void' return type assumed
   Creating library gdalwarp.lib and object
gdalwarp.exp
	cl /I.. /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
 -I..\frmts -I..\alg gdaltindex.c 
../ogr/ogrsf_frmts/shape/shpopen.c 
../ogr/ogrsf_frmts/shape/dbfopen.c   ..\gdal_i.lib
/link 
gdaltindex.c
shpopen.c
dbfopen.c
Generating Code...
	cd ..
	cd pymod
	if exist "D:\Program Files\Python22"\python.exe nmake
/nologo /f makefile.vc
	cd ..
	cd ogr
	nmake /nologo default
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogrinfo.cpp
ogrinfo.cpp
	cl /Zi /MTd ogrinfo.obj ..\gdal_i.lib  /link 
Microsoft (R) Incremental Linker Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

/out:ogrinfo.exe 
/debug 
ogrinfo.obj 
..\gdal_i.lib 
   Creating library ogrinfo.lib and object ogrinfo.exp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c test_ogrsf.cpp
test_ogrsf.cpp
	cl /Zi /MTd test_ogrsf.obj ogrgeometryfactory.obj
ogrpoint.obj ogrcurve.obj ogr_api.obj 
ogrlinestring.obj ogrpolygon.obj ogrlinearring.obj 
ogrutils.obj ogrgeometry.obj ogrgeometrycollection.obj
 ogrmultipolygon.obj ogrmultilinestring.obj
ogr_opt.obj  ogrmultipoint.obj ogrfeature.obj
ogrfeaturedefn.obj  ogrfielddefn.obj ogr_srsnode.obj
ogrspatialreference.obj  ogr_srs_proj4.obj
ogr_fromepsg.obj ogrct.obj swq.obj 
ogrfeaturestyle.obj ogr_srs_esri.obj
ogrfeaturequery.obj  ogr_srs_validate.obj
ogr_srs_xml.obj ograssemblepolygon.obj 
ogr2gmlgeometry.obj gml2ogrgeometry.obj
ogr_srs_pci.obj  ogr_srs_usgs.obj ogr_srs_dict.obj
ogrsf_frmts\ogrsf_frmts.lib
ogrsf_frmts\ogrsf_frmts_sup.lib  oledb.lib ole32.lib
oleaut32.lib ../port/cpl.lib     odbc32.lib           
       /link 
Microsoft (R) Incremental Linker Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

/out:test_ogrsf.exe 
/debug 
test_ogrsf.obj 
ogrgeometryfactory.obj 
ogrpoint.obj 
ogrcurve.obj 
ogr_api.obj 
ogrlinestring.obj 
ogrpolygon.obj 
ogrlinearring.obj 
ogrutils.obj 
ogrgeometry.obj 
ogrgeometrycollection.obj 
ogrmultipolygon.obj 
ogrmultilinestring.obj 
ogr_opt.obj 
ogrmultipoint.obj 
ogrfeature.obj 
ogrfeaturedefn.obj 
ogrfielddefn.obj 
ogr_srsnode.obj 
ogrspatialreference.obj 
ogr_srs_proj4.obj 
ogr_fromepsg.obj 
ogrct.obj 
swq.obj 
ogrfeaturestyle.obj 
ogr_srs_esri.obj 
ogrfeaturequery.obj 
ogr_srs_validate.obj 
ogr_srs_xml.obj 
ograssemblepolygon.obj 
ogr2gmlgeometry.obj 
gml2ogrgeometry.obj 
ogr_srs_pci.obj 
ogr_srs_usgs.obj 
ogr_srs_dict.obj 
ogrsf_frmts\ogrsf_frmts.lib 
ogrsf_frmts\ogrsf_frmts_sup.lib 
oledb.lib 
ole32.lib 
oleaut32.lib 
../port/cpl.lib 
odbc32.lib 
   Creating library test_ogrsf.lib and object
test_ogrsf.exp
	cl /nologo /Ox /MD -I..\port -I..\ogr -I..\gcore
-I\inc  -I"c:\Program Files\Microsoft Visual
Studio\VC98\ATL\Include" -DWIN32  -I. -Iogrsf_frmts
-I..\frmts\gtiff\libgeotiff    /c ogr2ogr.cpp
ogr2ogr.cpp
	cl /Zi /MTd ogr2ogr.obj ..\gdal_i.lib  /link 
Microsoft (R) Incremental Linker Version 6.00.8447
Copyright (C) Microsoft Corp 1992-1998. All rights
reserved.

/out:ogr2ogr.exe 
/debug 
ogr2ogr.obj 
..\gdal_i.lib 
   Creating library ogr2ogr.lib and object ogr2ogr.exp
	cd ..



------------------------------------
this is the nmake.opt
--------------------------------------------

# Location to install .exe, .dll and python stuff
# Edit as required. GDAL_HOME is used for convenience
here,
# but this particular relative organization is not
mandatory.

GDAL_HOME = "C:\projects\gdal"
BINDIR = $(GDAL_HOME)\bin
PY_INST_DIR = $(GDAL_HOME)\pymod
LIBDIR = $(GDAL_HOME)\lib
INCDIR = $(GDAL_HOME)\include
DATADIR = $(GDAL_HOME)\data

# Set this to the installed directory containing
python.  If you don't
# have python just let it point to a directory that
does not exist (as now). 
PYDIR   =	"D:\Program Files\Python22"

# Uncomment the first for an optimized build or the
second for a debug build.
OPTFLAGS=	/nologo /Ox /MD
#OPTFLAGS=	/nologo /Zi /Fd$(GDAL_ROOT)\gdal.pdb

# Version number embedded in DLL name. 
VERSION =	12

# Uncomment the following to link OGR utilities
against main GDAL DLL
# instead of statically linking against OGR libraries.
DLLBUILD=1

# Enable all OGR formats, or only raster formats? 
Comment out to disable
# vector formats. 
INCLUDE_OGR_FRMTS = YES

# Location of Visual C++ directory (only required for
following SETARGV stuff)
VCDIR   = 	c:\Program Files\Microsoft Visual
Studio\VC98

# Enable the following if VCDIR set properly, and you
want the utility
# programs to be able to expand wildcards. 
#SETARGV =	"$(VCDIR)\lib\setargv.obj"

# Comment out the following to disable BSB support.
BSB_SUPPORTED = 1

# Comment out the following to disable ODBC support.
ODBC_SUPPORTED = 1

# Comment out the following to disable JPEG support.
JPEG_SUPPORTED = 1

#if using an external jpeg library uncomment the
follwing lines
#JPEG_EXTERNAL_LIB = 1
#JPEGDIR = c:/projects/jpeg-6b
#JPEG_LIB = $(JPEGDIR)/libjpeg.lib

#if using an external png library uncomment the
follwing lines
#PNG_EXTERNAL_LIB = 1
#PNGDIR = c:/projects/libpng-1.0.8
#PNG_LIB = $(PNGDIR)/libpng.lib

# if using an external libtiff library
#TIFF_INC =	-Ic:/warmerda/libtiff/libtiff
#TIFF_LIB =	c:/warmerda/libtiff/libtiff/libtiff_i.lib

# if using an external libgeotiff library
#GEOTIFF_INC =   -Ic:/warmerda/libgeotiff
-Ic:/warmerda/libgeotiff/libxtiff
#GEOTIFF_LIB =   C:/warmerda/libgeotiff/geotiff_i.lib

# Uncomment the following and update to enable ECW
support.
#ECWDIR  = 	D:\Software\ECW_SDK
#ECWLIB  =       $(ECWDIR)\lib\NCSEcw.lib
$(ECWDIR)\lib\NCSEcwC.lib \
#		$(ECWDIR)\lib\NCSUtil.lib

# Uncomment the following and update to enable OGDI
support.
#OGDIDIR =	D:\warmerda\iii\devdir
#OGDIVER =	31
#OGDILIB =	$(OGDIDIR)\lib\$(TARGET)\ogdi$(OGDIVER).lib
\
#		$(OGDIDIR)\lib\$(TARGET)\zlib_ogdi$(OGDIVER).lib

# Uncomment for Xerces based GML support.
#XERCES_DIR =
d:\warmerda\iii\drivers\gml\xerces-c1_7_0-win32
#XERCES_INCLUDE = -I$(XERCES_DIR)/include
-I$(XERCES_DIR)/include/xercesc
#XERCES_LIB = $(XERCES_DIR)/lib/xerces-c_1.lib

# Uncomment for JasPer based JPEG2000 support
#JASPER_DIR = d:\projects\jasper-1.700.2.uuid
#JASPER_INCLUDE =
-I$(JASPER_DIR)\src\libjasper\include
-DJAS_WIN_MSVC_BUILD
#JASPER_LIB =
$(JASPER_DIR)\src\msvc\Win32_Release\libjasper.lib

# Uncommment if you have Kakadu 4.0 or newer
#KAKDIR =	D:\warmerda\jp2\kakadu

# Uncomment the following and update to enable NCSA
HDF Release 4 support.
#HDF4_DIR =	D:\warmerda\HDF41r5
#HDF4_LIB =	/LIBPATH:$(HDF4_DIR)\lib Ws2_32.lib

# Uncomment the following for MrSID support.
# You will likely require /MD and /EHsc in OPTFLAGS. 
# If you have old MrSID DSDK version 3.1.x, uncomment
MRSID_FLAGS option.
# Otherwise it should stays commented out.
#MRSID_DIR =	d:\projects\mrsid
#MRSID_INCLUDE = $(MRSID_DIR)\include
#MRSID_LIB =	/LIBPATH:$(MRSID_DIR)\lib \
#		MrSIDDecode_md.lib lt_xTrans_md.lib advapi32.lib
user32.lib
#MRSID_FLAGS =	-DMRSID_DSDK_VERSION_31

# Uncomment the following and update to enable FME
support.
#FME_DIR =	d:\Software\fme

# Uncomment the following to enable FITS format
support
#FITS_DIR =	"D:\Users\154712\My Documents\Visual
Studio Projects\cfitsio"
#FITS_LIB =	$(FITS_DIR)\cfitsio.lib

# Uncomment the following to enable NetCDF format.
#NETCDF_SETTING=yes
#NETCDF_LIB=C:\Software\netcdf\lib\netcdf.lib
#NETCDF_INC_DIR=C:\Software\netcdf\include

# PROJ.4 stuff
# Uncomment the following lines to link PROJ.4 library
statically. Otherwise
# it will be linked dynamically during runtime.
#PROJ_FLAGS = -DPROJ_STATIC
#PROJ_INCLUDE = d:\projects\proj.4\src
#PROJ_LIB = d:\projects\proj.4\src

!IFDEF ORACLE_HOME
OCI_LIB =	$(ORACLE_HOME)\oci\lib\msvc\ociw32.lib \
		$(ORACLE_HOME)\oci\lib\msvc\oci.lib
!ENDIF

# Any extra libraries needed on this platform?
ADD_LIBS	=

# Comment out the following if you want to build with
Python support, but
# you don't have Numeric Python installed (with
include files).  Numeric
# integration may not work.
HAVE_NUMPY=1

########### END OF STUFF THAT NORMALLY NEEDS TO BE
UPDATED ##################


# Location of MS Data Access SDK (not really needed
anymore I think)
#MSDASDK =	D:\Software\MDAC_2.6

GDAL_DLL =	gdal$(VERSION).dll

INC	=	-I$(GDAL_ROOT)\port -I$(GDAL_ROOT)\ogr
-I$(GDAL_ROOT)\gcore

#LINKER_FLAGS =	/NODEFAULTLIB:LIBC 

CFLAGS	=	$(OPTFLAGS) $(INC) $(EXTRAFLAGS)
MAKE	=	nmake /nologo

CC	=	cl

CPLLIB	=    $(GDAL_ROOT)/port/cpl.lib

!IFDEF DLLBUILD
GDALLIB	=    $(GDAL_ROOT)/gdal_i.lib
!ELSE
GDALLIB	=    $(GDAL_ROOT)/gdal.lib
!ENDIF

!IFDEF ODBC_SUPPORTED
ODBCLIB = odbc32.lib
!ENDIF

EXTERNAL_LIBS =	$(OGDILIB) $(XERCES_LIB) $(OCI_LIB)
$(PG_LIB) $(ODBCLIB) \
		$(ECWLIB) $(HDF4_LIB) $(FME_LIB) $(JASPER_LIB)
$(MRSID_LIB) \
		$(FITS_LIB) $(JPEG_LIB) $(PNG_LIB) $(NETCDF_LIB)
$(PROJ4_LIB) \
		$(GEOTIFF_LIB) $(TIFF_LIB) $(PROJ_LIB) $(ADD_LIBS)

.c.obj:	
	$(CC) $(CFLAGS) /c $*.c

.cpp.obj:	
	$(CC) $(CFLAGS) /c $*.cpp


_________________________________________________________
Do You Yahoo!?
150MP3
http://music.yisou.com/

http://image.yisou.com
100
http://cn.rd.yahoo.com/mail_cn/tag/100m/*http://cn.promo.yahoo.com/minisite/100m/

From jicicuendez at gmv.es  Mon Jul 26 04:00:37 2004
From: jicicuendez at gmv.es (Juan Cicuendez)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Re: Problems when warping
References: <loom.20040723T161943-650@post.gmane.org>
	<4101545F.2030606@pobox.com>
Message-ID: <loom.20040726T094328-675@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> Juan Cicuendez wrote:
> > Hi everybody,
> > 
> > I am trying to change the projection of an RGB scanned map. This is my 
first 
> > experience with GDAL and I followed the instructions of the Warping 
tutorial. 
> > In order to process all the three bands I set psWarpOptions->nBandCount = 0;
> > I finally obtained the geotiff file but when I try to visualised it from 
ERDAS 
> > it only recognises the first band, however if I try from ENVI it goes fine 
an 
> > sees all the bands. Looking at the image with windows Imaging application, 
it 
> > looks very strange and this could be a problem with the interleaving of the 
> > data. Has anybody come across this problem before? Does anybody know how to 
fix 
> > this problems in order that the files can be visualised from ERDAS?
> > 
> > I would appreciate if anyone could give me hand, I tried many things but 
> > nothing seemed to work.
> 
> Juan,
> 
> By default GDAL creates TIFF files with PLANARCONFIG_SEPERATE (band 
interleaved)
> but I have observed some versions of Erdas tools and other applications having
> problems with this.  You can pass the INTERLEAVE=PIXEL creation option to the
> GTiff driver when creating a new TIFF file to create a pixel interleaved file.
> 
> Of course, if you could provide a smallish sample file demonstrating the
> problem it would be easier to determine if this is the issue.
> 
> Best regards,
> 

Thanks a lot for your help Frank,

How can I pass the option INTERLEAVE=PIXEL to the create method? How can I find 
all the options for a particualar driver (GeoTiff in this case). It seems 
missing in the documentation. Following your suggestion I did something like: 

char *pszOptions = "INTERLEAVE=PIXEL"
hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
&pszOptions );

but I got an exception error. The complete piece of code that I wrote following 
the tutorial is:

CPLErr change_projection(char *filename, char *outputfilename, char *pszDstWKT)
{

    GDALDriverH hDriver;
    GDALDataType eDT;
    GDALDatasetH hDstDS;
    GDALDatasetH hSrcDS;

    // Open the source file. 
    hSrcDS = GDALOpen( filename, GA_ReadOnly );
    CPLAssert( hSrcDS != NULL );
    
    // Create output with same datatype as first input band. 

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    // Get output driver (GeoTIFF format)

    hDriver = GDALGetDriverByName( "GTiff" );
    CPLAssert( hDriver != NULL );

    // Get Source coordinate system. 

    char *pszSrcWKT = NULL;

    pszSrcWKT = (char *) GDALGetProjectionRef( hSrcDS );
    CPLAssert( pszSrcWKT != NULL && strlen(pszSrcWKT) > 0 );


    // Create a transformer that maps from source pixel/line coordinates
    // to destination georeferenced coordinates (not destination 
    // pixel line).  We do that by omitting the destination dataset
    // handle (setting it to NULL). 

    void *hTransformArg;

    hTransformArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT, 
FALSE, 0.0, 1 );
    CPLAssert( hTransformArg != NULL );

    // Get approximate output georeferenced bounds and resolution for file. 

    double adfDstGeoTransform[6];
    int nPixels=0, nLines=0;
    CPLErr eErr;

    eErr = GDALSuggestedWarpOutput( hSrcDS, GDALGenImgProjTransform, 
hTransformArg, adfDstGeoTransform, &nPixels, &nLines );
    CPLAssert( eErr == CE_None );

    // Create the output file.
    int bands = GDALGetRasterCount(hSrcDS);
    char *pszOptions = "INTERLEAVE=PIXEL"

    hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
&pszOptions ); 
    
    CPLAssert( hDstDS != NULL );

    // Write out the projection definition. 

    GDALSetProjection( hDstDS, pszDstWKT );
    GDALSetGeoTransform( hDstDS, adfDstGeoTransform );

    // Copy the color table, if required.

    GDALColorTableH hCT;

    hCT = GDALGetRasterColorTable( GDALGetRasterBand(hSrcDS,1) );
    if( hCT != NULL )
        GDALSetRasterColorTable( GDALGetRasterBand(hDstDS,1), hCT );

    GDALClose( hDstDS );

    hDstDS = (GDALDataset *) GDALOpen( outputfilename, GA_Update );

    
    // Setup warp options. 
    
    GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

    psWarpOptions->hSrcDS = hSrcDS;
    psWarpOptions->hDstDS = hDstDS;

    psWarpOptions->nBandCount = 0;

    psWarpOptions->pfnProgress = GDALTermProgress;   

    // Establish reprojection transformer. 

    psWarpOptions->pTransformerArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, 
                                         pszSrcWKT, 
                                         hDstDS,
                                         pszDstWKT, 
                                         FALSE, 0.0, 1 );

    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

    // Initialize and execute the warp operation. 

    GDALWarpOperation oOperation;

    oOperation.Initialize( psWarpOptions );
    oOperation.ChunkAndWarpImage( 0, 0, 
                                  GDALGetRasterXSize( hDstDS ), 
                                  GDALGetRasterYSize( hDstDS ) );

    
    GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
    GDALDestroyWarpOptions( psWarpOptions );  


    GDALClose( hDstDS );
    GDALClose( hSrcDS );


    return eErr;
}



From jicicuendez at gmv.es  Tue Jul 27 04:36:01 2004
From: jicicuendez at gmv.es (Juan Cicuendez)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Re: Problems when warping
References: <loom.20040723T161943-650@post.gmane.org>
	<4101545F.2030606@pobox.com>
Message-ID: <loom.20040727T103012-517@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> 
> Juan Cicuendez wrote:
> > Hi everybody,
> > 
> > I am trying to change the projection of an RGB scanned map. This is my 
first 
> > experience with GDAL and I followed the instructions of the Warping 
tutorial. 
> > In order to process all the three bands I set psWarpOptions->nBandCount = 0;
> > I finally obtained the geotiff file but when I try to visualised it from 
ERDAS 
> > it only recognises the first band, however if I try from ENVI it goes fine 
an 
> > sees all the bands. Looking at the image with windows Imaging application, 
it 
> > looks very strange and this could be a problem with the interleaving of the 
> > data. Has anybody come across this problem before? Does anybody know how to 
fix 
> > this problems in order that the files can be visualised from ERDAS?
> > 
> > I would appreciate if anyone could give me hand, I tried many things but 
> > nothing seemed to work.
> 
> Juan,
> 
> By default GDAL creates TIFF files with PLANARCONFIG_SEPERATE (band 
interleaved)
> but I have observed some versions of Erdas tools and other applications having
> problems with this.  You can pass the INTERLEAVE=PIXEL creation option to the
> GTiff driver when creating a new TIFF file to create a pixel interleaved file.
> 
> Of course, if you could provide a smallish sample file demonstrating the
> problem it would be easier to determine if this is the issue.
> 
> Best regards,
> 
Thanks for your help Frank,

Testing your suggestion. I tried something like:

char *pszOptions = "INTERLEAVE=PIXEL"
hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
&pszOptions ); 

, but of course it didn't work. How can I pass the opticon INTERLEAVE=PIXEL 
when creating the geoTiff file? I haven't found the documentation of the 
GeoTiff driver. Where can I find it?

I put up all the code of the function:

CPLErr change_projection(char *filename, char *outputfilename, char *pszDstWKT)
{

    GDALDriverH hDriver;
    GDALDataType eDT;
    GDALDatasetH hDstDS;
    GDALDatasetH hSrcDS;

    // Open the source file. 
    hSrcDS = GDALOpen( filename, GA_ReadOnly );
    CPLAssert( hSrcDS != NULL );
    
    // Create output with same datatype as first input band. 

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    // Get output driver (GeoTIFF format)

    hDriver = GDALGetDriverByName( "GTiff" );
    CPLAssert( hDriver != NULL );

    // Get Source coordinate system. 

    char *pszSrcWKT = NULL;

    pszSrcWKT = (char *) GDALGetProjectionRef( hSrcDS );
    CPLAssert( pszSrcWKT != NULL && strlen(pszSrcWKT) > 0 );


    // Create a transformer that maps from source pixel/line coordinates
    // to destination georeferenced coordinates (not destination 
    // pixel line).  We do that by omitting the destination dataset
    // handle (setting it to NULL). 

    void *hTransformArg;

    hTransformArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT, 
FALSE, 0.0, 1 );
    CPLAssert( hTransformArg != NULL );

    // Get approximate output georeferenced bounds and resolution for file. 

    double adfDstGeoTransform[6];
    int nPixels=0, nLines=0;
    CPLErr eErr;

    eErr = GDALSuggestedWarpOutput( hSrcDS, GDALGenImgProjTransform, 
hTransformArg, 
                                                adfDstGeoTransform, &nPixels, 
&nLines );
    CPLAssert( eErr == CE_None );

    // Create the output file.
    int bands = GDALGetRasterCount(hSrcDS);
    char *pszOptions = "INTERLEAVE=PIXEL"

    hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
&pszOptions ); 
    
    CPLAssert( hDstDS != NULL );

    // Write out the projection definition. 

    GDALSetProjection( hDstDS, pszDstWKT );
    GDALSetGeoTransform( hDstDS, adfDstGeoTransform );

    // Copy the color table, if required.

    GDALColorTableH hCT;

    hCT = GDALGetRasterColorTable( GDALGetRasterBand(hSrcDS,1) );
    if( hCT != NULL )
        GDALSetRasterColorTable( GDALGetRasterBand(hDstDS,1), hCT );

    GDALClose( hDstDS );

    hDstDS = (GDALDataset *) GDALOpen( outputfilename, GA_Update );

    
    // Setup warp options. 
    
    GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

    psWarpOptions->hSrcDS = hSrcDS;
    psWarpOptions->hDstDS = hDstDS;

    psWarpOptions->nBandCount = 0;

    psWarpOptions->pfnProgress = GDALTermProgress;   

    // Establish reprojection transformer. 

    psWarpOptions->pTransformerArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, 
                                         pszSrcWKT, 
                                         hDstDS,
                                         pszDstWKT, 
                                         FALSE, 0.0, 1 );

    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

    // Initialize and execute the warp operation. 

    GDALWarpOperation oOperation;

    oOperation.Initialize( psWarpOptions );
    oOperation.ChunkAndWarpImage( 0, 0, 
                                  GDALGetRasterXSize( hDstDS ), 
                                  GDALGetRasterYSize( hDstDS ) );

    
    GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
    GDALDestroyWarpOptions( psWarpOptions );  


    GDALClose( hDstDS );
    GDALClose( hSrcDS );


    return eErr;
}

Cheers,
Juan


From jicicuendez at gmv.es  Tue Jul 27 05:22:25 2004
From: jicicuendez at gmv.es (Juan Cicuendez)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Problems when warping to visualise with ERDAS
Message-ID: <loom.20040727T111540-135@post.gmane.org>

Thanks for your help Frank,

Sorry to post this again but the followup option didn't seem to work. Testing 
your suggestion to fix the interleave issue in order to visualise the files 
with ERDAS I tried the following option for the GeoTiff generation:

char *pszOptions = "INTERLEAVE=PIXEL"
hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
&pszOptions ); 

But it didn't work. How can I pass that options to the creation method? I also 
tried to find documentation about the GeoTiff driver but I could not find it? 
is it available anywhere?

I also put up all the code:

CPLErr change_projection(char *filename, char *outputfilename, char *pszDstWKT)
{

    GDALDriverH hDriver;
    GDALDataType eDT;
    GDALDatasetH hDstDS;
    GDALDatasetH hSrcDS;

    // Open the source file. 
    hSrcDS = GDALOpen( filename, GA_ReadOnly );
    CPLAssert( hSrcDS != NULL );
    
    // Create output with same datatype as first input band. 

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    // Get output driver (GeoTIFF format)

    hDriver = GDALGetDriverByName( "GTiff" );
    CPLAssert( hDriver != NULL );

    // Get Source coordinate system. 

    char *pszSrcWKT = NULL;

    pszSrcWKT = (char *) GDALGetProjectionRef( hSrcDS );
    CPLAssert( pszSrcWKT != NULL && strlen(pszSrcWKT) > 0 );


    // Create a transformer that maps from source pixel/line coordinates
    // to destination georeferenced coordinates (not destination 
    // pixel line).  We do that by omitting the destination dataset
    // handle (setting it to NULL). 

    void *hTransformArg;

    hTransformArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT, 
FALSE, 0.0, 1 );
    CPLAssert( hTransformArg != NULL );

    // Get approximate output georeferenced bounds and resolution for file. 

    double adfDstGeoTransform[6];
    int nPixels=0, nLines=0;
    CPLErr eErr;

    eErr = GDALSuggestedWarpOutput( hSrcDS, GDALGenImgProjTransform, 
hTransformArg, 
                                                adfDstGeoTransform, &nPixels, 
&nLines );
    CPLAssert( eErr == CE_None );

    // Create the output file.
    int bands = GDALGetRasterCount(hSrcDS);
    char *pszOptions = "INTERLEAVE=PIXEL"

    hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
&pszOptions ); 
    
    CPLAssert( hDstDS != NULL );

    // Write out the projection definition. 

    GDALSetProjection( hDstDS, pszDstWKT );
    GDALSetGeoTransform( hDstDS, adfDstGeoTransform );

    // Copy the color table, if required.

    GDALColorTableH hCT;

    hCT = GDALGetRasterColorTable( GDALGetRasterBand(hSrcDS,1) );
    if( hCT != NULL )
        GDALSetRasterColorTable( GDALGetRasterBand(hDstDS,1), hCT );

    GDALClose( hDstDS );

    hDstDS = (GDALDataset *) GDALOpen( outputfilename, GA_Update );

    
    // Setup warp options. 
    
    GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

    psWarpOptions->hSrcDS = hSrcDS;
    psWarpOptions->hDstDS = hDstDS;

    psWarpOptions->nBandCount = 0;

    psWarpOptions->pfnProgress = GDALTermProgress;   

    // Establish reprojection transformer. 

    psWarpOptions->pTransformerArg = 
        GDALCreateGenImgProjTransformer( hSrcDS, 
                                         pszSrcWKT, 
                                         hDstDS,
                                         pszDstWKT, 
                                         FALSE, 0.0, 1 );

    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

    // Initialize and execute the warp operation. 

    GDALWarpOperation oOperation;

    oOperation.Initialize( psWarpOptions );
    oOperation.ChunkAndWarpImage( 0, 0, 
                                  GDALGetRasterXSize( hDstDS ), 
                                  GDALGetRasterYSize( hDstDS ) );

    
    GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
    GDALDestroyWarpOptions( psWarpOptions );  


    GDALClose( hDstDS );
    GDALClose( hSrcDS );


    return eErr;
}

Cheers,
Juan


From StefanReisser at t-online.de  Wed Jul 28 18:52:26 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Reading DEMs
Message-ID: <1BpxHe-1gyYaW0@cmpmail00.bbul.t-online.de>

Hi!

I have a question concerning the import and reading of DEM files (USGS
ASCII). 
Is it possible to read the real DEM corner coordinates, and not the
corners of the rectangle that contains the "tilted" DEM?
Furthermore, can just the real DEM information be read in? And not the
coveredge information that is not defined?

Kind regards,

Stefan




From mruiz at gmv.es  Thu Jul 29 03:43:05 2004
From: mruiz at gmv.es (Juan Cicuendez)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Problems when warping II.
Message-ID: <loom.20040729T093824-288@post.gmane.org>

Thanks for your help Frank,

Sorry for re-posting this as a new message but I had problems with the
followup option.

I had problems to generate a GeoTiff visible from ERDAS (however is visible
from ENVI) after warping a file, as I mentioned I think it is a problem of
the interleave. Frank suggested to create the GeoTiff with the option
INTERLEAVE=PIXEL, then since I could not find the documentation about the
GeoTiff driver I tested:

char *pszOptions = "INTERLEAVE=PIXEL";

hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT,
&pszOptions );

but it does not work. How can I set this option?, is the documentation of
the GeoTiff driver available anywhere?

Thanks a lot,
Juan

I also put up the code:

CPLErr change_projection(char *filename, char *outputfilename, char
*pszDstWKT)
{

    GDALDriverH hDriver;
    GDALDataType eDT;
    GDALDatasetH hDstDS;
    GDALDatasetH hSrcDS;

    // Open the source file.
    hSrcDS = GDALOpen( filename, GA_ReadOnly );
    CPLAssert( hSrcDS != NULL );

    // Create output with same datatype as first input band.

    eDT = GDALGetRasterDataType(GDALGetRasterBand(hSrcDS,1));

    // Get output driver (GeoTIFF format)

    hDriver = GDALGetDriverByName( "GTiff" );
    CPLAssert( hDriver != NULL );

    // Get Source coordinate system.

    char *pszSrcWKT = NULL;

    pszSrcWKT = (char *) GDALGetProjectionRef( hSrcDS );
    CPLAssert( pszSrcWKT != NULL && strlen(pszSrcWKT) > 0 );


    // Create a transformer that maps from source pixel/line coordinates
    // to destination georeferenced coordinates (not destination
    // pixel line).  We do that by omitting the destination dataset
    // handle (setting it to NULL).

    void *hTransformArg;

    hTransformArg =
        GDALCreateGenImgProjTransformer( hSrcDS, pszSrcWKT, NULL, pszDstWKT,
FALSE, 0.0, 1 );
    CPLAssert( hTransformArg != NULL );

    // Get approximate output georeferenced bounds and resolution for file.

    double adfDstGeoTransform[6];
    int nPixels=0, nLines=0;
    CPLErr eErr;

    eErr = GDALSuggestedWarpOutput( hSrcDS, GDALGenImgProjTransform,
hTransformArg,
                                                adfDstGeoTransform,
&nPixels, &nLines );
    CPLAssert( eErr == CE_None );

    // Create the output file.
    int bands = GDALGetRasterCount(hSrcDS);
    char *pszOptions = "INTERLEAVE=PIXEL";

    hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands,
eDT, &pszOptions );

    CPLAssert( hDstDS != NULL );

    // Write out the projection definition.

    GDALSetProjection( hDstDS, pszDstWKT );
    GDALSetGeoTransform( hDstDS, adfDstGeoTransform );

    // Copy the color table, if required.

    GDALColorTableH hCT;

    hCT = GDALGetRasterColorTable( GDALGetRasterBand(hSrcDS,1) );
    if( hCT != NULL )
        GDALSetRasterColorTable( GDALGetRasterBand(hDstDS,1), hCT );

    GDALClose( hDstDS );

    hDstDS = (GDALDataset *) GDALOpen( outputfilename, GA_Update );


    // Setup warp options.

    GDALWarpOptions *psWarpOptions = GDALCreateWarpOptions();

    psWarpOptions->hSrcDS = hSrcDS;
    psWarpOptions->hDstDS = hDstDS;

    psWarpOptions->nBandCount = 0;

    psWarpOptions->pfnProgress = GDALTermProgress;

    // Establish reprojection transformer.

    psWarpOptions->pTransformerArg =
        GDALCreateGenImgProjTransformer( hSrcDS,
                                         pszSrcWKT,
                                         hDstDS,
                                         pszDstWKT,
                                         FALSE, 0.0, 1 );

    psWarpOptions->pfnTransformer = GDALGenImgProjTransform;

    // Initialize and execute the warp operation.

    GDALWarpOperation oOperation;

    oOperation.Initialize( psWarpOptions );
    oOperation.ChunkAndWarpImage( 0, 0,
                                  GDALGetRasterXSize( hDstDS ),
                                  GDALGetRasterYSize( hDstDS ) );


    GDALDestroyGenImgProjTransformer( psWarpOptions->pTransformerArg );
    GDALDestroyWarpOptions( psWarpOptions );


    GDALClose( hDstDS );
    GDALClose( hSrcDS );


    return eErr;
}



From warmerdam at pobox.com  Thu Jul 29 13:15:49 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Vector to raster?
In-Reply-To: <loom.20040723T185024-629@post.gmane.org>
References: <loom.20040723T185024-629@post.gmane.org>
Message-ID: <410930C5.2060003@pobox.com>

Jonathan Greenberg wrote:
> Hi there, we are interested in developing an application that creates a list of 
> raster-based x,y locations from input vector data (point, line or polygon) 
> (e.g. we want to rasterize the vector data for use in extracting pixel-level 
> data from satellite imagery).  Can OGR or GDAL perform this task?  If so, are 
> point and line rasterization calculated in an optimal way (e.g. can I go 
> directly from a point or line coverage to a set of x,y coordinates without 
> needing to create a large raster coverage of the extent of the line or point 
> coverage first?)  Thanks!

Jonathan,

Did I (or anyone) answer this?  The short answer is that there is not any
vector to raster conversion capability in GDAL/OGR at this time.  There has
been a bit of work done in this direction in OpenEV but nothing particularly
great nor "optimal" by your definition.

Sorry,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Thu Jul 29 13:39:21 2004
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
References: <006001c474bb$72605a00$959877c6@cts1149>
	<41091FAC.5F11237E@ualg.pt> <41092D2B.6090309@pobox.com>
Message-ID: <41093649.B5F79C0B@ualg.pt>

> Is there an action item here?  Should it be reporting GEOGCS[]?  Is this
> an ESRI BIL file?  What is in the .hdr?  Is there a .prj file?

Frank,
Sorry, I'll try to be more clear now.
I am using the Markus trick to read SRTM files. The trick consists in generating a
.hdr
In my example case, the .hdr has

BYTEORDER     M
LAYOUT        BIL
NROWS         1201
NCOLS         1201
NBANDS        1
NBITS         16
BANDROWBYTES  2402
TOTALROWBYTES 2402
BANDGAPBYTES  0
NODATA        -32768
ULXMAP        -9
ULYMAP        38
XDIM          0.000833333333333
YDIM          0.000833333333333

runing gdalinfo used to produce an output like this

Driver: EHdr/ESRI .hdr Labelled
Size is 1201, 1201
Coordinate System is:
GEOGCS["wgs84",  DATUM["WGS_1984",
SPHEROID["wgs84",6378137,298.257223563],
TOWGS84[0.000000,0.000000,0.000000]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433]]
Origin = (-9.000417,38.000417)
Pixel Size = (0.00083333,-0.00083333)
Corner Coordinates:
Upper Left  (  -9.0004167,  38.0004167)
Lower Left  (  -9.0004167,  36.9995833)
Upper Right (  -7.9995833,  38.0004167)
Lower Right (  -7.9995833,  36.9995833)
Center      (  -8.5000000,  37.5000000)
Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
    Computed Min/Max=-49.000,896.000
  NoData Value=-32768

but now I only get

Driver: EHdr/ESRI .hdr Labelled
Size is 1201, 1201
Coordinate System is `'                                <================= (empty)
Origin = (-9.000417,38.000417)
Pixel Size = (0.00083333,-0.00083333)
Corner Coordinates:
Upper Left  (  -9.0004167,  38.0004167)
Lower Left  (  -9.0004167,  36.9995833)
Upper Right (  -7.9995833,  38.0004167)
Lower Right (  -7.9995833,  36.9995833)
Center      (  -8.5000000,  37.5000000)
Band 1 Block=1201x1 Type=Int16, ColorInterp=Undefined
    Computed Min/Max=-49.000,896.000
  NoData Value=-32768

> > However, gdalinfo of a ENVI or USGS SDST files those lines are reported.
>
> Good.  It was you that reported the problem with the ENVI files not reporting
> the coordinate system properly, right?

No, but it was because of it that I decided to do a cvs.

Thanks
Joaquim Luis



From warmerdam at pobox.com  Thu Jul 29 13:30:54 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <41093649.B5F79C0B@ualg.pt>
References: <006001c474bb$72605a00$959877c6@cts1149>	<41091FAC.5F11237E@ualg.pt>
	<41092D2B.6090309@pobox.com> <41093649.B5F79C0B@ualg.pt>
Message-ID: <4109344E.3000507@pobox.com>

Joaquim Luis wrote:
>> but now I only get
> 
> Driver: EHdr/ESRI .hdr Labelled
> Size is 1201, 1201
> Coordinate System is `'                                <================= (empty)
> Origin = (-9.000417,38.000417)

Joaquim,

Do you have a corresponding .prj file?  The ESRI HDR driver just looks
for a .prj file and ingests it.  If you still have a .prj file and don't
get GEOGCS[] stuff then there is a bug.  If you never had one but still
got GEOGCS[] stuff before then something really funky was going on.
Please include the .prj file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From StefanReisser at t-online.de  Thu Jul 29 13:43:06 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:20 2007
Subject: [Gdal-dev] Reading USGS ASCII DEMS
Message-ID: <1BqEvq-0gjBAm0@filter07.bbul.t-online.de>

Hello everybody! I have a question concerning the reading and input of
DEM files in USGS ASCII format:

As the quadrilateral, containing the height information, often has a
variable orientation in relation to the UTM grid, how can I just read
the values that do contain real height information. Futhermore, how can
I get the quadrilateral's UTM coordinates out of the DEM using GDAL
(note: I'm not interested in the corners of the rectangle, but the
corner's of the quadrilateral, the DEM itself.

Thanks and kind regards!

Stefan



From warmerdam at pobox.com  Thu Jul 29 13:52:51 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Reading USGS ASCII DEMS
In-Reply-To: <1BqEvq-0gjBAm0@filter07.bbul.t-online.de>
References: <1BqEvq-0gjBAm0@filter07.bbul.t-online.de>
Message-ID: <41093973.40507@pobox.com>

StefanReisser@t-online.de wrote:
> Hello everybody! I have a question concerning the reading and input of
> DEM files in USGS ASCII format:
> 
> As the quadrilateral, containing the height information, often has a
> variable orientation in relation to the UTM grid, how can I just read
> the values that do contain real height information. Futhermore, how can
> I get the quadrilateral's UTM coordinates out of the DEM using GDAL
> (note: I'm not interested in the corners of the rectangle, but the
> corner's of the quadrilateral, the DEM itself.

Stefan,

The driver does not currently return any information on where the
"real corners" are. However, it does return information indicating that
the "nodata" value is -32767 so you can easily identify pixel values that
aren't valid.

In theory it is possible to figure out what 7.5" section you are in for
any given file, and from that work back to which pixel locations are the
corners but it is somewhat complicated and there are still some issue of
roundoff error.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Jul 29 13:57:27 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Re: Problems when warping
In-Reply-To: <loom.20040727T103012-517@post.gmane.org>
References: <loom.20040723T161943-650@post.gmane.org>	<4101545F.2030606@pobox.com>
	<loom.20040727T103012-517@post.gmane.org>
Message-ID: <41093A87.6020005@pobox.com>

Juan Cicuendez wrote:
> Thanks for your help Frank,
> 
> Testing your suggestion. I tried something like:
> 
> char *pszOptions = "INTERLEAVE=PIXEL"
> hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT, 
> &pszOptions ); 
> 
> , but of course it didn't work. How can I pass the opticon INTERLEAVE=PIXEL 
> when creating the geoTiff file? I haven't found the documentation of the 
> GeoTiff driver. Where can I find it?

Juan,

The option list needs to be NULL terminated.  So something like this should
work:

   char **papszOptions[] = { "INTERLEAVE=PIXEL", NULL };
   hDstDS = GDALCreate( hDriver, outputfilename, nPixels, nLines, bands, eDT,
                        papszOptions );

PS. you need to subscribe to the mailing list if you want your messages to go
through promptly.  This (and some others) were held up quite a while waiting
for approval.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Jul 29 13:59:26 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problems when warping II.
In-Reply-To: <loom.20040729T093824-288@post.gmane.org>
References: <loom.20040729T093824-288@post.gmane.org>
Message-ID: <41093AFE.1090202@pobox.com>

Juan Cicuendez wrote:
> but it does not work. How can I set this option?, is the documentation of
> the GeoTiff driver available anywhere?

Juan,

I should have answered these all at once.  Driver documentation can be found
under:

GDAL Main Page -> Supported Formats -> TIFF / GeoTIFF (.tif)

which leads to:

   http://www.remotesensing.org/gdal/frmt_gtiff.html

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Thu Jul 29 13:48:35 2004
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <4109344E.3000507@pobox.com>
References: <006001c474bb$72605a00$959877c6@cts1149>
	<41091FAC.5F11237E@ualg.pt> <41092D2B.6090309@pobox.com>
	<41093649.B5F79C0B@ualg.pt> <4109344E.3000507@pobox.com>
Message-ID: <1091123315.410938739a3de@wmail.ualg.pt>

Quoting Frank Warmerdam <warmerdam@pobox.com>:

> Joaquim Luis wrote:
> >> but now I only get
> >
> > Driver: EHdr/ESRI .hdr Labelled
> > Size is 1201, 1201
> > Coordinate System is `'                                <=================
> (empty)
> > Origin = (-9.000417,38.000417)
> 
> Joaquim,
> 
> Do you have a corresponding .prj file?  The ESRI HDR driver just looks
> for a .prj file and ingests it.  If you still have a .prj file and don't
> get GEOGCS[] stuff then there is a bug.  If you never had one but still
> got GEOGCS[] stuff before then something really funky was going on.
> Please include the .prj file.

Frank
I'm afraid that the cases I'm testing cover both situations.
I have .prj file for the file N37W008.hgt, which has
GEOGCS["wgs84",
    DATUM["WGS_1984",
        SPHEROID["wgs84",6378137,298.257223563],
        TOWGS84[0.000000,0.000000,0.000000]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]

However, for an other srtm file I don't have the .prj
In both cases I don't get the GEOGCS[] stuff

BTW, I was on the way to search what a .prj file must contain.
Can you point me to a place where I can study it?

best regars

Joaquim

From t.r.decarlo at larc.nasa.gov  Thu Jul 29 15:14:14 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <1091123315.410938739a3de@wmail.ualg.pt>
Message-ID: <000701c475a0$3d2b46c0$959877c6@cts1149>

jluis@ualg.pt wrote:
> 
[snip]
> Frank
> I'm afraid that the cases I'm testing cover both situations.
> I have .prj file for the file N37W008.hgt, which has
> GEOGCS["wgs84",
>     DATUM["WGS_1984",
>         SPHEROID["wgs84",6378137,298.257223563],
>         TOWGS84[0.000000,0.000000,0.000000]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> 
> However, for an other srtm file I don't have the .prj
> In both cases I don't get the GEOGCS[] stuff
> 
> BTW, I was on the way to search what a .prj file must contain.
> Can you point me to a place where I can study it?
> 
> best regars
> 
> Joaquim
> _______________________________________________

Joaquim,
The srtm_generate_hdr.sh file that I downloaded from Markus' website
generated the .prj files for me. If your version doesn't, you might need to
grab an update. 

Thom





From warmerdam at pobox.com  Thu Jul 29 15:15:10 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <1091123315.410938739a3de@wmail.ualg.pt>
References: <006001c474bb$72605a00$959877c6@cts1149>	<41091FAC.5F11237E@ualg.pt>
	<41092D2B.6090309@pobox.com>	<41093649.B5F79C0B@ualg.pt>
	<4109344E.3000507@pobox.com>
	<1091123315.410938739a3de@wmail.ualg.pt>
Message-ID: <41094CBE.1010203@pobox.com>

jluis@ualg.pt wrote:
> Frank
> I'm afraid that the cases I'm testing cover both situations.
> I have .prj file for the file N37W008.hgt, which has
> GEOGCS["wgs84",
>     DATUM["WGS_1984",
>         SPHEROID["wgs84",6378137,298.257223563],
>         TOWGS84[0.000000,0.000000,0.000000]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> 
> However, for an other srtm file I don't have the .prj
> In both cases I don't get the GEOGCS[] stuff

Joaquim,

Well, I am not sure why this behaviour would have changed in recent
memory.  However, I see that it was currently illegal to have multi-line
WKT definitions in ESRI .prj files the way the reading code was working.
ESRI always emits stuff as a single long line.

However, I have updated the reading code in CVS (gdal/ogr/ogr_srs_esri.cpp)
so that multiline format (as you have used) will also work.

Try updating from CVS again, or just merge your definition all into one
long line.

> BTW, I was on the way to search what a .prj file must contain.
> Can you point me to a place where I can study it?

There are two general formats.  Old Arc/Info 7.x .prj files have a line for
each parameter in a particular format.  The ArcGIS 8.x and later use an
ESRI varient of OGC Well Known Text in their .prj files.  Some massaging is
done to this internally to bring  it into the naming scheme used by GDAL/OGR.

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From StefanReisser at t-online.de  Thu Jul 29 15:33:14 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Merging multiple DEMs
In-Reply-To: <41093973.40507@pobox.com>
References: <1BqEvq-0gjBAm0@filter07.bbul.t-online.de>
	<41093973.40507@pobox.com>
Message-ID: <1BqGeQ-0me0Po0@filter11.bbul.t-online.de>

Thanks for your help, Frank!

There's one more question left:
How can I merge multiple DEMs using GDAL? I saw that the Python Script
can do it, however, is there some code in C++ that does that?
Or does anyone have some suggestions on how to do that efficiently?

Again, thanks for the efforts!

Kind regards,

Stefan



From warmerdam at pobox.com  Thu Jul 29 15:41:14 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Merging multiple DEMs
In-Reply-To: <1BqGeQ-0me0Po0@filter11.bbul.t-online.de>
References: <1BqEvq-0gjBAm0@filter07.bbul.t-online.de>	<41093973.40507@pobox.com>
	<1BqGeQ-0me0Po0@filter11.bbul.t-online.de>
Message-ID: <410952DA.6040909@pobox.com>

StefanReisser@t-online.de wrote:
> Thanks for your help, Frank!
> 
> There's one more question left:
> How can I merge multiple DEMs using GDAL? I saw that the Python Script
> can do it, however, is there some code in C++ that does that?
> Or does anyone have some suggestions on how to do that efficiently?
> 
> Again, thanks for the efforts!

Stefan,

Something like "gdal_merge.py -o merged.tif -n 32767 *.dem" might do the
trick.  Programmatically it can be accomplished using the warp api.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Thu Jul 29 16:08:03 2004
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] processing SRTM-3?
In-Reply-To: <41094CBE.1010203@pobox.com>
References: <006001c474bb$72605a00$959877c6@cts1149>
	<41091FAC.5F11237E@ualg.pt> <41092D2B.6090309@pobox.com>
	<41093649.B5F79C0B@ualg.pt> <4109344E.3000507@pobox.com>
	<1091123315.410938739a3de@wmail.ualg.pt>
	<41094CBE.1010203@pobox.com>
Message-ID: <1091131683.410959232599f@wmail.ualg.pt>

> 
> Well, I am not sure why this behaviour would have changed in recent
> memory.  However, I see that it was currently illegal to have multi-line
> WKT definitions in ESRI .prj files the way the reading code was working.
> ESRI always emits stuff as a single long line.

O.K.
It looks that I made a mistake. My original .prj file was a single long line.
Than I looked at the output of gdalinfo and tested if a multiple line format
.prj still worked in creating a Geotiff, and it did.
My idea was to try to use the gdalinfo output to write a .prj file, but it looks
that this might work with some formats but not all. Hence my question on what
are the allowed/mandatory contents of a .prj file

Thanks again
Joaquim

From t.r.decarlo at larc.nasa.gov  Thu Jul 29 19:06:46 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
Message-ID: <000c01c475c0$b8ae7c70$959877c6@cts1149>

Has LZW compression been implemented for GeoTIFF output in gdal yet? Now
that all of the patents have expired (I think...) there shouldn't be any
other restrictions, right?

Thom




From StefanReisser at t-online.de  Thu Jul 29 19:28:26 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Merging multiple DEMs
Message-ID: <1BqKK2-0IA3H60@cmpmail11.bbul.t-online.de>

Hi!

Is there a more detailed documentation of the WARP API anywhere? I
didn't find anything on how to merge and combine files.
What are the steps I have to go through?

Thanks!

Stefan



From StefanReisser at t-online.de  Thu Jul 29 20:25:00 2004
From: StefanReisser at t-online.de (StefanReisser@t-online.de)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Problem Reading DEMs
Message-ID: <1BqLCm-0qCGae0@cmpmail07.bbul.t-online.de>

Hi, it's me again!

I have a strange problem, when reading USGS ASCII DEMs:
When using the RasterIO - function to read in the data, the data in the
buffer is either always 0 or always -32767 (nodata value), although the
data should be defined! 
I am using the following lines of code to read in the file:

GDALDataset *dataSet;
GDALRasterBand *dataBand;

dataSet = ( GDALDataset * ) GDALOpen( "fileName.dem", GA_ReadOnly );
dataBand = dataSet->GetRasterBand( 1 );

dataBand->RasterIO( GF_Read, 0, 0, width, height, dataBuffer, width,
height, GDT_Int16, 0, 0 );

where "dataBuffer" is an array of type "short".

Thanks for the efforts,

Kind regards

Stefan



From dron at ak4719.spb.edu  Fri Jul 30 00:07:35 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
In-Reply-To: <000c01c475c0$b8ae7c70$959877c6@cts1149>
References: <000c01c475c0$b8ae7c70$959877c6@cts1149>
Message-ID: <20040730040735.GD2967@ak4719.spb.edu>

On Thu, Jul 29, 2004 at 07:06:46PM -0400, Thom DeCarlo wrote:
> Has LZW compression been implemented for GeoTIFF output in gdal yet?
> Now that all of the patents have expired (I think...) there shouldn't
> be any other restrictions, right?

LZW code has been commited in the upstream libtiff sources and will be
propagated to the GDAL soon. Meanwhile you can grab the libtiff library
from the its CVS and use it instead of internal version.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From mhodder at highermappingsolutions.com  Fri Jul 30 05:20:11 2004
From: mhodder at highermappingsolutions.com (Martin Hodder)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Newbie Question
In-Reply-To: <loom.20040723T185024-629@post.gmane.org>
Message-ID: <20040730092017.09891180C02@xserve.flids.com>

Hi,

Sorry about this basic question but I am only just starting to look at this
program which looks fantatstic.

In OGR2OGR there is a gdal11.dll. I was wondering if anyone has a set of VB
declarations for the DLL?

Many thanks

Martin





From sylvain at softmaptech.com  Thu Jul 29 13:37:30 2004
From: sylvain at softmaptech.com (Sylvain Rioux)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GDAL and .tab file
Message-ID: <NEBBJBLMOMCEDMBAMIFAAEAFCLAA.sylvain@softmaptech.com>

Hi,

I have some tiff and ecw files that are georeferenced with a tab file like :

!table
!version 300
!charset WindowsLatin1

Definition Table
  File "f20k_027_036_l2e_h_o_gr_v20.ecw"
  Type "RASTER"
  (562487.00000,2335396.00000) (0,0) Label "Pt 1",
  (582500.08333,2335396.00000) (7563.00000,0) Label "Pt 2",
  (582500.08333,2315382.91667) (7563.00000,7563.00000) Label "Pt 3",
  (562487.00000,2315382.91667) (0,7563.00000) Label "Pt 4"
  CoordSys Earth Projection 3,  1002, "m", 0, 46.8, 45.898918964419,
47.696014502038,  600000,  2200000
  Units "m"

I think that it has been asked in the past but I tried with the last version
of GDAL (using gdalinfo.exe) and the coordinate system is blank like :

Driver: ECW/ERMapper Compressed Wavelets
Size is 7564, 7564
Coordinate System is `'
Origin = (562487.000000,2335396.000000)
Pixel Size = (2.645833,-2.645833)
Corner Coordinates:
Upper Left  (  562487.000, 2335396.000)
Lower Left  (  562487.000, 2315382.917)
Upper Right (  582500.083, 2335396.000)
Lower Right (  582500.083, 2315382.917)
Center      (  572493.542, 2325389.458)
Band 1 Block=7564x1 Type=Byte, ColorInterp=Undefined
  Overviews: arbitrary
Band 2 Block=7564x1 Type=Byte, ColorInterp=Undefined
  Overviews: arbitrary
Band 3 Block=7564x1 Type=Byte, ColorInterp=Undefined
  Overviews: arbitrary

Is there something we can do to at least translate these image to a known
format like GeoTIFF? Or can we translate .tab files to something like wkt
which can then be used with gdal_translate.exe?

Thanks!

Sylvain


From t.r.decarlo at larc.nasa.gov  Fri Jul 30 09:54:50 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
In-Reply-To: <20040730040735.GD2967@ak4719.spb.edu>
Message-ID: <001901c4763c$c8241620$959877c6@cts1149>

Andrey Kiselev wrote:
> 
> On Thu, Jul 29, 2004 at 07:06:46PM -0400, Thom DeCarlo wrote:
> > Has LZW compression been implemented for GeoTIFF output in gdal yet?
> > Now that all of the patents have expired (I think...) there shouldn't
> > be any other restrictions, right?
> 
> LZW code has been commited in the upstream libtiff sources and will be
> propagated to the GDAL soon. Meanwhile you can grab the libtiff library
> from the its CVS and use it instead of internal version.
> 
> 						Andrey

I cannot use CVS here at work. I found a libtiff3.7.0alpha.zip on the
remotesensing.org ftp site, but I anything clearly identified as a CVS
tarball. Does that 3.7.0.alpha version include the LZW compression?

Thanks,
Thom



From t.r.decarlo at larc.nasa.gov  Fri Jul 30 11:13:32 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
In-Reply-To: <001901c4763c$c8241620$959877c6@cts1149>
Message-ID: <001a01c47647$c8330940$959877c6@cts1149>


On Friday, July 30, 2004 9:55 AM, I wrote:
> 
> Andrey Kiselev wrote:
> >
> > On Thu, Jul 29, 2004 at 07:06:46PM -0400, Thom DeCarlo wrote:
> > > Has LZW compression been implemented for GeoTIFF output in gdal yet?
> > > Now that all of the patents have expired (I think...) there shouldn't
> > > be any other restrictions, right?
> >
> > LZW code has been commited in the upstream libtiff sources and will be
> > propagated to the GDAL soon. Meanwhile you can grab the libtiff library
> > from the its CVS and use it instead of internal version.
> >
> > 						Andrey
> 
> I cannot use CVS here at work. I found a libtiff3.7.0alpha.zip on the
> remotesensing.org ftp site, but I anything clearly identified as a CVS
> tarball. Does that 3.7.0.alpha version include the LZW compression?
> 
> Thanks,
> Thom
> 


To answer my own question, yes, it appears that LZW is supported in
3.7.0alpha. Unfortunately, I cannot compile it on my WinXP/VC6 computer.
(I'm not sure what is supposed to be in config.h.vc, but the file doesn't
exist in the zip file.)

I guess I'll wait for future support within gdal.

Thanks,
Thom



From warmerdam at pobox.com  Fri Jul 30 11:23:17 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Merging multiple DEMs
In-Reply-To: <1BqKK2-0IA3H60@cmpmail11.bbul.t-online.de>
References: <1BqKK2-0IA3H60@cmpmail11.bbul.t-online.de>
Message-ID: <410A67E5.3000602@pobox.com>

StefanReisser@t-online.de wrote:
> Hi!
> 
> Is there a more detailed documentation of the WARP API anywhere? I
> didn't find anything on how to merge and combine files.
> What are the steps I have to go through?

Stefan,

The material at this url is all the tutorial material available.

   http://www.remotesensing.org/gdal/warptut.html

There is the reference docs for the various classes of course, and that is
accessable from the tutorial.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From disen at geo.unizh.ch  Fri Jul 30 11:51:03 2004
From: disen at geo.unizh.ch (Daniel Isenegger)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GML3.0
In-Reply-To: <40EE92E3.4040801@geo.unizh.ch>
References: <40EE5D4A.2070300@geo.unizh.ch> <40EE92E3.4040801@geo.unizh.ch>
Message-ID: <410A6E67.4030707@geo.unizh.ch>

Hi list,
our project works on the development of collaboration concepts for 
simulation application (having mainly time as their free variable ) and 
GIS (i use GRASS5.7 for this). I want to analyze the capabilities of 
GML3.0 to transport  spatiotemporal data between the components 
(including storing it).
I played around with v.out.ogr exporting gml2.0 files, looked a little 
bit in the code to estimate the possibility to  copy and extend this 
solution to generate gml3.0-files (but I felt a little bit lost seeing 
its complexity (:-(  ).

The question is now:
- does anybody have any experiences with a topic like this, maybe even 
with writing/reading GML3.0?
- any suggestion which way to take? Maybe also solutions which are not 
so elegant like existing for generating GML2.x

I use GRASS as main interface, but since GRASS uses gdal/OGR to generate 
GML2.x-files i dare to post this question also on this list.

Thanks Dani


From dron at ak4719.spb.edu  Fri Jul 30 14:46:02 2004
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
In-Reply-To: <001a01c47647$c8330940$959877c6@cts1149>
References: <001901c4763c$c8241620$959877c6@cts1149>
	<001a01c47647$c8330940$959877c6@cts1149>
Message-ID: <20040730184602.GB6227@ak4719.spb.edu>

On Fri, Jul 30, 2004 at 11:13:32AM -0400, Thom DeCarlo wrote:
> To answer my own question, yes, it appears that LZW is supported in
> 3.7.0alpha.

LZW decoding was always supported by libtiff (and by GDAL), but encoding
procedures was removed in separate package. 3.7.0alpha does not
supported LZW encoding.

> Unfortunately, I cannot compile it on my WinXP/VC6 computer. (I'm not
> sure what is supposed to be in config.h.vc, but the file doesn't exist
> in the zip file.)

Yes, that is known and fixed problem.

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From mlogan at mail.arc.nasa.gov  Fri Jul 30 16:30:13 2004
From: mlogan at mail.arc.nasa.gov (Michael Logan)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Corrupted WKT in my GeoTIFF dem
Message-ID: <410AAFD5.8030407@mail.arc.nasa.gov>

Hello,

I am trying to create a Geotiff DEM from scratch during conversion
 from GridFloat format (i've tried multple formats (int16,float32,byte)),
 but while everything seems good, the WKT is always clobbered.

I set the WKT in my C++ code, but after closing the file and exiting,
 a gdalinfo gives "badness" for the projection portion:

------
% gdalinfo area79.tiff
Driver: GTiff/GeoTIFF
Size is 21600, 7200
Coordinate System is `'
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 7200.0)
Upper Right (21600.0,    0.0)
Lower Right (21600.0, 7200.0)
Center      (10800.0, 3600.0)
Band 1 Block=21600x1 Type=Int16, ColorInterp=Gray
-----

So, my corners don't appear as Geographics corners
 as I'd hoped, since it appears no info is available
 to do the transform..

Here is my code for setting the projection:
------
    oSRS.SetGeogCS( "WGS84","WGS_1984", "WGS 84",
            6378137.0,   298.2572235629972,
            "Greenwich",  0.0,  "degree",
            0.0174532925199433 );

    char *pszSRS_WKT = NULL;

    oSRS.exportToWkt( &pszSRS_WKT );
    cout << "WKT = " << endl << pszSRS_WKT << endl;
    if( geoDataset->SetProjection( pszSRS_WKT ) == CE_Failure )
      cerr << "Failed to write projection to dataset" << endl;
------

and the "COUT" does do something correctly:

----
WKT =
GEOGCS["WGS84",DATUM["WGS_1984",SPHEROID["WGS84",6378137,298.2572235629972]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
-----

AND, right before I exit, I do a

    cout << "Final request for projection string = " << endl
     << geoDataset->GetProjectionRef() << endl;

and it still seems ok....
---
Final request for projection string =
GEOGCS["WGS84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.2572235629972]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
---

any ideas??

Thanks,
ml

-- 
Michael Logan (650)-604-4494 QSS Group,Inc./NASA Ames Research Center
Task Lead, Visual Cueing & Simulation
Task Lead, Dynamic Aircraft Reconfiguration & Damage Adaptive Control
MS 262-6,Moffett Field, CA, 94035



From warmerdam at pobox.com  Fri Jul 30 16:38:27 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Corrupted WKT in my GeoTIFF dem
In-Reply-To: <410AAFD5.8030407@mail.arc.nasa.gov>
References: <410AAFD5.8030407@mail.arc.nasa.gov>
Message-ID: <410AB1C3.8000102@pobox.com>

Michael Logan wrote:
> Hello,
> 
> I am trying to create a Geotiff DEM from scratch during conversion
> from GridFloat format (i've tried multple formats (int16,float32,byte)),
> but while everything seems good, the WKT is always clobbered.
> 
> I set the WKT in my C++ code, but after closing the file and exiting,
> a gdalinfo gives "badness" for the projection portion:
> 
> ------
> % gdalinfo area79.tiff
> Driver: GTiff/GeoTIFF
> Size is 21600, 7200
> Coordinate System is `'
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 7200.0)
> Upper Right (21600.0,    0.0)
> Lower Right (21600.0, 7200.0)
> Center      (10800.0, 3600.0)
> Band 1 Block=21600x1 Type=Int16, ColorInterp=Gray
> -----
> 
> So, my corners don't appear as Geographics corners
> as I'd hoped, since it appears no info is available
> to do the transform..

Michael,

Do you set a geotransform?  Are you sure you are closing the file properly?
What version of GDAL are you using?  Can you provide a small but complete
example program that demonstrates your problem?

I see two likely issues:
  o If you don't close the file properly, the header info likely won't be written
    properly.
  o If you just write a coordinate system but no geotransform, I don't think any
    of the geotiff info gets written out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Jul 30 17:58:45 2004
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] VRT Raw File Access
Message-ID: <410AC495.5050309@pobox.com>

Folks,

At the request of Atlantis I have implemented support for accessing raw
raster file based on writing a VRT (XML) header file.  This has some advantages
over existing ascii header formats support (such as PCI .aux, ENVI and ESRI BIL)
that include:
  o The virtual dataset can include data from a variety of files.
  o A variety of packing orders are supported, including different swapping,
    and odd spaces.
  o All GDAL supported pixel types are supported including complex.
  o The VRT file can include any amount of supporting information such as
    metadata, georeferencing, etc.

I have committed an initial implementation but I haven't really done too much
testing (though a small test script is in gdalautotest/gdrivers/vrtrawlink.py).
I have not updated any of the documentation accordingly yet.  However, to give
you a flavour, here is a .vrt file making 4 raw Convair PolGASP data files
appear to be a single dataset.

<VRTDataset rasterXSize="1172" rasterYSize="1864">
   <VRTRasterBand dataType="CFloat32" band="1" subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">l2p3hhsso.img</SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>8</PixelOffset>
     <LineOffset>9376</LineOffset>
     <ByteOrder>MSB</ByteOrder>
   </VRTRasterBand>
   <VRTRasterBand dataType="CFloat32" band="2" subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">l2p3hvsso.img</SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>8</PixelOffset>
     <LineOffset>9376</LineOffset>
     <ByteOrder>MSB</ByteOrder>
   </VRTRasterBand>
   <VRTRasterBand dataType="CFloat32" band="3" subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">l2p3vhsso.img</SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>8</PixelOffset>
     <LineOffset>9376</LineOffset>
     <ByteOrder>MSB</ByteOrder>
   </VRTRasterBand>
   <VRTRasterBand dataType="CFloat32" band="4" subClass="VRTRawRasterBand">
     <SourceFilename relativetoVRT="1">l2p3vvsso.img</SourceFilename>
     <ImageOffset>0</ImageOffset>
     <PixelOffset>8</PixelOffset>
     <LineOffset>9376</LineOffset>
     <ByteOrder>MSB</ByteOrder>
   </VRTRasterBand>
</VRTDataset>

I would add that we hope to update the OpenEV "raw define" tool to use .vrt so
that we can support all pixel types.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mlogan at mail.arc.nasa.gov  Fri Jul 30 18:45:36 2004
From: mlogan at mail.arc.nasa.gov (Michael Logan)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Corrupted WKT in my GeoTIFF dem
In-Reply-To: <410AB1C3.8000102@pobox.com>
References: <410AAFD5.8030407@mail.arc.nasa.gov> <410AB1C3.8000102@pobox.com>
Message-ID: <410ACF90.9020006@mail.arc.nasa.gov>




Frank Warmerdam wrote:

> Michael Logan wrote:
>
>> Hello,
>>
>> I am trying to create a Geotiff DEM from scratch during conversion
>> from GridFloat format (i've tried multple formats (int16,float32,byte)),
>> but while everything seems good, the WKT is always clobbered.
>>
>> I set the WKT in my C++ code, but after closing the file and exiting,
>> a gdalinfo gives "badness" for the projection portion:
>>
>> ------
>> % gdalinfo area79.tiff
>> Driver: GTiff/GeoTIFF
>> Size is 21600, 7200
>> Coordinate System is `'
>> Corner Coordinates:
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0, 7200.0)
>> Upper Right (21600.0,    0.0)
>> Lower Right (21600.0, 7200.0)
>> Center      (10800.0, 3600.0)
>> Band 1 Block=21600x1 Type=Int16, ColorInterp=Gray
>> -----
>>
>> So, my corners don't appear as Geographics corners
>> as I'd hoped, since it appears no info is available
>> to do the transform..
>
>
> Michael,
>
> Do you set a geotransform?  Are you sure you are closing the file 
> properly?
> What version of GDAL are you using?  Can you provide a small but complete
> example program that demonstrates your problem?
>
> I see two likely issues:
>  o If you don't close the file properly, the header info likely won't 
> be written
>    properly.


I am doing a GDALClose() just before exiting.

>  o If you just write a coordinate system but no geotransform, I don't 
> think any
>    of the geotiff info gets written out.

Ok, this is might be it..   I didn't give the dataset ANY geotransforms.  
I'm still not clear on how to use it and how it relates to the 
Projection WKT.
I want a Geographic/unprojected GeoTIFF dem, so it seems
I need to read some more..  8-)

thanks,
ml

>
> Best regards,



-- 
Michael Logan  (650)-604-4494  QSS Group,Inc./NASA Ames Research Center
Task Lead, Visual Cueing & Simulation
Task Lead, Dynamic Aircraft Reconfiguration & Damage Adaptive Control
MS 262-6,Moffett Field, CA, 94035
private: logan5@comcast.net



From t.r.decarlo at larc.nasa.gov  Fri Jul 30 19:06:16 2004
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] GeoTIFF LZW compression?
In-Reply-To: <20040730040735.GD2967@ak4719.spb.edu>
Message-ID: <001b01c47689$d0ffaaf0$959877c6@cts1149>

Friday, July 30, 2004 12:08 AM, Andrey Kiselev wrote:
> 
> On Thu, Jul 29, 2004 at 07:06:46PM -0400, Thom DeCarlo wrote:
> > Has LZW compression been implemented for GeoTIFF output in gdal yet?
> > Now that all of the patents have expired (I think...) there shouldn't
> > be any other restrictions, right?
> 
> LZW code has been commited in the upstream libtiff sources and will be
> propagated to the GDAL soon. Meanwhile you can grab the libtiff library
> from the its CVS and use it instead of internal version.
> 
> 						Andrey

(I'm backing up in the message thread to rely to this one.)
I have successfully added LZW compression to my gdal library. I simply
followed the instructions in the libtiff-lzw-compression-kit-1.5.tar.gz file
from the libtiff ftp site. I replaced the tif_lzw.c stub in
gdal/frmts/gtiff/libtiff with the one from the tar file and recompiled.
Everything worked fine.

Just in case anyone else wanted to know.

Thom


From mlogan at mail.arc.nasa.gov  Fri Jul 30 19:10:13 2004
From: mlogan at mail.arc.nasa.gov (Michael Logan)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] Corrupted WKT in my GeoTIFF dem
In-Reply-To: <410ACF90.9020006@mail.arc.nasa.gov>
References: <410AAFD5.8030407@mail.arc.nasa.gov> <410AB1C3.8000102@pobox.com>
	<410ACF90.9020006@mail.arc.nasa.gov>
Message-ID: <410AD555.2090109@mail.arc.nasa.gov>

oh, way cool.   works great now with the geotransform.
Thanks Frank.
ml


Driver: GTiff/GeoTIFF
Size is 21600, 7200
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-120.000000,41.999722)
Pixel Size = (0.00027778,-0.00027778)
Corner Coordinates:
Upper Left  (-120.0000000,  41.9997222)
Lower Left  (-120.0000000,  39.9997222)
Upper Right (-114.0000000,  41.9997222)
Lower Right (-114.0000000,  39.9997222)
Center      (-117.0000000,  40.9997222)
Band 1 Block=21600x1 Type=Int16, ColorInterp=Gray


Michael Logan wrote:

>
>
>
> Frank Warmerdam wrote:
>
>> Michael Logan wrote:
>>
>>> Hello,
>>>
>>> I am trying to create a Geotiff DEM from scratch during conversion
>>> from GridFloat format (i've tried multple formats 
>>> (int16,float32,byte)),
>>> but while everything seems good, the WKT is always clobbered.
>>>
>>> I set the WKT in my C++ code, but after closing the file and exiting,
>>> a gdalinfo gives "badness" for the projection portion:
>>>
>>> ------
>>> % gdalinfo area79.tiff
>>> Driver: GTiff/GeoTIFF
>>> Size is 21600, 7200
>>> Coordinate System is `'
>>> Corner Coordinates:
>>> Upper Left  (    0.0,    0.0)
>>> Lower Left  (    0.0, 7200.0)
>>> Upper Right (21600.0,    0.0)
>>> Lower Right (21600.0, 7200.0)
>>> Center      (10800.0, 3600.0)
>>> Band 1 Block=21600x1 Type=Int16, ColorInterp=Gray
>>> -----
>>>
>>> So, my corners don't appear as Geographics corners
>>> as I'd hoped, since it appears no info is available
>>> to do the transform..
>>
>>
>>
>> Michael,
>>
>> Do you set a geotransform?  Are you sure you are closing the file 
>> properly?
>> What version of GDAL are you using?  Can you provide a small but 
>> complete
>> example program that demonstrates your problem?
>>
>> I see two likely issues:
>>  o If you don't close the file properly, the header info likely won't 
>> be written
>>    properly.
>
>
>
> I am doing a GDALClose() just before exiting.
>
>>  o If you just write a coordinate system but no geotransform, I don't 
>> think any
>>    of the geotiff info gets written out.
>
>
> Ok, this is might be it..   I didn't give the dataset ANY 
> geotransforms.  I'm still not clear on how to use it and how it 
> relates to the Projection WKT.
> I want a Geographic/unprojected GeoTIFF dem, so it seems
> I need to read some more..  8-)
>
> thanks,
> ml
>
>>
>> Best regards,
>
>
>
>


-- 
Michael Logan  (650)-604-4494  QSS Group,Inc./NASA Ames Research Center
Task Lead, Visual Cueing & Simulation
Task Lead, Dynamic Aircraft Reconfiguration & Damage Adaptive Control
MS 262-6,Moffett Field, CA, 94035
private: logan5@comcast.net



From jclonts at hot.rr.com  Fri Jul 30 23:41:01 2004
From: jclonts at hot.rr.com (John Clonts)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] OpenEV Questions
Message-ID: <cef4cl$f20$1@sea.gmane.org>

(A)
Can I use OpenEV to (1) load a png file, (2)interactively supply the
georeference info, and (3)export it as a geotiff?  Its the (2) part I can't
seem to accomplish.

(B)
I am wanting to overlay (blend) two geotiffs together.  I have figured out
how to set the layers' opacity so that it looks the way I want it.  But is
there a way to output the blended ("flattened") image to a single geotiff?

Sorry if this is not the right place for these questions, I'm just getting
started with this....

Thanks,
John Clonts
Temple, Texas




From alexamici at fastwebnet.it  Sat Jul 31 14:51:09 2004
From: alexamici at fastwebnet.it (Alessandro Amici)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] the debian directory needs a resync (and a little update)
Message-ID: <200407312051.09036.alexamici@fastwebnet.it>


Silke,

the debian directory in cvs appears to lag behind the one actually distributed 
within debian unstable.

i have a couple of small fixes to send along and the great news that libtiff 
3.6.1 finally found its way into sid so that we don't need to use the 
internal copy anymore.

it would be nice if you could resync the gdal cvs to your up to date copy.

BTW: if you plan to release a gdal 1.2.1 package, i'd be willing to help.

cheers,
alessandro

From starged at videotron.ca  Sat Jul 31 18:41:01 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] OpenEV Questions
In-Reply-To: <cef4cl$f20$1@sea.gmane.org>
References: <cef4cl$f20$1@sea.gmane.org>
Message-ID: <ei7og0d1ckvp1j220ipfmte4ebbirn6ih2@4ax.com>

Hi John,

On Fri, 30 Jul 2004 22:41:01 -0500, John Clonts <jclonts@hot.rr.com> wrote:

>(A)
>Can I use OpenEV to (1) load a png file, (2)interactively supply the
>georeference info, and (3)export it as a geotiff?  Its the (2) part I can't
>seem to accomplish.

You cannot do the (2)...
However, you can export it as a VRT dataset and then add the georeferencing to the .vrt file
manually, load it in OpenEV and export it as geotiff.

>(B)
>I am wanting to overlay (blend) two geotiffs together.  I have figured out
>how to set the layers' opacity so that it looks the way I want it.  But is
>there a way to output the blended ("flattened") image to a single geotiff?

I certainly would like to know the answer to that myself! I don't think it's possible... it would be
a nice feature to add.

>Sorry if this is not the right place for these questions, I'm just getting
>started with this....

Yeah, it would be better to continue this thread on openev-discuss@lists.sourceforge.net
--
Mario B.

From starged at videotron.ca  Sat Jul 31 19:35:17 2004
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] VRT Raw File Access
In-Reply-To: <410AC495.5050309@pobox.com>
References: <410AC495.5050309@pobox.com>
Message-ID: <q7aog0tsdfofuaqaqt4bmh640e3clnhu81@4ax.com>

Hi Frank,

On Fri, 30 Jul 2004 17:58:45 -0400, Frank Warmerdam <warmerdam@pobox.com> wrote:

>At the request of Atlantis I have implemented support for accessing raw
>raster file based on writing a VRT (XML) header file.

I am glad you started to work on the VRT dataset. I think this dataset/driver is the most powerful
of them all. And so useful!

I hope you will also implement the VRTWarpedRasterBand soon as it's the crucial step to make the
OpenEV's reprojection tool work decently...

>I have not updated any of the documentation accordingly yet.

While you're at it, will you also include info about the other VRTSources? Only when I looked at
vrtdataset.h did I learn that there was a "VRTAveragedSource" which was the answer to the
downsampling question I asked a few months ago (remember the comparisons between gdalwarp and PSP?).
I also noticed there was a "VRTAverageFilteredSource" but I didn't see an implementation of that...

>I would add that we hope to update the OpenEV "raw define" tool to use .vrt so
>that we can support all pixel types.

That would be great!

Thanks for your attention.
--
Mario B.

From tylermitchell at shaw.ca  Sat Jul 31 23:56:26 2004
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:21 2007
Subject: [Gdal-dev] OpenEV Questions
In-Reply-To: <cef4cl$f20$1@sea.gmane.org>
References: <cef4cl$f20$1@sea.gmane.org>
Message-ID: <200407312056.26277.tylermitchell@shaw.ca>

> Can I use OpenEV to (1) load a png file, (2)interactively supply the
> georeference info, and (3)export it as a geotiff?  Its the (2) part I can't
> seem to accomplish.

As far as I know there is not on-screen method for doing this, but it 
certainly isn't too difficult with a little bit of semi-manual work.
Open two OpenEV views, one with the unreferenced image, one with the 
geo-reference base you want to use.  Move your cursor over the non-referenced 
one (let's call it image1), record (read: write down!) the pixel x,y values.  
Then look at the same location in image2.  Write down the geocoordinate for 
the pixel.  You should have four numbers for each location you want to pin 
the image to.  And so on and so on.  Then use gdal_translate to translate 
image1.tif to image1_georefd.tif but adding the -GCP parameter for each set 
of coordinates.  Like so...

gdal_translate -gcp 1 1 500000 5000000 -gcp 200 400 550000 5250000 image1.tif 
image1_geo.tif.

Then you probably also want to run this through gdalwarp - which is a python 
script.  This will actually modify your new image, warping it as best it can 
to your new world!

Isn't currently working in my setup for some reason, but if you can handle the 
command line usage of those two utilities, you'll have a lot of raster power 
at your fingertips.

Tyler

