From sjahputerao at missouri.edu  Sat Sep  1 09:49:24 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] HFA Driver behavior when spill file is present
In-Reply-To: <46D82DCE.2040607@pobox.com>
References: <46D826B7.8070705@missouri.edu> <46D82DCE.2040607@pobox.com>
Message-ID: <46D96DE4.1010607@missouri.edu>

Thanks, Frank.  I will file the bug report.

Ozy

Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> Hi All,
>>
>> I just noticed a strange behavior of GDAL HFA driver.  Suppose you 
>> have an HFA file that is over 2GB in size.  This causes the creation 
>> of the spill (.ige) file. When you try to use Create() in GDALDriver 
>> class using the same name of the existing HFA file, instead of 
>> overwriting the pre-existing file GDAL simply appends more data to 
>> the spill file.  So you will end up with larger .ige file.  If I have 
>> a repeat process that uses the same filename, the .ige grows along 
>> with the process and it eats up the disk space unnecessarily, unless 
>> I specifically remove the old HFA file before creating a new one.
>>
>> Is there a way for me to just overwrite the old HFA image file when I 
>> create a new one?
>> Thanks.
>
> Ozy,
>
> This is a bug - please file a bug report on it.  The HFA driver Create()
> method really ought to delete the .ige file.
>
> Best regards,



From vali.system at free.fr  Mon Sep  3 07:10:44 2007
From: vali.system at free.fr (ValiSystem)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Using +nadgrids=@null with gdal
Message-ID: <8B008DAC-9B23-4CA1-8DFB-67AF46F1AC1E@free.fr>

	Hello list,

I'd like to use the +nadgrids=@null trick described in the last entry  
of proj FAQ (http://proj.maptools.org/faq.html), it works perfectly  
with cs2cs, but i can't make it work with gdal, lat lon of corners of  
my image are modified.

Is this normal ? Is there another way to achieve that (i'd like to  
avoid copying entire file using gdal_translate +a_ullr option) ?

From warmerdam at pobox.com  Mon Sep  3 14:05:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: Motion: Maintainer Contract for Sept->December
In-Reply-To: <46D72207.8090206@pobox.com>
References: <46D72207.8090206@pobox.com>
Message-ID: <46DC4D02.7060105@pobox.com>

Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to negotiate a maintainer contract 
> with
> Mateusz Loskot for September to December for up to 600 hours at 
> $17USD/hr plus
> up to $2500USD for travel related expenses for Mateusz to attend 
> FOSS4G.  The
> contract would be in accordance with RFC 9: GDAL Paid Maintainer 
> Guidelines.

Folks,

This motion passes with support from Tamas, Howard, Daniel, Andrey and
myself.  Mateusz and I are in the process of signing the contract, and
maintenance continues!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Sep  3 14:10:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: Motion: Funding for TShirts and Bug Squash
In-Reply-To: <46D5CB2C.6030609@pobox.com>
References: <46D5CB2C.6030609@pobox.com>
Message-ID: <46DC4DFC.6070203@pobox.com>

Frank Warmerdam wrote:
> Motion: To authorize Frank Warmerdam to spend up to $650USD on purchasing
> 50 "Team GDAL" tshirts, and to authorize Frank Warmerdam to spend up to
> $350 on food and refreshments for "GDAL FOSS4G Bug Squash" event.

Motion passed with support from Howard, Daniel, Tamas, Andrey, and Frank.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Sep  3 16:05:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Motion: Maintainer Contract for Sept->December
In-Reply-To: <46D72207.8090206@pobox.com>
References: <46D72207.8090206@pobox.com>
Message-ID: <46DC68FA.5050105@loskot.net>

Dear PSC members,

Thank you very much for your votes!
I'm happy about this continuation of my work with GDAL project.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From paul.tildesley at csiro.au  Tue Sep  4 03:31:46 2007
From: paul.tildesley at csiro.au (Paul Tildesley)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Converting netCDF to geoTIFF with colour
Message-ID: <loom.20070904T092227-394@post.gmane.org>

I am trying to convert an 8-bit band in a netCDF file to GeoTIFF using
gdal_translate. I have used the command:

gdal_translate -of GTiff netCDF:"SST3d_20070901.nc":sst SST3d_20070901.tif

and this works except that the output file is greyscale and I want colour. I
know that there is no colour table in the netCDF file so I need to give
gdal_translate a colour table to use in creating the geoTIFF file? I cannot find
any documentation that tells me how to do this.

Any help gratefully received.

Paul.


From Dan.Bowerman at ec.gc.ca  Tue Sep  4 11:32:22 2007
From: Dan.Bowerman at ec.gc.ca (Bowerman,Dan [Burlington])
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] OGR WCTS Win32 configuration
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F2E3746@ecburexch1.ontario.int.ec.gc.ca>

Hello,

I am interested in configuring the Web Coordinate Transformation System
as a service on our Windows Server 2003 webserver. I have the tools
setup and they function properly through the command line as per the
installation instructions at
http://home.gdal.org/projects/wcts/install.html, however I am uncertain
how to get this working as a usable web service that I can call
remotely. Does anyone have experience with setting this up that might
lend me some advice?

Thanks,

Dan Bowerman
CABIN/NAESI Developer
http://cabin.cciw.ca/
Environment Canada
(905)315-5215
dan.bowerman@ec.gc.ca

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070904/a7786ce3/attachment.html
From warmerdam at pobox.com  Tue Sep  4 12:02:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] OGR WCTS Win32 configuration
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F2E3746@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F2E3746@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <46DD8191.2090603@pobox.com>

Bowerman,Dan [Burlington] wrote:
> Hello,
> 
> I am interested in configuring the Web Coordinate Transformation System 
> as a service on our Windows Server 2003 webserver. I have the tools 
> setup and they function properly through the command line as per the 
> installation instructions at 
> _http://home.gdal.org/projects/wcts/install.html_, however I am 
> uncertain how to get this working as a usable web service that I can 
> call remotely. Does anyone have experience with setting this up that 
> might lend me some advice?

Dan,

Are you familiar with setting up cgi web services like MapServer?  It
should be similar in that you just copy the ogrwcts.exe and wctsclient.exe
executables to your cgi-bin directory.  Keep the notes about the PROJ_LIB
and GDAL_DATA environment variables in mind.  On windows the default locations
to search for stuff is different, and you will almost certainly have to
set these two enviroment variables (perhaps as system environment variables)
to point to where the supporting data files are.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Dan.Bowerman at ec.gc.ca  Tue Sep  4 14:17:13 2007
From: Dan.Bowerman at ec.gc.ca (Bowerman,Dan [Burlington])
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] OGR WCTS Win32 configuration
In-Reply-To: <46DD8191.2090603@pobox.com>
Message-ID: <2DC5CCA14756424BBBEE8B4B2E4A682F2E3748@ecburexch1.ontario.int.ec.gc.ca>

Hi Frank, thank you for your fast response;

Should the WTCS service be accessible through an URL like this:
http://mydomain.ca/cgi-bin/ogrwcts.exe?request=GetCapabilities
Or would I need to create a CGI wrapper for this to work under
Windows/IIS? Currently on my server, the URL above will prompt you to
download the executable rather than return the expected XML document. 

Thanks,

Dan Bowerman
CABIN/NAESI Developer
http://cabin.cciw.ca/
Environment Canada
(905)315-5215
dan.bowerman@ec.gc.ca

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, September 04, 2007 12:02 PM
To: Bowerman,Dan [Burlington]
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] OGR WCTS Win32 configuration

Bowerman,Dan [Burlington] wrote:
> Hello,
> 
> I am interested in configuring the Web Coordinate Transformation
System 
> as a service on our Windows Server 2003 webserver. I have the tools 
> setup and they function properly through the command line as per the 
> installation instructions at 
> _http://home.gdal.org/projects/wcts/install.html_, however I am 
> uncertain how to get this working as a usable web service that I can 
> call remotely. Does anyone have experience with setting this up that 
> might lend me some advice?

Dan,

Are you familiar with setting up cgi web services like MapServer?  It
should be similar in that you just copy the ogrwcts.exe and
wctsclient.exe
executables to your cgi-bin directory.  Keep the notes about the
PROJ_LIB
and GDAL_DATA environment variables in mind.  On windows the default
locations
to search for stuff is different, and you will almost certainly have to
set these two enviroment variables (perhaps as system environment
variables)
to point to where the supporting data files are.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org



From mateusz at loskot.net  Tue Sep  4 14:45:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] GDAL Maintenance Report 7 - Final
Message-ID: <46DDA7BD.6000305@loskot.net>

Hi,

I submitted final Report 7:

http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByMateusz2007

This time, it covers ~4-6 weeks.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Tue Sep  4 16:10:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] OGR WCTS Win32 configuration
In-Reply-To: <2DC5CCA14756424BBBEE8B4B2E4A682F2E3748@ecburexch1.ontario.int.ec.gc.ca>
References: <2DC5CCA14756424BBBEE8B4B2E4A682F2E3748@ecburexch1.ontario.int.ec.gc.ca>
Message-ID: <46DDBB9A.8070301@pobox.com>

Bowerman,Dan [Burlington] wrote:
> Hi Frank, thank you for your fast response;
> 
> Should the WTCS service be accessible through an URL like this:
> http://mydomain.ca/cgi-bin/ogrwcts.exe?request=GetCapabilities
> Or would I need to create a CGI wrapper for this to work under
> Windows/IIS? Currently on my server, the URL above will prompt you to
> download the executable rather than return the expected XML document. 

Dan,

I've never used IIS, but my understanding is that there are some
particular steps you need to do in IIS to identify executables to be
usable as CGI programs.

It is very doable, but I'm not going to be any help with it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmcdermott at geomega.com  Tue Sep  4 18:16:34 2007
From: dmcdermott at geomega.com (Dennis)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Error when invoking AllRegister in C#
Message-ID: <46DDD942.6050300@geomega.com>

I'm working on a C# project that needs to use gdal.   However, whenever 
I try to invoke Gdal.AllRegister I get this error:  The type initializer 
for OSGeo.GDAL.GdalPINVOKE threw an exception.  This is surprising 
because I was able to run one of the sample programs successfully and my 
project has the same references as the sample program.  The only 
difference I can tell between the two projects is that mine is a forms 
project while the sample is a console project (and I can't see why that 
would make a difference).

Any ideas what might be causing this?

-- 
Dennis McDermott
Database developer/programmer
Geomega
Phone: 303-266-5445


From sy at perkins.net  Tue Sep  4 19:02:10 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Error when invoking AllRegister in C#
In-Reply-To: <46DDD942.6050300@geomega.com>
References: <46DDD942.6050300@geomega.com>
Message-ID: <46DDE3F2.6070304@perkins.net>

Dennis wrote:
> I'm working on a C# project that needs to use gdal.   However, 
> whenever I try to invoke Gdal.AllRegister I get this error:  The type 
> initializer for OSGeo.GDAL.GdalPINVOKE threw an exception.  This is 
> surprising because I was able to run one of the sample programs 
> successfully and my project has the same references as the sample 
> program.  The only difference I can tell between the two projects is 
> that mine is a forms project while the sample is a console project 
> (and I can't see why that would make a difference).
>
> Any ideas what might be causing this?
>

The usual cause for this is that one of the GDAL DLLs that you need is 
not being found at runtime. If you look at the inner exception details 
you may see a message about DLLs.

The gdal_csharp.dll assembly you added a reference to in your project is 
merely a front for gdal_wrap.dll, which in turn calls gdal14.dll to do 
the work.

You need to make sure that the GDAL DLL  and the "wrap" DLLs are in a 
place that they can be found at runtime. This usually means they either 
have to be in the same directory as your applications, or in a directory 
that is listed in your PATH. Note that this is all in addition to adding 
a reference to the GDAL C# assemblies.


Cheers,

Simon


From JARED.RUBIN at saic.com  Tue Sep  4 20:44:28 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] loading metadata into NITF from separate image format
In-Reply-To: <46D8B2BD.4010605@ionicenterprise.com>
References: <200708311651.41074.rubinj@nemesis.tucson.saic.com>
	<46D8B2BD.4010605@ionicenterprise.com>
Message-ID: <200709041744.29146.rubinj@nemesis.tucson.saic.com>

Sophia,
  I am have my own internal image format and would like to stuff metadata into 
a nitf file without relying upon the command line. So for example I want to 
place the  ANGLE_TO_NORTH into the USE00A tag for NITF.
I am inheriting from RawDataSet

I see the that the nitf library  uses
GDALPamDataset->SetMetadata
and 
GDALPamDataset->SetMetadataItem

is this how the metadata gets passed between image formats?

thanks
Jared


On Friday 31 August 2007 17:30, Sophia Parafina wrote:
> Jared,
>
> The NITF specs are available here:
> http://www.gwg.nga.mil/ntb/baseline/format.html, they list the defined
> tags for metadata in the header.  I'm not sure what you mean by domain,
> but I don't think there are nitf tags for sensor zenith or sun azimuth.
> However, using gdal_translate use the -mo "tag=value" option to insert
> the metadata. Yes, gdal_translate will write the metadata from a nitf to
> a geotiff.
>
> Cheers,
> sophia
>
> Jared Rubin wrote:
> > I am inheriting from the RawDataset because it is scan line orientated
> > and would like to stuff metadata like sensor zenith, sun azimuth, etc..
> > that are well defined metadata items in NITF and TIFF so that I can
> > convert an internal image format to NITF or TIFF. Is there a specific
> > domain that I need to use for NITF or TIFF for stuffing the metadata. If
> > so can someone provide an example?
> >    In addition, if i was to stuff the metadata to NITF, would it carry
> > over to TIFF?
> >
> > Basically if run gdal_translate from my internal format to NITF and then
> > run gdal_translate from NITF to TIFF would the metadata carry over to
> > TIFF?
> >
> > Thanks
> > Jared
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Sep  4 22:22:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] loading metadata into NITF from separate image format
In-Reply-To: <200709041744.29146.rubinj@nemesis.tucson.saic.com>
References: <200708311651.41074.rubinj@nemesis.tucson.saic.com>
	<46D8B2BD.4010605@ionicenterprise.com>
	<200709041744.29146.rubinj@nemesis.tucson.saic.com>
Message-ID: <46DE12F5.9040005@pobox.com>

Jared Rubin wrote:
> Sophia,
>   I am have my own internal image format and would like to stuff metadata into 
> a nitf file without relying upon the command line. So for example I want to 
> place the  ANGLE_TO_NORTH into the USE00A tag for NITF.
> I am inheriting from RawDataSet
> 
> I see the that the nitf library  uses
> GDALPamDataset->SetMetadata
> and 
> GDALPamDataset->SetMetadataItem
> 
> is this how the metadata gets passed between image formats?

Jared,

First, I don't believe the GDAL NITF writer supports producing USE00A
segments.

Most values that are readable as metadata by the NITF driver, such as
file header fields such as NITF_FTITLE can be passed to the NITF Create()
and CreateCopy() methods as creation options with the NITF_ prefix omitted.
So to set the FTITLE field in an NITF file you would pass the FTITLE
creation option in.

A few fields may also be copied from the metadata of the source file in
CreateCopy() (such as NITF_BLOCKA metadata and NITF_FHDR) but this is
a fairly recent thing.  So setting metadata on your dataset will not
generally result in it being written into the NITF file even if you are
careful to pick the NITF style metadata names.  This is an area where
driver behavior varies quite a bit.

I hope this helps a bit.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From perrygeo at gmail.com  Tue Sep  4 22:42:54 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] "upside down" images
Message-ID: <5383fa5e0709041942h8e7b1bbsec7a83bb843ea4b0@mail.gmail.com>

Hi all,

I have a surfer binary grid that I plan to use with GDAL.
Unfortunately, GDAL is not picking up the proper coordinate space for
the image... Note that the lower and upper Y values are swapped
causing any output files to be flipped along the Y axis.

C:\Workspace\Temp\interpolation>gdalinfo svpce_5.grd
Driver: GS7BG/Golden Software 7 Binary Grid (.grd)
Files: svpce_5.grd
Size is 555, 339
Coordinate System is `'
Origin = (383371.000000000000000,3764907.000000000000000)
Pixel Size = (0.500000000000000,0.500000000000000)
Corner Coordinates:
Upper Left  (  383371.000, 3764907.000)
Lower Left  (  383371.000, 3765076.500)
Upper Right (  383648.500, 3764907.000)
Lower Right (  383648.500, 3765076.500)
Center      (  383509.750, 3764991.750)
Band 1 Block=555x1 Type=Float64, ColorInterp=Undefined
  NoData Value=1.70141e+038



I've brought this issue up before
(http://lists.maptools.org/pipermail/gdal-dev/2006-April/008499.html)
in reference to netcdf files. I was just wondering if:

a) anyone has experienced this and come up with a clean solution
(editing gcps and vrts work but are hardly a robust solution).

or

b) since this does not seem to be a driver-specific issue (or at least
it appears in both the netcdf and the surfer grd drivers), would it be
possible for GDAL to handle this case in a more generic way?



-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From JARED.RUBIN at saic.com  Wed Sep  5 00:28:37 2007
From: JARED.RUBIN at saic.com (Jared Rubin)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] loading metadata into NITF from separate image format
In-Reply-To: <46DE12F5.9040005@pobox.com>
References: <200708311651.41074.rubinj@nemesis.tucson.saic.com>
	<200709041744.29146.rubinj@nemesis.tucson.saic.com>
	<46DE12F5.9040005@pobox.com>
Message-ID: <200709042128.38102.rubinj@nemesis.tucson.saic.com>

Frank,
  So as long I pass all the name/value pairs from my own image library format 
that I writing as a plugin to gdal to SetMetadata and SetMetadataItem, then 
the nitf library should write them out during the conversion? As long as I 
set them appropriately in SetMetadataItem.
  In addition  if did want to pass additional name/value pairs that would be 
used for the RPC00A or USE00A tags, then I could set them and then extend the 
nitf library to write out the USE00A and RPC00A tags. Looking at the nitf 
driver, it doesn't support writing USE00A and RPC00A tags. It does read them 
though.
Thanks
JAred
On Tuesday 04 September 2007 19:22, Frank Warmerdam wrote:
> Jared Rubin wrote:
> > Sophia,
> >   I am have my own internal image format and would like to stuff metadata
> > into a nitf file without relying upon the command line. So for example I
> > want to place the  ANGLE_TO_NORTH into the USE00A tag for NITF.
> > I am inheriting from RawDataSet
> >
> > I see the that the nitf library  uses
> > GDALPamDataset->SetMetadata
> > and
> > GDALPamDataset->SetMetadataItem
> >
> > is this how the metadata gets passed between image formats?
>
> Jared,
>
> First, I don't believe the GDAL NITF writer supports producing USE00A
> segments.
>
> Most values that are readable as metadata by the NITF driver, such as
> file header fields such as NITF_FTITLE can be passed to the NITF Create()
> and CreateCopy() methods as creation options with the NITF_ prefix omitted.
> So to set the FTITLE field in an NITF file you would pass the FTITLE
> creation option in.
>
> A few fields may also be copied from the metadata of the source file in
> CreateCopy() (such as NITF_BLOCKA metadata and NITF_FHDR) but this is
> a fairly recent thing.  So setting metadata on your dataset will not
> generally result in it being written into the NITF file even if you are
> careful to pick the NITF style metadata names.  This is an area where
> driver behavior varies quite a bit.
>
> I hope this helps a bit.
>
> Best regards,

From christian.schaffer at muenchen.de  Wed Sep  5 05:57:12 2007
From: christian.schaffer at muenchen.de (Christian Schaffer)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
In-Reply-To: <E3942D3EB127854BBBC18511759DD003CA74F3@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <46D40C0D.3090601@muenchen.de>
	<E3942D3EB127854BBBC18511759DD003CA74F3@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <46DE7D78.20909@muenchen.de>

Hi all,

I upgraded my xerces-c now to 2.8.0 by downloading the latest stable
binary release for Solaris 10 x86. This seems fine now, at least gdal?s
configure succeeds as desired.

Unfortunately, I got stuck at the next step. Making gdal throws the
following error:
/bin/sh /localdata/build/gdal/gdal-1.4.2/libtool --mode=compile g++
-Wall  -O2   -I/usr/local/xerces-c/include
-I/usr/local/xerces-c/include/xercesc -DOGR_ENABLED
-I/localdata/build/gdal/gdal-1.4.2/port  -I.. -c -o ../../o/reader.o
reader.cpp
 g++ -Wall -O2 -I/usr/local/xerces-c/include
-I/usr/local/xerces-c/include/xercesc -DOGR_ENABLED
-I/localdata/build/gdal/gdal-1.4.2/port -I.. -c reader.cpp  -fPIC -DPIC
-o ../../o/.libs/reader.o
reader.cpp: In member function `virtual void
ParserHandler::startElement(const XMLCh*, const XMLCh*, const XMLCh*,
const xercesc_2_8::Attributes&)':
reader.cpp:250: Fehler: invalid use of undefined type `const struct
xercesc_2_8::Attributes'
/usr/local/xerces-c/include/xercesc/sax2/ContentHandler.hpp:30: Fehler:
forward declaration of `const struct xercesc_2_8::Attributes'
reader.cpp:251: Fehler: invalid use of undefined type `const struct
xercesc_2_8::Attributes'
/usr/local/xerces-c/include/xercesc/sax2/ContentHandler.hpp:30: Fehler:
forward declaration of `const struct xercesc_2_8::Attributes'
reader.cpp:252: Fehler: invalid use of undefined type `const struct
xercesc_2_8:
(...)

Anyone knows about this?

Once again, any help is appreciated.
Thanks in advance and best regards,
Chris


Rushforth, Peter schrieb:
> Hi Chris,
>  
> I think your xerces looks a little old.  Here is the text of my
> my_conf, my configuration
> for solaris 10 on ultrasparc.  I had to build xerces before I could
> build gdal.  I also
> found I needed the largefile stuff to manipulate large gml files.
>  
> ./configure \
> --without-oci \
> --without-libtool \
> --enable-static=yes \
> --disable-shared \
> --prefix=/bilbo05/rushpet/gdal/sol10build \
> --with-static-proj4=/bilbo05/rushpet/proj/proj_sol10 \
> --with-xerces \
> --with-xerces-inc=/bilbo05/rushpet/xerces/xerces-c-src_2_7_0/src/xercesc/include
> \
> --with-xerces-lib="-L/bilbo05/rushpet/xerces/xerces-c-src_2_7_0/lib
> -lxerces-c" \
> --with-sde=/software/sdeexe83 \
> --with-sde-version=83 \
> CFLAGS='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64' \
> CXXFLAGS='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64'
>  
> I hope this helps a bit.
>  
> Cheers,
> Peter
>  
>
> ------------------------------------------------------------------------
> *From:* gdal-dev-bounces@lists.maptools.org
> [mailto:gdal-dev-bounces@lists.maptools.org] *On Behalf Of *Christian
> Schaffer
> *Sent:* August 28, 2007 07:51
> *To:* gdal-dev@lists.maptools.org
> *Subject:* [Gdal-dev] Configure on Solaris 10 --with-xerces fails
>
> Hello list,
>
> I just tried to build GDAL 1.4.2 with the --with-xerces option.
> The system is x86_64
> OS: Solaris 10
> Xerces 2.5.0 from www.blastwave.org
> # pkg-get compare xerces_c
> # (From site http://mirrors.sunsite.dk/csw/unstable )
>        software                    localrev                   remoterev
>        xerces_c        2.5.0,REV=2004.09.12                        SAME
>
> my configure scripts looks like this:
> ./configure \
> --with-gif=internal     \
> --with-jpeg=internal    \
> --with-geotiff=internal \
> --with-libtiff=internal \
> --with-libz=internal    \
> --with-perl \
> --with-xerces \
> --with-xerces-inc=/opt/csw/include \
> --with-oci=/opt/oracle
>
> The error message reads:
> checking for Xerces C++... requested, but compile or link fails!
>
> g++ -I/opt/csw/include -I/opt/csw/include/xercesc -o conftest
> conftest.cpp -L/usr/lib -lxerces-c -lpthread -lpng -lpq -L/usr/lib
> -lpq -lm -lrt -ldl
>
> /opt/csw/bin/ld: warning: libm.so.1, needed by
> /opt/csw/gcc3/lib/gcc/i386-pc-solaris2.8/3.4.5/../../../libstdc++.so,
> may conflict with libm.so.2
> /var/tmp//cckTAZ8O.o: In function `main':
> conftest.cpp:(.text+0x23): undefined reference to
> `xercesc_2_5::XMLUni::fgXercescDefaultLocale'
> conftest.cpp:(.text+0x28): undefined reference to
> `xercesc_2_5::XMLPlatformUtils::Initialize(char const*, char const*,
> xercesc_2_5::PanicHandler*, xercesc_2_5::MemoryManager*)'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunHex_skip6F_b_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunIex_throw6Fpvpkn0AQstatic_type_info_pF1_v_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunIex_alloc6FI_pv_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunKex_rethrow6F_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunSregister_exit_code6FpG_v_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to `__1c2K6Fpv_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunKpure_error6F_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to `__1c2k6Fpv_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunGex_get6F_pv_'
> /opt/csw/lib/libxerces-c.so: undefined reference to `c::c(n6,  (int0_t))'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunKvector_del6FpvIpF1_v_1_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunIex_clean6F_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to
> `__1cG__CrunMex_rethrow_q6F_v_'
> /opt/csw/lib/libxerces-c.so: undefined reference to `c::c(N6,  (int0_t))'
> collect2: ld returned 1 exit status
>
> cat conftest.cpp
> #include <util/XercesDefs.hpp>
> #include <util/PlatformUtils.hpp>
> #if (_XERCES_VERSION >= 20200)
>     XERCES_CPP_NAMESPACE_USE
> #endif
> int main() {  XMLPlatformUtils::Initialize(); }
> configure: error: Please correct Xerces options, or don't enable Xerces.
>
> Any help is greatly appreciated.
> Thanks in advance and best regards,
> Chris
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070905/44b0df5a/attachment.html
From wollez at gmx.net  Wed Sep  5 08:02:02 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] gdal fails on vrt (virtual raster) file
Message-ID: <fbm5rv$vav$1@sea.gmane.org>

Hi,

Gdal fails on my virtual raster file that links to JPEG graphics. Map 
size is 17121x12100 pixel and 13.8 MB of filesize (JPEG images).

Here the command (but also gdal_translate fails with the same error):

D:\DOP>gdalinfo referenz.vrt
ERROR 1: libjpeg: Failed to create temporary file
gdalinfo failed - unable to open 'referenz.vrt'.
Open GDAL Datasets:
   1 N DriverIsNULL 512x512x0

Any help is welcome.
Wolfgang


From bryan at ideotrope.org  Wed Sep  5 08:54:18 2007
From: bryan at ideotrope.org (Bryan Keith)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] "upside down" images
In-Reply-To: <5383fa5e0709041942h8e7b1bbsec7a83bb843ea4b0@mail.gmail.com>
References: <5383fa5e0709041942h8e7b1bbsec7a83bb843ea4b0@mail.gmail.com>
Message-ID: <1316.24.8.158.76.1188996858.squirrel@ideotrope.org>

> Hi all,
>
> I have a surfer binary grid that I plan to use with GDAL.
> Unfortunately, GDAL is not picking up the proper coordinate space for
> the image... Note that the lower and upper Y values are swapped
> causing any output files to be flipped along the Y axis.

Matthew,

I've seen this issue with the Surfer drivers as well.  I have been meaning
to do a careful check and report my findings, but I haven't had a chance
to do that yet.

>
> I've brought this issue up before
> (http://lists.maptools.org/pipermail/gdal-dev/2006-April/008499.html)
> in reference to netcdf files. I was just wondering if:
>
> a) anyone has experienced this and come up with a clean solution
> (editing gcps and vrts work but are hardly a robust solution).
>
> or
>
> b) since this does not seem to be a driver-specific issue (or at least
> it appears in both the netcdf and the surfer grd drivers), would it be
> possible for GDAL to handle this case in a more generic way?

I haven't used the netcdf driver, but it does seem to me to be a driver
issue.  I have only noticed with the Surfer drivers, not with the ~5
others drivers that I use regularly.

Bryan

>
>
>
> --
> Matthew T. Perry
> http://www.perrygeo.net
>
> "You never change things by fighting the existing reality.
> To change something, build a new model that makes
> the existing model obsolete" - R. Buckminster Fuller
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



From prushfor at NRCan.gc.ca  Wed Sep  5 09:39:45 2007
From: prushfor at NRCan.gc.ca (Rushforth, Peter)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
References: <46D40C0D.3090601@muenchen.de>
	<E3942D3EB127854BBBC18511759DD003CA74F3@S0-OTT-X2.nrn.nrcan.gc.ca>
	<46DE7D78.20909@muenchen.de>
Message-ID: <E3942D3EB127854BBBC18511759DD0039A4A2D@S0-OTT-X2.nrn.nrcan.gc.ca>

Chris and list,
 
Could it be that xerces 2.8 is *too* recent?  Is there any idea from
the ogr maintainers which version of xerces one should use when
attempting this?
 
I can't remember if I did try 2.8 or not, but I do remember the process
being difficult.  I also found that having the proj4 libraries built 
and available was important in the operation of the ogr commands,
but not having done that did not impede the progress of building the
binaries.
 
Sorry this is more sympathy than help.
 
Peter

________________________________

From: Christian Schaffer [mailto:christian.schaffer@muenchen.de]
Sent: Wed 05/09/2007 5:57 AM
To: Rushforth, Peter
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Configure on Solaris 10 --with-xerces fails


Hi all,

I upgraded my xerces-c now to 2.8.0 by downloading the latest stable binary release for Solaris 10 x86. This seems fine now, at least gdal?s configure succeeds as desired.

Unfortunately, I got stuck at the next step. Making gdal throws the following error:
/bin/sh /localdata/build/gdal/gdal-1.4.2/libtool --mode=compile g++ -Wall  -O2   -I/usr/local/xerces-c/include -I/usr/local/xerces-c/include/xercesc -DOGR_ENABLED -I/localdata/build/gdal/gdal-1.4.2/port  -I.. -c -o ../../o/reader.o reader.cpp
 g++ -Wall -O2 -I/usr/local/xerces-c/include -I/usr/local/xerces-c/include/xercesc -DOGR_ENABLED -I/localdata/build/gdal/gdal-1.4.2/port -I.. -c reader.cpp  -fPIC -DPIC -o ../../o/.libs/reader.o
reader.cpp: In member function `virtual void ParserHandler::startElement(const XMLCh*, const XMLCh*, const XMLCh*, const xercesc_2_8::Attributes&)':
reader.cpp:250: Fehler: invalid use of undefined type `const struct xercesc_2_8::Attributes'
/usr/local/xerces-c/include/xercesc/sax2/ContentHandler.hpp:30: Fehler: forward declaration of `const struct xercesc_2_8::Attributes'
reader.cpp:251: Fehler: invalid use of undefined type `const struct xercesc_2_8::Attributes'
/usr/local/xerces-c/include/xercesc/sax2/ContentHandler.hpp:30: Fehler: forward declaration of `const struct xercesc_2_8::Attributes'
reader.cpp:252: Fehler: invalid use of undefined type `const struct xercesc_2_8:
(...)

Anyone knows about this?

Once again, any help is appreciated.
Thanks in advance and best regards,
Chris


Rushforth, Peter schrieb: 

	Hi Chris,
	 
	I think your xerces looks a little old.  Here is the text of my my_conf, my configuration
	for solaris 10 on ultrasparc.  I had to build xerces before I could build gdal.  I also
	found I needed the largefile stuff to manipulate large gml files.
	 
	
	./configure \
	--without-oci \
	--without-libtool \
	--enable-static=yes \
	--disable-shared \
	--prefix=/bilbo05/rushpet/gdal/sol10build \
	--with-static-proj4=/bilbo05/rushpet/proj/proj_sol10 \
	--with-xerces \
	--with-xerces-inc=/bilbo05/rushpet/xerces/xerces-c-src_2_7_0/src/xercesc/include \
	--with-xerces-lib="-L/bilbo05/rushpet/xerces/xerces-c-src_2_7_0/lib -lxerces-c" \
	--with-sde=/software/sdeexe83 \
	--with-sde-version=83 \
	CFLAGS='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64' \
	CXXFLAGS='-D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64'
	 
	I hope this helps a bit.
	 
	Cheers,
	Peter
	 

________________________________

	From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Christian Schaffer
	Sent: August 28, 2007 07:51
	To: gdal-dev@lists.maptools.org
	Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
	
	
	Hello list,
	
	I just tried to build GDAL 1.4.2 with the --with-xerces option.
	The system is x86_64
	OS: Solaris 10
	Xerces 2.5.0 from www.blastwave.org <http://www.blastwave.org/> 
	# pkg-get compare xerces_c
	# (From site http://mirrors.sunsite.dk/csw/unstable )
	       software                    localrev                   remoterev
	       xerces_c        2.5.0,REV=2004.09.12                        SAME
	
	my configure scripts looks like this:
	./configure \
	--with-gif=internal     \
	--with-jpeg=internal    \
	--with-geotiff=internal \
	--with-libtiff=internal \
	--with-libz=internal    \
	--with-perl \
	--with-xerces \
	--with-xerces-inc=/opt/csw/include \
	--with-oci=/opt/oracle
	
	The error message reads:
	checking for Xerces C++... requested, but compile or link fails!
	
	g++ -I/opt/csw/include -I/opt/csw/include/xercesc -o conftest conftest.cpp -L/usr/lib -lxerces-c -lpthread -lpng -lpq -L/usr/lib -lpq -lm -lrt -ldl
	
	/opt/csw/bin/ld: warning: libm.so.1, needed by /opt/csw/gcc3/lib/gcc/i386-pc-solaris2.8/3.4.5/../../../libstdc++.so, may conflict with libm.so.2
	/var/tmp//cckTAZ8O.o: In function `main':
	conftest.cpp:(.text+0x23): undefined reference to `xercesc_2_5::XMLUni::fgXercescDefaultLocale'
	conftest.cpp:(.text+0x28): undefined reference to `xercesc_2_5::XMLPlatformUtils::Initialize(char const*, char const*, xercesc_2_5::PanicHandler*, xercesc_2_5::MemoryManager*)'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunHex_skip6F_b_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunIex_throw6Fpvpkn0AQstatic_type_info_pF1_v_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunIex_alloc6FI_pv_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunKex_rethrow6F_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunSregister_exit_code6FpG_v_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1c2K6Fpv_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunKpure_error6F_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1c2k6Fpv_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunGex_get6F_pv_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `c::c(n6,  (int0_t))'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunKvector_del6FpvIpF1_v_1_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunIex_clean6F_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `__1cG__CrunMex_rethrow_q6F_v_'
	/opt/csw/lib/libxerces-c.so: undefined reference to `c::c(N6,  (int0_t))'
	collect2: ld returned 1 exit status
	
	cat conftest.cpp
	#include <util/XercesDefs.hpp>
	#include <util/PlatformUtils.hpp>
	#if (_XERCES_VERSION >= 20200)
	    XERCES_CPP_NAMESPACE_USE
	#endif
	int main() {  XMLPlatformUtils::Initialize(); }
	configure: error: Please correct Xerces options, or don't enable Xerces.
	
	Any help is greatly appreciated.
	Thanks in advance and best regards,
	Chris
	



From warmerdam at pobox.com  Wed Sep  5 10:21:30 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] gdal fails on vrt (virtual raster) file
In-Reply-To: <fbm5rv$vav$1@sea.gmane.org>
References: <fbm5rv$vav$1@sea.gmane.org>
Message-ID: <46DEBB6A.7050607@pobox.com>

WolfgangZ wrote:
> Hi,
> 
> Gdal fails on my virtual raster file that links to JPEG graphics. Map 
> size is 17121x12100 pixel and 13.8 MB of filesize (JPEG images).
> 
> Here the command (but also gdal_translate fails with the same error):
> 
> D:\DOP>gdalinfo referenz.vrt
> ERROR 1: libjpeg: Failed to create temporary file
> gdalinfo failed - unable to open 'referenz.vrt'.
> Open GDAL Datasets:
>   1 N DriverIsNULL 512x512x0
> 
> Any help is welcome.
> Wolfgang

Wolfgang,

This is an issue in the JPEG driver.  It seems that libjpeg tries to
create a temporary file when an operation (like processing a progressive
jpeg) would require quite a bit of memory.  If it fails to create the file
you get the message you see.

I recently changed the amount of memory at which this happens to be 500MB
instead of 1MB in the builtin libjpeg for GDAL (SVN trunk)

   http://trac.osgeo.org/gdal/changeset/11706

If you are building GDAL from source, then you might want to apply the
same change.

It might also be sufficient to copy the jpeg file to a directory where
you have read-write access.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Sep  5 10:39:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] loading metadata into NITF from separate image format
In-Reply-To: <200709042128.38102.rubinj@nemesis.tucson.saic.com>
References: <200708311651.41074.rubinj@nemesis.tucson.saic.com>
	<200709041744.29146.rubinj@nemesis.tucson.saic.com>
	<46DE12F5.9040005@pobox.com>
	<200709042128.38102.rubinj@nemesis.tucson.saic.com>
Message-ID: <46DEBFBB.8010803@pobox.com>

Jared Rubin wrote:
> Frank,
>   So as long I pass all the name/value pairs from my own image library format 
> that I writing as a plugin to gdal to SetMetadata and SetMetadataItem, then 
> the nitf library should write them out during the conversion? As long as I 
> set them appropriately in SetMetadataItem.

Jared,

Sorry, I'm afraid I was unclear on this.  The NITF writer does not generally
capture and store metadata from the source dataset except for a very few
specially named metadata items.

(The above statement is not true if the PAM mechanism is enabled.  If it is
enabled all source metadata *should* be captured in a .aux.xml "spill file",
but will still not be embedded in the NITF file itself)

>   In addition  if did want to pass additional name/value pairs that would be 
> used for the RPC00A or USE00A tags, then I could set them and then extend the 
> nitf library to write out the USE00A and RPC00A tags. Looking at the nitf 
> driver, it doesn't support writing USE00A and RPC00A tags. It does read them 
> though.

That is correct.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From wollez at gmx.net  Wed Sep  5 10:48:28 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <46DEBB6A.7050607@pobox.com>
References: <fbm5rv$vav$1@sea.gmane.org> <46DEBB6A.7050607@pobox.com>
Message-ID: <fbmfjt$67d$1@sea.gmane.org>

Frank Warmerdam schrieb:
> WolfgangZ wrote:
>> Hi,
>>
>> Gdal fails on my virtual raster file that links to JPEG graphics. Map 
>> size is 17121x12100 pixel and 13.8 MB of filesize (JPEG images).
>>
>> Here the command (but also gdal_translate fails with the same error):
>>
>> D:\DOP>gdalinfo referenz.vrt
>> ERROR 1: libjpeg: Failed to create temporary file
>> gdalinfo failed - unable to open 'referenz.vrt'.
>> Open GDAL Datasets:
>>   1 N DriverIsNULL 512x512x0
>>
>> Any help is welcome.
>> Wolfgang
> 
> Wolfgang,
> 
> This is an issue in the JPEG driver.  It seems that libjpeg tries to
> create a temporary file when an operation (like processing a progressive
> jpeg) would require quite a bit of memory.  If it fails to create the file
> you get the message you see.
> 
> I recently changed the amount of memory at which this happens to be 500MB
> instead of 1MB in the builtin libjpeg for GDAL (SVN trunk)
> 
>   http://trac.osgeo.org/gdal/changeset/11706
> 
> If you are building GDAL from source, then you might want to apply the
> same change.
> 
> It might also be sufficient to copy the jpeg file to a directory where
> you have read-write access.
> 
> Best regards,

this patch is probably not jet applied in the FWTools. But I'm wondering 
why even gdalinfo needs to create a temporary file? Why is there the 
need from gdalinfo or gdal_translate to read in the full image? Do I 
understand that that limit equals the maximum file size that can be 
handled? Where is this temporary file usually generated? I'm working on W2k.

Kind regards
Wolfgang



From jluis at ualg.pt  Wed Sep  5 10:50:40 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] "upside down" images
In-Reply-To: <1316.24.8.158.76.1188996858.squirrel@ideotrope.org>
References: <5383fa5e0709041942h8e7b1bbsec7a83bb843ea4b0@mail.gmail.com>
	<1316.24.8.158.76.1188996858.squirrel@ideotrope.org>
Message-ID: <46DEC240.7070902@ualg.pt>

Hi,

For those of you struggling with upside down troubles with netCDF and 
Surfer drivers,
an - GUI, Windows - solution is provided by Mirone 
(w3.ualg.pt/~jluis/mirone).
The files can be saved for example in GeoTiff or JP2K.

Joaquim Luis



From warmerdam at pobox.com  Wed Sep  5 12:04:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <fbmfjt$67d$1@sea.gmane.org>
References: <fbm5rv$vav$1@sea.gmane.org> <46DEBB6A.7050607@pobox.com>
	<fbmfjt$67d$1@sea.gmane.org>
Message-ID: <46DED39F.8000408@pobox.com>

WolfgangZ wrote:
> this patch is probably not jet applied in the FWTools. But I'm wondering 
> why even gdalinfo needs to create a temporary file? Why is there the 
> need from gdalinfo or gdal_translate to read in the full image? Do I 
> understand that that limit equals the maximum file size that can be 
> handled? Where is this temporary file usually generated? I'm working on 
> W2k.

Wolfgang,

I agree that the patch is likely not in FWTools because FWTools uses
a stock external libjpeg instead of the adjusted GDAL libjpeg.

I'm not exactly clear what the temp file is for.  I have the vague
impression it is only needed with progressive jpegs, but I could be wrong.

I don't know for sure where it is created.

Best regards,

-
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Sep  5 12:51:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
In-Reply-To: <46D40C0D.3090601@muenchen.de>
References: <46D40C0D.3090601@muenchen.de>
Message-ID: <46DEDE82.3070103@loskot.net>

Christian Schaffer wrote:
> 
> my configure scripts looks like this:
> ./configure \
> --with-gif=internal     \
> --with-jpeg=internal    \
> --with-geotiff=internal \
> --with-libtiff=internal \
> --with-libz=internal    \
> --with-perl \
> --with-xerces \
> --with-xerces-inc=/opt/csw/include \
> --with-oci=/opt/oracle
> [...]

Christian,

Could you try to use all 3 options for xerces, this way:

./configure --with-xerces=yes \
   --with-xerces-inc=/path/to/include \
   --with-xerces-lib="-L/path/to/lib -lxerces -lpthread"

and see if it works.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Sep  5 12:55:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
In-Reply-To: <E3942D3EB127854BBBC18511759DD0039A4A2D@S0-OTT-X2.nrn.nrcan.gc.ca>
References: <46D40C0D.3090601@muenchen.de>	<E3942D3EB127854BBBC18511759DD003CA74F3@S0-OTT-X2.nrn.nrcan.gc.ca>	<46DE7D78.20909@muenchen.de>
	<E3942D3EB127854BBBC18511759DD0039A4A2D@S0-OTT-X2.nrn.nrcan.gc.ca>
Message-ID: <46DEDF89.40306@loskot.net>

Rushforth, Peter wrote:
> Chris and list,
>  
> Could it be that xerces 2.8 is *too* recent?  Is there any idea from
> the ogr maintainers which version of xerces one should use when
> attempting this?

Peter,

Xerces 2.8 is not too recent.
In April, I updated OGR to support Xerces 3.0.0 and I've been
using 3.0.0 as well as 2.7.0 since then without any problems.

Here is the whole story:

http://trac.osgeo.org/gdal/ticket/1577

Anyway, I'm checking OGR with Xerces 2.8.0 now.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Sep  5 13:33:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problem to compile gdal 1.4.2 with kakadu JPG2000
	support
In-Reply-To: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>
References: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>
Message-ID: <46DEE855.7000706@loskot.net>

patrice canonici wrote:
> I'm  trying to compile gdal 1.4.2 with kakadu 5.2.6 in order to use
> it into mapserver.
> 
> I build kakadu successfully as it is explain in the documentation. 
> But, when I try to compile gdal, it fails. [...]


Patrice,

Unfortunately, I have only access to Kakadu 6.0 so I'm not sure if there
is any problem with older versions.

One thing comes to my mind, did you run "make clean" and then try to
build with Kakadu using clean sources tree?
If not, please try to do make clean first and then ./configure and make
and see if it helps.

BTW, Here you can find some instructions about how to build in JP2KAK
driver support: http://trac.osgeo.org/gdal/wiki/JP2KAK

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From even.rouault at mines-paris.org  Wed Sep  5 14:17:16 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <46DED39F.8000408@pobox.com>
References: <fbm5rv$vav$1@sea.gmane.org> <fbmfjt$67d$1@sea.gmane.org>
	<46DED39F.8000408@pobox.com>
Message-ID: <200709052017.17681.even.rouault@mines-paris.org>

Hi,

I've just had a quick look into libjpeg. You may not need to patch the #define 
DEFAULT_MAX_MEM, as the only indirect use of this I can see is in jmemmgr.c 
where it	can be overloaded by the JPEGMEM environment variable. So, even with 
FWTools, if you do "JPEGMEM=500M gdalinfo blah.jpeg", you should have the 
same behaviour as the gdal SVN patched libjpeg.
That's just theory. I haven't tested anything.

Best regards

On Wednesday 05 September 2007 18:04:47 Frank Warmerdam wrote:
> WolfgangZ wrote:
> > this patch is probably not jet applied in the FWTools. But I'm wondering
> > why even gdalinfo needs to create a temporary file? Why is there the
> > need from gdalinfo or gdal_translate to read in the full image? Do I
> > understand that that limit equals the maximum file size that can be
> > handled? Where is this temporary file usually generated? I'm working on
> > W2k.
>
> Wolfgang,
>
> I agree that the patch is likely not in FWTools because FWTools uses
> a stock external libjpeg instead of the adjusted GDAL libjpeg.
>
> I'm not exactly clear what the temp file is for.  I have the vague
> impression it is only needed with progressive jpegs, but I could be wrong.
>
> I don't know for sure where it is created.
>
> Best regards,
>
> -
> ---------------------------------------+-----------------------------------
>--- I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com light and sound - activate the windows |
> http://pobox.com/~warmerdam and watch the world go round - Rush    |
> President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From mateusz at loskot.net  Wed Sep  5 14:35:12 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problems compiling gdal with xerces
In-Reply-To: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>
References: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>
Message-ID: <46DEF6E0.3080003@loskot.net>

Edward Fialkowski wrote:
> Hi List, I'm having some problems compiling gdal with xerces support.
> 
> Using xerces veresion 2.7.0 on Redhat.
> 
> I compile xerces from notes at:
> http://xml.apache.org/xerces-c/build-winunix.html#UNIX
> 
> set environment variable
> runConfigure -plinux -cgcc -xg++ -minmem -nsocket -tnative -rpthread
> gmake

Edward,

These options look OK.

> Then I go to gdal version 1.4.2 and compile with:
> ./configure CFLAGS=-fPIC CPPFLAGS=-fPIC CXXFLAGS=-fPIC --with-ogr
> --without-python --with-xerces
> make

OK

> Eventually I get:
>  g++ -Wall -fPIC -I/usr/local/include/xercesc
> -I/usr/local/include/xercesc/xercesc -DOGR_ENABLED -fPIC
> -I/usr/local/src/gdal-1.4.2/port -I.. -c iom_attr.cpp  -fPIC -DPIC -o
> ../../o/.libs/iom_attr.o
> In file included from iom_attr.cpp:26:
> ../iom/iom_p.h:43:55: xercesc/framework/LocalFileFormatTarget.hpp: No such
> file or directory
> In file included from iom_attr.cpp:26:
> ../iom/iom_p.h:68: error: expected constructor, destructor, or type
> conversion before "class"
> ../iom/iom_p.h:89: error: `XmlWrtAttr' has not been declared
> ../iom/iom_p.h:89: error: ISO C++ forbids declaration of `attrv' with no
> type
> ../iom/iom_p.h: In destructor `StrX::~StrX()':
> ../iom/iom_p.h:732: error: `release' is not a member of `XMLString'
> ../iom/iom_p.h: In destructor `XStr::~XStr()':
> ../iom/iom_p.h:777: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `const char* iom_getattrname(iom_object*, int)':
> iom_attr.cpp:44: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `char* iom_getattrvalue(iom_object*, const
> char*)':
> iom_attr.cpp:67: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `char* iom_getattrvalueUTF8(iom_object*, const
> char*)':
> iom_attr.cpp:85: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `void iom_setattrvalueUTF8(iom_object*, const
> char*, const char*)':
> iom_attr.cpp:114: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `char* iom_getattrprim(iom_object*, const char*,
> int)':
> iom_attr.cpp:135: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `char* iom_getattrprimUTF8(iom_object*, const
> char*, int)':
> iom_attr.cpp:151: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `const char* iom_getxmleleattrname(iom_object*,
> int)':
> iom_attr.cpp:225: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `char* iom_getxmleleprim(iom_object*, int)':
> iom_attr.cpp:249: error: `release' is not a member of `XMLString'
> iom_attr.cpp: In function `char* iom_getxmleleprimUTF8(iom_object*, int)':
> iom_attr.cpp:266: error: `release' is not a member of `XMLString'
> make[4]: *** [../../o/iom_attr.o] Error 1
> make[4]: Leaving directory `/usr/local/src/gdal-1.4.2
> /ogr/ogrsf_frmts/ili/iom'
> make[3]: *** [iom-target] Error 2
> make[3]: Leaving directory `/usr/local/src/gdal-1.4.2/ogr/ogrsf_frmts/ili'
> make[2]: *** [ili-target] Error 2
> make[2]: Leaving directory `/usr/local/src/gdal-1.4.2/ogr/ogrsf_frmts'
> make[1]: *** [sublibs] Error 2
> make[1]: Leaving directory `/usr/local/src/gdal-1.4.2/ogr'
> make: *** [ogr-target] Error 2
> [root@niceguy gdal-1.4.2]# ls /usr/local/include/xercesc

Hmm, I just tried to build GDAL SVN with Xerces 2.7.0 and I didn't get
any errors. I will check GDAL 1.4.2 release.

> I have tried with XERCESCROOT="/usr/local/src/xerces-c-src_2_7_0/src"
> and XERCESCROOT="/usr/local/src/xerces-c-src_2_7_0/"
> as with various configuration options on gdal for include directory, etc.
> but no idea what they should be set to.

XERCESCROOT is not required nor used by GDAL build configuration.
It's only needed if you build Xerces and then it should point to the
root directory of Xerces sources, the one you get after
unpacking the .tar.gz package.

> The first missing file: xercesc/framework/LocalFileFormatTarget.hpp is
> indeed located at:
> /usr/local/src/xerces-c-src_2_7_0/src/xercesc/framework
> 
> I'm so close to finishing what I need!  does anyone have any ideas what's
> causing this or how to get around it?

I'll check GDAL 1.4.2 today and bring some feedback.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Allan.Meek at drdc-rddc.gc.ca  Wed Sep  5 15:01:40 2007
From: Allan.Meek at drdc-rddc.gc.ca (Meek, Allan (Contractor))
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] GeoTIFF Georeferencing Problem
Message-ID: <2E58C246F17003499C141D334794D04903348DEF@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi,

I'm trying to work with a set of GeoTIFFs that are giving me
georeferencing headaches.

One example is available at:

http://www7333.nrlssc.navy.mil/browse/lvl4/modis/5.2/METOC-Halifax/7dayl
p/2007/aug/MODAM20072072007213.L4_LP_NOAA_HFX_sst.tiff

Gdalinfo produces the following output (I've removed some irrelevant
lines):

Driver: GTiff/GeoTIFF
Size is 1749, 869
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,298.257223560493]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["latitude_of_origin",39],
    PARAMETER["central_meridian",-59.5],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (1080355.008799013900000,4727540.859266426400000)
Pixel Size = (-1237.520055898069100,-1237.520055898069400)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_DOCUMENTNAME=MODAM20072072007213.L4_LP_NOAA_HFX_sst.tiff
  TIFFTAG_IMAGEDESCRIPTION=
createTime = "Wed Aug  1 20:07:38 2007"
createSoftware = "APS v3.5.3"
createPlatform = "i686-pc-linux-gnu"
createAgency = "Naval Research Laboratory, Stennis Space Center"
mapProjectionSystem = "NRL(USGS)"
mapProjection = "METOC-Halifax"
mapUpperLeft = [48.0003,-72]
mapUpperRight = [48.0003,-47.0286]
mapLowerLeft = [39,-72]
mapLowerRight = [39,-47.0286]
  TIFFTAG_SOFTWARE=imgConvertTIFF v3.5.3 (compiled Feb  5 2007, 12:26:26
for 
i686-pc-linux-gnu)
  TIFFTAG_DATETIME=2007:08:01 15:07:43
  TIFFTAG_XRESOLUTION=72
  TIFFTAG_YRESOLUTION=72
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  ( 1080355.009, 4727540.859) ( 49d47'42.02"W, 39d13'45.43"N)
Lower Left  ( 1080355.009, 3652135.931) ( 49d47'42.02"W, 31d19'11.08"N)
Upper Right (-1084067.569, 4727540.859) ( 69d14'18.04"W, 39d13'45.43"N)
Lower Right (-1084067.569, 3652135.931) ( 69d14'18.04"W, 31d19'11.08"N)
Center      (   -1856.280, 4189838.395) ( 59d31'0.03"W, 35d22'19.83"N)
Band 1 Block=1749x1 Type=Float32, ColorInterp=Gray

The reported corner coordinates are wrong -- you can see the actual
coordinates in mapUpperLeft, mapUpperRight, etc. Also, GEOGCS, DATUM,
and SPHEROID are blank.

When I open the file in ENVI, I get a window with the message:

GeoTIFF Datum: <blank>
  Unrecognized GeoTIFF datum name.
  Please select ENVI datum name from list.

Choosing WGS-84 loads the image properly.

Is there anything I can do to fix this -- to have GDAL report the
correct corner coordinates?

Thanks,
Allan


From even.rouault at mines-paris.org  Wed Sep  5 15:14:27 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <200709052017.17681.even.rouault@mines-paris.org>
References: <fbm5rv$vav$1@sea.gmane.org> <46DED39F.8000408@pobox.com>
	<200709052017.17681.even.rouault@mines-paris.org>
Message-ID: <200709052114.29242.even.rouault@mines-paris.org>

Answering to my self and after a few more investigations, we can read in 
jpeglib.h :

  /* Limit on memory allocation for this JPEG object.  (Note that this is
   * merely advisory, not a guaranteed maximum; it only affects the space
   * used for virtual-array buffers.)  May be changed by outer application
   * after creating the JPEG object.
   */
  long max_memory_to_use;


So, an alternative to define JPEGMEM (which seems to do what I thought it 
should do in my previous message) or  could be to add the following lines :
    if (getenv("JPEGMEM") == NULL)
       poDS->sDInfo.mem->max_memory_to_use = 500 * 1024 * 1024;
just after creating the decompression object done by :
    jpeg_create_decompress( &(poDS->sDInfo) ) ;

This way, we don't need to patch libjpeg and if the user wants to define it's 
own value, he's still able to do so.

FYI, on my Ubuntu system, I found out that libjpeg is build by default with 
1GB for DEFAULT_MAX_MEM.
I've tried to define JPEGMEM to a small value but couldn't reproduce 
Wolfgang's crash. I think it's because, in jmemansi.c, we can see that the 
temporary file is created by the C library "tmpfile()" call. On Linux, I 
think this file is created in /tmp : doing a "lsof | grep gdalinfo" with 
small values of JPEGMEM on a 10000x10000 progressive jpeg seems to confirm 
this intuition. I don't know where the MS C library tries to create the 
temporary file. The answer to this question could show a need for a specific 
patch in libjpeg for FWTool to create the temporary file in an appropriate 
directory.

To answer one of Wolfgang's question, it may be surprising that gdalinfo is 
affected by this issue. But in JPGDataset::Open, we call 
jpeg_start_decompress that is really slow when I set a small value for 
JPEGMEM. Then we read image size, color space and other information. The 
question is : do we really need to do jpeg_start_decompress to get this 
values ? Probably, but I we don't, it could speed up gdalinfo.


On Wednesday 05 September 2007 20:17:16 Even Rouault wrote:
> Hi,
>
> I've just had a quick look into libjpeg. You may not need to patch the
> #define DEFAULT_MAX_MEM, as the only indirect use of this I can see is in
> jmemmgr.c where it	can be overloaded by the JPEGMEM environment variable.
> So, even with FWTools, if you do "JPEGMEM=500M gdalinfo blah.jpeg", you
> should have the same behaviour as the gdal SVN patched libjpeg.
> That's just theory. I haven't tested anything.
>
> Best regards
>
> On Wednesday 05 September 2007 18:04:47 Frank Warmerdam wrote:
> > WolfgangZ wrote:
> > > this patch is probably not jet applied in the FWTools. But I'm
> > > wondering why even gdalinfo needs to create a temporary file? Why is
> > > there the need from gdalinfo or gdal_translate to read in the full
> > > image? Do I understand that that limit equals the maximum file size
> > > that can be handled? Where is this temporary file usually generated?
> > > I'm working on W2k.
> >
> > Wolfgang,
> >
> > I agree that the patch is likely not in FWTools because FWTools uses
> > a stock external libjpeg instead of the adjusted GDAL libjpeg.
> >
> > I'm not exactly clear what the temp file is for.  I have the vague
> > impression it is only needed with progressive jpegs, but I could be
> > wrong.
> >
> > I don't know for sure where it is created.
> >
> > Best regards,
> >
> > -
> > ---------------------------------------+---------------------------------
> >-- --- I set the clouds in motion - turn up   | Frank Warmerdam,
> > warmerdam@pobox.com light and sound - activate the windows |
> > http://pobox.com/~warmerdam and watch the world go round - Rush    |
> > President OSGeo, http://osgeo.org
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From wef1 at cec.wustl.edu  Wed Sep  5 15:26:44 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problems compiling gdal with xerces
In-Reply-To: <f4c7e92f0709051225r626a8ce8n6418687653f10d4b@mail.gmail.com>
References: <f4c7e92f0708281140vf6c33deh4b3594074cd2f326@mail.gmail.com>
	<46DEF6E0.3080003@loskot.net>
	<f4c7e92f0709051147p6291e364j3cad71f21164903e@mail.gmail.com>
	<f4c7e92f0709051225r626a8ce8n6418687653f10d4b@mail.gmail.com>
Message-ID: <f4c7e92f0709051226h5d34c798vc86657e4e5e760e1@mail.gmail.com>

Sorry, I sent from the wrong e-mail address so the list didn't accept it.

Hey Mateusz, thanks for looking into it.  I did just today, finally get Gdal
compiled with Xerces. I just had to find the right jumble of options.
Unfortunately, I wasn't as close as I thought. The whole point for me is to
use this program FeatureServer, which provides WFS data to OpenLayers, a
javascript mapping application.

So, just in case you or anyone are interested, I did get Xerces working:
[root@niceguy ogr]# ./ogrinfo wfs.gml
Had to open data source read-only.
INFO: Open of `wfs.gml'
      using driver `GML' successful.
1: GIS

Unfortunately, my FeatureServer request returns an error:

An error occurred: libxerces-c.so.27: cannot open shared object file:
No such file or directory


So, I run /sbin/ldconfig to reload shared libraries.  FeatureServer does
indeed recognize the library now, but returns the original error that OGR
cannot read the GML result.  So, I check my ogrinfo again, and apparently
xerces is not installed....

So here's my whole routine.  If I run make install from gdal directory, the
ogrinfo command-line once again recognizes gml input, but the shared
libraries cannot be loaded for my FeatureServer.

[root@niceguy ogr]# ./ogrinfo wfs.gml
Had to open data source read-only.
INFO: Open of `wfs.gml'
      using driver `GML' successful.
1: GIS
[root@niceguy ogr]# /sbin/ldconfig
[root@niceguy ogr]# ./ogrinfo wfs.gml
ERROR 1: Unable to create Xerces C++ based GML reader, Xerces support
not configured into GDAL/OGR.
ERROR 1: File wfs.gml appears to be GML but the GML reader can't
be instantiated, likely because Xerces support wasn't
configured in.
FAILURE:
Unable to open datasource `wfs.gml' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> KML
  -> PostgreSQL

Pretty bizarre if you ask me, now I have even less of a clue what to do than
before!

Thanks again for looking into that.  If anyone has any random ideas or
suggestions, I'd be happy to hear them.
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070905/380b6eff/attachment.html
From sandricionut at yahoo.com  Wed Sep  5 15:29:40 2007
From: sandricionut at yahoo.com (sandricionut)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] StandardError: 'NoneType' object has no attribute '_o'
Message-ID: <12496782.post@talk.nabble.com>


Hi:
I am using Gdal 142 version on Windows XP sp2 with Numeric-24.2,
numarray-1.5.1 for Python 2.4.
I want to use genericfunctions from numarray. I have tried to use the
example provided in numarray users' manual release 1.5:
>>> def fnc(iline, oline):
... oline[...] = iline[:-2] + 2 * iline[1:-1] + 3 * iline[2:]
...
>>> print generic_filter1d(a, fnc, 3)
[[ 3 8 14 17]
[27 32 38 41]
[51 56 62 65]]

Everything works OK and I get the proper result, but when I try to use
gdalnumeric to save the array to a image format (tif for example, or any
other format supported by gdal) I get the following error:

  File "C:\Python24\Lib\site-packages\gdalnumeric.py", line 123, in
SaveArray
    return driver.CreateCopy( filename, OpenArray(src_array,prototype) )
  File "C:\Python24\Lib\site-packages\gdal.py", line 592, in CreateCopy
    target_ds = _gdal.GDALCreateCopy( self._o, filename, source_ds._o,
StandardError: 'NoneType' object has no attribute '_o'

I don't know what I do wrong

Thank you

Ionut
-- 
View this message in context: http://www.nabble.com/StandardError%3A-%27NoneType%27-object-has-no-attribute-%27_o%27-tf4383687.html#a12496782
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From wollez at gmx.net  Wed Sep  5 15:43:40 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <200709052114.29242.even.rouault@mines-paris.org>
References: <fbm5rv$vav$1@sea.gmane.org>
	<46DED39F.8000408@pobox.com>	<200709052017.17681.even.rouault@mines-paris.org>
	<200709052114.29242.even.rouault@mines-paris.org>
Message-ID: <fbn0tt$76f$1@sea.gmane.org>

Even Rouault schrieb:
> Answering to my self and after a few more investigations, we can read in 
> jpeglib.h :
> 
>   /* Limit on memory allocation for this JPEG object.  (Note that this is
>    * merely advisory, not a guaranteed maximum; it only affects the space
>    * used for virtual-array buffers.)  May be changed by outer application
>    * after creating the JPEG object.
>    */
>   long max_memory_to_use;
> 
> 
> So, an alternative to define JPEGMEM (which seems to do what I thought it 
> should do in my previous message) or  could be to add the following lines :
>     if (getenv("JPEGMEM") == NULL)
>        poDS->sDInfo.mem->max_memory_to_use = 500 * 1024 * 1024;
> just after creating the decompression object done by :
>     jpeg_create_decompress( &(poDS->sDInfo) ) ;
> 
> This way, we don't need to patch libjpeg and if the user wants to define it's 
> own value, he's still able to do so.
> 
> FYI, on my Ubuntu system, I found out that libjpeg is build by default with 
> 1GB for DEFAULT_MAX_MEM.
> I've tried to define JPEGMEM to a small value but couldn't reproduce 
> Wolfgang's crash. I think it's because, in jmemansi.c, we can see that the 
> temporary file is created by the C library "tmpfile()" call. On Linux, I 
> think this file is created in /tmp : doing a "lsof | grep gdalinfo" with 
> small values of JPEGMEM on a 10000x10000 progressive jpeg seems to confirm 
> this intuition. I don't know where the MS C library tries to create the 
> temporary file. The answer to this question could show a need for a specific 
> patch in libjpeg for FWTool to create the temporary file in an appropriate 
> directory.
> 
> To answer one of Wolfgang's question, it may be surprising that gdalinfo is 
> affected by this issue. But in JPGDataset::Open, we call 
> jpeg_start_decompress that is really slow when I set a small value for 
> JPEGMEM. Then we read image size, color space and other information. The 
> question is : do we really need to do jpeg_start_decompress to get this 
> values ? Probably, but I we don't, it could speed up gdalinfo.
> 
> 
> On Wednesday 05 September 2007 20:17:16 Even Rouault wrote:
>> Hi,
>>
>> I've just had a quick look into libjpeg. You may not need to patch the
>> #define DEFAULT_MAX_MEM, as the only indirect use of this I can see is in
>> jmemmgr.c where it	can be overloaded by the JPEGMEM environment variable.
>> So, even with FWTools, if you do "JPEGMEM=500M gdalinfo blah.jpeg", you
>> should have the same behaviour as the gdal SVN patched libjpeg.
>> That's just theory. I haven't tested anything.
>>
>> Best regards
>>
>> On Wednesday 05 September 2007 18:04:47 Frank Warmerdam wrote:
>>> WolfgangZ wrote:
>>>> this patch is probably not jet applied in the FWTools. But I'm
>>>> wondering why even gdalinfo needs to create a temporary file? Why is
>>>> there the need from gdalinfo or gdal_translate to read in the full
>>>> image? Do I understand that that limit equals the maximum file size
>>>> that can be handled? Where is this temporary file usually generated?
>>>> I'm working on W2k.
>>> Wolfgang,
>>>
>>> I agree that the patch is likely not in FWTools because FWTools uses
>>> a stock external libjpeg instead of the adjusted GDAL libjpeg.
>>>
>>> I'm not exactly clear what the temp file is for.  I have the vague
>>> impression it is only needed with progressive jpegs, but I could be
>>> wrong.
>>>
>>> I don't know for sure where it is created.
>>>
>>> Best regards,
>>>

I will try tomorrow to convert these data on my linux machine (with 
FWTools) again. Furthermore I will try a "gdal_translate -of JPEG 
input.jpg out.jpg" on all tiles to get non progressive jpgs (hopefully).
At least a more clear error would be nice to get a better hint where the 
error is. Would it also be possible to add to gdalinfo which compression 
is used (ie tiff has several possibilities (JPEG, LZW,...) and jpeg has 
a progressive and nonprogressive mode). I would suggest a --verbose mode 
for gdalinfo.

Thanks for your help so far!

Kind regards
Wolfgang


From warmerdam at pobox.com  Wed Sep  5 15:58:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <200709052114.29242.even.rouault@mines-paris.org>
References: <fbm5rv$vav$1@sea.gmane.org> <46DED39F.8000408@pobox.com>
	<200709052017.17681.even.rouault@mines-paris.org>
	<200709052114.29242.even.rouault@mines-paris.org>
Message-ID: <46DF0A63.6050003@pobox.com>

Even Rouault wrote:
> Answering to my self and after a few more investigations, we can read in 
> jpeglib.h :
> 
>   /* Limit on memory allocation for this JPEG object.  (Note that this is
>    * merely advisory, not a guaranteed maximum; it only affects the space
>    * used for virtual-array buffers.)  May be changed by outer application
>    * after creating the JPEG object.
>    */
>   long max_memory_to_use;
> 
> 
> So, an alternative to define JPEGMEM (which seems to do what I thought it 
> should do in my previous message) or  could be to add the following lines :
>     if (getenv("JPEGMEM") == NULL)
>        poDS->sDInfo.mem->max_memory_to_use = 500 * 1024 * 1024;
> just after creating the decompression object done by :
>     jpeg_create_decompress( &(poDS->sDInfo) ) ;
> 
> This way, we don't need to patch libjpeg and if the user wants to define it's 
> own value, he's still able to do so.

Even,

I think this is a good idea, and I'd appreciate your adding it trunk.  But
I wonder if jpeg_create_decompress() doesn't already do a bunch of work that
might start allocating memory / creating this spill file.

> FYI, on my Ubuntu system, I found out that libjpeg is build by default with 
> 1GB for DEFAULT_MAX_MEM.
> I've tried to define JPEGMEM to a small value but couldn't reproduce 
> Wolfgang's crash. I think it's because, in jmemansi.c, we can see that the 
> temporary file is created by the C library "tmpfile()" call. On Linux, I 
> think this file is created in /tmp : doing a "lsof | grep gdalinfo" with 
> small values of JPEGMEM on a 10000x10000 progressive jpeg seems to confirm 
> this intuition. I don't know where the MS C library tries to create the 
> temporary file. The answer to this question could show a need for a specific 
> patch in libjpeg for FWTool to create the temporary file in an appropriate 
> directory.
> 
> To answer one of Wolfgang's question, it may be surprising that gdalinfo is 
> affected by this issue. But in JPGDataset::Open, we call 
> jpeg_start_decompress that is really slow when I set a small value for 
> JPEGMEM. Then we read image size, color space and other information. The 
> question is : do we really need to do jpeg_start_decompress to get this 
> values ? Probably, but I we don't, it could speed up gdalinfo.

I don't know either.  If we don't that's great, lets fix it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Sep  5 16:08:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <fbn0tt$76f$1@sea.gmane.org>
References: <fbm5rv$vav$1@sea.gmane.org> <46DED39F.8000408@pobox.com>
	<200709052017.17681.even.rouault@mines-paris.org>
	<200709052114.29242.even.rouault@mines-paris.org>
	<fbn0tt$76f$1@sea.gmane.org>
Message-ID: <46DF0CCC.7020505@pobox.com>

WolfgangZ wrote:
> I will try tomorrow to convert these data on my linux machine (with 
> FWTools) again. Furthermore I will try a "gdal_translate -of JPEG 
> input.jpg out.jpg" on all tiles to get non progressive jpgs (hopefully).
> At least a more clear error would be nice to get a better hint where the 
> error is. Would it also be possible to add to gdalinfo which compression 
> is used (ie tiff has several possibilities (JPEG, LZW,...) and jpeg has 
> a progressive and nonprogressive mode). I would suggest a --verbose mode 
> for gdalinfo.
> 
> Thanks for your help so far!

Wolfgang,

A lot of the error handling involved here is deep in libjpeg and so I think
it is hard for GDAL to provide detailed diagnostics.

It would be nice for the JPEG driver to indicate if a given file is
progressive or not.  This could be returned as IMAGE_STRUCTURE domain
metadata and then it would be reported by gdalinfo.  Patches welcome.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Wed Sep  5 17:13:08 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <46DF0A63.6050003@pobox.com>
References: <fbm5rv$vav$1@sea.gmane.org>
	<200709052114.29242.even.rouault@mines-paris.org>
	<46DF0A63.6050003@pobox.com>
Message-ID: <200709052313.08914.even.rouault@mines-paris.org>

Wolfgang, for your information, I've commited in GDAL trunk a variant of the 
fix for the JPEGMEM issue (see ticket 1796 on GDAL trac)

I've also just commited an improvement that should speed up the opening of 
jpeg datasets when just doing gdalinfo on them (see ticket 1798)

Best regards

On Wednesday 05 September 2007 21:58:27 Frank Warmerdam wrote:
> Even Rouault wrote:
> > Answering to my self and after a few more investigations, we can read in
> > jpeglib.h :
> >
> >   /* Limit on memory allocation for this JPEG object.  (Note that this is
> >    * merely advisory, not a guaranteed maximum; it only affects the space
> >    * used for virtual-array buffers.)  May be changed by outer
> > application * after creating the JPEG object.
> >    */
> >   long max_memory_to_use;
> >
> >
> > So, an alternative to define JPEGMEM (which seems to do what I thought it
> > should do in my previous message) or  could be to add the following lines
> > : if (getenv("JPEGMEM") == NULL)
> >        poDS->sDInfo.mem->max_memory_to_use = 500 * 1024 * 1024;
> > just after creating the decompression object done by :
> >     jpeg_create_decompress( &(poDS->sDInfo) ) ;
> >
> > This way, we don't need to patch libjpeg and if the user wants to define
> > it's own value, he's still able to do so.
>
> Even,
>
> I think this is a good idea, and I'd appreciate your adding it trunk.  But
> I wonder if jpeg_create_decompress() doesn't already do a bunch of work
> that might start allocating memory / creating this spill file.
>
> > FYI, on my Ubuntu system, I found out that libjpeg is build by default
> > with 1GB for DEFAULT_MAX_MEM.
> > I've tried to define JPEGMEM to a small value but couldn't reproduce
> > Wolfgang's crash. I think it's because, in jmemansi.c, we can see that
> > the temporary file is created by the C library "tmpfile()" call. On
> > Linux, I think this file is created in /tmp : doing a "lsof | grep
> > gdalinfo" with small values of JPEGMEM on a 10000x10000 progressive jpeg
> > seems to confirm this intuition. I don't know where the MS C library
> > tries to create the temporary file. The answer to this question could
> > show a need for a specific patch in libjpeg for FWTool to create the
> > temporary file in an appropriate directory.
> >
> > To answer one of Wolfgang's question, it may be surprising that gdalinfo
> > is affected by this issue. But in JPGDataset::Open, we call
> > jpeg_start_decompress that is really slow when I set a small value for
> > JPEGMEM. Then we read image size, color space and other information. The
> > question is : do we really need to do jpeg_start_decompress to get this
> > values ? Probably, but I we don't, it could speed up gdalinfo.
>
> I don't know either.  If we don't that's great, lets fix it.
>
> Best regards,



From mateusz at loskot.net  Wed Sep  5 18:19:41 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Building with Xerces 2.7.0, 2.8.0 and 3.0.0
Message-ID: <46DF2B7D.6090405@loskot.net>

Folks,

This post is supposed to follow up two similar threads started today and
reporting problems with building GDAL + Xerces support:

http://lists.maptools.org/pipermail/gdal-dev/2007-September/013988.html

and

http://lists.maptools.org/pipermail/gdal-dev/2007-September/014004.html

After some tests, I confirm these problems, so I reported a ticket:

http://trac.osgeo.org/gdal/ticket/1799

I'm fixing it now and testing GDAL with Xerces 2.7.0, 2.8.0 and 3.0.0.

Anyone who is interested in this issue, please
monitor the Ticket #1799 for news.

I hope to bring a fix very soon.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From perrygeo at gmail.com  Wed Sep  5 18:53:36 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] "upside down" images
In-Reply-To: <46DEC240.7070902@ualg.pt>
References: <5383fa5e0709041942h8e7b1bbsec7a83bb843ea4b0@mail.gmail.com>
	<1316.24.8.158.76.1188996858.squirrel@ideotrope.org>
	<46DEC240.7070902@ualg.pt>
Message-ID: <5383fa5e0709051553q19853a75q40fc9ad73df7e65a@mail.gmail.com>

On 9/5/07, Joaquim Luis <jluis@ualg.pt> wrote:
> Hi,
>
> For those of you struggling with upside down troubles with netCDF and
> Surfer drivers,
> an - GUI, Windows - solution is provided by Mirone
> (w3.ualg.pt/~jluis/mirone).
> The files can be saved for example in GeoTiff or JP2K.
>


Thanks for the tip. That's a good find.

I need to do a lot of batch processing, use other platforms, etc so I
decided instead to create a script to flip geo rasters (based on
gdal_merge.py)

The script is available at
http://perrygeo.googlecode.com/svn/trunk/gis-bin/flip_raster.py
For more detail, I posted about it here http://www.perrygeo.net/wordpress/?p=78
--
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From perrygeo at gmail.com  Wed Sep  5 19:44:47 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Converting netCDF to geoTIFF with colour
In-Reply-To: <loom.20070904T092227-394@post.gmane.org>
References: <loom.20070904T092227-394@post.gmane.org>
Message-ID: <5383fa5e0709051644t3396d2d2ke15a98768a34ac2c@mail.gmail.com>

Paul,

  There are a couple of options for this:

If you have Grass or GMT installed, both of these applications can do
color ramping.

One that was just pointed out to me recently on this list was Mirone
(http://w3.ualg.pt/%7Ejluis/mirone/index.htm) which has a great
windows-based GUI for color ramping.

 There was also a gdal based command line app written by Paul Surgeon
called color-relief which can apply color ramps :
http://www.perrygeo.net/wordpress/?p=7


- matt

On 9/4/07, Paul Tildesley <paul.tildesley@csiro.au> wrote:
> I am trying to convert an 8-bit band in a netCDF file to GeoTIFF using
> gdal_translate. I have used the command:
>
> gdal_translate -of GTiff netCDF:"SST3d_20070901.nc":sst SST3d_20070901.tif
>
> and this works except that the output file is greyscale and I want colour. I
> know that there is no colour table in the netCDF file so I need to give
> gdal_translate a colour table to use in creating the geoTIFF file? I cannot find
> any documentation that tells me how to do this.
>
> Any help gratefully received.
>
> Paul.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller

From mateusz at loskot.net  Wed Sep  5 19:53:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Building with Xerces 2.7.0, 2.8.0 and 3.0.0
In-Reply-To: <46DF2B7D.6090405@loskot.net>
References: <46DF2B7D.6090405@loskot.net>
Message-ID: <46DF4178.70506@loskot.net>

Mateusz Loskot wrote:
> After some tests, I confirm these problems, so I reported a ticket:
> 
> http://trac.osgeo.org/gdal/ticket/1799
> 
> I'm fixing it now and testing GDAL with Xerces 2.7.0, 2.8.0 and
> 3.0.0.

I applied some fixes to the OGR Interlis driver (SVN).
I successfully tested current GDAL SVN with all three versions of
Xerces. So, the ticket #1799 has been closed as fixed.

Edward, Christian,

I'd appreciate if you could try to build GDAL from SVN and see if it
builds for you with Xerces support. If you will use GDAL sources tree
that has been used before, please don't forget to clean it first, plus
run autoconf, so configure is re-generated (soon, new regenerated
version will go to SVN too, but for now you need to run autoconf):

Here are recommended commands:

$ cd /path/to/gdal/svn/trunk
$ autoconf
$ ./configure  \
--with-xerces=yes \
--with-xerces-inc=/usr/local/xerces-${XERCES_VERSION}/include \
--with-xerces-lib="-L/usr/local/xerces-${XERCES_VERSION}/lib -lxerces-c
-lpthread"
$ make clean
$ make

Does it work now?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jachym.cepicky at gmail.com  Thu Sep  6 01:37:51 2007
From: jachym.cepicky at gmail.com (Jachym Cepicky)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] grass support in gdal on solaris
Message-ID: <1189057071.9167.0.camel@mellon>

Hi,

I would like to compile GDAL (1.4.2) with GRASS support on Sun Solaris
10, Ultra Sparc architecture.

I get this error:
ogr/ogrpoint.o ./ogr/ogrcurve.o ./ogr/ogrlinestring.o ./ogr/ogrlinearring.o
./ogr/ogrpolygon.o ./ogr/ogrutils.o ./ogr/ogrgeometry.o
./ogr/ogrgeometrycollection.o ./ogr/ogrmultipolygon.o ./ogr/ogrsurface.o
./ogr/ogrmultipoint.o ./ogr/ogrmultilinestring.o ./ogr/ogr_api.o
./ogr/ogrfeature.o ./ogr/ogrfeaturedefn.o ./ogr/ogrfeaturequery.o
./ogr/ogrfeaturestyle.o ./ogr/ogrfielddefn.o ./ogr/ogrspatialreference.o
./ogr/ogr_srsnode.o ./ogr/ogr_srs_proj4.o ./ogr/ogr_fromepsg.o ./ogr/ogrct.o
./ogr/ogr_opt.o ./ogr/ogr_srs_esri.o ./ogr/ogr_srs_pci.o ./ogr/ogr_srs_usgs.o
./ogr/ogr_srs_dict.o ./ogr/ogr_srs_panorama.o ./ogr/swq.o
./ogr/ogr_srs_validate.o ./ogr/ogr_srs_xml.o ./ogr/ograssemblepolygon.o
./ogr/ogr2gmlgeometry.o ./ogr/gml2ogrgeometry.o
ranlib .libs/libgdal.a
creating libgdal.la
(cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
gmake[1]: Leaving directory `/export/home/meteo/src/gdal/gdal-1.4.2'
(cd ogr; gmake apps)
gmake[1]: Entering directory
`/export/home/meteo/src/gdal/gdal-1.4.2/ogr'
/bin/sh /export/home/meteo/src/gdal/gdal-1.4.2/libtool --mode=compile g
++ -Wall
 -O2   -Iogrsf_frmts -I. -I/export/home/meteo/src/gdal/gdal-1.4.2/port
-I/export/home/meteo/src/gdal/gdal-1.4.2/gcore
-I/export/home/meteo/src/gdal/gdal-1.4.2/alg
-I/export/home/meteo/src/gdal/gdal-1.4.2/ogr
-I/export/home/meteo/src/gdal/gdal-1.4.2/ogr/ogrsf_frmts   -DOGR_ENABLED
-I/export/home/meteo/src/gdal/gdal-1.4.2/port  -c -o ogrinfo.o
ogrinfo.cpp
 g++ -Wall -O2 -Iogrsf_frmts -I.
-I/export/home/meteo/src/gdal/gdal-1.4.2/port
-I/export/home/meteo/src/gdal/gdal-1.4.2/gcore
-I/export/home/meteo/src/gdal/gdal-1.4.2/alg
-I/export/home/meteo/src/gdal/gdal-1.4.2/ogr
-I/export/home/meteo/src/gdal/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED
-I/export/home/meteo/src/gdal/gdal-1.4.2/port -c ogrinfo.cpp  -fPIC
-DPIC -o
.libs/ogrinfo.o
 g++ -Wall -O2 -Iogrsf_frmts -I.
-I/export/home/meteo/src/gdal/gdal-1.4.2/port
-I/export/home/meteo/src/gdal/gdal-1.4.2/gcore
-I/export/home/meteo/src/gdal/gdal-1.4.2/alg
-I/export/home/meteo/src/gdal/gdal-1.4.2/ogr
-I/export/home/meteo/src/gdal/gdal-1.4.2/ogr/ogrsf_frmts -DOGR_ENABLED
-I/export/home/meteo/src/gdal/gdal-1.4.2/port -c ogrinfo.cpp -o
ogrinfo.o
>/dev/null 2>&1
/bin/sh /export/home/meteo/src/gdal/gdal-1.4.2/libtool --mode=link
g++
ogrinfo.o /export/home/meteo/src/gdal/gdal-1.4.2/libgdal.la -o ogrinfo
g++ ogrinfo.o -o .libs/ogrinfo
/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
/usr/local/lib/libjpeg.so -ltiff /usr/local/lib/libpng12.so
-L/usr/local/lib
-L/usr/local/ssl/lib -L/usr/openwin/lib -L/usr/lib
-L/usr/local/BerkeleyDB.4.2/lib -L/usr/X11R6/lib
-L/usr/local/grass-6.2.2//lib
-lgrass_vect -lgrass_dig2 -lgrass_dgl -lgrass_rtree -lgrass_linkm
-lgrass_dbmiclient -lgrass_dbmibase -lgrass_I -lgrass_gproj -lgrass_vask
-lgrass_gmath -lgrass_gis -lgrass_datetime -lpq -lz -lrt -ldl
/usr/local/lib/./libstdc++.so
-L/usr2/SOURCES/S10/gcc-3.3.2/objdir/sparc-sun-solaris2.10/libstdc
++-v3/src
-L/usr2/SOURCES/S10/gcc-3.3.2/objdir/sparc-sun-solaris2.10/libstdc
++-v3/src/.libs
-L/usr2/SOURCES/S10/gcc-3.3.2/objdir/gcc -L/usr/ccs/bin
-L/usr/local/lib/gcc-lib/.. -Wl,-R -Wl,/usr/local/lib -Wl,-R
-Wl,/usr/local/lib/.
ld: warning: file /usr/local/lib/libstdc++.so: linked to
/usr/local/lib/./libstdc++.so: attempted multiple inclusion of file
ld: warning: symbol `sigfpe' has differing types:
        (file /usr/local/grass-6.2.2//lib/libgrass_I.so type=OBJT; file
/usr/lib/libc.so type=FUNC);
        /usr/local/grass-6.2.2//lib/libgrass_I.so definition taken
Undefined                       first referenced
 symbol                             in file
std::_Rb_tree_increment(std::_Rb_tree_node_base*)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
std::basic_string<char, std::char_traits<char>, std::allocator<char>
>::_Rep::_S_empty_rep_storage/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
__gnu_cxx::__exchange_and_add(int volatile*,
int)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
std::_Rb_tree_increment(std::_Rb_tree_node_base
const*)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*,
std::_Rb_tree_node_base&)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*,
std::_Rb_tree_node_base*,
std::_Rb_tree_node_base&)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
std::_Rb_tree_decrement(std::_Rb_tree_node_base*)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
ld: fatal: Symbol referencing errors. No output written to .libs/ogrinfo
collect2: ld returned 1 exit status
gmake[1]: *** [ogrinfo] Error 1
gmake[1]: Leaving directory `/export/home/meteo/src/gdal/gdal-1.4.2/ogr'
gmake: *** [ogr-apps] Error 2

could anybody give me an advice, how to approach?

thanks 

jachym

-- 
Jachym Cepicky
e-mail: jachym.cepicky@gmail.com
URL: http://les-ejk.cz
GPG: http://www.les-ejk.cz/pgp/jachym_cepicky-gpg.pub

-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: Toto je =?UTF-8?Q?digit=C3=A1ln=C4=9B?=
	=?ISO-8859-1?Q?_podepsan=E1?= =?UTF-8?Q?_=C4=8D=C3=A1st?=
	=?ISO-8859-1?Q?_zpr=E1vy?=
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070906/fe146d60/attachment.bin
From schut at sarvision.nl  Thu Sep  6 03:46:15 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: StandardError: 'NoneType' object has no attribute
	'_o'
In-Reply-To: <771845.97405.qm@web51310.mail.re2.yahoo.com>
References: <771845.97405.qm@web51310.mail.re2.yahoo.com>
Message-ID: <46DFB047.5000203@sarvision.nl>

Sandric,

I'm forwarding your message to the gdal mailing list, because this seems
merely related to gdal, less to numpy.
Btw, if you are mainly using numpy arrays instead of (deprecated)
numeric arrays, you might want to look into gdal_array.py, which links
gdal to numpy, instead of gdalnumeric.py, which links gdal to numeric.
Though I don't know if that is provided on windows binary builds by
default, being a linux-only user... Someone on the gdal list will know,
probably.

Vincent.

sandric ionut wrote:
> Hi:
> I am using Gdal 142 version on Windows XP sp2 with Numeric-24.2, SciPy
> 0.5.2.1, numpy 1.0.3.1. for Python 2.4.
> I want to use genericfunctions from scipy.ndimage. I have tried with
> the example provided in numarray users' manual release 1.5:
> >>> def fnc(iline, oline):
> ... oline[...] = iline[:-2] + 2 * iline[1:-1] + 3 * iline[2:]
> ...
> >>> print generic_filter1d(a, fnc, 3)
> [[ 3 8 14 17]
> [27 32 38 41]
> [51 56 62 65]]
>
> Everything works OK and I get the proper result, but when I try to use
> gdalnumeric to save the array to a image format (tif for example, or
> any other format supported by gdal) I get the following error:
>
>   File "C:\Python24\Lib\site-packages\gdalnumeric.py", line 123, in
> SaveArray
>     return driver.CreateCopy( filename, OpenArray(src_array,prototype) )
>   File "C:\Python24\Lib\site-packages\gdal.py", line 592, in CreateCopy
>     target_ds = _gdal.GDALCreateCopy( self._o, filename, source_ds._o,
> StandardError: 'NoneType' object has no attribute '_o'
> How can I save an array into a image format supported by Gdal
> I don't know what I do wrong
>
> Thank you
>
> Ionut
>
> ------------------------------------------------------------------------
> Need a vacation? Get great deals to amazing places
> <http://us.rd.yahoo.com/evt=48256/*http://travel.yahoo.com/;_ylc=X3oDMTFhN2hucjlpBF9TAzk3NDA3NTg5BHBvcwM1BHNlYwNncm91cHMEc2xrA2VtYWlsLW5jbQ-->on
> Yahoo! Travel.
> ------------------------------------------------------------------------
>
> _______________________________________________
> SciPy-user mailing list
> SciPy-user@scipy.org
> http://projects.scipy.org/mailman/listinfo/scipy-user
>   

From patrice.canonici at gmail.com  Thu Sep  6 03:50:11 2007
From: patrice.canonici at gmail.com (patrice canonici)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problem to compile gdal 1.4.2 with kakadu JPG2000
	support
In-Reply-To: <46DEE855.7000706@loskot.net>
References: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>
	<46DEE855.7000706@loskot.net>
Message-ID: <a0fd5fa30709060050xd017085w18d47d1066b2225d@mail.gmail.com>

Hi Mateusz

I solved the problem by compiling gdal  with the configure option
--without-libtool, and it is now a success.

In fact I saw that gdal use its own libtool. I looked for version, and
it was not the same as the one  I have.
so I tryed to execute the same command (/bin/sh
/home/pcanonici/work/MapServer/gdal-1.4.2/libtool --mode=link
  g++  ogrinfo.o /home/pcanonici/w ..... ) with my libtool, and the
result was the same.

Note that I built kakadu following its documentation.

Now I follow the link you give, i can see that :
LIBTOOL support:           no

It seems to be very important to don't have libtool support activated.
Can you tell me why ? I don't feel  good  with that.

Cheers

2007/9/5, Mateusz Loskot <mateusz@loskot.net>:
> patrice canonici wrote:
> > I'm  trying to compile gdal 1.4.2 with kakadu 5.2.6 in order to use
> > it into mapserver.
> >
> > I build kakadu successfully as it is explain in the documentation.
> > But, when I try to compile gdal, it fails. [...]
>
>
> Patrice,
>
> Unfortunately, I have only access to Kakadu 6.0 so I'm not sure if there
> is any problem with older versions.
>
> One thing comes to my mind, did you run "make clean" and then try to
> build with Kakadu using clean sources tree?
> If not, please try to do make clean first and then ./configure and make
> and see if it helps.
>
> BTW, Here you can find some instructions about how to build in JP2KAK
> driver support: http://trac.osgeo.org/gdal/wiki/JP2KAK
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>

From sandricionut at yahoo.com  Thu Sep  6 05:55:07 2007
From: sandricionut at yahoo.com (sandricionut)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] StandardError: 'NoneType' object has no attribute '_o'
In-Reply-To: <46DFB047.5000203@sarvision.nl>
References: <12496782.post@talk.nabble.com> <46DFB047.5000203@sarvision.nl>
Message-ID: <12518773.post@talk.nabble.com>


Thank you Vincent,

I will search for gdal_array

Ionut


Vincent Schut-2 wrote:
> 
> Sandric,
> 
> I'm forwarding your message to the gdal mailing list, because this seems
> merely related to gdal, less to numpy.
> Btw, if you are mainly using numpy arrays instead of (deprecated)
> numeric arrays, you might want to look into gdal_array.py, which links
> gdal to numpy, instead of gdalnumeric.py, which links gdal to numeric.
> Though I don't know if that is provided on windows binary builds by
> default, being a linux-only user... Someone on the gdal list will know,
> probably.
> 
> Vincent.
> 
> sandric ionut wrote:
>> Hi:
>> I am using Gdal 142 version on Windows XP sp2 with Numeric-24.2, SciPy
>> 0.5.2.1, numpy 1.0.3.1. for Python 2.4.
>> I want to use genericfunctions from scipy.ndimage. I have tried with
>> the example provided in numarray users' manual release 1.5:
>> >>> def fnc(iline, oline):
>> ... oline[...] = iline[:-2] + 2 * iline[1:-1] + 3 * iline[2:]
>> ...
>> >>> print generic_filter1d(a, fnc, 3)
>> [[ 3 8 14 17]
>> [27 32 38 41]
>> [51 56 62 65]]
>>
>> Everything works OK and I get the proper result, but when I try to use
>> gdalnumeric to save the array to a image format (tif for example, or
>> any other format supported by gdal) I get the following error:
>>
>>   File "C:\Python24\Lib\site-packages\gdalnumeric.py", line 123, in
>> SaveArray
>>     return driver.CreateCopy( filename, OpenArray(src_array,prototype) )
>>   File "C:\Python24\Lib\site-packages\gdal.py", line 592, in CreateCopy
>>     target_ds = _gdal.GDALCreateCopy( self._o, filename, source_ds._o,
>> StandardError: 'NoneType' object has no attribute '_o'
>> How can I save an array into a image format supported by Gdal
>> I don't know what I do wrong
>>
>> Thank you
>>
>> Ionut
>>
>> ------------------------------------------------------------------------
>> Need a vacation? Get great deals to amazing places
>> <http://us.rd.yahoo.com/evt=48256/*http://travel.yahoo.com/;_ylc=X3oDMTFhN2hucjlpBF9TAzk3NDA3NTg5BHBvcwM1BHNlYwNncm91cHMEc2xrA2VtYWlsLW5jbQ-->on
>> Yahoo! Travel.
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> SciPy-user mailing list
>> SciPy-user@scipy.org
>> http://projects.scipy.org/mailman/listinfo/scipy-user
>>   
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/StandardError%3A-%27NoneType%27-object-has-no-attribute-%27_o%27-tf4383687.html#a12518773
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From christian.schaffer at muenchen.de  Thu Sep  6 06:20:00 2007
From: christian.schaffer at muenchen.de (Christian Schaffer)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Configure on Solaris 10 --with-xerces fails
In-Reply-To: <46DEDE82.3070103@loskot.net>
References: <46D40C0D.3090601@muenchen.de> <46DEDE82.3070103@loskot.net>
Message-ID: <46DFD450.3090209@muenchen.de>

Hi Mateusz,

just for the sake of completeness of this thread: I tried as advised,
but it didn't work out.

Currently trying as described in this thread:
[Gdal-dev] Building with Xerces 2.7.0, 2.8.0 and 3.0.0

Thanks and regards,
Chris

Mateusz Loskot schrieb:
> Christian Schaffer wrote:
>   
>> my configure scripts looks like this:
>> ./configure \
>> --with-gif=internal     \
>> --with-jpeg=internal    \
>> --with-geotiff=internal \
>> --with-libtiff=internal \
>> --with-libz=internal    \
>> --with-perl \
>> --with-xerces \
>> --with-xerces-inc=/opt/csw/include \
>> --with-oci=/opt/oracle
>> [...]
>>     
>
> Christian,
>
> Could you try to use all 3 options for xerces, this way:
>
> ./configure --with-xerces=yes \
>    --with-xerces-inc=/path/to/include \
>    --with-xerces-lib="-L/path/to/lib -lxerces -lpthread"
>
> and see if it works.
>
> Cheers
>   

-- 

	*Christian Schaffer

* *Referat f?r Gesundheit und Umwelt*
Steuerungsunterst?tzung,
Informations- und Kommunikationstechnologie
RGU-S-ITD

Bayerstra?e 28a
80335 M?nchen

Telefon +49 - 89 - 233 - 4 76 67
Telefax +49 - 89 - 233 - 4 76 62

http://www.muenchen.de
s-itd.rgu@muenchen.de
Bitte beachten Sie die Hinweise zur elektronischen
Kommunikation mit der Landeshauptstadt M?nchen:
http://www.muenchen.de/ekomm

-------------- next part --------------
Skipped content of type multipart/related
From christian.schaffer at muenchen.de  Thu Sep  6 06:27:40 2007
From: christian.schaffer at muenchen.de (Christian Schaffer)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Building with Xerces 2.7.0, 2.8.0 and 3.0.0
In-Reply-To: <46DF4178.70506@loskot.net>
References: <46DF2B7D.6090405@loskot.net> <46DF4178.70506@loskot.net>
Message-ID: <46DFD61C.8070508@muenchen.de>

Hi Mateusz,
hi list,

building with Xerces 2.8.0 on Solaris 10 (x86) worked as described:

87 roses [gdal/ogr] # ogrinfo --formats
Supported Formats:
  -> "ESRI Shapefile" (read/write)
  -> "MapInfo File" (read/write)
  -> "UK .NTF" (readonly)
  -> "SDTS" (readonly)
  -> "TIGER" (read/write)
  -> "S57" (read/write)
  -> "DGN" (read/write)
  -> "VRT" (readonly)
  -> "AVCBin" (readonly)
  -> "REC" (readonly)
  -> "Memory" (read/write)
  -> "BNA" (read/write)
  -> "CSV" (read/write)
  -> "GML" (read/write)
  -> "KML" (read/write)
  -> "Interlis 1" (read/write)
  -> "Interlis 2" (read/write)
  -> "GMT" (read/write)
  -> "PostgreSQL" (read/write)
  -> "OCI" (read/write)

Thank you very much for your efforts.

Best regards,
Chris

Mateusz Loskot schrieb:
> Mateusz Loskot wrote:
>   
>> After some tests, I confirm these problems, so I reported a ticket:
>>
>> http://trac.osgeo.org/gdal/ticket/1799
>>
>> I'm fixing it now and testing GDAL with Xerces 2.7.0, 2.8.0 and
>> 3.0.0.
>>     
>
> I applied some fixes to the OGR Interlis driver (SVN).
> I successfully tested current GDAL SVN with all three versions of
> Xerces. So, the ticket #1799 has been closed as fixed.
>
> Edward, Christian,
>
> I'd appreciate if you could try to build GDAL from SVN and see if it
> builds for you with Xerces support. If you will use GDAL sources tree
> that has been used before, please don't forget to clean it first, plus
> run autoconf, so configure is re-generated (soon, new regenerated
> version will go to SVN too, but for now you need to run autoconf):
>
> Here are recommended commands:
>
> $ cd /path/to/gdal/svn/trunk
> $ autoconf
> $ ./configure  \
> --with-xerces=yes \
> --with-xerces-inc=/usr/local/xerces-${XERCES_VERSION}/include \
> --with-xerces-lib="-L/usr/local/xerces-${XERCES_VERSION}/lib -lxerces-c
> -lpthread"
> $ make clean
> $ make
>
> Does it work now?
>
> Cheers
>   
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070906/3c3d3cf3/attachment.html
From neteler at itc.it  Thu Sep  6 08:14:34 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] grass support in gdal on solaris
In-Reply-To: <1189057071.9167.0.camel@mellon>
References: <1189057071.9167.0.camel@mellon>
Message-ID: <20070906121433.GC3658@bartok.itc.it>

On Thu, Sep 06, 2007 at 07:37:51AM +0200, Jachym Cepicky wrote:
> Hi,
> 
> I would like to compile GDAL (1.4.2) with GRASS support on Sun Solaris
> 10, Ultra Sparc architecture.

Jachym,

(no idea 'bout the compile error)

I can highly recommend to compile GDAL itself without GRASS support
and then compile the GDAL-OGR-GRASS plugin which was recently
re-released.

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From sandricionut at yahoo.com  Thu Sep  6 08:32:47 2007
From: sandricionut at yahoo.com (sandricionut)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] LIB : fatal error LNK1181: cannot open input file
 'ogr\ogrsf_frmts\ogrsf_frmts.lib'
Message-ID: <12521557.post@talk.nabble.com>


Hi:
I am trying to compile Gdal 142 on Windows XP sp2 using VStudio 2005 C++
Express, with HAVE_NUMPY option. I am not a programmer, so I have just
followed the information from 
http://http://trac.osgeo.org/gdal/wiki/BuildingOnWindows
http://http://trac.osgeo.org/gdal/wiki/BuildingOnWindows 

when I run from command line C:\Gdal\gdal-1.4.2>nmake /f makefile.vc install
I get the error:
LIB : fatal error LNK1181: cannot open input file
'ogr\ogrsf_frmts\ogrsf_frmts.lib'
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
8\VC\BIN\lib.EXE"' : return co
de '0x49d'
Stop
How I can get ogrsf_frmts.lib?

Thank you 

Ionut

-- 
View this message in context: http://www.nabble.com/LIB-%3A-fatal-error-LNK1181%3A-cannot-open-input-file-%27ogr%5Cogrsf_frmts%5Cogrsf_frmts.lib%27-tf4391820.html#a12521557
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From wollez at gmx.net  Thu Sep  6 13:25:53 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <46DF0A63.6050003@pobox.com>
References: <fbm5rv$vav$1@sea.gmane.org>
	<46DED39F.8000408@pobox.com>	<200709052017.17681.even.rouault@mines-paris.org>	<200709052114.29242.even.rouault@mines-paris.org>
	<46DF0A63.6050003@pobox.com>
Message-ID: <fbpd79$dge$1@sea.gmane.org>

Frank Warmerdam schrieb:
> Even Rouault wrote:
>> Answering to my self and after a few more investigations, we can read 
>> in jpeglib.h :
>>
>>   /* Limit on memory allocation for this JPEG object.  (Note that this is
>>    * merely advisory, not a guaranteed maximum; it only affects the space
>>    * used for virtual-array buffers.)  May be changed by outer 
>> application
>>    * after creating the JPEG object.
>>    */
>>   long max_memory_to_use;
>>
>>
>> So, an alternative to define JPEGMEM (which seems to do what I thought 
>> it should do in my previous message) or  could be to add the following 
>> lines :
>>     if (getenv("JPEGMEM") == NULL)
>>        poDS->sDInfo.mem->max_memory_to_use = 500 * 1024 * 1024;
>> just after creating the decompression object done by :
>>     jpeg_create_decompress( &(poDS->sDInfo) ) ;
>>
>> This way, we don't need to patch libjpeg and if the user wants to 
>> define it's own value, he's still able to do so.
> 
> Even,
> 
> I think this is a good idea, and I'd appreciate your adding it trunk.  But
> I wonder if jpeg_create_decompress() doesn't already do a bunch of work 
> that
> might start allocating memory / creating this spill file.
> 
>> FYI, on my Ubuntu system, I found out that libjpeg is build by default 
>> with 1GB for DEFAULT_MAX_MEM.
>> I've tried to define JPEGMEM to a small value but couldn't reproduce 
>> Wolfgang's crash. I think it's because, in jmemansi.c, we can see that 
>> the temporary file is created by the C library "tmpfile()" call. On 
>> Linux, I think this file is created in /tmp : doing a "lsof | grep 
>> gdalinfo" with small values of JPEGMEM on a 10000x10000 progressive 
>> jpeg seems to confirm this intuition. I don't know where the MS C 
>> library tries to create the temporary file. The answer to this 
>> question could show a need for a specific patch in libjpeg for FWTool 
>> to create the temporary file in an appropriate directory.
>>
>> To answer one of Wolfgang's question, it may be surprising that 
>> gdalinfo is affected by this issue. But in JPGDataset::Open, we call 
>> jpeg_start_decompress that is really slow when I set a small value for 
>> JPEGMEM. Then we read image size, color space and other information. 
>> The question is : do we really need to do jpeg_start_decompress to get 
>> this values ? Probably, but I we don't, it could speed up gdalinfo.
> 
> I don't know either.  If we don't that's great, lets fix it.
> 
> Best regards,


Hi,

finally I did some further tests on my data:

One of the datasets worked directly on linux (FWTools 1.3.5) but a 
bigger one also fails with a different error (it takes some time to fill 
the swap file and therefore it take about 20 seconds to get the error):
  ./gdal_translate -co COMPRESS=JPEG -co TILED=YES -a_srs EPSG:27582 
/sonstiges/GIS/Frankreich/Frankreich250k/referenz.vrt 
/sonstiges/GIS/Frankreich/Frankreich250k/Frankreich250k.tif
ERROR 4: 
VSIFOpenL(/sonstiges/GIS/Frankreich/Frankreich250k/20/39_20.jpg) failed 
unexpectedly in jpgdataset.cpp

after converting the tiles with gdal_translate -of JPEG in* out* gdal 
fails immediately (less than a second):
GDALOpen failed - 4
VSIFOpenL(/sonstiges/GIS/Frankreich/Frankreich250k/20/39_20a.jpg) failed 
unexpectedly in jpgdataset.cpp

The strange thing is that exactly the same data set works well on 
windows!!! Memory usage is around 200MB.
It suspect that on linux JPEG sources are generally importet completely 
into RAM, but I'm not a programmer just a user of gdal.

(gdalinfo also fails on linux but works on win, filesize is 48600x46720)

I hope these findings help to improve the (already great) software!

Regards
Wolfgang


From even.rouault at mines-paris.org  Thu Sep  6 18:41:27 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <fbpd79$dge$1@sea.gmane.org>
References: <fbm5rv$vav$1@sea.gmane.org> <46DF0A63.6050003@pobox.com>
	<fbpd79$dge$1@sea.gmane.org>
Message-ID: <200709070041.29152.even.rouault@mines-paris.org>

Wolfgang,

I'm not sure at all, but I have maybe an idea of what is going wrong.
I ran recently into a similar problem with VRT made of several thousands of 
files, since when we open the VRT, we open each single dataset. This leads to 
a number of opened file descriptors > 1024 which is the usual limit for a 
Linux userland process. This has nothing to do with available RAM. The reason 
for it to work on Windows is that Windows has maybe a greater limit for 
opened files.
Does "gdalinfo /sonstiges/GIS/Frankreich/Frankreich250k/20/39_20.jpg" work ? 
If it does, it may confirm my theory.

I've recently posted a patch in GDAL trac 
(http://trac.osgeo.org/gdal/ticket/1781) that fixed the issue on my big VRTs 
but it's probably too experimental/nasty to be applied in its current state.

If you have the opportunity to build GDAL from subversion trunk, you could 
apply it and test if it improves the situation for you too.

Best regards.

On Thursday 06 September 2007 19:25:53 WolfgangZ wrote:
>
> Hi,
>
> finally I did some further tests on my data:
>
> One of the datasets worked directly on linux (FWTools 1.3.5) but a
> bigger one also fails with a different error (it takes some time to fill
> the swap file and therefore it take about 20 seconds to get the error):
>   ./gdal_translate -co COMPRESS=JPEG -co TILED=YES -a_srs EPSG:27582
> /sonstiges/GIS/Frankreich/Frankreich250k/referenz.vrt
> /sonstiges/GIS/Frankreich/Frankreich250k/Frankreich250k.tif
> ERROR 4:
> VSIFOpenL(/sonstiges/GIS/Frankreich/Frankreich250k/20/39_20.jpg) failed
> unexpectedly in jpgdataset.cpp
>
> after converting the tiles with gdal_translate -of JPEG in* out* gdal
> fails immediately (less than a second):
> GDALOpen failed - 4
> VSIFOpenL(/sonstiges/GIS/Frankreich/Frankreich250k/20/39_20a.jpg) failed
> unexpectedly in jpgdataset.cpp
>
> The strange thing is that exactly the same data set works well on
> windows!!! Memory usage is around 200MB.
> It suspect that on linux JPEG sources are generally importet completely
> into RAM, but I'm not a programmer just a user of gdal.
>
> (gdalinfo also fails on linux but works on win, filesize is 48600x46720)
>
> I hope these findings help to improve the (already great) software!
>
> Regards
> Wolfgang
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From bryan at ideotrope.org  Thu Sep  6 19:23:50 2007
From: bryan at ideotrope.org (Bryan Keith)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] "upside down" images
In-Reply-To: <5383fa5e0709051553q19853a75q40fc9ad73df7e65a@mail.gmail.com>
References: <5383fa5e0709041942h8e7b1bbsec7a83bb843ea4b0@mail.gmail.com>
	<1316.24.8.158.76.1188996858.squirrel@ideotrope.org>
	<46DEC240.7070902@ualg.pt>
	<5383fa5e0709051553q19853a75q40fc9ad73df7e65a@mail.gmail.com>
Message-ID: <1770.24.8.158.76.1189121030.squirrel@ideotrope.org>

> On 9/5/07, Joaquim Luis <jluis@ualg.pt> wrote:
>> Hi,
>>
>> For those of you struggling with upside down troubles with netCDF and
>> Surfer drivers,
>> an - GUI, Windows - solution is provided by Mirone
>> (w3.ualg.pt/~jluis/mirone).
>> The files can be saved for example in GeoTiff or JP2K.
>>
>
>
> Thanks for the tip. That's a good find.
>
> I need to do a lot of batch processing, use other platforms, etc so I
> decided instead to create a script to flip geo rasters (based on
> gdal_merge.py)
>
> The script is available at
> http://perrygeo.googlecode.com/svn/trunk/gis-bin/flip_raster.py
> For more detail, I posted about it here
> http://www.perrygeo.net/wordpress/?p=78
> --
> Matthew T. Perry
> http://www.perrygeo.net
>

Matthew and Joaquim,

I see the solutions that you've come up to deal with Surfer rasters in
gdal.  I also came up with a workaround where I wrote the j-values in
reverse after doing my processing and before writing the Surfer grid. 
However, it seems to me that these "solutions" are just workarounds for a
bug in the Surfer (and netcdf?) drivers.  Wouldn't the real solution be to
succinctly identify the problem and file a bug in Trac?  Or better, I
suppose, would be to supply a patch, but that's certainly beyond what I'm
able to contribute at this point (I haven't even found time to succinctly
identify the problem).  Is there a reason to think that this isn't a bug
in the driver(s)?

Bryan


From wollez at gmx.net  Fri Sep  7 01:48:22 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: gdal fails on vrt (virtual raster) file
In-Reply-To: <200709070041.29152.even.rouault@mines-paris.org>
References: <fbm5rv$vav$1@sea.gmane.org>
	<46DF0A63.6050003@pobox.com>	<fbpd79$dge$1@sea.gmane.org>
	<200709070041.29152.even.rouault@mines-paris.org>
Message-ID: <fbqon6$2qp$1@sea.gmane.org>

Even Rouault schrieb:
> Wolfgang,
> 
> I'm not sure at all, but I have maybe an idea of what is going wrong.
> I ran recently into a similar problem with VRT made of several thousands of 
> files, since when we open the VRT, we open each single dataset. This leads to 
> a number of opened file descriptors > 1024 which is the usual limit for a 
> Linux userland process. This has nothing to do with available RAM. The reason 
> for it to work on Windows is that Windows has maybe a greater limit for 
> opened files.
> Does "gdalinfo /sonstiges/GIS/Frankreich/Frankreich250k/20/39_20.jpg" work ? 
> If it does, it may confirm my theory.

gdalinfo works well on single images!

> 
> I've recently posted a patch in GDAL trac 
> (http://trac.osgeo.org/gdal/ticket/1781) that fixed the issue on my big VRTs 
> but it's probably too experimental/nasty to be applied in its current state.
> 
> If you have the opportunity to build GDAL from subversion trunk, you could 
> apply it and test if it improves the situation for you too.

perhaps next week I will find the time to try compiling on my own.

Regards
Wolfgang


From mateusz at loskot.net  Fri Sep  7 09:33:50 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Building with Xerces 2.7.0, 2.8.0 and 3.0.0
In-Reply-To: <46DFD61C.8070508@muenchen.de>
References: <46DF2B7D.6090405@loskot.net> <46DF4178.70506@loskot.net>
	<46DFD61C.8070508@muenchen.de>
Message-ID: <46E1533E.1080206@loskot.net>

Christian Schaffer wrote:
> building with Xerces 2.8.0 on Solaris 10 (x86) worked as described:
> 
> 87 roses [gdal/ogr] # ogrinfo --formats
> Supported Formats:
>   -> "ESRI Shapefile" (read/write)
>   -> "MapInfo File" (read/write)
>   -> "UK .NTF" (readonly)
>   -> "SDTS" (readonly)
>   -> "TIGER" (read/write)
>   -> "S57" (read/write)
>   -> "DGN" (read/write)
>   -> "VRT" (readonly)
>   -> "AVCBin" (readonly)
>   -> "REC" (readonly)
>   -> "Memory" (read/write)
>   -> "BNA" (read/write)
>   -> "CSV" (read/write)
>   -> "GML" (read/write)
>   -> "KML" (read/write)
>   -> "Interlis 1" (read/write)
>   -> "Interlis 2" (read/write)
>   -> "GMT" (read/write)
>   -> "PostgreSQL" (read/write)
>   -> "OCI" (read/write)
> 
> Thank you very much for your efforts.

Christian,

Great!

BTW, I'm collecting information about users' environments where GDAL is
built and used with success. Would you mind to provide me with some
details about your Solaris installation?
I'd like to add it to this table:

http://trac.osgeo.org/gdal/wiki/SupportedCompilers#TestedEnvironments

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Sep  7 10:35:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problem to compile gdal 1.4.2 with kakadu JPG2000
	support
In-Reply-To: <a0fd5fa30709060050xd017085w18d47d1066b2225d@mail.gmail.com>
References: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>	
	<46DEE855.7000706@loskot.net>
	<a0fd5fa30709060050xd017085w18d47d1066b2225d@mail.gmail.com>
Message-ID: <46E161AA.4030706@loskot.net>

patrice canonici wrote:
> Hi Mateusz
> 
> I solved the problem by compiling gdal  with the configure option
> --without-libtool, and it is now a success.

Great!

> In fact I saw that gdal use its own libtool. I looked for version, and
> it was not the same as the one  I have.
> so I tryed to execute the same command (/bin/sh
> /home/pcanonici/work/MapServer/gdal-1.4.2/libtool --mode=link
>   g++  ogrinfo.o /home/pcanonici/w ..... ) with my libtool, and the
> result was the same.
> 
> Note that I built kakadu following its documentation.
> 
> Now I follow the link you give, i can see that :
> LIBTOOL support:           no
> 
> It seems to be very important to don't have libtool support activated.
> Can you tell me why ? I don't feel  good  with that.

I'm not sure why the libtools is a problem with Kakadu, but personally
I usually don't use libtool and build GDAL using --without-libtool
(mostly because it builds faster without libtool).

Is this a problem for you to not to use libtool when building
with Kakadu support?


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From rbanfield at weogeo.com  Fri Sep  7 13:18:25 2007
From: rbanfield at weogeo.com (Robert Banfield)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Backporting a change from 1.5 to the 1.4 branch?
Message-ID: <46E187E1.5030203@weogeo.com>

Is it possible to backport frmts/raw/envidataset.cpp in 1.5 to 1.4?  The 
fixes in there would help us out tremendously.

Thank you very much,
Robert

From mateusz at loskot.net  Fri Sep  7 13:46:21 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Backporting a change from 1.5 to the 1.4 branch?
In-Reply-To: <46E187E1.5030203@weogeo.com>
References: <46E187E1.5030203@weogeo.com>
Message-ID: <46E18E6D.603@loskot.net>

Robert Banfield wrote:
> Is it possible to backport frmts/raw/envidataset.cpp in 1.5 to 1.4?  The
> fixes in there would help us out tremendously.

Technically, yes it is possible.
Do you mean 1.4 as branches/1.4 [1] where we will release 1.4.3 version
from?

Frank, is it safe to port these changes?


[1] http://svn.osgeo.org/gdal/branches/1.4/

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From rbanfield at weogeo.com  Fri Sep  7 14:06:44 2007
From: rbanfield at weogeo.com (Robert Banfield)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Backporting a change from 1.5 to the 1.4 branch?
In-Reply-To: <46E18E6D.603@loskot.net>
References: <46E187E1.5030203@weogeo.com> <46E18E6D.603@loskot.net>
Message-ID: <46E19334.8020209@weogeo.com>

Thank you for the quick reply,

Yes, "branches/1.4/gdal/frmts/raw/envidataset.cpp" does not output 
correct header files whereas the version at 
"trunk/gdal/frmts/raw/envidataset.cpp" does.

Thanks again,
Robert

Mateusz Loskot wrote:
> Robert Banfield wrote:
>   
>> Is it possible to backport frmts/raw/envidataset.cpp in 1.5 to 1.4?  The
>> fixes in there would help us out tremendously.
>>     
>
> Technically, yes it is possible.
> Do you mean 1.4 as branches/1.4 [1] where we will release 1.4.3 version
> from?
>
> Frank, is it safe to port these changes?
>
>
> [1] http://svn.osgeo.org/gdal/branches/1.4/
>
> Cheers
>   


From j.l.h.hartmann at uva.nl  Sat Sep  8 08:42:13 2007
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] gdal_rasterize: -i flag
In-Reply-To: <20070831090444.GA12773@ak4719.spb.edu>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu>
Message-ID: <46E298A5.1050405@uva.nl>

Hi folks,

Why can't I use the -i (invert) flag in gdal_rasterize?

 From the gdal_rasterize doc:

Usage: gdal_rasterize [-b band] [-i]
        [-burn value] | [-a attribute_name] | [-3d]
        [-l layername]* [-where expression] [-sql select_statement]
        <src_datasource> <dst_filename>

 From my newly compiled version:

$ gdal_rasterize --version
GDAL 1.4.2.0, released 2007/06/27

$ gdal_rasterize -b 1 -b 2 -b 3 -burn 0 -burn 0 -burn 0 -i  -l 
Eijsden_sectie_a1 Eijsden_sectie_a1.shp a1.tif
Usage: gdal_rasterize [-b band]
        [-burn value] | [-a attribute_name] | [-3d]
        [-l layername]* [-where expression] [-sql select_statement]
        <src_datasource> <dst_filename

Without -i everything works OK.


Jan

From mateusz at loskot.net  Sat Sep  8 12:48:08 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] grass support in gdal on solaris
In-Reply-To: <1189057071.9167.0.camel@mellon>
References: <1189057071.9167.0.camel@mellon>
Message-ID: <46E2D248.1040203@loskot.net>

Jachym Cepicky wrote:
> Hi,
> 
> I would like to compile GDAL (1.4.2) with GRASS support on Sun
> Solaris 10, Ultra Sparc architecture.
> 
> I get this error: /usr/local/grass-6.2.2//lib/libgrass_I.so
> definition taken Undefined                       first referenced 
> symbol                             in file 
> std::_Rb_tree_increment(std::_Rb_tree_node_base*)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
>  std::basic_string<char, std::char_traits<char>, std::allocator<char>
> 
>> ::_Rep::_S_empty_rep_storage/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
>> 
> __gnu_cxx::__exchange_and_add(int volatile*, 
> int)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so 
> std::_Rb_tree_increment(std::_Rb_tree_node_base 
> const*)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so 
> std::_Rb_tree_rebalance_for_erase(std::_Rb_tree_node_base*, 
> std::_Rb_tree_node_base&)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
>  std::_Rb_tree_insert_and_rebalance(bool, std::_Rb_tree_node_base*, 
> std::_Rb_tree_node_base*, 
> std::_Rb_tree_node_base&)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
>  
> std::_Rb_tree_decrement(std::_Rb_tree_node_base*)/export/home/meteo/src/gdal/gdal-1.4.2/.libs/libgdal.so
>  ld: fatal: Symbol referencing errors. No output written to
> .libs/ogrinfo collect2: ld returned 1 exit status gmake[1]: ***
> [ogrinfo] Error 1 gmake[1]: Leaving directory
> `/export/home/meteo/src/gdal/gdal-1.4.2/ogr' gmake: *** [ogr-apps]
> Error 2
> 
> could anybody give me an advice, how to approach?

Jachym,

The error you're getting means that GDAL seems to not linked with C++
library (-lstdc++). Could you try to add -lstdc++ to LIBS in
GDALmake.opt, near line 41 and see if that helps?

The Rb_tree_ stuff reported here comes from libstdc++ implementation of
 red-black tree. This tree implementation is used by std::map, std::set
and other tree-based containers in std::.

The implementation of this stuff in (old) libstdc++ is not only based on
C++ templates but requires a client lib/app to be linked with -lstdc++,
unfortunately.

BTW, please remember to do make clean after you update GDALmake.opt.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From mateusz at loskot.net  Sat Sep  8 13:18:28 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] grass support in gdal on solaris
In-Reply-To: <20070906121433.GC3658@bartok.itc.it>
References: <1189057071.9167.0.camel@mellon>
	<20070906121433.GC3658@bartok.itc.it>
Message-ID: <46E2D964.8010007@loskot.net>

Markus Neteler wrote:
> On Thu, Sep 06, 2007 at 07:37:51AM +0200, Jachym Cepicky wrote:
>> Hi,
>>
>> I would like to compile GDAL (1.4.2) with GRASS support on Sun Solaris
>> 10, Ultra Sparc architecture.
> 
> Jachym,
> 
> (no idea 'bout the compile error)
> 
> I can highly recommend to compile GDAL itself without GRASS support
> and then compile the GDAL-OGR-GRASS plugin which was recently
> re-released.

I concur with Markus' suggestion. That will make gdal loosely coupled
with external dependencies, so no stdc++ will be required I believe.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Sat Sep  8 15:32:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] gdal_rasterize: -i flag
In-Reply-To: <46E298A5.1050405@uva.nl>
References: <46D72207.8090206@pobox.com>
	<20070831090444.GA12773@ak4719.spb.edu> <46E298A5.1050405@uva.nl>
Message-ID: <46E2F8BB.9070004@pobox.com>

Jan Hartmann wrote:
> Hi folks,
> 
> Why can't I use the -i (invert) flag in gdal_rasterize?

Jan,

I'm afraid the -i flag was introduced after the 1.4 release.
Whether for good or bad the web site docs reflect the current
development version, not the stable release.

Best regards,

>  From my newly compiled version:
> 
> $ gdal_rasterize --version
> GDAL 1.4.2.0, released 2007/06/27
> 
> $ gdal_rasterize -b 1 -b 2 -b 3 -burn 0 -burn 0 -burn 0 -i  -l 
> Eijsden_sectie_a1 Eijsden_sectie_a1.shp a1.tif
> Usage: gdal_rasterize [-b band]
>        [-burn value] | [-a attribute_name] | [-3d]
>        [-l layername]* [-where expression] [-sql select_statement]
>        <src_datasource> <dst_filename
> 
> Without -i everything works OK.
> 
> 
> Jan
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Sun Sep  9 08:25:43 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reducing number of exported symbols
Message-ID: <200709091425.44642.even.rouault@mines-paris.org>

Hello,

Pre-scriptum : it may be usefull to read http://gcc.gnu.org/wiki/Visibility to 
understand some points of this discussion.

Reducing the number of symbols has a lot of benefits as stated in the above 
link :
* speed up loading of shared objects
* better opportunities for code optimizations 
* reduce the size of SO.
* much lower chance of symbol collisions.

I've looked at the number of exported symbols by libgdal.so. It reaches the 
impressive number of 10 000 on my Linux system ! You can test on your own 
system with : nm -C -D libgdal.so | wc -l
Then, I've grabbed FWTools136.exe and looked at gdal_fw.so. It "only" exports 
3 549 symbols.
The reason is that on Windows, you have to explicitely declare that a symbol 
is visible from outside the library. This is done in GDAL with the CPL_DLL 
macro that expands to __declspec(dllexport) for MSC.
However with GCC, symbols are implicitely considered as public/exported unless 
otherwise specified. Since GCC 4.0, we have a way to change that behaviour 
through the -fvisibility=hidden flag. Thus we can define this flag and modify 
the CPL_DLL declaration in cpl_port.h like hereafter to explicitely export 
public symbols:

#ifndef CPL_DLL
#if defined(_MSC_VER) && !defined(CPL_DISABLE_DLL)
#  define CPL_DLL     __declspec(dllexport)
#else
#  if defined(__GNUC__) && __GNUC__ >= 4
#    define CPL_DLL     __attribute__ ((visibility("default")))
#  else
#    define CPL_DLL
#  endif
#endif
#endif

I give it a try on my system. This required only another change in shapefil.h 
that doesn't use CPL_DLL but SHPAPI_CALL that is equivalent.

#ifndef SHPAPI_CALL
#  if defined(__GNUC__) && __GNUC__ >= 4
#    define SHPAPI_CALL     __attribute__ ((visibility("default")))
#    define SHPAPI_CALL1(x) __attribute__ ((visibility("default")))     x
#  else
#    define SHPAPI_CALL
#  endif
#endif

Result : only 3 442 symbols ! Roughly like on Windows :-)

Another great benefit is that it should prevent subtle and annoying problems 
when linking an executable with a GDAL library build with internal 
libtiff/libpng/libjpeg/etc... and one of these libraries.Now most of them 
have disappeared form libgdal.so. This may be becoming necessary with new 
libtiff 4.0 that has become the internal GDAL libtiff, whereas most *nix 
systems/distributios still uses 3.8.2. People will probably want to use 
BigTIFF capabilities without messing up their system libtiff. Mixing symbols 
from both versions is definitely not a good idea as there has been ABI 
changes.
The case for internal libgeotiff is a bit different since it uses CPL_DLL too 
in its header. So, symbols for internal libgeotiff are still exported. We 
should fine a way to distinguish the case when it's built in GDAL tree from 
when it's build standalone.

So, to sum up, if we want to integrate this in GDAL, we have to :
* change cpl_port.h and shapefil.h
* add a test for the support of -fvisibility=hidden in configure

Any thoughts on all of this ?

(I also tried to use -fvisibility-inlines-hidden but it fails on my system 
since there's a bug in GCC 4.1 (apparently fixed in GCC 4.2). Anyway, it 
should not make a large difference since GDAL code is not using lot of inline 
functions.)

Best regards,
Even



From warmerdam at pobox.com  Sun Sep  9 11:04:13 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reducing number of exported symbols
In-Reply-To: <200709091425.44642.even.rouault@mines-paris.org>
References: <200709091425.44642.even.rouault@mines-paris.org>
Message-ID: <46E40B6D.9000803@pobox.com>


Even,

I am quite interested in this change.  My suggestions would be that for now
(GDAL/OGR 1.5.0) we drive it by an optional configure switch defaulting to
the old behavior, and for 1.6 we switch to defaulting to use the new behavior
if we have an appropriate gcc.

Even Rouault wrote:
> I give it a try on my system. This required only another change in shapefil.h 
> that doesn't use CPL_DLL but SHPAPI_CALL that is equivalent.
> 
> #ifndef SHPAPI_CALL
> #  if defined(__GNUC__) && __GNUC__ >= 4
> #    define SHPAPI_CALL     __attribute__ ((visibility("default")))
> #    define SHPAPI_CALL1(x) __attribute__ ((visibility("default")))     x
> #  else
> #    define SHPAPI_CALL
> #  endif
> #endif

Presumably we could pre-define SHPAPI_CALL in the makefile.

> Result : only 3 442 symbols ! Roughly like on Windows :-)
> 
> Another great benefit is that it should prevent subtle and annoying problems 
> when linking an executable with a GDAL library build with internal 
> libtiff/libpng/libjpeg/etc... and one of these libraries.Now most of them 
> have disappeared form libgdal.so. This may be becoming necessary with new 
> libtiff 4.0 that has become the internal GDAL libtiff, whereas most *nix 
> systems/distributios still uses 3.8.2. People will probably want to use 
> BigTIFF capabilities without messing up their system libtiff. Mixing symbols 
> from both versions is definitely not a good idea as there has been ABI 
> changes.
> The case for internal libgeotiff is a bit different since it uses CPL_DLL too 
> in its header. So, symbols for internal libgeotiff are still exported. We 
> should fine a way to distinguish the case when it's built in GDAL tree from 
> when it's build standalone.

We have a CPL_ODLL macro we use for APIs that would not normally be
public, but that we sometimes want to export.  On windows this was
introduced so that stuff like the libtiff and libgeotiff API could
be exported optionally. I would suggest we aim to use it in a similar
fashion with gcc.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From marcello_ferrero at yahoo.com  Sun Sep  9 14:45:43 2007
From: marcello_ferrero at yahoo.com (marcello ferrero)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Unable to copy EXIF metadata with CreateCopy
Message-ID: <20273.80400.qm@web60123.mail.yahoo.com>

Hi,
I need to write the GPSLatitude and GPSLongitude tags into a jpg raster image (typically a photo taken with a camera),
I started doing some test but I noticed that CreateCopy does not copy the EXIF metadata 
(or at least I've not been able to make it working).

This is the example code I'm using:

hDriver = GDALGetDriverByName( "JPEG" );
hDataset = GDALOpen( "MySourceFile.jpg", GA_ReadOnly );
hDstDS = GDALCreateCopy( hDriver, "MyDestFile.jpg", hDataset, TRUE, NULL, NULL, NULL );


As a result MyDestFile.jpg does not contain any EXIF metadata while the source file has a lot of EXIF tags.

Any idea?

Marcello Ferrero


       
____________________________________________________________________________________
Pinpoint customers who are looking for what you sell. 
http://searchmarketing.yahoo.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070909/a2075c4a/attachment.html
From even.rouault at mines-paris.org  Sun Sep  9 15:14:25 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Unable to copy EXIF metadata with CreateCopy
In-Reply-To: <20273.80400.qm@web60123.mail.yahoo.com>
References: <20273.80400.qm@web60123.mail.yahoo.com>
Message-ID: <200709092114.26423.even.rouault@mines-paris.org>

Hi,

Unfortunately, there's little you can do since the GDAL Jpeg driver doesn't 
support the writing of EXIF metadata. It only supports reading of them.

You may want to try another solution to transfer EXIF metadata. Try looking at 
http://en.wikipedia.org/wiki/Exif#Applications_for_Editing_Exif. I've just 
tested jhead (http://freshmeat.net/projects/jhead). It seems to work.
jhead -te mysourcefile.jpg mydestfile.jpg should do the job.

Side node : if we want to implement this in GDAL, jhead could be a start point 
as its licence is public domain. But we've probably already all the wanted 
logic in libtiff anyway.

Best regards,
Even

On Sunday 09 September 2007 20:45:43 marcello ferrero wrote:
> Hi,
> I need to write the GPSLatitude and GPSLongitude tags into a jpg raster
> image (typically a photo taken with a camera), I started doing some test
> but I noticed that CreateCopy does not copy the EXIF metadata (or at least
> I've not been able to make it working).
>
> This is the example code I'm using:
>
> hDriver = GDALGetDriverByName( "JPEG" );
> hDataset = GDALOpen( "MySourceFile.jpg", GA_ReadOnly );
> hDstDS = GDALCreateCopy( hDriver, "MyDestFile.jpg", hDataset, TRUE, NULL,
> NULL, NULL );
>
>
> As a result MyDestFile.jpg does not contain any EXIF metadata while the
> source file has a lot of EXIF tags.
>
> Any idea?
>
> Marcello Ferrero
>
>
>
> ___________________________________________________________________________
>_________ Pinpoint customers who are looking for what you sell.
> http://searchmarketing.yahoo.com/



From randre at gmail.com  Sun Sep  9 19:53:21 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Getting started with raster processing with GDAL/OGR
Message-ID: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>

Hi All,

I'd like to start making some "heat maps" in raster format using the
Python API to GDAL/OGR.  In a nutshell, what I'd like to do is overlay
an empty raster grid (no intentional reference to the ESRI GRID
intended) over various point data sets and assign the grid cells
values based on the point data attributes.

The process I've worked out in my head for doing this is to create a
dictionary with some sort of raster cell id as a key, and the point
value of interest as the value.  Then to loop through each raster cell
and feed its extents as bounding-box values to OGR and capture any
points that fall within the b-box.

The problem is that I don't have any experience creating raster data,
so although I'm pretty confident I could process the point data by
creating the b-box coords mathematically, I don't know how to create
an output raster and assign values to each pixel.

Can someone recommend a tutorial, or previous posting that describes
how to create a raster set that covers a certain rectangular area, and
how to assign the pixels values?

Thanks,

Roger
--

From ivan.lucena at pmldnet.com  Sun Sep  9 21:02:40 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Getting started with raster processing with GDAL/OGR
In-Reply-To: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>
References: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>
Message-ID: <46E497B0.8050501@pmldnet.com>

Andr?,

Since you are used to the GDAL Python API your transition from Vector to 
Raster shouldn't be hard at all.

 > The problem is that I don't have any experience creating raster data,
 > so although I'm pretty confident I could process the point data by
 > creating the b-box coords mathematically, I don't know how to create
 > an output raster and assign values to each pixel.

If what you have is a sell-space in a Python dictionary I believe that 
you can go thought the existing cells and pass the values to a raster 
buffer and then write it in a band (It could be optimized) line by line.

A very simplified sample code would be something like that:

###

import gdal
import Numeric

n_rows = 180 # your calculated
n_cols = 360 # values goes here

gdal.AllRegister()

tif_driver = gdal.GetDriverByName("gtiff")
tif_ds = tif_driver.Create("\Data\grid.tif", n_cols, n_rows, 1)
tif_rb = tif_ds.GetRasterBand(1)

buffer = Numeric.zeros((1, n_cols), Numeric.Int)
# attention:                                ^^^

# loop through all rows of your dictionary :

x = 11  #
x = 38   # hypothetical values in the middle of your loop
z = 4   #

    buffer[0][y] = z

    tif_rb.WriteArray(buffer, 0, x)

# end loop

tif_ds = None
tif_driver = None

###

You can also take a look at one of the GDAL command line utilities like 
pct2rgb.py for a more complete example.

Regards,

Ivan


From perrygeo at gmail.com  Sun Sep  9 21:49:17 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Getting started with raster processing with GDAL/OGR
In-Reply-To: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>
References: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>
Message-ID: <5383fa5e0709091849r1a8f9d91iba80381b5ad1e834@mail.gmail.com>

Roger,

On 9/9/07, Roger Andr? <randre@gmail.com> wrote:
> I'd like to start making some "heat maps" in raster format using the
> Python API to GDAL/OGR.  In a nutshell, what I'd like to do is overlay
> an empty raster grid (no intentional reference to the ESRI GRID
> intended) over various point data sets and assign the grid cells
> values based on the point data attributes.


 I've got a  "point density" script that you could take a look at. It
is pretty basic; given a raster extent and cell size, loops through
each cell, performs a spatial filter on the point dataset and writes
out the number of points encountered within that raster cell.

http://perrygeo.googlecode.com/svn/trunk/gis-bin/point_density.py

Note: it uses the "old" python bindings (with Numeric instead of
numpy) and I haven't tested it with the next-gen bindings.

Hopefully this will be of some use to you. Best of luck.

-- 
Matthew T. Perry
http://www.perrygeo.net

"You never change things by fighting the existing reality.
To change something, build a new model that makes
the existing model obsolete" - R. Buckminster Fuller


From Laurent.Saez at equipement.gouv.fr  Mon Sep 10 05:44:58 2007
From: Laurent.Saez at equipement.gouv.fr (=?UTF-8?Q?=22SAEZ_Laurent_=2D_CETE_M=C3=A9diterr=2E=2FDI=2FETER=22?=)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Split a polygon into polygons
Message-ID: <5F827424D35BD311BBA300902798C05405372908@ct13-mel.cete-mediterranee.i2>

Hi,

Is there a way to split a polygon into polygons ?
I have to make hypsometric areas with some polylines non closed. I would like to split the polygon (or multipolygons) of my departement borders with each polyline.
I hope I'm a little bit clear...

Best regards

From patrice.canonici at gmail.com  Mon Sep 10 07:12:15 2007
From: patrice.canonici at gmail.com (patrice canonici)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problem to compile gdal 1.4.2 with kakadu JPG2000
	support
In-Reply-To: <46E161AA.4030706@loskot.net>
References: <a0fd5fa30708270443i1c313711gff6870f0400081c4@mail.gmail.com>
	<46DEE855.7000706@loskot.net>
	<a0fd5fa30709060050xd017085w18d47d1066b2225d@mail.gmail.com>
	<46E161AA.4030706@loskot.net>
Message-ID: <a0fd5fa30709100412m64538410o260bb369c4c1703@mail.gmail.com>

> Is this a problem for you to not to use libtool when building
> with Kakadu support?
>

no it isn't.

build is OK, I can read  and write JPEG2000 with MapServer WMS
I have a problem with WCS, I don't know from where it comes. I have to
look for  that now.

From warmerdam at pobox.com  Mon Sep 10 09:41:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Split a polygon into polygons
In-Reply-To: <5F827424D35BD311BBA300902798C05405372908@ct13-mel.cete-mediterranee.i2>
References: <5F827424D35BD311BBA300902798C05405372908@ct13-mel.cete-mediterranee.i2>
Message-ID: <46E54973.4090504@pobox.com>

SAEZ Laurent - CETE M?diterr./DI/ETER wrote:
> Hi,
> 
> Is there a way to split a polygon into polygons ?
> I have to make hypsometric areas with some polylines non closed. I would like to split the polygon (or multipolygons) of my departement borders with each polyline.
> I hope I'm a little bit clear...

Laurent,

I am not aware of a mechanism to do this with OGR directly.  You could
write a script that would create a "half the world" polygon with the
cutline as one boundary and then use that polygon to "cut" your target
polygon or multipolygon with the OGRGeometry::Intersection() and
Difference() methods to get the portions on either side of the cutline.

The assumes that your cutlines are such that they can be practically extended
to a great distance and then closed as a polygon.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From oliver.eichler at gmx.de  Mon Sep 10 10:43:55 2007
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Do I need to write adriver with that?
Message-ID: <20070910144355.17260@gmx.net>

Hi,

I like to convert some raster map data from a proprietary format to something more open minded. Browsing the GDAL API doc it looks like I have to write a driver to do so. If I understood the tutorial correctly, I have to patch the GDAL lib to do so. Isn't there an easier way to copy the image data / color table to some GDAL structure and to save it in what ever format GDAL supports?

Oliver




From randre at gmail.com  Mon Sep 10 10:59:13 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Getting started with raster processing with GDAL/OGR
In-Reply-To: <5383fa5e0709091849r1a8f9d91iba80381b5ad1e834@mail.gmail.com>
References: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>
	<5383fa5e0709091849r1a8f9d91iba80381b5ad1e834@mail.gmail.com>
Message-ID: <9c2015090709100759k78ee5771t456980b10c5e5033@mail.gmail.com>

Hi Ivan and Mathew,

Thank you both for your responses.  Ivan, I appreciate the simple
description of how to assign values to raster cells.  Mathew, your
script is exactly what a colleague of mine needs to complete a project
he's working on, and I believe I can follow what it does well enough
to understand how I can adapt it for making my heat maps.  Also, I
wanted to thank you for the other examples of code that you've posted
on PerryGeo.  The "Tissot Indicatrix" page was what whetted my
appetite initially to learn how to use OGR from within Python to do my
own GIS processing.

Thanks again,

Roger
--

On 9/9/07, Matthew Perry <perrygeo@gmail.com> wrote:
> Roger,
>
> On 9/9/07, Roger Andr? <randre@gmail.com> wrote:
> > I'd like to start making some "heat maps" in raster format using the
> > Python API to GDAL/OGR.  In a nutshell, what I'd like to do is overlay
> > an empty raster grid (no intentional reference to the ESRI GRID
> > intended) over various point data sets and assign the grid cells
> > values based on the point data attributes.
>
>
>  I've got a  "point density" script that you could take a look at. It
> is pretty basic; given a raster extent and cell size, loops through
> each cell, performs a spatial filter on the point dataset and writes
> out the number of points encountered within that raster cell.
>
> http://perrygeo.googlecode.com/svn/trunk/gis-bin/point_density.py
>
> Note: it uses the "old" python bindings (with Numeric instead of
> numpy) and I haven't tested it with the next-gen bindings.
>
> Hopefully this will be of some use to you. Best of luck.
>
> --
> Matthew T. Perry
> http://www.perrygeo.net
>
> "You never change things by fighting the existing reality.
> To change something, build a new model that makes
> the existing model obsolete" - R. Buckminster Fuller
>


From randre at gmail.com  Mon Sep 10 11:20:39 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Getting started with raster processing with GDAL/OGR
In-Reply-To: <9c2015090709100759k78ee5771t456980b10c5e5033@mail.gmail.com>
References: <9c2015090709091653g1248804dld2df6d5aef73b549@mail.gmail.com>
	<5383fa5e0709091849r1a8f9d91iba80381b5ad1e834@mail.gmail.com>
	<9c2015090709100759k78ee5771t456980b10c5e5033@mail.gmail.com>
Message-ID: <9c2015090709100820h420dc829k20d7cac7955d4012@mail.gmail.com>

Mathew, one quick question about your script.

You define "cellsize = 1", which I assume means one degree, given the
extents that are then defined afterwards.  What logic would you
recommend for allowing the user to define an arbitrary cellsize in
kilometers?

Thanks,

Roger
--

On 9/10/07, Roger Andr? <randre@gmail.com> wrote:
> Hi Ivan and Mathew,
>
> Thank you both for your responses.  Ivan, I appreciate the simple
> description of how to assign values to raster cells.  Mathew, your
> script is exactly what a colleague of mine needs to complete a project
> he's working on, and I believe I can follow what it does well enough
> to understand how I can adapt it for making my heat maps.  Also, I
> wanted to thank you for the other examples of code that you've posted
> on PerryGeo.  The "Tissot Indicatrix" page was what whetted my
> appetite initially to learn how to use OGR from within Python to do my
> own GIS processing.
>
> Thanks again,
>
> Roger
> --
>
> On 9/9/07, Matthew Perry <perrygeo@gmail.com> wrote:
> > Roger,
> >
> > On 9/9/07, Roger Andr? <randre@gmail.com> wrote:
> > > I'd like to start making some "heat maps" in raster format using the
> > > Python API to GDAL/OGR.  In a nutshell, what I'd like to do is overlay
> > > an empty raster grid (no intentional reference to the ESRI GRID
> > > intended) over various point data sets and assign the grid cells
> > > values based on the point data attributes.
> >
> >
> >  I've got a  "point density" script that you could take a look at. It
> > is pretty basic; given a raster extent and cell size, loops through
> > each cell, performs a spatial filter on the point dataset and writes
> > out the number of points encountered within that raster cell.
> >
> > http://perrygeo.googlecode.com/svn/trunk/gis-bin/point_density.py
> >
> > Note: it uses the "old" python bindings (with Numeric instead of
> > numpy) and I haven't tested it with the next-gen bindings.
> >
> > Hopefully this will be of some use to you. Best of luck.
> >
> > --
> > Matthew T. Perry
> > http://www.perrygeo.net
> >
> > "You never change things by fighting the existing reality.
> > To change something, build a new model that makes
> > the existing model obsolete" - R. Buckminster Fuller
> >
>


From warmerdam at pobox.com  Mon Sep 10 11:21:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Do I need to write adriver with that?
In-Reply-To: <20070910144355.17260@gmx.net>
References: <20070910144355.17260@gmx.net>
Message-ID: <46E560FB.6080000@pobox.com>

Oliver Eichler wrote:
> Hi,
> 
> I like to convert some raster map data from a proprietary format to
> something more open minded. Browsing the GDAL API doc it looks like I have
> to write a driver to do so. If I understood the tutorial correctly, I have
> to patch the GDAL lib to do so. Isn't there an easier way to copy the image
> data / color table to some GDAL structure and to save it in what ever format
> GDAL supports?

Oliver,

A lot depends on the nature of the source data.  If the image data is
regularly laid out on disk, it may be sufficient to write one of the
various "raw header" files such as the .aux for the PAux driver.

If you need to use code to read your source file (compressed,oddly
laied out, etc) then you will have to do more.  It could be a small
standalone utility that writes out some GDAL compatible format (such
as raw+header) or you could implement a driver within GDAL.  In part
it depends on how seamlessly you want the format to work with GDAL
applications.  If a one time translation is all that is needed writing
a proper GDAL driver would likely be overkill.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From oliver.eichler at gmx.de  Mon Sep 10 11:58:30 2007
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Do I need to write adriver with that?
In-Reply-To: <46E560FB.6080000@pobox.com>
References: <20070910144355.17260@gmx.net> <46E560FB.6080000@pobox.com>
Message-ID: <20070910155830.195540@gmx.net>


Hi Frank

> A lot depends on the nature of the source data.  If the image data is
> regularly laid out on disk, it may be sufficient to write one of the
> various "raw header" files such as the .aux for the PAux driver.

Well it's the GeoGrid format used by EADS. This is pretty similar to blocked geotiff data. 

> 
> If you need to use code to read your source file (compressed,oddly
> laied out, etc) then you will have to do more.  It could be a small
> standalone utility that writes out some GDAL compatible format (such
> as raw+header) or you could implement a driver within GDAL.  In part

Thus, if I get you correctly, data always have to be read via file into GDAL. There is no direct API approach.

> it depends on how seamlessly you want the format to work with GDAL
> applications.  If a one time translation is all that is needed writing
> a proper GDAL driver would likely be overkill.

That is what I thought, too. As I have to patch GDAL's source to add a driver it would just make sense if it gets into the official source tree. But I am not sure if you like that. I do not know too much for sure about the format and lack a map database to verify the many assumptions and features of the format. 

I will give the raw intermediate files a try. I hope they do not get too big :)

Thanks for help

Oliver


From warmerdam at pobox.com  Mon Sep 10 12:14:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Do I need to write adriver with that?
In-Reply-To: <20070910155830.195540@gmx.net>
References: <20070910144355.17260@gmx.net> <46E560FB.6080000@pobox.com>
	<20070910155830.195540@gmx.net>
Message-ID: <46E56D6E.4050602@pobox.com>

Oliver Eichler wrote:
> Hi Frank
> 
>> A lot depends on the nature of the source data.  If the image data is
>> regularly laid out on disk, it may be sufficient to write one of the
>> various "raw header" files such as the .aux for the PAux driver.
> 
> Well it's the GeoGrid format used by EADS. This is pretty similar to blocked geotiff data. 
> 
>> If you need to use code to read your source file (compressed,oddly
>> laied out, etc) then you will have to do more.  It could be a small
>> standalone utility that writes out some GDAL compatible format (such
>> as raw+header) or you could implement a driver within GDAL.  In part
> 
> Thus, if I get you correctly, data always have to be read via file into GDAL. There is no direct API approach.

Oliver,

Ah, I neglected to mention that.  Yes, reading via some other
mechanism and then writing via GDAL is quite doable.  You would
use Create() for some format that supports direct file creation
and use RasterIO() to write the data to it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sophia.parafina at ionicenterprise.com  Mon Sep 10 15:23:37 2007
From: sophia.parafina at ionicenterprise.com (Sophia Parafina)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: [GDAL] #913: NITF driver fails for some CADRG tiles
Message-ID: <46E599B9.5010809@ionicenterprise.com>

Even,

Thanks for the patch, but unfortunately it does not solve the problem 
with incorrect coordinates.  I see in the patch that gdal looks at the 
IGEOLO data to get the corner coordinates.  I looked at the file in a 
NITF validator tool called CIVA 
(http://www.gwg.nga.mil/ntb/baseline/software/jitctest.html) to check 
the value of the IGEOLO fields.

Here's what CIVA returns:

 

ISH [1] ->*ULIGEOLO*
15 bytes @0x353 bytes

	

*Contents *

	

"741119N1613354W"                

 

*Pass *

	

*Status *

	

*Message *

Character Set

	

OK

	

"The field is compliant with the specification for Basic Character 
Set-Alphanumeric."

1

	

OK

	

"This field did match one of the format specifications."

2

	

OK

	

"There were no values or ranges to check."

ISH [1] ->*URIGEOLO*
15 bytes @0x362 bytes

	

*Contents *

	

"741119N1613354E"                

 

*Pass *

	

*Status *

	

*Message *

Character Set

	

OK

	

"The field is compliant with the specification for Basic Character 
Set-Alphanumeric."

1

	

OK

	

"This field did match one of the format specifications."

2

	

OK

	

"There were no values or ranges to check."

ISH [1] ->*LRIGEOLO*
15 bytes @0x371 bytes

	

*Contents *

	

"825544N1350000E"                

 

*Pass *

	

*Status *

	

*Message *

Character Set

	

OK

	

"The field is compliant with the specification for Basic Character 
Set-Alphanumeric."

1

	

OK

	

"This field did match one of the format specifications."

2

	

OK

	

"There were no values or ranges to check."

ISH [1] ->*LLIGEOLO*
15 bytes @0x380 bytes

	

*Contents *

	

"825544N1350000W"                

 

*Pass *

	

*Status *

	

*Message *

Character Set

	

OK

	

"The field is compliant with the specification for Basic Character 
Set-Alphanumeric."

1

	

OK

	

"This field did match one of the format specifications."

2

	

OK

	

"There were no values or ranges to check."

 

 Here's what gdal returns:


Corner Coordinates:

Upper Left  (-148.2825256,  74.1886117)

Lower Left  (-148.2825256,  82.9289322)

Upper Right ( 148.2825256,  74.1886117)

Lower Right ( 148.2825256,  82.9289322)

Center      (   0.0000000,  78.5587719)

 
The bounding box from the IGEOLO are not square, also the longitude is 
reported by gdal is the average of the longitudes in the IGEOLO fields.  
Is a non-square BBOX a problem for gdal?


Regards,


sophia


Even Rouault wrote:
> Sophia,
>
> thanks for testing the fix for bug #913.
> What's annoying is that I've just tested your file and it works fine with the 
> svn version of GDAL trunk (as well as a version of GDAL 1.4.2 that I've 
> patched). Just out of curiosity, I've removed the fix for bug #913 and 
> another CADRG bug I've fixed, and your file is still working fine...
> Even more, it is still working fine with the official GDAL 1.4.2 release. Are 
> you really sure you're linking with the good GDAL library ?
> I can't see other explanations for the moment.
>
> Your first message said that the bbox displayed was not correct. I get the 
> following results with GDAL svn trunk :
>
> Corner Coordinates:
> Upper Left  ( 160.3951807,  59.5397891) (160d23'42.65"E, 59d32'23.24"N)
> Lower Left  ( 160.3951807,  59.0220518) (160d23'42.65"E, 59d 1'19.39"N)
> Upper Right ( 161.4361446,  59.5397891) (161d26'10.12"E, 59d32'23.24"N)
> Lower Right ( 161.4361446,  59.0220518) (161d26'10.12"E, 59d 1'19.39"N)
> Center      ( 160.9156627,  59.2809204) (160d54'56.39"E, 59d16'51.31"N)
>
> Best regards
>
> On Monday 27 August 2007 19:52:21 you wrote:
>   
>> Even,
>>
>> I rebuilt gdal with the patch but I get an error with the attached
>> file.  Here is the error I get:
>>
>> ERROR 3: Unable to read 6144 byte block from -16705196.
>> ERROR 1: IReadBlock failed at X offset 1, Y offset 3
>>
>>
>> I've attached the file, it is a tile from a CADRG cd.
>>
>> Thanks,
>>
>> sophia
>>
>> Even Rouault wrote:
>>     
>>> Sophia,
>>>
>>> I don't know what your exact problem was, but bug #913 has just been
>>> fixed in GDAL trunk subversion repository and will be available in GDAL
>>> 1.5.
>>>
>>> See http://trac.osgeo.org/gdal/ticket/913.
>>>
>>> Could you check if it also solves your problem ? Thank you.
>>>
>>> Best regards,
>>>       
>
>
>
>   

From even.rouault at mines-paris.org  Mon Sep 10 16:04:38 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Re: [GDAL] #913: NITF driver fails for some CADRG tiles
In-Reply-To: <46E599B9.5010809@ionicenterprise.com>
References: <46E599B9.5010809@ionicenterprise.com>
Message-ID: <200709102204.38477.even.rouault@mines-paris.org>

Sophia,

apparently your file is not north up (you have upper latitude < lower 
latitude). I don't know if it is usual in NITF, but apparently (just reading 
a few comments) it's somehow taken into account in nitfdataset.cpp. GDAL 
itself shouldn't have problems with dealing with non square bounding box as 
long as there's an affine transform (rotation, scaling and translation) 
between the bounding box and a rectangle.

Now, on the difference of coordinates between what you see in CIVA and what 
reports gdalinfo, I think it's because in GDAL, we first read the IGEOLO 
fields, but if there is a RPF CoverageSectionSubheader, we read it (the 
content is binary doubles) and take it into account as it's supposed to have 
more precise bounds than IGEOLO. However, in your case, the differences for 
the longitudes are quite large (the latitudes are the same however) ...

Do you have an idea of what is the right bounding box ?

If possible, attaching the file would make investigation easier. You may send 
it privately to myself and/or F. Warmerdam.

Best regards

On Monday 10 September 2007 21:23:37 you wrote:
> Even,
>
> Thanks for the patch, but unfortunately it does not solve the problem
> with incorrect coordinates.  I see in the patch that gdal looks at the
> IGEOLO data to get the corner coordinates.  I looked at the file in a
> NITF validator tool called CIVA
> (http://www.gwg.nga.mil/ntb/baseline/software/jitctest.html) to check
> the value of the IGEOLO fields.
>
> Here's what CIVA returns:
>
>
>
> ISH [1] ->*ULIGEOLO*
> 15 bytes @0x353 bytes
>
>
>
> *Contents *
>
>
>
> "741119N1613354W"
>
>
>
> *Pass *
>
>
>
> *Status *
>
>
>
> *Message *
>
> Character Set
>
>
>
> OK
>
>
>
> "The field is compliant with the specification for Basic Character
> Set-Alphanumeric."
>
> 1
>
>
>
> OK
>
>
>
> "This field did match one of the format specifications."
>
> 2
>
>
>
> OK
>
>
>
> "There were no values or ranges to check."
>
> ISH [1] ->*URIGEOLO*
> 15 bytes @0x362 bytes
>
>
>
> *Contents *
>
>
>
> "741119N1613354E"
>
>
>
> *Pass *
>
>
>
> *Status *
>
>
>
> *Message *
>
> Character Set
>
>
>
> OK
>
>
>
> "The field is compliant with the specification for Basic Character
> Set-Alphanumeric."
>
> 1
>
>
>
> OK
>
>
>
> "This field did match one of the format specifications."
>
> 2
>
>
>
> OK
>
>
>
> "There were no values or ranges to check."
>
> ISH [1] ->*LRIGEOLO*
> 15 bytes @0x371 bytes
>
>
>
> *Contents *
>
>
>
> "825544N1350000E"
>
>
>
> *Pass *
>
>
>
> *Status *
>
>
>
> *Message *
>
> Character Set
>
>
>
> OK
>
>
>
> "The field is compliant with the specification for Basic Character
> Set-Alphanumeric."
>
> 1
>
>
>
> OK
>
>
>
> "This field did match one of the format specifications."
>
> 2
>
>
>
> OK
>
>
>
> "There were no values or ranges to check."
>
> ISH [1] ->*LLIGEOLO*
> 15 bytes @0x380 bytes
>
>
>
> *Contents *
>
>
>
> "825544N1350000W"
>
>
>
> *Pass *
>
>
>
> *Status *
>
>
>
> *Message *
>
> Character Set
>
>
>
> OK
>
>
>
> "The field is compliant with the specification for Basic Character
> Set-Alphanumeric."
>
> 1
>
>
>
> OK
>
>
>
> "This field did match one of the format specifications."
>
> 2
>
>
>
> OK
>
>
>
> "There were no values or ranges to check."
>
>
>
>  Here's what gdal returns:
>
>
> Corner Coordinates:
>
> Upper Left  (-148.2825256,  74.1886117)
>
> Lower Left  (-148.2825256,  82.9289322)
>
> Upper Right ( 148.2825256,  74.1886117)
>
> Lower Right ( 148.2825256,  82.9289322)
>
> Center      (   0.0000000,  78.5587719)
>
>
> The bounding box from the IGEOLO are not square, also the longitude is
> reported by gdal is the average of the longitudes in the IGEOLO fields.
> Is a non-square BBOX a problem for gdal?
>
>
> Regards,
>
>
> sophia
>
> Even Rouault wrote:
> > Sophia,
> >
> > thanks for testing the fix for bug #913.
> > What's annoying is that I've just tested your file and it works fine with
> > the svn version of GDAL trunk (as well as a version of GDAL 1.4.2 that
> > I've patched). Just out of curiosity, I've removed the fix for bug #913
> > and another CADRG bug I've fixed, and your file is still working fine...
> > Even more, it is still working fine with the official GDAL 1.4.2 release.
> > Are you really sure you're linking with the good GDAL library ?
> > I can't see other explanations for the moment.
> >
> > Your first message said that the bbox displayed was not correct. I get
> > the following results with GDAL svn trunk :
> >
> > Corner Coordinates:
> > Upper Left  ( 160.3951807,  59.5397891) (160d23'42.65"E, 59d32'23.24"N)
> > Lower Left  ( 160.3951807,  59.0220518) (160d23'42.65"E, 59d 1'19.39"N)
> > Upper Right ( 161.4361446,  59.5397891) (161d26'10.12"E, 59d32'23.24"N)
> > Lower Right ( 161.4361446,  59.0220518) (161d26'10.12"E, 59d 1'19.39"N)
> > Center      ( 160.9156627,  59.2809204) (160d54'56.39"E, 59d16'51.31"N)
> >
> > Best regards
> >
> > On Monday 27 August 2007 19:52:21 you wrote:
> >> Even,
> >>
> >> I rebuilt gdal with the patch but I get an error with the attached
> >> file.  Here is the error I get:
> >>
> >> ERROR 3: Unable to read 6144 byte block from -16705196.
> >> ERROR 1: IReadBlock failed at X offset 1, Y offset 3
> >>
> >>
> >> I've attached the file, it is a tile from a CADRG cd.
> >>
> >> Thanks,
> >>
> >> sophia
> >>
> >> Even Rouault wrote:
> >>> Sophia,
> >>>
> >>> I don't know what your exact problem was, but bug #913 has just been
> >>> fixed in GDAL trunk subversion repository and will be available in GDAL
> >>> 1.5.
> >>>
> >>> See http://trac.osgeo.org/gdal/ticket/913.
> >>>
> >>> Could you check if it also solves your problem ? Thank you.
> >>>
> >>> Best regards,



From cavicchi at ferrara.linux.it  Mon Sep 10 17:45:28 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Warping image...
Message-ID: <46E5BAF8.5070608@ferrara.linux.it>

Hi all,
I have a little problem with a modis image, i must to reproject it in 
UTM meter. I use the function GDALCreateWarpOperation and i must to set 
nOrder = 3. The output image is correct, but the left and right sides 
are wrong.
I don't able to explain where is the problem, but the result is this
http://members.ferrara.linux.it/cavicchi/tmp/modis.jpg

any ideas?

Many Tnx
-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From bfraser at geoanalytic.com  Mon Sep 10 18:00:03 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
Message-ID: <0f2e01c7f3f5$f0d13cd0$140002c0@shark>

Frank, Ray G., (and other TerranGen driver users),

  I'm considering enhancing the TerraGen driver to include
supporting the [optional] reading (and maybe the writing) of
a .wld/.trw file (since the TerraGen format itself does not
include the northing and easting offsets, just the pixel
scale).

Any strong feelings one way or the other?  Other thoughts?

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta


From even.rouault at mines-paris.org  Mon Sep 10 18:21:15 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reducing number of exported symbols
In-Reply-To: <46E40B6D.9000803@pobox.com>
References: <200709091425.44642.even.rouault@mines-paris.org>
	<46E40B6D.9000803@pobox.com>
Message-ID: <200709110021.15615.even.rouault@mines-paris.org>

I've created ticket 1810 (http://trac.osgeo.org/gdal/ticket/1810) and attached 
a patch for that.

On Sunday 09 September 2007 17:04:13 Frank Warmerdam wrote:
> Even,
>
> I am quite interested in this change.  My suggestions would be that for now
> (GDAL/OGR 1.5.0) we drive it by an optional configure switch defaulting to
> the old behavior, and for 1.6 we switch to defaulting to use the new
> behavior if we have an appropriate gcc.
>
> Even Rouault wrote:
> > I give it a try on my system. This required only another change in
> > shapefil.h that doesn't use CPL_DLL but SHPAPI_CALL that is equivalent.
> >
> > #ifndef SHPAPI_CALL
> > #  if defined(__GNUC__) && __GNUC__ >= 4
> > #    define SHPAPI_CALL     __attribute__ ((visibility("default")))
> > #    define SHPAPI_CALL1(x) __attribute__ ((visibility("default")))     x
> > #  else
> > #    define SHPAPI_CALL
> > #  endif
> > #endif
>
> Presumably we could pre-define SHPAPI_CALL in the makefile.
>
> > Result : only 3 442 symbols ! Roughly like on Windows :-)
> >
> > Another great benefit is that it should prevent subtle and annoying
> > problems when linking an executable with a GDAL library build with
> > internal libtiff/libpng/libjpeg/etc... and one of these libraries.Now
> > most of them have disappeared form libgdal.so. This may be becoming
> > necessary with new libtiff 4.0 that has become the internal GDAL libtiff,
> > whereas most *nix systems/distributios still uses 3.8.2. People will
> > probably want to use BigTIFF capabilities without messing up their system
> > libtiff. Mixing symbols from both versions is definitely not a good idea
> > as there has been ABI changes.
> > The case for internal libgeotiff is a bit different since it uses CPL_DLL
> > too in its header. So, symbols for internal libgeotiff are still
> > exported. We should fine a way to distinguish the case when it's built in
> > GDAL tree from when it's build standalone.
>
> We have a CPL_ODLL macro we use for APIs that would not normally be
> public, but that we sometimes want to export.  On windows this was
> introduced so that stuff like the libtiff and libgeotiff API could
> be exported optionally. I would suggest we aim to use it in a similar
> fashion with gcc.
>
> Best regards,



From warmerdam at pobox.com  Mon Sep 10 20:08:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
In-Reply-To: <0f2e01c7f3f5$f0d13cd0$140002c0@shark>
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark>
Message-ID: <46E5DC60.9060401@pobox.com>

Brent Fraser wrote:
> Frank, Ray G., (and other TerranGen driver users),
> 
>   I'm considering enhancing the TerraGen driver to include
> supporting the [optional] reading (and maybe the writing) of
> a .wld/.trw file (since the TerraGen format itself does not
> include the northing and easting offsets, just the pixel
> scale).
> 
> Any strong feelings one way or the other?  Other thoughts?

Brent,

It sounds good to me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rayg at daylongraphics.com  Tue Sep 11 00:04:48 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
In-Reply-To: <46E5DC60.9060401@pobox.com>
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark> <46E5DC60.9060401@pobox.com>
Message-ID: <46E613E0.9040208@daylongraphics.com>

Assuming that's a standard approach, I can't fwiw see a problem.

You'd probably want to talk with Matt Fairclough, Terragen's author, in 
case he's going to natively include georef data in the next format revision.

Ray



Frank Warmerdam wrote:
> Brent Fraser wrote:
>> Frank, Ray G., (and other TerranGen driver users),
>>
>>   I'm considering enhancing the TerraGen driver to include
>> supporting the [optional] reading (and maybe the writing) of
>> a .wld/.trw file (since the TerraGen format itself does not
>> include the northing and easting offsets, just the pixel
>> scale).
>>
>> Any strong feelings one way or the other?  Other thoughts?
> 
> Brent,
> 
> It sounds good to me.
> 
> Best regards,


From wollez at gmx.net  Mon Sep 10 16:26:38 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] gdal_merge ignores -co on winXP/FWTools 1.3.6
Message-ID: <fc49a3$s1g$1@sea.gmane.org>

Hi,
I hope that is the right place to post this problem, but on my system 
gdal_merge ignores all -co options like "COMPRESS=JPEG" and so on. I'm 
running FWTools 1.3.6 on WinXP. Can anybody confirm that?

Thanks
Wolfgang


From rayg at daylongraphics.com  Tue Sep 11 00:55:15 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
In-Reply-To: <46E613E0.9040208@daylongraphics.com>
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark> <46E5DC60.9060401@pobox.com>
	<46E613E0.9040208@daylongraphics.com>
Message-ID: <46E61FB3.7010608@daylongraphics.com>

Oh, which branch were you going to edit? I think the latest driver is in 
the 1.5 (trunk), not 1.4.

Ray


> 
> Frank Warmerdam wrote:
>> Brent Fraser wrote:
>>> Frank, Ray G., (and other TerranGen driver users),
>>>
>>>   I'm considering enhancing the TerraGen driver to include
>>> supporting the [optional] reading (and maybe the writing) of
>>> a .wld/.trw file (since the TerraGen format itself does not
>>> include the northing and easting offsets, just the pixel
>>> scale).
>>>
>>> Any strong feelings one way or the other?  Other thoughts?
>>
>> Brent,
>>
>> It sounds good to me.
>>
>> Best regards,
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 


From neteler at itc.it  Tue Sep 11 03:18:24 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Warping image...
In-Reply-To: <46E5BAF8.5070608@ferrara.linux.it>
References: <46E5BAF8.5070608@ferrara.linux.it>
Message-ID: <20070911071824.GB22756@bartok.itc.it>

On Mon, Sep 10, 2007 at 11:45:28PM +0200, Mario Cavicchi wrote:
> Hi all,
> I have a little problem with a modis image, i must to reproject it in UTM 
> meter. I use the function GDALCreateWarpOperation and i must to set nOrder 
> = 3. The output image is correct, but the left and right sides are wrong.
> I don't able to explain where is the problem, but the result is this
> http://members.ferrara.linux.it/cavicchi/tmp/modis.jpg

Mario,

I don't think that it is a good idea to use 3rd order
polynomial to warp MODIS. The effect which you see looks
pretty much as an overshoot. I had the same issue with
AVHRR using 3rd order polynomials, see
  http://mpa.itc.it/markus/avhrr/
  ->  irectify_3rd_order_avhrr.png
      (the use code is rather identical to the GDAL code)

Is the original a MODIS HDF in Sinusoidal projection?

I have written a script to reproject MODIS to LatLong/WGS84:
http://mpa.itc.it/markus/useful/modis_hdf2erdas_ll_wgs84.sh

You can adapt the script easily to write out UTM but
it is recommended to extract only a spatial subset
since a UTM zone is smaller than a full MODIS scene
(if I recall correctly).

ciao
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From wollez at gmx.net  Tue Sep 11 05:31:20 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] problems with ecw driver
Message-ID: <fc5n95$6ne$1@sea.gmane.org>

Hi,

I use gdal_translate with the ecw(p) as input. But I often (not always!) 
dont get a complete image. The upper left 256x256 pixel are missing, 
have wrong colors and/or are unsharp. Is that a problem of the mapserver 
or something in the gdal driver. I'm using FWTools 1.3.6.

Regards
Wolfgang

gdal_translate -co "TILED=YES" -srcwin 38912 16384 256 256 \
  ecwp://imgiberpix.ign.es/iberpix/7_MRASTER/bcn200r-2000_30.ecw \
  outfile.tif


From oliver.eichler at gmx.de  Tue Sep 11 06:11:03 2007
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Create GTiff with 8bit color table
Message-ID: <20070911101103.321990@gmx.net>

Hi,

I try to make my first experiences with GDAL. I simply want to create some geotiff file from 8bit color table index data. 


    GDALDriverManager * drvman = GetGDALDriverManager();
    driver  = drvman->GetDriverByName("GTiff");

    dataset = driver->Create("test.tif",width,height,1,GDT_Byte,0);
    GDALRasterBand * band1 = dataset->GetRasterBand(1);
    band1->SetColorInterpretation(GCI_PaletteIndex);

    dataset->FlushCache();

This code will tell me:
    ERROR 6: SetColorInterpretation() not supported for this dataset.

What's my fault during setup?

BTW is there any reason why GDALColorTable is not visible in the documentation? 

Oliver

From bfraser at geoanalytic.com  Tue Sep 11 09:40:51 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark>
	<46E5DC60.9060401@pobox.com><46E613E0.9040208@daylongraphics.com>
	<46E61FB3.7010608@daylongraphics.com>
Message-ID: <00fd01c7f479$5e7ba490$140002c0@shark>

Ray,

  I'll modify 1.5 (trunk).

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Ray Gardener" <rayg@daylongraphics.com>
To: "gdal-dev" <gdal-dev@lists.maptools.org>
Sent: Monday, September 10, 2007 10:55 PM
Subject: Re: [Gdal-dev] Reading a World file for a Terragen
.ter file


> Oh, which branch were you going to edit? I think the
latest driver is in
> the 1.5 (trunk), not 1.4.
>
> Ray
>
>
> >
> > Frank Warmerdam wrote:
> >> Brent Fraser wrote:
> >>> Frank, Ray G., (and other TerranGen driver users),
> >>>
> >>>   I'm considering enhancing the TerraGen driver to
include
> >>> supporting the [optional] reading (and maybe the
writing) of
> >>> a .wld/.trw file (since the TerraGen format itself
does not
> >>> include the northing and easting offsets, just the
pixel
> >>> scale).
> >>>
> >>> Any strong feelings one way or the other?  Other
thoughts?
> >>
> >> Brent,
> >>
> >> It sounds good to me.
> >>
> >> Best regards,
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From bfraser at geoanalytic.com  Tue Sep 11 09:56:49 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark> <46E5DC60.9060401@pobox.com>
	<46E613E0.9040208@daylongraphics.com>
Message-ID: <013401c7f47b$99594e30$140002c0@shark>

Ray,
    I'll use one of the other drivers as guide, so it should
be consistent.

    Hmm I was going to see if I should update the on-line
doc on the GDAL formats page, but I see that the Terraingen
format is not listed (although there is a reference to
Terragen in the Leveler page).  Ray, if you do the write-up,
I'll be happy to edit it for my changes...

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Ray Gardener" <rayg@daylongraphics.com>
Cc: "gdal-dev" <gdal-dev@lists.maptools.org>
Sent: Monday, September 10, 2007 10:04 PM
Subject: Re: [Gdal-dev] Reading a World file for a Terragen
.ter file


> Assuming that's a standard approach, I can't fwiw see a
problem.
>
> You'd probably want to talk with Matt Fairclough,
Terragen's author, in
> case he's going to natively include georef data in the
next format revision.
>
> Ray
>
>
>
> Frank Warmerdam wrote:
> > Brent Fraser wrote:
> >> Frank, Ray G., (and other TerranGen driver users),
> >>
> >>   I'm considering enhancing the TerraGen driver to
include
> >> supporting the [optional] reading (and maybe the
writing) of
> >> a .wld/.trw file (since the TerraGen format itself does
not
> >> include the northing and easting offsets, just the
pixel
> >> scale).
> >>
> >> Any strong feelings one way or the other?  Other
thoughts?
> >
> > Brent,
> >
> > It sounds good to me.
> >
> > Best regards,
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Sep 11 09:56:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Create GTiff with 8bit color table
In-Reply-To: <20070911101103.321990@gmx.net>
References: <20070911101103.321990@gmx.net>
Message-ID: <46E69E9E.7050808@pobox.com>

Oliver Eichler wrote:
> Hi,
> 
> I try to make my first experiences with GDAL. I simply want to create some geotiff file from 8bit color table index data. 
> 
> 
>     GDALDriverManager * drvman = GetGDALDriverManager();
>     driver  = drvman->GetDriverByName("GTiff");
> 
>     dataset = driver->Create("test.tif",width,height,1,GDT_Byte,0);
>     GDALRasterBand * band1 = dataset->GetRasterBand(1);
>     band1->SetColorInterpretation(GCI_PaletteIndex);
> 
>     dataset->FlushCache();
> 
> This code will tell me:
>     ERROR 6: SetColorInterpretation() not supported for this dataset.
> 
> What's my fault during setup?

Oliver,

The GeoTIFF driver does not support setting or resetting the color
interpretation.  However, as long as you do it before you start writing
raster data you can use the SetColorTable() method on the band of a
single band file and it will be changed internally to paletted.

> BTW is there any reason why GDALColorTable is not visible in the documentation? 

No *good* reason.  I have fixed this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Sep 11 11:00:28 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Warping image...
In-Reply-To: <46E5BAF8.5070608@ferrara.linux.it>
References: <46E5BAF8.5070608@ferrara.linux.it>
Message-ID: <46E6AD8C.3000805@pobox.com>

Mario Cavicchi wrote:
> Hi all,
> I have a little problem with a modis image, i must to reproject it in 
> UTM meter. I use the function GDALCreateWarpOperation and i must to set 
> nOrder = 3. The output image is correct, but the left and right sides 
> are wrong.
> I don't able to explain where is the problem, but the result is this
> http://members.ferrara.linux.it/cavicchi/tmp/modis.jpg

Mario,

It has been my experience that 3rd order polynomials can easily do some
pretty odd things.  I assume what you are seeing is some sort of "wrap
back on itself" property of the polynomials that were computed.  I'm not
clear on whether this is a defect of the computations done in GDAL or
whether it is inherent in a best fit for the control points available.

Generally speaking I just avoid polynomials of order higher than 2, or
sometimes I will try the thin plate spline (-tps) option.

It would have been helpful in reviewing your problem to have the a pointer
to the input file.  It is always possible there is something really funky
about the control points, but we don't have much to work with to figure that
out.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rayg at daylongraphics.com  Tue Sep 11 11:08:53 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
In-Reply-To: <013401c7f47b$99594e30$140002c0@shark>
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark> <46E5DC60.9060401@pobox.com>
	<46E613E0.9040208@daylongraphics.com>
	<013401c7f47b$99594e30$140002c0@shark>
Message-ID: <46E6AF85.7080202@daylongraphics.com>

Brent Fraser wrote:
> Ray,
>     I'll use one of the other drivers as guide, so it should
> be consistent.
> 
>     Hmm I was going to see if I should update the on-line
> doc on the GDAL formats page, but I see that the Terraingen
> format is not listed (although there is a reference to
> Terragen in the Leveler page).  Ray, if you do the write-up,
> I'll be happy to edit it for my changes...

Write-up meaning...? I'm sorry but I don't understand. The format list 
is just a one-line entry per format.

Oh, I think the terragen format also needs to be added to the GDAL 
makefile. The text -Dterragen has to be added in that long paragraph of 
driver macro defs.

Ray


From bfraser at geoanalytic.com  Tue Sep 11 11:44:51 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark>
	<46E5DC60.9060401@pobox.com><46E613E0.9040208@daylongraphics.com><013401c7f47b$99594e30$140002c0@shark>
	<46E6AF85.7080202@daylongraphics.com>
Message-ID: <01c901c7f48a$b56fdda0$140002c0@shark>

Ray,

  There's the list of formats (one-liners) at
http://www.gdal.org/formats_list.html, with links to a
varying amount of information specific to each format.  For
example the link to the Leveler details is
http://www.gdal.org/frmt_leveller.html (that particular
description is a little more programmer oriented than user
oriented; I was thinking of the type of info in
http://www.gdal.org/frmt_various.html#PNG might be
suitable).

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta

----- Original Message ----- 
From: "Ray Gardener" <rayg@daylongraphics.com>
To: "gdal-dev" <gdal-dev@lists.maptools.org>
Sent: Tuesday, September 11, 2007 9:08 AM
Subject: Re: [Gdal-dev] Reading a World file for a Terragen
.ter file


> Brent Fraser wrote:
> > Ray,
> >     I'll use one of the other drivers as guide, so it
should
> > be consistent.
> >
> >     Hmm I was going to see if I should update the
on-line
> > doc on the GDAL formats page, but I see that the
Terraingen
> > format is not listed (although there is a reference to
> > Terragen in the Leveler page).  Ray, if you do the
write-up,
> > I'll be happy to edit it for my changes...
>
> Write-up meaning...? I'm sorry but I don't understand. The
format list
> is just a one-line entry per format.
>
> Oh, I think the terragen format also needs to be added to
the GDAL
> makefile. The text -Dterragen has to be added in that long
paragraph of
> driver macro defs.
>
> Ray
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From rayg at daylongraphics.com  Tue Sep 11 12:54:03 2007
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Reading a World file for a Terragen .ter file
In-Reply-To: <01c901c7f48a$b56fdda0$140002c0@shark>
References: <0f2e01c7f3f5$f0d13cd0$140002c0@shark> <46E5DC60.9060401@pobox.com>
	<46E613E0.9040208@daylongraphics.com>
	<013401c7f47b$99594e30$140002c0@shark>
	<46E6AF85.7080202@daylongraphics.com>
	<01c901c7f48a$b56fdda0$140002c0@shark>
Message-ID: <46E6C82B.4060002@daylongraphics.com>

The Terragen driver seems to have a description page already.

As to style, well, GDAL is a library, so the user base is more technical 
than that of a purely runtime app. I can leave details out, but then I 
invariably get questions from lib users, and as a one-person shop I 
can't afford doing any support more than necessary. So the docs tend to 
have a "for the sake of completeness" style. If a fellow dev has to go 
into driver source code to answer interface questions, then something's 
wrong.

If the GDAL toolset users prefer simpler docs, then separate ones should 
be written for them. It's really a different domain. Or the driver notes 
can have Basic/Advanced sections.

Getting back to auxiliary files... there might be a problem because 
Terragen files do have some projection data (the SCAL tag). So it's 
possible to get into a situation where the gridpost spacing doesn't 
agree between the Terragen file and the aux file. It's not like a simple 
bitmap (BMP/PNG/etc.) where there's no georef data at all in the file.

Ray



Brent Fraser wrote:
> Ray,
> 
>   There's the list of formats (one-liners) at
> http://www.gdal.org/formats_list.html, with links to a
> varying amount of information specific to each format.  For
> example the link to the Leveler details is
> http://www.gdal.org/frmt_leveller.html (that particular
> description is a little more programmer oriented than user
> oriented; I was thinking of the type of info in
> http://www.gdal.org/frmt_various.html#PNG might be
> suitable).
> 
> Brent Fraser
> GeoAnalytic Inc.
> Calgary, Alberta
> 
> ----- Original Message ----- 
> From: "Ray Gardener" <rayg@daylongraphics.com>
> To: "gdal-dev" <gdal-dev@lists.maptools.org>
> Sent: Tuesday, September 11, 2007 9:08 AM
> Subject: Re: [Gdal-dev] Reading a World file for a Terragen
> .ter file
> 
> 
>> Brent Fraser wrote:
>>> Ray,
>>>     I'll use one of the other drivers as guide, so it
> should
>>> be consistent.
>>>
>>>     Hmm I was going to see if I should update the
> on-line
>>> doc on the GDAL formats page, but I see that the
> Terraingen
>>> format is not listed (although there is a reference to
>>> Terragen in the Leveler page).  Ray, if you do the
> write-up,
>>> I'll be happy to edit it for my changes...
>> Write-up meaning...? I'm sorry but I don't understand. The
> format list
>> is just a one-line entry per format.
>>
>> Oh, I think the terragen format also needs to be added to
> the GDAL
>> makefile. The text -Dterragen has to be added in that long
> paragraph of
>> driver macro defs.
>>
>> Ray
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 
> 


From oliver.eichler at gmx.de  Tue Sep 11 13:14:35 2007
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Create GTiff with 8bit color table
In-Reply-To: <46E69E9E.7050808@pobox.com>
References: <20070911101103.321990@gmx.net> <46E69E9E.7050808@pobox.com>
Message-ID: <200709111914.36088.oliver.eichler@gmx.de>

On Tuesday, 11. September 2007 15:56, you wrote:
>
> The GeoTIFF driver does not support setting or resetting the color
> interpretation.  However, as long as you do it before you start writing
> raster data you can use the SetColorTable() method on the band of a
> single band file and it will be changed internally to paletted.
>

Hi Frank,

that did the trick. I wasn't deperate enought to set the table before setting 
up the color interpretation. :)

It works and it's pretty fast, too. Now I just have to find a Linux app to 
handle GeoTiffs of 3-4GB size. QGis isn't too happy about it. Let's see...

 Thanks for your help.

Oliver

From wef1 at cec.wustl.edu  Tue Sep 11 15:01:53 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Compiling gdal 1.4.2 with HDF4.2 fails
Message-ID: <f4c7e92f0709111201n7a0fb56bs1018483f7ef93f03@mail.gmail.com>

Hi list, I'm trying to rebuild gdal with hdf4 support and running into a
compilation error:

g++ -shared   /usr/local/src/gdal-1.4.2/frmts/o/*.o /usr/local/src/gdal-
1.4.2/gcore/*.o /usr/local/src/gdal-1.4.2/port/*.o
/usr/local/src/gdal-1.4.2/alg/*.o
/usr/local/src/gdal-1.4.2/ogr/ogrsf_frmts/o/*.o ./ogr/ogrgeometryfactory.o
./ogr/ogrpoint.o ./ogr/ogrcurve.o ./ogr/ogrlinestring.o
./ogr/ogrlinearring.o ./ogr/ogrpolygon.o ./ogr/ogrutils.o
./ogr/ogrgeometry.o ./ogr/ogrgeometrycollection.o ./ogr/ogrmultipolygon.o
./ogr/ogrsurface.o ./ogr/ogrmultipoint.o ./ogr/ogrmultilinestring.o
./ogr/ogr_api.o ./ogr/ogrfeature.o ./ogr/ogrfeaturedefn.o
./ogr/ogrfeaturequery.o ./ogr/ogrfeaturestyle.o ./ogr/ogrfielddefn.o
./ogr/ogrspatialreference.o ./ogr/ogr_srsnode.o ./ogr/ogr_srs_proj4.o
./ogr/ogr_fromepsg.o ./ogr/ogrct.o ./ogr/ogr_opt.o ./ogr/ogr_srs_esri.o
./ogr/ogr_srs_pci.o ./ogr/ogr_srs_usgs.o ./ogr/ogr_srs_dict.o
./ogr/ogr_srs_panorama.o ./ogr/swq.o ./ogr/ogr_srs_validate.o
./ogr/ogr_srs_xml.o ./ogr/ograssemblepolygon.o ./ogr/ogr2gmlgeometry.o
./ogr/gml2ogrgeometry.o /usr/local/src/gdal-1.4.2/libgdal.a
/usr/local/src/gdal-1.4.2/libgdal.a -L/usr/local/lib -lgeos -lgeos_c
-L/usr/local/src/xerces-c-src_2_7_0/lib -lxerces-c -lpthread
-L/usr/local/src/HDF4.2r1/NewHDF/lib -lmfhdf -ldf -ljpeg -lnetcdf -lz  -lm
-lrt -ldl    -L/usr/lib64 -lcurl -L/usr/kerberos/lib -L/usr/kerberos/lib64
-lssl -lcrypto -lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz
-lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err -lresolv -L/usr/kerberos/lib
-L/usr/kerberos/lib64 -lidn -lssl -lcrypto -lssl -lcrypto -lgssapi_krb5
-lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz -lz   \
        -o /usr/local/src/gdal-1.4.2/libgdal.so
/usr/bin/ld: /usr/local/src/HDF4.2r1/NewHDF/lib/libmfhdf.a(mfsd.o):
relocation R_X86_64_32 against `a local symbol' can not be used when making
a shared object; recompile with -fPIC
/usr/local/src/HDF4.2r1/NewHDF/lib/libmfhdf.a: could not read symbols: Bad
value
collect2: ld returned 1 exit status


I've seen this before, recompile with -fPIC, and from gdal configure I
included -fPIC:

  Installation directory:    /usr/local
  C compiler:                gcc -fPIC
  C++ compiler:              g++ -fPIC


So, either it's another problem or the flags aren't getting picked up at
this command, so I'm not quite sure where or how to include the flag in this
command.  I'm not so great with makefiles, but I'm trying.

Anyone have any ideas?
Thanks!
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070911/e3b92eb4/attachment.html
From warmerdam at pobox.com  Tue Sep 11 16:02:46 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Compiling gdal 1.4.2 with HDF4.2 fails
In-Reply-To: <f4c7e92f0709111201n7a0fb56bs1018483f7ef93f03@mail.gmail.com>
References: <f4c7e92f0709111201n7a0fb56bs1018483f7ef93f03@mail.gmail.com>
Message-ID: <46E6F466.1090500@pobox.com>

Edward Fialkowski wrote:
>         -o /usr/local/src/gdal-1.4.2/libgdal.so
> /usr/bin/ld: /usr/local/src/HDF4.2r1/NewHDF/lib/libmfhdf.a(mfsd.o): 
> relocation R_X86_64_32 against `a local symbol' can not be used when 
> making a shared object; recompile with -fPIC
> /usr/local/src/HDF4.2r1/NewHDF/lib/libmfhdf.a: could not read symbols: 
> Bad value
> collect2: ld returned 1 exit status
> 
> 
> I've seen this before, recompile with -fPIC, and from gdal configure I 
> included -fPIC:
> 
>   Installation directory:    /usr/local
>   C compiler:                gcc -fPIC
>   C++ compiler:              g++ -fPIC
> 
> 
> So, either it's another problem or the flags aren't getting picked up at 
> this command, so I'm not quite sure where or how to include the flag in 
> this command.  I'm not so great with makefiles, but I'm trying. 

Edward,

I believe the problem is that the HDF4.2r1 libraries need to be rebuilt
with -fPIC.  If you figure out what you need to do in the HDF build, you
might want to note it in the wiki at:

   http://trac.osgeo.org/gdal/wiki/HDF

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue Sep 11 17:16:10 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] host for 20gb+ free data?
In-Reply-To: <46BB99A8.5060208@gov.yk.ca>
References: <46BB99A8.5060208@gov.yk.ca>
Message-ID: <46E7059A.8060204@gov.yk.ca>

Hi All,

A little while I asked:

> I've a growing collection of spatial raster data for which there is no 
> restriction on public use and re-use, but which we will not host 
> ourselves as it is not something we wish to support or answer questions 
> about. There is no reason for it not to be generally available though. 
> Anyone know a place to host it?

...and Adam Nowacki and the Free Earth Foundation answered the call. 
Thank you Adam and FEF.

The first of the collection is posted to
http://sydney.freeearthfoundation.com/mattwilkie/draft/canada_50k_dem/

It is a 1:50,000 digital elevation model of Canada in 71 tiles. It's 
marked draft because as of yet there has been no real Q&A of the result 
except in a few areas of personal interest. Basically I've run a bunch 
of scripts from the command line and trusted the tools were doing what I 
expected them too. P:)

Feeback is welcome, very much so, but there is no promise of response or 
fixes in the event of errors as supporting "the world" is outside the 
scope of my job description. Or so my supervisor keeps reminding me.

I hope the data is of some use to somebody, and thereby justify my time 
assembling it and the FEF's expenditure of resources. If not, oh well, I 
learned a bunch in the process will continue to be put it to good use!

Cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue Sep 11 21:20:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] OGR OLEDB Provider
Message-ID: <46E73EEA.3050307@pobox.com>

Folks,

I am trying to go through the issues identified in the GDAL PROVENANCE.TXT
for the OSGeo Incubation with the aim of resolving them all for the GDAL/OGR
1.5.0 release.  Those that I can't resolve directly as I go, I am filing in
Trac with a "License" category.  One sticky one is some code in the OLE DB
provider.

While the problems might be resolvable by getting clear release statements
from the owners of the code from which parts were derived, I think it could
be tricky.  Also, the OLE DB provider isn't really a core component of
GDAL/OGR (just a layered add on) and it isn't widely used.  So I'm proposing
to just move it out of the GDAL trunk, perhaps into the "/spike" area of
subversion.

I've documented this issue in:

   http://trac.osgeo.org/gdal/ticket/1817

This email is soliciting feedback on the issue - primarily to see if there
are any objections to my taking this step.

The OLE DB provider would continue to be available, but it would not be
part of the standard GDAL distribution.  It would also likely get less
love and attention than it does now (which isn't really very much).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Sep 11 21:40:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:01 2007
Subject: [Gdal-dev] Standard LICENSE / credit requirement reporting
Message-ID: <46E74392.5020702@pobox.com>

Folks,

Also in the Provenance review effort, some licenses include clauses like:

"""
*       Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following disclaimer
in the documentation and/or other materials provided with the
distribution.
"""

which is sometimes referred to as a "credit requirement".  Even the GDAL
license contains the text:

"""
The above copyright notice and this permission notice shall be included
in all copies or substantial portions of the Software.
"""

which has been read by some lawyers to imply the need to include the license
text in binary distributions of the software package.

In order to simplify reporting requirements for applications using GDAL and
for gdal utilities themselves, I propose to:

  - add a LICENSE.TXT in the gdal source directly listing all licenses
    and credit notices.
  - install this file GDAL data files (/usr/local/share/gdal for instance)
  - extend GDALVersionInfo("LICENSE") to report this file to stdout.
  - add --license commandline switch to gdal and ogr standard commandline
    processing to report this file.

In the future when we add code directly to GDAL with credit requirements
(or possibly when we depend on it as an optional library) we would add the
appropriate text in the gdal/LICENSE.TXT file.

Any thoughts on the appropriateness of this?  Do we need an RFC for this?
It seems somewhat like overkill to me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Sep 11 23:46:08 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Compiling gdal 1.4.2 with HDF4.2 fails
In-Reply-To: <f4c7e92f0709111440n73cff6ebib288e26dc1eff95f@mail.gmail.com>
References: <f4c7e92f0709111201n7a0fb56bs1018483f7ef93f03@mail.gmail.com>
	<46E6F466.1090500@pobox.com>
	<f4c7e92f0709111440n73cff6ebib288e26dc1eff95f@mail.gmail.com>
Message-ID: <46E76100.1030706@pobox.com>

Ed Fialkowski wrote:
> Awesome, that did it, along with a bit of help from the 'common 
> problems' section of HDF.
> 
> Unfortunately, still not crystal quite yet.
> First thing I check is gdal_translate --formats, and I don't see HDF 
> anywhere.
> When I check gdal-config --formats, I do!
> 
> [root@niceguy apps]# ./gdal-config --formats
> gxf gtiff hfa aigrid aaigrid ceos ceos2 iso8211 xpm sdts raw dted mem 
> jdem envisat elas fit vrt usgsdem l1b nitf bmp pcidsk airsar rs2 ilwis 
> rmf rik leveller sgi idrisi wcs bsb hdf4 gif jpeg png netcdf pcraster
> 
> So, that's a bit weird.  It's definitely compiled with some of the hdf 
> support, just not quite sure how to get it over to gdal_translate.  Any 
> ideas?
> 
> I've attached the output from gdal_translate's format list, just in case.

Ed,

Generally this is the result of not doing a clean make, failing to actually
install or having multiple copies of GDAL around and using one that isn't
the one you just build and installed.

Try:

make clean; make; make install

in the gdal directory.

If the problem persists, try "ldd `which gdal_translate`" to find
out what shared library is actually getting used and verify (with
ls -l) that it is the one you just built and installed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Wed Sep 12 00:03:38 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Standard LICENSE / credit requirement reporting
In-Reply-To: <46E74392.5020702@pobox.com>
References: <46E74392.5020702@pobox.com>
Message-ID: <8ACFB40C-CEBC-48D0-AD30-53FECDB04539@gmail.com>

+1 on what is proposed.  No need for an RFC, but maybe we should  
update the developer RFC to tip people off on what is expected with  
respect to these kinds of issues.  Thanks for doing this work.

Howard

On Sep 11, 2007, at 8:40 PM, Frank Warmerdam wrote:

> Folks,
>
> Also in the Provenance review effort, some licenses include clauses  
> like:
>
> """
> *       Redistributions in binary form must reproduce the above
> copyright notice, this list of conditions and the following disclaimer
> in the documentation and/or other materials provided with the
> distribution.
> """
>
> which is sometimes referred to as a "credit requirement".  Even the  
> GDAL
> license contains the text:
>
> """
> The above copyright notice and this permission notice shall be  
> included
> in all copies or substantial portions of the Software.
> """
>
> which has been read by some lawyers to imply the need to include  
> the license
> text in binary distributions of the software package.
>
> In order to simplify reporting requirements for applications using  
> GDAL and
> for gdal utilities themselves, I propose to:
>
>  - add a LICENSE.TXT in the gdal source directly listing all licenses
>    and credit notices.
>  - install this file GDAL data files (/usr/local/share/gdal for  
> instance)
>  - extend GDALVersionInfo("LICENSE") to report this file to stdout.
>  - add --license commandline switch to gdal and ogr standard  
> commandline
>    processing to report this file.
>
> In the future when we add code directly to GDAL with credit  
> requirements
> (or possibly when we depend on it as an optional library) we would  
> add the
> appropriate text in the gdal/LICENSE.TXT file.
>
> Any thoughts on the appropriateness of this?  Do we need an RFC for  
> this?
> It seems somewhat like overkill to me.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From xuex_chen at 126.com  Wed Sep 12 02:43:34 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] help for reading sde features by ogr
Message-ID: <28049659.1004591189579414189.JavaMail.coremail@bj126app87.126.com>

  hi, any one have some samples about reading features in database( configured by ArcSDE ) with OGR_sde ? 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070912/858f91cb/attachment.html
From sschantz at bfs.de  Wed Sep 12 03:10:37 2007
From: sschantz at bfs.de (shortyII)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Change indicated colour maps into gray gradient
Message-ID: <12629889.post@talk.nabble.com>


Hi,

Is it possible to use GDAL to change a GeoTIFF from
indicated colour to a gray gradient?

I've looked at doc and e-mail archives for several hours but I haven't
found anything yet - hoping someone can spend 30 seconds on the answer!

My GeoTiff looks like this:
E:\test\Tiff\original>gdalinfo dtk1000.tif
Driver: GTiff/GeoTIFF
Files: dtk1000.tif
Size is 22346, 29568
Coordinate System is `'
Origin = (32256531.250000000000000,6124843.750000000000000)
Pixel Size = (31.250000000000000,-31.250000000000000)
Metadata:
  TIFFTAG_SOFTWARE=Handmade Software, Inc. Image Alchemy v1.12
  TIFFTAG_XRESOLUTION=813
  TIFFTAG_YRESOLUTION=813
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=LZW
Corner Coordinates:
Upper Left  (32256531.250, 6124843.750)
Lower Left  (32256531.250, 5200843.750)
Upper Right (32954843.750, 6124843.750)
Lower Right (32954843.750, 5200843.750)
Center      (32605687.500, 5662843.750)
Band 1 Block=22346x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 255,255,255,255
    1: 255,255,255,255
    2: 255,255,255,255
    3: 191,230,230,255
    4: 153,255,179,255
    5: 230,255,204,255
    6: 191,242,128,255
    7: 230,230,204,255
    8: 255,255,230,255
    9: 191,255,255,255
   10: 204,204,204,255
   11: 255,153,179,255
   12: 255,77,128,255
   13: 255,255,255,255
   14: 255,255,255,255
   15: 255,255,255,255
   16: 255,255,255,255
   17: 242,204,202,255
   18: 255,120,255,255
   19: 255,255,255,255
   20: 102,102,102,255
   21: 255,255,0,255
   22: 255,179,0,255
   23: 255,255,255,255
   24: 255,0,0,255
   25: 153,0,255,255
...

-- 
View this message in context: http://www.nabble.com/Change-indicated-colour-maps-into-gray-gradient-tf4427397.html#a12629889
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From wollez at gmx.net  Wed Sep 12 04:40:43 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Re: Create GTiff with 8bit color table
In-Reply-To: <200709111914.36088.oliver.eichler@gmx.de>
References: <20070911101103.321990@gmx.net> <46E69E9E.7050808@pobox.com>
	<200709111914.36088.oliver.eichler@gmx.de>
Message-ID: <fc88mb$9qk$1@sea.gmane.org>

Oliver Eichler schrieb:
> On Tuesday, 11. September 2007 15:56, you wrote:
>> The GeoTIFF driver does not support setting or resetting the color
>> interpretation.  However, as long as you do it before you start writing
>> raster data you can use the SetColorTable() method on the band of a
>> single band file and it will be changed internally to paletted.
>>
> 
> Hi Frank,
> 
> that did the trick. I wasn't deperate enought to set the table before setting 
> up the color interpretation. :)
> 
> It works and it's pretty fast, too. Now I just have to find a Linux app to 
> handle GeoTiffs of 3-4GB size. QGis isn't too happy about it. Let's see...
> 
>  Thanks for your help.
> 
> Oliver

Have a look at OpenEV which is included in the FWTools! I've tested it 
with a 28000x52000 pixel tiff and works fine (at least when you don't 
want to see huge parts of the map at a time. Haven't tested yet it if 
overviewmaps would fasten that up (you could do that with gdaladdo).
Perhaps a small hint: create your tiffs with the option TILED=YES.

Regards
Wolfgang


From ehrler-soft at gmx.de  Wed Sep 12 07:55:07 2007
From: ehrler-soft at gmx.de (Christoph Ehrler)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Status Report KML Driver
Message-ID: <bc75359f0709120455s68afff43ydac97689321f3c49@mail.gmail.com>

Hi @ all

is this project still in progress and whats the actual status?
I'm curious to see the development since the 20th August 2007 because
otherwise I'll need to implement KML support myself.

Cheers!
Christoph


Jens Oberender wrote:
> As requested a status report for the kml driver as of today.
>
> Working:
> - reading and parsing the kml file works
> - the vector part decides about what elements are layers and what features
> - exporting simple Point layers/features (test with ogr2ogr into a shapefile,
> only names are converted to fields yet)
>
> Not yet implemented:
> - exporting LineString and Polygon
> - export with filters
> - exporting more tags as fields
> - get the layer extend
> - special case handling (GeometryCollections)
>
> Summary:
> The base work is done,
> now the data can be handled and special cases need to
> be detected and shipped around. I would guess about one week of work to
> finish that.
>
>From my point of view, there is no problem to continue the work
in next weeks if you need.
>
> Future:
> The base (KML class) is written, so writing a child for rasters (analog to the
> KMLvector class) shouldn't be too hard.

From dmorissette at mapgears.com  Wed Sep 12 09:11:44 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <46E73EEA.3050307@pobox.com>
References: <46E73EEA.3050307@pobox.com>
Message-ID: <46E7E590.4060009@mapgears.com>

Frank Warmerdam wrote:
> 
> [...] Also, the OLE DB provider isn't really a core component of
> GDAL/OGR (just a layered add on) and it isn't widely used.  So I'm 
> proposing
> to just move it out of the GDAL trunk, perhaps into the "/spike" area of
> subversion.
> 
> I've documented this issue in:
> 
>   http://trac.osgeo.org/gdal/ticket/1817
> 
> This email is soliciting feedback on the issue - primarily to see if there
> are any objections to my taking this step.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From john.cole at uai.com  Wed Sep 12 09:32:38 2007
From: john.cole at uai.com (John Cole)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
Message-ID: <76758090F8686C47A44B6FF52514A1D307909E71@hermes.uai.int>

-1

As someone who is using an OGR VRT->ODBC->SQL Server and not knowing an
OLEDB driver existed, I'd like to explore this thing and see if the
performance is better than my current solution (which when compared to
PostGIS, is sub-optimal but ok when compared to SDE).  Is there any
documentation available for this?

Also, I'm looking forward to the release of SQL Server 2008 with its spatial
extensions, and I would think that having an OLEDB driver would help speed
GDAL/OGR support for this backend.

Thanks,

John

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, September 11, 2007 8:21 PM
To: gdal-dev
Subject: [Gdal-dev] OGR OLEDB Provider

Folks,

I am trying to go through the issues identified in the GDAL PROVENANCE.TXT
for the OSGeo Incubation with the aim of resolving them all for the GDAL/OGR
1.5.0 release.  Those that I can't resolve directly as I go, I am filing in
Trac with a "License" category.  One sticky one is some code in the OLE DB
provider.

While the problems might be resolvable by getting clear release statements
from the owners of the code from which parts were derived, I think it could
be tricky.  Also, the OLE DB provider isn't really a core component of
GDAL/OGR (just a layered add on) and it isn't widely used.  So I'm proposing
to just move it out of the GDAL trunk, perhaps into the "/spike" area of
subversion.

I've documented this issue in:

   http://trac.osgeo.org/gdal/ticket/1817

This email is soliciting feedback on the issue - primarily to see if there
are any objections to my taking this step.

The OLE DB provider would continue to be available, but it would not be
part of the standard GDAL distribution.  It would also likely get less
love and attention than it does now (which isn't really very much).

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

No virus found in this incoming message.
Checked by AVG Free Edition. 
Version: 7.5.485 / Virus Database: 269.13.14/999 - Release Date: 9/10/2007
5:43 PM
 

No virus found in this outgoing message.
Checked by AVG Free Edition. 
Version: 7.5.485 / Virus Database: 269.13.14/999 - Release Date: 9/10/2007
5:43 PM
 
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.

From warmerdam at pobox.com  Wed Sep 12 09:45:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Change indicated colour maps into gray gradient
In-Reply-To: <12629889.post@talk.nabble.com>
References: <12629889.post@talk.nabble.com>
Message-ID: <46E7ED6A.80609@pobox.com>

shortyII wrote:
> Hi,
> 
> Is it possible to use GDAL to change a GeoTIFF from
> indicated colour to a gray gradient?
> 
> I've looked at doc and e-mail archives for several hours but I haven't
> found anything yet - hoping someone can spend 30 seconds on the answer!

Shorty II,

The easiest way to accomplish this is to translate to a format that does
not support palettes, and then back to GeoTIFF.

eg.
gdal_translate your.tif -of FIT your.fit
gdal_translate your.fit your.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Wed Sep 12 09:48:22 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Standard LICENSE / credit requirement reporting
In-Reply-To: <46E74392.5020702@pobox.com>
References: <46E74392.5020702@pobox.com>
Message-ID: <46E7EE26.1030008@mapgears.com>

+1. Maybe no need for a RFC, but at least a ticket with this info would 
be good.

Daniel


Frank Warmerdam wrote:
> Folks,
> 
> Also in the Provenance review effort, some licenses include clauses like:
> 
> """
> *       Redistributions in binary form must reproduce the above
> copyright notice, this list of conditions and the following disclaimer
> in the documentation and/or other materials provided with the
> distribution.
> """
> 
> which is sometimes referred to as a "credit requirement".  Even the GDAL
> license contains the text:
> 
> """
> The above copyright notice and this permission notice shall be included
> in all copies or substantial portions of the Software.
> """
> 
> which has been read by some lawyers to imply the need to include the 
> license
> text in binary distributions of the software package.
> 
> In order to simplify reporting requirements for applications using GDAL and
> for gdal utilities themselves, I propose to:
> 
>  - add a LICENSE.TXT in the gdal source directly listing all licenses
>    and credit notices.
>  - install this file GDAL data files (/usr/local/share/gdal for instance)
>  - extend GDALVersionInfo("LICENSE") to report this file to stdout.
>  - add --license commandline switch to gdal and ogr standard commandline
>    processing to report this file.
> 
> In the future when we add code directly to GDAL with credit requirements
> (or possibly when we depend on it as an optional library) we would add the
> appropriate text in the gdal/LICENSE.TXT file.
> 
> Any thoughts on the appropriateness of this?  Do we need an RFC for this?
> It seems somewhat like overkill to me.
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Wed Sep 12 09:53:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <76758090F8686C47A44B6FF52514A1D307909E71@hermes.uai.int>
References: <76758090F8686C47A44B6FF52514A1D307909E71@hermes.uai.int>
Message-ID: <46E7EF42.5050700@pobox.com>

John Cole wrote:
> -1
> 
> As someone who is using an OGR VRT->ODBC->SQL Server and not knowing an
> OLEDB driver existed, I'd like to explore this thing and see if the
> performance is better than my current solution (which when compared to
> PostGIS, is sub-optimal but ok when compared to SDE).  Is there any
> documentation available for this?
> 
> Also, I'm looking forward to the release of SQL Server 2008 with its spatial
> extensions, and I would think that having an OLEDB driver would help speed
> GDAL/OGR support for this backend.

John,

The only docs on it I see just now is this at the end of the OGR page:

"""
OGR and OpenGIS Simple Features for OLE DB

With the support of SoftMap and Safe Software an OLE DB provider on top of OGR 
has been implemented, attempting to adhere to the OpenGIS Simple Features for 
COM specification to the extent possible. This implementation is not certified 
as compliant with the OpenGIS specification.

While OGR can be used via the OLE DB interface, it can also just be called 
directly as a C++ library. OGR attempts to provide an OpenGIS Simple Features 
inspired terminology and view of datasets even when used in this fashion. Note 
that there is no OpenGIS specification for a C or C++ interface.
"""

I'm sure I had a further writeup at one time, but I'm not sure where it
might be.  The code is found in gdal/ogr/sfcom_oledb.

But I think there is some confusion about the purpose of the OLE DB provider.
The OLE DB provider provides an OLE DB interface for applications wishing to
access OGR feature data.  It does *not* provide a mechanism for OGR to read
features from OLE DB enabled databases.   So I don't think it will help with
your particular situation.

I *think* FWTools for windows includes a build of the oledb provider.  If you
would like to pursue use of the provider I'd suggest contacting me privately
and I'll try to provide a few details.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From j.obi at troja.net  Wed Sep 12 11:11:15 2007
From: j.obi at troja.net (Jens Oberender)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Status Report KML Driver
In-Reply-To: <bc75359f0709120455s68afff43ydac97689321f3c49@mail.gmail.com>
References: <bc75359f0709120455s68afff43ydac97689321f3c49@mail.gmail.com>
Message-ID: <200709121711.20147.j.obi@troja.net>

Hi Christopher

> is this project still in progress and whats the actual status?
> I'm curious to see the development since the 20th August 2007 because
> otherwise I'll need to implement KML support myself.

Mateusz added the KML read part to SVN.
Changes from last report:
- exporting LineString and Polygon works now
- exporting more tags as fields - description also exported
- get the layer extend works now

Not yet implemented:
- export with filters
- special case handling (GeometryCollections)

My next task are the GeometryCollections.

Please have a look at svn and give it a try.

Bye
	Jens
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 189 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070912/8c67e1e3/attachment.bin
From maplabs at light42.com  Wed Sep 12 11:11:36 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] ogr / geos scripting question
Message-ID: <74604549-6142-11DC-A0F4-000A277A733C@light42.com>

I'd like to write a script to add a few points to a datasource, then 
make some simple geos calculations on it.
  (I'm completely new to this)

below is what I came up with at a first look ( to simply create the 
Data).

After creating the Data, I'd like to make a geos calculation, like 
minimum radius for example.

thanks in advance
   -Brian / darkblueB


##
get OGR driver count
    iterate through drivers, looking for the desired named driver

datasource = driver->CreateDataSource( dir )
layer = datasource->CreateLayer( "layerOne" )

g = OGR CreateGeometryFromWKT( "Point( 10 100)" )

##???

layer->SyncToDisk
##------------------------------------
I am a little lost about the need for features, or how to append my new
OGRGeometryShadow to the layer.


From rsignell at usgs.gov  Wed Sep 12 12:17:48 2007
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fixing projections with GDAL_TRANSLATE vs. GDALWARP
Message-ID: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>

GDAL-folk,

I'm hoping that someone will see in 2 minutes what I've spend 2 hours
trying to figure out.

I was given a  GeoTIFF image but the parameters specified for the
projection are obviously wrong, as the latitudes displayed by
"gdalinfo" are about 33 degrees, but should be approximately 43
degrees.

The creator of the image told me the correct projection parameters,
and he wanted a geographic image, so I tried two ways of converting
them:

If I fix the projection and convert to EPSG:4326 in 1 step, using
"gdalwarp", my image "geo1.tif" is correctly geolocated:

$ gdalwarp -s_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667
+datum=nad83" -t_srs EPSG:4326 mb_backpc30m.tif geo1.tif

If I fix the projection and convert to EPSG:4326 in 2 steps, using
"gdal_translate" and then "gdalwarp" my image "geo2.tif" is not
correctly geolocated.

$ gdal_translate -a_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667
+datum=nad83" mb_backpc30m.tif merc.tif
$ gdalwarp -t_srs EPSG:4326 merc.tif geo2.tif

I don't understand why these two operations don't give the same result.

If some kind soul is willing to take a look, the original image is at:

http://stellwagen.er.usgs.gov/rps/share/mb_backpc30m.tif  (~6 mb)

-Rich

-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From warmerdam at pobox.com  Wed Sep 12 12:59:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fixing projections with GDAL_TRANSLATE vs. GDALWARP
In-Reply-To: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>
References: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>
Message-ID: <46E81ADB.8000002@pobox.com>

Rich Signell wrote:
> GDAL-folk,
> 
> I'm hoping that someone will see in 2 minutes what I've spend 2 hours
> trying to figure out.
> 
> I was given a  GeoTIFF image but the parameters specified for the
> projection are obviously wrong, as the latitudes displayed by
> "gdalinfo" are about 33 degrees, but should be approximately 43
> degrees.
> 
> The creator of the image told me the correct projection parameters,
> and he wanted a geographic image, so I tried two ways of converting
> them:
> 
> If I fix the projection and convert to EPSG:4326 in 1 step, using
> "gdalwarp", my image "geo1.tif" is correctly geolocated:
> 
> $ gdalwarp -s_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667
> +datum=nad83" -t_srs EPSG:4326 mb_backpc30m.tif geo1.tif
> 
> If I fix the projection and convert to EPSG:4326 in 2 steps, using
> "gdal_translate" and then "gdalwarp" my image "geo2.tif" is not
> correctly geolocated.
> 
> $ gdal_translate -a_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667
> +datum=nad83" mb_backpc30m.tif merc.tif
> $ gdalwarp -t_srs EPSG:4326 merc.tif geo2.tif
> 
> I don't understand why these two operations don't give the same result.
> 
> If some kind soul is willing to take a look, the original image is at:
> 
> http://stellwagen.er.usgs.gov/rps/share/mb_backpc30m.tif  (~6 mb)

Rich,

I believe the problem is that GDAL and/or libgeotiff is confused
about the correct representation of Mercator 1SP in GeoTIFF format.
I think this is related to the Mercator 1SP issue Allan Meek raised
recently:

   http://trac.osgeo.org/gdal/ticket/1797

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sophia.parafina at ionicenterprise.com  Wed Sep 12 13:51:05 2007
From: sophia.parafina at ionicenterprise.com (Sophia Parafina)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] problem compiling png in  daily build
Message-ID: <46E82709.4000203@ionicenterprise.com>

Hi,

I'm trying to compile the gdal-svn-trunk-2007.09.12.tar.gz and I get 
these errors while compiling:

gcc -c -DPNG_NO_GLOBAL_ARRAYS -Ilibpng -I../zlib 
-I/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/port 
-I/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/gcore 
-I/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/alg 
-I/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/ogr 
-I/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/ogr/ogrsf_frmts 
-I/home/sparafina/gdal-scripts/unix/install/include 
-I/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/port  
-Wall -Wdeclaration-after-statement -fPIC -O2   libpng/pnggccrd.c -o 
../o/pnggccrd.o
/tmp/ccNcUQGx.s: Assembler messages:
/tmp/ccNcUQGx.s:113: Error: suffix or operands invalid for `push'
/tmp/ccNcUQGx.s:114: Error: suffix or operands invalid for `push'
/tmp/ccNcUQGx.s:115: Error: suffix or operands invalid for `push'
/tmp/ccNcUQGx.s:116: Error: suffix or operands invalid for `pushf'
/tmp/ccNcUQGx.s:117: Error: suffix or operands invalid for `pop'
/tmp/ccNcUQGx.s:120: Error: suffix or operands invalid for `push'
/tmp/ccNcUQGx.s:121: Error: suffix or operands invalid for `popf'
/tmp/ccNcUQGx.s:122: Error: suffix or operands invalid for `pushf'
/tmp/ccNcUQGx.s:123: Error: suffix or operands invalid for `pop'
/tmp/ccNcUQGx.s:124: Error: suffix or operands invalid for `push'
/tmp/ccNcUQGx.s:125: Error: suffix or operands invalid for `popf'
/tmp/ccNcUQGx.s:143: Error: suffix or operands invalid for `pop'
/tmp/ccNcUQGx.s:144: Error: suffix or operands invalid for `pop'
/tmp/ccNcUQGx.s:145: Error: suffix or operands invalid for `pop'
make[3]: *** [../o/pnggccrd.o] Error 1

This seems to be a problem with 64bit gcc on AMD64.  Here is my compiler 
info:

Reading specs from /usr/lib/gcc/x86_64-redhat-linux/3.4.6/specs
Configured with: ../configure --prefix=/usr --mandir=/usr/share/man 
--infodir=/usr/share/info --enable-shared --enable-threads=posix 
--disable-checking --with-system-zlib --enable-__cxa_atexit 
--disable-libunwind-exceptions --enable-java-awt=gtk 
--host=x86_64-redhat-linux
Thread model: posix
gcc version 3.4.6 20060404 (Red Hat 3.4.6-3)

I tried to get around the problem by adding -DPNG_NO_ASSEMBER_CODE to 
the CPPFLAGS in the png make file, but I get this error:

        
-L/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12 
-lgdal -I/home/sparafina/gdal-scripts/unix/install/include      -lz  -lm 
-lrt -ldl  -L/home/sparafina/gdal-scripts/unix/install/lib  -L/usr/lib64 
-lcurl -L/usr/kerberos/lib -L/usr/kerberos/lib64 -lssl -lcrypto 
-lgssapi_krb5 -lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz 
-lgssapi_krb5 -lkrb5 -lk5crypto -lcom_err -lresolv -L/usr/kerberos/lib 
-L/usr/kerberos/lib64 -lidn -lssl -lcrypto -lssl -lcrypto -lgssapi_krb5 
-lkrb5 -lcom_err -lk5crypto -lresolv -ldl -lz -lz  -o gdalinfo
/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
undefined reference to `DGN2IEEEDouble(void*)'
/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
undefined reference to `AVCBinReadClose'
/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
undefined reference to `AVCBinReadOpen'
/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
undefined reference to `AVCBinReadNextTableRec'
/home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
undefined reference to `png_mmx_support'
collect2: ld returned 1 exit status
make[2]: *** [gdalinfo] Error 1


I've compiled 1.4.2 without problems on the same box, so is there 
something different in the daily build?

ophia

From szekerest at gmail.com  Wed Sep 12 13:55:32 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Standard LICENSE / credit requirement reporting
In-Reply-To: <46E74392.5020702@pobox.com>
References: <46E74392.5020702@pobox.com>
Message-ID: <f3b73b7d0709121055h17b0289aucea370f4fdb58219@mail.gmail.com>

That's agreed

+1

Best regards,

Tamas



2007/9/12, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> Also in the Provenance review effort, some licenses include clauses like:
>
> """
> *       Redistributions in binary form must reproduce the above
> copyright notice, this list of conditions and the following disclaimer
> in the documentation and/or other materials provided with the
> distribution.
> """
>
> which is sometimes referred to as a "credit requirement".  Even the GDAL
> license contains the text:
>
> """
> The above copyright notice and this permission notice shall be included
> in all copies or substantial portions of the Software.
> """
>
> which has been read by some lawyers to imply the need to include the license
> text in binary distributions of the software package.
>
> In order to simplify reporting requirements for applications using GDAL and
> for gdal utilities themselves, I propose to:
>
>   - add a LICENSE.TXT in the gdal source directly listing all licenses
>     and credit notices.
>   - install this file GDAL data files (/usr/local/share/gdal for instance)
>   - extend GDALVersionInfo("LICENSE") to report this file to stdout.
>   - add --license commandline switch to gdal and ogr standard commandline
>     processing to report this file.
>
> In the future when we add code directly to GDAL with credit requirements
> (or possibly when we depend on it as an optional library) we would add the
> appropriate text in the gdal/LICENSE.TXT file.
>
> Any thoughts on the appropriateness of this?  Do we need an RFC for this?
> It seems somewhat like overkill to me.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From even.rouault at mines-paris.org  Wed Sep 12 13:55:48 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Standard LICENSE / credit requirement reporting
In-Reply-To: <46E74392.5020702@pobox.com>
References: <46E74392.5020702@pobox.com>
Message-ID: <200709121955.48800.even.rouault@mines-paris.org>

+1.

GDALVersionInfo("LICENSE") is a good idea !

On Wednesday 12 September 2007 03:40:34 Frank Warmerdam wrote:
> Folks,
>
> Also in the Provenance review effort, some licenses include clauses like:
>
> """
> *       Redistributions in binary form must reproduce the above
> copyright notice, this list of conditions and the following disclaimer
> in the documentation and/or other materials provided with the
> distribution.
> """
>
> which is sometimes referred to as a "credit requirement".  Even the GDAL
> license contains the text:
>
> """
> The above copyright notice and this permission notice shall be included
> in all copies or substantial portions of the Software.
> """
>
> which has been read by some lawyers to imply the need to include the
> license text in binary distributions of the software package.
>
> In order to simplify reporting requirements for applications using GDAL and
> for gdal utilities themselves, I propose to:
>
>   - add a LICENSE.TXT in the gdal source directly listing all licenses
>     and credit notices.
>   - install this file GDAL data files (/usr/local/share/gdal for instance)
>   - extend GDALVersionInfo("LICENSE") to report this file to stdout.
>   - add --license commandline switch to gdal and ogr standard commandline
>     processing to report this file.
>
> In the future when we add code directly to GDAL with credit requirements
> (or possibly when we depend on it as an optional library) we would add the
> appropriate text in the gdal/LICENSE.TXT file.
>
> Any thoughts on the appropriateness of this?  Do we need an RFC for this?
> It seems somewhat like overkill to me.
>
> Best regards,



From szekerest at gmail.com  Wed Sep 12 14:08:25 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <46E73EEA.3050307@pobox.com>
References: <46E73EEA.3050307@pobox.com>
Message-ID: <f3b73b7d0709121108q304aa8b3n4f065f7af1672d27@mail.gmail.com>

Frank,

Although I didn't play much with this implementation I would
discourage to omit that officially without any compelling reasons. I
thinks the (native) OLEDB interface has a faily large audience
comparing with the ODBC interface from the aspect of the MS SQL server
for years. I can guess it provides a performance impact as well, so I
think we should do some examination before taking this step.

Best regards,

Tamas




2007/9/12, Frank Warmerdam <warmerdam@pobox.com>:
> Folks,
>
> I am trying to go through the issues identified in the GDAL PROVENANCE.TXT
> for the OSGeo Incubation with the aim of resolving them all for the GDAL/OGR
> 1.5.0 release.  Those that I can't resolve directly as I go, I am filing in
> Trac with a "License" category.  One sticky one is some code in the OLE DB
> provider.
>
> While the problems might be resolvable by getting clear release statements
> from the owners of the code from which parts were derived, I think it could
> be tricky.  Also, the OLE DB provider isn't really a core component of
> GDAL/OGR (just a layered add on) and it isn't widely used.  So I'm proposing
> to just move it out of the GDAL trunk, perhaps into the "/spike" area of
> subversion.
>
> I've documented this issue in:
>
>    http://trac.osgeo.org/gdal/ticket/1817
>
> This email is soliciting feedback on the issue - primarily to see if there
> are any objections to my taking this step.
>
> The OLE DB provider would continue to be available, but it would not be
> part of the standard GDAL distribution.  It would also likely get less
> love and attention than it does now (which isn't really very much).
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Wed Sep 12 14:38:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <f3b73b7d0709121108q304aa8b3n4f065f7af1672d27@mail.gmail.com>
References: <46E73EEA.3050307@pobox.com>
	<f3b73b7d0709121108q304aa8b3n4f065f7af1672d27@mail.gmail.com>
Message-ID: <46E83234.2050902@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> Although I didn't play much with this implementation I would
> discourage to omit that officially without any compelling reasons. I
> thinks the (native) OLEDB interface has a faily large audience
> comparing with the ODBC interface from the aspect of the MS SQL server
> for years. I can guess it provides a performance impact as well, so I
> think we should do some examination before taking this step.

Tamas,

I would stress that this is not a replacement for OGR's ability to
access ODBC datasources since it is on "the other side".  That is it
provides an OLE DB interface to OGR.  There is currently no comparible
ODBC interface to OGR.

Would you be willing to address the code provenance concerns with the
OLE DB provider?  If they can be resolved, I'd be fine with keeping
the OLE DB provider in trunk.

   http://trac.osgeo.org/gdal/ticket/1817

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Wed Sep 12 15:01:01 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] ogr / geos scripting question
In-Reply-To: <74604549-6142-11DC-A0F4-000A277A733C@light42.com>
References: <74604549-6142-11DC-A0F4-000A277A733C@light42.com>
Message-ID: <46E8376D.8090702@tkk.fi>

I've done this a lot lately. I work with the Perl bindings, but 
hopefully you get the idea. Here's a typical structure of a program:

use Geo::GDAL; # bring in the capability
$datasource = Geo::OGR::Open('.', 1) or die; # I've got shapefiles in 
the current directory
$o = shift @ARGV; # read the name of the layer from command line
$out = $datasource->CreateLayer($o, undef, $Geo::OGR::wkbMultiPoint); # 
a multipoint layer
$schema = $out->GetLayerDefn(); # an empty schema since I'm interested 
in geometries now

# this is within a loop
# often the loop is from reading from another layer, for example:
# $input->ResetReading();
# while ($feature = $feature->GetNextFeature()) {

    $g = Geo::OGR::Geometry->new($Geo::OGR::wkbMultiPoint); # new geometry

    # a sub loop
      $p = Geo::OGR::Geometry->new($Geo::OGR::wkbPoint); # new point
      $p->SetPoint(0, $x, $y); # put the coords to the point
      $g->AddGeometry($p); # put the point to the multipoint

    $f = new Geo::OGR::Feature($schema); # new feature
    $f->SetGeometry($g); # put the geometry to the feature
    $out->CreateFeature($f); # put the feature to the layer

# out of the loop and finish:
$out->SyncToDisk;

Brian Hamlin kirjoitti:
> I'd like to write a script to add a few points to a datasource, then 
> make some simple geos calculations on it.
>  (I'm completely new to this)
>
> below is what I came up with at a first look ( to simply create the 
> Data).
>
> After creating the Data, I'd like to make a geos calculation, like 
> minimum radius for example.
>
> thanks in advance
>   -Brian / darkblueB
>
>
> ##
> get OGR driver count
>    iterate through drivers, looking for the desired named driver
>
> datasource = driver->CreateDataSource( dir )
> layer = datasource->CreateLayer( "layerOne" )
>
> g = OGR CreateGeometryFromWKT( "Point( 10 100)" )
>
> ##???
>
> layer->SyncToDisk
> ##------------------------------------
> I am a little lost about the need for features, or how to append my new
> OGRGeometryShadow to the layer.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From warmerdam at pobox.com  Wed Sep 12 15:54:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] problem compiling png in  daily build
In-Reply-To: <46E82709.4000203@ionicenterprise.com>
References: <46E82709.4000203@ionicenterprise.com>
Message-ID: <46E843EB.40607@pobox.com>

Sophia Parafina wrote:
> I tried to get around the problem by adding -DPNG_NO_ASSEMBER_CODE to 
> the CPPFLAGS in the png make file, but I get this error:

Sophia,

Perhaps you didn't do a clean build after that change?  That change
seems to work for me.  Based on research by Even I have modified
pngconf.h to disable assembly code on non-i386 systems so hopefully
the next nightly snapshot will not have this issue.

> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
> undefined reference to `DGN2IEEEDouble(void*)'
> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
> undefined reference to `AVCBinReadClose'
> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
> undefined reference to `AVCBinReadOpen'
> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
> undefined reference to `AVCBinReadNextTableRec'
> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 

The above are related to --without-ogr I believe.  This configuration
option seems to be broken just now, but there is a ticket filed on the issue.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Sep 12 15:54:51 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <46E83234.2050902@pobox.com>
References: <46E73EEA.3050307@pobox.com>
	<f3b73b7d0709121108q304aa8b3n4f065f7af1672d27@mail.gmail.com>
	<46E83234.2050902@pobox.com>
Message-ID: <f3b73b7d0709121254y10e78934xc689e30d8f83b962@mail.gmail.com>

Frank,

I understand your concerns. So far I didn't realize that this driver
exists in the trunk at all. So it would take me a while to see whether
it's worthy to keep or not from the aspect of the
usability/performance.
However I'm not really aware of the necessary steps from the aspect of
the provenance. If it would require the corresponding code to be
rewritten then it wouldn't be so realistic to keep that in.


Best regards,

Tamas


2007/9/12, Frank Warmerdam <warmerdam@pobox.com>:
> Tamas Szekeres wrote:
> > Frank,
> >
> > Although I didn't play much with this implementation I would
> > discourage to omit that officially without any compelling reasons. I
> > thinks the (native) OLEDB interface has a faily large audience
> > comparing with the ODBC interface from the aspect of the MS SQL server
> > for years. I can guess it provides a performance impact as well, so I
> > think we should do some examination before taking this step.
>
> Tamas,
>
> I would stress that this is not a replacement for OGR's ability to
> access ODBC datasources since it is on "the other side".  That is it
> provides an OLE DB interface to OGR.  There is currently no comparible
> ODBC interface to OGR.
>
> Would you be willing to address the code provenance concerns with the
> OLE DB provider?  If they can be resolved, I'd be fine with keeping
> the OLE DB provider in trunk.
>
>    http://trac.osgeo.org/gdal/ticket/1817
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>

From matt.wilkie at gov.yk.ca  Wed Sep 12 15:58:51 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fixing projections with GDAL_TRANSLATE vs. GDALWARP
In-Reply-To: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>
References: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>
Message-ID: <46E844FB.2080508@gov.yk.ca>

> If I fix the projection and convert to EPSG:4326 in 2 steps, using
> "gdal_translate" and then "gdalwarp" my image "geo2.tif" is not
> correctly geolocated.
> 
> $ gdal_translate -a_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667
> +datum=nad83" mb_backpc30m.tif merc.tif
> $ gdalwarp -t_srs EPSG:4326 merc.tif geo2.tif

Are you using windows? On windows with gdal installed via fwtools 1.07 
and later gdalwarp seems to omit reading the source projection, i.e. you 
must use both -s_srs and -t_srs. When I do that with your source image, 
the results are the same as 1-step-with-gdalwarp result (see attached). 
This bug is filed as http://trac.osgeo.org/gdal/ticket/1471 - gdalwarp 
should keep georeferencing info


                 Result of "1-step-warp" and "2-step-warp with -s_srs"

--- info-geo1.txt       2007-09-12 12:56:45.775811600 -0700
+++ info-geo3.txt       2007-09-12 12:56:46.541451300 -0700
@@ -1,5 +1,5 @@
  Driver: GTiff/GeoTIFF
-Files: geo1.tif
+Files: geo3.tif
  Size is 2780, 2299
  Coordinate System is:
  GEOGCS["WGS 84",

                 Result of "1-step-warp" and "2-step-warp with OUT -s_srs"

--- info-geo1.txt       2007-09-12 12:56:45.775811600 -0700
+++ info-geo2.txt       2007-09-12 12:56:46.650828400 -0700
@@ -1,5 +1,5 @@
  Driver: GTiff/GeoTIFF
-Files: geo1.tif
+Files: geo2.tif
  Size is 2780, 2299
  Coordinate System is:
  GEOGCS["WGS 84",
@@ -10,8 +10,8 @@
      PRIMEM["Greenwich",0],
      UNIT["degree",0.0174532925199433],
      AUTHORITY["EPSG","4326"]]
-Origin = (-70.900180070696592,42.800132605138998)
-Pixel Size = (0.000311788157942,-0.000311788157942)
+Origin = (-70.900180070700841,42.800132604450049)
+Pixel Size = (0.000311788157943,-0.000311788157943)
  Metadata:
    AREA_OR_POINT=Area
  Corner Coordinates:






-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------
-------------- next part --------------
@echo off

:: 1-step-gdalwarp
:: result has correct geo-referincing
gdalwarp -s_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667 +datum=nad83" -t_srs EPSG:4326 mb_backpc30m.tif geo1.tif

:: 2-step gdal_translate + gdalwarp
gdal_translate -a_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667 +datum=nad83" mb_backpc30m.tif merc.tif
gdalwarp -t_srs EPSG:4326 merc.tif geo2.tif

:: 2-step with warp, specifying source proj info
gdalwarp -t_srs EPSG:4326 -s_srs "+proj=merc +lat_ts=41.65 +lon_0=-70.3166667 +datum=nad83" merc.tif geo3.tif

::compare results
gdalinfo geo1.tif > info-geo1.txt
gdalinfo geo2.tif > info-geo2.txt
gdalinfo geo3.tif > info-geo3.txt

echo. 
echo.		Result of "1-step-warp" and "2-step-warp with -s_srs"
echo.
diff -u info-geo1.txt info-geo3.txt

echo. 
echo.		Result of "1-step-warp" and "2-step-warp with OUT -s_srs"
echo.
diff -u info-geo1.txt info-geo2.txt
From warmerdam at pobox.com  Wed Sep 12 17:42:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <f3b73b7d0709121254y10e78934xc689e30d8f83b962@mail.gmail.com>
References: <46E73EEA.3050307@pobox.com>
	<f3b73b7d0709121108q304aa8b3n4f065f7af1672d27@mail.gmail.com>
	<46E83234.2050902@pobox.com>
	<f3b73b7d0709121254y10e78934xc689e30d8f83b962@mail.gmail.com>
Message-ID: <46E85D5F.3030007@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> I understand your concerns. So far I didn't realize that this driver
> exists in the trunk at all. So it would take me a while to see whether
> it's worthy to keep or not from the aspect of the
> usability/performance.
> However I'm not really aware of the necessary steps from the aspect of
> the provenance. If it would require the corresponding code to be
> rewritten then it wouldn't be so realistic to keep that in.

Tamas,

It would require one of:
  o Replacing (ie. rewriting) the code.
  o Getting permission to relicense or at least a clear and compatible
    license declaration from the original copyright holder
  o Or verifying that the original was licensed in a compatible fashion.

It is complicated due to the fact that the original authors are likely
to be hard to track down.  I don't recall who at ESRI I received some
of the code from.  Another chunk is modified ATL OLE DB classes - who do
I talk to - Microsoft?  The third is third part example code.  Presumably
intended to be modified and used but hard to track down and verify now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Sep 12 17:56:42 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] OGR OLEDB Provider
In-Reply-To: <46E85D5F.3030007@pobox.com>
References: <46E73EEA.3050307@pobox.com>	<f3b73b7d0709121108q304aa8b3n4f065f7af1672d27@mail.gmail.com>	<46E83234.2050902@pobox.com>	<f3b73b7d0709121254y10e78934xc689e30d8f83b962@mail.gmail.com>
	<46E85D5F.3030007@pobox.com>
Message-ID: <46E8609A.8070900@loskot.net>

Frank Warmerdam wrote:
> Tamas Szekeres wrote:
>> Frank,
>> 
>> I understand your concerns. So far I didn't realize that this
>> driver exists in the trunk at all. So it would take me a while to
>> see whether it's worthy to keep or not from the aspect of the 
>> usability/performance. However I'm not really aware of the
>> necessary steps from the aspect of the provenance. If it would
>> require the corresponding code to be rewritten then it wouldn't be
>> so realistic to keep that in.
> 
> Tamas,
> 
> It would require one of: o Replacing (ie. rewriting) the code. o
> Getting permission to relicense or at least a clear and compatible 
> license declaration from the original copyright holder o Or verifying
> that the original was licensed in a compatible fashion.
> 
> It is complicated due to the fact that the original authors are
> likely to be hard to track down.  I don't recall who at ESRI I
> received some of the code from.  Another chunk is modified ATL OLE DB
> classes - who do I talk to - Microsoft?  The third is third part
> example code.  Presumably intended to be modified and used but hard
> to track down and verify now.

Regarding the modified ATL stuff, here is what Visual Studio 2005 EULA says:

3. ADDITIONAL LICENSING REQUIREMENTS AND/OR USE RIGHTS

- MFCs, ATLs and CRTs.  You may modify the source code form of Microsoft
Foundation Classes (MFCs), Active Template Libraries (ATLs), and C
runtimes (CRTs) to design, develop and test your programs, and copy and
distribute the object code form of your
modified files under a new name.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From rsignell at usgs.gov  Wed Sep 12 20:10:39 2007
From: rsignell at usgs.gov (Rich Signell)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fixing projections with GDAL_TRANSLATE vs. GDALWARP
In-Reply-To: <46E844FB.2080508@gov.yk.ca>
References: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>
	<46E844FB.2080508@gov.yk.ca>
Message-ID: <61033b870709121710i1874b6c4s723d6933550def0f@mail.gmail.com>

Matt,

> Are you using windows?

I'm having the problem with FWTOOLS 1.3.6 on Windows and FWTOOLS 1.3.4
on Linux.

> On windows with gdal installed via fwtools 1.07 (or later),
> gdalwarp seems to omit reading the source projection, i.e. you
> must use both -s_srs and -t_srs. When I do that with your source image,
> the results are the same as 1-step-with-gdalwarp result (see attached).

To me this is the same as doing the 1 step gdalwarp, because the only
thing the gdal_translate step was supposed to do was specify the
coordinate projection correctly, and now you are overriding that in
2nd gdalwarp step with the -s_srs command.

I think the real problem is that the gdal_translate step did not end
up specifying the coordinate system correctly, so the file "merc.tif"
still is not correct, therefore the gdalwarp command to convert it to
geo doesn't work correctly.

Yet it's odd that the very same specification of coordinate system, if
given to gdal_warp via the -s_crs argument, works correctly.   It's
almost like the -s_crs argument works but -t_crs is not working, or
else the Merc_1 info is being interpreted correctly when specified on
the command linke, but written incorrectly written to or read from a
GeoTIFF file.


> This bug is filed as http://trac.osgeo.org/gdal/ticket/1471 - gdalwarp
> should keep georeferencing info

According to my reasoning, I think this is not a problem of gdalwarp
not keeping the georeferencing info.   It could be a problem of not
being able to correctly read/write merc 1_sp info into the geotiff
correctly.

-Rich

P.S. Should this type of discussion take place here, or in trac ticket comments?
-- 
Dr. Richard P. Signell   (508) 457-2229
USGS, 384 Woods Hole Rd.
Woods Hole, MA 02543-1598

From sophia.parafina at ionicenterprise.com  Thu Sep 13 08:08:25 2007
From: sophia.parafina at ionicenterprise.com (Sophia Parafina)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] problem compiling png in  daily build
In-Reply-To: <46E843EB.40607@pobox.com>
References: <46E82709.4000203@ionicenterprise.com> <46E843EB.40607@pobox.com>
Message-ID: <46E92839.5040104@ionicenterprise.com>

Frank,

That was it.  Thanks.

sophia

Frank Warmerdam wrote:
> Sophia Parafina wrote:
>> I tried to get around the problem by adding -DPNG_NO_ASSEMBER_CODE to 
>> the CPPFLAGS in the png make file, but I get this error:
>
> Sophia,
>
> Perhaps you didn't do a clean build after that change?  That change
> seems to work for me.  Based on research by Even I have modified
> pngconf.h to disable assembly code on non-i386 systems so hopefully
> the next nightly snapshot will not have this issue.
>
>> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
>> undefined reference to `DGN2IEEEDouble(void*)'
>> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
>> undefined reference to `AVCBinReadClose'
>> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
>> undefined reference to `AVCBinReadOpen'
>> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
>> undefined reference to `AVCBinReadNextTableRec'
>> /home/sparafina/gdal-scripts/unix/build/gdal-svn-trunk-2007.09.12/libgdal.so: 
>
>
> The above are related to --without-ogr I believe.  This configuration
> option seems to be broken just now, but there is a ticket filed on the 
> issue.
>
> Best regards,


From warmerdam at pobox.com  Thu Sep 13 11:26:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Standard LICENSE / credit requirement reporting
In-Reply-To: <200709121955.48800.even.rouault@mines-paris.org>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
Message-ID: <46E956AA.3040903@pobox.com>


Folks,

I have implemented and committed the changes.  GDAL should
now install LICENSE.TXT in /usr/local/share/gdal and it should
report it from the utilities if you give the --license switch
as well as from GDALVersionInfo().

I have also taken the liberty of modifying RFC 3 (commiter guidelines)
with this note in the legal section:

* Code with licenses requiring credit, or disclosure to users should be added 
to /trunk/gdal/LICENSE.TXT.

While the practice of updating adopted RFCs is somewhat questionable,
I hope we can consider this a minor editorial change without having
a round of voting, etc.  If there are any concerns let me know.

Best regards,

Even Rouault wrote:
> +1.
> 
> GDALVersionInfo("LICENSE") is a good idea !
> 
> On Wednesday 12 September 2007 03:40:34 Frank Warmerdam wrote:
>> Folks,
>>
>> Also in the Provenance review effort, some licenses include clauses like:
>>
>> """
>> *       Redistributions in binary form must reproduce the above
>> copyright notice, this list of conditions and the following disclaimer
>> in the documentation and/or other materials provided with the
>> distribution.
>> """
>>
>> which is sometimes referred to as a "credit requirement".  Even the GDAL
>> license contains the text:
>>
>> """
>> The above copyright notice and this permission notice shall be included
>> in all copies or substantial portions of the Software.
>> """
>>
>> which has been read by some lawyers to imply the need to include the
>> license text in binary distributions of the software package.
>>
>> In order to simplify reporting requirements for applications using GDAL and
>> for gdal utilities themselves, I propose to:
>>
>>   - add a LICENSE.TXT in the gdal source directly listing all licenses
>>     and credit notices.
>>   - install this file GDAL data files (/usr/local/share/gdal for instance)
>>   - extend GDALVersionInfo("LICENSE") to report this file to stdout.
>>   - add --license commandline switch to gdal and ogr standard commandline
>>     processing to report this file.
>>
>> In the future when we add code directly to GDAL with credit requirements
>> (or possibly when we depend on it as an optional library) we would add the
>> appropriate text in the gdal/LICENSE.TXT file.
>>
>> Any thoughts on the appropriateness of this?  Do we need an RFC for this?
>> It seems somewhat like overkill to me.
>>
>> Best regards,
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Fri Sep 14 10:37:53 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] C bindings for VRT dataset API
Message-ID: <20070914143753.GB542@ak4719.spb.edu>

Folks,

I have implemented an initial support for C callable VRT API. It is
accessible via gdal_vrt.h header which should be globally installed along
with other GDAL headers. My addition should not break anything, but you
will need gdal_vrt.h along with vrtdataset.h from now on if you are using
VRT API. There are just a few calls exposed into C world, but I am
planning to extend this in the future to be the full C++ API counterpart.

Personally I found VRT classes quite handy and useful, so I developed
this wrapper to use in PostgreSQL stored procedures.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From Solomon_Gibbs at sra.com  Fri Sep 14 11:14:41 2007
From: Solomon_Gibbs at sra.com (Gibbs, Solomon)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Any prior work integrating GDAL with ImageIO?
Message-ID: <BC953654349FDE4A9CEFE5879F268A12018DC1E5@dayex.sra.com>

Hello,
 
I asked this list earlier about the current status of the GDAL Java
bindings. Some related web searches turned up a number of posts
(including some SoC discussion) from people interested in wrapping GDAL
as a driver for the Java Advanced Imaging (JAI) ImageIO library.
 
Has anyone seen any actual design work (articles, papers, issue
identification, etc.) on this subject? I don't have a great
understanding of the ImageIO internals, but I expect that there's at
least some paradigm mismatches that will have to be worked around.
 
Thanks in advance,
 
- Solomon


From ari.jolma at tkk.fi  Fri Sep 14 12:21:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] ogr / geos scripting question
In-Reply-To: <2CD17544-6253-11DC-A0F4-000A277A733C@light42.com>
References: <74604549-6142-11DC-A0F4-000A277A733C@light42.com>
	<46E8376D.8090702@tkk.fi>
	<2CD17544-6253-11DC-A0F4-000A277A733C@light42.com>
Message-ID: <46EAB4F5.7040103@tkk.fi>

Brian Hamlin kirjoitti:
> actually, the convexHull can be a linestring in a special case, but is 
> more likely
> type 3, Polygon..  (I printed the WKT form..)
>
> I now see that you can getNumPoints(), and getPoint( index ) in C++ 
> from a LineString
> but, Polygon does not have this?

http://map.hut.fi/doc/Geo-GDAL/html/annotated.html or if that does not 
give good enough answer then I surf to 
http://www.gdal.org/ogr/annotated.html

Polygon is functionally a collection, the outer ring is the first 
geometry in it and the rest, if there are such, are inner rings (holes), 
to loop through a collection use:

if ($geom->GetGeometryCount) {
    for (0..$geom->GetGeometryCount-1) {
   }
}

To look at the vertices use (only if GeometryCount is zero):

for my $i (0..$geom->GetPointCount-1) {
        my $x = $geom->GetX($i);
        my $y = $geom->GetY($i);
        my $z = $geom->GetZ($i);
}

Ari

>
> thanks for your patience, starting out is the hardest
> best regards
>   -Brian
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From hfpmartins at gmail.com  Fri Sep 14 13:31:15 2007
From: hfpmartins at gmail.com (Hugo Martins)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Problems with warping
Message-ID: <f647f0570709141031naa49ff3m50fd8f4515cf9f90@mail.gmail.com>

Hi gdal folks,

Well i have been experiencing some problems with gdalwarp. I downloaded some
imagery in jpg format. After i converted it to tif and no problem happened.
These images are in Lisboa Hayford Gauss IgeoE projection and i need to
reproject them to WGS84. Here are the gdalinfo from both files:

- before warping:

Driver: GTiff/GeoTIFF
Files: 41.tif
       41.aux
Size is 640, 480
Coordinate System is:
PROJCS["Lisboa_Hayford_Gauss_IGeoE",
    GEOGCS["GCS_Datum_Lisboa_Hayford",
        DATUM["unknown",
            SPHEROID["unnamed",6378388,297.0000000000014]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",39.66666666666666],
    PARAMETER["central_meridian",-8.131906111111112],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",200000],
    PARAMETER["false_northing",300000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (173002.500000000000000,282780.500000000000000)
Pixel Size = (1.000000000000000,-1.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  173002.500,  282780.500) (  8d26'44.94"W, 39d30'40.15"N)
Lower Left  (  173002.500,  282300.500) (  8d26'44.87"W, 39d30'24.59"N)
Upper Right (  173642.500,  282780.500) (  8d26'18.15"W, 39d30'40.23"N)
Lower Right (  173642.500,  282300.500) (  8d26'18.08"W, 39d30'24.66"N)
Center      (  173322.500,  282540.500) (  8d26'31.51"W, 39d30'32.41"N)
Band 1 Block=640x12 Type=Byte, ColorInterp=Red
Band 2 Block=640x12 Type=Byte, ColorInterp=Green
Band 3 Block=640x12 Type=Byte, ColorInterp=Blue


- after warping

Driver: GTiff/GeoTIFF
Files: 42.tif
       42.aux
Size is 693, 403
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-8.445817277772575,39.510366486891535)
Pixel Size = (0.000010765710851,-0.000010765710851)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  -8.4458173,  39.5103665) (  8d26'44.94"W, 39d30'37.32"N)
Lower Left  (  -8.4458173,  39.5060279) (  8d26'44.94"W, 39d30'21.70"N)
Upper Right (  -8.4383566,  39.5103665) (  8d26'18.08"W, 39d30'37.32"N)
Lower Right (  -8.4383566,  39.5060279) (  8d26'18.08"W, 39d30'21.70"N)
Center      (  -8.4420870,  39.5081972) (  8d26'31.51"W, 39d30'29.51"N)
Band 1 Block=693x11 Type=Byte, ColorInterp=Red
Band 2 Block=693x11 Type=Byte, ColorInterp=Green
Band 3 Block=693x11 Type=Byte, ColorInterp=Blue

As you see, there is some shift with the WGS84 projection.
Could somebody help me on this?
Thanks,

Hugo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070914/a3330a21/attachment.html
From potts at cfl.rr.com  Fri Sep 14 14:03:08 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <46E956AA.3040903@pobox.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
Message-ID: <8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>

Hello Frank and others:

I have been looking through the headers on BigTiff and was looking at  
the bit size for the number of directories.  Looks like the directory  
count can only support 16bit word which puts it at a limitation of   
65536 total.  Is this correct?


Take care

Garrett


From warmerdam at pobox.com  Fri Sep 14 14:28:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Problems with warping
In-Reply-To: <f647f0570709141031naa49ff3m50fd8f4515cf9f90@mail.gmail.com>
References: <f647f0570709141031naa49ff3m50fd8f4515cf9f90@mail.gmail.com>
Message-ID: <46EAD2CB.30401@pobox.com>

Hugo Martins wrote:
> Hi gdal folks,
> 
> Well i have been experiencing some problems with gdalwarp. I downloaded 
> some imagery in jpg format. After i converted it to tif and no problem 
> happened. These images are in Lisboa Hayford Gauss IgeoE projection and 
> i need to reproject them to WGS84. Here are the gdalinfo from both files:
...
> As you see, there is some shift with the WGS84 projection.
> Could somebody help me on this?

Hugo,

I'm not clear on what exact problem you are seeing.  The lat/long bounds
of the original file and the gdalwarp file will be somewhat different since
the output file has been reprojected.  Generally speaking I would expect the
output file to represent a slightly larger area and if you look at the image
that there would be black triangles at the corners as a result of the
rotational effect of reprojection.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Sep 14 16:34:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Motion: To remove sfcom_oledb to /spike
Message-ID: <46EAF03B.5030101@pobox.com>


Motion: To move gdal/ogr/sfcom_oledb and and the OLEDB client files in
gdal/ogr (sfc*.cpp/h, etc) into an ole_db area on /spike.

Rationale:
1) The sfcom_oledb tree contains several licensing issues detailed in
ticket http://trac.osgeo.org/gdal/ticket/1817
2) The sfcom_oledb and related client components (sfc*) are not well
documented, supported, nor are they significantly used (possibly not at all).
3) The components are really layered components on top of OGR and need not
be built with GDAL/OGR.

The downside is that in /spike they are likely to be even more neglected,
and won't be "rev'ed" when we release and branch GDAL/OGR.

I decided to make this a formal motion since there was some concern when I
raised the topic originally.  Moving to /spike is intended to mark the code
as unsupported and non-vetted (from a licensing point of view) while keeping
it under source control, and available for use by anyone requiring the
functionality.  It could migrate back into the GDAL/OGR tree in the future if
there is sufficient interest and support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Fri Sep 14 16:31:12 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Motion: To remove sfcom_oledb to /spike
In-Reply-To: <46EAF03B.5030101@pobox.com>
References: <46EAF03B.5030101@pobox.com>
Message-ID: <46EAEF90.8010107@mapgears.com>

Frank Warmerdam wrote:
> 
> Motion: To move gdal/ogr/sfcom_oledb and and the OLEDB client files in
> gdal/ogr (sfc*.cpp/h, etc) into an ole_db area on /spike.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From matt.wilkie at gov.yk.ca  Fri Sep 14 18:46:36 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fixing projections with GDAL_TRANSLATE vs. GDALWARP
In-Reply-To: <61033b870709121710i1874b6c4s723d6933550def0f@mail.gmail.com>
References: <61033b870709120917m48b1afe8u49c55faca11e4967@mail.gmail.com>	
	<46E844FB.2080508@gov.yk.ca>
	<61033b870709121710i1874b6c4s723d6933550def0f@mail.gmail.com>
Message-ID: <46EB0F4C.3060809@gov.yk.ca>

Hi Rich,

  > Yet it's odd that the very same specification of coordinate system, if
> given to gdal_warp via the -s_crs argument, works correctly.   It's
> almost like the -s_crs argument works but -t_crs is not working, or
> else the Merc_1 info is being interpreted correctly when specified on
> the command linke, but written incorrectly written to or read from a
> GeoTIFF file.

To my understanding identical *_srs arguments should have identical 
results across  all of the gdal utilities. I tested this with your data 
and without applying a spatial transform and the output is identical to 
gdal_translate using -a_srs, save that some TIFFTAG metadata is stripped.

--- windows .bat ----
@echo off
:: warp vs trans
set inProj="+proj=merc +lat_ts=41.65 +lon_0=-70.3166667 +datum=nad83"

gdalwarp -s_srs %inProj% -t_srs %inProj% mb_backpc30m.tif merc-warp.tif
gdal_translate -a_srs %inProj% mb_backpc30m.tif merc-trans.tif
--------------------


>> This bug is filed as http://trac.osgeo.org/gdal/ticket/1471 - gdalwarp
>> should keep georeferencing info
> 
> According to my reasoning, I think this is not a problem of gdalwarp
> not keeping the georeferencing info.   It could be a problem of not
> being able to correctly read/write merc 1_sp info into the geotiff
> correctly.

Hmm, yes, I guess that might be where the problem lies. I've been up and 
down this so many times I don't know where I am anymore! Time to leave 
it for now. :)


> P.S. Should this type of discussion take place here, or in trac ticket comments?

I don't really know. My inclination is to have discussion on the list 
and distilled results to the ticket. It's the developers who use the 
tickets the most, so I think they would have to weigh in to know which 
is actually the most useful in practice.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From mateusz at loskot.net  Fri Sep 14 18:52:27 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Motion: To remove sfcom_oledb to /spike
In-Reply-To: <46EAF03B.5030101@pobox.com>
References: <46EAF03B.5030101@pobox.com>
Message-ID: <46EB10AB.6060202@loskot.net>

Frank Warmerdam wrote:
> Motion: To move gdal/ogr/sfcom_oledb and and the OLEDB client files
> in gdal/ogr (sfc*.cpp/h, etc) into an ole_db area on /spike.
> [...]
> Moving to /spike is intended to mark the code as unsupported and
> non-vetted (from a licensing point of view) while keeping it under
> source control, and available for use by anyone requiring the 
> functionality.  It could migrate back into the GDAL/OGR tree in the 
> future if there is sufficient interest and support.

+1

I think this is a good idea.
The spike plays a role of a vault of GDAL related codes, worth to keep
maintained, not forgotten and under version control, so looks like a
good place for the oledb provider.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From ari.jolma at tkk.fi  Sat Sep 15 04:07:19 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Trying the python bindings in windows
Message-ID: <46EB92B7.8020505@tkk.fi>

I'm stuck trying to install the python bindings in windows. I've got the 
gdal.dll made in msys and the bindings hint at possibilities with mingw, 
but no luck:

c:\dev\gdal\swig\python>python setup.py build
running build
running build_py
running build_ext
error: Python was built with Visual Studio 2003;
extensions must be built with a compiler than can generate compatible 
binaries.
Visual Studio 2003 was not found on this system. If you have Cygwin 
installed,
you can try compiling with MingW32, by passing "-c mingw32" to setup.py.

c:\dev\gdal\swig\python>python setup.py -c mingw32 build
usage: setup.py [global_opts] cmd1 [cmd1_opts] [cmd2 [cmd2_opts] ...]
   or: setup.py --help [cmd1 cmd2 ...]
   or: setup.py --help-commands
   or: setup.py cmd --help

error: option -c not recognized

What are my options? http://trac.osgeo.org/gdal/wiki/GdalOgrInPython is 
not very helpful.

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From ari.jolma at tkk.fi  Sat Sep 15 05:04:58 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] A feature request: add GEOS Is* functions to C-API
Message-ID: <46EBA03A.3090909@tkk.fi>

IsValid, IsSimple, and IsRing from GEOS could easily be added to the 
C-API ad bindings. In fact, I've done it locally since I need at least 
IsValid. Is there a reason they're not in?

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From dron at ak4719.spb.edu  Sat Sep 15 05:46:33 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Motion: To remove sfcom_oledb to /spike
In-Reply-To: <46EAF03B.5030101@pobox.com>
References: <46EAF03B.5030101@pobox.com>
Message-ID: <20070915094633.GB4705@ak4719.spb.edu>

On Fri, Sep 14, 2007 at 04:34:03PM -0400, Frank Warmerdam wrote:
> Motion: To move gdal/ogr/sfcom_oledb and and the OLEDB client files in
> gdal/ogr (sfc*.cpp/h, etc) into an ole_db area on /spike.

+1

I don't know what this stuff about, but if it has licensing issues it
should better be moved out of main trunk.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Sat Sep 15 05:15:38 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
Message-ID: <20070915091538.GA4705@ak4719.spb.edu>

On Fri, Sep 14, 2007 at 02:03:08PM -0400, Garrett Potts wrote:
> I have been looking through the headers on BigTiff and was looking at
> the bit size for the number of directories.  Looks like the directory
> count can only support 16bit word which puts it at a limitation of
> 65536 total.  Is this correct?

It is not correct. Take a look at TIFFDirEntry structure in tiffiop.h,
it has 64-bit tdir_count field. There is a link to specification:

 http://www.awaresystems.be/imaging/tiff/bigtiff.html

We certainly need large counts for strip/tile indexing, so it is.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From potts at cfl.rr.com  Sat Sep 15 07:34:32 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <20070915091538.GA4705@ak4719.spb.edu>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu>
Message-ID: <0083AFE8-D09A-4EBF-9B6E-B73398789C36@cfl.rr.com>

Hello All:

Looking at the latest cvs head of libtiff I see the exposed API as  
taking a uint16:

extern int TIFFSetDirectory(TIFF*, uint16)

This is good news that internally the bitdepth is higher.  Who should  
I send a message to for a patch, if that's the case?


Take care

Garrett

On Sep 15, 2007, at 5:15 AM, Andrey Kiselev wrote:

> On Fri, Sep 14, 2007 at 02:03:08PM -0400, Garrett Potts wrote:
>> I have been looking through the headers on BigTiff and was looking at
>> the bit size for the number of directories.  Looks like the directory
>> count can only support 16bit word which puts it at a limitation of
>> 65536 total.  Is this correct?
>
> It is not correct. Take a look at TIFFDirEntry structure in tiffiop.h,
> it has 64-bit tdir_count field. There is a link to specification:
>
>  http://www.awaresystems.be/imaging/tiff/bigtiff.html
>
> We certainly need large counts for strip/tile indexing, so it is.
>
> Best regards,
> Andrey
>
> -- 
> Andrey V. Kiselev
> ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From potts at cfl.rr.com  Sat Sep 15 09:00:10 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <0083AFE8-D09A-4EBF-9B6E-B73398789C36@cfl.rr.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu>
	<0083AFE8-D09A-4EBF-9B6E-B73398789C36@cfl.rr.com>
Message-ID: <784C4507-602A-4C93-A11D-D712FAF5645B@cfl.rr.com>

Hello All:

Looks like any of the directory manipulations have uint16.  Looking  
into the code it looks like internally it tif_diroff is being  
manipulated and used.  Seems safe to be able to mod these to be  
equivalent to a tif_diroff type.  Not sure.


Take care

Garrett

On Sep 15, 2007, at 7:34 AM, Garrett Potts wrote:

> Hello All:
>
> Looking at the latest cvs head of libtiff I see the exposed API as  
> taking a uint16:
>
> extern int TIFFSetDirectory(TIFF*, uint16)
>
> This is good news that internally the bitdepth is higher.  Who  
> should I send a message to for a patch, if that's the case?
>
>
> Take care
>
> Garrett
>
> On Sep 15, 2007, at 5:15 AM, Andrey Kiselev wrote:
>
>> On Fri, Sep 14, 2007 at 02:03:08PM -0400, Garrett Potts wrote:
>>> I have been looking through the headers on BigTiff and was  
>>> looking at
>>> the bit size for the number of directories.  Looks like the  
>>> directory
>>> count can only support 16bit word which puts it at a limitation of
>>> 65536 total.  Is this correct?
>>
>> It is not correct. Take a look at TIFFDirEntry structure in  
>> tiffiop.h,
>> it has 64-bit tdir_count field. There is a link to specification:
>>
>>  http://www.awaresystems.be/imaging/tiff/bigtiff.html
>>
>> We certainly need large counts for strip/tile indexing, so it is.
>>
>> Best regards,
>> Andrey
>>
>> -- 
>> Andrey V. Kiselev
>> ICQ# 26871517
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From roger at beardandsandals.co.uk  Sat Sep 15 13:30:24 2007
From: roger at beardandsandals.co.uk (Roger James)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] GDAL and the ECW SDK -  licence and build issues.
Message-ID: <8C218272180A428582320C08DA87B470@pastry>

I am moving my windows application which is uses GDAL (1.4.2) from an
MSVC7.1 to an MSVC8.1 (Visual Studio Express) build environment. I have been
recompiling most of my support libraries including GDAL using VC8.1 to avoid
c runtime version conflicts. This has given me a problem when trying to
rebuild GDAL with ECW support.  I was using a binary version of the ECW_SDK
(3.3) which I downloaded some time ago. This contains the old form of the
ECW EULA (the one that refers to there being three versions of the licence),
this covered the use I wanted to make of it.

 

I tried to link to the static library version of ECW and override the crt
versions it was requesting (a fairly standard thing to do), however I cannot
get this to work. Whatever linker commands I try I seem to end up with
conflicts and unresolved symbols. I then tried to link the ECW library as a
DLL and live with the possibility of run time conflicts; however I still ran
in to issues with symbol conflicts and unresolved symbols.

 

My next step was to rebuild the ECW library from source. This meant I had to
download the latest version from ERMapper (now Leica). Unfortunately this
comes with a new a version of the EULA which forbids any commercial use and
directs you to contact ERMapper to negotiate a licence. This is not
practical for us at this time.

 

Looking at the original licence text it seems to me that it allows source
code redistribution. So my first question is can anyone supply me with or
point me at a copy of the ECW_SDK 3.3 source code with the original licence.

 

My next question is. Has anyone succeeded in making a Visual Studio Express
(VC8.1) version of GDAL using the ECW_SDK in binary or source form under the
old licence terms in a way that is legal.

 

I am also interested in any comments on what this new licensing stance means
for the future of ECW support in GDAL. I can see there has been debate in
the past on ECW licensing on the list, but the situation appears to have
changed.

 

For information I am only interested in using the sdk for decompression.

 

Roger

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070915/31871b50/attachment.html
From warmerdam at pobox.com  Sun Sep 16 00:12:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <20070915091538.GA4705@ak4719.spb.edu>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu>
Message-ID: <46ECAD2F.7030900@pobox.com>

Andrey Kiselev wrote:
> On Fri, Sep 14, 2007 at 02:03:08PM -0400, Garrett Potts wrote:
>> I have been looking through the headers on BigTiff and was looking at
>> the bit size for the number of directories.  Looks like the directory
>> count can only support 16bit word which puts it at a limitation of
>> 65536 total.  Is this correct?
> 
> It is not correct. Take a look at TIFFDirEntry structure in tiffiop.h,
> it has 64-bit tdir_count field. There is a link to specification:
> 
>  http://www.awaresystems.be/imaging/tiff/bigtiff.html
> 
> We certainly need large counts for strip/tile indexing, so it is.

Andrey,

Note that Garrett is talking about the number of directories, not the
count of values in a tag which is what tdir_count is.

I believe the directory index is a uint16 in the libtiff api
(TIFFSetDirectory(), etc), but the file format just uses a chain
of directions and has no explicit list on the number of directories,
nor use of directory numbers or ids.

I still can't fathom why anyone would want more than 64K directories in
a TIFF chain, but if so, I don't see why the libtiff api couldn't be changed
to use at least "int" for this in libtiff4.

In any event, bug reports or patches should be reported via the libtiff
bugzilla and further discussion ought to be on the tiff list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From potts at cfl.rr.com  Sun Sep 16 08:10:15 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <46ECAD2F.7030900@pobox.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu> <46ECAD2F.7030900@pobox.com>
Message-ID: <840AD306-EFDB-425A-93EE-9D23F7BF3A8F@cfl.rr.com>

Hello Frank:

I am just thinking of different Open SPEC ways that already exist  
that we can take Video where each frame is tagged with a geospatial  
component.  So fast random access is not needed but sequential frame  
per frame access could be.  Most examples I am seen probably would  
not exceed 1000 or so frames per day but didn't want a limit to hat  
to exist on down the road.

Think of storing all frames and geospatial taggs ( orientation, frame  
parameters, ... etc) per directory where eac h directgory is a single  
frame. We can then have things like:

flight<data>.tif

to indicate a flight run on a single day.  If we are capturing at  
around 1 per second then this can get large.


Take care

Garrett


>
> I still can't fathom why anyone would want more than 64K  
> directories in
> a TIFF chain, but if so, I don't see why the libtiff api couldn't  
> be changed
> to use at least "int" for this in libtiff4.
>
> In any event, bug reports or patches should be reported via the  
> libtiff
> bugzilla and further discussion ought to be on the tiff list.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From ari.jolma at tkk.fi  Sun Sep 16 10:47:01 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Trying the python bindings in windows
In-Reply-To: <46EC59F2.70705@noaa.gov>
References: <46EB92B7.8020505@tkk.fi> <46EC59F2.70705@noaa.gov>
Message-ID: <46ED41E5.4010605@tkk.fi>

Christopher Barker kirjoitti:
> Ari Jolma wrote:
>> you can try compiling with MingW32, by passing "-c mingw32" to setup.py.
>>
>> c:\dev\gdal\swig\python>python setup.py -c mingw32 build
>
> try --
>
> python setup.py build -c mingw32
>
> You need to give the command (build) before options for that command.

Thanks, then I just copied the files from build\lib.win32-2.5 to 
c:\python25\lib\site-packages and it seems to work.

I'll add these tips to the wiki.

Ari

>
> -Chris
>
>
>
>
>
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From maplabs at light42.com  Sun Sep 16 13:36:39 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] PostGIS and OGR - new try
In-Reply-To: <840AD306-EFDB-425A-93EE-9D23F7BF3A8F@cfl.rr.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu> <46ECAD2F.7030900@pobox.com>
	<840AD306-EFDB-425A-93EE-9D23F7BF3A8F@cfl.rr.com>
Message-ID: <61827AEC-647B-11DC-9C4B-000A277A733C@light42.com>

I am new to PostGIS, and am trying out the dataset that Refractions has 
posted for the FOSS4G Integration showcase. In the main foss database 
there is a table called border.

The spatial_ref_sys for that database calls out a projection "NAD83 / 
BC Albers"...

If I run,    ogr2ogr -f KML t.kml PG:dbname=TheRightName border
a KML file is produced, but the coordinates of the linestring are not 
converted to Google Earth projection. The psatial_ref_sys is not 
'automagically' detected.

ogr2ogr -s_srs NAD83 xxxx
still not usable results ?

ogr2ogr -s_srs NAD83 -t_srs WGS84 xxx
still no good

   Since the output of KML will always be in the projection GE uses, 
should -t_srs be necessary?  Perhaps I am completely missing something 
basic?

thanks in advance
  -Brian /darkblueB


From warmerdam at pobox.com  Sun Sep 16 14:08:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] PostGIS and OGR - new try
In-Reply-To: <61827AEC-647B-11DC-9C4B-000A277A733C@light42.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu> <46ECAD2F.7030900@pobox.com>
	<840AD306-EFDB-425A-93EE-9D23F7BF3A8F@cfl.rr.com>
	<61827AEC-647B-11DC-9C4B-000A277A733C@light42.com>
Message-ID: <46ED7104.9010502@pobox.com>

Brian Hamlin wrote:
> I am new to PostGIS, and am trying out the dataset that Refractions has 
> posted for the FOSS4G Integration showcase. In the main foss database 
> there is a table called border.
> 
> The spatial_ref_sys for that database calls out a projection "NAD83 / BC 
> Albers"...
> 
> If I run,    ogr2ogr -f KML t.kml PG:dbname=TheRightName border
> a KML file is produced, but the coordinates of the linestring are not 
> converted to Google Earth projection. The psatial_ref_sys is not 
> 'automagically' detected.
> 
> ogr2ogr -s_srs NAD83 xxxx
> still not usable results ?
> 
> ogr2ogr -s_srs NAD83 -t_srs WGS84 xxx
> still no good

Brian,

Try:

ogr2ogr -f KML -t_srs WGS84 t.kml PG:dbname=TheRightName border

This should use the source coordinate system from PostGIS and force
reprojection since you have selected a different output coordinate
system.

>   Since the output of KML will always be in the projection GE uses, 
> should -t_srs be necessary?  Perhaps I am completely missing something 
> basic?

It is my opinion that it is inappropriate for drivers themselves to
reproject geometries on the fly.  It is better that it be handled at
the application level (ie. ogr2ogr doing it based on -t_srs)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dron at ak4719.spb.edu  Mon Sep 17 01:44:11 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <46ECAD2F.7030900@pobox.com>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu> <46ECAD2F.7030900@pobox.com>
Message-ID: <20070917054411.GB15027@ak4719.spb.edu>

On Sun, Sep 16, 2007 at 12:12:31AM -0400, Frank Warmerdam wrote:
> >It is not correct. Take a look at TIFFDirEntry structure in tiffiop.h,
> >it has 64-bit tdir_count field. There is a link to specification:
> >
> > http://www.awaresystems.be/imaging/tiff/bigtiff.html
> >
> >We certainly need large counts for strip/tile indexing, so it is.
> 
> Note that Garrett is talking about the number of directories, not the
> count of values in a tag which is what tdir_count is.

Er, right, I have misread it.

> I believe the directory index is a uint16 in the libtiff api
> (TIFFSetDirectory(), etc), but the file format just uses a chain of
> directions and has no explicit list on the number of directories, nor
> use of directory numbers or ids.
> 
> I still can't fathom why anyone would want more than 64K directories
> in a TIFF chain, but if so, I don't see why the libtiff api couldn't
> be changed to use at least "int" for this in libtiff4.

The maximum number of directories is only limited by the maximum
directory offset, so in theory we can have more than 2^32 IFDs in
BigTIFF. So it is better to go with uint64 instead of int.

Also the format does not use dirlist, but libtiff does and this change
should be carefully reviewed.

Garrett, please, create the bug report in libtiff's Bugzilla on this
issue.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From mdsumner at utas.edu.au  Mon Sep 17 05:59:48 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] gdal_translate - ability to specify adfGeoTransform?
In-Reply-To: <200709161601.l8GG1Q6b030018@duke.maptools.org>
References: <200709161601.l8GG1Q6b030018@duke.maptools.org>
Message-ID: <46EE5014.9080207@utas.edu.au>

Hello,

I've often wished I could specify the georeferenced bounds of an input 
file to gdal_translate, so that -projwin could be used even for an 
incompletely georeferenced file.

I'm not sure what "a" stands for in -a_ullr but I imagine a new argument 
such as

*-input_ullr* /ulx uly lrx lry/:
    Override the georeferenced bounds of the input file. This assigns
    georeferenced bounds to the input file, ignoring what would have
    been derived from the source file.


Looking at the source it seems simple enough to implement, but I wonder 
why the option is not already there?  Is there something dangerous about 
this that I am missing?

Cheers, MIke.



From dany.geotools at gmail.com  Mon Sep 17 06:38:08 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Any prior work integrating GDAL with ImageIO?
In-Reply-To: <BC953654349FDE4A9CEFE5879F268A12018DC1E5@dayex.sra.com>
References: <BC953654349FDE4A9CEFE5879F268A12018DC1E5@dayex.sra.com>
Message-ID: <7221db410709170338w45855329n65151127a520e162@mail.gmail.com>

Hi.
During the Google Summer Of Code 2006, I developed a GDAL-ImageIO
framework which provides Image I/O - ImageReader/ImageWriters (note
that writing capabilities are not 100% production ready but readers
are pretty robust)  leveraging on GDAL's Java Binding.

The architecture has been deeply improved after the GSOC and now it
has just been accepted by the SUN guys as a sibling project of ImageIO
thererfore we are working in order to do the first public release.

The actual framework already provides support for GeoTIFF (RW), JPEG (R),
ASCII
ArcGrid (R), JPEG2000 (based on KAKADU- RW), MrSID (R), ECW (R), HDF4 (R).
Note that, adding
support for other GDAL formats is an easy task. The framework's user
simply needs to extend the base classes to define a specific
FORMATImageReader/FORMATImageWriter (and additional CreateOptions
support) for the required format he wish to add support for.

Actually, I'm a busy with my Master Thesis, but me, or Simone
Giannecchini (The Imageio-ext project owner as well as my SOC mentor
and CEO of GeoSolutions) will be glad to give you more info. Note that
he's going to be at FOSS4G in case you'd be attending it.



On 9/14/07, Gibbs, Solomon <Solomon_Gibbs@sra.com> wrote:
>
> Hello,
>
> I asked this list earlier about the current status of the GDAL Java
> bindings. Some related web searches turned up a number of posts
> (including some SoC discussion) from people interested in wrapping GDAL
> as a driver for the Java Advanced Imaging (JAI) ImageIO library.
>
> Has anyone seen any actual design work (articles, papers, issue
> identification, etc.) on this subject? I don't have a great
> understanding of the ImageIO internals, but I expect that there's at
> least some paradigm mismatches that will have to be worked around.
>
> Thanks in advance,
>
> - Solomon
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>



-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070917/24930f49/attachment.html
From potts at cfl.rr.com  Mon Sep 17 07:33:47 2007
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] BigTiff and libtiff
In-Reply-To: <20070917054411.GB15027@ak4719.spb.edu>
References: <46E74392.5020702@pobox.com>
	<200709121955.48800.even.rouault@mines-paris.org>
	<46E956AA.3040903@pobox.com>
	<8375AF3C-B711-400C-B4CB-00760A2D59E7@cfl.rr.com>
	<20070915091538.GA4705@ak4719.spb.edu> <46ECAD2F.7030900@pobox.com>
	<20070917054411.GB15027@ak4719.spb.edu>
Message-ID: <60B66AC8-528A-4B86-B2AD-1CCB4AB98180@cfl.rr.com>

Hello:

Just sent the bug report on Bugzilla.

Thank you for the time on this.  Have a good day.


Take care

Garrett

On Sep 17, 2007, at 1:44 AM, Andrey Kiselev wrote:

> On Sun, Sep 16, 2007 at 12:12:31AM -0400, Frank Warmerdam wrote:
>>> It is not correct. Take a look at TIFFDirEntry structure in  
>>> tiffiop.h,
>>> it has 64-bit tdir_count field. There is a link to specification:
>>>
>>> http://www.awaresystems.be/imaging/tiff/bigtiff.html
>>>
>>> We certainly need large counts for strip/tile indexing, so it is.
>>
>> Note that Garrett is talking about the number of directories, not the
>> count of values in a tag which is what tdir_count is.
>
> Er, right, I have misread it.
>
>> I believe the directory index is a uint16 in the libtiff api
>> (TIFFSetDirectory(), etc), but the file format just uses a chain of
>> directions and has no explicit list on the number of directories, nor
>> use of directory numbers or ids.
>>
>> I still can't fathom why anyone would want more than 64K directories
>> in a TIFF chain, but if so, I don't see why the libtiff api couldn't
>> be changed to use at least "int" for this in libtiff4.
>
> The maximum number of directories is only limited by the maximum
> directory offset, so in theory we can have more than 2^32 IFDs in
> BigTIFF. So it is better to go with uint64 instead of int.
>
> Also the format does not use dirlist, but libtiff does and this change
> should be carefully reviewed.
>
> Garrett, please, create the bug report in libtiff's Bugzilla on this
> issue.
>
> Best regards,
> Andrey
>
> -- 
> Andrey V. Kiselev
> ICQ# 26871517
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From jjknoops at netscape.net  Mon Sep 17 09:37:14 2007
From: jjknoops at netscape.net (jjknoops@netscape.net)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fwd: plate carree to latlon projection problem
In-Reply-To: <8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com>
References: <8C9C420A75C6A5B-904-91E@webmail-db11.sysops.aol.com>
	<8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com>
Message-ID: <8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>

Hello Everybody,












I am using gdal for a couple of year now and I am very satisfied with it. 



But now i have a problem with reprojecting from and to plate
carree(epsg:32662). 



I have data in plate carree and I need to reproject to latlon but i there is an
offset between the results and other data that already in latlon.



I have also used Erdas Imagine 9.1 to do the reprojecting but i get a different
results then from gdal. The results from Erdas are beter then from gdal







After testing it with a worldwide dataset. I found that the
offset is almost 0 at (0,0) to several km around Brittian. Is there a problem
with the reprojection using plate carree or do you use a different wgs84 then
Erdas?







I am using gdal from fwtools 1.3.6







Best Regards,



Jaap Knoops










Check Out the new free AIM(R) Mail -- Unlimited storage and industry-leading spam and email virus protection.








 



 


________________________________________________________________________
Check Out the new free AIM(R) Mail -- Unlimited storage and industry-leading spam and email virus protection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070917/40b05f49/attachment.html
From Chris.Barker at noaa.gov  Mon Sep 17 12:04:21 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Trying the python bindings in windows
In-Reply-To: <46ED41E5.4010605@tkk.fi>
References: <46EB92B7.8020505@tkk.fi> <46EC59F2.70705@noaa.gov>
	<46ED41E5.4010605@tkk.fi>
Message-ID: <46EEA585.5020900@noaa.gov>

Ari Jolma wrote:
> Thanks, then I just copied the files from build\lib.win32-2.5 to 
> c:\python25\lib\site-packages and it seems to work.

The "proper" way to do that is:

python setup.py install


In this case, it may amount to the same thing, but for some packages, 
the install process can involve a bit more (if nothing else, it usually, 
pre-compiles all the python code).

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From cavicchi at ferrara.linux.it  Mon Sep 17 12:35:17 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Warp info...
Message-ID: <46EEACC5.6010100@ferrara.linux.it>

Hi all,
The mighty GDAL has some instruments of API for Delaunay triangulation 
of GCPs?

(I'm sorry if i'm making a stupid question...)
-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From Sjur.A.Kolberg at sintef.no  Mon Sep 17 12:39:15 2007
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fwd: plate carree to latlon 
	projection problem
In-Reply-To: <8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>
References: <8C9C420A75C6A5B-904-91E@webmail-db11.sysops.aol.com>	
	<8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com> 
	<8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02102F30@SINTEFXCH01.sintef.no>

Jaap,
 
Have you got your ellipsoids right?
 
If one of your ellipsoids (commonly the one used with Plate-Carree) is a
sphere, and you ignore that in converting to geographical latlong
(presumably based on WGS84), errors up to nearly 20 km will occur
(latitude dependent). These errors are in the N-S direction, E-W is
usually OK. This effect is beyond projection, latlong/sphere to
latlong/WGS84 gives equally long offsets. Try using cs2cs and specify
ellipsoids for both input and output,
 
It is only when one of the ellipsoids is a sphere you get these large
errors, otherwise the error is much smaller.
 
See also Frank Warmerdam's answer on June 7th on gdal-dev: 
(Re: [Gdal-dev] Does GDAL handle rotated spheres?)
 
Best regards,
 
Sjur K :-)
 

Sjur Kolberg 
SINTEF Energy Research 
N - 7465 Trondheim, Norway 
Phone +47 - 73 59 72 78 
Fax +47 - 73 59 72 50 


________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
jjknoops@netscape.net
Sent: 17. september 2007 15:37
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Fwd: plate carree to latlon projection problem


Hello Everybody,


I am using gdal for a couple of year now and I am very satisfied with
it. 
But now i have a problem with reprojecting from and to plate
carree(epsg:32662). 
I have data in plate carree and I need to reproject to latlon but i
there is an offset between the results and other data that already in
latlon.
I have also used Erdas Imagine 9.1 to do the reprojecting but i get a
different results then from gdal. The results from Erdas are beter then
from gdal

After testing it with a worldwide dataset. I found that the offset is
almost 0 at (0,0) to several km around Brittian. Is there a problem with
the reprojection using plate carree or do you use a different wgs84 then
Erdas?

I am using gdal from fwtools 1.3.6

Best Regards,
Jaap Knoops
________________________________

Check Out the new free AIM(R) Mail
<http://o.aolcdn.com/cdn.webmail.aol.com/mailtour/aim/en-us/index.htm>
-- Unlimited storage and industry-leading spam and email virus
protection.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070917/122617a6/attachment.html
From warmerdam at pobox.com  Mon Sep 17 13:09:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Warp info...
In-Reply-To: <46EEACC5.6010100@ferrara.linux.it>
References: <46EEACC5.6010100@ferrara.linux.it>
Message-ID: <46EEB4B3.7050109@pobox.com>

Mario Cavicchi wrote:
> Hi all,
> The mighty GDAL has some instruments of API for Delaunay triangulation 
> of GCPs?
> 
> (I'm sorry if i'm making a stupid question...)

Mario,

A very good question, but the answer is currently no.

The thin plate spline warper can give results vaguely similar to
a delaunay triangulation approach but with great continuity albeit
also with substantially more risk of mathematical breakdown or over
reaction.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jluis at ualg.pt  Mon Sep 17 18:00:41 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Problems with warping
In-Reply-To: <f647f0570709141031naa49ff3m50fd8f4515cf9f90@mail.gmail.com>
References: <f647f0570709141031naa49ff3m50fd8f4515cf9f90@mail.gmail.com>
Message-ID: <46EEF909.9090803@ualg.pt>

Hugo Martins wrote:
> Well i have been experiencing some problems with gdalwarp. I 
> downloaded some imagery in jpg format. After i converted it to tif and 
> no problem happened. These images are in Lisboa Hayford Gauss IgeoE 
> projection and i need to reproject them to WGS84. Here are the 
> gdalinfo from both files:

Hugo,
You didn't say how the reprojection to WGS84 was done but you need to 
take into account the datum change.

Here is a proj4 string that permits to recover exactly the same results 
as provided by the IgeoE coordinate conversions page.

+proj=tmerc +lat_0=39.66666666666666 +lon_0=-8.131906111111111 +k=1.0 
+x_0=200000 +y_0=300000 +ellps=intl 
+towgs84=-302.581,-61.360,103.047,0,0,0,0


Joaquim Luis


From josegomez at gmx.net  Tue Sep 18 03:50:53 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Strange behaviour
Message-ID: <20070918075053.306940@gmx.net>

Hi,
I have found a problem with my python code when I reproject data using GDAL's python wrappers. For some reason, my SpatialReferences() get thrashed in some cases. I don't know where to start looking, but in my module, here are some results:
s =osr.SpatialReference()
s.ImportFromEPSG(23030)
s.ExportToWkt()
'PROJCS["ED50 / UTM zone 30N",GEOGCS["ED50",DATUM["European_Datum_1950",SPHEROID["International 1924",6378388,297,AUTHORITY["EPSG","7022"]],AUTHORITY["EPSG","6230"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4230"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin","nan"],PARAMETER["central_meridian","nan"],PARAMETER["scale_factor",0],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","23030"]]'
s.ExportToProj4()
'+proj=tmerc +lat_0=nan +lon_0=nan +k=0,000000 +x_0=500000 +y_0=0 +ellps=intl +units=m +no_defs '

In a clean python instance, after importing osr, the results are as expected (i.e. non NaNs and stuff like that). I don't know where to start looking, whether this is locale, or file, or gdal version related (I'm using 1.4.1 on Linux/i386). The problem does not appear in Windows with an older version of GDAL.

Does anyone have any clues as to where to start looking for trouble?

Thanks!
Jose


-- 
Psssst! Schon vom neuen GMX MultiMessenger geh?rt?
Der kanns mit allen: http://www.gmx.net/de/go/multimessenger

From jjknoops at netscape.net  Tue Sep 18 05:17:46 2007
From: jjknoops at netscape.net (jjknoops@netscape.net)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fwd: plate carree to latlon  projection problem
In-Reply-To: <AC3559779B145744A3FA06C52D00BD0F02102F30@SINTEFXCH01.sintef.no>
References: <8C9C420A75C6A5B-904-91E@webmail-db11.sysops.aol.com>		<8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com>
	<8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>
	<AC3559779B145744A3FA06C52D00BD0F02102F30@SINTEFXCH01.sintef.no>
Message-ID: <8C9C7EBE8DD620A-B3C-4143@webmail-dd19.sysops.aol.com>


Hi Sjur,

Thanks for your replay. I think you are right when saying it's caused by ellipsoid. So I have used this command to reproject

call gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +ellps=sphere +a=6378137.0 +es=0.0 +units=m" -t_srs "epsg:4326"

After comparing this result with previous results then I would say it's worse. The offset between the result from gdalwarp and erdas has increased. My college has also compared the results with envi and found that it's comparable to the erdas results. 


Best Regards,
Jaap Knoops


 


 

-----Original Message-----
From: Kolberg Sjur A <Sjur.A.Kolberg@sintef.no>
To: gdal-dev@lists.maptools.org
Sent: Mon, 17 Sep 2007 6:39 pm
Subject: RE: [Gdal-dev] Fwd: plate carree to latlon  projection problem














Jaap,


?


Have you?got your ellipsoids 
right?


?


If one of your ellipsoids (commonly?the one used 
with Plate-Carree) is a sphere, and you ignore that in converting to 
geographical latlong (presumably based on WGS84), errors up to nearly?20 km 
will occur?(latitude dependent). These errors are in the N-S direction, E-W 
is usually OK. This effect is beyond projection, latlong/sphere to latlong/WGS84 
gives equally long offsets. Try using cs2cs and specify ellipsoids for both 
input and output,


?


It is only when one of the ellipsoids is a sphere you 
get these large errors, otherwise the error is much smaller.


?


See also Frank Warmerdam's answer on June 7th on 
gdal-dev: 


(Re: [Gdal-dev] Does GDAL handle rotated 
spheres?)


?


Best regards,


?


Sjur K :-)


?


Sjur Kolberg 
SINTEF Energy Research 
N - 7465 Trondheim, Norway 

Phone +47 - 73 59 72 78 

Fax +47 - 73 59 72 50 








From: gdal-dev-bounces@lists.maptools.org 
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
jjknoops@netscape.net
Sent: 17. september 2007 15:37
To: 
gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Fwd: plate carree to 
latlon projection problem





Hello Everybody,







I am using gdal for a couple of year now and I am 
very satisfied with it. 
But now i have a problem with reprojecting from and 
to plate carree(epsg:32662). 
I have data in plate carree and I need to 
reproject to latlon but i there is an offset between the results and other data 
that already in latlon.
I have also used Erdas Imagine 9.1 to do the 
reprojecting but i get a different results then from gdal. The results from 
Erdas are beter then from gdal

After testing it with a worldwide 
dataset. I found that the 
offset is almost 0 at (0,0) to several km around Brittian. Is there a problem 
with the reprojection using plate carree or do you use a different wgs84 then 
Erdas?

I am using gdal from fwtools 1.3.6

Best Regards,
Jaap 
Knoops






Check Out the new free AIM(R) Mail -- Unlimited storage 
and industry-leading spam and email virus protection.




 





_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



 


________________________________________________________________________
Check Out the new free AIM(R) Mail -- Unlimited storage and industry-leading spam and email virus protection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070918/27b68528/attachment.html
From Sjur.A.Kolberg at sintef.no  Tue Sep 18 08:32:19 2007
From: Sjur.A.Kolberg at sintef.no (Kolberg Sjur A)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fwd: plate carree to latlon  
	projection problem
In-Reply-To: <8C9C7EBE8DD620A-B3C-4143@webmail-dd19.sysops.aol.com>
References: <8C9C420A75C6A5B-904-91E@webmail-db11.sysops.aol.com>		
	<8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com>	
	<8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>	
	<AC3559779B145744A3FA06C52D00BD0F02102F30@SINTEFXCH01.sintef.no> 
	<8C9C7EBE8DD620A-B3C-4143@webmail-dd19.sysops.aol.com>
Message-ID: <AC3559779B145744A3FA06C52D00BD0F02102F34@SINTEFXCH01.sintef.no>

Hi again Jaap,
 
If you call GDAL functions from program code, it might be that OGR or
GDAL misses some of proj4's functionality, because they re-implement
only a subset of proj4. This is what Frank's reply on June 6 was about,
afterwards I couldn't find it in my gdal-dev archive, so I enclose it
below. Basically, the missing keycodes are accepted within an EXTENSION
structure.

Besides, 6378137 is a very large axis length for a sphere, it looks more
like the major axis of most ellipsoids. 6370997 or 6371000 are commonly
used for spheres. Try at the command prompt:

C:\Program Files\FWTools1.2.2>cs2cs +proj=eqc +ellps=sphere +R=6371000 
+to +proj=latlong +ellps=WGS84 +datum=WGS84 infile.xyz -> outfile.xyz

If you skip the file stuff, cs2cs prompts for input xy(z) and outputs
xyz

Good luck,

Sjur K :-)

 
 
-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com
<mailto:warmerdam@pobox.com> ] 
Sent: 7 juni 2007 16:11
To: Kolberg Sjur A
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Does GDAL handle rotated spheres?
Kolberg Sjur A wrote:
> Hello list,
> 
> Does GDAL handle rotated spheres?
> 
> According to this mail from 2005, GDAL re-implements a subset of 
> Proj4's keycodes, unfortuately excluding ob_tran.
> 
> http://lists.maptools.org/pipermail/gdal-dev/2005-June/005839.html
<http://lists.maptools.org/pipermail/gdal-dev/2005-June/005839.html> 

> Is this correctly described and still valid? Is there any known 
> workaround or plans for extension?

Sjur,

A mechanism to embed PROJ.4 strings with more parameters than are
actually known to OGR has been implemented. I think if you used
importFromWkt() instead on the following you would get the
transformation you wish.

PROJCS["Plate_Carree",
GEOGCS["unnamed ellipse",
DATUM["D_unknown",
SPHEROID["Unknown",6371000,0]],
PRIMEM["Greenwich",0],
UNIT["Degree",0.017453292519943295]],
PROJECTION["Plate_Carree"],
PARAMETER["latitude_of_origin",0],
PARAMETER["central_meridian",-40],
PARAMETER["false_easting",639367],
PARAMETER["false_northing",1473324],
EXTENSION["PROJ4","+proj=ob_tran +o_proj=eqc +lon_0=-40 +o_lat_p=22 
+x_0=639367 +y_0=1473324 +a=6371000 +b=6371000 +wktext"],
UNIT["Meter",1]]

Note the EXTENSION[] item which allows you to embed a specific PROJ.4
string to be used as the PROJ.4 version of this WKT.

I believe this was first released in GDAL/OGR 1.4.0. I hope it helps.

Best regards,

-- 

________________________________

	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
jjknoops@netscape.net
	Sent: 18 september 2007 11:18
	To: gdal-dev@lists.maptools.org
	Subject: Re: [Gdal-dev] Fwd: plate carree to latlon projection
problem
	
	
	Hi Sjur,
	
	Thanks for your replay. I think you are right when saying it's
caused by ellipsoid. So I have used this command to reproject
	
	call gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0
+ellps=sphere +a=6378137.0 +es=0.0 +units=m" -t_srs "epsg:4326"
	
	After comparing this result with previous results then I would
say it's worse. The offset between the result from gdalwarp and erdas
has increased. My college has also compared the results with envi and
found that it's comparable to the erdas results. 
	
	
	Best Regards,
	Jaap Knoops
	


	-----Original Message-----
	From: Kolberg Sjur A <Sjur.A.Kolberg@sintef.no>
	To: gdal-dev@lists.maptools.org
	Sent: Mon, 17 Sep 2007 6:39 pm
	Subject: RE: [Gdal-dev] Fwd: plate carree to latlon projection
problem
	
	
	Jaap,
	 
	Have you got your ellipsoids right?
	 
	If one of your ellipsoids (commonly the one used with
Plate-Carree) is a sphere, and you ignore that in converting to
geographical latlong (presumably based on WGS84), errors up to nearly 20
km will occur (latitude dependent). These errors are in the N-S
direction, E-W is usually OK. This effect is beyond projection,
latlong/sphere to latlong/WGS84 gives equally long offsets. Try using
cs2cs and specify ellipsoids for both input and output,
	 
	It is only when one of the ellipsoids is a sphere you get these
large errors, otherwise the error is much smaller.
	 
	See also Frank Warmerdam's answer on June 7th on gdal-dev: 
	(Re: [Gdal-dev] Does GDAL handle rotated spheres?)
	 
	Best regards,
	 
	Sjur K :-)
	 
	Sjur Kolberg 
	SINTEF Energy Research 
	N - 7465 Trondheim, Norway 
	Phone +47 - 73 59 72 78 
	Fax +47 - 73 59 72 50 

________________________________

	From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org
<mailto:gdal-dev-bounces@lists.maptools.org?> ] On Behalf Of
jjknoops@netscape.net
	Sent: 17. september 2007 15:37
	To: gdal-dev@lists.maptools.org
	Subject: [Gdal-dev] Fwd: plate carree to latlon projection
problem
	
	
	Hello Everybody,
	
	
	I am using gdal for a couple of year now and I am very satisfied
with it. 
	But now i have a problem with reprojecting from and to plate
carree(epsg:32662). 
	I have data in plate carree and I need to reproject to latlon
but i there is an offset between the results and other data that already
in latlon.
	I have also used Erdas Imagine 9.1 to do the reprojecting but i
get a different results then from gdal. The results from Erdas are beter
then from gdal
	
	After testing it with a worldwide dataset. I found that the
offset is almost 0 at (0,0) to several km around Brittian. Is there a
problem with the reprojection using plate carree or do you use a
different wgs84 then Erdas?
	
	I am using gdal from fwtools 1.3.6
	
	Best Regards,
	Jaap Knoops
	________________________________

	Check Out the new free AIM(R) Mail
<http://o.aolcdn.com/cdn.webmail.aol.com/mailtour/aim/en-us/index.htm>
-- Unlimited storage and industry-leading spam and email virus
protection.
	
	_______________________________________________
	
	Gdal-dev mailing list
	
	Gdal-dev@lists.maptools.org
	
	http://lists.maptools.org/mailman/listinfo/gdal-dev
	



From warmerdam at pobox.com  Tue Sep 18 09:14:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fwd: plate carree to latlon  projection problem
In-Reply-To: <8C9C7EBE8DD620A-B3C-4143@webmail-dd19.sysops.aol.com>
References: <8C9C420A75C6A5B-904-91E@webmail-db11.sysops.aol.com>	
	<8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com>
	<8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>
	<AC3559779B145744A3FA06C52D00BD0F02102F30@SINTEFXCH01.sintef.no>
	<8C9C7EBE8DD620A-B3C-4143@webmail-dd19.sysops.aol.com>
Message-ID: <46EFCF3A.7000308@pobox.com>

jjknoops@netscape.net wrote:
> Hi Sjur,
> 
> Thanks for your replay. I think you are right when saying it's caused by 
> ellipsoid. So I have used this command to reproject
> 
> /call gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 
> +ellps=sphere +a=6378137.0 +es=0.0 +units=m" -t_srs "epsg:4326"
> 
> /After comparing this result with previous results then I would say it's 
> worse. The offset between the result from gdalwarp and erdas has 
> increased. My college has also compared the results with envi and found 
> that it's comparable to the erdas results.

Jaap,

Try:

gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0
    +a=6378137.0 +b=6378137.0 +units=m +towgs84=0,0,0" \
    -t_srs "+a=6378137.0 +b=6378137.0 +towgs84=0,0,0" ...

This attempts to do a warp from a projection on a spherical ellipsoid
to geographic coordinates on the same ellipsoid.

Note, using +a and +ellps will conflict and isn't a good idea.  And +es
is not recognised by GDAL's proj.4 parser which is not a complete proj.4
parser.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Sep 18 09:45:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Strange behaviour
In-Reply-To: <20070918075053.306940@gmx.net>
References: <20070918075053.306940@gmx.net>
Message-ID: <46EFD679.2040600@pobox.com>

Jose Luis Gomez Dans wrote:
> Hi,
> I have found a problem with my python code when I reproject data using GDAL's python wrappers. For some reason, my SpatialReferences() get thrashed in some cases. I don't know where to start looking, but in my module, here are some results:
> s =osr.SpatialReference()
> s.ImportFromEPSG(23030)
> s.ExportToWkt()
> 'PROJCS["ED50 / UTM zone 30N",GEOGCS["ED50",DATUM["European_Datum_1950",SPHEROID["International 1924",6378388,297,AUTHORITY["EPSG","7022"]],AUTHORITY["EPSG","6230"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4230"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin","nan"],PARAMETER["central_meridian","nan"],PARAMETER["scale_factor",0],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]],AUTHORITY["EPSG","23030"]]'
> s.ExportToProj4()
> '+proj=tmerc +lat_0=nan +lon_0=nan +k=0,000000 +x_0=500000 +y_0=0 +ellps=intl +units=m +no_defs '
> 
> In a clean python instance, after importing osr, the results are as expected (i.e. non NaNs and stuff like that). I don't know where to start looking, whether this is locale, or file, or gdal version related (I'm using 1.4.1 on Linux/i386). The problem does not appear in Windows with an older version of GDAL.
> 
> Does anyone have any clues as to where to start looking for trouble?

Jose,

I have a feeling this is something I have run into myself, and fixed.
Could you try source snapshot at:

   http://download.osgeo.org/gdal/daily/gdalsvn-trunk-20070918.zip

If the problem persists then I think you will need to file a detailed bug
report on how to reproduce the problem.

You might also want to try and reproduce the problem with an FWTools build
to help isolate possible build option issues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jjknoops at netscape.net  Tue Sep 18 09:55:13 2007
From: jjknoops at netscape.net (jjknoops@netscape.net)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fwd: plate carree to latlon  projection problem
In-Reply-To: <46EFCF3A.7000308@pobox.com>
References: <8C9C420A75C6A5B-904-91E@webmail-db11.sysops.aol.com>	
	<8C9C74613667F27-B4C-8B4@webmail-dd17.sysops.aol.com>
	<8C9C746FDE77291-B4C-915@webmail-dd17.sysops.aol.com>
	<AC3559779B145744A3FA06C52D00BD0F02102F30@SINTEFXCH01.sintef.no>
	<8C9C7EBE8DD620A-B3C-4143@webmail-dd19.sysops.aol.com>
	<46EFCF3A.7000308@pobox.com>
Message-ID: <8C9C812ABA475AD-774-4E95@MBLK-M22.sysops.aol.com>


 Hi Frank and Sjur,

My problem is solved. The method from frank made a good reprojection. It's even better then the erdas reprojection.
The method was: 
gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 +a=6378137.0 +b=6378137.0 +units=m +towgs84=0,0,0"? -t_srs "+proj=longlat +a=6378137.0 +b=6378137.0 +towgs84=0,0,0"


 


 The only strange thing is that this means data projection parameter provided by data supplier is not correct. 

Thank you both for helping me.

Best regards,
Jaap Knoops






-----Original Message-----
From: Frank Warmerdam <warmerdam@pobox.com>
To: jjknoops@netscape.net
Cc: gdal-dev@lists.maptools.org
Sent: Tue, 18 Sep 2007 3:14 pm
Subject: Re: [Gdal-dev] Fwd: plate carree to latlon  projection problem









jjknoops@netscape.net wrote:?

> Hi Sjur,?

> 
> Thanks for your replay. I think you are right when saying it's caused by 
> ellipsoid. So I have used this command to reproject?

> 
> /call gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0 
> +ellps=sphere +a=6378137.0 +es=0.0 +units=m" -t_srs "epsg:4326"?

> 
> /After comparing this result with previous results then I would say it's 
> worse. The offset between the result from gdalwarp and erdas has 
> increased. My college has also compared the results with envi and found 
> that it's comparable to the erdas results.?
?

Jaap,?
?

Try:?
?

gdalwarp -s_srs "+proj=eqc +lat_ts=0 +lon_0=0 +x_0=0 +y_0=0?

?  +a=6378137.0 +b=6378137.0 +units=m +towgs84=0,0,0" \?

?  -t_srs "+a=6378137.0 +b=6378137.0 +towgs84=0,0,0" ...?
?

This attempts to do a warp from a projection on a spherical ellipsoid?

to geographic coordinates on the same ellipsoid.?
?

Note, using +a and +ellps will conflict and isn't a good idea.  And +es?

is not recognised by GDAL's proj.4 parser which is not a complete proj.4?

parser.?
?

Best regards,?

-- 
---------------------------------------+--------------------------------------?

I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com?

light and sound - activate the windows | http://pobox.com/~warmerdam?

and watch the world go round - Rush    | President OSGeo, http://osgeo.org?
?



 


________________________________________________________________________
Check Out the new free AIM(R) Mail -- Unlimited storage and industry-leading spam and email virus protection.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070918/71debf3d/attachment.html
From g.ces at pettra.es  Tue Sep 18 12:09:23 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
Message-ID: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>

Hi all,

    I?m newbie in Python so perhaps this problem is just a silly one. I?ve installed Python 2.4 and Gdal for this version ( executed de install software). When i try to import gdal module the GUI writes:

Traceback (most recent call last):
  File "<pyshell#1>", line 1, in -toplevel-
    import gdal
  File "E:\Python24\Lib\site-packages\gdal.py", line 191, in -toplevel-
    import _gdal
ImportError: DLL load failed: No se puede encontrar el m?dulo especificado.

I don?t know what i have to do. Perhaps i had to do anything else.

Thanks in advance

Gus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070918/bac77b60/attachment.html
From randre at gmail.com  Tue Sep 18 15:53:42 2007
From: randre at gmail.com (=?ISO-8859-1?Q?Roger_Andr=E9?=)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
Message-ID: <9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>

Hi Gus,

Did you install Python and GDAL separately?  In the past when I've
installed GDAL independently, I've always had to specify that Python
is present, and enable support within GDAL for it.  Here is a link to
what appears to be a Windows executable that contains GDAL and Python
2.4 together - http://www.gdal.org/dl/win32/Python_GDAL-1.4.2.win32-py2.4.exe.

Roger
--

On 9/18/07, Gustavo Ces <g.ces@pettra.es> wrote:
>
>
> Hi all,
>
>     I?m newbie in Python so perhaps this problem is just a silly one. I?ve
> installed Python 2.4 and Gdal for this version ( executed de install
> software). When i try to import gdal module the GUI writes:
>
> Traceback (most recent call last):
>   File "<pyshell#1>", line 1, in -toplevel-
>     import gdal
>   File "E:\Python24\Lib\site-packages\gdal.py", line 191,
> in -toplevel-
>     import _gdal
> ImportError: DLL load failed: No se puede encontrar el m?dulo especificado.
>
> I don?t know what i have to do. Perhaps i had to do anything else.
>
> Thanks in advance
>
> Gus
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From hobu.inc at gmail.com  Tue Sep 18 16:41:04 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
Message-ID: <C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>


On Sep 18, 2007, at 2:53 PM, Roger Andr? wrote:

> Hi Gus,
>
> Did you install Python and GDAL separately?  In the past when I've
> installed GDAL independently, I've always had to specify that Python
> is present, and enable support within GDAL for it.  Here is a link to
> what appears to be a Windows executable that contains GDAL and Python
> 2.4 together - http://www.gdal.org/dl/win32/Python_GDAL-1.4.2.win32- 
> py2.4.exe.
>
> Roger


Actually, that's just the Python binding.  You also need the "exe"  
stuff too, which has the actual gdal dll.

Howard



> --
>
> On 9/18/07, Gustavo Ces <g.ces@pettra.es> wrote:
>>
>>
>> Hi all,
>>
>>     I?m newbie in Python so perhaps this problem is just a silly  
>> one. I?ve
>> installed Python 2.4 and Gdal for this version ( executed de install
>> software). When i try to import gdal module the GUI writes:
>>
>> Traceback (most recent call last):
>>   File "<pyshell#1>", line 1, in -toplevel-
>>     import gdal
>>   File "E:\Python24\Lib\site-packages\gdal.py", line 191,
>> in -toplevel-
>>     import _gdal
>> ImportError: DLL load failed: No se puede encontrar el m?dulo  
>> especificado.
>>
>> I don?t know what i have to do. Perhaps i had to do anything else.
>>
>> Thanks in advance
>>
>> Gus
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From g.ces at pettra.es  Wed Sep 19 02:35:28 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
Message-ID: <005401c7fa87$453a8320$ba03a8c0@GUS>

Thanks for answering! :)

    What i have done is to install python 2.4 and then that .exe ( Roger
suggested one).  When you try to install it the prerequisite is python 2.4
installed. Not Python 2.4 inside :(
Howard says that is the bindings file. I just said i?m new in Python, but i
read what bindings are ( theorically).
Does it mean i have to install another one before the bindings-file ?
Always i have searched for gdal for python. Perhaps this is the problem.
Maybe i have to install gdal for another language and then install the
python bindings?
Sorry about the questions, but i?d like to understand it! :)

Gus



From g.ces at pettra.es  Wed Sep 19 03:19:23 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS><9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com><C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
Message-ID: <000c01c7fa8d$674a16f0$ba03a8c0@GUS>

Thanks a lot!

    I had to install the exe for 2.4 and then make README?s instructions ( 
add path and enviromental variable). When you enter in a new World ( Python 
world) all is new, there is a lot off changes and Stuff. But some info about 
how to install Gdal in a clean Python distribution in windows could be 
useful :).
    I?ll make some comprobations and then send a mail to the list with steps 
for installing dedicated to
future voyagers :)

Gus 


From warmerdam at pobox.com  Wed Sep 19 10:37:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Re: Motion: To remove sfcom_oledb to /spike
In-Reply-To: <46EAF03B.5030101@pobox.com>
References: <46EAF03B.5030101@pobox.com>
Message-ID: <46F13413.5090105@pobox.com>

Frank Warmerdam wrote:
> 
> Motion: To move gdal/ogr/sfcom_oledb and and the OLEDB client files in
> gdal/ogr (sfc*.cpp/h, etc) into an ole_db area on /spike.

Folks,

This motion has passed with support from myself, Andrey and Daniel. I will
proceed with the migration now.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Wed Sep 19 12:19:29 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <000c01c7fa8d$674a16f0$ba03a8c0@GUS>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
Message-ID: <46F14C11.5050802@noaa.gov>

Gustavo Ces wrote:
>    I had to install the exe for 2.4 and then make README?s instructions 
> ( add path and enviromental variable). When you enter in a new World ( 
> Python world) all is new, there is a lot off changes and Stuff. But some 
> info about how to install Gdal in a clean Python distribution in windows 
> could be useful :).
>    I?ll make some comprobations and then send a mail to the list with 
> steps for installing dedicated to
> future voyagers :)

That would be great, but this is way too hard. It really should be 
easier to install GDAL into and existing Python.

Maybe that's something we could clean up during the sprint next week?

Hmmm -- I don't know whether to go to the GDAL bug squash or the SWIG 
Bindings sprint....

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov



From sgillies at frii.com  Wed Sep 19 12:30:32 2007
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F14C11.5050802@noaa.gov>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>	<005401c7fa87$453a8320$ba03a8c0@GUS>	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov>
Message-ID: <46F14EA8.9070308@frii.com>

Christopher Barker wrote:
> Gustavo Ces wrote:
>>    I had to install the exe for 2.4 and then make README?s 
>> instructions ( add path and enviromental variable). When you enter in 
>> a new World ( Python world) all is new, there is a lot off changes and 
>> Stuff. But some info about how to install Gdal in a clean Python 
>> distribution in windows could be useful :).
>>    I?ll make some comprobations and then send a mail to the list with 
>> steps for installing dedicated to
>> future voyagers :)
> 
> That would be great, but this is way too hard. It really should be 
> easier to install GDAL into and existing Python.
> 
> Maybe that's something we could clean up during the sprint next week?
> 
> Hmmm -- I don't know whether to go to the GDAL bug squash or the SWIG 
> Bindings sprint....
> 
> -Chris
> 

Chris,

I think virtualenv looks like a promising tool for creating isolated, 
replicable environments (like the ones from FWTools).

http://pypi.python.org/pypi/virtualenv

I'm using zc.buildout to do stuff like this, but virtualenv looks like 
it could be a better fit for non-Zope stuff.

Sean


From hobu.inc at gmail.com  Wed Sep 19 12:39:42 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F14C11.5050802@noaa.gov>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS> <46F14C11.5050802@noaa.gov>
Message-ID: <03C6C701-91FD-42E9-BF0D-55508691C010@gmail.com>


On Sep 19, 2007, at 11:19 AM, Christopher Barker wrote:

> Gustavo Ces wrote:
>>    I had to install the exe for 2.4 and then make README?s  
>> instructions ( add path and enviromental variable). When you enter  
>> in a new World ( Python world) all is new, there is a lot off  
>> changes and Stuff. But some info about how to install Gdal in a  
>> clean Python distribution in windows could be useful :).
>>    I?ll make some comprobations and then send a mail to the list  
>> with steps for installing dedicated to
>> future voyagers :)

>
> That would be great, but this is way too hard. It really should be  
> easier to install GDAL into and existing Python.

It should be as simple as copying the exe.zip file from <http:// 
download.osgeo.org/gdal/win32/> into DLLs of your Python and then  
putting the Python_GDAL.zip contents in your site-packages.  Is it  
not currently?

>
> Maybe that's something we could clean up during the sprint next week?
>
> Hmmm -- I don't know whether to go to the GDAL bug squash or the  
> SWIG Bindings sprint....
>

We're all in the same room, so you'll be at both :)


> -Chris
>
>
>
> -- 
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Wed Sep 19 12:45:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F14C11.5050802@noaa.gov>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS> <46F14C11.5050802@noaa.gov>
Message-ID: <46F1521A.6010408@pobox.com>

Christopher Barker wrote:
> Hmmm -- I don't know whether to go to the GDAL bug squash or the SWIG 
> Bindings sprint....

Chris,

I promise we will make the tables be next to each other so you can be a bit
involved in both!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Wed Sep 19 13:13:58 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F1521A.6010408@pobox.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F1521A.6010408@pobox.com>
Message-ID: <46F158D6.2050904@noaa.gov>

Frank Warmerdam wrote:
> Christopher Barker wrote:
>> Hmmm -- I don't know whether to go to the GDAL bug squash or the SWIG 
>> Bindings sprint....

> I promise we will make the tables be next to each other so you can be a bit
> involved in both!

Great! I hope I can be of some help -- my c/c++ skills are very limited,
and I'm just learning SWIG now -- but I am a pythonista from way back.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov


From tutey at o2.pl  Wed Sep 19 13:12:57 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] 3rd order, gdalwarp/i.recify [was: Warping image...]
In-Reply-To: <46E6AD8C.3000805@pobox.com>
References: <46E5BAF8.5070608@ferrara.linux.it> <46E6AD8C.3000805@pobox.com>
Message-ID: <46F15899.4070800@o2.pl>

Frank Warmerdam wrote:
> Mario Cavicchi wrote:
>> Hi all,
>> I have a little problem with a modis image, i must to reproject it in
>> UTM meter. I use the function GDALCreateWarpOperation and i must to
>> set nOrder = 3. The output image is correct, but the left and right
>> sides are wrong.
>> I don't able to explain where is the problem, but the result is this
>> http://members.ferrara.linux.it/cavicchi/tmp/modis.jpg
> 
> Mario,
> 
> It has been my experience that 3rd order polynomials can easily do some
> pretty odd things.

Frank

Few weeks ago on GRASS dev issues with 3rd order in i.rectify were
mentioned again [1]. This topic pops up from time to time as can be
seen in the archives [2]. It was suggested that GDAL may suffer from
the same problem, as it originates from the same code base. Could you
comment on this?

Best
Maciek

[1]http://www.nabble.com/Feedback-from-a-FOSSGIS-course-tf3777183.html#a10680628
[2]http://www.nabble.com/forum/Search.jtp;jsessionid=2m03uhxi1mlu?query=%223rd+order%22+gdalwarp&local=y&forum=1200&daterange=0&startdate=&enddate=

From Chris.Barker at noaa.gov  Wed Sep 19 13:24:38 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F14EA8.9070308@frii.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
Message-ID: <46F15B56.70302@noaa.gov>

Sean Gillies wrote:
> I think virtualenv looks like a promising tool for creating isolated, 
> replicable environments (like the ones from FWTools).

> http://pypi.python.org/pypi/virtualenv

Yes, that is a cool and useful package.

However, I'm not sure it solves the python -- gdal issues. Sure, some 
folks are using python with gdal just for the utilities, etc. ( this 
would be the FWTools case), but gdal is a very useful package for 
building all sorts of stuff, and there is a lot of need for gdal to be 
just another package that plays well with everything else python, so 
that people can easily build apps using gdal and whatever other stuff 
they need.

It's not bad now -- just needs an easier installation, and the gdal 
stuff really should be put in a package. Looking in my site-packages 
dir, I have:

ogr.py
ogr.pyc
osr.py
osr.pyc
gdal.py
gdal.pyc
gdalconst.py
gdalconst.pyc
gdalnumeric.py
gdalnumeric.pyc
_gdalmodule.so

That's quite a bit of clutter. All that really should be in a "gdal" 
package directory instead. That would require a change to everyone's 
import statements, however. (that's th eonly change, though -- not bad, 
really)

It would be nice to make the change while keeping the old way around for 
a version or two (deprecated) -- on *nix, that's easy, just put in some 
symlinks -- on Windows, I don't know how to cleanly do it.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Wed Sep 19 15:12:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F15B56.70302@noaa.gov>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov>
Message-ID: <46F174B2.9090207@pobox.com>

Christopher Barker wrote:
> It's not bad now -- just needs an easier installation, and the gdal 
> stuff really should be put in a package. Looking in my site-packages 
> dir, I have:
> 
> ogr.py
> ogr.pyc
> osr.py
> osr.pyc
> gdal.py
> gdal.pyc
> gdalconst.py
> gdalconst.pyc
> gdalnumeric.py
> gdalnumeric.pyc
> _gdalmodule.so
> 
> That's quite a bit of clutter. All that really should be in a "gdal" 
> package directory instead. That would require a change to everyone's 
> import statements, however. (that's th eonly change, though -- not bad, 
> really)
> 
> It would be nice to make the change while keeping the old way around for 
> a version or two (deprecated) -- on *nix, that's easy, just put in some 
> symlinks -- on Windows, I don't know how to cleanly do it.

Christopher,

I sense I'm going to be tag teamed by you and Howard in Victoria and that
the gdal bindings are likely to be made into a "proper" package in a
subdirectory ... perhaps even for 1.5.

I've always resisted because of my concern that it will break existing
scripts which will require at least some minimal change to the import
statements.  I'm a serious stick-in-the-mud when it comes to backwards
compatibility.  But ultimately if the Python folks want to do it, we will
do it.  I'd obviously be happier about it if you can do it in a way that
is minimally disruptive.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Wed Sep 19 16:46:14 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F174B2.9090207@pobox.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov> <46F174B2.9090207@pobox.com>
Message-ID: <46F18A96.3040206@noaa.gov>


Frank Warmerdam wrote:

> the gdal bindings are likely to be made into a "proper" package in a
> subdirectory ... perhaps even for 1.5.

Thanks Frank, I look forward to meeting you there.

> I'm a serious stick-in-the-mud when it comes to backwards
> compatibility.

That is a serious concern -- maybe we can figure out a way to have a 
temporary backward compatible solution -- hmm, maybe the ones in 
site-packages could just be stubs that raise a deprecation warning, then 
import the "real" ones...

We'll talk about it next week.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Wed Sep 19 22:41:52 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] RFC 16: OGR Thread Safety
Message-ID: <46F1DDF0.1050003@pobox.com>

Folks,

I have a rough draft of an RFC on threadsafety in OGR written up at:

   http://trac.osgeo.org/gdal/wiki/rfc16_ogr_reentrancy

The key items are TestCapability() mechanisms to ask which drivers
support threadsafety or at least reentrancy and the concept of create
layer clones primarily for their distinct "reader state".

Feedback welcome.  I'll call for a vote later this week if I don't hear
much.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Sep 19 22:51:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
Message-ID: <46F1E02A.9080003@pobox.com>

Folks,

A mechanism called PAM (Persistent Auxilary Metadata) was engineered into
GDAL around the 1.3.0 timeframe I think.  This is essentially a mechanism
to store georeferencing, metadata, statistics and other auxilary data
in an XML file associated with a dataset for formats that don't support
the information internally.  The XML file has the extension .aux.xml.

Currently this mechanism is only enabled if the GDAL_PAM_ENABLED
configuration option (ie. env. variable) is YES.  Thus, by default we
have not been using it most of the time.  It is enabled by default in
ArcGIS and I sometimes run with it enabled.

I would like to move to having PAM turned on by default during our
development cycle and to have a build option indicating whether it is
enabled or disabled.  Shortly before 1.5 release we should be able to
make a final decision on whether we want it enabled in the 1.5.0
release depending on whether we find it is causing many problems.

My longer term goal is to have it on all the time except when explicitly
turned off - that is to have it as a default behavior.  Mainly I want this
because it is hard to be sure it is working properly when it is rarely
used except in the ArcGIS environment.  But I also think it is a valuable
facility and could be a benefit to most GDAL users if more was known about
it, and it was generally available.

Does anyone have an objection to my turning it on now, and us having a
formal motion on whether it should be enabled shortly before the 1.5
release?  Some rather brief information on PAM is available at:

   http://www.gdal.org/classGDALPamDataset.html

BTW, I have confirmed that the autotest suite runs clean (at least on linux)
with PAM enabled.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Wed Sep 19 22:36:17 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
In-Reply-To: <46F1E02A.9080003@pobox.com>
References: <46F1E02A.9080003@pobox.com>
Message-ID: <087E08DA-11E1-4FD4-AFE3-FA0FFB7966B5@gmail.com>

Frank,

In my opinion, there is little downside to enabling this by default  
in trunk right now.  I'll think of it as doing my own little part to  
make ESRI's software that much better :P

Seriously, I think this is a good idea, and maybe it will get folks  
thinking about incorporating PAM output in other contexts if they  
know it will be generally available.

Howard

On Sep 19, 2007, at 9:51 PM, Frank Warmerdam wrote:

> Folks,
>
> A mechanism called PAM (Persistent Auxilary Metadata) was  
> engineered into
> GDAL around the 1.3.0 timeframe I think.  This is essentially a  
> mechanism
> to store georeferencing, metadata, statistics and other auxilary data
> in an XML file associated with a dataset for formats that don't  
> support
> the information internally.  The XML file has the extension .aux.xml.
>
> Currently this mechanism is only enabled if the GDAL_PAM_ENABLED
> configuration option (ie. env. variable) is YES.  Thus, by default we
> have not been using it most of the time.  It is enabled by default in
> ArcGIS and I sometimes run with it enabled.
>
> I would like to move to having PAM turned on by default during our
> development cycle and to have a build option indicating whether it is
> enabled or disabled.  Shortly before 1.5 release we should be able to
> make a final decision on whether we want it enabled in the 1.5.0
> release depending on whether we find it is causing many problems.
>
> My longer term goal is to have it on all the time except when  
> explicitly
> turned off - that is to have it as a default behavior.  Mainly I  
> want this
> because it is hard to be sure it is working properly when it is rarely
> used except in the ArcGIS environment.  But I also think it is a  
> valuable
> facility and could be a benefit to most GDAL users if more was  
> known about
> it, and it was generally available.
>
> Does anyone have an objection to my turning it on now, and us having a
> formal motion on whether it should be enabled shortly before the 1.5
> release?  Some rather brief information on PAM is available at:
>
>   http://www.gdal.org/classGDALPamDataset.html
>
> BTW, I have confirmed that the autotest suite runs clean (at least  
> on linux)
> with PAM enabled.
>
> Best regards,
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http:// 
> osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From xuex_chen at 126.com  Wed Sep 19 23:24:38 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fw:OGR_sde questions
Message-ID: <6364421.791431190258678388.JavaMail.coremail@bj126app76.126.com>

    ----------  ----------
"chenxuexia <xuex_chen@126.com>"
2007-09-17 14:04:46
"Frank Warmerdam" <warmerdam@pobox.com>
 OGR_sde questions
hi, All.  I tried to use the following code to read a sde configured database,but even i hadn't done anything with the OGRDataSource pointer, it terminated with MEMORY LEAK.  It seems each Layer pointer is  still not been deleted. Should we  delete some SdeDS's members before call    DestroyDataSource() method ?  ///////////////////////////////////////////////////////////BOOL cls_sdeVector::OpenSDE(const char* szFileName){ RegisterOGRSDE();
 OGRDataSource       *SdeDS; SdeDS = OGRSFDriverRegistrar::Open( szFileName, FALSE );
 if( SdeDS == NULL )
 {
  AfxMessageBox("Open SDE database failed.");
  exit(1);
 }
  nLayer = SdeDS->GetLayerCount();
  OGRDataSource::DestroyDataSource( SdeDS );//memory leak !
 return TRUE;}/////////////////////////////////////////////////////////
The memory leak information is below (there's TOW feature layer in the database):
-------------------------------------
Detected memory leaks!
Dumping objects ->
{477} normal block at 0x010A9ED0, 33 bytes long.
 Data: < SHAPE          > 00 53 48 41 50 45 00 CD CD CD CD CD CD CD CD CD
{476} normal block at 0x010A9FB8, 16 bytes long.
 Data: <                > 02 00 00 00 02 00 00 00 04 00 00 00 04 00 00 00
{475} normal block at 0x010A9F60, 16 bytes long.
 Data: <                > 00 00 00 00 01 00 00 00 02 00 00 00 03 00 00 00
{470} normal block at 0x010A9C58, 24 bytes long.
 Data: <  :         0   > CC E7 3A 10 01 00 00 00 04 00 00 00 30 80 AD 01
{469} normal block at 0x010A9DC8, 192 bytes long.
 Data: <  <             > B8 12 3C 00 CD CD CD CD 00 00 00 00 00 00 00 00
{468} normal block at 0x010A9BF0, 33 bytes long.
 Data: < SHAPE          > 00 53 48 41 50 45 00 CD CD CD CD CD CD CD CD CD
{467} normal block at 0x010A9CB0, 64 bytes long.
 Data: <                > 02 00 00 00 04 00 00 00 04 00 00 00 02 00 00 00
{466} normal block at 0x010A9D40, 64 bytes long.
 Data: <                > 00 00 00 00 01 00 00 00 02 00 00 00 03 00 00 00
{457} normal block at 0x010A9930, 24 bytes long.
 Data: <  :          z  > CC E7 3A 10 01 00 00 00 0A 00 00 00 B0 7A AD 01
{456} normal block at 0x010A9AE8, 192 bytes long.
 Data: <  <             > B8 12 3C 00 CD CD CD CD 00 00 00 00 00 00 00 00
{455} normal block at 0x010A9A80, 33 bytes long.
It seems each layer results in memory leak. I'm sorry i can't locate the error. Could anyone give me some advices?  
       07           
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070920/ad73da74/attachment.html
From schut at sarvision.nl  Thu Sep 20 02:57:13 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F174B2.9090207@pobox.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>	<005401c7fa87$453a8320$ba03a8c0@GUS>	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>	<46F14C11.5050802@noaa.gov>
	<46F14EA8.9070308@frii.com>	<46F15B56.70302@noaa.gov>
	<46F174B2.9090207@pobox.com>
Message-ID: <46F219C9.5000700@sarvision.nl>



Frank Warmerdam wrote:
> Christopher Barker wrote:
>> It's not bad now -- just needs an easier installation, and the gdal
>> stuff really should be put in a package. Looking in my site-packages
>> dir, I have:
>>
>> ogr.py
>> ogr.pyc
>> osr.py
>> osr.pyc
>> gdal.py
>> gdal.pyc
>> gdalconst.py
>> gdalconst.pyc
>> gdalnumeric.py
>> gdalnumeric.pyc
>> _gdalmodule.so
>>
>> That's quite a bit of clutter. All that really should be in a "gdal"
>> package directory instead. That would require a change to everyone's
>> import statements, however. (that's th eonly change, though -- not
>> bad, really)
>>
>> It would be nice to make the change while keeping the old way around
>> for a version or two (deprecated) -- on *nix, that's easy, just put
>> in some symlinks -- on Windows, I don't know how to cleanly do it.
>
> Christopher,
>
> I sense I'm going to be tag teamed by you and Howard in Victoria and that
> the gdal bindings are likely to be made into a "proper" package in a
> subdirectory ... perhaps even for 1.5.
>
> I've always resisted because of my concern that it will break existing
> scripts which will require at least some minimal change to the import
> statements.  I'm a serious stick-in-the-mud when it comes to backwards
> compatibility.  But ultimately if the Python folks want to do it, we will
> do it.  I'd obviously be happier about it if you can do it in a way that
> is minimally disruptive.
>
> Best regards,
Me being one of the python folks, I guess, using gdal mainly from
python, would welcome this change very much. I'll happily go through all
my python stuff to do a find/replace quest. Usually backwards
compatibility is a good thing, but in this case imho it is more
important for py-gdal to finaly become a Real Python Package, than to
cling to backwards compatibility and thus withhold progress :)

just my 2c
VS.

From g.ces at pettra.es  Thu Sep 20 03:45:40 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS><9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com><C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com><005401c7fa87$453a8320$ba03a8c0@GUS><000c01c7fa8d$674a16f0$ba03a8c0@GUS><46F14C11.5050802@noaa.gov>
	<46F14EA8.9070308@frii.com> <46F15B56.70302@noaa.gov>
Message-ID: <001801c7fb5a$3da63680$ba03a8c0@GUS>

Hi all,

       Bingo! I want to learn Python and installing FWtools introduces a lot
of unknow stuff to me ( well, is a beginner?s insight) , who just need the
gdal methods to interactuate with other python libs ( numeric,
scientific,database interfaces,...).
Perhaps in Python doesn?t work in this way. Perhaps avanced python
programmers understand inmediately FwTools, but for me they are a lot of win
binaries folders, with python files, openenv, etc... uff! too many learning
curves for me! :(
    I know later Fwtools will be en easiest way to install gdal with python,
and will know how to fusion with other modules, packages, languages, etc...
But i?ve got a long way and the first step has to be simpler.


Gus 


From jukka.rahkonen at mmmtike.fi  Thu Sep 20 08:36:40 2007
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Cs2cs input from file in Windows
Message-ID: <loom.20070920T142844-305@post.gmane.org>

Hi,

I am sure that this must be trivial, but I just don't manage to take input for
cs2cs utility.  I have read the document and understood that I should just write
the input file name(s) last in the command line. However, when I do this cs2cs
is still waiting for standard input.  Using '<file' did not help either. I am
running cs2cs from FWTool 1.3.6 on Windows.

-Jukka Rahkonen-


From cjanssen at iavo-rs.com  Thu Sep 20 10:38:46 2007
From: cjanssen at iavo-rs.com (Christiaan Janssen)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Display help
Message-ID: <46F285F6.1000809@iavo-rs.com>

Could anyone give me some suggestions on what would be the appropriate 
method for displaying raster data with GDAL. I'm currently using openGL 
which is all fine but I have an issue dealing with imagery thats over 8 
bit. Is there a way to have GDAL scale the sample values or is this 
something I would have to do manually. Thanks

Christiaan

From warmerdam at pobox.com  Thu Sep 20 11:49:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Display help
In-Reply-To: <46F285F6.1000809@iavo-rs.com>
References: <46F285F6.1000809@iavo-rs.com>
Message-ID: <46F29685.1030809@pobox.com>

Christiaan Janssen wrote:
> Could anyone give me some suggestions on what would be the appropriate 
> method for displaying raster data with GDAL. I'm currently using openGL 
> which is all fine but I have an issue dealing with imagery thats over 8 
> bit. Is there a way to have GDAL scale the sample values or is this 
> something I would have to do manually. Thanks

Christiaan,

Generally speaking I'd suggest you rescale the data as a post processing
step after reading it with GDALRasterIO().  There are GDAL calls to get
min/max and stats information that may be helpful to you in deciding on
a scaling strategy.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Sep 20 11:57:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Fw:OGR_sde questions
In-Reply-To: <6364421.791431190258678388.JavaMail.coremail@bj126app76.126.com>
References: <6364421.791431190258678388.JavaMail.coremail@bj126app76.126.com>
Message-ID: <46F29869.7000300@pobox.com>

chenxuexia wrote:

> The memory leak information is below (there's TOW feature layer in the 
> database):
> 
> -------------------------------------
> 
> Detected memory leaks!
> Dumping objects ->
> {477} normal block at 0x010A9ED0, 33 bytes long.
>  Data: < SHAPE          > 00 53 48 41 50 45 00 CD CD CD CD CD CD CD CD CD
> {476} normal block at 0x010A9FB8, 16 bytes long.
...
> It seems each layer results in memory leak. I'm sorry i can't locate the 
> error. Could anyone give me some advices?  

Xuex,

I'm afraid this leak report doesn't tell me much.  You might want to change
your test to open and close the datasource twice to verify that these
leaks are related to opening and closing the datasource (they should double
up) rather than just the RegisterOGRSDE() call.

How important is it to your effort to wring out all memory leaks?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Jean-Philippe.Gauthier at ec.gc.ca  Thu Sep 20 11:14:21 2007
From: Jean-Philippe.Gauthier at ec.gc.ca (Gauthier,Jean-Philippe [CMC])
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Display help
In-Reply-To: <46F29685.1030809@pobox.com>
References: <46F285F6.1000809@iavo-rs.com> <46F29685.1030809@pobox.com>
Message-ID: <9BACA34DBB0057448406C0DCD442F1D82DC394@ecqcmtlmail3.quebec.int.ec.gc.ca>


	If you are using OpenGL, just use the glPixelTrensferf functions to do the scaling and bias, something like that:

         glEnable(GL_COLOR_TABLE);
         glColorTable(GL_COLOR_TABLE,GL_RGBA,256,GL_RGBA,GL_UNSIGNED_BYTE,(GLvoid*)Band->Spec->Map->Color);

         for (nc=0;nc<Band->Def->NC;nc++) {
            switch(Band->Def->Type) {
               case TD_UByte:  Band->Tex.Scale[nc]=((0x1<<8)-1)/(Band->Spec->Map->Max[nc]-Band->Spec->Map->Min[nc]);
                               Band->Tex.Bias[nc]=-Band->Spec->Map->Min[nc]/((0x1<<8)-1);
                              break;
               case TD_Byte:   Band->Tex.Scale[nc]=((0x1<<7)-1)/(Band->Spec->Map->Max[nc]-Band->Spec->Map->Min[nc]);
                               Band->Tex.Bias[nc]=-Band->Spec->Map->Min[nc]/((0x1<<7)-1);
                               break;
               case TD_UInt16: Band->Tex.Scale[nc]=((0x1<<16)-1)/(Band->Spec->Map->Max[nc]-Band->Spec->Map->Min[nc]);
                               Band->Tex.Bias[nc]=-Band->Spec->Map->Min[nc]/((0x1<<16)-1);
                               break;
               case TD_Int16:  Band->Tex.Scale[nc]=((0x1<<15)-1)/(Band->Spec->Map->Max[nc]-Band->Spec->Map->Min[nc]);
                               Band->Tex.Bias[nc]=-Band->Spec->Map->Min[nc]/((0x1<<15)-1);
                               break;
               case TD_UInt32:
               case TD_Int32:
               case TD_Float32:
               case TD_Float64: Band->Tex.Scale[nc]=1.0/(Band->Spec->Map->Max[nc]-Band->Spec->Map->Min[nc]);
                                Band->Tex.Bias[nc]=-Band->Spec->Map->Min[nc];
                                break;
            }
            glPixelTransferf(sc[nc],Band->Tex.Scale[nc]);
            glPixelTransferf(bc[nc],Band->Tex.Bias[nc]*Band->Tex.Scale[nc]);
         }
      }


================================================================
Jean-Philippe Gauthier Bilodeau		Direction des op?rations
Analyste Programmeur Scientifique		Centre M?t?orologique Canadien
Tel?: (514) 421-4642				2121 Route Transcanadienne
Fax: (514) 421-4679				Dorval,Qu?bec
Email: Jean-Philippe.Gauthier@ec.gc.ca	H9P 1J3

 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: 20 September, 2007 11:49
To: Christiaan Janssen
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Display help

Christiaan Janssen wrote:
> Could anyone give me some suggestions on what would be the appropriate 
> method for displaying raster data with GDAL. I'm currently using 
> openGL which is all fine but I have an issue dealing with imagery 
> thats over 8 bit. Is there a way to have GDAL scale the sample values 
> or is this something I would have to do manually. Thanks

Christiaan,

Generally speaking I'd suggest you rescale the data as a post processing step after reading it with GDALRasterIO().  There are GDAL calls to get min/max and stats information that may be helpful to you in deciding on a scaling strategy.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From dmorissette at mapgears.com  Thu Sep 20 11:34:48 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
In-Reply-To: <46F1E02A.9080003@pobox.com>
References: <46F1E02A.9080003@pobox.com>
Message-ID: <46F29318.30203@mapgears.com>

Frank Warmerdam wrote:
> 
> Does anyone have an objection to my turning it on now, and us having a
> formal motion on whether it should be enabled shortly before the 1.5
> release?  Some rather brief information on PAM is available at:
> 
>   http://www.gdal.org/classGDALPamDataset.html
> 

+1 to turn it on by default ... based on the little understanding of PAM 
that I got by reading the page above.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From eschenbe at psc.edu  Thu Sep 20 11:46:48 2007
From: eschenbe at psc.edu (Kent Eschenberg)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Extracting A Rotated Rectangle
In-Reply-To: <46F29685.1030809@pobox.com>
References: <46F285F6.1000809@iavo-rs.com> <46F29685.1030809@pobox.com>
Message-ID: <46F295E8.3020509@psc.edu>

This is a simple question, I think, from one who is just starting to use the 
GDAL library. I'll make this as brief as possible. I need to

===
1) Convert raster/vector files to lon/lat.
2) Extract a region given the min/max lon/lat.
3) Extract from 2) a smaller region that is at an angle.
4) Write the data in a legacy VTK file format.
===

I'm writing a C++ program and some custom code to do 3 and 4. The question for 
you folks is how to best do 1 and 2.

===
Plan A: Do it all in the C++ program. The problem: at least one of the maps is 
1.3 GB and is impractical to read into memory unless the workstation has, say, 
2 GB. Step 1 also takes a lot of time. I don't see a way to combine 1 and 2, 
i.e., read only the desired rectangle into memory given the min/max lon/lat.

Plan B: Use utilities gdalwarp and gdal_translate for steps 1,2 then do the 
rest in my program. A little less elegant but maybe the best. I'd like to do it 
all in gdalwarp but its "-te xmin ymin xmax ymax" option seems to require the 
bounds in the input file's coordinate system whereas I only know the bounds in 
lon/lat.
===

Suggestions? Thanks!

Kent
Pittsburgh Supercomputing Center

From warmerdam at pobox.com  Thu Sep 20 12:42:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Cs2cs input from file in Windows
In-Reply-To: <loom.20070920T142844-305@post.gmane.org>
References: <loom.20070920T142844-305@post.gmane.org>
Message-ID: <46F2A302.6000309@pobox.com>

Jukka Rahkonen wrote:
> Hi,
> 
> I am sure that this must be trivial, but I just don't manage to take input for
> cs2cs utility.  I have read the document and understood that I should just write
> the input file name(s) last in the command line. However, when I do this cs2cs
> is still waiting for standard input.  Using '<file' did not help either. I am
> running cs2cs from FWTool 1.3.6 on Windows.

Jukka,

I tried:

C:\warmerda>more < input.txt
-10 33

C:\warmerda>cs2cs +proj=utm +zone=11 +datum=WGS84 < input.txt
121d29'19.801"W 0d0'1.072"N 0.000

C:\warmerda>

This is with FWTools 1.3.7 for windows.  How did you results
differ?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Chris.Barker at noaa.gov  Thu Sep 20 12:07:40 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Import Gdal
In-Reply-To: <46F219C9.5000700@sarvision.nl>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov> <46F174B2.9090207@pobox.com>
	<46F219C9.5000700@sarvision.nl>
Message-ID: <46F29ACC.6020000@noaa.gov>

Vincent Schut wrote:
> Me being one of the python folks, I guess, using gdal mainly from
> python, would welcome this change very much.

Great. It seems we have a movement!

This could be a good task for the sprint next week -- one that I can 
actually be of some use on. Should I put that on a Wiki page somewhere, 
or just show up next week and get started on it.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Thu Sep 20 14:12:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
In-Reply-To: <46F29318.30203@mapgears.com>
References: <46F1E02A.9080003@pobox.com> <46F29318.30203@mapgears.com>
Message-ID: <46F2B829.5040800@pobox.com>

Daniel Morissette wrote:
> Frank Warmerdam wrote:
>>
>> Does anyone have an objection to my turning it on now, and us having a
>> formal motion on whether it should be enabled shortly before the 1.5
>> release?  Some rather brief information on PAM is available at:
>>
>>   http://www.gdal.org/classGDALPamDataset.html
>>
> 
> +1 to turn it on by default ... based on the little understanding of PAM 
> that I got by reading the page above.
> 
> Daniel

Daniel / Howard,

OK, I have committed changes in subversion to turn it on by default on linux.
You can configure --without-pam to disable it.

I'll make similar modifications for windows shortly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Jukka.Rahkonen at mmmtike.fi  Thu Sep 20 13:45:35 2007
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Cs2cs input from file in Windows
References: <loom.20070920T142844-305@post.gmane.org>
	<46F2A302.6000309@pobox.com>
Message-ID: <CC197224AC75CE4DB23F739B16891B86668AD9@tikka.haapa.mmm.fi>


Jukka,

>I tried:
>C:\warmerda>more < input.txt
>-10 33

>C:\warmerda>cs2cs +proj=utm +zone=11 +datum=WGS84 < input.txt
>121d29'19.801"W 0d0'1.072"N 0.000

>This is with FWTools 1.3.7 for windows.  How did you results
>differ?


Hi,

Strange, now cs2cs from just the same FWTools 1.3.6 version does accept my text file. The computer is not the same nor is the text file, so I must check my original case again tomorrow. Perhaps I learn something. Anyhow, now I get what I was waiting for:
FWTools1.3.6>more <input.txt
27 60
FWTools1.3.6>cs2cs  +proj=latlong +datum=WGS84 +to +proj=tmerc +lat_0=0
+y_0=0 +lon_0=27 +x_0=3500000 +k=1.000000 +ellps=intl +towgs84=-90.7,-106.1,
-119.2,4.09,0.218,-1.05,1.37 +units=m  input.txt
3500169.46      6654204.30 -23.67

-Jukka Rahkonen-


From matt.wilkie at gov.yk.ca  Thu Sep 20 15:06:53 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
In-Reply-To: <46F1E02A.9080003@pobox.com>
References: <46F1E02A.9080003@pobox.com>
Message-ID: <46F2C4CD.6010803@gov.yk.ca>


+1, if non-developer can vote :)

As a matter of fact, just last night I was pondering for the Nth time if 
I had the wherewithal to compose a feature request for a persistent 
metadata feature be *added* to gdal. I had no idea there was something 
already there along these lines.

Most of the classGDALPamDataset page is over my head, so I don't know 
whether my particular interest is already in there or not. I'll 
elaborate a bit: one of most useful parts of the ArcGIS metadata for me 
on a consistent basis the "Process Lineage" section; exerpt below. If 
this is accomodated by PAM, I'm all for it! If not, well, it still 
sounds like a good idea. :-)

-matt

--------------
Lineage
ESRI geoprocessing history
1. Create Feature Class
Date and time: 20061119 at time 182019
Tool location: C:\Program Files\ArcGIS\ArcToolbox\Toolboxes\Data 
Management Tools.tbx\CreateFeatureclass

Command issued
CreateFeatureclass Z:\Source\PGDB\Admin250k.mdb Protected_Areas # 
region_Layer SAME_AS_TEMPLATE SAME_AS_TEMPLATE 
"PROJCS['NAD_1983_Albers',GEOGCS['GCS_North_American_1983',DATUM['D_North_American_1983',SPHEROID['GRS_1980',6378137.0,298.257222101]],PRIMEM['Greenwich',0.0],UNIT['Degree',0.0174532925199433]],PROJECTION['Albers'],PARAMETER['False_Easting',500000.0],PARAMETER['False_Northing',500000.0],PARAMETER['Central_Meridian',-132.5],PARAMETER['Standard_Parallel_1',61.66666666666666],PARAMETER['Standard_Parallel_2',68.0],PARAMETER['Latitude_Of_Origin',59.0],UNIT['Meter',1.0]];-7283252.12921423 
-6530535.15945454 139.611574189393;0 100000;0 100000" # 0 0 0 
Z:\Source\PGDB\Admin250k.mdb\Protected_Areas


2. Append
Date and time: 20061119 at time 182020
Tool location: C:\Program Files\ArcGIS\ArcToolbox\Toolboxes\Data 
Management Tools.tbx\Append

Command issued
Append region_Layer Z:\Source\PGDB\Admin250k.mdb\Protected_Areas TEST 
Z:\Source\PGDB\Admin250k.mdb\Protected_Areas


3. FeatureClassToFeatureClass_9
Date and time: 20061119 at time 182020
Tool location: C:\Program Files\ArcGIS\ArcToolbox\Toolboxes\Conversion 
Tools.tbx\FeatureClassToFeatureClass

Command issued
FeatureClassToFeatureClass 
Z:\Source\Cover\250k\boundary\qpark\region.qpark 
Z:\Source\PGDB\Admin250k.mdb Protected_Areas # "AREA AREA 
HIDDEN;PERIMETER PERIMETER HIDDEN;QPARK# QPARK_ HIDDEN;QPARK-ID QPARK_ID 
HIDDEN;PK_ID PK_ID HIDDEN;NAME NAME VISIBLE;TYPE TYPE VISIBLE" 
SAME_AS_TEMPLATE SAME_AS_TEMPLATE # 0 
Z:\Source\PGDB\Admin250k.mdb\Protected_Areas
--------------






Frank Warmerdam wrote:
> Folks,
> 
> A mechanism called PAM (Persistent Auxilary Metadata) was engineered into
> GDAL around the 1.3.0 timeframe I think.  This is essentially a mechanism
> to store georeferencing, metadata, statistics and other auxilary data
> in an XML file associated with a dataset for formats that don't support
> the information internally.  The XML file has the extension .aux.xml.
> 
> Currently this mechanism is only enabled if the GDAL_PAM_ENABLED
> configuration option (ie. env. variable) is YES.  Thus, by default we
> have not been using it most of the time.  It is enabled by default in
> ArcGIS and I sometimes run with it enabled.
> 
> I would like to move to having PAM turned on by default during our
> development cycle and to have a build option indicating whether it is
> enabled or disabled.  Shortly before 1.5 release we should be able to
> make a final decision on whether we want it enabled in the 1.5.0
> release depending on whether we find it is causing many problems.
> 
> My longer term goal is to have it on all the time except when explicitly
> turned off - that is to have it as a default behavior.  Mainly I want this
> because it is hard to be sure it is working properly when it is rarely
> used except in the ArcGIS environment.  But I also think it is a valuable
> facility and could be a benefit to most GDAL users if more was known about
> it, and it was generally available.
> 
> Does anyone have an objection to my turning it on now, and us having a
> formal motion on whether it should be enabled shortly before the 1.5
> release?  Some rather brief information on PAM is available at:
> 
>   http://www.gdal.org/classGDALPamDataset.html
> 
> BTW, I have confirmed that the autotest suite runs clean (at least on 
> linux)
> with PAM enabled.
> 
> Best regards,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Thu Sep 20 16:12:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
In-Reply-To: <46F2C4CD.6010803@gov.yk.ca>
References: <46F1E02A.9080003@pobox.com> <46F2C4CD.6010803@gov.yk.ca>
Message-ID: <46F2D43F.5050304@pobox.com>

Matt Wilkie wrote:
> 
> +1, if non-developer can vote :)
> 
> As a matter of fact, just last night I was pondering for the Nth time if 
> I had the wherewithal to compose a feature request for a persistent 
> metadata feature be *added* to gdal. I had no idea there was something 
> already there along these lines.
> 
> Most of the classGDALPamDataset page is over my head, so I don't know 
> whether my particular interest is already in there or not. I'll 
> elaborate a bit: one of most useful parts of the ArcGIS metadata for me 
> on a consistent basis the "Process Lineage" section; exerpt below. If 
> this is accomodated by PAM, I'm all for it! If not, well, it still 
> sounds like a good idea. :-)

Matt,

Unfortunately, PAM does not address improved support for FGDC style
metadata with sections like process lineage and so forth.  One thing is
does do though is ensure we could preserve such metadata if we generated,
even for file formats that don't normally have it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Sep 20 16:14:04 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Enabling PAM By Default
In-Reply-To: <46F2C4CD.6010803@gov.yk.ca>
References: <46F1E02A.9080003@pobox.com> <46F2C4CD.6010803@gov.yk.ca>
Message-ID: <46F2D48C.3050405@pobox.com>

Matt Wilkie wrote:
> 
> +1, if non-developer can vote :)

Matt,

PS. Feedback with rationale on proposals is welcome from all members of
the community.  The literal vote might not be counted in the "PSC sense"
but the discussion with reasons is very valuable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From hobu.inc at gmail.com  Fri Sep 21 00:22:11 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] GDAL's Python Identity Crisis (was Re: Import Gdal)
In-Reply-To: <46F29ACC.6020000@noaa.gov>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov> <46F174B2.9090207@pobox.com>
	<46F219C9.5000700@sarvision.nl> <46F29ACC.6020000@noaa.gov>
Message-ID: <C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>

Chris,

This is something that Frank is probably sick of me whining about.   
I'm willing to make the changes, but the consequence of doing so is  
we have to suck up the testing, question answering, and other grief a  
change like this will likely cause.  Can you do that with me?  I  
think we should only do this for the next-gen bindings, but I'm open  
to suggestions.

The other issue is if we namespace the Python GDAL packages, what do  
we pick for a name?

Python currently uses:
 >>>  import gdal
 >>>  import osr
 >>>  import ogr

C# uses:
OSGeo.GDAL
OSGeo.OSR
OSGeo.OGR

Ruby uses:
gdal::gdal
gdal::osr
gdal::ogr

Perl uses:
Geo-GDAL
Geo-OSR
Geo-OGR

Java uses:
org.gdal.gdal
org.gdal.osr
org.gdal.osr

What makes sense for a GDAL namespace for Python?  I'm inclined to  
take Ruby's approach, but I could be swayed any way.  GDAL Python  
users please speak up with suggestions.  We probably won't change it  
for another ten years :)

Howard


From Chris.Barker at noaa.gov  Fri Sep 21 00:59:57 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Re: GDAL's Python Identity Crisis (was Re: Import Gdal)
In-Reply-To: <C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov> <46F174B2.9090207@pobox.com>
	<46F219C9.5000700@sarvision.nl> <46F29ACC.6020000@noaa.gov>
	<C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>
Message-ID: <46F34FCD.6030200@noaa.gov>

Howard Butler wrote:
> This is something that Frank is probably sick of me whining about.

Well, I, for one, am glad someone else is whining!

>  I'm 
> willing to make the changes, but the consequence of doing so is we have 
> to suck up the testing, question answering, and other grief a change 
> like this will likely cause.  Can you do that with me? 

Sure I'd be glad to help.

> I think we 
> should only do this for the next-gen bindings,

I agree, though it might be better from a confusion stand point to have 
them both the same -- I'm really not sure.

> The other issue is if we namespace the Python GDAL packages, what do we 
> pick for a name?

Darn -- why are they different?

Anyway, I vote for package name gdal, with modules gdal, osr, ogr. So 
you could do:

from gdal, import gdal, osr, ogr

(to convert from old code).

However, I did have an idea about covering the transition by having the 
old names be small modules that raised a deprecation warning, then 
imported everything from the new package (did I post that idea on the 
list? I thought so). However, if we wanted to do that, then we couldn't 
have a package "gdal", and a module "gdal" in the same place, so we'd 
need to use another name: maybe osgeo, like C#, (why does Java use 
"org"? that's odd.)

Anyway, the name is the least of my concerns.

Are you going to FOSS4G next week? I was thinking of working on this at 
the sprint.

-Chris





-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From maplabs at light42.com  Fri Sep 21 03:47:28 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Re: GDAL's Python Identity Crisis (was Re: Import Gdal)
In-Reply-To: <46F34FCD.6030200@noaa.gov>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov> <46F174B2.9090207@pobox.com>
	<46F219C9.5000700@sarvision.nl> <46F29ACC.6020000@noaa.gov>
	<C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>
	<46F34FCD.6030200@noaa.gov>
Message-ID: <E709F470-6816-11DC-87F5-000A277A733C@light42.com>

On Sep 20, 2007, at 9:59 PM, Christopher Barker wrote:
>
>> I think we should only do this for the next-gen bindings,
>
> I agree, though it might be better from a confusion stand point to 
> have them both the same -- I'm really not sure.

Why not  leave the old name space with the old Python bindings, and 
preserve the old test suite in a folder with those names, all as 
legacy. Then the new namespace goes with the new bindings and (perhaps 
the same) tests but in a new folder with the new invocation. Sounds 
like a clean setup.

That way if you ever look at a test file, you know for certain which 
generation you are looking at.
ps- extra bonus, do that for 1.5 and leave 1.4.3 working as it stands :)

caveat - I dont use Python much

best regards
   -Brian


From schut at sarvision.nl  Fri Sep 21 06:34:20 2007
From: schut at sarvision.nl (Vincent Schut)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] GDAL's Python Identity Crisis (was Re: Import Gdal)
In-Reply-To: <C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>	<005401c7fa87$453a8320$ba03a8c0@GUS>	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>	<46F14C11.5050802@noaa.gov>
	<46F14EA8.9070308@frii.com>	<46F15B56.70302@noaa.gov>
	<46F174B2.9090207@pobox.com>	<46F219C9.5000700@sarvision.nl>
	<46F29ACC.6020000@noaa.gov>
	<C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>
Message-ID: <46F39E2C.1020807@sarvision.nl>

Howard Butler wrote:
> Chris,
>
> This is something that Frank is probably sick of me whining about. 
> I'm willing to make the changes, but the consequence of doing so is we
> have to suck up the testing, question answering, and other grief a
> change like this will likely cause.  Can you do that with me?  I think
> we should only do this for the next-gen bindings, but I'm open to
> suggestions.
Me too thinks that is a good idea, it would also make a clear (visible)
difference between the old and the ng bindings. NG bindings aren't the
default yet, are they? Any linux distro's install ng bindings by
default? If they aren't, that would make it even more easy to make this
change; likely only reasonably capable pythonistas (hear hear...) will
be using ng now, and they will be able to make the change to a real gdal
package relatively easy. For old bindings users, once the time comes
they want/need to switch to ng, they probably will have to check their
code anyway, so it is a minor extra effort to also change your imports.
And it would be easier to document: old bindings, no change, ng
bindings: gdal package.
>
> The other issue is if we namespace the Python GDAL packages, what do
> we pick for a name?
I'd say follow ruby (and java): gdal namespace, gdal.gdal/osr/ogr. Easy
to update your imports, just add a 'from gdal' before your current
gdal/osr/ogr imports.
>
> Python currently uses:
> >>>  import gdal
> >>>  import osr
> >>>  import ogr
>
> C# uses:
> OSGeo.GDAL
> OSGeo.OSR
> OSGeo.OGR
>
> Ruby uses:
> gdal::gdal
> gdal::osr
> gdal::ogr
>
> Perl uses:
> Geo-GDAL
> Geo-OSR
> Geo-OGR
>
> Java uses:
> org.gdal.gdal
> org.gdal.osr
> org.gdal.osr
>
> What makes sense for a GDAL namespace for Python?  I'm inclined to
> take Ruby's approach, but I could be swayed any way.  GDAL Python
> users please speak up with suggestions.  We probably won't change it
> for another ten years :)
>
> Howard
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From cavicchi at ferrara.linux.it  Fri Sep 21 09:46:19 2007
From: cavicchi at ferrara.linux.it (Mario Cavicchi)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] HDF, where is informations?
Message-ID: <46F3CB2B.90108@ferrara.linux.it>

Hi all,
I must to get some informations from MODIS Level 1B in HDF format, but i 
don't understand where i can find they. I'm searching the values of the 
vectors named reflectance_scales and reflectance_offsets.
Tnx for all.

-- 
Ciao,
         Mario

[ Web Info: http://members.ferrara.linux.it/cavicchi ]

From warmerdam at pobox.com  Fri Sep 21 11:58:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Re: GDAL's Python Identity Crisis (was Re: Import Gdal)
In-Reply-To: <E709F470-6816-11DC-87F5-000A277A733C@light42.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>
	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>
	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>
	<005401c7fa87$453a8320$ba03a8c0@GUS>
	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>
	<46F14C11.5050802@noaa.gov> <46F14EA8.9070308@frii.com>
	<46F15B56.70302@noaa.gov> <46F174B2.9090207@pobox.com>
	<46F219C9.5000700@sarvision.nl> <46F29ACC.6020000@noaa.gov>
	<C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>
	<46F34FCD.6030200@noaa.gov>
	<E709F470-6816-11DC-87F5-000A277A733C@light42.com>
Message-ID: <46F3EA09.7000904@pobox.com>

Brian Hamlin wrote:
> On Sep 20, 2007, at 9:59 PM, Christopher Barker wrote:
>>
>>> I think we should only do this for the next-gen bindings,
>>
>> I agree, though it might be better from a confusion stand point to 
>> have them both the same -- I'm really not sure.
> 
> Why not  leave the old name space with the old Python bindings, and 
> preserve the old test suite in a folder with those names, all as legacy. 
> Then the new namespace goes with the new bindings and (perhaps the same) 
> tests but in a new folder with the new invocation. Sounds like a clean 
> setup.

Brian,

No, this would not be acceptable.  For the near future old and new
bindings will be supported, and the test suite has to be able to run
against both.  It is acceptable for the test suite to skip specific tests
when run against old or new bindings but most of it should continue to
work with both for at least 1.5.

(BTW, when I say unacceptable, I mean I would vote -1 on such a proposal.
I'm not the final word obviously - I could be overridden)

> That way if you ever look at a test file, you know for certain which 
> generation you are looking at.
> ps- extra bonus, do that for 1.5 and leave 1.4.3 working as it stands :)
> 
> caveat - I dont use Python much

I use python every day, and write and maintain many of the test scripts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From even.rouault at mines-paris.org  Fri Sep 21 14:47:02 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] My contribution for bug squash 2007
Message-ID: <200709212047.02987.even.rouault@mines-paris.org>

Hi,

I won't join the party unfortunately. However I've looked a bit at trac and 
selected a list of bugs for which I've contributed patches and that could be 
reviewed at that occasion.
Here it is :

In relatively good shape for commiting :
#1769 : WMS driver leak when GetMap requests return unreadable results
#1721 : GTiffDataset::IBuildOverviews doest not propagate NODATA to overview 
rasterband
#1527 / #1173 : Gdalwarp - GeoTiff creation option PROFILE ineffective 
(gdal_translate: tiff tags discarded with -co profile=Geotiff or Baseline)

Need more careful review :
#1758 : Creating overview on a TILED LZW GTiff fails
#1725 : [PATCH] Fixes VRT average resampling when doing 200%
#1723 : gdaladdo repeated on GTiff make image size increase
--> Submitted to libtiff mailing list. No reaction at all...
#1372 : gdaladdo does not ignore NODATA values

Best regards,
Even

From ivan.lucena at pmldnet.com  Fri Sep 21 20:00:18 2007
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Re: GDAL's Python Identity Crisis (was Re: Import Gdal)
In-Reply-To: <46F3EA09.7000904@pobox.com>
References: <010e01c7fa0e$4737e4c0$ba03a8c0@GUS>	<9c2015090709181253g42848a28p862c5262f407c35c@mail.gmail.com>	<C97BF503-EB45-449E-B0C9-9DF2AE5BCF1F@gmail.com>	<005401c7fa87$453a8320$ba03a8c0@GUS>	<000c01c7fa8d$674a16f0$ba03a8c0@GUS>	<46F14C11.5050802@noaa.gov>
	<46F14EA8.9070308@frii.com>	<46F15B56.70302@noaa.gov>
	<46F174B2.9090207@pobox.com>	<46F219C9.5000700@sarvision.nl>
	<46F29ACC.6020000@noaa.gov>	<C0AAE45E-EA65-4B1E-8681-2F937E14D357@gmail.com>	<46F34FCD.6030200@noaa.gov>	<E709F470-6816-11DC-87F5-000A277A733C@light42.com>
	<46F3EA09.7000904@pobox.com>
Message-ID: <46F45B12.9070400@pmldnet.com>

Hi There,

I am very happy that you guys are going to work on the GDAL's Python 
extension. I just want to add my humble comment for why I see it as very 
important:

Some time ago, I used GDAL 1.3.2 with Python to develop a import routine 
for data from the IPCC archives. That thing attract so much attention 
from GIS and Remote Sense students that I decide to build a installer 
with InnoSetup and give it away. They just needed to run my GDAL 
installer, Numeric, Python and PythonWin installer.

I am not going to comment on the current situation, but...

The point I want to make is that this combination of scripting language 
and GDAL is a very powerful tool for students to put their hands on the 
core of GIS technology in a very simple and efficient way. Not just 
reading about it or running somebody else's code.

That is what I think: They are not programmers, so we weed to make it 
easier for then. They use Windows and they need the PythonWin IDE 
because it has code completion and interactive debugging. After typing 
"gdal." they need to see what is available. They need to run step by 
step to check for their mistakes and to learn how that "programming 
stuff" works (sort of).

And I believe they will have it.

In a week!

Best regards,

Ivan


Frank Warmerdam wrote:
> Brian Hamlin wrote:
>> On Sep 20, 2007, at 9:59 PM, Christopher Barker wrote:
>>>
>>>> I think we should only do this for the next-gen bindings,
>>>
>>> I agree, though it might be better from a confusion stand point to 
>>> have them both the same -- I'm really not sure.
>>
>> Why not  leave the old name space with the old Python bindings, and 
>> preserve the old test suite in a folder with those names, all as 
>> legacy. Then the new namespace goes with the new bindings and (perhaps 
>> the same) tests but in a new folder with the new invocation. Sounds 
>> like a clean setup.
> 
> Brian,
> 
> No, this would not be acceptable.  For the near future old and new
> bindings will be supported, and the test suite has to be able to run
> against both.  It is acceptable for the test suite to skip specific tests
> when run against old or new bindings but most of it should continue to
> work with both for at least 1.5.
> 
> (BTW, when I say unacceptable, I mean I would vote -1 on such a proposal.
> I'm not the final word obviously - I could be overridden)
> 
>> That way if you ever look at a test file, you know for certain which 
>> generation you are looking at.
>> ps- extra bonus, do that for 1.5 and leave 1.4.3 working as it stands :)
>>
>> caveat - I dont use Python much
> 
> I use python every day, and write and maintain many of the test scripts.
> 
> Best regards,

From ari.jolma at tkk.fi  Sat Sep 22 02:22:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:51:02 2007
Subject: [Gdal-dev] Trying the python bindings in windows
In-Reply-To: <46EEA585.5020900@noaa.gov>
References: <46EB92B7.8020505@tkk.fi> <46EC59F2.70705@noaa.gov>
	<46ED41E5.4010605@tkk.fi> <46EEA585.5020900@noaa.gov>
Message-ID: <46F4B491.7040205@tkk.fi>

Christopher Barker kirjoitti:
> Ari Jolma wrote:
>> Thanks, then I just copied the files from build\lib.win32-2.5 to 
>> c:\python25\lib\site-packages and it seems to work.
>
> The "proper" way to do that is:
>
> python setup.py install
>
> In this case, it may amount to the same thing, but for some packages, 
> the install process can involve a bit more (if nothing else, it 
> usually, pre-compiles all the python code).

I guessed that and tried it:

c:\dev\gdal\swig\python>python setup.py install
running install
running build
running build_py
running build_ext
error: Python was built with Visual Studio 2003;
extensions must be built with a compiler than can generate compatible 
binaries.
Visual Studio 2003 was not found on this system. If you have Cygwin 
installed,
you can try compiling with MingW32, by passing "-c mingw32" to setup.py.

i.e., it ends in the same error as with build but giving -c mingw32 does 
not help here and the files are not really installed.

Ari

>
> -Chris
>
>
>


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma



From Chris.Barker at noaa.gov  Sat Sep 22 17:37:19 2007
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Trying the python bindings in windows
In-Reply-To: <46F4B491.7040205@tkk.fi>
References: <46EB92B7.8020505@tkk.fi> <46EC59F2.70705@noaa.gov>
	<46ED41E5.4010605@tkk.fi> <46EEA585.5020900@noaa.gov>
	<46F4B491.7040205@tkk.fi>
Message-ID: <46F58B0F.5000506@noaa.gov>

Ari Jolma wrote:
>> The "proper" way to do that is:
>> python setup.py install

> I guessed that and tried it:
> 
> c:\dev\gdal\swig\python>python setup.py install
.....
> error: Python was built with Visual Studio 2003;
> extensions must be built with a compiler than can generate compatible 
> binaries.
> Visual Studio 2003 was not found on this system. If you have Cygwin 
> installed,
> you can try compiling with MingW32, by passing "-c mingw32" to setup.py.

> i.e., it ends in the same error as with build but giving -c mingw32 does 
> not help here and the files are not really installed.

Well, the extension have to be compiled somehow. distutils can be used 
to build a binary installer package, but if no ones done that, then 
you've got to build it yourself.

By default, it looks for the VS2003 compiler that the "standard" python 
was built with. With Python 2.5, extensions can also be build with 
MingGW -- are you using 2.5?

Did you try:

python setup.py build --compiler=mingw32

If so, then something else is wrong. Using MingGW is described here:

python setup.py build --compiler=mingw32

and

http://boodebr.org/main/python/build-windows-extensions

NOTE: I haven't done this for GDAL recently, so it's possible that there 
are other issues. However, if this doesn't work, then it's a bug -- 
let's get if figured out and fixed.

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From maplabs at light42.com  Sun Sep 23 03:31:49 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Make on FreeBSD 6.1
In-Reply-To: <46F58B0F.5000506@noaa.gov>
References: <46EB92B7.8020505@tkk.fi> <46EC59F2.70705@noaa.gov>
	<46ED41E5.4010605@tkk.fi> <46EEA585.5020900@noaa.gov>
	<46F4B491.7040205@tkk.fi> <46F58B0F.5000506@noaa.gov>
Message-ID: <0BE92356-69A7-11DC-87F5-000A277A733C@light42.com>

I just tried to make GDAL on a FreeBSD machine... the configure went 
fine it seems
but when I typed make, it says 'no target to make', odd
so I try make -f GNUMakefile, and it says "GDALmake.opt" .. missing 
dependency operator etc

something is not right.. is this not GNU Make?
pointers appreciated

-Brian


From warmerdam at pobox.com  Sun Sep 23 11:19:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Make on FreeBSD 6.1
In-Reply-To: <0BE92356-69A7-11DC-87F5-000A277A733C@light42.com>
References: <46EB92B7.8020505@tkk.fi> <46EC59F2.70705@noaa.gov>
	<46ED41E5.4010605@tkk.fi> <46EEA585.5020900@noaa.gov>
	<46F4B491.7040205@tkk.fi> <46F58B0F.5000506@noaa.gov>
	<0BE92356-69A7-11DC-87F5-000A277A733C@light42.com>
Message-ID: <931f8ea90709230819y70f00e6eob410d1ec5e2a50cf@mail.gmail.com>

On 9/23/07, Brian Hamlin <maplabs@light42.com> wrote:
> I just tried to make GDAL on a FreeBSD machine... the configure went
> fine it seems
> but when I typed make, it says 'no target to make', odd
> so I try make -f GNUMakefile, and it says "GDALmake.opt" .. missing
> dependency operator etc
>
> something is not right.. is this not GNU Make?
> pointers appreciated

Brian,

Normally I think the default make on BSD is BSD make, not
gnumake. There should be a GNUmake package installable.
The executable may then be gmake or gnumake or something
like that.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From danhomerick at gmail.com  Sun Sep 23 12:20:11 2007
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Best way to test if one OGRLinearRing is inside of
	another?
Message-ID: <b9e170000709230920h4bdf5df9nb521c69d24b67fbf@mail.gmail.com>

Hello List-Readers,

I notice that the within/contains functions don't work for LinearRing's (as
is indicated in the documentation for rings), but they also don't work with
two LineStrings (not mentioned, that I see).

Is the best/only way to test if one ring is nested in another to convert the
LinearRings to LineStrings, then test each point of 'inner' for containment
in 'outer'?

I've got a bunch of coordinate sequences that I'm trying to convert into a
shapefile, if some context helps.

Cheers,
 -Dan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070923/cf16142d/attachment.html
From mateusz at loskot.net  Sun Sep 23 13:05:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Best way to test if one OGRLinearRing is inside of 
	another?
In-Reply-To: <b9e170000709230920h4bdf5df9nb521c69d24b67fbf@mail.gmail.com>
References: <b9e170000709230920h4bdf5df9nb521c69d24b67fbf@mail.gmail.com>
Message-ID: <61870.24.68.224.10.1190567123.squirrel@loskot.net>

Dan Homerick wrote:
> Hello List-Readers,
>
> I notice that the within/contains functions don't work for LinearRing's
> (as is indicated in the documentation for rings), but they also don't work
> with two LineStrings (not mentioned, that I see).

Dan,

You should know that spatial predicates are implemented using GEOS,
so you have to built GDAL/OGR with GEOS support in order to use them.

If this is not the case here and you already have GEOS support in OGR,
could you provide us with examples of geometries you're testing and
perhaps some code example?

> Is the best/only way to test if one ring is nested in another to convert
> the LinearRings to LineStrings, then test each point of 'inner' for
> containment in 'outer'?

Yes, I believe OGC predicates (within, contains, etc.) are the best tools
to solve this problem.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From danhomerick at gmail.com  Sun Sep 23 13:38:20 2007
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Best way to test if one OGRLinearRing is inside of
	another?
In-Reply-To: <61870.24.68.224.10.1190567123.squirrel@loskot.net>
References: <b9e170000709230920h4bdf5df9nb521c69d24b67fbf@mail.gmail.com>
	<61870.24.68.224.10.1190567123.squirrel@loskot.net>
Message-ID: <b9e170000709231038k78e1cf3ch9bab2a5c2693b7f@mail.gmail.com>

Yes, GEOS support is built in. OGRGeometryFactory::haveGEOS() returns true,
and the within/contains functions will return true when testing a point vs.
some (non-LinearRing) geometry.

Test code demonstrating that within/contains never returns true with two
nested, non-identical, closed LineStrings:

    /* a clockwise square starting at (1,2) (closed) */
    double x1[] = {1, 2, 2, 1, 1};
    double y1[] = {2, 2, 1, 1, 2};

    /* a clockwise square starting at (0,3) (closed) */
    double x2[] = {0, 3, 3, 0, 0};
    double y2[] = {3, 3, 0, 0, 3};

    OGRLineString inner;
    inner.setPoints(5, x1, y1);

    OGRLineString outer;
    outer.setPoints(5, x2, y2);

    std::cout << "**********************************************" <<
std::endl;
    std::cout << "inner.Contains(&outer): " << inner.Contains(&outer) <<
std::endl;
    std::cout << "inner.Within(&outer): " << inner.Within(&outer) <<
std::endl;
    std::cout << "outer.Contains(&inner): " << outer.Contains(&inner) <<
std::endl;
    std::cout << "outer.Within(&inner): " << outer.Within(&inner) <<
std::endl;

Results:
**********************************************
inner.Contains(&outer): 0
inner.Within(&outer): 0
outer.Contains(&inner): 0
outer.Within(&inner): 0


On 9/23/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> Dan Homerick wrote:
> > Hello List-Readers,
> >
> > I notice that the within/contains functions don't work for LinearRing's
> > (as is indicated in the documentation for rings), but they also don't
> work
> > with two LineStrings (not mentioned, that I see).
>
> Dan,
>
> You should know that spatial predicates are implemented using GEOS,
> so you have to built GDAL/OGR with GEOS support in order to use them.
>
> If this is not the case here and you already have GEOS support in OGR,
> could you provide us with examples of geometries you're testing and
> perhaps some code example?
>
> > Is the best/only way to test if one ring is nested in another to convert
> > the LinearRings to LineStrings, then test each point of 'inner' for
> > containment in 'outer'?
>
> Yes, I believe OGC predicates (within, contains, etc.) are the best tools
> to solve this problem.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070923/250a33ec/attachment.html
From ehrler-soft at gmx.de  Mon Sep 24 04:09:41 2007
From: ehrler-soft at gmx.de (Christoph Ehrler)
Date: Wed Nov 21 11:51:03 2007
Subject: Fwd: [Gdal-dev] Status Report KML Driver
In-Reply-To: <bc75359f0709210131h443bdab4q55c04ce322b65da9@mail.gmail.com>
References: <bc75359f0709120455s68afff43ydac97689321f3c49@mail.gmail.com>
	<bc75359f0709130225p378f0fdcn831af724e7b66d36@mail.gmail.com>
	<bc75359f0709200222t747707c0t9be6960cb5f99832@mail.gmail.com>
	<200709201234.48911.j.obi@troja.net>
	<bc75359f0709210131h443bdab4q55c04ce322b65da9@mail.gmail.com>
Message-ID: <bc75359f0709240109g4433389v957e70136d95c53c@mail.gmail.com>

somehow the conversation took place outside the mailing list...
sorry

---------- Forwarded message ----------
From: Christoph Ehrler <ehrler-soft@gmx.de>
Date: Sep 21, 2007 10:31 AM
Subject: Re: [Gdal-dev] Status Report KML Driver
To: Jens Oberender <j.obi@troja.net>


Hallo Jens,

wenn ich es richtig verstehe, dann bildest du erst die gesamte KML
Datei als DOM im Speicher ab...
this->poKMLFile->parse();

danach Klassifizierst du die KML-Tags/Elemente um Geometriedaten von
Nicht-Geometriedaten unterscheiden zu k?nnen...
this->poKMLFile->classifyNodes();

um dann die KML-Geometrien auszulesen und in OGR-Layers umzuwandeln
this->poKMLFile->findLayers(NULL);
...


Du hattest geschrieben, es ist notwendig die Struktur zu kennen.
Welche Probleme traten auf?? Eigentlich k?nnte man doch alles
vernachl?ssigen, was nicht <Placemark> untergeordnet ist und sich dann
nach und nach mit SAX durchhangeln...

Unser Problem ist, dass wir sehr grosse KML Dateien lesen und
schreiben wollen (?ber Netzwerk) und deswegen auf
Streaming-Funktionalit?t angewiesen sind (sprich SAX und nicht DOM).

Noch eine Frage:
Wie schalte ich die Debug-Meldungs-Ausgabe mit CPLDebug ein??


Danke und Gr?sse
Christoph


On 9/20/07, Jens Oberender <j.obi@troja.net> wrote:
> Hi Christoph
>
> Ich schreib jetzt einfach mal auf deutsch, das ist einfacher. :-)
>
> Am Donnerstag 20 September 2007 schrieben Sie:
> > Hello Jens,
> >
> > your GDAL/OGR KML driver works fine. The only thing is I have to
> > remove the <MultiGeometry> tags manually with that GoogleEarth
> > brackets the polylines when creating a route. But that is already on
> > your TODO list...
>
> Ja, hab ich vor bald zu implementieren...
>
> > I dug into the source code and did some UML modeling to understand
> > what's going on. Some questions do arise:
> >
> > You use eXpat - a SAX parser - for parsing the KML file but then you
> > build your own DOM. That's a bit strange since you could have used a
> > DOM parser at all that follows the official DOM specifications and
> > releases you from coding it yourself.
>
> Urspr?nglich war es nach SAX geplant, aber dann kamen beim implementieren
> Probleme auf, weil die Struktur erst mal analysiert werden muss. Deshalb hab
> ich dann einfach die Struktur nachempfunden.
>
> > Also it seems your DOM tree consists of strings entirely...
> > why didn't you map the KML file to internal classes with the
> > approriate data-types (string, float, integer) right at parsing time??
> > I'm not sure but isn't std::string much more memory consuming than
> > integer/float ??
>
> Ich wollte die Knoten m?glichst generisch halten, so dass ich sie f?r alle
> Elemente verwenden kann. Deshalb sind die Felder auch Strings, weil ich sie
> dann in sp?teren Aktionen auswerten kann.
>
> > Do you really represent the whole KML file as a DOM because elements
> > like <Style> and <LookAt> are not mappable to OGR but are included in
> > your DOM?? I found no checks to exclude these elements...
> > If this is true the main benefit from using a SAX parser - that is
> > being able to parse KML files larger than the memory / low memory
> > consumption - would be gone...
>
> Ich nehm nur eine Untermenge der KML-Tags in den Baum auf. Entschieden wird
> das in der KMLVector Klasse. Sp?ter soll dann noch eine KMLRaster Klasse
> dazukommen, um KMLs in Raster zu laden.
>
> Das Speicherproblem kann man glaube ich nicht umgehen. In der KML Datasource
> Methode open kannst du die einzelnen Schritte sehen, mit der ich die KML zur
> sp?teren Behandlung aufbereite.
>
> Noch Fragen???
>
> Ciao,
>         Jens
>
> PS: Ab und zu bin ich auch im IRC #GDAL under dem Nick D|dge
>
>


From brownrigg at sunflower.com  Mon Sep 24 17:18:58 2007
From: brownrigg at sunflower.com (Rick Brownrigg)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] History of Java support...
Message-ID: <46F829C2.4000001@sunflower.com>

Hi,

I'm curious as to the state of the Java bindings support for GDAL.  It 
looks like as of 1.4.2, it is considered unsupported.  I'm looking for 
insights as to why:  is it as simple as "no one has stepped up to the 
plate", or more complex like "folks have found the performance under 
java to be too slow/unstable/..."?   I'm very interested in using the 
GDAL API with Java, and would consider supporting it if its simply a 
matter of a volunteer.  But I'd certainly like to hear about why Java is 
not more actively promoted presently.

Thanks,
Rick Brownrigg


From szekerest at gmail.com  Mon Sep 24 19:39:04 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] History of Java support...
In-Reply-To: <46F829C2.4000001@sunflower.com>
References: <46F829C2.4000001@sunflower.com>
Message-ID: <f3b73b7d0709241639uf251bccq73ecbbeff5295ec4@mail.gmail.com>

Hi Rick,

There have been a couple of the folks supporting the java bindings in
the past but none of them could continue this effort due to the lack
of their time. So you are welcomed if you can provide a kinda
permanent support for this binding. I'm not aware of any serious
issues from the java side right now.

Best regards,

Tamas

2007/9/24, Rick Brownrigg <brownrigg@sunflower.com>:
> Hi,
>
> I'm curious as to the state of the Java bindings support for GDAL.  It
> looks like as of 1.4.2, it is considered unsupported.  I'm looking for
> insights as to why:  is it as simple as "no one has stepped up to the
> plate", or more complex like "folks have found the performance under
> java to be too slow/unstable/..."?   I'm very interested in using the
> GDAL API with Java, and would consider supporting it if its simply a
> matter of a volunteer.  But I'd certainly like to hear about why Java is
> not more actively promoted presently.
>
> Thanks,
> Rick Brownrigg
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From xuex_chen at 126.com  Mon Sep 24 22:02:21 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] return  from   sdedataset.cpp
Message-ID: <1809813.109741190685741727.JavaMail.coremail@bj126app54.126.com>

hi, ALL.  I try to read  raster data from sde cinfigured oracle database.  My program always returned from SDEDataset::Open( GDALOpenInfo * poOpenInfo ), traced here://////////////////////////////////////////GDALDataset *SDEDataset::Open( GDALOpenInfo * poOpenInfo )
{........................ SDEDataset *poDS; poDS = new SDEDataset();............../* -------------------------------------------------------------------- */
/*      If we were given a layer name, use that directly, otherwise     */
/*      query for subdatasets.                                          */
/* -------------------------------------------------------------------- */  if (CSLCount( papszTokens ) == 6 ) {......}else {
 ...........//without given a layer name,we get each subdataset.
        return FALSE;// why? when runs to the ELSE{} always return FALSE. //Should we drop this last sentence "return FALSE;"?
    }
    CSLDestroy( papszTokens);
    return( poDS );
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070925/0a4fe537/attachment.html
From xuex_chen at 126.com  Mon Sep 24 23:00:15 2007
From: xuex_chen at 126.com (chenxuexia)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Unhandled exception in myprogram.exe (SDE.DLL) :
 0x00000005:Access Violation
Message-ID: <23379061.164561190689215477.JavaMail.coremail@bj126app54.126.com>

The following code is for reading raster from sde-oracle DB: /////////////////////////////////////////////////////////// BOOL DEM::sdeReadDem(const char *szFileName)
{ GDALRegister_SDE();
 GDALOpenInfo OpenInfo(szFileName , GA_ReadOnly);
 GDALDataset  *poDataset;
 poDataset=SDEDataset::Open(&OpenInfo);.....//poDataset !=NULL, read data sucessfully! SDEDataset *pTempDS=(SDEDataset *)poDataset;
 if(pTempDS)
 {
  delete pTempDS;//Access Violation occured!-------->access violate with SDE.DLL//Directly  deletepoDataset also  lead to violation.
  pTempDS = NULL;
 }
 return TRUE;
}/////////////////////////////////////////////////////////Any approach to resolve it?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070925/84ae5433/attachment.html
From warmerdam at pobox.com  Tue Sep 25 12:01:20 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] return from sdedataset.cpp
In-Reply-To: <1809813.109741190685741727.JavaMail.coremail@bj126app54.126.com>
References: <1809813.109741190685741727.JavaMail.coremail@bj126app54.126.com>
Message-ID: <931f8ea90709250901k2e731d92u89590a6007c6752f@mail.gmail.com>

Xuexia,

Reviewing the sdedataset.cpp code I agree there is a problem
that the "else" case looks very broken.  Removing the return
FALSE might be sufficient.

Could you file a bug in Trac on this issue, and hopefully
Howard will soon have a chance to address it.

I'd add that the Open() method should be returning NULL on
failure, not FALSE.

Best regards,

On 9/24/07, chenxuexia <xuex_chen@126.com> wrote:
> hi, ALL.
>   I try to read  raster data from sde cinfigured oracle database.  My
> program always returned from SDEDataset::Open( GDALOpenInfo * poOpenInfo ),
> traced here:
> //////////////////////////////////////////
> GDALDataset *SDEDataset::Open( GDALOpenInfo * poOpenInfo )
> {
> ............
> ............
>  SDEDataset *poDS;
>  poDS = new SDEDataset();
> ..............
> /*
> --------------------------------------------------------------------
> */
> /*      If we were given a layer name, use that directly, otherwise     */
> /*      query for subdatasets.
>             */
> /*
> --------------------------------------------------------------------
> */
>   if (CSLCount( papszTokens ) == 6 ) {
> ......
> }
> else {
>  ...........//without given a layer name,we get each subdataset.
>          return FALSE;
> // why? when runs to the ELSE{} always return FALSE.
> //Should we drop this last sentence "return FALSE;"?
>     }
>     CSLDestroy( papszTokens);
>     return( poDS );
> }
>
> ________________________________
>    Yeah.net                     >>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From halligan at geog.ucsb.edu  Tue Sep 25 15:18:43 2007
From: halligan at geog.ucsb.edu (Kerry Halligan)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Python error importing GDAL using 3rd party IDE
Message-ID: <63c145660709251218s7adf61d0p23e90a23002c2ad2@mail.gmail.com>

I am new to python and GDAL and am having trouble using GDAL from anything
other than the standard python command line or the Python IDLE Tk GUI.  If I
try to import GDAL using any 3rd party IDE's version of the Python shell I
get the following errors:

File "C:\Python24\Lib\site-packages\gdal\gdal.py", line 191, in ?
    import _gdal
ImportError: DLL load failed: The specified module could not be found.

I have tried this from the following IDEs
1) SPE
2) pyDev
3) Wing

I am running Python on a Windows XP workstation and have installed it all in
the following manner:
1) Downloaded and installed Python 2.4.4 using the installer (
python-2.4.4.msi) from http://www.python.org/download/
2) Downloaded and installed gdal-python-13.win32-py2.4.exe from
http://www.urbansim.org/download/files/third-party/.  When I tried a more
recent version found at http://download.osgeo.org/gdal/win32/ the
installation did not generate a /gdal folder and could not be loaded as a
module even from the Python command line
3) Created a PYTHONPATH environment variable with the following value:
C:\Python24\Lib\site-packages\gdal

Can anyone provide insight here?  Did I go about the installation of GDAL in
the wrong way?  Is there some other way to register the GDAL module so that
3rd party IDEs can see it?  If anyone out there has a step-by-step
instruction manual for getting Python/GDAL/numpy/scipy and an IDE running
that a total newbie could understand I would be grateful.

Thanks for any help that can be offered,

Kerry

-- 
Kerry Halligan
halligan.kerry@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070925/60ccbce8/attachment.html
From hobu.inc at gmail.com  Tue Sep 25 16:23:36 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] return from sdedataset.cpp
In-Reply-To: <931f8ea90709250901k2e731d92u89590a6007c6752f@mail.gmail.com>
References: <1809813.109741190685741727.JavaMail.coremail@bj126app54.126.com>
	<931f8ea90709250901k2e731d92u89590a6007c6752f@mail.gmail.com>
Message-ID: <C62339E8-6321-42BE-8855-CA40907D420B@gmail.com>

I have updated the Open method of the SDE driver to return NULL  
instead of FALSE in all of its error cases.
<http://trac.osgeo.org/gdal/changeset/12239>

Howard

On Sep 25, 2007, at 11:01 AM, Frank Warmerdam wrote:

> Xuexia,
>
> Reviewing the sdedataset.cpp code I agree there is a problem
> that the "else" case looks very broken.  Removing the return
> FALSE might be sufficient.
>
> Could you file a bug in Trac on this issue, and hopefully
> Howard will soon have a chance to address it.
>
> I'd add that the Open() method should be returning NULL on
> failure, not FALSE.
>
> Best regards,
>
> On 9/24/07, chenxuexia <xuex_chen@126.com> wrote:
>> hi, ALL.
>>   I try to read  raster data from sde cinfigured oracle database.  My
>> program always returned from SDEDataset::Open( GDALOpenInfo *  
>> poOpenInfo ),
>> traced here:
>> //////////////////////////////////////////
>> GDALDataset *SDEDataset::Open( GDALOpenInfo * poOpenInfo )
>> {
>> ............
>> ............
>>  SDEDataset *poDS;
>>  poDS = new SDEDataset();
>> ..............
>> /*
>> --------------------------------------------------------------------
>> */
>> /*      If we were given a layer name, use that directly,  
>> otherwise     */
>> /*      query for subdatasets.
>>             */
>> /*
>> --------------------------------------------------------------------
>> */
>>   if (CSLCount( papszTokens ) == 6 ) {
>> ......
>> }
>> else {
>>  ...........//without given a layer name,we get each subdataset.
>>          return FALSE;
>> // why? when runs to the ELSE{} always return FALSE.
>> //Should we drop this last sentence "return FALSE;"?
>>     }
>>     CSLDestroy( papszTokens);
>>     return( poDS );
>> }
>>
>> ________________________________
>>  ? ? Yeah.net ? ? ? ? ? ? ??? ? ? ?  
>> ? ? ? ? ? ? ? ? ? ? >>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>
>
> -- 
> --------------------------------------- 
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,  
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for  
> Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From frdcn at hotmail.com  Tue Sep 25 17:08:34 2007
From: frdcn at hotmail.com (godofredo contreras)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] OGRLayer::TestCapability for mysql question
Message-ID: <BAY110-W681694D69430B94D14F46B2B70@phx.gbl>

Hi:

I am working with gdal 1.4.2 and the mysql driver, ogrinfo reports read and write support
for mysql. TestCapabilities method only reports:

Random Read
Fast Spatial filter
Fast feature count

OGRLayer documentation says that "SequentialWrite" is related to CreateFeature()
and "RandomWrite" is related with SetFeature()

I have tested both methods and both of them work. Is this a bug of TestCapabilities
in mysql driver?

Best Regards

Godofredo Contreras


_________________________________________________________________
Kick back and relax with hot games and cool activities at the Messenger Caf?.
http://www.cafemessenger.com?ocid=TXT_TAGLM_SeptWLtagline
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070925/59e4017b/attachment.html
From bkpark at ucdavis.edu  Tue Sep 25 18:25:57 2007
From: bkpark at ucdavis.edu (Bborie Park)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] .hdr labelled binary float raster
Message-ID: <46F98AF5.3080505@ucdavis.edu>

Howdy all,

I'm working on a large set of FLT32 binary files with two possible 
headers (ESRI and ENVI).  When I use the ENVI headers, the computed 
min/max values (-9999, 33.735) are correct to the raster while the ESRI 
headers have min/max values of 0 to 255.

The outputs from gdalinfo with each header are:

ENVI header:

C:\Documents and Settings\dustymugs\Desktop\TOPS>gdalinfo -mm 
TOPSTMAX.CA1KM.20070924.flt
Driver: ENVI/ENVI .hdr Labelled
Size is 738, 1203
Coordinate System is:
LOCAL_CS["dayment",
     UNIT["Meter",1]]
Origin = (-2037330.654000000100000,-39780.983000000000000)
Pixel Size = (1000.000000000000000,-1000.000000000000000)
Corner Coordinates:
Upper Left  (-2037330.654,  -39780.983)
Lower Left  (-2037330.654,-1242780.983)
Upper Right (-1299330.654,  -39780.983)
Lower Right (-1299330.654,-1242780.983)
Center      (-1668330.654, -641280.983)
Band 1 Block=738x1 Type=Float32, ColorInterp=Undefined
   Description = ROI Mask (westernHemp_1km_nearest)
     Computed Min/Max=-9999.000,33.735

ESRI header:

C:\Documents and Settings\dustymugs\Desktop\TOPS>gdalinfo -mm 
TOPSTMAX.CA1KM.20070924.flt
Driver: EHdr/ESRI .hdr Labelled
Size is 738, 1203
Coordinate System is `'
Origin = (-2037330.654000000100000,-39280.983000000007000)
Pixel Size = (1000.000000000000000,-1000.000000000000000)
Corner Coordinates:
Upper Left  (-2037330.654,  -39280.983)
Lower Left  (-2037330.654,-1242280.983)
Upper Right (-1299330.654,  -39280.983)
Lower Right (-1299330.654,-1242280.983)
Center      (-1668330.654, -640780.983)
Band 1 Block=738x1 Type=Byte, ColorInterp=Undefined
     Computed Min/Max=0.000,255.000
   NoData Value=-9999

When I import the raster with the ESRI header to ArcInfo, the min and 
max ranges are correct.

Is there something wrong with gdal working with the ESRI header when 
compared to the ENVI header?  For the sake of repeatability, I've posted 
the raster and associated files (hdr and prj) to:

http://dev.calsurv.org/TOPS.zip

Any details and suggestions would be greatly appreciated.

Thanks,
Bborie



-- 
Bborie Park
Programmer
Center for Vectorborne Diseases
UC Davis
530-752-8380
bkpark@ucdavis.edu

From warmerdam at pobox.com  Tue Sep 25 21:29:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] .hdr labelled binary float raster
In-Reply-To: <46F98AF5.3080505@ucdavis.edu>
References: <46F98AF5.3080505@ucdavis.edu>
Message-ID: <931f8ea90709251829t17bdbde3jc82bc3ee9add1ba4@mail.gmail.com>

On 9/25/07, Bborie Park <bkpark@ucdavis.edu> wrote:
> C:\Documents and Settings\dustymugs\Desktop\TOPS>gdalinfo -mm
> TOPSTMAX.CA1KM.20070924.flt
> Driver: EHdr/ESRI .hdr Labelled
> Size is 738, 1203
> Coordinate System is `'
> Origin = (-2037330.654000000100000,-39280.983000000007000)
> Pixel Size = (1000.000000000000000,-1000.000000000000000)
> Corner Coordinates:
> Upper Left  (-2037330.654,  -39280.983)
> Lower Left  (-2037330.654,-1242280.983)
> Upper Right (-1299330.654,  -39280.983)
> Lower Right (-1299330.654,-1242280.983)
> Center      (-1668330.654, -640780.983)
> Band 1 Block=738x1 Type=Byte, ColorInterp=Undefined
>      Computed Min/Max=0.000,255.000
>    NoData Value=-9999
>
> When I import the raster with the ESRI header to ArcInfo, the min and
> max ranges are correct.

Bborie,

I'm not sure how arc/info decides that these files are floating
point, but GDAL needs the keyword NBITS with the value 32
and the keyword PIXELTYPE with the value FLOAT to recognise
an EHDR dataset as being floating point.

I believe this is causing the issue you see.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Sep 25 21:33:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] OGRLayer::TestCapability for mysql question
In-Reply-To: <BAY110-W681694D69430B94D14F46B2B70@phx.gbl>
References: <BAY110-W681694D69430B94D14F46B2B70@phx.gbl>
Message-ID: <931f8ea90709251833p115577d4p4347ea1e62b2e200@mail.gmail.com>

On 9/25/07, godofredo contreras <frdcn@hotmail.com> wrote:
>
> Hi:
>
> I am working with gdal 1.4.2 and the mysql driver, ogrinfo reports read and
> write support
> for mysql. TestCapabilities method only reports:
>
> Random Read
> Fast Spatial filter
> Fast feature count
>
> OGRLayer documentation says that "SequentialWrite" is related to
> CreateFeature()
> and "RandomWrite" is related with SetFeature()
>
> I have tested both methods and both of them work. Is this a bug of
> TestCapabilities
> in mysql driver?

Godofredo,

This is a bug in the driver TestCapabilities() function.  I would
appreciate it if you could file a bug in trac on this issue.

Thanks,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From danhomerick at gmail.com  Tue Sep 25 22:38:25 2007
From: danhomerick at gmail.com (Dan Homerick)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Angular or linear coordinates for a shapefile
Message-ID: <b9e170000709251938j450147b1g5a605a1fac508687@mail.gmail.com>

Hello List,

This probably something of a naive question -- please don't hesitate to
point out what "should be obvious."

I'm creating polygon-filled shapefiles using data extracted from a geotif.
To do this, I'm using the OGRLinearRing::SetPoints() method and then adding
the ring(s) to a polygon.

My question is, what coordinate system should I be setting the points with?
I want the resulting shapefile to still be georeferenced. The way I see it,
I have 3 options, one of which is clearly wrong:

1. Pixel/Line coordinates from the image. (wrong)
2. Linear geo coords, resulting from GDALApplyGeoTransform.
3. Angular geo coords, resulting from something like:

/**********************************************************/
OGRSpatialReference* m_TargetSRS = m_SourceSRS.CloneGeogCS();

m_LinearCoordToAngCoord = OGRCreateCoordinateTransformation(
                                              &m_SourceSRS,
                                              m_TargetSRS );

m_LinearCoordToAngCoord->Transform(...)
/**********************************************************/
where m_SourceSRS is set from the GeoTiff.

Will my shapefiles be properly georeferenced if I use the second method (and
a .prj file is used)?

Will the be properly georeferenced if I use the third (without a .prj file)?

Also, what's the correct names for the "linear geo coords" and "angular geo
coords"?

Thanks!
- Dan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070925/d74436e8/attachment.html
From mateusz at loskot.net  Wed Sep 26 01:00:45 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] HTTP driver dependency
Message-ID: <61519.24.68.224.10.1190782845.squirrel@loskot.net>

Folks,

I've noticed some parts of the OGR depend on HTTP driver.
Is this intentional or it's a kind of work being in-progress?

If the former, shouldn't the HTTP driver be optional?
Ie. I can not compile OGRSpatialReference because HTTP driver (so the
libcurl) is used in importFromUrl.

Any insights?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From hobu.inc at gmail.com  Wed Sep 26 01:37:40 2007
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] HTTP driver dependency
In-Reply-To: <61519.24.68.224.10.1190782845.squirrel@loskot.net>
References: <61519.24.68.224.10.1190782845.squirrel@loskot.net>
Message-ID: <984ADEBA-99A7-4628-B3D2-7338205B4D08@gmail.com>

Mateusz,

Oops, this is my fault.  I think we should no-op ImportFromUrl if  
curl is not available, and I forgot to do so when I wrote it.

Howard

On Sep 26, 2007, at 12:00 AM, Mateusz Loskot wrote:

> Folks,
>
> I've noticed some parts of the OGR depend on HTTP driver.
> Is this intentional or it's a kind of work being in-progress?
>
> If the former, shouldn't the HTTP driver be optional?
> Ie. I can not compile OGRSpatialReference because HTTP driver (so the
> libcurl) is used in importFromUrl.
>
> Any insights?
>
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Sep 26 02:03:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] HTTP driver dependency
In-Reply-To: <984ADEBA-99A7-4628-B3D2-7338205B4D08@gmail.com>
References: <61519.24.68.224.10.1190782845.squirrel@loskot.net>
	<984ADEBA-99A7-4628-B3D2-7338205B4D08@gmail.com>
Message-ID: <931f8ea90709252303j2254fbafq396b600f218bbe60@mail.gmail.com>

On 9/25/07, Howard Butler <hobu.inc@gmail.com> wrote:
> Mateusz,
>
> Oops, this is my fault.  I think we should no-op ImportFromUrl if
> curl is not available, and I forgot to do so when I wrote it.

Howard / Mateusz,

The dependencies on curl are supposed to be resolved at
the gdal/port/cpl_http.cpp level.  The CPLHTTPFetch() function
should just return an error at runtime when curl is not available.

I don't understand why we should see a direct dependency on
curl from the importFromUrl.

Perhaps the two of you can chat with me tomorrow if the
solution is not obvious.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Sep 26 02:08:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Angular or linear coordinates for a shapefile
In-Reply-To: <b9e170000709251938j450147b1g5a605a1fac508687@mail.gmail.com>
References: <b9e170000709251938j450147b1g5a605a1fac508687@mail.gmail.com>
Message-ID: <931f8ea90709252308g44c2d383la8258e709e5e8174@mail.gmail.com>

On 9/25/07, Dan Homerick <danhomerick@gmail.com> wrote:
> Hello List,
>
> This probably something of a naive question -- please don't hesitate to
> point out what "should be obvious."
>
> I'm creating polygon-filled shapefiles using data extracted from a geotif.
> To do this, I'm using the OGRLinearRing::SetPoints() method and then adding
> the ring(s) to a polygon.
>
> My question is, what coordinate system should I be setting the points with?
> I want the resulting shapefile to still be georeferenced. The way I see it,
> I have 3 options, one of which is clearly wrong:
>
> 1. Pixel/Line coordinates from the image. (wrong)
> 2. Linear geo coords, resulting from GDALApplyGeoTransform.
> 3. Angular geo coords, resulting from something like:
>
> /**********************************************************/
> OGRSpatialReference* m_TargetSRS = m_SourceSRS.CloneGeogCS();
>
> m_LinearCoordToAngCoord =
> OGRCreateCoordinateTransformation(
>                                               &m_SourceSRS,
>                                               m_TargetSRS
> );
>
> m_LinearCoordToAngCoord->Transform(...)
> /**********************************************************/
> where m_SourceSRS is set from the GeoTiff.
>
> Will my shapefiles be properly georeferenced if I use the second method (and
> a .prj file is used)?

Dan,

Yes

>  Will the be properly georeferenced if I use the third (without a .prj
> file)?

They won't be *properly* georeferenced, but they could still
be considered georeferenced with an implicit coordinate system.
But the third method with a .prj containing the geographic
coordinate system would be properly georeferenced.

> Also, what's the correct names for the "linear geo coords" and "angular geo
> coords"?

"linear geo coords" = Project Coordinate System (PROJCS)
"angular geo coords" = Geographic Coordinate System (GEOGCS)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tommy.jansson at kongsberg.com  Wed Sep 26 10:24:06 2007
From: tommy.jansson at kongsberg.com (tjansson)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Problems retrieving z-values
Message-ID: <12902088.post@talk.nabble.com>


I am writing a library which reads S-57 files (of type *.000) and loads
selected geometies into a custom class structure. The files are read and
content handled using the OGR Simple Features Library for C++.

As far as I have understood the various geometries are divided into two
categories; 2D geometry types with XY-data, and 2.5D geometry XYZ-data.

I am interested in geometries of type 2.5D (i.e with XYZ-data). In my code
there is a function which parses geometry objects using a switch that check
the geometry type (and handles it accordingly). I have read several maps
with success (e.g. downloaded from NOAA), except that the Z-value is always
set to 0 (zero). I've also noticed - when debugging - that the switch never
hits on geometry type "wkbPoint25D" (or any other 2.5D type), which might
explain the Z-value.

Is the code i have written doing something wrong, because I never get a hit
on any 2.5D types, or are the maps I have downloaded the cause (because they
don't contain any 2.5D types)?
-- 
View this message in context: http://www.nabble.com/Problems-retrieving-z-values-tf4522698.html#a12902088
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From bkpark at ucdavis.edu  Wed Sep 26 11:52:35 2007
From: bkpark at ucdavis.edu (Bborie Park)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] .hdr labelled binary float raster
In-Reply-To: <931f8ea90709251829t17bdbde3jc82bc3ee9add1ba4@mail.gmail.com>
References: <46F98AF5.3080505@ucdavis.edu>
	<931f8ea90709251829t17bdbde3jc82bc3ee9add1ba4@mail.gmail.com>
Message-ID: <46FA8043.5000503@ucdavis.edu>

Thanks Frank,

That solves the issue!

-bborie

Frank Warmerdam wrote:
> On 9/25/07, Bborie Park <bkpark@ucdavis.edu> wrote:
>> C:\Documents and Settings\dustymugs\Desktop\TOPS>gdalinfo -mm
>> TOPSTMAX.CA1KM.20070924.flt
>> Driver: EHdr/ESRI .hdr Labelled
>> Size is 738, 1203
>> Coordinate System is `'
>> Origin = (-2037330.654000000100000,-39280.983000000007000)
>> Pixel Size = (1000.000000000000000,-1000.000000000000000)
>> Corner Coordinates:
>> Upper Left  (-2037330.654,  -39280.983)
>> Lower Left  (-2037330.654,-1242280.983)
>> Upper Right (-1299330.654,  -39280.983)
>> Lower Right (-1299330.654,-1242280.983)
>> Center      (-1668330.654, -640780.983)
>> Band 1 Block=738x1 Type=Byte, ColorInterp=Undefined
>>      Computed Min/Max=0.000,255.000
>>    NoData Value=-9999
>>
>> When I import the raster with the ESRI header to ArcInfo, the min and
>> max ranges are correct.
> 
> Bborie,
> 
> I'm not sure how arc/info decides that these files are floating
> point, but GDAL needs the keyword NBITS with the value 32
> and the keyword PIXELTYPE with the value FLOAT to recognise
> an EHDR dataset as being floating point.
> 
> I believe this is causing the issue you see.
> 
> Best regards,

-- 
Bborie Park
Programmer
Center for Vectorborne Diseases
UC Davis
530-752-8380
bkpark@ucdavis.edu

From mrosen at lizardtech.com  Wed Sep 26 19:24:52 2007
From: mrosen at lizardtech.com (Michael S. Rosen)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Customized Raster Format support for ArcGIS
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD12019D534D@sea-srv-ms3.lizardtech.com>

The string below refers to the GDAL headers and libs that can be used to
to make GDAL plugin drivers which can be called by ArcGIS.  Can anyone
point me to these? 

 I've built sample drivers using the trunk, staged them where ArcGIS
finds them (I can see the Load/Unload in the debugger) but they don't
seem to get called by the gdal13.dll that shipped with ArcGIS 9.2.  Is
there something else I'm missing?

Thanks.

msr


> -----Original Message-----
> From: Frank Warmerdam [mailto:HYPERLINK
"http://lists.maptools.org/mailman/listinfo/gdal-dev"warmerdam at
pobox.com <mailto:HYPERLINK> ] 
> Sent: Wednesday, June 06, 2007 12:22 PM
> To: Peng Gao
> Cc: Lucena, Ivan; gdal-dev
> Subject: Re: [Gdal-dev] Building a customized raster format 
> in ArcGIS 9.2using GDAL
> 
> Peng Gao wrote:
> > ArcGIS uses gdalplugins directory under the directory 
> containing the 
> > currently running .exe ("ArcGIS\Bin\gdalplugins").
> > 
> > We have found that, while there are success stories, it's hard to 
> > build a plugin using standard GDAL release, and make it 
> work with the 
> > gdal*.dll distributed with a particular ArcGIS release, because of 
> > header mismatch, and etc. We plan to make the matching 
> include and lib 
> > files available for download if there is enough interest. Also on 
> > Windows ArcGIS 92, and its GDAL library, are built using
>  > MSVC7.
> 
> Gao,
> 
> It would be desirable, in my mind, if we could have ArcGIS 
> using a build of GDAL that is ABI compatible with a stable 
> release of GDAL and matching the build configuration of the 
> binaries distributed by the GDAL project.
> 
> For instance, if ArcGIS 9.3 uses the 1.4-esri branch of GDAL, 
> built with
> vc7 as we use for the GDAL binary builds, it should be 
> possible to drop any of the plugins distributed with GDAL's 
> win32 builds.  Also, the gdal win32 sdk could be easily used 
> to develop additional plugins.
> 
> I'm also hoping to get MapGuide OS distributed with GDAL 
> builds corresponding to our "official release binaries" for 
> the same reason.
> 
> After largely ignoring the issue of win32 binary releases 
> targetted at a particular stable ABI (such as GDAL 1.4) I'm 
> now growing quite keen on the idea, and the value of being 
> able to prepare plugins seperately and use them widely.
> 

Frank,

Great idea. The new branch will make this possible for 9.3, and in the
future
releases we can try to sync up with regular GDAL releases.

Thanks,
Gao, Peng

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070926/858f591c/attachment.html
From mateusz at loskot.net  Wed Sep 26 19:55:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Problems retrieving z-values
In-Reply-To: <12902088.post@talk.nabble.com>
References: <12902088.post@talk.nabble.com>
Message-ID: <1551.64.251.72.166.1190850920.squirrel@loskot.net>

tjansson wrote:
>
> As far as I have understood the various geometries are divided into two
> categories; 2D geometry types with XY-data, and 2.5D geometry XYZ-data.

Tommy,

Yes.

> [...]
> Is the code i have written doing something wrong, because I never get a
> hit on any 2.5D types, or are the maps I have downloaded the cause (because
> they don't contain any 2.5D types)?

It's hard to say what's the exact reason. Could you provide some snippet
of your code + ideally a piece of data?
As I see, we don't have any tests of 25D geometries for S-57 so I'm
interested in updating the test suite accordingly.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tommy.jansson at kongsberg.com  Thu Sep 27 03:28:23 2007
From: tommy.jansson at kongsberg.com (tjansson)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Problems retrieving z-values
In-Reply-To: <1551.64.251.72.166.1190850920.squirrel@loskot.net>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
Message-ID: <12916176.post@talk.nabble.com>


> Could you provide some snippet of your code + ideally a piece of data?

> As I see, we don't have any tests of 25D geometries for S-57 so I'm

> interested in updating the test suite accordingly.




A part of the code traverses thourgh all layers and extract each feature...


while((poFeature = poLayer->GetNextFeature()) != NULL)


...with appurtenant feature definition...


poFDefn = poLayer->GetLayerDefn()


...and geometry...


poGeometry = poFeature->GetGeometryRef()


These properties - feature, feature definition and geometry - are passed as
parameters to a parser function...


parseGeometry(..., poGeometry, poFDefn, poFeature, ...);


In the parserGeometry function there the geometry type is retieved...


OGRwkbGeometryType geometryType = poFDefn->GetGeomType();


...and a switch is used to check what type is it...



switch(geometryType)

{

...

case wkbPoint:

poPoint = (OGRPoint *) poGeometry;

double dX = poPoint->getX();

double dY = poPoint->getY();

...

case wkbPoint25D:

poPoint = (OGRPoint *) poGeometry;

double dX = poPoint->getX();

double dY = poPoint->getY();

double dY = poPoint->getZ();

...

}


I the switch have cases for all the different geometry types - wkbUnknown,
wkbPoint, wkbLineString, wkbPolygon, wkbMultiPoint, wkbMultiLineString,
wkbMultiPolygon, wkbGeometryCollection, wkbNone, wkbLinearRing, wkbPoint25D,
wkbLineString25D, wkbPolygon25D, wkbMultiPoint25D, wkbMultiLineString25D, 
wkbMultiPolygon25D, wkbGeometryCollection25D - but, as stated before, the
code never hits on any of the 2.5D types cases.


The maps I am user are downloaded from NOAA (
http://chartmaker.ncd.noaa.gov/mcd/enc/download.htm
http://chartmaker.ncd.noaa.gov/mcd/enc/download.htm).  One map I have used
is one called  http://www.nabble.com/file/p12916176/US2AK91M.000
US2AK91M.000 . This is converter into a simple dat-file (
http://www.nabble.com/file/p12916176/s57output.dat s57output.dat )
containing XYZ-data. The Z-data has until now, always been 0 (zero), but the
XY-data are ok as far as I can tell.


http://www.nabble.com/file/p12916176/US2AK91M_000_pic.jpg 

Above is an image drawn with GNUPlot from dat-file generated by the code.


Don't know if this helps in identifying the problem.




-- 
View this message in context: http://www.nabble.com/Problems-retrieving-z-values-tf4522698.html#a12916176
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070927/0b1cbe79/attachment.html
From maplabs at light42.com  Thu Sep 27 03:38:44 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <1551.64.251.72.166.1190850920.squirrel@loskot.net>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
Message-ID: <ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>

If I have a database with a table, and that table has fields Latitude 
and Longitude, in double precision. What are some ways I can enable OGR 
to see that as a Point?  I am asking for all the steps.. I assume there 
are many ways to begin

thanks in advance
   -Brian





From perrygeo at gmail.com  Thu Sep 27 04:57:13 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
Message-ID: <5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>

Brain,

 The "best" way would be to

1) install postgis in your pg database if you have not done so already.
2) Create a point geometry column in your table using AddGeometryColumn()
3) Do an update with the postgis MakePoint() function (ie UPDATE table
SET geom = SETSRID(MakePoint(lon, lat),4326) )

The SETSRID(.., 4326) function is used to define the resulting
geometry as geographic coordinates with a WGS84 datum. If your
coordinate system is different, you'll need to use the proper spatial
reference id code.

- matt

On 9/27/07, Brian Hamlin <maplabs@light42.com> wrote:
> If I have a database with a table, and that table has fields Latitude
> and Longitude, in double precision. What are some ways I can enable OGR
> to see that as a Point?  I am asking for all the steps.. I assume there
> are many ways to begin
>
> thanks in advance
>    -Brian
>
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


-- 
Matthew T. Perry
http://www.perrygeo.net

"Never ascribe to malice, that which can be adequately explained by
incompetence."

From oliver.eichler at gmx.de  Thu Sep 27 05:37:31 2007
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Handle raster maps of different scale
Message-ID: <20070927093731.34650@gmx.net>

Hi,

I have several raster maps of the same area with different scale (GeoTiff). Depending on the viewport size (long / lat) I would like to select the best map by scale to display. 

I wonder if I have to reinvent the wheel or if I can get that functionality by GDAL somehow. 

Oliver

From marcello_ferrero at yahoo.com  Thu Sep 27 07:43:37 2007
From: marcello_ferrero at yahoo.com (marcello ferrero)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Affine Transformation and Calibration Equation for
	Maptech/BSB format
Message-ID: <694767.43926.qm@web60120.mail.yahoo.com>

Hi all, 
I'm quite new to gdal and GIS in general and I need some help here.

I'm trying to figure out how to make the PixelToCoord and CoordToPixel transformations
for an open source project (amerigo) where I would like to use the gdal library in order to read NOAA/BSB files.

If I generate the world file for a BSB file with gdalwarp, the generated values for the affine transformation parameters 
do not produce a good result. If I use the affine trasformation to  (basically the transformation is not very precise).
 
I believe the parameters for a more precise transformation are already in the BSB header in the WBX,WPY and PWX, PWY fields,
but I'm not sure what are the correct data to use.
For example if we consider the chart file 11013_1.KAP     (STRAITS OF FLORIDA AND APPROACHES)
the following values are in the header.
 
WPX/3,74057.63283,914.1573321,-4.457688988e-006,0.9314526304,4.199727384e-007
    8.909433511e-007,0.003888412047,4.049230257e-009,4.656999088e-009
    -7.344637416e-009
WPY/3,24849.77398,-0.0001719938458,-841.3888082,-2.236403169e-006
    -4.23802978e-007,0.5645817982,-9.615822208e-009,-2.118680351e-009
    1.85245272e-009,-0.05788953807
PWX/3,-85.82846924,0.001190193579,1.242062009e-015,1.177436646e-010
    4.828087799e-020,-4.158931771e-019,-7.813843316e-015,-1.938704561e-024
    -3.205324874e-024,3.339741723e-023
PWY/3,28.48799091,4.631711681e-016,-0.001052175742,-7.983285528e-020
    -7.030373462e-020,-5.245662991e-009,4.239300639e-024,1.848231681e-024
 
What are the parameters between them to take into account?
Also, what kind of trasformation is this one? Is it a sort of calibration equations that uses also the ref points and errors contained in the same BSB file?
This is an example of a REF point and ERR associated from the same BSB file.

REF/1,422,8543,19.1436611111,-85.3263888889

ERR/1,0.1694080000,0.2849210000,0.0002953620,0.0002017170

Does anybody understand how I could use these values to have a precise result?

Best regards,
Marcello Ferrero


       
____________________________________________________________________________________
Yahoo! oneSearch: Finally, mobile search 
that gives answers, not web links. 
http://mobile.yahoo.com/mobileweb/onesearch?refer=1ONXIC
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070927/5dda35f4/attachment.html
From warmerdam at pobox.com  Thu Sep 27 10:46:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Affine Transformation and Calibration Equation for
	Maptech/BSB format
In-Reply-To: <694767.43926.qm@web60120.mail.yahoo.com>
References: <694767.43926.qm@web60120.mail.yahoo.com>
Message-ID: <931f8ea90709270746x5133c6a4l9d9a62ac6fe24f75@mail.gmail.com>

On 9/27/07, marcello ferrero <marcello_ferrero@yahoo.com> wrote:
> I believe the parameters for a more precise transformation are already in
> the BSB header in the WBX,WPY and PWX, PWY fields,
> but I'm not sure what are the correct data to use.
> For example if we consider the chart file 11013_1.KAP     (STRAITS OF
> FLORIDA AND APPROACHES)
> the following values are in the header.
>
> WPX/3,74057.63283,914.1573321,-4.457688988e-006,0.9314526304,4.199727384e-007
>     8.909433511e-007,0.003888412047,4.049230257e-009,4.656999088e-009
>     -7.344637416e-009
> WPY/3,24849.77398,-0.0001719938458,-841.3888082,-2.236403169e-006
>     -4.23802978e-007,0.5645817982,-9.615822208e-009,-2.118680351e-009
>     1.85245272e-009,-0.05788953807
> PWX/3,-85.82846924,0.001190193579,1.242062009e-015,1.177436646e-010
>     4.828087799e-020,-4.158931771e-019,-7.813843316e-015,-1.938704561e-024
>     -3.205324874e-024,3.339741723e-023
> PWY/3,28.48799091,4.631711681e-016,-0.001052175742,-7.983285528e-020
>     -7.030373462e-020,-5.245662991e-009,4.239300639e-024,1.848231681e-024
>
> What are the parameters between them to take into account?
> Also, what kind of trasformation is this one? Is it a sort of calibration
> equations that uses also the ref points and errors contained in the same BSB
> file?

Marcello,

I do not know for sure, but I presume these parameters are for
at least a 2nd order polynomial.  I have made only a very
minor effort to deduce these details but was not successful.

Internally GDAL can compute 2nd order polynomial warp
equations from the reference points and this is what I
generally encourage people to use (via gdalwarp) to
convert the images to a nice "north up" image.  But, in
fact, I presume the files are actually normally in a mercator
projection and that we would be even better off to work out
the details of that and then use proper reprojection to get
to other coordinate systems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ed at topozone.com  Thu Sep 27 10:46:54 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Handle raster maps of different scale
In-Reply-To: <20070927093731.34650@gmx.net>
References: <20070927093731.34650@gmx.net>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801988450@ptolemy.topozone.com>

Oliver -

What application are you using to display the output images?

     - Ed

Ed McNierney
TopoZone.com

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Oliver Eichler
Sent: Thursday, September 27, 2007 2:38 AM
To: gdal-dev
Subject: [Gdal-dev] Handle raster maps of different scale

Hi,

I have several raster maps of the same area with different scale
(GeoTiff). Depending on the viewport size (long / lat) I would like to
select the best map by scale to display. 

I wonder if I have to reinvent the wheel or if I can get that
functionality by GDAL somehow. 

Oliver
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From oliver.eichler at gmx.de  Thu Sep 27 11:01:20 2007
From: oliver.eichler at gmx.de (Oliver Eichler)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Handle raster maps of different scale
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC801988450@ptolemy.topozone.com>
References: <20070927093731.34650@gmx.net>
	<4BF377919225F449BB097CB76FFE9BC801988450@ptolemy.topozone.com>
Message-ID: <20070927150120.79410@gmx.net>


Hi Ed,

> Oliver -
> 
> What application are you using to display the output images?
> 
>      - Ed
> 

I want to write my own :) Currently using GDAL's RasterIO() to read the files and the Qt lib to display. Before I start to define my own data format to define what file to choose for a certain area and viewport, I thought I better ask if there is a ready made API for such a case. No need to invent things over and over :)

Oliver

From warmerdam at pobox.com  Thu Sep 27 11:02:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Handle raster maps of different scale
In-Reply-To: <20070927093731.34650@gmx.net>
References: <20070927093731.34650@gmx.net>
Message-ID: <931f8ea90709270802h198d2a51t2c9fd270ccafe645@mail.gmail.com>

On 9/27/07, Oliver Eichler <oliver.eichler@gmx.de> wrote:
> Hi,
>
> I have several raster maps of the same area with different scale (GeoTiff). Depending on the viewport size (long / lat) I would like to select the best map by scale to display.
>
> I wonder if I have to reinvent the wheel or if I can get that functionality by GDAL somehow.

Oliver,

I am not aware of anything in GDAL that would do this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Sep 27 11:05:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
Message-ID: <931f8ea90709270805s4d3565d8p46c05b544d0fa995@mail.gmail.com>

On 9/27/07, Brian Hamlin <maplabs@light42.com> wrote:
> If I have a database with a table, and that table has fields Latitude
> and Longitude, in double precision. What are some ways I can enable OGR
> to see that as a Point?  I am asking for all the steps.. I assume there
> are many ways to begin

Brian,

Matthew Perry's mechanism is in fact the best and most
direct approach.  But I can't help mentioning that the OGR
VRT driver can be used to massage seemingly non-spatial
feature sources with geometry info in x/y columns into an
OGR spatial data source:

http://www.gdal.org/ogr/drv_vrt.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Sep 27 11:16:18 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Problems retrieving z-values
In-Reply-To: <12902088.post@talk.nabble.com>
References: <12902088.post@talk.nabble.com>
Message-ID: <931f8ea90709270816u38561937sf9fd7fd09fb45c37@mail.gmail.com>

On 9/26/07, tjansson <tommy.jansson@kongsberg.com> wrote:
>
> I am writing a library which reads S-57 files (of type *.000) and loads
> selected geometies into a custom class structure. The files are read and
> content handled using the OGR Simple Features Library for C++.
>
> As far as I have understood the various geometries are divided into two
> categories; 2D geometry types with XY-data, and 2.5D geometry XYZ-data.
>
> I am interested in geometries of type 2.5D (i.e with XYZ-data). In my code
> there is a function which parses geometry objects using a switch that check
> the geometry type (and handles it accordingly). I have read several maps
> with success (e.g. downloaded from NOAA), except that the Z-value is always
> set to 0 (zero). I've also noticed - when debugging - that the switch never
> hits on geometry type "wkbPoint25D" (or any other 2.5D type), which might
> explain the Z-value.
>
> Is the code i have written doing something wrong, because I never get a hit
> on any 2.5D types, or are the maps I have downloaded the cause (because they
> don't contain any 2.5D types)?

Tommy,

I think SOUNDG features the the main feature type in S-57
that actually returns 3D geometries, and they are normally
of type wkbMultiPoint25D.

I *think* (memory grows foggy) that most other geometries
you would think might be 2.5D - like depth polygons - just
keep the depth as an attribute.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ed at topozone.com  Thu Sep 27 12:50:08 2007
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Handle raster maps of different scale
In-Reply-To: <20070927150120.79410@gmx.net>
References: <20070927093731.34650@gmx.net><4BF377919225F449BB097CB76FFE9BC801988450@ptolemy.topozone.com>
	<20070927150120.79410@gmx.net>
Message-ID: <4BF377919225F449BB097CB76FFE9BC801988455@ptolemy.topozone.com>

Oliver -

Then it's up to you <g>.  You'll need to select the file based on your
own criteria.  You can also use GDAL overviews to bundle the resampled
low-resolution images into the original file or externally, to make
things more convenient.

     - Ed

Ed McNierney
TopoZone.com

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Oliver Eichler
Sent: Thursday, September 27, 2007 8:01 AM
To: gdal-dev
Subject: Re: RE: [Gdal-dev] Handle raster maps of different scale


Hi Ed,

> Oliver -
> 
> What application are you using to display the output images?
> 
>      - Ed
> 

I want to write my own :) Currently using GDAL's RasterIO() to read the
files and the Qt lib to display. Before I start to define my own data
format to define what file to choose for a certain area and viewport, I
thought I better ask if there is a ready made API for such a case. No
need to invent things over and over :)

Oliver
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From wollez at gmx.net  Thu Sep 27 14:36:46 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] gdal_translate unable to allocate  buffer
Message-ID: <fdgt7s$cn7$1@sea.gmane.org>

I got an error from gdal_translate, has anybody an idea what the cause 
could be?

Regards
Wolfgang
...
ERROR 1: GetBlockRef failed at X block offset 6, Y block offset 1
ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in 
GTIFF d
river.
ERROR 1: IReadBlock failed at X offset 6, Y offset 1
ERROR 1: GetBlockRef failed at X block offset 6, Y block offset 1
ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in 
GTIFF d
river.
ERROR 1: IReadBlock failed at X offset 7, Y offset 1
ERROR 1: GetBlockRef failed at X block offset 7, Y block offset 1
ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in 
GTIFF d
river.
ERROR 1: IReadBlock failed at X offset 7, Y offset 1
ERROR 1: GetBlockRef failed at X block offset 7, Y block offset 1
ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in 
GTIFF d
river.
ERROR 1: IReadBlock failed at X offset 7, Y offset 1
ERROR 1: GetBlockRef failed at X block offset 7, Y block offset 1
ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in 
GTIFF d
river.
ERROR 1: IReadBlock failed at X offset 0, Y offset 1
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1
ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in 
GTIFF d
river.


From even.rouault at mines-paris.org  Thu Sep 27 14:50:13 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] gdal_translate unable to allocate  buffer
In-Reply-To: <fdgt7s$cn7$1@sea.gmane.org>
References: <fdgt7s$cn7$1@sea.gmane.org>
Message-ID: <200709272050.13734.even.rouault@mines-paris.org>

Hello,

Can you provide more info on your source file : pasting the result of gdalinfo 
on it would be a start.
Can you also paste your  gdal_translate command line ?

Even

On Thursday 27 September 2007 20:36:46 WolfgangZ wrote:
> I got an error from gdal_translate, has anybody an idea what the cause
> could be?
>
> Regards
> Wolfgang
> ...
> ERROR 1: GetBlockRef failed at X block offset 6, Y block offset 1
> ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in
> GTIFF d
> river.
> ERROR 1: IReadBlock failed at X offset 6, Y offset 1
> ERROR 1: GetBlockRef failed at X block offset 6, Y block offset 1
> ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in
> GTIFF d
> river.
> ERROR 1: IReadBlock failed at X offset 7, Y offset 1
> ERROR 1: GetBlockRef failed at X block offset 7, Y block offset 1
> ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in
> GTIFF d
> river.
> ERROR 1: IReadBlock failed at X offset 7, Y offset 1
> ERROR 1: GetBlockRef failed at X block offset 7, Y block offset 1
> ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in
> GTIFF d
> river.
> ERROR 1: IReadBlock failed at X offset 7, Y offset 1
> ERROR 1: GetBlockRef failed at X block offset 7, Y block offset 1
> ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in
> GTIFF d
> river.
> ERROR 1: IReadBlock failed at X offset 0, Y offset 1
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 1
> ERROR 2: Unable to allocate 196608 bytes for a temporary strip buffer in
> GTIFF d
> river.
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From maplabs at light42.com  Thu Sep 27 14:55:26 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
	<5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
Message-ID: <35AA108E-6D2B-11DC-87F5-000A277A733C@light42.com>


On Sep 27, 2007, at 1:57 AM, Matthew Perry wrote:
>
> 1) install postgis in your pg database if you have not done so already.
> 2) Create a point geometry column in your table using 
> AddGeometryColumn()
> 3) Do an update with the postgis MakePoint() function (ie UPDATE table
> SET geom = SETSRID(MakePoint(lon, lat),4326) )
>
> The SETSRID(.., 4326) function is used to define the resulting
> geometry as geographic coordinates with a WGS84 datum. If your
> coordinate system is different, you'll need to use the proper spatial
> reference id code.
>
>

  thank you for the tips..
I am a little stuck.. AddGeometryColumn() wants an SRID as "an integer 
value reference to an entry in the SPATIAL_REF_SYS table", but the 
SPATIAL_REF_SYS table appears to be empty after creating a new 
spatially enabled DB from scratch.

also, the last arguement to AddGeometryColumn() , <dimension> isnt 
mentioned in the doc I am looking at!

   -Brian

>
> On 9/27/07, Brian Hamlin <maplabs@light42.com> wrote:
>> If I have a database with a table, and that table has fields Latitude
>> and Longitude, in double precision. What are some ways I can enable 
>> OGR
>> to see that as a Point?  I am asking for all the steps.. I assume 
>> there
>> are many ways to begin
>>
>> thanks in advance
>>    -Brian
>>
>>
>>
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>
>
> -- 
> Matthew T. Perry
> http://www.perrygeo.net
>
> "Never ascribe to malice, that which can be adequately explained by
> incompetence."


From richard at waypointinfo.com  Thu Sep 27 17:16:40 2007
From: richard at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Problems with reading Spatial reference on Shape files
Message-ID: <00ee01c8014b$b270a1c0$e0012b0a@Richard>

Hi all,
 
I'm somewhat at wit's end with this problem and am really only fishing for
ideas.
 
The problem occurs when releasing the DataSource for an ESRI Shape file
after getting its spatial reference. The same code works fine with MapInfo
files.
 
My code is very simple in this case and only occurs when running as part of
a ASP.NET web site. If I strip out any content it still fails. This same
code works fine in a simple console app, as well as running the exact same
library code using NUnit tests. But other than the usual ASP.NET page
lifecycle stuff, there isn't anything else happening with unmanaged code
such as GDAL/OGR that could be fingered as a memory overrun culprit.
 
 
using (DataSource ds = Ogr.OpenShared(fileName, 0))
{
    using (Layer layer = ds.GetLayerByIndex(0))
    {
        using (SpatialReference srs = layer.GetSpatialRef())
        {
        }
    }
}   <--- exception occurs here (or on Dispose if I explicitly call it)

 

Using an point file:
 
[AccessViolationException: Attempted to read or write protected memory. This
is often an indication that other memory is corrupt.]
   OSGeo.OGR.OgrPINVOKE.delete_DataSource(HandleRef jarg1) +0
   OSGeo.OGR.DataSource.Dispose() +191

Using a polygon shape file (converted from a MapInfo tab file using ogr2ogr)
I get the following:
 
[OverflowException: Arithmetic operation resulted in an overflow.]
   OSGeo.OGR.OgrPINVOKE.delete_DataSource(HandleRef jarg1) +0
   OSGeo.OGR.DataSource.Dispose() +191

In both cases, the Wrapper.Name is corrupted - the first few characters in
the file path are garbage. I guess this is the symptom of the problem, but I
can't guess at the root cause. The handle is not null and otherwise looks
fine.
 
My next step is try to reproduce with a basic no-content ASP.NET web site.
 
Any ideas are welcome.
 
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070927/95a62866/attachment.html
From maplabs at light42.com  Thu Sep 27 20:28:50 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <35AA108E-6D2B-11DC-87F5-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
	<5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
	<35AA108E-6D2B-11DC-87F5-000A277A733C@light42.com>
Message-ID: <C8B4B311-6D59-11DC-87F5-000A277A733C@light42.com>

>
>>
>> 1) install postgis in your pg database if you have not done so 
>> already.
>> 2) Create a point geometry column in your table using 
>> AddGeometryColumn()
>> 3) Do an update with the postgis MakePoint() function (ie UPDATE table
>> SET geom = SETSRID(MakePoint(lon, lat),4326) )
>>
>> The SETSRID(.., 4326) function is used to define the resulting
>> geometry as geographic coordinates with a WGS84 datum. If your
>> coordinate system is different, you'll need to use the proper spatial
>> reference id code.
>>
>>
>
>  thank you for the tips..
> I am a little stuck.. AddGeometryColumn() wants an SRID as "an integer 
> value reference to an entry in the SPATIAL_REF_SYS table", but the 
> SPATIAL_REF_SYS table appears to be empty after creating a new 
> spatially enabled DB from scratch.
>
>
  ok, I found another paragraph in the docs that provided enough clues 
to move forward... I just use 4326 as SRID and the right things 
happen..  I wrote the insert script using Perl and DBI, so its pretty 
easy to change and make experiments..

unfortunately, the import is WAY slower with the Update table in the 
loop, and it essentially crashed after only 10% of the rows done!  
ERROR: shared buffer has table corrupted    :(

more clues welcome
   -Brian




From maplabs at light42.com  Thu Sep 27 21:02:06 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <C8B4B311-6D59-11DC-87F5-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
	<5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
	<35AA108E-6D2B-11DC-87F5-000A277A733C@light42.com>
	<C8B4B311-6D59-11DC-87F5-000A277A733C@light42.com>
Message-ID: <6E614865-6D5E-11DC-87F5-000A277A733C@light42.com>


On Sep 27, 2007, at 5:28 PM, Brian Hamlin wrote:

>>
>>>
>>> 1) install postgis in your pg database if you have not done so 
>>> already.
>>> 2) Create a point geometry column in your table using 
>>> AddGeometryColumn()
>>> 3) Do an update with the postgis MakePoint() function (ie UPDATE 
>>> table
>>> SET geom = SETSRID(MakePoint(lon, lat),4326) )
>>>
>>> The SETSRID(.., 4326) function is used to define the resulting
>>> geometry as geographic coordinates with a WGS84 datum. If your
>>> coordinate system is different, you'll need to use the proper spatial
>>> reference id code.
>>>
>>>
>>
>>  thank you for the tips..
>> I am a little stuck.. AddGeometryColumn() wants an SRID as "an 
>> integer value reference to an entry in the SPATIAL_REF_SYS table", 
>> but the SPATIAL_REF_SYS table appears to be empty after creating a 
>> new spatially enabled DB from scratch.
>>
>>
>  ok, I found another paragraph in the docs that provided enough clues 
> to move forward... I just use 4326 as SRID and the right things 
> happen..  I wrote the insert script using Perl and DBI, so its pretty 
> easy to change and make experiments..
>
> unfortunately, the import is WAY slower with the Update table in the 
> loop, and it essentially crashed after only 10% of the rows done!  
> ERROR: shared buffer has table corrupted    :(
>
>

I re-ran the script, it took almost 20 minutes, then the server process 
closed the connection (on localhost), and less than 20% of the rows are 
imported!  this is not working... The UPDATE with SETSRID(MakePoint()) 
is way too slow

I think I should write a script that generates the WKT as a field, and 
import that.. Pointers welcome
    -Brian


From perrygeo at gmail.com  Thu Sep 27 21:24:12 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Basic Pg Question
In-Reply-To: <6E614865-6D5E-11DC-87F5-000A277A733C@light42.com>
References: <12902088.post@talk.nabble.com>
	<1551.64.251.72.166.1190850920.squirrel@loskot.net>
	<ACD92AC6-6CCC-11DC-87F5-000A277A733C@light42.com>
	<5383fa5e0709270157w616cef68p8c0797478bc48521@mail.gmail.com>
	<35AA108E-6D2B-11DC-87F5-000A277A733C@light42.com>
	<C8B4B311-6D59-11DC-87F5-000A277A733C@light42.com>
	<6E614865-6D5E-11DC-87F5-000A277A733C@light42.com>
Message-ID: <5383fa5e0709271824m4869fba7y788f91cb0dd9de19@mail.gmail.com>

On 9/27/07, Brian Hamlin <maplabs@light42.com> wrote:
> >  ok, I found another paragraph in the docs that provided enough clues
> > to move forward... I just use 4326 as SRID and the right things
> > happen..  I wrote the insert script using Perl and DBI, so its pretty
> > easy to change and make experiments..
> >
> > unfortunately, the import is WAY slower with the Update table in the
> > loop, and it essentially crashed after only 10% of the rows done!
> > ERROR: shared buffer has table corrupted    :(
>
> I re-ran the script, it took almost 20 minutes, then the server process
> closed the connection (on localhost), and less than 20% of the rows are
> imported!  this is not working... The UPDATE with SETSRID(MakePoint())
> is way too slow
>
> I think I should write a script that generates the WKT as a field, and
> import that.. Pointers welcome
>     -Brian

Brian,

 Strange; my experience is that UPDATE with MakePoint is pretty fast
and I've used it on multi-million row tables.

 Not having seen your perl script I can't say for sure but  It sounds
like you're running UPDATE in a loop after each row is inserted? If
this is the case, the update will have to be performed on the entire
table for every row inserted making it exponentially slower.

Try either a) running update once after all the rows are inserted or
b) using a WHERE clause on the UPDATE to make sure you're only
updating the row that was just inserted.




-- 
Matthew T. Perry
http://www.perrygeo.net

"Never ascribe to malice, that which can be adequately explained by
incompetence."

From tommy.jansson at kongsberg.com  Fri Sep 28 02:41:54 2007
From: tommy.jansson at kongsberg.com (tjansson)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Problems retrieving z-values
In-Reply-To: <931f8ea90709270816u38561937sf9fd7fd09fb45c37@mail.gmail.com>
References: <12902088.post@talk.nabble.com>
	<931f8ea90709270816u38561937sf9fd7fd09fb45c37@mail.gmail.com>
Message-ID: <12935462.post@talk.nabble.com>


Thanks! That seems plausible.

Does anyone know of a way/have an example of how to extract the
depth-attribute from the different features (e.g. depth contour)?

--Tommy


Frank Warmerdam-2 wrote:
> 
> On 9/26/07, tjansson <tommy.jansson@kongsberg.com> wrote:
>>
>> I am writing a library which reads S-57 files (of type *.000) and loads
>> selected geometies into a custom class structure. The files are read and
>> content handled using the OGR Simple Features Library for C++.
>>
>> As far as I have understood the various geometries are divided into two
>> categories; 2D geometry types with XY-data, and 2.5D geometry XYZ-data.
>>
>> I am interested in geometries of type 2.5D (i.e with XYZ-data). In my
>> code
>> there is a function which parses geometry objects using a switch that
>> check
>> the geometry type (and handles it accordingly). I have read several maps
>> with success (e.g. downloaded from NOAA), except that the Z-value is
>> always
>> set to 0 (zero). I've also noticed - when debugging - that the switch
>> never
>> hits on geometry type "wkbPoint25D" (or any other 2.5D type), which might
>> explain the Z-value.
>>
>> Is the code i have written doing something wrong, because I never get a
>> hit
>> on any 2.5D types, or are the maps I have downloaded the cause (because
>> they
>> don't contain any 2.5D types)?
> 
> Tommy,
> 
> I think SOUNDG features the the main feature type in S-57
> that actually returns 3D geometries, and they are normally
> of type wkbMultiPoint25D.
> 
> I *think* (memory grows foggy) that most other geometries
> you would think might be 2.5D - like depth polygons - just
> keep the depth as an attribute.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://www.nabble.com/Problems-retrieving-z-values-tf4522698.html#a12935462
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From wollez at gmx.net  Fri Sep 28 03:03:46 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Re: gdal_translate unable to allocate  buffer
In-Reply-To: <200709272050.13734.even.rouault@mines-paris.org>
References: <fdgt7s$cn7$1@sea.gmane.org>
	<200709272050.13734.even.rouault@mines-paris.org>
Message-ID: <fdi90o$sfq$1@sea.gmane.org>

Even Rouault schrieb:
> Hello,
> 
> Can you provide more info on your source file : pasting the result of gdalinfo 
> on it would be a start.
> Can you also paste your  gdal_translate command line ?
> 
> Even
> 
> On Thursday 27 September 2007 20:36:46 WolfgangZ wrote:
>> I got an error from gdal_translate, has anybody an idea what the cause
>> could be?
>>
the command line was:
  gdal_translate -co TILED=YES -co COMPRESS=JPEG input.vrt out.tif

the vrt file is a little bit bigger (458842,386026 pixel) and links 
together several (thousands) of single images.

It takes some time but the progress bar started and I came to "0.", it 
would be a nice improvement if gdal_translate would not access all tiles 
  but only the needed ones (for example when using -srcwin).

Regards
Wolfgang


From g.ces at pettra.es  Fri Sep 28 04:26:50 2007
From: g.ces at pettra.es (Gustavo Ces)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Ogr and Postgis support
Message-ID: <007101c801a9$513e7e50$ba03a8c0@GUS>

Hi all,

    I?ve posted a few weeks ago about gdal installing in a python 2.4 "clean" version. I?ve achieved to install 
python, gdal ( win bin & python bindings ), and other stuff ( with your help). But now i?ve got a problem. I can connect to Posgis with pygresql, but i can?t do the same with gdal. Running 'ogrinfo --formats', there isn?t a postgis one. So i supose there isn?t support in Gdal?s ogr distribution for this DBMS. Maybe i?m wrog. Any help?
    Thanks in advance,

Gus
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070928/0e8939b6/attachment.html
From even.rouault at mines-paris.org  Fri Sep 28 13:24:49 2007
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Re: gdal_translate unable to allocate  buffer
In-Reply-To: <fdi90o$sfq$1@sea.gmane.org>
References: <fdgt7s$cn7$1@sea.gmane.org>
	<200709272050.13734.even.rouault@mines-paris.org>
	<fdi90o$sfq$1@sea.gmane.org>
Message-ID: <200709281924.49911.even.rouault@mines-paris.org>

Wolfgang,

I think this is a known issue :  VRT made of several thousands of single 
images don't work (on Linux at least). Currently the VRT driver first opens 
all images before doing any translation to GTIF. And at a moment, you reach 
the limit of maximum simultaneous open files, which is 1024 on a typical 
Linux system.
See http://trac.osgeo.org/gdal/ticket/1781.
In this ticket, I've attached a patch called 
gdal_svn_gdalbuildvrt_with_proxy.patch which is not included in GDAL. It 
works for me (I can handle big VRT with it), but contains 
not-really-good-looking pieces of code that should be improved for inclusion 
in GDAL tree...  You would need to 
add -DUSE_GDAL_PROXY_FOR_VRT  -DI_CAN_LIVE_WITH_THIS_GDAL_PROXY_NASTY_THING 
on compilation line to get the best of it...

We should maybe document that problem in the VRT driver documentation for the 
moment and hope that someone comes with a better fix.
I think a better fix would be easier if we can extend the VRT XML format to 
add information about source files, such as width and height.

Even

On Friday 28 September 2007 09:03:46 WolfgangZ wrote:
> Even Rouault schrieb:
> > Hello,
> >
> > Can you provide more info on your source file : pasting the result of
> > gdalinfo on it would be a start.
> > Can you also paste your  gdal_translate command line ?
> >
> > Even
> >
> > On Thursday 27 September 2007 20:36:46 WolfgangZ wrote:
> >> I got an error from gdal_translate, has anybody an idea what the cause
> >> could be?
>
> the command line was:
>   gdal_translate -co TILED=YES -co COMPRESS=JPEG input.vrt out.tif
>
> the vrt file is a little bit bigger (458842,386026 pixel) and links
> together several (thousands) of single images.
>
> It takes some time but the progress bar started and I came to "0.", it
> would be a nice improvement if gdal_translate would not access all tiles
>   but only the needed ones (for example when using -srcwin).
>
> Regards
> Wolfgang
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From wollez at gmx.net  Fri Sep 28 13:49:47 2007
From: wollez at gmx.net (WolfgangZ)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Re: gdal_translate unable to allocate  buffer
In-Reply-To: <200709281924.49911.even.rouault@mines-paris.org>
References: <fdgt7s$cn7$1@sea.gmane.org>	<200709272050.13734.even.rouault@mines-paris.org>	<fdi90o$sfq$1@sea.gmane.org>
	<200709281924.49911.even.rouault@mines-paris.org>
Message-ID: <fdjerr$sv6$1@sea.gmane.org>

Even Rouault schrieb:
> Wolfgang,
> 
> I think this is a known issue :  VRT made of several thousands of single 
> images don't work (on Linux at least). Currently the VRT driver first opens 
> all images before doing any translation to GTIF. And at a moment, you reach 
> the limit of maximum simultaneous open files, which is 1024 on a typical 
> Linux system.

I know that limit on linux. Windows was able to handle higher counts 
without knowing the actual limit.

> See http://trac.osgeo.org/gdal/ticket/1781.
> In this ticket, I've attached a patch called 
> gdal_svn_gdalbuildvrt_with_proxy.patch which is not included in GDAL. It 
> works for me (I can handle big VRT with it), but contains 
> not-really-good-looking pieces of code that should be improved for inclusion 
> in GDAL tree...  You would need to 
> add -DUSE_GDAL_PROXY_FOR_VRT  -DI_CAN_LIVE_WITH_THIS_GDAL_PROXY_NASTY_THING 
> on compilation line to get the best of it...

I don't really know how to compile gdal on my own. I only have limited 
experience in Fortran but absolutely no knowledge in C. Need to look for 
a (free) compiler.

> 
> We should maybe document that problem in the VRT driver documentation for the 
> moment and hope that someone comes with a better fix.
> I think a better fix would be easier if we can extend the VRT XML format to 
> add information about source files, such as width and height.
> 

The documentation should really be extended to show the limits of the 
VRT driver. VRT provides really nice features but perhaps there should 
be a SVRT (Simple VRT) which is limited to same tile size, same file 
type, same compression) and why is there a need to open all tiles at 
all? You need to open only that files where you need to read from?!

I really would like the VRT driver to be improved.

Regards
Wolfgang


From mitchelljj98 at gmail.com  Fri Sep 28 15:07:55 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] moving fwtools/gdal programs from a 32 bit windows
	server to a 64 bit windows server
Message-ID: <fa2ac0580709281207p12de3334l1da81f7fc8ed36b3@mail.gmail.com>

Hi,

We are moving fwtools/gdal programs from a 32 bit windows server to a 64 bit
windows server and I would like to know how to best take advantage of the
server's 64 bit architecture when running gdal programs like gdalwarp,
gdaltindex, and gdal_translate.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070928/b0bf43a6/attachment.html
From marcello_ferrero at yahoo.com  Fri Sep 28 17:03:50 2007
From: marcello_ferrero at yahoo.com (marcello ferrero)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Affine Transformation and Calibration Equation for
	Maptech/BSB format
Message-ID: <469397.27045.qm@web60117.mail.yahoo.com>

Frank,
thanks a lot for you reply. Following your suggestion I computed the 2nd order polynomial that gives the following 
coefficients for the 11013_1.KAP chart:

AMERIGO_WPX/3,-85.828910636818,0.001190746314,-0.000000000000,
-0.000000000011,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000 

AMERIGO_WPY/3,28.488998161095,0.000000000000,-0.001054118745,
-0.000000000000,0.000000000000,-0.000000004663,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000 

AMERIGO_PWX/3,72129.011730414597,840.953171512958,0.000000007496,
0.006662896373,0.000000000041,0.000000000089,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000 

AMERIGO_PWY/3,24103.153528890114,-0.000000052002,-744.892790806879,
0.000000000324,0.000000000031,3.549765907800,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000,
0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000,0.000000000000 

As you see they are really different from those written in the original file. Maybe they use a very different equation (Spline with error correction???)
Anyway, the second order polynomial gives me a reasonable result and I'm going to use it for my software Amerigo (sourceforge.org/projects/amerigo).

Also,  since my software is for mobile devices (such as Smartphones with Windows CE today and hopefully Linux embedded in future),
I'm a little bit concerned about using gdal projections and reprojection functions on ARM for performance and size reason.
On the smartphone in fact I only use tiled tiff file with the polynomial tranformation. Files that I convert from BSB (or self calibrated raster) on the PC.
In this way I just need to use (and link) gdal only for the PC of Amerigo, while on Windows CE I only use libtiff functions plus my onw 
CRS_georef  (a copy of the CRS_georef function in gdal_crs.c where it is a static function) thus keeping the size and the performance very reasonable.

Maybe I'm wrong, but I already have the CPU of the smartphone very busy with all the calculations I make for the 
GPS reading and tracking that I'm very concerned about addid other heavy calculations.

Do you have any experience on the other side of gdal used on mobile devices?
Am I too concerend about the limted power of the ARM CPUs?


Thanks in advance for any help

Regards,

Marcello Ferrero

----- Original Message ----
From: Frank Warmerdam <warmerdam@pobox.com>
To: marcello ferrero <marcello_ferrero@yahoo.com>
Cc: gdal-dev@lists.maptools.org
Sent: Thursday, September 27, 2007 4:46:41 PM
Subject: Re: [Gdal-dev] Affine Transformation and Calibration Equation for Maptech/BSB format


On 9/27/07, marcello ferrero <marcello_ferrero@yahoo.com> wrote:
> I believe the parameters for a more precise transformation are already in
> the BSB header in the WBX,WPY and PWX, PWY fields,
> but I'm not sure what are the correct data to use.
> For example if we consider the chart file 11013_1.KAP     (STRAITS OF
> FLORIDA AND APPROACHES)
> the following values are in the header.
>
> WPX/3,74057.63283,914.1573321,-4.457688988e-006,0.9314526304,4.199727384e-007
>     8.909433511e-007,0.003888412047,4.049230257e-009,4.656999088e-009
>     -7.344637416e-009
> WPY/3,24849.77398,-0.0001719938458,-841.3888082,-2.236403169e-006
>     -4.23802978e-007,0.5645817982,-9.615822208e-009,-2.118680351e-009
>     1.85245272e-009,-0.05788953807
> PWX/3,-85.82846924,0.001190193579,1.242062009e-015,1.177436646e-010
>     4.828087799e-020,-4.158931771e-019,-7.813843316e-015,-1.938704561e-024
>     -3.205324874e-024,3.339741723e-023
> PWY/3,28.48799091,4.631711681e-016,-0.001052175742,-7.983285528e-020
>     -7.030373462e-020,-5.245662991e-009,4.239300639e-024,1.848231681e-024
>
> What are the parameters between them to take into account?
> Also, what kind of trasformation is this one? Is it a sort of calibration
> equations that uses also the ref points and errors contained in the same BSB
> file?

Marcello,

I do not know for sure, but I presume these parameters are for
at least a 2nd order polynomial.  I have made only a very
minor effort to deduce these details but was not successful.

Internally GDAL can compute 2nd order polynomial warp
equations from the reference points and this is what I
generally encourage people to use (via gdalwarp) to
convert the images to a nice "north up" image.  But, in
fact, I presume the files are actually normally in a mercator
projection and that we would be even better off to work out
the details of that and then use proper reprojection to get
to other coordinate systems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


      ____________________________________________________________________________________
Luggage? GPS? Comic books? 
Check out fitting gifts for grads at Yahoo! Search
http://search.yahoo.com/search?fr=oni_on_mail&p=graduation+gifts&cs=bz
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070928/e4359205/attachment.html
From lcanacheu at zappmobile.ro  Sat Sep 29 06:41:29 2007
From: lcanacheu at zappmobile.ro (Lucian Canacheu)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Ogr and Postgis support
In-Reply-To: <007101c801a9$513e7e50$ba03a8c0@GUS>
References: <007101c801a9$513e7e50$ba03a8c0@GUS>
Message-ID: <46FE2BD9.9030307@zappmobile.ro>

Hi Gus,
In short, no. PostGIS support is disabled by default and if you user the 
binary distro fromgdal.org, that it is a "minimalist" build. Whatever 
Python bindings you add to it you won't get PostGIS support - it is not 
"enabled" in that distribution.
I passed over your messages. I'm using Python bindings for GDAL/OGR/OSR 
with PostGIS and  a couple of years  ago (I think with version 1.3.0 or 
so) I had very  tough times trying to install GDAL binaries into a 
Python "clean" environment. I've tried lots of things and in my opinion 
it was not the right way to do it. So, it may sound scary, you have to 
build yourself most of the needed libraries from sources (in this order) 
- proj4.5, libecw3.3, install Postgresql and PostGIS, geos2.2.3. The 
GDAL compilation works flawlessly on Win32 with VS 2003 and on Linux 
with compiler gcc 3.4.6.
I used these setup procedures ever since GDAL v 1.3.x. Give it a try and 
you'll see it works.
If you work this way, you'll have the chance to enable PostGIS 
extensions on Win32 platform. These are disabled by default:

# PostGIS Libraries
#PG_INC_DIR = n:\pkg\libpq_win32\include
#PG_LIB = n:\pkg\libpq_win32\lib\libpqdll.lib wsock32.lib
in the nmake.opt file

On Linux, you have to do something like this:
./configure --with-python=/opt/python-2.4.4/bin/python 
--with-postgres-includes=/usr/include/pgsql 
--with-postgres-libraries=/usr/lib

in order to enable PostGIS.

Cheers,
Lucian


-- 

Lucian Canacheu

Glipco Srl Deva
IT/GIS/Tech
Mobile: +40 788 503 385
E-mail: lcanacheu@glipco.ro




Gustavo Ces wrote:
> Hi all,
>  
>     I?ve posted a few weeks ago about gdal installing in a python 2.4 
> "clean" version. I?ve achieved to install
> python, gdal ( win bin & python bindings ), and other stuff ( with 
> your help). But now i?ve got a problem. I can connect to Posgis with 
> pygresql, but i can?t do the same with gdal. Running 'ogrinfo 
> --formats', there isn?t a postgis one. So i supose there isn?t support 
> in Gdal?s ogr distribution for this DBMS. Maybe i?m wrog. Any help?
>     Thanks in advance,
>  
> Gus
>
>
> __________ NOD32 2556 (20070928) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
> __________ NOD32 2556 (20070928) Information __________
>
> This message was checked by NOD32 antivirus system.
> http://www.eset.com
>   


-- 

Lucian Canacheu

Glipco Srl Deva
IT/GIS/Tech
Mobile: +40 788 503 385
E-mail: lcanacheu@glipco.ro




From maplabs at light42.com  Sat Sep 29 11:54:31 2007
From: maplabs at light42.com (Brian Hamlin)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] Ogr and Postgis support
In-Reply-To: <46FE2BD9.9030307@zappmobile.ro>
References: <007101c801a9$513e7e50$ba03a8c0@GUS>
	<46FE2BD9.9030307@zappmobile.ro>
Message-ID: <44B7EDFD-6EA4-11DC-BCD9-000A277A733C@light42.com>

for what it is worth, I built a PostGIS environment on Mac OSX and it  
works fine. The stock python is I think 2.3. I would have to look up  
the exact order, but I followed some instructions and it all worked -  
install proj, PostgreSQL, GEOS, PostGIS, and build GDAL. Some of the  
environment was picked up by configure, and others I had to help out a  
bit. Looking in the output of configure it was very plain what was  
detected and what was not.

For python, I have since upgraded to 2.5.1, leaving me with two python  
installs, which causes me grief now and then. But basically, the GDAL  
bindings work fine. I installed Numeric and that works fine. I do not  
follwo the talk of NumPy and new Python bindings. I expect that will  
clear up as time goes on, meanwhile I use what I have. A version of  
1.4.2 with my own changes to it.

best regards
   -Brian

On Sep 29, 2007, at 3:41 AM, Lucian Canacheu wrote:

> Hi Gus,
> In short, no. PostGIS support is disabled by default and if you user  
> the binary distro fromgdal.org, that it is a "minimalist" build.  
> Whatever Python bindings you add to it you won't get PostGIS support -  
> it is not "enabled" in that distribution.
> I passed over your messages. I'm using Python bindings for  
> GDAL/OGR/OSR with PostGIS and  a couple of years  ago (I think with  
> version 1.3.0 or so) I had very  tough times trying to install GDAL  
> binaries into a Python "clean" environment. I've tried lots of things  
> and in my opinion it was not the right way to do it. So, it may sound  
> scary, you have to build yourself most of the needed libraries from  
> sources (in this order) - proj4.5, libecw3.3, install Postgresql and  
> PostGIS, geos2.2.3. The GDAL compilation works flawlessly on Win32  
> with VS 2003 and on Linux with compiler gcc 3.4.6.
> I used these setup procedures ever since GDAL v 1.3.x. Give it a try  
> and you'll see it works.
> If you work this way, you'll have the chance to enable PostGIS  
> extensions on Win32 platform. These are disabled by default:
>
> # PostGIS Libraries
> #PG_INC_DIR = n:\pkg\libpq_win32\include
> #PG_LIB = n:\pkg\libpq_win32\lib\libpqdll.lib wsock32.lib
> in the nmake.opt file
>
> On Linux, you have to do something like this:
> ./configure --with-python=/opt/python-2.4.4/bin/python  
> --with-postgres-includes=/usr/include/pgsql  
> --with-postgres-libraries=/usr/lib
>
> in order to enable PostGIS.
>
> Cheers,
> Lucian
>
>
> --  
>
> Lucian Canacheu
>
> Glipco Srl Deva
> IT/GIS/Tech
> Mobile: +40 788 503 385
> E-mail: lcanacheu@glipco.ro
>
>
>
>
> Gustavo Ces wrote:
>> Hi all,
>>      IZve posted a few weeks ago about gdal installing in a python  
>> 2.4 "clean" version. IZve achieved to install
>> python, gdal ( win bin & python bindings ), and other stuff ( with  
>> your help). But now iZve got a problem. I can connect to Posgis with  
>> pygresql, but i canZt do the same with gdal. Running 'ogrinfo  
>> --formats', there isnZt a postgis one. So i supose there isnZt  
>> support in GdalZs ogr distribution for this DBMS. Maybe iZm wrog. Any  
>> help?
>>     Thanks in advance,
>>  Gus
>>
>>
>> __________ NOD32 2556 (20070928) Information __________
>>
>> This message was checked by NOD32 antivirus system.
>> http://www.eset.com
>> ---------------------------------------------------------------------- 
>> --
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>
>> __________ NOD32 2556 (20070928) Information __________
>>
>> This message was checked by NOD32 antivirus system.
>> http://www.eset.com
>>
>
>
> -- 
>
> Lucian Canacheu
>
> Glipco Srl Deva
> IT/GIS/Tech
> Mobile: +40 788 503 385
> E-mail: lcanacheu@glipco.ro
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Sun Sep 30 02:48:03 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] moving fwtools/gdal programs from a 32 bit windows
	server to a 64 bit windows server
In-Reply-To: <fa2ac0580709281207p12de3334l1da81f7fc8ed36b3@mail.gmail.com>
References: <fa2ac0580709281207p12de3334l1da81f7fc8ed36b3@mail.gmail.com>
Message-ID: <931f8ea90709292348p28601cf1wd3387073bbff1901@mail.gmail.com>

On 9/28/07, John Mitchell <mitchelljj98@gmail.com> wrote:
> Hi,
>
> We are moving fwtools/gdal programs from a 32 bit windows server to a 64 bit
> windows server and I would like to know how to best take advantage of the
> server's 64 bit architecture when running gdal programs like gdalwarp,
> gdaltindex, and gdal_translate.

John,

For the forseeable future the FWTools binaries will remain
32bit mode.

I know some folks are building for win64 but I don't know
the details.  I am not convinced there will be much performance
benefit other than potentially large address spaces.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From shenjinx at 126.com  Sun Sep 30 12:26:23 2007
From: shenjinx at 126.com (=?GBK?B?yfK98M/p?=)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] How to get the affine information
Message-ID: <20951614.782691191169583566.JavaMail.coremail@bj126app92.126.com>

Hello ,everyone:     It is my first time here,and i am very happy to share all kinds of information here! I am a gdal newer ,now i have a problem need your help.    I have an image and it format is erdas image(.img),when i open it with erdas,i can see the image information as follow:              upper Left X:565946.1197      upper Left Y:4439207.688       Lower Left X:351363.3907      upper Left Y:3363647.278       pixel sizeX:N/A               pixel Size Y:N/A       unit:meters                  Geo model:Affine    Now ,i want to get it affine parameters with gdal function GetGeotransform with python,but this image haven't such function. i use the Open Function open the image ,and dir()function to view its function ,but i just looked the following information: >>> da=gdal.Open("d:\input\aa.img")
>>> dir(da)
['__class__', '__delattr__', '__doc__', '__getattribute__', '__hash__', '__init__', '__new__', '__reduce__', '__reduce_ex__', '__repr__', '__setattr__', '__str__'] On the other hand,i try another image with the same course,the result as following: >>> da=gdal.Open("d:\output\yy.img")
>>> dir(da)
['AddBand', 'AdviseRead', 'BuildOverviews', 'FlushCache', 'GetDescription', 'GetDriver', 'GetGCPCount', 'GetGCPProjection', 'GetGCPs', 'GetGeoTransform', 'GetMetadata', 'GetProjection', 'GetProjectionRef', 'GetRasterBand', 'GetSubDatasets', 'RasterCount', 'RasterXSize', 'RasterYSize', 'ReadAsArray', 'ReadRaster', 'RefreshBandInfo', 'SetDescription', 'SetGCPs', 'SetGeoTransform', 'SetMetadata', 'SetProjection', 'WriteRaster', '__del__', '__doc__', '__init__', '__module__', '_band', '_o'] I am so wonder what the matter of this,and if one of you ever met such problem or known it ,can you tell me in detailed, and i am very grateful!     Thank you for your attention!                                                                                                                                                                                                               Jinxiang Shen               
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20071001/26182105/attachment.html
From wef1 at cec.wustl.edu  Sun Sep 30 15:15:54 2007
From: wef1 at cec.wustl.edu (Edward Fialkowski)
Date: Wed Nov 21 11:51:03 2007
Subject: [Gdal-dev] translating HDF4 to netCDF, HDF in --formats,
	but translate says "unsupported"
Message-ID: <f4c7e92f0709301215r513d551fg89abae1f920483d8@mail.gmail.com>

Hey List, trying to gdal_translate an HDF4 file to netCDF.

  HDF4 (ro): Hierarchical Data Format Release 4
  HDF4Image (rw+): HDF4 Dataset

shows up in --formats, but...

[edfialk@niceguy apps]$ ./gdal_translate -of netCDF no2track20070909.hdf
no2track20070909.nc
ERROR 4: `no2track20070909.hdf' not recognised as a supported file format.

GDALOpen failed - 4
`no2track20070909.hdf' not recognised as a supported file format.


I'm pretty sure it's hdf4 too, since hdfls reports:
[edfialk@niceguy bin]$ ./hdfls no2track20070910.hdf
no2track20070910.hdf:
File library version: Major= 4, Minor=2, Release=1
String=NCSA HDF Version 4.2 Release 1, February 17, 2005

Version Descriptor            : (tag 30)
        Ref nos: 1
Vdata                         : (tag 1962)
        Ref nos: 2 3 4 5 6 7 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49
50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74
75 76 77 78 79 80 81 82 83 84
Vdata Storage                 : (tag 1963)
        Ref nos: 2 3 4 5 6 7 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24
25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49
50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74
75 76 77 78 79 80 81 82 83 84
Vgroup                        : (tag 1965)
        Ref nos: 8



so...gdal does have HDF4 as rw, the file is not HDF5 (hd5ls doesn't open
it)...anyone have any ideas?

Thanks!
-Ed
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070930/6f3a828e/attachment.html
