From robert.coup at koordinates.com  Fri Jul  1 00:46:22 2011
From: robert.coup at koordinates.com (Robert Coup)
Date: Fri Jul  1 01:07:28 2011
Subject: [gdal-dev] How to apply a costum shift grid?
In-Reply-To: <1309267536678-6524901.post@n2.nabble.com>
References: <1309267536678-6524901.post@n2.nabble.com>
Message-ID: <BANLkTimPPtAzbzAiFh8_ix3dvL3-UhhqZA@mail.gmail.com>

Hi Frederick,

On Wed, Jun 29, 2011 at 1:25 AM, frederick keusch <
frederick.keusch@digimapas.cl> wrote:

>
> I am working here in Chile and we have a lot of earthquakes here, the last
> big one like a year ago. So the problem is that I have a lot of
> georeferenced images, but georeferenced before the earthquake. We thought
> the best way would be to calculate a shift grid and apply it with gdalwarp
> to all of the images. The only thing I would have to do is to apply the
> grid
> from one datum to the same datum instead of from one datum to another, this
> should be possible, shouldn?t it?
>

Yeah. I'm assuming you know that the grid shifts are applied as a transform
on the geocentric coordinates?


> Reading a lot in the mailing-list I found a link to an australian
> govermental site, where they provide a program to convert from NTv2_ASCII
> to
> NTv2_GSB. So I created an Ntv2_ASCII file with our shift values and
> converted it with this program to an .gsb-file and tried to apply that file
> with gdalwarp to our images. But no matter what I tried, nothing happened,
> the shift never was applied. I saw a lot of examples of possible commands
> searching in the mailing-list and tried everyone, also in nearly every
> possible combination but nothing lead to an applied shift. So I am a bit
> desperate right now, hoping someone can help me a bit or give an advice.
> Here in short what I have to do:
> Apply a shift grid from UTM 18s WGS84 to UTM 18s WGS84 in order to apply
> the
> coordinate changes of our images owing of the earthquake last year.
>
> I would apreciate any kind of help and thank a lot in advance,
>

First I'd get your grid working with proj4/cs2cs:

See how it's setup for the US/NZ/CA grids that are available as a companion
download
http://trac.osgeo.org/proj/wiki/GenParms describes the +nadgrids parameter
to tell proj4 to use it during datum shift.

Once that's all working...
In the gdal python bindings you need to add " +wktext" to the end of your
proj4 string to get it to recognise/use grids.

Hope that helps a bit,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/9e49d64e/attachment-0001.html
From daniele.romagnoli at geo-solutions.it  Fri Jul  1 04:34:57 2011
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Fri Jul  1 05:08:27 2011
Subject: [gdal-dev] Re: GDAL Native Libraries 1.4.5b for Linux64 not
	available
In-Reply-To: <BANLkTimGbmkCk-F4whaSc9UdKpsWzpFXdQ@mail.gmail.com>
References: <4DA554EF.6090501@t-kartor.se>
	<1309350818027-6528744.post@n2.nabble.com>
	<1309354991.4e0b2bef64f3e@webmail.free.fr>
	<BANLkTi=6zAN6czb3uP0-AiXjt2Er9NkYww@mail.gmail.com>
	<1309364102337-6529632.post@n2.nabble.com>
	<BANLkTi=ftVxJd04xSTtfyenYgW7eudWL2A@mail.gmail.com>
	<1309455356851-6534235.post@n2.nabble.com>
	<BANLkTimGbmkCk-F4whaSc9UdKpsWzpFXdQ@mail.gmail.com>
Message-ID: <BANLkTikG-BSVL1rB6X5JF_c6YwSkUNS2ZQ@mail.gmail.com>

Ok Andy,
I have re-uploaded them. Please, let me know if you still have any issue.

Regards,
Daniele


On Fri, Jul 1, 2011 at 10:04 AM, Daniele Romagnoli <
daniele.romagnoli@geo-solutions.it> wrote:

> Mmm...
> It's the second time users report that some links are broken (not sure why
> since they are already been downloaded in the past)...
> I'm re-uploading them right now but it's taking forever (even to upload
> 2MB)...  Not sure whether there is some issue on Kenai...
> I'll let you know when done...
>
>
> Hope this helps.
> Regards,
> Daniele
>
> On Thu, Jun 30, 2011 at 7:35 PM, andyjc <andyc@comsine.co.uk> wrote:
>
>> Thanks Daniele.
>>
>> I think this is back on topic (at least I think it belongs here)....
>>
>> The link(s) to download the linux 32-bit version of the GDAL native
>> libraries (see
>>
>> http://java.net/projects/imageio-ext/downloads/directory/Releases/Dependencies/GDAL/NativeLibraries/1.4.5/Linux32
>> here )  seems to be broken.  The 64-bit version is fine.
>>
>> Does anyone know if the 32-bit been deprecated?
>>
>> Andy
>>
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/gdal-dev-GDAL-Native-Libraries-1-4-5b-for-Linux64-not-available-tp6268043p6534235.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> -------------------------------------------------------
> Ing. Daniele Romagnoli
> GeoSolutions S.A.S.
> Software Engineer
>
> Via Poggio alle Viti 1187
> 55054  Massarosa (LU)
> Italy
>
> phone: +39 0584 962313
> fax:      +39 0584 962313
>
> http://www.geo-solutions.it
> http://geo-solutions.blogspot.com/
> http://www.youtube.com/user/GeoSolutionsIT
> http://it.linkedin.com/in/danieleromagnoli
>
>
> -------------------------------------------------------
>
>


-- 
-------------------------------------------------------
Ing. Daniele Romagnoli
GeoSolutions S.A.S.
Software Engineer

Via Poggio alle Viti 1187
55054  Massarosa (LU)
Italy

phone: +39 0584 962313
fax:      +39 0584 962313

http://www.geo-solutions.it
http://geo-solutions.blogspot.com/
http://www.youtube.com/user/GeoSolutionsIT
http://it.linkedin.com/in/danieleromagnoli


-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/0dda2698/attachment.html
From giannicristian at msn.com  Fri Jul  1 04:57:35 2011
From: giannicristian at msn.com (Solimyr)
Date: Fri Jul  1 05:32:17 2011
Subject: [gdal-dev] GDAL Stretch image
Message-ID: <1309510655297-6536958.post@n2.nabble.com>

Do you know how stretch an image using GDAL? Is this possible? If not, what
method can I use? 
I need to stretch to Byte but in an equalized mode! I know that there is the
scale tool in gdal but I don't know how make the stretch!
Thx

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Stretch-image-tp6536958p6536958.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From michael.smith at usace.army.mil  Fri Jul  1 10:16:15 2011
From: michael.smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Fri Jul  1 10:07:23 2011
Subject: [gdal-dev] GDAL/OGR projection problem only with epsg:3785/900913
Message-ID: <CA334EEF.25996%michael.smith@usace.army.mil>

All,

I?m using GDAL (1.9dev r22508) and getting errors only when reprojecting
(raster or vector) to any of the Google Mercator projections.  On a number
of linux boxes I have, this works fine, but, on a couple its a problem. The
only difference on the problem boxes that I can see is that they have the
configuration files for vertical datum reprojection and are using external
libgeotiff (svn r2002) for use with libLAS and PDAL. Reprojection using
either the epsg codes or the full proj string fails.

A couple of example errors

[u4rt9mds@lidarora1 /] ogr2ogr -f "ESRI Shapefile" -t_srs epsg:3785 test.shp
cincinnati_forests.shp
ERROR 1: no system list, errno: 2

Failed to reproject feature 0 (geometry probably out of source or
destination SRS).
ERROR 1: Terminating translation prematurely after failed
translation of layer cincinnati_forests (use -skipfailures to skip errors)

[u4rt9mds@lidarora1 /] gdalwarp -of vrt -t_srs epsg:900913 -r near
cincinnati_bare_earth_01.img test2.vrt
ERROR 1: no system list, errno: 2

ERROR 1: GDALSuggestedWarpOutput() failed because the passed
transformer failed.

Reprojection to any other projection seems to work fine

[u4rt9mds@lidarora1 /] gdalwarp -of vrt -t_srs epsg:26919
/u02/LASdata/Office_of_Americas/Cincinnati_OH/Delivery/rasters/cincinnati_ba
re_earth_01.img test.vrt
Creating output file that is 20023P x 24321L.
Processing input file
/u02/LASdata/Office_of_Americas/Cincinnati_OH/Delivery/rasters/cincinnati_ba
re_earth_01.img.
Using internal nodata values (eg. -3.40282e+38) for image
/u02/LASdata/Office_of_Americas/Cincinnati_OH/Delivery/rasters/cincinnati_ba
re_earth_01.img.


[u4rt9mds@lidarora1 /] ogr2ogr -progress -f "ESRI Shapefile" -t_srs
epsg:26917 test.shp cincinnati_forests.shp
0...10...20...30...40...50...60...70...80...90...100 - done.

Testepsg reports the correct output

[u4rt9mds@lidarora1 shapes]$ testepsg epsg:3785
Validate Succeeds.
WKT[epsg:3785] =
PROJCS["Popular Visualisation CRS / Mercator (deprecated)",
    GEOGCS["Popular Visualisation CRS",
        DATUM["Popular_Visualisation_Datum",
            SPHEROID["Popular Visualisation Sphere",6378137,0,
                AUTHORITY["EPSG","7059"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6055"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9122"]],
        AUTHORITY["EPSG","4055"]],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
+lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
+no_defs"],
    AUTHORITY["EPSG","3785"],
    AXIS["X",EAST],
    AXIS["Y",NORTH]]

Simplified WKT[epsg:3785] =
PROJCS["Popular Visualisation CRS / Mercator (deprecated)",
    GEOGCS["Popular Visualisation CRS",
        DATUM["Popular_Visualisation_Datum",
            SPHEROID["Popular Visualisation Sphere",6378137,0],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    UNIT["metre",1],
    PROJECTION["Mercator_1SP"],
    PARAMETER["central_meridian",0],
    PARAMETER["scale_factor",1],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]

Old Style WKT[epsg:3785] = PROJCS["Popular Visualisation CRS / Mercator
(deprecated)",GEOGCS["Popular Visualisation
CRS",DATUM["Popular_Visualisation_Datum",SPHEROID["Popular Visualisation
Sphere",6378137,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
,UNIT["metre",1],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0],
PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_no
rthing",0]]
ESRI'ified WKT[epsg:3785] =
PROJCS["Popular_Visualisation_CRS_Mercator_deprecated",
    GEOGCS["GCS_Popular Visualisation CRS",
        DATUM["D_",
            SPHEROID["Popular_Visualisation_Sphere",6378137,0]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Mercator"],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1],
    PARAMETER["standard_parallel_1",0.0]]
PROJ.4 rendering of [epsg:3785] = +proj=merc +a=6378137 +b=6378137
+lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null
+wktext  +no_defs

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/98ac1071/attachment.html
From jrepetto at free.fr  Fri Jul  1 10:18:09 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Fri Jul  1 11:10:58 2011
Subject: [gdal-dev] GDAL/OGR projection problem only with epsg:3785/900913
In-Reply-To: <CA334EEF.25996%michael.smith@usace.army.mil>
References: <CA334EEF.25996%michael.smith@usace.army.mil>
Message-ID: <4E0DD721.6080209@free.fr>

On 07/01/11 16:16, Smith, Michael ERDC-CRREL-NH wrote:
> All,
>
> I?m using GDAL (1.9dev r22508) and getting errors only when reprojecting
> (raster or vector) to any of the Google Mercator projections.

I don't know if it is related to your problem, but the correct code for 
Google Pseudo Mercator is EPSG:3857.

Jean-Claude
From dcole at integrity-apps.com  Fri Jul  1 10:29:29 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Fri Jul  1 11:22:28 2011
Subject: [gdal-dev] gdalinfo fails on jpeg2000 compressed nitf
Message-ID: <8406B84EA8899042A8508D858843972903BEEF51@CHUNEX01.integrity-apps.com>

Hello,

I have been trying to use the v2 OpenJPEG2000 driver with GDAL to read NITF files that have been compressed with jpeg2000.

When I am trying to actually load these files and display them, my software sometimes succeeds, sometimes fails, sometimes gives bogus results. I also occaisionally get a dump like this:

ERROR 1: Marker is not compliant with its position

ERROR 1: opj_read_header() failed
ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

I have tried to use gdalinfo on the image in question, and get the following:

ERROR 4: `P003.ntf' not recognised as a supported file format.

ERROR 1: Unable to open JPEG2000 image within NITF file.
Is the JP2KAK driver available?
gdalinfo failed - unable to open 'P003.ntf'.


Any ideas why it seems to be looking for JP2KAK there? I was trying to not use the kakadu driver, because it is not free. Also seems weird to me that the image does load sometimes, and not others. Very buggy feeling.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/5b35d4c0/attachment-0001.html
From chaitanya.ch at gmail.com  Fri Jul  1 12:17:00 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  1 12:18:02 2011
Subject: [gdal-dev] Re: "disformed" images in its positions
In-Reply-To: <1309442993678-6533392.post@n2.nabble.com>
References: <1308088766789-6476206.post@n2.nabble.com>
	<BANLkTimBShQ9NqqgVOQJ79k-Oz8FVDnmqw@mail.gmail.com>
	<1308145626476-6478915.post@n2.nabble.com>
	<BANLkTimRvTz8hppb+NfaBwx6QCApyFK3JA@mail.gmail.com>
	<1308175373903-6480835.post@n2.nabble.com>
	<1309442993678-6533392.post@n2.nabble.com>
Message-ID: <BANLkTimc2b-q6DyN9Mt4hAmjToTdB4AJAA@mail.gmail.com>

Frederick,

GDAL considers the position (0.0,0.0) as the top left part of the top left
pixel [1]. So, the center of the top left pixel would be (0.5,0.5). This
could be the cause of the linear shift.

[1]: http://www.gdal.org/gdal_datamodel.html (Affine GeoTransform)

On Thu, Jun 30, 2011 at 7:39 PM, frederick keusch <
frederick.keusch@digimapas.cl> wrote:

> Hi Chaitanya,
>
> after intenting a lot of things to solve the problem including shift grids
> for example, we came back to the method with gdal_translate and gdalwarp
> you
> described. And it does work more or less. I did give GCP`s to the corners
> of
> the images and also in the images. The problem is, that after doing the
> warp, it seems like the image is shifted linear, all to the GCP in the
> upper
> left corner, so the East-coordinate e.g. upper left and lower left and
> upper
> right and lower right are identlical, what should not be. Using gdalinfo
> after using gdal_translate shows, that the manually given GCP?s were
> accepted, but after warping erverthing seems to move just linear, no matter
> if the option -geoloc was used or not...
> So I hope, maybe you could or some could have an idea , what could be the
> problem...
>
> Thanks in advance,
>
> frederick
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/disformed-images-in-its-positions-tp6476206p6533392.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/4459ad98/attachment.html
From ragi at burhum.com  Fri Jul  1 13:56:52 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Fri Jul  1 14:03:23 2011
Subject: [gdal-dev] Precision Mystery (FGDB)
Message-ID: <BANLkTi=1j8Dm0fSpvqbAfy8YQZ8Q8PGxLA@mail.gmail.com>

Paul,

The one line that I think is making the difference is

<HighPrecision>true</HighPrecision>

because, if memory serves me right, it kicks in logic for using
64bit-coordinates internally (actually I remember something about the sign
and the mantissa being 53bits - can't recall exactly). ESRI migrated to what
they call high precision coordinate system in ArcGIS
9.2<http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Migrating_to_high_precision>.
So all the software really expects the coordinate system to be declared that
way by now. There is a good white paper on the ESRI site that describes how
ArcGIS manages its coordinate systems
internally<http://downloads.esri.com/support/whitepapers/ao_/UnderstandingCoordinateManagement_June2007.pdf>.
I hope that helps.

- Ragi



Date: Thu, 30 Jun 2011 13:26:21 -0700
> From: Paul Ramsey <pramsey@cleverelephant.ca>
> Subject: Re: [gdal-dev] Precision Mystery (FGDB)
> To: gdal-dev@lists.osgeo.org
> Message-ID: <BANLkTikNQyhsDkuNFNdEkN3S6GiHL5ihDQ@mail.gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1
>
> OKAY, found it, and it's an odd one. It has nothing to do with the
> shape buffers or the transit into PostGIS... I just wrote a small
> program that uses the FGDB API almost exclusively, it only uses OGR to
> write the shape buffer.
>
> And the difference is in the declaration of the SRS... when I declare
> a UTM srs with the following extra XML
>
>                                    <XOrigin>-5120900</XOrigin>
>                                    <YOrigin>-9998100</YOrigin>
>                                    <XYScale>10000</XYScale>
>                                    <ZOrigin>-100000</ZOrigin>
>                                    <ZScale>10000</ZScale>
>                                    <MOrigin>-100000</MOrigin>
>                                    <MScale>10000</MScale>
>                                    <XYTolerance>0.001</XYTolerance>
>                                    <ZTolerance>0.001</ZTolerance>
>                                    <MTolerance>0.001</MTolerance>
>                                    <HighPrecision>true</HighPrecision>
>
> Then writing the POINT(1 2 3) and reading back with ogrinfo I get
>
> FID Column = OBJECTID
> Geometry Column = SHAPE
> OGRFeature(test):1
>  POINT (1 2 3)
>
> But if I omit those lines, I get:
>
> FID Column = OBJECTID
> Geometry Column = SHAPE
> OGRFeature(test):1
>  POINT (1.000001729731139 1.999981429457875 0.0)
>
> Weird precision changes and my Z is gone! So those things matter...
> but what do they do...
>
> P.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/84a132ce/attachment.html
From even.rouault at mines-paris.org  Fri Jul  1 14:08:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  1 14:15:42 2011
Subject: [gdal-dev] gdalinfo fails on jpeg2000 compressed nitf
In-Reply-To: <8406B84EA8899042A8508D858843972903BEEF51@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BEEF51@CHUNEX01.integrity-apps.com>
Message-ID: <201107012008.48309.even.rouault@mines-paris.org>

Le vendredi 01 juillet 2011 16:29:29, Cole, Derek a ?crit :
> Hello,
> 
> I have been trying to use the v2 OpenJPEG2000 driver with GDAL to read NITF
> files that have been compressed with jpeg2000.
> 
> When I am trying to actually load these files and display them, my software
> sometimes succeeds, sometimes fails, sometimes gives bogus results. I also
> occaisionally get a dump like this:
> 
> ERROR 1: Marker is not compliant with its position

This error comes from the OpenJPEG library. It seems it doesn't like something 
in the jpeg2000 data stream. Perhaps it is a deficiency in the openjpeg lib, 
perhaps in the datastream (some jpeg2000 readers might work around 
deficiencies/oddities in datastreams in a more robust way). Anyway, it should 
be best reported on openjpeg issue tracker / mailing list, with some data that 
illustrates the defect.

Clearly, it seems there's little activity in openjpeg v2 branch for now. 
However, I've read a message on their mailing list that seemed to indicate it 
could be revived (see the end of 
https://groups.google.com/group/openjpeg/browse_thread/thread/97cebb74d07ce475?hl=fr 
) .Let's hope it will be indeed merged into their trunk some day.

> 
> ERROR 1: opj_read_header() failed
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> 
> I have tried to use gdalinfo on the image in question, and get the
> following:
> 
> ERROR 4: `P003.ntf' not recognised as a supported file format.
> 
> ERROR 1: Unable to open JPEG2000 image within NITF file.
> Is the JP2KAK driver available?
> gdalinfo failed - unable to open 'P003.ntf'.
> 
> 
> Any ideas why it seems to be looking for JP2KAK there?

I suspect that originally the only jpeg2000 driver usable by the NITF driver 
was JP2KAK. But the NITF driver will actually try with any JPEG2000 driver 
that supports the vsi virtual file API, in practice any of the 5 possible 
drivers (JP2KAK, JP2ECW, JP2MRSID, JP2OPENJPEG or JPEG2000).

I've just changed the error message to make it more generic. In case of 
failure, depending on the situation, it will now be :
* "No JPEG2000 capable driver (JP2KAK, JP2ECW, JP2MRSID, JP2OPENJPEG, etc...) 
is available."
* or "One or several JPEG2000 capable drivers are available but the datastream 
could not be opened successfully."

> I was trying to not
> use the kakadu driver, because it is not free. Also seems weird to me that
> the image does load sometimes, and not others. Very buggy feeling.
From pramsey at cleverelephant.ca  Fri Jul  1 14:13:07 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Fri Jul  1 14:20:34 2011
Subject: [gdal-dev] Precision Mystery (FGDB)
In-Reply-To: <BANLkTi=1j8Dm0fSpvqbAfy8YQZ8Q8PGxLA@mail.gmail.com>
References: <BANLkTi=1j8Dm0fSpvqbAfy8YQZ8Q8PGxLA@mail.gmail.com>
Message-ID: <BANLkTikaU2sF3TPiW_zahbhvaPTMyq=6Wg@mail.gmail.com>

Nope, it's the Origin and Scale, which between them form a snapping
grid. Unless your point is on the grid, it'll be snapped to a new
location when inserted into file. So my problem was that in my process

FGDB1>PostGIS>FGDB2

the grid in FGDB2 was different from that of FGDB1. So everything got
slightly perturbed. The question is, what origin and scale should we
be using? Clearly these are going to need to be file writing options,
but are the defaults OK as it stands? Actually, we know they aren't
(at the moment) because not including a Z origin and scale results in
the Z being zeroed out, which is No Good.

P.

On Fri, Jul 1, 2011 at 10:56 AM, Ragi Burhum <ragi@burhum.com> wrote:
> Paul,
>
> The one line that I think is making the difference is
> <HighPrecision>true</HighPrecision>
> because, if memory serves me right, it kicks in logic for using
> 64bit-coordinates internally (actually I remember something about the sign
> and the mantissa being 53bits - can't recall exactly). ESRI migrated to what
> they call high precision coordinate system in ArcGIS 9.2. So all the
> software really expects the coordinate system to be declared that way by
> now. There is a good white paper on the ESRI site that describes how ArcGIS
> manages its coordinate systems internally. I hope that helps.
> - Ragi
>
>
>> Date: Thu, 30 Jun 2011 13:26:21 -0700
>> From: Paul Ramsey <pramsey@cleverelephant.ca>
>> Subject: Re: [gdal-dev] Precision Mystery (FGDB)
>> To: gdal-dev@lists.osgeo.org
>> Message-ID: <BANLkTikNQyhsDkuNFNdEkN3S6GiHL5ihDQ@mail.gmail.com>
>> Content-Type: text/plain; charset=ISO-8859-1
>>
>> OKAY, found it, and it's an odd one. It has nothing to do with the
>> shape buffers or the transit into PostGIS... I just wrote a small
>> program that uses the FGDB API almost exclusively, it only uses OGR to
>> write the shape buffer.
>>
>> And the difference is in the declaration of the SRS... when I declare
>> a UTM srs with the following extra XML
>>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<XOrigin>-5120900</XOrigin>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<YOrigin>-9998100</YOrigin>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<XYScale>10000</XYScale>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<ZOrigin>-100000</ZOrigin>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<ZScale>10000</ZScale>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<MOrigin>-100000</MOrigin>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<MScale>10000</MScale>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<XYTolerance>0.001</XYTolerance>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<ZTolerance>0.001</ZTolerance>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<MTolerance>0.001</MTolerance>
>> ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ?<HighPrecision>true</HighPrecision>
>>
>> Then writing the POINT(1 2 3) and reading back with ogrinfo I get
>>
>> FID Column = OBJECTID
>> Geometry Column = SHAPE
>> OGRFeature(test):1
>> ?POINT (1 2 3)
>>
>> But if I omit those lines, I get:
>>
>> FID Column = OBJECTID
>> Geometry Column = SHAPE
>> OGRFeature(test):1
>> ?POINT (1.000001729731139 1.999981429457875 0.0)
>>
>> Weird precision changes and my Z is gone! So those things matter...
>> but what do they do...
>>
>> P.
>>
From ragi at burhum.com  Fri Jul  1 14:26:45 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Fri Jul  1 14:34:57 2011
Subject: [gdal-dev] Precision Mystery (FGDB)
In-Reply-To: <BANLkTikaU2sF3TPiW_zahbhvaPTMyq=6Wg@mail.gmail.com>
References: <BANLkTi=1j8Dm0fSpvqbAfy8YQZ8Q8PGxLA@mail.gmail.com>
	<BANLkTikaU2sF3TPiW_zahbhvaPTMyq=6Wg@mail.gmail.com>
Message-ID: <BANLkTi=LDMx0XR=KUOhjmuPLH=RD39SwgA@mail.gmail.com>

That makes a lot of sense. Perhaps we should use the default values that are
hardcoded in ArcGIS when a new FGDB gets created? If someone uses other
values, then they may get the slight snapping effect, which would be OK in
that case? thoughts?

On Fri, Jul 1, 2011 at 11:13 AM, Paul Ramsey <pramsey@cleverelephant.ca>wrote:

> Nope, it's the Origin and Scale, which between them form a snapping
> grid. Unless your point is on the grid, it'll be snapped to a new
> location when inserted into file. So my problem was that in my process
>
> FGDB1>PostGIS>FGDB2
>
> the grid in FGDB2 was different from that of FGDB1. So everything got
> slightly perturbed. The question is, what origin and scale should we
> be using? Clearly these are going to need to be file writing options,
> but are the defaults OK as it stands? Actually, we know they aren't
> (at the moment) because not including a Z origin and scale results in
> the Z being zeroed out, which is No Good.
>
> P.
>
> On Fri, Jul 1, 2011 at 10:56 AM, Ragi Burhum <ragi@burhum.com> wrote:
> > Paul,
> >
> > The one line that I think is making the difference is
> > <HighPrecision>true</HighPrecision>
> > because, if memory serves me right, it kicks in logic for using
> > 64bit-coordinates internally (actually I remember something about the
> sign
> > and the mantissa being 53bits - can't recall exactly). ESRI migrated to
> what
> > they call high precision coordinate system in ArcGIS 9.2. So all the
> > software really expects the coordinate system to be declared that way by
> > now. There is a good white paper on the ESRI site that describes how
> ArcGIS
> > manages its coordinate systems internally. I hope that helps.
> > - Ragi
> >
> >
> >> Date: Thu, 30 Jun 2011 13:26:21 -0700
> >> From: Paul Ramsey <pramsey@cleverelephant.ca>
> >> Subject: Re: [gdal-dev] Precision Mystery (FGDB)
> >> To: gdal-dev@lists.osgeo.org
> >> Message-ID: <BANLkTikNQyhsDkuNFNdEkN3S6GiHL5ihDQ@mail.gmail.com>
> >> Content-Type: text/plain; charset=ISO-8859-1
> >>
> >> OKAY, found it, and it's an odd one. It has nothing to do with the
> >> shape buffers or the transit into PostGIS... I just wrote a small
> >> program that uses the FGDB API almost exclusively, it only uses OGR to
> >> write the shape buffer.
> >>
> >> And the difference is in the declaration of the SRS... when I declare
> >> a UTM srs with the following extra XML
> >>
> >>                                    <XOrigin>-5120900</XOrigin>
> >>                                    <YOrigin>-9998100</YOrigin>
> >>                                    <XYScale>10000</XYScale>
> >>                                    <ZOrigin>-100000</ZOrigin>
> >>                                    <ZScale>10000</ZScale>
> >>                                    <MOrigin>-100000</MOrigin>
> >>                                    <MScale>10000</MScale>
> >>                                    <XYTolerance>0.001</XYTolerance>
> >>                                    <ZTolerance>0.001</ZTolerance>
> >>                                    <MTolerance>0.001</MTolerance>
> >>                                    <HighPrecision>true</HighPrecision>
> >>
> >> Then writing the POINT(1 2 3) and reading back with ogrinfo I get
> >>
> >> FID Column = OBJECTID
> >> Geometry Column = SHAPE
> >> OGRFeature(test):1
> >>  POINT (1 2 3)
> >>
> >> But if I omit those lines, I get:
> >>
> >> FID Column = OBJECTID
> >> Geometry Column = SHAPE
> >> OGRFeature(test):1
> >>  POINT (1.000001729731139 1.999981429457875 0.0)
> >>
> >> Weird precision changes and my Z is gone! So those things matter...
> >> but what do they do...
> >>
> >> P.
> >>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/4ed37f3f/attachment-0001.html
From rodolfobonnin at suremptec.com.ar  Fri Jul  1 16:29:45 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Fri Jul  1 16:44:34 2011
Subject: [gdal-dev] Strange error on gdalAllRegister()
Message-ID: <BANLkTimMF9yyaf_gt6KURAjLi63Ant6CiA@mail.gmail.com>

Hello All,

I'm writing two new drivers ( For ALOS PRISM and AVNIR-2 ) and I'm trying to
add them to the list of drivers.

I've added them to gdal_frmts.h:

void CPL_DLL GDALRegister_PRISM(void)
void CPL_DLL GDALRegister_AVNIR2(void)

And provisionally, I've added them to gdalallregister.cpp, joining them to
the jaxapalsar driver, which I'm sure I'm including

 #ifdef FRMT_jaxapalsar

    GDALRegister_AVNIR2();
    GDALRegister_PRISM();
    GDALRegister_PALSARJaxa();

#endif

But I've no way of gdalallregister.cpp to see the declaration of the
functions of these drivers.


gdalallregister.cpp: In function 'void GDALAllRegister()':
gdalallregister.cpp:483: error: 'GDALRegister_AVNIR2' was not declared in
this scope
gdalallregister.cpp:484: error: 'GDALRegister_PRISM' was not declared in
this scope


BTW, I', using a CMake script to compile, but the library compiles just fine
with jaxapalsar support, if I delete the references to the new file formats,
and at the point of compilation this bug triggers, the only requirement is
that the GDALRegister functions have to be declared, and the gdal_frmts.h
file is available.

Many thanks in advance.


-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110701/0d7801e2/attachment.html
From even.rouault at mines-paris.org  Fri Jul  1 16:58:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  1 17:14:10 2011
Subject: [gdal-dev] GDAL/OGR projection problem only with epsg:3785/900913
In-Reply-To: <CA334EEF.25996%michael.smith@usace.army.mil>
References: <CA334EEF.25996%michael.smith@usace.army.mil>
Message-ID: <201107012258.03192.even.rouault@mines-paris.org>

Le vendredi 01 juillet 2011 16:16:15, Smith, Michael ERDC-CRREL-NH a ?crit :
> All,
> 
> I?m using GDAL (1.9dev r22508) and getting errors only when reprojecting
> (raster or vector) to any of the Google Mercator projections.  On a number
> of linux boxes I have, this works fine, but, on a couple its a problem. The
> only difference on the problem boxes that I can see is that they have the
> configuration files for vertical datum reprojection and are using external
> libgeotiff (svn r2002) for use with libLAS and PDAL. Reprojection using
> either the epsg codes or the full proj string fails.
> 
> A couple of example errors
> 
> [u4rt9mds@lidarora1 /] ogr2ogr -f "ESRI Shapefile" -t_srs epsg:3785
> test.shp cincinnati_forests.shp
> ERROR 1: no system list, errno: 2

--> this error comes from proj.4, so I'd suspect something is wrong with the 
setup of the vertical datum data files. Perhaps activating PROJ_DEBUG 
environmenet variable might give more info.

> 
> Failed to reproject feature 0 (geometry probably out of source or
> destination SRS).
> ERROR 1: Terminating translation prematurely after failed
> translation of layer cincinnati_forests (use -skipfailures to skip errors)
> 
> [u4rt9mds@lidarora1 /] gdalwarp -of vrt -t_srs epsg:900913 -r near
> cincinnati_bare_earth_01.img test2.vrt
> ERROR 1: no system list, errno: 2
> 
> ERROR 1: GDALSuggestedWarpOutput() failed because the passed
> transformer failed.
> 
> Reprojection to any other projection seems to work fine
> 
> [u4rt9mds@lidarora1 /] gdalwarp -of vrt -t_srs epsg:26919
> /u02/LASdata/Office_of_Americas/Cincinnati_OH/Delivery/rasters/cincinnati_b
> a re_earth_01.img test.vrt
> Creating output file that is 20023P x 24321L.
> Processing input file
> /u02/LASdata/Office_of_Americas/Cincinnati_OH/Delivery/rasters/cincinnati_b
> a re_earth_01.img.
> Using internal nodata values (eg. -3.40282e+38) for image
> /u02/LASdata/Office_of_Americas/Cincinnati_OH/Delivery/rasters/cincinnati_b
> a re_earth_01.img.
> 
> 
> [u4rt9mds@lidarora1 /] ogr2ogr -progress -f "ESRI Shapefile" -t_srs
> epsg:26917 test.shp cincinnati_forests.shp
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> 
> Testepsg reports the correct output
> 
> [u4rt9mds@lidarora1 shapes]$ testepsg epsg:3785
> Validate Succeeds.
> WKT[epsg:3785] =
> PROJCS["Popular Visualisation CRS / Mercator (deprecated)",
>     GEOGCS["Popular Visualisation CRS",
>         DATUM["Popular_Visualisation_Datum",
>             SPHEROID["Popular Visualisation Sphere",6378137,0,
>                 AUTHORITY["EPSG","7059"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6055"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9122"]],
>         AUTHORITY["EPSG","4055"]],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     EXTENSION["PROJ4","+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0
> +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +wktext
> +no_defs"],
>     AUTHORITY["EPSG","3785"],
>     AXIS["X",EAST],
>     AXIS["Y",NORTH]]
> 
> Simplified WKT[epsg:3785] =
> PROJCS["Popular Visualisation CRS / Mercator (deprecated)",
>     GEOGCS["Popular Visualisation CRS",
>         DATUM["Popular_Visualisation_Datum",
>             SPHEROID["Popular Visualisation Sphere",6378137,0],
>             TOWGS84[0,0,0,0,0,0,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     UNIT["metre",1],
>     PROJECTION["Mercator_1SP"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["scale_factor",1],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0]]
> 
> Old Style WKT[epsg:3785] = PROJCS["Popular Visualisation CRS / Mercator
> (deprecated)",GEOGCS["Popular Visualisation
> CRS",DATUM["Popular_Visualisation_Datum",SPHEROID["Popular Visualisation
> Sphere",6378137,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]
> ]
> ,UNIT["metre",1],PROJECTION["Mercator_1SP"],PARAMETER["central_meridian",0
> ],
> PARAMETER["scale_factor",1],PARAMETER["false_easting",0],PARAMETER["false_
> no rthing",0]]
> ESRI'ified WKT[epsg:3785] =
> PROJCS["Popular_Visualisation_CRS_Mercator_deprecated",
>     GEOGCS["GCS_Popular Visualisation CRS",
>         DATUM["D_",
>             SPHEROID["Popular_Visualisation_Sphere",6378137,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Mercator"],
>     PARAMETER["central_meridian",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1],
>     PARAMETER["standard_parallel_1",0.0]]
> PROJ.4 rendering of [epsg:3785] = +proj=merc +a=6378137 +b=6378137
> +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null
> +wktext  +no_defs
From even.rouault at mines-paris.org  Fri Jul  1 16:58:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  1 17:14:56 2011
Subject: [gdal-dev] GDAL Stretch image
In-Reply-To: <1309510655297-6536958.post@n2.nabble.com>
References: <1309510655297-6536958.post@n2.nabble.com>
Message-ID: <201107012258.48857.even.rouault@mines-paris.org>

Le vendredi 01 juillet 2011 10:57:35, Solimyr a ?crit :
> Do you know how stretch an image using GDAL? Is this possible? If not, what
> method can I use?
> I need to stretch to Byte but in an equalized mode! I know that there is
> the scale tool in gdal but I don't know how make the stretch!

Are you looking for gdal_translate with -scale option ?

> Thx
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-Stretch-image-tp6536958p653695
> 8.html Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Fri Jul  1 17:02:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  1 17:19:06 2011
Subject: [gdal-dev] Strange error on gdalAllRegister()
In-Reply-To: <BANLkTimMF9yyaf_gt6KURAjLi63Ant6CiA@mail.gmail.com>
References: <BANLkTimMF9yyaf_gt6KURAjLi63Ant6CiA@mail.gmail.com>
Message-ID: <201107012302.49657.even.rouault@mines-paris.org>

Le vendredi 01 juillet 2011 22:29:45, Rodolfo Bonnin a ?crit :
> Hello All,
> 
> I'm writing two new drivers ( For ALOS PRISM and AVNIR-2 ) and I'm trying
> to add them to the list of drivers.
> 
> I've added them to gdal_frmts.h:
> 
> void CPL_DLL GDALRegister_PRISM(void)
> void CPL_DLL GDALRegister_AVNIR2(void)
> 
> And provisionally, I've added them to gdalallregister.cpp, joining them to
> the jaxapalsar driver, which I'm sure I'm including
> 
>  #ifdef FRMT_jaxapalsar
> 
>     GDALRegister_AVNIR2();
>     GDALRegister_PRISM();
>     GDALRegister_PALSARJaxa();
> 
> #endif
> 
> But I've no way of gdalallregister.cpp to see the declaration of the
> functions of these drivers.
> 
> 
> gdalallregister.cpp: In function 'void GDALAllRegister()':
> gdalallregister.cpp:483: error: 'GDALRegister_AVNIR2' was not declared in
> this scope
> gdalallregister.cpp:484: error: 'GDALRegister_PRISM' was not declared in
> this scope
> 
> 
> BTW, I', using a CMake script to compile, but the library compiles just
> fine with jaxapalsar support, if I delete the references to the new file
> formats, and at the point of compilation this bug triggers, the only
> requirement is that the GDALRegister functions have to be declared, and
> the gdal_frmts.h file is available.

Are you sure that your .cpp files is really including the gdal_frmts.h you've 
edited and not another one that might lie in a system directory somewhere ? 
I'd check the -I flag of g++ to see if it doesn't include another directory. 
And/or g++ -E to see the preprocessed output.

> 
> Many thanks in advance.
From even.rouault at mines-paris.org  Fri Jul  1 17:28:24 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  1 17:46:04 2011
Subject: [gdal-dev] Motion: Commit Access for Antonio Valentino
In-Reply-To: <201106292237.52641.even.rouault@mines-paris.org>
References: <201106292237.52641.even.rouault@mines-paris.org>
Message-ID: <201107012328.24976.even.rouault@mines-paris.org>

Le mercredi 29 juin 2011 22:37:52, Even Rouault a ?crit :
> Motion: Extend GDAL/OGR Commit Access to Antonio Valentino

I declare this motion passed with support from PSC members EvenR, FrankW, 
TamasS, AndreyK and HowardB and with non-PSC member AntonK.

Antonio, I'll let Frank deal with the practical details to enable you as a 
committer (I think he just needs your osgeo id which is "antonio").  Once 
that's done, you'll be able to update gdal/COMMITERS file in svn with your 
contact and userid details as your first test of commit ability.

Welcome aboard !
From jdomingo at green-code.com  Fri Jul  1 22:45:10 2011
From: jdomingo at green-code.com (James Domingo)
Date: Fri Jul  1 23:21:00 2011
Subject: [gdal-dev] C# bindings - ReadRaster & WriteRaster overloads in Band
	class
Message-ID: <4E0E8636.2010903@green-code.com>

A question about the GDAL C# bindings.  The overloads for the ReadRaster and
WriteRaster methods in the Band class take several different type of buffers:

   ReadRaster(..., byte[] buffer, ...)
   ReadRaster(..., short[] buffer, ...)
   ReadRaster(..., int[] buffer, ...)
   ReadRaster(..., float[] buffer, ...)
   ReadRaster(..., double[] buffer, ...)

I was wondering why there are no overloads for the unsigned integer types
that GDAL supports, e.g., unsigned 16-bit and 32-bit integers:

   ReadRaster(..., ushort[] buffer, ...)
   ReadRaster(..., uint[] buffer, ...)

The C# SWIG interface file (trunk/gdal/swig/include/csharp/gdal_csharp.i)
has lines that appear to define these overloads:

   /*! Sixteen bit unsigned integer */ //%rasterio_functions(DataType.GDT_UInt16,ushort)
   /*! Thirty two bit unsigned integer */ //%rasterio_functions(DataType.GDT_UInt32,uint)

but there is no information as to why they are commented out.  Was it to
maintain CLS-compliance?

Thanks,
Jimm
-- 
James Domingo
Green Code LLC
From warmerdam at pobox.com  Fri Jul  1 23:12:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul  1 23:49:38 2011
Subject: [gdal-dev] Strange error on gdalAllRegister()
In-Reply-To: <BANLkTimMF9yyaf_gt6KURAjLi63Ant6CiA@mail.gmail.com>
References: <BANLkTimMF9yyaf_gt6KURAjLi63Ant6CiA@mail.gmail.com>
Message-ID: <4E0E8C88.1040206@pobox.com>

On 11-07-01 04:29 PM, Rodolfo Bonnin wrote:
> Hello All,
>
> I'm writing two new drivers ( For ALOS PRISM and AVNIR-2 ) and I'm trying to
> add them to the list of drivers.
>
> I've added them to gdal_frmts.h:
>
> void CPL_DLL GDALRegister_PRISM(void)
> void CPL_DLL GDALRegister_AVNIR2(void)
...
> gdalallregister.cpp: In function 'void GDALAllRegister()':
> gdalallregister.cpp:483: error: 'GDALRegister_AVNIR2' was not declared in this
> scope
> gdalallregister.cpp:484: error: 'GDALRegister_PRISM' was not declared in this scope

Rodolfo,

I hope you actually terminated the prototypes in gdal_frmts.h with a
semi-colon!  Things should be working if the right copy of gdal_frmts.h
is being pulled into gdalallregister.cpp.  I'm not sure why you are
having problems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From antonio.valentino at tiscali.it  Sat Jul  2 04:12:37 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sat Jul  2 05:06:24 2011
Subject: [gdal-dev] Motion: Commit Access for Antonio Valentino
In-Reply-To: <201107012328.24976.even.rouault@mines-paris.org>
References: <201106292237.52641.even.rouault@mines-paris.org>
	<201107012328.24976.even.rouault@mines-paris.org>
Message-ID: <4E0ED2F5.7020103@tiscali.it>

Hi,

Il 01/07/2011 23:28, Even Rouault ha scritto:
> Le mercredi 29 juin 2011 22:37:52, Even Rouault a ?crit :
>> Motion: Extend GDAL/OGR Commit Access to Antonio Valentino
> 
> I declare this motion passed with support from PSC members EvenR, FrankW, 
> TamasS, AndreyK and HowardB and with non-PSC member AntonK.
> 
> Antonio, I'll let Frank deal with the practical details to enable you as a 
> committer (I think he just needs your osgeo id which is "antonio").  Once 
> that's done, you'll be able to update gdal/COMMITERS file in svn with your 
> contact and userid details as your first test of commit ability.
> 
> Welcome aboard !


Thank you very much


-- 
Antonio Valentino
From giannicristian at msn.com  Sat Jul  2 04:42:35 2011
From: giannicristian at msn.com (Solimyr)
Date: Sat Jul  2 05:38:01 2011
Subject: [gdal-dev] Re: GDAL Stretch image
In-Reply-To: <201107012258.48857.even.rouault@mines-paris.org>
References: <1309510655297-6536958.post@n2.nabble.com>
	<201107012258.48857.even.rouault@mines-paris.org>
Message-ID: <1309596155133-6540525.post@n2.nabble.com>

I know the scale mode but this make a linear stretch. I'm asking if there is
a different stretch (equalized, linear without 2% tail, gaussian,...) in
GDAL or I need to use a different one. And if there is what can I use?

Thx for the answer!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Stretch-image-tp6536958p6540525.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ahmettemiz88 at gmail.com  Sat Jul  2 11:40:32 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Sat Jul  2 12:58:58 2011
Subject: [gdal-dev] DEM with java and gdal*.jar
Message-ID: <CAJKO1YtMLPLkc8MF7Q_9YB9CFvze92WJZ9pczTmG0jHby28Q2A@mail.gmail.com>

hello

Is it possible to create a DEM from contour maps (shp) using java and
gdal*.jar ?


regards


-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From even.rouault at mines-paris.org  Sat Jul  2 11:47:51 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul  2 13:06:36 2011
Subject: [gdal-dev] DEM with java and gdal*.jar
In-Reply-To: <CAJKO1YtMLPLkc8MF7Q_9YB9CFvze92WJZ9pczTmG0jHby28Q2A@mail.gmail.com>
References: <CAJKO1YtMLPLkc8MF7Q_9YB9CFvze92WJZ9pczTmG0jHby28Q2A@mail.gmail.com>
Message-ID: <201107021747.51400.even.rouault@mines-paris.org>

Le samedi 02 juillet 2011 17:40:32, ahmet temiz a ?crit :
> hello
> 
> Is it possible to create a DEM from contour maps (shp) using java and
> gdal*.jar ?

Yes, it should be possible.

It is a 2 step process :

* First use gdal.RasterizeLayer() to "burn" the contours into a raster. See 
http://gdal.org/java/org/gdal/gdal/gdal.html#RasterizeLayer(org.gdal.gdal.Dataset,
%20int[],%20org.gdal.ogr.Layer,%20double[],%20java.util.Vector,
%20org.gdal.gdal.ProgressCallback)

* Then use gdal.FillNodata() to fill the nodata values between the burned 
contours with interpolated data. See 
http://gdal.org/java/org/gdal/gdal/gdal.html#FillNodata(org.gdal.gdal.Band,
%20org.gdal.gdal.Band,%20double,%20int,%20java.util.Vector,
%20org.gdal.gdal.ProgressCallback)

> 
> 
> regards
From even.rouault at mines-paris.org  Sat Jul  2 16:35:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul  2 18:10:11 2011
Subject: [gdal-dev] zmap format
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AF9630EF8@OKCEXHPRD007.chkenergy.net>
References: <BANLkTikh7ehmicFnNSGwEGUrJ4KeTHYE3w@mail.gmail.com>
	<201106271933.33594.even.rouault@mines-paris.org>
	<E3B01AE590420B45B38B00C9A8B23FDB4AF9630EF8@OKCEXHPRD007.chkenergy.net>
Message-ID: <201107022235.39891.even.rouault@mines-paris.org>

David,

Based on your specification of the format, which confirmed the other elements I 
gathered before, I've just commited in trunk a ZMap driver for read and 
creation support.

Testing appreciated.

Best regards,

Even
From even.rouault at mines-paris.org  Sun Jul  3 12:01:14 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul  3 14:40:39 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
Message-ID: <201107031801.14594.even.rouault@mines-paris.org>

Folks,

Hopefully this is the solution to a long-standing problem. Below the inline 
text of http://trac.osgeo.org/gdal/ticket/4144

"""
Currently it is not safe for an application to link libgdal built with 
internal libtiff support with system libtiff (3.X), because of the difference of 
ABI. The same issue could potentially happen with libgeotiff (in 1.9.0dev 
trunk, it's at v1.3.0, whereas in the wild you mostly find it at v1.2.0).

The solution implemented consists in :
    * compiling a libtiff.so/libgeotiff.so,
    * extracting the symbols from the .so with objdump,
    * and creating a header file that does #define original_symbol_name 
gdal_original_symbol_name for each symbol. 

This process is automated by a dump_symbols.sh scripts in frmts/gtiff/libtiff 
and frmts/gtiff/libgeotiff that must be run whenever internal libtiff/libgeotiff 
is updated (and that the version includes new symbols). The generated files are 
placed in svn to avoid running the script at each build, mainly because the 
script might only work on Linux. Wouldn't work as it on MacOS. But the end-
result should be portable.

Of course, one also must make sure this header file is included at the 
appropriate places. This mainly consists in including it in the tif_config.h 
and geo_config.h, but also in the INGR, NITF, JPEG drivers happen to use libtiff 
symbols, and MrSID for libgeotiff.

The renaming of the symbols is enabled if --with-rename-internal-libtiff-
symbols is defined. (--with-rename-internal-libgeotiff-symbols for geotiff).

This can be combined with the --with-hide-internal-symbols of course so that 
those gdal_ prefixed symbols are not exported, but this is an orthogonal issue.

"""

This solution is now implemented in trunk. Testing from others appreciated ! 
Although I've tested various combinations internal/external libtiff/libgeotiff, 
with/without the new flags, there might still be issues.

Best regards,

Even
From antonio.valentino at tiscali.it  Sun Jul  3 12:49:06 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun Jul  3 15:31:20 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <201107031801.14594.even.rouault@mines-paris.org>
References: <201107031801.14594.even.rouault@mines-paris.org>
Message-ID: <4E109D82.5060506@tiscali.it>

Hi Even,

Il 03/07/2011 18:01, Even Rouault ha scritto:
> Folks,
> 
> Hopefully this is the solution to a long-standing problem. Below the inline 
> text of http://trac.osgeo.org/gdal/ticket/4144
> 
> """
> Currently it is not safe for an application to link libgdal built with 
> internal libtiff support with system libtiff (3.X), because of the difference of 
> ABI. The same issue could potentially happen with libgeotiff (in 1.9.0dev 
> trunk, it's at v1.3.0, whereas in the wild you mostly find it at v1.2.0).
> 
> The solution implemented consists in :
>     * compiling a libtiff.so/libgeotiff.so,
>     * extracting the symbols from the .so with objdump,
>     * and creating a header file that does #define original_symbol_name 
> gdal_original_symbol_name for each symbol. 
> 
> This process is automated by a dump_symbols.sh scripts in frmts/gtiff/libtiff 
> and frmts/gtiff/libgeotiff that must be run whenever internal libtiff/libgeotiff 
> is updated (and that the version includes new symbols). The generated files are 
> placed in svn to avoid running the script at each build, mainly because the 
> script might only work on Linux. Wouldn't work as it on MacOS. But the end-
> result should be portable.
> 
> Of course, one also must make sure this header file is included at the 
> appropriate places. This mainly consists in including it in the tif_config.h 
> and geo_config.h, but also in the INGR, NITF, JPEG drivers happen to use libtiff 
> symbols, and MrSID for libgeotiff.
> 
> The renaming of the symbols is enabled if --with-rename-internal-libtiff-
> symbols is defined. (--with-rename-internal-libgeotiff-symbols for geotiff).
> 
> This can be combined with the --with-hide-internal-symbols of course so that 
> those gdal_ prefixed symbols are not exported, but this is an orthogonal issue.
> 
> """

congratulations, this was a big headache in some situation.

> This solution is now implemented in trunk. Testing from others appreciated ! 
> Although I've tested various combinations internal/external libtiff/libgeotiff, 
> with/without the new flags, there might still be issues.
> 
> Best regards,
> 
> Even

Do you have some particular indication about how to test it?
Which test programs did you use?


It seems to me that people of the the OTB project had serious problems
with this issue in the past and they have a fantastic test framework.

Maybe we could also ask to them for a little help for testing.


ciao

-- 
Antonio Valentino
From even.rouault at mines-paris.org  Sun Jul  3 13:02:03 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul  3 15:44:57 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <4E109D82.5060506@tiscali.it>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<4E109D82.5060506@tiscali.it>
Message-ID: <201107031902.03119.even.rouault@mines-paris.org>

 
> Do you have some particular indication about how to test it?
> Which test programs did you use?

My tests mainly consisted in checking that GDAL would compile and link 
successfully with various combinations of the configure options.

With the renaming options enabled, I did a "objdump -t libgdal.so | awk 
'{print $6}' | grep TIFF | grep -v TIFFjpeg_ | grep -v aig_ | grep -v gdal_ | 
sort -u" to ensure that all the symbols that should be renamed are. You will 
notice a few remaining occurrences but I think they are safe.

Also, when the renaming options where enabled, I added -ltiff -lgeotiff to the 
gdalinfo linking line, before or after -lgdal, and tested the executable on a 
few files.

> 
> 
> It seems to me that people of the the OTB project had serious problems
> with this issue in the past and they have a fantastic test framework.
> 
> Maybe we could also ask to them for a little help for testing.

Yes indeed, I had CC'ed Julien Malik who is affiliated with the OTB project in 
my announcement email.

> 
> 
> ciao
From nicholas.g.lawrence at tmr.qld.gov.au  Mon Jul  4 00:35:59 2011
From: nicholas.g.lawrence at tmr.qld.gov.au (nicholas.g.lawrence@tmr.qld.gov.au)
Date: Mon Jul  4 04:12:56 2011
Subject: [gdal-dev] raster to vector?
Message-ID: <OF7425369E.B6B93523-ON4A2578C3.0018EE38-4A2578C3.0019449B@tmr.qld.gov.au>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110704/adef1770/attachment.html
From chaitanya.ch at gmail.com  Mon Jul  4 02:42:44 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul  4 06:10:22 2011
Subject: [gdal-dev] raster to vector?
In-Reply-To: <OF7425369E.B6B93523-ON4A2578C3.0018EE38-4A2578C3.0019449B@tmr.qld.gov.au>
References: <OF7425369E.B6B93523-ON4A2578C3.0018EE38-4A2578C3.0019449B@tmr.qld.gov.au>
Message-ID: <CAMKgpOby5std_cp4PfyXS=etjgd0TYmirrx3P4Nraoqv4MgCww@mail.gmail.com>

Nicholas,

You can use the gdal_polygonize.py script [1] to do this. You might also
want to go through the documentation for GDALPolygonize() function[2]. If
your raster is non-thematic, your vector dataset could get too big. ESRI
Shapefile format has a file size limit of 4GB.

[1]: http://www.gdal.org/gdal_polygonize.html
[2]: http://www.gdal.org/gdal__alg_8h.html#3f522a9035d3512b5d414fb4752671b1

On Mon, Jul 4, 2011 at 10:05 AM, <nicholas.g.lawrence@tmr.qld.gov.au> wrote:

> Hello,
>
> I have a one-and-a-half gigabyte ermapper .ers file, that has one band,
> with values of 0 to 7 (integers only).
>
> I would like to turn this into vector polygons, such as a shapefile or
> mapinfo table.
>
> Can I do this with GDAL?
>
> Kind regards,
>
> *
> Nicholas Lawrence*
> Senior Spatial Science Officer | Darling Downs Region / Toowoomba Office*
> Assets & Operations* Division | Department of Transport and Main Roads
> ------------------------------
>
> Floor 1 | Toowoomba - Phillip Street | 1-5 Phillip Street (cnr Clopton
> Street) | Toowoomba Qld 4350
> PO Box 645 | Toowoomba Qld 4350
> P: (07) 46390764 | F: (07) 46390750
> E: nicholas.g.lawrence@tmr.qld.gov.au
> W: www.tmr.qld.gov.au*
> Tomorrow's Queensland: strong, green, smart, healthy and fair ?
> www.towardQ2.qld.gov.au*
> P| Please consider the environment before printing this email
>
> ***********************************************************************
> WARNING: This email (including any attachments) may contain legally
> privileged, confidential or private information and may be protected by
> copyright. You may only use it if you are the person(s) it was
> intended to be sent to and if you use it in an authorised way. No one
> is allowed to use, review, alter, transmit, disclose, distribute, print
> or copy this email without appropriate authority.
>
> If this email was not intended for you and was sent to you by mistake,
> please telephone or email me immediately, destroy any hardcopies of
> this email and delete it and any copies of it from your computer
> system. Any right which the sender may have under copyright law, and
> any legal privilege and confidentiality attached to this email is not
> waived or destroyed by that mistake.
>
> It is your responsibility to ensure that this email does not contain
> and is not affected by computer viruses, defects or interference by
> third parties or replication problems (including incompatibility with
> your computer system).
>
> Opinions contained in this email do not necessarily reflect the
> opinions of the Department of Transport and Main Roads,
> Maritime Safety Queensland or endorsed organisations utilising
> the same infrastructure.
> ***********************************************************************
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110704/b69f0204/attachment.html
From rodolfobonnin at suremptec.com.ar  Mon Jul  4 08:20:08 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Mon Jul  4 08:31:21 2011
Subject: [gdal-dev] Strange error on gdalAllRegister()
In-Reply-To: <4E0E8C88.1040206@pobox.com>
References: <BANLkTimMF9yyaf_gt6KURAjLi63Ant6CiA@mail.gmail.com>
	<4E0E8C88.1040206@pobox.com>
Message-ID: <CACMBy_HDtZmnGim0c8Nqb8Ppjt4wP=qXvjjf1dHbiZzaxtQ2ow@mail.gmail.com>

I'm sorry Even, Frank, yes, just needed a break :-). Symptoms of Friday's
afternoon I guess.

Regards,
Rodolfo.

2011/7/2 Frank Warmerdam <warmerdam@pobox.com>

> On 11-07-01 04:29 PM, Rodolfo Bonnin wrote:
>
>> Hello All,
>>
>> I'm writing two new drivers ( For ALOS PRISM and AVNIR-2 ) and I'm trying
>> to
>> add them to the list of drivers.
>>
>> I've added them to gdal_frmts.h:
>>
>> void CPL_DLL GDALRegister_PRISM(void)
>> void CPL_DLL GDALRegister_AVNIR2(void)
>>
> ...
>
> gdalallregister.cpp: In function 'void GDALAllRegister()':
>> gdalallregister.cpp:483: error: 'GDALRegister_AVNIR2' was not declared in
>> this
>> scope
>> gdalallregister.cpp:484: error: 'GDALRegister_PRISM' was not declared in
>> this scope
>>
>
> Rodolfo,
>
> I hope you actually terminated the prototypes in gdal_frmts.h with a
> semi-colon!  Things should be working if the right copy of gdal_frmts.h
> is being pulled into gdalallregister.cpp.  I'm not sure why you are
> having problems.
>
> Best regards,
> --
> ------------------------------**---------+--------------------**
> ------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110704/3285180d/attachment-0001.html
From julien.malik at c-s.fr  Mon Jul  4 07:56:05 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Mon Jul  4 08:43:19 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <201107031902.03119.even.rouault@mines-paris.org>
References: <201107031801.14594.even.rouault@mines-paris.org>	<4E109D82.5060506@tiscali.it>
	<201107031902.03119.even.rouault@mines-paris.org>
Message-ID: <4E11AA55.9020407@c-s.fr>

Hello,

Great news !
I don't have a lot of time right now, but setting up a test platform 
with gdal trunk is high in my priority list !

About the testing, we identified two problematic cases :

[1] http://hg.orfeo-toolbox.org/OTB/file/tip/CMake/TestXTIFFOpen.cxx
Linked with '-lgdal -lgeotiff -ltiff'.
On an ubuntu machine, this program crashes when accessing a TIFF

[2] http://hg.orfeo-toolbox.org/OTB/file/tip/CMake/TestGDALOpen.cxx
Linked with '-lgeotiff -lgdal'
On a debian machine, this program crashes when opening a TIFF.
Not sure but I think things evolved in unstable and we have a similar 
behavior as Ubuntu (would need further checking, as we don't have a 
regular debian unstable nightly build...)

You might want to check those two as part of the gdal test system.
In OTB, we do this as part of the configuration phase, and print a 
warning in case something fails.


Regards,
Julien



Le 03/07/2011 19:02, Even Rouault a ?crit :
>
>> Do you have some particular indication about how to test it?
>> Which test programs did you use?
> My tests mainly consisted in checking that GDAL would compile and link
> successfully with various combinations of the configure options.
>
> With the renaming options enabled, I did a "objdump -t libgdal.so | awk
> '{print $6}' | grep TIFF | grep -v TIFFjpeg_ | grep -v aig_ | grep -v gdal_ |
> sort -u" to ensure that all the symbols that should be renamed are. You will
> notice a few remaining occurrences but I think they are safe.
>
> Also, when the renaming options where enabled, I added -ltiff -lgeotiff to the
> gdalinfo linking line, before or after -lgdal, and tested the executable on a
> few files.
>
>>
>> It seems to me that people of the the OTB project had serious problems
>> with this issue in the past and they have a fantastic test framework.
>>
>> Maybe we could also ask to them for a little help for testing.
> Yes indeed, I had CC'ed Julien Malik who is affiliated with the OTB project in
> my announcement email.
>
>>
>> ciao
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From alexmantaut at suremptec.com.ar  Mon Jul  4 08:52:15 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul  4 09:05:13 2011
Subject: [gdal-dev] HDF5 product handling
Message-ID: <CAC4=NR9BywUa0FNb7Sa6LzD7tf+LgKZT=6mZOHYuww6=TsP7dQ@mail.gmail.com>

Hi all,
        I'm developing a modification on the hdf5imagedataset driver to get
Georreference and Geotransform information from COSMO-SKYMED product files
(COSMO-SKYMED hdf5 products are just hdf5 files with a specific format on
the metadata).

         I've allready managed to get both the georreference and the
geotransform information from the file, and I would like to include it into
the driver to make it part of GDAL (if it is usefull to the project)

        I would like to ask what would be the best way to implement a driver
that handles HDF5 subproducts, in a way that it doesn't interfere with the
behavior for hdf5 for files that ain't from any specific product type, and
allows to add new product types easly... (It's quite likely I will have to
add a new hdf5 product type soon)

       Because hdf5 products are just hdf5 files with a special order in the
metadata, I think that the code to interpret them should go in the
hdf5dataset (or hdf5imagedataset) to reuse the code that opens the files...
Is this okay?

       If the code for subproducts should go on the hdf5dataset (or
hdf5imagedataset)  I have a doubt about design...

       A way I thought to implement drivers for products is to create a
small module wich detects the subproduct type when opening the hdf5 file,
and creates an apropiate "subdriver" which will interpret the
Georrefrence and Georreference info, but that does nothing in case no
product type has been detected... This way every new hdf5 product type will
be a new class, and the product code will not pollute the driver's code. Is
this design ok? Or there is a better way to do this?

I will like to contribute with this code in a way that it will be usefull to
the project and that allows extension (if possible)

Any feedback will be welcomed, thanks in advance
Alex












-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110704/3750cd16/attachment.html
From nicolas.simon at spw.wallonie.be  Mon Jul  4 08:32:42 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon Jul  4 09:11:16 2011
Subject: [gdal-dev] OGR : OCI driver improvement
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926F06@DGA-EXC01.mrw.wallonie.int>

Hi all, 

I'd like to propose some OCI driver improvement.
 
1) Enable insert from different client. This could be done by managing the generation of new FID on DB side instead of client side.
Technically this could be done with an oracle sequence and a trigger to fill the FID. 
This proposition modify the way FID are handled ( I propose to do as in PostGIS driver). This means that the FID of a feature (i.e. usually the value of the OGC_FID column for the feature) inserted into a table with CreateFeature() will be retrieved from the database and can be obtained with GetFID() even if an non-null FID was provided. 
This could be easily implemented in UnboundCreateFeature with a 'returning' clause.
But I don't known if it's feasible in BoundCreateFeature since truth FIDs will be know later when OGROCITableLayer::FlushPendingFeatures() is called. 

2) By providing true update operation instead of delete + insert operations (cf SetFeture).
This should provide better performance and enable to develop trigger on update if needed for other purpose. 
With this modification, OCI driver will have the following mapping between OGR concepts and Oracle operations:
    OGRFeature::CreateFeature() <==> INSERT operation
    OGRFeature::SetFeature() <==> UPDATE operation
    OGRFeature::DeleteFeature() <==> DELETE operation
This modify slightly the actual behavior since it disable the possibility of inserting a new record through SetFeature (in case of  they were no record to delete, the subsequent insert did the job). With the proposed implementation it'll be no longer the case.  "Update ... set ...  where FID = provided FID" command doesn't insert new record. 

3) Add transaction support in the normal SQL sense.
Since transaction is handled within a session and we have a session per OGROCIDataSource, a transaction will include operation on any layer of that datasource. 
I propose the following operating mode.

Outside a transaction, we'll be in 'auto commit' mode. 
  This commit on success DeleteFeature, SetFeature and CreateFeature (not in MULTI_LOAD mode). 
  For CreateFeature (in MULTI_LOAD mode) data will be commited 
  - each time the buffer is full (when OGROCITableLayer::FlushPendingFeatures() is called)
  - when OGROCITableLayer::SyncToDisk() is call
  - before a new transaction start.

Transaction start (through a call OGRLayer::StartTransaction()) for all layer in the DataSource.
OGRLayer::CommitTransaction() will call OGROCITableLayer::SyncToDisk() for each layer of  the DataSource and issues one commit command for the session, and then return in auto commit mode (cf outside transaction mechanism)
OGRLayer::RollbackTransaction() will drop PendingFeature (may be  through a private function that reset nWriteCacheUsed to 0) for each layer of the datasource and issues one rollback command for the session, and then return to auto commit mode.

I would like to know if someone else is interested in these improvements ?  
Is it the way you want things work ?

An other information is that I'm ready to work for these improvements. 

Regards,

Nicolas

================================================== 
Nicolas Simon, Informaticien 
Service Public de Wallonie (SPW)
Direction g?n?rale op?rationnelle Agriculture, Ressources Naturelles et Environnement (DGARNE)
D?partement des Aides
Direction de l'Octroi des Aides agricoles - Service Informatique
14, Chauss?e de Louvain - 4e ?tage 
5000 Namur 
BELGIUM 



From warmerdam at pobox.com  Mon Jul  4 09:03:22 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul  4 09:16:55 2011
Subject: [gdal-dev] HDF5 product handling
In-Reply-To: <CAC4=NR9BywUa0FNb7Sa6LzD7tf+LgKZT=6mZOHYuww6=TsP7dQ@mail.gmail.com>
References: <CAC4=NR9BywUa0FNb7Sa6LzD7tf+LgKZT=6mZOHYuww6=TsP7dQ@mail.gmail.com>
Message-ID: <CA+YzLBezLG7TbNVJeXHAEBAO0HP7PXcWHb12q_mTew6SefBQMw@mail.gmail.com>

On Mon, Jul 4, 2011 at 8:52 AM, Alex Mantaut
<alexmantaut@suremptec.com.ar> wrote:
> ????????I would like to ask what would be the best way to?implement?a driver
> that handles?HDF5 subproducts, in a way that it doesn't interfere with the
> behavior for hdf5 for files that ain't from any specific product type, and
> allows to add new product types easly... (It's quite likely I will have to
> add a new hdf5 product type soon)
>
> ?????? Because hdf5 products are just hdf5 files with a special order in the
> metadata, I think that the code to interpret them should go in the
> hdf5dataset (or hdf5imagedataset) to reuse the code that opens the files...
> Is this okay?
>
> ???????If the code for subproducts should go on the hdf5dataset (or
> hdf5imagedataset)??I?have a doubt about design...

Alex,

We have a similar issue in the HDF4 driver.  The approach there has
roughly been to have one or some data items in the HDF4Dataset
class (or perhaps HDF4ImageDataset) which enumerates what the
product is, with a generic option for anything which isn't special
product.

The Open() method has special logic to identify products, and
harvest extra metadata depending on the product type.  Rather
than create subdriver's I'd suggest such using this approach,
and perhaps having one 'metadata harvest" method on the
driver for each subproduct.  In many cases that is sufficient.

I look forward to seeing your patches!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From warmerdam at pobox.com  Mon Jul  4 09:09:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul  4 09:23:35 2011
Subject: [gdal-dev] OGR : OCI driver improvement
In-Reply-To: <8C7DAE7B21100F4CABDD600FAAD339D005926F06@DGA-EXC01.mrw.wallonie.int>
References: <8C7DAE7B21100F4CABDD600FAAD339D005926F06@DGA-EXC01.mrw.wallonie.int>
Message-ID: <CA+YzLBcy9T=W+0g5MzBHesg70K4fBPzDkQqh-CoeznaP7xHLjQ@mail.gmail.com>

Nicolas,

The proposed changes seem reasonable, but I am concerned about complexity and
risk of breaking the driver in some rarely tested cases.  The OCI
driver is pretty
fragile.

On Mon, Jul 4, 2011 at 8:32 AM, Nicolas Simon
<nicolas.simon@spw.wallonie.be> wrote:
> Hi all,
>
> I'd like to propose some OCI driver improvement.
>
> 1) Enable insert from different client. This could be done by managing the generation of new FID on DB side instead of client side.
> Technically this could be done with an oracle sequence and a trigger to fill the FID.
> This proposition modify the way FID are handled ( I propose to do as in PostGIS driver). This means that the FID of a feature (i.e. usually the value of the OGC_FID column for the feature) inserted into a table with CreateFeature() will be retrieved from the database and can be obtained with GetFID() even if an non-null FID was provided.
> This could be easily implemented in UnboundCreateFeature with a 'returning' clause.
> But I don't known if it's feasible in BoundCreateFeature since truth FIDs will be know later when OGROCITableLayer::FlushPendingFeatures() is called.

I'm not clear on what you will do if CreateFeature() is called on a
table for which the
the sequence and trigger to fill the FID do not already exist.  Will
you create it?  I'm
concerned this will not be honoured by other applications interacting with the
table.

> 2) By providing true update operation instead of delete + insert operations (cf SetFeture).
> This should provide better performance and enable to develop trigger on update if needed for other purpose.
> With this modification, OCI driver will have the following mapping between OGR concepts and Oracle operations:
> ? ?OGRFeature::CreateFeature() <==> INSERT operation
> ? ?OGRFeature::SetFeature() <==> UPDATE operation
> ? ?OGRFeature::DeleteFeature() <==> DELETE operation
> This modify slightly the actual behavior since it disable the possibility of inserting a new record through SetFeature (in case of ?they were no record to delete, the subsequent insert did the job). With the proposed implementation it'll be no longer the case. ?"Update ... set ... ?where FID = provided FID" command doesn't insert new record.

The main downside I see with implementing SetFeature() as an UPDATE is
complexity -
another whole set of code for assigning records.  But that isn't a
compelling reason
not to do it.

> 3) Add transaction support in the normal SQL sense.
> Since transaction is handled within a session and we have a session per OGROCIDataSource, a transaction will include operation on any layer of that datasource.
> I propose the following operating mode.
>
> Outside a transaction, we'll be in 'auto commit' mode.
> ?This commit on success DeleteFeature, SetFeature and CreateFeature (not in MULTI_LOAD mode).
> ?For CreateFeature (in MULTI_LOAD mode) data will be commited
> ?- each time the buffer is full (when OGROCITableLayer::FlushPendingFeatures() is called)
> ?- when OGROCITableLayer::SyncToDisk() is call
> ?- before a new transaction start.
>
> Transaction start (through a call OGRLayer::StartTransaction()) for all layer in the DataSource.
> OGRLayer::CommitTransaction() will call OGROCITableLayer::SyncToDisk() for each layer of ?the DataSource and issues one commit command for the session, and then return in auto commit mode (cf outside transaction mechanism)
> OGRLayer::RollbackTransaction() will drop PendingFeature (may be ?through a private function that reset nWriteCacheUsed to 0) for each layer of the datasource and issues one rollback command for the session, and then return to auto commit mode.

This *seems* reasonable, but please understand that the OGR transaction
model is fairly weak.

> I would like to know if someone else is interested in these improvements ?
> Is it the way you want things work ?
>
> An other information is that I'm ready to work for these improvements.

I think the changes are desirable (in trunk only!) but if you provide them
I am hopefully you will take an ongoing interest in maintenance of the
OCI driver.   Hopefully you might also be open to taking on commit
access so you can do stuff more easily (perhaps after first submitting
patches via trac for review).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From alexmantaut at suremptec.com.ar  Mon Jul  4 09:16:25 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul  4 09:30:45 2011
Subject: [gdal-dev] HDF5 product handling
In-Reply-To: <CA+YzLBezLG7TbNVJeXHAEBAO0HP7PXcWHb12q_mTew6SefBQMw@mail.gmail.com>
References: <CAC4=NR9BywUa0FNb7Sa6LzD7tf+LgKZT=6mZOHYuww6=TsP7dQ@mail.gmail.com>
	<CA+YzLBezLG7TbNVJeXHAEBAO0HP7PXcWHb12q_mTew6SefBQMw@mail.gmail.com>
Message-ID: <CAC4=NR9NSRsYEqWGED13LLVjV2avv-HzMZXc5LHOdzm-GBU0vQ@mail.gmail.com>

Hi Frank,
     In that case all the handling for the CSK product should go on the
Open() method from hdf5imagedataset? Is there any way to avoid polluting the
hdf5imagedataset with all the subproduct's constants? Shall I define Product
specific private methods as: getCSKGeotransform() to get the information?
regards

2011/7/4 Frank Warmerdam <warmerdam@pobox.com>

> On Mon, Jul 4, 2011 at 8:52 AM, Alex Mantaut
> <alexmantaut@suremptec.com.ar> wrote:
> >         I would like to ask what would be the best way to implement a
> driver
> > that handles HDF5 subproducts, in a way that it doesn't interfere with
> the
> > behavior for hdf5 for files that ain't from any specific product type,
> and
> > allows to add new product types easly... (It's quite likely I will have
> to
> > add a new hdf5 product type soon)
> >
> >        Because hdf5 products are just hdf5 files with a special order in
> the
> > metadata, I think that the code to interpret them should go in the
> > hdf5dataset (or hdf5imagedataset) to reuse the code that opens the
> files...
> > Is this okay?
> >
> >        If the code for subproducts should go on the hdf5dataset (or
> > hdf5imagedataset)  I have a doubt about design...
>
> Alex,
>
> We have a similar issue in the HDF4 driver.  The approach there has
> roughly been to have one or some data items in the HDF4Dataset
> class (or perhaps HDF4ImageDataset) which enumerates what the
> product is, with a generic option for anything which isn't special
> product.
>
> The Open() method has special logic to identify products, and
> harvest extra metadata depending on the product type.  Rather
> than create subdriver's I'd suggest such using this approach,
> and perhaps having one 'metadata harvest" method on the
> driver for each subproduct.  In many cases that is sufficient.
>
> I look forward to seeing your patches!
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110704/18765002/attachment-0001.html
From P.Halls at york.ac.uk  Mon Jul  4 09:19:28 2011
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Mon Jul  4 09:35:38 2011
Subject: [gdal-dev] OGR : OCI driver improvement
In-Reply-To: <8C7DAE7B21100F4CABDD600FAAD339D005926F06@DGA-EXC01.mrw.wallonie.int>
References: <8C7DAE7B21100F4CABDD600FAAD339D005926F06@DGA-EXC01.mrw.wallonie.int>
Message-ID: <4E11BDE0.4040306@york.ac.uk>

Nicolas,

    I had a play with some of this a few years back, using GDAl 6.3, I think. 
I've back out of most of it ... It is good to see another person interested in 
improving the OCI driver.

Nicolas Simon wrote:
> Hi all, 
> 
> I'd like to propose some OCI driver improvement.
>  
> 1) Enable insert from different client. This could be done by managing the generation of new FID on DB side instead of client side.
> Technically this could be done with an oracle sequence and a trigger to fill the FID. 
> This proposition modify the way FID are handled ( I propose to do as in PostGIS driver). This means that the FID of a feature (i.e. usually the value of the OGC_FID column for the feature) inserted into a table with CreateFeature() will be retrieved from the database and can be obtained with GetFID() even if an non-null FID was provided. 
> This could be easily implemented in UnboundCreateFeature with a 'returning' clause.
> But I don't known if it's feasible in BoundCreateFeature since truth FIDs will be know later when OGROCITableLayer::FlushPendingFeatures() is called. 

I tried this, but it seemed to slow inserts down dramatically - as does setting 
Primary Key, etc.  I was seeking a means of incrementally building a very large 
spatial database - at least several hundred million entries (a road network).  I 
would be happy if the table were opened for exclusive writing but the FID read 
from the table and used to seed the value used in OGR.  Maybe I got the code wrong.

> 
> 2) By providing true update operation instead of delete + insert operations (cf SetFeture).
> This should provide better performance and enable to develop trigger on update if needed for other purpose. 
> With this modification, OCI driver will have the following mapping between OGR concepts and Oracle operations:
>     OGRFeature::CreateFeature() <==> INSERT operation
>     OGRFeature::SetFeature() <==> UPDATE operation
>     OGRFeature::DeleteFeature() <==> DELETE operation
> This modify slightly the actual behavior since it disable the possibility of inserting a new record through SetFeature (in case of  they were no record to delete, the subsequent insert did the job). With the proposed implementation it'll be no longer the case.  "Update ... set ...  where FID = provided FID" command doesn't insert new record. 

The concept is great, but doing it this way is not: it will mean that existing 
applications written to be output agnostic will need to be rewritten.  It would 
be better to introduce an UpdateFeature method that detects whether an update 
operation is supported and used delete/insert where update is unavailable.  This 
would not break existing software.

> 
> 3) Add transaction support in the normal SQL sense.
> Since transaction is handled within a session and we have a session per OGROCIDataSource, a transaction will include operation on any layer of that datasource. 
> I propose the following operating mode.
> 
> Outside a transaction, we'll be in 'auto commit' mode. 
>   This commit on success DeleteFeature, SetFeature and CreateFeature (not in MULTI_LOAD mode). 
>   For CreateFeature (in MULTI_LOAD mode) data will be commited 
>   - each time the buffer is full (when OGROCITableLayer::FlushPendingFeatures() is called)
>   - when OGROCITableLayer::SyncToDisk() is call
>   - before a new transaction start.
> 
> Transaction start (through a call OGRLayer::StartTransaction()) for all layer in the DataSource.
> OGRLayer::CommitTransaction() will call OGROCITableLayer::SyncToDisk() for each layer of  the DataSource and issues one commit command for the session, and then return in auto commit mode (cf outside transaction mechanism)
> OGRLayer::RollbackTransaction() will drop PendingFeature (may be  through a private function that reset nWriteCacheUsed to 0) for each layer of the datasource and issues one rollback command for the session, and then return to auto commit mode.
> 

I see the benefit of implementing transactions, although I very rarely use this 
approach in my work.  For many users, this may not be a necessity, so it should 
be available to initiate, rather than as default.  I guess this means an option 
at connection time?

> I would like to know if someone else is interested in these improvements ?  
> Is it the way you want things work ?
> 
> An other information is that I'm ready to work for these improvements. 
> 
> Regards,
> 
> Nicolas

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor & Acting Team Leader Applications Support Group,
                Information Directorate, University of York
Telephone: 01904 323806     Fax: 01904 323740
Snail mail: Harry Fairhurst Building, University of York,
             Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From warmerdam at pobox.com  Mon Jul  4 09:29:01 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul  4 09:44:06 2011
Subject: [gdal-dev] HDF5 product handling
In-Reply-To: <CAC4=NR9NSRsYEqWGED13LLVjV2avv-HzMZXc5LHOdzm-GBU0vQ@mail.gmail.com>
References: <CAC4=NR9BywUa0FNb7Sa6LzD7tf+LgKZT=6mZOHYuww6=TsP7dQ@mail.gmail.com>
	<CA+YzLBezLG7TbNVJeXHAEBAO0HP7PXcWHb12q_mTew6SefBQMw@mail.gmail.com>
	<CAC4=NR9NSRsYEqWGED13LLVjV2avv-HzMZXc5LHOdzm-GBU0vQ@mail.gmail.com>
Message-ID: <CA+YzLBdZ+UsaME9q84qEb3tT7qspUVvX5+Rp537NjUWSYT5dHg@mail.gmail.com>

On Mon, Jul 4, 2011 at 9:16 AM, Alex Mantaut
<alexmantaut@suremptec.com.ar> wrote:
> Hi Frank,
> ???? In that case all the handling for the CSK product should go on the
> Open() method from hdf5imagedataset??Is there any way to avoid polluting the
> hdf5imagedataset with all the subproduct's constants?

Generally I would just use the constants inline rather than predefine
them for this purpose.  If you find the product stuff is getting really
bulky you could move it into a separate source file, but I'd suggest
avoiding extra specific classes.

> Shall I define Product
> specific private methods as: getCSKGeotransform() to get the information?
> regards

Normally in the open we would do a product-specific method to fetch
metadata and it would set the metadata data members, geotransform and
other similar stuff rather than having many product specific methods for
particular data items.

I can try to review your patch when ready.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From alexmantaut at suremptec.com.ar  Mon Jul  4 10:05:00 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul  4 10:22:02 2011
Subject: [gdal-dev] HDF5 product handling
In-Reply-To: <CA+YzLBdZ+UsaME9q84qEb3tT7qspUVvX5+Rp537NjUWSYT5dHg@mail.gmail.com>
References: <CAC4=NR9BywUa0FNb7Sa6LzD7tf+LgKZT=6mZOHYuww6=TsP7dQ@mail.gmail.com>
	<CA+YzLBezLG7TbNVJeXHAEBAO0HP7PXcWHb12q_mTew6SefBQMw@mail.gmail.com>
	<CAC4=NR9NSRsYEqWGED13LLVjV2avv-HzMZXc5LHOdzm-GBU0vQ@mail.gmail.com>
	<CA+YzLBdZ+UsaME9q84qEb3tT7qspUVvX5+Rp537NjUWSYT5dHg@mail.gmail.com>
Message-ID: <CAC4=NR_OdE8Zww=FG5+6=J9Yd5PBT8Nb2jkdtTkxNs4ts8bcjw@mail.gmail.com>

Thanks Frank, I will define product-specific methods just to fetch the
metadata in the open method.
I will use the hdf4imagedataset code as a guide on how to process the
metadata.(I didn't realized earlier that hdf4 implements something similar
to what I asked :P)

I still need to solve a few things before posting the patch, I look foward
incorporate the patch into the project.

Regards

2011/7/4 Frank Warmerdam <warmerdam@pobox.com>

> On Mon, Jul 4, 2011 at 9:16 AM, Alex Mantaut
> <alexmantaut@suremptec.com.ar> wrote:
> > Hi Frank,
> >      In that case all the handling for the CSK product should go on the
> > Open() method from hdf5imagedataset? Is there any way to avoid polluting
> the
> > hdf5imagedataset with all the subproduct's constants?
>
> Generally I would just use the constants inline rather than predefine
> them for this purpose.  If you find the product stuff is getting really
> bulky you could move it into a separate source file, but I'd suggest
> avoiding extra specific classes.
>
> > Shall I define Product
> > specific private methods as: getCSKGeotransform() to get the information?
> > regards
>
> Normally in the open we would do a product-specific method to fetch
> metadata and it would set the metadata data members, geotransform and
> other similar stuff rather than having many product specific methods for
> particular data items.
>
> I can try to review your patch when ready.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>



-- 
--
     Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110704/f2f5905f/attachment.html
From alexmantaut at suremptec.com.ar  Mon Jul  4 10:16:53 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul  4 10:34:32 2011
Subject: [gdal-dev] COSMO-SKYMED UPS projected files
Message-ID: <CAC4=NR9xfRqCSfu1cJq3=xyBe=MvSsFk14FZcv86tDrRdG+WoQ@mail.gmail.com>

Hi all
??????????I'm developing a COSMO-SKYMED driver for HDF5 files.
Acording to the?format's specification?CSK has 2 projection types
(UTM (-80? ? center latitude ? 84?), UPS (otherwise))
         I need to test the?createprojections() method, but?all the
COSMO-SKYMED files I could find where projected on UTM, none on UPS...
I will like to test the driver for both projection types... Does
anybody has COSMO-SKYMED UPS projected files? (i will use them only
for testing purposes)

thanks in advance

--
--
???? Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
From dmorissette at mapgears.com  Mon Jul  4 10:25:10 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jul  4 10:50:09 2011
Subject: [gdal-dev] Motion: Commit Access for Antonio Valentino
In-Reply-To: <201107012328.24976.even.rouault@mines-paris.org>
References: <201106292237.52641.even.rouault@mines-paris.org>
	<201107012328.24976.even.rouault@mines-paris.org>
Message-ID: <4E11CD46.9080006@mapgears.com>

And FWIW here comes my belated +1... sorry for not responding in time.

Daniel

On 11-07-01 05:28 PM, Even Rouault wrote:
> Le mercredi 29 juin 2011 22:37:52, Even Rouault a ?crit :
>> Motion: Extend GDAL/OGR Commit Access to Antonio Valentino
>
> I declare this motion passed with support from PSC members EvenR, FrankW,
> TamasS, AndreyK and HowardB and with non-PSC member AntonK.
>
> Antonio, I'll let Frank deal with the practical details to enable you as a
> committer (I think he just needs your osgeo id which is "antonio").  Once
> that's done, you'll be able to update gdal/COMMITERS file in svn with your
> contact and userid details as your first test of commit ability.
>
> Welcome aboard !
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From nicolas.simon at spw.wallonie.be  Mon Jul  4 11:17:27 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon Jul  4 11:39:02 2011
Subject: [gdal-dev] OGR : OCI driver improvement
In-Reply-To: <4E11BDE0.4040306@york.ac.uk>
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926F10@DGA-EXC01.mrw.wallonie.int>

Frank, Peter and others,
	
> -----Message d'origine-----
> De : Peter J Halls [mailto:P.Halls@york.ac.uk]
> Envoy? : lundi 4 juillet 2011 15:19
> ? : Nicolas Simon
> Cc : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] OGR : OCI driver improvement
> 
> 
> Nicolas,
> 
>     I had a play with some of this a few years back, using 
> GDAl 6.3, I think. 
> I've back out of most of it ... It is good to see another 
> person interested in 
> improving the OCI driver.
> 
> Nicolas Simon wrote:
> > Hi all, 
> > 
> > I'd like to propose some OCI driver improvement.
> >  
> > 1) Enable insert from different client. This could be done 
> by managing the generation of new FID on DB side instead of 
> client side.
> > Technically this could be done with an oracle sequence and 
> a trigger to fill the FID. 
> > This proposition modify the way FID are handled ( I propose 
> to do as in PostGIS driver). This means that the FID of a 
> feature (i.e. usually the value of the OGC_FID column for the 
> feature) inserted into a table with CreateFeature() will be 
> retrieved from the database and can be obtained with GetFID() 
> even if an non-null FID was provided. 
> > This could be easily implemented in UnboundCreateFeature 
> with a 'returning' clause.
> > But I don't known if it's feasible in BoundCreateFeature 
> since truth FIDs will be know later when 
> OGROCITableLayer::FlushPendingFeatures() is called. 
> 
> I tried this, but it seemed to slow inserts down dramatically 
> - as does setting 
> Primary Key, etc.  I was seeking a means of incrementally 
> building a very large 
> spatial database - at least several hundred million entries 
> (a road network).  I 
> would be happy if the table were opened for exclusive writing 
> but the FID read 
> from the table and used to seed the value used in OGR.  Maybe 
> I got the code wrong.
> 
It's not tricky to manage speed, integrity and compatibility
Well the driver (on client side) could initialize itself with the maxFID and generate a new 'default' FID for Feature. As done presently.
If no trigger/sequence where in place, the 'default' FID will be used. Nice: full compatibility.
If a trigger/sequence are in place, the 'default' FID will be overwritten by DB trigger.

A trigger/sequence could be setup with a special sql command ( ie. like DELLAYER:<table_name> ) or with a -lco when creating the layer.
 
A subsisting problem is how to handle CreateFeature with preset FID ? It could corrupt the FID sequence ( the 'default' one in the driver and the sequence in the DB). So to preserve integrity, I think that the preset FID should be ignored and overwritten by the 'default' FID or 'DB' FID -> We gain in integrity but lose in compatibility. What's the best chose ?
> > 
> > 2) By providing true update operation instead of delete + 
> insert operations (cf SetFeture).
> > This should provide better performance and enable to 
> develop trigger on update if needed for other purpose. 
> > With this modification, OCI driver will have the following 
> mapping between OGR concepts and Oracle operations:
> >     OGRFeature::CreateFeature() <==> INSERT operation
> >     OGRFeature::SetFeature() <==> UPDATE operation
> >     OGRFeature::DeleteFeature() <==> DELETE operation
> > This modify slightly the actual behavior since it disable 
> the possibility of inserting a new record through SetFeature 
> (in case of  they were no record to delete, the subsequent 
> insert did the job). With the proposed implementation it'll 
> be no longer the case.  "Update ... set ...  where FID = 
> provided FID" command doesn't insert new record. 
> 
> The concept is great, but doing it this way is not: it will 
> mean that existing 
> applications written to be output agnostic will need to be 
> rewritten.  It would 
> be better to introduce an UpdateFeature method that detects 
> whether an update 
> operation is supported and used delete/insert where update is 
> unavailable.  This 
> would not break existing software.
> 
It'is ok for me, it tries update and if no row is updated produce a CreateFeature ... but in this last case with the FID provided by the driver or the DB (see previous comment) 
  
> > 
> > 3) Add transaction support in the normal SQL sense.
> > Since transaction is handled within a session and we have a 
> session per OGROCIDataSource, a transaction will include 
> operation on any layer of that datasource. 
> > I propose the following operating mode.
> > 
> > Outside a transaction, we'll be in 'auto commit' mode. 
> >   This commit on success DeleteFeature, SetFeature and 
> CreateFeature (not in MULTI_LOAD mode). 
> >   For CreateFeature (in MULTI_LOAD mode) data will be commited 
> >   - each time the buffer is full (when 
> OGROCITableLayer::FlushPendingFeatures() is called)
> >   - when OGROCITableLayer::SyncToDisk() is call
> >   - before a new transaction start.
> > 
> > Transaction start (through a call 
> OGRLayer::StartTransaction()) for all layer in the DataSource.
> > OGRLayer::CommitTransaction() will call 
> OGROCITableLayer::SyncToDisk() for each layer of  the 
> DataSource and issues one commit command for the session, and 
> then return in auto commit mode (cf outside transaction mechanism)
> > OGRLayer::RollbackTransaction() will drop PendingFeature 
> (may be  through a private function that reset 
> nWriteCacheUsed to 0) for each layer of the datasource and 
> issues one rollback command for the session, and then return 
> to auto commit mode.
> > 
> 
> I see the benefit of implementing transactions, although I 
> very rarely use this 
> approach in my work.  For many users, this may not be a 
> necessity, so it should 
> be available to initiate, rather than as default.  I guess 
> this means an option 
> at connection time?
> 

If StartTransaction() is not called, the driver will operate as presently.
If StartTransaction() is called, the driver will operate as exposed, in a SQL sense. this is better than the undefined way it does presently. (In fact it does nothing, the present driver should answers FALSE to Transaction support in TestCapability) 

> > I would like to know if someone else is interested in these 
> improvements ?  
> > Is it the way you want things work ?
> > 
> > An other information is that I'm ready to work for these 
> improvements. 
> > 
> > Regards,
> > 
> > Nicolas
> 
> Best wishes,
> 
> Peter
> 
> --------------------------------------------------------------
> ------------------
> Peter J Halls, GIS Advisor & Acting Team Leader Applications 
> Support Group,
>                 Information Directorate, University of York
> Telephone: 01904 323806     Fax: 01904 323740
> Snail mail: Harry Fairhurst Building, University of York,
>              Heslington, York YO10 5DD
> This message has the status of a private and personal communication
> --------------------------------------------------------------
> ------------------
> 
> 
> 


From nicolas.simon at spw.wallonie.be  Mon Jul  4 11:22:46 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon Jul  4 11:44:28 2011
Subject: [gdal-dev] OGR : OCI driver improvement
In-Reply-To: <CA+YzLBcy9T=W+0g5MzBHesg70K4fBPzDkQqh-CoeznaP7xHLjQ@mail.gmail.com>
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926F11@DGA-EXC01.mrw.wallonie.int>

Hi,
	I just answer most questions in my previous mail to the list.
	So just to say that I could participate to the maintenance of the OCI driver for OGR (we don't use raster in Oracle, sorry). 
	
	Nicolas
 
> -----Message d'origine-----
> De : fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com]De la part de
> Frank Warmerdam
> Envoy? : lundi 4 juillet 2011 15:10
> ? : Nicolas Simon
> Cc : gdal-dev@lists.osgeo.org
> Objet : Re: [gdal-dev] OGR : OCI driver improvement
> 
> 
> Nicolas,
> 
> The proposed changes seem reasonable, but I am concerned 
> about complexity and
> risk of breaking the driver in some rarely tested cases.  The OCI
> driver is pretty
> fragile.
> 
> On Mon, Jul 4, 2011 at 8:32 AM, Nicolas Simon
> <nicolas.simon@spw.wallonie.be> wrote:
> > Hi all,
> >
> > I'd like to propose some OCI driver improvement.
> >
> > 1) Enable insert from different client. This could be done 
> by managing the generation of new FID on DB side instead of 
> client side.
> > Technically this could be done with an oracle sequence and 
> a trigger to fill the FID.
> > This proposition modify the way FID are handled ( I propose 
> to do as in PostGIS driver). This means that the FID of a 
> feature (i.e. usually the value of the OGC_FID column for the 
> feature) inserted into a table with CreateFeature() will be 
> retrieved from the database and can be obtained with GetFID() 
> even if an non-null FID was provided.
> > This could be easily implemented in UnboundCreateFeature 
> with a 'returning' clause.
> > But I don't known if it's feasible in BoundCreateFeature 
> since truth FIDs will be know later when 
> OGROCITableLayer::FlushPendingFeatures() is called.
> 
> I'm not clear on what you will do if CreateFeature() is called on a
> table for which the
> the sequence and trigger to fill the FID do not already exist.  Will
> you create it?  I'm
> concerned this will not be honoured by other applications 
> interacting with the
> table.
> 
> > 2) By providing true update operation instead of delete + 
> insert operations (cf SetFeture).
> > This should provide better performance and enable to 
> develop trigger on update if needed for other purpose.
> > With this modification, OCI driver will have the following 
> mapping between OGR concepts and Oracle operations:
> > ? ?OGRFeature::CreateFeature() <==> INSERT operation
> > ? ?OGRFeature::SetFeature() <==> UPDATE operation
> > ? ?OGRFeature::DeleteFeature() <==> DELETE operation
> > This modify slightly the actual behavior since it disable 
> the possibility of inserting a new record through SetFeature 
> (in case of ?they were no record to delete, the subsequent 
> insert did the job). With the proposed implementation it'll 
> be no longer the case. ?"Update ... set ... ?where FID = 
> provided FID" command doesn't insert new record.
> 
> The main downside I see with implementing SetFeature() as an UPDATE is
> complexity -
> another whole set of code for assigning records.  But that isn't a
> compelling reason
> not to do it.
> 
> > 3) Add transaction support in the normal SQL sense.
> > Since transaction is handled within a session and we have a 
> session per OGROCIDataSource, a transaction will include 
> operation on any layer of that datasource.
> > I propose the following operating mode.
> >
> > Outside a transaction, we'll be in 'auto commit' mode.
> > ?This commit on success DeleteFeature, SetFeature and 
> CreateFeature (not in MULTI_LOAD mode).
> > ?For CreateFeature (in MULTI_LOAD mode) data will be commited
> > ?- each time the buffer is full (when 
> OGROCITableLayer::FlushPendingFeatures() is called)
> > ?- when OGROCITableLayer::SyncToDisk() is call
> > ?- before a new transaction start.
> >
> > Transaction start (through a call 
> OGRLayer::StartTransaction()) for all layer in the DataSource.
> > OGRLayer::CommitTransaction() will call 
> OGROCITableLayer::SyncToDisk() for each layer of ?the 
> DataSource and issues one commit command for the session, and 
> then return in auto commit mode (cf outside transaction mechanism)
> > OGRLayer::RollbackTransaction() will drop PendingFeature 
> (may be ?through a private function that reset 
> nWriteCacheUsed to 0) for each layer of the datasource and 
> issues one rollback command for the session, and then return 
> to auto commit mode.
> 
> This *seems* reasonable, but please understand that the OGR 
> transaction
> model is fairly weak.
> 
> > I would like to know if someone else is interested in these 
> improvements ?
> > Is it the way you want things work ?
> >
> > An other information is that I'm ready to work for these 
> improvements.
> 
> I think the changes are desirable (in trunk only!) but if you 
> provide them
> I am hopefully you will take an ongoing interest in maintenance of the
> OCI driver.   Hopefully you might also be open to taking on commit
> access so you can do stuff more easily (perhaps after first submitting
> patches via trac for review).
> 
> Best regards,
> -- 
> ---------------------------------------+----------------------
> ----------------
> I set the clouds in motion - turn up?? | Frank Warmerdam, 
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush? ? | Geospatial 
> Programmer for Rent
> 
> 
> 


From antonio.valentino at tiscali.it  Mon Jul  4 13:43:17 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jul  4 14:12:16 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <201107031902.03119.even.rouault@mines-paris.org>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<4E109D82.5060506@tiscali.it>
	<201107031902.03119.even.rouault@mines-paris.org>
Message-ID: <4E11FBB5.3040009@tiscali.it>

Hi Even,

Il 03/07/2011 19:02, Even Rouault ha scritto:
>  
>> Do you have some particular indication about how to test it?
>> Which test programs did you use?
> 
> My tests mainly consisted in checking that GDAL would compile and link 
> successfully with various combinations of the configure options.
> 
> With the renaming options enabled, I did a "objdump -t libgdal.so | awk 
> '{print $6}' | grep TIFF | grep -v TIFFjpeg_ | grep -v aig_ | grep -v gdal_ | 
> sort -u" to ensure that all the symbols that should be renamed are. You will 
> notice a few remaining occurrences but I think they are safe.
> 
> Also, when the renaming options where enabled, I added -ltiff -lgeotiff to the 
> gdalinfo linking line, before or after -lgdal, and tested the executable on a 
> few files.
> 

Even, all tests i performed (ubuntu 11.04 only) passed successfully so I
can confirm that the patch works.

My only concern is that I'm not able to reproduce the crash in cases in
which GDAL is built without symbol renaming.

Anyway I have still not tried test programs suggested by Julien.


regards

-- 
Antonio Valentino
From even.rouault at mines-paris.org  Mon Jul  4 13:52:38 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul  4 14:21:59 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <4E11FBB5.3040009@tiscali.it>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<201107031902.03119.even.rouault@mines-paris.org>
	<4E11FBB5.3040009@tiscali.it>
Message-ID: <201107041952.38679.even.rouault@mines-paris.org>

> Even, all tests i performed (ubuntu 11.04 only) passed successfully so I
> can confirm that the patch works.

Great

> 
> My only concern is that I'm not able to reproduce the crash in cases in
> which GDAL is built without symbol renaming.

Hum, did you activate --with-hide-internal-symbols ? I somehow remember that 
it paradoxically helped revealing the duplicate symbol issues.
From julien.malik at c-s.fr  Mon Jul  4 14:02:03 2011
From: julien.malik at c-s.fr (MALIK Julien)
Date: Mon Jul  4 14:31:54 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <201107041952.38679.even.rouault@mines-paris.org>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<201107031902.03119.even.rouault@mines-paris.org>
	<4E11FBB5.3040009@tiscali.it>
	<201107041952.38679.even.rouault@mines-paris.org>
Message-ID: <20110704200203.1245232spm5b4kkb@messagerie.si.c-s.fr>

A good place to look for would be the debian package compilation  
options, since this is where the problem can be seen (it has at least  
--with-hide-internal-symbols).

Julien

Quoting Even Rouault <even.rouault@mines-paris.org>:

>> Even, all tests i performed (ubuntu 11.04 only) passed successfully so I
>> can confirm that the patch works.
>
> Great
>
>>
>> My only concern is that I'm not able to reproduce the crash in cases in
>> which GDAL is built without symbol renaming.
>
> Hum, did you activate --with-hide-internal-symbols ? I somehow remember that
> it paradoxically helped revealing the duplicate symbol issues.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From antonio.valentino at tiscali.it  Mon Jul  4 14:10:51 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jul  4 14:41:14 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <201107041952.38679.even.rouault@mines-paris.org>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<201107031902.03119.even.rouault@mines-paris.org>
	<4E11FBB5.3040009@tiscali.it>
	<201107041952.38679.even.rouault@mines-paris.org>
Message-ID: <4E12022B.9070706@tiscali.it>

Hi Even,

Il 04/07/2011 19:52, Even Rouault ha scritto:
>> Even, all tests i performed (ubuntu 11.04 only) passed successfully so I
>> can confirm that the patch works.
> 
> Great
> 
>>
>> My only concern is that I'm not able to reproduce the crash in cases in
>> which GDAL is built without symbol renaming.
> 
> Hum, did you activate --with-hide-internal-symbols ? I somehow remember that 
> it paradoxically helped revealing the duplicate symbol issues.

Yes, I tested the both "hide internal symbols" and no symbol hiding with:

* gdalinfo linked against gdal libtiff libgeotiff
* gdalinfo linked against libtiff libgeotiff gdal
* a simple test program that just open a tif file with GDAL and TIFF API
* gdal_translate linked against libtiff libgeotiff gdal

The last test (the one with gdal_translate) also implies writing a TIFF
file.

None of this tests produced a segfault even if in some cases I get
warnings about linking against the wrong libtiff version (one of the
changes you applied recently if I remember well).

I clearly remember I was on debian when a experimented the problem some
time ago even if I don't understand why this should make any difference
if I build GDAL with the same compilation flags.

I'm going to do some test with Julien's programs tonight.

regards

-- 
Antonio Valentino
From antonio.valentino at tiscali.it  Mon Jul  4 14:15:19 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jul  4 14:45:57 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <20110704200203.1245232spm5b4kkb@messagerie.si.c-s.fr>
References: <201107031801.14594.even.rouault@mines-paris.org>	<201107031902.03119.even.rouault@mines-paris.org>	<4E11FBB5.3040009@tiscali.it>	<201107041952.38679.even.rouault@mines-paris.org>
	<20110704200203.1245232spm5b4kkb@messagerie.si.c-s.fr>
Message-ID: <4E120337.6070904@tiscali.it>

Hi Julien,

Il 04/07/2011 20:02, MALIK Julien ha scritto:
> A good place to look for would be the debian package compilation
> options, since this is where the problem can be seen (it has at least
> --with-hide-internal-symbols).
> 
> Julien

Thanks Julien.
I also found some sparse information in the debian bug tracking system.

P.S:: congratulations for the release of OTB 3.10 :)

> Quoting Even Rouault <even.rouault@mines-paris.org>:
> 
>>> Even, all tests i performed (ubuntu 11.04 only) passed successfully so I
>>> can confirm that the patch works.
>>
>> Great
>>
>>>
>>> My only concern is that I'm not able to reproduce the crash in cases in
>>> which GDAL is built without symbol renaming.
>>
>> Hum, did you activate --with-hide-internal-symbols ? I somehow
>> remember that
>> it paradoxically helped revealing the duplicate symbol issues.


-- 
Antonio Valentino
From antonio.valentino at tiscali.it  Mon Jul  4 16:27:23 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Jul  4 17:05:09 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <4E12022B.9070706@tiscali.it>
References: <201107031801.14594.even.rouault@mines-paris.org>	<201107031902.03119.even.rouault@mines-paris.org>	<4E11FBB5.3040009@tiscali.it>	<201107041952.38679.even.rouault@mines-paris.org>
	<4E12022B.9070706@tiscali.it>
Message-ID: <4E12222B.6070104@tiscali.it>

Hi,

Il 04/07/2011 20:10, Antonio Valentino ha scritto:

[CUT]

>>> My only concern is that I'm not able to reproduce the crash in cases in
>>> which GDAL is built without symbol renaming.
>>
>> Hum, did you activate --with-hide-internal-symbols ? I somehow remember that 
>> it paradoxically helped revealing the duplicate symbol issues.
> 
> Yes, I tested the both "hide internal symbols" and no symbol hiding with:
> 
> * gdalinfo linked against gdal libtiff libgeotiff
> * gdalinfo linked against libtiff libgeotiff gdal
> * a simple test program that just open a tif file with GDAL and TIFF API
> * gdal_translate linked against libtiff libgeotiff gdal
> 
> The last test (the one with gdal_translate) also implies writing a TIFF
> file.
> 
> None of this tests produced a segfault even if in some cases I get
> warnings about linking against the wrong libtiff version (one of the
> changes you applied recently if I remember well).
> 
> I clearly remember I was on debian when a experimented the problem some
> time ago even if I don't understand why this should make any difference
> if I build GDAL with the same compilation flags.
> 
> I'm going to do some test with Julien's programs tonight.

In my tests the only program that causes a segfault is

[1] http://hg.orfeo-toolbox.org/OTB/file/tip/CMake/TestXTIFFOpen.cxx
Linked with '-lgdal -lgeotiff -ltiff' (--with-hide-internal-symbols).


The same program works as expected id GDAL is build with

--with-hide-internal-symbols=yes
--with-rename-internal-libtiff-symbols=yes
--with-rename-internal-libgeotiff-symbols=yes

IMHO this definitively closes the question.


regards

-- 
Antonio Valentino
From bonushenricus at linux.it  Mon Jul  4 17:42:40 2011
From: bonushenricus at linux.it (bonushenricus)
Date: Mon Jul  4 18:24:57 2011
Subject: [gdal-dev] upside flipped NetCDF
Message-ID: <1309815760.2517.2.camel@debian-charlie.viaimperiale7700>

Hello,
I'm working on NetCDF weather data.  I tried importing it in GRASS
6.3 via GDAL version 1.6.3 on Debian 6.0. It worked, but the result
was flipped on the horizontal axis.
Could you help me understand what's happening?
The text rendition of my NetCDF file follows.

netcdf ACRR_201105040830_001H {
dimensions:
        xc = 41 ;
        yc = 41 ;
        time = UNLIMITED ; // (1 currently)
        geo_dim = 4 ;
        mesh_dim = 2 ;
variables:
        float xc(xc) ;
                xc:axis = "X" ;
                xc:long_name = "X Coordinate of projection" ;
                xc:units = "meters" ;
                xc:standard_name = "projection_x_coordinate" ;
        float yc(yc) ;
                yc:axis = "Y" ;
                yc:long_name = "Y Coordinate of projection" ;
                yc:units = "meters" ;
                yc:standard_name = "projection_y_coordinate" ;
        float lon(yc, xc) ;
                lon:long_name = "longitude" ;
                lon:units = "degrees_east" ;
                lon:standard_name = "longitude" ;
        float lat(yc, xc) ;
                lat:long_name = "latitude" ;
                lat:units = "degrees_north" ;
                lat:standard_name = "latitude" ;
        float time(time) ;
                time:long_name = "time" ;
                time:units = "hour since 2011-05-04 08:30:0" ;
        char idl ;
                idl:projection_name = "UTM" ;
                idl:projection_index = 101s ;
                idl:grid_mapping_name = "idl-UTM" ;
                idl:center_longitude = 11.6199998855591 ;
                idl:center_latitude = 44.6500015258789 ;
                idl:zone = 32. ;
        float geo_limits(geo_dim) ;
                geo_limits:long_name = "Geo limits [yLL,xLL,yUR,xUR]" ;
                geo_limits:units = "meters" ;
        float grid_mesh(mesh_dim) ;
                grid_mesh:long_name = "Grid Mesh Size [X_mesh_size,
Y_mesh_size]" ;
        float cum_pr_mm(yc, xc) ;
                cum_pr_mm:long_name = "Radar Precipitation amount" ;
                cum_pr_mm:units = "mm" ;
                cum_pr_mm:standard_name = "precipitation_amount" ;
                cum_pr_mm:valid_min = 0.f ;
                cum_pr_mm:valid_max = 10000.f ;
                cum_pr_mm:coordinates = "lat lon" ;
                cum_pr_mm:grid_mapping = "idl-UTM" ;
                cum_pr_mm:detection_minimum = "      0.00000" ;
                cum_pr_mm:undetectable = "      0.00000" ;
                cum_pr_mm:var_missing = "   -0.0100000" ;
                cum_pr_mm:accum_time_h = 1.f ;

// global attributes:
                :Conventions = "CF-1.4" ;
                :history = "Created by write_rad2d_netcdf.pro" ;
                :institute = "ARPA ER - SIMC " ;
                :title = "Radar product" ;
                :reference = "palberoni@arpa.emr.it" ;
                :comment = "none" ;
                :MapType = "SRT" ;
                :RADARS_NAME = "" ;
data:

xc = 649000, 650000, 651000, 652000, 653000, 654000, 655000, 656000,
657000,
    658000, 659000, 660000, 661000, 662000, 663000, 664000, 665000,
666000,
    667000, 668000, 669000, 670000, 671000, 672000, 673000, 674000,
675000,
    676000, 677000, 678000, 679000, 680000, 681000, 682000, 683000,
684000,
    685000, 686000, 687000, 688000, 689000 ;

yc = 4941000, 4942000, 4943000, 4944000, 4945000, 4946000, 4947000,
4948000,
    4949000, 4950000, 4951000, 4952000, 4953000, 4954000, 4955000,
4956000,
    4957000, 4958000, 4959000, 4960000, 4961000, 4962000, 4963000,
4964000,
    4965000, 4966000, 4967000, 4968000, 4969000, 4970000, 4971000,
4972000,
    4973000, 4974000, 4975000, 4976000, 4977000, 4978000, 4979000,
4980000,
    4981000 ;

lon =
  10.8777, 10.8903, 10.90289, 10.91549, 10.92808, 10.94068, 10.95327,
    10.96587, 10.97846, 10.99106, 11.00365, 11.01624, 11.02884,
11.04143,
    11.05402, 11.06662, 11.07921, 11.0918, 11.1044, 11.11699, 11.12958,
    11.14217, 11.15477, 11.16736, 11.17995, 11.19254, 11.20513,
11.21772,
    11.23032, 11.24291, 11.2555, 11.26809, 11.28068, 11.29327, 11.30586,
    11.31845, 11.33104, 11.34363, 11.35622, 11.36881, 11.3814,
  10.87799, 10.89059, 10.90319, 10.91579, 10.92838, 10.94098, 10.95358,
    10.96617, 10.97877, 10.99136, 11.00396, 11.01656, 11.02915,
11.04175,
    11.05434, 11.06694, 11.07953, 11.09213, 11.10472, 11.11732,
11.12991,
    11.14251, 11.1551, 11.16769, 11.18029, 11.19288, 11.20547, 11.21807,
    11.23066, 11.24325, 11.25585, 11.26844, 11.28103, 11.29362,
11.30622,
    11.31881, 11.3314, 11.34399, 11.35658, 11.36917, 11.38177,
  10.87828, 10.89088, 10.90348, 10.91608, 10.92868, 10.94128, 10.95388,
    10.96648, 10.97907, 10.99167, 11.00427, 11.01687, 11.02946,
11.04206,
    11.05466, 11.06726, 11.07985, 11.09245, 11.10505, 11.11764,
11.13024,
    11.14284, 11.15543, 11.16803, 11.18062, 11.19322, 11.20582,
11.21841,
    11.23101, 11.2436, 11.2562, 11.26879, 11.28138, 11.29398, 11.30657,
    11.31917, 11.33176, 11.34435, 11.35695, 11.36954, 11.38213,
  10.87858, 10.89118, 10.90378, 10.91638, 10.92898, 10.94158, 10.95418,
    10.96678, 10.97938, 10.99198, 11.00458, 11.01718, 11.02978,
11.04238,
    11.05498, 11.06758, 11.08018, 11.09277, 11.10537, 11.11797,
11.13057,
    11.14317, 11.15577, 11.16836, 11.18096, 11.19356, 11.20616,
11.21875,
    11.23135, 11.24395, 11.25654, 11.26914, 11.28174, 11.29433,
11.30693,
    11.31952, 11.33212, 11.34472, 11.35731, 11.36991, 11.3825,
  10.87887, 10.89147, 10.90407, 10.91667, 10.92928, 10.94188, 10.95448,
    10.96708, 10.97969, 10.99229, 11.00489, 11.01749, 11.03009,
11.04269,
    11.05529, 11.0679, 11.0805, 11.0931, 11.1057, 11.1183, 11.1309,
11.1435,
    11.1561, 11.1687, 11.1813, 11.1939, 11.2065, 11.2191, 11.2317,
11.24429,
    11.25689, 11.26949, 11.28209, 11.29469, 11.30729, 11.31988,
11.33248,
    11.34508, 11.35768, 11.37027, 11.38287,
  10.87916, 10.89176, 10.90437, 10.91697, 10.92957, 10.94218, 10.95478,
    10.96739, 10.97999, 10.9926, 11.0052, 11.0178, 11.03041, 11.04301,
    11.05561, 11.06822, 11.08082, 11.09342, 11.10602, 11.11863,
11.13123,
    11.14383, 11.15643, 11.16903, 11.18163, 11.19424, 11.20684,
11.21944,
    11.23204, 11.24464, 11.25724, 11.26984, 11.28244, 11.29504,
11.30764,
    11.32024, 11.33284, 11.34544, 11.35804, 11.37064, 11.38324,
  10.87945, 10.89205, 10.90466, 10.91727, 10.92987, 10.94248, 10.95509,
    10.96769, 10.9803, 10.9929, 11.00551, 11.01812, 11.03072, 11.04333,
    11.05593, 11.06854, 11.08114, 11.09375, 11.10635, 11.11895,
11.13156,
    11.14416, 11.15677, 11.16937, 11.18197, 11.19458, 11.20718,
11.21978,
    11.23239, 11.24499, 11.25759, 11.27019, 11.28279, 11.2954, 11.308,
    11.3206, 11.3332, 11.3458, 11.35841, 11.37101, 11.38361,
  10.87974, 10.89235, 10.90495, 10.91756, 10.93017, 10.94278, 10.95539,
    10.968, 10.9806, 10.99321, 11.00582, 11.01843, 11.03103, 11.04364,
    11.05625, 11.06886, 11.08146, 11.09407, 11.10668, 11.11928,
11.13189,
    11.14449, 11.1571, 11.1697, 11.18231, 11.19492, 11.20752, 11.22013,
    11.23273, 11.24534, 11.25794, 11.27054, 11.28315, 11.29575,
11.30836,
    11.32096, 11.33356, 11.34617, 11.35877, 11.37137, 11.38398,
  10.88003, 10.89264, 10.90525, 10.91786, 10.93047, 10.94308, 10.95569,
    10.9683, 10.98091, 10.99352, 11.00613, 11.01874, 11.03135, 11.04396,
    11.05657, 11.06918, 11.08178, 11.09439, 11.107, 11.11961, 11.13222,
    11.14482, 11.15743, 11.17004, 11.18265, 11.19526, 11.20786,
11.22047,
    11.23308, 11.24568, 11.25829, 11.2709, 11.2835, 11.29611, 11.30871,
    11.32132, 11.33392, 11.34653, 11.35913, 11.37174, 11.38434,
  10.88032, 10.89293, 10.90555, 10.91816, 10.93077, 10.94338, 10.95599,
    10.96861, 10.98122, 10.99383, 11.00644, 11.01905, 11.03166,
11.04427,
    11.05689, 11.0695, 11.08211, 11.09472, 11.10733, 11.11994, 11.13255,
    11.14516, 11.15777, 11.17038, 11.18299, 11.19559, 11.2082, 11.22081,
    11.23342, 11.24603, 11.25864, 11.27125, 11.28386, 11.29646,
11.30907,
    11.32168, 11.33429, 11.34689, 11.3595, 11.37211, 11.38471,
  10.88061, 10.89323, 10.90584, 10.91846, 10.93107, 10.94368, 10.9563,
    10.96891, 10.98152, 10.99414, 11.00675, 11.01937, 11.03198,
11.04459,
    11.0572, 11.06982, 11.08243, 11.09504, 11.10765, 11.12027, 11.13288,
    11.14549, 11.1581, 11.17071, 11.18332, 11.19594, 11.20855, 11.22116,
    11.23377, 11.24638, 11.25899, 11.2716, 11.28421, 11.29682, 11.30943,
    11.32204, 11.33465, 11.34726, 11.35987, 11.37247, 11.38508,
  10.8809, 10.89352, 10.90614, 10.91875, 10.93137, 10.94398, 10.9566,
    10.96922, 10.98183, 10.99445, 11.00706, 11.01968, 11.03229,
11.04491,
    11.05752, 11.07014, 11.08275, 11.09537, 11.10798, 11.12059,
11.13321,
    11.14582, 11.15844, 11.17105, 11.18366, 11.19628, 11.20889, 11.2215,
    11.23411, 11.24673, 11.25934, 11.27195, 11.28456, 11.29717,
11.30979,
    11.3224, 11.33501, 11.34762, 11.36023, 11.37284, 11.38545,
  10.88119, 10.89381, 10.90643, 10.91905, 10.93167, 10.94429, 10.9569,
    10.96952, 10.98214, 10.99476, 11.00737, 11.01999, 11.03261,
11.04523,
    11.05784, 11.07046, 11.08307, 11.09569, 11.10831, 11.12092,
11.13354,
    11.14615, 11.15877, 11.17139, 11.184, 11.19662, 11.20923, 11.22185,
    11.23446, 11.24707, 11.25969, 11.2723, 11.28492, 11.29753, 11.31014,
    11.32276, 11.33537, 11.34798, 11.3606, 11.37321, 11.38582,
  10.88149, 10.89411, 10.90673, 10.91935, 10.93197, 10.94459, 10.95721,
    10.96983, 10.98245, 10.99507, 11.00768, 11.0203, 11.03292, 11.04554,
    11.05816, 11.07078, 11.0834, 11.09602, 11.10863, 11.12125, 11.13387,
    11.14649, 11.1591, 11.17172, 11.18434, 11.19696, 11.20957, 11.22219,
    11.23481, 11.24742, 11.26004, 11.27265, 11.28527, 11.29789, 11.3105,
    11.32312, 11.33573, 11.34835, 11.36096, 11.37358, 11.38619,
  10.88178, 10.8944, 10.90702, 10.91964, 10.93227, 10.94489, 10.95751,
    10.97013, 10.98275, 10.99537, 11.008, 11.02062, 11.03324, 11.04586,
    11.05848, 11.0711, 11.08372, 11.09634, 11.10896, 11.12158, 11.1342,
    11.14682, 11.15944, 11.17206, 11.18468, 11.1973, 11.20992, 11.22253,
    11.23515, 11.24777, 11.26039, 11.27301, 11.28563, 11.29824,
11.31086,
    11.32348, 11.33609, 11.34871, 11.36133, 11.37395, 11.38656,
  10.88207, 10.89469, 10.90732, 10.91994, 10.93257, 10.94519, 10.95781,
    10.97044, 10.98306, 10.99568, 11.00831, 11.02093, 11.03355,
11.04618,
    11.0588, 11.07142, 11.08404, 11.09667, 11.10929, 11.12191, 11.13453,
    11.14715, 11.15977, 11.1724, 11.18502, 11.19764, 11.21026, 11.22288,
    11.2355, 11.24812, 11.26074, 11.27336, 11.28598, 11.2986, 11.31122,
    11.32384, 11.33646, 11.34908, 11.36169, 11.37431, 11.38693,
  10.88236, 10.89499, 10.90761, 10.92024, 10.93287, 10.94549, 10.95812,
    10.97074, 10.98337, 10.99599, 11.00862, 11.02124, 11.03387,
11.04649,
    11.05912, 11.07174, 11.08437, 11.09699, 11.10962, 11.12224,
11.13486,
    11.14749, 11.16011, 11.17273, 11.18536, 11.19798, 11.2106, 11.22322,
    11.23585, 11.24847, 11.26109, 11.27371, 11.28633, 11.29896,
11.31158,
    11.3242, 11.33682, 11.34944, 11.36206, 11.37468, 11.3873,
  10.88265, 10.89528, 10.90791, 10.92054, 10.93317, 10.94579, 10.95842,
    10.97105, 10.98368, 10.9963, 11.00893, 11.02156, 11.03419, 11.04681,
    11.05944, 11.07206, 11.08469, 11.09732, 11.10994, 11.12257,
11.13519,
    11.14782, 11.16045, 11.17307, 11.18569, 11.19832, 11.21094,
11.22357,
    11.23619, 11.24882, 11.26144, 11.27407, 11.28669, 11.29931,
11.31194,
    11.32456, 11.33718, 11.3498, 11.36243, 11.37505, 11.38767,
  10.88295, 10.89558, 10.90821, 10.92084, 10.93347, 10.9461, 10.95873,
    10.97136, 10.98398, 10.99661, 11.00924, 11.02187, 11.0345, 11.04713,
    11.05976, 11.07239, 11.08501, 11.09764, 11.11027, 11.1229, 11.13553,
    11.14815, 11.16078, 11.17341, 11.18603, 11.19866, 11.21129,
11.22391,
    11.23654, 11.24917, 11.26179, 11.27442, 11.28704, 11.29967,
11.31229,
    11.32492, 11.33754, 11.35017, 11.36279, 11.37542, 11.38804,
  10.88324, 10.89587, 10.9085, 10.92113, 10.93377, 10.9464, 10.95903,
    10.97166, 10.98429, 10.99692, 11.00955, 11.02219, 11.03482,
11.04745,
    11.06008, 11.07271, 11.08534, 11.09797, 11.1106, 11.12323, 11.13586,
    11.14849, 11.16112, 11.17375, 11.18637, 11.199, 11.21163, 11.22426,
    11.23689, 11.24952, 11.26214, 11.27477, 11.2874, 11.30003, 11.31265,
    11.32528, 11.33791, 11.35053, 11.36316, 11.37579, 11.38841,
  10.88353, 10.89617, 10.9088, 10.92143, 10.93407, 10.9467, 10.95933,
    10.97197, 10.9846, 10.99723, 11.00987, 11.0225, 11.03513, 11.04777,
    11.0604, 11.07303, 11.08566, 11.09829, 11.11093, 11.12356, 11.13619,
    11.14882, 11.16145, 11.17408, 11.18671, 11.19934, 11.21198,
11.22461,
    11.23724, 11.24987, 11.2625, 11.27512, 11.28775, 11.30038, 11.31301,
    11.32564, 11.33827, 11.3509, 11.36353, 11.37616, 11.38878,
  10.88382, 10.89646, 10.9091, 10.92173, 10.93437, 10.947, 10.95964,
    10.97227, 10.98491, 10.99755, 11.01018, 11.02281, 11.03545,
11.04808,
    11.06072, 11.07335, 11.08599, 11.09862, 11.11125, 11.12389,
11.13652,
    11.14915, 11.16179, 11.17442, 11.18705, 11.19969, 11.21232,
11.22495,
    11.23758, 11.25021, 11.26285, 11.27548, 11.28811, 11.30074,
11.31337,
    11.326, 11.33863, 11.35126, 11.3639, 11.37653, 11.38916,
  10.88412, 10.89676, 10.90939, 10.92203, 10.93467, 10.94731, 10.95994,
    10.97258, 10.98522, 10.99786, 11.01049, 11.02313, 11.03577, 11.0484,
    11.06104, 11.07368, 11.08631, 11.09895, 11.11158, 11.12422,
11.13685,
    11.14949, 11.16212, 11.17476, 11.18739, 11.20003, 11.21266, 11.2253,
    11.23793, 11.25056, 11.2632, 11.27583, 11.28847, 11.3011, 11.31373,
    11.32637, 11.339, 11.35163, 11.36426, 11.37689, 11.38953,
  10.88441, 10.89705, 10.90969, 10.92233, 10.93497, 10.94761, 10.96025,
    10.97289, 10.98553, 10.99817, 11.01081, 11.02344, 11.03608,
11.04872,
    11.06136, 11.074, 11.08664, 11.09927, 11.11191, 11.12455, 11.13719,
    11.14982, 11.16246, 11.1751, 11.18773, 11.20037, 11.21301, 11.22564,
    11.23828, 11.25091, 11.26355, 11.27619, 11.28882, 11.30146,
11.31409,
    11.32673, 11.33936, 11.352, 11.36463, 11.37726, 11.3899,
  10.8847, 10.89735, 10.90999, 10.92263, 10.93527, 10.94791, 10.96055,
    10.9732, 10.98584, 10.99848, 11.01112, 11.02376, 11.0364, 11.04904,
    11.06168, 11.07432, 11.08696, 11.0996, 11.11224, 11.12488, 11.13752,
    11.15016, 11.1628, 11.17544, 11.18807, 11.20071, 11.21335, 11.22599,
    11.23863, 11.25126, 11.2639, 11.27654, 11.28918, 11.30182, 11.31445,
    11.32709, 11.33973, 11.35236, 11.365, 11.37763, 11.39027,
  10.885, 10.89764, 10.91028, 10.92293, 10.93557, 10.94822, 10.96086,
    10.9735, 10.98615, 10.99879, 11.01143, 11.02407, 11.03672, 11.04936,
    11.062, 11.07464, 11.08729, 11.09993, 11.11257, 11.12521, 11.13785,
    11.15049, 11.16313, 11.17577, 11.18841, 11.20105, 11.21369,
11.22634,
    11.23898, 11.25162, 11.26425, 11.27689, 11.28953, 11.30217,
11.31481,
    11.32745, 11.34009, 11.35273, 11.36537, 11.378, 11.39064,
  10.88529, 10.89794, 10.91058, 10.92323, 10.93587, 10.94852, 10.96116,
    10.97381, 10.98645, 10.9991, 11.01174, 11.02439, 11.03703, 11.04968,
    11.06232, 11.07497, 11.08761, 11.10025, 11.1129, 11.12554, 11.13818,
    11.15083, 11.16347, 11.17611, 11.18876, 11.2014, 11.21404, 11.22668,
    11.23932, 11.25197, 11.26461, 11.27725, 11.28989, 11.30253,
11.31517,
    11.32781, 11.34045, 11.35309, 11.36573, 11.37837, 11.39101,
  10.88558, 10.89823, 10.91088, 10.92353, 10.93617, 10.94882, 10.96147,
    10.97412, 10.98676, 10.99941, 11.01206, 11.0247, 11.03735, 11.05,
    11.06264, 11.07529, 11.08793, 11.10058, 11.11323, 11.12587,
11.13852,
    11.15116, 11.16381, 11.17645, 11.1891, 11.20174, 11.21438, 11.22703,
    11.23967, 11.25232, 11.26496, 11.2776, 11.29025, 11.30289, 11.31553,
    11.32818, 11.34082, 11.35346, 11.3661, 11.37875, 11.39139,
  10.88588, 10.89853, 10.91118, 10.92383, 10.93648, 10.94913, 10.96177,
    10.97442, 10.98707, 10.99972, 11.01237, 11.02502, 11.03767,
11.05032,
    11.06296, 11.07561, 11.08826, 11.10091, 11.11355, 11.1262, 11.13885,
    11.1515, 11.16414, 11.17679, 11.18944, 11.20208, 11.21473, 11.22738,
    11.24002, 11.25267, 11.26531, 11.27796, 11.2906, 11.30325, 11.31589,
    11.32854, 11.34118, 11.35383, 11.36647, 11.37912, 11.39176,
  10.88617, 10.89882, 10.91148, 10.92413, 10.93678, 10.94943, 10.96208,
    10.97473, 10.98738, 11.00003, 11.01268, 11.02533, 11.03798,
11.05064,
    11.06329, 11.07594, 11.08858, 11.10123, 11.11388, 11.12653,
11.13918,
    11.15183, 11.16448, 11.17713, 11.18978, 11.20243, 11.21507,
11.22772,
    11.24037, 11.25302, 11.26567, 11.27831, 11.29096, 11.30361,
11.31625,
    11.3289, 11.34155, 11.35419, 11.36684, 11.37949, 11.39213,
  10.88647, 10.89912, 10.91177, 10.92443, 10.93708, 10.94973, 10.96239,
    10.97504, 10.98769, 11.00035, 11.013, 11.02565, 11.0383, 11.05095,
    11.06361, 11.07626, 11.08891, 11.10156, 11.11421, 11.12686,
11.13952,
    11.15217, 11.16482, 11.17747, 11.19012, 11.20277, 11.21542,
11.22807,
    11.24072, 11.25337, 11.26602, 11.27867, 11.29132, 11.30397,
11.31662,
    11.32926, 11.34191, 11.35456, 11.36721, 11.37986, 11.3925,
  10.88676, 10.89942, 10.91207, 10.92473, 10.93738, 10.95004, 10.96269,
    10.97535, 10.988, 11.00066, 11.01331, 11.02597, 11.03862, 11.05127,
    11.06393, 11.07658, 11.08924, 11.10189, 11.11454, 11.1272, 11.13985,
    11.1525, 11.16516, 11.17781, 11.19046, 11.20311, 11.21576, 11.22842,
    11.24107, 11.25372, 11.26637, 11.27902, 11.29167, 11.30433,
11.31698,
    11.32963, 11.34228, 11.35493, 11.36758, 11.38023, 11.39288,
  10.88705, 10.89971, 10.91237, 10.92503, 10.93768, 10.95034, 10.963,
    10.97566, 10.98831, 11.00097, 11.01363, 11.02628, 11.03894,
11.05159,
    11.06425, 11.07691, 11.08956, 11.10222, 11.11487, 11.12753,
11.14018,
    11.15284, 11.16549, 11.17815, 11.1908, 11.20346, 11.21611, 11.22876,
    11.24142, 11.25407, 11.26672, 11.27938, 11.29203, 11.30468,
11.31734,
    11.32999, 11.34264, 11.35529, 11.36795, 11.3806, 11.39325,
  10.88735, 10.90001, 10.91267, 10.92533, 10.93799, 10.95065, 10.9633,
    10.97596, 10.98862, 11.00128, 11.01394, 11.0266, 11.03926, 11.05192,
    11.06457, 11.07723, 11.08989, 11.10255, 11.1152, 11.12786, 11.14052,
    11.15317, 11.16583, 11.17849, 11.19114, 11.2038, 11.21646, 11.22911,
    11.24177, 11.25442, 11.26708, 11.27973, 11.29239, 11.30504, 11.3177,
    11.33035, 11.34301, 11.35566, 11.36832, 11.38097, 11.39362,
  10.88764, 10.9003, 10.91297, 10.92563, 10.93829, 10.95095, 10.96361,
    10.97627, 10.98893, 11.00159, 11.01425, 11.02691, 11.03957,
11.05223,
    11.06489, 11.07755, 11.09021, 11.10287, 11.11553, 11.12819,
11.14085,
    11.15351, 11.16617, 11.17883, 11.19149, 11.20414, 11.2168, 11.22946,
    11.24212, 11.25478, 11.26743, 11.28009, 11.29275, 11.3054, 11.31806,
    11.33072, 11.34337, 11.35603, 11.36869, 11.38134, 11.394,
  10.88794, 10.9006, 10.91327, 10.92593, 10.93859, 10.95125, 10.96392,
    10.97658, 10.98924, 11.00191, 11.01457, 11.02723, 11.03989,
11.05256,
    11.06522, 11.07788, 11.09054, 11.1032, 11.11586, 11.12852, 11.14119,
    11.15385, 11.16651, 11.17917, 11.19183, 11.20449, 11.21715,
11.22981,
    11.24247, 11.25513, 11.26779, 11.28045, 11.2931, 11.30576, 11.31842,
    11.33108, 11.34374, 11.3564, 11.36905, 11.38171, 11.39437,
  10.88823, 10.9009, 10.91356, 10.92623, 10.93889, 10.95156, 10.96422,
    10.97689, 10.98955, 11.00222, 11.01488, 11.02755, 11.04021,
11.05288,
    11.06554, 11.0782, 11.09087, 11.10353, 11.11619, 11.12886, 11.14152,
    11.15418, 11.16685, 11.17951, 11.19217, 11.20483, 11.21749,
11.23016,
    11.24282, 11.25548, 11.26814, 11.2808, 11.29346, 11.30612, 11.31878,
    11.33144, 11.3441, 11.35676, 11.36942, 11.38208, 11.39474,
  10.88853, 10.90119, 10.91386, 10.92653, 10.9392, 10.95186, 10.96453,
    10.9772, 10.98987, 11.00253, 11.0152, 11.02786, 11.04053, 11.0532,
    11.06586, 11.07853, 11.09119, 11.10386, 11.11652, 11.12919,
11.14185,
    11.15452, 11.16718, 11.17985, 11.19251, 11.20518, 11.21784, 11.2305,
    11.24317, 11.25583, 11.26849, 11.28116, 11.29382, 11.30648,
11.31915,
    11.33181, 11.34447, 11.35713, 11.36979, 11.38246, 11.39512,
  10.88882, 10.90149, 10.91416, 10.92683, 10.9395, 10.95217, 10.96484,
    10.97751, 10.99018, 11.00284, 11.01551, 11.02818, 11.04085,
11.05352,
    11.06618, 11.07885, 11.09152, 11.10419, 11.11685, 11.12952,
11.14219,
    11.15486, 11.16752, 11.18019, 11.19285, 11.20552, 11.21819,
11.23085,
    11.24352, 11.25618, 11.26885, 11.28151, 11.29418, 11.30684,
11.31951,
    11.33217, 11.34484, 11.3575, 11.37016, 11.38283, 11.39549,
  10.88912, 10.90179, 10.91446, 10.92713, 10.9398, 10.95247, 10.96515,
    10.97782, 10.99049, 11.00316, 11.01583, 11.0285, 11.04117, 11.05384,
    11.06651, 11.07918, 11.09185, 11.10452, 11.11719, 11.12986,
11.14252,
    11.15519, 11.16786, 11.18053, 11.1932, 11.20587, 11.21853, 11.2312,
    11.24387, 11.25654, 11.2692, 11.28187, 11.29454, 11.3072, 11.31987,
    11.33254, 11.3452, 11.35787, 11.37053, 11.3832, 11.39587,
    10.97813, 10.9908, 11.00347, 11.01614, 11.02882, 11.04149, 11.05416,
    11.06683, 11.0795, 11.09217, 11.10485, 11.11752, 11.13019, 11.14286,
    11.15553, 11.1682, 11.18087, 11.19354, 11.20621, 11.21888, 11.23155,
    11.24422, 11.25689, 11.26956, 11.28223, 11.2949, 11.30756, 11.32023,
    11.3329, 11.34557, 11.35824, 11.37091, 11.38357, 11.39624 ;

lat =
  44.60887, 44.60866, 44.60845, 44.60824, 44.60803, 44.60781, 44.6076,
    44.60738, 44.60717, 44.60695, 44.60672, 44.6065, 44.60628, 44.60606,
    44.60583, 44.6056, 44.60537, 44.60514, 44.60491, 44.60468, 44.60445,
    44.60421, 44.60397, 44.60373, 44.6035, 44.60325, 44.60301, 44.60277,
    44.60252, 44.60228, 44.60203, 44.60178, 44.60153, 44.60128,
44.60102,
    44.60077, 44.60051, 44.60025, 44.59999, 44.59973, 44.59947,
  44.61786, 44.61766, 44.61745, 44.61724, 44.61702, 44.61681, 44.6166,
    44.61638, 44.61616, 44.61594, 44.61572, 44.6155, 44.61528, 44.61505,
    44.61483, 44.6146, 44.61437, 44.61414, 44.61391, 44.61368, 44.61344,
    44.6132, 44.61297, 44.61273, 44.61249, 44.61225, 44.61201, 44.61176,
    44.61152, 44.61127, 44.61102, 44.61077, 44.61052, 44.61027,
44.61002,
    44.60976, 44.6095, 44.60925, 44.60899, 44.60873, 44.60846,
  44.62686, 44.62666, 44.62645, 44.62623, 44.62602, 44.62581, 44.6256,
    44.62538, 44.62516, 44.62494, 44.62472, 44.6245, 44.62428, 44.62405,
    44.62383, 44.6236, 44.62337, 44.62314, 44.62291, 44.62267, 44.62244,
    44.6222, 44.62197, 44.62173, 44.62149, 44.62125, 44.621, 44.62076,
    44.62051, 44.62027, 44.62002, 44.61977, 44.61952, 44.61927,
44.61901,
    44.61876, 44.6185, 44.61824, 44.61798, 44.61772, 44.61746,
  44.63586, 44.63565, 44.63544, 44.63523, 44.63502, 44.63481, 44.63459,
    44.63437, 44.63416, 44.63394, 44.63372, 44.6335, 44.63327, 44.63305,
    44.63282, 44.6326, 44.63237, 44.63213, 44.6319, 44.63167, 44.63144,
    44.6312, 44.63096, 44.63072, 44.63048, 44.63024, 44.63, 44.62975,
    44.62951, 44.62926, 44.62901, 44.62877, 44.62851, 44.62826,
44.62801,
    44.62775, 44.62749, 44.62724, 44.62698, 44.62672, 44.62645,
  44.64486, 44.64465, 44.64444, 44.64423, 44.64402, 44.6438, 44.64359,
    44.64337, 44.64315, 44.64293, 44.64272, 44.64249, 44.64227,
44.64204,
    44.64182, 44.64159, 44.64136, 44.64113, 44.6409, 44.64067, 44.64043,
    44.64019, 44.63996, 44.63972, 44.63948, 44.63924, 44.639, 44.63875,
    44.6385, 44.63826, 44.63801, 44.63776, 44.63751, 44.63726, 44.637,
    44.63675, 44.63649, 44.63623, 44.63597, 44.63571, 44.63545,
  44.65385, 44.65365, 44.65344, 44.65322, 44.65302, 44.6528, 44.65258,
    44.65237, 44.65215, 44.65193, 44.65171, 44.65149, 44.65126,
44.65104,
    44.65081, 44.65059, 44.65036, 44.65013, 44.64989, 44.64966,
44.64943,
    44.64919, 44.64895, 44.64872, 44.64848, 44.64824, 44.64799,
44.64775,
    44.6475, 44.64725, 44.64701, 44.64676, 44.6465, 44.64625, 44.646,
    44.64574, 44.64548, 44.64523, 44.64497, 44.64471, 44.64444,
  44.66285, 44.66264, 44.66243, 44.66222, 44.66201, 44.6618, 44.66158,
    44.66137, 44.66115, 44.66093, 44.66071, 44.66048, 44.66026,
44.66004,
    44.65981, 44.65958, 44.65936, 44.65912, 44.65889, 44.65866,
44.65842,
    44.65819, 44.65795, 44.65771, 44.65747, 44.65723, 44.65699,
44.65674,
    44.6565, 44.65625, 44.656, 44.65575, 44.6555, 44.65525, 44.65499,
    44.65474, 44.65448, 44.65422, 44.65396, 44.6537, 44.65344,
  44.67185, 44.67164, 44.67143, 44.67122, 44.67101, 44.6708, 44.67058,
    44.67036, 44.67015, 44.66993, 44.6697, 44.66948, 44.66926, 44.66903,
    44.66881, 44.66858, 44.66835, 44.66812, 44.66789, 44.66766,
44.66742,
    44.66718, 44.66695, 44.66671, 44.66647, 44.66623, 44.66598,
44.66574,
    44.66549, 44.66525, 44.665, 44.66475, 44.66449, 44.66424, 44.66399,
    44.66373, 44.66348, 44.66322, 44.66296, 44.6627, 44.66243,
  44.68085, 44.68064, 44.68043, 44.68022, 44.68001, 44.67979, 44.67958,
    44.67936, 44.67914, 44.67892, 44.6787, 44.67848, 44.67826, 44.67803,
    44.6778, 44.67758, 44.67735, 44.67712, 44.67688, 44.67665, 44.67642,
    44.67618, 44.67594, 44.6757, 44.67546, 44.67522, 44.67498, 44.67473,
    44.67449, 44.67424, 44.67399, 44.67374, 44.67349, 44.67324,
44.67299,
    44.67273, 44.67247, 44.67221, 44.67195, 44.67169, 44.67143,
  44.68985, 44.68964, 44.68943, 44.68922, 44.689, 44.68879, 44.68858,
    44.68836, 44.68814, 44.68792, 44.6877, 44.68748, 44.68725, 44.68703,
    44.6868, 44.68657, 44.68634, 44.68611, 44.68588, 44.68565, 44.68541,
    44.68518, 44.68494, 44.6847, 44.68446, 44.68422, 44.68398, 44.68373,
    44.68348, 44.68324, 44.68299, 44.68274, 44.68249, 44.68223,
44.68198,
    44.68172, 44.68147, 44.68121, 44.68095, 44.68069, 44.68042,
  44.69884, 44.69864, 44.69843, 44.69822, 44.698, 44.69779, 44.69757,
    44.69735, 44.69714, 44.69692, 44.6967, 44.69647, 44.69625, 44.69603,
    44.6958, 44.69557, 44.69534, 44.69511, 44.69488, 44.69464, 44.69441,
    44.69417, 44.69394, 44.6937, 44.69345, 44.69321, 44.69297, 44.69273,
    44.69248, 44.69223, 44.69198, 44.69173, 44.69148, 44.69123,
44.69098,
    44.69072, 44.69046, 44.6902, 44.68994, 44.68968, 44.68942,
  44.70784, 44.70763, 44.70742, 44.70721, 44.707, 44.70678, 44.70657,
    44.70635, 44.70613, 44.70591, 44.70569, 44.70547, 44.70525,
44.70502,
    44.7048, 44.70457, 44.70434, 44.70411, 44.70387, 44.70364, 44.7034,
    44.70317, 44.70293, 44.70269, 44.70245, 44.70221, 44.70197,
44.70172,
    44.70147, 44.70123, 44.70098, 44.70073, 44.70048, 44.70022,
44.69997,
    44.69971, 44.69946, 44.6992, 44.69894, 44.69868, 44.69841,
  44.71684, 44.71663, 44.71642, 44.71621, 44.716, 44.71578, 44.71556,
    44.71535, 44.71513, 44.71491, 44.71469, 44.71447, 44.71424,
44.71402,
    44.71379, 44.71356, 44.71333, 44.7131, 44.71287, 44.71264, 44.7124,
    44.71217, 44.71193, 44.71169, 44.71145, 44.7112, 44.71096, 44.71072,
    44.71047, 44.71022, 44.70997, 44.70972, 44.70947, 44.70922,
44.70897,
    44.70871, 44.70845, 44.70819, 44.70793, 44.70767, 44.70741,
  44.72584, 44.72563, 44.72542, 44.7252, 44.72499, 44.72478, 44.72456,
    44.72435, 44.72413, 44.72391, 44.72369, 44.72346, 44.72324,
44.72301,
    44.72279, 44.72256, 44.72233, 44.7221, 44.72187, 44.72163, 44.7214,
    44.72116, 44.72092, 44.72068, 44.72044, 44.7202, 44.71996, 44.71971,
    44.71947, 44.71922, 44.71897, 44.71872, 44.71847, 44.71821,
44.71796,
    44.7177, 44.71745, 44.71719, 44.71693, 44.71666, 44.7164,
  44.73483, 44.73463, 44.73441, 44.7342, 44.73399, 44.73378, 44.73356,
    44.73335, 44.73312, 44.73291, 44.73269, 44.73246, 44.73223,
44.73201,
    44.73178, 44.73156, 44.73133, 44.73109, 44.73086, 44.73063,
44.73039,
    44.73016, 44.72992, 44.72968, 44.72944, 44.7292, 44.72895, 44.72871,
    44.72846, 44.72821, 44.72797, 44.72771, 44.72746, 44.72721,
44.72696,
    44.7267, 44.72644, 44.72618, 44.72592, 44.72566, 44.7254,
  44.74383, 44.74362, 44.74341, 44.7432, 44.74299, 44.74277, 44.74256,
    44.74234, 44.74212, 44.7419, 44.74168, 44.74146, 44.74123, 44.74101,
    44.74078, 44.74055, 44.74032, 44.74009, 44.73986, 44.73962,
44.73939,
    44.73915, 44.73891, 44.73867, 44.73843, 44.73819, 44.73795,
44.73771,
    44.73746, 44.73721, 44.73696, 44.73671, 44.73646, 44.7362, 44.73595,
    44.73569, 44.73544, 44.73518, 44.73492, 44.73465, 44.73439,
  44.75283, 44.75262, 44.75241, 44.7522, 44.75198, 44.75177, 44.75156,
    44.75134, 44.75112, 44.7509, 44.75068, 44.75045, 44.75023, 44.75,
    44.74978, 44.74955, 44.74932, 44.74909, 44.74886, 44.74862,
44.74839,
    44.74815, 44.74791, 44.74767, 44.74743, 44.74719, 44.74694, 44.7467,
    44.74645, 44.7462, 44.74596, 44.7457, 44.74545, 44.7452, 44.74495,
    44.74469, 44.74443, 44.74417, 44.74391, 44.74365, 44.74339,
  44.76183, 44.76162, 44.76141, 44.7612, 44.76098, 44.76077, 44.76055,
    44.76033, 44.76012, 44.7599, 44.75967, 44.75945, 44.75923, 44.759,
    44.75877, 44.75854, 44.75832, 44.75808, 44.75785, 44.75762,
44.75738,
    44.75714, 44.75691, 44.75667, 44.75643, 44.75618, 44.75594, 44.7557,
    44.75545, 44.7552, 44.75495, 44.7547, 44.75445, 44.7542, 44.75394,
    44.75368, 44.75343, 44.75317, 44.75291, 44.75264, 44.75238,
  44.77082, 44.77061, 44.7704, 44.77019, 44.76998, 44.76976, 44.76955,
    44.76933, 44.76911, 44.76889, 44.76867, 44.76845, 44.76822, 44.768,
    44.76777, 44.76754, 44.76731, 44.76708, 44.76685, 44.76661,
44.76638,
    44.76614, 44.7659, 44.76566, 44.76542, 44.76518, 44.76493, 44.76469,
    44.76444, 44.76419, 44.76395, 44.76369, 44.76344, 44.76319,
44.76294,
    44.76268, 44.76242, 44.76216, 44.7619, 44.76164, 44.76138,
  44.77982, 44.77961, 44.7794, 44.77919, 44.77898, 44.77876, 44.77855,
    44.77833, 44.77811, 44.77789, 44.77767, 44.77744, 44.77722,
44.77699,
    44.77677, 44.77654, 44.77631, 44.77608, 44.77584, 44.77561,
44.77538,
    44.77514, 44.7749, 44.77466, 44.77442, 44.77417, 44.77393, 44.77369,
    44.77344, 44.77319, 44.77294, 44.77269, 44.77244, 44.77219,
44.77193,
    44.77167, 44.77142, 44.77116, 44.77089, 44.77063, 44.77037,
  44.78882, 44.78861, 44.7884, 44.78819, 44.78798, 44.78776, 44.78754,
    44.78733, 44.78711, 44.78689, 44.78666, 44.78644, 44.78622,
44.78599,
    44.78576, 44.78553, 44.78531, 44.78507, 44.78484, 44.78461,
44.78437,
    44.78413, 44.78389, 44.78366, 44.78341, 44.78317, 44.78293,
44.78268,
    44.78244, 44.78219, 44.78194, 44.78168, 44.78143, 44.78118,
44.78093,
    44.78067, 44.78041, 44.78015, 44.77989, 44.77963, 44.77937,
  44.79782, 44.79761, 44.7974, 44.79718, 44.79697, 44.79676, 44.79654,
    44.79632, 44.7961, 44.79588, 44.79566, 44.79544, 44.79521, 44.79499,
    44.79476, 44.79453, 44.7943, 44.79407, 44.79384, 44.7936, 44.79337,
    44.79313, 44.79289, 44.79265, 44.79241, 44.79217, 44.79192,
44.79168,
    44.79143, 44.79118, 44.79093, 44.79068, 44.79043, 44.79018,
44.78992,
    44.78966, 44.78941, 44.78915, 44.78888, 44.78862, 44.78836,
  44.80681, 44.80661, 44.80639, 44.80618, 44.80597, 44.80575, 44.80554,
    44.80532, 44.8051, 44.80488, 44.80466, 44.80444, 44.80421, 44.80399,
    44.80376, 44.80353, 44.8033, 44.80307, 44.80283, 44.8026, 44.80236,
    44.80212, 44.80189, 44.80165, 44.80141, 44.80116, 44.80092,
44.80067,
    44.80043, 44.80018, 44.79993, 44.79967, 44.79942, 44.79917,
44.79892,
    44.79866, 44.7984, 44.79814, 44.79788, 44.79762, 44.79735,
  44.81581, 44.8156, 44.81539, 44.81518, 44.81496, 44.81475, 44.81453,
    44.81432, 44.8141, 44.81388, 44.81366, 44.81343, 44.81321, 44.81298,
    44.81275, 44.81252, 44.81229, 44.81206, 44.81183, 44.8116, 44.81136,
    44.81112, 44.81088, 44.81064, 44.8104, 44.81016, 44.80991, 44.80967,
    44.80942, 44.80917, 44.80892, 44.80867, 44.80842, 44.80817,
44.80791,
    44.80765, 44.8074, 44.80713, 44.80687, 44.80661, 44.80635,
  44.82481, 44.8246, 44.82439, 44.82418, 44.82396, 44.82375, 44.82353,
    44.82331, 44.82309, 44.82287, 44.82265, 44.82243, 44.8222, 44.82198,
    44.82175, 44.82152, 44.82129, 44.82106, 44.82082, 44.82059,
44.82035,
    44.82012, 44.81988, 44.81964, 44.8194, 44.81915, 44.81891, 44.81866,
    44.81842, 44.81817, 44.81792, 44.81767, 44.81741, 44.81716,
44.81691,
    44.81665, 44.81639, 44.81613, 44.81587, 44.81561, 44.81534,
  44.83381, 44.8336, 44.83339, 44.83317, 44.83296, 44.83274, 44.83253,
    44.83231, 44.83209, 44.83187, 44.83165, 44.83142, 44.8312, 44.83097,
    44.83075, 44.83052, 44.83029, 44.83006, 44.82982, 44.82959,
44.82935,
    44.82911, 44.82887, 44.82863, 44.82839, 44.82815, 44.8279, 44.82766,
    44.82741, 44.82716, 44.82691, 44.82666, 44.82641, 44.82616, 44.8259,
    44.82564, 44.82538, 44.82512, 44.82486, 44.8246, 44.82434,
  44.8428, 44.84259, 44.84238, 44.84217, 44.84196, 44.84174, 44.84153,
    44.84131, 44.84109, 44.84087, 44.84064, 44.84042, 44.8402, 44.83997,
    44.83974, 44.83951, 44.83928, 44.83905, 44.83882, 44.83858,
44.83835,
    44.83811, 44.83787, 44.83763, 44.83739, 44.83715, 44.8369, 44.83665,
    44.83641, 44.83616, 44.83591, 44.83566, 44.8354, 44.83515, 44.83489,
    44.83464, 44.83438, 44.83412, 44.83386, 44.8336, 44.83333,
  44.8518, 44.85159, 44.85138, 44.85117, 44.85095, 44.85074, 44.85052,
    44.8503, 44.85009, 44.84986, 44.84964, 44.84942, 44.84919, 44.84897,
    44.84874, 44.84851, 44.84828, 44.84805, 44.84781, 44.84758,
44.84734,
    44.84711, 44.84687, 44.84663, 44.84638, 44.84614, 44.8459, 44.84565,
    44.8454, 44.84515, 44.8449, 44.84465, 44.8444, 44.84415, 44.84389,
    44.84363, 44.84337, 44.84311, 44.84285, 44.84259, 44.84232,
  44.8608, 44.86059, 44.86038, 44.86016, 44.85995, 44.85974, 44.85952,
    44.8593, 44.85908, 44.85886, 44.85864, 44.85841, 44.85819, 44.85796,
    44.85773, 44.85751, 44.85728, 44.85704, 44.85681, 44.85658,
44.85634,
    44.8561, 44.85586, 44.85562, 44.85538, 44.85514, 44.85489, 44.85464,
    44.8544, 44.85415, 44.8539, 44.85365, 44.85339, 44.85314, 44.85288,
    44.85263, 44.85237, 44.85211, 44.85184, 44.85159, 44.85132,
  44.8698, 44.86959, 44.86937, 44.86916, 44.86895, 44.86873, 44.86852,
    44.8683, 44.86808, 44.86786, 44.86763, 44.86741, 44.86719, 44.86696,
    44.86673, 44.8665, 44.86627, 44.86604, 44.86581, 44.86557, 44.86533,
    44.8651, 44.86486, 44.86462, 44.86438, 44.86413, 44.86389, 44.86364,
    44.86339, 44.86314, 44.8629, 44.86264, 44.86239, 44.86213, 44.86188,
    44.86162, 44.86136, 44.8611, 44.86084, 44.86058, 44.86031,
  44.87879, 44.87858, 44.87837, 44.87816, 44.87794, 44.87773, 44.87751,
    44.8773, 44.87708, 44.87685, 44.87663, 44.87641, 44.87618, 44.87596,
    44.87573, 44.8755, 44.87527, 44.87503, 44.8748, 44.87457, 44.87433,
    44.87409, 44.87385, 44.87361, 44.87337, 44.87313, 44.87288,
44.87263,
    44.87239, 44.87214, 44.87189, 44.87164, 44.87138, 44.87113,
44.87087,
    44.87062, 44.87036, 44.8701, 44.86983, 44.86957, 44.86931,
  44.88779, 44.88758, 44.88737, 44.88716, 44.88694, 44.88673, 44.88651,
    44.88629, 44.88607, 44.88585, 44.88563, 44.8854, 44.88518, 44.88495,
    44.88472, 44.88449, 44.88427, 44.88403, 44.8838, 44.88356, 44.88333,
    44.88309, 44.88285, 44.88261, 44.88237, 44.88212, 44.88188,
44.88163,
    44.88139, 44.88113, 44.88089, 44.88063, 44.88038, 44.88012,
44.87987,
    44.87961, 44.87935, 44.87909, 44.87883, 44.87857, 44.8783,
  44.89679, 44.89658, 44.89637, 44.89615, 44.89594, 44.89573, 44.89551,
    44.89529, 44.89507, 44.89485, 44.89463, 44.8944, 44.89418, 44.89395,
    44.89372, 44.89349, 44.89326, 44.89303, 44.8928, 44.89256, 44.89232,
    44.89209, 44.89185, 44.89161, 44.89136, 44.89112, 44.89087,
44.89063,
    44.89038, 44.89013, 44.88988, 44.88963, 44.88937, 44.88912,
44.88886,
    44.88861, 44.88835, 44.88809, 44.88783, 44.88756, 44.8873,
  44.90578, 44.90557, 44.90536, 44.90515, 44.90494, 44.90472, 44.9045,
    44.90429, 44.90406, 44.90384, 44.90362, 44.9034, 44.90317, 44.90295,
    44.90272, 44.90249, 44.90226, 44.90202, 44.90179, 44.90155,
44.90132,
    44.90108, 44.90084, 44.9006, 44.90036, 44.90011, 44.89987, 44.89962,
    44.89938, 44.89912, 44.89888, 44.89862, 44.89837, 44.89811,
44.89786,
    44.8976, 44.89734, 44.89708, 44.89682, 44.89656, 44.89629,
  44.91478, 44.91457, 44.91436, 44.91415, 44.91393, 44.91372, 44.9135,
    44.91328, 44.91306, 44.91284, 44.91262, 44.9124, 44.91217, 44.91194,
    44.91171, 44.91148, 44.91125, 44.91102, 44.91079, 44.91055,
44.91031,
    44.91008, 44.90984, 44.9096, 44.90935, 44.90911, 44.90886, 44.90862,
    44.90837, 44.90812, 44.90787, 44.90762, 44.90736, 44.90711,
44.90685,
    44.90659, 44.90634, 44.90607, 44.90582, 44.90555, 44.90528,
  44.92378, 44.92357, 44.92336, 44.92315, 44.92293, 44.92271, 44.9225,
    44.92228, 44.92206, 44.92184, 44.92162, 44.92139, 44.92117,
44.92094,
    44.92071, 44.92048, 44.92025, 44.92002, 44.91978, 44.91955,
44.91931,
    44.91907, 44.91883, 44.91859, 44.91835, 44.91811, 44.91786,
44.91761,
    44.91737, 44.91711, 44.91687, 44.91661, 44.91636, 44.9161, 44.91585,
    44.91559, 44.91533, 44.91507, 44.91481, 44.91454, 44.91428,
  44.93278, 44.93257, 44.93235, 44.93214, 44.93193, 44.93171, 44.9315,
    44.93127, 44.93106, 44.93084, 44.93061, 44.93039, 44.93016,
44.92994,
    44.92971, 44.92948, 44.92924, 44.92901, 44.92878, 44.92854,
44.92831,
    44.92807, 44.92783, 44.92759, 44.92735, 44.9271, 44.92686, 44.92661,
    44.92636, 44.92611, 44.92586, 44.92561, 44.92535, 44.9251, 44.92484,
    44.92458, 44.92432, 44.92406, 44.9238, 44.92354, 44.92327,
  44.94177, 44.94156, 44.94135, 44.94114, 44.94093, 44.94071, 44.94049,
    44.94027, 44.94005, 44.93983, 44.93961, 44.93938, 44.93916,
44.93893,
    44.9387, 44.93847, 44.93824, 44.93801, 44.93777, 44.93754, 44.9373,
    44.93707, 44.93682, 44.93658, 44.93634, 44.9361, 44.93585, 44.9356,
    44.93536, 44.9351, 44.93486, 44.9346, 44.93435, 44.93409, 44.93384,
    44.93358, 44.93332, 44.93306, 44.9328, 44.93253, 44.93227,
  44.95077, 44.95056, 44.95035, 44.95013, 44.94992, 44.9497, 44.94949,
    44.94927, 44.94905, 44.94883, 44.9486, 44.94838, 44.94815, 44.94793,
    44.9477, 44.94747, 44.94724, 44.947, 44.94677, 44.94653, 44.9463,
    44.94606, 44.94582, 44.94558, 44.94534, 44.94509, 44.94485, 44.9446,
    44.94435, 44.9441, 44.94385, 44.9436, 44.94334, 44.94309, 44.94283,
    44.94257, 44.94231, 44.94205, 44.94179, 44.94153, 44.94126,
  44.95977, 44.95956, 44.95935, 44.95913, 44.95892, 44.9587, 44.95848,
    44.95827, 44.95805, 44.95782, 44.9576, 44.95737, 44.95715, 44.95692,
    44.9567, 44.95646, 44.95623, 44.956, 44.95576, 44.95553, 44.95529,
    44.95506, 44.95481, 44.95457, 44.95433, 44.95409, 44.95384,
44.95359,
    44.95335, 44.95309, 44.95285, 44.95259, 44.95234, 44.95208,
44.95183,
    44.95157, 44.95131, 44.95105, 44.95079, 44.95052, 44.95026,
  44.96877, 44.96856, 44.96834, 44.96813, 44.96791, 44.9677, 44.96748,
    44.96726, 44.96704, 44.96682, 44.9666, 44.96637, 44.96615, 44.96592,
    44.96569, 44.96546, 44.96523, 44.965, 44.96476, 44.96453, 44.96429,
    44.96405, 44.96381, 44.96357, 44.96333, 44.96308, 44.96284,
44.96259,
    44.96234, 44.96209, 44.96184, 44.96159, 44.96133, 44.96108,
44.96082,
    44.96056, 44.9603, 44.96004, 44.95978, 44.95951, 44.95925 ;

time = 0 ;

idl = "" ;

geo_limits = 4941000, 649000, 4981000, 689000 ;

grid_mesh = 1000, 1000 ;

cum_pr_mm =
  0, 0, 0, 0, 0, 0, 0, 0.01338021, 0.01602855, 0.01399816, 0.01278954,
    0.01338021, 0.01168529, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0.03300805, 0.01360867, 0.02896279, 0.01920108,
0.01399816,
    0.01338021, 0.01338021, 0.01168529, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0.03300805, 0.04736773, 0.0609764, 0.04973597, 0.03567044,
    0.01116944, 0.01168529, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0.02455989, 0.04993062, 0.03596432, 0.01866684, 0.0505513, 0.06572119,
    0.0528961, 0.03369653, 0.01116944, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0.1097616, 0.06299267, 0.04266773, 0.02755423, 0.02300154, 0.0424173,
    0.0528961, 0.02008785, 0.01116944, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0.1304922, 0.09385033, 0.07922021, 0.03308987, 0.02300154, 0.01835346,
    0.0528961, 0.01464464, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0.1804126, 0.1297998, 0.08104637, 0.05398374, 0.02300154, 0.01168529,
    0.01602855, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0.1884816, 0.1279853, 0.1095784, 0.04651736, 0, 0, 0.01602855, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0, 0,
  0.1374868, 0.09564797, 0.08922645, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
  0.07957859, 0.04417009, 0.006519975, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
  0.06058752, 0.04417009, 0.04417009, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
  0.07302121, 0.04148318, 0.02822841, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
  0.05175512, 0.07778501, 0.01630224, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0.008171189,
    0, 0, 0, 0,
  0.03982895, 0.06308942, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.008171189,
    0.007810473, 0, 0, 0,
  0.03421111, 0.02101557, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.007810473,
0,
0, 0,
  0.03421111, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0.01464464, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0.01222496,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.006232153, 0, 0.006232153,
    0.006232153, 0, 0, 0, 0.006232153,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0.01222496, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.006232153, 0.03465264,
    0.03465264, 0, 0, 0.008548561, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01024057, 0.04753254, 0.01342676, 0,
    0.008548561, 0.008548561, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01024057, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0.005694066, 0.02015775, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0.01172595, 0.01172595, 0, 0.02015775, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0.01404686, 0.01404686, 0, 0.02015775,
0.008548561,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0.005442702, 0.01404686, 0.01172595, 0,
0.008548561,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0,
    0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0.01172595, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0.01676881, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0, 0, 0, 0, 0.009754568, 0.03208978, 0.02744518, 0, 0, 0, 0, 0,
0, 0,
    0.004762364,
  0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
0, 0,
    0, 0.02633787, 0.02101557, 0.01338021, 0.01338021, 0, 0, 0.122796,
0,
    0.02633787, 0, 0.2787667, 0, 0, 0.06662081, 0.05425636 ;
}
-- 
Enrico Gabrielli
Album fotografico di bonushenricus: http://www.flickr.com/photos/10688869@N03/show/
Linux count registered user #518831 - Gnu/Linux Debian 6.0


From ivan.lucena at pmldnet.com  Mon Jul  4 17:51:40 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Jul  4 18:33:58 2011
Subject: =?iso-8859-1?B?UkU6IFtnZGFsLWRldl0gT0dSIDogT0NJIGRyaXZlciBpbXByb3ZlbWVudA==?=
In-Reply-To: <8C7DAE7B21100F4CABDD600FAAD339D005926F11@DGA-EXC01.mrw.wallonie.int>
References: <8C7DAE7B21100F4CABDD600FAAD339D005926F11@DGA-EXC01.mrw.wallonie.int>
Message-ID: <20110704215141.9638.qmail@s466.sureserver.com>

Nicolas,

Don't worry about the raster driver. I am taking care of it but I am glad to know about your interest in maintain the so called OCI driver. That is my suggestion, start from fresh a new driver by another name like SDO, Oracle, SDO_GEOM, or something that represent the data source, not the API name. You can then use the oci_wrapper code in the raster driver so that we can integrate what is good in both implementations. The oci_wrapper is also used by libLAS to access SDO_PC, point cloud that. That means, more people contributing with more better performance code in the benefit of all. Anyway, In the long run, we could then replace the OCI driver by the new one and continue to answer by the name of OCI for backward compatibility. But please note that the oci_wrapper by itself is not going to provide the improvements your want by itself, you still need to write the code anyway. But if the change is so big and the current code is so fragile that could make sense. Just a suggestion.

Regards,

Ivan


>  -------Original Message-------
>  From: Nicolas Simon <nicolas.simon@spw.wallonie.be>
>  To: gdal-dev@lists.osgeo.org
>  Subject: RE: [gdal-dev] OGR : OCI driver improvement
>  Sent: Jul 04 '11 10:22
>  
>  Hi,
>  I just answer most questions in my previous mail to the list.
>  So just to say that I could participate to the maintenance of the OCI driver for OGR (we don't use raster in Oracle, sorry).
>  
>  Nicolas
>  
>  > -----Message d'origine-----
>  > De : fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com]De la part de
>  > Frank Warmerdam
>  > Envoy? : lundi 4 juillet 2011 15:10
>  > ? : Nicolas Simon
>  > Cc : gdal-dev@lists.osgeo.org
>  > Objet : Re: [gdal-dev] OGR : OCI driver improvement
>  >
>  >
>  > Nicolas,
>  >
>  > The proposed changes seem reasonable, but I am concerned
>  > about complexity and
>  > risk of breaking the driver in some rarely tested cases.??The OCI
>  > driver is pretty
>  > fragile.
>  >
>  > On Mon, Jul 4, 2011 at 8:32 AM, Nicolas Simon
>  > <nicolas.simon@spw.wallonie.be> wrote:
>  > > Hi all,
>  > >
>  > > I'd like to propose some OCI driver improvement.
>  > >
>  > > 1) Enable insert from different client. This could be done
>  > by managing the generation of new FID on DB side instead of
>  > client side.
>  > > Technically this could be done with an oracle sequence and
>  > a trigger to fill the FID.
>  > > This proposition modify the way FID are handled ( I propose
>  > to do as in PostGIS driver). This means that the FID of a
>  > feature (i.e. usually the value of the OGC_FID column for the
>  > feature) inserted into a table with CreateFeature() will be
>  > retrieved from the database and can be obtained with GetFID()
>  > even if an non-null FID was provided.
>  > > This could be easily implemented in UnboundCreateFeature
>  > with a 'returning' clause.
>  > > But I don't known if it's feasible in BoundCreateFeature
>  > since truth FIDs will be know later when
>  > OGROCITableLayer::FlushPendingFeatures() is called.
>  >
>  > I'm not clear on what you will do if CreateFeature() is called on a
>  > table for which the
>  > the sequence and trigger to fill the FID do not already exist.??Will
>  > you create it???I'm
>  > concerned this will not be honoured by other applications
>  > interacting with the
>  > table.
>  >
>  > > 2) By providing true update operation instead of delete +
>  > insert operations (cf SetFeture).
>  > > This should provide better performance and enable to
>  > develop trigger on update if needed for other purpose.
>  > > With this modification, OCI driver will have the following
>  > mapping between OGR concepts and Oracle operations:
>  > > ? ?OGRFeature::CreateFeature() <==> INSERT operation
>  > > ? ?OGRFeature::SetFeature() <==> UPDATE operation
>  > > ? ?OGRFeature::DeleteFeature() <==> DELETE operation
>  > > This modify slightly the actual behavior since it disable
>  > the possibility of inserting a new record through SetFeature
>  > (in case of ?they were no record to delete, the subsequent
>  > insert did the job). With the proposed implementation it'll
>  > be no longer the case. ?"Update ... set ... ?where FID =
>  > provided FID" command doesn't insert new record.
>  >
>  > The main downside I see with implementing SetFeature() as an UPDATE is
>  > complexity -
>  > another whole set of code for assigning records.??But that isn't a
>  > compelling reason
>  > not to do it.
>  >
>  > > 3) Add transaction support in the normal SQL sense.
>  > > Since transaction is handled within a session and we have a
>  > session per OGROCIDataSource, a transaction will include
>  > operation on any layer of that datasource.
>  > > I propose the following operating mode.
>  > >
>  > > Outside a transaction, we'll be in 'auto commit' mode.
>  > > ?This commit on success DeleteFeature, SetFeature and
>  > CreateFeature (not in MULTI_LOAD mode).
>  > > ?For CreateFeature (in MULTI_LOAD mode) data will be commited
>  > > ?- each time the buffer is full (when
>  > OGROCITableLayer::FlushPendingFeatures() is called)
>  > > ?- when OGROCITableLayer::SyncToDisk() is call
>  > > ?- before a new transaction start.
>  > >
>  > > Transaction start (through a call
>  > OGRLayer::StartTransaction()) for all layer in the DataSource.
>  > > OGRLayer::CommitTransaction() will call
>  > OGROCITableLayer::SyncToDisk() for each layer of ?the
>  > DataSource and issues one commit command for the session, and
>  > then return in auto commit mode (cf outside transaction mechanism)
>  > > OGRLayer::RollbackTransaction() will drop PendingFeature
>  > (may be ?through a private function that reset
>  > nWriteCacheUsed to 0) for each layer of the datasource and
>  > issues one rollback command for the session, and then return
>  > to auto commit mode.
>  >
>  > This *seems* reasonable, but please understand that the OGR
>  > transaction
>  > model is fairly weak.
>  >
>  > > I would like to know if someone else is interested in these
>  > improvements ?
>  > > Is it the way you want things work ?
>  > >
>  > > An other information is that I'm ready to work for these
>  > improvements.
>  >
>  > I think the changes are desirable (in trunk only!) but if you
>  > provide them
>  > I am hopefully you will take an ongoing interest in maintenance of the
>  > OCI driver.?? Hopefully you might also be open to taking on commit
>  > access so you can do stuff more easily (perhaps after first submitting
>  > patches via trac for review).
>  >
>  > Best regards,
>  > --
>  > ---------------------------------------+----------------------
>  > ----------------
>  > I set the clouds in motion - turn up?? | Frank Warmerdam,
>  > warmerdam@pobox.com
>  > light and sound - activate the windows | http://pobox.com/~warmerdam
>  > and watch the world go round - Rush? ? | Geospatial
>  > Programmer for Rent
>  >
>  >
>  >
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From frederick.keusch at digimapas.cl  Mon Jul  4 18:00:36 2011
From: frederick.keusch at digimapas.cl (frederick keusch)
Date: Mon Jul  4 18:43:22 2011
Subject: [gdal-dev] Re: How to apply a costum shift grid?
In-Reply-To: <BANLkTimPPtAzbzAiFh8_ix3dvL3-UhhqZA@mail.gmail.com>
References: <1309267536678-6524901.post@n2.nabble.com>
	<BANLkTimPPtAzbzAiFh8_ix3dvL3-UhhqZA@mail.gmail.com>
Message-ID: <1309816836636-6547690.post@n2.nabble.com>

Hi Robert,

thanks a lot for your advice.

It is finally applied now with cs2cs. I also made a fast try with gdalwarp
but here it was the same again like before, it wasn?t applied. But ok, I
only did a fast try. So I hope tomorrow it will work finally, if i can find
out the right command.

Thanks a lot again!

frederick

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-apply-a-costum-shift-grid-tp6524901p6547690.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From nicolas.simon at spw.wallonie.be  Tue Jul  5 11:11:18 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Tue Jul  5 12:50:02 2011
Subject: [gdal-dev] OGR : OCI driver improvement
In-Reply-To: <20110704215141.9638.qmail@s466.sureserver.com>
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926F23@DGA-EXC01.mrw.wallonie.int>

Ivan,
	Your suggestion represents a lot of work, but it's interesting. 
	I think, I'll use the existing code unless I feel blocked with it.
	
	Regards

	Nicolas
    

> -----Message d'origine-----
> De : Ivan Lucena [mailto:ivan.lucena@pmldnet.com]
> Envoy? : lundi 4 juillet 2011 23:52
> ? : Nicolas Simon; ""
> Objet : RE: [gdal-dev] OGR : OCI driver improvement
> 
> 
> Nicolas,
> 
> Don't worry about the raster driver. I am taking care of it 
> but I am glad to know about your interest in maintain the so 
> called OCI driver. That is my suggestion, start from fresh a 
> new driver by another name like SDO, Oracle, SDO_GEOM, or 
> something that represent the data source, not the API name. 
> You can then use the oci_wrapper code in the raster driver so 
> that we can integrate what is good in both implementations. 
> The oci_wrapper is also used by libLAS to access SDO_PC, 
> point cloud that. That means, more people contributing with 
> more better performance code in the benefit of all. Anyway, 
> In the long run, we could then replace the OCI driver by the 
> new one and continue to answer by the name of OCI for 
> backward compatibility. But please note that the oci_wrapper 
> by itself is not going to provide the improvements your want 
> by itself, you still need to write the code anyway. But if 
> the change is so big and the current code is so fragile that 
> could make sense. Just a suggestio
>  n.
> 
> Regards,
> 
> Ivan
> 
> 
> >  -------Original Message-------
> >  From: Nicolas Simon <nicolas.simon@spw.wallonie.be>
> >  To: gdal-dev@lists.osgeo.org
> >  Subject: RE: [gdal-dev] OGR : OCI driver improvement
> >  Sent: Jul 04 '11 10:22
> >  
> >  Hi,
> >  I just answer most questions in my previous mail to the list.
> >  So just to say that I could participate to the maintenance 
> of the OCI driver for OGR (we don't use raster in Oracle, sorry).
> >  
> >  Nicolas
> >  
> >  > -----Message d'origine-----
> >  > De : fwarmerdam@gmail.com 
> [mailto:fwarmerdam@gmail.com]De la part de
> >  > Frank Warmerdam
> >  > Envoy? : lundi 4 juillet 2011 15:10
> >  > ? : Nicolas Simon
> >  > Cc : gdal-dev@lists.osgeo.org
> >  > Objet : Re: [gdal-dev] OGR : OCI driver improvement
> >  >
> >  >
> >  > Nicolas,
> >  >
> >  > The proposed changes seem reasonable, but I am concerned
> >  > about complexity and
> >  > risk of breaking the driver in some rarely tested cases.??The OCI
> >  > driver is pretty
> >  > fragile.
> >  >
> >  > On Mon, Jul 4, 2011 at 8:32 AM, Nicolas Simon
> >  > <nicolas.simon@spw.wallonie.be> wrote:
> >  > > Hi all,
> >  > >
> >  > > I'd like to propose some OCI driver improvement.
> >  > >
> >  > > 1) Enable insert from different client. This could be done
> >  > by managing the generation of new FID on DB side instead of
> >  > client side.
> >  > > Technically this could be done with an oracle sequence and
> >  > a trigger to fill the FID.
> >  > > This proposition modify the way FID are handled ( I propose
> >  > to do as in PostGIS driver). This means that the FID of a
> >  > feature (i.e. usually the value of the OGC_FID column for the
> >  > feature) inserted into a table with CreateFeature() will be
> >  > retrieved from the database and can be obtained with GetFID()
> >  > even if an non-null FID was provided.
> >  > > This could be easily implemented in UnboundCreateFeature
> >  > with a 'returning' clause.
> >  > > But I don't known if it's feasible in BoundCreateFeature
> >  > since truth FIDs will be know later when
> >  > OGROCITableLayer::FlushPendingFeatures() is called.
> >  >
> >  > I'm not clear on what you will do if CreateFeature() is 
> called on a
> >  > table for which the
> >  > the sequence and trigger to fill the FID do not already 
> exist.??Will
> >  > you create it???I'm
> >  > concerned this will not be honoured by other applications
> >  > interacting with the
> >  > table.
> >  >
> >  > > 2) By providing true update operation instead of delete +
> >  > insert operations (cf SetFeture).
> >  > > This should provide better performance and enable to
> >  > develop trigger on update if needed for other purpose.
> >  > > With this modification, OCI driver will have the following
> >  > mapping between OGR concepts and Oracle operations:
> >  > > ? ?OGRFeature::CreateFeature() <==> INSERT operation
> >  > > ? ?OGRFeature::SetFeature() <==> UPDATE operation
> >  > > ? ?OGRFeature::DeleteFeature() <==> DELETE operation
> >  > > This modify slightly the actual behavior since it disable
> >  > the possibility of inserting a new record through SetFeature
> >  > (in case of ?they were no record to delete, the subsequent
> >  > insert did the job). With the proposed implementation it'll
> >  > be no longer the case. ?"Update ... set ... ?where FID =
> >  > provided FID" command doesn't insert new record.
> >  >
> >  > The main downside I see with implementing SetFeature() 
> as an UPDATE is
> >  > complexity -
> >  > another whole set of code for assigning records.??But 
> that isn't a
> >  > compelling reason
> >  > not to do it.
> >  >
> >  > > 3) Add transaction support in the normal SQL sense.
> >  > > Since transaction is handled within a session and we have a
> >  > session per OGROCIDataSource, a transaction will include
> >  > operation on any layer of that datasource.
> >  > > I propose the following operating mode.
> >  > >
> >  > > Outside a transaction, we'll be in 'auto commit' mode.
> >  > > ?This commit on success DeleteFeature, SetFeature and
> >  > CreateFeature (not in MULTI_LOAD mode).
> >  > > ?For CreateFeature (in MULTI_LOAD mode) data will be commited
> >  > > ?- each time the buffer is full (when
> >  > OGROCITableLayer::FlushPendingFeatures() is called)
> >  > > ?- when OGROCITableLayer::SyncToDisk() is call
> >  > > ?- before a new transaction start.
> >  > >
> >  > > Transaction start (through a call
> >  > OGRLayer::StartTransaction()) for all layer in the DataSource.
> >  > > OGRLayer::CommitTransaction() will call
> >  > OGROCITableLayer::SyncToDisk() for each layer of ?the
> >  > DataSource and issues one commit command for the session, and
> >  > then return in auto commit mode (cf outside transaction 
> mechanism)
> >  > > OGRLayer::RollbackTransaction() will drop PendingFeature
> >  > (may be ?through a private function that reset
> >  > nWriteCacheUsed to 0) for each layer of the datasource and
> >  > issues one rollback command for the session, and then return
> >  > to auto commit mode.
> >  >
> >  > This *seems* reasonable, but please understand that the OGR
> >  > transaction
> >  > model is fairly weak.
> >  >
> >  > > I would like to know if someone else is interested in these
> >  > improvements ?
> >  > > Is it the way you want things work ?
> >  > >
> >  > > An other information is that I'm ready to work for these
> >  > improvements.
> >  >
> >  > I think the changes are desirable (in trunk only!) but if you
> >  > provide them
> >  > I am hopefully you will take an ongoing interest in 
> maintenance of the
> >  > OCI driver.?? Hopefully you might also be open to taking 
> on commit
> >  > access so you can do stuff more easily (perhaps after 
> first submitting
> >  > patches via trac for review).
> >  >
> >  > Best regards,
> >  > --
> >  > ---------------------------------------+----------------------
> >  > ----------------
> >  > I set the clouds in motion - turn up?? | Frank Warmerdam,
> >  > warmerdam@pobox.com
> >  > light and sound - activate the windows | 
http://pobox.com/~warmerdam
>  > and watch the world go round - Rush? ? | Geospatial
>  > Programmer for Rent
>  >
>  >
>  >
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  




From dcole at integrity-apps.com  Tue Jul  5 11:46:20 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jul  5 13:26:32 2011
Subject: [gdal-dev] Creating modified copies of a file
Message-ID: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>

Hello,

I think I started to ask about this before on this forum, but I have since used GDAL a bit more and might be better to generate a new thread.

I have been using GDAL to read in NITF files, getting the RasterBand data, and manipulating it, and displaying the results in my viewer.

Now, I would like to be able process data, then save it into a new NITF. This new NITF will have the same geocoords and all of the same data as the original, with the exception of a new raster band replacing the original. Is there a way to create a clone of the original image WITHOUT copying the data? I do not want to have to replicate the old data on disk, only the overwrite it with my new data that is coming from the external processing. I looked into creating the virtual data sets, but I am not sure if that is my answer. If I just pass in an empty "" as the destination, it says it will create that dataset in memory. Is this what I want to do?

My algorithm processes only a portion of the image at a time, so what I envisioned in my head was being able to essentially write out header /meta information in a file, and "append" blocks of raster data into the right place in the file, as they complete processing. This way there is no single lag-point while waiting to create a copy of data on disk to another place on disk, or having to create a large file on disk all at once. These image files are 1GB+

Any tips for trying to set up this scenario?

Thanks

Derek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110705/6029c43b/attachment.html
From chaitanya.ch at gmail.com  Tue Jul  5 13:35:24 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul  5 15:21:38 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
Message-ID: <CAMKgpOa=PR+=nbuqyPvD9pdUEXqedbOqUXg3_ZGMWa5Pg-BVug@mail.gmail.com>

Derek,

Writing into a raster band is a lot like reading into it. Use the function
you use to read the pixels to write the pixels back.
Don't forget to close the dataset at the end using GDALClose() [1]. Also,
check out the GDALFlushCache() and similar functions in [2].

[1]: http://www.gdal.org/gdal_8h.html#0984222d45a72028fcbbf1f44831ffbc
[2]: http://www.gdal.org/gdal_8h.html

On Tue, Jul 5, 2011 at 9:16 PM, Cole, Derek <dcole@integrity-apps.com>wrote:

>  Hello,
>
> I think I started to ask about this before on this forum, but I have since
> used GDAL a bit more and might be better to generate a new thread.
>
> I have been using GDAL to read in NITF files, getting the RasterBand data,
> and manipulating it, and displaying the results in my viewer.
>
> Now, I would like to be able process data, then save it into a new NITF.
> This new NITF will have the same geocoords and all of the same data as the
> original, with the exception of a new raster band replacing the original. Is
> there a way to create a clone of the original image WITHOUT copying the
> data? I do not want to have to replicate the old data on disk, only the
> overwrite it with my new data that is coming from the external processing. I
> looked into creating the virtual data sets, but I am not sure if that is my
> answer. If I just pass in an empty "" as the destination, it says it will
> create that dataset in memory. Is this what I want to do?
>
> My algorithm processes only a portion of the image at a time, so what I
> envisioned in my head was being able to essentially write out header /meta
> information in a file, and "append" blocks of raster data into the right
> place in the file, as they complete processing. This way there is no single
> lag-point while waiting to create a copy of data on disk to another place on
> disk, or having to create a large file on disk all at once. These image
> files are 1GB+
>
> Any tips for trying to set up this scenario?
>
> Thanks
>
> Derek
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110705/c0072c26/attachment.html
From dcole at integrity-apps.com  Tue Jul  5 13:55:21 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jul  5 15:42:42 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <CAMKgpOa=PR+=nbuqyPvD9pdUEXqedbOqUXg3_ZGMWa5Pg-BVug@mail.gmail.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>,
	<CAMKgpOa=PR+=nbuqyPvD9pdUEXqedbOqUXg3_ZGMWa5Pg-BVug@mail.gmail.com>
Message-ID: <8406B84EA8899042A8508D858843972903BF03D3@CHUNEX01.integrity-apps.com>

Right, I can do this for my already opened and read-from data set. However, I want to have a separate file. This means I have to copy that original data set, right? I can't seem to figure out how to copy a data set without actually copying the raster data (which is huge in comparison to the meta). Are you suggesting I just add another band to the already opened file? Not entirely sure I like this approach, but it may be doable.

Derek
________________________________
From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Sent: Tuesday, July 05, 2011 1:35 PM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Creating modified copies of a file

Derek,

Writing into a raster band is a lot like reading into it. Use the function you use to read the pixels to write the pixels back.
Don't forget to close the dataset at the end using GDALClose() [1]. Also, check out the GDALFlushCache() and similar functions in [2].

[1]: http://www.gdal.org/gdal_8h.html#0984222d45a72028fcbbf1f44831ffbc
[2]: http://www.gdal.org/gdal_8h.html

On Tue, Jul 5, 2011 at 9:16 PM, Cole, Derek <dcole@integrity-apps.com<mailto:dcole@integrity-apps.com>> wrote:
Hello,

I think I started to ask about this before on this forum, but I have since used GDAL a bit more and might be better to generate a new thread.

I have been using GDAL to read in NITF files, getting the RasterBand data, and manipulating it, and displaying the results in my viewer.

Now, I would like to be able process data, then save it into a new NITF. This new NITF will have the same geocoords and all of the same data as the original, with the exception of a new raster band replacing the original. Is there a way to create a clone of the original image WITHOUT copying the data? I do not want to have to replicate the old data on disk, only the overwrite it with my new data that is coming from the external processing. I looked into creating the virtual data sets, but I am not sure if that is my answer. If I just pass in an empty "" as the destination, it says it will create that dataset in memory. Is this what I want to do?

My algorithm processes only a portion of the image at a time, so what I envisioned in my head was being able to essentially write out header /meta information in a file, and "append" blocks of raster data into the right place in the file, as they complete processing. This way there is no single lag-point while waiting to create a copy of data on disk to another place on disk, or having to create a large file on disk all at once. These image files are 1GB+

Any tips for trying to set up this scenario?

Thanks

Derek

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110705/23827bc1/attachment-0001.html
From even.rouault at mines-paris.org  Tue Jul  5 14:09:29 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul  5 15:57:23 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF03D3@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<CAMKgpOa=PR+=nbuqyPvD9pdUEXqedbOqUXg3_ZGMWa5Pg-BVug@mail.gmail.com>
	<8406B84EA8899042A8508D858843972903BF03D3@CHUNEX01.integrity-apps.com>
Message-ID: <201107052009.30209.even.rouault@mines-paris.org>

Le mardi 05 juillet 2011 19:55:21, Cole, Derek a ?crit :
> Right, I can do this for my already opened and read-from data set. However,
> I want to have a separate file. This means I have to copy that original
> data set, right? I can't seem to figure out how to copy a data set without
> actually copying the raster data (which is huge in comparison to the
> meta). Are you suggesting I just add another band to the already opened
> file? Not entirely sure I like this approach, but it may be doable.

Well, you should study closely the GDAL API, but the general plot is :

hInDS = GDALOpen(...)
hOutDS = GDALCreate(...) 
GDALSetProjection(hOutDS, GDALGetProjectionRef(hInDS)) /* copy projection info 
from source dataset */
GDALGetGeoTransform(hInDS, ...)
GDALSetGeoTransform(hOutDS, ...) /* copy geotransform info from source 
dataset*/
GDALRasterIO(GF_Write, ....)  /* write imagery */
GDALClose(hOutDS)

> 
> Derek
> ________________________________
> From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
> Sent: Tuesday, July 05, 2011 1:35 PM
> To: Cole, Derek
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Creating modified copies of a file
> 
> Derek,
> 
> Writing into a raster band is a lot like reading into it. Use the function
> you use to read the pixels to write the pixels back. Don't forget to close
> the dataset at the end using GDALClose() [1]. Also, check out the
> GDALFlushCache() and similar functions in [2].
> 
> [1]: http://www.gdal.org/gdal_8h.html#0984222d45a72028fcbbf1f44831ffbc
> [2]: http://www.gdal.org/gdal_8h.html
> 
> On Tue, Jul 5, 2011 at 9:16 PM, Cole, Derek
> <dcole@integrity-apps.com<mailto:dcole@integrity-apps.com>> wrote: Hello,
> 
> I think I started to ask about this before on this forum, but I have since
> used GDAL a bit more and might be better to generate a new thread.
> 
> I have been using GDAL to read in NITF files, getting the RasterBand data,
> and manipulating it, and displaying the results in my viewer.
> 
> Now, I would like to be able process data, then save it into a new NITF.
> This new NITF will have the same geocoords and all of the same data as the
> original, with the exception of a new raster band replacing the original.
> Is there a way to create a clone of the original image WITHOUT copying the
> data? I do not want to have to replicate the old data on disk, only the
> overwrite it with my new data that is coming from the external processing.
> I looked into creating the virtual data sets, but I am not sure if that is
> my answer. If I just pass in an empty "" as the destination, it says it
> will create that dataset in memory. Is this what I want to do?
> 
> My algorithm processes only a portion of the image at a time, so what I
> envisioned in my head was being able to essentially write out header /meta
> information in a file, and "append" blocks of raster data into the right
> place in the file, as they complete processing. This way there is no
> single lag-point while waiting to create a copy of data on disk to another
> place on disk, or having to create a large file on disk all at once. These
> image files are 1GB+
> 
> Any tips for trying to set up this scenario?
> 
> Thanks
> 
> Derek
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
From rodolfobonnin at suremptec.com.ar  Tue Jul  5 14:33:46 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Tue Jul  5 16:23:01 2011
Subject: [gdal-dev] Assigning affine matrix coefficients for a new driver.
Message-ID: <CACMBy_G_39ANGCx6gUzrc0JMnwG3t-AKzbbxEtTmbhZus2necg@mail.gmail.com>

Hello All,

I'm working on a new PRISM driver, and it can now read the rasterbands from
all products. Now I'm working on reading the georeferencing data, and trying
to set the affine matrix coefficients. The format specification* says in
page 53 for one of the map projection fields:


Field No 58

Coefficient of F4 function (a, b, c, d, e, f)

x'        a     b         x        e
     =                          +
y'        c     d         y        f

(x,y)  : Map coordinate
(x',y') : Corrected Image address

Remarks:

Map projection origin = (0,0).
In case of UTM, map coordinate at an
intersection of the equator and UTM
zone refelence (sic) circles of longitude = (0,0)

_____

* http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PRISM_L1_J_ENa.zip


Shall I assume the affine coefficients gdal requires, are those of the
inverse of the given matrix? Just to confirm.
Many thanks in advance.

-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110705/2dd766e0/attachment.html
From chaitanya.ch at gmail.com  Tue Jul  5 15:49:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul  5 17:42:43 2011
Subject: [gdal-dev] Assigning affine matrix coefficients for a new driver.
In-Reply-To: <CACMBy_G_39ANGCx6gUzrc0JMnwG3t-AKzbbxEtTmbhZus2necg@mail.gmail.com>
References: <CACMBy_G_39ANGCx6gUzrc0JMnwG3t-AKzbbxEtTmbhZus2necg@mail.gmail.com>
Message-ID: <CAMKgpOaUC2KbPwouV8mMrX939Sofv+cM-kE4WfT3dJ5ss_USnA@mail.gmail.com>

Rodolfo,

I don't remember how to choose the matrix to be inverted here. However you
can read about GDAL's affine transformation coefficients in the
documentation for GDALDataset::GetGeoTransform() [1]. You can also find
relevant info at the GDAL Data Model page [2].

[1]:
http://www.gdal.org/classGDALDataset.html#f9593cc241e7d140f5f3c4798a43a668
[2]: http://www.gdal.org/gdal_datamodel.html

On Wed, Jul 6, 2011 at 12:03 AM, Rodolfo Bonnin <
rodolfobonnin@suremptec.com.ar> wrote:

> Hello All,
>
> I'm working on a new PRISM driver, and it can now read the rasterbands from
> all products. Now I'm working on reading the georeferencing data, and trying
> to set the affine matrix coefficients. The format specification* says in
> page 53 for one of the map projection fields:
>
>
> Field No 58
>
> Coefficient of F4 function (a, b, c, d, e, f)
>
> x'        a     b         x        e
>      =                          +
> y'        c     d         y        f
>
> (x,y)  : Map coordinate
> (x',y') : Corrected Image address
>
> Remarks:
>
> Map projection origin = (0,0).
> In case of UTM, map coordinate at an
> intersection of the equator and UTM
> zone refelence (sic) circles of longitude = (0,0)
>
> _____
>
> * http://www.eorc.jaxa.jp/ALOS/en/doc/fdata/PRISM_L1_J_ENa.zip
>
>
> Shall I assume the affine coefficients gdal requires, are those of the
> inverse of the given matrix? Just to confirm.
> Many thanks in advance.
>
> --
> Ing. Rodolfo Bonnin
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345  Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> rodolfobonnin@suremptec.com.ar
> www.suremptec.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110706/15b3fca0/attachment.html
From dcole at integrity-apps.com  Tue Jul  5 18:26:06 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jul  5 20:27:56 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <201107052009.30209.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<CAMKgpOa=PR+=nbuqyPvD9pdUEXqedbOqUXg3_ZGMWa5Pg-BVug@mail.gmail.com>
	<8406B84EA8899042A8508D858843972903BF03D3@CHUNEX01.integrity-apps.com>,
	<201107052009.30209.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903BF04B9@CHUNEX01.integrity-apps.com>

Just as an interesting side-note: I tried to do a CreateCopy on one of these files that was 7GB. Using CreateCopy() it took almost 2 hours. When I simply copied to file contents using a cp command (this is CentOS), the copy takes about a minute. I am not sure why that is so terribly slow in GDAL. 

Also, I experimented trying to insert a band into an already existing NITF file, but the software spits back an error message that the format does not support it. It seems maybe I am stuck doing like Even's last email, which requires building out all the Meta, projection, transform data all into the file manually. Bummer.

Derek
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Tuesday, July 05, 2011 2:09 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek; Chaitanya kumar CH
Subject: Re: [gdal-dev] Creating modified copies of a file

Le mardi 05 juillet 2011 19:55:21, Cole, Derek a ?crit :
> Right, I can do this for my already opened and read-from data set. However,
> I want to have a separate file. This means I have to copy that original
> data set, right? I can't seem to figure out how to copy a data set without
> actually copying the raster data (which is huge in comparison to the
> meta). Are you suggesting I just add another band to the already opened
> file? Not entirely sure I like this approach, but it may be doable.

Well, you should study closely the GDAL API, but the general plot is :

hInDS = GDALOpen(...)
hOutDS = GDALCreate(...)
GDALSetProjection(hOutDS, GDALGetProjectionRef(hInDS)) /* copy projection info
from source dataset */
GDALGetGeoTransform(hInDS, ...)
GDALSetGeoTransform(hOutDS, ...) /* copy geotransform info from source
dataset*/
GDALRasterIO(GF_Write, ....)  /* write imagery */
GDALClose(hOutDS)

>
> Derek
> ________________________________
> From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
> Sent: Tuesday, July 05, 2011 1:35 PM
> To: Cole, Derek
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Derek,
>
> Writing into a raster band is a lot like reading into it. Use the function
> you use to read the pixels to write the pixels back. Don't forget to close
> the dataset at the end using GDALClose() [1]. Also, check out the
> GDALFlushCache() and similar functions in [2].
>
> [1]: http://www.gdal.org/gdal_8h.html#0984222d45a72028fcbbf1f44831ffbc
> [2]: http://www.gdal.org/gdal_8h.html
>
> On Tue, Jul 5, 2011 at 9:16 PM, Cole, Derek
> <dcole@integrity-apps.com<mailto:dcole@integrity-apps.com>> wrote: Hello,
>
> I think I started to ask about this before on this forum, but I have since
> used GDAL a bit more and might be better to generate a new thread.
>
> I have been using GDAL to read in NITF files, getting the RasterBand data,
> and manipulating it, and displaying the results in my viewer.
>
> Now, I would like to be able process data, then save it into a new NITF.
> This new NITF will have the same geocoords and all of the same data as the
> original, with the exception of a new raster band replacing the original.
> Is there a way to create a clone of the original image WITHOUT copying the
> data? I do not want to have to replicate the old data on disk, only the
> overwrite it with my new data that is coming from the external processing.
> I looked into creating the virtual data sets, but I am not sure if that is
> my answer. If I just pass in an empty "" as the destination, it says it
> will create that dataset in memory. Is this what I want to do?
>
> My algorithm processes only a portion of the image at a time, so what I
> envisioned in my head was being able to essentially write out header /meta
> information in a file, and "append" blocks of raster data into the right
> place in the file, as they complete processing. This way there is no
> single lag-point while waiting to create a copy of data on disk to another
> place on disk, or having to create a large file on disk all at once. These
> image files are 1GB+
>
> Any tips for trying to set up this scenario?
>
> Thanks
>
> Derek
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
From even.rouault at mines-paris.org  Tue Jul  5 18:38:25 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul  5 20:40:42 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF04B9@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107052009.30209.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903BF04B9@CHUNEX01.integrity-apps.com>
Message-ID: <201107060038.26030.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 00:26:06, Cole, Derek a ?crit :
> Just as an interesting side-note: I tried to do a CreateCopy on one of
> these files that was 7GB. Using CreateCopy() it took almost 2 hours. When
> I simply copied to file contents using a cp command (this is CentOS), the
> copy takes about a minute. I am not sure why that is so terribly slow in
> GDAL.

This is very well possible if the block dimensions of the source and target 
are not compatible. You might want to play with the BLOCKXSIZE and BLOCKYSIZE 
creation options. 

Anyway, you cannot simply compare cp and CreateCopy(). CreateCopy() can do 
much smarter things than just cp...

> 
> Also, I experimented trying to insert a band into an already existing NITF
> file, but the software spits back an error message that the format does
> not support it.

Yes very few formats can support AddBand().
From warmerdam at pobox.com  Tue Jul  5 22:44:05 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul  6 00:59:57 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Release Candidate
Message-ID: <CA+YzLBdb3kyxf507T6UEFVBG0LRA6MdRPKf13tUEcdB=vpsPAw@mail.gmail.com>

Folks,

I have prepared a release candidate for an RC1 release.   It can
be found at:

  http://download.osgeo.org/gdal/gdal-1.8.1RC1.tar.gz
  http://download.osgeo.org/gdal/gdal181RC1.zip

The NEWS file can be reviewed at:

  http://svn.osgeo.org/gdal/branches/1.8/gdal/NEWS

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From dmorissette at mapgears.com  Wed Jul  6 10:15:27 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Jul  6 13:08:40 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Release Candidate
In-Reply-To: <CA+YzLBdb3kyxf507T6UEFVBG0LRA6MdRPKf13tUEcdB=vpsPAw@mail.gmail.com>
References: <CA+YzLBdb3kyxf507T6UEFVBG0LRA6MdRPKf13tUEcdB=vpsPAw@mail.gmail.com>
Message-ID: <4E146DFF.3030508@mapgears.com>

I made a quick test with MapServer and FGS and have no problems to report.


On 11-07-05 10:44 PM, Frank Warmerdam wrote:
> Folks,
>
> I have prepared a release candidate for an RC1 release.   It can
> be found at:
>
>    http://download.osgeo.org/gdal/gdal-1.8.1RC1.tar.gz
>    http://download.osgeo.org/gdal/gdal181RC1.zip
>
> The NEWS file can be reviewed at:
>
>    http://svn.osgeo.org/gdal/branches/1.8/gdal/NEWS
>
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From luke.peterson at gmail.com  Wed Jul  6 11:11:31 2011
From: luke.peterson at gmail.com (Luke Peterson)
Date: Wed Jul  6 14:07:55 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the GDAL/OGR
	Python interface
Message-ID: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>

On Sat, Jul 24, 2010 at 10:31PM, Chaitanya kumar CH <chaitanya.ch at
gmail.com> wrote:
>
>Esben,
>
>I am not sure why the value is not quoted in the error report. The
>PostgreSQL driver quotes the string values.
>When using CreateFeature() you need to make sure to set the feature's FID to
>OGRNullFID using SetFID(OGRNullFID). In your error report it shows that
>ogc_fid is set to 0. Perhaps there is already a feature with that value?
>

I'm reviving a nearly-year-old thread here, sort of. I'm trying to
create cross-compatibility between MSSQL and PostGIS on some OGR-based
code I wrote in Python for the MSSQL environment: I had been running
into issues simply creating layers with OGR -- would run something
like this:

name = serverDS.CopyLayer(shapeDS.GetLayerByIndex(0),table,options).GetName()

with serverDS being an open OGR datastore (destination) and shapeDS
being an opened Shapefile (with an OGR-imposed FID).

This code works fine when serverDS is a MSSQLSpatial driver, but I get
hit with the following error when I run with a PostgresSQL driver:

"You've inserted feature with an already set FID and that's perhaps
the reason for the failure. If so, this can happen if you reuse the
same feature object for sequential insertions. Indeed, since GDAL
1.8.0, the FID of an inserted feature is got from the server, so it is
not a good ideato reuse it afterwards... All in all, try unsetting the
FID with SetFID(-1) before calling CreateFeature()"

OK, clear enough. I took a look at the DataStore code here and here:

http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/pg/ogrpgdatasource.cpp

http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/generic/ogrdatasource.cpp

I noticed that the PG driver has no PG-native code for CopyLayer() at
all; the generic driver's CopyLayer() function doesn't set a null FID
for CreateFeature(). So, it seems CopyLayer() is useless for PostGIS
in my situation.

The code I'm going with right now uses CopyLayer() out of the box
except if serverDS.GetDriver().GetName() == 'PostgreSQL', in which
case I'm re-implementing most of the logic from CopyLayer() in Python
except adding a SetFID(-1) call:

        newLayer =
serverDS.CreateLayer(table,shapeDS.GetLayerByIndex(0).GetSpatialRef(),ogr.wkbUnknown,options)
        for x in
xrange(shapeDS.GetLayerByIndex(0).GetLayerDefn().GetFieldCount()):
            newLayer.CreateField(shapeDS.GetLayerByIndex(0).GetLayerDefn().GetFieldDefn(x))

        newLayer.StartTransaction()
        for x in xrange(shapeDS.GetLayerByIndex(0).GetFeatureCount()):
            newFeature = shapeDS.GetLayerByIndex(0).GetFeature(x)
            newFeature.SetFID(-1)
            newLayer.CreateFeature(newFeature)
            if x % 128 == 0:
                newLayer.CommitTransaction()
                newLayer.StartTransaction()
        newLayer.CommitTransaction()

So I guess my question is whether I'm missing something, or whether I
should submit a bug report or feature request on the PG driver to
create a parallel implementation for CopyLayer() that either natively
incorporates the SetFID(-1) or that takes an option that could trigger
that behavior. Seems a shame this function exists but doesn't work
under certain circumstances (again -- maybe I'm missing something?)

Regards,
Luke

>
>On Fri, Jul 23, 2010 at 7:05 PM, Esben Taudorf <eta at le34.dk> wrote:
>
>>  Hi everybody
>>
>>
>>
>> I just started using the GDAL/OGR CSharp interface in Visual Studio and it
>> works great.
>>
>> I am trying to append a shapefile to a postgis table. This I can do with
>> the following lines in ogr2ogr:
>>
>>
>>
>> Fist import the shapefile to postgis a table
>>
>> ogr2ogr -f "PostgreSQL" PG:"dbname='postgis' host='localhost' port='5432'
>> user='...' password='...'" -lco PRECISION=NO -lco GEOMETRY_NAME=geom -a_srs
>> EPSG:25832 "c:\temp\testfile.shp"
>>
>>
>>
>> Then append the same shapefile (this is a test) to the same postgis table
>> like this
>>
>> ogr2ogr -append -update -f "PostgreSQL" PG:"dbname='postgis'
>> host='localhost' port='5432' user='...' password='...'"
>> "c:\temp\testfile.shp"
>>
>>
>>
>>
>>
>> But how do I do this in the GDAL/OGR CSharp interface or which classes and
>> functions do I use?
>>
>>
>>
>> So far what I have done is:
>>
>>
>>
>> Open a layer from the shapefile:
>>
>> string fileShp = @"c:\temp\testfile.shp";
>>
>> DataSource InputDataSource = Ogr.Open(fileShp, 0);
>>
>> Layer inputLayer = InputDataSource.GetLayerByIndex(0);
>>
>> FeatureDefn def = inputLayer.GetLayerDefn();
>>
>>
>>
>> Open a datasource to postgis:
>>
>> OutputDriver = Ogr.GetDriverByName("PostgreSQL");
>>
>> DataSource OutputDataSource = OutputDriver.Open("PG:dbname='postgis'
>> host='localhost' port='5432' user='...' password='...'", 1);
>>
>>
>>
>>
>>
>> Copy the layer to the postgis table:
>>
>> Layer outputLayer = OutputDataSource.CopyLayer(inputLayer, def.GetName(),
>> new string[] { "GEOMETRY_NAME=geom", "PRECISION=NO" }); //How to add -a_srs
>> EPSG:25832?
>>
>>
>>
>>
>>
>> This works to import the shapefile to a postgis table. But what should I do
>> when to append the same shapefile to the postgis a table. So far I have done
>> this:
>>
>>
>>
>> Open a layer from the shapefile:
>>
>> string fileShp = @"c:\temp\testfile.shp";
>>
>> DataSource InputDataSource = Ogr.Open(fileShp, 0);
>>
>> Layer inputLayer = InputDataSource.GetLayerByIndex(0);
>>
>> FeatureDefn def = inputLayer.GetLayerDefn();
>>
>>
>>
>> Open a datasource to postgis:
>>
>> OutputDriver = Ogr.GetDriverByName("PostgreSQL");
>>
>> DataSource OutputDataSource = OutputDriver.Open("PG:dbname='postgis'
>> host='localhost' port='5432' user='...' password='...'", 1);
>>
>>
>>
>>
>>
>> Layer outputLayer = OutputDataSource.GetLayerByName(def.GetName());
>>
>> Feature feat;
>>
>> while ((feat = inputLayer.GetNextFeature()) != null)
>>
>>                              {
>>
>>
>> outputLayer.CreateFeature(feat);
>>
>>                              }
>>
>>
>>
>> The CreateFeature functions fails with a syntax error in the INSERT
>> command. Below is a short version of the command with the syntax error:
>>
>>
>>
>> Command: INSERT INTO "testfile" ("geom" , "ogc_fid" , "name") VALUES
>> (GeomFromEWKT('SRID=-1;POINT (701678 6152444)'::TEXT) , 0 , Test)
>>
>>
>>
>> The field "name" is a character varying in postgis a the command needs
>> single quotes around 'Test'.
>>
>>
>>
>> How do I solve this syntax error?
>>
>>
>>
>> I am also wondering how to assign an output SRS when creating the postgis
>> table like the ogr2ogr flag -a_srs EPSG:25832?
>>
>>
>>
>> Any help or comment would be appreciated.
>>
>>
>>
>>
>>
>> Regards Esben.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
>--
>Best regards,
>Chaitanya kumar CH.
>/t?a???nj?/ /k?m?r/
>+91-9494447584
>17.2416N 80.1426E
>
From Jennings.Jay at geoeye.com  Wed Jul  6 11:29:02 2011
From: Jennings.Jay at geoeye.com (Jay Jennings)
Date: Wed Jul  6 14:27:27 2011
Subject: [gdal-dev] NITF-with-JP2KAK lossless ?
Message-ID: <ADE7627990BC2E4AB2112FF812FB5C8E011193@EEXCHMB01THN.geoeye.com>

Hi folks,
We are using a GDAL trunk snapshot from February 2011 (so 1.9dev ?) on a Windows 7 environment.  We have a Kakadu JPEG-2000 license and can successfully make NITF files with JPEG-2000 compression.  The compression appears to be the default QUALITY=20 because the files are consistently reduced in size by 80% with high quality.

But is it possible to make *lossless* JP2KAK within NITF ?   Using the GeoJP2 driver, we can do lossless using the QUALITY=100 creation option, but the same option on the NITF attempt is ignored, resulting in the same 80%-reduction-with-high-quality version.  I'm guessing this is due to the driver-within-driver issue (JP2KAK within NITF) so the NITF driver doesn't know what to do with the QUALITY=100 request.

Is there any 'gdal_translate' syntax that will currently achieve the NITF-with-JP2KAK-lossless goal ?

.........................................................
Jay Jennings
GeoEye, Inc.
(NASDAQ: GEOY)


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110706/5c3ce819/attachment.html
From chaitanya.ch at gmail.com  Wed Jul  6 12:39:11 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  6 15:40:32 2011
Subject: [gdal-dev] NITF-with-JP2KAK lossless ?
In-Reply-To: <ADE7627990BC2E4AB2112FF812FB5C8E011193@EEXCHMB01THN.geoeye.com>
References: <ADE7627990BC2E4AB2112FF812FB5C8E011193@EEXCHMB01THN.geoeye.com>
Message-ID: <CAMKgpOa-hgt=r4BS9WoxJQoamgVqS-61yKSyqkTkgyN_tU1NHg@mail.gmail.com>

Jay,

You are right. The NITF driver is not passing the creation options on to the
jp2kak driver. The NITF driver uses jp2kak the IC=C8 creation option is set
and both the ECW and Jasper drivers are unavailable.

I think what you asked for can be implemented easily. Please create a new
ticket [1] for this enhancement.

[1]: http://trac.osgeo.org/gdal/newticket

On Wed, Jul 6, 2011 at 8:59 PM, Jay Jennings <Jennings.Jay@geoeye.com>wrote:

>  Hi folks,****
>
> We are using a GDAL trunk snapshot from February 2011 (so 1.9dev ?) on a
> Windows 7 environment.  We have a Kakadu JPEG-2000 license and can
> successfully make NITF files with JPEG-2000 compression.  The compression
> appears to be the default QUALITY=20 because the files are consistently
> reduced in size by 80% with high quality.****
>
> ** **
>
> But is it possible to make **lossless** JP2KAK within NITF ?   Using the
> GeoJP2 driver, we can do lossless using the QUALITY=100 creation option, but
> the same option on the NITF attempt is ignored, resulting in the same
> 80%-reduction-with-high-quality version.  I?m guessing this is due to the
> driver-within-driver issue (JP2KAK within NITF) so the NITF driver doesn?t
> know what to do with the QUALITY=100 request.****
>
> ** **
>
> Is there any ?gdal_translate? syntax that will currently achieve the
> NITF-with-JP2KAK-lossless goal ?****
>
> ** **
>
> .........................................................**
>
> *Jay Jennings***
>
> GeoEye, Inc. ****
>
> (NASDAQ: GEOY) ****
>
> ** **
>
> ** **
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110706/479f781a/attachment.html
From dcole at integrity-apps.com  Wed Jul  6 12:39:20 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jul  6 15:40:41 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <201107060038.26030.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107052009.30209.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903BF04B9@CHUNEX01.integrity-apps.com>,
	<201107060038.26030.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903BF0627@CHUNEX01.integrity-apps.com>

What is the proper way to set those creation options?

I have tried the following:

       char* papszOptions[] = { "BLOCKXSIZE=1024", "BLOCKYSIZE=1024" };
       poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,  papszOptions, MyTextProgress, message);
       poBand = poVRTDS->GetRasterBand(1);
       CPLAssert( poBand->GetRasterDataType() == GDT_Byte );
       poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );

the block size variables are both still set to 128 instead of 1024, which is the block size of my input file. 


Thanks

Derek


________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Tuesday, July 05, 2011 6:38 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le mercredi 06 juillet 2011 00:26:06, Cole, Derek a ?crit :
> Just as an interesting side-note: I tried to do a CreateCopy on one of
> these files that was 7GB. Using CreateCopy() it took almost 2 hours. When
> I simply copied to file contents using a cp command (this is CentOS), the
> copy takes about a minute. I am not sure why that is so terribly slow in
> GDAL.

This is very well possible if the block dimensions of the source and target
are not compatible. You might want to play with the BLOCKXSIZE and BLOCKYSIZE
creation options.

Anyway, you cannot simply compare cp and CreateCopy(). CreateCopy() can do
much smarter things than just cp...

>
> Also, I experimented trying to insert a band into an already existing NITF
> file, but the software spits back an error message that the format does
> not support it.

Yes very few formats can support AddBand().
From dcole at integrity-apps.com  Wed Jul  6 12:50:56 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jul  6 15:53:02 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF0627@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107052009.30209.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903BF04B9@CHUNEX01.integrity-apps.com>, 
	<201107060038.26030.even.rouault@mines-paris.org>,
	<8406B84EA8899042A8508D858843972903BF0627@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903BF0641@CHUNEX01.integrity-apps.com>

Sorry to follow up so soon. I also tried what is  int he API, using the following:

    char **papszOptions = NULL;

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );


       poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,  papszOptions, MyTextProgress, message);

It seems to have no affect. Is it being passed properly?

Derek
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Wednesday, July 06, 2011 12:39 PM
To: Even Rouault; gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Creating modified copies of a file

What is the proper way to set those creation options?

I have tried the following:

       char* papszOptions[] = { "BLOCKXSIZE=1024", "BLOCKYSIZE=1024" };
       poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,  papszOptions, MyTextProgress, message);
       poBand = poVRTDS->GetRasterBand(1);
       CPLAssert( poBand->GetRasterDataType() == GDT_Byte );
       poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );

the block size variables are both still set to 128 instead of 1024, which is the block size of my input file.


Thanks

Derek


________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Tuesday, July 05, 2011 6:38 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le mercredi 06 juillet 2011 00:26:06, Cole, Derek a ?crit :
> Just as an interesting side-note: I tried to do a CreateCopy on one of
> these files that was 7GB. Using CreateCopy() it took almost 2 hours. When
> I simply copied to file contents using a cp command (this is CentOS), the
> copy takes about a minute. I am not sure why that is so terribly slow in
> GDAL.

This is very well possible if the block dimensions of the source and target
are not compatible. You might want to play with the BLOCKXSIZE and BLOCKYSIZE
creation options.

Anyway, you cannot simply compare cp and CreateCopy(). CreateCopy() can do
much smarter things than just cp...

>
> Also, I experimented trying to insert a band into an already existing NITF
> file, but the software spits back an error message that the format does
> not support it.

Yes very few formats can support AddBand().
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Jul  6 13:20:16 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  6 16:23:41 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF0641@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF0627@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF0641@CHUNEX01.integrity-apps.com>
Message-ID: <201107061920.16393.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 18:50:56, Cole, Derek a ?crit :
> Sorry to follow up so soon. I also tried what is  int he API, using the
> following:
> 
>     char **papszOptions = NULL;
> 
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
> 
> 
>        poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE, 
> papszOptions, MyTextProgress, message);

Yes that's better. The option array need to be NULL terminated, what 
CSLSetNameValue() does (otherwise you could get nasty crashes). However, the 
BLOCKXSIZE and BLOCKYSIZE options are options of the NITF driver, not the VRT 
driver. Not sure why you are using VRT, I thought you wanted NITF, but I 
haven't followed closely the whole thread

> 
> It seems to have no affect. Is it being passed properly?
> 
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Wednesday, July
> 06, 2011 12:39 PM
> To: Even Rouault; gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
> 
> What is the proper way to set those creation options?
> 
> I have tried the following:
> 
>        char* papszOptions[] = { "BLOCKXSIZE=1024", "BLOCKYSIZE=1024" };
>        poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE, 
> papszOptions, MyTextProgress, message); poBand =
> poVRTDS->GetRasterBand(1);
>        CPLAssert( poBand->GetRasterDataType() == GDT_Byte );
>        poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );
> 
> the block size variables are both still set to 128 instead of 1024, which
> is the block size of my input file.
> 
> 
> Thanks
> 
> Derek
> 
> 
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Tuesday, July 05, 2011 6:38 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
> 
> Le mercredi 06 juillet 2011 00:26:06, Cole, Derek a ?crit :
> > Just as an interesting side-note: I tried to do a CreateCopy on one of
> > these files that was 7GB. Using CreateCopy() it took almost 2 hours. When
> > I simply copied to file contents using a cp command (this is CentOS), the
> > copy takes about a minute. I am not sure why that is so terribly slow in
> > GDAL.
> 
> This is very well possible if the block dimensions of the source and target
> are not compatible. You might want to play with the BLOCKXSIZE and
> BLOCKYSIZE creation options.
> 
> Anyway, you cannot simply compare cp and CreateCopy(). CreateCopy() can do
> much smarter things than just cp...
> 
> > Also, I experimented trying to insert a band into an already existing
> > NITF file, but the software spits back an error message that the format
> > does not support it.
> 
> Yes very few formats can support AddBand().
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Jul  6 13:35:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  6 16:39:14 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
Message-ID: <201107061935.05572.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 17:11:31, Luke Peterson a ?crit :

> I'm reviving a nearly-year-old thread here, sort of. I'm trying to
> create cross-compatibility between MSSQL and PostGIS on some OGR-based
> code I wrote in Python for the MSSQL environment: I had been running
> into issues simply creating layers with OGR -- would run something
> like this:
> 
> name =
> serverDS.CopyLayer(shapeDS.GetLayerByIndex(0),table,options).GetName()
> 
> with serverDS being an open OGR datastore (destination) and shapeDS
> being an opened Shapefile (with an OGR-imposed FID).
> 
> This code works fine when serverDS is a MSSQLSpatial driver, but I get
> hit with the following error when I run with a PostgresSQL driver:
> 
> "You've inserted feature with an already set FID and that's perhaps
> the reason for the failure. If so, this can happen if you reuse the
> same feature object for sequential insertions. Indeed, since GDAL
> 1.8.0, the FID of an inserted feature is got from the server, so it is
> not a good ideato reuse it afterwards... All in all, try unsetting the
> FID with SetFID(-1) before calling CreateFeature()"
> 
> OK, clear enough. I took a look at the DataStore code here and here:
> 
> http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/pg/ogr
> pgdatasource.cpp
> 
> http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/generi
> c/ogrdatasource.cpp
> 
> I noticed that the PG driver has no PG-native code for CopyLayer() at
> all; the generic driver's CopyLayer() function doesn't set a null FID
> for CreateFeature(). So, it seems CopyLayer() is useless for PostGIS
> in my situation.

yes indeed, CopyLayer() isn't currently appropriate for your use case. It does 
currently a poDstFeature.SetFID(poSrcFeature.GetFID()), which is the 
equivalent of the -preserve_fid option of ogr2ogr. In the append use case, this 
is not desirable because you will get collisions with features already 
inserted with the FID. The solution will be easy to implement and consists in 
adding an option "PRESERVE_FID" to CopyLayer(). No need to create a 
specialized implementation for the PG driver, that issue could be found in 
other drivers that can use the FID of features set to CreateFeature(). Please 
file a ticket about that.

> 
> The code I'm going with right now uses CopyLayer() out of the box
> except if serverDS.GetDriver().GetName() == 'PostgreSQL', in which
> case I'm re-implementing most of the logic from CopyLayer() in Python
> except adding a SetFID(-1) call:
> 
>         newLayer =
> serverDS.CreateLayer(table,shapeDS.GetLayerByIndex(0).GetSpatialRef(),ogr.w
> kbUnknown,options) for x in
> xrange(shapeDS.GetLayerByIndex(0).GetLayerDefn().GetFieldCount()):
>            
> newLayer.CreateField(shapeDS.GetLayerByIndex(0).GetLayerDefn().GetFieldDef
> n(x))
> 
>         newLayer.StartTransaction()
>         for x in xrange(shapeDS.GetLayerByIndex(0).GetFeatureCount()):
>             newFeature = shapeDS.GetLayerByIndex(0).GetFeature(x)
>             newFeature.SetFID(-1)
>             newLayer.CreateFeature(newFeature)
>             if x % 128 == 0:
>                 newLayer.CommitTransaction()
>                 newLayer.StartTransaction()
>         newLayer.CommitTransaction()
> 

Several issues with your code :
	* it is risky to pass to CreateFeature() a feature from another layer. In 
cases the layer definition of the source and target layers are not strictly 
identical, the probability of having crashes is really high. Mismatch can 
easily happen when drivers don't support the exact data type of the source and 
choose a best fit (OFTString) for example. The safe procedure is to instantiate 
a new feature with the layer definition of the target layer and to use 
CopyFrom() to copy the content of the source feature to the target feature
	* major performance issue : GetFeature() is generally a slow operation 
(the shapefile driver being mostly the exception). It is better to iterate over 
the features with GetNextFeature().
	* minor/style performance issue : You could also affect  
shapeDS.GetLayerByIndex(0) to a variable to avoid a useless call to native 
code in the loop.

So I'd suggest something like :

    sourceLayer = shapeDS.GetLayerByIndex(0)
    sourceFeature = sourceLayer.GetNextFeature()
    newLayerDefn = newLayer.GetLayerDefn()
    x = 0
    while sourceFeature is not None:
        newFeature = ogr.Feature(newLayerDefn)
        newFeature.SetFrom(sourceFeature) # does not preserve source FID by 
default, what we want here
        newLayer.CreateFeature(newFeature)
        if x % 128 == 0:
            newLayer.CommitTransaction()
            newLayer.StartTransaction()

        sourceFeature = sourceLayer.GetNextFeature()
        x = x + 1

    newLayer.CommitTransaction()

Best regards,

Even
From even.rouault at mines-paris.org  Wed Jul  6 14:47:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  6 17:56:10 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
Message-ID: <201107062047.57744.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 17:11:31, Luke Peterson a ?crit :
> On Sat, Jul 24, 2010 at 10:31PM, Chaitanya kumar CH <chaitanya.ch at
> 
Hum, wait, how come can you use CopyLayer() to append to an existing table ? 
CopyLayer() is supposed to create a new layer, so I don't see how it would 
work with an existing target layer.

Actually I've just tested it to append to an existing Postgis table, and as 
expected, I get :

ERROR 1: Layer XXXXXX already exists, CreateLayer failed.
Use the layer creation option OVERWRITE=YES to replace it.

So, I don't even understand how you manage to get to the point where features 
are about to be inserted...

So I'm not sure at all the PRESERVE_FID option makes sense. Or do I miss 
something ??
From dcole at integrity-apps.com  Wed Jul  6 15:04:48 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jul  6 18:14:13 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <201107061920.16393.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF0627@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF0641@CHUNEX01.integrity-apps.com>,
	<201107061920.16393.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903BF069A@CHUNEX01.integrity-apps.com>

Well, my plan originally was to create a Virtual Data set in memory, so that I could just write to the blocks while in memory before writing to disk. It seems like I may be just as well off to go ahead and create the copy, and then just overwrite the block in the copy. 

I have tried to switch this back to a NITF driver instead of VRT. 
 Do you see anything wrong with this:

    poDataset = (GDALDataset *) GDALOpenShared( myfile, GA_ReadOnly );

    poNITFDriver = (GDALDriver *)GDALGetDriverByName("NITF");
    GDALSetCacheMax(300);
    papszMetadata = poNITFDriver->GetMetadata();

    if( poNITFDriver == NULL )
        exit( 1 );

    char *message = "Copying Current File";
    char **papszOptions = NULL;

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
    poNITFDS = poNITFDriver->CreateCopy(pszDstFilename, poDataset, FALSE,  papszOptions, MyTextProgress, message);


As you can see, this would copy from  NITF to NITF, and use the same block size as my original NITF (1024^2), as well as setting the cache to 300 MB. This was something I read in an old thread you had posted to. I dont see any noticable improvement. Is 300MB enough? How is that calculated exactly?  According to that thread, it was image width * block height * 2*sizeof(unit16)

here is from the gdal info of my source file:

Size is 37504, 109324
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray

so it should be ~290MB right? I think uint16 is 4 bytes.

This is still taking hours to copy. 

Thanks

Derek
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Wednesday, July 06, 2011 1:20 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le mercredi 06 juillet 2011 18:50:56, Cole, Derek a ?crit :
> Sorry to follow up so soon. I also tried what is  int he API, using the
> following:
>
>     char **papszOptions = NULL;
>
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
>
>
>        poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,
> papszOptions, MyTextProgress, message);

Yes that's better. The option array need to be NULL terminated, what
CSLSetNameValue() does (otherwise you could get nasty crashes). However, the
BLOCKXSIZE and BLOCKYSIZE options are options of the NITF driver, not the VRT
driver. Not sure why you are using VRT, I thought you wanted NITF, but I
haven't followed closely the whole thread

>
> It seems to have no affect. Is it being passed properly?
>
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Wednesday, July
> 06, 2011 12:39 PM
> To: Even Rouault; gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
>
> What is the proper way to set those creation options?
>
> I have tried the following:
>
>        char* papszOptions[] = { "BLOCKXSIZE=1024", "BLOCKYSIZE=1024" };
>        poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,
> papszOptions, MyTextProgress, message); poBand =
> poVRTDS->GetRasterBand(1);
>        CPLAssert( poBand->GetRasterDataType() == GDT_Byte );
>        poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );
>
> the block size variables are both still set to 128 instead of 1024, which
> is the block size of my input file.
>
>
> Thanks
>
> Derek
>
>
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Tuesday, July 05, 2011 6:38 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le mercredi 06 juillet 2011 00:26:06, Cole, Derek a ?crit :
> > Just as an interesting side-note: I tried to do a CreateCopy on one of
> > these files that was 7GB. Using CreateCopy() it took almost 2 hours. When
> > I simply copied to file contents using a cp command (this is CentOS), the
> > copy takes about a minute. I am not sure why that is so terribly slow in
> > GDAL.
>
> This is very well possible if the block dimensions of the source and target
> are not compatible. You might want to play with the BLOCKXSIZE and
> BLOCKYSIZE creation options.
>
> Anyway, you cannot simply compare cp and CreateCopy(). CreateCopy() can do
> much smarter things than just cp...
>
> > Also, I experimented trying to insert a band into an already existing
> > NITF file, but the software spits back an error message that the format
> > does not support it.
>
> Yes very few formats can support AddBand().
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From mettbest at gmail.com  Wed Jul  6 15:43:42 2011
From: mettbest at gmail.com (mett)
Date: Wed Jul  6 18:55:22 2011
Subject: [gdal-dev] [gdal-java-1.8.0]TransformPoint() - different values for
 same inputs, why?
Message-ID: <1309981422730-6555787.post@n2.nabble.com>

Hello everybody,
I'm using GDAL 1.8.0 with Java, and I do not why but I got different results
with TransformPoint with same inputs. Maybe I'm wrong, anyway see this:

Upper Left = (/258321.25943477/, 655225.28062628)
Abs: *-24.39163021771631*, 66.2996405709653

Lower Left = (/258321.25943477/, 574605.28062628)
Abs: *-24.24282066963955*, 65.5792295908428

Upper Right = (/339151.25943477,/ 655225.28062628)
Abs: *-22.593238696114604*, 66.35110363848813

Lower Right = (/339151.25943477,/ 574605.28062628)
Abs: *-22.493807890469444*, 65.62928831950212

Those are the corners of my image, and as you can see when I try to convert
with TransformPoint(X,Y), I got different value for example with static X
and variable X. 

Thank you for your help,
Mattia

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-java-1-8-0-TransformPoint-different-values-for-same-inputs-why-tp6555787p6555787.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From luke.peterson at gmail.com  Wed Jul  6 15:46:58 2011
From: luke.peterson at gmail.com (Luke Peterson)
Date: Wed Jul  6 18:58:50 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <201107062047.57744.even.rouault@mines-paris.org>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
	<201107062047.57744.even.rouault@mines-paris.org>
Message-ID: <CAOgDAsWE5WXbVjUxguk-p1xYbgUWtJh4YNN7Hk01wgMFet_tEQ@mail.gmail.com>

On Wed, Jul 6, 2011 at 2:47 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mercredi 06 juillet 2011 17:11:31, Luke Peterson a ?crit :
>> On Sat, Jul 24, 2010 at 10:31PM, Chaitanya kumar CH <chaitanya.ch at
>>
> Hum, wait, how come can you use CopyLayer() to append to an existing table ?
> CopyLayer() is supposed to create a new layer, so I don't see how it would
> work with an existing target layer.
>
> Actually I've just tested it to append to an existing Postgis table, and as
> expected, I get :
>
> ERROR 1: Layer XXXXXX already exists, CreateLayer failed.
> Use the layer creation option OVERWRITE=YES to replace it.
>
> So, I don't even understand how you manage to get to the point where features
> are about to be inserted...
>
> So I'm not sure at all the PRESERVE_FID option makes sense. Or do I miss
> something ??
>

You're right, an error should be expected from your append case -- but
I'm not using it to append, I'm running into this FID error on a
simple invocation of CopyLayer() in an empty schema, trying to copy a
layer from a Shapefile DS to a PostGIS DS.

What CopyLayer() is supposed to do (and the code I've written does) is
create a new layer based on an existing layer, copies a field set from
the source layer, then iterates through each of the features in the
source layer, creating a copy in the new layer. The problem is, if I
use it as-is with a shapefile as the source DS (for which OGR has
generated an FID), it will copy and create a new layer, but it will
only insert the first feature and then die with an error saying I need
to manually set the FID to -1. But I can't do that with CopyLayer(),
because CopyLayer() automatically pulls an FID into the destination
feature if one exists in the source DS in each CreateFeature iteration
(line 318). The other thing I've done with mine that's different from
CopyLayer()'s logic is I set the geometry to wkbUnknown -- I've
encountered errors with PostGIS in cases where the first feature being
copied is a wkbPolygon and the second feature is a wkbMultiPolygon,
for example.

The C++ for the CopyLayer() method is here in the DataSource class
source: http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/generic/ogrdatasource.cpp

Here's the function I've written (working code snippet incorporating
some of your suggestions from earlier and follows pretty much the same
path as the C++) -- it's just a shorthand "import-a-shapefile" wrapper
in python for a fairly easy task in OGR2OGR that I find myself doing
often enough in python. It's a bit clunky, but has worked in all
encountered use cases thus far:

def loadShapes(serverDS, table, sourceFile, temp=False,
overwrite=False, geography=False):
    if serverDS.GetDriver().GetName() == 'PostgreSQL':
        ogr.RegisterAll()
        shapeDS = ogr.Open(sourceFile)
        if temp == True:
            import random
            table = table+str(random.randint(0,99999))
        options = []
        name = ''
        if overwrite == True:
            options.append('OVERWRITE=YES')
        if geography == True:
            options.append('GEOM_TYPE=geography')

        sourceLayer = shapeDS.GetLayerByIndex(0)
        newLayer =
serverDS.CreateLayer(table,sourceLayer.GetSpatialRef(),ogr.wkbUnknown,options)
        for x in xrange(sourceLayer.GetLayerDefn().GetFieldCount()):
            newLayer.CreateField(sourceLayer.GetLayerDefn().GetFieldDefn(x))

        newLayer.StartTransaction()
        for x in xrange(sourceLayer.GetFeatureCount()):
            newFeature = sourceLayer.GetNextFeature()
            newFeature.SetFID(-1)
            newLayer.CreateFeature(newFeature)
            if x % 128 == 0:
                newLayer.CommitTransaction()
                newLayer.StartTransaction()
        newLayer.CommitTransaction()
        return newLayer.GetName()

The "else" for the path above simply calls CopyLayer() -- the only
other driver I've used for the destination DS is MSSQL, and
CopyLayer() works fine for it. The "temp" option is there because I
couldn't figure out how to generate a temp table, so I figured a
random-integer append on the table name would help avoid collisions if
I needed to run a parallel implementation for the function at some
point. I have to rewrite to make it check to see whether the
randomly-generated name exists, though.

I've got another insertShapes() function defined that has similar
iterative feature insertion language that I will eventually collapse
together with this into a sub-function when I stop writing and start
optimizing code -- except in that one, because I'm always doing a
feature-insert, I simply add a line:

if postgres == True: tempFeature.SetFID(-1)

right above the targetLayer.CreateFeature(tempFeature) call.

where the "postgres" variable is set at the top of the insert function with:

if serverDS.GetDriver().GetName() == 'PostgreSQL': postgres = True

To address your earlier point about field definition collisions:
>       * it is risky to pass to CreateFeature() a feature from another layer. In
>cases the layer definition of the source and target layers are not strictly
>identical, the probability of having crashes is really high. Mismatch can
>easily happen when drivers don't support the exact data type of the source and
>choose a best fit (OFTString) for example. The safe procedure is to instantiate
>a new feature with the layer definition of the target layer and to use
>CopyFrom() to copy the content of the source feature to the target feature

... in my insert function I have a step before the insert that loads
the shapefile-to-be-inserted into a postGIS table (utilizing the
temp==True logic above), then compares its field definition to the
field definition of the target table, ensuring that each of the
fieldName-fieldType combinations in the table-to-be-inserted's
definition exist in the target table's definition, otherwise it errors
out, citing the fields as incompatible (which relies on another
function that returns a set() filled with each name:type pair found in
an input ogr.FeatureDefn).

-----
Luke Peterson
From even.rouault at mines-paris.org  Wed Jul  6 15:56:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  6 19:09:00 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <CAOgDAsWE5WXbVjUxguk-p1xYbgUWtJh4YNN7Hk01wgMFet_tEQ@mail.gmail.com>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
	<201107062047.57744.even.rouault@mines-paris.org>
	<CAOgDAsWE5WXbVjUxguk-p1xYbgUWtJh4YNN7Hk01wgMFet_tEQ@mail.gmail.com>
Message-ID: <201107062156.57127.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 21:46:58, Luke Peterson a ?crit :

> You're right, an error should be expected from your append case -- but
> I'm not using it to append, I'm running into this FID error on a
> simple invocation of CopyLayer() in an empty schema, trying to copy a
> layer from a Shapefile DS to a PostGIS DS.

ok, understood. The subject of your email confused me "append a shapefile to a 
postgis table"...

> 
> What CopyLayer() is supposed to do (and the code I've written does) is
> create a new layer based on an existing layer, copies a field set from
> the source layer, then iterates through each of the features in the
> source layer, creating a copy in the new layer. The problem is, if I
> use it as-is with a shapefile as the source DS (for which OGR has
> generated an FID), it will copy and create a new layer, but it will
> only insert the first feature and then die with an error saying I need
> to manually set the FID to -1. But I can't do that with CopyLayer(),
> because CopyLayer() automatically pulls an FID into the destination
> feature if one exists in the source DS in each CreateFeature iteration
> (line 318).

Yes, but that doesn't cause a problem for me when I test. Not sure why you get 
this error. If you create a new layer you should manage to create features 
with arbitrary FID. Can you set CPL_DEBUG=ON as a environement variable and 
retry ?

> The other thing I've done with mine that's different from
> CopyLayer()'s logic is I set the geometry to wkbUnknown -- I've
> encountered errors with PostGIS in cases where the first feature being
> copied is a wkbPolygon and the second feature is a wkbMultiPolygon,
> for example.

Ah yes, CopyLayer() cannot deal with that. It is just for the basic cases.

> 
> The C++ for the CopyLayer() method is here in the DataSource class
> source:
> http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/gener
> ic/ogrdatasource.cpp

Yes I know, thanks ;-)

> 
> Here's the function I've written (working code snippet incorporating
> some of your suggestions from earlier and follows pretty much the same
> path as the C++) -- it's just a shorthand "import-a-shapefile" wrapper
> in python for a fairly easy task in OGR2OGR that I find myself doing
> often enough in python. It's a bit clunky, but has worked in all
> encountered use cases thus far:

You could also use 
http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/swig/python/samples/ogr2ogr.py 
or adapt it to your needs

From jrepetto at free.fr  Wed Jul  6 16:16:25 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jul  6 19:29:58 2011
Subject: [gdal-dev] [gdal-java-1.8.0]TransformPoint() - different values
	for same inputs, why?
In-Reply-To: <1309981422730-6555787.post@n2.nabble.com>
References: <1309981422730-6555787.post@n2.nabble.com>
Message-ID: <4E14C299.3020706@free.fr>

On 07/06/11 21:43, mett wrote:
> Hello everybody,
> I'm using GDAL 1.8.0 with Java, and I do not why but I got different results
> with TransformPoint with same inputs. Maybe I'm wrong, anyway see this:
>
> Upper Left = (/258321.25943477/, 655225.28062628)
> Abs: *-24.39163021771631*, 66.2996405709653
>
> Lower Left = (/258321.25943477/, 574605.28062628)
> Abs: *-24.24282066963955*, 65.5792295908428
>
> Upper Right = (/339151.25943477,/ 655225.28062628)
> Abs: *-22.593238696114604*, 66.35110363848813
>
> Lower Right = (/339151.25943477,/ 574605.28062628)
> Abs: *-22.493807890469444*, 65.62928831950212
>
> Those are the corners of my image, and as you can see when I try to convert
> with TransformPoint(X,Y), I got different value for example with static X
> and variable X.
>


Hi,
All your inputs are different, so it is normal that you get different 
results.
Jean-Claude
From mettbest at gmail.com  Wed Jul  6 16:26:46 2011
From: mettbest at gmail.com (mett)
Date: Wed Jul  6 19:40:47 2011
Subject: [gdal-dev] Re: [gdal-java-1.8.0]TransformPoint() - different values
 for same inputs, why?
In-Reply-To: <4E14C299.3020706@free.fr>
References: <1309981422730-6555787.post@n2.nabble.com>
	<4E14C299.3020706@free.fr>
Message-ID: <1309984006800-6555890.post@n2.nabble.com>

Hello,
thank you very much for your reply. For example:
Upper Left = (*258321.25943477*, 655225.28062628) 
Lower Left = (*258321.25943477*, 574605.28062628) 
here the X value is the same (258321.25943477), so, I would aspect that also
the conversion is the same related to the X value (in fact is a rectangular
image). But I got different value:
Abs: *24.39163021771631*, 66.2996405709653
Abs: *24.24282066963955*, 65.5792295908428

As you can see, I got 24.3916 in the first case and 24.242 in the second
case. Why?!

Thank you again,
Mattia

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-java-1-8-0-TransformPoint-different-values-for-same-inputs-why-tp6555787p6555890.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Jul  6 16:43:31 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jul  6 19:58:29 2011
Subject: [gdal-dev] Re: [gdal-java-1.8.0]TransformPoint() - different
	values for same inputs, why?
In-Reply-To: <1309984006800-6555890.post@n2.nabble.com>
References: <1309981422730-6555787.post@n2.nabble.com>	<4E14C299.3020706@free.fr>
	<1309984006800-6555890.post@n2.nabble.com>
Message-ID: <4E14C8F3.9090100@free.fr>

On 07/06/11 22:26, mett wrote:
> Hello,
> thank you very much for your reply. For example:
> Upper Left = (*258321.25943477*, 655225.28062628)
> Lower Left = (*258321.25943477*, 574605.28062628)
> here the X value is the same (258321.25943477), so, I would aspect that also
> the conversion is the same related to the X value (in fact is a rectangular
> image). But I got different value:
> Abs: *24.39163021771631*, 66.2996405709653
> Abs: *24.24282066963955*, 65.5792295908428
>
> As you can see, I got 24.3916 in the first case and 24.242 in the second
> case. Why?!
>

Probably because your projection is not cylindrical. What projection are 
you using ?

Jean-Claude
From sylvain_duclos at yahoo.com  Wed Jul  6 16:50:14 2011
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Jul  6 20:07:26 2011
Subject: [gdal-dev] Frank going to Google and it is not mentionned once on
	the list!
Message-ID: <1309985414.11445.YahooMailRC@web110811.mail.gq1.yahoo.com>

A quick search for "frank warmerdam google" on Google return 53,200 results

The same search on Bing return 16,400 results
But then Bing tell us that "Related Search: .. Frank Sinatra, .. Frank Zappa, .. 
Anna Frank"

Some guys at Google are going to have a chuckle

Congrat!


Sylvain.
From mettbest at gmail.com  Wed Jul  6 16:54:27 2011
From: mettbest at gmail.com (mett)
Date: Wed Jul  6 20:09:58 2011
Subject: [gdal-dev] Re: [gdal-java-1.8.0]TransformPoint() - different values
 for same inputs, why?
In-Reply-To: <4E14C8F3.9090100@free.fr>
References: <1309981422730-6555787.post@n2.nabble.com>
	<4E14C299.3020706@free.fr>
	<1309984006800-6555890.post@n2.nabble.com>
	<4E14C8F3.9090100@free.fr>
Message-ID: <1309985667813-6555969.post@n2.nabble.com>


Jean-Claude Repetto wrote:
> 
> Probably because your projection is not cylindrical. What projection are 
> you using ?
> Jean-Claude
> 
> The projection is
> `PROJCS["User-Defined WGS84/Lambert Conformal Conic (IS.)",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",64.25],PARAMETER["standard_parallel_2",65.75],PARAMETER["latitude_of_origin",65],PARAMETER["central_meridian",-19],PARAMETER["false_easting",500000],PARAMETER["false_northing",500000],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]'
> 
> I did the follow step:
> - Got the Upper Left corner of the image with
> GetGeoTransform(adfGeoTransform)
> - Found out the others corners in this way:
> double miny = adfGeoTransform[3] + width*adfGeoTransform[4] +
> height*adfGeoTransform[5];
> double maxx = adfGeoTransform[0] + width*adfGeoTransform[1] +
> height*adfGeoTransform[2];
> - Convert all these 4 points related to the corners with TransformPoint();
> 
> So, what should I do to have correct values from the conversion? I cannot
> find a good solution.
> 
> Thank you very much for any help,
> Matt
> 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-java-1-8-0-TransformPoint-different-values-for-same-inputs-why-tp6555787p6555969.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Jul  6 17:12:41 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Wed Jul  6 20:29:23 2011
Subject: [gdal-dev] Re: [gdal-java-1.8.0]TransformPoint() - different
	values for same inputs, why?
In-Reply-To: <1309985667813-6555969.post@n2.nabble.com>
References: <1309981422730-6555787.post@n2.nabble.com>	<4E14C299.3020706@free.fr>	<1309984006800-6555890.post@n2.nabble.com>	<4E14C8F3.9090100@free.fr>
	<1309985667813-6555969.post@n2.nabble.com>
Message-ID: <4E14CFC9.3020409@free.fr>

On 07/06/11 22:54, mett wrote:
>
> Jean-Claude Repetto wrote:
>>
>> Probably because your projection is not cylindrical. What projection are
>> you using ?
>>
>> The projection is
>> `PROJCS["User-Defined WGS84/Lambert Conformal Conic (IS.)",GEOGCS["WGS
>> 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]],PROJECTION["Lambert_Conformal_Conic_2SP"],PARAMETER["standard_parallel_1",64.25],PARAMETER["standard_parallel_2",65.75],PARAMETER["latitude_of_origin",65],PARAMETER["central_meridian",-19],PARAMETER["false_easting",500000],PARAMETER["false_northing",500000],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]'
>>
>> I did the follow step:
>> - Got the Upper Left corner of the image with
>> GetGeoTransform(adfGeoTransform)
>> - Found out the others corners in this way:
>> double miny = adfGeoTransform[3] + width*adfGeoTransform[4] +
>> height*adfGeoTransform[5];
>> double maxx = adfGeoTransform[0] + width*adfGeoTransform[1] +
>> height*adfGeoTransform[2];
>> - Convert all these 4 points related to the corners with TransformPoint();
>>
>> So, what should I do to have correct values from the conversion? I cannot
>> find a good solution.
>>

I think your results are correct, because PROJ.4 gives exactly the same 
ones :

proj -I -f "%.12f" +proj=lcc +lat_1=64.25 +lat_2=65.75 +lat_0=65 
+lon_0=-19 +x_0=500000 +y_0=500000 +datum=WGS84 +units=m +no_defs
258321.25943477 655225.28062628
-24.391630217716	66.299640570965
258321.25943477 574605.28062628
-24.242820669640	65.579229590843

Jean-Claude
From dcole at integrity-apps.com  Wed Jul  6 17:18:21 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jul  6 20:35:22 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF069A@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF0627@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF0641@CHUNEX01.integrity-apps.com>, 
	<201107061920.16393.even.rouault@mines-paris.org>,
	<8406B84EA8899042A8508D858843972903BF069A@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903BF074F@CHUNEX01.integrity-apps.com>

I have noticed that when attempting to do this, I am able to do a gdalinfo on the source and destination files (even if the destination file is not complete, it seems the header gets created, and gdalinfo recognizes teh file).

Is it possible that this is taking so long because my destination file has no geocoords or projection information? It seems like createcopy is not replicating all of the variables in the original and I am having to manually set some things, such as Block size, ABPP, etc etc. And the coordinates and projection information is blank in the new file. Is there perhaps some calculations being done to correct that issue, and thats why the copy is taking forever? I thought based on the documentation CreateCopy() would clone the file's raster, as well as size, type, projection, geotransform, etc, but all of this is not showing up in the partially created file at least.

Derek
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Wednesday, July 06, 2011 3:04 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Creating modified copies of a file

Well, my plan originally was to create a Virtual Data set in memory, so that I could just write to the blocks while in memory before writing to disk. It seems like I may be just as well off to go ahead and create the copy, and then just overwrite the block in the copy.

I have tried to switch this back to a NITF driver instead of VRT.
 Do you see anything wrong with this:

    poDataset = (GDALDataset *) GDALOpenShared( myfile, GA_ReadOnly );

    poNITFDriver = (GDALDriver *)GDALGetDriverByName("NITF");
    GDALSetCacheMax(300);
    papszMetadata = poNITFDriver->GetMetadata();

    if( poNITFDriver == NULL )
        exit( 1 );

    char *message = "Copying Current File";
    char **papszOptions = NULL;

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
    poNITFDS = poNITFDriver->CreateCopy(pszDstFilename, poDataset, FALSE,  papszOptions, MyTextProgress, message);


As you can see, this would copy from  NITF to NITF, and use the same block size as my original NITF (1024^2), as well as setting the cache to 300 MB. This was something I read in an old thread you had posted to. I dont see any noticable improvement. Is 300MB enough? How is that calculated exactly?  According to that thread, it was image width * block height * 2*sizeof(unit16)

here is from the gdal info of my source file:

Size is 37504, 109324
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Gray

so it should be ~290MB right? I think uint16 is 4 bytes.

This is still taking hours to copy.

Thanks

Derek
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Wednesday, July 06, 2011 1:20 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le mercredi 06 juillet 2011 18:50:56, Cole, Derek a ?crit :
> Sorry to follow up so soon. I also tried what is  int he API, using the
> following:
>
>     char **papszOptions = NULL;
>
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
>
>
>        poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,
> papszOptions, MyTextProgress, message);

Yes that's better. The option array need to be NULL terminated, what
CSLSetNameValue() does (otherwise you could get nasty crashes). However, the
BLOCKXSIZE and BLOCKYSIZE options are options of the NITF driver, not the VRT
driver. Not sure why you are using VRT, I thought you wanted NITF, but I
haven't followed closely the whole thread

>
> It seems to have no affect. Is it being passed properly?
>
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Wednesday, July
> 06, 2011 12:39 PM
> To: Even Rouault; gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
>
> What is the proper way to set those creation options?
>
> I have tried the following:
>
>        char* papszOptions[] = { "BLOCKXSIZE=1024", "BLOCKYSIZE=1024" };
>        poVRTDS = poVRTDriver->CreateCopy( "", poDataset, FALSE,
> papszOptions, MyTextProgress, message); poBand =
> poVRTDS->GetRasterBand(1);
>        CPLAssert( poBand->GetRasterDataType() == GDT_Byte );
>        poBand->GetBlockSize( &nXBlockSize, &nYBlockSize );
>
> the block size variables are both still set to 128 instead of 1024, which
> is the block size of my input file.
>
>
> Thanks
>
> Derek
>
>
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Tuesday, July 05, 2011 6:38 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le mercredi 06 juillet 2011 00:26:06, Cole, Derek a ?crit :
> > Just as an interesting side-note: I tried to do a CreateCopy on one of
> > these files that was 7GB. Using CreateCopy() it took almost 2 hours. When
> > I simply copied to file contents using a cp command (this is CentOS), the
> > copy takes about a minute. I am not sure why that is so terribly slow in
> > GDAL.
>
> This is very well possible if the block dimensions of the source and target
> are not compatible. You might want to play with the BLOCKXSIZE and
> BLOCKYSIZE creation options.
>
> Anyway, you cannot simply compare cp and CreateCopy(). CreateCopy() can do
> much smarter things than just cp...
>
> > Also, I experimented trying to insert a band into an already existing
> > NITF file, but the software spits back an error message that the format
> > does not support it.
>
> Yes very few formats can support AddBand().
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Wed Jul  6 17:32:15 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  6 20:49:44 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903BF074F@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF069A@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF074F@CHUNEX01.integrity-apps.com>
Message-ID: <201107062332.16069.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> I have noticed that when attempting to do this, I am able to do a gdalinfo
> on the source and destination files (even if the destination file is not
> complete, it seems the header gets created, and gdalinfo recognizes teh
> file).
> 
> Is it possible that this is taking so long because my destination file has
> no geocoords or projection information? It seems like createcopy is not
> replicating all of the variables in the original and I am having to
> manually set some things, such as Block size, ABPP, etc etc. 

This is expected. When doing CreateCopy() the target driver has no idea what 
the source driver is, so he will not recognize ABPP. As far as block sizes are 
concerned, it is up to the user to decide if he wants to keep or change the 
block dimension of the source dataset.

I'm a bit surprised that CreateCopy() is *that* much slower than cp, but it is 
hard to know why without a hard work of profiling. It might be related to pixel 
or band interleaving, etc... There might cache trashing. You could perhaps run 
with CPL_DEBUG=ON and see if interesting info comes up.

> And the
> coordinates and projection information is blank in the new file. Is there
> perhaps some calculations being done to correct that issue, and thats why
> the copy is taking forever? 

No, not related at all.

> I thought based on the documentation
> CreateCopy() would clone the file's raster, as well as size, type,
> projection, geotransform, etc, but all of this is not showing up in the
> partially created file at least.

You cannot reliably trust gdalinfo on a file still being written. Depending on 
the driver some information might just be written at the end of the process. A 
quick look at the CreateCopy() implementation of the NITF driver suggests that 
this is indeed the case since the geotransform is set after the imagery.
From mettbest at gmail.com  Wed Jul  6 17:35:06 2011
From: mettbest at gmail.com (mett)
Date: Wed Jul  6 20:52:58 2011
Subject: [gdal-dev] Re: [gdal-java-1.8.0]TransformPoint() - different values
 for same inputs, why?
In-Reply-To: <4E14CFC9.3020409@free.fr>
References: <1309981422730-6555787.post@n2.nabble.com>
	<4E14C299.3020706@free.fr>
	<1309984006800-6555890.post@n2.nabble.com>
	<4E14C8F3.9090100@free.fr>
	<1309985667813-6555969.post@n2.nabble.com>
	<4E14CFC9.3020409@free.fr>
Message-ID: <1309988106062-6556106.post@n2.nabble.com>


Jean-Claude Repetto wrote:
> 
> On 07/06/11 22:54, mett wrote:
> 
> I think your results are correct, because PROJ.4 gives exactly the same 
> ones :
> 
> proj -I -f "%.12f" +proj=lcc +lat_1=64.25 +lat_2=65.75 +lat_0=65 
> +lon_0=-19 +x_0=500000 +y_0=500000 +datum=WGS84 +units=m +no_defs
> 258321.25943477 655225.28062628
> -24.391630217716	66.299640570965
> 258321.25943477 574605.28062628
> -24.242820669640	65.579229590843
> 
> Jean-Claude
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

Thank you again.
Just to close definitely this discussion, do you think the following steps
are correct in this case? 
- Got the Upper Left corner of the image with
GetGeoTransform(adfGeoTransform) 
- Found out the others corners in this way: 
double miny = adfGeoTransform[3] + width*adfGeoTransform[4] +
height*adfGeoTransform[5]; 
double maxx = adfGeoTransform[0] + width*adfGeoTransform[1] +
height*adfGeoTransform[2]; 
- Convert all these 4 points related to the corners with TransformPoint(); 

Especially the point where I found the other corners, by moving in the
raster space.

Thank you,
have a nice day
MATT


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-java-1-8-0-TransformPoint-different-values-for-same-inputs-why-tp6555787p6556106.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From luke.peterson at gmail.com  Wed Jul  6 17:36:52 2011
From: luke.peterson at gmail.com (Luke Peterson)
Date: Wed Jul  6 20:54:50 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <201107062156.57127.even.rouault@mines-paris.org>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
	<201107062047.57744.even.rouault@mines-paris.org>
	<CAOgDAsWE5WXbVjUxguk-p1xYbgUWtJh4YNN7Hk01wgMFet_tEQ@mail.gmail.com>
	<201107062156.57127.even.rouault@mines-paris.org>
Message-ID: <CAOgDAsWjByWgtS=+T+COjMXoUMcsCj4Fv8dhSYY6pp=QmH=Dbw@mail.gmail.com>

On Wed, Jul 6, 2011 at 3:56 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le mercredi 06 juillet 2011 21:46:58, Luke Peterson a ?crit :

>> What CopyLayer() is supposed to do (and the code I've written does) is
>> create a new layer based on an existing layer, copies a field set from
>> the source layer, then iterates through each of the features in the
>> source layer, creating a copy in the new layer. The problem is, if I
>> use it as-is with a shapefile as the source DS (for which OGR has
>> generated an FID), it will copy and create a new layer, but it will
>> only insert the first feature and then die with an error saying I need
>> to manually set the FID to -1. But I can't do that with CopyLayer(),
>> because CopyLayer() automatically pulls an FID into the destination
>> feature if one exists in the source DS in each CreateFeature iteration
>> (line 318).
>
> Yes, but that doesn't cause a problem for me when I test. Not sure why you get
> this error. If you create a new layer you should manage to create features
> with arbitrary FID. Can you set CPL_DEBUG=ON as a environement variable and
> retry ?

OK, here goes. Running with the following code:

from osgeo import ogr
from osgeo import gdal
gdal.SetConfigOption('CPL_DEBUG','ON')

def testLoad(serverDS, table, sourceFile):
    ogr.RegisterAll()
    shapeDS = ogr.Open(sourceFile)
    sourceLayer = shapeDS.GetLayerByIndex(0)
    options = []
    name = serverDS.CopyLayer(sourceLayer,table,options).GetName()
    return name

if __name__ == '__main__':
    serverName = 'localhost'
    database = 'database'
    port = '5432'
    usr = 'usr'
    pw = 'pw'
    table = 'temp_block'
    connectionString = "PG:dbname='%s' host='%s' port='%s' user='%s'
password='%s'" % (database,serverName,port,usr,pw)
    ogrds = ogr.Open(connectionString)
    name = testLoad(ogrds,table,'../files/testBlock/tl_2010_01001_tabblock10.shp')
#    ogrds.DeleteLayer(table)

    pass

(The referenced shapefile is available here:
ftp://ftp2.census.gov/geo/tiger/TIGER2010/TABBLOCK/2010/tl_2010_01001_tabblock10.zip)

Here's what pops up in the console:

PG: DBName="'blockAssignment'"
PG: PostgreSQL version string : 'PostgreSQL 8.3.15, compiled by Visual
C++ build 1400'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
OGR: OGROpen(PG:dbname='database' host='localhost' port='5432'
user='usr' password='pw') succeeded as PostgreSQL.
OGR: OGROpen(../files/testBlock/tl_2010_01001_tabblock10.shp/00C76F80)
succeeded as ESRI Shapefile.
OGR_PG_NOTICE: NOTICE:  CREATE TABLE will create implicit sequence
"temp_block_ogc_fid_seq" for serial column "temp_block.ogc_fid"

OGR_PG_NOTICE: NOTICE:  CREATE TABLE / PRIMARY KEY will create
implicit index "temp_block_pk" for table "temp_block"

PG: Primary key name (FID): ogc_fid
PG: Using column 'ogc_fid' as FID for table 'temp_block'
PG: Layer 'temp_block' geometry type: POLYGON:Polygon, Dim=2
PG: LaunderName('STATEFP10') -> 'statefp10'
PG: LaunderName('COUNTYFP10') -> 'countyfp10'
PG: LaunderName('TRACTCE10') -> 'tractce10'
PG: LaunderName('BLOCKCE10') -> 'blockce10'
PG: LaunderName('GEOID10') -> 'geoid10'
PG: LaunderName('NAME10') -> 'name10'
PG: LaunderName('MTFCC10') -> 'mtfcc10'
PG: LaunderName('UR10') -> 'ur10'
PG: LaunderName('UACE10') -> 'uace10'
PG: LaunderName('FUNCSTAT10') -> 'funcstat10'
PG: LaunderName('ALAND10') -> 'aland10'
PG: LaunderName('AWATER10') -> 'awater10'
PG: LaunderName('INTPTLAT10') -> 'intptlat10'
PG: LaunderName('INTPTLON10') -> 'intptlon10'
Warning 1: Geometry to be inserted is of type Multi Polygon, whereas
the layer geometry type is Polygon.
Insertion is likely to fail
ERROR 1: INSERT command for new feature failed.
ERROR:  new row for relation "temp_block" violates check constraint
"enforce_geotype_wkb_geometry"

Command: INSERT INTO "temp_block" ("wkb_geometry" , "ogc_fid" ,
"statefp10", "countyfp10", "tractce10", "blockce10", "geoid10",
"name10", "mtfcc10", "funcstat10", "aland10", "awater10",
"intptlat10", "intptlon10") VALUES
(GeomFromEWKT('SRID=4269;MULTIPOLYGON (((-86.91814
32.652694,-86.918165 32.652683,-86.918262 32.652689,-86.918301
32.652721,-86.918313 32.652814,-86.918228 32.653013,-86.918059
32.653526,-86.918009 32.653702,-86.917937 32.653723,-86.917782
32.653574,-86.917721 32.65343,-86.917723 32.653211,-86.91782
32.653091,-86.91791 32.652849,-86.918008 32.652755,-86.91814
32.652694)),((-86.911588 32.630683,-86.911684 32.630727,-86.91177
32.630947,-86.911788 32.631183,-86.911764 32.631332,-86.911615
32.631276,-86.911483 32.631127,-86.911164 32.630722,-86.911165
32.630612,-86.91123 32.63056,-86.911444 32.630616,-86.911588
32.630683)))'::TEXT) , 1231 , '01', '001', '021000', '1036',
'010010210001036', 'Block 1036', 'G5040', 'S',           6326,
     0, '+32.6529996', '-086.9180901')
Warning 1: You've inserted feature with an already set FID and that's
perhaps the reason for the failure. If so, this can happen if you
reuse the same feature object for sequential insertions. Indeed, since
GDAL 1.8.0, the FID of an inserted feature is got from the server, so
it is not a good ideato reuse it afterwards... All in all, try
unsetting the FID with SetFID(-1) before calling CreateFeature()
PG: SoftRollback() with no transaction active.
OGR: ReleaseDataSource(../files/testBlock/tl_2010_01001_tabblock10.shp/00C76F80)
on unshared datasource!
Deleting directly.
Shape: 1280 features read on layer 'tl_2010_01001_tabblock10'.
OGR: ReleaseDataSource(PG:dbname='database' host='localhost'
port='5432' user='usr' password='pw') on unshared datasource!
Deleting directly.

Now, what I am left with is an incomplete table -- 1887 input features
but only 1231 rows on the server. If I use this code instead for the
function and leave everything else:

def testLoad(serverDS, table, sourceFile):
    ogr.RegisterAll()
    shapeDS = ogr.Open(sourceFile)
    sourceLayer = shapeDS.GetLayerByIndex(0)
    options = []
    newLayer = serverDS.CreateLayer(table,sourceLayer.GetSpatialRef(),ogr.wkbUnknown,options)
    for x in xrange(sourceLayer.GetLayerDefn().GetFieldCount()):
        newLayer.CreateField(sourceLayer.GetLayerDefn().GetFieldDefn(x))

    newLayer.StartTransaction()
    for x in xrange(sourceLayer.GetFeatureCount()):
        newFeature = sourceLayer.GetNextFeature()
        newFeature.SetFID(-1)
        newLayer.CreateFeature(newFeature)
        if x % 128 == 0:
            newLayer.CommitTransaction()
            newLayer.StartTransaction()
    newLayer.CommitTransaction()
    return newLayer.GetName()

I get the following at the console, and all 1887 features loaded on
the server successfully:

PG: DBName="'database'"
PG: PostgreSQL version string : 'PostgreSQL 8.3.15, compiled by Visual
C++ build 1400'
PG: PostGIS version string : '1.5 USE_GEOS=1 USE_PROJ=1 USE_STATS=1'
OGR: OGROpen(PG:dbname='database' host='localhost' port='5432'
user='usr' password='pw') succeeded as PostgreSQL.
OGR: OGROpen(../files/testBlock/tl_2010_01001_tabblock10.shp/00BBFCF0)
succeeded as ESRI Shapefile.
OGR_PG_NOTICE: NOTICE:  CREATE TABLE will create implicit sequence
"temp_block_ogc_fid_seq" for serial column "temp_block.ogc_fid"

OGR_PG_NOTICE: NOTICE:  CREATE TABLE / PRIMARY KEY will create
implicit index "temp_block_pk" for table "temp_block"

PG: Primary key name (FID): ogc_fid
PG: Using column 'ogc_fid' as FID for table 'temp_block'
PG: Layer 'temp_block' geometry type: GEOMETRY:Unknown (any), Dim=2
PG: LaunderName('STATEFP10') -> 'statefp10'
PG: LaunderName('COUNTYFP10') -> 'countyfp10'
PG: LaunderName('TRACTCE10') -> 'tractce10'
PG: LaunderName('BLOCKCE10') -> 'blockce10'
PG: LaunderName('GEOID10') -> 'geoid10'
PG: LaunderName('NAME10') -> 'name10'
PG: LaunderName('MTFCC10') -> 'mtfcc10'
PG: LaunderName('UR10') -> 'ur10'
PG: LaunderName('UACE10') -> 'uace10'
PG: LaunderName('FUNCSTAT10') -> 'funcstat10'
PG: LaunderName('ALAND10') -> 'aland10'
PG: LaunderName('AWATER10') -> 'awater10'
PG: LaunderName('INTPTLAT10') -> 'intptlat10'
PG: LaunderName('INTPTLON10') -> 'intptlon10'
OGR: ReleaseDataSource(../files/testBlock/tl_2010_01001_tabblock10.shp/00BBFCF0)
on unshared datasource!
Deleting directly.
Shape: 1887 features read on layer 'tl_2010_01001_tabblock10'.
OGR: ReleaseDataSource(PG:dbname='database' host='localhost'
port='5432' user='usr' password='pw') on unshared datasource!
Deleting directly.


-----
Luke Peterson
From even.rouault at mines-paris.org  Wed Jul  6 17:51:50 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul  6 21:10:15 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <CAOgDAsWjByWgtS=+T+COjMXoUMcsCj4Fv8dhSYY6pp=QmH=Dbw@mail.gmail.com>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
	<201107062156.57127.even.rouault@mines-paris.org>
	<CAOgDAsWjByWgtS=+T+COjMXoUMcsCj4Fv8dhSYY6pp=QmH=Dbw@mail.gmail.com>
Message-ID: <201107062351.50454.even.rouault@mines-paris.org>

Le mercredi 06 juillet 2011 23:36:52, Luke Peterson a ?crit :
> On Wed, Jul 6, 2011 at 3:56 PM, Even Rouault

ok, with the help of the traces, this makes sense now. The real issue is that 
the warning and error :

> Warning 1: Geometry to be inserted is of type Multi Polygon, whereas
> the layer geometry type is Polygon.
> Insertion is likely to fail
> ERROR 1: INSERT command for new feature failed.
> ERROR:  new row for relation "temp_block" violates check constraint
> "enforce_geotype_wkb_geometry"

Always look at the errors that appear first. They are generally the most 
significant ones. The error message you see later about the fid is just a guess, 
that is actually wrong in your case. There's no issue about FIDs in your case. 
It is just that CreateLayer() will declare the geometry as being Polygon, but 
insert MultiPolygon sometimes. That's one of the caveats with the shapefile 
format/driver that will report a layer as being of type wkbPolygon but can 
return geometries that might actually be POLYGON or MULTIPOLYGON.

Clearly, CreateLayer() is a simplistic implementation that doesn't have all 
the subtelties and options of ogr2ogr... With ogr2ogr, you would typically 
workaround this by using the -nlt MULTIPOLYGON option that would convert 
polygons to multipolygons before passing them to the PG driver.

You can as well change your code to declare the layer as of type 
ogr.wkbMultiPolygon and use :

geom = newFeature.StealGeometry()
newFeature.SetGeometry(ogr.ForceToMultiPolygon(geom))
From chaitanya.ch at gmail.com  Wed Jul  6 18:45:54 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  6 22:07:24 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
Message-ID: <CAMKgpOaCgYpBt3U5kROu8vqbw+ZbdB2ycJ8EgqPdiRbd1FD_yA@mail.gmail.com>

Luke,

Please check if there are features with duplicate FIDs in the MSSQL
datasource. The 'uniqueness' of the FIDs is not checked throughly in OGR.
Some may slip through.

Resetting the FIDs is not always desirable. Some applications might need to
retain the old FIDs.
However, having an option to reset them could be useful in some cases. I am
not sure if doing this in OGRDataSource::CopyLayer() is appropriate.

On Wed, Jul 6, 2011 at 8:41 PM, Luke Peterson <luke.peterson@gmail.com>wrote:

>
> I'm reviving a nearly-year-old thread here, sort of. I'm trying to
> create cross-compatibility between MSSQL and PostGIS on some OGR-based
> code I wrote in Python for the MSSQL environment: I had been running
> into issues simply creating layers with OGR -- would run something
> like this:
>
> name =
> serverDS.CopyLayer(shapeDS.GetLayerByIndex(0),table,options).GetName()
>
> with serverDS being an open OGR datastore (destination) and shapeDS
> being an opened Shapefile (with an OGR-imposed FID).
>
> This code works fine when serverDS is a MSSQLSpatial driver, but I get
> hit with the following error when I run with a PostgresSQL driver:
>
> "You've inserted feature with an already set FID and that's perhaps
> the reason for the failure. If so, this can happen if you reuse the
> same feature object for sequential insertions. Indeed, since GDAL
> 1.8.0, the FID of an inserted feature is got from the server, so it is
> not a good ideato reuse it afterwards... All in all, try unsetting the
> FID with SetFID(-1) before calling CreateFeature()"
>
> OK, clear enough. I took a look at the DataStore code here and here:
>
>
> http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/pg/ogrpgdatasource.cpp
>
>
> http://trac.osgeo.org/gdal/browser/branches/1.8/gdal/ogr/ogrsf_frmts/generic/ogrdatasource.cpp
>
> I noticed that the PG driver has no PG-native code for CopyLayer() at
> all; the generic driver's CopyLayer() function doesn't set a null FID
> for CreateFeature(). So, it seems CopyLayer() is useless for PostGIS
> in my situation.
>
> The code I'm going with right now uses CopyLayer() out of the box
> except if serverDS.GetDriver().GetName() == 'PostgreSQL', in which
> case I'm re-implementing most of the logic from CopyLayer() in Python
> except adding a SetFID(-1) call:
>
>        newLayer =
>
> serverDS.CreateLayer(table,shapeDS.GetLayerByIndex(0).GetSpatialRef(),ogr.wkbUnknown,options)
>        for x in
> xrange(shapeDS.GetLayerByIndex(0).GetLayerDefn().GetFieldCount()):
>
>  newLayer.CreateField(shapeDS.GetLayerByIndex(0).GetLayerDefn().GetFieldDefn(x))
>
>        newLayer.StartTransaction()
>        for x in xrange(shapeDS.GetLayerByIndex(0).GetFeatureCount()):
>            newFeature = shapeDS.GetLayerByIndex(0).GetFeature(x)
>            newFeature.SetFID(-1)
>            newLayer.CreateFeature(newFeature)
>            if x % 128 == 0:
>                newLayer.CommitTransaction()
>                newLayer.StartTransaction()
>        newLayer.CommitTransaction()
>
> So I guess my question is whether I'm missing something, or whether I
> should submit a bug report or feature request on the PG driver to
> create a parallel implementation for CopyLayer() that either natively
> incorporates the SetFID(-1) or that takes an option that could trigger
> that behavior. Seems a shame this function exists but doesn't work
> under certain circumstances (again -- maybe I'm missing something?)
>
> Regards,
> Luke
>
> --
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/7fc4a2d5/attachment.html
From mcorey at cironline.org  Wed Jul  6 18:58:17 2011
From: mcorey at cironline.org (Michael Corey)
Date: Wed Jul  6 22:20:31 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
Message-ID: <4E14E889.3080000@cironline.org>

Hi all:

I'm using a shapefile as a clipping mask to cut out the shoreline from 
some DOQ files that I have merged together. But when I do the clipping 
step, I end up with unwanted semitransparency in the non-clipped areas.

I'm pretty sure the problem is only with my gdalwarp step at the end.

Here's my process:

gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file file 
file file

gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif 
diablo-combined-center-utm10-70pct.tif

ogrinfo -al ./diablo_canyon_detail_clipper.shp
//Extent: (XXXX, YYYY) - (XXXX, YYYY)

gdal_translate -projwin XXXX YYYY XXXX YYYY 
diablo-combined-center-utm10-70pct.tif 
diablo-combined-center-utm10-70pct-box.tif

gdalwarp -co COMPRESS=DEFLATE -cutline 
./diablo_canyon_detail_clipper.shp 
diablo-combined-center-utm10-70pct-box.tif 
diablo-combined-center-utm10-70pct-cutout.tif

Can anyone help?

Thanks!

-- 
Michael Corey

From luke.peterson at gmail.com  Wed Jul  6 19:05:44 2011
From: luke.peterson at gmail.com (Luke Peterson)
Date: Wed Jul  6 22:28:23 2011
Subject: [gdal-dev] Append a shapefile to a postgis table using the
	GDAL/OGR Python interface
In-Reply-To: <201107062351.50454.even.rouault@mines-paris.org>
References: <CAOgDAsUJFYc-eVQvmtXVQ3a8ZL2pch6JcHXwNxz=4Ep6UV7nKw@mail.gmail.com>
	<201107062156.57127.even.rouault@mines-paris.org>
	<CAOgDAsWjByWgtS=+T+COjMXoUMcsCj4Fv8dhSYY6pp=QmH=Dbw@mail.gmail.com>
	<201107062351.50454.even.rouault@mines-paris.org>
Message-ID: <CAOgDAsVefgGSZLELw7tNe9qHMOGio+E4rY8C6ukhcQuNJ-7+nA@mail.gmail.com>

On Wed, Jul 6, 2011 at 5:51 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> It is just that CreateLayer() will declare the geometry as being Polygon,
> but
> insert MultiPolygon sometimes. That's one of the caveats with the shapefile
> format/driver that will report a layer as being of type wkbPolygon but can
> return geometries that might actually be POLYGON or MULTIPOLYGON.
>
> Clearly, CreateLayer() is a simplistic implementation that doesn't have all
> the subtelties and options of ogr2ogr... With ogr2ogr, you would typically
> workaround this by using the -nlt MULTIPOLYGON option that would convert
> polygons to multipolygons before passing them to the PG driver.
>

Well isn't that embarrassing ... this caveat is the third paragraph of the
ESRI shapefile driver page. Thanks for your time, Even.

I'm looking at the shapefile driver now; out of curiosity, is there a
benefit to having SHPT_POLYGON shapefiles return wkbPolygon instead of
wkbMultiPolygon as their GeomType or SHPT_ARC shapefiles return
wkbLineString instead of wkbMultiLineString? Would having the driver return
the "Multi" geometry flavor instead cause a catastrophic failure somewhere?
Or is it a performance issue?

Is there a discussion thread I could read to catch up on this?

-----
Luke Peterson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110706/6c996ec3/attachment.html
From chaitanya.ch at gmail.com  Wed Jul  6 20:01:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul  6 23:26:45 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E14E889.3080000@cironline.org>
References: <4E14E889.3080000@cironline.org>
Message-ID: <CAMKgpOax64yJF7YA9yNB-iAguSEpxGY+EER_nF2Kum1wU8t5-g@mail.gmail.com>

Michael,

Can you provide screenshots of diablo-combined-center-utm10-70pct-box.tif
and diablo-combined-center-utm10-70pct-cutout.tif for comparison?

By the way, you can perform the actions of the two gdal_translate commands
in the first step with the gdal_merge.py script itself unless you want to
use a specific resampling algorithm.

On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey <mcorey@cironline.org> wrote:

> Hi all:
>
> I'm using a shapefile as a clipping mask to cut out the shoreline from some
> DOQ files that I have merged together. But when I do the clipping step, I
> end up with unwanted semitransparency in the non-clipped areas.
>
> I'm pretty sure the problem is only with my gdalwarp step at the end.
>
> Here's my process:
>
> gdal_merge.py -init "255" -o diablo-combined-center-utm10.**tif file file
> file file
>
> gdal_translate -outsize 70% 70% diablo-combined-center-utm10.**tif
> diablo-combined-center-utm10-**70pct.tif
>
> ogrinfo -al ./diablo_canyon_detail_**clipper.shp
> //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>
> gdal_translate -projwin XXXX YYYY XXXX YYYY diablo-combined-center-utm10-*
> *70pct.tif diablo-combined-center-utm10-**70pct-box.tif
>
> gdalwarp -co COMPRESS=DEFLATE -cutline ./diablo_canyon_detail_**clipper.shp
> diablo-combined-center-utm10-**70pct-box.tif diablo-combined-center-utm10-
> **70pct-cutout.tif
>
> Can anyone help?
>
> Thanks!
>
> --
> Michael Corey
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/f9adb85a/attachment.html
From mcorey at cironline.org  Wed Jul  6 20:35:14 2011
From: mcorey at cironline.org (Michael Corey)
Date: Thu Jul  7 00:02:37 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
Message-ID: <4E14FF42.50903@cironline.org>

Sure, I've uploaded samples here.

http://www.mikejcorey.com/spatial/diablo-box-sample.tif
http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif

These are the same as the images created by the process I described (but 
scaled down).

To your point about specifying size in the first step -- will that make 
the process run faster, or does it do the scaling down after it builds 
the full-resolution image?

Also, I notice that my filesize always gets significantly bigger when I 
do the cutout step, which seems counter-intuitive to me since in theory 
shouldn't there be less information present once the cutout is done?

Thanks for your help!

Michael Corey


On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
> Michael,
>
> Can you provide screenshots of 
> diablo-combined-center-utm10-70pct-box.tif and 
> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>
> By the way, you can perform the actions of the two gdal_translate 
> commands in the first step with the gdal_merge.py script itself unless 
> you want to use a specific resampling algorithm.
>
> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey <mcorey@cironline.org 
> <mailto:mcorey@cironline.org>> wrote:
>
>     Hi all:
>
>     I'm using a shapefile as a clipping mask to cut out the shoreline
>     from some DOQ files that I have merged together. But when I do the
>     clipping step, I end up with unwanted semitransparency in the
>     non-clipped areas.
>
>     I'm pretty sure the problem is only with my gdalwarp step at the end.
>
>     Here's my process:
>
>     gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
>     file file file
>
>     gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>     diablo-combined-center-utm10-70pct.tif
>
>     ogrinfo -al ./diablo_canyon_detail_clipper.shp
>     //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>
>     gdal_translate -projwin XXXX YYYY XXXX YYYY
>     diablo-combined-center-utm10-70pct.tif
>     diablo-combined-center-utm10-70pct-box.tif
>
>     gdalwarp -co COMPRESS=DEFLATE -cutline
>     ./diablo_canyon_detail_clipper.shp
>     diablo-combined-center-utm10-70pct-box.tif
>     diablo-combined-center-utm10-70pct-cutout.tif
>
>     Can anyone help?
>
>     Thanks!
>
>     -- 
>     Michael Corey
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110706/9de5ac8b/attachment-0001.html
From warmerdam at pobox.com  Wed Jul  6 22:08:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul  7 01:41:53 2011
Subject: [gdal-dev] Frank going to Google and it is not mentionned once on
	the list!
In-Reply-To: <1309985414.11445.YahooMailRC@web110811.mail.gq1.yahoo.com>
References: <1309985414.11445.YahooMailRC@web110811.mail.gq1.yahoo.com>
Message-ID: <CA+YzLBfcpW+FSf4E-K68ZytCWUqKdSVa9yLDskdqAa9a7RWwig@mail.gmail.com>

Sylvain,

Consider it mentioned now!  I had my first day today (lots to take in).

I discussed this on my blog at:

  http://fwarmerdam.blogspot.com/2011/06/joining-google.html

The short summary is that while I intend to remain active working on GDAL
it won't be as much as before, and I won't be available for paid consulting
on GDAL due to the nature of my US work visa.

Best regards,

On Wed, Jul 6, 2011 at 1:50 PM, s duclos <sylvain_duclos@yahoo.com> wrote:
> A quick search for "frank warmerdam google" on Google return 53,200 results
>
> The same search on Bing return 16,400 results
> But then Bing tell us that "Related Search: .. Frank Sinatra, .. Frank Zappa, ..
> Anna Frank"
>
> Some guys at Google are going to have a chuckle
>
> Congrat!
>
>
> Sylvain.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From warmerdam at pobox.com  Wed Jul  6 23:37:17 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul  7 03:15:22 2011
Subject: [gdal-dev] Motion: Accept GDAL/OGR 1.8.1RC1 as final release
Message-ID: <CA+YzLBcKJfzOQoxJi34dbYssKFYnbMPbbq3UqAaDHaJ2VCPDiQ@mail.gmail.com>

Folks,

Motion: That we accept the GDAL/OGR 1.8.1RC1 package as the
final GDAL/OGR 1.8.1 release.

--

PSC members, please vote after at least some sort of testing.
Non-PSC members please let us know if you discover problems!

--

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From chaitanya.ch at gmail.com  Thu Jul  7 02:45:18 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  7 06:33:33 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E14FF42.50903@cironline.org>
References: <4E14FF42.50903@cironline.org>
Message-ID: <CAMKgpOayTaDxbaNDVdnMEcwPm+Ed6=qRdZoLBA=gmnrd-RwObw@mail.gmail.com>

Michael,

It looks like both the images have the transparency issue.
Please provide the gdalinfo outputs of the rasters.

Specifying the extents in gdal_merge.py will definitely speed things up.

Scaling time has many more variables. It is probably faster in
gdal_translate. Also, gdal_translate also has more options of resampling
methods.

File size not only depends on the information to to stored but also the
encoding. Your original image was compressed more than the output image. If
you want, you can specify the compression creation options to the GDAL
programs. For tiff formats you can see that options at GTiff driver page[1].

[1]: http://www.gdal.org/frmt_gtiff.html

On Thu, Jul 7, 2011 at 6:05 AM, Michael Corey <mcorey@cironline.org> wrote:

> **
> Sure, I've uploaded samples here.
>
> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
>
> These are the same as the images created by the process I described (but
> scaled down).
>
> To your point about specifying size in the first step -- will that make the
> process run faster, or does it do the scaling down after it builds the
> full-resolution image?
>
> Also, I notice that my filesize always gets significantly bigger when I do
> the cutout step, which seems counter-intuitive to me since in theory
> shouldn't there be less information present once the cutout is done?
>
> Thanks for your help!
>
> Michael Corey
>
>
> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
>
> Michael,
>
> Can you provide screenshots of diablo-combined-center-utm10-70pct-box.tif
> and diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>
> By the way, you can perform the actions of the two gdal_translate commands
> in the first step with the gdal_merge.py script itself unless you want to
> use a specific resampling algorithm.
>
> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey <mcorey@cironline.org>wrote:
>
>> Hi all:
>>
>> I'm using a shapefile as a clipping mask to cut out the shoreline from
>> some DOQ files that I have merged together. But when I do the clipping step,
>> I end up with unwanted semitransparency in the non-clipped areas.
>>
>> I'm pretty sure the problem is only with my gdalwarp step at the end.
>>
>> Here's my process:
>>
>> gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file file
>> file file
>>
>> gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>> diablo-combined-center-utm10-70pct.tif
>>
>> ogrinfo -al ./diablo_canyon_detail_clipper.shp
>> //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>>
>> gdal_translate -projwin XXXX YYYY XXXX YYYY
>> diablo-combined-center-utm10-70pct.tif
>> diablo-combined-center-utm10-70pct-box.tif
>>
>> gdalwarp -co COMPRESS=DEFLATE -cutline ./diablo_canyon_detail_clipper.shp
>> diablo-combined-center-utm10-70pct-box.tif
>> diablo-combined-center-utm10-70pct-cutout.tif
>>
>> Can anyone help?
>>
>> Thanks!
>>
>> --
>> Michael Corey
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9494447584
> 17.2416N 80.1426E
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/f470c637/attachment.html
From jiblazquezmozun at gmail.com  Thu Jul  7 05:38:56 2011
From: jiblazquezmozun at gmail.com (jblazquez)
Date: Thu Jul  7 09:36:52 2011
Subject: [gdal-dev] NTv2 geographic transformation
Message-ID: <1310031536695-6557712.post@n2.nabble.com>

Hi
I'm trying to make a transformation between ud50 and etrs98 for some files
shp. This transformation must do it through the grid system (NTv2). To do
this I have the official transformation file
(http://www.ign.es/ign/layoutIn/herramientas.do). I read that 1.8 has a GDAL
driver specific to that transformation. The sample script that exists in the
install package (GDAL-1.8.0 \ swig \ python \ samples \ loslas2ntv2.py) is
valid only for transforming images.
My issue is to know how I can make this transformation vector files

I'm using python 2.7 with GDAL 1.8.

Any help or Ideas would be appreciated




--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/NTv2-geographic-transformation-tp6557712p6557712.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From sylvain.maffren at crige-paca.org  Thu Jul  7 05:39:48 2011
From: sylvain.maffren at crige-paca.org (Sylvain MAFFREN)
Date: Thu Jul  7 09:38:14 2011
Subject: [gdal-dev] Forcing the rounded of coordinates
In-Reply-To: <201106220956.39744.even.rouault@mines-paris.org>
References: <4DFFC05E.3000800@crige-paca.org>
	<201106220956.39744.even.rouault@mines-paris.org>
Message-ID: <4E157EE4.7090705@crige-paca.org>

Hello and thank you for that answer.

I think if it was a rounding effect that appears at display time when 
ogrinfo outputs the WKT representation, I should have the same results 
on several data but this is notthe case.

Indeed,by querying topology between the source layer and output layer 
(checking to see if the two layers overlap perfectly), I didn't have any 
results. That's means that the coordinates of output have been changed 
by ogr2ogr and that's why I think it's not a rounding effect.

It is there a chance that changes be made to add a parameter in ogr2ogr 
in order to force the rounded coordinates with a number of decimal 
defined by user in future versions of gdal / ogr? We would be willing to 
fund this improvement if necessary.

Thank you in advance for your feedback.

Le 22/06/2011 09:56, Even Rouault a ?crit :

This might be just a rounding effect that appears at display time when ogrinfo
outputs the WKT representation, but not affect the output data itself. Likely
993366.00000000058 and 993366 are 2 decimal representations for the same
binary representation. There's no generation option to control the coordinate
precision of the output in ogr2ogr. A few drivers/formats that are text-based
have a layer/dataset creation option to control it, but this is driver/format
dependant. You might want (or not!) to hack into the ugly logic of
OGRFormatDouble() in ogr/ogrutils.cpp that is the main responsible for what
you observe...


> >  Hi !
> >  
> >  I apologize in advance for my english which I not very fluent. I have
> >  some questions about the tool ogr2ogr (and also about gdalwarp and
> >  gdal_translate) and the rounding of coordinates.
> >  
> >  
> >  Let me explain:
> >  
> >  Some databases (particularly IGN -- France databases) have coordinates
> >  rounded to the meter (BD CARTO for example) or the decimeter (BD TOPO
> >  for example).
> >  
> >  I will explain my comment with for bases the coordinates of a point of
> >  BD CARTO to support my comments :
> >  
> >  In an original *.shp in Lambert93 - France, a point has the following
> >  coordinates (provided by ogrinfo):
> >  
> >  X = 993366 m Y = 6304044 m
> >  
> >  We import this in PostGIS with shp2pgsql, and the point has always these
> >  coordinates:
> >  
> >  X = 993366 m Y = 6304044 m
> >  
> >  It's good !
> >  
> >  If we try to export this PostGIS layer through ogr2ogr (in *.shp, *.tab
> >  or *.mif), a ogrinfo gives us the same point of the layer resulting,
> >  with the following coordinates:
> >  
> >  X = and Y = 993366.00000000058 6304043.9999999898)
> >  
> >  This means that ogr2ogr (identical tests performed on a raster layer
> >  bounding box with reprojection (gdalwarp) or without (gdal_translate))
> >  changes the number of decimal coordinates of origin, which can be
> >  annoying in some cases (when we need to recover a given output with the
> >  same number of decimal than in entry.
> >  
> >  I tried to find a setting to force ogr2ogr (or gdal and related
> >  functions) to round the coordinates to a given number of decimal (as can
> >  be done with CS2CS) and I have not found any answer.
> >  
> >  Is it possible to set the number of decimal places in output (and
> >  ideally keep the same as input) ? And if so, how?
> >  
> >  Thank you in advance to all who have good ideas and / or directions to
> >  follow.
> >  
> >  
> >  Sylvain Maffren
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/d1f6f279/attachment-0001.html
From j.l.h.hartmann at uva.nl  Thu Jul  7 05:34:39 2011
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Jul  7 10:33:02 2011
Subject: [gdal-dev] Re: Warping an image with both a geotransform and
	control points
In-Reply-To: <499C2D35.1030400@pobox.com>
References: <498DEABC.2000705@uva.nl> <499559AF.2070506@uva.nl>
	<4995B35D.3010500@geoanalytic.com>
	<200902132002.44935.even.rouault@mines-paris.org>
	<499C1872.501@uva.nl> <499C2D35.1030400@pobox.com>
Message-ID: <4E157DAF.9040308@uva.nl>

Hi all,

This has come up before, but I'm still struggling for an answer. I want 
to rubbersheet an already projected image with control points, so as to 
remove small errors.On a suggestion by Frank 
(http://lists.osgeo.org/pipermail/gdal-dev/2009-February/019775.html) I 
produced a VRT file of the georeferenced image and added control points 
to shift the image 1000m to the right. (see below). However,  GDALWARP 
ignores the control points and returns the original georeferenced image. 
When I remove the georeferencing information, it does use the control 
points, but returns a raw image shifted to the right.

Is it possible to rubbersheet a georeferenced image with control points, 
or am I chasing a red herring?

Thanks,

Jan

<VRTDataset rasterXSize="310" rasterYSize="343">
<SRS>PROJCS[&quot;Amersfoort / RD 
New&quot;,GEOGCS[&quot;Amersfoort&quot;,DATUM[&quot;Amersfoort&quot;,SPHEROID[&quot;Bessel 
1841&quot;,6377397.155,299.1528128000008,AUTHORITY[&quot;EPSG&quot;,&quot;7004&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6289&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4289&quot;]],PROJECTION[&quot;Oblique_Stereographic&quot;],PARAMETER[&quot;latitude_of_origin&quot;,52.15616055555555],PARAMETER[&quot;central_meridian&quot;,5.38763888888889],PARAMETER[&quot;scale_factor&quot;,0.9999079],PARAMETER[&quot;false_easting&quot;,155000],PARAMETER[&quot;false_northing&quot;,463000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;28992&quot;]]</SRS>
<GeoTransform> -8.5000000000000000e+03,  1.0000000000000000e+03,  
0.0000000000000000e+00,  2.8750000000000000e+05,  
0.0000000000000000e+00,  1.0000000000000000e+03</GeoTransform>
<Metadata />
<Metadata domain="IMAGE_STRUCTURE">
<MDI key="INTERLEAVE">BAND</MDI>
</Metadata>
<GCPList>
<GCP Id="" Pixel="0.0000" Line="0.0000" X="1.000000000000E+03" 
Y="0.000000000000E+00" />
<GCP Id="" Pixel="1000.0000" Line="0.0000" X="2.000000000000E+03" 
Y="0.000000000000E+00" />
<GCP Id="" Pixel="1000.0000" Line="1000.0000" X="2.000000000000E+03" 
Y="2.000000000000E+03" />
<GCP Id="" Pixel="0.0000" Line="1000.0000" X="1.000000000000E+03" 
Y="1.000000000000E+03" />
</GCPList>
<VRTRasterBand dataType="Float64" band="1">
<Metadata />
<ColorInterp>Gray</ColorInterp>
<SimpleSource>
<SourceFilename relativeToVRT="1">test.tif</SourceFilename>
<SourceBand>1</SourceBand>
<SourceProperties RasterXSize="310" RasterYSize="343" DataType="Float64" 
BlockXSize="310" BlockYSize="3" />
<SrcRect xOff="0" yOff="0" xSize="310" ySize="343" />
<DstRect xOff="0" yOff="0" xSize="310" ySize="343" />
</SimpleSource>
</VRTRasterBand>
</VRTDataset>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/2792d47c/attachment.html
From even.rouault at mines-paris.org  Thu Jul  7 06:58:52 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul  7 11:01:15 2011
Subject: [gdal-dev] Forcing the rounded of coordinates
In-Reply-To: <4E157EE4.7090705@crige-paca.org>
References: <4DFFC05E.3000800@crige-paca.org>
	<201106220956.39744.even.rouault@mines-paris.org>
	<4E157EE4.7090705@crige-paca.org>
Message-ID: <1310036332.4e15916ca2a7c@webmail.free.fr>

Selon Sylvain MAFFREN <sylvain.maffren@crige-paca.org>:

> Hello and thank you for that answer.
>
> I think if it was a rounding effect that appears at display time when
> ogrinfo outputs the WKT representation, I should have the same results
> on several data but this is notthe case.
>
> Indeed,by querying topology between the source layer and output layer
> (checking to see if the two layers overlap perfectly), I didn't have any
> results. That's means that the coordinates of output have been changed
> by ogr2ogr and that's why I think it's not a rounding effect.

Actually, it might not be a rounding effect at display time. Paul Ramsey
identified that when inserting data into a Postgis instance, we used the WKT
representation, thus introducing rounding problem effects. You might want to
test latest trunk and see if it improves the situation for you. The relevant
ticket is http://trac.osgeo.org/gdal/ticket/4138

So now, there should be no precision loss when moving data from/to
shapefile/postgresql with ogr2ogr.

But if I've well understood your scenario, your issue seems to be more when you
pull data from Postgis.

>
> It is there a chance that changes be made to add a parameter in ogr2ogr
> in order to force the rounded coordinates with a number of decimal
> defined by user in future versions of gdal / ogr? We would be willing to
> fund this improvement if necessary.
>
> Thank you in advance for your feedback.

There is no general solution for avoiding precision loss. For sure, not a
ogr2ogr level, because ogr2ogr doesn't change coordinate precision (no text
conversion, just setting variables of type double). If there are rounding
issues, they must be tracked down at the driver level, and for each driver, it
will depend on the actual direction of the data flow (reading vs writing). A
reproducable example of ogr command lines you use with associated data would be
helpfull to understand what's going on in your case.

Now, if you want to change/force coordinate precision, I can imagine that it
*could* be done at ogr2ogr by converting the source geometry object to WKT with
a given precision and then converted back to a destination geometry object. But
the output driver (at least the text based ones) should have a way to know how
many decimals are expected.

I'd note that currently a few text based drivers (bna, geojson recently) have
specific creation options to control the precision in write mode. AFAIR, there's
also ticket in Trac for the same wish for KML.

>
> Le 22/06/2011 09:56, Even Rouault a ?crit :
>
> This might be just a rounding effect that appears at display time when
> ogrinfo
> outputs the WKT representation, but not affect the output data itself. Likely
> 993366.00000000058 and 993366 are 2 decimal representations for the same
> binary representation. There's no generation option to control the coordinate
> precision of the output in ogr2ogr. A few drivers/formats that are text-based
> have a layer/dataset creation option to control it, but this is driver/format
> dependant. You might want (or not!) to hack into the ugly logic of
> OGRFormatDouble() in ogr/ogrutils.cpp that is the main responsible for what
> you observe...
>
>
> > >  Hi !
> > >
> > >  I apologize in advance for my english which I not very fluent. I have
> > >  some questions about the tool ogr2ogr (and also about gdalwarp and
> > >  gdal_translate) and the rounding of coordinates.
> > >
> > >
> > >  Let me explain:
> > >
> > >  Some databases (particularly IGN -- France databases) have coordinates
> > >  rounded to the meter (BD CARTO for example) or the decimeter (BD TOPO
> > >  for example).
> > >
> > >  I will explain my comment with for bases the coordinates of a point of
> > >  BD CARTO to support my comments :
> > >
> > >  In an original *.shp in Lambert93 - France, a point has the following
> > >  coordinates (provided by ogrinfo):
> > >
> > >  X = 993366 m Y = 6304044 m
> > >
> > >  We import this in PostGIS with shp2pgsql, and the point has always these
> > >  coordinates:
> > >
> > >  X = 993366 m Y = 6304044 m
> > >
> > >  It's good !
> > >
> > >  If we try to export this PostGIS layer through ogr2ogr (in *.shp, *.tab
> > >  or *.mif), a ogrinfo gives us the same point of the layer resulting,
> > >  with the following coordinates:
> > >
> > >  X = and Y = 993366.00000000058 6304043.9999999898)
> > >
> > >  This means that ogr2ogr (identical tests performed on a raster layer
> > >  bounding box with reprojection (gdalwarp) or without (gdal_translate))
> > >  changes the number of decimal coordinates of origin, which can be
> > >  annoying in some cases (when we need to recover a given output with the
> > >  same number of decimal than in entry.
> > >
> > >  I tried to find a setting to force ogr2ogr (or gdal and related
> > >  functions) to round the coordinates to a given number of decimal (as can
> > >  be done with CS2CS) and I have not found any answer.
> > >
> > >  Is it possible to set the number of decimal places in output (and
> > >  ideally keep the same as input) ? And if so, how?
> > >
> > >  Thank you in advance to all who have good ideas and / or directions to
> > >  follow.
> > >
> > >
> > >  Sylvain Maffren
>


From Ralf.Suhr at itc-halle.de  Thu Jul  7 07:02:46 2011
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Thu Jul  7 11:05:57 2011
Subject: [gdal-dev] NTv2 geographic transformation
In-Reply-To: <1310031536695-6557712.post@n2.nabble.com>
References: <1310031536695-6557712.post@n2.nabble.com>
Message-ID: <201107071302.46737.Ralf.Suhr@itc-halle.de>

Hi jblazquez,

for vector files use ogr2ogr.

Gr
Ralf


Am Donnerstag 07 Juli 2011, 11:38:56 schrieb jblazquez:
> Hi
> I'm trying to make a transformation between ud50 and etrs98 for some files
> shp. This transformation must do it through the grid system (NTv2). To do
> this I have the official transformation file
> (http://www.ign.es/ign/layoutIn/herramientas.do). I read that 1.8 has a
> GDAL driver specific to that transformation. The sample script that exists
> in the install package (GDAL-1.8.0 \ swig \ python \ samples \
> loslas2ntv2.py) is valid only for transforming images.
> My issue is to know how I can make this transformation vector files
> 
> I'm using python 2.7 with GDAL 1.8.
> 
> Any help or Ideas would be appreciated
> 
> 
> 
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/NTv2-geographic-transformation-tp65
> 57712p6557712.html Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From chaitanya.ch at gmail.com  Thu Jul  7 07:42:22 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul  7 11:46:50 2011
Subject: [gdal-dev] Re: Warping an image with both a geotransform and
	control points
In-Reply-To: <4E157DAF.9040308@uva.nl>
References: <498DEABC.2000705@uva.nl> <499559AF.2070506@uva.nl>
	<4995B35D.3010500@geoanalytic.com>
	<200902132002.44935.even.rouault@mines-paris.org>
	<499C1872.501@uva.nl> <499C2D35.1030400@pobox.com>
	<4E157DAF.9040308@uva.nl>
Message-ID: <CAMKgpOaRW0HXbOCXbcXtRvejfA18S=FLtdzCt0avd8TrWc7AuQ@mail.gmail.com>

Jan,

If you are just going to shift the image, just the GeoTransform element
should be enough. You don't need the GCPs.

On Thu, Jul 7, 2011 at 3:04 PM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:

> **
> Hi all,
>
> This has come up before, but I'm still struggling for an answer. I want to
> rubbersheet an already projected image with control points, so as to remove
> small errors.On a suggestion by Frank (
> http://lists.osgeo.org/pipermail/gdal-dev/2009-February/019775.html) I
> produced a VRT file of the georeferenced image and added control points to
> shift the image 1000m to the right. (see below). However,  GDALWARP ignores
> the control points and returns the original georeferenced image. When I
> remove the georeferencing information, it does use the control points, but
> returns a raw image shifted to the right.
>
> Is it possible to rubbersheet a georeferenced image with control points, or
> am I chasing a red herring?
>
> Thanks,
>
> Jan
>
> <VRTDataset rasterXSize="310" rasterYSize="343">
>   <SRS>PROJCS[&quot;Amersfoort / RD
> New&quot;,GEOGCS[&quot;Amersfoort&quot;,DATUM[&quot;Amersfoort&quot;,SPHEROID[&quot;Bessel
> 1841&quot;,6377397.155,299.1528128000008,AUTHORITY[&quot;EPSG&quot;,&quot;7004&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6289&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4289&quot;]],PROJECTION[&quot;Oblique_Stereographic&quot;],PARAMETER[&quot;latitude_of_origin&quot;,52.15616055555555],PARAMETER[&quot;central_meridian&quot;,5.38763888888889],PARAMETER[&quot;scale_factor&quot;,0.9999079],PARAMETER[&quot;false_easting&quot;,155000],PARAMETER[&quot;false_northing&quot;,463000],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;28992&quot;]]</SRS>
>   <GeoTransform> -8.5000000000000000e+03,  1.0000000000000000e+03,
> 0.0000000000000000e+00,  2.8750000000000000e+05,  0.0000000000000000e+00,
> 1.0000000000000000e+03</GeoTransform>
>   <Metadata />
>   <Metadata domain="IMAGE_STRUCTURE">
>     <MDI key="INTERLEAVE">BAND</MDI>
>   </Metadata>
>   <GCPList>
>     <GCP Id="" Pixel="0.0000" Line="0.0000" X="1.000000000000E+03"
> Y="0.000000000000E+00" />
>     <GCP Id="" Pixel="1000.0000" Line="0.0000" X="2.000000000000E+03"
> Y="0.000000000000E+00" />
>     <GCP Id="" Pixel="1000.0000" Line="1000.0000" X="2.000000000000E+03"
> Y="2.000000000000E+03" />
>     <GCP Id="" Pixel="0.0000" Line="1000.0000" X="1.000000000000E+03"
> Y="1.000000000000E+03" />
>   </GCPList>
>   <VRTRasterBand dataType="Float64" band="1">
>     <Metadata />
>     <ColorInterp>Gray</ColorInterp>
>     <SimpleSource>
>       <SourceFilename relativeToVRT="1">test.tif</SourceFilename>
>       <SourceBand>1</SourceBand>
>       <SourceProperties RasterXSize="310" RasterYSize="343"
> DataType="Float64" BlockXSize="310" BlockYSize="3" />
>       <SrcRect xOff="0" yOff="0" xSize="310" ySize="343" />
>       <DstRect xOff="0" yOff="0" xSize="310" ySize="343" />
>     </SimpleSource>
>   </VRTRasterBand>
> </VRTDataset>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/d022b068/attachment-0001.html
From warmerdam at pobox.com  Thu Jul  7 08:59:43 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul  7 13:08:36 2011
Subject: [gdal-dev] NTv2 geographic transformation
In-Reply-To: <1310031536695-6557712.post@n2.nabble.com>
References: <1310031536695-6557712.post@n2.nabble.com>
Message-ID: <CA+YzLBfHGL=WSNULoVnFhdEEWZr5tD3J678VfH2w2xw40T-v6Q@mail.gmail.com>

On Thu, Jul 7, 2011 at 2:38 AM, jblazquez <jiblazquezmozun@gmail.com> wrote:
> Hi
> I'm trying to make a transformation between ud50 and etrs98 for some files
> shp. This transformation must do it through the grid system (NTv2). To do
> this I have the official transformation file
> (http://www.ign.es/ign/layoutIn/herramientas.do). I read that 1.8 has a GDAL
> driver specific to that transformation. The sample script that exists in the
> install package (GDAL-1.8.0 \ swig \ python \ samples \ loslas2ntv2.py) is
> valid only for transforming images.
> My issue is to know how I can make this transformation vector files

jblazquez,

The introduction of the NTv2 driver in GDAL was done so that NTv2 files
could be produced more easily from other sources.  It is not involved in
*utilizing* the NTv2 files for geometric transformations.

PROJ.4 actually applies the NTv2 transformations but it can be invoked
from ogr2ogr.

Hopefully you can do something like:

ogr2ogr \
  -s_srs WGS84
  -t_srs "+proj=latlong +ellps=WGS84 +nadgrids=./your.ntv2 +wktext"
  out.shp in.shp

The above assumes the coordinates are geographic (lat/long decimal
degrees).   The thing to keep in mind is that PROJ.4 only knows about
transforming to and from WGS84.  So you need to trick it into thinking
that one coordinate system is WGS84 and the other is something
different which the grid shift file.

Note, I'm vague on what direction the transformation is stored in within
the NTv2 file, so you may find that the example I gave moves things
the wrong way.  If so, just switch -t_srs and -s_srs around.

It would be nice to have a real world, tested, example of this in the
Trac wiki as the question does come up fairly often.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From EAdam at co.lincoln.or.us  Thu Jul  7 10:13:35 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Thu Jul  7 14:27:17 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E14FF42.50903@cironline.org>
References: <4E14FF42.50903@cironline.org>
Message-ID: <4E155C94.4F75.00CE.0@co.lincoln.or.us>

Michael,

>>> On 7/6/2011 at 5:35 PM, in message <4E14FF42.50903@cironline.org>, Michael
Corey <mcorey@cironline.org> wrote:
> Sure, I've uploaded samples here.
> 
> http://www.mikejcorey.com/spatial/diablo-box-sample.tif 
> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif 

I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?

> 
> These are the same as the images created by the process I described (but 
> scaled down).
> 
> To your point about specifying size in the first step -- will that make 
> the process run faster, or does it do the scaling down after it builds 
> the full-resolution image?
> 
> Also, I notice that my filesize always gets significantly bigger when I 
> do the cutout step, which seems counter-intuitive to me since in theory 
> shouldn't there be less information present once the cutout is done?

-cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :

-crop_to_cutline:
    (GDAL >= 1.8.0) Crop the extent of the target dataset to the extent of the cutline. 

Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.

Best Regards, Eli

> 
> Thanks for your help!
> 
> Michael Corey
> 
> 
> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
>> Michael,
>>
>> Can you provide screenshots of 
>> diablo-combined-center-utm10-70pct-box.tif and 
>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>>
>> By the way, you can perform the actions of the two gdal_translate 
>> commands in the first step with the gdal_merge.py script itself unless 
>> you want to use a specific resampling algorithm.
>>
>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey <mcorey@cironline.org 
>> <mailto:mcorey@cironline.org>> wrote:
>>
>>     Hi all:
>>
>>     I'm using a shapefile as a clipping mask to cut out the shoreline
>>     from some DOQ files that I have merged together. But when I do the
>>     clipping step, I end up with unwanted semitransparency in the
>>     non-clipped areas.
>>
>>     I'm pretty sure the problem is only with my gdalwarp step at the end.
>>
>>     Here's my process:
>>
>>     gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
>>     file file file
>>
>>     gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>>     diablo-combined-center-utm10-70pct.tif
>>
>>     ogrinfo -al ./diablo_canyon_detail_clipper.shp
>>     //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>>
>>     gdal_translate -projwin XXXX YYYY XXXX YYYY
>>     diablo-combined-center-utm10-70pct.tif
>>     diablo-combined-center-utm10-70pct-box.tif
>>
>>     gdalwarp -co COMPRESS=DEFLATE -cutline
>>     ./diablo_canyon_detail_clipper.shp
>>     diablo-combined-center-utm10-70pct-box.tif
>>     diablo-combined-center-utm10-70pct-cutout.tif
>>
>>     Can anyone help?
>>
>>     Thanks!
>>
>>     -- 
>>     Michael Corey
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>
>>
>>
>>
>> -- 
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9494447584
>> 17.2416N 80.1426E

From szekerest at gmail.com  Thu Jul  7 10:21:55 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul  7 14:35:30 2011
Subject: [gdal-dev] Motion: Accept GDAL/OGR 1.8.1RC1 as final release
In-Reply-To: <CA+YzLBcKJfzOQoxJi34dbYssKFYnbMPbbq3UqAaDHaJ2VCPDiQ@mail.gmail.com>
References: <CA+YzLBcKJfzOQoxJi34dbYssKFYnbMPbbq3UqAaDHaJ2VCPDiQ@mail.gmail.com>
Message-ID: <CACALY+Tp03hUWYxC5cr9D7QEwNPD=Gfjd7upADqRMZTzz5nQ5w@mail.gmail.com>

Frank,

I have found 2 issues related to the mssql spatial and the mapinfo tab
driver.

http://trac.osgeo.org/gdal/ticket/4149
http://trac.osgeo.org/gdal/ticket/4150

Committed the fix for each and it would be great to have these changes in
1.8.1

Best regards,

Tamas




2011/7/7 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> Motion: That we accept the GDAL/OGR 1.8.1RC1 package as the
> final GDAL/OGR 1.8.1 release.
>
> --
>
> PSC members, please vote after at least some sort of testing.
> Non-PSC members please let us know if you discover problems!
>
> --
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/c2278b7d/attachment.html
From antonio.rocha at deimos.com.pt  Thu Jul  7 10:18:09 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Thu Jul  7 14:38:32 2011
Subject: [gdal-dev] Using gdalwarp with HDF files- problem reading proejction
Message-ID: <4E15C021.8040704@deimos.com.pt>

Greetings

I have a dataset (in HDF) and I need to convert its projection. When I 
do gdalinfo I get this information:
Coordinate System is:
GEOGCS["Unknown datum based upon the Clarke 1866 ellipsoid",
    DATUM["Not specified (based on Clarke 1866 spheroid)",
        SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
            AUTHORITY["EPSG","7008"]]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
Origin = (-10.001388888888888,45.001388888888890)
Pixel Size = (0.002777777777778,-0.002777777777778)

But this is odd. I was suppose to get Plate-Carr?e with geographic 
Lat/Long and Ref ellipsoid
 WGS 84 Spherical Radius= Equatorial Radius=Re= 6378,14km)

Why am I no obtaining this information? Nevertheless, has this any 
impact or shall I use *-s_srs and define it do Plate Car?e (EPSG:??) ?
*Thanks
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 6272 (20110707) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From szekerest at gmail.com  Thu Jul  7 10:26:40 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Jul  7 14:40:31 2011
Subject: [gdal-dev] Frank going to Google and it is not mentionned once on
	the list!
In-Reply-To: <CA+YzLBfcpW+FSf4E-K68ZytCWUqKdSVa9yLDskdqAa9a7RWwig@mail.gmail.com>
References: <1309985414.11445.YahooMailRC@web110811.mail.gq1.yahoo.com>
	<CA+YzLBfcpW+FSf4E-K68ZytCWUqKdSVa9yLDskdqAa9a7RWwig@mail.gmail.com>
Message-ID: <CACALY+S_zhHu9w0s2zJVQYsrzmJGeXKXzxw1oU7uqcnXxdr1YQ@mail.gmail.com>

Congrats for the new job, Frank!

Best regards,

Tamas




2011/7/7 Frank Warmerdam <warmerdam@pobox.com>

> Sylvain,
>
> Consider it mentioned now!  I had my first day today (lots to take in).
>
> I discussed this on my blog at:
>
>  http://fwarmerdam.blogspot.com/2011/06/joining-google.html
>
> The short summary is that while I intend to remain active working on GDAL
> it won't be as much as before, and I won't be available for paid consulting
> on GDAL due to the nature of my US work visa.
>
> Best regards,
>
> On Wed, Jul 6, 2011 at 1:50 PM, s duclos <sylvain_duclos@yahoo.com> wrote:
> > A quick search for "frank warmerdam google" on Google return 53,200
> results
> >
> > The same search on Bing return 16,400 results
> > But then Bing tell us that "Related Search: .. Frank Sinatra, .. Frank
> Zappa, ..
> > Anna Frank"
> >
> > Some guys at Google are going to have a chuckle
> >
> > Congrat!
> >
> >
> > Sylvain.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/6c0fb824/attachment.html
From warmerdam at pobox.com  Thu Jul  7 10:29:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul  7 14:43:27 2011
Subject: [gdal-dev] Motion: Accept GDAL/OGR 1.8.1RC1 as final release
In-Reply-To: <CACALY+Tp03hUWYxC5cr9D7QEwNPD=Gfjd7upADqRMZTzz5nQ5w@mail.gmail.com>
References: <CA+YzLBcKJfzOQoxJi34dbYssKFYnbMPbbq3UqAaDHaJ2VCPDiQ@mail.gmail.com>
	<CACALY+Tp03hUWYxC5cr9D7QEwNPD=Gfjd7upADqRMZTzz5nQ5w@mail.gmail.com>
Message-ID: <CA+YzLBc+95jeh=X-R+QVrJr061jRmWDdiVAgX7P6fAyunkLbqA@mail.gmail.com>

Tamas,

I have also discovered that I got the release date wrong by one
month in the RC1 so I will change my vote to "-1" on the RC1.  I'll
prepare an RC2 - likely tonight.

Best regards,

On Thu, Jul 7, 2011 at 7:21 AM, Tamas Szekeres <szekerest@gmail.com> wrote:
> Frank,
>
> I have found 2 issues related to the mssql spatial and the mapinfo tab
> driver.
>
> http://trac.osgeo.org/gdal/ticket/4149
> http://trac.osgeo.org/gdal/ticket/4150
>
> Committed the fix for each and it would be great to have these changes in
> 1.8.1
>
> Best regards,
>
> Tamas
>
>
>
>
> 2011/7/7 Frank Warmerdam <warmerdam@pobox.com>
>>
>> Folks,
>>
>> Motion: That we accept the GDAL/OGR 1.8.1RC1 package as the
>> final GDAL/OGR 1.8.1 release.
>>
>> --
>>
>> PSC members, please vote after at least some sort of testing.
>> Non-PSC members please let us know if you discover problems!
>>
>> --
>>
>> +1 Frank
>>
>> --
>>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up?? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush? ? | Geospatial Programmer for Rent
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
From jluis at ualg.pt  Thu Jul  7 11:13:04 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Thu Jul  7 15:29:37 2011
Subject: [gdal-dev] Using gdalwarp with HDF files- problem reading
	proejction
In-Reply-To: <4E15C021.8040704@deimos.com.pt>
References: <4E15C021.8040704@deimos.com.pt>
Message-ID: <4E15CD00.9010207@ualg.pt>

Ant?nio,

I don't know what is a "WGS 84 Spherical Radius". WGS84 is an ellipsoid 
with Equatorial radius of 6378.137  km  (flattening 1/298.2572235630)

Why you are getting that info? Well, that's because it is encoded in the 
file (and apparently not the one you expected).

Joaquim

> Greetings
>
> I have a dataset (in HDF) and I need to convert its projection. When I 
> do gdalinfo I get this information:
> Coordinate System is:
> GEOGCS["Unknown datum based upon the Clarke 1866 ellipsoid",
>    DATUM["Not specified (based on Clarke 1866 spheroid)",
>        SPHEROID["Clarke 1866",6378206.4,294.9786982139006,
>            AUTHORITY["EPSG","7008"]]],
>    PRIMEM["Greenwich",0],
>    UNIT["degree",0.0174532925199433]]
> Origin = (-10.001388888888888,45.001388888888890)
> Pixel Size = (0.002777777777778,-0.002777777777778)
>
> But this is odd. I was suppose to get Plate-Carr?e with geographic 
> Lat/Long and Ref ellipsoid
> WGS 84 Spherical Radius= Equatorial Radius=Re= 6378,14km)
>
> Why am I no obtaining this information? Nevertheless, has this any 
> impact or shall I use *-s_srs and define it do Plate Car?e (EPSG:??) ?
> *Thanks
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus 
> signature database 6272 (20110707) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From alexmantaut at suremptec.com.ar  Thu Jul  7 11:19:06 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Thu Jul  7 15:35:41 2011
Subject: [gdal-dev] hdf5image metadata problems
In-Reply-To: <BANLkTim3eEHzaFZik4SOc7NXtLTFHKm2Jg@mail.gmail.com>
References: <BANLkTinBFrFrvKPU_Dw1-Ba6FYKCrogU-g@mail.gmail.com>
	<4DF907C6.10204@pobox.com>
	<BANLkTi=0QXPGzQgNKX3iXDiy6CqD2Nh8jQ@mail.gmail.com>
	<4DF91745.8040706@pobox.com> <4DF938BB.5050102@tiscali.it>
	<BANLkTimX4WKRhYaJMhRUTTEDuCbVHt5Y5g@mail.gmail.com>
	<20110616154920.2c8e7f8b@asigrid01>
	<BANLkTikQ4qP04jSsqUQHeqyqH7wBh+7gZA@mail.gmail.com>
	<20110616171609.0cfaea90@asigrid01>
	<BANLkTi=tE+xn1qt6-qHOnN7vToAtDZbrVg@mail.gmail.com>
	<4DFC45F2.80302@tiscali.it>
	<BANLkTim3eEHzaFZik4SOc7NXtLTFHKm2Jg@mail.gmail.com>
Message-ID: <CAC4=NR9_Ezpv7ftQ7jksb1TJZh0H1M_5SeeRLTV3ukZNERGYYg@mail.gmail.com>

Hi,
   I posted a patch to solve this issue... It fecthes the metadata
from the subdaset opened (it keeps the global metadata and it adds the
subdaset metadata to it) I tested it and it is working... Please
review it to see it isn' disruptive with the rest of the driver's
logic.

http://trac.osgeo.org/gdal/ticket/4121#comment:4

Regards

2011/6/21 Alex Mantaut <alexmantaut@suremptec.com.ar>:
> Hi all, I updated the ticket with what was discussed with Antonio...
>
> http://trac.osgeo.org/gdal/ticket/4121#comment:3
>
> The defect is still there....
>
> Regards
> Alex
>
> PS:Sorry for the delay but the weekend was a national holyday...
>
> 2011/6/18 Antonio Valentino <antonio.valentino@tiscali.it>
>>
>> Hi Alex,
>>
>> Il 16/06/2011 17:27, Alex Mantaut ha scritto:
>> > Then, to keep consistency, the fact that hdf5imagedataset isn't
>> > consistent
>> > with the hdf5dataset is a defect, right?
>> > May I summarize the conclusions and update the ticket?
>>
>> OK
>>
>> --
>> Antonio Valentino
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> --
> ???? Alex Mantaut
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345? Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> alexmantaut@suremptec.com.ar
> www.suremptec.com
>



-- 
--
???? Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
From mcorey at cironline.org  Thu Jul  7 12:47:49 2011
From: mcorey at cironline.org (Michael Corey)
Date: Thu Jul  7 17:09:19 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E155C94.4F75.00CE.0@co.lincoln.or.us>
References: <4E14FF42.50903@cironline.org>
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <4E15E335.4070000@cironline.org>

Thanks for your responses, Chaitanya and Eli. The semitransparency isn't 
really noticeable until you put the image on top of something else (in 
Photoshop or another program).

It looks like the problem is actually in my gdal_merge.py command. 
That's where the semitransparency is getting introduced.

gdal_merge.py -init "255" -o diablo-combined-utm10.tif file file file

What I'm trying to get is a merged image where no data = transparent. 
Would this be correct in that case?

gdal_merge.py -n "255" -ul_lr 380309.272908 4653610.244134 
1317796.950998 3614484.073320 -o test-combined.tif file file file

Michael Corey
Digital Innovations Editor
Center for Investigative Reporting
510.809.3178


On 7/7/11 7:13 AM, Eli Adam wrote:
> Michael,
>
>>>> On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org>, Michael
> Corey<mcorey@cironline.org>  wrote:
>> Sure, I've uploaded samples here.
>>
>> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
>> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
> I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
>
>> These are the same as the images created by the process I described (but
>> scaled down).
>>
>> To your point about specifying size in the first step -- will that make
>> the process run faster, or does it do the scaling down after it builds
>> the full-resolution image?
>>
>> Also, I notice that my filesize always gets significantly bigger when I
>> do the cutout step, which seems counter-intuitive to me since in theory
>> shouldn't there be less information present once the cutout is done?
> -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :
>
> -crop_to_cutline:
>      (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
>
> Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
>
> Best Regards, Eli
>
>> Thanks for your help!
>>
>> Michael Corey
>>
>>
>> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
>>> Michael,
>>>
>>> Can you provide screenshots of
>>> diablo-combined-center-utm10-70pct-box.tif and
>>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>>>
>>> By the way, you can perform the actions of the two gdal_translate
>>> commands in the first step with the gdal_merge.py script itself unless
>>> you want to use a specific resampling algorithm.
>>>
>>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org
>>> <mailto:mcorey@cironline.org>>  wrote:
>>>
>>>      Hi all:
>>>
>>>      I'm using a shapefile as a clipping mask to cut out the shoreline
>>>      from some DOQ files that I have merged together. But when I do the
>>>      clipping step, I end up with unwanted semitransparency in the
>>>      non-clipped areas.
>>>
>>>      I'm pretty sure the problem is only with my gdalwarp step at the end.
>>>
>>>      Here's my process:
>>>
>>>      gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
>>>      file file file
>>>
>>>      gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>>>      diablo-combined-center-utm10-70pct.tif
>>>
>>>      ogrinfo -al ./diablo_canyon_detail_clipper.shp
>>>      //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>>>
>>>      gdal_translate -projwin XXXX YYYY XXXX YYYY
>>>      diablo-combined-center-utm10-70pct.tif
>>>      diablo-combined-center-utm10-70pct-box.tif
>>>
>>>      gdalwarp -co COMPRESS=DEFLATE -cutline
>>>      ./diablo_canyon_detail_clipper.shp
>>>      diablo-combined-center-utm10-70pct-box.tif
>>>      diablo-combined-center-utm10-70pct-cutout.tif
>>>
>>>      Can anyone help?
>>>
>>>      Thanks!
>>>
>>>      --
>>>      Michael Corey
>>>
>>>      _______________________________________________
>>>      gdal-dev mailing list
>>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
>>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>>
>>> -- 
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
From dcole at integrity-apps.com  Thu Jul  7 13:52:34 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul  7 18:17:28 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <201107062332.16069.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF069A@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903BF074F@CHUNEX01.integrity-apps.com>,
	<201107062332.16069.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903C0A6F1@CHUNEX01.integrity-apps.com>

Well, I am about to give up on this I think and go a different route for creating a NITF from this data.

I tried a small test file, and it takes about 45s to CopyCrate() an 80mb NITF. 

here is the output I got after turning on CPL_DEBUG

GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70) succeeds as NITF.
GDAL: QuietDelete(test1.ntf) invoking Delete()
GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(test1.ntf, this=0x1ad81180)
Warning 6: NITF only supports WGS84 geographic and UTM projections.

0GDAL: Potential thrashing on band 1 of /home/dcole/eraser/Images/dan_data.ntf.
...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
NITFWriteIGEOGLO() fails.
ERROR 6: NITF only supports WGS84 geographic and UTM projections.

GDAL: GDALDefaultOverviews::OverviewScan()
ERROR 6: NITF only supports WGS84 geographic and UTM projections.


So to try to remedy this I changed the cachemax (programmatically) anywhere from 40MB to 3GB trying to see if any setting had any effect. It was about the same no matter what. 

I tried doing a gdal_translate on this file, which only took about a second. Looking through the source for that, it seems like I am doing approximately the same thing in relation to the CreateCopy(), so I am not sure what the problem is. However, my viewer which uses GDAL to read the original NITF file I am reading in will NOT read the translated NITF file that is generated. 

Any idea why the gdal_translate might be running faster than my CreateCopy, even though the parameters are just about identical?

Derek
________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Wednesday, July 06, 2011 5:32 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> I have noticed that when attempting to do this, I am able to do a gdalinfo
> on the source and destination files (even if the destination file is not
> complete, it seems the header gets created, and gdalinfo recognizes teh
> file).
>
> Is it possible that this is taking so long because my destination file has
> no geocoords or projection information? It seems like createcopy is not
> replicating all of the variables in the original and I am having to
> manually set some things, such as Block size, ABPP, etc etc.

This is expected. When doing CreateCopy() the target driver has no idea what
the source driver is, so he will not recognize ABPP. As far as block sizes are
concerned, it is up to the user to decide if he wants to keep or change the
block dimension of the source dataset.

I'm a bit surprised that CreateCopy() is *that* much slower than cp, but it is
hard to know why without a hard work of profiling. It might be related to pixel
or band interleaving, etc... There might cache trashing. You could perhaps run
with CPL_DEBUG=ON and see if interesting info comes up.

> And the
> coordinates and projection information is blank in the new file. Is there
> perhaps some calculations being done to correct that issue, and thats why
> the copy is taking forever?

No, not related at all.

> I thought based on the documentation
> CreateCopy() would clone the file's raster, as well as size, type,
> projection, geotransform, etc, but all of this is not showing up in the
> partially created file at least.

You cannot reliably trust gdalinfo on a file still being written. Depending on
the driver some information might just be written at the end of the process. A
quick look at the CreateCopy() implementation of the NITF driver suggests that
this is indeed the case since the geotransform is set after the imagery.
From even.rouault at mines-paris.org  Thu Jul  7 14:13:37 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul  7 18:39:18 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903C0A6F1@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107062332.16069.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903C0A6F1@CHUNEX01.integrity-apps.com>
Message-ID: <201107072013.37400.even.rouault@mines-paris.org>

Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> Well, I am about to give up on this I think and go a different route for
> creating a NITF from this data.
> 
> I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> NITF.

Yes, that's very poor performance !

> 
> here is the output I got after turning on CPL_DEBUG
> 
> GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
> 
> 0GDAL: Potential thrashing on band 1 of
> /home/dcole/eraser/Images/dan_data.ntf.
> ...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> 
> GDAL: GDALDefaultOverviews::OverviewScan()
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> 

This error seems to indicate that your source dataset has an incompatible 
projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is 
weird because your source dataset seems to be a NITF itself... What does 
gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?

But I don't believe it relates with performance. And I suppose you get the 
same warnings when using gdal_translate.

> 
> So to try to remedy this I changed the cachemax (programmatically) anywhere
> from 40MB to 3GB trying to see if any setting had any effect. It was about
> the same no matter what.

For a 80MB file, playing with cachemax won't give any significant speed-up.

> 
> I tried doing a gdal_translate on this file, which only took about a
> second.

That's much more reasonable. Well, then that shows it's not an issue in GDAL 
per se, but how you use it. Now, you "just" have to discover what things you 
do which are different from gdal_translate.

> Looking through the source for that, it seems like I am doing
> approximately the same thing in relation to the CreateCopy(), so I am not
> sure what the problem is. However, my viewer which uses GDAL to read the
> original NITF file I am reading in will NOT read the translated NITF file
> that is generated.

I've just reviewed the code snippet you pasted yesterday and I see that you 
use a custom progress function. Isn't there a sleep() or some slow operation 
in it ?

For debugging performance issues, I start by just running the code under a 
debugger and to break and resume execution regularly. In 90% of the cases, you 
will see easily the bottleneck because the same function comes again and 
again. Otherwise you might need more advanced tools. sysprof or kcachegrind 
under Linux might be usefull to get timing profiles.

> 
> Any idea why the gdal_translate might be running faster than my CreateCopy,
> even though the parameters are just about identical?
> 
> Derek
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Wednesday, July 06, 2011 5:32 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
> 
> Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > I have noticed that when attempting to do this, I am able to do a
> > gdalinfo on the source and destination files (even if the destination
> > file is not complete, it seems the header gets created, and gdalinfo
> > recognizes teh file).
> > 
> > Is it possible that this is taking so long because my destination file
> > has no geocoords or projection information? It seems like createcopy is
> > not replicating all of the variables in the original and I am having to
> > manually set some things, such as Block size, ABPP, etc etc.
> 
> This is expected. When doing CreateCopy() the target driver has no idea
> what the source driver is, so he will not recognize ABPP. As far as block
> sizes are concerned, it is up to the user to decide if he wants to keep or
> change the block dimension of the source dataset.
> 
> I'm a bit surprised that CreateCopy() is *that* much slower than cp, but it
> is hard to know why without a hard work of profiling. It might be related
> to pixel or band interleaving, etc... There might cache trashing. You
> could perhaps run with CPL_DEBUG=ON and see if interesting info comes up.
> 
> > And the
> > coordinates and projection information is blank in the new file. Is there
> > perhaps some calculations being done to correct that issue, and thats why
> > the copy is taking forever?
> 
> No, not related at all.
> 
> > I thought based on the documentation
> > CreateCopy() would clone the file's raster, as well as size, type,
> > projection, geotransform, etc, but all of this is not showing up in the
> > partially created file at least.
> 
> You cannot reliably trust gdalinfo on a file still being written. Depending
> on the driver some information might just be written at the end of the
> process. A quick look at the CreateCopy() implementation of the NITF
> driver suggests that this is indeed the case since the geotransform is set
> after the imagery. _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dcole at integrity-apps.com  Thu Jul  7 14:48:22 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul  7 19:16:26 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <201107072013.37400.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107062332.16069.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903C0A6F1@CHUNEX01.integrity-apps.com>,
	<201107072013.37400.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903C0A737@CHUNEX01.integrity-apps.com>

Yes, the source data is a NITF. Here is the first few lines of the projection info  in that source NITF:
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75],
    PARAMETER["scale_factor",0.996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0]]


I suppose I can go back through my code and change it to be exactly like gdal_translate, which seems to use the C bindings instead of C++.  I did end up changing my progress reporting function to the same one that is in gdal_translate as well, which had no change. I will try the debugging route before too much trouble, to see what I can find out. 

Thanks for the help so far. I will report back what I find.



________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Thursday, July 07, 2011 2:13 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> Well, I am about to give up on this I think and go a different route for
> creating a NITF from this data.
>
> I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> NITF.

Yes, that's very poor performance !

>
> here is the output I got after turning on CPL_DEBUG
>
> GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
>
> 0GDAL: Potential thrashing on band 1 of
> /home/dcole/eraser/Images/dan_data.ntf.
> ...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
> GDAL: GDALDefaultOverviews::OverviewScan()
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>

This error seems to indicate that your source dataset has an incompatible
projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is
weird because your source dataset seems to be a NITF itself... What does
gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?

But I don't believe it relates with performance. And I suppose you get the
same warnings when using gdal_translate.

>
> So to try to remedy this I changed the cachemax (programmatically) anywhere
> from 40MB to 3GB trying to see if any setting had any effect. It was about
> the same no matter what.

For a 80MB file, playing with cachemax won't give any significant speed-up.

>
> I tried doing a gdal_translate on this file, which only took about a
> second.

That's much more reasonable. Well, then that shows it's not an issue in GDAL
per se, but how you use it. Now, you "just" have to discover what things you
do which are different from gdal_translate.

> Looking through the source for that, it seems like I am doing
> approximately the same thing in relation to the CreateCopy(), so I am not
> sure what the problem is. However, my viewer which uses GDAL to read the
> original NITF file I am reading in will NOT read the translated NITF file
> that is generated.

I've just reviewed the code snippet you pasted yesterday and I see that you
use a custom progress function. Isn't there a sleep() or some slow operation
in it ?

For debugging performance issues, I start by just running the code under a
debugger and to break and resume execution regularly. In 90% of the cases, you
will see easily the bottleneck because the same function comes again and
again. Otherwise you might need more advanced tools. sysprof or kcachegrind
under Linux might be usefull to get timing profiles.

>
> Any idea why the gdal_translate might be running faster than my CreateCopy,
> even though the parameters are just about identical?
>
> Derek
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Wednesday, July 06, 2011 5:32 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > I have noticed that when attempting to do this, I am able to do a
> > gdalinfo on the source and destination files (even if the destination
> > file is not complete, it seems the header gets created, and gdalinfo
> > recognizes teh file).
> >
> > Is it possible that this is taking so long because my destination file
> > has no geocoords or projection information? It seems like createcopy is
> > not replicating all of the variables in the original and I am having to
> > manually set some things, such as Block size, ABPP, etc etc.
>
> This is expected. When doing CreateCopy() the target driver has no idea
> what the source driver is, so he will not recognize ABPP. As far as block
> sizes are concerned, it is up to the user to decide if he wants to keep or
> change the block dimension of the source dataset.
>
> I'm a bit surprised that CreateCopy() is *that* much slower than cp, but it
> is hard to know why without a hard work of profiling. It might be related
> to pixel or band interleaving, etc... There might cache trashing. You
> could perhaps run with CPL_DEBUG=ON and see if interesting info comes up.
>
> > And the
> > coordinates and projection information is blank in the new file. Is there
> > perhaps some calculations being done to correct that issue, and thats why
> > the copy is taking forever?
>
> No, not related at all.
>
> > I thought based on the documentation
> > CreateCopy() would clone the file's raster, as well as size, type,
> > projection, geotransform, etc, but all of this is not showing up in the
> > partially created file at least.
>
> You cannot reliably trust gdalinfo on a file still being written. Depending
> on the driver some information might just be written at the end of the
> process. A quick look at the CreateCopy() implementation of the NITF
> driver suggests that this is indeed the case since the geotransform is set
> after the imagery. _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dcole at integrity-apps.com  Thu Jul  7 15:20:32 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul  7 19:50:13 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903C0A737@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107062332.16069.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903C0A6F1@CHUNEX01.integrity-apps.com>, 
	<201107072013.37400.even.rouault@mines-paris.org>,
	<8406B84EA8899042A8508D858843972903C0A737@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903C0A763@CHUNEX01.integrity-apps.com>

I actually just out of curiosity tried to open the file given by this command:

gdal_translate dan_data.ntf dan_data_translate.ntf

And it turns out that dan_data_translate.ntf was actually a TIFF file that I could view. I had to explicitly add the option -of NITF

in which case it still did the translate very fast, but I did get warnings:

$ gdal_translate dan_data.ntf dan_data_translate.ntf -of NITF
Input file size is 8689, 7679
Warning 6: NITF only supports WGS84 geographic and UTM projections.

0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
NITFWriteIGEOGLO() fails.
ERROR 6: NITF only supports WGS84 geographic and UTM projections.


Which jives with what my code was giving me, and further, dan_data_translate.ntf is not able to be opened using my viewer (which uses GDAL to open the files I have been working with, of course, and does open dan_data.ntf) because of a segmentation fault  in the RasterIO method. I am able to open the gdal_translate file, and my CreateCopy() file in another ELT, such as ENVI.

I will also make note that the original file is exactly 72.0 MB, and the output file is 63.6MB, but both files say in gdalinfo they are not using compression. This is the same for my CreateCopy() or gdal_translate. So at least I have narrowed down that I am apparently getting the same end-result as gdal_translate, albeit way slower. Finally, the output file seems to have created row-blocks, instead of 1024x1024 blocks like the original. 

I will continue working to replicate gdal_translate exactly, even though now i am not optimistic about getting a good result.

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Thursday, July 07, 2011 2:48 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Creating modified copies of a file

Yes, the source data is a NITF. Here is the first few lines of the projection info  in that source NITF:
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75],
    PARAMETER["scale_factor",0.996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0]]


I suppose I can go back through my code and change it to be exactly like gdal_translate, which seems to use the C bindings instead of C++.  I did end up changing my progress reporting function to the same one that is in gdal_translate as well, which had no change. I will try the debugging route before too much trouble, to see what I can find out.

Thanks for the help so far. I will report back what I find.



________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Thursday, July 07, 2011 2:13 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> Well, I am about to give up on this I think and go a different route for
> creating a NITF from this data.
>
> I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> NITF.

Yes, that's very poor performance !

>
> here is the output I got after turning on CPL_DEBUG
>
> GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
>
> 0GDAL: Potential thrashing on band 1 of
> /home/dcole/eraser/Images/dan_data.ntf.
> ...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
> GDAL: GDALDefaultOverviews::OverviewScan()
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>

This error seems to indicate that your source dataset has an incompatible
projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is
weird because your source dataset seems to be a NITF itself... What does
gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?

But I don't believe it relates with performance. And I suppose you get the
same warnings when using gdal_translate.

>
> So to try to remedy this I changed the cachemax (programmatically) anywhere
> from 40MB to 3GB trying to see if any setting had any effect. It was about
> the same no matter what.

For a 80MB file, playing with cachemax won't give any significant speed-up.

>
> I tried doing a gdal_translate on this file, which only took about a
> second.

That's much more reasonable. Well, then that shows it's not an issue in GDAL
per se, but how you use it. Now, you "just" have to discover what things you
do which are different from gdal_translate.

> Looking through the source for that, it seems like I am doing
> approximately the same thing in relation to the CreateCopy(), so I am not
> sure what the problem is. However, my viewer which uses GDAL to read the
> original NITF file I am reading in will NOT read the translated NITF file
> that is generated.

I've just reviewed the code snippet you pasted yesterday and I see that you
use a custom progress function. Isn't there a sleep() or some slow operation
in it ?

For debugging performance issues, I start by just running the code under a
debugger and to break and resume execution regularly. In 90% of the cases, you
will see easily the bottleneck because the same function comes again and
again. Otherwise you might need more advanced tools. sysprof or kcachegrind
under Linux might be usefull to get timing profiles.

>
> Any idea why the gdal_translate might be running faster than my CreateCopy,
> even though the parameters are just about identical?
>
> Derek
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Wednesday, July 06, 2011 5:32 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > I have noticed that when attempting to do this, I am able to do a
> > gdalinfo on the source and destination files (even if the destination
> > file is not complete, it seems the header gets created, and gdalinfo
> > recognizes teh file).
> >
> > Is it possible that this is taking so long because my destination file
> > has no geocoords or projection information? It seems like createcopy is
> > not replicating all of the variables in the original and I am having to
> > manually set some things, such as Block size, ABPP, etc etc.
>
> This is expected. When doing CreateCopy() the target driver has no idea
> what the source driver is, so he will not recognize ABPP. As far as block
> sizes are concerned, it is up to the user to decide if he wants to keep or
> change the block dimension of the source dataset.
>
> I'm a bit surprised that CreateCopy() is *that* much slower than cp, but it
> is hard to know why without a hard work of profiling. It might be related
> to pixel or band interleaving, etc... There might cache trashing. You
> could perhaps run with CPL_DEBUG=ON and see if interesting info comes up.
>
> > And the
> > coordinates and projection information is blank in the new file. Is there
> > perhaps some calculations being done to correct that issue, and thats why
> > the copy is taking forever?
>
> No, not related at all.
>
> > I thought based on the documentation
> > CreateCopy() would clone the file's raster, as well as size, type,
> > projection, geotransform, etc, but all of this is not showing up in the
> > partially created file at least.
>
> You cannot reliably trust gdalinfo on a file still being written. Depending
> on the driver some information might just be written at the end of the
> process. A quick look at the CreateCopy() implementation of the NITF
> driver suggests that this is indeed the case since the geotransform is set
> after the imagery. _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From woklist at kyngchaos.com  Thu Jul  7 15:57:31 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Jul  7 20:29:32 2011
Subject: [gdal-dev] joining shapefile to PG table
Message-ID: <FBB63E7F-AE1D-43AD-BA23-46E81DB0921E@kyngchaos.com>

I'm having a problem joining a Postgres table to a shapefile.  I've done this in the past with MySQL tables.

ogrinfo -al -so myshapefile.shp -sql "SELECT * FROM myshapefile LEFT JOIN 'PG:dbname=mypgdb host=localhost user=someuser password='.mypgtable ON myshapefile.keyfield = mypgtable.keyfield"
INFO: Open of `myshqpefile.shp'
      using driver `ESRI Shapefile' successful.
ERROR 1: SQL Expression Parsing Error: syntax error


ogrinfo on the table works:

ogrinfo -al -so 'PG:dbname=mypgdb host=localhost user=someuser password=' mypgtable
INFO: Open of `PG:dbname=mypgdb host=localhost user=someuser password='
      using driver `PostgreSQL' successful.
...

I'm using a character key field (I remember problems with that in mysql), but that shouldn't affect the syntax.  (If GDAL 1.8 still has this limitation, major bummer, I'll have to convert all my shapefiles to PostGIS to join the tables.)


The mysql method has a tables=mypgtable parameter in the connection, but that doesn't help the PG connection.  Testing the mysql method (different data) gives me a segfault on the join, but works on the shapefile and table separately.  This used to work (GDAL 1.6, maybe 1.7?).

GDAL 1.8.0, Postgres 9.0.4 (both GDAL libpq and server), MySQL 5.1.52 (GDAL) & 5.1.41 (server)

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no particular pleasure I shall kill every ___ I can until the war is over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people of the allied nations devoted an entire year exclusively to hating the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war

From rush at winkey.org  Thu Jul  7 16:14:10 2011
From: rush at winkey.org (Brian Case)
Date: Thu Jul  7 20:47:01 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E15E335.4070000@cironline.org>
References: <4E14FF42.50903@cironline.org>
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
	<4E15E335.4070000@cironline.org>
Message-ID: <1310069650.22520.8.camel@octopi>

Michael,

another option is to use gdalwarp to merge images together.

Brian

On Thu, 2011-07-07 at 09:47 -0700, Michael Corey wrote:
> Thanks for your responses, Chaitanya and Eli. The semitransparency isn't 
> really noticeable until you put the image on top of something else (in 
> Photoshop or another program).
> 
> It looks like the problem is actually in my gdal_merge.py command. 
> That's where the semitransparency is getting introduced.
> 
> gdal_merge.py -init "255" -o diablo-combined-utm10.tif file file file
> 
> What I'm trying to get is a merged image where no data = transparent. 
> Would this be correct in that case?
> 
> gdal_merge.py -n "255" -ul_lr 380309.272908 4653610.244134 
> 1317796.950998 3614484.073320 -o test-combined.tif file file file
> 
> Michael Corey
> Digital Innovations Editor
> Center for Investigative Reporting
> 510.809.3178
> 
> 
> On 7/7/11 7:13 AM, Eli Adam wrote:
> > Michael,
> >
> >>>> On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org>, Michael
> > Corey<mcorey@cironline.org>  wrote:
> >> Sure, I've uploaded samples here.
> >>
> >> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
> >> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
> > I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
> >
> >> These are the same as the images created by the process I described (but
> >> scaled down).
> >>
> >> To your point about specifying size in the first step -- will that make
> >> the process run faster, or does it do the scaling down after it builds
> >> the full-resolution image?
> >>
> >> Also, I notice that my filesize always gets significantly bigger when I
> >> do the cutout step, which seems counter-intuitive to me since in theory
> >> shouldn't there be less information present once the cutout is done?
> > -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :
> >
> > -crop_to_cutline:
> >      (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
> >
> > Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
> >
> > Best Regards, Eli
> >
> >> Thanks for your help!
> >>
> >> Michael Corey
> >>
> >>
> >> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
> >>> Michael,
> >>>
> >>> Can you provide screenshots of
> >>> diablo-combined-center-utm10-70pct-box.tif and
> >>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
> >>>
> >>> By the way, you can perform the actions of the two gdal_translate
> >>> commands in the first step with the gdal_merge.py script itself unless
> >>> you want to use a specific resampling algorithm.
> >>>
> >>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org
> >>> <mailto:mcorey@cironline.org>>  wrote:
> >>>
> >>>      Hi all:
> >>>
> >>>      I'm using a shapefile as a clipping mask to cut out the shoreline
> >>>      from some DOQ files that I have merged together. But when I do the
> >>>      clipping step, I end up with unwanted semitransparency in the
> >>>      non-clipped areas.
> >>>
> >>>      I'm pretty sure the problem is only with my gdalwarp step at the end.
> >>>
> >>>      Here's my process:
> >>>
> >>>      gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
> >>>      file file file
> >>>
> >>>      gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
> >>>      diablo-combined-center-utm10-70pct.tif
> >>>
> >>>      ogrinfo -al ./diablo_canyon_detail_clipper.shp
> >>>      //Extent: (XXXX, YYYY) - (XXXX, YYYY)
> >>>
> >>>      gdal_translate -projwin XXXX YYYY XXXX YYYY
> >>>      diablo-combined-center-utm10-70pct.tif
> >>>      diablo-combined-center-utm10-70pct-box.tif
> >>>
> >>>      gdalwarp -co COMPRESS=DEFLATE -cutline
> >>>      ./diablo_canyon_detail_clipper.shp
> >>>      diablo-combined-center-utm10-70pct-box.tif
> >>>      diablo-combined-center-utm10-70pct-cutout.tif
> >>>
> >>>      Can anyone help?
> >>>
> >>>      Thanks!
> >>>
> >>>      --
> >>>      Michael Corey
> >>>
> >>>      _______________________________________________
> >>>      gdal-dev mailing list
> >>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> >>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>>
> >>>
> >>>
> >>> -- 
> >>> Best regards,
> >>> Chaitanya kumar CH.
> >>> /t?a???nj?/ /k?m?r/
> >>> +91-9494447584
> >>> 17.2416N 80.1426E
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Thu Jul  7 16:17:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul  7 20:50:05 2011
Subject: [gdal-dev] joining shapefile to PG table
In-Reply-To: <FBB63E7F-AE1D-43AD-BA23-46E81DB0921E@kyngchaos.com>
References: <FBB63E7F-AE1D-43AD-BA23-46E81DB0921E@kyngchaos.com>
Message-ID: <201107072217.41387.even.rouault@mines-paris.org>

Le jeudi 07 juillet 2011 21:57:31, William Kyngesburye a ?crit :
> I'm having a problem joining a Postgres table to a shapefile.  I've done
> this in the past with MySQL tables.
> 
> ogrinfo -al -so myshapefile.shp -sql "SELECT * FROM myshapefile LEFT JOIN
> 'PG:dbname=mypgdb host=localhost user=someuser password='.mypgtable ON
> myshapefile.keyfield = mypgtable.keyfield" INFO: Open of `myshqpefile.shp'
>       using driver `ESRI Shapefile' successful.
> ERROR 1: SQL Expression Parsing Error: syntax error

William,

I've just tried something really close to the above and it works in trunk and 
1.8.1.

I get a segfault in 1.8.0, but the segfault can only occur if SQL parsing is 
successfull. So I don't understand why you get the SQL parsing error. I guess 
you pasted a simplified/reworked version of your exact SQL, so maybe check it 
once more...

As far as the segfault is concerned, this is an identified regression of 1.8.0 
that has been addressed in to-be-soon-released-1.8.1 (see 
http://trac.osgeo.org/gdal/ticket/4112)

Best regards,

Even
From woklist at kyngchaos.com  Thu Jul  7 17:05:30 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Jul  7 21:41:00 2011
Subject: [gdal-dev] joining shapefile to PG table
In-Reply-To: <201107072217.41387.even.rouault@mines-paris.org>
References: <FBB63E7F-AE1D-43AD-BA23-46E81DB0921E@kyngchaos.com>
	<201107072217.41387.even.rouault@mines-paris.org>
Message-ID: <C92C0077-C654-4200-8C06-4F0C6FD4B52E@kyngchaos.com>

On Jul 7, 2011, at 3:17 PM, Even Rouault wrote:

> Le jeudi 07 juillet 2011 21:57:31, William Kyngesburye a ?crit :
>> I'm having a problem joining a Postgres table to a shapefile.  I've done
>> this in the past with MySQL tables.
>> 
>> ogrinfo -al -so myshapefile.shp -sql "SELECT * FROM myshapefile LEFT JOIN
>> 'PG:dbname=mypgdb host=localhost user=someuser password='.mypgtable ON
>> myshapefile.keyfield = mypgtable.keyfield" INFO: Open of `myshqpefile.shp'
>>      using driver `ESRI Shapefile' successful.
>> ERROR 1: SQL Expression Parsing Error: syntax error
> 
> William,
> 
> I've just tried something really close to the above and it works in trunk and 
> 1.8.1.
> 
> I get a segfault in 1.8.0, but the segfault can only occur if SQL parsing is 
> successfull. So I don't understand why you get the SQL parsing error. I guess 
> you pasted a simplified/reworked version of your exact SQL, so maybe check it 
> once more...

Only simplified the names.  The shapefile name starts with numbers (natural earth shapefiles).  There's the problem.  I removed the leading numbers, and simplified the shapefile names to a few letters (they're also long names), no syntax error (segfault).  Renamed with a short name with a single leading number, again the syntax error.

So, it's a SQL limitation on names?

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy


From even.rouault at mines-paris.org  Thu Jul  7 17:22:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul  7 21:57:57 2011
Subject: [gdal-dev] joining shapefile to PG table
In-Reply-To: <C92C0077-C654-4200-8C06-4F0C6FD4B52E@kyngchaos.com>
References: <FBB63E7F-AE1D-43AD-BA23-46E81DB0921E@kyngchaos.com>
	<201107072217.41387.even.rouault@mines-paris.org>
	<C92C0077-C654-4200-8C06-4F0C6FD4B52E@kyngchaos.com>
Message-ID: <201107072322.00759.even.rouault@mines-paris.org>


> Only simplified the names.  The shapefile name starts with numbers (natural
> earth shapefiles).  There's the problem.  I removed the leading numbers,
> and simplified the shapefile names to a few letters (they're also long
> names), no syntax error (segfault).  Renamed with a short name with a
> single leading number, again the syntax error.
> 
> So, it's a SQL limitation on names?

Yes, SQL identifiers cannot start by a number without being quoted (the SQL 
engine of previous versions was perhaps a bit more tolerant, but the newer 
behaviour is closer to the one of the SQL engines you find in DBs such as 
postgres, mysql, sqlite, etc...)

I've managed to make the request work (*) by changing it like the following :

ogrinfo 123.dbf  -sql "select * from '123' onetwothree left join 
'PG:dbname=autotest port=5432'.poly on onetwothree.prfedea = poly.prfedea"

1) quote the layername after the FROM : '123'
2) just after, add an alias name for the layername : onetwothree
3) use the alias name in the ON because it won't like 123 or '123'



(*) : will crash afterwards with 1.8.0 when being evaluated...

> 
> -----
> William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
> http://www.kyngchaos.com/
> 
> "Those people who most want to rule people are, ipso-facto, those least
> suited to do it."
> 
> - A rule of the universe, from the HitchHiker's Guide to the Galaxy
From woklist at kyngchaos.com  Thu Jul  7 17:28:52 2011
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Thu Jul  7 22:05:39 2011
Subject: [gdal-dev] joining shapefile to PG table
In-Reply-To: <201107072322.00759.even.rouault@mines-paris.org>
References: <FBB63E7F-AE1D-43AD-BA23-46E81DB0921E@kyngchaos.com>
	<201107072217.41387.even.rouault@mines-paris.org>
	<C92C0077-C654-4200-8C06-4F0C6FD4B52E@kyngchaos.com>
	<201107072322.00759.even.rouault@mines-paris.org>
Message-ID: <AEBD6544-762B-4326-B92E-DDEAEA0267D8@kyngchaos.com>

On Jul 7, 2011, at 4:22 PM, Even Rouault wrote:

> 
>> Only simplified the names.  The shapefile name starts with numbers (natural
>> earth shapefiles).  There's the problem.  I removed the leading numbers,
>> and simplified the shapefile names to a few letters (they're also long
>> names), no syntax error (segfault).  Renamed with a short name with a
>> single leading number, again the syntax error.
>> 
>> So, it's a SQL limitation on names?
> 
> Yes, SQL identifiers cannot start by a number without being quoted (the SQL 
> engine of previous versions was perhaps a bit more tolerant, but the newer 
> behaviour is closer to the one of the SQL engines you find in DBs such as 
> postgres, mysql, sqlite, etc...)
> 
> I've managed to make the request work (*) by changing it like the following :
> 
> ogrinfo 123.dbf  -sql "select * from '123' onetwothree left join 
> 'PG:dbname=autotest port=5432'.poly on onetwothree.prfedea = poly.prfedea"
> 
> 1) quote the layername after the FROM : '123'
> 2) just after, add an alias name for the layername : onetwothree
> 3) use the alias name in the ON because it won't like 123 or '123'

Ah, sweet, I don't have to rename all my shapefiles :)  The quoting and aliasing works.  Thanks.

-----
William Kyngesburye <kyngchaos*at*kyngchaos*dot*com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy


From dcole at integrity-apps.com  Thu Jul  7 17:46:11 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul  7 22:23:56 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903C0A763@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<201107062332.16069.even.rouault@mines-paris.org>
	<8406B84EA8899042A8508D858843972903C0A6F1@CHUNEX01.integrity-apps.com>, 
	<201107072013.37400.even.rouault@mines-paris.org>,
	<8406B84EA8899042A8508D858843972903C0A737@CHUNEX01.integrity-apps.com>,
	<8406B84EA8899042A8508D858843972903C0A763@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903C0A7D6@CHUNEX01.integrity-apps.com>

So that this may help anyone in the future - it seems like I may have solved the problem for now! After looking through gdal_translate, it appears that they are using the C API instead of C++ for the CreateCopy. I switched my code to the C API instead of C++ just for consistency sake, and sure enough, my CreateCopy was sped up tremendously! 

For the smaller test file I was playing with, the output file was not viewable in my viewer until I made some adjustments, primarily, setting the block size of the copy to be the same as the original. if you dont set it explicitely you get row-wise blocks. 

One other quirk - I was not able to use the GDALSetCacheMax() function , and instead switched that to the CPLSetConfigOption() function, AND I had to move it to be before I call GDALAllRegister() it appears, or I was still getting cache thrashing warnings.

If I get some time, or if someone else does, it might be nice to narrow down what exactly in the C++ API was causing the problem.

Derek
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Thursday, July 07, 2011 3:20 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Creating modified copies of a file

I actually just out of curiosity tried to open the file given by this command:

gdal_translate dan_data.ntf dan_data_translate.ntf

And it turns out that dan_data_translate.ntf was actually a TIFF file that I could view. I had to explicitly add the option -of NITF

in which case it still did the translate very fast, but I did get warnings:

$ gdal_translate dan_data.ntf dan_data_translate.ntf -of NITF
Input file size is 8689, 7679
Warning 6: NITF only supports WGS84 geographic and UTM projections.

0...10...20...30...40...50...60...70...80...90...100 - done.
ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
NITFWriteIGEOGLO() fails.
ERROR 6: NITF only supports WGS84 geographic and UTM projections.


Which jives with what my code was giving me, and further, dan_data_translate.ntf is not able to be opened using my viewer (which uses GDAL to open the files I have been working with, of course, and does open dan_data.ntf) because of a segmentation fault  in the RasterIO method. I am able to open the gdal_translate file, and my CreateCopy() file in another ELT, such as ENVI.

I will also make note that the original file is exactly 72.0 MB, and the output file is 63.6MB, but both files say in gdalinfo they are not using compression. This is the same for my CreateCopy() or gdal_translate. So at least I have narrowed down that I am apparently getting the same end-result as gdal_translate, albeit way slower. Finally, the output file seems to have created row-blocks, instead of 1024x1024 blocks like the original.

I will continue working to replicate gdal_translate exactly, even though now i am not optimistic about getting a good result.

________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Thursday, July 07, 2011 2:48 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Creating modified copies of a file

Yes, the source data is a NITF. Here is the first few lines of the projection info  in that source NITF:
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-75],
    PARAMETER["scale_factor",0.996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0]]


I suppose I can go back through my code and change it to be exactly like gdal_translate, which seems to use the C bindings instead of C++.  I did end up changing my progress reporting function to the same one that is in gdal_translate as well, which had no change. I will try the debugging route before too much trouble, to see what I can find out.

Thanks for the help so far. I will report back what I find.



________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Thursday, July 07, 2011 2:13 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> Well, I am about to give up on this I think and go a different route for
> creating a NITF from this data.
>
> I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> NITF.

Yes, that's very poor performance !

>
> here is the output I got after turning on CPL_DEBUG
>
> GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
>
> 0GDAL: Potential thrashing on band 1 of
> /home/dcole/eraser/Images/dan_data.ntf.
> ...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
> GDAL: GDALDefaultOverviews::OverviewScan()
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>

This error seems to indicate that your source dataset has an incompatible
projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is
weird because your source dataset seems to be a NITF itself... What does
gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?

But I don't believe it relates with performance. And I suppose you get the
same warnings when using gdal_translate.

>
> So to try to remedy this I changed the cachemax (programmatically) anywhere
> from 40MB to 3GB trying to see if any setting had any effect. It was about
> the same no matter what.

For a 80MB file, playing with cachemax won't give any significant speed-up.

>
> I tried doing a gdal_translate on this file, which only took about a
> second.

That's much more reasonable. Well, then that shows it's not an issue in GDAL
per se, but how you use it. Now, you "just" have to discover what things you
do which are different from gdal_translate.

> Looking through the source for that, it seems like I am doing
> approximately the same thing in relation to the CreateCopy(), so I am not
> sure what the problem is. However, my viewer which uses GDAL to read the
> original NITF file I am reading in will NOT read the translated NITF file
> that is generated.

I've just reviewed the code snippet you pasted yesterday and I see that you
use a custom progress function. Isn't there a sleep() or some slow operation
in it ?

For debugging performance issues, I start by just running the code under a
debugger and to break and resume execution regularly. In 90% of the cases, you
will see easily the bottleneck because the same function comes again and
again. Otherwise you might need more advanced tools. sysprof or kcachegrind
under Linux might be usefull to get timing profiles.

>
> Any idea why the gdal_translate might be running faster than my CreateCopy,
> even though the parameters are just about identical?
>
> Derek
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Wednesday, July 06, 2011 5:32 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > I have noticed that when attempting to do this, I am able to do a
> > gdalinfo on the source and destination files (even if the destination
> > file is not complete, it seems the header gets created, and gdalinfo
> > recognizes teh file).
> >
> > Is it possible that this is taking so long because my destination file
> > has no geocoords or projection information? It seems like createcopy is
> > not replicating all of the variables in the original and I am having to
> > manually set some things, such as Block size, ABPP, etc etc.
>
> This is expected. When doing CreateCopy() the target driver has no idea
> what the source driver is, so he will not recognize ABPP. As far as block
> sizes are concerned, it is up to the user to decide if he wants to keep or
> change the block dimension of the source dataset.
>
> I'm a bit surprised that CreateCopy() is *that* much slower than cp, but it
> is hard to know why without a hard work of profiling. It might be related
> to pixel or band interleaving, etc... There might cache trashing. You
> could perhaps run with CPL_DEBUG=ON and see if interesting info comes up.
>
> > And the
> > coordinates and projection information is blank in the new file. Is there
> > perhaps some calculations being done to correct that issue, and thats why
> > the copy is taking forever?
>
> No, not related at all.
>
> > I thought based on the documentation
> > CreateCopy() would clone the file's raster, as well as size, type,
> > projection, geotransform, etc, but all of this is not showing up in the
> > partially created file at least.
>
> You cannot reliably trust gdalinfo on a file still being written. Depending
> on the driver some information might just be written at the end of the
> process. A quick look at the CreateCopy() implementation of the NITF
> driver suggests that this is indeed the case since the geotransform is set
> after the imagery. _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Jul  7 18:07:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul  7 22:45:31 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903C0A7D6@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A763@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A7D6@CHUNEX01.integrity-apps.com>
Message-ID: <201107080007.12696.even.rouault@mines-paris.org>

Le jeudi 07 juillet 2011 23:46:11, Cole, Derek a ?crit :
> So that this may help anyone in the future - it seems like I may have
> solved the problem for now! After looking through gdal_translate, it
> appears that they are using the C API instead of C++ for the CreateCopy. I
> switched my code to the C API instead of C++ just for consistency sake,
> and sure enough, my CreateCopy was sped up tremendously!

Really ??? That doesn't make any sense. The C function GDALCreateCopy() is 
just a one line wrapper over the C++ API. I'm 200% sure there must be another 
difference in the values of the arguments between your C and C++ call. You 
should recheck...

> 
> For the smaller test file I was playing with, the output file was not
> viewable in my viewer until I made some adjustments, primarily, setting
> the block size of the copy to be the same as the original. if you dont set
> it explicitely you get row-wise blocks.

Yes, row-wise blocks are the default. Tiling must be explicitely set up with 
teh BLOCKXSIZE and BLOCKYSIZE creation options.

> 
> One other quirk - I was not able to use the GDALSetCacheMax() function ,

What do you mean by "not being able to use the GDALSetCacheMax()" ? Are you 
sure you specified the value in bytes as specified in the doc. I suspect you 
must have set a value in megabytes, because when the GDAL_CACHEMAX 
configuration option is read, there's a magic to automatically multiply small 
values (< 100000) by one million. That could explain why you manage to achieve 
the desired effect by using CPLSetConfigOption().

> and instead switched that to the CPLSetConfigOption() function, AND I had
> to move it to be before I call GDALAllRegister() it appears, or I was
> still getting cache thrashing warnings.
> 
> If I get some time, or if someone else does, it might be nice to narrow
> down what exactly in the C++ API was causing the problem.
> 
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 3:20 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
> 
> I actually just out of curiosity tried to open the file given by this
> command:
> 
> gdal_translate dan_data.ntf dan_data_translate.ntf
> 
> And it turns out that dan_data_translate.ntf was actually a TIFF file that
> I could view. I had to explicitly add the option -of NITF
> 
> in which case it still did the translate very fast, but I did get warnings:
> 
> $ gdal_translate dan_data.ntf dan_data_translate.ntf -of NITF
> Input file size is 8689, 7679
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
> 
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> 
> 
> Which jives with what my code was giving me, and further,
> dan_data_translate.ntf is not able to be opened using my viewer (which
> uses GDAL to open the files I have been working with, of course, and does
> open dan_data.ntf) because of a segmentation fault  in the RasterIO
> method. I am able to open the gdal_translate file, and my CreateCopy()
> file in another ELT, such as ENVI.
> 
> I will also make note that the original file is exactly 72.0 MB, and the
> output file is 63.6MB, but both files say in gdalinfo they are not using
> compression. This is the same for my CreateCopy() or gdal_translate. So at
> least I have narrowed down that I am apparently getting the same
> end-result as gdal_translate, albeit way slower. Finally, the output file
> seems to have created row-blocks, instead of 1024x1024 blocks like the
> original.
> 
> I will continue working to replicate gdal_translate exactly, even though
> now i am not optimistic about getting a good result.
> 
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 2:48 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
> 
> Yes, the source data is a NITF. Here is the first few lines of the
> projection info  in that source NITF: Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9108"]],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-75],
>     PARAMETER["scale_factor",0.996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0]]
> 
> 
> I suppose I can go back through my code and change it to be exactly like
> gdal_translate, which seems to use the C bindings instead of C++.  I did
> end up changing my progress reporting function to the same one that is in
> gdal_translate as well, which had no change. I will try the debugging
> route before too much trouble, to see what I can find out.
> 
> Thanks for the help so far. I will report back what I find.
> 
> 
> 
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Thursday, July 07, 2011 2:13 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
> 
> Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> > Well, I am about to give up on this I think and go a different route for
> > creating a NITF from this data.
> > 
> > I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> > NITF.
> 
> Yes, that's very poor performance !
> 
> > here is the output I got after turning on CPL_DEBUG
> > 
> > GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> > succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> > GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> > GDAL: GDALDefaultOverviews::OverviewScan()
> > GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> > Warning 6: NITF only supports WGS84 geographic and UTM projections.
> > 
> > 0GDAL: Potential thrashing on band 1 of
> > /home/dcole/eraser/Images/dan_data.ntf.
> > ...10...20...30...40...50...60...70...80...90...100 - done.
> > ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> > NITFWriteIGEOGLO() fails.
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> > 
> > GDAL: GDALDefaultOverviews::OverviewScan()
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> 
> This error seems to indicate that your source dataset has an incompatible
> projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is
> weird because your source dataset seems to be a NITF itself... What does
> gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?
> 
> But I don't believe it relates with performance. And I suppose you get the
> same warnings when using gdal_translate.
> 
> > So to try to remedy this I changed the cachemax (programmatically)
> > anywhere from 40MB to 3GB trying to see if any setting had any effect.
> > It was about the same no matter what.
> 
> For a 80MB file, playing with cachemax won't give any significant speed-up.
> 
> > I tried doing a gdal_translate on this file, which only took about a
> > second.
> 
> That's much more reasonable. Well, then that shows it's not an issue in
> GDAL per se, but how you use it. Now, you "just" have to discover what
> things you do which are different from gdal_translate.
> 
> > Looking through the source for that, it seems like I am doing
> > approximately the same thing in relation to the CreateCopy(), so I am not
> > sure what the problem is. However, my viewer which uses GDAL to read the
> > original NITF file I am reading in will NOT read the translated NITF file
> > that is generated.
> 
> I've just reviewed the code snippet you pasted yesterday and I see that you
> use a custom progress function. Isn't there a sleep() or some slow
> operation in it ?
> 
> For debugging performance issues, I start by just running the code under a
> debugger and to break and resume execution regularly. In 90% of the cases,
> you will see easily the bottleneck because the same function comes again
> and again. Otherwise you might need more advanced tools. sysprof or
> kcachegrind under Linux might be usefull to get timing profiles.
> 
> > Any idea why the gdal_translate might be running faster than my
> > CreateCopy, even though the parameters are just about identical?
> > 
> > Derek
> > ________________________________________
> > From: Even Rouault [even.rouault@mines-paris.org]
> > Sent: Wednesday, July 06, 2011 5:32 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Cole, Derek
> > Subject: Re: [gdal-dev] Creating modified copies of a file
> > 
> > Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > > I have noticed that when attempting to do this, I am able to do a
> > > gdalinfo on the source and destination files (even if the destination
> > > file is not complete, it seems the header gets created, and gdalinfo
> > > recognizes teh file).
> > > 
> > > Is it possible that this is taking so long because my destination file
> > > has no geocoords or projection information? It seems like createcopy is
> > > not replicating all of the variables in the original and I am having to
> > > manually set some things, such as Block size, ABPP, etc etc.
> > 
> > This is expected. When doing CreateCopy() the target driver has no idea
> > what the source driver is, so he will not recognize ABPP. As far as block
> > sizes are concerned, it is up to the user to decide if he wants to keep
> > or change the block dimension of the source dataset.
> > 
> > I'm a bit surprised that CreateCopy() is *that* much slower than cp, but
> > it is hard to know why without a hard work of profiling. It might be
> > related to pixel or band interleaving, etc... There might cache
> > trashing. You could perhaps run with CPL_DEBUG=ON and see if interesting
> > info comes up.
> > 
> > > And the
> > > coordinates and projection information is blank in the new file. Is
> > > there perhaps some calculations being done to correct that issue, and
> > > thats why the copy is taking forever?
> > 
> > No, not related at all.
> > 
> > > I thought based on the documentation
> > > CreateCopy() would clone the file's raster, as well as size, type,
> > > projection, geotransform, etc, but all of this is not showing up in the
> > > partially created file at least.
> > 
> > You cannot reliably trust gdalinfo on a file still being written.
> > Depending on the driver some information might just be written at the
> > end of the process. A quick look at the CreateCopy() implementation of
> > the NITF driver suggests that this is indeed the case since the
> > geotransform is set after the imagery.
> > _______________________________________________ gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dcole at integrity-apps.com  Thu Jul  7 18:20:20 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul  7 22:59:55 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <201107080007.12696.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A763@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A7D6@CHUNEX01.integrity-apps.com>,
	<201107080007.12696.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903C0A805@CHUNEX01.integrity-apps.com>

C:

        GDALDatasetH	hDataset, hOutDS;
        const char		*pszSource=NULL, *pszDest=NULL, *pszFormat = "NITF";
        char                **papszCreateOptions = NULL;
        GDALProgressFunc    pfnProgress = GDALTermProgress;
        GDALDriverH hDriver;

        hDriver = GDALGetDriverByName( pszFormat );
        pszSource = this->loadedFile.toStdString().c_str();
        pszDest = "testout.ntf";
        hDataset = GDALOpenShared( pszSource, GA_ReadOnly );

    char **papszOptions = NULL;

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "ABPP", "11" );

    hOutDS = GDALCreateCopy( hDriver, pszDest, hDataset, FALSE, papszOptions, pfnProgress, NULL );

C++:

 GDALProgressFunc    pfnProgress = GDALTermProgress;
    const char *pszFormat = "NITF";
    GDALDataset *poNITFDS;
    char ** papszMetadata;
    GDALDriver *poNITFDriver;
    GDALDataset  *poDataset;
    const char *pszDstFilename = "test1.ntf";

    poDataset = (GDALDataset *) GDALOpenShared( this->loadedFile.toStdString().c_str(), GA_ReadOnly );

    poNITFDriver = (GDALDriver *)GDALGetDriverByName("NITF");
    papszMetadata = poNITFDriver->GetMetadata();

    if( poNITFDriver == NULL )
        exit( 1 );

    char **papszOptions = NULL;

    const char *srcProjection = poDataset->GetGCPProjection();

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "ABPP", "11" );

    poNITFDS = poNITFDriver->CreateCopy(pszDstFilename, poDataset, FALSE,  papszOptions, pfnProgress, NULL);


Perhaps you can tell me. These are the direct copies of the two latest versions of the code I tried. It could very well be that if I tried the C++ version again with the cache storage values corrected, it would speed up. I may try that just to make sure. 

Also, you may be right about the cache options. I noticed just now in the API declaration, it calls the variable nBytes, but down in the API it just calls it nNewSize, and I think I had read somewhere that the command line option was in MB, so that may be my bad. Is my assertion that it must come before registering drivers correct?

________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Thursday, July 07, 2011 6:07 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le jeudi 07 juillet 2011 23:46:11, Cole, Derek a ?crit :
> So that this may help anyone in the future - it seems like I may have
> solved the problem for now! After looking through gdal_translate, it
> appears that they are using the C API instead of C++ for the CreateCopy. I
> switched my code to the C API instead of C++ just for consistency sake,
> and sure enough, my CreateCopy was sped up tremendously!

Really ??? That doesn't make any sense. The C function GDALCreateCopy() is
just a one line wrapper over the C++ API. I'm 200% sure there must be another
difference in the values of the arguments between your C and C++ call. You
should recheck...

>
> For the smaller test file I was playing with, the output file was not
> viewable in my viewer until I made some adjustments, primarily, setting
> the block size of the copy to be the same as the original. if you dont set
> it explicitely you get row-wise blocks.

Yes, row-wise blocks are the default. Tiling must be explicitely set up with
teh BLOCKXSIZE and BLOCKYSIZE creation options.

>
> One other quirk - I was not able to use the GDALSetCacheMax() function ,

What do you mean by "not being able to use the GDALSetCacheMax()" ? Are you
sure you specified the value in bytes as specified in the doc. I suspect you
must have set a value in megabytes, because when the GDAL_CACHEMAX
configuration option is read, there's a magic to automatically multiply small
values (< 100000) by one million. That could explain why you manage to achieve
the desired effect by using CPLSetConfigOption().

> and instead switched that to the CPLSetConfigOption() function, AND I had
> to move it to be before I call GDALAllRegister() it appears, or I was
> still getting cache thrashing warnings.
>
> If I get some time, or if someone else does, it might be nice to narrow
> down what exactly in the C++ API was causing the problem.
>
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 3:20 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
>
> I actually just out of curiosity tried to open the file given by this
> command:
>
> gdal_translate dan_data.ntf dan_data_translate.ntf
>
> And it turns out that dan_data_translate.ntf was actually a TIFF file that
> I could view. I had to explicitly add the option -of NITF
>
> in which case it still did the translate very fast, but I did get warnings:
>
> $ gdal_translate dan_data.ntf dan_data_translate.ntf -of NITF
> Input file size is 8689, 7679
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
>
> Which jives with what my code was giving me, and further,
> dan_data_translate.ntf is not able to be opened using my viewer (which
> uses GDAL to open the files I have been working with, of course, and does
> open dan_data.ntf) because of a segmentation fault  in the RasterIO
> method. I am able to open the gdal_translate file, and my CreateCopy()
> file in another ELT, such as ENVI.
>
> I will also make note that the original file is exactly 72.0 MB, and the
> output file is 63.6MB, but both files say in gdalinfo they are not using
> compression. This is the same for my CreateCopy() or gdal_translate. So at
> least I have narrowed down that I am apparently getting the same
> end-result as gdal_translate, albeit way slower. Finally, the output file
> seems to have created row-blocks, instead of 1024x1024 blocks like the
> original.
>
> I will continue working to replicate gdal_translate exactly, even though
> now i am not optimistic about getting a good result.
>
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 2:48 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
>
> Yes, the source data is a NITF. Here is the first few lines of the
> projection info  in that source NITF: Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9108"]],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-75],
>     PARAMETER["scale_factor",0.996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0]]
>
>
> I suppose I can go back through my code and change it to be exactly like
> gdal_translate, which seems to use the C bindings instead of C++.  I did
> end up changing my progress reporting function to the same one that is in
> gdal_translate as well, which had no change. I will try the debugging
> route before too much trouble, to see what I can find out.
>
> Thanks for the help so far. I will report back what I find.
>
>
>
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Thursday, July 07, 2011 2:13 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> > Well, I am about to give up on this I think and go a different route for
> > creating a NITF from this data.
> >
> > I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> > NITF.
>
> Yes, that's very poor performance !
>
> > here is the output I got after turning on CPL_DEBUG
> >
> > GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> > succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> > GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> > GDAL: GDALDefaultOverviews::OverviewScan()
> > GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> > Warning 6: NITF only supports WGS84 geographic and UTM projections.
> >
> > 0GDAL: Potential thrashing on band 1 of
> > /home/dcole/eraser/Images/dan_data.ntf.
> > ...10...20...30...40...50...60...70...80...90...100 - done.
> > ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> > NITFWriteIGEOGLO() fails.
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> >
> > GDAL: GDALDefaultOverviews::OverviewScan()
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
> This error seems to indicate that your source dataset has an incompatible
> projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is
> weird because your source dataset seems to be a NITF itself... What does
> gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?
>
> But I don't believe it relates with performance. And I suppose you get the
> same warnings when using gdal_translate.
>
> > So to try to remedy this I changed the cachemax (programmatically)
> > anywhere from 40MB to 3GB trying to see if any setting had any effect.
> > It was about the same no matter what.
>
> For a 80MB file, playing with cachemax won't give any significant speed-up.
>
> > I tried doing a gdal_translate on this file, which only took about a
> > second.
>
> That's much more reasonable. Well, then that shows it's not an issue in
> GDAL per se, but how you use it. Now, you "just" have to discover what
> things you do which are different from gdal_translate.
>
> > Looking through the source for that, it seems like I am doing
> > approximately the same thing in relation to the CreateCopy(), so I am not
> > sure what the problem is. However, my viewer which uses GDAL to read the
> > original NITF file I am reading in will NOT read the translated NITF file
> > that is generated.
>
> I've just reviewed the code snippet you pasted yesterday and I see that you
> use a custom progress function. Isn't there a sleep() or some slow
> operation in it ?
>
> For debugging performance issues, I start by just running the code under a
> debugger and to break and resume execution regularly. In 90% of the cases,
> you will see easily the bottleneck because the same function comes again
> and again. Otherwise you might need more advanced tools. sysprof or
> kcachegrind under Linux might be usefull to get timing profiles.
>
> > Any idea why the gdal_translate might be running faster than my
> > CreateCopy, even though the parameters are just about identical?
> >
> > Derek
> > ________________________________________
> > From: Even Rouault [even.rouault@mines-paris.org]
> > Sent: Wednesday, July 06, 2011 5:32 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Cole, Derek
> > Subject: Re: [gdal-dev] Creating modified copies of a file
> >
> > Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > > I have noticed that when attempting to do this, I am able to do a
> > > gdalinfo on the source and destination files (even if the destination
> > > file is not complete, it seems the header gets created, and gdalinfo
> > > recognizes teh file).
> > >
> > > Is it possible that this is taking so long because my destination file
> > > has no geocoords or projection information? It seems like createcopy is
> > > not replicating all of the variables in the original and I am having to
> > > manually set some things, such as Block size, ABPP, etc etc.
> >
> > This is expected. When doing CreateCopy() the target driver has no idea
> > what the source driver is, so he will not recognize ABPP. As far as block
> > sizes are concerned, it is up to the user to decide if he wants to keep
> > or change the block dimension of the source dataset.
> >
> > I'm a bit surprised that CreateCopy() is *that* much slower than cp, but
> > it is hard to know why without a hard work of profiling. It might be
> > related to pixel or band interleaving, etc... There might cache
> > trashing. You could perhaps run with CPL_DEBUG=ON and see if interesting
> > info comes up.
> >
> > > And the
> > > coordinates and projection information is blank in the new file. Is
> > > there perhaps some calculations being done to correct that issue, and
> > > thats why the copy is taking forever?
> >
> > No, not related at all.
> >
> > > I thought based on the documentation
> > > CreateCopy() would clone the file's raster, as well as size, type,
> > > projection, geotransform, etc, but all of this is not showing up in the
> > > partially created file at least.
> >
> > You cannot reliably trust gdalinfo on a file still being written.
> > Depending on the driver some information might just be written at the
> > end of the process. A quick look at the CreateCopy() implementation of
> > the NITF driver suggests that this is indeed the case since the
> > geotransform is set after the imagery.
> > _______________________________________________ gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From dcole at integrity-apps.com  Thu Jul  7 18:25:04 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul  7 23:04:52 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903C0A805@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A763@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A7D6@CHUNEX01.integrity-apps.com>, 
	<201107080007.12696.even.rouault@mines-paris.org>,
	<8406B84EA8899042A8508D858843972903C0A805@CHUNEX01.integrity-apps.com>
Message-ID: <8406B84EA8899042A8508D858843972903C0A81B@CHUNEX01.integrity-apps.com>

Even, thanks for the help by the way. Hopefully I can return the favor some day, as it looks like I am going to be getting quite familiar with this.

I think the caching value was the issue perhaps, and I just happened to get it working correclty in the C version. Oh well, at least if someone finds this thread, they can see both ways of doing it.

Derek
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] on behalf of Cole, Derek [dcole@integrity-apps.com]
Sent: Thursday, July 07, 2011 6:20 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Creating modified copies of a file

NOTICE:  A potentially dangerous attachment(s) to this email was identified.  Please do NOT open any attachments, unless you are expecting them, and they are from a trusted source, as unsolicited attachments can contain malware.  Please call the Helpdesk @ x.275 for assistance or questions.

Thank you,
The IAI IT Team

C:

        GDALDatasetH    hDataset, hOutDS;
        const char              *pszSource=NULL, *pszDest=NULL, *pszFormat = "NITF";
        char                **papszCreateOptions = NULL;
        GDALProgressFunc    pfnProgress = GDALTermProgress;
        GDALDriverH hDriver;

        hDriver = GDALGetDriverByName( pszFormat );
        pszSource = this->loadedFile.toStdString().c_str();
        pszDest = "testout.ntf";
        hDataset = GDALOpenShared( pszSource, GA_ReadOnly );

    char **papszOptions = NULL;

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "ABPP", "11" );

    hOutDS = GDALCreateCopy( hDriver, pszDest, hDataset, FALSE, papszOptions, pfnProgress, NULL );

C++:

 GDALProgressFunc    pfnProgress = GDALTermProgress;
    const char *pszFormat = "NITF";
    GDALDataset *poNITFDS;
    char ** papszMetadata;
    GDALDriver *poNITFDriver;
    GDALDataset  *poDataset;
    const char *pszDstFilename = "test1.ntf";

    poDataset = (GDALDataset *) GDALOpenShared( this->loadedFile.toStdString().c_str(), GA_ReadOnly );

    poNITFDriver = (GDALDriver *)GDALGetDriverByName("NITF");
    papszMetadata = poNITFDriver->GetMetadata();

    if( poNITFDriver == NULL )
        exit( 1 );

    char **papszOptions = NULL;

    const char *srcProjection = poDataset->GetGCPProjection();

    papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
    papszOptions = CSLSetNameValue( papszOptions, "ABPP", "11" );

    poNITFDS = poNITFDriver->CreateCopy(pszDstFilename, poDataset, FALSE,  papszOptions, pfnProgress, NULL);


Perhaps you can tell me. These are the direct copies of the two latest versions of the code I tried. It could very well be that if I tried the C++ version again with the cache storage values corrected, it would speed up. I may try that just to make sure.

Also, you may be right about the cache options. I noticed just now in the API declaration, it calls the variable nBytes, but down in the API it just calls it nNewSize, and I think I had read somewhere that the command line option was in MB, so that may be my bad. Is my assertion that it must come before registering drivers correct?

________________________________________
From: Even Rouault [even.rouault@mines-paris.org]
Sent: Thursday, July 07, 2011 6:07 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Creating modified copies of a file

Le jeudi 07 juillet 2011 23:46:11, Cole, Derek a ?crit :
> So that this may help anyone in the future - it seems like I may have
> solved the problem for now! After looking through gdal_translate, it
> appears that they are using the C API instead of C++ for the CreateCopy. I
> switched my code to the C API instead of C++ just for consistency sake,
> and sure enough, my CreateCopy was sped up tremendously!

Really ??? That doesn't make any sense. The C function GDALCreateCopy() is
just a one line wrapper over the C++ API. I'm 200% sure there must be another
difference in the values of the arguments between your C and C++ call. You
should recheck...

>
> For the smaller test file I was playing with, the output file was not
> viewable in my viewer until I made some adjustments, primarily, setting
> the block size of the copy to be the same as the original. if you dont set
> it explicitely you get row-wise blocks.

Yes, row-wise blocks are the default. Tiling must be explicitely set up with
teh BLOCKXSIZE and BLOCKYSIZE creation options.

>
> One other quirk - I was not able to use the GDALSetCacheMax() function ,

What do you mean by "not being able to use the GDALSetCacheMax()" ? Are you
sure you specified the value in bytes as specified in the doc. I suspect you
must have set a value in megabytes, because when the GDAL_CACHEMAX
configuration option is read, there's a magic to automatically multiply small
values (< 100000) by one million. That could explain why you manage to achieve
the desired effect by using CPLSetConfigOption().

> and instead switched that to the CPLSetConfigOption() function, AND I had
> to move it to be before I call GDALAllRegister() it appears, or I was
> still getting cache thrashing warnings.
>
> If I get some time, or if someone else does, it might be nice to narrow
> down what exactly in the C++ API was causing the problem.
>
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 3:20 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
>
> I actually just out of curiosity tried to open the file given by this
> command:
>
> gdal_translate dan_data.ntf dan_data_translate.ntf
>
> And it turns out that dan_data_translate.ntf was actually a TIFF file that
> I could view. I had to explicitly add the option -of NITF
>
> in which case it still did the translate very fast, but I did get warnings:
>
> $ gdal_translate dan_data.ntf dan_data_translate.ntf -of NITF
> Input file size is 8689, 7679
> Warning 6: NITF only supports WGS84 geographic and UTM projections.
>
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> NITFWriteIGEOGLO() fails.
> ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
>
> Which jives with what my code was giving me, and further,
> dan_data_translate.ntf is not able to be opened using my viewer (which
> uses GDAL to open the files I have been working with, of course, and does
> open dan_data.ntf) because of a segmentation fault  in the RasterIO
> method. I am able to open the gdal_translate file, and my CreateCopy()
> file in another ELT, such as ENVI.
>
> I will also make note that the original file is exactly 72.0 MB, and the
> output file is 63.6MB, but both files say in gdalinfo they are not using
> compression. This is the same for my CreateCopy() or gdal_translate. So at
> least I have narrowed down that I am apparently getting the same
> end-result as gdal_translate, albeit way slower. Finally, the output file
> seems to have created row-blocks, instead of 1024x1024 blocks like the
> original.
>
> I will continue working to replicate gdal_translate exactly, even though
> now i am not optimistic about getting a good result.
>
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 2:48 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
>
> Yes, the source data is a NITF. Here is the first few lines of the
> projection info  in that source NITF: Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["WGS 84",
>         DATUM["WGS_1984",
>             SPHEROID["WGS 84",6378137,298.257223563,
>                 AUTHORITY["EPSG","7030"]],
>             TOWGS84[0,0,0,0,0,0,0],
>             AUTHORITY["EPSG","6326"]],
>         PRIMEM["Greenwich",0,
>             AUTHORITY["EPSG","8901"]],
>         UNIT["degree",0.0174532925199433,
>             AUTHORITY["EPSG","9108"]],
>         AUTHORITY["EPSG","4326"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-75],
>     PARAMETER["scale_factor",0.996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0]]
>
>
> I suppose I can go back through my code and change it to be exactly like
> gdal_translate, which seems to use the C bindings instead of C++.  I did
> end up changing my progress reporting function to the same one that is in
> gdal_translate as well, which had no change. I will try the debugging
> route before too much trouble, to see what I can find out.
>
> Thanks for the help so far. I will report back what I find.
>
>
>
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Thursday, July 07, 2011 2:13 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
>
> Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> > Well, I am about to give up on this I think and go a different route for
> > creating a NITF from this data.
> >
> > I tried a small test file, and it takes about 45s to CopyCrate() an 80mb
> > NITF.
>
> Yes, that's very poor performance !
>
> > here is the output I got after turning on CPL_DEBUG
> >
> > GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> > succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> > GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> > GDAL: GDALDefaultOverviews::OverviewScan()
> > GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> > Warning 6: NITF only supports WGS84 geographic and UTM projections.
> >
> > 0GDAL: Potential thrashing on band 1 of
> > /home/dcole/eraser/Images/dan_data.ntf.
> > ...10...20...30...40...50...60...70...80...90...100 - done.
> > ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> > NITFWriteIGEOGLO() fails.
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> >
> > GDAL: GDALDefaultOverviews::OverviewScan()
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
>
> This error seems to indicate that your source dataset has an incompatible
> projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this is
> weird because your source dataset seems to be a NITF itself... What does
> gdalinfo returns as projection for /home/dcole/eraser/Images/dan_data.ntf ?
>
> But I don't believe it relates with performance. And I suppose you get the
> same warnings when using gdal_translate.
>
> > So to try to remedy this I changed the cachemax (programmatically)
> > anywhere from 40MB to 3GB trying to see if any setting had any effect.
> > It was about the same no matter what.
>
> For a 80MB file, playing with cachemax won't give any significant speed-up.
>
> > I tried doing a gdal_translate on this file, which only took about a
> > second.
>
> That's much more reasonable. Well, then that shows it's not an issue in
> GDAL per se, but how you use it. Now, you "just" have to discover what
> things you do which are different from gdal_translate.
>
> > Looking through the source for that, it seems like I am doing
> > approximately the same thing in relation to the CreateCopy(), so I am not
> > sure what the problem is. However, my viewer which uses GDAL to read the
> > original NITF file I am reading in will NOT read the translated NITF file
> > that is generated.
>
> I've just reviewed the code snippet you pasted yesterday and I see that you
> use a custom progress function. Isn't there a sleep() or some slow
> operation in it ?
>
> For debugging performance issues, I start by just running the code under a
> debugger and to break and resume execution regularly. In 90% of the cases,
> you will see easily the bottleneck because the same function comes again
> and again. Otherwise you might need more advanced tools. sysprof or
> kcachegrind under Linux might be usefull to get timing profiles.
>
> > Any idea why the gdal_translate might be running faster than my
> > CreateCopy, even though the parameters are just about identical?
> >
> > Derek
> > ________________________________________
> > From: Even Rouault [even.rouault@mines-paris.org]
> > Sent: Wednesday, July 06, 2011 5:32 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Cole, Derek
> > Subject: Re: [gdal-dev] Creating modified copies of a file
> >
> > Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > > I have noticed that when attempting to do this, I am able to do a
> > > gdalinfo on the source and destination files (even if the destination
> > > file is not complete, it seems the header gets created, and gdalinfo
> > > recognizes teh file).
> > >
> > > Is it possible that this is taking so long because my destination file
> > > has no geocoords or projection information? It seems like createcopy is
> > > not replicating all of the variables in the original and I am having to
> > > manually set some things, such as Block size, ABPP, etc etc.
> >
> > This is expected. When doing CreateCopy() the target driver has no idea
> > what the source driver is, so he will not recognize ABPP. As far as block
> > sizes are concerned, it is up to the user to decide if he wants to keep
> > or change the block dimension of the source dataset.
> >
> > I'm a bit surprised that CreateCopy() is *that* much slower than cp, but
> > it is hard to know why without a hard work of profiling. It might be
> > related to pixel or band interleaving, etc... There might cache
> > trashing. You could perhaps run with CPL_DEBUG=ON and see if interesting
> > info comes up.
> >
> > > And the
> > > coordinates and projection information is blank in the new file. Is
> > > there perhaps some calculations being done to correct that issue, and
> > > thats why the copy is taking forever?
> >
> > No, not related at all.
> >
> > > I thought based on the documentation
> > > CreateCopy() would clone the file's raster, as well as size, type,
> > > projection, geotransform, etc, but all of this is not showing up in the
> > > partially created file at least.
> >
> > You cannot reliably trust gdalinfo on a file still being written.
> > Depending on the driver some information might just be written at the
> > end of the process. A quick look at the CreateCopy() implementation of
> > the NITF driver suggests that this is indeed the case since the
> > geotransform is set after the imagery.
> > _______________________________________________ gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Thu Jul  7 18:34:02 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul  7 23:13:46 2011
Subject: [gdal-dev] Creating modified copies of a file
In-Reply-To: <8406B84EA8899042A8508D858843972903C0A81B@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903BF0376@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A805@CHUNEX01.integrity-apps.com>
	<8406B84EA8899042A8508D858843972903C0A81B@CHUNEX01.integrity-apps.com>
Message-ID: <201107080034.02575.even.rouault@mines-paris.org>

Le vendredi 08 juillet 2011 00:25:04, Cole, Derek a ?crit :
> Even, thanks for the help by the way. Hopefully I can return the favor some
> day, as it looks like I am going to be getting quite familiar with this.
> 
> I think the caching value was the issue perhaps, 

Yes certainly, if you provided a very small value to GDALSetCacheMax() 
(smaller than the size of one block), you will run into very intensive cache 
trashing because you won't have enough memory to store more than one block at 
a time... And that can cause terrible performance due to a huge number of I/O 
access.

And to answer the question of your previous email, if you set the 
GDAL_CACHEMAX configuration option, you must do it before the first time GDAL 
tries to access to it internally, so in practice, to be safe, before 
initializing GDAL with GDALAllRegister(). Indeed, after the first access, the 
value is stored into an internal variable and isn't read any more from the 
configuration option.

> and I just happened to get
> it working correclty in the C version. Oh well, at least if someone finds
> this thread, they can see both ways of doing it.
> 
> Derek
> ________________________________________
> From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> 07, 2011 6:20 PM
> To: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Creating modified copies of a file
> 
> NOTICE:  A potentially dangerous attachment(s) to this email was
> identified.  Please do NOT open any attachments, unless you are expecting
> them, and they are from a trusted source, as unsolicited attachments can
> contain malware.  Please call the Helpdesk @ x.275 for assistance or
> questions.
> 
> Thank you,
> The IAI IT Team
> 
> C:
> 
>         GDALDatasetH    hDataset, hOutDS;
>         const char              *pszSource=NULL, *pszDest=NULL, *pszFormat
> = "NITF"; char                **papszCreateOptions = NULL;
>         GDALProgressFunc    pfnProgress = GDALTermProgress;
>         GDALDriverH hDriver;
> 
>         hDriver = GDALGetDriverByName( pszFormat );
>         pszSource = this->loadedFile.toStdString().c_str();
>         pszDest = "testout.ntf";
>         hDataset = GDALOpenShared( pszSource, GA_ReadOnly );
> 
>     char **papszOptions = NULL;
> 
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "ABPP", "11" );
> 
>     hOutDS = GDALCreateCopy( hDriver, pszDest, hDataset, FALSE,
> papszOptions, pfnProgress, NULL );
> 
> C++:
> 
>  GDALProgressFunc    pfnProgress = GDALTermProgress;
>     const char *pszFormat = "NITF";
>     GDALDataset *poNITFDS;
>     char ** papszMetadata;
>     GDALDriver *poNITFDriver;
>     GDALDataset  *poDataset;
>     const char *pszDstFilename = "test1.ntf";
> 
>     poDataset = (GDALDataset *) GDALOpenShared(
> this->loadedFile.toStdString().c_str(), GA_ReadOnly );
> 
>     poNITFDriver = (GDALDriver *)GDALGetDriverByName("NITF");
>     papszMetadata = poNITFDriver->GetMetadata();
> 
>     if( poNITFDriver == NULL )
>         exit( 1 );
> 
>     char **papszOptions = NULL;
> 
>     const char *srcProjection = poDataset->GetGCPProjection();
> 
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKXSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "BLOCKYSIZE", "1024" );
>     papszOptions = CSLSetNameValue( papszOptions, "ABPP", "11" );
> 
>     poNITFDS = poNITFDriver->CreateCopy(pszDstFilename, poDataset, FALSE, 
> papszOptions, pfnProgress, NULL);
> 
> 
> Perhaps you can tell me. These are the direct copies of the two latest
> versions of the code I tried. It could very well be that if I tried the
> C++ version again with the cache storage values corrected, it would speed
> up. I may try that just to make sure.
> 
> Also, you may be right about the cache options. I noticed just now in the
> API declaration, it calls the variable nBytes, but down in the API it just
> calls it nNewSize, and I think I had read somewhere that the command line
> option was in MB, so that may be my bad. Is my assertion that it must come
> before registering drivers correct?
> 
> ________________________________________
> From: Even Rouault [even.rouault@mines-paris.org]
> Sent: Thursday, July 07, 2011 6:07 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Cole, Derek
> Subject: Re: [gdal-dev] Creating modified copies of a file
> 
> Le jeudi 07 juillet 2011 23:46:11, Cole, Derek a ?crit :
> > So that this may help anyone in the future - it seems like I may have
> > solved the problem for now! After looking through gdal_translate, it
> > appears that they are using the C API instead of C++ for the CreateCopy.
> > I switched my code to the C API instead of C++ just for consistency
> > sake, and sure enough, my CreateCopy was sped up tremendously!
> 
> Really ??? That doesn't make any sense. The C function GDALCreateCopy() is
> just a one line wrapper over the C++ API. I'm 200% sure there must be
> another difference in the values of the arguments between your C and C++
> call. You should recheck...
> 
> > For the smaller test file I was playing with, the output file was not
> > viewable in my viewer until I made some adjustments, primarily, setting
> > the block size of the copy to be the same as the original. if you dont
> > set it explicitely you get row-wise blocks.
> 
> Yes, row-wise blocks are the default. Tiling must be explicitely set up
> with teh BLOCKXSIZE and BLOCKYSIZE creation options.
> 
> > One other quirk - I was not able to use the GDALSetCacheMax() function ,
> 
> What do you mean by "not being able to use the GDALSetCacheMax()" ? Are you
> sure you specified the value in bytes as specified in the doc. I suspect
> you must have set a value in megabytes, because when the GDAL_CACHEMAX
> configuration option is read, there's a magic to automatically multiply
> small values (< 100000) by one million. That could explain why you manage
> to achieve the desired effect by using CPLSetConfigOption().
> 
> > and instead switched that to the CPLSetConfigOption() function, AND I had
> > to move it to be before I call GDALAllRegister() it appears, or I was
> > still getting cache thrashing warnings.
> > 
> > If I get some time, or if someone else does, it might be nice to narrow
> > down what exactly in the C++ API was causing the problem.
> > 
> > Derek
> > ________________________________________
> > From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> > on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> > 07, 2011 3:20 PM
> > To: gdal-dev@lists.osgeo.org
> > Subject: RE: [gdal-dev] Creating modified copies of a file
> > 
> > I actually just out of curiosity tried to open the file given by this
> > command:
> > 
> > gdal_translate dan_data.ntf dan_data_translate.ntf
> > 
> > And it turns out that dan_data_translate.ntf was actually a TIFF file
> > that I could view. I had to explicitly add the option -of NITF
> > 
> > in which case it still did the translate very fast, but I did get
> > warnings:
> > 
> > $ gdal_translate dan_data.ntf dan_data_translate.ntf -of NITF
> > Input file size is 8689, 7679
> > Warning 6: NITF only supports WGS84 geographic and UTM projections.
> > 
> > 0...10...20...30...40...50...60...70...80...90...100 - done.
> > ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> > NITFWriteIGEOGLO() fails.
> > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> > 
> > 
> > Which jives with what my code was giving me, and further,
> > dan_data_translate.ntf is not able to be opened using my viewer (which
> > uses GDAL to open the files I have been working with, of course, and does
> > open dan_data.ntf) because of a segmentation fault  in the RasterIO
> > method. I am able to open the gdal_translate file, and my CreateCopy()
> > file in another ELT, such as ENVI.
> > 
> > I will also make note that the original file is exactly 72.0 MB, and the
> > output file is 63.6MB, but both files say in gdalinfo they are not using
> > compression. This is the same for my CreateCopy() or gdal_translate. So
> > at least I have narrowed down that I am apparently getting the same
> > end-result as gdal_translate, albeit way slower. Finally, the output
> > file seems to have created row-blocks, instead of 1024x1024 blocks like
> > the original.
> > 
> > I will continue working to replicate gdal_translate exactly, even though
> > now i am not optimistic about getting a good result.
> > 
> > ________________________________________
> > From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org]
> > on behalf of Cole, Derek [dcole@integrity-apps.com] Sent: Thursday, July
> > 07, 2011 2:48 PM
> > To: gdal-dev@lists.osgeo.org
> > Subject: RE: [gdal-dev] Creating modified copies of a file
> > 
> > Yes, the source data is a NITF. Here is the first few lines of the
> > projection info  in that source NITF: Coordinate System is:
> > PROJCS["unnamed",
> > 
> >     GEOGCS["WGS 84",
> >     
> >         DATUM["WGS_1984",
> >         
> >             SPHEROID["WGS 84",6378137,298.257223563,
> >             
> >                 AUTHORITY["EPSG","7030"]],
> >             
> >             TOWGS84[0,0,0,0,0,0,0],
> >             AUTHORITY["EPSG","6326"]],
> >         
> >         PRIMEM["Greenwich",0,
> >         
> >             AUTHORITY["EPSG","8901"]],
> >         
> >         UNIT["degree",0.0174532925199433,
> >         
> >             AUTHORITY["EPSG","9108"]],
> >         
> >         AUTHORITY["EPSG","4326"]],
> >     
> >     PROJECTION["Transverse_Mercator"],
> >     PARAMETER["latitude_of_origin",0],
> >     PARAMETER["central_meridian",-75],
> >     PARAMETER["scale_factor",0.996],
> >     PARAMETER["false_easting",500000],
> >     PARAMETER["false_northing",0]]
> > 
> > I suppose I can go back through my code and change it to be exactly like
> > gdal_translate, which seems to use the C bindings instead of C++.  I did
> > end up changing my progress reporting function to the same one that is in
> > gdal_translate as well, which had no change. I will try the debugging
> > route before too much trouble, to see what I can find out.
> > 
> > Thanks for the help so far. I will report back what I find.
> > 
> > 
> > 
> > ________________________________________
> > From: Even Rouault [even.rouault@mines-paris.org]
> > Sent: Thursday, July 07, 2011 2:13 PM
> > To: gdal-dev@lists.osgeo.org
> > Cc: Cole, Derek
> > Subject: Re: [gdal-dev] Creating modified copies of a file
> > 
> > Le jeudi 07 juillet 2011 19:52:34, Cole, Derek a ?crit :
> > > Well, I am about to give up on this I think and go a different route
> > > for creating a NITF from this data.
> > > 
> > > I tried a small test file, and it takes about 45s to CopyCrate() an
> > > 80mb NITF.
> > 
> > Yes, that's very poor performance !
> > 
> > > here is the output I got after turning on CPL_DEBUG
> > > 
> > > GDAL: GDALOpen(/home/dcole/eraser/Images/dan_data.ntf, this=0x1ad7ec70)
> > > succeeds as NITF. GDAL: QuietDelete(test1.ntf) invoking Delete()
> > > GDAL: GDALOpen(test1.ntf, this=0x1ad81180) succeeds as NITF.
> > > GDAL: GDALDefaultOverviews::OverviewScan()
> > > GDAL: GDALClose(test1.ntf, this=0x1ad81180)
> > > Warning 6: NITF only supports WGS84 geographic and UTM projections.
> > > 
> > > 0GDAL: Potential thrashing on band 1 of
> > > /home/dcole/eraser/Images/dan_data.ntf.
> > > ...10...20...30...40...50...60...70...80...90...100 - done.
> > > ERROR 6: Apparently no space reserved for IGEOLO info in NITF file.
> > > NITFWriteIGEOGLO() fails.
> > > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> > > 
> > > GDAL: GDALDefaultOverviews::OverviewScan()
> > > ERROR 6: NITF only supports WGS84 geographic and UTM projections.
> > 
> > This error seems to indicate that your source dataset has an incompatible
> > projection with what NITF allows (UTM/WGS84 and LongLat/WGS84). But this
> > is weird because your source dataset seems to be a NITF itself... What
> > does gdalinfo returns as projection for
> > /home/dcole/eraser/Images/dan_data.ntf ?
> > 
> > But I don't believe it relates with performance. And I suppose you get
> > the same warnings when using gdal_translate.
> > 
> > > So to try to remedy this I changed the cachemax (programmatically)
> > > anywhere from 40MB to 3GB trying to see if any setting had any effect.
> > > It was about the same no matter what.
> > 
> > For a 80MB file, playing with cachemax won't give any significant
> > speed-up.
> > 
> > > I tried doing a gdal_translate on this file, which only took about a
> > > second.
> > 
> > That's much more reasonable. Well, then that shows it's not an issue in
> > GDAL per se, but how you use it. Now, you "just" have to discover what
> > things you do which are different from gdal_translate.
> > 
> > > Looking through the source for that, it seems like I am doing
> > > approximately the same thing in relation to the CreateCopy(), so I am
> > > not sure what the problem is. However, my viewer which uses GDAL to
> > > read the original NITF file I am reading in will NOT read the
> > > translated NITF file that is generated.
> > 
> > I've just reviewed the code snippet you pasted yesterday and I see that
> > you use a custom progress function. Isn't there a sleep() or some slow
> > operation in it ?
> > 
> > For debugging performance issues, I start by just running the code under
> > a debugger and to break and resume execution regularly. In 90% of the
> > cases, you will see easily the bottleneck because the same function
> > comes again and again. Otherwise you might need more advanced tools.
> > sysprof or kcachegrind under Linux might be usefull to get timing
> > profiles.
> > 
> > > Any idea why the gdal_translate might be running faster than my
> > > CreateCopy, even though the parameters are just about identical?
> > > 
> > > Derek
> > > ________________________________________
> > > From: Even Rouault [even.rouault@mines-paris.org]
> > > Sent: Wednesday, July 06, 2011 5:32 PM
> > > To: gdal-dev@lists.osgeo.org
> > > Cc: Cole, Derek
> > > Subject: Re: [gdal-dev] Creating modified copies of a file
> > > 
> > > Le mercredi 06 juillet 2011 23:18:21, Cole, Derek a ?crit :
> > > > I have noticed that when attempting to do this, I am able to do a
> > > > gdalinfo on the source and destination files (even if the destination
> > > > file is not complete, it seems the header gets created, and gdalinfo
> > > > recognizes teh file).
> > > > 
> > > > Is it possible that this is taking so long because my destination
> > > > file has no geocoords or projection information? It seems like
> > > > createcopy is not replicating all of the variables in the original
> > > > and I am having to manually set some things, such as Block size,
> > > > ABPP, etc etc.
> > > 
> > > This is expected. When doing CreateCopy() the target driver has no idea
> > > what the source driver is, so he will not recognize ABPP. As far as
> > > block sizes are concerned, it is up to the user to decide if he wants
> > > to keep or change the block dimension of the source dataset.
> > > 
> > > I'm a bit surprised that CreateCopy() is *that* much slower than cp,
> > > but it is hard to know why without a hard work of profiling. It might
> > > be related to pixel or band interleaving, etc... There might cache
> > > trashing. You could perhaps run with CPL_DEBUG=ON and see if
> > > interesting info comes up.
> > > 
> > > > And the
> > > > coordinates and projection information is blank in the new file. Is
> > > > there perhaps some calculations being done to correct that issue, and
> > > > thats why the copy is taking forever?
> > > 
> > > No, not related at all.
> > > 
> > > > I thought based on the documentation
> > > > CreateCopy() would clone the file's raster, as well as size, type,
> > > > projection, geotransform, etc, but all of this is not showing up in
> > > > the partially created file at least.
> > > 
> > > You cannot reliably trust gdalinfo on a file still being written.
> > > Depending on the driver some information might just be written at the
> > > end of the process. A quick look at the CreateCopy() implementation of
> > > the NITF driver suggests that this is indeed the case since the
> > > geotransform is set after the imagery.
> > > _______________________________________________ gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From katrineggert1980 at gmail.com  Thu Jul  7 20:02:20 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Fri Jul  8 00:47:26 2011
Subject: [gdal-dev] =?iso-8859-1?q?gdalwarp_over_tiles_in_Plate_car=E9e?=
Message-ID: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>

Greetings
I'm using gdalwarp to reproject a few tiles from platecarr? to UTM WGS84
(for a specific zone). Originally they are tiles so they don't have any
"blank" space between them but when I reproject to UTM I get a few areas in
the borders of the image. What can I do to still have a perfect match
between tiles?
Thanks
Kat
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/0b5fc358/attachment.html
From EAdam at co.lincoln.or.us  Thu Jul  7 20:19:38 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Fri Jul  8 01:06:36 2011
Subject: =?UTF-8?Q?Re:=20[gdal-dev]=20gdalwarp=20over=20tiles=20in=20Plat?=
	=?UTF-8?Q?e=20car=C3=A9e?=
In-Reply-To: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
References: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
Message-ID: <4E15EA9F.4F75.00CE.0@co.lincoln.or.us>

> Greetings
> I'm using gdalwarp to reproject a few tiles from platecarr? to UTM
WGS84
> (for a specific zone). Originally they are tiles so they don't have
any
> "blank" space between them but when I reproject to UTM I get a few
areas in
> the borders of the image. What can I do to still have a perfect
match
> between tiles?
> Thanks
> Kat

Kat, 

     I think that gdal_retile.py does what you want.  You can also
mosaic them first either with gdalwarp or (if they are large files)
gdalbuildvrt and then reproject that one mosaic.  More details here:
http://gdal.org/gdal_retile.html    http://gdal.org/gdalbuildvrt.html



HTH, Eli
From EAdam at co.lincoln.or.us  Thu Jul  7 20:30:28 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Fri Jul  8 01:17:41 2011
Subject: =?UTF-8?Q?Re:=20[gdal-dev]=20gdalwarp=20over=20tiles=20in=20Plat?=
	=?UTF-8?Q?e=20car=C3=A9e?=
In-Reply-To: <4E15EA9F.4F75.00CE.0@co.lincoln.or.us>
References: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
	<4E15EA9F.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <4E15ED28.4F75.00CE.0@co.lincoln.or.us>

>>  Greetings
>> I'm using gdalwarp to reproject a few tiles from platecarr? to UTM
> WGS84
>> (for a specific zone). Originally they are tiles so they don't have
> any
>> "blank" space between them but when I reproject to UTM I get a few
> areas in
>> the borders of the image. What can I do to still have a perfect
> match
>> between tiles?
>> Thanks
>> Kat
> 
> Kat, 
> 
>      I think that gdal_retile.py does what you want.  You can also
> mosaic them first either with gdalwarp or (if they are large files)
> gdalbuildvrt and then reproject that one mosaic.  More details here:
> http://gdal.org/gdal_retile.html    http://gdal.org/gdalbuildvrt.html


I think that I gave incomplete/incorrect information.  To reproject I
think that you will need to do use gdalwarp.  gdal_merge.py is also
another way to mosaic.

Regards, Eli

From katrineggert1980 at gmail.com  Thu Jul  7 20:31:09 2011
From: katrineggert1980 at gmail.com (katrin eggert)
Date: Fri Jul  8 01:17:51 2011
Subject: =?ISO-8859-1?Q?Re=3A_=5Bgdal=2Ddev=5D_gdalwarp_over_tiles_in_Plate_car=E9e?=
In-Reply-To: <4E15EA9F.4F75.00CE.0@co.lincoln.or.us>
References: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
	<4E15EA9F.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <CAGR7mtAaEq7R=+tCs-CBFN38hMbSQu+=+t=3zvxdAP=v2Aa0HA@mail.gmail.com>

No in my case i want to reproject them first and only then to create a
mosaic. (maybe I was not clear on this)

2011/7/8 Eli Adam <EAdam@co.lincoln.or.us>

> > Greetings
> > I'm using gdalwarp to reproject a few tiles from platecarr? to UTM
> WGS84
> > (for a specific zone). Originally they are tiles so they don't have
> any
> > "blank" space between them but when I reproject to UTM I get a few
> areas in
> > the borders of the image. What can I do to still have a perfect
> match
> > between tiles?
> > Thanks
> > Kat
>
> Kat,
>
>     I think that gdal_retile.py does what you want.  You can also
> mosaic them first either with gdalwarp or (if they are large files)
> gdalbuildvrt and then reproject that one mosaic.  More details here:
> http://gdal.org/gdal_retile.html    http://gdal.org/gdalbuildvrt.html
>
>
>
> HTH, Eli
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/0a231ab0/attachment-0001.html
From EAdam at co.lincoln.or.us  Thu Jul  7 20:47:43 2011
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Fri Jul  8 01:36:07 2011
Subject: =?UTF-8?Q?Re:=20[gdal-dev]=20gdalwarp=20over=20tiles=20in=20Plat?=
	=?UTF-8?Q?e=20car=C3=A9e?=
In-Reply-To: <CAGR7mtB1C6T+2-y2U1CO63Pa1W-LRMtUFT9OJGzMDycE0pZ66A@mail.gmail.com>
References: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
	<4E15EA9F.4F75.00CE.0@co.lincoln.or.us>
	<4E15ED28.4F75.00CE.0@co.lincoln.or.us>
	<CAGR7mtB1C6T+2-y2U1CO63Pa1W-LRMtUFT9OJGzMDycE0pZ66A@mail.gmail.com>
Message-ID: <4E15F133.4F75.00CE.0@co.lincoln.or.us>

Kat,

    The only practical way I know to avoid these slivers of
misalignment due to projections having slightly different rotations is
to mosaic first.  I've been able to do that with even extremely large
files with the help the virtual file format (VRT) of GDAL.  If you have
tiles in one projection and want to end with a mosaic in a different
projection, mosaicing first is probably going to be easier and better. 
However, if you need to reproject the tiles first and then mosaic you
can do that.  

    The way I've done that in the past is a lot of work of
reprojecting, then trimming/masking the edges that look bad, then
sometimes making a small mosaic of original tiles for the overlap areas,
reprojecting and trimming that and so on.  It is extremely laborsome and
involves lots of hand entry of coordinates.  Only do that if there is
really no better way.  

    If you can't mosaic first, hopefully someone will suggest a better
method (perhaps better management of nodata values?) that is less work
than what I used to do before gdalbuildvrt.

Best Regards, Eli

> No in my case i want to reproject them first and only then to create
a
> mosaic. (maybe I was not clear on this)

> Hello Eli
> I'm using gdalwarp but I'm getting that "blank" area in the bottom of
my
> image. When I try to mosaic (or visualize) with other tile (also
reprojected
> with gdal) I get this area that was not suppose to have. Any idea how
to
> avoid this?
> Thanks
> Kat
> 
> 2011/7/8 Eli Adam <EAdam@co.lincoln.or.us>
> 
>> >>  Greetings
>> >> I'm using gdalwarp to reproject a few tiles from platecarr? to
UTM
>> > WGS84
>> >> (for a specific zone). Originally they are tiles so they don't
have
>> > any
>> >> "blank" space between them but when I reproject to UTM I get a
few
>> > areas in
>> >> the borders of the image. What can I do to still have a perfect
>> > match
>> >> between tiles?
>> >> Thanks
>> >> Kat
>> >
>> > Kat,
>> >
>> >      I think that gdal_retile.py does what you want.  You can
also
>> > mosaic them first either with gdalwarp or (if they are large
files)
>> > gdalbuildvrt and then reproject that one mosaic.  More details
here:
>> > http://gdal.org/gdal_retile.html   
http://gdal.org/gdalbuildvrt.html 
>>
>>
>> I think that I gave incomplete/incorrect information.  To reproject
I
>> think that you will need to do use gdalwarp.  gdal_merge.py is also
>> another way to mosaic.
>>
>> Regards, Eli
>>
>>
From nhatzop at gmail.com  Thu Jul  7 22:07:22 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Fri Jul  8 02:59:10 2011
Subject: =?ISO-8859-1?Q?Re=3A_=5Bgdal=2Ddev=5D_gdalwarp_over_tiles_in_Plate_car=E9e?=
In-Reply-To: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
References: <CAGR7mtBZ_r1LmsZ8c1iGApR4oQ2r8m9WBxMz0FDGPWcq7a7rag@mail.gmail.com>
Message-ID: <CALDJGKDaE=KMyYVGH-XVp3g2gt_tZ9fTbd4hnw03vRMue9V0DQ@mail.gmail.com>

I haven't worked with MERIS on NDVI data but I know about MODIS:

so let's say we have four MODIS files lvl3 data:
MOD13Q1.A2010113.h08v04.005.2010133194933.hdf
MOD13Q1.A2010113.h08v05.005.2010134041223.hdf
MOD13Q1.A2010113.h09v04.005.2010135200404.hdf
MOD13Q1.A2010113.h09v05.005.2010133080730.hdf

if you go to the map:
https://lpdaac.usgs.gov/lpdaac/products/modis_overview

you are going to see that these tiles represent the west coast

what I do is extract the data from hdf to geotiff

if you do gdalinfo MOD13Q1.A2010113.h08v04.005.2010133194933.hdf

you are going to have:
...
 SUBDATASET_2_NAME=HDF4_EOS:EOS_GRID:"MOD13Q1.A2010113.h08v04.005.2010133194933.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days EVI
  SUBDATASET_2_DESC=[4800x4800] 250m 16 days EVI
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)

SUBDATASET_3_NAME=HDF4_EOS:EOS_GRID:"MOD13Q1.A2010113.h08v04.005.2010133194933.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days VI Quality
  SUBDATASET_3_DESC=[4800x4800] 250m 16 days VI Quality
MODIS_Grid_16DAY_250m_500m_VI (16-bit unsigned integer)

SUBDATASET_4_NAME=HDF4_EOS:EOS_GRID:"MOD13Q1.A2010113.h08v04.005.2010133194933.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days red reflectance
  SUBDATASET_4_DESC=[4800x4800] 250m 16 days red reflectance
MODIS_Grid_16DAY_250m_500m_VI (16-bit integer)

...

you do:

gdal_translate
'HDF4_EOS:EOS_GRID:"MOD13Q1.A2010113.h08v04.005.2010133194933.hdf":MODIS_Grid_16DAY_250m_500m_VI:250m
16 days NDVI' image1.tif
0...10...20...30...40...50...60...70...80...90...100 - done.

so you will have your first tif

you do the same for the others files

and you will have:
image1.tif
image2.tif
image3.tif
image4.tif

we are going to make a virtual mosaic using the vrt format:

gdalbuildvrt mosaic.vrt *.tif

if you open in a text editor the mosaic .vrt you are going to see the
details

now we are going to convert the mosaic to WGS84 projection
gdalwarp -t_srs WGS84 mosaic.vrt final.tif

my final.tif does not have any lines

On Thu, Jul 7, 2011 at 5:02 PM, katrin eggert <katrineggert1980@gmail.com>wrote:

> Greetings
> I'm using gdalwarp to reproject a few tiles from platecarr? to UTM WGS84
> (for a specific zone). Originally they are tiles so they don't have any
> "blank" space between them but when I reproject to UTM I get a few areas in
> the borders of the image. What can I do to still have a perfect match
> between tiles?
> Thanks
> Kat
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110707/98dffbcc/attachment.html
From even.rouault at mines-paris.org  Fri Jul  8 01:55:09 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  8 06:58:35 2011
Subject: [gdal-dev] Fwd: Re: [Live-demo] Re: Liberal licensing of Project
	Overviews in LiveDVD, do we want this?
Message-ID: <201107080755.09650.even.rouault@mines-paris.org>

Hi,

below Simon's answer to my answers to his post on the live-demo list :
http://lists.osgeo.org/pipermail/live-demo/2011-July/003653.html

Do you have opinions on how we should handle the licence of documentation on 
gdal.org ?

Best regards,

Even
-------------- next part --------------
An embedded message was scrubbed...
From: Simon Cropper <scropper@botanicusaustralia.com.au>
Subject: Re: [Live-demo] Re: Liberal licensing of Project Overviews in LiveDVD,
	do we want this?
Date: Fri, 08 Jul 2011 11:21:33 +1000
Size: 5544
Url: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/a1572d2e/attachment.mht
From ahmettemiz88 at gmail.com  Fri Jul  8 02:53:34 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Jul  8 08:01:08 2011
Subject: [gdal-dev] SetAttributeFilter has no effect ?
Message-ID: <CAJKO1YtCWm8ZD7kOOD1PB6p2CGSppJridH8A-355E=fj7MrXhw@mail.gmail.com>

hello

I tried to implement SetAttributeFilter with a critaria.
 There seems to have no effect on getting data.

what might be wrong ?

I am still getting all data

here is the code fragment.

ly2.SetAttributeFilter("il='kastamonu'");


		for (int i = 0;i<1244; i++) {
			Feature f = ly2.GetFeature(i);
			System.out.print(f.GetFID());
			System.out.println(" " + f.GetFieldAsString("il"));
			System.out.println(" " + f.GetFieldAsString("ilce"));
			System.out.println(" " + f.GetFieldAsString("koy"));
			System.out.println(" " + f.GetFieldAsString("etkili_nak"));
			//System.out.println(" " + f.GetFieldAsString("lkod"));
			
			
			out.print(f.GetFID());
			out.print(" " + f.GetFieldAsString("il"));
			out.println(" " + f.GetFieldAsString("koy"));
			
		}
		

regards
-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From even.rouault at mines-paris.org  Fri Jul  8 03:08:27 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  8 08:16:54 2011
Subject: [gdal-dev] SetAttributeFilter has no effect ?
In-Reply-To: <CAJKO1YtCWm8ZD7kOOD1PB6p2CGSppJridH8A-355E=fj7MrXhw@mail.gmail.com>
References: <CAJKO1YtCWm8ZD7kOOD1PB6p2CGSppJridH8A-355E=fj7MrXhw@mail.gmail.com>
Message-ID: <1310108907.4e16aceb6e9ec@webmail.free.fr>

Selon ahmet temiz <ahmettemiz88@gmail.com>:

GetFeature(n) returns the feature such as feature.GetFID() == n, so attribute or
spatial filter are not taken into account.

If you want to iterate over the feature of the layers, and take into account
filters, you have to use GetNextFeature(), until it returns null.

> hello
>
> I tried to implement SetAttributeFilter with a critaria.
>  There seems to have no effect on getting data.
>
> what might be wrong ?
>
> I am still getting all data
>
> here is the code fragment.
>
> ly2.SetAttributeFilter("il='kastamonu'");
>
>
> 		for (int i = 0;i<1244; i++) {
> 			Feature f = ly2.GetFeature(i);
> 			System.out.print(f.GetFID());
> 			System.out.println(" " + f.GetFieldAsString("il"));
> 			System.out.println(" " + f.GetFieldAsString("ilce"));
> 			System.out.println(" " + f.GetFieldAsString("koy"));
> 			System.out.println(" " + f.GetFieldAsString("etkili_nak"));
> 			//System.out.println(" " + f.GetFieldAsString("lkod"));
>
>
> 			out.print(f.GetFID());
> 			out.print(" " + f.GetFieldAsString("il"));
> 			out.println(" " + f.GetFieldAsString("koy"));
>
> 		}
>
>
> regards
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> ________________________
>
> Ahmet Temiz
> Geological Eng.
> Information Systems - GIS Group
> Disaster and Emergency Management
> of Presidency
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From goocreations at gmail.com  Fri Jul  8 03:38:46 2011
From: goocreations at gmail.com (Goo Creations)
Date: Fri Jul  8 08:48:40 2011
Subject: [gdal-dev] RPC and DEM = Too many points (441 out of 441) failed to
	transform
Message-ID: <CAK9rhi=XY-J2-MfWtN_YFT7QgPZtMsRs50c8Rmj+ZNTrEgwAdQ@mail.gmail.com>

Hi,

I've seen that there are quite a lot of messages on this problem, but none
of them helped. When running the following command:

          gdalwarp -rpc raw.tif out.tif

with a raw.tif and raw.rpb file, the image "orthorectifies" correctly. The
moment I run:

          gdalwarp -rpc -to RPC_DEM=dem.tif raw.tif out.tif

I get the following error:

          ERROR 1: Too many points (441 out of 441) failed to transform,
unable to compute output bounds.

I've attached the info of raw.tif. Does anyone know what went wrong, and is
this beacuse of DEM, or is it another problem?

Thanks
Chris







Driver: GTiff/GeoTIFF
Files: raw.tif
       raw.rpb
Size is 9628, 8447
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (30.913295622484902,-24.802523524387549)
Pixel Size = (0.000067480021901,-0.000067480021901)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
RPC Metadata:
  LINE_OFF=4080
  SAMP_OFF=4576.5
  LAT_OFF=-25.0395787325761
  LONG_OFF=31.1554993454694
  HEIGHT_OFF=0
  LINE_SCALE=3914.5
  SAMP_SCALE=4294
  LAT_SCALE=1
  LONG_SCALE=1
  HEIGHT_SCALE=4.5035996273705e+15
  LINE_NUM_COEFF=-0.145866801707571 -1.10329711280747 -3.86239597262447
+2.58933660668099e-10 -28.872773220706 +2.68554381444917e-11
+2.66066678274063e-13 +0.233414015098293 -1.76613654297724
+6.43648576886715e-14 +1.49832649397565e-14 -0.206809394779316
+0.550008018810227 +5.15954998919738e-15 +4.01585276272362 +5.22420802294871
-1.73715368640512e-16 +1.01499936423132e-19 -3.38302233536952e-25 +0
  LINE_DEN_COEFF=+1 +7.63015898979327 +0.544533603046993 +0
-0.173000384439342 +0 +0 -1.00151575139611 -1.37010848384519 +0 +0
-0.202476730291588 +0.437634611086632 +0 -0.87007813002919
-0.375773326407855 +0 +0 +0 +0
  SAMP_NUM_COEFF=-0.231718719424942 +1.76982471507257 -0.14795750431688
-4.73119373784374e-10 +2.13811836283462 -3.85268609241549e-12
-2.35309943560894e-12 +25.3990915415468 +0.254311877067769
-2.89679792247779e-14 -8.37241260945736e-14 -2.08642871782854
-2.73075356366074 -3.49988405044981e-16 +0.172374026544827
-0.0126270588964211 -1.11561975938353e-16 +1.4727767628272e-19
+5.24269370859074e-25 +0
  SAMP_DEN_COEFF=+1 +7.29237513919745 +0.620858828859381 +0
+0.081413241118419 +0 +0 -0.640261879817039 -0.844565609956026 +0 +0
+0.357196796854916 +0.0314112080522133 +0 +0.0594674065444518
+0.355916093810033 +0 +0 +0 +0
Corner Coordinates:
Upper Left  (  30.9132956, -24.8025235) ( 30d54'47.86"E, 24d48' 9.08"S)
Lower Left  (  30.9132956, -25.3725273) ( 30d54'47.86"E, 25d22'21.10"S)
Upper Right (  31.5629933, -24.8025235) ( 31d33'46.78"E, 24d48' 9.08"S)
Lower Right (  31.5629933, -25.3725273) ( 31d33'46.78"E, 25d22'21.10"S)
Center      (  31.2381444, -25.0875254) ( 31d14'17.32"E, 25d 5'15.09"S)
Band 1 Block=9628x1 Type=UInt16, ColorInterp=Gray
Band 2 Block=9628x1 Type=UInt16, ColorInterp=Undefined
Band 3 Block=9628x1 Type=UInt16, ColorInterp=Undefined
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/9802f160/attachment-0001.html
From pmlpml001 at yahoo.com  Fri Jul  8 04:30:21 2011
From: pmlpml001 at yahoo.com (Paul Lohr)
Date: Fri Jul  8 09:46:55 2011
Subject: [gdal-dev] installing gdal for iOS development
Message-ID: <1310113821.36772.YahooMailRC@web130124.mail.mud.yahoo.com>

I have the build_for_iphoneos.sh script from pseudogreen.com along with 
gdal-1.8.0. I am trying to get GDAL installed so I can start learning how to use 

it with iOS devices (iPhone, iPad).

Xcode is version 3.2.5 and the iOS SDK is version 4.2. I have Xcode 4.2 and iOS 
5.0 installed but they are not in the same folders as the earlier versions.

I am getting at least two error messages. When I run build_for_iphoneos.sh, this 

is the first error that is returned in the config.log file: "conftest.c:59:22: 
error: dbmalloc.h: No such file or directory". I read somewhere to find the 
earliest error message and deal with that first.

While the build_for_iphoneos.sh script is running in the terminal window, it 
stops running after this message appears: 
"/Developer4.2/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.0.sdk/usr/include/architecture/arm/math.h:475:

error: expected initializer before ?__AVAILABILITY_INTERNAL__IPHONE_3_2?
make[3]: *** [../o/ogrsqlitedatasource.lo] Error 1
make[2]: *** [sqlite-target] Error 2
make[1]: *** [sublibs] Error 2
make: *** [ogr-target] Error 2"

The build_for_iphoneos.sh script can be found here:
http://pseudogreen.org/bzr/sandbox/iphone/build_for_iphoneos

Should I deal with the dbmalloc.h error first? Any ideas what to do to correct 
this?

Thank you for any help,
Paul Lohr
From ari.jolma at gmail.com  Fri Jul  8 04:34:06 2011
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Jul  8 09:47:23 2011
Subject: [gdal-dev] Fwd: Re: [Live-demo] Re: Liberal licensing of Project
	Overviews in LiveDVD, do we want this?
In-Reply-To: <201107080755.09650.even.rouault@mines-paris.org>
References: <201107080755.09650.even.rouault@mines-paris.org>
Message-ID: <4E16C0FE.20203@gmail.com>

On 07/08/2011 07:55 AM, Even Rouault wrote:
> Hi,
>
> below Simon's answer to my answers to his post on the live-demo list :
> http://lists.osgeo.org/pipermail/live-demo/2011-July/003653.html
>
> Do you have opinions on how we should handle the licence of documentation on
> gdal.org ?

Would it be enough to add something to the Doxyfile tag HTML_FOOTER, 
which states what the documentation is? That way it gets to the bottom 
of every page of gdal.org. The footer can't be the whole licence, 
though. MIT licence does not seem to have a definitive web page and the 
wikipedia page states that "MIT Licence" is ambiguous.

Regards,

Ari

> Best regards,
>
> Even
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/e9addc1d/attachment.html
From giannicristian at msn.com  Fri Jul  8 06:18:51 2011
From: giannicristian at msn.com (Solimyr)
Date: Fri Jul  8 11:37:49 2011
Subject: [gdal-dev] Change the spatial reference of a shapeile
Message-ID: <1310120331228-6561998.post@n2.nabble.com>

Hi guys,
I have two shapefile with same features but one miss the extent and the
projection. What I want to do is copy the extent and the projection from the
first and set to the second. I did something  similar with two images using
these step:

inputimg = gdal.Open(str(fileName), GA_ReadOnly) 
gdalformat= inputimg.GetDriver().ShortName
geoinput = inputimg.GetGeoTransform()
projinput= inputimg.GetProjection()
..
outimg = gdal.Open(str(result), GA_Update)
outimg.SetProjection(projinput)
outimg.SetGeoTransform(geoinput)


Do you know if there is something similar to this but for shapefile? Do you
have any suggests?
thx

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6561998.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Jul  8 06:42:39 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  8 12:02:50 2011
Subject: [gdal-dev] Change the spatial reference of a shapeile
In-Reply-To: <1310120331228-6561998.post@n2.nabble.com>
References: <1310120331228-6561998.post@n2.nabble.com>
Message-ID: <CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>

Solimyr,

For shapefiles just copying and renaming the .prj file might be enough.
Extents can be computed and stored using the ogr2ogr utility.

If copying the .prj file didn't work, you can use the -s_srs option in the
ogr2ogr utility. You can get the SRS WKT from the ogrinfo output.

Of course, you can do this programatically using OGRDataSource::CopyLayer()
method. The spatial reference has to be set to each layer in a datasource.
There is no GeoTransform. You can force calculation of extent using
OGRLayer::GetExtent() method.

http://www.gdal.org/ogr_utilities.html
http://www.gdal.org/ogr/ogr_arch.html
http://www.gdal.org/ogr/annotated.html


On Fri, Jul 8, 2011 at 3:48 PM, Solimyr <giannicristian@msn.com> wrote:

> Hi guys,
> I have two shapefile with same features but one miss the extent and the
> projection. What I want to do is copy the extent and the projection from
> the
> first and set to the second. I did something  similar with two images using
> these step:
>
> inputimg = gdal.Open(str(fileName), GA_ReadOnly)
> gdalformat= inputimg.GetDriver().ShortName
> geoinput = inputimg.GetGeoTransform()
> projinput= inputimg.GetProjection()
> ..
> outimg = gdal.Open(str(result), GA_Update)
> outimg.SetProjection(projinput)
> outimg.SetGeoTransform(geoinput)
>
>
> Do you know if there is something similar to this but for shapefile? Do you
> have any suggests?
> thx
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6561998.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/821933bc/attachment.html
From chaitanya.ch at gmail.com  Fri Jul  8 07:12:48 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  8 12:34:41 2011
Subject: [gdal-dev] RPC and DEM = Too many points (441 out of 441) failed
	to transform
In-Reply-To: <CAK9rhi=XY-J2-MfWtN_YFT7QgPZtMsRs50c8Rmj+ZNTrEgwAdQ@mail.gmail.com>
References: <CAK9rhi=XY-J2-MfWtN_YFT7QgPZtMsRs50c8Rmj+ZNTrEgwAdQ@mail.gmail.com>
Message-ID: <CAMKgpObRdJWfzaEinNNzLnW+dGuM=M0KGru+U4dzGKdsmn9BtQ@mail.gmail.com>

Chris,

This could happen when you try to transform an image that is outside the
defined area of the destination projection.
Cut the raster to the destination projection's extents and try again.

There is a thread with exactly the same error message in the archives[1]. I
am not sure that it can help with your case, but try it anyway.

http://lists.osgeo.org/pipermail/gdal-dev/2010-June/024846.html

On Fri, Jul 8, 2011 at 1:08 PM, Goo Creations <goocreations@gmail.com>wrote:

> Hi,
>
> I've seen that there are quite a lot of messages on this problem, but none
> of them helped. When running the following command:
>
>           gdalwarp -rpc raw.tif out.tif
>
> with a raw.tif and raw.rpb file, the image "orthorectifies" correctly. The
> moment I run:
>
>           gdalwarp -rpc -to RPC_DEM=dem.tif raw.tif out.tif
>
> I get the following error:
>
>           ERROR 1: Too many points (441 out of 441) failed to transform,
> unable to compute output bounds.
>
> I've attached the info of raw.tif. Does anyone know what went wrong, and is
> this beacuse of DEM, or is it another problem?
>
> Thanks
> Chris
>
>
>
>
>
>
>
> Driver: GTiff/GeoTIFF
> Files: raw.tif
>        raw.rpb
> Size is 9628, 8447
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (30.913295622484902,-24.802523524387549)
> Pixel Size = (0.000067480021901,-0.000067480021901)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> RPC Metadata:
>   LINE_OFF=4080
>   SAMP_OFF=4576.5
>   LAT_OFF=-25.0395787325761
>   LONG_OFF=31.1554993454694
>   HEIGHT_OFF=0
>   LINE_SCALE=3914.5
>   SAMP_SCALE=4294
>   LAT_SCALE=1
>   LONG_SCALE=1
>   HEIGHT_SCALE=4.5035996273705e+15
>   LINE_NUM_COEFF=-0.145866801707571 -1.10329711280747 -3.86239597262447
> +2.58933660668099e-10 -28.872773220706 +2.68554381444917e-11
> +2.66066678274063e-13 +0.233414015098293 -1.76613654297724
> +6.43648576886715e-14 +1.49832649397565e-14 -0.206809394779316
> +0.550008018810227 +5.15954998919738e-15 +4.01585276272362 +5.22420802294871
> -1.73715368640512e-16 +1.01499936423132e-19 -3.38302233536952e-25 +0
>   LINE_DEN_COEFF=+1 +7.63015898979327 +0.544533603046993 +0
> -0.173000384439342 +0 +0 -1.00151575139611 -1.37010848384519 +0 +0
> -0.202476730291588 +0.437634611086632 +0 -0.87007813002919
> -0.375773326407855 +0 +0 +0 +0
>   SAMP_NUM_COEFF=-0.231718719424942 +1.76982471507257 -0.14795750431688
> -4.73119373784374e-10 +2.13811836283462 -3.85268609241549e-12
> -2.35309943560894e-12 +25.3990915415468 +0.254311877067769
> -2.89679792247779e-14 -8.37241260945736e-14 -2.08642871782854
> -2.73075356366074 -3.49988405044981e-16 +0.172374026544827
> -0.0126270588964211 -1.11561975938353e-16 +1.4727767628272e-19
> +5.24269370859074e-25 +0
>   SAMP_DEN_COEFF=+1 +7.29237513919745 +0.620858828859381 +0
> +0.081413241118419 +0 +0 -0.640261879817039 -0.844565609956026 +0 +0
> +0.357196796854916 +0.0314112080522133 +0 +0.0594674065444518
> +0.355916093810033 +0 +0 +0 +0
> Corner Coordinates:
> Upper Left  (  30.9132956, -24.8025235) ( 30d54'47.86"E, 24d48' 9.08"S)
> Lower Left  (  30.9132956, -25.3725273) ( 30d54'47.86"E, 25d22'21.10"S)
> Upper Right (  31.5629933, -24.8025235) ( 31d33'46.78"E, 24d48' 9.08"S)
> Lower Right (  31.5629933, -25.3725273) ( 31d33'46.78"E, 25d22'21.10"S)
> Center      (  31.2381444, -25.0875254) ( 31d14'17.32"E, 25d 5'15.09"S)
> Band 1 Block=9628x1 Type=UInt16, ColorInterp=Gray
> Band 2 Block=9628x1 Type=UInt16, ColorInterp=Undefined
> Band 3 Block=9628x1 Type=UInt16, ColorInterp=Undefined
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/79c18409/attachment.html
From ahmettemiz88 at gmail.com  Fri Jul  8 07:15:43 2011
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Fri Jul  8 12:37:47 2011
Subject: [gdal-dev] to create a rectangle polygon
Message-ID: <CAJKO1YvHvhqYOEh5z4+fbent65C4ZUW8tv-52uR8gpGJP=Ks1A@mail.gmail.com>

hello

Is it possible to create a rectangle polygon shp file from known minx,
miny, maxx, maxy values using ogr2ogr ?

regards

-- 
Ahmet Temiz
Jeoloji M?h.
Afet ve Acil Durum Y?netimi Ba?kanl???
Planlama ve Zarar Azaltma Dairesi Ba?kanl???
Bilgi ve CBS grubu
Eski?ehir Yolu 10. km.
Lodumlu / Ankara
Tel : 0 312 2872680 / 1535
________________________

Ahmet Temiz
Geological Eng.
Information Systems - GIS Group
Disaster and Emergency Management
of Presidency
From goocreations at gmail.com  Fri Jul  8 07:20:40 2011
From: goocreations at gmail.com (Goo Creations)
Date: Fri Jul  8 12:42:52 2011
Subject: [gdal-dev] RPC and DEM = Too many points (441 out of 441) failed
	to transform
In-Reply-To: <CAMKgpObRdJWfzaEinNNzLnW+dGuM=M0KGru+U4dzGKdsmn9BtQ@mail.gmail.com>
References: <CAK9rhi=XY-J2-MfWtN_YFT7QgPZtMsRs50c8Rmj+ZNTrEgwAdQ@mail.gmail.com>
	<CAMKgpObRdJWfzaEinNNzLnW+dGuM=M0KGru+U4dzGKdsmn9BtQ@mail.gmail.com>
Message-ID: <CAK9rhikS0PHXvbDm0YnZN32HkU+Oqut+oAXMBPWvbTjQOzaCrw@mail.gmail.com>

Hi,

I've tried that, but without any success. I have no problem warping the
image, that works fine. The problem comes in when I try to warp with the
DEM.

Chris



On Fri, Jul 8, 2011 at 1:12 PM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> Chris,
>
> This could happen when you try to transform an image that is outside the
> defined area of the destination projection.
> Cut the raster to the destination projection's extents and try again.
>
> There is a thread with exactly the same error message in the archives[1]. I
> am not sure that it can help with your case, but try it anyway.
>
> http://lists.osgeo.org/pipermail/gdal-dev/2010-June/024846.html
>
> On Fri, Jul 8, 2011 at 1:08 PM, Goo Creations <goocreations@gmail.com>wrote:
>
>> Hi,
>>
>> I've seen that there are quite a lot of messages on this problem, but none
>> of them helped. When running the following command:
>>
>>           gdalwarp -rpc raw.tif out.tif
>>
>> with a raw.tif and raw.rpb file, the image "orthorectifies" correctly. The
>> moment I run:
>>
>>           gdalwarp -rpc -to RPC_DEM=dem.tif raw.tif out.tif
>>
>> I get the following error:
>>
>>           ERROR 1: Too many points (441 out of 441) failed to transform,
>> unable to compute output bounds.
>>
>> I've attached the info of raw.tif. Does anyone know what went wrong, and
>> is this beacuse of DEM, or is it another problem?
>>
>> Thanks
>> Chris
>>
>>
>>
>>
>>
>>
>>
>> Driver: GTiff/GeoTIFF
>> Files: raw.tif
>>        raw.rpb
>> Size is 9628, 8447
>> Coordinate System is:
>> GEOGCS["WGS 84",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563,
>>             AUTHORITY["EPSG","7030"]],
>>         AUTHORITY["EPSG","6326"]],
>>     PRIMEM["Greenwich",0],
>>     UNIT["degree",0.0174532925199433],
>>     AUTHORITY["EPSG","4326"]]
>> Origin = (30.913295622484902,-24.802523524387549)
>> Pixel Size = (0.000067480021901,-0.000067480021901)
>> Metadata:
>>   AREA_OR_POINT=Area
>> Image Structure Metadata:
>>   INTERLEAVE=PIXEL
>> RPC Metadata:
>>   LINE_OFF=4080
>>   SAMP_OFF=4576.5
>>   LAT_OFF=-25.0395787325761
>>   LONG_OFF=31.1554993454694
>>   HEIGHT_OFF=0
>>   LINE_SCALE=3914.5
>>   SAMP_SCALE=4294
>>   LAT_SCALE=1
>>   LONG_SCALE=1
>>   HEIGHT_SCALE=4.5035996273705e+15
>>   LINE_NUM_COEFF=-0.145866801707571 -1.10329711280747 -3.86239597262447
>> +2.58933660668099e-10 -28.872773220706 +2.68554381444917e-11
>> +2.66066678274063e-13 +0.233414015098293 -1.76613654297724
>> +6.43648576886715e-14 +1.49832649397565e-14 -0.206809394779316
>> +0.550008018810227 +5.15954998919738e-15 +4.01585276272362 +5.22420802294871
>> -1.73715368640512e-16 +1.01499936423132e-19 -3.38302233536952e-25 +0
>>   LINE_DEN_COEFF=+1 +7.63015898979327 +0.544533603046993 +0
>> -0.173000384439342 +0 +0 -1.00151575139611 -1.37010848384519 +0 +0
>> -0.202476730291588 +0.437634611086632 +0 -0.87007813002919
>> -0.375773326407855 +0 +0 +0 +0
>>   SAMP_NUM_COEFF=-0.231718719424942 +1.76982471507257 -0.14795750431688
>> -4.73119373784374e-10 +2.13811836283462 -3.85268609241549e-12
>> -2.35309943560894e-12 +25.3990915415468 +0.254311877067769
>> -2.89679792247779e-14 -8.37241260945736e-14 -2.08642871782854
>> -2.73075356366074 -3.49988405044981e-16 +0.172374026544827
>> -0.0126270588964211 -1.11561975938353e-16 +1.4727767628272e-19
>> +5.24269370859074e-25 +0
>>   SAMP_DEN_COEFF=+1 +7.29237513919745 +0.620858828859381 +0
>> +0.081413241118419 +0 +0 -0.640261879817039 -0.844565609956026 +0 +0
>> +0.357196796854916 +0.0314112080522133 +0 +0.0594674065444518
>> +0.355916093810033 +0 +0 +0 +0
>> Corner Coordinates:
>> Upper Left  (  30.9132956, -24.8025235) ( 30d54'47.86"E, 24d48' 9.08"S)
>> Lower Left  (  30.9132956, -25.3725273) ( 30d54'47.86"E, 25d22'21.10"S)
>> Upper Right (  31.5629933, -24.8025235) ( 31d33'46.78"E, 24d48' 9.08"S)
>> Lower Right (  31.5629933, -25.3725273) ( 31d33'46.78"E, 25d22'21.10"S)
>> Center      (  31.2381444, -25.0875254) ( 31d14'17.32"E, 25d 5'15.09"S)
>> Band 1 Block=9628x1 Type=UInt16, ColorInterp=Gray
>> Band 2 Block=9628x1 Type=UInt16, ColorInterp=Undefined
>> Band 3 Block=9628x1 Type=UInt16, ColorInterp=Undefined
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/9506440f/attachment-0001.html
From georgec_511 at yahoo.com  Fri Jul  8 07:21:34 2011
From: georgec_511 at yahoo.com (George C)
Date: Fri Jul  8 12:46:03 2011
Subject: [gdal-dev] Re: gdal compile question
In-Reply-To: <CA+YzLBetj2y3R5_P4GGSseW2ezh+7v_KwkYqn42OZiekCB7QdQ@mail.gmail.com>
References: <1310078824.90957.YahooMailRC@web162013.mail.bf1.yahoo.com>
	<CA+YzLBetj2y3R5_P4GGSseW2ezh+7v_KwkYqn42OZiekCB7QdQ@mail.gmail.com>
Message-ID: <1310124094.18493.YahooMailRC@web162012.mail.bf1.yahoo.com>

ahhh ok, so "ar" is a valid command, a command that's probably not on my path.? 
I'll have to check that out.

Thanks,
George




________________________________
From: Frank Warmerdam <warmerdam@pobox.com>
To: George C <georgec_511@yahoo.com>
Sent: Fri, July 8, 2011 1:17:56 AM
Subject: Re: gdal compile question

On Thu, Jul 7, 2011 at 3:47 PM, George C <georgec_511@yahoo.com> wrote:
> /bin/sh: ar: not found

George,

For whatever reason it does not appear that ar, the archive (library)
manager is in the path.? Sometimes it lives in a funky spot on solaris.
It is needed to build GDAL.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/e5d18d53/attachment.html
From chaitanya.ch at gmail.com  Fri Jul  8 08:29:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  8 13:55:06 2011
Subject: [gdal-dev] to create a rectangle polygon
In-Reply-To: <CAJKO1YvHvhqYOEh5z4+fbent65C4ZUW8tv-52uR8gpGJP=Ks1A@mail.gmail.com>
References: <CAJKO1YvHvhqYOEh5z4+fbent65C4ZUW8tv-52uR8gpGJP=Ks1A@mail.gmail.com>
Message-ID: <CAMKgpOY38sOWJ_JfP5aeU-xWtY00=wW7AZ17ztCNq9xRX_HLsg@mail.gmail.com>

Ahmet,

You can clip a shapefile using ogr2ogr using the option -spat [1]. There are
more options to control the clipping of polygons intersecting the border.

[1]: http://www.gdal.org/ogr2ogr.html

2011/7/8 ahmet temiz <ahmettemiz88@gmail.com>

> hello
>
> Is it possible to create a rectangle polygon shp file from known minx,
> miny, maxx, maxy values using ogr2ogr ?
>
> regards
>
> --
> Ahmet Temiz
> Jeoloji M?h.
> Afet ve Acil Durum Y?netimi Ba?kanl???
> Planlama ve Zarar Azaltma Dairesi Ba?kanl???
> Bilgi ve CBS grubu
> Eski?ehir Yolu 10. km.
> Lodumlu / Ankara
> Tel : 0 312 2872680 / 1535
> ________________________
>
> Ahmet Temiz
> Geological Eng.
> Information Systems - GIS Group
> Disaster and Emergency Management
> of Presidency
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/f93503a4/attachment.html
From giohappy at gmail.com  Fri Jul  8 08:49:44 2011
From: giohappy at gmail.com (G. Allegri)
Date: Fri Jul  8 14:16:34 2011
Subject: [gdal-dev] export 3D shapefile to 2D (-lco dim=2 not is not used by
	the shp driver)
Message-ID: <CAB4g1=wXz-3QF_0c2=A8oNOi6xS4SPpXW9mDt6PH=8TsibTpkg@mail.gmail.com>

Looking at the shp driver I see that the -lco dim option is not used.
Is there another way to tranform a 3D polygon to 2D thorugh ogr2ogr?

thanks,
giovanni
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/e512e4f4/attachment.html
From edarel256 at gmail.com  Fri Jul  8 09:45:15 2011
From: edarel256 at gmail.com (migelanjel)
Date: Fri Jul  8 15:15:16 2011
Subject: [gdal-dev] GDAL Newbie - Get Height from a DTED
Message-ID: <1310132715203-6562549.post@n2.nabble.com>

Hello there!
First let me you that i'm quite new in this, so if there's anything that you
may is basic, please let me know anyway, cause to me it may be the puzzle
piece i'm missing.

So, here's what i need to do. I have a DTED file (dt2), and i'm trying to
get the elevation data to map it over a jpg image, and show it in the screen
so i can know the elevation of the point the mouse is over in any moment.
I've loaded the DTED file, and i've been able to read the coordinates of the
corners of te raster band, but i don't if i can get the elevation data in a
numeric way. I've been reading the doc in the GDAL website but all i could
find about this was "How to draw the data to images".

Could anyone tell me how to get the numeric elevation data?

I'm using the C# inteface (because i'll be using XNA to do all the drawing),
but i can understand C, and a little bit of C++ too, so don't worry about
that.

Thanks a lot for reading this!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Newbie-Get-Height-from-a-DTED-tp6562549p6562549.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Jul  8 09:47:55 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  8 15:18:51 2011
Subject: [gdal-dev] export 3D shapefile to 2D (-lco dim=2 not is not used
	by the shp driver)
In-Reply-To: <CAB4g1=wXz-3QF_0c2=A8oNOi6xS4SPpXW9mDt6PH=8TsibTpkg@mail.gmail.com>
References: <CAB4g1=wXz-3QF_0c2=A8oNOi6xS4SPpXW9mDt6PH=8TsibTpkg@mail.gmail.com>
Message-ID: <CAMKgpOY-_7k5p+UmeSP2yFYz5gsMRbnOrDwaiihZgq+Foe_OMg@mail.gmail.com>

Giovanni,

If your shapefile contains only one type of geometry, you can use the -nlt
option in ogr2ogr. Using a geometry type without the '25D' postfix should
remove the Z values.

On Fri, Jul 8, 2011 at 6:19 PM, G. Allegri <giohappy@gmail.com> wrote:

> Looking at the shp driver I see that the -lco dim option is not used.
> Is there another way to tranform a 3D polygon to 2D thorugh ogr2ogr?
>
> thanks,
> giovanni
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/13f68408/attachment.html
From chaitanya.ch at gmail.com  Fri Jul  8 10:07:46 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul  8 15:39:00 2011
Subject: [gdal-dev] GDAL Newbie - Get Height from a DTED
In-Reply-To: <1310132715203-6562549.post@n2.nabble.com>
References: <1310132715203-6562549.post@n2.nabble.com>
Message-ID: <CAMKgpOaTVKyKXFpQAEk7jpNWprFYoCjm7mqX3A+5Sa+wx23+eA@mail.gmail.com>

Migel,

You have the corner coordinates. Now you need to know the pixel value at a
particular position. You can calculate the pixel value from the projection
coordinates using the affine transformation coordinates. You can get the
these coordinates using GDALDataset::GetGeoTransform() method. Knowing the
pixel/line information, you can read the pixel value using
GDALDataset::RasterIO().

You can check out the code [1] of the gdallocationinfo utility [2].

[1]: http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdallocationinfo.cpp
[2]: http://www.gdal.org/gdallocationinfo.html

On Fri, Jul 8, 2011 at 7:15 PM, migelanjel <edarel256@gmail.com> wrote:

> Hello there!
> First let me you that i'm quite new in this, so if there's anything that
> you
> may is basic, please let me know anyway, cause to me it may be the puzzle
> piece i'm missing.
>
> So, here's what i need to do. I have a DTED file (dt2), and i'm trying to
> get the elevation data to map it over a jpg image, and show it in the
> screen
> so i can know the elevation of the point the mouse is over in any moment.
> I've loaded the DTED file, and i've been able to read the coordinates of
> the
> corners of te raster band, but i don't if i can get the elevation data in a
> numeric way. I've been reading the doc in the GDAL website but all i could
> find about this was "How to draw the data to images".
>
> Could anyone tell me how to get the numeric elevation data?
>
> I'm using the C# inteface (because i'll be using XNA to do all the
> drawing),
> but i can understand C, and a little bit of C++ too, so don't worry about
> that.
>
> Thanks a lot for reading this!
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-Newbie-Get-Height-from-a-DTED-tp6562549p6562549.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/9dfff1b5/attachment.html
From jorge.arevalo at deimos-space.com  Fri Jul  8 10:09:31 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Fri Jul  8 15:41:12 2011
Subject: [gdal-dev] Meaning of nPixelSpace/nLineSpace in IRasterIO
Message-ID: <CAK29iX_aML_p9c9QzsxuD=4HH1w-fHcB-rJFv1uLofxbpNzypw@mail.gmail.com>

Hello,

I'm not sure of the meaning of nPixelSpace, nLineSpace IRasterIO args.
>From GDAL doc I read:

nPixelSpace: The byte offset from the start of one pixel value in
pData to the start of the next pixel value within a scanline. If
defaulted (0) the size of the datatype eBufType is used.

nLineSpace: The byte offset from the start of one scanline in pData to
the start of the next. If defaulted (0) the size of the datatype
eBufType * nBufXSize is used.

and

The nPixelSpace and nLineSpace parameters allow reading into or
writing from unusually organized buffers. This is primarily used for
buffers containing more than one bands raster data in interleaved
format.

I know there are, basically, 3 interleave formats:

BSQ (INTERLEAVE=BAND)
BIL (INTERLEAVE=LINE)
BIP (INTERLEAVE=PIXEL)

Assuming a 3-bands (rgb) 4x4 raster, the pData array would look like
this ("|" used only to mark the end of a row):

BSQ: r1 r1 r1 r1 | r2 r2 r2 r2 | r3 r3 r3 r3 | r4 r4 r4 r4 | g1 g1 g1
g1 | g2 g2 g2 g2 | g3 g3 g3 g3 | g4 g4 g4 g4 g4 | b1 b1 b1 b1 | b2 b2
b2 b2 | b3 b3 b3 b3 | b4 b4 b4 b4

BIL: r1 r1 r1 r1 | g1 g1 g1 g1 | b1 b1 b1 b1 | r2 r2 r2 r2 | g2 g2 g2
g2 | b2 b2 b2 b2 | r3 r3 r3 r3 | g3 g3 g3 g3 | b3 b3 b3 b3 | r4 r4 r4
r4 | g4 g4 g4 g4 | b4 b4 b4 b4

BIP: r1 g1 b1 r2 | g2 b2 r3 g3 | b3 r4 g4 b4 | r1 g1 b1 r2 | g2 b2 r3
g3 | b3 r4 g4 b4 | r1 g1 b1 r2 | g2 b2 r3 g3 | b3 r4 g4 b4 | r1 g1 b1
r2 | g2 b2 r3 g3 | b3 r4 g4 b4

Now my doubt.

Does "byte offset" mean the byte space between the start of 2 valid
values in pData? For example, the space between r1 and g1 in BIP
format. I guess if there's no trailing bits in the array (all the bits
are payload) the byte offset between the start of 2 valid values is
always the size of the data type. Then simply r1 = pData[0] and g1 =
pData[1] (BIP format)

Isn't it the most common situation? In which situation has sense
having "gaps" between pixel values, or at the end of a row? I think I
don't really understand the sentence: "This is primarily used for
buffers containing more than one bands raster data in interleaved
format.".

Thanks in advance, and best regards.
Jorge

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From giohappy at gmail.com  Fri Jul  8 10:10:23 2011
From: giohappy at gmail.com (G. Allegri)
Date: Fri Jul  8 15:41:45 2011
Subject: [gdal-dev] export 3D shapefile to 2D (-lco dim=2 not is not used
	by the shp driver)
In-Reply-To: <CAMKgpOY-_7k5p+UmeSP2yFYz5gsMRbnOrDwaiihZgq+Foe_OMg@mail.gmail.com>
References: <CAB4g1=wXz-3QF_0c2=A8oNOi6xS4SPpXW9mDt6PH=8TsibTpkg@mail.gmail.com>
	<CAMKgpOY-_7k5p+UmeSP2yFYz5gsMRbnOrDwaiihZgq+Foe_OMg@mail.gmail.com>
Message-ID: <CAB4g1=yyJnZ2qKunxL-zZ4pJ8=d25dMgNdvRXuYQ_yANWTPPGA@mail.gmail.com>

Great! thanks Chaitanya, -nlt POLYGON did the work ;)

giovanni

2011/7/8 Chaitanya kumar CH <chaitanya.ch@gmail.com>

> Giovanni,
>
> If your shapefile contains only one type of geometry, you can use the -nlt
> option in ogr2ogr. Using a geometry type without the '25D' postfix should
> remove the Z values.
>
> On Fri, Jul 8, 2011 at 6:19 PM, G. Allegri <giohappy@gmail.com> wrote:
>
>> Looking at the shp driver I see that the -lco dim option is not used.
>> Is there another way to tranform a 3D polygon to 2D thorugh ogr2ogr?
>>
>> thanks,
>> giovanni
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/11c0da4f/attachment.html
From warmerdam at pobox.com  Fri Jul  8 10:35:52 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul  8 16:08:30 2011
Subject: [gdal-dev] Fwd: Re: [Live-demo] Re: Liberal licensing of Project
	Overviews in LiveDVD, do we want this?
In-Reply-To: <4E16C0FE.20203@gmail.com>
References: <201107080755.09650.even.rouault@mines-paris.org>
	<4E16C0FE.20203@gmail.com>
Message-ID: <CA+YzLBfQgXJDJxYGGVF7_utL3R0t4K14nctbDTp9p15K7z2kcQ@mail.gmail.com>

On Fri, Jul 8, 2011 at 1:34 AM, Ari Jolma <ari.jolma@gmail.com> wrote:
> Would it be enough to add something to the Doxyfile tag HTML_FOOTER, which
> states what the documentation is? That way it gets to the bottom of every
> page of gdal.org. The footer can't be the whole licence, though. MIT licence
> does not seem to have a definitive web page and the wikipedia page states
> that "MIT Licence" is ambiguous.

Ari,

I would agree having a standard statement in the footer makes sense
and I would suggest it be url linked to:

http://trac.osgeo.org/gdal/wiki/FAQGeneral#WhatlicensedoesGDALOGRuse

which might be clarified a bit (and also the LICENSE file) with regard to
documentation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mcorey at cironline.org  Fri Jul  8 11:14:23 2011
From: mcorey at cironline.org (Michael Corey)
Date: Fri Jul  8 16:48:59 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E155C94.4F75.00CE.0@co.lincoln.or.us>
References: <4E14FF42.50903@cironline.org>
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <4E171ECF.2010504@cironline.org>

OK, I did a little more work on this, and I've narrowed down what's 
going on, but I could still use some help in figuring out how to solve it.

Here's my original image:

http://mikejcorey.com/spatial/diablo-orig-5pct.tif

The original appears to have an RGBA setup (RGB channels and an alpha 
channel).

When I run this:

gdalwarp -crop_to_cutline -cutline cutout.shp sourceimage.tif 
diablo-cutline.tif

Here's what I get:

http://mikejcorey.com/spatial/diablo-cutline-5pct.tif

This comes out as an RGB image with no alpha channel, with each channel 
being semi-transparent.

However, if I do this:

gdalwarp -dstalpha -crop_to_cutline -cutline cutout.shp sourceimage.tif 
diablo-dstalpha-cutline.tif

I get this:

http://mikejcorey.com/spatial/diablo-dstalpha-cutline-5pct.tif

This one is strange, because it appears to be a grayscale image. But 
when I open it in Photoshop, I see that it actually has 4 alpha 
channels. I suspect that those are just getting set incorrectly as alpha 
and are in fact the RGB channels, but can someone explain that behavior 
or how to fix it?

What I want to end up with is a clipped RGB image (or RGBA) image where 
nodata is transparent and the RGB isn't translucent.

Thanks again!

Michael Corey



On 7/7/11 7:13 AM, Eli Adam wrote:
> Michael,
>
>>>> On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org>, Michael
> Corey<mcorey@cironline.org>  wrote:
>> Sure, I've uploaded samples here.
>>
>> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
>> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
> I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
>
>> These are the same as the images created by the process I described (but
>> scaled down).
>>
>> To your point about specifying size in the first step -- will that make
>> the process run faster, or does it do the scaling down after it builds
>> the full-resolution image?
>>
>> Also, I notice that my filesize always gets significantly bigger when I
>> do the cutout step, which seems counter-intuitive to me since in theory
>> shouldn't there be less information present once the cutout is done?
> -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :
>
> -crop_to_cutline:
>      (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
>
> Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
>
> Best Regards, Eli
>
>> Thanks for your help!
>>
>> Michael Corey
>>
>>
>> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
>>> Michael,
>>>
>>> Can you provide screenshots of
>>> diablo-combined-center-utm10-70pct-box.tif and
>>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>>>
>>> By the way, you can perform the actions of the two gdal_translate
>>> commands in the first step with the gdal_merge.py script itself unless
>>> you want to use a specific resampling algorithm.
>>>
>>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org
>>> <mailto:mcorey@cironline.org>>  wrote:
>>>
>>>      Hi all:
>>>
>>>      I'm using a shapefile as a clipping mask to cut out the shoreline
>>>      from some DOQ files that I have merged together. But when I do the
>>>      clipping step, I end up with unwanted semitransparency in the
>>>      non-clipped areas.
>>>
>>>      I'm pretty sure the problem is only with my gdalwarp step at the end.
>>>
>>>      Here's my process:
>>>
>>>      gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
>>>      file file file
>>>
>>>      gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>>>      diablo-combined-center-utm10-70pct.tif
>>>
>>>      ogrinfo -al ./diablo_canyon_detail_clipper.shp
>>>      //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>>>
>>>      gdal_translate -projwin XXXX YYYY XXXX YYYY
>>>      diablo-combined-center-utm10-70pct.tif
>>>      diablo-combined-center-utm10-70pct-box.tif
>>>
>>>      gdalwarp -co COMPRESS=DEFLATE -cutline
>>>      ./diablo_canyon_detail_clipper.shp
>>>      diablo-combined-center-utm10-70pct-box.tif
>>>      diablo-combined-center-utm10-70pct-cutout.tif
>>>
>>>      Can anyone help?
>>>
>>>      Thanks!
>>>
>>>      --
>>>      Michael Corey
>>>
>>>      _______________________________________________
>>>      gdal-dev mailing list
>>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
>>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>>
>>>
>>> -- 
>>> Best regards,
>>> Chaitanya kumar CH.
>>> /t?a???nj?/ /k?m?r/
>>> +91-9494447584
>>> 17.2416N 80.1426E
From edarel256 at gmail.com  Fri Jul  8 11:47:14 2011
From: edarel256 at gmail.com (migelanjel)
Date: Fri Jul  8 17:23:35 2011
Subject: [gdal-dev] Re: GDAL Newbie - Get Height from a DTED
In-Reply-To: <CAMKgpOaTVKyKXFpQAEk7jpNWprFYoCjm7mqX3A+5Sa+wx23+eA@mail.gmail.com>
References: <1310132715203-6562549.post@n2.nabble.com>
	<CAMKgpOaTVKyKXFpQAEk7jpNWprFYoCjm7mqX3A+5Sa+wx23+eA@mail.gmail.com>
Message-ID: <1310140034751-6562986.post@n2.nabble.com>

It worked!
Thanks a lot for your help Chaitanya.
Seriously, thanks a lot.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-Newbie-Get-Height-from-a-DTED-tp6562549p6562986.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Jul  8 13:55:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  8 19:38:35 2011
Subject: [gdal-dev] Meaning of nPixelSpace/nLineSpace in IRasterIO
In-Reply-To: <CAK29iX_aML_p9c9QzsxuD=4HH1w-fHcB-rJFv1uLofxbpNzypw@mail.gmail.com>
References: <CAK29iX_aML_p9c9QzsxuD=4HH1w-fHcB-rJFv1uLofxbpNzypw@mail.gmail.com>
Message-ID: <201107081955.57737.even.rouault@mines-paris.org>

Le vendredi 08 juillet 2011 16:09:31, Jorge Ar?valo a ?crit :
> Hello,
> 
> I'm not sure of the meaning of nPixelSpace, nLineSpace IRasterIO args.
> 
> >From GDAL doc I read:
> nPixelSpace: The byte offset from the start of one pixel value in
> pData to the start of the next pixel value within a scanline. If
> defaulted (0) the size of the datatype eBufType is used.
> 
> nLineSpace: The byte offset from the start of one scanline in pData to
> the start of the next. If defaulted (0) the size of the datatype
> eBufType * nBufXSize is used.
> 
> and
> 
> The nPixelSpace and nLineSpace parameters allow reading into or
> writing from unusually organized buffers. This is primarily used for
> buffers containing more than one bands raster data in interleaved
> format.
> 
> I know there are, basically, 3 interleave formats:
> 
> BSQ (INTERLEAVE=BAND)
> BIL (INTERLEAVE=LINE)
> BIP (INTERLEAVE=PIXEL)
> 
> Assuming a 3-bands (rgb) 4x4 raster, the pData array would look like
> this ("|" used only to mark the end of a row):
> 
> BSQ: r1 r1 r1 r1 | r2 r2 r2 r2 | r3 r3 r3 r3 | r4 r4 r4 r4 | g1 g1 g1
> g1 | g2 g2 g2 g2 | g3 g3 g3 g3 | g4 g4 g4 g4 g4 | b1 b1 b1 b1 | b2 b2
> b2 b2 | b3 b3 b3 b3 | b4 b4 b4 b4

For the sake of simplicity, let's assume that the datatype is byte (if not, 
just multiply all values by GDALGetDataType(eDT) / 8),

Yes, nPixelOffset = 1, nLineOffset = nBufferXSize, nBandOffset = nBufferXSize * 
nBufferYSize.

(nBandOffset is for GDALDatasetRasterIO())

> 
> BIL: r1 r1 r1 r1 | g1 g1 g1 g1 | b1 b1 b1 b1 | r2 r2 r2 r2 | g2 g2 g2
> g2 | b2 b2 b2 b2 | r3 r3 r3 r3 | g3 g3 g3 g3 | b3 b3 b3 b3 | r4 r4 r4
> r4 | g4 g4 g4 g4 | b4 b4 b4 b4

Yes, nPixelOffset = 1, nLineOffset = nBufferXSize * nBands, nBandOffset = 
nBufferXSize

> 
> BIP: r1 g1 b1 r2 | g2 b2 r3 g3 | b3 r4 g4 b4 | r1 g1 b1 r2 | g2 b2 r3
> g3 | b3 r4 g4 b4 | r1 g1 b1 r2 | g2 b2 r3 g3 | b3 r4 g4 b4 | r1 g1 b1
> r2 | g2 b2 r3 g3 | b3 r4 g4 b4

You meant :

r1 g1 b1 r1 g1 b1 r1 g1 b1 r1 g1 b1 |
r2 g2 b2 r2 g2 b2 r2 g2 b2 r2 g2 b2 |
r3 g3 b3 r3 g3 b3 r3 g3 b3 r3 g3 b3 |
r4 g4 b4 r4 g4 b4 r4 g4 b4 r4 g4 b4 |

right ?

And nPixelOffset = nBands, nLineOffset = nBands * nBufferXSize, nBandOffset = 1

> 
> Now my doubt.
> 
> Does "byte offset" mean the byte space between the start of 2 valid
> values in pData?

The maths will speak better...

If you output buffer starts at address pStart, for band b (numbered from 1) the 
value of the pixel at line j (numbered from 0), column i (numbered from 0) of 
the output buffer will be stored at :

pStart + i * nPixelSpace + j * nLineSpace + (b-1) * nBandSpace

So nPixelSpace is the difference between the address of a pixel and the pixel 
at its right on the same line.

> For example, the space between r1 and g1 in BIP
> format. I guess if there's no trailing bits in the array (all the bits
> are payload) the byte offset between the start of 2 valid values is
> always the size of the data type. Then simply r1 = pData[0] and g1 =
> pData[1] (BIP format)

Not sure to follow you, hopefully the above explinations will answer your 
question ;-)

> 
> Isn't it the most common situation? In which situation has sense
> having "gaps" between pixel values, or at the end of a row?

Sometimes you just want to override the values of an allocated buffer with 
greater extent, so you need to provide a so-called "line stride" that is 
greater than nBufferXSize.

> I think I
> don't really understand the sentence: "This is primarily used for
> buffers containing more than one bands raster data in interleaved
> format.".

I guess it means that if you need to read from different bands with multiple 
calls to RasterIO() but in the same buffer, you can tweak nPixelSize and 
nLineOffset to let enough space for data from different bands and match the 
organization of the data as you've designed it.

> 
> Thanks in advance, and best regards.
> Jorge
From even.rouault at mines-paris.org  Fri Jul  8 15:25:39 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  8 21:13:08 2011
Subject: [gdal-dev] Fwd: Re: [Live-demo] Re: Liberal licensing of Project
	Overviews in LiveDVD, do we want this?
In-Reply-To: <CA+YzLBfQgXJDJxYGGVF7_utL3R0t4K14nctbDTp9p15K7z2kcQ@mail.gmail.com>
References: <201107080755.09650.even.rouault@mines-paris.org>
	<4E16C0FE.20203@gmail.com>
	<CA+YzLBfQgXJDJxYGGVF7_utL3R0t4K14nctbDTp9p15K7z2kcQ@mail.gmail.com>
Message-ID: <201107082125.39250.even.rouault@mines-paris.org>

Le vendredi 08 juillet 2011 16:35:52, Frank Warmerdam a ?crit :
> On Fri, Jul 8, 2011 at 1:34 AM, Ari Jolma <ari.jolma@gmail.com> wrote:
> > Would it be enough to add something to the Doxyfile tag HTML_FOOTER,
> > which states what the documentation is? That way it gets to the bottom
> > of every page of gdal.org. The footer can't be the whole licence,
> > though. MIT licence does not seem to have a definitive web page and the
> > wikipedia page states that "MIT Licence" is ambiguous.
> 
> Ari,
> 
> I would agree having a standard statement in the footer makes sense
> and I would suggest it be url linked to:
> 
> http://trac.osgeo.org/gdal/wiki/FAQGeneral#WhatlicensedoesGDALOGRuse
> 
> which might be clarified a bit (and also the LICENSE file) with regard to
> documentation.
> 
> Best regards,

ok, what do you think of the following (doc/gdal_footer.html) :

<hr>
<div align="center">
The documentation on gdal.org is covered under the terms of the <a 
href="http://trac.osgeo.org/gdal/wiki/FAQGeneral#WhatlicensedoesGDALOGRuse">X/MIT 
license</a> - 
Generated for GDAL by 
<a href="http://www.doxygen.org/index.html"><img src="doxygen.png" 
alt="doxygen" align="middle" border="0"></a> $doxygenversion.
</div>
</body>
</html>

Note that not all pages will display this footer since we have quite a lot of 
static HTML pages (the format list page, the driver specific pages, etc...).

Here are some questions :

1) I'm wondering if we should say "The documentation on" or "The content on" 
(in case someone wonders if some content is really documentation ;-)). Should 
we mention "on gdal.org" that will extend to all pages, or use something like 
"The content of this page is covered under the terms of the X/MIT license" 
that only apply to the current page, and not the whole site ? This has the 
advantage to have better control on which pages it apply since it can only be 
content committed in SVN. But pages such as the static HTML ones would still 
be in a grey area.

2) I'm unsure of the status of "Adam's 2.5 D Simple Features Proposal (OGC 
99-402r2)" : http://home.gdal.org/projects/opengis/twohalfdsf.html that is 
linked from http://gdal.org/ogr/ but actually lives on home.gdal.org/ . Same 
question for http://home.gdal.org/projects/opengis/wkt_prop.html .

3) By the way, what about the content on http://home.gdal.org/ ? If we use 
"The documentation on gdal.org is covered...", would it be considered to be 
included by this sentence ? I think that part of it, like 
http://home.gdal.org/projects/ could be good candidate. But some other content 
( http://home.gdal.org/aj/other.html ;-) ) wasn't primarly meant as being 
redistribuable... To my knowledge, Frank being the only one to have write 
access on home.gdal.org, it should be easy to have a clear status on this.

4) I see that http://mapserver.org/documentation.html doesn't display the 
license, but "? Copyright 2011, Regents of the University of Minnesota.". When 
you click on Copyright, you are directed to a page with the mapserver X/MIT 
license. So should we mention a license or a copyright ? If a copyright, what 
would be the appropriate one ?

5) Once decided on what to do exactly, as it touches licensing, I'm wondering 
if we shouldn't decide this through a motion. 

6) Other question, what about the content on trac.osgeo.org/gdal ? It is more 
difficult to determine its licensing in a global way because anybody can add 
content, not only GDAL committers...

Thoughts ?
From dcole at integrity-apps.com  Fri Jul  8 15:41:43 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Fri Jul  8 21:30:46 2011
Subject: [gdal-dev] Adding a subdataset to a NITF
Message-ID: <8406B84EA8899042A8508D858843972903C0C3A0@CHUNEX01.integrity-apps.com>

Hello list,

I have been reading through the documentation to see if it is possible to add a subdataset to a format that supports it (NITF).
It seems like based on the data model it is possible to read those by extracting the name and then reading it as normal as if that was the file name. Is there any ability to write a subdataset into a file?

Derek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/2acface2/attachment-0001.html
From even.rouault at mines-paris.org  Fri Jul  8 15:46:56 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  8 21:35:34 2011
Subject: [gdal-dev] Adding a subdataset to a NITF
In-Reply-To: <8406B84EA8899042A8508D858843972903C0C3A0@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903C0C3A0@CHUNEX01.integrity-apps.com>
Message-ID: <201107082146.56359.even.rouault@mines-paris.org>

Le vendredi 08 juillet 2011 21:41:43, Cole, Derek a ?crit :
> Hello list,
> 
> I have been reading through the documentation to see if it is possible to
> add a subdataset to a format that supports it (NITF). It seems like based
> on the data model it is possible to read those by extracting the name and
> then reading it as normal as if that was the file name. Is there any
> ability to write a subdataset into a file?

You can create a multi image/subdataset file at Create() time with the NUMI 
creation option. See the doc in http://gdal.org/frmt_nitf.html

Then when you open the subdataset in GA_Update mode, you can write the imagery 
in it

> 
> Derek
From isaac.gerg at gergltd.com  Fri Jul  8 15:55:12 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Fri Jul  8 21:45:20 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
Message-ID: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>

Hi Everyone,

I am wondering if there is a build (beta or release) of GDAL for Python 3.2
on the Windows 64bit platform.  I have been browsing around the ticket area
of the website and there appears to have been code entered in to make
GDAL compatible with python 3.2.  However, I cannot find where these
binaries are available for download.

Any help would be great appreciated.

Thanks in advance,
Isaac
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/4146de7e/attachment.html
From even.rouault at mines-paris.org  Fri Jul  8 16:03:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul  8 21:52:50 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
Message-ID: <201107082203.23218.even.rouault@mines-paris.org>

Le vendredi 08 juillet 2011 21:55:12, Isaac Gerg a ?crit :
> Hi Everyone,
> 
> I am wondering if there is a build (beta or release) of GDAL for Python 3.2
> on the Windows 64bit platform.  I have been browsing around the ticket area
> of the website and there appears to have been code entered in to make
> GDAL compatible with python 3.2.  However, I cannot find where these
> binaries are available for download.

No binaries AFAIK. You have to build them yourself from source, and this is 
new to trunk.

http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and 3.1. Perhaps 
Tamas would want to add support for 3.2 ?

> 
> Any help would be great appreciated.
> 
> Thanks in advance,
> Isaac
From dcole at integrity-apps.com  Fri Jul  8 18:40:19 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Sat Jul  9 00:38:50 2011
Subject: [gdal-dev] Adding a subdataset to a NITF
In-Reply-To: <201107082146.56359.even.rouault@mines-paris.org>
References: <8406B84EA8899042A8508D858843972903C0C3A0@CHUNEX01.integrity-apps.com>
	<201107082146.56359.even.rouault@mines-paris.org>
Message-ID: <8406B84EA8899042A8508D858843972903C0C3FA@CHUNEX01.integrity-apps.com>

Perfect. I guess I missed this, digging around in the API instead of the format specification!

Thanks! 

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Friday, July 08, 2011 3:47 PM
To: gdal-dev@lists.osgeo.org
Cc: Cole, Derek
Subject: Re: [gdal-dev] Adding a subdataset to a NITF

Le vendredi 08 juillet 2011 21:41:43, Cole, Derek a ?crit :
> Hello list,
> 
> I have been reading through the documentation to see if it is possible 
> to add a subdataset to a format that supports it (NITF). It seems like 
> based on the data model it is possible to read those by extracting the 
> name and then reading it as normal as if that was the file name. Is 
> there any ability to write a subdataset into a file?

You can create a multi image/subdataset file at Create() time with the NUMI creation option. See the doc in http://gdal.org/frmt_nitf.html

Then when you open the subdataset in GA_Update mode, you can write the imagery in it

> 
> Derek
From mariusjigmond at hotmail.com  Fri Jul  8 20:56:41 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jul  9 03:03:41 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E171ECF.2010504@cironline.org>
References: <4E14FF42.50903@cironline.org>
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
	<4E171ECF.2010504@cironline.org>
Message-ID: <BLU0-SMTP11826C38B12EB2FA526CA99B2430@phx.gbl>



On Fri, 2011-07-08 at 08:14 -0700, Michael Corey wrote:

> OK, I did a little more work on this, and I've narrowed down what's 
> going on, but I could still use some help in figuring out how to solve it.
> 
> Here's my original image:
> 
> http://mikejcorey.com/spatial/diablo-orig-5pct.tif
> 
> The original appears to have an RGBA setup (RGB channels and an alpha 
> channel).
> When I run this:
> 
> gdalwarp -crop_to_cutline -cutline cutout.shp sourceimage.tif 
> diablo-cutline.tif
> 
> Here's what I get:
> 
> http://mikejcorey.com/spatial/diablo-cutline-5pct.tif
> 
> This comes out as an RGB image with no alpha channel, with each channel 
> being semi-transparent.
> 

Not in my case. Could there be something wrong with your GDAL setup? I
drew a shapefile mask and ran the above command but my result is RGBA,
the alpha band is not lost. See mask and result here:
http://ubuntuone.com/p/13WR/

the output of gdalinfo:
marius@mobi:~/Downloads$ gdalinfo diablo_cutl.tif 
Driver: GTiff/GeoTIFF
Files: diablo_cutl.tif
Size is 266, 224
Coordinate System is:
PROJCS["NAD83 / UTM zone 10N",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010002,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-123],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","26910"]]
Origin = (693798.721929854014888,3902305.751849883235991)
Pixel Size = (20.022668877344305,-20.040546259961307)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (  693798.722, 3902305.752) (120d52'12.04"W, 35d14'42.43"N)
Lower Left  (  693798.722, 3897816.669) (120d52'15.84"W, 35d12'16.81"N)
Upper Right (  699124.752, 3902305.752) (120d48'41.44"W, 35d14'38.67"N)
Lower Right (  699124.752, 3897816.669) (120d48'45.35"W, 35d12'13.05"N)
Center      (  696461.737, 3900061.211) (120d50'28.67"W, 35d13'27.75"N)
Band 1 Block=266x7 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA 
Band 2 Block=266x7 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA 
Band 3 Block=266x7 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA 
Band 4 Block=266x7 Type=Byte, ColorInterp=Alpha

-marius


> However, if I do this:
> 
> gdalwarp -dstalpha -crop_to_cutline -cutline cutout.shp sourceimage.tif 
> diablo-dstalpha-cutline.tif
> 
> I get this:
> 
> http://mikejcorey.com/spatial/diablo-dstalpha-cutline-5pct.tif
> 
> This one is strange, because it appears to be a grayscale image. But 
> when I open it in Photoshop, I see that it actually has 4 alpha 
> channels. I suspect that those are just getting set incorrectly as alpha 
> and are in fact the RGB channels, but can someone explain that behavior 
> or how to fix it?
> 
> What I want to end up with is a clipped RGB image (or RGBA) image where 
> nodata is transparent and the RGB isn't translucent.
> 
> Thanks again!
> 
> Michael Corey
> 
> 
> 
> On 7/7/11 7:13 AM, Eli Adam wrote:
> > Michael,
> >
> >>>> On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org>, Michael
> > Corey<mcorey@cironline.org>  wrote:
> >> Sure, I've uploaded samples here.
> >>
> >> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
> >> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
> > I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
> >
> >> These are the same as the images created by the process I described (but
> >> scaled down).
> >>
> >> To your point about specifying size in the first step -- will that make
> >> the process run faster, or does it do the scaling down after it builds
> >> the full-resolution image?
> >>
> >> Also, I notice that my filesize always gets significantly bigger when I
> >> do the cutout step, which seems counter-intuitive to me since in theory
> >> shouldn't there be less information present once the cutout is done?
> > -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :
> >
> > -crop_to_cutline:
> >      (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
> >
> > Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
> >
> > Best Regards, Eli
> >
> >> Thanks for your help!
> >>
> >> Michael Corey
> >>
> >>
> >> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
> >>> Michael,
> >>>
> >>> Can you provide screenshots of
> >>> diablo-combined-center-utm10-70pct-box.tif and
> >>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
> >>>
> >>> By the way, you can perform the actions of the two gdal_translate
> >>> commands in the first step with the gdal_merge.py script itself unless
> >>> you want to use a specific resampling algorithm.
> >>>
> >>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org
> >>> <mailto:mcorey@cironline.org>>  wrote:
> >>>
> >>>      Hi all:
> >>>
> >>>      I'm using a shapefile as a clipping mask to cut out the shoreline
> >>>      from some DOQ files that I have merged together. But when I do the
> >>>      clipping step, I end up with unwanted semitransparency in the
> >>>      non-clipped areas.
> >>>
> >>>      I'm pretty sure the problem is only with my gdalwarp step at the end.
> >>>
> >>>      Here's my process:
> >>>
> >>>      gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
> >>>      file file file
> >>>
> >>>      gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
> >>>      diablo-combined-center-utm10-70pct.tif
> >>>
> >>>      ogrinfo -al ./diablo_canyon_detail_clipper.shp
> >>>      //Extent: (XXXX, YYYY) - (XXXX, YYYY)
> >>>
> >>>      gdal_translate -projwin XXXX YYYY XXXX YYYY
> >>>      diablo-combined-center-utm10-70pct.tif
> >>>      diablo-combined-center-utm10-70pct-box.tif
> >>>
> >>>      gdalwarp -co COMPRESS=DEFLATE -cutline
> >>>      ./diablo_canyon_detail_clipper.shp
> >>>      diablo-combined-center-utm10-70pct-box.tif
> >>>      diablo-combined-center-utm10-70pct-cutout.tif
> >>>
> >>>      Can anyone help?
> >>>
> >>>      Thanks!
> >>>
> >>>      --
> >>>      Michael Corey
> >>>
> >>>      _______________________________________________
> >>>      gdal-dev mailing list
> >>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> >>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>>
> >>>
> >>>
> >>> -- 
> >>> Best regards,
> >>> Chaitanya kumar CH.
> >>> /t?a???nj?/ /k?m?r/
> >>> +91-9494447584
> >>> 17.2416N 80.1426E
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/f9ae695e/attachment-0001.html
From mcorey at cironline.org  Fri Jul  8 21:02:24 2011
From: mcorey at cironline.org (Michael Corey)
Date: Sat Jul  9 03:08:36 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <BLU0-SMTP11826C38B12EB2FA526CA99B2430@phx.gbl>
References: <4E14FF42.50903@cironline.org>	
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
	<4E171ECF.2010504@cironline.org>
	<BLU0-SMTP11826C38B12EB2FA526CA99B2430@phx.gbl>
Message-ID: <4E17A8A0.6080709@cironline.org>

That certainly could be. I'm running GDAL 1.8 from the kyngchaos site. 
Which version are you running?

Thanks,

Michael Corey


On 7/8/11 5:56 PM, Marius Jigmond wrote:
>
>
> On Fri, 2011-07-08 at 08:14 -0700, Michael Corey wrote:
>> OK, I did a little more work on this, and I've narrowed down what's
>> going on, but I could still use some help in figuring out how to solve it.
>>
>> Here's my original image:
>>
>> http://mikejcorey.com/spatial/diablo-orig-5pct.tif
>>
>> The original appears to have an RGBA setup (RGB channels and an alpha
>> channel).
>> When I run this:
>>
>> gdalwarp -crop_to_cutline -cutline cutout.shp sourceimage.tif
>> diablo-cutline.tif
>>
>> Here's what I get:
>>
>> http://mikejcorey.com/spatial/diablo-cutline-5pct.tif
>>
>> This comes out as an RGB image with no alpha channel, with each channel
>> being semi-transparent.
>>
> Not in my case. Could there be something wrong with your GDAL setup? I 
> drew a shapefile mask and ran the above command but my result is RGBA, 
> the alpha band is not lost. See mask and result here:
> http://ubuntuone.com/p/13WR/
>
> the output of gdalinfo:
> marius@mobi <mailto:marius@mobi>:~/Downloads$ gdalinfo diablo_cutl.tif
> Driver: GTiff/GeoTIFF
> Files: diablo_cutl.tif
> Size is 266, 224
> Coordinate System is:
> PROJCS["NAD83 / UTM zone 10N",
>     GEOGCS["NAD83",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>                 AUTHORITY["EPSG","7019"]],
>             AUTHORITY["EPSG","6269"]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433],
>         AUTHORITY["EPSG","4269"]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-123],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["metre",1,
>         AUTHORITY["EPSG","9001"]],
>     AUTHORITY["EPSG","26910"]]
> Origin = (693798.721929854014888,3902305.751849883235991)
> Pixel Size = (20.022668877344305,-20.040546259961307)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (  693798.722, 3902305.752) (120d52'12.04"W, 35d14'42.43"N)
> Lower Left  (  693798.722, 3897816.669) (120d52'15.84"W, 35d12'16.81"N)
> Upper Right (  699124.752, 3902305.752) (120d48'41.44"W, 35d14'38.67"N)
> Lower Right (  699124.752, 3897816.669) (120d48'45.35"W, 35d12'13.05"N)
> Center      (  696461.737, 3900061.211) (120d50'28.67"W, 35d13'27.75"N)
> Band 1 Block=266x7 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=266x7 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=266x7 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=266x7 Type=Byte, ColorInterp=Alpha
>
> -marius
>
>> However, if I do this:
>>
>> gdalwarp -dstalpha -crop_to_cutline -cutline cutout.shp sourceimage.tif
>> diablo-dstalpha-cutline.tif
>>
>> I get this:
>>
>> http://mikejcorey.com/spatial/diablo-dstalpha-cutline-5pct.tif
>>
>> This one is strange, because it appears to be a grayscale image. But
>> when I open it in Photoshop, I see that it actually has 4 alpha
>> channels. I suspect that those are just getting set incorrectly as alpha
>> and are in fact the RGB channels, but can someone explain that behavior
>> or how to fix it?
>>
>> What I want to end up with is a clipped RGB image (or RGBA) image where
>> nodata is transparent and the RGB isn't translucent.
>>
>> Thanks again!
>>
>> Michael Corey
>>
>>
>>
>> On 7/7/11 7:13 AM, Eli Adam wrote:
>> >  Michael,
>> >
>> >>>>  On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org  <mailto:4E14FF42.50903@cironline.org>>, Michael
>> >  Corey<mcorey@cironline.org  <mailto:mcorey@cironline.org>>   wrote:
>> >>  Sure, I've uploaded samples here.
>> >>
>> >>  http://www.mikejcorey.com/spatial/diablo-box-sample.tif
>> >>  http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
>> >  I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
>> >
>> >>  These are the same as the images created by the process I described (but
>> >>  scaled down).
>> >>
>> >>  To your point about specifying size in the first step -- will that make
>> >>  the process run faster, or does it do the scaling down after it builds
>> >>  the full-resolution image?
>> >>
>> >>  Also, I notice that my filesize always gets significantly bigger when I
>> >>  do the cutout step, which seems counter-intuitive to me since in theory
>> >>  shouldn't there be less information present once the cutout is done?
>> >  -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page,http://gdal.org/gdalwarp.html  :
>> >
>> >  -crop_to_cutline:
>> >       (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
>> >
>> >  Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
>> >
>> >  Best Regards, Eli
>> >
>> >>  Thanks for your help!
>> >>
>> >>  Michael Corey
>> >>
>> >>
>> >>  On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
>> >>>  Michael,
>> >>>
>> >>>  Can you provide screenshots of
>> >>>  diablo-combined-center-utm10-70pct-box.tif and
>> >>>  diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>> >>>
>> >>>  By the way, you can perform the actions of the two gdal_translate
>> >>>  commands in the first step with the gdal_merge.py script itself unless
>> >>>  you want to use a specific resampling algorithm.
>> >>>
>> >>>  On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org  <mailto:mcorey@cironline.org>
>> >>>  <mailto:mcorey@cironline.org>>   wrote:
>> >>>
>> >>>       Hi all:
>> >>>
>> >>>       I'm using a shapefile as a clipping mask to cut out the shoreline
>> >>>       from some DOQ files that I have merged together. But when I do the
>> >>>       clipping step, I end up with unwanted semitransparency in the
>> >>>       non-clipped areas.
>> >>>
>> >>>       I'm pretty sure the problem is only with my gdalwarp step at the end.
>> >>>
>> >>>       Here's my process:
>> >>>
>> >>>       gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
>> >>>       file file file
>> >>>
>> >>>       gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>> >>>       diablo-combined-center-utm10-70pct.tif
>> >>>
>> >>>       ogrinfo -al ./diablo_canyon_detail_clipper.shp
>> >>>       //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>> >>>
>> >>>       gdal_translate -projwin XXXX YYYY XXXX YYYY
>> >>>       diablo-combined-center-utm10-70pct.tif
>> >>>       diablo-combined-center-utm10-70pct-box.tif
>> >>>
>> >>>       gdalwarp -co COMPRESS=DEFLATE -cutline
>> >>>       ./diablo_canyon_detail_clipper.shp
>> >>>       diablo-combined-center-utm10-70pct-box.tif
>> >>>       diablo-combined-center-utm10-70pct-cutout.tif
>> >>>
>> >>>       Can anyone help?
>> >>>
>> >>>       Thanks!
>> >>>
>> >>>       --
>> >>>       Michael Corey
>> >>>
>> >>>       _______________________________________________
>> >>>       gdal-dev mailing list
>> >>>       gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org><mailto:gdal-dev@lists.osgeo.org>
>> >>>       http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >>>
>> >>>
>> >>>
>> >>>
>> >>>  -- 
>> >>>  Best regards,
>> >>>  Chaitanya kumar CH.
>> >>>  /t?a???nj?/ /k?m?r/
>> >>>  +91-9494447584
>> >>>  17.2416N 80.1426E
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/aaf11104/attachment.html
From mariusjigmond at hotmail.com  Fri Jul  8 21:12:15 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jul  9 03:19:01 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E17A8A0.6080709@cironline.org>
References: <4E14FF42.50903@cironline.org>
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
	<4E171ECF.2010504@cironline.org>
	<BLU0-SMTP11826C38B12EB2FA526CA99B2430@phx.gbl>
	<4E17A8A0.6080709@cironline.org>
Message-ID: <BLU0-SMTP1425EA629F0355C5CFDEEC5B2430@phx.gbl>

1.8 compiled from source

-marius

On Fri, 2011-07-08 at 18:02 -0700, Michael Corey wrote:

> That certainly could be. I'm running GDAL 1.8 from the kyngchaos site.
> Which version are you running?
> 
> Thanks,
> 
> Michael Corey
> 
> 
> On 7/8/11 5:56 PM, Marius Jigmond wrote: 
> 
> > 
> > 
> > On Fri, 2011-07-08 at 08:14 -0700, Michael Corey wrote: 
> > 
> > > OK, I did a little more work on this, and I've narrowed down what's 
> > > going on, but I could still use some help in figuring out how to solve it.
> > > 
> > > Here's my original image:
> > > 
> > > http://mikejcorey.com/spatial/diablo-orig-5pct.tif
> > > 
> > > The original appears to have an RGBA setup (RGB channels and an alpha 
> > > channel).
> > > When I run this:
> > > 
> > > gdalwarp -crop_to_cutline -cutline cutout.shp sourceimage.tif 
> > > diablo-cutline.tif
> > > 
> > > Here's what I get:
> > > 
> > > http://mikejcorey.com/spatial/diablo-cutline-5pct.tif
> > > 
> > > This comes out as an RGB image with no alpha channel, with each channel 
> > > being semi-transparent.
> > > 
> > 
> > Not in my case. Could there be something wrong with your GDAL setup?
> > I drew a shapefile mask and ran the above command but my result is
> > RGBA, the alpha band is not lost. See mask and result here:
> > http://ubuntuone.com/p/13WR/
> > 
> > the output of gdalinfo:
> > marius@mobi:~/Downloads$ gdalinfo diablo_cutl.tif 
> > Driver: GTiff/GeoTIFF
> > Files: diablo_cutl.tif
> > Size is 266, 224
> > Coordinate System is:
> > PROJCS["NAD83 / UTM zone 10N",
> >     GEOGCS["NAD83",
> >         DATUM["North_American_Datum_1983",
> >             SPHEROID["GRS 1980",6378137,298.2572221010002,
> >                 AUTHORITY["EPSG","7019"]],
> >             AUTHORITY["EPSG","6269"]],
> >         PRIMEM["Greenwich",0],
> >         UNIT["degree",0.0174532925199433],
> >         AUTHORITY["EPSG","4269"]],
> >     PROJECTION["Transverse_Mercator"],
> >     PARAMETER["latitude_of_origin",0],
> >     PARAMETER["central_meridian",-123],
> >     PARAMETER["scale_factor",0.9996],
> >     PARAMETER["false_easting",500000],
> >     PARAMETER["false_northing",0],
> >     UNIT["metre",1,
> >         AUTHORITY["EPSG","9001"]],
> >     AUTHORITY["EPSG","26910"]]
> > Origin = (693798.721929854014888,3902305.751849883235991)
> > Pixel Size = (20.022668877344305,-20.040546259961307)
> > Metadata:
> >   AREA_OR_POINT=Area
> > Image Structure Metadata:
> >   INTERLEAVE=PIXEL
> > Corner Coordinates:
> > Upper Left  (  693798.722, 3902305.752) (120d52'12.04"W,
> > 35d14'42.43"N)
> > Lower Left  (  693798.722, 3897816.669) (120d52'15.84"W,
> > 35d12'16.81"N)
> > Upper Right (  699124.752, 3902305.752) (120d48'41.44"W,
> > 35d14'38.67"N)
> > Lower Right (  699124.752, 3897816.669) (120d48'45.35"W,
> > 35d12'13.05"N)
> > Center      (  696461.737, 3900061.211) (120d50'28.67"W,
> > 35d13'27.75"N)
> > Band 1 Block=266x7 Type=Byte, ColorInterp=Red
> >   Mask Flags: PER_DATASET ALPHA 
> > Band 2 Block=266x7 Type=Byte, ColorInterp=Green
> >   Mask Flags: PER_DATASET ALPHA 
> > Band 3 Block=266x7 Type=Byte, ColorInterp=Blue
> >   Mask Flags: PER_DATASET ALPHA 
> > Band 4 Block=266x7 Type=Byte, ColorInterp=Alpha
> > 
> > -marius
> > 
> > 
> > > However, if I do this:
> > > 
> > > gdalwarp -dstalpha -crop_to_cutline -cutline cutout.shp sourceimage.tif 
> > > diablo-dstalpha-cutline.tif
> > > 
> > > I get this:
> > > 
> > > http://mikejcorey.com/spatial/diablo-dstalpha-cutline-5pct.tif
> > > 
> > > This one is strange, because it appears to be a grayscale image. But 
> > > when I open it in Photoshop, I see that it actually has 4 alpha 
> > > channels. I suspect that those are just getting set incorrectly as alpha 
> > > and are in fact the RGB channels, but can someone explain that behavior 
> > > or how to fix it?
> > > 
> > > What I want to end up with is a clipped RGB image (or RGBA) image where 
> > > nodata is transparent and the RGB isn't translucent.
> > > 
> > > Thanks again!
> > > 
> > > Michael Corey
> > > 
> > > 
> > > 
> > > On 7/7/11 7:13 AM, Eli Adam wrote:
> > > > Michael,
> > > >
> > > >>>> On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org>, Michael
> > > > Corey<mcorey@cironline.org>  wrote:
> > > >> Sure, I've uploaded samples here.
> > > >>
> > > >> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
> > > >> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
> > > > I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
> > > >
> > > >> These are the same as the images created by the process I described (but
> > > >> scaled down).
> > > >>
> > > >> To your point about specifying size in the first step -- will that make
> > > >> the process run faster, or does it do the scaling down after it builds
> > > >> the full-resolution image?
> > > >>
> > > >> Also, I notice that my filesize always gets significantly bigger when I
> > > >> do the cutout step, which seems counter-intuitive to me since in theory
> > > >> shouldn't there be less information present once the cutout is done?
> > > > -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :
> > > >
> > > > -crop_to_cutline:
> > > >      (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
> > > >
> > > > Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
> > > >
> > > > Best Regards, Eli
> > > >
> > > >> Thanks for your help!
> > > >>
> > > >> Michael Corey
> > > >>
> > > >>
> > > >> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
> > > >>> Michael,
> > > >>>
> > > >>> Can you provide screenshots of
> > > >>> diablo-combined-center-utm10-70pct-box.tif and
> > > >>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
> > > >>>
> > > >>> By the way, you can perform the actions of the two gdal_translate
> > > >>> commands in the first step with the gdal_merge.py script itself unless
> > > >>> you want to use a specific resampling algorithm.
> > > >>>
> > > >>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org
> > > >>> <mailto:mcorey@cironline.org>>  wrote:
> > > >>>
> > > >>>      Hi all:
> > > >>>
> > > >>>      I'm using a shapefile as a clipping mask to cut out the shoreline
> > > >>>      from some DOQ files that I have merged together. But when I do the
> > > >>>      clipping step, I end up with unwanted semitransparency in the
> > > >>>      non-clipped areas.
> > > >>>
> > > >>>      I'm pretty sure the problem is only with my gdalwarp step at the end.
> > > >>>
> > > >>>      Here's my process:
> > > >>>
> > > >>>      gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
> > > >>>      file file file
> > > >>>
> > > >>>      gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
> > > >>>      diablo-combined-center-utm10-70pct.tif
> > > >>>
> > > >>>      ogrinfo -al ./diablo_canyon_detail_clipper.shp
> > > >>>      //Extent: (XXXX, YYYY) - (XXXX, YYYY)
> > > >>>
> > > >>>      gdal_translate -projwin XXXX YYYY XXXX YYYY
> > > >>>      diablo-combined-center-utm10-70pct.tif
> > > >>>      diablo-combined-center-utm10-70pct-box.tif
> > > >>>
> > > >>>      gdalwarp -co COMPRESS=DEFLATE -cutline
> > > >>>      ./diablo_canyon_detail_clipper.shp
> > > >>>      diablo-combined-center-utm10-70pct-box.tif
> > > >>>      diablo-combined-center-utm10-70pct-cutout.tif
> > > >>>
> > > >>>      Can anyone help?
> > > >>>
> > > >>>      Thanks!
> > > >>>
> > > >>>      --
> > > >>>      Michael Corey
> > > >>>
> > > >>>      _______________________________________________
> > > >>>      gdal-dev mailing list
> > > >>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> > > >>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > >>>
> > > >>>
> > > >>>
> > > >>>
> > > >>> -- 
> > > >>> Best regards,
> > > >>> Chaitanya kumar CH.
> > > >>> /t?a???nj?/ /k?m?r/
> > > >>> +91-9494447584
> > > >>> 17.2416N 80.1426E
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/8a3a8784/attachment-0001.html
From mariusjigmond at hotmail.com  Fri Jul  8 21:59:32 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jul  9 04:08:53 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <4E17ADBA.1070207@cironline.org>
References: <4E14FF42.50903@cironline.org>
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
	<4E171ECF.2010504@cironline.org>
	<BLU0-SMTP11826C38B12EB2FA526CA99B2430@phx.gbl>
	<4E17A8A0.6080709@cironline.org>
	<BLU0-SMTP1425EA629F0355C5CFDEEC5B2430@phx.gbl>
	<4E17ADBA.1070207@cironline.org>
Message-ID: <BLU0-SMTP126A93950AD9F1824FB97C8B2430@phx.gbl>

I use QGIS which knows how to interpret the bands. I have no idea how
Photoshop handles the alpha band. You can try specifying -dstnodata:
gdalwarp -crop_to_cutline -cutline mask.shp -dstnodata "0 0 0"
source.tif dest.tif
this should output a RGBA tif with NoData=0 (black) and maybe Photoshop
can interpret the NoData tag.

You might also want to try nearblack:
http://www.gdal.org/nearblack.html

I suppose it would be important to know what the final purpose of these
images is because as far as GIS software goes just about all can read
the cropped tif just fine with proper transparency.

-marius

On Fri, 2011-07-08 at 18:24 -0700, Michael Corey wrote:

> Actually when I opened up your sample file in Photoshop I got the same
> results as I had earlier. What viewer are you using to look at your
> output files?
> 
> Also, I did find a workaround that at least improves the situation for
> me.
> 
> First I translate the source images:
> 
> gdal_translate source1.tif source1-noalpha.tif -b 1 -b 2 -b 3 -mask 4
> -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config
> GDAL_TIFF_INTERNAL_MASK YES
> 
> Then use warp to do my merging and clipping:
> 
> gdalwarp -crop_to_cutline -cutline
> ~/Documents/GIS/usa/California/doq/diablo-fullzoom-cutout.shp
> source1-noalpha.tif source2-noalpha.tif fullzoom-clipped.tif
> 
> I still have to use Photoshop to get rid of the nodata section, but at
> least my transparency isn't affected.
> 
> Any ideas how to get rid of the black and have transparent pixels
> instead, anyone?
> 
> Thanks again,
> 
> Michael Corey
> 
> 
> On 7/8/11 6:12 PM, Marius Jigmond wrote: 
> 
> > 1.8 compiled from source
> > 
> > -marius
> > 
> > On Fri, 2011-07-08 at 18:02 -0700, Michael Corey wrote:
> > 
> > > That certainly could be. I'm running GDAL 1.8 from the kyngchaos
> > > site. Which version are you running?
> > > 
> > > Thanks, 
> > > 
> > > Michael Corey
> > > 
> > > 
> > > On 7/8/11 5:56 PM, Marius Jigmond wrote: 
> > > 
> > > > 
> > > > 
> > > > On Fri, 2011-07-08 at 08:14 -0700, Michael Corey wrote: 
> > > > 
> > > > > OK, I did a little more work on this, and I've narrowed down what's 
> > > > > going on, but I could still use some help in figuring out how to solve it.
> > > > > 
> > > > > Here's my original image:
> > > > > 
> > > > > http://mikejcorey.com/spatial/diablo-orig-5pct.tif
> > > > > 
> > > > > The original appears to have an RGBA setup (RGB channels and an alpha 
> > > > > channel).
> > > > > When I run this:
> > > > > 
> > > > > gdalwarp -crop_to_cutline -cutline cutout.shp sourceimage.tif 
> > > > > diablo-cutline.tif
> > > > > 
> > > > > Here's what I get:
> > > > > 
> > > > > http://mikejcorey.com/spatial/diablo-cutline-5pct.tif
> > > > > 
> > > > > This comes out as an RGB image with no alpha channel, with each channel 
> > > > > being semi-transparent.
> > > > > 
> > > > 
> > > > Not in my case. Could there be something wrong with your GDAL
> > > > setup? I drew a shapefile mask and ran the above command but my
> > > > result is RGBA, the alpha band is not lost. See mask and result
> > > > here:
> > > > http://ubuntuone.com/p/13WR/
> > > > 
> > > > the output of gdalinfo:
> > > > marius@mobi:~/Downloads$ gdalinfo diablo_cutl.tif 
> > > > Driver: GTiff/GeoTIFF
> > > > Files: diablo_cutl.tif
> > > > Size is 266, 224
> > > > Coordinate System is:
> > > > PROJCS["NAD83 / UTM zone 10N",
> > > >     GEOGCS["NAD83",
> > > >         DATUM["North_American_Datum_1983",
> > > >             SPHEROID["GRS 1980",6378137,298.2572221010002,
> > > >                 AUTHORITY["EPSG","7019"]],
> > > >             AUTHORITY["EPSG","6269"]],
> > > >         PRIMEM["Greenwich",0],
> > > >         UNIT["degree",0.0174532925199433],
> > > >         AUTHORITY["EPSG","4269"]],
> > > >     PROJECTION["Transverse_Mercator"],
> > > >     PARAMETER["latitude_of_origin",0],
> > > >     PARAMETER["central_meridian",-123],
> > > >     PARAMETER["scale_factor",0.9996],
> > > >     PARAMETER["false_easting",500000],
> > > >     PARAMETER["false_northing",0],
> > > >     UNIT["metre",1,
> > > >         AUTHORITY["EPSG","9001"]],
> > > >     AUTHORITY["EPSG","26910"]]
> > > > Origin = (693798.721929854014888,3902305.751849883235991)
> > > > Pixel Size = (20.022668877344305,-20.040546259961307)
> > > > Metadata:
> > > >   AREA_OR_POINT=Area
> > > > Image Structure Metadata:
> > > >   INTERLEAVE=PIXEL
> > > > Corner Coordinates:
> > > > Upper Left  (  693798.722, 3902305.752) (120d52'12.04"W,
> > > > 35d14'42.43"N)
> > > > Lower Left  (  693798.722, 3897816.669) (120d52'15.84"W,
> > > > 35d12'16.81"N)
> > > > Upper Right (  699124.752, 3902305.752) (120d48'41.44"W,
> > > > 35d14'38.67"N)
> > > > Lower Right (  699124.752, 3897816.669) (120d48'45.35"W,
> > > > 35d12'13.05"N)
> > > > Center      (  696461.737, 3900061.211) (120d50'28.67"W,
> > > > 35d13'27.75"N)
> > > > Band 1 Block=266x7 Type=Byte, ColorInterp=Red
> > > >   Mask Flags: PER_DATASET ALPHA 
> > > > Band 2 Block=266x7 Type=Byte, ColorInterp=Green
> > > >   Mask Flags: PER_DATASET ALPHA 
> > > > Band 3 Block=266x7 Type=Byte, ColorInterp=Blue
> > > >   Mask Flags: PER_DATASET ALPHA 
> > > > Band 4 Block=266x7 Type=Byte, ColorInterp=Alpha
> > > > 
> > > > -marius
> > > > 
> > > > 
> > > > > However, if I do this:
> > > > > 
> > > > > gdalwarp -dstalpha -crop_to_cutline -cutline cutout.shp sourceimage.tif 
> > > > > diablo-dstalpha-cutline.tif
> > > > > 
> > > > > I get this:
> > > > > 
> > > > > http://mikejcorey.com/spatial/diablo-dstalpha-cutline-5pct.tif
> > > > > 
> > > > > This one is strange, because it appears to be a grayscale image. But 
> > > > > when I open it in Photoshop, I see that it actually has 4 alpha 
> > > > > channels. I suspect that those are just getting set incorrectly as alpha 
> > > > > and are in fact the RGB channels, but can someone explain that behavior 
> > > > > or how to fix it?
> > > > > 
> > > > > What I want to end up with is a clipped RGB image (or RGBA) image where 
> > > > > nodata is transparent and the RGB isn't translucent.
> > > > > 
> > > > > Thanks again!
> > > > > 
> > > > > Michael Corey
> > > > > 
> > > > > 
> > > > > 
> > > > > On 7/7/11 7:13 AM, Eli Adam wrote:
> > > > > > Michael,
> > > > > >
> > > > > >>>> On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org>, Michael
> > > > > > Corey<mcorey@cironline.org>  wrote:
> > > > > >> Sure, I've uploaded samples here.
> > > > > >>
> > > > > >> http://www.mikejcorey.com/spatial/diablo-box-sample.tif
> > > > > >> http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
> > > > > > I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
> > > > > >
> > > > > >> These are the same as the images created by the process I described (but
> > > > > >> scaled down).
> > > > > >>
> > > > > >> To your point about specifying size in the first step -- will that make
> > > > > >> the process run faster, or does it do the scaling down after it builds
> > > > > >> the full-resolution image?
> > > > > >>
> > > > > >> Also, I notice that my filesize always gets significantly bigger when I
> > > > > >> do the cutout step, which seems counter-intuitive to me since in theory
> > > > > >> shouldn't there be less information present once the cutout is done?
> > > > > > -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page, http://gdal.org/gdalwarp.html :
> > > > > >
> > > > > > -crop_to_cutline:
> > > > > >      (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
> > > > > >
> > > > > > Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
> > > > > >
> > > > > > Best Regards, Eli
> > > > > >
> > > > > >> Thanks for your help!
> > > > > >>
> > > > > >> Michael Corey
> > > > > >>
> > > > > >>
> > > > > >> On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
> > > > > >>> Michael,
> > > > > >>>
> > > > > >>> Can you provide screenshots of
> > > > > >>> diablo-combined-center-utm10-70pct-box.tif and
> > > > > >>> diablo-combined-center-utm10-70pct-cutout.tif for comparison?
> > > > > >>>
> > > > > >>> By the way, you can perform the actions of the two gdal_translate
> > > > > >>> commands in the first step with the gdal_merge.py script itself unless
> > > > > >>> you want to use a specific resampling algorithm.
> > > > > >>>
> > > > > >>> On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org
> > > > > >>> <mailto:mcorey@cironline.org>>  wrote:
> > > > > >>>
> > > > > >>>      Hi all:
> > > > > >>>
> > > > > >>>      I'm using a shapefile as a clipping mask to cut out the shoreline
> > > > > >>>      from some DOQ files that I have merged together. But when I do the
> > > > > >>>      clipping step, I end up with unwanted semitransparency in the
> > > > > >>>      non-clipped areas.
> > > > > >>>
> > > > > >>>      I'm pretty sure the problem is only with my gdalwarp step at the end.
> > > > > >>>
> > > > > >>>      Here's my process:
> > > > > >>>
> > > > > >>>      gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
> > > > > >>>      file file file
> > > > > >>>
> > > > > >>>      gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
> > > > > >>>      diablo-combined-center-utm10-70pct.tif
> > > > > >>>
> > > > > >>>      ogrinfo -al ./diablo_canyon_detail_clipper.shp
> > > > > >>>      //Extent: (XXXX, YYYY) - (XXXX, YYYY)
> > > > > >>>
> > > > > >>>      gdal_translate -projwin XXXX YYYY XXXX YYYY
> > > > > >>>      diablo-combined-center-utm10-70pct.tif
> > > > > >>>      diablo-combined-center-utm10-70pct-box.tif
> > > > > >>>
> > > > > >>>      gdalwarp -co COMPRESS=DEFLATE -cutline
> > > > > >>>      ./diablo_canyon_detail_clipper.shp
> > > > > >>>      diablo-combined-center-utm10-70pct-box.tif
> > > > > >>>      diablo-combined-center-utm10-70pct-cutout.tif
> > > > > >>>
> > > > > >>>      Can anyone help?
> > > > > >>>
> > > > > >>>      Thanks!
> > > > > >>>
> > > > > >>>      --
> > > > > >>>      Michael Corey
> > > > > >>>
> > > > > >>>      _______________________________________________
> > > > > >>>      gdal-dev mailing list
> > > > > >>>      gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
> > > > > >>>      http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > > >>>
> > > > > >>>
> > > > > >>>
> > > > > >>>
> > > > > >>> -- 
> > > > > >>> Best regards,
> > > > > >>> Chaitanya kumar CH.
> > > > > >>> /t?a???nj?/ /k?m?r/
> > > > > >>> +91-9494447584
> > > > > >>> 17.2416N 80.1426E
> > > > > _______________________________________________
> > > > > gdal-dev mailing list
> > > > > gdal-dev@lists.osgeo.org
> > > > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> > > > > 
> > > 
> > > _______________________________________________
> > > gdal-dev mailing list
> > > gdal-dev@lists.osgeo.org
> > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110708/0ef77d05/attachment.html
From szekerest at gmail.com  Sat Jul  9 07:56:54 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Jul  9 14:39:12 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <201107082203.23218.even.rouault@mines-paris.org>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
	<201107082203.23218.even.rouault@mines-paris.org>
Message-ID: <CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>

2011/7/8 Even Rouault <even.rouault@mines-paris.org>

>
> http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and 3.1.
> Perhaps
> Tamas would want to add support for 3.2 ?
>
>
How do we stand with the Python 3.2 support in GDAL? Do we still require to
patch the gererated interface files so as to compile the bindings
successfully?
I'm a bit hesitant to include a patching step as part of the build execution
sequence.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110709/c0455da3/attachment.html
From even.rouault at mines-paris.org  Sat Jul  9 08:28:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul  9 15:11:27 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
	<201107082203.23218.even.rouault@mines-paris.org>
	<CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>
Message-ID: <201107091428.05428.even.rouault@mines-paris.org>

Le samedi 09 juillet 2011 13:56:54, Tamas Szekeres a ?crit :
> 2011/7/8 Even Rouault <even.rouault@mines-paris.org>
> 
> > http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and 3.1.
> > Perhaps
> > Tamas would want to add support for 3.2 ?
> 
> How do we stand with the Python 3.2 support in GDAL? Do we still require to
> patch the gererated interface files so as to compile the bindings
> successfully?
> I'm a bit hesitant to include a patching step as part of the build
> execution sequence.

I've just downloaded the latest swig version 2.0.4 and the good news is that 
it now generates binding files compatible with Python 3.2 (as well as with 
previous Python versions). I also tested quickly with Java and Perl and the 
generated files are good enough to enable "make test" to run successfully.

However, with CSharp, the generated cpp files have the following duplicate 
declaration 

  static OsrPINVOKE() {
  }

  static OsrPINVOKE() {
  }

which causes the following error :

mcs /debug:full /target:library /out:osr_csharp.dll osr/*.cs AssemblyInfo.cs
osr/OsrPINVOKE.cs(192,10): error CS0111: A member 
`OSGeo.OSR.OsrPINVOKE.OsrPINVOKE()' is already defined. Rename this member or 
use different parameter types
osr/OsrPINVOKE.cs(188,10): (Location of the symbol related to previous error)

whereas it is ok with swig 1.3.40

I couldn't find a relevant ticket in their bug tracker about this duplicate 
PINVOKE.


> 
> 
> Best regards,
> 
> Tamas
From warmerdam at pobox.com  Sat Jul  9 12:37:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul  9 19:35:35 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1RC2 Prepared
Message-ID: <CA+YzLBdjUi+1Z8G6jevyhm0Qy+D619wKet00etbBexQVosg5fg@mail.gmail.com>

Folks,

Somewhat belatedly I have prepared 1.8.1RC2 at:

  http://download.osgeo.org/gdal/gdal-1.8.1RC2.tar.gz
  http://download.osgeo.org/gdal/gdal181RC2.zip

Please test and report issues.  I will raise a motion to approve
it shortly after I have done some minimal testing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From isaac.gerg at gergltd.com  Sat Jul  9 13:08:34 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Sat Jul  9 20:08:24 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <201107091428.05428.even.rouault@mines-paris.org>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
	<201107082203.23218.even.rouault@mines-paris.org>
	<CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>
	<201107091428.05428.even.rouault@mines-paris.org>
Message-ID: <CADnN3yUez8B4+Lbz=oTSLPtYQrdxrqQU6r+NkjzuMOudnxROTw@mail.gmail.com>

Do you guys know when 3.2 will be supported?  How do I build from 3.2
currently using the patches you mentioned -- are there instructions
anywhere?

Thanks in advance,
Isaac

On Sat, Jul 9, 2011 at 8:28 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le samedi 09 juillet 2011 13:56:54, Tamas Szekeres a ?crit :
> > 2011/7/8 Even Rouault <even.rouault@mines-paris.org>
> >
> > > http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and 3.1.
> > > Perhaps
> > > Tamas would want to add support for 3.2 ?
> >
> > How do we stand with the Python 3.2 support in GDAL? Do we still require
> to
> > patch the gererated interface files so as to compile the bindings
> > successfully?
> > I'm a bit hesitant to include a patching step as part of the build
> > execution sequence.
>
> I've just downloaded the latest swig version 2.0.4 and the good news is
> that
> it now generates binding files compatible with Python 3.2 (as well as with
> previous Python versions). I also tested quickly with Java and Perl and the
> generated files are good enough to enable "make test" to run successfully.
>
> However, with CSharp, the generated cpp files have the following duplicate
> declaration
>
>  static OsrPINVOKE() {
>  }
>
>  static OsrPINVOKE() {
>  }
>
> which causes the following error :
>
> mcs /debug:full /target:library /out:osr_csharp.dll osr/*.cs
> AssemblyInfo.cs
> osr/OsrPINVOKE.cs(192,10): error CS0111: A member
> `OSGeo.OSR.OsrPINVOKE.OsrPINVOKE()' is already defined. Rename this member
> or
> use different parameter types
> osr/OsrPINVOKE.cs(188,10): (Location of the symbol related to previous
> error)
>
> whereas it is ok with swig 1.3.40
>
> I couldn't find a relevant ticket in their bug tracker about this duplicate
> PINVOKE.
>
>
> >
> >
> > Best regards,
> >
> > Tamas
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110709/4ef0a055/attachment.html
From aperi2007 at gmail.com  Sat Jul  9 14:12:03 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Sat Jul  9 21:15:05 2011
Subject: [gdal-dev] GML without geometry export forward shapefile with null
	geometry
Message-ID: <4E1899F3.9060109@gmail.com>

Hi,

is compliant with the gdal/ogr rules to have a GML driver to export 
forward a dbf when in the GML there is a class without geometry ?

Actually the GML drivers when meet a class without geometry export it as 
a shapefile having null geometry.

Thx,

Andrea Peri
From mcorey at cironline.org  Sat Jul  9 14:20:13 2011
From: mcorey at cironline.org (Michael Corey)
Date: Sat Jul  9 21:23:38 2011
Subject: [gdal-dev] Unwanted partial transparency when clipping
In-Reply-To: <BLU0-SMTP126A93950AD9F1824FB97C8B2430@phx.gbl>
References: <4E14FF42.50903@cironline.org>	
	<4E155C94.4F75.00CE.0@co.lincoln.or.us>
	<4E171ECF.2010504@cironline.org>	
	<BLU0-SMTP11826C38B12EB2FA526CA99B2430@phx.gbl>	
	<4E17A8A0.6080709@cironline.org>	
	<BLU0-SMTP1425EA629F0355C5CFDEEC5B2430@phx.gbl>	
	<4E17ADBA.1070207@cironline.org>
	<BLU0-SMTP126A93950AD9F1824FB97C8B2430@phx.gbl>
Message-ID: <4E189BDD.6060908@cironline.org>

I see -- you're right about QGIS.

I'm mostly using imagery for static or motion graphics, so my workflow 
ends up in graphics software like Photoshop, After Effects and other 
video, which all tend to handle imagery in roughly the same way. So I 
think I'll just have to do the translation to no alpha band before 
importing into those programs. I'm surprised they handle things that 
differently, but it's not an impossible thing to get around.

Thanks all for your help!

Michael Corey


On 7/8/11 6:59 PM, Marius Jigmond wrote:
> I use QGIS which knows how to interpret the bands. I have no idea how 
> Photoshop handles the alpha band. You can try specifying -dstnodata:
> gdalwarp -crop_to_cutline -cutline mask.shp -dstnodata "0 0 0" 
> source.tif dest.tif
> this should output a RGBA tif with NoData=0 (black) and maybe 
> Photoshop can interpret the NoData tag.
>
> You might also want to try nearblack:
> http://www.gdal.org/nearblack.html
>
> I suppose it would be important to know what the final purpose of 
> these images is because as far as GIS software goes just about all can 
> read the cropped tif just fine with proper transparency.
>
> -marius
>
> On Fri, 2011-07-08 at 18:24 -0700, Michael Corey wrote:
>> Actually when I opened up your sample file in Photoshop I got the 
>> same results as I had earlier. What viewer are you using to look at 
>> your output files?
>>
>> Also, I did find a workaround that at least improves the situation 
>> for me.
>>
>> First I translate the source images:
>>
>> gdal_translate source1.tif source1-noalpha.tif -b 1 -b 2 -b 3 -mask 4 
>> -co COMPRESS=JPEG -co PHOTOMETRIC=YCBCR --config 
>> GDAL_TIFF_INTERNAL_MASK YES
>>
>> Then use warp to do my merging and clipping:
>>
>> gdalwarp -crop_to_cutline -cutline 
>> ~/Documents/GIS/usa/California/doq/diablo-fullzoom-cutout.shp 
>> source1-noalpha.tif source2-noalpha.tif fullzoom-clipped.tif
>>
>> I still have to use Photoshop to get rid of the nodata section, but 
>> at least my transparency isn't affected.
>>
>> Any ideas how to get rid of the black and have transparent pixels 
>> instead, anyone?
>>
>> Thanks again,
>> Michael Corey
>>
>> On 7/8/11 6:12 PM, Marius Jigmond wrote:
>>> 1.8 compiled from source
>>>
>>> -marius
>>>
>>> On Fri, 2011-07-08 at 18:02 -0700, Michael Corey wrote:
>>>> That certainly could be. I'm running GDAL 1.8 from the kyngchaos 
>>>> site. Which version are you running?
>>>>
>>>> Thanks,
>>>> Michael Corey
>>>>
>>>> On 7/8/11 5:56 PM, Marius Jigmond wrote:
>>>>>
>>>>>
>>>>> On Fri, 2011-07-08 at 08:14 -0700, Michael Corey wrote:
>>>>>> OK, I did a little more work on this, and I've narrowed down what's
>>>>>> going on, but I could still use some help in figuring out how to solve it.
>>>>>>
>>>>>> Here's my original image:
>>>>>>
>>>>>> http://mikejcorey.com/spatial/diablo-orig-5pct.tif
>>>>>>
>>>>>> The original appears to have an RGBA setup (RGB channels and an alpha
>>>>>> channel).
>>>>>> When I run this:
>>>>>>
>>>>>> gdalwarp -crop_to_cutline -cutline cutout.shp sourceimage.tif
>>>>>> diablo-cutline.tif
>>>>>>
>>>>>> Here's what I get:
>>>>>>
>>>>>> http://mikejcorey.com/spatial/diablo-cutline-5pct.tif
>>>>>>
>>>>>> This comes out as an RGB image with no alpha channel, with each channel
>>>>>> being semi-transparent.
>>>>>>
>>>>> Not in my case. Could there be something wrong with your GDAL 
>>>>> setup? I drew a shapefile mask and ran the above command but my 
>>>>> result is RGBA, the alpha band is not lost. See mask and result here:
>>>>> http://ubuntuone.com/p/13WR/
>>>>>
>>>>> the output of gdalinfo:
>>>>> marius@mobi <mailto:marius@mobi>:~/Downloads$ gdalinfo 
>>>>> diablo_cutl.tif
>>>>> Driver: GTiff/GeoTIFF
>>>>> Files: diablo_cutl.tif
>>>>> Size is 266, 224
>>>>> Coordinate System is:
>>>>> PROJCS["NAD83 / UTM zone 10N",
>>>>>     GEOGCS["NAD83",
>>>>>         DATUM["North_American_Datum_1983",
>>>>>             SPHEROID["GRS 1980",6378137,298.2572221010002,
>>>>>                 AUTHORITY["EPSG","7019"]],
>>>>>             AUTHORITY["EPSG","6269"]],
>>>>>         PRIMEM["Greenwich",0],
>>>>>         UNIT["degree",0.0174532925199433],
>>>>>         AUTHORITY["EPSG","4269"]],
>>>>>     PROJECTION["Transverse_Mercator"],
>>>>>     PARAMETER["latitude_of_origin",0],
>>>>>     PARAMETER["central_meridian",-123],
>>>>>     PARAMETER["scale_factor",0.9996],
>>>>>     PARAMETER["false_easting",500000],
>>>>>     PARAMETER["false_northing",0],
>>>>>     UNIT["metre",1,
>>>>>         AUTHORITY["EPSG","9001"]],
>>>>>     AUTHORITY["EPSG","26910"]]
>>>>> Origin = (693798.721929854014888,3902305.751849883235991)
>>>>> Pixel Size = (20.022668877344305,-20.040546259961307)
>>>>> Metadata:
>>>>>   AREA_OR_POINT=Area
>>>>> Image Structure Metadata:
>>>>>   INTERLEAVE=PIXEL
>>>>> Corner Coordinates:
>>>>> Upper Left  (  693798.722, 3902305.752) (120d52'12.04"W, 
>>>>> 35d14'42.43"N)
>>>>> Lower Left  (  693798.722, 3897816.669) (120d52'15.84"W, 
>>>>> 35d12'16.81"N)
>>>>> Upper Right (  699124.752, 3902305.752) (120d48'41.44"W, 
>>>>> 35d14'38.67"N)
>>>>> Lower Right (  699124.752, 3897816.669) (120d48'45.35"W, 
>>>>> 35d12'13.05"N)
>>>>> Center      (  696461.737, 3900061.211) (120d50'28.67"W, 
>>>>> 35d13'27.75"N)
>>>>> Band 1 Block=266x7 Type=Byte, ColorInterp=Red
>>>>>   Mask Flags: PER_DATASET ALPHA
>>>>> Band 2 Block=266x7 Type=Byte, ColorInterp=Green
>>>>>   Mask Flags: PER_DATASET ALPHA
>>>>> Band 3 Block=266x7 Type=Byte, ColorInterp=Blue
>>>>>   Mask Flags: PER_DATASET ALPHA
>>>>> Band 4 Block=266x7 Type=Byte, ColorInterp=Alpha
>>>>>
>>>>> -marius
>>>>>
>>>>>> However, if I do this:
>>>>>>
>>>>>> gdalwarp -dstalpha -crop_to_cutline -cutline cutout.shp sourceimage.tif
>>>>>> diablo-dstalpha-cutline.tif
>>>>>>
>>>>>> I get this:
>>>>>>
>>>>>> http://mikejcorey.com/spatial/diablo-dstalpha-cutline-5pct.tif
>>>>>>
>>>>>> This one is strange, because it appears to be a grayscale image. But
>>>>>> when I open it in Photoshop, I see that it actually has 4 alpha
>>>>>> channels. I suspect that those are just getting set incorrectly as alpha
>>>>>> and are in fact the RGB channels, but can someone explain that behavior
>>>>>> or how to fix it?
>>>>>>
>>>>>> What I want to end up with is a clipped RGB image (or RGBA) image where
>>>>>> nodata is transparent and the RGB isn't translucent.
>>>>>>
>>>>>> Thanks again!
>>>>>>
>>>>>> Michael Corey
>>>>>>
>>>>>>
>>>>>>
>>>>>> On 7/7/11 7:13 AM, Eli Adam wrote:
>>>>>> >  Michael,
>>>>>> >
>>>>>> >>>>  On 7/6/2011 at 5:35 PM, in message<4E14FF42.50903@cironline.org  <mailto:4E14FF42.50903@cironline.org>>, Michael
>>>>>> >  Corey<mcorey@cironline.org  <mailto:mcorey@cironline.org>>   wrote:
>>>>>> >>  Sure, I've uploaded samples here.
>>>>>> >>
>>>>>> >>  http://www.mikejcorey.com/spatial/diablo-box-sample.tif
>>>>>> >>  http://www.mikejcorey.com/spatial/diablo-cutout-sample.tif
>>>>>> >  I don't notice the semi-transparency in these scaled down images.  Perhaps it is the way your viewer reads the mask?
>>>>>> >
>>>>>> >>  These are the same as the images created by the process I described (but
>>>>>> >>  scaled down).
>>>>>> >>
>>>>>> >>  To your point about specifying size in the first step -- will that make
>>>>>> >>  the process run faster, or does it do the scaling down after it builds
>>>>>> >>  the full-resolution image?
>>>>>> >>
>>>>>> >>  Also, I notice that my filesize always gets significantly bigger when I
>>>>>> >>  do the cutout step, which seems counter-intuitive to me since in theory
>>>>>> >>  shouldn't there be less information present once the cutout is done?
>>>>>> >  -cutline does not 'discard' any data.  The extent of the data remains the same unless you reset those extents.  You can do that with -crop_to_cutline.  Here are some details from the gdalwarp page,http://gdal.org/gdalwarp.html  :
>>>>>> >
>>>>>> >  -crop_to_cutline:
>>>>>> >       (GDAL>= 1.8.0) Crop the extent of the target dataset to the extent of the cutline.
>>>>>> >
>>>>>> >  Polygon cutlines may be used as a mask to restrict the area of the destination file that may be updated, including blending. If the OGR layer containing the cutline features has no explicit SRS, the cutline features must be in the georeferenced units of the destination file. When outputing to a not yet existing target dataset, its extent will be the one of the original raster unless -te or -crop_to_cutline are specified.
>>>>>> >
>>>>>> >  Best Regards, Eli
>>>>>> >
>>>>>> >>  Thanks for your help!
>>>>>> >>
>>>>>> >>  Michael Corey
>>>>>> >>
>>>>>> >>
>>>>>> >>  On 7/6/11 5:01 PM, Chaitanya kumar CH wrote:
>>>>>> >>>  Michael,
>>>>>> >>>
>>>>>> >>>  Can you provide screenshots of
>>>>>> >>>  diablo-combined-center-utm10-70pct-box.tif and
>>>>>> >>>  diablo-combined-center-utm10-70pct-cutout.tif for comparison?
>>>>>> >>>
>>>>>> >>>  By the way, you can perform the actions of the two gdal_translate
>>>>>> >>>  commands in the first step with the gdal_merge.py script itself unless
>>>>>> >>>  you want to use a specific resampling algorithm.
>>>>>> >>>
>>>>>> >>>  On Thu, Jul 7, 2011 at 4:28 AM, Michael Corey<mcorey@cironline.org  <mailto:mcorey@cironline.org>
>>>>>> >>>  <mailto:mcorey@cironline.org>>   wrote:
>>>>>> >>>
>>>>>> >>>       Hi all:
>>>>>> >>>
>>>>>> >>>       I'm using a shapefile as a clipping mask to cut out the shoreline
>>>>>> >>>       from some DOQ files that I have merged together. But when I do the
>>>>>> >>>       clipping step, I end up with unwanted semitransparency in the
>>>>>> >>>       non-clipped areas.
>>>>>> >>>
>>>>>> >>>       I'm pretty sure the problem is only with my gdalwarp step at the end.
>>>>>> >>>
>>>>>> >>>       Here's my process:
>>>>>> >>>
>>>>>> >>>       gdal_merge.py -init "255" -o diablo-combined-center-utm10.tif file
>>>>>> >>>       file file file
>>>>>> >>>
>>>>>> >>>       gdal_translate -outsize 70% 70% diablo-combined-center-utm10.tif
>>>>>> >>>       diablo-combined-center-utm10-70pct.tif
>>>>>> >>>
>>>>>> >>>       ogrinfo -al ./diablo_canyon_detail_clipper.shp
>>>>>> >>>       //Extent: (XXXX, YYYY) - (XXXX, YYYY)
>>>>>> >>>
>>>>>> >>>       gdal_translate -projwin XXXX YYYY XXXX YYYY
>>>>>> >>>       diablo-combined-center-utm10-70pct.tif
>>>>>> >>>       diablo-combined-center-utm10-70pct-box.tif
>>>>>> >>>
>>>>>> >>>       gdalwarp -co COMPRESS=DEFLATE -cutline
>>>>>> >>>       ./diablo_canyon_detail_clipper.shp
>>>>>> >>>       diablo-combined-center-utm10-70pct-box.tif
>>>>>> >>>       diablo-combined-center-utm10-70pct-cutout.tif
>>>>>> >>>
>>>>>> >>>       Can anyone help?
>>>>>> >>>
>>>>>> >>>       Thanks!
>>>>>> >>>
>>>>>> >>>       --
>>>>>> >>>       Michael Corey
>>>>>> >>>
>>>>>> >>>       _______________________________________________
>>>>>> >>>       gdal-dev mailing list
>>>>>> >>>       gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org><mailto:gdal-dev@lists.osgeo.org>
>>>>>> >>>       http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>> >>>
>>>>>> >>>
>>>>>> >>>
>>>>>> >>>
>>>>>> >>>  -- 
>>>>>> >>>  Best regards,
>>>>>> >>>  Chaitanya kumar CH.
>>>>>> >>>  /t?a???nj?/ /k?m?r/
>>>>>> >>>  +91-9494447584
>>>>>> >>>  17.2416N 80.1426E
>>>>>> _______________________________________________
>>>>>> gdal-dev mailing list
>>>>>> gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org  <mailto:gdal-dev@lists.osgeo.org>
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110709/c34d6772/attachment-0001.html
From aperi2007 at gmail.com  Sat Jul  9 15:04:25 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Sat Jul  9 22:10:30 2011
Subject: [gdal-dev] GML without geometry export forward shapefile with
	null geometry
In-Reply-To: <CA+YzLBeyBKrgB+KuNNAmV2ouAy_EPsWf6PDTU5JM+9=d30fpXA@mail.gmail.com>
References: <4E1899F3.9060109@gmail.com>
	<CA+YzLBeyBKrgB+KuNNAmV2ouAy_EPsWf6PDTU5JM+9=d30fpXA@mail.gmail.com>
Message-ID: <4E18A639.3080000@gmail.com>

Frank,
thx for response.

But unfortunately I have not well explained.

My GML has not one only class but instead it has many classes.
Some classes has geometry and some other classes has not geometry.
So I cannot set it manually to wkbnone because only some classes need to 
be translated to dbf only.

If you confirm that also this situation is compliant with the gdal/ogr 
rules and the driver could be able to generate a dbf-only file when meet 
a class without geometry and instead generate a shapefile when meet a 
class with geometry, I open a ticket and add some examples.

thx,
Andrea.

Il 09/07/2011 20:48, Frank Warmerdam ha scritto:
> On Sat, Jul 9, 2011 at 11:12 AM, aperi2007<aperi2007@gmail.com>  wrote:
>> Hi,
>>
>> is compliant with the gdal/ogr rules to have a GML driver to export forward
>> a dbf when in the GML there is a class without geometry ?
>>
>> Actually the GML drivers when meet a class without geometry export it as a
>> shapefile having null geometry.
>
> Andrea,
>
> The shapefile driver should create only the .dbf (no .shp or .shx) if the
> layer type is wkbNone.  However, I am not at all sure that the GML
> driver will return wkbNone for feature classes with no geometries.
> You could certainly manually set the geometry type to wkbNone
> when converting to dbf using the ogr2ogr -nlt switch with a value
> of NONE.
>
> If you think that the GML driver does not recognise features classes as
> having no geometry when it ought to then please file a ticket with an
> example file.  Note that ogrinfo should report the geometry types for
> any layer with a value other than wkbUnknown.
>
> Best regards,
>

From szekerest at gmail.com  Sat Jul  9 17:07:36 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jul 10 00:19:55 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <CADnN3yUez8B4+Lbz=oTSLPtYQrdxrqQU6r+NkjzuMOudnxROTw@mail.gmail.com>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
	<201107082203.23218.even.rouault@mines-paris.org>
	<CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>
	<201107091428.05428.even.rouault@mines-paris.org>
	<CADnN3yUez8B4+Lbz=oTSLPtYQrdxrqQU6r+NkjzuMOudnxROTw@mail.gmail.com>
Message-ID: <CACALY+Q4HuRQgYYywdjt0DWsq+3xOqMTeOLSoDR2uRsH1Xua9A@mail.gmail.com>

I'm just working on to include that in the builds at
http://www.gisinternals.com/sdk/

Unfortunately I always have to patch the python-distutils stuff from
versions to versions so as to make it work with all the supported
compilers...

Best regards,

Tamas


2011/7/9 Isaac Gerg <isaac.gerg@gergltd.com>

> Do you guys know when 3.2 will be supported?  How do I build from 3.2
> currently using the patches you mentioned -- are there instructions
> anywhere?
>
> Thanks in advance,
> Isaac
>
>
> On Sat, Jul 9, 2011 at 8:28 AM, Even Rouault <even.rouault@mines-paris.org
> > wrote:
>
>> Le samedi 09 juillet 2011 13:56:54, Tamas Szekeres a ?crit :
>> > 2011/7/8 Even Rouault <even.rouault@mines-paris.org>
>> >
>> > > http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and 3.1.
>> > > Perhaps
>> > > Tamas would want to add support for 3.2 ?
>> >
>> > How do we stand with the Python 3.2 support in GDAL? Do we still require
>> to
>> > patch the gererated interface files so as to compile the bindings
>> > successfully?
>> > I'm a bit hesitant to include a patching step as part of the build
>> > execution sequence.
>>
>> I've just downloaded the latest swig version 2.0.4 and the good news is
>> that
>> it now generates binding files compatible with Python 3.2 (as well as with
>> previous Python versions). I also tested quickly with Java and Perl and
>> the
>> generated files are good enough to enable "make test" to run successfully.
>>
>> However, with CSharp, the generated cpp files have the following duplicate
>> declaration
>>
>>  static OsrPINVOKE() {
>>  }
>>
>>  static OsrPINVOKE() {
>>  }
>>
>> which causes the following error :
>>
>> mcs /debug:full /target:library /out:osr_csharp.dll osr/*.cs
>> AssemblyInfo.cs
>> osr/OsrPINVOKE.cs(192,10): error CS0111: A member
>> `OSGeo.OSR.OsrPINVOKE.OsrPINVOKE()' is already defined. Rename this member
>> or
>> use different parameter types
>> osr/OsrPINVOKE.cs(188,10): (Location of the symbol related to previous
>> error)
>>
>> whereas it is ok with swig 1.3.40
>>
>> I couldn't find a relevant ticket in their bug tracker about this
>> duplicate
>> PINVOKE.
>>
>>
>> >
>> >
>> > Best regards,
>> >
>> > Tamas
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110709/f8869581/attachment.html
From isaac.gerg at gergltd.com  Sat Jul  9 17:57:05 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Sun Jul 10 01:12:20 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <CACALY+Q4HuRQgYYywdjt0DWsq+3xOqMTeOLSoDR2uRsH1Xua9A@mail.gmail.com>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
	<201107082203.23218.even.rouault@mines-paris.org>
	<CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>
	<201107091428.05428.even.rouault@mines-paris.org>
	<CADnN3yUez8B4+Lbz=oTSLPtYQrdxrqQU6r+NkjzuMOudnxROTw@mail.gmail.com>
	<CACALY+Q4HuRQgYYywdjt0DWsq+3xOqMTeOLSoDR2uRsH1Xua9A@mail.gmail.com>
Message-ID: <CADnN3yVPivqMu2xqh_AADOmmmR4VoX9sBOOJ8XSsQDQnuPigFA@mail.gmail.com>

This sounds great.  Thanks so much Tamas.

Isaac

On Sat, Jul 9, 2011 at 5:07 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> I'm just working on to include that in the builds at
> http://www.gisinternals.com/sdk/
>
> Unfortunately I always have to patch the python-distutils stuff from
> versions to versions so as to make it work with all the supported
> compilers...
>
> Best regards,
>
> Tamas
>
>
>
> 2011/7/9 Isaac Gerg <isaac.gerg@gergltd.com>
>
>> Do you guys know when 3.2 will be supported?  How do I build from 3.2
>> currently using the patches you mentioned -- are there instructions
>> anywhere?
>>
>> Thanks in advance,
>> Isaac
>>
>>
>> On Sat, Jul 9, 2011 at 8:28 AM, Even Rouault <
>> even.rouault@mines-paris.org> wrote:
>>
>>> Le samedi 09 juillet 2011 13:56:54, Tamas Szekeres a ?crit :
>>> > 2011/7/8 Even Rouault <even.rouault@mines-paris.org>
>>> >
>>> > > http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and 3.1.
>>> > > Perhaps
>>> > > Tamas would want to add support for 3.2 ?
>>> >
>>> > How do we stand with the Python 3.2 support in GDAL? Do we still
>>> require to
>>> > patch the gererated interface files so as to compile the bindings
>>> > successfully?
>>> > I'm a bit hesitant to include a patching step as part of the build
>>> > execution sequence.
>>>
>>> I've just downloaded the latest swig version 2.0.4 and the good news is
>>> that
>>> it now generates binding files compatible with Python 3.2 (as well as
>>> with
>>> previous Python versions). I also tested quickly with Java and Perl and
>>> the
>>> generated files are good enough to enable "make test" to run
>>> successfully.
>>>
>>> However, with CSharp, the generated cpp files have the following
>>> duplicate
>>> declaration
>>>
>>>  static OsrPINVOKE() {
>>>  }
>>>
>>>  static OsrPINVOKE() {
>>>  }
>>>
>>> which causes the following error :
>>>
>>> mcs /debug:full /target:library /out:osr_csharp.dll osr/*.cs
>>> AssemblyInfo.cs
>>> osr/OsrPINVOKE.cs(192,10): error CS0111: A member
>>> `OSGeo.OSR.OsrPINVOKE.OsrPINVOKE()' is already defined. Rename this
>>> member or
>>> use different parameter types
>>> osr/OsrPINVOKE.cs(188,10): (Location of the symbol related to previous
>>> error)
>>>
>>> whereas it is ok with swig 1.3.40
>>>
>>> I couldn't find a relevant ticket in their bug tracker about this
>>> duplicate
>>> PINVOKE.
>>>
>>>
>>> >
>>> >
>>> > Best regards,
>>> >
>>> > Tamas
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110709/7676c2ae/attachment.html
From RSyaoxin at hotmail.com  Sun Jul 10 10:08:42 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Sun Jul 10 18:16:40 2011
Subject: [gdal-dev] How to get some special metadata of HDF5 Cosmo-Skymed
	file
Message-ID: <1310306922740-6567852.post@n2.nabble.com>

Hi,all.
      I want to calibrate the Cosmo-Skymed radar data, and I need some
parameters, such as "Calibration Constant","Rescaling Factor","Reference
Incidence Angle" and so on.However,I'm a beginner,I don't know how to get
HDF5 metadata,Somebody can give me a tutorial in c or c++?
      Furthermore,I used HDFView to see the file's metadata and found that
these information is stored in the metadata corresponding to the "root" of
the file, I try to use gdalinfo to get the file's metadata  and can't find
it.That's why?

      Subdatasets:

SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI
  SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer)
 
SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK
  SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character)

I hope to get some help.Thank you!
Kind regards.



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6567852.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Sun Jul 10 10:18:01 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Jul 10 18:26:30 2011
Subject: [gdal-dev] GDAL for Python 3.2 on Windows 64bit
In-Reply-To: <CADnN3yVPivqMu2xqh_AADOmmmR4VoX9sBOOJ8XSsQDQnuPigFA@mail.gmail.com>
References: <CADnN3yUjNahtUiOcZA3btAJf28OHFmidUxn9E7_QyiGNwLL2xA@mail.gmail.com>
	<201107082203.23218.even.rouault@mines-paris.org>
	<CACALY+REu8jTN92r0XRukF8UMVNzzzYCTQvm0ivzOCQEBcTbDg@mail.gmail.com>
	<201107091428.05428.even.rouault@mines-paris.org>
	<CADnN3yUez8B4+Lbz=oTSLPtYQrdxrqQU6r+NkjzuMOudnxROTw@mail.gmail.com>
	<CACALY+Q4HuRQgYYywdjt0DWsq+3xOqMTeOLSoDR2uRsH1Xua9A@mail.gmail.com>
	<CADnN3yVPivqMu2xqh_AADOmmmR4VoX9sBOOJ8XSsQDQnuPigFA@mail.gmail.com>
Message-ID: <CACALY+SNuvaagaFd0JzgRZ=pogGv0s=YjH5h03C0h-bcWFAk0g@mail.gmail.com>

GDAL Python 3.2 packages has now been added to the builds at
http://www.gisinternals.com/sdk/

Best regards,

Tamas


2011/7/9 Isaac Gerg <isaac.gerg@gergltd.com>

> This sounds great.  Thanks so much Tamas.
>
> Isaac
>
>
> On Sat, Jul 9, 2011 at 5:07 PM, Tamas Szekeres <szekerest@gmail.com>wrote:
>
>> I'm just working on to include that in the builds at
>> http://www.gisinternals.com/sdk/
>>
>> Unfortunately I always have to patch the python-distutils stuff from
>> versions to versions so as to make it work with all the supported
>> compilers...
>>
>> Best regards,
>>
>> Tamas
>>
>>
>>
>> 2011/7/9 Isaac Gerg <isaac.gerg@gergltd.com>
>>
>>> Do you guys know when 3.2 will be supported?  How do I build from 3.2
>>> currently using the patches you mentioned -- are there instructions
>>> anywhere?
>>>
>>> Thanks in advance,
>>> Isaac
>>>
>>>
>>> On Sat, Jul 9, 2011 at 8:28 AM, Even Rouault <
>>> even.rouault@mines-paris.org> wrote:
>>>
>>>> Le samedi 09 juillet 2011 13:56:54, Tamas Szekeres a ?crit :
>>>> > 2011/7/8 Even Rouault <even.rouault@mines-paris.org>
>>>> >
>>>> > > http://vbkto.dyndns.org/sdk/ proposes bindings for 2.6, 2.7 and
>>>> 3.1.
>>>> > > Perhaps
>>>> > > Tamas would want to add support for 3.2 ?
>>>> >
>>>> > How do we stand with the Python 3.2 support in GDAL? Do we still
>>>> require to
>>>> > patch the gererated interface files so as to compile the bindings
>>>> > successfully?
>>>> > I'm a bit hesitant to include a patching step as part of the build
>>>> > execution sequence.
>>>>
>>>> I've just downloaded the latest swig version 2.0.4 and the good news is
>>>> that
>>>> it now generates binding files compatible with Python 3.2 (as well as
>>>> with
>>>> previous Python versions). I also tested quickly with Java and Perl and
>>>> the
>>>> generated files are good enough to enable "make test" to run
>>>> successfully.
>>>>
>>>> However, with CSharp, the generated cpp files have the following
>>>> duplicate
>>>> declaration
>>>>
>>>>  static OsrPINVOKE() {
>>>>  }
>>>>
>>>>  static OsrPINVOKE() {
>>>>  }
>>>>
>>>> which causes the following error :
>>>>
>>>> mcs /debug:full /target:library /out:osr_csharp.dll osr/*.cs
>>>> AssemblyInfo.cs
>>>> osr/OsrPINVOKE.cs(192,10): error CS0111: A member
>>>> `OSGeo.OSR.OsrPINVOKE.OsrPINVOKE()' is already defined. Rename this
>>>> member or
>>>> use different parameter types
>>>> osr/OsrPINVOKE.cs(188,10): (Location of the symbol related to previous
>>>> error)
>>>>
>>>> whereas it is ok with swig 1.3.40
>>>>
>>>> I couldn't find a relevant ticket in their bug tracker about this
>>>> duplicate
>>>> PINVOKE.
>>>>
>>>>
>>>> >
>>>> >
>>>> > Best regards,
>>>> >
>>>> > Tamas
>>>>
>>>
>>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110710/42ba546b/attachment.html
From antonio.valentino at tiscali.it  Sun Jul 10 10:35:59 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun Jul 10 18:45:34 2011
Subject: [gdal-dev] How to get some special metadata of HDF5 Cosmo-Skymed
	file
In-Reply-To: <1310306922740-6567852.post@n2.nabble.com>
References: <1310306922740-6567852.post@n2.nabble.com>
Message-ID: <4E19B8CF.4080702@tiscali.it>

Hi RSyaoxin,

Il 10/07/2011 16:08, RSyaoxin ha scritto:
> Hi,all.
>       I want to calibrate the Cosmo-Skymed radar data, and I need some
> parameters, such as "Calibration Constant","Rescaling Factor","Reference
> Incidence Angle" and so on.However,I'm a beginner,I don't know how to get
> HDF5 metadata,Somebody can give me a tutorial in c or c++?
>       Furthermore,I used HDFView to see the file's metadata and found that
> these information is stored in the metadata corresponding to the "root" of
> the file, I try to use gdalinfo to get the file's metadata  and can't find
> it.That's why?
> 
>       Subdatasets:
> 
> SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI
>   SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer)
>  
> SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK
>   SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character)
> 
> I hope to get some help.Thank you!
> Kind regards.

The HDF5 driver has been recently updated to improve metadata management:

http://trac.osgeo.org/gdal/changeset/22517
http://trac.osgeo.org/gdal/ticket/2412

The problem you are experimenting should be fixed in trunk but you need
to re-build GDAL from sources to get it.

regards

-- 
Antonio Valentino
From even.rouault at mines-paris.org  Sun Jul 10 17:19:36 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 11 01:50:29 2011
Subject: [gdal-dev] GML without geometry export forward shapefile with
	null geometry
In-Reply-To: <4E18A639.3080000@gmail.com>
References: <4E1899F3.9060109@gmail.com>
	<CA+YzLBeyBKrgB+KuNNAmV2ouAy_EPsWf6PDTU5JM+9=d30fpXA@mail.gmail.com>
	<4E18A639.3080000@gmail.com>
Message-ID: <201107102319.36915.even.rouault@mines-paris.org>

Le samedi 09 juillet 2011 21:04:25, aperi2007 a ?crit :
> Frank,
> thx for response.
> 
> But unfortunately I have not well explained.
> 
> My GML has not one only class but instead it has many classes.
> Some classes has geometry and some other classes has not geometry.
> So I cannot set it manually to wkbnone because only some classes need to
> be translated to dbf only.
> 
> If you confirm that also this situation is compliant with the gdal/ogr
> rules and the driver could be able to generate a dbf-only file when meet
> a class without geometry and instead generate a shapefile when meet a
> class with geometry, I open a ticket and add some examples.

Andrea,

Yes, I've confirmed that the GML driver doesn't handle wkbNone layers in a 
optimal way. I've created http://trac.osgeo.org/gdal/ticket/4154 and commited 
the appropriate fixes.

Best regards,

Even

> 
> thx,
> Andrea.
> 
From giannicristian at msn.com  Mon Jul 11 06:12:39 2011
From: giannicristian at msn.com (Solimyr)
Date: Mon Jul 11 15:27:12 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapeile
In-Reply-To: <CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
References: <1310120331228-6561998.post@n2.nabble.com>
	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
Message-ID: <1310379159245-6570374.post@n2.nabble.com>

Thx, I tried to copy the file .prj but didn't work so I moved to use the
ogr2ogr method using -a_srs but I'm not able to do that...
I get the spatialRef using ogrinfo, like:


GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_1984",637813.0,298.252223563]],
    PRIMEM["Greenwich",0.0],
    UNIT["Degree",0.0174532925199433]]

But I don't know how use it with the ogr2ogr utility. I think that I must
just use this spatialRef to the new shapefile but I don't know why I must
put the source and also the dst....I tried:


ogr2ogr -a_srs GEOGCS["GCS_WGS_1984",\n    DATUM["WGS_1984",\n       
SPHEROID["WGS_1984",637813.0,298.252223563]],\n   
PRIMEM["Greenwich",0.0],\n    UNIT["Degree",0.0174532925199433]] shape.shp

But doesn't work...

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6570374.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From alexmantaut at suremptec.com.ar  Mon Jul 11 09:55:36 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul 11 19:22:21 2011
Subject: [gdal-dev] How to get some special metadata of HDF5 Cosmo-Skymed
	file
In-Reply-To: <4E19B8CF.4080702@tiscali.it>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
Message-ID: <CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>

Hi RSyaoxin,

Antonio is right, there was an issue on geting the root metadata from
hdf5 files and is has been fixed in trunk, you will need to recompile
gdal in order to get that information.


After you rebuilt the library, an example on getting the metadata:

#include "gdal_priv.h"
#include <iostream>
#include <cstdlib>
#include <string>
#include <stdexcept>

using namespace std;

int main(int argc, char **argv)
{
GDALDataset  *poDataset;

  GDALAllRegister();

  //Open the subdataset
  //The filename should be formated like this
  //HDF5:filepath://subdataset
  poDataset = (GDALDataset *) GDALOpen(
"HDF5:CSKS1_DGM_B_HR_00_HH_RA_SF_20080211191721_20080211191753.h5://S01/SBI",
GA_ReadOnly );

  if( poDataset == NULL )
  {
      cout <<"error opening dataset"<<endl;
  }
  else
  {
           //To get the metadata the item name should be formated like this:
           //Every space and group separator should be replaced with
an underscore (_)
           //I.e. You need item Beam ID from group S01:
           const char *pszBeamId = poDataset->GetMetadataItem("S01_Beam_ID");
           cout <<  pszBeamId <<endl;
           //I.e. You need item Rescaling factor the root:
           const char *pszRescalingFactor =
poDataset->GetMetadataItem("Rescaling_Factor");
           cout <<  pszRescalingFactor <<endl;
  }
}

Best regards



2011/7/10 Antonio Valentino <antonio.valentino@tiscali.it>:
> Hi RSyaoxin,
>
> Il 10/07/2011 16:08, RSyaoxin ha scritto:
>> Hi,all.
>> ? ? ? I want to calibrate the Cosmo-Skymed radar data, and I need some
>> parameters, such as "Calibration Constant","Rescaling Factor","Reference
>> Incidence Angle" and so on.However,I'm a beginner,I don't know how to get
>> HDF5 metadata,Somebody can give me a tutorial in c or c++?
>> ? ? ? Furthermore,I used HDFView to see the file's metadata and found that
>> these information is stored in the metadata corresponding to the "root" of
>> the file, I try to use gdalinfo to get the file's metadata ?and can't find
>> it.That's why?
>>
>> ? ? ? Subdatasets:
>>
>> SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI
>> ? SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer)
>>
>> SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK
>> ? SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character)
>>
>> I hope to get some help.Thank you!
>> Kind regards.
>
> The HDF5 driver has been recently updated to improve metadata management:
>
> http://trac.osgeo.org/gdal/changeset/22517
> http://trac.osgeo.org/gdal/ticket/2412
>
> The problem you are experimenting should be fixed in trunk but you need
> to re-build GDAL from sources to get it.
>
> regards
>
> --
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
???? Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
From RSyaoxin at hotmail.com  Mon Jul 11 10:24:53 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Mon Jul 11 19:53:16 2011
Subject: [gdal-dev] RE: How to get some special metadata of HDF5
	Cosmo-Skymed file
In-Reply-To: <CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
	<CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
Message-ID: <BAY146-w39AE8F135274A3144E3F39C6450@phx.gbl>


Thanks Antonio Valentino and Alex Mantaut. I've got these parameters.I have a new problem,I need to get the backscatter image,but the calibration result is not correct,the calibrated image pixels are all zero.I doubt that my method is not correct.Who can give me some information about Cosmo-Skymed radiation calibration?How should I do?
Best regards.

 



Date: Mon, 11 Jul 2011 06:55:54 -0700
From: ml-node+6571000-1433452921-335049@n2.nabble.com
To: RSyaoxin@hotmail.com
Subject: Re: How to get some special metadata of HDF5 Cosmo-Skymed file

Hi RSyaoxin, 

Antonio is right, there was an issue on geting the root metadata from 
hdf5 files and is has been fixed in trunk, you will need to recompile 
gdal in order to get that information. 


After you rebuilt the library, an example on getting the metadata: 

#include "gdal_priv.h" 
#include <iostream> 
#include <cstdlib> 
#include <string> 
#include <stdexcept> 

using namespace std; 

int main(int argc, char **argv) 
{ 
GDALDataset  *poDataset; 

  GDALAllRegister(); 

  //Open the subdataset 
  //The filename should be formated like this 
  //HDF5:filepath://subdataset 
  poDataset = (GDALDataset *) GDALOpen( 
"HDF5:CSKS1_DGM_B_HR_00_HH_RA_SF_20080211191721_20080211191753.h5://S01/SBI", 
GA_ReadOnly ); 

  if( poDataset == NULL ) 
  { 
      cout <<"error opening dataset"<<endl; 
  } 
  else 
  { 
           //To get the metadata the item name should be formated like this: 
           //Every space and group separator should be replaced with 
an underscore (_) 
           //I.e. You need item Beam ID from group S01: 
           const char *pszBeamId = poDataset->GetMetadataItem("S01_Beam_ID"); 
           cout <<  pszBeamId <<endl; 
           //I.e. You need item Rescaling factor the root: 
           const char *pszRescalingFactor = 
poDataset->GetMetadataItem("Rescaling_Factor"); 
           cout <<  pszRescalingFactor <<endl; 
  } 
} 

Best regards 



2011/7/10 Antonio Valentino <[hidden email]>: 

> Hi RSyaoxin, 
> 
> Il 10/07/2011 16:08, RSyaoxin ha scritto: 
>> Hi,all. 
>>       I want to calibrate the Cosmo-Skymed radar data, and I need some 
>> parameters, such as "Calibration Constant","Rescaling Factor","Reference 
>> Incidence Angle" and so on.However,I'm a beginner,I don't know how to get 
>> HDF5 metadata,Somebody can give me a tutorial in c or c++? 
>>       Furthermore,I used HDFView to see the file's metadata and found that 
>> these information is stored in the metadata corresponding to the "root" of 
>> the file, I try to use gdalinfo to get the file's metadata  and can't find 
>> it.That's why? 
>> 
>>       Subdatasets: 
>> 
>> SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI 
>>   SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer) 
>> 
>> SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK 
>>   SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character) 
>> 
>> I hope to get some help.Thank you! 
>> Kind regards. 
> 
> The HDF5 driver has been recently updated to improve metadata management: 
> 
> http://trac.osgeo.org/gdal/changeset/22517
> http://trac.osgeo.org/gdal/ticket/2412
> 
> The problem you are experimenting should be fixed in trunk but you need 
> to re-build GDAL from sources to get it. 
> 
> regards 
> 
> -- 
> Antonio Valentino 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
-- 
     Alex Mantaut 
SUR Emprendimientos Tecnol?gicos 

Per? 345  Piso 5to Oficina "B" (C1067AAG) 
Ciudad de Buenos Aires, Argentina 
Tel. +54 (11) 4342-2976/84 
[hidden email] 
www.suremptec.com 
_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev






If you reply to this email, your message will be added to the discussion below:http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571000.html 
To unsubscribe from How to get some special metadata of HDF5 Cosmo-Skymed file, click here.  		 	   		  

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571081.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/b9ac5d07/attachment.html
From chaitanya.ch at gmail.com  Mon Jul 11 10:35:53 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 11 20:04:46 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapeile
In-Reply-To: <1310379159245-6570374.post@n2.nabble.com>
References: <1310120331228-6561998.post@n2.nabble.com>
	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
	<1310379159245-6570374.post@n2.nabble.com>
Message-ID: <CAMKgpOY-12ASadJwU6XwZLC8ZK-zNQq5KVrVsM7C2fxB+mSgSg@mail.gmail.com>

Solimyr,

It's hard to express the SRS WKT on command line. The easiest way is to save
the srs wkt into a file and use the filename in place of the srs_def for the
-a_srs option in the command.

On Mon, Jul 11, 2011 at 3:42 PM, Solimyr <giannicristian@msn.com> wrote:

> Thx, I tried to copy the file .prj but didn't work so I moved to use the
> ogr2ogr method using -a_srs but I'm not able to do that...
> I get the spatialRef using ogrinfo, like:
>
>
> GEOGCS["GCS_WGS_1984",
>    DATUM["WGS_1984",
>        SPHEROID["WGS_1984",637813.0,298.252223563]],
>    PRIMEM["Greenwich",0.0],
>    UNIT["Degree",0.0174532925199433]]
>
> But I don't know how use it with the ogr2ogr utility. I think that I must
> just use this spatialRef to the new shapefile but I don't know why I must
> put the source and also the dst....I tried:
>
>
> ogr2ogr -a_srs GEOGCS["GCS_WGS_1984",\n    DATUM["WGS_1984",\n
> SPHEROID["WGS_1984",637813.0,298.252223563]],\n
> PRIMEM["Greenwich",0.0],\n    UNIT["Degree",0.0174532925199433]] shape.shp
>
> But doesn't work...
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6570374.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/1b0ac666/attachment.html
From alexmantaut at suremptec.com.ar  Mon Jul 11 10:36:27 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul 11 20:05:18 2011
Subject: [gdal-dev] RE: How to get some special metadata of HDF5
	Cosmo-Skymed file
In-Reply-To: <BAY146-w39AE8F135274A3144E3F39C6450@phx.gbl>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
	<CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
	<BAY146-w39AE8F135274A3144E3F39C6450@phx.gbl>
Message-ID: <CAC4=NR8kTBA8Q4WNWngp+XFNTrNG23xhrFfPCRfd7kLZ9Fo9Gw@mail.gmail.com>

To be honest I know nothing about radiation calibration... Did you
checked out this document?

http://www.e-geos.it/products/pdf/COSMO-SkyMed-Image_Calibration.pdf

other relevant information can be found at:

http://www.e-geos.it/products/cosmo.html

Hope it helps!
Regards

2011/7/11 RSyaoxin <RSyaoxin@hotmail.com>:
> Thanks Antonio Valentino and Alex Mantaut. I've got these parameters.I?have
> a new problem,I need to get the backscatter image,but the calibration result
> is not correct,the?calibrated image pixels are all zero.I doubt that my
> method is not correct.Who can give me some information about Cosmo-Skymed
> radiation calibration?How should I do?
> Best regards.
>
>
> ________________________________
> Date: Mon, 11 Jul 2011 06:55:54 -0700
> From: [hidden email]
> To: [hidden email]
> Subject: Re: How to get some special metadata of HDF5 Cosmo-Skymed file
>
> Hi RSyaoxin,
>
> Antonio is right, there was an issue on geting the root metadata from
> hdf5 files and is has been fixed in trunk, you will need to recompile
> gdal in order to get that information.
>
>
> After you rebuilt the library, an example on getting the metadata:
>
> #include "gdal_priv.h"
> #include <iostream>
> #include <cstdlib>
> #include <string>
> #include <stdexcept>
>
> using namespace std;
>
> int main(int argc, char **argv)
> {
> GDALDataset ?*poDataset;
>
> ? GDALAllRegister();
>
> ? //Open the subdataset
> ? //The filename should be formated like this
> ? //HDF5:filepath://subdataset
> ? poDataset = (GDALDataset *) GDALOpen(
> "HDF5:CSKS1_DGM_B_HR_00_HH_RA_SF_20080211191721_20080211191753.h5://S01/SBI",
> GA_ReadOnly );
>
> ? if( poDataset == NULL )
> ? {
> ? ? ? cout <<"error opening dataset"<<endl;
> ? }
> ? else
> ? {
> ? ? ? ? ? ?//To get the metadata the item name should be formated like this:
> ? ? ? ? ? ?//Every space and group separator should be replaced with
> an underscore (_)
> ? ? ? ? ? ?//I.e. You need item Beam ID from group S01:
> ? ? ? ? ? ?const char *pszBeamId =
> poDataset->GetMetadataItem("S01_Beam_ID");
> ? ? ? ? ? ?cout << ?pszBeamId <<endl;
> ? ? ? ? ? ?//I.e. You need item Rescaling factor the root:
> ? ? ? ? ? ?const char *pszRescalingFactor =
> poDataset->GetMetadataItem("Rescaling_Factor");
> ? ? ? ? ? ?cout << ?pszRescalingFactor <<endl;
> ? }
> }
>
> Best regards
>
>
>
> 2011/7/10 Antonio Valentino <[hidden email]>:
>> Hi RSyaoxin,
>>
>> Il 10/07/2011 16:08, RSyaoxin ha scritto:
>>> Hi,all.
>>> ? ? ? I want to calibrate the Cosmo-Skymed radar data, and I need some
>>> parameters, such as "Calibration Constant","Rescaling Factor","Reference
>>> Incidence Angle" and so on.However,I'm a beginner,I don't know how to get
>>> HDF5 metadata,Somebody can give me a tutorial in c or c++?
>>> ? ? ? Furthermore,I used HDFView to see the file's metadata and found
>>> that
>>> these information is stored in the metadata corresponding to the "root"
>>> of
>>> the file, I try to use gdalinfo to get the file's metadata ?and can't
>>> find
>>> it.That's why?
>>>
>>> ? ? ? Subdatasets:
>>>
>>>
>>> SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI
>>> ? SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer)
>>>
>>>
>>> SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK
>>> ? SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character)
>>>
>>> I hope to get some help.Thank you!
>>> Kind regards.
>>
>> The HDF5 driver has been recently updated to improve metadata management:
>>
>> http://trac.osgeo.org/gdal/changeset/22517
>> http://trac.osgeo.org/gdal/ticket/2412
>>
>> The problem you are experimenting should be fixed in trunk but you need
>> to re-build GDAL from sources to get it.
>>
>> regards
>>
>> --
>> Antonio Valentino
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> --
> --
> ???? Alex Mantaut
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345? Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> [hidden email]
> www.suremptec.com
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ________________________________
> If you reply to this email, your message will be added to the discussion
> below:
> http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571000.html
> To unsubscribe from How to get some special metadata of HDF5 Cosmo-Skymed
> file, click here.
> ________________________________
> View this message in context: RE: How to get some special metadata of HDF5
> Cosmo-Skymed file
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
???? Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
From jorge.arevalo at deimos-space.com  Mon Jul 11 10:44:24 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Mon Jul 11 20:14:06 2011
Subject: [gdal-dev] Meaning of nPixelSpace/nLineSpace in IRasterIO
In-Reply-To: <201107081955.57737.even.rouault@mines-paris.org>
References: <CAK29iX_aML_p9c9QzsxuD=4HH1w-fHcB-rJFv1uLofxbpNzypw@mail.gmail.com>
	<201107081955.57737.even.rouault@mines-paris.org>
Message-ID: <CAK29iX8CO9T9KUex8T0rddefTp-t+x3Bm8PPj5t6tiy2MUVdDQ@mail.gmail.com>

Hello,

2011/7/8 Even Rouault <even.rouault@mines-paris.org>:
> Le vendredi 08 juillet 2011 16:09:31, Jorge Ar?valo a ?crit :
>> Hello,
>>
>> I'm not sure of the meaning of nPixelSpace, nLineSpace IRasterIO args.
>>
>> >From GDAL doc I read:
>> nPixelSpace: The byte offset from the start of one pixel value in
>> pData to the start of the next pixel value within a scanline. If
>> defaulted (0) the size of the datatype eBufType is used.
>>
>> nLineSpace: The byte offset from the start of one scanline in pData to
>> the start of the next. If defaulted (0) the size of the datatype
>> eBufType * nBufXSize is used.
>>
>> and
>>
>> The nPixelSpace and nLineSpace parameters allow reading into or
>> writing from unusually organized buffers. This is primarily used for
>> buffers containing more than one bands raster data in interleaved
>> format.
>>
>> I know there are, basically, 3 interleave formats:
>>
>> BSQ (INTERLEAVE=BAND)
>> BIL (INTERLEAVE=LINE)
>> BIP (INTERLEAVE=PIXEL)
>>
>> Assuming a 3-bands (rgb) 4x4 raster, the pData array would look like
>> this ("|" used only to mark the end of a row):
>>
>> BSQ: r1 r1 r1 r1 | r2 r2 r2 r2 | r3 r3 r3 r3 | r4 r4 r4 r4 | g1 g1 g1
>> g1 | g2 g2 g2 g2 | g3 g3 g3 g3 | g4 g4 g4 g4 g4 | b1 b1 b1 b1 | b2 b2
>> b2 b2 | b3 b3 b3 b3 | b4 b4 b4 b4
>
> For the sake of simplicity, let's assume that the datatype is byte (if not,
> just multiply all values by GDALGetDataType(eDT) / 8),
>
> Yes, nPixelOffset = 1, nLineOffset = nBufferXSize, nBandOffset = nBufferXSize *
> nBufferYSize.
>
> (nBandOffset is for GDALDatasetRasterIO())
>

Ok, understood.


>>
>> BIL: r1 r1 r1 r1 | g1 g1 g1 g1 | b1 b1 b1 b1 | r2 r2 r2 r2 | g2 g2 g2
>> g2 | b2 b2 b2 b2 | r3 r3 r3 r3 | g3 g3 g3 g3 | b3 b3 b3 b3 | r4 r4 r4
>> r4 | g4 g4 g4 g4 | b4 b4 b4 b4
>
> Yes, nPixelOffset = 1, nLineOffset = nBufferXSize * nBands, nBandOffset =
> nBufferXSize
>

Understood.


>>
>> BIP: r1 g1 b1 r2 | g2 b2 r3 g3 | b3 r4 g4 b4 | r1 g1 b1 r2 | g2 b2 r3
>> g3 | b3 r4 g4 b4 | r1 g1 b1 r2 | g2 b2 r3 g3 | b3 r4 g4 b4 | r1 g1 b1
>> r2 | g2 b2 r3 g3 | b3 r4 g4 b4
>
> You meant :
>
> r1 g1 b1 r1 g1 b1 r1 g1 b1 r1 g1 b1 |
> r2 g2 b2 r2 g2 b2 r2 g2 b2 r2 g2 b2 |
> r3 g3 b3 r3 g3 b3 r3 g3 b3 r3 g3 b3 |
> r4 g4 b4 r4 g4 b4 r4 g4 b4 r4 g4 b4 |
>
> right ?
>
> And nPixelOffset = nBands, nLineOffset = nBands * nBufferXSize, nBandOffset = 1
>

Yes, you're right. Understood.


>>
>> Now my doubt.
>>
>> Does "byte offset" mean the byte space between the start of 2 valid
>> values in pData?
>
> The maths will speak better...
>
> If you output buffer starts at address pStart, for band b (numbered from 1) the
> value of the pixel at line j (numbered from 0), column i (numbered from 0) of
> the output buffer will be stored at :
>
> pStart + i * nPixelSpace + j * nLineSpace + (b-1) * nBandSpace
>
> So nPixelSpace is the difference between the address of a pixel and the pixel
> at its right on the same line.
>

Absolutely clear now :-)


>> For example, the space between r1 and g1 in BIP
>> format. I guess if there's no trailing bits in the array (all the bits
>> are payload) the byte offset between the start of 2 valid values is
>> always the size of the data type. Then simply r1 = pData[0] and g1 =
>> pData[1] (BIP format)
>
> Not sure to follow you, hopefully the above explinations will answer your
> question ;-)
>

Don't worry. I understand now. You answered my question, yes.


>>
>> Isn't it the most common situation? In which situation has sense
>> having "gaps" between pixel values, or at the end of a row?
>
> Sometimes you just want to override the values of an allocated buffer with
> greater extent, so you need to provide a so-called "line stride" that is
> greater than nBufferXSize.
>

Ok.


>> I think I
>> don't really understand the sentence: "This is primarily used for
>> buffers containing more than one bands raster data in interleaved
>> format.".
>
> I guess it means that if you need to read from different bands with multiple
> calls to RasterIO() but in the same buffer, you can tweak nPixelSize and
> nLineOffset to let enough space for data from different bands and match the
> organization of the data as you've designed it.
>

Yep, ok. My doubt is already solved. Many thanks!

Best regards,
Jorge

>>
>> Thanks in advance, and best regards.
>> Jorge
>



-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From rodolfobonnin at suremptec.com.ar  Mon Jul 11 10:47:43 2011
From: rodolfobonnin at suremptec.com.ar (Rodolfo Bonnin)
Date: Mon Jul 11 20:17:13 2011
Subject: [gdal-dev] Custom geographic coordinate system and non valid
	translation
Message-ID: <CACMBy_HqCFDsD_2dpOH-amnSjTApX2FyMyEjByyZCR5mtvi2jg@mail.gmail.com>

Hello all,

I'm trying to define a UTM projected coordinate system, with a custom
geographic coordinate system, to have a system similar to the geocentric
ITRF97, in gdal 1.8, which doesn't support that type.

 Part of the gdalinfo output  is:



_________________________________________________________________

PROJCS["UTM",
    GEOGCS["ITRF97 (wgs84 equivalent)",
        DATUM["International_Terrestrial_Reference_Frame_1997",
            SPHEROID["GRS 1980",6378137,298.257222101,
                AUTHORITY["EPSG","7019"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6655"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",141],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
GeoTransform =
  -14448629.2184734, -141.4557903812352, -1.43564504297578
  12357184.49239378, 14.97393042715653, 208.8248508563648
Metadata:
  PROJECTION_NAME=
Corner Coordinates:
Upper Left  (-14448629.218,12357184.492) (  0d 0' 0.01"E, 90d 0' 0.00"N)
Lower Left  (-14458678.734,13818958.448) (  0d 0' 0.01"E, 90d 0' 0.00"N)
Upper Right (-15472486.229,12465565.801) (  0d 0' 0.01"E, 90d 0' 0.00"N)
Lower Right (-15482535.745,13927339.757) (  0d 0' 0.01"E, 90d 0' 0.00"N)
Center      (-14965582.482,13142262.125) (  0d 0' 0.01"E, 90d 0' 0.00"N)


________________________________________________________________

As you see the geographic coordinate system don't translate the corners
projected coordinates into the geographic ones.

Am I missing a parameter or is some concept wrong with the chosen wkt ?

Many thanks in advance.

-- 
Ing. Rodolfo Bonnin
SUR Emprendimientos Tecnol?gicos

Per? 345  Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
rodolfobonnin@suremptec.com.ar
www.suremptec.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/52e1786c/attachment.html
From RSyaoxin at hotmail.com  Mon Jul 11 10:50:40 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Mon Jul 11 20:20:20 2011
Subject: [gdal-dev] RE: How to get some special metadata of HDF5
	Cosmo-Skymed file
In-Reply-To: <CAC4=NR8kTBA8Q4WNWngp+XFNTrNG23xhrFfPCRfd7kLZ9Fo9Gw@mail.gmail.com>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
	<CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
	<BAY146-w39AE8F135274A3144E3F39C6450@phx.gbl>
	<CAC4=NR8kTBA8Q4WNWngp+XFNTrNG23xhrFfPCRfd7kLZ9Fo9Gw@mail.gmail.com>
Message-ID: <BAY146-w495EFFDCA3F22346CAC575C6450@phx.gbl>


Thanks Alex Mantaut .This document is what I previously reference.Maybe the problem is that I do not know how to extract "Calibration Constant"or"K" parameters.
Kind Regards 

 



Date: Mon, 11 Jul 2011 07:36:52 -0700
From: ml-node+6571128-1062291866-335049@n2.nabble.com
To: RSyaoxin@hotmail.com
Subject: RE: How to get some special metadata of HDF5 Cosmo-Skymed file

To be honest I know nothing about radiation calibration... Did you 
checked out this document? 

http://www.e-geos.it/products/pdf/COSMO-SkyMed-Image_Calibration.pdf

other relevant information can be found at: 

http://www.e-geos.it/products/cosmo.html

Hope it helps! 
Regards 

2011/7/11 RSyaoxin <[hidden email]>: 

> Thanks Antonio Valentino and Alex Mantaut. I've got these parameters.I have 
> a new problem,I need to get the backscatter image,but the calibration result 
> is not correct,the calibrated image pixels are all zero.I doubt that my 
> method is not correct.Who can give me some information about Cosmo-Skymed 
> radiation calibration?How should I do? 
> Best regards. 
> 
> 
> ________________________________ 
> Date: Mon, 11 Jul 2011 06:55:54 -0700 
> From: [hidden email] 
> To: [hidden email] 
> Subject: Re: How to get some special metadata of HDF5 Cosmo-Skymed file 
> 
> Hi RSyaoxin, 
> 
> Antonio is right, there was an issue on geting the root metadata from 
> hdf5 files and is has been fixed in trunk, you will need to recompile 
> gdal in order to get that information. 
> 
> 
> After you rebuilt the library, an example on getting the metadata: 
> 
> #include "gdal_priv.h" 
> #include <iostream> 
> #include <cstdlib> 
> #include <string> 
> #include <stdexcept> 
> 
> using namespace std; 
> 
> int main(int argc, char **argv) 
> { 
> GDALDataset  *poDataset; 
> 
>   GDALAllRegister(); 
> 
>   //Open the subdataset 
>   //The filename should be formated like this 
>   //HDF5:filepath://subdataset 
>   poDataset = (GDALDataset *) GDALOpen( 
> "HDF5:CSKS1_DGM_B_HR_00_HH_RA_SF_20080211191721_20080211191753.h5://S01/SBI", 
> GA_ReadOnly ); 
> 
>   if( poDataset == NULL ) 
>   { 
>       cout <<"error opening dataset"<<endl; 
>   } 
>   else 
>   { 
>            //To get the metadata the item name should be formated like this: 
>            //Every space and group separator should be replaced with 
> an underscore (_) 
>            //I.e. You need item Beam ID from group S01: 
>            const char *pszBeamId = 
> poDataset->GetMetadataItem("S01_Beam_ID"); 
>            cout <<  pszBeamId <<endl; 
>            //I.e. You need item Rescaling factor the root: 
>            const char *pszRescalingFactor = 
> poDataset->GetMetadataItem("Rescaling_Factor"); 
>            cout <<  pszRescalingFactor <<endl; 
>   } 
> } 
> 
> Best regards 
> 
> 
> 
> 2011/7/10 Antonio Valentino <[hidden email]>: 
>> Hi RSyaoxin, 
>> 
>> Il 10/07/2011 16:08, RSyaoxin ha scritto: 
>>> Hi,all. 
>>>       I want to calibrate the Cosmo-Skymed radar data, and I need some 
>>> parameters, such as "Calibration Constant","Rescaling Factor","Reference 
>>> Incidence Angle" and so on.However,I'm a beginner,I don't know how to get 
>>> HDF5 metadata,Somebody can give me a tutorial in c or c++? 
>>>       Furthermore,I used HDFView to see the file's metadata and found 
>>> that 
>>> these information is stored in the metadata corresponding to the "root" 
>>> of 
>>> the file, I try to use gdalinfo to get the file's metadata  and can't 
>>> find 
>>> it.That's why? 
>>> 
>>>       Subdatasets: 
>>> 
>>> 
>>> SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI 
>>>   SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer) 
>>> 
>>> 
>>> SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK 
>>>   SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character) 
>>> 
>>> I hope to get some help.Thank you! 
>>> Kind regards. 
>> 
>> The HDF5 driver has been recently updated to improve metadata management: 
>> 
>> http://trac.osgeo.org/gdal/changeset/22517
>> http://trac.osgeo.org/gdal/ticket/2412
>> 
>> The problem you are experimenting should be fixed in trunk but you need 
>> to re-build GDAL from sources to get it. 
>> 
>> regards 
>> 
>> -- 
>> Antonio Valentino 
>> _______________________________________________ 
>> gdal-dev mailing list 
>> [hidden email] 
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 
> -- 
> -- 
>      Alex Mantaut 
> SUR Emprendimientos Tecnol?gicos 
> 
> Per? 345  Piso 5to Oficina "B" (C1067AAG) 
> Ciudad de Buenos Aires, Argentina 
> Tel. +54 (11) 4342-2976/84 
> [hidden email] 
> www.suremptec.com 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> ________________________________ 
> If you reply to this email, your message will be added to the discussion 
> below: 
> http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571000.html
> To unsubscribe from How to get some special metadata of HDF5 Cosmo-Skymed 
> file, click here. 
> ________________________________ 
> View this message in context: RE: How to get some special metadata of HDF5 
> Cosmo-Skymed file 
> Sent from the GDAL - Dev mailing list archive at Nabble.com. 
> 
> _______________________________________________ 
> gdal-dev mailing list 
> [hidden email] 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
-- 
     Alex Mantaut 
SUR Emprendimientos Tecnol?gicos 

Per? 345  Piso 5to Oficina "B" (C1067AAG) 
Ciudad de Buenos Aires, Argentina 
Tel. +54 (11) 4342-2976/84 
[hidden email] 
www.suremptec.com 
_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev






If you reply to this email, your message will be added to the discussion below:http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571128.html 
To unsubscribe from How to get some special metadata of HDF5 Cosmo-Skymed file, click here.  		 	   		  

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571178.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/a510faaa/attachment-0001.html
From giannicristian at msn.com  Mon Jul 11 11:01:31 2011
From: giannicristian at msn.com (Solimyr)
Date: Mon Jul 11 20:31:53 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapeile
In-Reply-To: <CAMKgpOY-12ASadJwU6XwZLC8ZK-zNQq5KVrVsM7C2fxB+mSgSg@mail.gmail.com>
References: <1310120331228-6561998.post@n2.nabble.com>
	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
	<1310379159245-6570374.post@n2.nabble.com>
	<CAMKgpOY-12ASadJwU6XwZLC8ZK-zNQq5KVrVsM7C2fxB+mSgSg@mail.gmail.com>
Message-ID: <1310396491756-6571241.post@n2.nabble.com>

Sorry, I do not understand...You mean to write the spatialRef to a txt file
and then doing something like:

$ ogr2ogr  -a_srs spatialRef.txt  dst_shape.shp  src_shape.shp

Is this what you mean? Where inside the txt file there is:

GEOGCS["GCS_WGS_1984",
   DATUM["WGS_1984",
       SPHEROID["WGS_1984",637813.0,298.252223563]],
   PRIMEM["Greenwich",0.0],
   UNIT["Degree",0.0174532925199433]]

Is correct?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6571241.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Robert.Langford at salford.gov.uk  Mon Jul 11 11:11:54 2011
From: Robert.Langford at salford.gov.uk (Langford, Robert)
Date: Mon Jul 11 20:42:54 2011
Subject: [gdal-dev] ogr2ogr SQL Date Calculation
Message-ID: <06023D9EFD334D4895B922C891C3767F19F8DD25CD@v-civiexms04.salford.gov.uk>

All,

I am trying to use ogr2ogr as a scheduled command line task to run weekly to convert a .SHP file to a .TAB file whilst filtering the data based on a date field.  I would like to only convert records that have a date from the last 30 days.

Therefore If the task ran today (11/07/2011) the below line would return the required data:

ogr2ogr -f "MapInfo File" -sql "select * from DCPOLY where DATE_CREA1>'2011/06/11'" D:\Data\Plan_Apps.tab D:\Data\DCPOLY.shp

Obviously if the task ran tomorrow the date would have to be changed to '2011/06/12'.  So I need the field SQL to be something like:

DATE_CREA1> Todays_Date - 30

Does anyone know of a way to automate this using something like; GetDate(), Now(), sysdate, Date /t, etc?  Any help would be greatly appreciated.

Many thanks,

Rob


Robert Langford
Systems Developer (GIS)
Corporate Applications Team
Salford City Council

Tel:      0161 793 2492
Email:  robert.langford@salford.gov.uk<mailto:robert.langford@salford.gov.uk>
Web:    www.salford.gov.uk<http://www.salford.gov.uk/>

Salford Civic Centre,
Chorley Road, Swinton, M27 5DA




DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee.

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
Please immediately contact the sender if you have received this message in error. 

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/be9039bb/attachment.html
From alexmantaut at suremptec.com.ar  Mon Jul 11 11:19:05 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Mon Jul 11 20:50:25 2011
Subject: [gdal-dev] RE: How to get some special metadata of HDF5
	Cosmo-Skymed file
In-Reply-To: <BAY146-w495EFFDCA3F22346CAC575C6450@phx.gbl>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
	<CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
	<BAY146-w39AE8F135274A3144E3F39C6450@phx.gbl>
	<CAC4=NR8kTBA8Q4WNWngp+XFNTrNG23xhrFfPCRfd7kLZ9Fo9Gw@mail.gmail.com>
	<BAY146-w495EFFDCA3F22346CAC575C6450@phx.gbl>
Message-ID: <CAC4=NR8ytMpVC6D=ByN49mhcV=+Wq4HXAmhr4j9o5Ng4JzbSiQ@mail.gmail.com>

I'm not sure if I understood your problem... You can't find the
Calibration Constant?
In that case the calibration constant is a property of the Sxx group.
Check csk-product handbook page 45 for more information.

Hope it helps!
Regards

2011/7/11 RSyaoxin <RSyaoxin@hotmail.com>:
> Thanks Alex Mantaut .This document is what I previously reference.Maybe the
> problem is that I do not know how to extract "Calibration Constant"or"K"
> parameters.
> Kind Regards
>
>
> ________________________________
> Date: Mon, 11 Jul 2011 07:36:52 -0700
> From: [hidden email]
> To: [hidden email]
> Subject: RE: How to get some special metadata of HDF5 Cosmo-Skymed file
>
> To be honest I know nothing about radiation calibration... Did you
> checked out this document?
>
> http://www.e-geos.it/products/pdf/COSMO-SkyMed-Image_Calibration.pdf
>
> other relevant information can be found at:
>
> http://www.e-geos.it/products/cosmo.html
>
> Hope it helps!
> Regards
>
> 2011/7/11 RSyaoxin <[hidden email]>:
>> Thanks Antonio Valentino and Alex Mantaut. I've got these
>> parameters.I?have
>> a new problem,I need to get the backscatter image,but the calibration
>> result
>> is not correct,the?calibrated image pixels are all zero.I doubt that my
>> method is not correct.Who can give me some information about Cosmo-Skymed
>> radiation calibration?How should I do?
>> Best regards.
>>
>>
>> ________________________________
>> Date: Mon, 11 Jul 2011 06:55:54 -0700
>> From: [hidden email]
>> To: [hidden email]
>> Subject: Re: How to get some special metadata of HDF5 Cosmo-Skymed file
>>
>> Hi RSyaoxin,
>>
>> Antonio is right, there was an issue on geting the root metadata from
>> hdf5 files and is has been fixed in trunk, you will need to recompile
>> gdal in order to get that information.
>>
>>
>> After you rebuilt the library, an example on getting the metadata:
>>
>> #include "gdal_priv.h"
>> #include <iostream>
>> #include <cstdlib>
>> #include <string>
>> #include <stdexcept>
>>
>> using namespace std;
>>
>> int main(int argc, char **argv)
>> {
>> GDALDataset ?*poDataset;
>>
>> ? GDALAllRegister();
>>
>> ? //Open the subdataset
>> ? //The filename should be formated like this
>> ? //HDF5:filepath://subdataset
>> ? poDataset = (GDALDataset *) GDALOpen(
>>
>> "HDF5:CSKS1_DGM_B_HR_00_HH_RA_SF_20080211191721_20080211191753.h5://S01/SBI",
>> GA_ReadOnly );
>>
>> ? if( poDataset == NULL )
>> ? {
>> ? ? ? cout <<"error opening dataset"<<endl;
>> ? }
>> ? else
>> ? {
>> ? ? ? ? ? ?//To get the metadata the item name should be formated like
>> this:
>> ? ? ? ? ? ?//Every space and group separator should be replaced with
>> an underscore (_)
>> ? ? ? ? ? ?//I.e. You need item Beam ID from group S01:
>> ? ? ? ? ? ?const char *pszBeamId =
>> poDataset->GetMetadataItem("S01_Beam_ID");
>> ? ? ? ? ? ?cout << ?pszBeamId <<endl;
>> ? ? ? ? ? ?//I.e. You need item Rescaling factor the root:
>> ? ? ? ? ? ?const char *pszRescalingFactor =
>> poDataset->GetMetadataItem("Rescaling_Factor");
>> ? ? ? ? ? ?cout << ?pszRescalingFactor <<endl;
>> ? }
>> }
>>
>> Best regards
>>
>>
>>
>> 2011/7/10 Antonio Valentino <[hidden email]>:
>>> Hi RSyaoxin,
>>>
>>> Il 10/07/2011 16:08, RSyaoxin ha scritto:
>>>> Hi,all.
>>>> ? ? ? I want to calibrate the Cosmo-Skymed radar data, and I need some
>>>> parameters, such as "Calibration Constant","Rescaling Factor","Reference
>>>> Incidence Angle" and so on.However,I'm a beginner,I don't know how to
>>>> get
>>>> HDF5 metadata,Somebody can give me a tutorial in c or c++?
>>>> ? ? ? Furthermore,I used HDFView to see the file's metadata and found
>>>> that
>>>> these information is stored in the metadata corresponding to the "root"
>>>> of
>>>> the file, I try to use gdalinfo to get the file's metadata ?and can't
>>>> find
>>>> it.That's why?
>>>>
>>>> ? ? ? Subdatasets:
>>>>
>>>>
>>>>
>>>> SUBDATASET_1_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://MBI
>>>> ? SUBDATASET_1_DESC=[9028x12156] //MBI (16-bit unsigned integer)
>>>>
>>>>
>>>>
>>>> SUBDATASET_2_NAME=HDF5:"D:\CSKS3_GEC_B_WR_01_VV_RD_SF_20100720100133_20100720100148.h5"://QLK
>>>> ? SUBDATASET_2_DESC=[902x1215] //QLK (8-bit unsigned character)
>>>>
>>>> I hope to get some help.Thank you!
>>>> Kind regards.
>>>
>>> The HDF5 driver has been recently updated to improve metadata management:
>>>
>>> http://trac.osgeo.org/gdal/changeset/22517
>>> http://trac.osgeo.org/gdal/ticket/2412
>>>
>>> The problem you are experimenting should be fixed in trunk but you need
>>> to re-build GDAL from sources to get it.
>>>
>>> regards
>>>
>>> --
>>> Antonio Valentino
>>> _______________________________________________
>>> gdal-dev mailing list
>>> [hidden email]
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> --
>> --
>> ???? Alex Mantaut
>> SUR Emprendimientos Tecnol?gicos
>>
>> Per? 345? Piso 5to Oficina "B" (C1067AAG)
>> Ciudad de Buenos Aires, Argentina
>> Tel. +54 (11) 4342-2976/84
>> [hidden email]
>> www.suremptec.com
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>> ________________________________
>> If you reply to this email, your message will be added to the discussion
>> below:
>>
>> http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571000.html
>> To unsubscribe from How to get some special metadata of HDF5 Cosmo-Skymed
>> file, click here.
>> ________________________________
>> View this message in context: RE: How to get some special metadata of HDF5
>> Cosmo-Skymed file
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> [hidden email]
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> --
> --
> ???? Alex Mantaut
> SUR Emprendimientos Tecnol?gicos
>
> Per? 345? Piso 5to Oficina "B" (C1067AAG)
> Ciudad de Buenos Aires, Argentina
> Tel. +54 (11) 4342-2976/84
> [hidden email]
> www.suremptec.com
> _______________________________________________
> gdal-dev mailing list
> [hidden email]
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> ________________________________
> If you reply to this email, your message will be added to the discussion
> below:
> http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6571128.html
> To unsubscribe from How to get some special metadata of HDF5 Cosmo-Skymed
> file, click here.
> ________________________________
> View this message in context: RE: How to get some special metadata of HDF5
> Cosmo-Skymed file
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
--
???? Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
From micklesh at gmail.com  Mon Jul 11 11:18:57 2011
From: micklesh at gmail.com (Michael Shishcu)
Date: Mon Jul 11 20:50:46 2011
Subject: [gdal-dev] ogr2ogr SQL Date Calculation
In-Reply-To: <06023D9EFD334D4895B922C891C3767F19F8DD25CD@v-civiexms04.salford.gov.uk>
References: <06023D9EFD334D4895B922C891C3767F19F8DD25CD@v-civiexms04.salford.gov.uk>
Message-ID: <CAKbwmJC0UK3+FAEL+_j_PT3pGOSZDRi1wmRBBeb6sdcwaZzKAg@mail.gmail.com>

Hi Robert,

there is a Date command for windows commandline
http://ss64.com/nt/date.html

hope this helps

regards,
michael

On Mon, Jul 11, 2011 at 6:11 PM, Langford, Robert <
Robert.Langford@salford.gov.uk> wrote:

>  All,
>
> I am trying to use ogr2ogr as a scheduled command line task to run weekly
> to convert a .SHP file to a .TAB file whilst filtering the data based on a
> date field.  I would like to only convert records that have a date from the
> last 30 days.
>
> Therefore If the task ran today (11/07/2011) the below line would return
> the required data:
>
> ogr2ogr -f "MapInfo File" -sql "select * from DCPOLY where
> DATE_CREA1>'2011/06/11'" D:\Data\Plan_Apps.tab D:\Data\DCPOLY.shp
>
> Obviously if the task ran tomorrow the date would have to be changed to
> '2011/06/12'.  So I need the field SQL to be something like:
>
> DATE_CREA1> Todays_Date - 30
>
> Does anyone know of a way to automate this using something like; GetDate(),
> Now(), sysdate, Date /t, etc?  Any help would be greatly appreciated.
>
> Many thanks,
>
> Rob
>
>
> *Robert Langford*
> *Systems Developer (GIS)*
> *Corporate Applications Team*
> *Salford City Council*
>
> Tel:      0161 793 2492
> Email:  *robert.langford@salford.gov.uk* <robert.langford@salford.gov.uk>
> Web:    *www.salford.gov.uk* <http://www.salford.gov.uk/>
>
> Salford Civic Centre,
> Chorley Road, Swinton, M27 5DA
>
>
>
>
> DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee.
>
> Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
> As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act.
> Please immediately contact the sender if you have received this message in error.
>
> For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/cadfd122/attachment.html
From jrepetto at free.fr  Mon Jul 11 11:25:02 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Mon Jul 11 20:56:43 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapefile
In-Reply-To: <1310379159245-6570374.post@n2.nabble.com>
References: <1310120331228-6561998.post@n2.nabble.com>	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
	<1310379159245-6570374.post@n2.nabble.com>
Message-ID: <4E1B15CE.1050202@free.fr>

Le 11/07/2011 12:12, Solimyr a ?crit :
> Thx, I tried to copy the file .prj but didn't work so I moved to use the
> ogr2ogr method using -a_srs but I'm not able to do that...
> I get the spatialRef using ogrinfo, like:
>
>
> GEOGCS["GCS_WGS_1984",
>      DATUM["WGS_1984",
>          SPHEROID["WGS_1984",637813.0,298.252223563]],
>      PRIMEM["Greenwich",0.0],
>      UNIT["Degree",0.0174532925199433]]
>
> But I don't know how use it with the ogr2ogr utility. I think that I must
> just use this spatialRef to the new shapefile but I don't know why I must
> put the source and also the dst....I tried:
>
>
> ogr2ogr -a_srs GEOGCS["GCS_WGS_1984",\n    DATUM["WGS_1984",\n
> SPHEROID["WGS_1984",637813.0,298.252223563]],\n
> PRIMEM["Greenwich",0.0],\n    UNIT["Degree",0.0174532925199433]] shape.shp
>
> But doesn't work...

You can use EPSG codes :
-a_srs EPSG:4326

Jean-Claude
From hiebert at uvic.ca  Mon Jul 11 11:32:22 2011
From: hiebert at uvic.ca (James Hiebert)
Date: Mon Jul 11 21:20:27 2011
Subject: [gdal-dev] ogr2ogr SQL Date Calculation
In-Reply-To: <06023D9EFD334D4895B922C891C3767F19F8DD25CD@v-civiexms04.salford.gov.uk>
References: <06023D9EFD334D4895B922C891C3767F19F8DD25CD@v-civiexms04.salford.gov.uk>
Message-ID: <20110711153218.GA1138@basalt.uvic.ca>

In PostgreSQL, you should be able to do something like:


> SELECT now() - INTERVAL '30 DAYS';
           ?column?           
------------------------------
 2011-06-11 08:34:03.32524-07
(1 row)


See table 9-26 on this page:
http://www.postgresql.org/docs/8.4/static/functions-datetime.html
for a wide variety of other functions and options.

~James Hiebert

On Mon, Jul 11, 2011 at 04:11:54PM +0100, Langford, Robert wrote:
> All,
> 
> I am trying to use ogr2ogr as a scheduled command line task to run weekly to convert a .SHP file to a .TAB file whilst filtering the data based on a date field.  I would like to only convert records that have a date from the last 30 days.
> 
> Therefore If the task ran today (11/07/2011) the below line would return the required data:
> 
> ogr2ogr -f "MapInfo File" -sql "select * from DCPOLY where DATE_CREA1>'2011/06/11'" D:\Data\Plan_Apps.tab D:\Data\DCPOLY.shp
> 
> Obviously if the task ran tomorrow the date would have to be changed to '2011/06/12'.  So I need the field SQL to be something like:
> 
> DATE_CREA1> Todays_Date - 30
> 
> Does anyone know of a way to automate this using something like; GetDate(), Now(), sysdate, Date /t, etc?  Any help would be greatly appreciated.
> 
> Many thanks,
> 
> Rob
> 
> 
> Robert Langford
> Systems Developer (GIS)
> Corporate Applications Team
> Salford City Council
> 
> Tel:      0161 793 2492
> Email:  robert.langford@salford.gov.uk<mailto:robert.langford@salford.gov.uk>
> Web:    www.salford.gov.uk<http://www.salford.gov.uk/>
> 
> Salford Civic Centre,
> Chorley Road, Swinton, M27 5DA
> 
> 
> 
> 
> DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee.
> 
> Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
> As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
> Please immediately contact the sender if you have received this message in error. 
> 
> For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.

> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
James Hiebert
Lead, Computational Support
Pacific Climate Impacts Consortium
http://www.pacificclimate.org
Room 113, University House 1, University of Victoria
PO Box 1700 Sta CSC, Victoria, BC V8V 2Y2
E-mail: hiebert@uvic.ca
Tel: (250) 472-4521
Fax: (250) 472-4830
From chaitanya.ch at gmail.com  Mon Jul 11 13:17:22 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 11 22:55:25 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapeile
In-Reply-To: <1310396491756-6571241.post@n2.nabble.com>
References: <1310120331228-6561998.post@n2.nabble.com>
	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
	<1310379159245-6570374.post@n2.nabble.com>
	<CAMKgpOY-12ASadJwU6XwZLC8ZK-zNQq5KVrVsM7C2fxB+mSgSg@mail.gmail.com>
	<1310396491756-6571241.post@n2.nabble.com>
Message-ID: <CAMKgpOaJt9Xz5-krRh7ytb91qYWO9knu_AsWcJY9zwr-UTN_=A@mail.gmail.com>

Exactly.

On Mon, Jul 11, 2011 at 8:31 PM, Solimyr <giannicristian@msn.com> wrote:

> Sorry, I do not understand...You mean to write the spatialRef to a txt file
> and then doing something like:
>
> $ ogr2ogr  -a_srs spatialRef.txt  dst_shape.shp  src_shape.shp
>
> Is this what you mean? Where inside the txt file there is:
>
> GEOGCS["GCS_WGS_1984",
>   DATUM["WGS_1984",
>       SPHEROID["WGS_1984",637813.0,298.252223563]],
>   PRIMEM["Greenwich",0.0],
>   UNIT["Degree",0.0174532925199433]]
>
> Is correct?
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6571241.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/e774fd69/attachment.html
From isaac.gerg at gergltd.com  Mon Jul 11 14:27:12 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Tue Jul 12 00:09:05 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
Message-ID: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>

Hi everyone,
I am using GDAL 1.8.1 with Python 3.2 on Windows 7 64-bit (
http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-8-mapserver-6-0.zip<https://exchange1.arl.psu.edu/owa/redir.aspx?C=783cfcdde12e4056b2ac3fd8875cc2b1&URL=http%3a%2f%2fwww.gisinternals.com%2fsdk%2fPackageList.aspx%3ffile%3drelease-1600-x64-gdal-1-8-mapserver-6-0.zip>).
  (Thank you for providing this binary!)

I am using the code at
http://adventuresindevelopment.blogspot.com/2008/12/python-gdal-adding-geotiff-meta-data.html<https://exchange1.arl.psu.edu/owa/redir.aspx?C=783cfcdde12e4056b2ac3fd8875cc2b1&URL=http%3a%2f%2fadventuresindevelopment.blogspot.com%2f2008%2f12%2fpython-gdal-adding-geotiff-meta-data.html>
and
WriteArray() is giving me the following error builtins.ImportError: No
module named gdalnumeric, File
"C:\Python32\Lib\site-packages\osgeo\gdal.py", line 986, in WriteArray
  import gdalnumeric.

Why is the import for gdalnumeric not working?

Thanks in advance,
Isaac
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/81e89c6c/attachment.html
From even.rouault at mines-paris.org  Mon Jul 11 14:36:49 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 12 00:17:47 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
References: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
Message-ID: <201107112036.50071.even.rouault@mines-paris.org>

Le lundi 11 juillet 2011 20:27:12, Isaac Gerg a ?crit :
> Hi everyone,
> I am using GDAL 1.8.1 with Python 3.2 on Windows 7 64-bit (
> http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal
> -1-8-mapserver-6-0.zip<https://exchange1.arl.psu.edu/owa/redir.aspx?C=783cf
> cdde12e4056b2ac3fd8875cc2b1&URL=http%3a%2f%2fwww.gisinternals.com%2fsdk%2fP
> ackageList.aspx%3ffile%3drelease-1600-x64-gdal-1-8-mapserver-6-0.zip>).
> (Thank you for providing this binary!)
> 
> I am using the code at
> http://adventuresindevelopment.blogspot.com/2008/12/python-gdal-adding-geot
> iff-meta-data.html<https://exchange1.arl.psu.edu/owa/redir.aspx?C=783cfcdde
> 12e4056b2ac3fd8875cc2b1&URL=http%3a%2f%2fadventuresindevelopment.blogspot.c
> om%2f2008%2f12%2fpython-gdal-adding-geotiff-meta-data.html> and
> WriteArray() is giving me the following error builtins.ImportError: No
> module named gdalnumeric, File
> "C:\Python32\Lib\site-packages\osgeo\gdal.py", line 986, in WriteArray
>   import gdalnumeric.
> 
> Why is the import for gdalnumeric not working?

Likely because a numpy version compatible with Python 3.2 is needed when 
building the GDAL python bindings (and then when using them). I believe latest 
numpy releases are compatible with python 3.X

> 
> Thanks in advance,
> Isaac
From isaac.gerg at gergltd.com  Mon Jul 11 14:40:56 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Tue Jul 12 00:23:30 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <201107112036.50071.even.rouault@mines-paris.org>
References: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
	<201107112036.50071.even.rouault@mines-paris.org>
Message-ID: <CADnN3yV-eUPFiqnKsp-WGuZZy_eKPtrpWHoQ0ANAeukM9VUS2w@mail.gmail.com>

Hmmm.. I just downloaded numpy from here:
http://www.lfd.uci.edu/~gohlke/pythonlibs/ the 64bit windows one without
MKL.

I installed it successfully and then reran the code.  Same error.  Any
ideas?

Isaac

On Mon, Jul 11, 2011 at 2:36 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le lundi 11 juillet 2011 20:27:12, Isaac Gerg a ?crit :
> > Hi everyone,
> > I am using GDAL 1.8.1 with Python 3.2 on Windows 7 64-bit (
> >
> http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal
> > -1-8-mapserver-6-0.zip<
> https://exchange1.arl.psu.edu/owa/redir.aspx?C=783cf
> > cdde12e4056b2ac3fd8875cc2b1&URL=http%3a%2f%2fwww.gisinternals.com
> %2fsdk%2fP
> > ackageList.aspx%3ffile%3drelease-1600-x64-gdal-1-8-mapserver-6-0.zip>).
> > (Thank you for providing this binary!)
> >
> > I am using the code at
> >
> http://adventuresindevelopment.blogspot.com/2008/12/python-gdal-adding-geot
> > iff-meta-data.html<
> https://exchange1.arl.psu.edu/owa/redir.aspx?C=783cfcdde
> >
> 12e4056b2ac3fd8875cc2b1&URL=http%3a%2f%2fadventuresindevelopment.blogspot.c
> > om%2f2008%2f12%2fpython-gdal-adding-geotiff-meta-data.html> and
> > WriteArray() is giving me the following error builtins.ImportError: No
> > module named gdalnumeric, File
> > "C:\Python32\Lib\site-packages\osgeo\gdal.py", line 986, in WriteArray
> >   import gdalnumeric.
> >
> > Why is the import for gdalnumeric not working?
>
> Likely because a numpy version compatible with Python 3.2 is needed when
> building the GDAL python bindings (and then when using them). I believe
> latest
> numpy releases are compatible with python 3.X
>
> >
> > Thanks in advance,
> > Isaac
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/c2f73a6a/attachment.html
From even.rouault at mines-paris.org  Mon Jul 11 14:47:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 12 00:29:11 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <CADnN3yV-eUPFiqnKsp-WGuZZy_eKPtrpWHoQ0ANAeukM9VUS2w@mail.gmail.com>
References: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
	<201107112036.50071.even.rouault@mines-paris.org>
	<CADnN3yV-eUPFiqnKsp-WGuZZy_eKPtrpWHoQ0ANAeukM9VUS2w@mail.gmail.com>
Message-ID: <201107112047.43490.even.rouault@mines-paris.org>

Le lundi 11 juillet 2011 20:40:56, Isaac Gerg a ?crit :
> Hmmm.. I just downloaded numpy from here:
> http://www.lfd.uci.edu/~gohlke/pythonlibs/ the 64bit windows one without
> MKL.
> 
> I installed it successfully and then reran the code.  Same error.  Any
> ideas?

Yes, as I said in my previous answer, you need numpy at your side, but that's 
not enough. The GDAL python bindings need to be rebuilt against a python with 
numpy installed. So some extra work would be needed on Tamas side.
From isaac.gerg at gergltd.com  Mon Jul 11 14:55:00 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Tue Jul 12 00:38:19 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <201107112047.43490.even.rouault@mines-paris.org>
References: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
	<201107112036.50071.even.rouault@mines-paris.org>
	<CADnN3yV-eUPFiqnKsp-WGuZZy_eKPtrpWHoQ0ANAeukM9VUS2w@mail.gmail.com>
	<201107112047.43490.even.rouault@mines-paris.org>
Message-ID: <CADnN3yWCB739cU9cx1nGhVm51eg3ERLhDURvv9tHtbDNu6DJrw@mail.gmail.com>

Im not sure I understood your original message.  In any case, I have it
working now though I used a different GDAL build than the one down by Tamas.


I uninstalled Tamas' build (had to delete a few files in the site-packages
directory) and then install the GDAL libs from here:
http://www.lfd.uci.edu/~gohlke/pythonlibs/
GDAL-1.8.1.win-amd64-py3.2.?exe <http://www.lfd.uci.edu/~gohlke/pythonlibs/>
  [6.6 MB]  [Python 3.2]  [64 bit]  [Jul 08, 2011]

My code now works!

Isaac

On Mon, Jul 11, 2011 at 2:47 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le lundi 11 juillet 2011 20:40:56, Isaac Gerg a ?crit :
> > Hmmm.. I just downloaded numpy from here:
> > http://www.lfd.uci.edu/~gohlke/pythonlibs/ the 64bit windows one without
> > MKL.
> >
> > I installed it successfully and then reran the code.  Same error.  Any
> > ideas?
>
> Yes, as I said in my previous answer, you need numpy at your side, but
> that's
> not enough. The GDAL python bindings need to be rebuilt against a python
> with
> numpy installed. So some extra work would be needed on Tamas side.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/d63f84f8/attachment-0001.html
From jmckenna at gatewaygeomatics.com  Mon Jul 11 15:30:43 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jul 12 01:15:44 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
Message-ID: <4E1B4F63.8040001@gatewaygeomatics.com>

Hello everyone,

Today I am also testing the FileGDB support, and I was surprised to find 
that a wiki page in GDAL's 'buildhints' section had not been created, to 
record all of this great testing and discussion....so others don't need 
to search the mailing list. I have begun the document here, with my 
Windows notes: http://trac.osgeo.org/gdal/wiki/FileGDB

Please anyone that has went through testing already please update that 
page with your own notes.

(I'd like to see this creating-a-buildhints-page as mandatory for any 
new format)

Thanks!

-jeff


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


On 11-04-04 12:05 AM, Ragi Burhum wrote:
> Hello list,
>
> I am trying to test a new version of the FileGDB driver for OGR, but I
> lack enough FileGDBs to test :)
> If you have an *ArcGIS 10* FileGDB and would like to test the FileGDB
> driver (and report back), feel free to grab a gdal-trunk binary I made
> for Windows.
>
> All I want to know is if it works with polygons and lines, so feel free
> to test it with those types.
>
> Known issues with build / FileGDB driver
>
> - (driver issue) blobs and date fields are not handled at all
> - (driver issue) read-only (for now)
> - (build issue) I didn't include geos (means spatial operations will be
> bounding-box based)
> - (build issue) I didn't include the proj libraries (means a change of
> coordinate system will not work)
>
> you can use it like this:
>
> //create kml from FileGDB class
> ogr2ogr -f "KML" out2.kml
> C:\Users\rburhum\Desktop\FileGDB_API_VS2008_1_0beta3\samples\data\ExecuteSQL.gdb
> "Cities"
>
> //create shapefile
> ogr2ogr -f "ESRI Shapefile" myshape.shp
> C:\Users\rburhum\Desktop\FileGDB_API_VS2008_1_0beta3\samples\data\ExecuteSQL.gdb
> "Cities"
>
> You can find the test binaries at
>
>
>   http://bit.ly/gdZqar
>
>
> Best Regards,
>
> - Ragi
>
From szekerest at gmail.com  Mon Jul 11 16:13:08 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Jul 12 02:00:20 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <CADnN3yWCB739cU9cx1nGhVm51eg3ERLhDURvv9tHtbDNu6DJrw@mail.gmail.com>
References: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
	<201107112036.50071.even.rouault@mines-paris.org>
	<CADnN3yV-eUPFiqnKsp-WGuZZy_eKPtrpWHoQ0ANAeukM9VUS2w@mail.gmail.com>
	<201107112047.43490.even.rouault@mines-paris.org>
	<CADnN3yWCB739cU9cx1nGhVm51eg3ERLhDURvv9tHtbDNu6DJrw@mail.gmail.com>
Message-ID: <CACALY+RLxhnPz2yT+XFqPSZDQtBan4XJ1fUohm+Lvqyjr=oU4g@mail.gmail.com>

Isaac,

I've took a chance to install the numpy-amd64 packages from the site you
mentioned. If the things are going well the tomorrow builds will contain the
numpy enabled gdal win64 packages.

I should however mention that I have some negative experiences with the
numpy enabled GDAL (WIN64) packages since the GDAL python tests were
crashing with this option, when I was trying to include this this last time.
So in case if the tests are not working well, I must revert this addition
and remove numpy from the Win64 setup. (The Win32 GDALpackages already
contain numpy at http://www.gisinternals.com/sdk)

Best regards,

Tamas





2011/7/11 Isaac Gerg <isaac.gerg@gergltd.com>

> Im not sure I understood your original message.  In any case, I have it
> working now though I used a different GDAL build than the one down by Tamas.
>
>
> I uninstalled Tamas' build (had to delete a few files in the site-packages
> directory) and then install the GDAL libs from here:
> http://www.lfd.uci.edu/~gohlke/pythonlibs/
> GDAL-1.8.1.win-amd64-py3.2.?exe<http://www.lfd.uci.edu/%7Egohlke/pythonlibs/>
>   [6.6 MB]  [Python 3.2]  [64 bit]  [Jul 08, 2011]
>
> My code now works!
>
> Isaac
>
> On Mon, Jul 11, 2011 at 2:47 PM, Even Rouault <
> even.rouault@mines-paris.org> wrote:
>
>> Le lundi 11 juillet 2011 20:40:56, Isaac Gerg a ?crit :
>> > Hmmm.. I just downloaded numpy from here:
>> > http://www.lfd.uci.edu/~gohlke/pythonlibs/ the 64bit windows one
>> without
>> > MKL.
>> >
>> > I installed it successfully and then reran the code.  Same error.  Any
>> > ideas?
>>
>> Yes, as I said in my previous answer, you need numpy at your side, but
>> that's
>> not enough. The GDAL python bindings need to be rebuilt against a python
>> with
>> numpy installed. So some extra work would be needed on Tamas side.
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/b744f76a/attachment.html
From isaac.gerg at gergltd.com  Mon Jul 11 16:14:18 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Tue Jul 12 02:01:53 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <CACALY+RLxhnPz2yT+XFqPSZDQtBan4XJ1fUohm+Lvqyjr=oU4g@mail.gmail.com>
References: <CADnN3yUXy5a8zkOSD_SpP2dcdpdkOwG=UpNO43EHLyFDqzWkOQ@mail.gmail.com>
	<201107112036.50071.even.rouault@mines-paris.org>
	<CADnN3yV-eUPFiqnKsp-WGuZZy_eKPtrpWHoQ0ANAeukM9VUS2w@mail.gmail.com>
	<201107112047.43490.even.rouault@mines-paris.org>
	<CADnN3yWCB739cU9cx1nGhVm51eg3ERLhDURvv9tHtbDNu6DJrw@mail.gmail.com>
	<CACALY+RLxhnPz2yT+XFqPSZDQtBan4XJ1fUohm+Lvqyjr=oU4g@mail.gmail.com>
Message-ID: <CADnN3yVY6xGyCjka=u5AFAaEqv6nMN5tOaFPs-+_r1s1dz8UYw@mail.gmail.com>

Thank you!

On Mon, Jul 11, 2011 at 4:13 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> Isaac,
>
> I've took a chance to install the numpy-amd64 packages from the site you
> mentioned. If the things are going well the tomorrow builds will contain the
> numpy enabled gdal win64 packages.
>
> I should however mention that I have some negative experiences with the
> numpy enabled GDAL (WIN64) packages since the GDAL python tests were
> crashing with this option, when I was trying to include this this last time.
> So in case if the tests are not working well, I must revert this addition
> and remove numpy from the Win64 setup. (The Win32 GDALpackages already
> contain numpy at http://www.gisinternals.com/sdk)
>
> Best regards,
>
> Tamas
>
>
>
>
>
> 2011/7/11 Isaac Gerg <isaac.gerg@gergltd.com>
>
>> Im not sure I understood your original message.  In any case, I have it
>> working now though I used a different GDAL build than the one down by Tamas.
>>
>>
>> I uninstalled Tamas' build (had to delete a few files in the site-packages
>> directory) and then install the GDAL libs from here:
>>  http://www.lfd.uci.edu/~gohlke/pythonlibs/
>> GDAL-1.8.1.win-amd64-py3.2.?exe<http://www.lfd.uci.edu/%7Egohlke/pythonlibs/>
>>   [6.6 MB]  [Python 3.2]  [64 bit]  [Jul 08, 2011]
>>
>> My code now works!
>>
>> Isaac
>>
>> On Mon, Jul 11, 2011 at 2:47 PM, Even Rouault <
>> even.rouault@mines-paris.org> wrote:
>>
>>> Le lundi 11 juillet 2011 20:40:56, Isaac Gerg a ?crit :
>>> > Hmmm.. I just downloaded numpy from here:
>>> > http://www.lfd.uci.edu/~gohlke/pythonlibs/ the 64bit windows one
>>> without
>>> > MKL.
>>> >
>>> > I installed it successfully and then reran the code.  Same error.  Any
>>> > ideas?
>>>
>>> Yes, as I said in my previous answer, you need numpy at your side, but
>>> that's
>>> not enough. The GDAL python bindings need to be rebuilt against a python
>>> with
>>> numpy installed. So some extra work would be needed on Tamas side.
>>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/20ca130b/attachment.html
From ejr5046 at psu.edu  Mon Jul 11 13:55:15 2011
From: ejr5046 at psu.edu (ELLIOT JAY RILEY)
Date: Tue Jul 12 03:01:37 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
Message-ID: <1310406914l.1335300l.0l@psu.edu>

Hi everyone,
I am using GDAL 1.8.1 with Python 3.2 on Windows 7 64-bit
(<http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-8-mapserver-6-0.zip>).  
I am using the code at <http://adventuresindevelopment.blogspot.com/2008/12/python-gdal-adding-geotiff-meta-data.html> and WriteArray() is giving me the following error builtins.ImportError: No module named gdalnumeric, File "C:\Python32\Lib\site-packages\osgeo\gdal.py", line 986, in WriteArray  import gdalnumeric.
Why is the import for gdalnumeric not working?
Thanks in advance,Elliot
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/de47b8bb/attachment.html
From isaac.gerg at gergltd.com  Mon Jul 11 17:17:07 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Tue Jul 12 03:08:14 2011
Subject: [gdal-dev] gdalnumeric problems with Python 3.2 Windows 7 64 bit
In-Reply-To: <1310406914l.1335300l.0l@psu.edu>
References: <1310406914l.1335300l.0l@psu.edu>
Message-ID: <CADnN3yVpYJzJkCuaeFbOca-7Lgu0oZkkzH5SonY9+giUXAmroQ@mail.gmail.com>

Just ignore this.  Its from a colleague of mine. I reposted because for some
reason his message did not get posted to the list in a timeframe close to
when my messages are posted.

Apologies.

On Mon, Jul 11, 2011 at 1:55 PM, ELLIOT JAY RILEY <ejr5046@psu.edu> wrote:

> Hi everyone,
>
> I am using GDAL 1.8.1 with Python 3.2 on Windows 7 64-bit (
> http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1600-x64-gdal-1-8-mapserver-6-0.zip).
>
>
> I am using the code at
> http://adventuresindevelopment.blogspot.com/2008/12/python-gdal-adding-geotiff-meta-data.html and
> WriteArray() is giving me the following error builtins.ImportError: No
> module named gdalnumeric, File
> "C:\Python32\Lib\site-packages\osgeo\gdal.py", line 986, in WriteArray
>   import gdalnumeric.
>
> Why is the import for gdalnumeric not working?
>
> Thanks in advance,
> Elliot
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/16109792/attachment.html
From aperi2007 at gmail.com  Mon Jul 11 17:46:16 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Tue Jul 12 03:38:48 2011
Subject: [gdal-dev] GML without geometry export forward shapefile with
	null geometry
In-Reply-To: <201107102319.36915.even.rouault@mines-paris.org>
References: <4E1899F3.9060109@gmail.com>
	<CA+YzLBeyBKrgB+KuNNAmV2ouAy_EPsWf6PDTU5JM+9=d30fpXA@mail.gmail.com>
	<4E18A639.3080000@gmail.com>
	<201107102319.36915.even.rouault@mines-paris.org>
Message-ID: <4E1B6F28.7020106@gmail.com>

Il 10/07/2011 23:19, Even Rouault ha scritto:
> Le samedi 09 juillet 2011 21:04:25, aperi2007 a ?crit :
> Andrea,
>
> Yes, I've confirmed that the GML driver doesn't handle wkbNone layers in a
> optimal way. I've created http://trac.osgeo.org/gdal/ticket/4154 and commited
> the appropriate fixes.
>
> Best regards,
>
> Even
>

Hi Even,

your patch work very well.

Regard,

Andrea.
From mariusjigmond at hotmail.com  Mon Jul 11 21:34:10 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Tue Jul 12 07:38:55 2011
Subject: [gdal-dev] OGR Geometry methods
Message-ID: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>

Hi everyone,

I am trying to test whether centroids of polygons lie/intersect within
another polygon. I have tried Intersect, Within, and Contains but they
always return false. Should these methods work for my intended purpose
or do I need to implement a point in polygon function? Thanks.

-marius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/a6b0d2a2/attachment.html
From mariusjigmond at hotmail.com  Mon Jul 11 21:46:22 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Tue Jul 12 07:51:44 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
Message-ID: <BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>

I suppose a piece of code speaks louder :):

xsect = False
for i in range(gridLayer.GetFeatureCount()):
  feat = gridLayer.GetFeature(i)
  geom = feat.GetGeometryRef()
  point = geom.Centroid()
  for j in range(aqLayer.GetFeatureCount()):
    aqfeat = aqLayer.GetFeature(j)
    aqgeom = aqfeat.GetGeometryRef()
    if point.Intersect(aqgeom):
      xsect = True
      print 'ibound = 1'
      break
  if xsect:
    feat.SetField('IBOUND', 1)
    gridLayer.SetFeature(feat)
    xsect = False

-marius

On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:

> Hi everyone,
> 
> I am trying to test whether centroids of polygons lie/intersect within
> another polygon. I have tried Intersect, Within, and Contains but they
> always return false. Should these methods work for my intended purpose
> or do I need to implement a point in polygon function? Thanks.
> 
> -marius 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/e80a6117/attachment.html
From mariusjigmond at hotmail.com  Mon Jul 11 23:00:41 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Tue Jul 12 09:10:15 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
Message-ID: <BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>

After some more investigation that is likely NOT the issue. I have an
ExecuteSQL statement which selects a certain polygon based on an
attribute value. Unfortunately it seems to return the wrong feature. The
feature I query for is unique so a duplicate is out of the question.
Here's the code:

#!/usr/bin/python

from osgeo import ogr
import sys, math, time, os

aquifer = '/data/romania/judeteEPSG3844.shp'
aqDS = ogr.Open(aquifer)
sql = 'select * from judeteEPSG3844 where DENJUD = "CLUJ"'
aqLayer = aqDS.ExecuteSQL(sql)
feat = aqLayer.GetFeature(0)
print aqLayer.GetFeatureCount()
print feat.GetField('DENJUD')
aqDS.ReleaseResultSet(aqLayer)

The result:
marius@mobi:~/temp$ run_sql.py 
1
TELEORMAN
marius@mobi:~/temp$ 

This explains why none of my centroids were remotely close to the
polygon.

Is there something wrong with my query or should I file a bug?

-marius

On Mon, 2011-07-11 at 20:46 -0500, Marius Jigmond wrote:

> I suppose a piece of code speaks louder :):
> 
> xsect = False
> for i in range(gridLayer.GetFeatureCount()):
>   feat = gridLayer.GetFeature(i)
>   geom = feat.GetGeometryRef()
>   point = geom.Centroid()
>   for j in range(aqLayer.GetFeatureCount()):
>     aqfeat = aqLayer.GetFeature(j)
>     aqgeom = aqfeat.GetGeometryRef()
>     if point.Intersect(aqgeom):
>       xsect = True
>       print 'ibound = 1'
>       break
>   if xsect:
>     feat.SetField('IBOUND', 1)
>     gridLayer.SetFeature(feat)
>     xsect = False
> 
> -marius
> 
> On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:
> 
> > Hi everyone,
> > 
> > I am trying to test whether centroids of polygons lie/intersect
> > within another polygon. I have tried Intersect, Within, and Contains
> > but they always return false. Should these methods work for my
> > intended purpose or do I need to implement a point in polygon
> > function? Thanks.
> > 
> > -marius 
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110711/d7358c1f/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 12 02:07:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 12 12:27:38 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>
Message-ID: <CAMKgpOZQUhL5EpfLStui48akTE8uP2Dj_Kddh26UeF38=jmUdQ@mail.gmail.com>

Marius,

Please do file a ticket with a small shapefile that shows this error.
http://trac.osgeo.org/gdal/newticket

On Tue, Jul 12, 2011 at 8:30 AM, Marius Jigmond
<mariusjigmond@hotmail.com>wrote:

> **
> After some more investigation that is likely NOT the issue. I have an
> ExecuteSQL statement which selects a certain polygon based on an attribute
> value. Unfortunately it seems to return the wrong feature. The feature I
> query for is unique so a duplicate is out of the question. Here's the code:
>
> #!/usr/bin/python
>
> from osgeo import ogr
> import sys, math, time, os
>
> aquifer = '/data/romania/judeteEPSG3844.shp'
> aqDS = ogr.Open(aquifer)
> sql = 'select * from judeteEPSG3844 where DENJUD = "CLUJ"'
> aqLayer = aqDS.ExecuteSQL(sql)
> feat = aqLayer.GetFeature(0)
> print aqLayer.GetFeatureCount()
> print feat.GetField('DENJUD')
> aqDS.ReleaseResultSet(aqLayer)
>
> The result:
> marius@mobi:~/temp$ run_sql.py
> 1
> TELEORMAN
> marius@mobi:~/temp$
>
> This explains why none of my centroids were remotely close to the polygon.
>
> Is there something wrong with my query or should I file a bug?
>
> -marius
>
>
> On Mon, 2011-07-11 at 20:46 -0500, Marius Jigmond wrote:
>
> I suppose a piece of code speaks louder :):
>
> xsect = False
> for i in range(gridLayer.GetFeatureCount()):
>   feat = gridLayer.GetFeature(i)
>   geom = feat.GetGeometryRef()
>   point = geom.Centroid()
>   for j in range(aqLayer.GetFeatureCount()):
>     aqfeat = aqLayer.GetFeature(j)
>     aqgeom = aqfeat.GetGeometryRef()
>     if point.Intersect(aqgeom):
>       xsect = True
>       print 'ibound = 1'
>       break
>   if xsect:
>     feat.SetField('IBOUND', 1)
>     gridLayer.SetFeature(feat)
>     xsect = False
>
> -marius
>
> On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:
>
> Hi everyone,
>
> I am trying to test whether centroids of polygons lie/intersect within
> another polygon. I have tried Intersect, Within, and Contains but they
> always return false. Should these methods work for my intended purpose or do
> I need to implement a point in polygon function? Thanks.
>
> -marius
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>  _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/d0ae8fa8/attachment.html
From monicabuescu1985 at gmail.com  Tue Jul 12 03:51:56 2011
From: monicabuescu1985 at gmail.com (Monica Buescu)
Date: Tue Jul 12 14:17:31 2011
Subject: [gdal-dev] Re: [GRASS-translations] Translation of Next,
 Back and Cancel buttons in Georecrtify
In-Reply-To: <CALFmHhsbNLqyBUit1oCtjrHdTbfns=woF=874ryg7K-AmDiQJw@mail.gmail.com>
References: <CABoKiBT-kc=mw7aMR8SohgESqCVfak2=0RL+ma-zziHGx-vKsA@mail.gmail.com>
	<CADjEob2p-OQYfp6PSNY8dT9ZbMD8Rzw6B7d=PYR2TA3u+kK0Lg@mail.gmail.com>
	<CABoKiBSiR3g1-NiHJkwz744u+BOQ9eDPw7mh2k4Qy=bQmnsZ2Q@mail.gmail.com>
	<CADjEob0sXV=eQUSv1roszX-GVPFw2YA8+QnxrmFVMiYTX8geKQ@mail.gmail.com>
	<CABoKiBRhNyQpA3RG1BgCf4mLn0JRqyYLi5J+Z4UozW0xuaWfAw@mail.gmail.com>
	<CALFmHhsbNLqyBUit1oCtjrHdTbfns=woF=874ryg7K-AmDiQJw@mail.gmail.com>
Message-ID: <CABoKiBTJM9qJGd7OwNZ6LrkrF9dvZxw7SO_=fQMKKv3Jh35FRw@mail.gmail.com>

Hello
I would say that we clearly need to tag them.
But, since this is a decision tha might take some time, can anyone give me a
few tips on tagging OK, Cancel, Next, Back buttons in Georectify module and
Location Wizard interfaces' Because I need to have spanish working version
ASAP. I just need a few tips on this.
Thanks
Monica

On Mon, Jul 11, 2011 at 10:32 PM, Markus Neteler <neteler@osgeo.org> wrote:

> On Fri, Jul 8, 2011 at 8:10 PM, Monica Buescu
> <monicabuescu1985@gmail.com> wrote:
> >
> > Hello Sylvian.
> > They are because probably your OS is in French and it retrieves those
> labels
> > from there
>
> So the problem appears to be for people "forcing" a different language for
> GRASS
> which is different from the OS locale? Sounds reasonable.
>
> > On Wed, Jul 6, 2011 at 1:27 PM, Sylvain Maillard
> > <sylvain.maillard@gmail.com> wrote:
> >>
> >> on my computer, those buttons are already in french !
> >>
> >> I think that we should ask the question on the grass-dev list for the
> >> correct answer...
>
> Yes,  we need to decide if to tag the system buttons or not.
>
> Markus
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/dfa5fae5/attachment.html
From giannicristian at msn.com  Tue Jul 12 04:01:13 2011
From: giannicristian at msn.com (Solimyr)
Date: Tue Jul 12 14:27:18 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapeile
In-Reply-To: <CAMKgpOaJt9Xz5-krRh7ytb91qYWO9knu_AsWcJY9zwr-UTN_=A@mail.gmail.com>
References: <1310120331228-6561998.post@n2.nabble.com>
	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
	<1310379159245-6570374.post@n2.nabble.com>
	<CAMKgpOY-12ASadJwU6XwZLC8ZK-zNQq5KVrVsM7C2fxB+mSgSg@mail.gmail.com>
	<1310396491756-6571241.post@n2.nabble.com>
	<CAMKgpOaJt9Xz5-krRh7ytb91qYWO9knu_AsWcJY9zwr-UTN_=A@mail.gmail.com>
Message-ID: <1310457673366-6574135.post@n2.nabble.com>

Thx for the answers, now I get the right srs but the extent is different:

SHAPE 1 ( the one where I want to get the info and copy to the new)
$ ogrinfo -al provaimp.shp
INFO: Open of `provaimp.shp'
      using driver `ESRI Shapefile' successful.

Layer name: provaimp
Geometry: Polygon
Feature Count: 2
Extent: (15.548977, 38.176478) - (15.551497, 38.179126)
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_1984",637813.0,298.252223563]],
    PRIMEM["Greenwich",0.0],
    UNIT["Degree",0.0174532925199433]]
Id: Integer (6.0)
OGRFeature(provaimp):0
  Id (Integer) = 0
  POLYGON ((15.550555060572606 38.17912619284624,15.550983363553598
38.179090500931238,15.550690689850001 38.177876975818322,15.550383739380152
38.17775562330695,15.550555060572606 38.17912619284624))

OGRFeature(provaimp):1
  Id (Integer) = 0
  POLYGON ((15.548977477925689 38.177298766793797,15.550590752487608
38.177363012241017,15.551497327130903 38.176527821427953,15.549598517248228
38.176477852746871,15.548977477925689 38.177298766793797))

SHAPE 2 (the one with wrong extent but (now) correct srs)
$ ogrinfo -al mean_provaimp.shp
INFO: Open of `mean_provaimp.shp'
      using driver `ESRI Shapefile' successful.

Layer name: mean_provaimp
Geometry: Polygon
Feature Count: 2
Extent: (0.000000, 0.000000) - (376.000000, 390.000000)
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["WGS_1984",637813.0,298.252223563]],
    PRIMEM["Greenwich",0.0],
    UNIT["Degree",0.017453292519943295]]
VALUE: Real (26.6)
OGRFeature(mean_provaimp):0
OGRFeature(mean_provaimp):0
  VALUE (Real) =                 33.124565
  POLYGON ((15.550555060572606 38.17912619284624,15.550983363553598
38.179090500931238,15.550690689850001 38.177876975818322,15.550383739380152
38.17775562330695,15.550555060572606 38.17912619284624))

OGRFeature(mean_provaimp):1
  VALUE (Real) =                  45.133755
  POLYGON ((15.548977477925689 38.177298766793797,15.550590752487608
38.177363012241017,15.551497327130903 38.176527821427953,15.549598517248228
38.176477852746871,15.548977477925689 38.177298766793797))


Do you know where the extent information of the shapefile are preserve?So I
can get, copy and paste or doing something similar...


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6574135.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jluis at ualg.pt  Tue Jul 12 06:59:31 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jul 12 17:35:55 2011
Subject: [gdal-dev] PDF via podofo
Message-ID: <4E1C2913.5030404@ualg.pt>

Hi,

I am still having troubles with a build with PDF support. I used to have 
a working solution for my gdalread MEX by using poppler 0.14, however 
now GDAL gives an error when linking with it (something about a member 
that does not exist). So I turned again to 0.16 and managed to compile 
everything. But now Matlab just crash when I read a pdf (repeat, before 
it used to work).
Next I tried the podofo (funny name) library. Everything compiles fine 
but a PDF driver does not exit when print the available drivers (and 
obviously, reading pdf does not work).
I also noted that grepping "PODOFO_ENABLED" for the entire GDAL tree, it 
only shows up once, in nmake.opt.

Ah, it's a Windows build that I'm talking about.

Joaquim Luis
From even.rouault at mines-paris.org  Tue Jul 12 07:20:41 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 12 17:56:56 2011
Subject: [gdal-dev] PDF via podofo
In-Reply-To: <4E1C2913.5030404@ualg.pt>
References: <4E1C2913.5030404@ualg.pt>
Message-ID: <201107121320.41784.even.rouault@mines-paris.org>

Le mardi 12 juillet 2011 12:59:31, Joaquim Luis a ?crit :
> Hi,
> 
> I am still having troubles with a build with PDF support. I used to have
> a working solution for my gdalread MEX by using poppler 0.14, however
> now GDAL gives an error when linking with it (something about a member
> that does not exist).

Error at compile time about fillGooString() missing, with a very recent trunk ? 
If so, I've just fixed it when testing compilation on CentOS 6 that ships with 
poppler 0.12.4.

> So I turned again to 0.16 and managed to compile
> everything. But now Matlab just crash when I read a pdf (repeat, before
> it used to work).

Hum I guess you run into cross-heap issues related to different versions of the 
MSVC Runtime...

> Next I tried the podofo (funny name) library. Everything compiles fine
> but a PDF driver does not exit when print the available drivers (and
> obviously, reading pdf does not work).
> I also noted that grepping "PODOFO_ENABLED" for the entire GDAL tree, it
> only shows up once, in nmake.opt.

Yes, there was something missing in frmts/makefile.vc. I think I've just fixed 
it (untested though)

So 'svn update' and retry

> 
> Ah, it's a Windows build that I'm talking about.
> 
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From jluis at ualg.pt  Tue Jul 12 07:29:08 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jul 12 18:09:44 2011
Subject: [gdal-dev] PDF via podofo
In-Reply-To: <201107121320.41784.even.rouault@mines-paris.org>
References: <4E1C2913.5030404@ualg.pt>
	<201107121320.41784.even.rouault@mines-paris.org>
Message-ID: <4E1C3004.4000902@ualg.pt>

On 12-07-2011 12:20, Even Rouault wrote:
> Le mardi 12 juillet 2011 12:59:31, Joaquim Luis a ?crit :
>> Hi,
>>
>> I am still having troubles with a build with PDF support. I used to have
>> a working solution for my gdalread MEX by using poppler 0.14, however
>> now GDAL gives an error when linking with it (something about a member
>> that does not exist).
> Error at compile time about fillGooString() missing, with a very recent trunk ?
> If so, I've just fixed it when testing compilation on CentOS 6 that ships with
> poppler 0.12.4.

Exactly.

>> So I turned again to 0.16 and managed to compile
>> everything. But now Matlab just crash when I read a pdf (repeat, before
>> it used to work).
> Hum I guess you run into cross-heap issues related to different versions of the
> MSVC Runtime...

Perhaps but I am very careful in maintaining separate directories with 
libs compiled with a certain compiler (I swap between VS2010 and Intel 
32, 64) and than always link with the libs created with the same 
compiler. That's why I want to be able to compile all dependencies that 
I use to build GDAL.

>> Next I tried the podofo (funny name) library. Everything compiles fine
>> but a PDF driver does not exit when print the available drivers (and
>> obviously, reading pdf does not work).
>> I also noted that grepping "PODOFO_ENABLED" for the entire GDAL tree, it
>> only shows up once, in nmake.opt.
> Yes, there was something missing in frmts/makefile.vc. I think I've just fixed
> it (untested though)
>
> So 'svn update' and retry

Thanks, I'll try it later today.

Joaquim


>> Ah, it's a Windows build that I'm talking about.
>>
>> Joaquim Luis
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From antonio.rocha at deimos.com.pt  Tue Jul 12 07:37:32 2011
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Tue Jul 12 18:16:04 2011
Subject: [gdal-dev] usage of subprocess.call
Message-ID: <4E1C31FC.9020307@deimos.com.pt>

Greetings

In a Python script I'm using this to run an external BIN:
p=subprocess.call(command) where command is my command to run the bin. p 
will be equal tot he return values of the bin.
(so far so good)
But I'm getting an error now while running bin:
  File "C:/EIS/scripts/mycopy", line 577, in
<module>
    main()
  File "C:/EIS/scripts/mycopy", line 278, in main
    p=subprocess.call(command)
  File "C:\EIS\Python25\lib\subprocess.py", line 444, in
call
    return Popen(*popenargs, **kwargs).wait()
  File "C:\EIS\Python25\lib\subprocess.py", line 594, in
__init__
    errread, errwrite)
  File "C:\EIS\Python25\lib\subprocess.py", line 816, in
_execute_child
    startupinfo)
WindowsError: [Error 193]

My problem is not the error but, is there a way to "get" the error and 
stop the process in a more smoother way instead of stopping so drastically?

Thanks
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 6286 (20110712) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From chaitanya.ch at gmail.com  Tue Jul 12 07:51:39 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 12 18:31:00 2011
Subject: [gdal-dev] Re: Change the spatial reference of a shapeile
In-Reply-To: <1310457673366-6574135.post@n2.nabble.com>
References: <1310120331228-6561998.post@n2.nabble.com>
	<CAMKgpOZDxAWEzsE69K3Pb=fib+Xm44L=7bM3tgji_-MCiod8SA@mail.gmail.com>
	<1310379159245-6570374.post@n2.nabble.com>
	<CAMKgpOY-12ASadJwU6XwZLC8ZK-zNQq5KVrVsM7C2fxB+mSgSg@mail.gmail.com>
	<1310396491756-6571241.post@n2.nabble.com>
	<CAMKgpOaJt9Xz5-krRh7ytb91qYWO9knu_AsWcJY9zwr-UTN_=A@mail.gmail.com>
	<1310457673366-6574135.post@n2.nabble.com>
Message-ID: <CAMKgpObiMk5_0bj4KQKj6tim+hMHFJde6R5QEv66Nu2vYmBb2Q@mail.gmail.com>

Solimyr,

Since mean_provaimp didn't have any extent data at first, it is created
during the ogr2ogr process. There must be some features that are beyond the
extents of the other shapefile for this to have extended extents.

FYI, the bounds are stored in the .shp file's header from the 37th to 68th
byte. Refer the following links.
http://en.wikipedia.org/wiki/Shapefile
http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf

On Tue, Jul 12, 2011 at 1:31 PM, Solimyr <giannicristian@msn.com> wrote:

> Thx for the answers, now I get the right srs but the extent is different:
>
> SHAPE 1 ( the one where I want to get the info and copy to the new)
> $ ogrinfo -al provaimp.shp
> INFO: Open of `provaimp.shp'
>      using driver `ESRI Shapefile' successful.
>
> Layer name: provaimp
> Geometry: Polygon
> Feature Count: 2
> Extent: (15.548977, 38.176478) - (15.551497, 38.179126)
> Layer SRS WKT:
> GEOGCS["GCS_WGS_1984",
>    DATUM["WGS_1984",
>        SPHEROID["WGS_1984",637813.0,298.252223563]],
>    PRIMEM["Greenwich",0.0],
>    UNIT["Degree",0.0174532925199433]]
> Id: Integer (6.0)
> OGRFeature(provaimp):0
>  Id (Integer) = 0
>  POLYGON ((15.550555060572606 38.17912619284624,15.550983363553598
> 38.179090500931238,15.550690689850001 38.177876975818322,15.550383739380152
> 38.17775562330695,15.550555060572606 38.17912619284624))
>
> OGRFeature(provaimp):1
>  Id (Integer) = 0
>  POLYGON ((15.548977477925689 38.177298766793797,15.550590752487608
> 38.177363012241017,15.551497327130903 38.176527821427953,15.549598517248228
> 38.176477852746871,15.548977477925689 38.177298766793797))
>
> SHAPE 2 (the one with wrong extent but (now) correct srs)
> $ ogrinfo -al mean_provaimp.shp
> INFO: Open of `mean_provaimp.shp'
>      using driver `ESRI Shapefile' successful.
>
> Layer name: mean_provaimp
> Geometry: Polygon
> Feature Count: 2
> Extent: (0.000000, 0.000000) - (376.000000, 390.000000)
> Layer SRS WKT:
> GEOGCS["GCS_WGS_1984",
>    DATUM["WGS_1984",
>        SPHEROID["WGS_1984",637813.0,298.252223563]],
>    PRIMEM["Greenwich",0.0],
>     UNIT["Degree",0.017453292519943295]]
> VALUE: Real (26.6)
> OGRFeature(mean_provaimp):0
> OGRFeature(mean_provaimp):0
>  VALUE (Real) =                 33.124565
>  POLYGON ((15.550555060572606 38.17912619284624,15.550983363553598
> 38.179090500931238,15.550690689850001 38.177876975818322,15.550383739380152
> 38.17775562330695,15.550555060572606 38.17912619284624))
>
> OGRFeature(mean_provaimp):1
>  VALUE (Real) =                  45.133755
>  POLYGON ((15.548977477925689 38.177298766793797,15.550590752487608
> 38.177363012241017,15.551497327130903 38.176527821427953,15.549598517248228
> 38.176477852746871,15.548977477925689 38.177298766793797))
>
>
> Do you know where the extent information of the shapefile are preserve?So I
> can get, copy and paste or doing something similar...
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Change-the-spatial-reference-of-a-shapeile-tp6561998p6574135.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/e64f7b67/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 12 08:03:56 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 12 18:44:01 2011
Subject: [gdal-dev] usage of subprocess.call
In-Reply-To: <4E1C31FC.9020307@deimos.com.pt>
References: <4E1C31FC.9020307@deimos.com.pt>
Message-ID: <CAMKgpOZbfg83dF2Aejk-96YQDqByynx4om0twKE+U5mg+y+a4A@mail.gmail.com>

Ant?nio,

Refer to the documentation of python's subprocess module.
http://www.python.org/doc//current/library/subprocess.html

2011/7/12 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Greetings
>
> In a Python script I'm using this to run an external BIN:
> p=subprocess.call(command) where command is my command to run the bin. p
> will be equal tot he return values of the bin.
> (so far so good)
> But I'm getting an error now while running bin:
>  File "C:/EIS/scripts/mycopy", line 577, in
> <module>
>   main()
>  File "C:/EIS/scripts/mycopy", line 278, in main
>   p=subprocess.call(command)
>  File "C:\EIS\Python25\lib\**subprocess.py", line 444, in
> call
>   return Popen(*popenargs, **kwargs).wait()
>  File "C:\EIS\Python25\lib\**subprocess.py", line 594, in
> __init__
>   errread, errwrite)
>  File "C:\EIS\Python25\lib\**subprocess.py", line 816, in
> _execute_child
>   startupinfo)
> WindowsError: [Error 193]
>
> My problem is not the error but, is there a way to "get" the error and stop
> the process in a more smoother way instead of stopping so drastically?
>
> Thanks
> Antonio
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6286 (20110712) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/0c3c2b28/attachment.html
From RSyaoxin at hotmail.com  Tue Jul 12 09:09:15 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Tue Jul 12 19:53:13 2011
Subject: [gdal-dev] RE: How to get some special metadata of HDF5
	Cosmo-Skymed file
In-Reply-To: <CAC4=NR8ytMpVC6D=ByN49mhcV=+Wq4HXAmhr4j9o5Ng4JzbSiQ@mail.gmail.com>
References: <1310306922740-6567852.post@n2.nabble.com>
	<4E19B8CF.4080702@tiscali.it>
	<CAC4=NR_qgvqVV2v982OtJ18PcX61QKbwrt8hRj6j7xK-+zHqcw@mail.gmail.com>
	<BAY146-w39AE8F135274A3144E3F39C6450@phx.gbl>
	<CAC4=NR8kTBA8Q4WNWngp+XFNTrNG23xhrFfPCRfd7kLZ9Fo9Gw@mail.gmail.com>
	<BAY146-w495EFFDCA3F22346CAC575C6450@phx.gbl>
	<CAC4=NR8ytMpVC6D=ByN49mhcV=+Wq4HXAmhr4j9o5Ng4JzbSiQ@mail.gmail.com>
Message-ID: <1310476155992-6574997.post@n2.nabble.com>

Thanks Alex Mantaut.I have got the right result.
Best regards.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/How-to-get-some-special-metadata-of-HDF5-Cosmo-Skymed-file-tp6567852p6574997.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jluis at ualg.pt  Tue Jul 12 09:34:19 2011
From: jluis at ualg.pt (Joaquim Luis)
Date: Tue Jul 12 20:19:41 2011
Subject: [gdal-dev] PDF via podofo
In-Reply-To: <4E1C3004.4000902@ualg.pt>
References: <4E1C2913.5030404@ualg.pt>	<201107121320.41784.even.rouault@mines-paris.org>
	<4E1C3004.4000902@ualg.pt>
Message-ID: <4E1C4D5B.2000809@ualg.pt>

Evan,

It seams to work now. I say "seams" because with podofo it also requires 
to have available "pdftoppm"

gdal_translate lixo.pdf lixo.tiff
Input file size is 1239, 1754
0'pdftoppm' is not recognized as an internal or external command,

but since your fix to build with poppler 0.14 works just fine again and 
this doesn't oblige to carry any other 3rth prog I'm staying within this 
solution.

Thanks again

Joaquim


> On 12-07-2011 12:20, Even Rouault wrote:
>> Le mardi 12 juillet 2011 12:59:31, Joaquim Luis a ?crit :
>>> Hi,
>>>
>>> I am still having troubles with a build with PDF support. I used to 
>>> have
>>> a working solution for my gdalread MEX by using poppler 0.14, however
>>> now GDAL gives an error when linking with it (something about a member
>>> that does not exist).
>> Error at compile time about fillGooString() missing, with a very 
>> recent trunk ?
>> If so, I've just fixed it when testing compilation on CentOS 6 that 
>> ships with
>> poppler 0.12.4.
>
> Exactly.
>
>>> So I turned again to 0.16 and managed to compile
>>> everything. But now Matlab just crash when I read a pdf (repeat, before
>>> it used to work).
>> Hum I guess you run into cross-heap issues related to different 
>> versions of the
>> MSVC Runtime...
>
> Perhaps but I am very careful in maintaining separate directories with 
> libs compiled with a certain compiler (I swap between VS2010 and Intel 
> 32, 64) and than always link with the libs created with the same 
> compiler. That's why I want to be able to compile all dependencies 
> that I use to build GDAL.
>
>>> Next I tried the podofo (funny name) library. Everything compiles fine
>>> but a PDF driver does not exit when print the available drivers (and
>>> obviously, reading pdf does not work).
>>> I also noted that grepping "PODOFO_ENABLED" for the entire GDAL 
>>> tree, it
>>> only shows up once, in nmake.opt.
>> Yes, there was something missing in frmts/makefile.vc. I think I've 
>> just fixed
>> it (untested though)
>>
>> So 'svn update' and retry
>
> Thanks, I'll try it later today.
>
> Joaquim
>
>
>>> Ah, it's a Windows build that I'm talking about.
>>>
>>> Joaquim Luis
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

From jmckenna at gatewaygeomatics.com  Tue Jul 12 09:57:33 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jul 12 20:44:11 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1RC2 Prepared
In-Reply-To: <CA+YzLBdjUi+1Z8G6jevyhm0Qy+D619wKet00etbBexQVosg5fg@mail.gmail.com>
References: <CA+YzLBdjUi+1Z8G6jevyhm0Qy+D619wKet00etbBexQVosg5fg@mail.gmail.com>
Message-ID: <4E1C52CD.9040100@gatewaygeomatics.com>

No issues here on Windows.

Any chance that the 1.8.1 release can happen today?

(my selfish request, as I am packaging a MapServer release today also)

-jeff



On 11-07-09 1:37 PM, Frank Warmerdam wrote:
> Folks,
>
> Somewhat belatedly I have prepared 1.8.1RC2 at:
>
>    http://download.osgeo.org/gdal/gdal-1.8.1RC2.tar.gz
>    http://download.osgeo.org/gdal/gdal181RC2.zip
>
> Please test and report issues.  I will raise a motion to approve
> it shortly after I have done some minimal testing.
>
From dmorissette at mapgears.com  Tue Jul 12 09:58:28 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Jul 12 20:45:05 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1RC2 Prepared
In-Reply-To: <CA+YzLBdjUi+1Z8G6jevyhm0Qy+D619wKet00etbBexQVosg5fg@mail.gmail.com>
References: <CA+YzLBdjUi+1Z8G6jevyhm0Qy+D619wKet00etbBexQVosg5fg@mail.gmail.com>
Message-ID: <4E1C5304.90403@mapgears.com>

On 11-07-09 12:37 PM, Frank Warmerdam wrote:
> Folks,
>
> Somewhat belatedly I have prepared 1.8.1RC2 at:
>
>    http://download.osgeo.org/gdal/gdal-1.8.1RC2.tar.gz
>    http://download.osgeo.org/gdal/gdal181RC2.zip
>
> Please test and report issues.  I will raise a motion to approve
> it shortly after I have done some minimal testing.
>

All looks good to me with FGS/MapServer.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From RSyaoxin at hotmail.com  Tue Jul 12 10:18:55 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Tue Jul 12 21:06:41 2011
Subject: [gdal-dev] GDALComputeRasterMinMax Error
Message-ID: <1310480335510-6575247.post@n2.nabble.com>

Hi,all
       I have a 32-float image with much "NoDatavalue",and I want to get the
minimum value and maximum value.Here is my code:

       int         bGotMin, bGotMax;
       double      adfMinMax[2];
	
       double nodata=poBand->GetNoDataValue();
       poBand->SetNoDataValue(nodata);
       adfMinMax[0] = poBand->GetMinimum( &bGotMin );
       adfMinMax[1] = poBand->GetMaximum( &bGotMax );
       if( ! (bGotMin && bGotMax) )
          GDALComputeRasterMinMax(poBand, FALSE, adfMinMax);

      The maximum value(34.3386) I obtained that is right,but the minimum
value is -1.#INF,not -61.990734.  -61.990734 is what I want results. That's
Why?I hope to get some help.
Thank you! 
Kind regards. 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDALComputeRasterMinMax-Error-tp6575247p6575247.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Jul 12 10:54:58 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 12 21:44:49 2011
Subject: [gdal-dev] GDALComputeRasterMinMax Error
In-Reply-To: <1310480335510-6575247.post@n2.nabble.com>
References: <1310480335510-6575247.post@n2.nabble.com>
Message-ID: <CAMKgpOYJYVwRi=eyuzOkaMJaRj3QUWzBb=fRU-Tfh5FwF3Ay+g@mail.gmail.com>

RSyaoxin,

Check if poBand->GetNoDataValue() is actually returning a nodata value. If
your raster has an out of range nodata value, there is going to be a
problem. poBand->SetNoDataValue(nodata) will unset the nodata value if the
nodata variable is out of range.

On Tue, Jul 12, 2011 at 7:48 PM, RSyaoxin <RSyaoxin@hotmail.com> wrote:

> Hi,all
>       I have a 32-float image with much "NoDatavalue",and I want to get the
> minimum value and maximum value.Here is my code:
>
>       int         bGotMin, bGotMax;
>       double      adfMinMax[2];
>
>       double nodata=poBand->GetNoDataValue();
>       poBand->SetNoDataValue(nodata);
>       adfMinMax[0] = poBand->GetMinimum( &bGotMin );
>       adfMinMax[1] = poBand->GetMaximum( &bGotMax );
>       if( ! (bGotMin && bGotMax) )
>          GDALComputeRasterMinMax(poBand, FALSE, adfMinMax);
>
>      The maximum value(34.3386) I obtained that is right,but the minimum
> value is -1.#INF,not -61.990734.  -61.990734 is what I want results. That's
> Why?I hope to get some help.
> Thank you!
> Kind regards.
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDALComputeRasterMinMax-Error-tp6575247p6575247.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/935ec151/attachment.html
From warmerdam at pobox.com  Tue Jul 12 11:05:58 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jul 12 21:56:20 2011
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.8.1RC2 for release
Message-ID: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>

Motion: GDAL/OGR 1.8.1RC2 is approved as the official 1.8.1
release.

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mariusjigmond at hotmail.com  Tue Jul 12 11:56:21 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Tue Jul 12 22:50:28 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <CAOgDAsUUjqcnbE+LZS2mKRni_79oHOH4FVF7dJ7Y0NX1RUe_TA@mail.gmail.com>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>,
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>,
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>,
	<CAOgDAsXR5ORizfRaZy0r+AuECfnNuZqTywo6HgYUuYa36Xv3HQ@mail.gmail.com>,
	<SNT112-W54DB3C879E0042E35DC674B2440@phx.gbl>,
	<CAOgDAsUUjqcnbE+LZS2mKRni_79oHOH4FVF7dJ7Y0NX1RUe_TA@mail.gmail.com>
Message-ID: <SNT112-W55F8FD8442374A620F208CB2440@phx.gbl>


Strangely enough, ExecuteSQL works (it returns an osgeo.ogr.layer object with one feature) with



'select FID from judeteEPSG3844 where DENJUD = "CLUJ"'



but later a GetField('FID') request returns "Illegal field requested in GetField()"



-marius



Date: Tue, 12 Jul 2011 11:36:42 -0400
Subject: Re: [gdal-dev] OGR Geometry methods
From: luke.peterson@gmail.com
To: mariusjigmond@hotmail.com

does executing
sql = 'select FID from judeteEPSG3844 where DENJUD = "CLUJ"'
return anything?-----
Luke Peterson
312-533-1051(m)



On Tue, Jul 12, 2011 at 11:30 AM, Marius Jigmond <mariusjigmond@hotmail.com> wrote:






Luke,



GetFIDColumn returns an empty string (not supported according to the docs). I tried the following SQL statement:

sql = 'select DENJUD from judeteEPSG3844 where DENJUD = "CLUJ"'

but it's still returning that same wrong feature.



-marius



Date: Tue, 12 Jul 2011 09:13:00 -0400
Subject: Re: [gdal-dev] OGR Geometry methods
From: luke.peterson@gmail.com

To: mariusjigmond@hotmail.com



-----

Luke Peterson

- sent via mobile device -

On Jul 11, 2011 11:00 PM, "Marius Jigmond" <mariusjigmond@hotmail.com> wrote:

>

> After some more investigation that is likely NOT the issue. I have an ExecuteSQL statement which selects a certain polygon based on an attribute value. Unfortunately it seems to return the wrong feature. The feature I query for is unique so a duplicate is out of the question. Here's the code:



>

> #!/usr/bin/python

>

> from osgeo import ogr

> import sys, math, time, os

>

> aquifer = '/data/romania/judeteEPSG3844.shp'

> aqDS = ogr.Open(aquifer)

> sql = 'select * from judeteEPSG3844 where DENJUD = "CLUJ"'

> aqLayer = aqDS.ExecuteSQL(sql)

> feat = aqLayer.GetFeature(0)

> print aqLayer.GetFeatureCount()

> print feat.GetField('DENJUD')

> aqDS.ReleaseResultSet(aqLayer)

>

> The result:

> marius@mobi:~/temp$ run_sql.py 

> 1

> TELEORMAN

> marius@mobi:~/temp$ 

>

> This explains why none of my centroids were remotely close to the polygon.

>

> Is there something wrong with my query or should I file a bug?

>

Can you select the feature by its FID instead? (apologies, I'm banging this out on my phone ... probably won't run but you should get the idea):

aqLayer = aqDS.GetLayerByIndex(0) #gets the whole shapefile

aqFID = aqLayer.GetFIDColumn() # I forget the method name here... hope this is right but may have to pull in the layer def

sql = 'select %s from judeteEPSG3844 where DENJUD = "CLUJ"' % aqFID # specifically asking for just the FID field in the resultset

sqlResults = aqDS.ExecuteSQL(sql) # sql results same as before

featFID = sqlResults.GetFeature(0).GetFieldAsInt(aqFID) #this should be the actual FID of the results (problems would occur if your sql returned more than one hit)

feat = aqLayer.GetFeature(featFID) # using the fid to grab the feature from the 0th layer in the shapefile

This may be a long way around ... 


> -marius

>

>

> On Mon, 2011-07-11 at 20:46 -0500, Marius Jigmond wrote:

>>

>> I suppose a piece of code speaks louder :):

>>

>> xsect = False

>> for i in range(gridLayer.GetFeatureCount()):

>>   feat = gridLayer.GetFeature(i)

>>   geom = feat.GetGeometryRef()

>>   point = geom.Centroid()

>>   for j in range(aqLayer.GetFeatureCount()):

>>     aqfeat = aqLayer.GetFeature(j)

>>     aqgeom = aqfeat.GetGeometryRef()

>>     if point.Intersect(aqgeom):

>>       xsect = True

>>       print 'ibound = 1'

>>       break

>>   if xsect:

>>     feat.SetField('IBOUND', 1)

>>     gridLayer.SetFeature(feat)

>>     xsect = False

>>

>> -marius

>>

>> On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:

>>>

>>> Hi everyone,

>>>

>>> I am trying to test whether centroids of polygons lie/intersect within another polygon. I have tried Intersect, Within, and Contains but they always return false. Should these methods work for my intended purpose or do I need to implement a point in polygon function? Thanks.



>>>

>>> -marius

>>>

>>> _______________________________________________

>>> gdal-dev mailing list

>>> gdal-dev@lists.osgeo.org

>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

>>

>> _______________________________________________

>> gdal-dev mailing list

>> gdal-dev@lists.osgeo.org

>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

>

>

> _______________________________________________

> gdal-dev mailing list

> gdal-dev@lists.osgeo.org

> http://lists.osgeo.org/mailman/listinfo/gdal-dev


 		 	   		  

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/b70a9f21/attachment.html
From mettbest at gmail.com  Tue Jul 12 12:07:25 2011
From: mettbest at gmail.com (mett)
Date: Tue Jul 12 23:01:07 2011
Subject: [gdal-dev] [gdal-1.8.0] Get new Coordinates from Geotiff avoiding
	black area
Message-ID: <1310486845602-6575681.post@n2.nabble.com>

Hello Everybody!
Does somebody know if there is a smart way to get the coordinates of a
GeoTiff of the real data (avoinding the black background)? I mean, I have
the geocoordinates of the image, but they are not referred to the "Real"
data of the image but just to its corners. I know that I can use gdalwarp to
set trasparency of black area, but I think it is not suitable to re-set the
coordinates.

Thank you for any help!
Mett

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6575681.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dmorissette at mapgears.com  Tue Jul 12 12:28:38 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Jul 12 23:23:19 2011
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.8.1RC2 for release
In-Reply-To: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
References: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
Message-ID: <4E1C7636.80504@mapgears.com>

On 11-07-12 11:05 AM, Frank Warmerdam wrote:
> Motion: GDAL/OGR 1.8.1RC2 is approved as the official 1.8.1
> release.
>

+1 Daniel

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From luke.peterson at gmail.com  Tue Jul 12 12:31:03 2011
From: luke.peterson at gmail.com (Luke Peterson)
Date: Tue Jul 12 23:25:52 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <SNT112-W55F8FD8442374A620F208CB2440@phx.gbl>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>
	<CAOgDAsXR5ORizfRaZy0r+AuECfnNuZqTywo6HgYUuYa36Xv3HQ@mail.gmail.com>
	<SNT112-W54DB3C879E0042E35DC674B2440@phx.gbl>
	<CAOgDAsUUjqcnbE+LZS2mKRni_79oHOH4FVF7dJ7Y0NX1RUe_TA@mail.gmail.com>
	<SNT112-W55F8FD8442374A620F208CB2440@phx.gbl>
Message-ID: <CAOgDAsVBmSS7wH2upWfWBj989nJdu0jJb0C=x9fqx57BM-dDFQ@mail.gmail.com>

On Tue, Jul 12, 2011 at 11:56 AM, Marius Jigmond
<mariusjigmond@hotmail.com>wrote:

>  Strangely enough, ExecuteSQL works (it returns an osgeo.ogr.layer object
> with one feature) with
>
>
> 'select FID from judeteEPSG3844 where DENJUD = "CLUJ"'
>
> but later a GetField('FID') request returns "Illegal field requested in
> GetField()"
>

> -marius
>
>
Another way to do this is to use the AttributeFilter. Run this by itself and
see if you get the expected result:

from osgeo import ogr
fileName = '/data/romania/judeteEPSG3844.shp'
shapeDS = ogr.Open(fileName)
shapeLayer = shapeDS.GetLayerByIndex(0)
shapeLayer.SetAttributeFilter('DENJUD="CLUJ"')
targetFeature = shapeLayer.GetNextFeature()
print targetFeature.GetField('DENJUD') # should print the DENJUD of the
feature fitting the attribute filter.


> Date: Tue, 12 Jul 2011 09:13:00 -0400
> Subject: Re: [gdal-dev] OGR Geometry methods
> From: luke.peterson@gmail.com
> To: mariusjigmond@hotmail.com
>
>
>
> -----
> Luke Peterson
> - sent via mobile device -
> On Jul 11, 2011 11:00 PM, "Marius Jigmond" <mariusjigmond@hotmail.com>
> wrote:
> >
> > After some more investigation that is likely NOT the issue. I have an
> ExecuteSQL statement which selects a certain polygon based on an attribute
> value. Unfortunately it seems to return the wrong feature. The feature I
> query for is unique so a duplicate is out of the question. Here's the code:
> >
> > #!/usr/bin/python
> >
> > from osgeo import ogr
> > import sys, math, time, os
> >
> > aquifer = '/data/romania/judeteEPSG3844.shp'
> > aqDS = ogr.Open(aquifer)
> > sql = 'select * from judeteEPSG3844 where DENJUD = "CLUJ"'
> > aqLayer = aqDS.ExecuteSQL(sql)
> > feat = aqLayer.GetFeature(0)
> > print aqLayer.GetFeatureCount()
> > print feat.GetField('DENJUD')
> > aqDS.ReleaseResultSet(aqLayer)
> >
> > The result:
> > marius@mobi:~/temp$ run_sql.py
> > 1
> > TELEORMAN
> > marius@mobi:~/temp$
> >
> > This explains why none of my centroids were remotely close to the
> polygon.
> >
> > Is there something wrong with my query or should I file a bug?
> >
> Can you select the feature by its FID instead? (apologies, I'm banging this
> out on my phone ... probably won't run but you should get the idea):
> aqLayer = aqDS.GetLayerByIndex(0) #gets the whole shapefile
> aqFID = aqLayer.GetFIDColumn() # I forget the method name here... hope this
> is right but may have to pull in the layer def
> sql = 'select %s from judeteEPSG3844 where DENJUD = "CLUJ"' % aqFID #
> specifically asking for just the FID field in the resultset
> sqlResults = aqDS.ExecuteSQL(sql) # sql results same as before
> featFID = sqlResults.GetFeature(0).GetFieldAsInt(aqFID) #this should be the
> actual FID of the results (problems would occur if your sql returned more
> than one hit)
> feat = aqLayer.GetFeature(featFID) # using the fid to grab the feature from
> the 0th layer in the shapefile
> This may be a long way around ...
>
> > -marius
> >
> >
> > On Mon, 2011-07-11 at 20:46 -0500, Marius Jigmond wrote:
> >>
> >> I suppose a piece of code speaks louder :):
> >>
> >> xsect = False
> >> for i in range(gridLayer.GetFeatureCount()):
> >>   feat = gridLayer.GetFeature(i)
> >>   geom = feat.GetGeometryRef()
> >>   point = geom.Centroid()
> >>   for j in range(aqLayer.GetFeatureCount()):
> >>     aqfeat = aqLayer.GetFeature(j)
> >>     aqgeom = aqfeat.GetGeometryRef()
> >>     if point.Intersect(aqgeom):
> >>       xsect = True
> >>       print 'ibound = 1'
> >>       break
> >>   if xsect:
> >>     feat.SetField('IBOUND', 1)
> >>     gridLayer.SetFeature(feat)
> >>     xsect = False
> >>
> >> -marius
> >>
> >> On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:
> >>>
> >>> Hi everyone,
> >>>
> >>> I am trying to test whether centroids of polygons lie/intersect within
> another polygon. I have tried Intersect, Within, and Contains but they
> always return false. Should these methods work for my intended purpose or do
> I need to implement a point in polygon function? Thanks.
> >>>
> >>> -marius
> >>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/db788cb8/attachment-0001.html
From mariusjigmond at hotmail.com  Tue Jul 12 12:45:13 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Tue Jul 12 23:40:51 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <CAOgDAsVBmSS7wH2upWfWBj989nJdu0jJb0C=x9fqx57BM-dDFQ@mail.gmail.com>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>,
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>,
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>,
	<CAOgDAsXR5ORizfRaZy0r+AuECfnNuZqTywo6HgYUuYa36Xv3HQ@mail.gmail.com>,
	<SNT112-W54DB3C879E0042E35DC674B2440@phx.gbl>,
	<CAOgDAsUUjqcnbE+LZS2mKRni_79oHOH4FVF7dJ7Y0NX1RUe_TA@mail.gmail.com>,
	<SNT112-W55F8FD8442374A620F208CB2440@phx.gbl>,
	<CAOgDAsVBmSS7wH2upWfWBj989nJdu0jJb0C=x9fqx57BM-dDFQ@mail.gmail.com>
Message-ID: <SNT112-W518BF060BCBC130AB31B2AB2440@phx.gbl>


Indeed, SetAttributeFilter returns the right feature. Thanks Luke.



FYI the ExecuteSQL bug submission is http://trac.osgeo.org/gdal/ticket/4156



-marius



Date: Tue, 12 Jul 2011 12:31:03 -0400
Subject: Re: [gdal-dev] OGR Geometry methods
From: luke.peterson@gmail.com
To: mariusjigmond@hotmail.com
CC: gdal-dev@lists.osgeo.org

On Tue, Jul 12, 2011 at 11:56 AM, Marius Jigmond <mariusjigmond@hotmail.com> wrote:





Strangely enough, ExecuteSQL works (it returns an osgeo.ogr.layer object with one feature) with



'select FID from judeteEPSG3844 where DENJUD = "CLUJ"'



but later a GetField('FID') request returns "Illegal field requested in GetField()"



-marius



Another way to do this is to use the AttributeFilter. Run this by itself and see if you get the expected result:

from osgeo import ogrfileName = '/data/romania/judeteEPSG3844.shp'shapeDS = ogr.Open(fileName)shapeLayer = shapeDS.GetLayerByIndex(0)shapeLayer.SetAttributeFilter('DENJUD="CLUJ"')
targetFeature = shapeLayer.GetNextFeature()print targetFeature.GetField('DENJUD') # should print the DENJUD of the feature fitting the attribute filter. 
Date: Tue, 12 Jul 2011 09:13:00 -0400
Subject: Re: [gdal-dev] OGR Geometry methods

From: luke.peterson@gmail.com

To: mariusjigmond@hotmail.com



-----

Luke Peterson

- sent via mobile device -

On Jul 11, 2011 11:00 PM, "Marius Jigmond" <mariusjigmond@hotmail.com> wrote:

>

> After some more investigation that is likely NOT the issue. I have an ExecuteSQL statement which selects a certain polygon based on an attribute value. Unfortunately it seems to return the wrong feature. The feature I query for is unique so a duplicate is out of the question. Here's the code:




>

> #!/usr/bin/python

>

> from osgeo import ogr

> import sys, math, time, os

>

> aquifer = '/data/romania/judeteEPSG3844.shp'

> aqDS = ogr.Open(aquifer)

> sql = 'select * from judeteEPSG3844 where DENJUD = "CLUJ"'

> aqLayer = aqDS.ExecuteSQL(sql)

> feat = aqLayer.GetFeature(0)

> print aqLayer.GetFeatureCount()

> print feat.GetField('DENJUD')

> aqDS.ReleaseResultSet(aqLayer)

>

> The result:

> marius@mobi:~/temp$ run_sql.py 

> 1

> TELEORMAN

> marius@mobi:~/temp$ 

>

> This explains why none of my centroids were remotely close to the polygon.

>

> Is there something wrong with my query or should I file a bug?

>

Can you select the feature by its FID instead? (apologies, I'm banging this out on my phone ... probably won't run but you should get the idea):

aqLayer = aqDS.GetLayerByIndex(0) #gets the whole shapefile

aqFID = aqLayer.GetFIDColumn() # I forget the method name here... hope this is right but may have to pull in the layer def

sql = 'select %s from judeteEPSG3844 where DENJUD = "CLUJ"' % aqFID # specifically asking for just the FID field in the resultset

sqlResults = aqDS.ExecuteSQL(sql) # sql results same as before

featFID = sqlResults.GetFeature(0).GetFieldAsInt(aqFID) #this should be the actual FID of the results (problems would occur if your sql returned more than one hit)

feat = aqLayer.GetFeature(featFID) # using the fid to grab the feature from the 0th layer in the shapefile

This may be a long way around ... 


> -marius

>

>

> On Mon, 2011-07-11 at 20:46 -0500, Marius Jigmond wrote:

>>

>> I suppose a piece of code speaks louder :):

>>

>> xsect = False

>> for i in range(gridLayer.GetFeatureCount()):

>>   feat = gridLayer.GetFeature(i)

>>   geom = feat.GetGeometryRef()

>>   point = geom.Centroid()

>>   for j in range(aqLayer.GetFeatureCount()):

>>     aqfeat = aqLayer.GetFeature(j)

>>     aqgeom = aqfeat.GetGeometryRef()

>>     if point.Intersect(aqgeom):

>>       xsect = True

>>       print 'ibound = 1'

>>       break

>>   if xsect:

>>     feat.SetField('IBOUND', 1)

>>     gridLayer.SetFeature(feat)

>>     xsect = False

>>

>> -marius

>>

>> On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:

>>>

>>> Hi everyone,

>>>

>>> I am trying to test whether centroids of polygons lie/intersect within another polygon. I have tried Intersect, Within, and Contains but they always return false. Should these methods work for my intended purpose or do I need to implement a point in polygon function? Thanks.




>>>

>>> -marius

>>>

>>> _______________________________________________

>>> gdal-dev mailing list

>>> gdal-dev@lists.osgeo.org

>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

>>

>> _______________________________________________

>> gdal-dev mailing list

>> gdal-dev@lists.osgeo.org

>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

>

>

> _______________________________________________

> gdal-dev mailing list

> gdal-dev@lists.osgeo.org

> http://lists.osgeo.org/mailman/listinfo/gdal-dev


 		 	   		  

 		 	   		  

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/eb9eb126/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 12 13:18:55 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul 13 00:16:22 2011
Subject: [gdal-dev] [gdal-1.8.0] Get new Coordinates from Geotiff avoiding
	black area
In-Reply-To: <1310486845602-6575681.post@n2.nabble.com>
References: <1310486845602-6575681.post@n2.nabble.com>
Message-ID: <CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>

Mett,

If I understand correctly, you need to remove the black borders of geotiff
and reset the corner coordinates. GDAL's nearblack utility[1] might be of
help to you.

[1]: http://www.gdal.org/nearblack.html

On Tue, Jul 12, 2011 at 9:37 PM, mett <mettbest@gmail.com> wrote:

> Hello Everybody!
> Does somebody know if there is a smart way to get the coordinates of a
> GeoTiff of the real data (avoinding the black background)? I mean, I have
> the geocoordinates of the image, but they are not referred to the "Real"
> data of the image but just to its corners. I know that I can use gdalwarp
> to
> set trasparency of black area, but I think it is not suitable to re-set the
> coordinates.
>
> Thank you for any help!
> Mett
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6575681.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/82390ca8/attachment.html
From motta.luiz at gmail.com  Tue Jul 12 13:53:15 2011
From: motta.luiz at gmail.com (Luiz Motta)
Date: Wed Jul 13 00:52:35 2011
Subject: [gdal-dev] [gdal-1.8.0] Get new Coordinates from Geotiff avoiding
	black area
In-Reply-To: <CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>
References: <1310486845602-6575681.post@n2.nabble.com>
	<CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>
Message-ID: <CAC93zU1vdi7p68=dJDuSk2jN3CWNgtFFaVW9L54VzYNiP2E25A@mail.gmail.com>

Met,

I made a QGIS's plugin where calculate the 4 corners of polygon with
the real pixels inside. Maybe is useful for you.
The name of plugin is "Image Boundary", The source is Python and use
only GDAL library for process.

Best regards,
Luiz Motta

2011/7/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> Mett,
>
> If I understand correctly, you need to remove the black borders of geotiff
> and reset the corner coordinates. GDAL's nearblack utility[1] might be of
> help to you.
>
> [1]: http://www.gdal.org/nearblack.html
>
> On Tue, Jul 12, 2011 at 9:37 PM, mett <mettbest@gmail.com> wrote:
>>
>> Hello Everybody!
>> Does somebody know if there is a smart way to get the coordinates of a
>> GeoTiff of the real data (avoinding the black background)? I mean, I have
>> the geocoordinates of the image, but they are not referred to the "Real"
>> data of the image but just to its corners. I know that I can use gdalwarp
>> to
>> set trasparency of black area, but I think it is not suitable to re-set
>> the
>> coordinates.
>>
>> Thank you for any help!
>> Mett
>>
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6575681.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From szekerest at gmail.com  Tue Jul 12 14:24:03 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jul 13 01:25:06 2011
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.8.1RC2 for release
In-Reply-To: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
References: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
Message-ID: <CACALY+QoNxeK34SViUbj7NurQqsqoGa14s=-ExG=BEkJS6VBFQ@mail.gmail.com>

+1

Tamas



2011/7/12 Frank Warmerdam <warmerdam@pobox.com>

> Motion: GDAL/OGR 1.8.1RC2 is approved as the official 1.8.1
> release.
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Software Developer
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/3d55e94e/attachment.html
From isaac.gerg at gergltd.com  Tue Jul 12 14:27:44 2011
From: isaac.gerg at gergltd.com (Isaac Gerg)
Date: Wed Jul 13 01:29:24 2011
Subject: [gdal-dev] Improving the Documentation of Get/SetGeoTransform
Message-ID: <CADnN3yXEogXzN=nv7s3j21Kig=+kJfBo_ZNug1CBNpr25aYzZQ@mail.gmail.com>

Hi all,

I've spent some time today working with the SetGeoTransform function today
and want to mention that the documentation doesn't seem quite clear and
maybe even a bit misleading.

In here,
http://www.gdal.org/classGDALDataset.html#f9593cc241e7d140f5f3c4798a43a668,
the transform is mentioned as a 6 element matrix (2x3) and explains the
elements as follows:

*"In a north up image, padfTransform[1] is the pixel width, and
padfTransform[5] is the pixel height. The upper left corner of the upper
left pixel is at position (padfTransform[0],padfTransform[3])."*
*
*
Additionally, in the tutorial,http://www.gdal.org/gdal_tutorial.html, it
says:


    adfGeoTransform[0] /* top left x */
    adfGeoTransform[1] /* w-e pixel resolution */
    adfGeoTransform[2] /* rotation, 0 if image is "north up" */
    adfGeoTransform[3] /* top left y */
    adfGeoTransform[4] /* rotation, 0 if image is "north up" */
    adfGeoTransform[5] /* n-s pixel resolution */

*
*
I believe these comments are not quite true and a little misleading.  Here
is a common example of using SetGeoTransform where the above statement
breaks down.

Suppose you have an imager that collects an image of the surface of the
earth over a small, local area say 50m by 50m.  For ease, let each pixel
represents a 10cm by 10cm box.  Now, say you have the image data in raster
format and want to output a geotiff.  You will have to make a geo transform
that maps from pixel space (in meters) to lat/lon space.  Additionally, your
raster image is rotated by 10 degrees (denoted as alpha and in radians) East
due to the imaging collection parameters.  The matrix you want is something
like the following:

padfTransform[0] = corner lon
padfTransform[1] = cos(alpha)*(scaling)
padfTransform[2] = -sin(alpha)*(scaling)
padfTransform[3] = corner lat
padfTransform[4] = sin(alpha)*(scaling)
padfTransform[5] = cos(alpha)*(scaling)

where scaling maps pixel space to lat/lon space (see
http://en.wikipedia.org/wiki/Geographical_distance#Spherical_Earth_projected_to_a_plane
on
how to compute the scaling factor)

See http://en.wikipedia.org/wiki/Transformation_matrix#Rotation for more
details on my matrix coefs.

I think the documentation would be more clear if it included this
description -- that matrix represents a combination of scaling, rotation,
and transnational components of which most of the them are combined in the
terms, not isolated as the documentation has the reader to believe.

Anyways, I'm not griping, just trying to help.  GDAL's been very useful to
my group and the community has been very responsive.  Thank you for this.

Isaac
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110712/14b86154/attachment-0001.html
From rush at winkey.org  Tue Jul 12 15:08:54 2011
From: rush at winkey.org (Brian Case)
Date: Wed Jul 13 02:12:33 2011
Subject: [gdal-dev] [gdal-1.8.0] Get new Coordinates from Geotiff
	avoiding black area
In-Reply-To: <CAC93zU1vdi7p68=dJDuSk2jN3CWNgtFFaVW9L54VzYNiP2E25A@mail.gmail.com>
References: <1310486845602-6575681.post@n2.nabble.com>
	<CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>
	<CAC93zU1vdi7p68=dJDuSk2jN3CWNgtFFaVW9L54VzYNiP2E25A@mail.gmail.com>
Message-ID: <1310497734.22520.13.camel@octopi>

Luiz,

do you have a url handy for the source code of that plugin?

Brian

On Tue, 2011-07-12 at 14:53 -0300, Luiz Motta wrote:
> Met,
> 
> I made a QGIS's plugin where calculate the 4 corners of polygon with
> the real pixels inside. Maybe is useful for you.
> The name of plugin is "Image Boundary", The source is Python and use
> only GDAL library for process.
> 
> Best regards,
> Luiz Motta
> 
> 2011/7/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> > Mett,
> >
> > If I understand correctly, you need to remove the black borders of geotiff
> > and reset the corner coordinates. GDAL's nearblack utility[1] might be of
> > help to you.
> >
> > [1]: http://www.gdal.org/nearblack.html
> >
> > On Tue, Jul 12, 2011 at 9:37 PM, mett <mettbest@gmail.com> wrote:
> >>
> >> Hello Everybody!
> >> Does somebody know if there is a smart way to get the coordinates of a
> >> GeoTiff of the real data (avoinding the black background)? I mean, I have
> >> the geocoordinates of the image, but they are not referred to the "Real"
> >> data of the image but just to its corners. I know that I can use gdalwarp
> >> to
> >> set trasparency of black area, but I think it is not suitable to re-set
> >> the
> >> coordinates.
> >>
> >> Thank you for any help!
> >> Mett
> >>
> >> --
> >> View this message in context:
> >> http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6575681.html
> >> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From motta.luiz at gmail.com  Tue Jul 12 16:14:20 2011
From: motta.luiz at gmail.com (Luiz Motta)
Date: Wed Jul 13 03:21:44 2011
Subject: [gdal-dev] [gdal-1.8.0] Get new Coordinates from Geotiff avoiding
	black area
In-Reply-To: <1310497734.22520.13.camel@octopi>
References: <1310486845602-6575681.post@n2.nabble.com>
	<CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>
	<CAC93zU1vdi7p68=dJDuSk2jN3CWNgtFFaVW9L54VzYNiP2E25A@mail.gmail.com>
	<1310497734.22520.13.camel@octopi>
Message-ID: <CAC93zU2=UwDbiyyhYW5h2eoJixnjh0V857g4t+usGZCiJfT3HQ@mail.gmail.com>

Sorry Folk,

I forgot the source of code.

I have two type of version(python source), one for QGIS and other for terminal.

1) QGIS/Plugin: http://spatialserver.net/pyqgis_1.0/contributed/imgboundary.zip
2) Teminal: http://dl.dropbox.com/u/14847115/imgtruecorner_py.zip


Thank Brian for remember the source.


Regards,
Luiz Motta


2011/7/12 Brian Case <rush@winkey.org>:
> Luiz,
>
> do you have a url handy for the source code of that plugin?
>
> Brian
>
> On Tue, 2011-07-12 at 14:53 -0300, Luiz Motta wrote:
>> Met,
>>
>> I made a QGIS's plugin where calculate the 4 corners of polygon with
>> the real pixels inside. Maybe is useful for you.
>> The name of plugin is "Image Boundary", The source is Python and use
>> only GDAL library for process.
>>
>> Best regards,
>> Luiz Motta
>>
>> 2011/7/12 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
>> > Mett,
>> >
>> > If I understand correctly, you need to remove the black borders of geotiff
>> > and reset the corner coordinates. GDAL's nearblack utility[1] might be of
>> > help to you.
>> >
>> > [1]: http://www.gdal.org/nearblack.html
>> >
>> > On Tue, Jul 12, 2011 at 9:37 PM, mett <mettbest@gmail.com> wrote:
>> >>
>> >> Hello Everybody!
>> >> Does somebody know if there is a smart way to get the coordinates of a
>> >> GeoTiff of the real data (avoinding the black background)? I mean, I have
>> >> the geocoordinates of the image, but they are not referred to the "Real"
>> >> data of the image but just to its corners. I know that I can use gdalwarp
>> >> to
>> >> set trasparency of black area, but I think it is not suitable to re-set
>> >> the
>> >> coordinates.
>> >>
>> >> Thank you for any help!
>> >> Mett
>> >>
>> >> --
>> >> View this message in context:
>> >> http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6575681.html
>> >> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>> > --
>> > Best regards,
>> > Chaitanya kumar CH.
>> >
>> > +91-9494447584
>> > 17.2416N 80.1426E
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From 421059144 at qq.com  Tue Jul 12 22:11:15 2011
From: 421059144 at qq.com (lengwei2008)
Date: Wed Jul 13 09:38:49 2011
Subject: [gdal-dev] problems with creating polygon
Message-ID: <1310523075518-6577482.post@n2.nabble.com>

Hi, 
I am a newer to OGR and I want to create a polygon feature, however it
failed. The code are pasted below 
    
code: 

 const char *pszDriverName = "ESRI Shapefile"; 
    OGRSFDriver *poDriver; 
        
    OGRRegisterAll(); 
        
    poDriver =
OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(pszDriverName ); 
    if( poDriver == NULL ) 
    { 
        printf( "%s driver not available.\n", pszDriverName ); 
        exit( 1 ); 
    } 
        
    OGRDataSource *poDS; 
        
    poDS = poDriver->CreateDataSource( "Polygon.shp", NULL ); 
    if( poDS == NULL ) 
    { 
        printf( "Creation of output file failed.\n" ); 
        exit( 1 ); 
    } 
        
    OGRLayer *poLayer; 
        
    poLayer = poDS->CreateLayer( "polygon", NULL, wkbPoint, NULL ); 
    if( poLayer == NULL ) 
    { 
        printf( "Layer creation failed.\n" ); 
        exit( 1 ); 
    } 
        
    OGRFieldDefn oField( "Name", OFTString ); 
        
    oField.SetWidth(32); 
        
    if( poLayer->CreateField( &oField ) != OGRERR_NONE ) 
    { 
        printf( "Creating Name field failed.\n" ); 
        exit( 1 ); 
    } 
        
    double x, y; 
    char szName[33] = {"shishi"}; 
        x = 100; y = 100; 
        
        OGRFeature *poFeature; 
        
        poFeature = OGRFeature::CreateFeature( poLayer->GetLayerDefn() ); 
        poFeature->SetField( "Name", szName ); 
        
        OGRPolygon myPoligon; 
        OGRLinearRing MyRing; 

        MyRing.addPoint(x,y); 
        MyRing.addPoint(100,50); 
        MyRing.addPoint(50,50); 
        MyRing.addPoint(50,100); 
                
        myPoligon.addRing(&MyRing); 
        
        poFeature->SetGeometry( &myPoligon ); 
        
        if( poLayer->CreateFeature( poFeature ) != OGRERR_NONE ) 
        { 
                printf( "Failed to create feature in shapefile.\n" ); 
                exit( 1 ); 
        } 
        
        OGRFeature::DestroyFeature( poFeature ); 
    OGRDataSource::DestroyDataSource( poDS ); 

I set a breakpoint at poLayer->CreateFeature( poFeature ). It shows that the
creation failed. But I don't know why. Many thanks!!

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/problems-with-creating-polygon-tp6577482p6577482.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From 421059144 at qq.com  Tue Jul 12 22:19:31 2011
From: 421059144 at qq.com (lengwei2008)
Date: Wed Jul 13 09:47:41 2011
Subject: [gdal-dev] Re: problems with creating polygon
In-Reply-To: <1310522753798-6577474.post@n2.nabble.com>
References: <1310522753798-6577474.post@n2.nabble.com>
Message-ID: <1310523571934-6577498.post@n2.nabble.com>

I'm so sorry, I think I figure the problem out now
    poLayer = poDS->CreateLayer( "polygon", NULL, wkbPoint, NULL );
shall be changed to 
    poLayer = poDS->CreateLayer( "polygon", NULL, wkbPolygon, NULL );


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/problems-with-creating-polygon-tp6577474p6577498.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From 421059144 at qq.com  Tue Jul 12 22:20:04 2011
From: 421059144 at qq.com (lengwei2008)
Date: Wed Jul 13 09:48:16 2011
Subject: [gdal-dev] Re: problems with creating polygon
In-Reply-To: <1310523075518-6577482.post@n2.nabble.com>
References: <1310523075518-6577482.post@n2.nabble.com>
Message-ID: <1310523604635-6577499.post@n2.nabble.com>

I'm so sorry, I think I figure the problem out now
    poLayer = poDS->CreateLayer( "polygon", NULL, wkbPoint, NULL );
shall be changed to 
    poLayer = poDS->CreateLayer( "polygon", NULL, wkbPolygon, NULL );

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/problems-with-creating-polygon-tp6577482p6577499.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Robert.Langford at salford.gov.uk  Wed Jul 13 07:54:15 2011
From: Robert.Langford at salford.gov.uk (Langford, Robert)
Date: Wed Jul 13 20:23:24 2011
Subject: [gdal-dev] ogr2ogr SQL Date Calculation
In-Reply-To: <CAKbwmJC0UK3+FAEL+_j_PT3pGOSZDRi1wmRBBeb6sdcwaZzKAg@mail.gmail.com>
References: <06023D9EFD334D4895B922C891C3767F19F8DD25CD@v-civiexms04.salford.gov.uk>
	<CAKbwmJC0UK3+FAEL+_j_PT3pGOSZDRi1wmRBBeb6sdcwaZzKAg@mail.gmail.com>
Message-ID: <06023D9EFD334D4895B922C891C3767F19F8DD25E1@v-civiexms04.salford.gov.uk>

Michael,

Thanks for that; got me going in the right direction.

I was still experiencing 2 main problems:

1) Command "DATE /T" returning date format as DD/MM/YYYY (SQL needs YYYY/MM/DD)

2) Still couldn't calculate one month ago in the SQL string (i.e. TODAY - 30 Days)

However I think I've cracked all in a Batch file.  I'll post it below in case anyone needs anything similar, I will state that this might not be the most elegant of scripts but it does appear to work!  If anyone has any better ideas please let me know.

:: Break down date and store as variables ::
FOR /f "tokens=1-3 delims=/ " %%a in ('date /t') do (SET day=%%a)
:: For Month variable minus 1 | for one month ago ::
FOR /f "tokens=1-3 delims=/ " %%a in ('date /t') do (SET /a lastmonth=%%b-1)
FOR /f "tokens=1-3 delims=/ " %%a in ('date /t') do (SET year=%%c)

:: If it's Jan (month = 01) last month will = 0 (ERROR)       ::
:: Therefore change month to December (12) & minus 1 for year ::
IF %lastmonth%==0 SET /a year=%year%-1
IF %lastmonth%==0 SET lastmonth=12

:: Check if month is one with less than 31 days ::
IF %lastmonth%==2 GOTO FEB
IF %lastmonth%==4 GOTO APR
IF %lastmonth%==6 GOTO JUN
IF %lastmonth%==9 GOTO SEP
IF %lastmonth%==11 GOTO NOV
GOTO CONT

:: Check if day is greater than number of days in that month ::
:: Change if required ::
:FEB
IF %day% GTR 28 SET day=28
GOTO CONT

:APR
IF %day% GTR 30 SET day=30
GOTO CONT

:JUN
IF %day% GTR 30 SET day=30
GOTO CONT

:SEP
IF %day% GTR 30 SET day=30
GOTO CONT

:NOV
IF %day% GTR 30 SET day=30
GOTO CONT

:CONT
:: If month < 10 (before Oct) leading zero required ::
IF 1%lastmonth% LSS 100 SET lastmonth=0%lastmonth%

:: Combine date variables to SQL format date ::
SET monthago=%year%/%lastmonth%/%day%

:: ogr2ogr command using combined date variable ::
ogr2ogr -f "MapInfo File" -a_srs "EPSG:27700" -sql "SELECT * FROM DCPOLY WHERE DATE_CREA1>='%monthago%'" D:\Data\Plan_Apps.tab D:\Data\DCPOLY.shp
Thanks again,

Rob

________________________________
From: Michael Shishcu [mailto:micklesh@gmail.com]
Sent: 11 July 2011 16:19
To: Langford, Robert
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] ogr2ogr SQL Date Calculation

Hi Robert,

there is a Date command for windows commandline
http://ss64.com/nt/date.html

hope this helps

regards,
michael

On Mon, Jul 11, 2011 at 6:11 PM, Langford, Robert <Robert.Langford@salford.gov.uk<mailto:Robert.Langford@salford.gov.uk>> wrote:
All,

I am trying to use ogr2ogr as a scheduled command line task to run weekly to convert a .SHP file to a .TAB file whilst filtering the data based on a date field.  I would like to only convert records that have a date from the last 30 days.

Therefore If the task ran today (11/07/2011) the below line would return the required data:

ogr2ogr -f "MapInfo File" -sql "select * from DCPOLY where DATE_CREA1>'2011/06/11'" D:\Data\Plan_Apps.tab D:\Data\DCPOLY.shp

Obviously if the task ran tomorrow the date would have to be changed to '2011/06/12'.  So I need the field SQL to be something like:

DATE_CREA1> Todays_Date - 30

Does anyone know of a way to automate this using something like; GetDate(), Now(), sysdate, Date /t, etc?  Any help would be greatly appreciated.

Many thanks,

Rob


Robert Langford
Systems Developer (GIS)
Corporate Applications Team
Salford City Council

Tel:      0161 793 2492
Email:  robert.langford@salford.gov.uk<mailto:robert.langford@salford.gov.uk>
Web:    www.salford.gov.uk<http://www.salford.gov.uk/>

Salford Civic Centre,
Chorley Road, Swinton, M27 5DA




DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee.

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act.
Please immediately contact the sender if you have received this message in error.

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev


DISCLAIMER: The information in this message is confidential and may be legally privileged. It is intended solely for the addressee.

Access to this message by anyone else is unauthorised. If you are not the intended recipient, any disclosure, copying, or distribution of the message, or any action or omission taken by you in reliance on it, is prohibited and may be unlawful.
As a public body, Salford City Council may be required to disclose this email [or any response to it] under the Freedom of Information Act 2000, unless the information in it is covered by one of the exemptions in the Act. 
Please immediately contact the sender if you have received this message in error. 

For the full disclaimer please access http://www.salford.gov.uk/e-mail.  Thank you.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110713/7952d6f7/attachment.html
From mettbest at gmail.com  Wed Jul 13 10:06:01 2011
From: mettbest at gmail.com (mett)
Date: Wed Jul 13 22:13:52 2011
Subject: [gdal-dev] Re: [gdal-1.8.0] Get new Coordinates from Geotiff
 avoiding black area
In-Reply-To: <CAC93zU2=UwDbiyyhYW5h2eoJixnjh0V857g4t+usGZCiJfT3HQ@mail.gmail.com>
References: <1310486845602-6575681.post@n2.nabble.com>
	<CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>
	<CAC93zU1vdi7p68=dJDuSk2jN3CWNgtFFaVW9L54VzYNiP2E25A@mail.gmail.com>
	<1310497734.22520.13.camel@octopi>
	<CAC93zU2=UwDbiyyhYW5h2eoJixnjh0V857g4t+usGZCiJfT3HQ@mail.gmail.com>
Message-ID: <1310565961219-6579103.post@n2.nabble.com>

Chaitanya,
I do not understand how can I use that tool to reset the coordinates. Could
you be more precise? Thanks!

Luiz,
thank you very much for your contribute, I need it for Java, I will try to
convert it.

Thank you again,
Mett   




luizmotta wrote:
> 
> Sorry Folk,
> 
> I forgot the source of code.
> 
> I have two type of version(python source), one for QGIS and other for
> terminal.
> 
> 1) QGIS/Plugin:
> http://spatialserver.net/pyqgis_1.0/contributed/imgboundary.zip
> 2) Teminal: http://dl.dropbox.com/u/14847115/imgtruecorner_py.zip
> 
> 
> Thank Brian for remember the source.
> 
> 
> Regards,
> Luiz Motta
> 


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6579103.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jzl5325 at psu.edu  Wed Jul 13 12:38:34 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Thu Jul 14 02:33:12 2011
Subject: [gdal-dev] Python WriteArray()
Message-ID: <CA+bfmPswKdeEqFW_Ftz1F7CeRv4Xp7GReDZ=4mQXYhjjkZ7KYw@mail.gmail.com>

I am working on processing some raster images and have been really
struggling with processing times.  I have tracked the issue down to GDAL's
WriteArray() function.  I am cutting the image into blocks and processing in
small chunks.  This is facilitate working with really large images where the
entire array can not be loaded into memory.

If I try to call WriteArray() after processing each block processing time is
3+ hours for a 1GB image.  By loading the processed block (numpy arrays)
into a python list and then writing out a number at the same time I have cut
processing time to sub 2 minutes.

What is GDAL doing when it calls writeArray() that is requiring so much
time?  Has anyone else encountered this and been able to speed up GDAL's
array writing?

Thanks Jay

Here is an example is pseudocode:

open the raster

iterate through the bands using dataset.GetRasterBand(j)

iterate through the rows
    iterate through the columns

    readAsArray(a block of rows and columns)

    process the array in numpy

    #The more often this is called the slower the entire script runs...why?
    write out the array with outdataset.GetRasterBand(j).WriteArray(the
proper place to insert the modified array)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110713/56bdc0d5/attachment-0001.html
From even.rouault at mines-paris.org  Wed Jul 13 16:38:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul 14 05:07:19 2011
Subject: [gdal-dev] Motion: Approve GDAL/OGR 1.8.1RC2 for release
In-Reply-To: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
References: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
Message-ID: <1310589490.4e1e023267170@webmail.free.fr>

Selon Frank Warmerdam <warmerdam@pobox.com>:

> Motion: GDAL/OGR 1.8.1RC2 is approved as the official 1.8.1
> release.

+1
Even

From even.rouault at mines-paris.org  Wed Jul 13 16:40:09 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul 14 05:09:24 2011
Subject: [gdal-dev] PDF via podofo
In-Reply-To: <4E1C4D5B.2000809@ualg.pt>
References: <4E1C2913.5030404@ualg.pt>
	<201107121320.41784.even.rouault@mines-paris.org>
	<4E1C3004.4000902@ualg.pt> <4E1C4D5B.2000809@ualg.pt>
Message-ID: <1310589609.4e1e02a9735eb@webmail.free.fr>

Selon Joaquim Luis <jluis@ualg.pt>:

> Evan,
>
> It seams to work now. I say "seams" because with podofo it also requires
> to have available "pdftoppm"
>
> gdal_translate lixo.pdf lixo.tiff
> Input file size is 1239, 1754
> 0'pdftoppm' is not recognized as an internal or external command,

Yes, this is expected and mentioned in the driver documentation.

>
> but since your fix to build with poppler 0.14 works just fine again and
> this doesn't oblige to carry any other 3rth prog I'm staying within this
> solution.
>
> Thanks again
>
> Joaquim
>
>
> > On 12-07-2011 12:20, Even Rouault wrote:
> >> Le mardi 12 juillet 2011 12:59:31, Joaquim Luis a ?crit :
> >>> Hi,
> >>>
> >>> I am still having troubles with a build with PDF support. I used to
> >>> have
> >>> a working solution for my gdalread MEX by using poppler 0.14, however
> >>> now GDAL gives an error when linking with it (something about a member
> >>> that does not exist).
> >> Error at compile time about fillGooString() missing, with a very
> >> recent trunk ?
> >> If so, I've just fixed it when testing compilation on CentOS 6 that
> >> ships with
> >> poppler 0.12.4.
> >
> > Exactly.
> >
> >>> So I turned again to 0.16 and managed to compile
> >>> everything. But now Matlab just crash when I read a pdf (repeat, before
> >>> it used to work).
> >> Hum I guess you run into cross-heap issues related to different
> >> versions of the
> >> MSVC Runtime...
> >
> > Perhaps but I am very careful in maintaining separate directories with
> > libs compiled with a certain compiler (I swap between VS2010 and Intel
> > 32, 64) and than always link with the libs created with the same
> > compiler. That's why I want to be able to compile all dependencies
> > that I use to build GDAL.
> >
> >>> Next I tried the podofo (funny name) library. Everything compiles fine
> >>> but a PDF driver does not exit when print the available drivers (and
> >>> obviously, reading pdf does not work).
> >>> I also noted that grepping "PODOFO_ENABLED" for the entire GDAL
> >>> tree, it
> >>> only shows up once, in nmake.opt.
> >> Yes, there was something missing in frmts/makefile.vc. I think I've
> >> just fixed
> >> it (untested though)
> >>
> >> So 'svn update' and retry
> >
> > Thanks, I'll try it later today.
> >
> > Joaquim
> >
> >
> >>> Ah, it's a Windows build that I'm talking about.
> >>>
> >>> Joaquim Luis
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
>
>


From jmckenna at gatewaygeomatics.com  Wed Jul 13 17:00:47 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Thu Jul 14 05:31:13 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E1B4F63.8040001@gatewaygeomatics.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E1B4F63.8040001@gatewaygeomatics.com>
Message-ID: <4E1E077F.3080607@gatewaygeomatics.com>

More feedback on the FileGDB driver:

- we're trying to access an OSM road network for Colorado, stored in fgb 
format, created with ArcCatalog 10.0 
(ftp://ftp.usace.army.mil/pub/erdc/crrel/rsgis/osm_colo_roads.zip)

- using gdal-trunk and FileGDB_API_1_0Final

- when executing ogrinfo for some reason the EXTENT is not displayed in 
the results, such as:

{{{
ogrinfo osm_colo_roads.gdb united_states_united_states_colorado_highway -so
INFO: Open of `osm_colo_roads.gdb'
       using driver `FileGDB' successful.

Layer name: united_states_united_states_colorado_highway
Geometry: Multi Line String
Feature Count: 106940
Layer SRS WKT:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.257223563,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4326"]]
FID Column = OBJECTID
Geometry Column = SHAPE
TYPE: String (0.0)
NAME: String (0.0)
ONEWAY: String (0.0)
LANES: Real (0.0)
}}}

Has anyone else noticed this? (testing with OGR-created fgb seems to 
output extents fine)

Thanks.

-jeff




-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/




From pramsey at opengeo.org  Wed Jul 13 17:54:16 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Thu Jul 14 06:27:12 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E1E077F.3080607@gatewaygeomatics.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E1B4F63.8040001@gatewaygeomatics.com>
	<4E1E077F.3080607@gatewaygeomatics.com>
Message-ID: <CACowWR2o=s1=s5MXtdFqGUFhtJ25XXQxaA3zq=NwF+4p8Qp9xw@mail.gmail.com>

The fact that sometimes you can see an extent (when you create a FGDB
with OGR) seems to indicate a complexity beyond the driver simply not
reading extents... are you certain this FGDB file has extents set? I
assume it's OK for me to download it and test.

P.

On Wed, Jul 13, 2011 at 2:00 PM, Jeff McKenna
<jmckenna@gatewaygeomatics.com> wrote:
> More feedback on the FileGDB driver:
>
> - we're trying to access an OSM road network for Colorado, stored in fgb
> format, created with ArcCatalog 10.0
> (ftp://ftp.usace.army.mil/pub/erdc/crrel/rsgis/osm_colo_roads.zip)
>
> - using gdal-trunk and FileGDB_API_1_0Final
>
> - when executing ogrinfo for some reason the EXTENT is not displayed in the
> results, such as:
>
> {{{
> ogrinfo osm_colo_roads.gdb united_states_united_states_colorado_highway -so
> INFO: Open of `osm_colo_roads.gdb'
> ? ? ?using driver `FileGDB' successful.
>
> Layer name: united_states_united_states_colorado_highway
> Geometry: Multi Line String
> Feature Count: 106940
> Layer SRS WKT:
> GEOGCS["WGS 84",
> ? ?DATUM["WGS_1984",
> ? ? ? ?SPHEROID["WGS 84",6378137,298.257223563,
> ? ? ? ? ? ?AUTHORITY["EPSG","7030"]],
> ? ? ? ?AUTHORITY["EPSG","6326"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.0174532925199433,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4326"]]
> FID Column = OBJECTID
> Geometry Column = SHAPE
> TYPE: String (0.0)
> NAME: String (0.0)
> ONEWAY: String (0.0)
> LANES: Real (0.0)
> }}}
>
> Has anyone else noticed this? (testing with OGR-created fgb seems to output
> extents fine)
>
> Thanks.
>
> -jeff
>
>
>
>
> --
> Jeff McKenna
> MapServer Consulting and Training Services
> http://www.gatewaygeomatics.com/
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Michael.Smith at usace.army.mil  Wed Jul 13 18:05:07 2011
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu Jul 14 06:38:39 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <CACowWR2o=s1=s5MXtdFqGUFhtJ25XXQxaA3zq=NwF+4p8Qp9xw@mail.gmail.com>
Message-ID: <CA43645D.114F0%michael.smith@usace.army.mil>

Yes, it is ok for you to download and test. This is OSM data that I
created using ArcCatalog 10.

Jeff also has a layer of US States that I created from OGR. It did have
the extents.

Mike


-- 
Mike


Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 7/13/11 2:54 PM, "Paul Ramsey" <pramsey@opengeo.org> wrote:

>The fact that sometimes you can see an extent (when you create a FGDB
>with OGR) seems to indicate a complexity beyond the driver simply not
>reading extents... are you certain this FGDB file has extents set? I
>assume it's OK for me to download it and test.
>
>P.
>
>On Wed, Jul 13, 2011 at 2:00 PM, Jeff McKenna
><jmckenna@gatewaygeomatics.com> wrote:
>> More feedback on the FileGDB driver:
>>
>> - we're trying to access an OSM road network for Colorado, stored in fgb
>> format, created with ArcCatalog 10.0
>> (ftp://ftp.usace.army.mil/pub/erdc/crrel/rsgis/osm_colo_roads.zip)
>>
>> - using gdal-trunk and FileGDB_API_1_0Final
>>
>> - when executing ogrinfo for some reason the EXTENT is not displayed in
>>the
>> results, such as:
>>
>> {{{
>> ogrinfo osm_colo_roads.gdb united_states_united_states_colorado_highway
>>-so
>> INFO: Open of `osm_colo_roads.gdb'
>>      using driver `FileGDB' successful.
>>
>> Layer name: united_states_united_states_colorado_highway
>> Geometry: Multi Line String
>> Feature Count: 106940
>> Layer SRS WKT:
>> GEOGCS["WGS 84",
>>    DATUM["WGS_1984",
>>        SPHEROID["WGS 84",6378137,298.257223563,
>>            AUTHORITY["EPSG","7030"]],
>>        AUTHORITY["EPSG","6326"]],
>>    PRIMEM["Greenwich",0,
>>        AUTHORITY["EPSG","8901"]],
>>    UNIT["degree",0.0174532925199433,
>>        AUTHORITY["EPSG","9122"]],
>>    AUTHORITY["EPSG","4326"]]
>> FID Column = OBJECTID
>> Geometry Column = SHAPE
>> TYPE: String (0.0)
>> NAME: String (0.0)
>> ONEWAY: String (0.0)
>> LANES: Real (0.0)
>> }}}
>>
>> Has anyone else noticed this? (testing with OGR-created fgb seems to
>>output
>> extents fine)
>>
>> Thanks.
>>
>> -jeff
>>
>>
>>
>>
>> --
>> Jeff McKenna
>> MapServer Consulting and Training Services
>> http://www.gatewaygeomatics.com/
>>
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Michael.Smith at usace.army.mil  Wed Jul 13 18:07:21 2011
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu Jul 14 06:40:59 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <CA43645D.114F0%michael.smith@usace.army.mil>
Message-ID: <CA436512.114F4%michael.smith@usace.army.mil>

Or anyone to download and test, just so its clear.

Mike


-- 
Mike


Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 7/13/11 3:05 PM, "Smith, Michael ERDC-CRREL-NH"
<Michael.Smith@usace.army.mil> wrote:

>Yes, it is ok for you to download and test. This is OSM data that I
>created using ArcCatalog 10.
>
>Jeff also has a layer of US States that I created from OGR. It did have
>the extents.
>
>Mike
>
>
>-- 
>Mike
>
>
>Michael Smith
>Remote Sensing/GIS Center
>US Army Corps of Engineers
>
>
>
>On 7/13/11 2:54 PM, "Paul Ramsey" <pramsey@opengeo.org> wrote:
>
>>The fact that sometimes you can see an extent (when you create a FGDB
>>with OGR) seems to indicate a complexity beyond the driver simply not
>>reading extents... are you certain this FGDB file has extents set? I
>>assume it's OK for me to download it and test.
>>
>>P.
>>
>>On Wed, Jul 13, 2011 at 2:00 PM, Jeff McKenna
>><jmckenna@gatewaygeomatics.com> wrote:
>>> More feedback on the FileGDB driver:
>>>
>>> - we're trying to access an OSM road network for Colorado, stored in
>>>fgb
>>> format, created with ArcCatalog 10.0
>>> (ftp://ftp.usace.army.mil/pub/erdc/crrel/rsgis/osm_colo_roads.zip)
>>>
>>> - using gdal-trunk and FileGDB_API_1_0Final
>>>
>>> - when executing ogrinfo for some reason the EXTENT is not displayed in
>>>the
>>> results, such as:
>>>
>>> {{{
>>> ogrinfo osm_colo_roads.gdb united_states_united_states_colorado_highway
>>>-so
>>> INFO: Open of `osm_colo_roads.gdb'
>>>      using driver `FileGDB' successful.
>>>
>>> Layer name: united_states_united_states_colorado_highway
>>> Geometry: Multi Line String
>>> Feature Count: 106940
>>> Layer SRS WKT:
>>> GEOGCS["WGS 84",
>>>    DATUM["WGS_1984",
>>>        SPHEROID["WGS 84",6378137,298.257223563,
>>>            AUTHORITY["EPSG","7030"]],
>>>        AUTHORITY["EPSG","6326"]],
>>>    PRIMEM["Greenwich",0,
>>>        AUTHORITY["EPSG","8901"]],
>>>    UNIT["degree",0.0174532925199433,
>>>        AUTHORITY["EPSG","9122"]],
>>>    AUTHORITY["EPSG","4326"]]
>>> FID Column = OBJECTID
>>> Geometry Column = SHAPE
>>> TYPE: String (0.0)
>>> NAME: String (0.0)
>>> ONEWAY: String (0.0)
>>> LANES: Real (0.0)
>>> }}}
>>>
>>> Has anyone else noticed this? (testing with OGR-created fgb seems to
>>>output
>>> extents fine)
>>>
>>> Thanks.
>>>
>>> -jeff
>>>
>>>
>>>
>>>
>>> --
>>> Jeff McKenna
>>> MapServer Consulting and Training Services
>>> http://www.gatewaygeomatics.com/
>>>
>>>
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>_______________________________________________
>>gdal-dev mailing list
>>gdal-dev@lists.osgeo.org
>>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dcole at integrity-apps.com  Wed Jul 13 19:03:45 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul 14 07:40:25 2011
Subject: [gdal-dev] CreateCopy() works great on some NITF, not on others
Message-ID: <8406B84EA8899042A8508D858843972903C0DFBB@CHUNEX01.integrity-apps.com>

Hello,

As I have mentioned in earlier threads, I have been using GDAL to read NITF and make copies of some files.

In particular, I have been creating NITFs copy with 2 images in them, from the original.

This seems to work good for one NITF, but for another I am getting some problems. It seems like the one with the problems gets a copy created, but the images themselves are just all black.

What kinds of things can I investigate to see why this may be happening?  Things looks fairly normal in the gdalinfo of the two files - but perhaps it is something I am missing.

The NITF that is giving the problem was exported as a NITF from a TIFF using Envi - whereas the other was generated for me by someone else. Is there perhaps a setting there I am not doing right?


Thanks

Derek
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110713/51d28790/attachment.html
From mariusjigmond at hotmail.com  Wed Jul 13 19:23:10 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu Jul 14 08:00:51 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <CA+YzLBf_OrJ+09KRuxM7vQKtP+sGEkY+nAGkM-e35zR0a+skgA@mail.gmail.com>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>
	<CA+YzLBf_OrJ+09KRuxM7vQKtP+sGEkY+nAGkM-e35zR0a+skgA@mail.gmail.com>
Message-ID: <BLU0-SMTP19681686E1E318862D05FEAB2470@phx.gbl>

Frank, thanks for the clarification on iterating over the selection. I
was able to run my script and in the simple case of returning one
polygon feature it works great. However, I ran into some problems when I
tried to assume that the filter would return multiple features.

Is it possible to iterate over a selection and add every geometry object
to a list, in other words can geometries be handled like other Python
objects? I would later like to iterate over the list of geometries and
verify whether they contain the centroids I'm interested in. My
procedure can be summarized as follows (sample scripts at the end):
1. Select polygon(s) based on a SQL filter
2. Iterate over polygons from 1. and add geometries to a list
3. Iterate over a mesh of polygons, grab their centroids and verify
whether they are within the geometries from 2.

Script that fails (assumes I'm getting more than one geometry back and
adds it to a list):
#!/usr/bin/python

from osgeo import ogr
import sys, math, time, os

grid = 'model1.shp'
gridDS = ogr.Open(grid, 1)
gridLayer = gridDS.GetLayer(0)

aquifer = '/data/romania/judeteEPSG3844.shp'
aqDS = ogr.Open(aquifer)
aqLayer = aqDS.GetLayerByIndex(0)
aqLayer.SetAttributeFilter('DENJUD = "CLUJ"')
aqfeat = aqLayer.GetNextFeature()
aqgeom = aqfeat.GetGeometryRef()
geomList = [aqgeom]

while aqfeat is not None: #loop thru features in case of
islands/multiple polygons
  aqfeat = aqLayer.GetNextFeature()
  if aqfeat is not None:
    geomList.append(aqfeat.GetGeometryRef())

for i in range(gridLayer.GetFeatureCount()):
  feat = gridLayer.GetFeature(i)
  print feat.GetField('CELL_ID') #see how many features processed before
segfault, usually first two features
  geom = feat.GetGeometryRef()
  point = geom.Centroid()
  for polygeom in geomList:
    if polygeom.Contains(point):
      feat.SetField('IBOUND', 1)
      gridLayer.SetFeature(feat)
      break #break out of "for" if any poly contains the centroid

Script that works (assumes I'm only getting one geometry back, no need
for list):
#!/usr/bin/python

from osgeo import ogr
import sys, math, time, os

grid = 'model1.shp'
gridDS = ogr.Open(grid, 1)
gridLayer = gridDS.GetLayer(0)

aquifer = '/data/romania/judeteEPSG3844.shp'
aqDS = ogr.Open(aquifer)
aqLayer = aqDS.GetLayerByIndex(0)
aqLayer.SetAttributeFilter('DENJUD = "CLUJ"')
aqfeat = aqLayer.GetNextFeature()
aqgeom = aqfeat.GetGeometryRef()

for i in range(gridLayer.GetFeatureCount()):
  feat = gridLayer.GetFeature(i)
  geom = feat.GetGeometryRef()
  point = geom.Centroid()
  if aqgeom.Contains(point):
    feat.SetField('IBOUND', 1)
    gridLayer.SetFeature(feat)


-marius

On Mon, 2011-07-11 at 22:01 -0700, Frank Warmerdam wrote:

> Marius,
> 
> I think a bug is called for.
> 
> On Mon, Jul 11, 2011 at 8:00 PM, Marius Jigmond
> <mariusjigmond@hotmail.com> wrote:
> > After some more investigation that is likely NOT the issue. I have an
> > ExecuteSQL statement which selects a certain polygon based on an attribute
> > value. Unfortunately it seems to return the wrong feature. The feature I
> > query for is unique so a duplicate is out of the question. Here's the code:
> >
> > #!/usr/bin/python
> >
> > from osgeo import ogr
> > import sys, math, time, os
> >
> > aquifer = '/data/romania/judeteEPSG3844.shp'
> > aqDS = ogr.Open(aquifer)
> > sql = 'select * from judeteEPSG3844 where DENJUD = "CLUJ"'
> > aqLayer = aqDS.ExecuteSQL(sql)
> > feat = aqLayer.GetFeature(0)
> > print aqLayer.GetFeatureCount()
> > print feat.GetField('DENJUD')
> > aqDS.ReleaseResultSet(aqLayer)
> >
> > The result:
> > marius@mobi:~/temp$ run_sql.py
> > 1
> > TELEORMAN
> > marius@mobi:~/temp$
> >
> > This explains why none of my centroids were remotely close to the polygon.
> >
> > Is there something wrong with my query or should I file a bug?
> >
> > -marius
> >
> > On Mon, 2011-07-11 at 20:46 -0500, Marius Jigmond wrote:
> >
> > I suppose a piece of code speaks louder :):
> >
> > xsect = False
> > for i in range(gridLayer.GetFeatureCount()):
> >   feat = gridLayer.GetFeature(i)
> >   geom = feat.GetGeometryRef()
> >   point = geom.Centroid()
> >   for j in range(aqLayer.GetFeatureCount()):
> >     aqfeat = aqLayer.GetFeature(j)
> >     aqgeom = aqfeat.GetGeometryRef()
> >     if point.Intersect(aqgeom):
> >       xsect = True
> >       print 'ibound = 1'
> >       break
> >   if xsect:
> >     feat.SetField('IBOUND', 1)
> >     gridLayer.SetFeature(feat)
> >     xsect = False
> >
> > -marius
> >
> > On Mon, 2011-07-11 at 20:34 -0500, Marius Jigmond wrote:
> >
> > Hi everyone,
> >
> > I am trying to test whether centroids of polygons lie/intersect within
> > another polygon. I have tried Intersect, Within, and Contains but they
> > always return false. Should these methods work for my intended purpose or do
> > I need to implement a point in polygon function? Thanks.
> >
> > -marius
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> 
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110713/8503a378/attachment-0001.html
From eadam at co.lincoln.or.us  Thu Jul 14 00:19:42 2011
From: eadam at co.lincoln.or.us (Eli Adam)
Date: Thu Jul 14 13:14:29 2011
Subject: [gdal-dev] CreateCopy() works great on some NITF, not on
	others
Message-ID: <4E1E0BF5020000CE00047EAC@mail.co.lincoln.or.us>

Derek,

>> This seems to work good for one NITF, but for another I am getting some problems. It seems like the one with the problems  gets a copy created, but the images themselves are just all black.

This could depend on your viewer, there is one thread about something similar when using ArcGIS as the viewer, http://lists.osgeo.org/pipermail/gdal-dev/2010-October/026444.html

The -hist (or -mm or -stats) gdalinfo switches can be helpful to determine what is in your raster.  This also avoids how different viewers may view the file (although how viewers view the file may be your next problem).  

gdalinfo -mm (or -stats or -hist)

Bests, Eli
From warmerdam at pobox.com  Thu Jul 14 01:19:25 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 14 14:16:23 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <BLU0-SMTP19681686E1E318862D05FEAB2470@phx.gbl>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>
	<CA+YzLBf_OrJ+09KRuxM7vQKtP+sGEkY+nAGkM-e35zR0a+skgA@mail.gmail.com>
	<BLU0-SMTP19681686E1E318862D05FEAB2470@phx.gbl>
Message-ID: <CA+YzLBe7m9dodxhrXTybtJvh+kKBaeDnkw6piq2M+fo=S10nyg@mail.gmail.com>

On Wed, Jul 13, 2011 at 4:23 PM, Marius Jigmond
<mariusjigmond@hotmail.com> wrote:
> aqfeat = aqLayer.GetNextFeature()
> aqgeom = aqfeat.GetGeometryRef()
> geomList = [aqgeom]
>
> while aqfeat is not None: #loop thru features in case of islands/multiple
> polygons
> ? aqfeat = aqLayer.GetNextFeature()
> ? if aqfeat is not None:
> ??? geomList.append(aqfeat.GetGeometryRef())

Marius,

When you read a new
feature aqfeat is replaced, and the old feature is cleaned up
by the garbage collector.  At that point it's associate geometry
is also destroyed even though it is referenced from Python.  This
is a weakness caused by the way object lifetimes are handled
in OGR that doesn't map well to Python.  So you should be cloning
the geometry when you add it to your list.

eg.
  geomList = [aqgeom.Clone()]
...
  geomList.append( aqfeat.GetGeometryRef().Clone() )

The rule of thumb is that ogr.Datastore and ogr.Feature are well
handled according to Python reference counting semantics.
But ogr.Layer and ogr.Geometry objects are destroyed when
their owning ogr.Datastore or ogr.Feature is destroyed.
Freestanding ogr.Geometry objects are ok.  There is no such
thing as a freestanding ogr.Layer.

This is a common gotcha.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From P.Halls at york.ac.uk  Thu Jul 14 05:58:34 2011
From: P.Halls at york.ac.uk (Peter Halls)
Date: Thu Jul 14 19:13:05 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E1E077F.3080607@gatewaygeomatics.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E1B4F63.8040001@gatewaygeomatics.com>
	<4E1E077F.3080607@gatewaygeomatics.com>
Message-ID: <Prayer.1.3.2.1107141058340.5821@webmail4.york.ac.uk>

Jeff,

   how was the OSM data imported into ArcCatalog? Using Data Interop, the 
OSM Editor or something else? I ask because I have recently had a tortuous 
time importing OSM data into ArcGIS and am aware that there are a number of 
open issues in this arena. The lack of an extent would be a minor issue 
compared to some of those I've experienced, but just might explain part of 
one of them.

Best wishes,

Peter


On Jul 13 2011, Jeff McKenna wrote:

>More feedback on the FileGDB driver:
>
>- we're trying to access an OSM road network for Colorado, stored in fgb 
>format, created with ArcCatalog 10.0 
>(ftp://ftp.usace.army.mil/pub/erdc/crrel/rsgis/osm_colo_roads.zip)
>
>- using gdal-trunk and FileGDB_API_1_0Final
>
>- when executing ogrinfo for some reason the EXTENT is not displayed in 
>the results, such as:
>
>{{{
>ogrinfo osm_colo_roads.gdb united_states_united_states_colorado_highway -so
>INFO: Open of `osm_colo_roads.gdb'
>       using driver `FileGDB' successful.
>
>Layer name: united_states_united_states_colorado_highway
>Geometry: Multi Line String
>Feature Count: 106940
>Layer SRS WKT:
>GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9122"]],
>     AUTHORITY["EPSG","4326"]]
>FID Column = OBJECTID
>Geometry Column = SHAPE
>TYPE: String (0.0)
>NAME: String (0.0)
>ONEWAY: String (0.0)
>LANES: Real (0.0)
>}}}
>
>Has anyone else noticed this? (testing with OGR-created fgb seems to 
>output extents fine)
>
>Thanks.
>
>-jeff
>
>
>
>
>

-- 
--------------------------------------------------------------------------
Peter Halls, GIS Advisor & Acting Team Leader Applications Support Group,
             Information Directorate, University of York
Snail Mail: c/o IT Services, Heslington, York YO10 5DD, England
Telephone: 01904 323806   FAX: 01904 323740

This message has the status of a private & personal communication
--------------------------------------------------------------------------



From a.neumann at carto.net  Thu Jul 14 09:12:10 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Thu Jul 14 22:35:37 2011
Subject: [gdal-dev] Compile problems: gdal-svn with geos-svn
Message-ID: <dd26c77de24a8221b48f0163c1563eed@carto.net>

 Hi,

 I tried to compile the most-recent gdal-svn with the most recent 
 geos-svn and got the following error message during compilation:

 /bin/grep: /usr/lib/libgeos_c.la: No such file or directory
 /bin/sed: can't read /usr/lib/libgeos_c.la: No such file or directory
 libtool: link: `/usr/lib/libgeos_c.la' is not a valid libtool archive
 make[1]: *** [libgdal.la] Error 1
 make[1]: Leaving directory `/home/an/dev/cpp/gdal'
 make: *** [check-lib] Error 2

 Also, i pointed gdal to geos in /usr/local/lib, not in /usr/lib with 
 the configure params.

 Do you have any idea on how I can resolve the issue?

 Here are my configure params:

 ./configure --with-python --with-curl --with-expat 
 --with-libtiff=internal --with-geos=/usr/local/bin/geos-config 
 --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces 
 --with-oci-lib=/usr/local/lib/instantclient_10_2 
 --with-oci-include=/usr/local/lib/instantclient_10_2/sdk/include 
 --with-mysql --with-jpeg=internal --with-sqlite --with-spatialite 
 --with-grass=/usr/local/grass-6.4.0RC5/

 Thanks,
 Andreas

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From Michael.Smith at usace.army.mil  Thu Jul 14 09:59:13 2011
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Thu Jul 14 23:24:54 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <Prayer.1.3.2.1107141058340.5821@webmail4.york.ac.uk>
Message-ID: <CA4443F9.11559%michael.smith@usace.army.mil>

Peter,

In this case, the OSM data came from Cloudmade shapefiles for Colorado
Highways and I converted it to a FileGDB using v10 ArcCatalog.


-- 
Mike


Michael Smith
Remote Sensing/GIS Center
US Army Corps of Engineers



On 7/14/11 2:58 AM, "Peter Halls" <P.Halls@york.ac.uk> wrote:

>Jeff,
>
>   how was the OSM data imported into ArcCatalog? Using Data Interop, the
>OSM Editor or something else? I ask because I have recently had a
>tortuous 
>time importing OSM data into ArcGIS and am aware that there are a number
>of 
>open issues in this arena. The lack of an extent would be a minor issue
>compared to some of those I've experienced, but just might explain part
>of 
>one of them.
>
>Best wishes,
>
>Peter
>
>
>On Jul 13 2011, Jeff McKenna wrote:
>
>>More feedback on the FileGDB driver:
>>
>>- we're trying to access an OSM road network for Colorado, stored in fgb
>>format, created with ArcCatalog 10.0
>>(ftp://ftp.usace.army.mil/pub/erdc/crrel/rsgis/osm_colo_roads.zip)
>>
>>- using gdal-trunk and FileGDB_API_1_0Final
>>
>>- when executing ogrinfo for some reason the EXTENT is not displayed in
>>the results, such as:
>>
>>{{{
>>ogrinfo osm_colo_roads.gdb united_states_united_states_colorado_highway
>>-so
>>INFO: Open of `osm_colo_roads.gdb'
>>       using driver `FileGDB' successful.
>>
>>Layer name: united_states_united_states_colorado_highway
>>Geometry: Multi Line String
>>Feature Count: 106940
>>Layer SRS WKT:
>>GEOGCS["WGS 84",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563,
>>             AUTHORITY["EPSG","7030"]],
>>         AUTHORITY["EPSG","6326"]],
>>     PRIMEM["Greenwich",0,
>>         AUTHORITY["EPSG","8901"]],
>>     UNIT["degree",0.0174532925199433,
>>         AUTHORITY["EPSG","9122"]],
>>     AUTHORITY["EPSG","4326"]]
>>FID Column = OBJECTID
>>Geometry Column = SHAPE
>>TYPE: String (0.0)
>>NAME: String (0.0)
>>ONEWAY: String (0.0)
>>LANES: Real (0.0)
>>}}}
>>
>>Has anyone else noticed this? (testing with OGR-created fgb seems to
>>output extents fine)
>>
>>Thanks.
>>
>>-jeff
>>
>>
>>
>>
>>
>
>-- 
>--------------------------------------------------------------------------
>Peter Halls, GIS Advisor & Acting Team Leader Applications Support Group,
>             Information Directorate, University of York
>Snail Mail: c/o IT Services, Heslington, York YO10 5DD, England
>Telephone: 01904 323806   FAX: 01904 323740
>
>This message has the status of a private & personal communication
>--------------------------------------------------------------------------
>
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Thu Jul 14 10:23:59 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 14 23:50:57 2011
Subject: [gdal-dev] Re: Motion: Approve GDAL/OGR 1.8.1RC2 for release
In-Reply-To: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
References: <CA+YzLBfPoWaB9N5_vyjxtBTTgacv+0UoMQPdhKoe_Db4zfSAvA@mail.gmail.com>
Message-ID: <CA+YzLBdOLAnkksnRW7845V0p-bCJvhubXUPk1Lvp7RUOvbdX+g@mail.gmail.com>

On Tue, Jul 12, 2011 at 8:05 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: GDAL/OGR 1.8.1RC2 is approved as the official 1.8.1
> release.

Folks,

I declare this motion passed with support from Daniel, Tamas, Even and
myself.  I will do the final release steps this morning.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From simonpayne2007 at yahoo.co.uk  Thu Jul 14 10:35:17 2011
From: simonpayne2007 at yahoo.co.uk (sipayne)
Date: Fri Jul 15 00:02:47 2011
Subject: [gdal-dev] Re: OGR feature style spec and LABEL style parts - not
 working apparently
In-Reply-To: <4D9E575C.3000109@mapgears.com>
References: <429DEE3AFCAF8C46BFA090371D8FB1C00B4049F784@inductor.1spatial.local>
	<4D9E575C.3000109@mapgears.com>
Message-ID: <1310654117488-6583497.post@n2.nabble.com>

Hi Daniel

I know it's been a while since this discussion, but can you say whether
you'll be able to look at this?

thanks

Simon

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-dev-OGR-feature-style-spec-and-LABEL-style-parts-not-working-apparently-tp6250389p6583497.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu Jul 14 10:49:10 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jul 15 00:17:25 2011
Subject: [gdal-dev] GDAL/OGR 1.8.1 Released
Message-ID: <CA+YzLBdyds9t2nYPHRXSokCUobk1P0+KHAMB1HWv92CwL6iAkg@mail.gmail.com>

Folks,

On behalf of the GDAL/OGR development team I am pleased to announce
the release of GDAL/OGR 1.8.1.  This is the first bug fix release since
the 1.8.0 release in January and contains many useful fixes.  The source
can be downloaded from:

     http://download.osgeo.org/gdal/gdal181.zip
     http://download.osgeo.org/gdal/gdal-1.8.1.tar.gz

Complete news about the release is available at:

   http://trac.osgeo.org/gdal/wiki/Release/1.8.1-News

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Thu Jul 14 12:33:31 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul 15 02:07:55 2011
Subject: [gdal-dev] Compile problems: gdal-svn with geos-svn
In-Reply-To: <dd26c77de24a8221b48f0163c1563eed@carto.net>
References: <dd26c77de24a8221b48f0163c1563eed@carto.net>
Message-ID: <1310661211.4e1f1a5b90c37@webmail.free.fr>

Selon Andreas Neumann <a.neumann@carto.net>:

>  Hi,
>
>  I tried to compile the most-recent gdal-svn with the most recent
>  geos-svn and got the following error message during compilation:
>
>  /bin/grep: /usr/lib/libgeos_c.la: No such file or directory
>  /bin/sed: can't read /usr/lib/libgeos_c.la: No such file or directory
>  libtool: link: `/usr/lib/libgeos_c.la' is not a valid libtool archive
>  make[1]: *** [libgdal.la] Error 1
>  make[1]: Leaving directory `/home/an/dev/cpp/gdal'
>  make: *** [check-lib] Error 2
>
>  Also, i pointed gdal to geos in /usr/local/lib, not in /usr/lib with
>  the configure params.

It might be that there's some -L/usr/lib that found its way in the linking line,
due to another unrelated lib located there.

I somehow remember having being caught by this libgeos_c.la issue, and I believe
I just renamed that file to something else. An alternative would be to build
GDAL --without-libtool.

>
>  Do you have any idea on how I can resolve the issue?
>
>  Here are my configure params:
>
>  ./configure --with-python --with-curl --with-expat
>  --with-libtiff=internal --with-geos=/usr/local/bin/geos-config
>  --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces
>  --with-oci-lib=/usr/local/lib/instantclient_10_2
>  --with-oci-include=/usr/local/lib/instantclient_10_2/sdk/include
>  --with-mysql --with-jpeg=internal --with-sqlite --with-spatialite
>  --with-grass=/usr/local/grass-6.4.0RC5/
>
>  Thanks,
>  Andreas
>
> --
>  --
>  Andreas Neumann
>  B??schacherstrasse 10A
>  8624 Gr??t (Gossau ZH)
>  Switzerland
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Thu Jul 14 13:18:05 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul 15 02:54:43 2011
Subject: [gdal-dev] Python WriteArray()
In-Reply-To: <CA+bfmPswKdeEqFW_Ftz1F7CeRv4Xp7GReDZ=4mQXYhjjkZ7KYw@mail.gmail.com>
References: <CA+bfmPswKdeEqFW_Ftz1F7CeRv4Xp7GReDZ=4mQXYhjjkZ7KYw@mail.gmail.com>
Message-ID: <1310663885.4e1f24cd345e1@webmail.free.fr>

Selon "Jay L." <jzl5325@psu.edu>:

It is always difficult to diagnose performance issues at distance, but an
explanation could be that you hit cache trashing when alternating read and
writes. Whereas when you read several blocks and write them afterwards, you can
benefit from the read cached blocks. You could try increasing the GDAL cache
size. Or try to better align on the natural block dimension of your datasets.
Ideally your output dataset would also have the same block dimensions as your
input dataset.


> I am working on processing some raster images and have been really
> struggling with processing times.  I have tracked the issue down to GDAL's
> WriteArray() function.  I am cutting the image into blocks and processing in
> small chunks.  This is facilitate working with really large images where the
> entire array can not be loaded into memory.
>
> If I try to call WriteArray() after processing each block processing time is
> 3+ hours for a 1GB image.  By loading the processed block (numpy arrays)
> into a python list and then writing out a number at the same time I have cut
> processing time to sub 2 minutes.
>
> What is GDAL doing when it calls writeArray() that is requiring so much
> time?  Has anyone else encountered this and been able to speed up GDAL's
> array writing?
>
> Thanks Jay
>
> Here is an example is pseudocode:
>
> open the raster
>
> iterate through the bands using dataset.GetRasterBand(j)
>
> iterate through the rows
>     iterate through the columns
>
>     readAsArray(a block of rows and columns)
>
>     process the array in numpy
>
>     #The more often this is called the slower the entire script runs...why?
>     write out the array with outdataset.GetRasterBand(j).WriteArray(the
> proper place to insert the modified array)
>


From alexmantaut at suremptec.com.ar  Thu Jul 14 13:51:46 2011
From: alexmantaut at suremptec.com.ar (Alex Mantaut)
Date: Fri Jul 15 03:30:01 2011
Subject: [gdal-dev] Cosmo Skymed georreference support
Message-ID: <CAC4=NR8FZARsUEBbv8gAxYEQeGEWe_U+13ozVMKwJ5LyXLwZQA@mail.gmail.com>

Hi all,
        I've created a patch to get georreference and getgeotransform
from COSMO-SKYMED hdf5 files... I created an enhancement ticket with
the patch. The only issue with this patch is that it depends on
another patch in order to work
(http://trac.osgeo.org/gdal/ticket/4121) I've allready created a patch
to solve ticket 4121, and it works properly...

        I'm hoping the patch will be usefull to the project.

        Please feel free to review the patch, every feedback will be welcomed.

The ticket: http://trac.osgeo.org/gdal/ticket/4160

Best regards

-- 
--
???? Alex Mantaut
SUR Emprendimientos Tecnol?gicos

Per? 345? Piso 5to Oficina "B" (C1067AAG)
Ciudad de Buenos Aires, Argentina
Tel. +54 (11) 4342-2976/84
alexmantaut@suremptec.com.ar
www.suremptec.com
From RSyaoxin at hotmail.com  Thu Jul 14 14:10:15 2011
From: RSyaoxin at hotmail.com (RSyaoxin)
Date: Fri Jul 15 03:49:23 2011
Subject: [gdal-dev] TerraSAR-X TSX Driver MetaData Probelm
Message-ID: <1310667015755-6584374.post@n2.nabble.com>

Hi,all
      I found that GDAL can only extract some metadata of TerraSAR-X TSX
driver data,not extract all the metadata,for
example,calibrationConstant.However,these information is very important.Who
has any good solution?
I hope to get some help.Thank you! 
Kind regards. 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/TerraSAR-X-TSX-Driver-MetaData-Probelm-tp6584374p6584374.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Fri Jul 15 00:28:04 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jul 15 14:41:23 2011
Subject: [gdal-dev] Re: [gdal-1.8.0] Get new Coordinates from Geotiff
	avoiding black area
In-Reply-To: <1310565961219-6579103.post@n2.nabble.com>
References: <1310486845602-6575681.post@n2.nabble.com>
	<CAMKgpObSQicTDTp4vuwbsQq5-ZwG0BpW8n=hxnLyyMRVzADuhg@mail.gmail.com>
	<CAC93zU1vdi7p68=dJDuSk2jN3CWNgtFFaVW9L54VzYNiP2E25A@mail.gmail.com>
	<1310497734.22520.13.camel@octopi>
	<CAC93zU2=UwDbiyyhYW5h2eoJixnjh0V857g4t+usGZCiJfT3HQ@mail.gmail.com>
	<1310565961219-6579103.post@n2.nabble.com>
Message-ID: <CAMKgpOYYmKqYvWe6JTrv3BHFay_D6gzy5qt8jtCxKX+ZyZy0tw@mail.gmail.com>

Mett,

I understand the issue now. The easiest way is to find out the corner
pixel/line of the actual data and use these in the -srcwin option of
gdal_translate utility. You just have to make sure that the windows contains
the whole data. The new image produced by gdal_translate does not contain
the black borders. The transformation matrix and other data are updated.

On Wed, Jul 13, 2011 at 7:36 PM, mett <mettbest@gmail.com> wrote:

> Chaitanya,
> I do not understand how can I use that tool to reset the coordinates. Could
> you be more precise? Thanks!
>
> Luiz,
> thank you very much for your contribute, I need it for Java, I will try to
> convert it.
>
> Thank you again,
> Mett
>
>
>
>
> luizmotta wrote:
> >
> > Sorry Folk,
> >
> > I forgot the source of code.
> >
> > I have two type of version(python source), one for QGIS and other for
> > terminal.
> >
> > 1) QGIS/Plugin:
> > http://spatialserver.net/pyqgis_1.0/contributed/imgboundary.zip
> > 2) Teminal: http://dl.dropbox.com/u/14847115/imgtruecorner_py.zip
> >
> >
> > Thank Brian for remember the source.
> >
> >
> > Regards,
> > Luiz Motta
> >
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Get-new-Coordinates-from-Geotiff-avoiding-black-area-tp6575681p6579103.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110715/84846077/attachment.html
From aperezcarro at yahoo.es  Fri Jul 15 03:06:54 2011
From: aperezcarro at yahoo.es (Antonio P.)
Date: Fri Jul 15 17:31:46 2011
Subject: [gdal-dev] Off topic. About GNU GPL; LGPL; MIT; etc license types.
Message-ID: <D62DE7D0EF874338955DEDD52BED82CD@zalmanpc>

I'd want to know your opinion, by apologising for this out-of-the-list question.

I dont understand if I can or not use third soft components I'd want to add to my commercial application.
I read and read and read GNU and GPL (are the same?) and LGPL, BSD; MIT ...  and I have not any conclusion (I'm very confused)

Starting at the point my appplication are going to be commercial, what can and cannot I do whith the 'free' licenses types ? 
What about my own development ? It can exist two uses :
1.- I use third component (exe, lib + source code or full source code)
2.- I use full source code and I have modified some parts.

The check list is then : 
            Use exe/dll     Full source code    Modified source code 
GPL
LGPL
FOSS
MIT
BSD

And the answer for each item :
- Yes: You can use totally free.
- No1: You have to redistribute your whole own software
- No2: You have to redistribute only the modified original source code

And whats about the obligation to show copyright ?
- Yes : You have to show a GNU/LGPL/etc copyright text.
- No1 : You only have to inform that you use a third component by its name.
- No2:  You have not to show no copyright neither references.

Can anybody fill the list ? Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110715/d1bdb2b8/attachment.html
From a.neumann at carto.net  Fri Jul 15 03:51:32 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Fri Jul 15 18:16:03 2011
Subject: [gdal-dev] Compile problems: gdal-svn with geos-svn
In-Reply-To: <1310661211.4e1f1a5b90c37@webmail.free.fr>
References: <dd26c77de24a8221b48f0163c1563eed@carto.net>
	<1310661211.4e1f1a5b90c37@webmail.free.fr>
Message-ID: <260af8810dd4aa80ac2297ebfecee955@carto.net>

 Hi,

 Thanks - it works if I compile --without-libtool

 Whats the drawback of not including libtool? I do not understand 
 whether it is important/necessary.

 Thanks,
 Andreas

 On Thu, 14 Jul 2011 18:33:31 +0200, Even Rouault wrote:
> Selon Andreas Neumann <a.neumann@carto.net>:
>
>>  Hi,
>>
>>  I tried to compile the most-recent gdal-svn with the most recent
>>  geos-svn and got the following error message during compilation:
>>
>>  /bin/grep: /usr/lib/libgeos_c.la: No such file or directory
>>  /bin/sed: can't read /usr/lib/libgeos_c.la: No such file or 
>> directory
>>  libtool: link: `/usr/lib/libgeos_c.la' is not a valid libtool 
>> archive
>>  make[1]: *** [libgdal.la] Error 1
>>  make[1]: Leaving directory `/home/an/dev/cpp/gdal'
>>  make: *** [check-lib] Error 2
>>
>>  Also, i pointed gdal to geos in /usr/local/lib, not in /usr/lib 
>> with
>>  the configure params.
>
> It might be that there's some -L/usr/lib that found its way in the
> linking line,
> due to another unrelated lib located there.
>
> I somehow remember having being caught by this libgeos_c.la issue,
> and I believe
> I just renamed that file to something else. An alternative would be 
> to build
> GDAL --without-libtool.
>
>>
>>  Do you have any idea on how I can resolve the issue?
>>
>>  Here are my configure params:
>>
>>  ./configure --with-python --with-curl --with-expat
>>  --with-libtiff=internal --with-geos=/usr/local/bin/geos-config
>>  --with-pg=/usr/local/pgsql/bin/pg_config --with-xerces
>>  --with-oci-lib=/usr/local/lib/instantclient_10_2
>>  --with-oci-include=/usr/local/lib/instantclient_10_2/sdk/include
>>  --with-mysql --with-jpeg=internal --with-sqlite --with-spatialite
>>  --with-grass=/usr/local/grass-6.4.0RC5/
>>
>>  Thanks,
>>  Andreas
>>
>> --
>>  --
>>  Andreas Neumann
>>  B??schacherstrasse 10A
>>  8624 Gr??t (Gossau ZH)
>>  Switzerland
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>

-- 
 --
 Andreas Neumann
 B?schacherstrasse 10A
 8624 Gr?t (Gossau ZH)
 Switzerland
From even.rouault at mines-paris.org  Fri Jul 15 05:11:54 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul 15 19:40:38 2011
Subject: [gdal-dev] Off topic. About GNU GPL; LGPL; MIT; etc license types.
In-Reply-To: <D62DE7D0EF874338955DEDD52BED82CD@zalmanpc>
References: <D62DE7D0EF874338955DEDD52BED82CD@zalmanpc>
Message-ID: <1310721114.4e20045af0a43@webmail.free.fr>

Selon "Antonio P." <aperezcarro@yahoo.es>:

Antonio,

I'm afraid I've not really understood how to fill your matrix, but here's my
understanding of the obligations of the licences. Take it with a grain of salt :
"I'm not a lawyer".

* If your application links to a GPL library, the whole application, including
your own code, is bound by the GPL. You must include the appropriate copyright
notice for the library and provide the user access to the source code of the GPL
library (including the modifications you may have done) and to the code of your
application too under the terms of the GPL.

* If your application links to a LGPL library, you must include the appropriate
copyright notice for the library and provide the user access to the source code
of the LGPL library (including the modifications you may have done in it). Your
application itself may be released under the terms you like.

* If your application links to a BSD library, well, that's depend of the BSD
licence. There are 2-clause, 3-clause and 4-clause variants of the BSD
licence... If it includes the following clause "Redistributions in binary form
must reproduce the above copyright notice, this list of conditions and the
following disclaimer in the documentation and/or other materials provided with
the distribution", well just comply with it. Otherwise, if you don't distribute
any source code (and you don't have to), you have nothing to do. In any case,
the licence only covers the library code, not your application.

* The MIT licence is a bit similar, except that, the general understanding is
that it places no obligations if you distribute the library as a binary object.
But I've always found that the term "the Software" in the licence isn't very
explicit if it only covers only the source code or binaries generated from it.
So it might be nice to include the copyright notice somewhere if you distribute
it as a binary. If you distribute it as source code, it's clear that you must
include the copyright notice.

> I'd want to know your opinion, by apologising for this out-of-the-list
> question.
>
> I dont understand if I can or not use third soft components I'd want to add
> to my commercial application.
> I read and read and read GNU and GPL (are the same?) and LGPL, BSD; MIT ...
> and I have not any conclusion (I'm very confused)
>
> Starting at the point my appplication are going to be commercial, what can
> and cannot I do whith the 'free' licenses types ?
> What about my own development ? It can exist two uses :
> 1.- I use third component (exe, lib + source code or full source code)
> 2.- I use full source code and I have modified some parts.
>
> The check list is then :
>             Use exe/dll     Full source code    Modified source code
> GPL
> LGPL
> FOSS
> MIT
> BSD
>
> And the answer for each item :
> - Yes: You can use totally free.
> - No1: You have to redistribute your whole own software
> - No2: You have to redistribute only the modified original source code
>
> And whats about the obligation to show copyright ?
> - Yes : You have to show a GNU/LGPL/etc copyright text.
> - No1 : You only have to inform that you use a third component by its name.
> - No2:  You have not to show no copyright neither references.
>
> Can anybody fill the list ? Thanks


From dburken at comcast.net  Fri Jul 15 15:15:49 2011
From: dburken at comcast.net (David Burken)
Date: Sat Jul 16 06:19:06 2011
Subject: [gdal-dev] build error from svn
Message-ID: <4E2091E5.2040507@comcast.net>

Hi Frank, all,

Just fyi, getting build error from svn.  Looks like cpl_serv.h is gone 
now.  See below for minor patch.

Take care,
Dave

$ svn update
At revision 22725.

gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
compilation terminated.
make[1]: *** [../o/gt_wkt_srs.lo] Error 1
make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
make: *** [gtiff-install-obj] Error 2

Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55

Patch:

svn diff frmts/gtiff/gt_wkt_srs.cpp
Index: frmts/gtiff/gt_wkt_srs.cpp
===================================================================
--- frmts/gtiff/gt_wkt_srs.cpp    (revision 22725)
+++ frmts/gtiff/gt_wkt_srs.cpp    (working copy)
@@ -30,7 +30,9 @@
   * DEALINGS IN THE SOFTWARE.
   
****************************************************************************/

-#include "cpl_serv.h"
+// #include "cpl_serv.h"
+ #include "cpl_csv.h"
+
  #include "geo_tiffp.h"
  #define CPL_ERROR_H_INCLUDED


From jimp at ittvis.com  Fri Jul 15 14:57:39 2011
From: jimp at ittvis.com (Jim Pendleton)
Date: Sat Jul 16 06:21:51 2011
Subject: [gdal-dev] Current status of Android port w/ SWIG bindings? Seeking
	and offering help.
Message-ID: <B1B624F7C110834B96594065A74F3A54130092A1@gemini.rsinc.com>

Hello all,

I'm new to GDAL, but I've taken on a task of extending some of our
GDAL-oriented tools that work in the desktop environment to Android.

 

With the help of the info on
http://trac.osgeo.org/gdal/wiki/BuildingForAndroid I've made it as far
as building a libgdal file for Android under both RedHat 5 and, with
some pain, WinXP64.

 

However, what I'm really after are the swig bindings and associated JNI
layer for Java.

 

Since this particular subject is listed as a "TODO" at the bottom of the
wiki page, my assumption is that this is an active subject of
investigation by one or more people on this list.

 

I'm using the GDAL trunk build from approximately the beginning of July
2011 and I would prefer to use the recently-released version 6 NDK .

 

Since the default GNUmakefile doesn't generate them, I've manually
created the libgdaljni.so, libgdalconstjni.so, etc., files using the
arm-linux-androideabi-ld in the toolchain.

 

However when I execute System.loadLibrary on libgdaljni.so in my Android
activity, I get unresolved reference errors.  Indeed, adding a
-lW,--no-undefined switch shows many issues when creating the .so files
from the swig wrapper objects, which frequently reference std:: calls
made by the format access routines in libgdal.a.

 

I'm not a g++/c++/makefile/compiler/linker/version guru by any means,
but I'm willing to take a serious stab at resolving the remaining
Android JNI issues if anyone wants to fill me in on the current status
of this investigation and where the known technical hurdles still may
be.

 

Thanks,

Jim Pendleton

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110715/ba970974/attachment-0001.html
From dcole at integrity-apps.com  Fri Jul 15 18:57:41 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Sat Jul 16 10:12:24 2011
Subject: [gdal-dev] Writing data to "CreateCopy" files
Message-ID: <8406B84EA8899042A8508D858843972903C0E44F@CHUNEX01.integrity-apps.com>

I have a couple of questions regarding this.

Is the dataset that is returned from CreateCopy able to be used immediately? I would like to use it to get the first band from it, and use RasterIO on that band.

Secondly - the data I am trying to write with RasterIO is unsigned char, but when I was reading the data, I had to read it with a GDT_Float32, which was allocated like so:

    float * floatData = (float *) CPLMalloc(sizeof(float)*bufSizeX*bufSizeY);

and that seemed to be working well. Will my copy have to be written via a GDT_Float32 data buffer like the one I read it into initially, or can I just change the RasterIO parameter on the write to be GDT_Byte?

Thanks
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110715/1943bd81/attachment.html
From mariusjigmond at hotmail.com  Fri Jul 15 21:16:42 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jul 16 12:39:25 2011
Subject: [gdal-dev] build error from svn
In-Reply-To: <4E2091E5.2040507@comcast.net>
References: <4E2091E5.2040507@comcast.net>
Message-ID: <BLU0-SMTP156E5D0E0DCD243E4FC428AB2480@phx.gbl>

David,

Revision 22725 builds just fine for me. I normally do a make clean
before every build. Maybe something went wrong in your build system.

-marius

On Fri, 2011-07-15 at 15:15 -0400, David Burken wrote:

> Hi Frank, all,
> 
> Just fyi, getting build error from svn.  Looks like cpl_serv.h is gone 
> now.  See below for minor patch.
> 
> Take care,
> Dave
> 
> $ svn update
> At revision 22725.
> 
> gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
> compilation terminated.
> make[1]: *** [../o/gt_wkt_srs.lo] Error 1
> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
> make: *** [gtiff-install-obj] Error 2
> 
> Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55
> 
> Patch:
> 
> svn diff frmts/gtiff/gt_wkt_srs.cpp
> Index: frmts/gtiff/gt_wkt_srs.cpp
> ===================================================================
> --- frmts/gtiff/gt_wkt_srs.cpp    (revision 22725)
> +++ frmts/gtiff/gt_wkt_srs.cpp    (working copy)
> @@ -30,7 +30,9 @@
>    * DEALINGS IN THE SOFTWARE.
>    
> ****************************************************************************/
> 
> -#include "cpl_serv.h"
> +// #include "cpl_serv.h"
> + #include "cpl_csv.h"
> +
>   #include "geo_tiffp.h"
>   #define CPL_ERROR_H_INCLUDED
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110715/c4f681d8/attachment.html
From mariusjigmond at hotmail.com  Fri Jul 15 21:19:26 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Sat Jul 16 12:42:14 2011
Subject: [gdal-dev] OGR Geometry methods
In-Reply-To: <CA+YzLBe7m9dodxhrXTybtJvh+kKBaeDnkw6piq2M+fo=S10nyg@mail.gmail.com>
References: <BLU0-SMTP50DEF376BB224C6D36B7A0B2440@phx.gbl>
	<BLU0-SMTP173DB4A1F95CDE1A2A3820DB2440@phx.gbl>
	<BLU0-SMTP100F016EEF816D2FEAAE334B2440@phx.gbl>
	<CA+YzLBf_OrJ+09KRuxM7vQKtP+sGEkY+nAGkM-e35zR0a+skgA@mail.gmail.com>
	<BLU0-SMTP19681686E1E318862D05FEAB2470@phx.gbl>
	<CA+YzLBe7m9dodxhrXTybtJvh+kKBaeDnkw6piq2M+fo=S10nyg@mail.gmail.com>
Message-ID: <BLU0-SMTP628C1F12855888632B04DDB2480@phx.gbl>

Thanks Frank, excellent tip to be aware of. It's working great now.

-marius

On Wed, 2011-07-13 at 22:19 -0700, Frank Warmerdam wrote:

> On Wed, Jul 13, 2011 at 4:23 PM, Marius Jigmond
> <mariusjigmond@hotmail.com> wrote:
> > aqfeat = aqLayer.GetNextFeature()
> > aqgeom = aqfeat.GetGeometryRef()
> > geomList = [aqgeom]
> >
> > while aqfeat is not None: #loop thru features in case of islands/multiple
> > polygons
> >   aqfeat = aqLayer.GetNextFeature()
> >   if aqfeat is not None:
> >     geomList.append(aqfeat.GetGeometryRef())
> 
> Marius,
> 
> When you read a new
> feature aqfeat is replaced, and the old feature is cleaned up
> by the garbage collector.  At that point it's associate geometry
> is also destroyed even though it is referenced from Python.  This
> is a weakness caused by the way object lifetimes are handled
> in OGR that doesn't map well to Python.  So you should be cloning
> the geometry when you add it to your list.
> 
> eg.
>   geomList = [aqgeom.Clone()]
> ...
>   geomList.append( aqfeat.GetGeometryRef().Clone() )
> 
> The rule of thumb is that ogr.Datastore and ogr.Feature are well
> handled according to Python reference counting semantics.
> But ogr.Layer and ogr.Geometry objects are destroyed when
> their owning ogr.Datastore or ogr.Feature is destroyed.
> Freestanding ogr.Geometry objects are ok.  There is no such
> thing as a freestanding ogr.Layer.
> 
> This is a common gotcha.
> 
> Best regards,
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110715/2d06337e/attachment.html
From warmerdam at pobox.com  Fri Jul 15 22:22:06 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul 16 13:48:26 2011
Subject: [gdal-dev] Writing data to "CreateCopy" files
In-Reply-To: <8406B84EA8899042A8508D858843972903C0E44F@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903C0E44F@CHUNEX01.integrity-apps.com>
Message-ID: <CA+YzLBdh+o+XEMp9oh5--CvNohYA9brjvA+9anzK=MSt9LKDJw@mail.gmail.com>

On Fri, Jul 15, 2011 at 3:57 PM, Cole, Derek <dcole@integrity-apps.com> wrote:
> I have a couple of questions regarding this.
>
> Is the dataset that is returned from CreateCopy able to be used immediately?
> I would like to use it to get the first band from it, and use RasterIO on
> that band.

Derek,

Yes, you should be able to read the resulting file
with the returned GDALDataset object immediately.
Whether you can write to the resulting file will depend
on the format.  Some formats are readonly (with
CreateCopy being the only way to accomplishing
writing).


> Secondly - the data I am trying to write with RasterIO is unsigned char, but
> when I was reading the data, I had to read it with a GDT_Float32, which was
> allocated like so:
>
> ??? float * floatData = (float *)
> CPLMalloc(sizeof(float)*bufSizeX*bufSizeY);
>
> and that seemed to be working well. Will my copy have to be written via a
> GDT_Float32 data buffer like the one I read it into initially, or can I just
> change the RasterIO parameter on the write to be GDT_Byte?


You can read into a float buffer and write back out using
an unsigned char buffer as long as you use the appropriate
data type (GDT_Byte or GDT_Float32) in the RasterIO call.
RasterIO wlil take care of on the fly conversion of the data.

Be aware that writing a float buffer to a Byte file will not
cause the file on disk to be upgraded to store floating
point values.  Instead RasterIO will convert the floating
point values to unsigned char.  When down converting
types out of range values are clamped to the max and min
of the target type and otherwise a floor() convertion is
applied when going to integer types.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From dcole at integrity-apps.com  Fri Jul 15 22:50:37 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Sat Jul 16 14:18:29 2011
Subject: [gdal-dev] Writing data to "CreateCopy" files
In-Reply-To: <CA+YzLBdh+o+XEMp9oh5--CvNohYA9brjvA+9anzK=MSt9LKDJw@mail.gmail.com>
References: <8406B84EA8899042A8508D858843972903C0E44F@CHUNEX01.integrity-apps.com>,
	<CA+YzLBdh+o+XEMp9oh5--CvNohYA9brjvA+9anzK=MSt9LKDJw@mail.gmail.com>
Message-ID: <8406B84EA8899042A8508D858843972903C0E490@CHUNEX01.integrity-apps.com>

Thanks for the reply, that's what I was looking for!

Derek
________________________________________
From: fwarmerdam@gmail.com [fwarmerdam@gmail.com] on behalf of Frank Warmerdam [warmerdam@pobox.com]
Sent: Friday, July 15, 2011 10:22 PM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Writing data to "CreateCopy" files

On Fri, Jul 15, 2011 at 3:57 PM, Cole, Derek <dcole@integrity-apps.com> wrote:
> I have a couple of questions regarding this.
>
> Is the dataset that is returned from CreateCopy able to be used immediately?
> I would like to use it to get the first band from it, and use RasterIO on
> that band.

Derek,

Yes, you should be able to read the resulting file
with the returned GDALDataset object immediately.
Whether you can write to the resulting file will depend
on the format.  Some formats are readonly (with
CreateCopy being the only way to accomplishing
writing).


> Secondly - the data I am trying to write with RasterIO is unsigned char, but
> when I was reading the data, I had to read it with a GDT_Float32, which was
> allocated like so:
>
>     float * floatData = (float *)
> CPLMalloc(sizeof(float)*bufSizeX*bufSizeY);
>
> and that seemed to be working well. Will my copy have to be written via a
> GDT_Float32 data buffer like the one I read it into initially, or can I just
> change the RasterIO parameter on the write to be GDT_Byte?


You can read into a float buffer and write back out using
an unsigned char buffer as long as you use the appropriate
data type (GDT_Byte or GDT_Float32) in the RasterIO call.
RasterIO wlil take care of on the fly conversion of the data.

Be aware that writing a float buffer to a Byte file will not
cause the file on disk to be upgraded to store floating
point values.  Instead RasterIO will convert the floating
point values to unsigned char.  When down converting
types out of range values are clamped to the max and min
of the target type and otherwise a floor() convertion is
applied when going to integer types.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
From zoltans at geograph.co.za  Sat Jul 16 06:04:09 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Jul 16 22:20:36 2011
Subject: [gdal-dev] ogr2ogr ERROR 6
Message-ID: <4E216219.1000001@geograph.co.za>

Hi,
I'm converting a bunch of MID-MIF files to TAB format, and one of them 
gives:
ERROR 6: Error during reading Record.

google comes up with:  CreateField() not supported by this layer

So I check the mif headers and they seem fine, and contain 240 POINT 
records with schema layout of 43 fields.
The mid file has 10080 commas in it, so that suggests the correct number 
of fields, as there are 240 records in it.
So that leaves most likely a field type error, which is not so quick to 
check.

Can someone please pass comment on this error?
Is it a show-stopper, or is only the faulty record skipped and the rest 
of the file translated?

The MID/MIF files together are small (some 75KB), so I can attach them 
if someone is interested.

Any ideas gladly welcome.
Perhaps future releases of ogr2ogr could include the filename & record 
number in the error message?

TIA,
Zoltan


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From chaitanya.ch at gmail.com  Sat Jul 16 06:36:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jul 16 22:30:12 2011
Subject: [gdal-dev] ogr2ogr ERROR 6
In-Reply-To: <4E216219.1000001@geograph.co.za>
References: <4E216219.1000001@geograph.co.za>
Message-ID: <CAMKgpOa2mOJ8hFa6dq06u77YK4vQNbEDPzs2TEP2bJ4i9G=PCA@mail.gmail.com>

Zoltan,

If you are in Windows, try the mif2tab utility from
http://mitab.maptools.org/
OGR's Mitab driver is based on the same library.

On Sat, Jul 16, 2011 at 3:34 PM, Zoltan Szecsei <zoltans@geograph.co.za>wrote:

> Hi,
> I'm converting a bunch of MID-MIF files to TAB format, and one of them
> gives:
> ERROR 6: Error during reading Record.
>
> google comes up with:  CreateField() not supported by this layer
>
> So I check the mif headers and they seem fine, and contain 240 POINT
> records with schema layout of 43 fields.
> The mid file has 10080 commas in it, so that suggests the correct number of
> fields, as there are 240 records in it.
> So that leaves most likely a field type error, which is not so quick to
> check.
>
> Can someone please pass comment on this error?
> Is it a show-stopper, or is only the faulty record skipped and the rest of
> the file translated?
>
> The MID/MIF files together are small (some 75KB), so I can attach them if
> someone is interested.
>
> Any ideas gladly welcome.
> Perhaps future releases of ogr2ogr could include the filename & record
> number in the error message?
>
> TIA,
> Zoltan
>
>
> --
>
> ==============================**=============
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323     www.geograph.co.za
> ==============================**=============
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110716/67f6b9a1/attachment-0001.html
From zoltans at geograph.co.za  Sat Jul 16 07:16:06 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Jul 16 23:10:43 2011
Subject: [gdal-dev] ogr2ogr ERROR 6
In-Reply-To: <CAMKgpOa2mOJ8hFa6dq06u77YK4vQNbEDPzs2TEP2bJ4i9G=PCA@mail.gmail.com>
References: <4E216219.1000001@geograph.co.za>
	<CAMKgpOa2mOJ8hFa6dq06u77YK4vQNbEDPzs2TEP2bJ4i9G=PCA@mail.gmail.com>
Message-ID: <4E2172F6.4040106@geograph.co.za>

Hi Chaitanya,
I'm shelling out from a Genamap script to Linux BASH shell, to run 
ogr2ogr, so nope, not in Windows.

Regards,
Zoltan

On 2011/07/16 12:36, Chaitanya kumar CH wrote:
> Zoltan,
>
> If you are in Windows, try the mif2tab utility from 
> http://mitab.maptools.org/
> OGR's Mitab driver is based on the same library.
>
> On Sat, Jul 16, 2011 at 3:34 PM, Zoltan Szecsei 
> <zoltans@geograph.co.za <mailto:zoltans@geograph.co.za>> wrote:
>
>     Hi,
>     I'm converting a bunch of MID-MIF files to TAB format, and one of
>     them gives:
>     ERROR 6: Error during reading Record.
>
>     google comes up with:  CreateField() not supported by this layer
>
>     So I check the mif headers and they seem fine, and contain 240
>     POINT records with schema layout of 43 fields.
>     The mid file has 10080 commas in it, so that suggests the correct
>     number of fields, as there are 240 records in it.
>     So that leaves most likely a field type error, which is not so
>     quick to check.
>
>     Can someone please pass comment on this error?
>     Is it a show-stopper, or is only the faulty record skipped and the
>     rest of the file translated?
>
>     The MID/MIF files together are small (some 75KB), so I can attach
>     them if someone is interested.
>
>     Any ideas gladly welcome.
>     Perhaps future releases of ogr2ogr could include the filename &
>     record number in the error message?
>
>     TIA,
>     Zoltan
>
>
>     -- 
>
>     ===========================================
>     Zoltan Szecsei PrGISc [PGP0031]
>     Geograph (Pty) Ltd.
>     P.O. Box 7, Muizenberg 7950, South Africa.
>
>     65 Main Road, Muizenberg 7945
>     Western Cape, South Africa.
>
>     34? 6'16.35"S 18?28'5.62"E
>
>     Tel: +27-21-7884897  Mobile: +27-83-6004028
>     Fax: +27-86-6115323 www.geograph.co.za <http://www.geograph.co.za>
>     ===========================================
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110716/b9909f20/attachment.html
From zoltans at geograph.co.za  Sat Jul 16 07:37:18 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Jul 16 23:33:05 2011
Subject: [gdal-dev] ogr2ogr ERROR 6 - Found It !!
In-Reply-To: <4E2172F6.4040106@geograph.co.za>
References: <4E216219.1000001@geograph.co.za>	<CAMKgpOa2mOJ8hFa6dq06u77YK4vQNbEDPzs2TEP2bJ4i9G=PCA@mail.gmail.com>
	<4E2172F6.4040106@geograph.co.za>
Message-ID: <4E2177EE.70309@geograph.co.za>

I downloaded and tried the mitab in Windows, and it gave me the record 
number on which it failed.
True enough, that record in the MID file was incorrect according to the 
schema.

So, for the next version of ogr2ogr, any chance we can get a record 
number please :-)  ?

Thanks for the pointer, Chaitanya.

Kind regards,
Zoltan

On 2011/07/16 13:16, Zoltan Szecsei wrote:
> Hi Chaitanya,
> I'm shelling out from a Genamap script to Linux BASH shell, to run 
> ogr2ogr, so nope, not in Windows.
>
> Regards,
> Zoltan
>
> On 2011/07/16 12:36, Chaitanya kumar CH wrote:
>> Zoltan,
>>
>> If you are in Windows, try the mif2tab utility from 
>> http://mitab.maptools.org/
>> OGR's Mitab driver is based on the same library.
>>
>> On Sat, Jul 16, 2011 at 3:34 PM, Zoltan Szecsei 
>> <zoltans@geograph.co.za <mailto:zoltans@geograph.co.za>> wrote:
>>
>>     Hi,
>>     I'm converting a bunch of MID-MIF files to TAB format, and one of
>>     them gives:
>>     ERROR 6: Error during reading Record.
>>
>>     google comes up with:  CreateField() not supported by this layer
>>
>>     So I check the mif headers and they seem fine, and contain 240
>>     POINT records with schema layout of 43 fields.
>>     The mid file has 10080 commas in it, so that suggests the correct
>>     number of fields, as there are 240 records in it.
>>     So that leaves most likely a field type error, which is not so
>>     quick to check.
>>
>>     Can someone please pass comment on this error?
>>     Is it a show-stopper, or is only the faulty record skipped and
>>     the rest of the file translated?
>>
>>     The MID/MIF files together are small (some 75KB), so I can attach
>>     them if someone is interested.
>>
>>     Any ideas gladly welcome.
>>     Perhaps future releases of ogr2ogr could include the filename &
>>     record number in the error message?
>>
>>     TIA,
>>     Zoltan
>>
>>
>>     -- 
>>
>>     ===========================================
>>     Zoltan Szecsei PrGISc [PGP0031]
>>     Geograph (Pty) Ltd.
>>     P.O. Box 7, Muizenberg 7950, South Africa.
>>
>>     65 Main Road, Muizenberg 7945
>>     Western Cape, South Africa.
>>
>>     34? 6'16.35"S 18?28'5.62"E
>>
>>     Tel: +27-21-7884897  Mobile: +27-83-6004028
>>     Fax: +27-86-6115323 www.geograph.co.za <http://www.geograph.co.za>
>>     ===========================================
>>
>>     _______________________________________________
>>     gdal-dev mailing list
>>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>> -- 
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>
>
> -- 
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897  Mobile: +27-83-6004028
> Fax: +27-86-6115323www.geograph.co.za
> ===========================================
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110716/1607b8be/attachment.html
From even.rouault at mines-paris.org  Sat Jul 16 10:01:47 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 17 02:06:32 2011
Subject: [gdal-dev] Current status of Android port w/ SWIG bindings?
	Seeking and offering help.
In-Reply-To: <B1B624F7C110834B96594065A74F3A54130092A1@gemini.rsinc.com>
References: <B1B624F7C110834B96594065A74F3A54130092A1@gemini.rsinc.com>
Message-ID: <1310824907.4e2199cba3a7b@webmail.free.fr>

Selon Jim Pendleton <jimp@ittvis.com>:

I don't know anything about the particularities of Android, but the normal
procedure to build the GDAL Java bindings is running 'make' from the swig/java
directory. The swig/java/GNUmakefile should link the *jni.so files with libgdal.
You might need potentially to tweak it if there's something specific to Android.

> Hello all,
>
> I'm new to GDAL, but I've taken on a task of extending some of our
> GDAL-oriented tools that work in the desktop environment to Android.
>
>
>
> With the help of the info on
> http://trac.osgeo.org/gdal/wiki/BuildingForAndroid I've made it as far
> as building a libgdal file for Android under both RedHat 5 and, with
> some pain, WinXP64.
>
>
>
> However, what I'm really after are the swig bindings and associated JNI
> layer for Java.
>
>
>
> Since this particular subject is listed as a "TODO" at the bottom of the
> wiki page, my assumption is that this is an active subject of
> investigation by one or more people on this list.
>
>
>
> I'm using the GDAL trunk build from approximately the beginning of July
> 2011 and I would prefer to use the recently-released version 6 NDK .
>
>
>
> Since the default GNUmakefile doesn't generate them, I've manually
> created the libgdaljni.so, libgdalconstjni.so, etc., files using the
> arm-linux-androideabi-ld in the toolchain.
>
>
>
> However when I execute System.loadLibrary on libgdaljni.so in my Android
> activity, I get unresolved reference errors.  Indeed, adding a
> -lW,--no-undefined switch shows many issues when creating the .so files
> from the swig wrapper objects, which frequently reference std:: calls
> made by the format access routines in libgdal.a.
>
>
>
> I'm not a g++/c++/makefile/compiler/linker/version guru by any means,
> but I'm willing to take a serious stab at resolving the remaining
> Android JNI issues if anyone wants to fill me in on the current status
> of this investigation and where the known technical hurdles still may
> be.
>
>
>
> Thanks,
>
> Jim Pendleton
>
>
>
>
>
>
>
>
>
>


From even.rouault at mines-paris.org  Sat Jul 16 10:06:36 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 17 02:11:48 2011
Subject: [gdal-dev] build error from svn
In-Reply-To: <4E2091E5.2040507@comcast.net>
References: <4E2091E5.2040507@comcast.net>
Message-ID: <1310825196.4e219aec89570@webmail.free.fr>

Selon David Burken <dburken@comcast.net>:

Dave,

I presume you build GDAL against external libgeotiff, and not internal
libgeotiff. In any case, it is weird because cpl_serv.h should be installed when
installing libgeotiff (I've just verified it with libgeotiff from svn). So I
presume the include paths in the GDAL compilation line might miss a directory ?
Can you give more elements ?


> Hi Frank, all,
>
> Just fyi, getting build error from svn.  Looks like cpl_serv.h is gone
> now.  See below for minor patch.
>
> Take care,
> Dave
>
> $ svn update
> At revision 22725.
>
> gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
> compilation terminated.
> make[1]: *** [../o/gt_wkt_srs.lo] Error 1
> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
> make: *** [gtiff-install-obj] Error 2
>
> Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55
>
> Patch:
>
> svn diff frmts/gtiff/gt_wkt_srs.cpp
> Index: frmts/gtiff/gt_wkt_srs.cpp
> ===================================================================
> --- frmts/gtiff/gt_wkt_srs.cpp    (revision 22725)
> +++ frmts/gtiff/gt_wkt_srs.cpp    (working copy)
> @@ -30,7 +30,9 @@
>    * DEALINGS IN THE SOFTWARE.
>
> ****************************************************************************/
>
> -#include "cpl_serv.h"
> +// #include "cpl_serv.h"
> + #include "cpl_csv.h"
> +
>   #include "geo_tiffp.h"
>   #define CPL_ERROR_H_INCLUDED
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Sat Jul 16 15:04:56 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jul 17 07:26:24 2011
Subject: [gdal-dev] ogr2ogr ERROR 6
In-Reply-To: <4E216219.1000001@geograph.co.za>
References: <4E216219.1000001@geograph.co.za>
Message-ID: <CA+YzLBfczkzjMCm8XnYnT6h0Uroy0o1NWq0TR7nCvDWFPd9Qwg@mail.gmail.com>

Zoltan,

ERROR 6 is a generic error number, so a google on it would not be helpful.
It sounds like you got all or almost all your data, so I suppose how much you
followup will depend on how exactly you want to preserve the data.

Assuming you would like to follow up the best approach is likely to file
a ticket with the data and someone can dig into what is going wrong.

You might also find it helpful to add "--debug on" to the commandline to see
if there is any more information on what goes wrong.  From my perspective,
to look into the issue I will run the translation in the debugger, break in
CPLErrorV and track back to see what is triggering it.  The genericness of
the error message likely means some low level function is returning a failure
code and the actual problem is not clear at the point the error message is
issued.

Best regards,

On Sat, Jul 16, 2011 at 3:04 AM, Zoltan Szecsei <zoltans@geograph.co.za> wrote:
> Hi,
> I'm converting a bunch of MID-MIF files to TAB format, and one of them
> gives:
> ERROR 6: Error during reading Record.
>
> google comes up with: ?CreateField() not supported by this layer
>
> So I check the mif headers and they seem fine, and contain 240 POINT records
> with schema layout of 43 fields.
> The mid file has 10080 commas in it, so that suggests the correct number of
> fields, as there are 240 records in it.
> So that leaves most likely a field type error, which is not so quick to
> check.
>
> Can someone please pass comment on this error?
> Is it a show-stopper, or is only the faulty record skipped and the rest of
> the file translated?
>
> The MID/MIF files together are small (some 75KB), so I can attach them if
> someone is interested.
>
> Any ideas gladly welcome.
> Perhaps future releases of ogr2ogr could include the filename & record
> number in the error message?
>
> TIA,
> Zoltan
>
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897 ?Mobile: +27-83-6004028
> Fax: +27-86-6115323 ? ? www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Sat Jul 16 15:12:24 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jul 17 07:34:06 2011
Subject: [gdal-dev] build error from svn
In-Reply-To: <1310825196.4e219aec89570@webmail.free.fr>
References: <4E2091E5.2040507@comcast.net>
	<1310825196.4e219aec89570@webmail.free.fr>
Message-ID: <CA+YzLBdvheb8=f9yZeuMieBa6dV49UmoR7B9hzS0V8o+WSFcjA@mail.gmail.com>

Folks,

I should have mentioned more widely, I have written up a ticket on
this issue at:

  http://trac.osgeo.org/gdal/ticket/4162

I presume the problem occurs with an external libgeotiff but haven't yet tried
to reproduce the problem.

Best regards,

On Sat, Jul 16, 2011 at 7:06 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Selon David Burken <dburken@comcast.net>:
>
> Dave,
>
> I presume you build GDAL against external libgeotiff, and not internal
> libgeotiff. In any case, it is weird because cpl_serv.h should be installed when
> installing libgeotiff (I've just verified it with libgeotiff from svn). So I
> presume the include paths in the GDAL compilation line might miss a directory ?
> Can you give more elements ?
>
>
>> Hi Frank, all,
>>
>> Just fyi, getting build error from svn. ?Looks like cpl_serv.h is gone
>> now. ?See below for minor patch.
>>
>> Take care,
>> Dave
>>
>> $ svn update
>> At revision 22725.
>>
>> gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
>> compilation terminated.
>> make[1]: *** [../o/gt_wkt_srs.lo] Error 1
>> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
>> make: *** [gtiff-install-obj] Error 2
>>
>> Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55
>>
>> Patch:
>>
>> svn diff frmts/gtiff/gt_wkt_srs.cpp
>> Index: frmts/gtiff/gt_wkt_srs.cpp
>> ===================================================================
>> --- frmts/gtiff/gt_wkt_srs.cpp ? ?(revision 22725)
>> +++ frmts/gtiff/gt_wkt_srs.cpp ? ?(working copy)
>> @@ -30,7 +30,9 @@
>> ? ?* DEALINGS IN THE SOFTWARE.
>>
>> ****************************************************************************/
>>
>> -#include "cpl_serv.h"
>> +// #include "cpl_serv.h"
>> + #include "cpl_csv.h"
>> +
>> ? #include "geo_tiffp.h"
>> ? #define CPL_ERROR_H_INCLUDED
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From thakkar at nexgenwireless.com  Sat Jul 16 17:40:54 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Sun Jul 17 10:10:38 2011
Subject: [gdal-dev] GDAL unable to recognize large GRC file
Message-ID: <1310852454935-6590399.post@n2.nabble.com>

I have a large (>500MB) GRC file that is not being read by GDAL correctly.

*[me@server data]$ gdalinfo filename.grc
ERROR 4: `filename.grc' not recognised as a supported file format.

gdalinfo failed - unable to open 'filename.grc'.*

Is this due to the size?  I have other 200MB files that work fine.
The accompanying Mapinfo TAB file shows the following.

!table
!version 300
!charset Neutral

Definition Table
  File "filename.grc"
  Type "RASTER"
  (280380.000000,3512760.000000) (0,0) Label "Pt 1",
  (1057470.000000,2824500.000000) (25903,22942) Label "Pt 2",
  (280380.000000,2824500.000000) (0,22942) Label "Pt 3"
CoordSys Earth Projection 8,74,"m",-99,0,0.9996,500000,0
ReadOnly
begin_metadata
"\Vm\Grid" = "Character"
"\IsReadOnly" = "FALSE"
end_metadata 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-file-tp6590399p6590399.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From thakkar at nexgenwireless.com  Sat Jul 16 17:51:22 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Sun Jul 17 10:21:36 2011
Subject: [gdal-dev] pct2rgb.py errors out on large rasters with rgba option
Message-ID: <1310853082790-6590418.post@n2.nabble.com>

/usr/local/bin/pct2rgb.py -rgba raster.grc convert.tif
*Traceback (most recent call last):
  File "/usr/local/bin/pct2rgb.py", line 167, in <module>
    dst_data = Numeric.take(band_lookup,src_data)
  File "/usr/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py",
line 103, in take
    return take(indices, axis, out, mode)
IndexError: index out of range for array*

There are over 2000 categories in the file.

Any help would be appreciated.

gdalinfo shows following:
Driver: NWT_GRC/Northwood Classified Grid Format .grc/.tab
Files: raster.grc
Size is 9506, 10282
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 80",6378137,298.257222101],
            TOWGS84[0,0,0,-0,-0,-0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-93],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (111765.000000000000000,3467265.000000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Corner Coordinates:
Upper Left  (  111765.000, 3467265.000) ( 97d 4'36.80"W, 31d16'30.24"N)
Lower Left  (  111765.000, 3158805.000) ( 96d57'54.87"W, 28d29'53.39"N)
Upper Right (  396945.000, 3467265.000) ( 94d 4'59.78"W, 31d20' 6.94"N)
Lower Right (  396945.000, 3158805.000) ( 94d 3'12.66"W, 28d33' 7.18"N)
Center      (  254355.000, 3313035.000) ( 95d32'40.39"W, 29d55'24.74"N)
Band 1 Block=9506x1 Type=UInt16, ColorInterp=Palette
  NoData Value=0
  Categories:
      0: No Data
      [Over 2000 Categories listed]
Color Table (RGB with 2113 entries)
    0: 255,255,255,255
    [Rest of the entries]

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/pct2rgb-py-errors-out-on-large-rasters-with-rgba-option-tp6590418p6590418.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Sat Jul 16 18:48:11 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jul 17 11:28:30 2011
Subject: [gdal-dev] pct2rgb.py errors out on large rasters with rgba option
In-Reply-To: <1310853082790-6590418.post@n2.nabble.com>
References: <1310853082790-6590418.post@n2.nabble.com>
Message-ID: <CA+YzLBf4qzvd88vzHVkD9_rCCV8ko9gwfsTP3d18WGf4b=wT+Q@mail.gmail.com>

Hi,

I don't see any obvious reason this would fail in this fashion.  I would
suggest you try and reproduce this with a very small file with lots of classes
and then file a ticket including the data.

Best regards,

On Sat, Jul 16, 2011 at 2:51 PM, jt2000 <thakkar@nexgenwireless.com> wrote:
> /usr/local/bin/pct2rgb.py -rgba raster.grc convert.tif
> *Traceback (most recent call last):
> ?File "/usr/local/bin/pct2rgb.py", line 167, in <module>
> ? ?dst_data = Numeric.take(band_lookup,src_data)
> ?File "/usr/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py",
> line 103, in take
> ? ?return take(indices, axis, out, mode)
> IndexError: index out of range for array*
>
> There are over 2000 categories in the file.
>
> Any help would be appreciated.
>
> gdalinfo shows following:
> Driver: NWT_GRC/Northwood Classified Grid Format .grc/.tab
> Files: raster.grc
> Size is 9506, 10282
> Coordinate System is:
> PROJCS["unnamed",
> ? ?GEOGCS["unnamed",
> ? ? ? ?DATUM["North_American_Datum_1983",
> ? ? ? ? ? ?SPHEROID["GRS 80",6378137,298.257222101],
> ? ? ? ? ? ?TOWGS84[0,0,0,-0,-0,-0,0]],
> ? ? ? ?PRIMEM["Greenwich",0],
> ? ? ? ?UNIT["degree",0.0174532925199433]],
> ? ?PROJECTION["Transverse_Mercator"],
> ? ?PARAMETER["latitude_of_origin",0],
> ? ?PARAMETER["central_meridian",-93],
> ? ?PARAMETER["scale_factor",0.9996],
> ? ?PARAMETER["false_easting",500000],
> ? ?PARAMETER["false_northing",0],
> ? ?UNIT["Meter",1]]
> Origin = (111765.000000000000000,3467265.000000000000000)
> Pixel Size = (30.000000000000000,-30.000000000000000)
> Corner Coordinates:
> Upper Left ?( ?111765.000, 3467265.000) ( 97d 4'36.80"W, 31d16'30.24"N)
> Lower Left ?( ?111765.000, 3158805.000) ( 96d57'54.87"W, 28d29'53.39"N)
> Upper Right ( ?396945.000, 3467265.000) ( 94d 4'59.78"W, 31d20' 6.94"N)
> Lower Right ( ?396945.000, 3158805.000) ( 94d 3'12.66"W, 28d33' 7.18"N)
> Center ? ? ?( ?254355.000, 3313035.000) ( 95d32'40.39"W, 29d55'24.74"N)
> Band 1 Block=9506x1 Type=UInt16, ColorInterp=Palette
> ?NoData Value=0
> ?Categories:
> ? ? ?0: No Data
> ? ? ?[Over 2000 Categories listed]
> Color Table (RGB with 2113 entries)
> ? ?0: 255,255,255,255
> ? ?[Rest of the entries]
>
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/pct2rgb-py-errors-out-on-large-rasters-with-rgba-option-tp6590418p6590418.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From lgreenlee at digitalresultsgroup.com  Sat Jul 16 23:49:39 2011
From: lgreenlee at digitalresultsgroup.com (Logan Greenlee)
Date: Sun Jul 17 16:41:36 2011
Subject: [gdal-dev] NTF/JPEG2000 Question
Message-ID: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>

I'm not sure if this is the right venue - please direct me to another list.

I am having an issue processing DigitalGlobe NTF/JPEG2000 imagery with GDAL and MapServer.

I am currently using Version 1.8.1 MSVC2008 (Win64) -release with mapserver 6.0.1 found here:

http://www.gisinternals.com/sdk/

I also have an older GDAL version 1.6.0dev provided by an old install of FWTools.

I have found that there is a fairly significant difference between the two versions in the way that they handle NTF/JPEG2000 imagery from digital globe.

The issue that I am having is that 1.6.0 properly displays the four corner points of the image. Version 1.8.1 does not dispalay, and instead displays the GCP points. The GCP points look correct but the image does not render correctly using shp2img from map server. It uses the corrdinate system that is shown below which is pixel relative.

Here is the gdalinfo output from 1.8.1

>gdalinfo img_1.NTF
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_BAG.dll using GDALRegister_B
AG.
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_FITS.dll using GDALRegister_
FITS.
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_GMT.dll using GDALRegister_G
MT.
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_HDF5.dll using GDALRegister_
HDF5.
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_HDF5Image.dll using GDALRegi
ster_HDF5Image.
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_MrSID.dll using GDALRegister
_MrSID.
GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_netCDF.dll using GDALRegiste
r_netCDF.
GDAL: GDALOpen(/vsisubfile/3958_401263470,img_1.NTF, this=00000000037E0C40) succeeds as JP2OpenJPEG.
GDAL: NITFDataset::Open() wasn't able to derive a first order
geotransform.  It will be returned as GCPs.
GDAL: GDALOpen(img_1.NTF, this=0000000000C2C23
0) succeeds as NITF.
Driver: NITF/National Imagery Transmission Format
GDAL: GDALDefaultOverviews::OverviewScan()

... stuff ...

Resulting corner coordinates:

Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0, 7168.0)
Upper Right ( 9216.0,    0.0)
Lower Right ( 9216.0, 7168.0)
Center      ( 4608.0, 3584.0)
Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
GDAL: GDALDefaultOverviews::OverviewScan()
Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Blue
Band 3 Block=1024x1024 Type=UInt16, ColorInterp=Green
Band 4 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
Band 5 Block=1024x1024 Type=UInt16, ColorInterp=Red
Band 6 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
Band 7 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
Band 8 Block=1024x1024 Type=UInt16, ColorInterp=Undefined


The GCP's appear correct.


>gdalinfo --version
GDAL 1.6.0dev, FWTools 2.2.8, released 2008/10/29

gdalinfo img_1.NTF
Warning 1: Image with 11 bits per sample will not be interpreted properly.
Driver: NITF/National Imagery Transmission Format
Files: img_1.NTF
Size is 9216, 7168
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
GeoTransform =
  -114.3414689117551, 2.117622234280029e-005, -1.937894360779166e-008
  33.34084229934283, 1.175619461023539e-006, -1.910763840441486e-005
Metadata:
  NITF_FHDR=NITF02.10

... stuff ....

Image Structure Metadata:
  COMPRESSION=JPEG2000
RPC Metadata:
  LINE_OFF=3425
  LINE_SCALE=3525
  SAMP_OFF=4412
  SAMP_SCALE=4450
  LONG_OFF=-114.2441
  LONG_SCALE=0.0979
  LAT_OFF=33.2772
  LAT_SCALE=0.0742
  HEIGHT_OFF=518
  HEIGHT_SCALE=500
  MIN_LONG=-114.29305
  MAX_LONG=-114.19515
  MIN_LAT=33.2401
  MAX_LAT=33.3143
Corner Coordinates:
Upper Left  (-114.3414689,  33.3408423) (114d20'29.29"W, 33d20'27.03"N)
Lower Left  (-114.3416078,  33.2038787) (114d20'29.79"W, 33d12'13.96"N)
Upper Right (-114.1463088,  33.3516768) (114d 8'46.71"W, 33d21'6.04"N)
Lower Right (-114.1464478,  33.2147133) (114d 8'47.21"W, 33d12'52.97"N)
Center      (-114.2439583,  33.2777778) (114d14'38.25"W, 33d16'40.00"N)
Band 1 Block=9216x1 Type=UInt16, ColorInterp=Undefined
  Overviews: arbitrary
Band 2 Block=9216x1 Type=UInt16, ColorInterp=Blue
  Overviews: arbitrary
Band 3 Block=9216x1 Type=UInt16, ColorInterp=Green
  Overviews: arbitrary
Band 4 Block=9216x1 Type=UInt16, ColorInterp=Undefined
  Overviews: arbitrary
Band 5 Block=9216x1 Type=UInt16, ColorInterp=Red
  Overviews: arbitrary
Band 6 Block=9216x1 Type=UInt16, ColorInterp=Undefined
  Overviews: arbitrary
Band 7 Block=9216x1 Type=UInt16, ColorInterp=Undefined
  Overviews: arbitrary
Band 8 Block=9216x1 Type=UInt16, ColorInterp=Undefined
  Overviews: arbitrary

Any help would be appreciated!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110716/9184a5ea/attachment.html
From chaitanya.ch at gmail.com  Sun Jul 17 04:03:33 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jul 17 21:08:06 2011
Subject: [gdal-dev] GDAL unable to recognize large GRC file
In-Reply-To: <1310852454935-6590399.post@n2.nabble.com>
References: <1310852454935-6590399.post@n2.nabble.com>
Message-ID: <CAMKgpOZYVhq6izger+1oqFHVDKaVqTYNi==SsSnuKx0GB08_iw@mail.gmail.com>

jt,

The .tab file is only used for the projection info.

Were you able to open the file with any other application?
Please check for any extra error messages with the CPL_DEBUG environment
variable set to ON.

On Sun, Jul 17, 2011 at 3:10 AM, jt2000 <thakkar@nexgenwireless.com> wrote:

> I have a large (>500MB) GRC file that is not being read by GDAL correctly.
>
> *[me@server data]$ gdalinfo filename.grc
> ERROR 4: `filename.grc' not recognised as a supported file format.
>
> gdalinfo failed - unable to open 'filename.grc'.*
>
> Is this due to the size?  I have other 200MB files that work fine.
> The accompanying Mapinfo TAB file shows the following.
>
> !table
> !version 300
> !charset Neutral
>
> Definition Table
>  File "filename.grc"
>  Type "RASTER"
>  (280380.000000,3512760.000000) (0,0) Label "Pt 1",
>  (1057470.000000,2824500.000000) (25903,22942) Label "Pt 2",
>  (280380.000000,2824500.000000) (0,22942) Label "Pt 3"
> CoordSys Earth Projection 8,74,"m",-99,0,0.9996,500000,0
> ReadOnly
> begin_metadata
> "\Vm\Grid" = "Character"
> "\IsReadOnly" = "FALSE"
> end_metadata
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-file-tp6590399p6590399.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110717/7d9e8182/attachment.html
From even.rouault at mines-paris.org  Sun Jul 17 05:34:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 17 22:43:58 2011
Subject: [gdal-dev] NTF/JPEG2000 Question
In-Reply-To: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>
References: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>
Message-ID: <1310895250.4e22ac9275e1c@webmail.free.fr>

Selon Logan Greenlee <lgreenlee@digitalresultsgroup.com>:

I think that in older GDAL versions the NITF driver was computing an approximate
geotransform even if it is was not always accurate. Now the driver must be more
careful and return GCPs when returning the geotransform wouldn't be appropriate.
One option to use this image in mapserver is to use gdalwarp to produce an image
with a geotransform.

You didn't include the GCPs in your output of gdalinfo. It would have helped to
evaluate if the behaviour is consistant or not.

> I'm not sure if this is the right venue - please direct me to another list.
>
> I am having an issue processing DigitalGlobe NTF/JPEG2000 imagery with GDAL
> and MapServer.
>
> I am currently using Version 1.8.1 MSVC2008 (Win64) -release with mapserver
> 6.0.1 found here:
>
> http://www.gisinternals.com/sdk/
>
> I also have an older GDAL version 1.6.0dev provided by an old install of
> FWTools.
>
> I have found that there is a fairly significant difference between the two
> versions in the way that they handle NTF/JPEG2000 imagery from digital globe.
>
> The issue that I am having is that 1.6.0 properly displays the four corner
> points of the image. Version 1.8.1 does not dispalay, and instead displays
> the GCP points. The GCP points look correct but the image does not render
> correctly using shp2img from map server. It uses the corrdinate system that
> is shown below which is pixel relative.
>
> Here is the gdalinfo output from 1.8.1
>
> >gdalinfo img_1.NTF
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_BAG.dll using
> GDALRegister_B
> AG.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_FITS.dll using
> GDALRegister_
> FITS.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_GMT.dll using
> GDALRegister_G
> MT.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_HDF5.dll using
> GDALRegister_
> HDF5.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_HDF5Image.dll using
> GDALRegi
> ster_HDF5Image.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_MrSID.dll using
> GDALRegister
> _MrSID.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_netCDF.dll using
> GDALRegiste
> r_netCDF.
> GDAL: GDALOpen(/vsisubfile/3958_401263470,img_1.NTF, this=00000000037E0C40)
> succeeds as JP2OpenJPEG.
> GDAL: NITFDataset::Open() wasn't able to derive a first order
> geotransform.  It will be returned as GCPs.
> GDAL: GDALOpen(img_1.NTF, this=0000000000C2C23
> 0) succeeds as NITF.
> Driver: NITF/National Imagery Transmission Format
> GDAL: GDALDefaultOverviews::OverviewScan()
>
> ... stuff ...
>
> Resulting corner coordinates:
>
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 7168.0)
> Upper Right ( 9216.0,    0.0)
> Lower Right ( 9216.0, 7168.0)
> Center      ( 4608.0, 3584.0)
> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
> GDAL: GDALDefaultOverviews::OverviewScan()
> Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Blue
> Band 3 Block=1024x1024 Type=UInt16, ColorInterp=Green
> Band 4 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
> Band 5 Block=1024x1024 Type=UInt16, ColorInterp=Red
> Band 6 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
> Band 7 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
> Band 8 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
>
>
> The GCP's appear correct.
>
>
> >gdalinfo --version
> GDAL 1.6.0dev, FWTools 2.2.8, released 2008/10/29
>
> gdalinfo img_1.NTF
> Warning 1: Image with 11 bits per sample will not be interpreted properly.
> Driver: NITF/National Imagery Transmission Format
> Files: img_1.NTF
> Size is 9216, 7168
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4326"]]
> GeoTransform =
>   -114.3414689117551, 2.117622234280029e-005, -1.937894360779166e-008
>   33.34084229934283, 1.175619461023539e-006, -1.910763840441486e-005
> Metadata:
>   NITF_FHDR=NITF02.10
>
> ... stuff ....
>
> Image Structure Metadata:
>   COMPRESSION=JPEG2000
> RPC Metadata:
>   LINE_OFF=3425
>   LINE_SCALE=3525
>   SAMP_OFF=4412
>   SAMP_SCALE=4450
>   LONG_OFF=-114.2441
>   LONG_SCALE=0.0979
>   LAT_OFF=33.2772
>   LAT_SCALE=0.0742
>   HEIGHT_OFF=518
>   HEIGHT_SCALE=500
>   MIN_LONG=-114.29305
>   MAX_LONG=-114.19515
>   MIN_LAT=33.2401
>   MAX_LAT=33.3143
> Corner Coordinates:
> Upper Left  (-114.3414689,  33.3408423) (114d20'29.29"W, 33d20'27.03"N)
> Lower Left  (-114.3416078,  33.2038787) (114d20'29.79"W, 33d12'13.96"N)
> Upper Right (-114.1463088,  33.3516768) (114d 8'46.71"W, 33d21'6.04"N)
> Lower Right (-114.1464478,  33.2147133) (114d 8'47.21"W, 33d12'52.97"N)
> Center      (-114.2439583,  33.2777778) (114d14'38.25"W, 33d16'40.00"N)
> Band 1 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 2 Block=9216x1 Type=UInt16, ColorInterp=Blue
>   Overviews: arbitrary
> Band 3 Block=9216x1 Type=UInt16, ColorInterp=Green
>   Overviews: arbitrary
> Band 4 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 5 Block=9216x1 Type=UInt16, ColorInterp=Red
>   Overviews: arbitrary
> Band 6 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 7 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 8 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
>
> Any help would be appreciated!
>


From even.rouault at mines-paris.org  Sun Jul 17 05:40:12 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 17 22:50:19 2011
Subject: [gdal-dev] pct2rgb.py errors out on large rasters with rgba option
In-Reply-To: <1310853082790-6590418.post@n2.nabble.com>
References: <1310853082790-6590418.post@n2.nabble.com>
Message-ID: <1310895612.4e22adfcb2159@webmail.free.fr>

Selon jt2000 <thakkar@nexgenwireless.com>:

> /usr/local/bin/pct2rgb.py -rgba raster.grc convert.tif
> *Traceback (most recent call last):
>   File "/usr/local/bin/pct2rgb.py", line 167, in <module>
>     dst_data = Numeric.take(band_lookup,src_data)
>   File "/usr/local/lib/python2.7/site-packages/numpy/core/fromnumeric.py",
> line 103, in take
>     return take(indices, axis, out, mode)
> IndexError: index out of range for array*
>
> There are over 2000 categories in the file.
>
> Any help would be appreciated.

This could occur if some pixel in the imagery data has a value that is not
included in the color table (categories are not used by pct2rgb.py). Indeed it
is possible since your image is of type UInt16, so values can range from 0 to
65535, but the color table has only 2113 entries. This might be a bug in the
driver, or an error in the image...

>
> gdalinfo shows following:
> Driver: NWT_GRC/Northwood Classified Grid Format .grc/.tab
> Files: raster.grc
> Size is 9506, 10282
> Coordinate System is:
> PROJCS["unnamed",
>     GEOGCS["unnamed",
>         DATUM["North_American_Datum_1983",
>             SPHEROID["GRS 80",6378137,298.257222101],
>             TOWGS84[0,0,0,-0,-0,-0,0]],
>         PRIMEM["Greenwich",0],
>         UNIT["degree",0.0174532925199433]],
>     PROJECTION["Transverse_Mercator"],
>     PARAMETER["latitude_of_origin",0],
>     PARAMETER["central_meridian",-93],
>     PARAMETER["scale_factor",0.9996],
>     PARAMETER["false_easting",500000],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1]]
> Origin = (111765.000000000000000,3467265.000000000000000)
> Pixel Size = (30.000000000000000,-30.000000000000000)
> Corner Coordinates:
> Upper Left  (  111765.000, 3467265.000) ( 97d 4'36.80"W, 31d16'30.24"N)
> Lower Left  (  111765.000, 3158805.000) ( 96d57'54.87"W, 28d29'53.39"N)
> Upper Right (  396945.000, 3467265.000) ( 94d 4'59.78"W, 31d20' 6.94"N)
> Lower Right (  396945.000, 3158805.000) ( 94d 3'12.66"W, 28d33' 7.18"N)
> Center      (  254355.000, 3313035.000) ( 95d32'40.39"W, 29d55'24.74"N)
> Band 1 Block=9506x1 Type=UInt16, ColorInterp=Palette
>   NoData Value=0
>   Categories:
>       0: No Data
>       [Over 2000 Categories listed]
> Color Table (RGB with 2113 entries)
>     0: 255,255,255,255
>     [Rest of the entries]
>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/pct2rgb-py-errors-out-on-large-rasters-with-rgba-option-tp6590418p6590418.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From lgreenlee at digitalresultsgroup.com  Sun Jul 17 11:16:10 2011
From: lgreenlee at digitalresultsgroup.com (Logan Greenlee)
Date: Mon Jul 18 04:44:42 2011
Subject: [gdal-dev] NTF/JPEG2000 Question
In-Reply-To: <1310895250.4e22ac9275e1c@webmail.free.fr>
References: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>
	<1310895250.4e22ac9275e1c@webmail.free.fr>
Message-ID: <79F22FBD4490334CA35805920724DBDF03A9AEE508FD@exchange-64-001.digitalresultsgroup.com>

Sorry - here are the GCP's:

Size is 9216, 7168
Coordinate System is `'
GCP Projection =
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AUTHORITY["EPSG","4326"]]
GCP[  0]: Id=UpperLeft, Info=
          (0.5,0.5) -> (-114.341666666667,33.3408333333333,0)
GCP[  1]: Id=UpperRight, Info=
          (9215.5,0.5) -> (-114.146111111111,33.3516666666667,0)
GCP[  2]: Id=LowerRight, Info=
          (9215.5,7167.5) -> (-114.146666666667,33.2147222222222,0)
GCP[  3]: Id=LowerLeft, Info=
          (0.5,7167.5) -> (-114.341388888889,33.2038888888889,0)

Is there any particular reason mapserver can't use the GCP's for display? Is it that they are not necessarily corner points of the image?

Thanks!
Logan

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Sunday, July 17, 2011 05:34
To: Logan Greenlee
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] NTF/JPEG2000 Question

Selon Logan Greenlee <lgreenlee@digitalresultsgroup.com>:

I think that in older GDAL versions the NITF driver was computing an approximate geotransform even if it is was not always accurate. Now the driver must be more careful and return GCPs when returning the geotransform wouldn't be appropriate.
One option to use this image in mapserver is to use gdalwarp to produce an image with a geotransform.

You didn't include the GCPs in your output of gdalinfo. It would have helped to evaluate if the behaviour is consistant or not.

> I'm not sure if this is the right venue - please direct me to another list.
>
> I am having an issue processing DigitalGlobe NTF/JPEG2000 imagery with 
> GDAL and MapServer.
>
> I am currently using Version 1.8.1 MSVC2008 (Win64) -release with 
> mapserver
> 6.0.1 found here:
>
> http://www.gisinternals.com/sdk/
>
> I also have an older GDAL version 1.6.0dev provided by an old install 
> of FWTools.
>
> I have found that there is a fairly significant difference between the 
> two versions in the way that they handle NTF/JPEG2000 imagery from digital globe.
>
> The issue that I am having is that 1.6.0 properly displays the four 
> corner points of the image. Version 1.8.1 does not dispalay, and 
> instead displays the GCP points. The GCP points look correct but the 
> image does not render correctly using shp2img from map server. It uses 
> the corrdinate system that is shown below which is pixel relative.
>
> Here is the gdalinfo output from 1.8.1
>
> >gdalinfo img_1.NTF
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_BAG.dll using 
> GDALRegister_B AG.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_FITS.dll using 
> GDALRegister_ FITS.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_GMT.dll using 
> GDALRegister_G MT.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_HDF5.dll using 
> GDALRegister_ HDF5.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_HDF5Image.dll 
> using GDALRegi ster_HDF5Image.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_MrSID.dll using 
> GDALRegister _MrSID.
> GDAL: Auto register C:\GDALMS\bin\gdal\plugins\gdal_netCDF.dll using 
> GDALRegiste r_netCDF.
> GDAL: GDALOpen(/vsisubfile/3958_401263470,img_1.NTF, 
> this=00000000037E0C40) succeeds as JP2OpenJPEG.
> GDAL: NITFDataset::Open() wasn't able to derive a first order 
> geotransform.  It will be returned as GCPs.
> GDAL: GDALOpen(img_1.NTF, this=0000000000C2C23
> 0) succeeds as NITF.
> Driver: NITF/National Imagery Transmission Format
> GDAL: GDALDefaultOverviews::OverviewScan()
>
> ... stuff ...
>
> Resulting corner coordinates:
>
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0, 7168.0)
> Upper Right ( 9216.0,    0.0)
> Lower Right ( 9216.0, 7168.0)
> Center      ( 4608.0, 3584.0)
> Band 1 Block=1024x1024 Type=UInt16, ColorInterp=Undefined
> GDAL: GDALDefaultOverviews::OverviewScan()
> Band 2 Block=1024x1024 Type=UInt16, ColorInterp=Blue Band 3 
> Block=1024x1024 Type=UInt16, ColorInterp=Green Band 4 Block=1024x1024 
> Type=UInt16, ColorInterp=Undefined Band 5 Block=1024x1024 Type=UInt16, 
> ColorInterp=Red Band 6 Block=1024x1024 Type=UInt16, 
> ColorInterp=Undefined Band 7 Block=1024x1024 Type=UInt16, 
> ColorInterp=Undefined Band 8 Block=1024x1024 Type=UInt16, 
> ColorInterp=Undefined
>
>
> The GCP's appear correct.
>
>
> >gdalinfo --version
> GDAL 1.6.0dev, FWTools 2.2.8, released 2008/10/29
>
> gdalinfo img_1.NTF
> Warning 1: Image with 11 bits per sample will not be interpreted properly.
> Driver: NITF/National Imagery Transmission Format
> Files: img_1.NTF
> Size is 9216, 7168
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4326"]]
> GeoTransform =
>   -114.3414689117551, 2.117622234280029e-005, -1.937894360779166e-008
>   33.34084229934283, 1.175619461023539e-006, -1.910763840441486e-005
> Metadata:
>   NITF_FHDR=NITF02.10
>
> ... stuff ....
>
> Image Structure Metadata:
>   COMPRESSION=JPEG2000
> RPC Metadata:
>   LINE_OFF=3425
>   LINE_SCALE=3525
>   SAMP_OFF=4412
>   SAMP_SCALE=4450
>   LONG_OFF=-114.2441
>   LONG_SCALE=0.0979
>   LAT_OFF=33.2772
>   LAT_SCALE=0.0742
>   HEIGHT_OFF=518
>   HEIGHT_SCALE=500
>   MIN_LONG=-114.29305
>   MAX_LONG=-114.19515
>   MIN_LAT=33.2401
>   MAX_LAT=33.3143
> Corner Coordinates:
> Upper Left  (-114.3414689,  33.3408423) (114d20'29.29"W, 
> 33d20'27.03"N) Lower Left  (-114.3416078,  33.2038787) 
> (114d20'29.79"W, 33d12'13.96"N) Upper Right (-114.1463088,  
> 33.3516768) (114d 8'46.71"W, 33d21'6.04"N) Lower Right (-114.1464478,  33.2147133) (114d 8'47.21"W, 33d12'52.97"N)
> Center      (-114.2439583,  33.2777778) (114d14'38.25"W, 33d16'40.00"N)
> Band 1 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 2 Block=9216x1 Type=UInt16, ColorInterp=Blue
>   Overviews: arbitrary
> Band 3 Block=9216x1 Type=UInt16, ColorInterp=Green
>   Overviews: arbitrary
> Band 4 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 5 Block=9216x1 Type=UInt16, ColorInterp=Red
>   Overviews: arbitrary
> Band 6 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 7 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
> Band 8 Block=9216x1 Type=UInt16, ColorInterp=Undefined
>   Overviews: arbitrary
>
> Any help would be appreciated!
>


From warmerdam at pobox.com  Sun Jul 17 11:32:37 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jul 18 05:01:56 2011
Subject: [gdal-dev] NTF/JPEG2000 Question
In-Reply-To: <79F22FBD4490334CA35805920724DBDF03A9AEE508FD@exchange-64-001.digitalresultsgroup.com>
References: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>
	<1310895250.4e22ac9275e1c@webmail.free.fr>
	<79F22FBD4490334CA35805920724DBDF03A9AEE508FD@exchange-64-001.digitalresultsgroup.com>
Message-ID: <CA+YzLBc1EpvTzqtokwaCe0Vkb-=BoV1u+FPGwCc9Y9QKrrL3HA@mail.gmail.com>

On Sun, Jul 17, 2011 at 8:16 AM, Logan Greenlee
<lgreenlee@digitalresultsgroup.com> wrote:
> Sorry - here are the GCP's:
...
> Is there any particular reason mapserver can't use the GCP's for display? Is it that they are not necessarily corner points of the image?

Logan,

It is just not a feature of MapServer to support warping
(rubber sheeting) of images on the fly based on GCPs.  It
would be fairly computationally expensive to do this so I
deemed it not very useful in MapServer.  It also isn't something
I've seen requested often.

However, MapServer does support reprojecting images on
the fly which is similarly computationally expensive, so it
might make sense to add a mechanism to MapServer to use
gdal transformers (such as polynomial warping using GCPs)
as an option. It would require some development.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From dburken at comcast.net  Sun Jul 17 13:01:59 2011
From: dburken at comcast.net (David Burken)
Date: Mon Jul 18 06:36:18 2011
Subject: [gdal-dev] build error from svn
In-Reply-To: <CA+YzLBdvheb8=f9yZeuMieBa6dV49UmoR7B9hzS0V8o+WSFcjA@mail.gmail.com>
References: <4E2091E5.2040507@comcast.net>	<1310825196.4e219aec89570@webmail.free.fr>
	<CA+YzLBdvheb8=f9yZeuMieBa6dV49UmoR7B9hzS0V8o+WSFcjA@mail.gmail.com>
Message-ID: <4E231587.9070309@comcast.net>

Even,
See below with more info, looks like there are multiple defined things 
including external cpl_serv.h.  Hope this helps.
Dave


On 07/16/2011 03:12 PM, Frank Warmerdam wrote:
> Folks,
>
> I should have mentioned more widely, I have written up a ticket on
> this issue at:
>
>    http://trac.osgeo.org/gdal/ticket/4162
>
> I presume the problem occurs with an external libgeotiff but haven't yet tried
> to reproduce the problem.
>
> Best regards,
>
> On Sat, Jul 16, 2011 at 7:06 AM, Even Rouault
> <even.rouault@mines-paris.org>  wrote:
>> Selon David Burken<dburken@comcast.net>:
>>
>> Dave,
>>
>> I presume you build GDAL against external libgeotiff, and not internal
>> libgeotiff. In any case, it is weird because cpl_serv.h should be installed when
>> installing libgeotiff (I've just verified it with libgeotiff from svn). So I
>> presume the include paths in the GDAL compilation line might miss a directory ?
>> Can you give more elements ?
>>
I have a third party directory that I install libtiff, libgeotiff, geos, 
proj4 to.   It's "/work/osgeo/local".  To avoid confusion I totally 
removed my /work/osgeo/local/include directory and did make installs 
from scratch.  This is a Fedora 14 build.

My gdal is configured with:

#!/bin/sh
# File: mygdalconfig.sh
# Note: Python needed for QGIS.
prefix=/work/osgeo/local
./configure --prefix=${prefix} --with-kakadu=/work/drb/kakadu/latest 
--with-geos=/work/osgeo/local/bin/geos-config 
--with-libtiff=/work/osgeo/local --with-geotiff=/work/osgeo/local 
--with-mrsid=/work/drb/mrsid/Geo_DSDK-7.0.0.2167 --with-python

$ svn update
At revision 22734.
$ svn status
?       mygdalconfig.sh  // my gdal configure script only

$ make
libtool: compile:  g++ -g -O2 -Wall -I/work/osgeo/gdal/port 
-I/work/osgeo/gdal/gcore -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr 
-I/work/osgeo/gdal/ogr/ogrsf_frmts -DBIGTIFF_SUPPORT -DOGR_ENABLED 
-D_REENTRANT -I/work/osgeo/gdal/port -I/work/osgeo/local/include 
-I/work/osgeo/local/include -c gt_wkt_srs.cpp  -fPIC -DPIC -o 
../o/.libs/gt_wkt_srs.o
In file included from /work/osgeo/gdal/port/cpl_port.h:83:0,
                  from /work/osgeo/gdal/ogr/ogr_core.h:33,
                  from /work/osgeo/gdal/ogr/ogr_srs_api.h:34,
                  from /work/osgeo/gdal/ogr/ogr_spatialref.h:34,
                  from gt_wkt_srs.cpp:38:
/work/osgeo/gdal/port/cpl_config.h:106:0: warning: "HAVE_STDLIB_H" redefined
/work/osgeo/local/include/geo_config.h:5:0: note: this is the location 
of the previous definition
/work/osgeo/gdal/port/cpl_config.h:112:0: warning: "HAVE_STRING_H" redefined
/work/osgeo/local/include/geo_config.h:11:0: note: this is the location 
of the previous definition
gt_wkt_srs.cpp: In function 'int GTIFSetFromOGISDefn(GTIF*, const char*)':
gt_wkt_srs.cpp:2018:54: error: 'CSLTestBoolean' was not declared in this 
scope
gt_wkt_srs.cpp:2083:57: error: 'CSLTestBoolean' was not declared in this 
scope
gt_wkt_srs.cpp:2206:58: error: 'CSLTestBoolean' was not declared in this 
scope
make[2]: *** [../o/gt_wkt_srs.lo] Error 1
make[2]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
make[1]: *** [gtiff-install-obj] Error 2


So I add #include "cpl_string.h" below CPL_ERROR_H_INCLUDED in 
gt_wkt_srs.cpp to pick up CSLTestBoolean and then:

make -C gtiff install-obj
make[2]: Entering directory `/home/work/osgeo/gdal/frmts/gtiff'
/bin/sh /work/osgeo/gdal/libtool --mode=compile --tag=CXX g++ -g -O2  
-Wall  -I/work/osgeo/gdal/port -I/work/osgeo/gdal/gcore 
-I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr 
-I/work/osgeo/gdal/ogr/ogrsf_frmts  -DBIGTIFF_SUPPORT -DOGR_ENABLED 
-D_REENTRANT  -I/work/osgeo/gdal/port -I/work/osgeo/local/include 
-I/work/osgeo/local/include  -c -o ../o/gt_wkt_srs.lo gt_wkt_srs.cpp
libtool: compile:  g++ -g -O2 -Wall -I/work/osgeo/gdal/port 
-I/work/osgeo/gdal/gcore -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr 
-I/work/osgeo/gdal/ogr/ogrsf_frmts -DBIGTIFF_SUPPORT -DOGR_ENABLED 
-D_REENTRANT -I/work/osgeo/gdal/port -I/work/osgeo/local/include 
-I/work/osgeo/local/include -c gt_wkt_srs.cpp  -fPIC -DPIC -o 
../o/.libs/gt_wkt_srs.o
In file included from /work/osgeo/gdal/port/cpl_port.h:83:0,
                  from /work/osgeo/gdal/port/cpl_vsi.h:34,
                  from /work/osgeo/gdal/port/cpl_string.h:34,
                  from gt_wkt_srs.cpp:37:
/work/osgeo/gdal/port/cpl_config.h:106:0: warning: "HAVE_STDLIB_H" redefined
/work/osgeo/local/include/geo_config.h:5:0: note: this is the location 
of the previous definition
/work/osgeo/gdal/port/cpl_config.h:112:0: warning: "HAVE_STRING_H" redefined
/work/osgeo/local/include/geo_config.h:11:0: note: this is the location 
of the previous definition
In file included from /work/osgeo/gdal/port/cpl_string.h:36:0,
                  from gt_wkt_srs.cpp:37:
/work/osgeo/gdal/port/cpl_conv.h:69:0: warning: "CPLFree" redefined
/work/osgeo/local/include/cpl_serv.h:163:0: note: this is the location 
of the previous definition
In file included from /work/osgeo/gdal/port/cpl_string.h:34:0,
                  from gt_wkt_srs.cpp:37:
/work/osgeo/gdal/port/cpl_vsi.h:170:17: error: declaration of C function 
'void* _GTIFcalloc(size_t*)' conflicts with
/work/osgeo/local/include/geo_tiffp.h:103:24: error: previous 
declaration 'void* _GTIFcalloc(gsize_t)' here
/work/osgeo/gdal/port/cpl_vsi.h:171:35: error: declaration of C function 
'void* _GTIFcalloc(size_t)' conflicts with
/work/osgeo/gdal/port/cpl_vsi.h:170:17: error: previous declaration 
'void* _GTIFcalloc(size_t*)' here
/work/osgeo/gdal/port/cpl_vsi.h:173:44: error: declaration of C function 
'void* _GTIFrealloc(void*, size_t)' conflicts with
/work/osgeo/local/include/geo_tiffp.h:104:24: error: previous 
declaration 'void* _GTIFrealloc(void*, gsize_t)' here
In file included from /work/osgeo/gdal/port/cpl_string.h:36:0,
                  from gt_wkt_srs.cpp:37:
/work/osgeo/gdal/port/cpl_conv.h:63:33: error: declaration of C function 
'void* gtCPLMalloc(size_t)' conflicts with
/work/osgeo/local/include/cpl_serv.h:158:15: error: previous declaration 
'void* gtCPLMalloc(int)' here
/work/osgeo/gdal/port/cpl_conv.h:64:41: error: declaration of C function 
'void* gtCPLCalloc(size_t, size_t)' conflicts with
/work/osgeo/local/include/cpl_serv.h:159:15: error: previous declaration 
'void* gtCPLCalloc(int, int)' here
/work/osgeo/gdal/port/cpl_conv.h:65:42: error: declaration of C function 
'void* gtCPLRealloc(void*, size_t)' conflicts with
/work/osgeo/local/include/cpl_serv.h:160:15: error: previous declaration 
'void* gtCPLRealloc(void*, int)' here
make[2]: *** [../o/gt_wkt_srs.lo] Error 1
make[2]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
make[1]: *** [gtiff-install-obj] Error 2
make[1]: Leaving directory `/home/work/osgeo/gdal/frmts'
make: *** [frmts-target] Error 2
$

>>> Hi Frank, all,
>>>
>>> Just fyi, getting build error from svn.  Looks like cpl_serv.h is gone
>>> now.  See below for minor patch.
>>>
>>> Take care,
>>> Dave
>>>
>>> $ svn update
>>> At revision 22725.
>>>
>>> gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
>>> compilation terminated.
>>> make[1]: *** [../o/gt_wkt_srs.lo] Error 1
>>> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
>>> make: *** [gtiff-install-obj] Error 2
>>>
>>> Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55
>>>
>>> Patch:
>>>
>>> svn diff frmts/gtiff/gt_wkt_srs.cpp
>>> Index: frmts/gtiff/gt_wkt_srs.cpp
>>> ===================================================================
>>> --- frmts/gtiff/gt_wkt_srs.cpp    (revision 22725)
>>> +++ frmts/gtiff/gt_wkt_srs.cpp    (working copy)
>>> @@ -30,7 +30,9 @@
>>>     * DEALINGS IN THE SOFTWARE.
>>>
>>> ****************************************************************************/
>>>
>>> -#include "cpl_serv.h"
>>> +// #include "cpl_serv.h"
>>> + #include "cpl_csv.h"
>>> +
>>>    #include "geo_tiffp.h"
>>>    #define CPL_ERROR_H_INCLUDED
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
From even.rouault at mines-paris.org  Sun Jul 17 13:58:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 18 07:36:00 2011
Subject: [gdal-dev] build error from svn
In-Reply-To: <4E231587.9070309@comcast.net>
References: <4E2091E5.2040507@comcast.net>
	<1310825196.4e219aec89570@webmail.free.fr>
	<CA+YzLBdvheb8=f9yZeuMieBa6dV49UmoR7B9hzS0V8o+WSFcjA@mail.gmail.com>
	<4E231587.9070309@comcast.net>
Message-ID: <1310925503.4e2322bf1a449@webmail.free.fr>

Selon David Burken <dburken@comcast.net>:

> Even,
> See below with more info, looks like there are multiple defined things
> including external cpl_serv.h.  Hope this helps.
> Dave
>

Yes, this was helpful. Should be fixed now. See
http://trac.osgeo.org/gdal/ticket/4162#comment:2

Please svn update and retry (after undoing your changes).

>
> On 07/16/2011 03:12 PM, Frank Warmerdam wrote:
> > Folks,
> >
> > I should have mentioned more widely, I have written up a ticket on
> > this issue at:
> >
> >    http://trac.osgeo.org/gdal/ticket/4162
> >
> > I presume the problem occurs with an external libgeotiff but haven't yet
> tried
> > to reproduce the problem.
> >
> > Best regards,
> >
> > On Sat, Jul 16, 2011 at 7:06 AM, Even Rouault
> > <even.rouault@mines-paris.org>  wrote:
> >> Selon David Burken<dburken@comcast.net>:
> >>
> >> Dave,
> >>
> >> I presume you build GDAL against external libgeotiff, and not internal
> >> libgeotiff. In any case, it is weird because cpl_serv.h should be
> installed when
> >> installing libgeotiff (I've just verified it with libgeotiff from svn). So
> I
> >> presume the include paths in the GDAL compilation line might miss a
> directory ?
> >> Can you give more elements ?
> >>
> I have a third party directory that I install libtiff, libgeotiff, geos,
> proj4 to.   It's "/work/osgeo/local".  To avoid confusion I totally
> removed my /work/osgeo/local/include directory and did make installs
> from scratch.  This is a Fedora 14 build.
>
> My gdal is configured with:
>
> #!/bin/sh
> # File: mygdalconfig.sh
> # Note: Python needed for QGIS.
> prefix=/work/osgeo/local
> ./configure --prefix=${prefix} --with-kakadu=/work/drb/kakadu/latest
> --with-geos=/work/osgeo/local/bin/geos-config
> --with-libtiff=/work/osgeo/local --with-geotiff=/work/osgeo/local
> --with-mrsid=/work/drb/mrsid/Geo_DSDK-7.0.0.2167 --with-python
>
> $ svn update
> At revision 22734.
> $ svn status
> ?       mygdalconfig.sh  // my gdal configure script only
>
> $ make
> libtool: compile:  g++ -g -O2 -Wall -I/work/osgeo/gdal/port
> -I/work/osgeo/gdal/gcore -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr
> -I/work/osgeo/gdal/ogr/ogrsf_frmts -DBIGTIFF_SUPPORT -DOGR_ENABLED
> -D_REENTRANT -I/work/osgeo/gdal/port -I/work/osgeo/local/include
> -I/work/osgeo/local/include -c gt_wkt_srs.cpp  -fPIC -DPIC -o
> ../o/.libs/gt_wkt_srs.o
> In file included from /work/osgeo/gdal/port/cpl_port.h:83:0,
>                   from /work/osgeo/gdal/ogr/ogr_core.h:33,
>                   from /work/osgeo/gdal/ogr/ogr_srs_api.h:34,
>                   from /work/osgeo/gdal/ogr/ogr_spatialref.h:34,
>                   from gt_wkt_srs.cpp:38:
> /work/osgeo/gdal/port/cpl_config.h:106:0: warning: "HAVE_STDLIB_H" redefined
> /work/osgeo/local/include/geo_config.h:5:0: note: this is the location
> of the previous definition
> /work/osgeo/gdal/port/cpl_config.h:112:0: warning: "HAVE_STRING_H" redefined
> /work/osgeo/local/include/geo_config.h:11:0: note: this is the location
> of the previous definition
> gt_wkt_srs.cpp: In function 'int GTIFSetFromOGISDefn(GTIF*, const char*)':
> gt_wkt_srs.cpp:2018:54: error: 'CSLTestBoolean' was not declared in this
> scope
> gt_wkt_srs.cpp:2083:57: error: 'CSLTestBoolean' was not declared in this
> scope
> gt_wkt_srs.cpp:2206:58: error: 'CSLTestBoolean' was not declared in this
> scope
> make[2]: *** [../o/gt_wkt_srs.lo] Error 1
> make[2]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
> make[1]: *** [gtiff-install-obj] Error 2
>
>
> So I add #include "cpl_string.h" below CPL_ERROR_H_INCLUDED in
> gt_wkt_srs.cpp to pick up CSLTestBoolean and then:
>
> make -C gtiff install-obj
> make[2]: Entering directory `/home/work/osgeo/gdal/frmts/gtiff'
> /bin/sh /work/osgeo/gdal/libtool --mode=compile --tag=CXX g++ -g -O2
> -Wall  -I/work/osgeo/gdal/port -I/work/osgeo/gdal/gcore
> -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr
> -I/work/osgeo/gdal/ogr/ogrsf_frmts  -DBIGTIFF_SUPPORT -DOGR_ENABLED
> -D_REENTRANT  -I/work/osgeo/gdal/port -I/work/osgeo/local/include
> -I/work/osgeo/local/include  -c -o ../o/gt_wkt_srs.lo gt_wkt_srs.cpp
> libtool: compile:  g++ -g -O2 -Wall -I/work/osgeo/gdal/port
> -I/work/osgeo/gdal/gcore -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr
> -I/work/osgeo/gdal/ogr/ogrsf_frmts -DBIGTIFF_SUPPORT -DOGR_ENABLED
> -D_REENTRANT -I/work/osgeo/gdal/port -I/work/osgeo/local/include
> -I/work/osgeo/local/include -c gt_wkt_srs.cpp  -fPIC -DPIC -o
> ../o/.libs/gt_wkt_srs.o
> In file included from /work/osgeo/gdal/port/cpl_port.h:83:0,
>                   from /work/osgeo/gdal/port/cpl_vsi.h:34,
>                   from /work/osgeo/gdal/port/cpl_string.h:34,
>                   from gt_wkt_srs.cpp:37:
> /work/osgeo/gdal/port/cpl_config.h:106:0: warning: "HAVE_STDLIB_H" redefined
> /work/osgeo/local/include/geo_config.h:5:0: note: this is the location
> of the previous definition
> /work/osgeo/gdal/port/cpl_config.h:112:0: warning: "HAVE_STRING_H" redefined
> /work/osgeo/local/include/geo_config.h:11:0: note: this is the location
> of the previous definition
> In file included from /work/osgeo/gdal/port/cpl_string.h:36:0,
>                   from gt_wkt_srs.cpp:37:
> /work/osgeo/gdal/port/cpl_conv.h:69:0: warning: "CPLFree" redefined
> /work/osgeo/local/include/cpl_serv.h:163:0: note: this is the location
> of the previous definition
> In file included from /work/osgeo/gdal/port/cpl_string.h:34:0,
>                   from gt_wkt_srs.cpp:37:
> /work/osgeo/gdal/port/cpl_vsi.h:170:17: error: declaration of C function
> 'void* _GTIFcalloc(size_t*)' conflicts with
> /work/osgeo/local/include/geo_tiffp.h:103:24: error: previous
> declaration 'void* _GTIFcalloc(gsize_t)' here
> /work/osgeo/gdal/port/cpl_vsi.h:171:35: error: declaration of C function
> 'void* _GTIFcalloc(size_t)' conflicts with
> /work/osgeo/gdal/port/cpl_vsi.h:170:17: error: previous declaration
> 'void* _GTIFcalloc(size_t*)' here
> /work/osgeo/gdal/port/cpl_vsi.h:173:44: error: declaration of C function
> 'void* _GTIFrealloc(void*, size_t)' conflicts with
> /work/osgeo/local/include/geo_tiffp.h:104:24: error: previous
> declaration 'void* _GTIFrealloc(void*, gsize_t)' here
> In file included from /work/osgeo/gdal/port/cpl_string.h:36:0,
>                   from gt_wkt_srs.cpp:37:
> /work/osgeo/gdal/port/cpl_conv.h:63:33: error: declaration of C function
> 'void* gtCPLMalloc(size_t)' conflicts with
> /work/osgeo/local/include/cpl_serv.h:158:15: error: previous declaration
> 'void* gtCPLMalloc(int)' here
> /work/osgeo/gdal/port/cpl_conv.h:64:41: error: declaration of C function
> 'void* gtCPLCalloc(size_t, size_t)' conflicts with
> /work/osgeo/local/include/cpl_serv.h:159:15: error: previous declaration
> 'void* gtCPLCalloc(int, int)' here
> /work/osgeo/gdal/port/cpl_conv.h:65:42: error: declaration of C function
> 'void* gtCPLRealloc(void*, size_t)' conflicts with
> /work/osgeo/local/include/cpl_serv.h:160:15: error: previous declaration
> 'void* gtCPLRealloc(void*, int)' here
> make[2]: *** [../o/gt_wkt_srs.lo] Error 1
> make[2]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
> make[1]: *** [gtiff-install-obj] Error 2
> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts'
> make: *** [frmts-target] Error 2
> $
>
> >>> Hi Frank, all,
> >>>
> >>> Just fyi, getting build error from svn.  Looks like cpl_serv.h is gone
> >>> now.  See below for minor patch.
> >>>
> >>> Take care,
> >>> Dave
> >>>
> >>> $ svn update
> >>> At revision 22725.
> >>>
> >>> gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
> >>> compilation terminated.
> >>> make[1]: *** [../o/gt_wkt_srs.lo] Error 1
> >>> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
> >>> make: *** [gtiff-install-obj] Error 2
> >>>
> >>> Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55
> >>>
> >>> Patch:
> >>>
> >>> svn diff frmts/gtiff/gt_wkt_srs.cpp
> >>> Index: frmts/gtiff/gt_wkt_srs.cpp
> >>> ===================================================================
> >>> --- frmts/gtiff/gt_wkt_srs.cpp    (revision 22725)
> >>> +++ frmts/gtiff/gt_wkt_srs.cpp    (working copy)
> >>> @@ -30,7 +30,9 @@
> >>>     * DEALINGS IN THE SOFTWARE.
> >>>
> >>>
> ****************************************************************************/
> >>>
> >>> -#include "cpl_serv.h"
> >>> +// #include "cpl_serv.h"
> >>> + #include "cpl_csv.h"
> >>> +
> >>>    #include "geo_tiffp.h"
> >>>    #define CPL_ERROR_H_INCLUDED
> >>>
> >>>
> >>> _______________________________________________
> >>> gdal-dev mailing list
> >>> gdal-dev@lists.osgeo.org
> >>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
> >
>


From ivan.lucena at pmldnet.com  Sun Jul 17 18:22:28 2011
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Jul 18 12:14:12 2011
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gTlRGL0pQRUcyMDAwIFF1ZXN0aW9u?=
In-Reply-To: <CA+YzLBc1EpvTzqtokwaCe0Vkb-=BoV1u+FPGwCc9Y9QKrrL3HA@mail.gmail.com>
References: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>
	<1310895250.4e22ac9275e1c@webmail.free.fr>
	<79F22FBD4490334CA35805920724DBDF03A9AEE508FD@exchange-64-001.digitalresultsgroup.com>
	<CA+YzLBc1EpvTzqtokwaCe0Vkb-=BoV1u+FPGwCc9Y9QKrrL3HA@mail.gmail.com>
Message-ID: <20110717222228.12765.qmail@s466.sureserver.com>

Frank,

I am having a similar problem with a files like that. They are taking more than 3 seconds just to open on gdalinfo or any GDALOpen() call. That wouldn't be a problem except in a case where we are running a large bath process with several gdal_translate runs frequently. 

But as far I can tell the GCP are right on the corner pixels, so it would be very fast to interpret it as a GeoTransform matrix. Would that be safe to change the driver's code to do that?

Regards,

Ivan


>  -------Original Message-------
>  From: Frank Warmerdam <warmerdam@pobox.com>
>  To: Logan Greenlee <lgreenlee@digitalresultsgroup.com>
>  Cc: gdal-dev@lists.osgeo.org <gdal-dev@lists.osgeo.org>
>  Subject: Re: [gdal-dev] NTF/JPEG2000 Question
>  Sent: Jul 17 '11 10:32
>  
>  On Sun, Jul 17, 2011 at 8:16 AM, Logan Greenlee
>  <lgreenlee@digitalresultsgroup.com> wrote:
>  > Sorry - here are the GCP's:
>  ...
>  > Is there any particular reason mapserver can't use the GCP's for display? Is it that they are not necessarily corner points of the image?
>  
>  Logan,
>  
>  It is just not a feature of MapServer to support warping
>  (rubber sheeting) of images on the fly based on GCPs.??It
>  would be fairly computationally expensive to do this so I
>  deemed it not very useful in MapServer.??It also isn't something
>  I've seen requested often.
>  
>  However, MapServer does support reprojecting images on
>  the fly which is similarly computationally expensive, so it
>  might make sense to add a mechanism to MapServer to use
>  gdal transformers (such as polynomial warping using GCPs)
>  as an option. It would require some development.
>  
>  Best regards,
>  --
>  ---------------------------------------+--------------------------------------
>  I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
>  light and sound - activate the windows | http://pobox.com/~warmerdam
>  and watch the world go round - Rush? ? | Geospatial Software Developer
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From even.rouault at mines-paris.org  Mon Jul 18 04:06:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 18 22:30:45 2011
Subject: [gdal-dev] NTF/JPEG2000 Question
In-Reply-To: <20110717222228.12765.qmail@s466.sureserver.com>
References: <79F22FBD4490334CA35805920724DBDF03A9AEE508F9@exchange-64-001.digitalresultsgroup.com>
	<1310895250.4e22ac9275e1c@webmail.free.fr>
	<79F22FBD4490334CA35805920724DBDF03A9AEE508FD@exchange-64-001.digitalresultsgroup.com>
	<CA+YzLBc1EpvTzqtokwaCe0Vkb-=BoV1u+FPGwCc9Y9QKrrL3HA@mail.gmail.com>
	<20110717222228.12765.qmail@s466.sureserver.com>
Message-ID: <1310976380.4e23e97c3da24@webmail.free.fr>

Selon Ivan Lucena <ivan.lucena@pmldnet.com>:

> Frank,
>
> I am having a similar problem with a files like that. They are taking more
> than 3 seconds just to open on gdalinfo or any GDALOpen() call. That wouldn't
> be a problem except in a case where we are running a large bath process with
> several gdal_translate runs frequently.

IMHO, the opening time has nothing to do with the presence of GCPs. I would
suspect that your NITF file is JPEG2000 compressed and that there's a slowdown
due to the underlying JPEG2000 driver that is used. You could try to switch to
another JPEG2000 driver to see if things improve.

>
> But as far I can tell the GCP are right on the corner pixels, so it would be
> very fast to interpret it as a GeoTransform matrix. Would that be safe to
> change the driver's code to do that?

The code is already supposed to try to transform the GCPs in a GeoTransform. If
the interpolation is exact, the GeoTransform will be returned, otherwise the
GCPs. You might want to track what happens in the GDALGCPsToGeoTransform()
function called at line 1040 of nitfdataset.cpp

>
> Regards,
>
> Ivan
>
>
> >  -------Original Message-------
> >  From: Frank Warmerdam <warmerdam@pobox.com>
> >  To: Logan Greenlee <lgreenlee@digitalresultsgroup.com>
> >  Cc: gdal-dev@lists.osgeo.org <gdal-dev@lists.osgeo.org>
> >  Subject: Re: [gdal-dev] NTF/JPEG2000 Question
> >  Sent: Jul 17 '11 10:32
> >
> >  On Sun, Jul 17, 2011 at 8:16 AM, Logan Greenlee
> >  <lgreenlee@digitalresultsgroup.com> wrote:
> >  > Sorry - here are the GCP's:
> >  ...
> >  > Is there any particular reason mapserver can't use the GCP's for
> display? Is it that they are not necessarily corner points of the image?
> >
> >  Logan,
> >
> >  It is just not a feature of MapServer to support warping
> >  (rubber sheeting) of images on the fly based on GCPs.??It
> >  would be fairly computationally expensive to do this so I
> >  deemed it not very useful in MapServer.??It also isn't something
> >  I've seen requested often.
> >
> >  However, MapServer does support reprojecting images on
> >  the fly which is similarly computationally expensive, so it
> >  might make sense to add a mechanism to MapServer to use
> >  gdal transformers (such as polynomial warping using GCPs)
> >  as an option. It would require some development.
> >
> >  Best regards,
> >  --
> >
> ---------------------------------------+--------------------------------------
> >  I set the clouds in motion - turn up?? | Frank Warmerdam,
> warmerdam@pobox.com
> >  light and sound - activate the windows | http://pobox.com/~warmerdam
> >  and watch the world go round - Rush? ? | Geospatial Software Developer
> >  _______________________________________________
> >  gdal-dev mailing list
> >  gdal-dev@lists.osgeo.org
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From dburken at comcast.net  Mon Jul 18 09:52:52 2011
From: dburken at comcast.net (David Burken)
Date: Tue Jul 19 04:37:46 2011
Subject: [gdal-dev] build error from svn
In-Reply-To: <1310925503.4e2322bf1a449@webmail.free.fr>
References: <4E2091E5.2040507@comcast.net>
	<1310825196.4e219aec89570@webmail.free.fr>
	<CA+YzLBdvheb8=f9yZeuMieBa6dV49UmoR7B9hzS0V8o+WSFcjA@mail.gmail.com>
	<4E231587.9070309@comcast.net>
	<1310925503.4e2322bf1a449@webmail.free.fr>
Message-ID: <4E243AB4.9030109@comcast.net>

Resolved thank you.

On 07/17/2011 01:58 PM, Even Rouault wrote:
> Selon David Burken<dburken@comcast.net>:
>
>> Even,
>> See below with more info, looks like there are multiple defined things
>> including external cpl_serv.h.  Hope this helps.
>> Dave
>>
> Yes, this was helpful. Should be fixed now. See
> http://trac.osgeo.org/gdal/ticket/4162#comment:2
>
> Please svn update and retry (after undoing your changes).
>
>> On 07/16/2011 03:12 PM, Frank Warmerdam wrote:
>>> Folks,
>>>
>>> I should have mentioned more widely, I have written up a ticket on
>>> this issue at:
>>>
>>>     http://trac.osgeo.org/gdal/ticket/4162
>>>
>>> I presume the problem occurs with an external libgeotiff but haven't yet
>> tried
>>> to reproduce the problem.
>>>
>>> Best regards,
>>>
>>> On Sat, Jul 16, 2011 at 7:06 AM, Even Rouault
>>> <even.rouault@mines-paris.org>   wrote:
>>>> Selon David Burken<dburken@comcast.net>:
>>>>
>>>> Dave,
>>>>
>>>> I presume you build GDAL against external libgeotiff, and not internal
>>>> libgeotiff. In any case, it is weird because cpl_serv.h should be
>> installed when
>>>> installing libgeotiff (I've just verified it with libgeotiff from svn). So
>> I
>>>> presume the include paths in the GDAL compilation line might miss a
>> directory ?
>>>> Can you give more elements ?
>>>>
>> I have a third party directory that I install libtiff, libgeotiff, geos,
>> proj4 to.   It's "/work/osgeo/local".  To avoid confusion I totally
>> removed my /work/osgeo/local/include directory and did make installs
>> from scratch.  This is a Fedora 14 build.
>>
>> My gdal is configured with:
>>
>> #!/bin/sh
>> # File: mygdalconfig.sh
>> # Note: Python needed for QGIS.
>> prefix=/work/osgeo/local
>> ./configure --prefix=${prefix} --with-kakadu=/work/drb/kakadu/latest
>> --with-geos=/work/osgeo/local/bin/geos-config
>> --with-libtiff=/work/osgeo/local --with-geotiff=/work/osgeo/local
>> --with-mrsid=/work/drb/mrsid/Geo_DSDK-7.0.0.2167 --with-python
>>
>> $ svn update
>> At revision 22734.
>> $ svn status
>> ?       mygdalconfig.sh  // my gdal configure script only
>>
>> $ make
>> libtool: compile:  g++ -g -O2 -Wall -I/work/osgeo/gdal/port
>> -I/work/osgeo/gdal/gcore -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr
>> -I/work/osgeo/gdal/ogr/ogrsf_frmts -DBIGTIFF_SUPPORT -DOGR_ENABLED
>> -D_REENTRANT -I/work/osgeo/gdal/port -I/work/osgeo/local/include
>> -I/work/osgeo/local/include -c gt_wkt_srs.cpp  -fPIC -DPIC -o
>> ../o/.libs/gt_wkt_srs.o
>> In file included from /work/osgeo/gdal/port/cpl_port.h:83:0,
>>                    from /work/osgeo/gdal/ogr/ogr_core.h:33,
>>                    from /work/osgeo/gdal/ogr/ogr_srs_api.h:34,
>>                    from /work/osgeo/gdal/ogr/ogr_spatialref.h:34,
>>                    from gt_wkt_srs.cpp:38:
>> /work/osgeo/gdal/port/cpl_config.h:106:0: warning: "HAVE_STDLIB_H" redefined
>> /work/osgeo/local/include/geo_config.h:5:0: note: this is the location
>> of the previous definition
>> /work/osgeo/gdal/port/cpl_config.h:112:0: warning: "HAVE_STRING_H" redefined
>> /work/osgeo/local/include/geo_config.h:11:0: note: this is the location
>> of the previous definition
>> gt_wkt_srs.cpp: In function 'int GTIFSetFromOGISDefn(GTIF*, const char*)':
>> gt_wkt_srs.cpp:2018:54: error: 'CSLTestBoolean' was not declared in this
>> scope
>> gt_wkt_srs.cpp:2083:57: error: 'CSLTestBoolean' was not declared in this
>> scope
>> gt_wkt_srs.cpp:2206:58: error: 'CSLTestBoolean' was not declared in this
>> scope
>> make[2]: *** [../o/gt_wkt_srs.lo] Error 1
>> make[2]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
>> make[1]: *** [gtiff-install-obj] Error 2
>>
>>
>> So I add #include "cpl_string.h" below CPL_ERROR_H_INCLUDED in
>> gt_wkt_srs.cpp to pick up CSLTestBoolean and then:
>>
>> make -C gtiff install-obj
>> make[2]: Entering directory `/home/work/osgeo/gdal/frmts/gtiff'
>> /bin/sh /work/osgeo/gdal/libtool --mode=compile --tag=CXX g++ -g -O2
>> -Wall  -I/work/osgeo/gdal/port -I/work/osgeo/gdal/gcore
>> -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr
>> -I/work/osgeo/gdal/ogr/ogrsf_frmts  -DBIGTIFF_SUPPORT -DOGR_ENABLED
>> -D_REENTRANT  -I/work/osgeo/gdal/port -I/work/osgeo/local/include
>> -I/work/osgeo/local/include  -c -o ../o/gt_wkt_srs.lo gt_wkt_srs.cpp
>> libtool: compile:  g++ -g -O2 -Wall -I/work/osgeo/gdal/port
>> -I/work/osgeo/gdal/gcore -I/work/osgeo/gdal/alg -I/work/osgeo/gdal/ogr
>> -I/work/osgeo/gdal/ogr/ogrsf_frmts -DBIGTIFF_SUPPORT -DOGR_ENABLED
>> -D_REENTRANT -I/work/osgeo/gdal/port -I/work/osgeo/local/include
>> -I/work/osgeo/local/include -c gt_wkt_srs.cpp  -fPIC -DPIC -o
>> ../o/.libs/gt_wkt_srs.o
>> In file included from /work/osgeo/gdal/port/cpl_port.h:83:0,
>>                    from /work/osgeo/gdal/port/cpl_vsi.h:34,
>>                    from /work/osgeo/gdal/port/cpl_string.h:34,
>>                    from gt_wkt_srs.cpp:37:
>> /work/osgeo/gdal/port/cpl_config.h:106:0: warning: "HAVE_STDLIB_H" redefined
>> /work/osgeo/local/include/geo_config.h:5:0: note: this is the location
>> of the previous definition
>> /work/osgeo/gdal/port/cpl_config.h:112:0: warning: "HAVE_STRING_H" redefined
>> /work/osgeo/local/include/geo_config.h:11:0: note: this is the location
>> of the previous definition
>> In file included from /work/osgeo/gdal/port/cpl_string.h:36:0,
>>                    from gt_wkt_srs.cpp:37:
>> /work/osgeo/gdal/port/cpl_conv.h:69:0: warning: "CPLFree" redefined
>> /work/osgeo/local/include/cpl_serv.h:163:0: note: this is the location
>> of the previous definition
>> In file included from /work/osgeo/gdal/port/cpl_string.h:34:0,
>>                    from gt_wkt_srs.cpp:37:
>> /work/osgeo/gdal/port/cpl_vsi.h:170:17: error: declaration of C function
>> 'void* _GTIFcalloc(size_t*)' conflicts with
>> /work/osgeo/local/include/geo_tiffp.h:103:24: error: previous
>> declaration 'void* _GTIFcalloc(gsize_t)' here
>> /work/osgeo/gdal/port/cpl_vsi.h:171:35: error: declaration of C function
>> 'void* _GTIFcalloc(size_t)' conflicts with
>> /work/osgeo/gdal/port/cpl_vsi.h:170:17: error: previous declaration
>> 'void* _GTIFcalloc(size_t*)' here
>> /work/osgeo/gdal/port/cpl_vsi.h:173:44: error: declaration of C function
>> 'void* _GTIFrealloc(void*, size_t)' conflicts with
>> /work/osgeo/local/include/geo_tiffp.h:104:24: error: previous
>> declaration 'void* _GTIFrealloc(void*, gsize_t)' here
>> In file included from /work/osgeo/gdal/port/cpl_string.h:36:0,
>>                    from gt_wkt_srs.cpp:37:
>> /work/osgeo/gdal/port/cpl_conv.h:63:33: error: declaration of C function
>> 'void* gtCPLMalloc(size_t)' conflicts with
>> /work/osgeo/local/include/cpl_serv.h:158:15: error: previous declaration
>> 'void* gtCPLMalloc(int)' here
>> /work/osgeo/gdal/port/cpl_conv.h:64:41: error: declaration of C function
>> 'void* gtCPLCalloc(size_t, size_t)' conflicts with
>> /work/osgeo/local/include/cpl_serv.h:159:15: error: previous declaration
>> 'void* gtCPLCalloc(int, int)' here
>> /work/osgeo/gdal/port/cpl_conv.h:65:42: error: declaration of C function
>> 'void* gtCPLRealloc(void*, size_t)' conflicts with
>> /work/osgeo/local/include/cpl_serv.h:160:15: error: previous declaration
>> 'void* gtCPLRealloc(void*, int)' here
>> make[2]: *** [../o/gt_wkt_srs.lo] Error 1
>> make[2]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
>> make[1]: *** [gtiff-install-obj] Error 2
>> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts'
>> make: *** [frmts-target] Error 2
>> $
>>
>>>>> Hi Frank, all,
>>>>>
>>>>> Just fyi, getting build error from svn.  Looks like cpl_serv.h is gone
>>>>> now.  See below for minor patch.
>>>>>
>>>>> Take care,
>>>>> Dave
>>>>>
>>>>> $ svn update
>>>>> At revision 22725.
>>>>>
>>>>> gt_wkt_srs.cpp:33:22: fatal error: cpl_serv.h: No such file or directory
>>>>> compilation terminated.
>>>>> make[1]: *** [../o/gt_wkt_srs.lo] Error 1
>>>>> make[1]: Leaving directory `/home/work/osgeo/gdal/frmts/gtiff'
>>>>> make: *** [gtiff-install-obj] Error 2
>>>>>
>>>>> Compilation exited abnormally with code 2 at Fri Jul 15 15:06:55
>>>>>
>>>>> Patch:
>>>>>
>>>>> svn diff frmts/gtiff/gt_wkt_srs.cpp
>>>>> Index: frmts/gtiff/gt_wkt_srs.cpp
>>>>> ===================================================================
>>>>> --- frmts/gtiff/gt_wkt_srs.cpp    (revision 22725)
>>>>> +++ frmts/gtiff/gt_wkt_srs.cpp    (working copy)
>>>>> @@ -30,7 +30,9 @@
>>>>>      * DEALINGS IN THE SOFTWARE.
>>>>>
>>>>>
>> ****************************************************************************/
>>>>> -#include "cpl_serv.h"
>>>>> +// #include "cpl_serv.h"
>>>>> + #include "cpl_csv.h"
>>>>> +
>>>>>     #include "geo_tiffp.h"
>>>>>     #define CPL_ERROR_H_INCLUDED
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>
>
From zoltans at geograph.co.za  Mon Jul 18 10:04:52 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue Jul 19 04:48:28 2011
Subject: [gdal-dev] ASCII file to AAIG format
Message-ID: <4E243D84.5050707@geograph.co.za>

Hi,
I have an ASCII file of DEM points that need to be converted into AAIG 
format, so I'm hoping gdal (_translate?) will do the trick
I do not want to rely on the fact that my DEM is column/row ordered, nor 
that it is "exactly" 2m spaced.

Is there some free-format ASCII that gdal can read, or does anyone know 
which of the formats read by GDAL won't need to be "ordered" or "exact".
I'm hoping GDAL will take the pain out of ordering my DEM, and creating 
NODATA for missing cell values.

My file looks like this: (Easting, Northing, height, type)

>               570433.84    201262.28        73.65 MPoint
>               570433.84    201260.28        73.72 MPoint
>               570433.84    201258.28        73.79 MPoint
>               570433.84    201256.28        73.86 MPoint
>               570433.84    201254.28        73.89 MPoint
>               570433.84    201252.28        74.02 MPoint
>               570433.84    201250.28        74.16 MPoint


Thanks in advance,
Zoltan

-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From jorge.arevalo at deimos-space.com  Mon Jul 18 11:29:05 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Tue Jul 19 06:18:35 2011
Subject: [gdal-dev] Is GDAL prepared for this?
Message-ID: <CAK29iX_1zTHCxV6qA9bZsEzdYe6bfqUb=k+iBLMk0=5qfQ2K8g@mail.gmail.com>

Hello,

Is GDAL prepared for not equally sized tiled rasters? I mean this
http://dl.dropbox.com/u/6599273/irregularly_tiled_raster_coverage.png

I think if my raster coverage has that arrangement, I can get rid of
the GDAL "block" concept. Am I right?

Many thanks in advance, and best regards

-- 
Jorge Ar?valo
Internet & Mobility Division, DEIMOS
jorge.arevalo@deimos-space.com
http://es.linkedin.com/in/jorgearevalo80
http://mobility.grupodeimos.com/
http://gis4free.wordpress.com
http://geohash.org/ezjqgrgzz0g
From zoltans at geograph.co.za  Mon Jul 18 11:43:38 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue Jul 19 06:32:36 2011
Subject: [gdal-dev] ASCII file to AAIG format
In-Reply-To: <CAJ0mEz0Cak_UiKg4T4HeBHhEpsgQqQMt02sHD2_QTo94JaJ58A@mail.gmail.com>
References: <4E243D84.5050707@geograph.co.za>
	<CAJ0mEz0Cak_UiKg4T4HeBHhEpsgQqQMt02sHD2_QTo94JaJ58A@mail.gmail.com>
Message-ID: <4E2454AA.1070408@geograph.co.za>

Probably, but choosing src_datasource is the unanswered part...

ie:
is there a possibility where you can specify columns for eastings & 
northings, and not just height?
or does anyone know of an srs_datasource that I can restructure my file 
to, that does not make me do the row/column ordering, nor the check for 
empty cells?

Thanks for the pointer though, Kyle.

Regards,
Zoltan


On 2011/07/18 17:13, Kyle Shannon wrote:
> Zoltan,
> Perhaps the utility gdal_grid would suit your needs, see:
>
> http://gdal.org/gdal_grid.html
>
> /**
>  *
>  * Kyle Shannon
>  * ksshannon@gmail.com <mailto:ksshannon@gmail.com>
>  *
>  */
>
>
>
>
> On Mon, Jul 18, 2011 at 08:04, Zoltan Szecsei <zoltans@geograph.co.za 
> <mailto:zoltans@geograph.co.za>> wrote:
>
>     Hi,
>     I have an ASCII file of DEM points that need to be converted into
>     AAIG format, so I'm hoping gdal (_translate?) will do the trick
>     I do not want to rely on the fact that my DEM is column/row
>     ordered, nor that it is "exactly" 2m spaced.
>
>     Is there some free-format ASCII that gdal can read, or does anyone
>     know which of the formats read by GDAL won't need to be "ordered"
>     or "exact".
>     I'm hoping GDAL will take the pain out of ordering my DEM, and
>     creating NODATA for missing cell values.
>
>     My file looks like this: (Easting, Northing, height, type)
>
>                      570433.84    201262.28        73.65 MPoint
>                      570433.84    201260.28        73.72 MPoint
>                      570433.84    201258.28        73.79 MPoint
>                      570433.84    201256.28        73.86 MPoint
>                      570433.84    201254.28        73.89 MPoint
>                      570433.84    201252.28        74.02 MPoint
>                      570433.84    201250.28        74.16 MPoint
>
>
>
>     Thanks in advance,
>     Zoltan
>
>     -- 
>
>     ===========================================
>     Zoltan Szecsei PrGISc [PGP0031]
>     Geograph (Pty) Ltd.
>     P.O. Box 7, Muizenberg 7950, South Africa.
>
>     65 Main Road, Muizenberg 7945
>     Western Cape, South Africa.
>
>     34? 6'16.35"S 18?28'5.62"E
>
>     Tel: +27-21-7884897 <tel:%2B27-21-7884897>  Mobile: +27-83-6004028
>     <tel:%2B27-83-6004028>
>     Fax: +27-86-6115323 <tel:%2B27-86-6115323> www.geograph.co.za
>     <http://www.geograph.co.za>
>     ===========================================
>
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110718/eb90609e/attachment-0001.html
From warmerdam at pobox.com  Mon Jul 18 11:52:44 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jul 19 06:43:10 2011
Subject: [gdal-dev] Is GDAL prepared for this?
In-Reply-To: <CAK29iX_1zTHCxV6qA9bZsEzdYe6bfqUb=k+iBLMk0=5qfQ2K8g@mail.gmail.com>
References: <CAK29iX_1zTHCxV6qA9bZsEzdYe6bfqUb=k+iBLMk0=5qfQ2K8g@mail.gmail.com>
Message-ID: <CA+YzLBfOmL6zbF2dEMj0io_XD4+EPkq4+6ftzprcdMehgj6twQ@mail.gmail.com>

2011/7/18 Jorge Ar?valo <jorge.arevalo@deimos-space.com>:
> Hello,
>
> Is GDAL prepared for not equally sized tiled rasters? I mean this
> http://dl.dropbox.com/u/6599273/irregularly_tiled_raster_coverage.png
>
> I think if my raster coverage has that arrangement, I can get rid of
> the GDAL "block" concept. Am I right?
>
> Many thanks in advance, and best regards


Jorge,

GDAL can only expose regular blocking to applications and only use
regular blocking in the block cache.  So if you format has irregular
blocking you wlil need to handle the blocking all within your driver.

The irregularity of the blocks was not entirely clear from the
picture.  If the only irregularity is partial blocks on the right
or bottom then that is not a problem.  You can just treat that
as larger - extending beyond the dataset edge and the
contents outside the dataset are irrelavent.

Also, missing tiles are fine.  We normally just treat them as
having some background value when they are read.  NODATA
pixel values, masks or alpha bands can be used to indicate
areas where there is no real data (missing blocks, etc).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From jorge.arevalo at deimos-space.com  Mon Jul 18 11:59:54 2011
From: jorge.arevalo at deimos-space.com (=?ISO-8859-1?Q?Jorge_Ar=E9valo?=)
Date: Tue Jul 19 06:51:04 2011
Subject: [gdal-dev] Is GDAL prepared for this?
In-Reply-To: <CA+YzLBfOmL6zbF2dEMj0io_XD4+EPkq4+6ftzprcdMehgj6twQ@mail.gmail.com>
References: <CAK29iX_1zTHCxV6qA9bZsEzdYe6bfqUb=k+iBLMk0=5qfQ2K8g@mail.gmail.com>
	<CA+YzLBfOmL6zbF2dEMj0io_XD4+EPkq4+6ftzprcdMehgj6twQ@mail.gmail.com>
Message-ID: <CAK29iX9_hyQuJss0dNFg636-MhC8aSs0eV=8c0q+NRx9i8GaRQ@mail.gmail.com>

Hello,

2011/7/18 Frank Warmerdam <warmerdam@pobox.com>:
> 2011/7/18 Jorge Ar?valo <jorge.arevalo@deimos-space.com>:
>> Hello,
>>
>> Is GDAL prepared for not equally sized tiled rasters? I mean this
>> http://dl.dropbox.com/u/6599273/irregularly_tiled_raster_coverage.png
>>
>> I think if my raster coverage has that arrangement, I can get rid of
>> the GDAL "block" concept. Am I right?
>>
>> Many thanks in advance, and best regards
>
>
> Jorge,
>
> GDAL can only expose regular blocking to applications and only use
> regular blocking in the block cache. ?So if you format has irregular
> blocking you wlil need to handle the blocking all within your driver.
>

Just what I thought.


> The irregularity of the blocks was not entirely clear from the
> picture. ?If the only irregularity is partial blocks on the right
> or bottom then that is not a problem. ?You can just treat that
> as larger - extending beyond the dataset edge and the
> contents outside the dataset are irrelavent.
>

Yes, the picture is only a simplification. The format can store
different size blocks, not only at the right or at the bottom of the
raster coverage. Any number of blocks and any block size are allowed.

> Also, missing tiles are fine. ?We normally just treat them as
> having some background value when they are read. ?NODATA
> pixel values, masks or alpha bands can be used to indicate
> areas where there is no real data (missing blocks, etc).
>

Thanks for the tips :-)

Best regards,
Jorge
From warmerdam at pobox.com  Mon Jul 18 12:01:08 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jul 19 06:52:04 2011
Subject: [gdal-dev] ASCII file to AAIG format
In-Reply-To: <4E243D84.5050707@geograph.co.za>
References: <4E243D84.5050707@geograph.co.za>
Message-ID: <CA+YzLBeMAMWbgTX87GB-qwEzH-bpbG=_f7Ftt5j=5H5hJoRWBw@mail.gmail.com>

Zoltan,

I haven't used it myself, but it looks like the XYZ driver might be
ready made for your need:

http://www.gdal.org/frmt_xyz.html

It looks like it is new in 1.8.

Best regards,

On Mon, Jul 18, 2011 at 7:04 AM, Zoltan Szecsei <zoltans@geograph.co.za> wrote:
> Hi,
> I have an ASCII file of DEM points that need to be converted into AAIG
> format, so I'm hoping gdal (_translate?) will do the trick
> I do not want to rely on the fact that my DEM is column/row ordered, nor
> that it is "exactly" 2m spaced.
>
> Is there some free-format ASCII that gdal can read, or does anyone know
> which of the formats read by GDAL won't need to be "ordered" or "exact".
> I'm hoping GDAL will take the pain out of ordering my DEM, and creating
> NODATA for missing cell values.
>
> My file looks like this: (Easting, Northing, height, type)
>
>> ? ? ? ? ? ? ?570433.84 ? ?201262.28 ? ? ? ?73.65 MPoint
>> ? ? ? ? ? ? ?570433.84 ? ?201260.28 ? ? ? ?73.72 MPoint
>> ? ? ? ? ? ? ?570433.84 ? ?201258.28 ? ? ? ?73.79 MPoint
>> ? ? ? ? ? ? ?570433.84 ? ?201256.28 ? ? ? ?73.86 MPoint
>> ? ? ? ? ? ? ?570433.84 ? ?201254.28 ? ? ? ?73.89 MPoint
>> ? ? ? ? ? ? ?570433.84 ? ?201252.28 ? ? ? ?74.02 MPoint
>> ? ? ? ? ? ? ?570433.84 ? ?201250.28 ? ? ? ?74.16 MPoint
>
>
> Thanks in advance,
> Zoltan
>
> --
>
> ===========================================
> Zoltan Szecsei PrGISc [PGP0031]
> Geograph (Pty) Ltd.
> P.O. Box 7, Muizenberg 7950, South Africa.
>
> 65 Main Road, Muizenberg 7945
> Western Cape, South Africa.
>
> 34? 6'16.35"S 18?28'5.62"E
>
> Tel: +27-21-7884897 ?Mobile: +27-83-6004028
> Fax: +27-86-6115323 ? ? www.geograph.co.za
> ===========================================
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From even.rouault at mines-paris.org  Mon Jul 18 16:26:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 19 11:32:38 2011
Subject: [gdal-dev] ASCII file to AAIG format
In-Reply-To: <CA+YzLBeMAMWbgTX87GB-qwEzH-bpbG=_f7Ftt5j=5H5hJoRWBw@mail.gmail.com>
References: <4E243D84.5050707@geograph.co.za>
	<CA+YzLBeMAMWbgTX87GB-qwEzH-bpbG=_f7Ftt5j=5H5hJoRWBw@mail.gmail.com>
Message-ID: <201107182226.48574.even.rouault@mines-paris.org>

Le lundi 18 juillet 2011 18:01:08, Frank Warmerdam a ?crit :
> Zoltan,
> 
> I haven't used it myself, but it looks like the XYZ driver might be
> ready made for your need:
> 
> http://www.gdal.org/frmt_xyz.html
> 
> It looks like it is new in 1.8.

The XYZ driver doesn't fit Zoltan's requirements because it relies on the fact 
that coordinates are sorted and regularly spaced.

So gdal_grid is the only option. With the help of a spread-sheet application 
or by any other adequate means, you should be able to transform your file into 
a CSV file and create a OGR VRT file that will be recognized as a valid OGR 
point datasource usable by gdal_grid. See the doc of the 2 drivers :

http://gdal.org/ogr/drv_csv.html
http://gdal.org/ogr/drv_vrt.html

> 
> Best regards,
> 
> On Mon, Jul 18, 2011 at 7:04 AM, Zoltan Szecsei <zoltans@geograph.co.za> 
wrote:
> > Hi,
> > I have an ASCII file of DEM points that need to be converted into AAIG
> > format, so I'm hoping gdal (_translate?) will do the trick
> > I do not want to rely on the fact that my DEM is column/row ordered, nor
> > that it is "exactly" 2m spaced.
> > 
> > Is there some free-format ASCII that gdal can read, or does anyone know
> > which of the formats read by GDAL won't need to be "ordered" or "exact".
> > I'm hoping GDAL will take the pain out of ordering my DEM, and creating
> > NODATA for missing cell values.
> > 
> > My file looks like this: (Easting, Northing, height, type)
> > 
> >>              570433.84    201262.28        73.65 MPoint
> >>              570433.84    201260.28        73.72 MPoint
> >>              570433.84    201258.28        73.79 MPoint
> >>              570433.84    201256.28        73.86 MPoint
> >>              570433.84    201254.28        73.89 MPoint
> >>              570433.84    201252.28        74.02 MPoint
> >>              570433.84    201250.28        74.16 MPoint
> > 
> > Thanks in advance,
> > Zoltan
> > 
> > --
> > 
> > ===========================================
> > Zoltan Szecsei PrGISc [PGP0031]
> > Geograph (Pty) Ltd.
> > P.O. Box 7, Muizenberg 7950, South Africa.
> > 
> > 65 Main Road, Muizenberg 7945
> > Western Cape, South Africa.
> > 
> > 34? 6'16.35"S 18?28'5.62"E
> > 
> > Tel: +27-21-7884897  Mobile: +27-83-6004028
> > Fax: +27-86-6115323     www.geograph.co.za
> > ===========================================
> > 
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
From zoltans at geograph.co.za  Mon Jul 18 16:34:49 2011
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Tue Jul 19 12:02:50 2011
Subject: [gdal-dev] ASCII file to AAIG format
In-Reply-To: <201107182226.48574.even.rouault@mines-paris.org>
References: <4E243D84.5050707@geograph.co.za>
	<CA+YzLBeMAMWbgTX87GB-qwEzH-bpbG=_f7Ftt5j=5H5hJoRWBw@mail.gmail.com>
	<201107182226.48574.even.rouault@mines-paris.org>
Message-ID: <4E2498E9.9050706@geograph.co.za>

Hi Even/Frank,
An hour or two back I did take a look at Frank's idea, and noted the "no 
skipped cells" and other limitations :-(
I'll go through the xyz driver docs on Wednesday because I'm out all day 
tomorrow - right now I'm trying to tie up some loose ends before going 
home ... (it's 10:30 pm here).

Thanks for the interest and help.

Kind regards,
Zoltan




On 2011/07/18 22:26, Even Rouault wrote:
> Le lundi 18 juillet 2011 18:01:08, Frank Warmerdam a ?crit :
>> Zoltan,
>>
>> I haven't used it myself, but it looks like the XYZ driver might be
>> ready made for your need:
>>
>> http://www.gdal.org/frmt_xyz.html
>>
>> It looks like it is new in 1.8.
> The XYZ driver doesn't fit Zoltan's requirements because it relies on the fact
> that coordinates are sorted and regularly spaced.
>
> So gdal_grid is the only option. With the help of a spread-sheet application
> or by any other adequate means, you should be able to transform your file into
> a CSV file and create a OGR VRT file that will be recognized as a valid OGR
> point datasource usable by gdal_grid. See the doc of the 2 drivers :
>
> http://gdal.org/ogr/drv_csv.html
> http://gdal.org/ogr/drv_vrt.html
>
>> Best regards,
>>
>> On Mon, Jul 18, 2011 at 7:04 AM, Zoltan Szecsei<zoltans@geograph.co.za>
> wrote:
>>> Hi,
>>> I have an ASCII file of DEM points that need to be converted into AAIG
>>> format, so I'm hoping gdal (_translate?) will do the trick
>>> I do not want to rely on the fact that my DEM is column/row ordered, nor
>>> that it is "exactly" 2m spaced.
>>>
>>> Is there some free-format ASCII that gdal can read, or does anyone know
>>> which of the formats read by GDAL won't need to be "ordered" or "exact".
>>> I'm hoping GDAL will take the pain out of ordering my DEM, and creating
>>> NODATA for missing cell values.
>>>
>>> My file looks like this: (Easting, Northing, height, type)
>>>
>>>>               570433.84    201262.28        73.65 MPoint
>>>>               570433.84    201260.28        73.72 MPoint
>>>>               570433.84    201258.28        73.79 MPoint
>>>>               570433.84    201256.28        73.86 MPoint
>>>>               570433.84    201254.28        73.89 MPoint
>>>>               570433.84    201252.28        74.02 MPoint
>>>>               570433.84    201250.28        74.16 MPoint
>>> Thanks in advance,
>>> Zoltan
>>>
>>> --
>>>
>>> ===========================================
>>> Zoltan Szecsei PrGISc [PGP0031]
>>> Geograph (Pty) Ltd.
>>> P.O. Box 7, Muizenberg 7950, South Africa.
>>>
>>> 65 Main Road, Muizenberg 7945
>>> Western Cape, South Africa.
>>>
>>> 34? 6'16.35"S 18?28'5.62"E
>>>
>>> Tel: +27-21-7884897  Mobile: +27-83-6004028
>>> Fax: +27-86-6115323     www.geograph.co.za
>>> ===========================================
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 

===========================================
Zoltan Szecsei PrGISc [PGP0031]
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From georgec_511 at yahoo.com  Mon Jul 18 17:55:07 2011
From: georgec_511 at yahoo.com (George Corrado)
Date: Tue Jul 19 13:09:00 2011
Subject: [gdal-dev] gdal swig 1.8.1 compile error
Message-ID: <003601cc4595$5d3c7a70$17b56f50$@yahoo.com>

Hi All,

 

Does anyone know why I'm getting this error?  Or has anyone ever seen this
error?

 

C:\gdal-1.8.1\swig\java>nmake -f makefile.vc

 

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01

Copyright (C) Microsoft Corporation.  All rights reserved.

 

        cd ogr

        nmake /nologo /f makefile.vc

NMAKE : fatal error U1073: don't know how to make 'ogr_wrap.obj'

Stop.

NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
10.0\VC\BI

N\nmake.EXE"' : return code '0x2'

Stop.

 

 

Thanks,

George

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110718/205a61a1/attachment.html
From jmckenna at gatewaygeomatics.com  Mon Jul 18 19:18:35 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Tue Jul 19 14:33:57 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E1B4F63.8040001@gatewaygeomatics.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E1B4F63.8040001@gatewaygeomatics.com>
Message-ID: <4E24BF4B.1080903@gatewaygeomatics.com>

More testing feedback:

When displaying in MapServer, a full path is required on Windows (only 
Windows, relative paths work on Unix), in the CONNECTION parameter, such as:

FAILS: CONNECTION "filegdb/us_states.gdb"
WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"

I have documented this at http://www.mapserver.org/input/vector/filegdb.html

If others can test this issue: to duplicate, use GDAL-trunk and then try 
to display any FileGDB (created with Arc 10.0) in MapServer, on Windows. 
  And let me know if you succeed.  Thanks.

-jeff



-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/





From fwarmerdam at gmail.com  Mon Jul 18 20:31:03 2011
From: fwarmerdam at gmail.com (=?utf-8?B?Zndhcm1lcmRhbUBnbWFpbC5jb20=?=)
Date: Tue Jul 19 15:50:31 2011
Subject: =?utf-8?B?UmU6IFtnZGFsLWRldl0gZ2RhbCBzd2lnIDEuOC4xIGNvbXBpbGUgZXJyb3I=?=
Message-ID: <4e24d048.69b1ec0a.5093.24c4@mx.google.com>

George,
I suspect you have not generated the swig wrappers.  There is a guide for windows java bindings building in trac under the java topic.

Best regards,

Sent from  my HTC

----- Reply message -----
From: "George Corrado" <georgec_511@yahoo.com>
Date: Mon, Jul 18, 2011 2:55 pm
Subject: [gdal-dev] gdal swig 1.8.1 compile error
To: <gdal-dev@lists.osgeo.org>

Hi All,

 

Does anyone know why I'm getting this error?  Or has anyone ever seen this
error?

 

C:\gdal-1.8.1\swig\java>nmake -f makefile.vc

 

Microsoft (R) Program Maintenance Utility Version 10.00.30319.01

Copyright (C) Microsoft Corporation.  All rights reserved.

 

        cd ogr

        nmake /nologo /f makefile.vc

NMAKE : fatal error U1073: don't know how to make 'ogr_wrap.obj'

Stop.

NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
10.0\VC\BI

N\nmake.EXE"' : return code '0x2'

Stop.

 

 

Thanks,

George

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110718/ba6287c8/attachment.html
From candini at meeo.it  Tue Jul 19 05:54:57 2011
From: candini at meeo.it (canduc17)
Date: Tue Jul 19 06:00:56 2011
Subject: [gdal-dev] ogr2ogr: create a new shapefile with some math
Message-ID: <1311069297756-6598180.post@n2.nabble.com>

Hi everyone. I have a shape file with the following characteristics:
INFO: Open of `faggete.shp'
      using driver `ESRI Shapefile' successful.

Layer name: faggete
Geometry: Polygon
Feature Count: 833
Extent: (341942.975384, 4732949.828158) - (365163.422399, 4773205.622984)
Layer SRS WKT:
(unknown)
FID_fagget: Integer (9.0)
SUP_HA: Real (19.15)
STRINGA: String (11.0)
TF: String (11.0)
CV: String (11.0)
AX: String (11.0)
DE: String (11.0)
INR: String (11.0)
P: String (11.0)
TIPIFORE: String (11.0)
INT: String (11.0)
ATTRIBUTI: String (25.0)
COD_UNIV: String (50.0)
area_ha: Real (19.9)
FID_comuni: Integer (9.0)
NOME_COM: String (50.0)
NumHa: Real (19.11)
VolHa: Real (19.11)
Y_planted: Real (19.11)
Eta: Real (19.11)
Ws: Real (19.11)
Biomassa_e: Real (19.11)
Wr: Real (19.11)
Wf: Real (19.11)


I need to create a new vector file applying mathematical operations to some
field.
For example, let's say I have to double up every value of NumHa and sum this
result to every value of VolHa.
And I have to insert these new values (for NumHa and VolHa) inside the new
vector.
How can I achieve this?
Is that possible with ogr2ogr?

Thanks in advance...

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-create-a-new-shapefile-with-some-math-tp6598180p6598180.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Jul 19 06:54:36 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 19 07:03:41 2011
Subject: [gdal-dev] ogr2ogr: create a new shapefile with some math
In-Reply-To: <1311069297756-6598180.post@n2.nabble.com>
References: <1311069297756-6598180.post@n2.nabble.com>
Message-ID: <CAMKgpObnJ4DQce-uZ2aK-y7Q-=WQ4m3rsKMVUWyiDPGj4u5xww@mail.gmail.com>

Candini,

You can use the -sql option with the ogr2ogr utility. You can find further
details of OGR's SQL capabilities in the RFC28 [1]. It also shows an example
with arithmetic operations.

Tell us how it worked.

[1]: http://trac.osgeo.org/gdal/wiki/rfc28_sqlfunc

On Tue, Jul 19, 2011 at 3:24 PM, canduc17 <candini@meeo.it> wrote:

> Hi everyone. I have a shape file with the following characteristics:
> INFO: Open of `faggete.shp'
>      using driver `ESRI Shapefile' successful.
>
> Layer name: faggete
> Geometry: Polygon
> Feature Count: 833
> Extent: (341942.975384, 4732949.828158) - (365163.422399, 4773205.622984)
> Layer SRS WKT:
> (unknown)
> FID_fagget: Integer (9.0)
> SUP_HA: Real (19.15)
> STRINGA: String (11.0)
> TF: String (11.0)
> CV: String (11.0)
> AX: String (11.0)
> DE: String (11.0)
> INR: String (11.0)
> P: String (11.0)
> TIPIFORE: String (11.0)
> INT: String (11.0)
> ATTRIBUTI: String (25.0)
> COD_UNIV: String (50.0)
> area_ha: Real (19.9)
> FID_comuni: Integer (9.0)
> NOME_COM: String (50.0)
> NumHa: Real (19.11)
> VolHa: Real (19.11)
> Y_planted: Real (19.11)
> Eta: Real (19.11)
> Ws: Real (19.11)
> Biomassa_e: Real (19.11)
> Wr: Real (19.11)
> Wf: Real (19.11)
>
>
> I need to create a new vector file applying mathematical operations to some
> field.
> For example, let's say I have to double up every value of NumHa and sum
> this
> result to every value of VolHa.
> And I have to insert these new values (for NumHa and VolHa) inside the new
> vector.
> How can I achieve this?
> Is that possible with ogr2ogr?
>
> Thanks in advance...
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/ogr2ogr-create-a-new-shapefile-with-some-math-tp6598180p6598180.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110719/7244caf5/attachment-0001.html
From gaurav at vizexperts.com  Tue Jul 19 06:59:16 2011
From: gaurav at vizexperts.com (Gaurav Garg)
Date: Tue Jul 19 07:15:43 2011
Subject: [gdal-dev] OGC Compliance
Message-ID: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>

Hi,

 

We have a GIS product based on GDAL/OGR. We have been asked if the product
is OGC compliant. Is GDAL/OGR compliant to OGC specifications? If yes, what
all specifications are supported?

 

Thanks,

Gaurav

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110719/843b543a/attachment.html
From even.rouault at mines-paris.org  Tue Jul 19 07:34:59 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jul 19 07:46:16 2011
Subject: [gdal-dev] OGC Compliance
In-Reply-To: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>
References: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>
Message-ID: <1311075299.4e256be31d198@webmail.free.fr>

Selon Gaurav Garg <gaurav@vizexperts.com>:

To the best of my knowledge, GDAL/OGR is not formally certified to be compliant
to OGC specification. It implements clients for the WMS, WCS and WFS
specifications. It also implements the GML standard (but not to its full
extent). But AFAIK, the OGC compliance tests only deal with the server side of
those specifications, but I might be wrong on that matter.


> Hi,
>
>
>
> We have a GIS product based on GDAL/OGR. We have been asked if the product
> is OGC compliant. Is GDAL/OGR compliant to OGC specifications? If yes, what
> all specifications are supported?
>
>
>
> Thanks,
>
> Gaurav
>
>


From p.baumann at jacobs-university.de  Tue Jul 19 07:44:17 2011
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue Jul 19 07:56:02 2011
Subject: [gdal-dev] OGC Compliance
In-Reply-To: <1311075299.4e256be31d198@webmail.free.fr>
References: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>
	<1311075299.4e256be31d198@webmail.free.fr>
Message-ID: <4E256E11.8080608@jacobs-university.de>

hi all,

indeed OGC conformance tests currently cover only the server side.
First thoughts have been made on how to include client side testing, but this 
can be expected to come in a few years.

-Peter

On 07/19/2011 01:34 PM, Even Rouault wrote:
> Selon Gaurav Garg<gaurav@vizexperts.com>:
>
> To the best of my knowledge, GDAL/OGR is not formally certified to be compliant
> to OGC specification. It implements clients for the WMS, WCS and WFS
> specifications. It also implements the GML standard (but not to its full
> extent). But AFAIK, the OGC compliance tests only deal with the server side of
> those specifications, but I might be wrong on that matter.
>
>
>> Hi,
>>
>>
>>
>> We have a GIS product based on GDAL/OGR. We have been asked if the product
>> is OGC compliant. Is GDAL/OGR compliant to OGC specifications? If yes, what
>> all specifications are supported?
>>
>>
>>
>> Thanks,
>>
>> Gaurav
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



From gaurav at vizexperts.com  Tue Jul 19 09:00:08 2011
From: gaurav at vizexperts.com (Gaurav Garg)
Date: Tue Jul 19 09:16:02 2011
Subject: [gdal-dev] OGC Compliance
In-Reply-To: <4E256E11.8080608@jacobs-university.de>
References: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>
	<1311075299.4e256be31d198@webmail.free.fr>
	<4E256E11.8080608@jacobs-university.de>
Message-ID: <006f01cc4613$cb2b5780$61820680$@vizexperts.com>

Thank Even & Peter. I see some OGC compliance test available on their site
(http://cite.opengeospatial.org/teamengine/ ). As WMS, WFS and WCS will be
covering only server side testing; it will be of no use to use.
Are the tests available for KML and GML as well? What's the best and fastest
way for us to test if we comply with OGC or not and get the product
certified? Does anyone have any experience in this regards (how long it can
take, how much it costs, etc)? 

Thanks,
Gaurav

-----Original Message-----
From: Peter Baumann [mailto:p.baumann@jacobs-university.de] 
Sent: Tuesday, July 19, 2011 5:14 PM
To: Even Rouault
Cc: Gaurav Garg; gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] OGC Compliance

hi all,

indeed OGC conformance tests currently cover only the server side.
First thoughts have been made on how to include client side testing, but
this can be expected to come in a few years.

-Peter

On 07/19/2011 01:34 PM, Even Rouault wrote:
> Selon Gaurav Garg<gaurav@vizexperts.com>:
>
> To the best of my knowledge, GDAL/OGR is not formally certified to be 
> compliant to OGC specification. It implements clients for the WMS, WCS 
> and WFS specifications. It also implements the GML standard (but not 
> to its full extent). But AFAIK, the OGC compliance tests only deal 
> with the server side of those specifications, but I might be wrong on that
matter.
>
>
>> Hi,
>>
>>
>>
>> We have a GIS product based on GDAL/OGR. We have been asked if the 
>> product is OGC compliant. Is GDAL/OGR compliant to OGC 
>> specifications? If yes, what all specifications are supported?
>>
>>
>>
>> Thanks,
>>
>> Gaurav
>>
>>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

--
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882 "Si
forte in alienas manus oberraverit hec peregrina epistola incertis ventis
dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec
preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)




From p.baumann at jacobs-university.de  Tue Jul 19 10:56:27 2011
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue Jul 19 11:18:47 2011
Subject: [gdal-dev] OGC Compliance
In-Reply-To: <006f01cc4613$cb2b5780$61820680$@vizexperts.com>
References: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>
	<1311075299.4e256be31d198@webmail.free.fr>
	<4E256E11.8080608@jacobs-university.de>
	<006f01cc4613$cb2b5780$61820680$@vizexperts.com>
Message-ID: <4E259B1B.3050402@jacobs-university.de>

hm can only speak for WCS, in my capacity as chair and spec editor;
further disclaimer: all below applies to WCS 2.0. Support for WCS 1.x is 
discontinued.

On 07/19/2011 03:00 PM, Gaurav Garg wrote:
> Thank Even&  Peter. I see some OGC compliance test available on their site
> (http://cite.opengeospatial.org/teamengine/ ). As WMS, WFS and WCS will be
> covering only server side testing; it will be of no use to use.
> Are the tests available for KML and GML as well?

The coverage model (OGC 09-146r1) [1] is now described in terms of GML 3.2.1. 
Hence, testing of GML representations is (better said: will be) possible. No KML 
support, though.


> What's the best and fastest
> way for us to test if we comply with OGC or not and get the product
> certified?

indeed, these are two questions.
- test: download the test script from the OGC repository; however, as the suite 
still is under development it ain't there yet :(
- certification: there need to be at least 3 independent open source 
implementations of a standard before OGC starts branding (it's all about 
trusting the test scripts...). We currently have: rasdaman, MapServer (in the 
make), and GMU's implementation (in the make). So we will be able to do 
branding. This means: you have to approach OGC, demonstrate that you pass the 
suite, and then you are entitled to use the certified branding.


> Does anyone have any experience in this regards (how long it can
> take, how much it costs, etc)?

- time: currently the test scripts run ~2 hrs. Add download of the scripts + 
getting them to run on your machine (effort should be limited, and  you can get 
assistance from us or others)
- costs: test suite download is free. Branding requires some bucks, but I am not 
involved in this, hence don't know.

> Thanks,
> Gaurav

my pleasure.
-Peter

[1] http://www.opengeospatial.org/standards/wcs

> -----Original Message-----
> From: Peter Baumann [mailto:p.baumann@jacobs-university.de]
> Sent: Tuesday, July 19, 2011 5:14 PM
> To: Even Rouault
> Cc: Gaurav Garg; gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] OGC Compliance
>
> hi all,
>
> indeed OGC conformance tests currently cover only the server side.
> First thoughts have been made on how to include client side testing, but
> this can be expected to come in a few years.
>
> -Peter
>
> On 07/19/2011 01:34 PM, Even Rouault wrote:
>> Selon Gaurav Garg<gaurav@vizexperts.com>:
>>
>> To the best of my knowledge, GDAL/OGR is not formally certified to be
>> compliant to OGC specification. It implements clients for the WMS, WCS
>> and WFS specifications. It also implements the GML standard (but not
>> to its full extent). But AFAIK, the OGC compliance tests only deal
>> with the server side of those specifications, but I might be wrong on that
> matter.
>>
>>> Hi,
>>>
>>>
>>>
>>> We have a GIS product based on GDAL/OGR. We have been asked if the
>>> product is OGC compliant. Is GDAL/OGR compliant to OGC
>>> specifications? If yes, what all specifications are supported?
>>>
>>>
>>>
>>> Thanks,
>>>
>>> Gaurav
>>>
>>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> --
> Dr. Peter Baumann
>    - Professor of Computer Science, Jacobs University Bremen
>      www.faculty.jacobs-university.de/pbaumann
>      mail: p.baumann@jacobs-university.de
>      tel: +49-421-200-3178, fax: +49-421-200-493178
>    - Executive Director, rasdaman GmbH Bremen (HRB 26793)
>      www.rasdaman.com, mail: baumann@rasdaman.com
>      tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882 "Si
> forte in alienas manus oberraverit hec peregrina epistola incertis ventis
> dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec
> preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)
>
>
>
>

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



From p.baumann at jacobs-university.de  Tue Jul 19 11:10:43 2011
From: p.baumann at jacobs-university.de (Peter Baumann)
Date: Tue Jul 19 11:33:51 2011
Subject: [gdal-dev] OGC Compliance
In-Reply-To: <4E259B1B.3050402@jacobs-university.de>
References: <004301cc4602$e7d42260$b77c6720$@vizexperts.com>
	<1311075299.4e256be31d198@webmail.free.fr>
	<4E256E11.8080608@jacobs-university.de>
	<006f01cc4613$cb2b5780$61820680$@vizexperts.com>
	<4E259B1B.3050402@jacobs-university.de>
Message-ID: <4E259E73.9010307@jacobs-university.de>

BTW, here is the link to the beta test suites, for what it's worth: 
http://cite.opengeospatial.org/te2/
-Peter



On 07/19/2011 04:56 PM, Peter Baumann wrote:
> hm can only speak for WCS, in my capacity as chair and spec editor;
> further disclaimer: all below applies to WCS 2.0. Support for WCS 1.x is 
> discontinued.
>
> On 07/19/2011 03:00 PM, Gaurav Garg wrote:
>> Thank Even&  Peter. I see some OGC compliance test available on their site
>> (http://cite.opengeospatial.org/teamengine/ ). As WMS, WFS and WCS will be
>> covering only server side testing; it will be of no use to use.
>> Are the tests available for KML and GML as well?
>
> The coverage model (OGC 09-146r1) [1] is now described in terms of GML 3.2.1. 
> Hence, testing of GML representations is (better said: will be) possible. No 
> KML support, though.
>
>
>> What's the best and fastest
>> way for us to test if we comply with OGC or not and get the product
>> certified?
>
> indeed, these are two questions.
> - test: download the test script from the OGC repository; however, as the 
> suite still is under development it ain't there yet :(
> - certification: there need to be at least 3 independent open source 
> implementations of a standard before OGC starts branding (it's all about 
> trusting the test scripts...). We currently have: rasdaman, MapServer (in the 
> make), and GMU's implementation (in the make). So we will be able to do 
> branding. This means: you have to approach OGC, demonstrate that you pass the 
> suite, and then you are entitled to use the certified branding.
>
>
>> Does anyone have any experience in this regards (how long it can
>> take, how much it costs, etc)?
>
> - time: currently the test scripts run ~2 hrs. Add download of the scripts + 
> getting them to run on your machine (effort should be limited, and  you can 
> get assistance from us or others)
> - costs: test suite download is free. Branding requires some bucks, but I am 
> not involved in this, hence don't know.
>
>> Thanks,
>> Gaurav
>
> my pleasure.
> -Peter
>
> [1] http://www.opengeospatial.org/standards/wcs
>
>> -----Original Message-----
>> From: Peter Baumann [mailto:p.baumann@jacobs-university.de]
>> Sent: Tuesday, July 19, 2011 5:14 PM
>> To: Even Rouault
>> Cc: Gaurav Garg; gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] OGC Compliance
>>
>> hi all,
>>
>> indeed OGC conformance tests currently cover only the server side.
>> First thoughts have been made on how to include client side testing, but
>> this can be expected to come in a few years.
>>
>> -Peter
>>
>> On 07/19/2011 01:34 PM, Even Rouault wrote:
>>> Selon Gaurav Garg<gaurav@vizexperts.com>:
>>>
>>> To the best of my knowledge, GDAL/OGR is not formally certified to be
>>> compliant to OGC specification. It implements clients for the WMS, WCS
>>> and WFS specifications. It also implements the GML standard (but not
>>> to its full extent). But AFAIK, the OGC compliance tests only deal
>>> with the server side of those specifications, but I might be wrong on that
>> matter.
>>>
>>>> Hi,
>>>>
>>>>
>>>>
>>>> We have a GIS product based on GDAL/OGR. We have been asked if the
>>>> product is OGC compliant. Is GDAL/OGR compliant to OGC
>>>> specifications? If yes, what all specifications are supported?
>>>>
>>>>
>>>>
>>>> Thanks,
>>>>
>>>> Gaurav
>>>>
>>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> -- 
>> Dr. Peter Baumann
>>    - Professor of Computer Science, Jacobs University Bremen
>>      www.faculty.jacobs-university.de/pbaumann
>>      mail: p.baumann@jacobs-university.de
>>      tel: +49-421-200-3178, fax: +49-421-200-493178
>>    - Executive Director, rasdaman GmbH Bremen (HRB 26793)
>>      www.rasdaman.com, mail: baumann@rasdaman.com
>>      tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882 "Si
>> forte in alienas manus oberraverit hec peregrina epistola incertis ventis
>> dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec
>> preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)
>>
>>
>>
>>
>

-- 
Dr. Peter Baumann
  - Professor of Computer Science, Jacobs University Bremen
    www.faculty.jacobs-university.de/pbaumann
    mail: p.baumann@jacobs-university.de
    tel: +49-421-200-3178, fax: +49-421-200-493178
  - Executive Director, rasdaman GmbH Bremen (HRB 26793)
    www.rasdaman.com, mail: baumann@rasdaman.com
    tel: 0800-rasdaman, fax: 0800-rasdafax, mobile: +49-173-5837882
"Si forte in alienas manus oberraverit hec peregrina epistola incertis ventis dimissa, sed Deo commendata, precamur ut ei reddatur cui soli destinata, nec preripiat quisquam non sibi parata." (mail disclaimer, AD 1083)



From dcole at integrity-apps.com  Tue Jul 19 18:55:37 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Tue Jul 19 19:44:21 2011
Subject: [gdal-dev] Unable to write in subdataset
Message-ID: <8406B84EA8899042A8508D858843972903C0EA4A@CHUNEX01.integrity-apps.com>

Hello,

I have created an image with multiple subdatasets so that I may store two images in my NITF. the way I am getting the data set of the second image  is like so:

char **papszSubdatasets = GDALGetMetadata(sharpenedDS,"SUBDATASETS");
         eraserDS = (GDALDataset *) GDALOpenShared(CSLFetchNameValue(papszSubdatasets, "SUBDATASET_2_NAME") , GA_ReadOnly );
         eraserBand = eraserDS->GetRasterBand(1);

(this is after checking to make sure that the first DS has more than one subdataset)

According to CPL_DEBUG, the GDALOpenShared works correctly and opens the file as NITF.

However, at some points in my code, I am getting this thrown to console presumably where I am using the band's RasterIO method to GF_Write.

ERROR 3: Unable to write 2097152 byte block from 8302649793.
ERROR 1: An error occured while writing a dirty block

What do these error messages mean? I mam getting a ton of them. the block is the same number of bytes, but the "from" changes in each instance of the error.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110719/18041269/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 19 23:30:28 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul 20 00:34:45 2011
Subject: [gdal-dev] Unable to write in subdataset
In-Reply-To: <8406B84EA8899042A8508D858843972903C0EA4A@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903C0EA4A@CHUNEX01.integrity-apps.com>
Message-ID: <CAMKgpOaJQp-9BsfXkMWR4rBJiX0ZT5Y74Yivo+=r46j6=YTF3g@mail.gmail.com>

Derek,

Why are you trying to write to the dataset after opening it as GA_ReadOnly?

On Wed, Jul 20, 2011 at 4:25 AM, Cole, Derek <dcole@integrity-apps.com>wrote:

>  Hello,
>
> I have created an image with multiple subdatasets so that I may store two
> images in my NITF. the way I am getting the data set of the second image  is
> like so:
>
> char **papszSubdatasets = GDALGetMetadata(sharpenedDS,"SUBDATASETS");
>          eraserDS = (GDALDataset *)
> GDALOpenShared(CSLFetchNameValue(papszSubdatasets, "SUBDATASET_2_NAME") ,
> GA_ReadOnly );
>          eraserBand = eraserDS->GetRasterBand(1);
>
> (this is after checking to make sure that the first DS has more than one
> subdataset)
>
> According to CPL_DEBUG, the GDALOpenShared works correctly and opens the
> file as NITF.
>
> However, at some points in my code, I am getting this thrown to console
> presumably where I am using the band's RasterIO method to GF_Write.
>
> ERROR 3: Unable to write 2097152 byte block from 8302649793.
> ERROR 1: An error occured while writing a dirty block
>
> What do these error messages mean? I mam getting a ton of them. the block
> is the same number of bytes, but the "from" changes in each instance of the
> error.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/b6f28c8b/attachment.html
From jordi.castells at hyds.es  Wed Jul 20 03:55:54 2011
From: jordi.castells at hyds.es (jordicastells@hyds.es)
Date: Wed Jul 20 05:06:11 2011
Subject: [gdal-dev] [ogr2ogr] KML extendedData attribute
Message-ID: <4E268A0A.8010409@hyds.es>

Greetings!

I've been a gdal user for at least 3 years, and first of all I have to 
say that the work done is impressive.

Now I face a little problem involving KML formats, and I don't find the 
solution in the mailing lists.

This problem is about KML extendedData tag and its subsequent childs.

I have a KML file saved by google-earth with a group of ExtendedData for 
every point. This information
is only available in this KML file. I have no other format with the same 
data.

Using ogr2ogr I transform this KML to shapefile or to GML, and all 
extendedData data is lost in the new files.

The inverse (Shp to KML or GML to KML) works as expected, retrieving all 
the shape attributes and adding it to the extendedData
tag in the KML result.

I tested with gdal 1.6 (Debian Build) and with Tamas Szekeres build for 
windows 
(http://www.gisinternals.com/sdk/PackageList.aspx?file=release-1310-gdal-1-8-1-mapserver-6-0-1.zip 
-- gdal-18-1310-core.msi 
<http://www.gisinternals.com/sdk/Download.aspx?file=release-1310-gdal-1-8-1-mapserver-6-0-1%5Cgdal-18-1310-core.msi>)

Somebody can point me to a solution? or it's a feature not included in 
current GDAL?

Thanks

-- 
################################
     Jordi Castells Sala
################################
HYDS
Hydrometeorological Innovative Solutions
c/ Jordi Girona 1-3
Edifici ParcUPC K2M, S204B
E-08034 Barcelona
SPAIN
---
Voice: +34 93 405 46 62
Fax: 93 403 72 33
http://www.hyds.es
---

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/a832b2b5/attachment.html
From sylvain.maffren at crige-paca.org  Wed Jul 20 06:22:31 2011
From: sylvain.maffren at crige-paca.org (Sylvain MAFFREN)
Date: Wed Jul 20 07:49:37 2011
Subject: [gdal-dev] Forcing the rounded of coordinates
In-Reply-To: <1310036332.4e15916ca2a7c@webmail.free.fr>
References: <4DFFC05E.3000800@crige-paca.org>
	<201106220956.39744.even.rouault@mines-paris.org>
	<4E157EE4.7090705@crige-paca.org>
	<1310036332.4e15916ca2a7c@webmail.free.fr>
Message-ID: <4E26AC67.50908@crige-paca.org>

Hello and thanks for the answer.

I juste achieve some tests regarding to my question.

"Actually, it might not be a rounding effect at display time. Paul Ramsey
identified that when inserting data into a Postgis instance, we used the WKT
representation, thus introducing rounding problem effects. You might want to
test latest trunk and see if it improves the situation for you. The relevant
ticket is http://trac.osgeo.org/gdal/ticket/4138

So now, there should be no precision loss when moving data from/to
shapefile/postgresql with ogr2ogr."


I have not seen any loss of decimal accuracy for the transfer of data 
from shapefile to PostgreSQL because I use shp2pgsql which seems to keep 
the good decimal number.

But if I've well understood your scenario, your issue seems to be more when you
pull data from Postgis.

Indeed, the problem arises when I try to transform data (not just from 
PostGIS) with ogr2ogr. Transformation shapefile to MIF / MID or TAB 
poses the same problems: loss of precision on the coordinates.

There is no general solution for avoiding precision loss. For sure, not a
ogr2ogr level, because ogr2ogr doesn't change coordinate precision (no text
conversion, just setting variables of type double). If there are rounding
issues, they must be tracked down at the driver level, and for each driver, it
will depend on the actual direction of the data flow (reading vs writing). A
reproducable example of ogr command lines you use with associated data would be
helpfull to understand what's going on in your case.

Now, if you want to change/force coordinate precision, I can imagine that it
*could* be done at ogr2ogr by converting the source geometry object to WKT with
a given precision and then converted back to a destination geometry object. But
the output driver (at least the text based ones) should have a way to know how
many decimals are expected.

I'd note that currently a few text based drivers (bna, geojson recently) have
specific creation options to control the precision in write mode. AFAIR, there's
also ticket in Trac for the same wish for KML.

I made several tests and I do the same conclusion each time: the 
coordinates output are not those expected and decimals are added which 
means that the object has not" really true and good" output coordinates .

In addition, I did some tests on the same data with FME and conservation 
of the decimal accuracy is good. It's pretty boring for us because the 
data output with ogr2ogr is "false." And I find no way to get output 
data that have the same number of decimal places that entry (export in 
shapefile, MIF/MID, TAB) ... Maybe a better future OGR2OGR?

Best regards,

--

*Sylvain MAFFREN*
*G?omaticien*

*T?l* : 04 42 90 71 22
*Fax* : 04 42 97 11 56

*CRIGE PACA*
Domaine du Petit Arbois - Avenue Louis Philibert
BP 10019 - 13 545 Aix-en-Provence cedex 4
www.crige-paca.org <http://www.crige-paca.org/>


Le 07/07/2011 12:58, Even Rouault a ?crit :
> Selon Sylvain MAFFREN<sylvain.maffren@crige-paca.org>:
>
>> Hello and thank you for that answer.
>>
>> I think if it was a rounding effect that appears at display time when
>> ogrinfo outputs the WKT representation, I should have the same results
>> on several data but this is notthe case.
>>
>> Indeed,by querying topology between the source layer and output layer
>> (checking to see if the two layers overlap perfectly), I didn't have any
>> results. That's means that the coordinates of output have been changed
>> by ogr2ogr and that's why I think it's not a rounding effect.
> Actually, it might not be a rounding effect at display time. Paul Ramsey
> identified that when inserting data into a Postgis instance, we used the WKT
> representation, thus introducing rounding problem effects. You might want to
> test latest trunk and see if it improves the situation for you. The relevant
> ticket is http://trac.osgeo.org/gdal/ticket/4138
>
> So now, there should be no precision loss when moving data from/to
> shapefile/postgresql with ogr2ogr.
>
> But if I've well understood your scenario, your issue seems to be more when you
> pull data from Postgis.
>
>> It is there a chance that changes be made to add a parameter in ogr2ogr
>> in order to force the rounded coordinates with a number of decimal
>> defined by user in future versions of gdal / ogr? We would be willing to
>> fund this improvement if necessary.
>>
>> Thank you in advance for your feedback.
> There is no general solution for avoiding precision loss. For sure, not a
> ogr2ogr level, because ogr2ogr doesn't change coordinate precision (no text
> conversion, just setting variables of type double). If there are rounding
> issues, they must be tracked down at the driver level, and for each driver, it
> will depend on the actual direction of the data flow (reading vs writing). A
> reproducable example of ogr command lines you use with associated data would be
> helpfull to understand what's going on in your case.
>
> Now, if you want to change/force coordinate precision, I can imagine that it
> *could* be done at ogr2ogr by converting the source geometry object to WKT with
> a given precision and then converted back to a destination geometry object. But
> the output driver (at least the text based ones) should have a way to know how
> many decimals are expected.
>
> I'd note that currently a few text based drivers (bna, geojson recently) have
> specific creation options to control the precision in write mode. AFAIR, there's
> also ticket in Trac for the same wish for KML.
>
>> Le 22/06/2011 09:56, Even Rouault a ?crit :
>>
>> This might be just a rounding effect that appears at display time when
>> ogrinfo
>> outputs the WKT representation, but not affect the output data itself. Likely
>> 993366.00000000058 and 993366 are 2 decimal representations for the same
>> binary representation. There's no generation option to control the coordinate
>> precision of the output in ogr2ogr. A few drivers/formats that are text-based
>> have a layer/dataset creation option to control it, but this is driver/format
>> dependant. You might want (or not!) to hack into the ugly logic of
>> OGRFormatDouble() in ogr/ogrutils.cpp that is the main responsible for what
>> you observe...
>>
>>
>>>>   Hi !
>>>>
>>>>   I apologize in advance for my english which I not very fluent. I have
>>>>   some questions about the tool ogr2ogr (and also about gdalwarp and
>>>>   gdal_translate) and the rounding of coordinates.
>>>>
>>>>
>>>>   Let me explain:
>>>>
>>>>   Some databases (particularly IGN -- France databases) have coordinates
>>>>   rounded to the meter (BD CARTO for example) or the decimeter (BD TOPO
>>>>   for example).
>>>>
>>>>   I will explain my comment with for bases the coordinates of a point of
>>>>   BD CARTO to support my comments :
>>>>
>>>>   In an original *.shp in Lambert93 - France, a point has the following
>>>>   coordinates (provided by ogrinfo):
>>>>
>>>>   X = 993366 m Y = 6304044 m
>>>>
>>>>   We import this in PostGIS with shp2pgsql, and the point has always these
>>>>   coordinates:
>>>>
>>>>   X = 993366 m Y = 6304044 m
>>>>
>>>>   It's good !
>>>>
>>>>   If we try to export this PostGIS layer through ogr2ogr (in *.shp, *.tab
>>>>   or *.mif), a ogrinfo gives us the same point of the layer resulting,
>>>>   with the following coordinates:
>>>>
>>>>   X = and Y = 993366.00000000058 6304043.9999999898)
>>>>
>>>>   This means that ogr2ogr (identical tests performed on a raster layer
>>>>   bounding box with reprojection (gdalwarp) or without (gdal_translate))
>>>>   changes the number of decimal coordinates of origin, which can be
>>>>   annoying in some cases (when we need to recover a given output with the
>>>>   same number of decimal than in entry.
>>>>
>>>>   I tried to find a setting to force ogr2ogr (or gdal and related
>>>>   functions) to round the coordinates to a given number of decimal (as can
>>>>   be done with CS2CS) and I have not found any answer.
>>>>
>>>>   Is it possible to set the number of decimal places in output (and
>>>>   ideally keep the same as input) ? And if so, how?
>>>>
>>>>   Thank you in advance to all who have good ideas and / or directions to
>>>>   follow.
>>>>
>>>>
>>>>   Sylvain Maffren
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/fe6f6acb/attachment-0001.html
From dcole at integrity-apps.com  Wed Jul 20 08:32:45 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Wed Jul 20 10:06:44 2011
Subject: [gdal-dev] Unable to write in subdataset
In-Reply-To: <CAMKgpOaJQp-9BsfXkMWR4rBJiX0ZT5Y74Yivo+=r46j6=YTF3g@mail.gmail.com>
References: <8406B84EA8899042A8508D858843972903C0EA4A@CHUNEX01.integrity-apps.com>,
	<CAMKgpOaJQp-9BsfXkMWR4rBJiX0ZT5Y74Yivo+=r46j6=YTF3g@mail.gmail.com>
Message-ID: <8406B84EA8899042A8508D858843972903C0EAFF@CHUNEX01.integrity-apps.com>

Doh! Thank you, I will fix that and see what happens. I suspect that solves the problem! Stared at it too long I guess!

Thanks,

Derek
________________________________
From: Chaitanya kumar CH [chaitanya.ch@gmail.com]
Sent: Tuesday, July 19, 2011 11:30 PM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Unable to write in subdataset

Derek,

Why are you trying to write to the dataset after opening it as GA_ReadOnly?

On Wed, Jul 20, 2011 at 4:25 AM, Cole, Derek <dcole@integrity-apps.com<mailto:dcole@integrity-apps.com>> wrote:
Hello,

I have created an image with multiple subdatasets so that I may store two images in my NITF. the way I am getting the data set of the second image  is like so:

char **papszSubdatasets = GDALGetMetadata(sharpenedDS,"SUBDATASETS");
         eraserDS = (GDALDataset *) GDALOpenShared(CSLFetchNameValue(papszSubdatasets, "SUBDATASET_2_NAME") , GA_ReadOnly );
         eraserBand = eraserDS->GetRasterBand(1);

(this is after checking to make sure that the first DS has more than one subdataset)

According to CPL_DEBUG, the GDALOpenShared works correctly and opens the file as NITF.

However, at some points in my code, I am getting this thrown to console presumably where I am using the band's RasterIO method to GF_Write.

ERROR 3: Unable to write 2097152 byte block from 8302649793.
ERROR 1: An error occured while writing a dirty block

What do these error messages mean? I mam getting a ton of them. the block is the same number of bytes, but the "from" changes in each instance of the error.

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/8c0ce633/attachment.html
From antonio.valentino at tiscali.it  Wed Jul 20 08:42:23 2011
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Jul 20 10:17:01 2011
Subject: [gdal-dev] Fw: How to get TerraSAR-X TSX Driver all metadata
Message-ID: <20110720144223.4747104d@asigrid01>

Data: Wed, 20 Jul 2011 09:05:06 +0000
Da:  <rsyaoxin@hotmail.com>
A:  <antonio.valentino@tiscali.it>
Oggetto: RE: How to get TerraSAR-X TSX Driver all metadata

Yes,I agree.Thank you.

 > Date: Wed, 20 Jul 2011 10:06:24 +0200
> From: antonio.valentino@tiscali.it
> To: RSyaoxin@hotmail.com
> Subject: Re: How to get TerraSAR-X TSX Driver all metadata
> 
> Hi RSyaoxin,
> 
> Il giorno Wed, 20 Jul 2011 00:23:15 -0700
> RSyaoxin@hotmail.com ha scritto:
> 
> > Hi,Antonio 
> >        I need to calibrate TerraSAR-X TSX driver data,but I found
> > that GDAL can only extract some metadata of TerraSAR-X TSX driver
> > data,not extract all the metadata and gcps,for
> > example,calibrationConstant.However,these information is very
> > important.How should I do?Do you have any good idea?
> 
> [CUT]
> 
> sorry I have no access to TSX data at the moment so I can't help you.
> 
> As far a I know TSX products include XML files that store all possible
> metadata so it should be not to hard to retrieve all info you need
> with a little bit of XML parsing.
> 
> Regarding possible improvements to the TSX/GDAL driver I will try to
> retrieve some TSX product to make some test but I can't promise
> anything.
> 
> Anyway I would appreciate a lot if you could file a ticket on
> 
> http://trac.osgeo.org/gdal
> 
> with your feature request.
> 
> RSyaoxin, if you agree I would like to forward this message to the
> GDAL mailing list so that also other users can take advantage form
> this discussion.
> 
> Best regards
> 
> -- 
> Antonio Valentino
 		 	   		  

-- 
Antonio Valentino
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/ebfcc2b5/Originalhtmlpart.html
From even.rouault at mines-paris.org  Wed Jul 20 10:47:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul 20 12:28:36 2011
Subject: [gdal-dev] [ogr2ogr] KML extendedData attribute
In-Reply-To: <4E268A0A.8010409@hyds.es>
References: <4E268A0A.8010409@hyds.es>
Message-ID: <201107201647.08672.even.rouault@mines-paris.org>

Jordi,

GDAL trunk, with LIBKML driver (the one which requires GDAL to be built 
against Google libkml library, to be opposed to the "old" hand-written KML 
driver), can recognize the ExtendedData of the first sample found in 
http://code.google.com/apis/kml/documentation/extendeddata.html

Extract of ogrinfo on that file :

Name: String (0.0)
description: String (0.0)
timestamp: DateTime (0.0)
begin: DateTime (0.0)
end: DateTime (0.0)
altitudeMode: String (0.0)
tessellate: Integer (0.0)
extrude: Integer (0.0)
visibility: Integer (0.0)
holeNumber: String (0.0)
holeYardage: String (0.0)
holePar: String (0.0)
OGRFeature(extendeddata):1
  Name (String) = Club house
  description (String) = (null)
  timestamp (DateTime) = (null)
  begin (DateTime) = (null)
  end (DateTime) = (null)
  altitudeMode (String) = (null)
  tessellate (Integer) = -1
  extrude (Integer) = -1
  visibility (Integer) = -1
  holeNumber (String) = 1
  holeYardage (String) = 234
  holePar (String) = 4
  POINT (-111.956 33.5043)

Note that the support of <ExtendedData> without <SchemaData> is specific to 
trunk version. (introduced in 
http://trac.osgeo.org/gdal/changeset/22127/trunk/gdal/ogr/ogrsf_frmts/libkml)

I've also just fixed an issue with the mapping of some data types when 
<SchemaData> is used. See http://trac.osgeo.org/gdal/ticket/4171

Best regards,

Even
From even.rouault at mines-paris.org  Wed Jul 20 11:37:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul 20 13:22:00 2011
Subject: [gdal-dev] Forcing the rounded of coordinates
In-Reply-To: <4E26AC67.50908@crige-paca.org>
References: <4DFFC05E.3000800@crige-paca.org>
	<1310036332.4e15916ca2a7c@webmail.free.fr>
	<4E26AC67.50908@crige-paca.org>
Message-ID: <201107201737.57926.even.rouault@mines-paris.org>

Sylvain,

> 
> Indeed, the problem arises when I try to transform data (not just from
> PostGIS) with ogr2ogr. Transformation shapefile to MIF / MID or TAB
> poses the same problems: loss of precision on the coordinates.

Looking very quicly to the MIF driver, I see for example that a point is 
written with :

p->WriteLine("Point %.15g %.15g\n",poPoint->getX(),poPoint->getY());

So that means that up to 15 significant figures are written (including figures 
before the decimal point).

> 
> I made several tests and I do the same conclusion each time: the
> coordinates output are not those expected and decimals are added which
> means that the object has not" really true and good" output coordinates .

You didn't mention if you've tested with the drivers I mentionned to have 
options to control the decimal precision ?

> 
> In addition, I did some tests on the same data with FME and conservation
> of the decimal accuracy is good. It's pretty boring for us because the
> data output with ogr2ogr is "false." And I find no way to get output
> data that have the same number of decimal places that entry (export in
> shapefile, MIF/MID, TAB) ... Maybe a better future OGR2OGR?

It might not look as such, but I believe this is a really challenging topic 
that could have broad implications in OGR core and drivers. It sounds more 
like you'd wish to keep the same precision in the output datasource as the 
input datasource, rather than to control explicitly the output precision, 
right ?

Several points to consider :

* Some datasources use binary representations (shapefile, postgis, 
sqlite/spatialite, tab?, ...) whereas others (mif, kml, gml, geojson, bna...) 
use text representations. But the OGR geometry model only stores a binary 
representation.

* For a text representation, how would we define the desired accuracy : the 
accuracy of each coordinate component found in the input data, the maximum 
accurarcy of any coordinate component for a given geometry, ... ? 
This would mean that somehow, in the OGR geometry model, the precision of the 
values should be set. Or that the text representation should be kept alongside 
with the binary one.

* When transforming from a binary datasource to a text datasource, how do we 
define the accuracy of the source ? Let's consider a number whose one 
representation would be 12.34. Should we write it 12.34, 12.340, 12.3400, or 
... ? The binary representation isn't sufficient to determine the precision for 
its text representation.

And of course, all the above only makes sense when just translating from one 
format to another one ... without reprojection.

IMHO, a quicker&simpler solution (you might qualify it as a workaround ;-)) 
would be to add an option to explicitely set the output precision wished in 
the drivers you are interested in.

Best regards,

Even
From even.rouault at mines-paris.org  Wed Jul 20 17:11:14 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul 20 19:13:20 2011
Subject: [gdal-dev] Motion: Commit Access for Paul Ramsey
Message-ID: <201107202311.14667.even.rouault@mines-paris.org>

Motion: Extend GDAL/OGR Commit Access to Paul Ramsey

---

Hi,

Paul, who has been involved for many years in the developement of various 
OSGeo projects like PostGIS or MapServer, has recently contributed in the 
developement of the OGR FileGDB driver. I have applied on his behalf various 
patches he has submitted to Trac (*). His area of interest would also cover 
the OGR PG driver for which he has also contributed an enhancement recently.

It would be convenient to give him direct commit access to subversion.

Paul, could you reply to this message indicating your agreement to the
guidelines listed in:

    http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I'll start voting with my support:

+1

Best regards,

Even

(*) See http://trac.osgeo.org/gdal/search?q=FGDB&noquickjump=1&ticket=on
From a.neumann at carto.net  Wed Jul 20 17:18:50 2011
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Jul 20 19:21:29 2011
Subject: [gdal-dev] Motion: Commit Access for Paul Ramsey
In-Reply-To: <201107202311.14667.even.rouault@mines-paris.org>
References: <201107202311.14667.even.rouault@mines-paris.org>
Message-ID: <4E27463A.4010006@carto.net>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

+1

Looking forward to Pauls contributions.

Andreas

On 07/20/2011 11:11 PM, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey
> 
> ---
> 
> Hi,
> 
> Paul, who has been involved for many years in the developement of various 
> OSGeo projects like PostGIS or MapServer, has recently contributed in the 
> developement of the OGR FileGDB driver. I have applied on his behalf various 
> patches he has submitted to Trac (*). His area of interest would also cover 
> the OGR PG driver for which he has also contributed an enhancement recently.
> 
> It would be convenient to give him direct commit access to subversion.
> 
> Paul, could you reply to this message indicating your agreement to the
> guidelines listed in:
> 
>     http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with my support:
> 
> +1
> 
> Best regards,
> 
> Even
> 
> (*) See http://trac.osgeo.org/gdal/search?q=FGDB&noquickjump=1&ticket=on
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.11 (GNU/Linux)
Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJOJ0YuAAoJELiCsGDopvBCfssH/0D6FdZjvz+9x9tOMXRhidTh
41O0IHbmvtU+1TpIbWJBOTynZJKASKLI57GBq95U9o6Q5WDj0b5F3kkuBTtsMnQU
62jXmE14Q9nHBjeWPjzx0zQW4sDYJPw3WqzvSpQWbvWr+47GzkKWuZwae+WJbfWm
HXOlg/EDqyMo9GrqClq37EOPtVjMoN8Z1LH8ewvY7sv59gaInXtYluH+VfBVbJAA
Af0hIOefKont/yyv9FjJg+m5CgWChsbZVFXuKY+JwGdMzwmA2cjx5yqPX24Jsmc+
jx43TxLwYum0eUwM7BwL7wlNr9crJNo/QC2qbJJi+Ti0ab9Kvnxpguk0xsnQoI4=
=u5Qx
-----END PGP SIGNATURE-----
From pramsey at cleverelephant.ca  Wed Jul 20 17:23:22 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Jul 20 19:26:04 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <201107202311.14667.even.rouault@mines-paris.org>
References: <201107202311.14667.even.rouault@mines-paris.org>
Message-ID: <CACowWR1++BY7+XVqe-UmVKuoH-POsHvJnyXx0DR4yhjuOuh3dg@mail.gmail.com>

On Wed, Jul 20, 2011 at 2:11 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Paul, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
> ? ?http://trac.osgeo.org/gdal/wiki/rfc3_commiters

I have read and agree to your draconian terms. :)

P.
From szekerest at gmail.com  Wed Jul 20 17:55:53 2011
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jul 20 20:00:19 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <201107202311.14667.even.rouault@mines-paris.org>
References: <201107202311.14667.even.rouault@mines-paris.org>
Message-ID: <CACALY+R00KJgvx1xYYTROxb4gCeRcuJgn2SxD13PhjYRy+cLGw@mail.gmail.com>

+1

Best regards,

Tamas




2011/7/20 Even Rouault <even.rouault@mines-paris.org>

> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey
>
> ---
>
> Hi,
>
> Paul, who has been involved for many years in the developement of various
> OSGeo projects like PostGIS or MapServer, has recently contributed in the
> developement of the OGR FileGDB driver. I have applied on his behalf
> various
> patches he has submitted to Trac (*). His area of interest would also cover
> the OGR PG driver for which he has also contributed an enhancement
> recently.
>
> It would be convenient to give him direct commit access to subversion.
>
> Paul, could you reply to this message indicating your agreement to the
> guidelines listed in:
>
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
>
> I'll start voting with my support:
>
> +1
>
> Best regards,
>
> Even
>
> (*) See http://trac.osgeo.org/gdal/search?q=FGDB&noquickjump=1&ticket=on
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/915d18e2/attachment.html
From hobu.inc at gmail.com  Wed Jul 20 18:19:48 2011
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Jul 20 20:26:08 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <CACALY+R00KJgvx1xYYTROxb4gCeRcuJgn2SxD13PhjYRy+cLGw@mail.gmail.com>
References: <201107202311.14667.even.rouault@mines-paris.org>
	<CACALY+R00KJgvx1xYYTROxb4gCeRcuJgn2SxD13PhjYRy+cLGw@mail.gmail.com>
Message-ID: <89D721B6-FE40-4A21-9158-1EFEAA010A1F@gmail.com>

+1

On Jul 20, 2011, at 4:55 PM, Tamas Szekeres <szekerest@gmail.com> wrote:

> +1
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 
> 2011/7/20 Even Rouault <even.rouault@mines-paris.org>
> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey
> 
> ---
> 
> Hi,
> 
> Paul, who has been involved for many years in the developement of various
> OSGeo projects like PostGIS or MapServer, has recently contributed in the
> developement of the OGR FileGDB driver. I have applied on his behalf various
> patches he has submitted to Trac (*). His area of interest would also cover
> the OGR PG driver for which he has also contributed an enhancement recently.
> 
> It would be convenient to give him direct commit access to subversion.
> 
> Paul, could you reply to this message indicating your agreement to the
> guidelines listed in:
> 
>    http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> 
> I'll start voting with my support:
> 
> +1
> 
> Best regards,
> 
> Even
> 
> (*) See http://trac.osgeo.org/gdal/search?q=FGDB&noquickjump=1&ticket=on
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/95e35fde/attachment.html
From thakkar at nexgenwireless.com  Wed Jul 20 18:54:48 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Wed Jul 20 21:02:27 2011
Subject: [gdal-dev] Re: GDAL unable to recognize large GRC file
In-Reply-To: <CAMKgpOZYVhq6izger+1oqFHVDKaVqTYNi==SsSnuKx0GB08_iw@mail.gmail.com>
References: <1310852454935-6590399.post@n2.nabble.com>
	<CAMKgpOZYVhq6izger+1oqFHVDKaVqTYNi==SsSnuKx0GB08_iw@mail.gmail.com>
Message-ID: <1311202488268-6604781.post@n2.nabble.com>

Yes, I'm able to open the raster file in mapinfo.

Turning on the CPL_DEBUG env variable produces the following.  It dosn't
seem to help much.
Are there any other methods I can debug this?

The file is about 580MB.  Is there a limitation on # of pixels?

ERROR 4: `filename.grc' not recognised as a supported file format.

gdalinfo failed - unable to open 'filename.grc'.
GDAL: GDALDeregister_GTiff() called.
GDAL: In GDALDestroy - unloading GDAL shared library.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-file-tp6590399p6604781.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Jul 20 22:27:28 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jul 21 00:46:58 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <89D721B6-FE40-4A21-9158-1EFEAA010A1F@gmail.com>
References: <201107202311.14667.even.rouault@mines-paris.org>
	<CACALY+R00KJgvx1xYYTROxb4gCeRcuJgn2SxD13PhjYRy+cLGw@mail.gmail.com>
	<89D721B6-FE40-4A21-9158-1EFEAA010A1F@gmail.com>
Message-ID: <CA+YzLBdVRmmnJ2ZBetnHKxZa2WXA3qAoEdh=evbDFfx7eRGnhg@mail.gmail.com>

>> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From chaitanya.ch at gmail.com  Thu Jul 21 00:11:01 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul 21 02:36:03 2011
Subject: [gdal-dev] Re: GDAL unable to recognize large GRC file
In-Reply-To: <1311202488268-6604781.post@n2.nabble.com>
References: <1310852454935-6590399.post@n2.nabble.com>
	<CAMKgpOZYVhq6izger+1oqFHVDKaVqTYNi==SsSnuKx0GB08_iw@mail.gmail.com>
	<1311202488268-6604781.post@n2.nabble.com>
Message-ID: <CAMKgpOaOBRk2NPmGFmJm_RgZS4WQPkv6LqcACDVvJdaJC0YvzQ@mail.gmail.com>

John,

Can you provide me the failing file? You can send a link to me alone.

On Thu, Jul 21, 2011 at 4:24 AM, jt2000 <thakkar@nexgenwireless.com> wrote:

> Yes, I'm able to open the raster file in mapinfo.
>
> Turning on the CPL_DEBUG env variable produces the following.  It dosn't
> seem to help much.
> Are there any other methods I can debug this?
>
> The file is about 580MB.  Is there a limitation on # of pixels?
>
> ERROR 4: `filename.grc' not recognised as a supported file format.
>
> gdalinfo failed - unable to open 'filename.grc'.
> GDAL: GDALDeregister_GTiff() called.
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-file-tp6590399p6604781.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110721/a2028e36/attachment.html
From thakkar at nexgenwireless.com  Thu Jul 21 00:37:05 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Thu Jul 21 03:03:35 2011
Subject: [gdal-dev] RE: GDAL unable to recognize large GRC file
In-Reply-To: <CAMKgpOaOBRk2NPmGFmJm_RgZS4WQPkv6LqcACDVvJdaJC0YvzQ@mail.gmail.com>
References: <1310852454935-6590399.post@n2.nabble.com>
	<CAMKgpOZYVhq6izger+1oqFHVDKaVqTYNi==SsSnuKx0GB08_iw@mail.gmail.com>
	<1311202488268-6604781.post@n2.nabble.com>
	<CAMKgpOaOBRk2NPmGFmJm_RgZS4WQPkv6LqcACDVvJdaJC0YvzQ@mail.gmail.com>
Message-ID: <001c01cc475f$d993d070$8cbb7150$@com>

I would like to however, it?s a customer file and we?re bound by contract to
keep it confidential.

 

I can send you hex dump of the header if you?d like.  Or let me know any
other way I can help.

 

John

 

From: Chaitanya kumar CH [via OSGeo.org]
[mailto:ml-node+6605364-1746864975-340285@n2.nabble.com] 
Sent: Wednesday, July 20, 2011 11:11 PM
To: jt2000
Subject: Re: GDAL unable to recognize large GRC file

 

John,

Can you provide me the failing file? You can send a link to me alone.

On Thu, Jul 21, 2011 at 4:24 AM, jt2000 <[hidden email]> wrote:

Yes, I'm able to open the raster file in mapinfo.

Turning on the CPL_DEBUG env variable produces the following. ? It dosn't
seem to help much.
Are there any other methods I can debug this?

The file is about 580MB. ? Is there a limitation on # of pixels?


ERROR 4: `filename.grc' not recognised as a supported file format.

gdalinfo failed - unable to open 'filename.grc'.

GDAL: GDALDeregister_GTiff() called.
GDAL: In GDALDestroy - unloading GDAL shared library.

--
View this message in context:
http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-fi
le-tp6590399p6604781.html

Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
[hidden email]
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

_______________________________________________ 
gdal-dev mailing list 
[hidden email] 
http://lists.osgeo.org/mailman/listinfo/gdal-dev 

  _____  

If you reply to this email, your message will be added to the discussion
below:

http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-fi
le-tp6590399p6605364.html 

To unsubscribe from GDAL unable to recognize large GRC file, click here
<http://osgeo-org.1803224.n2.nabble.com/template/NamlServlet.jtp?macro=unsub
scribe_by_code&node=6590399&code=dGhha2thckBuZXhnZW53aXJlbGVzcy5jb218NjU5MDM
5OXw3MTAwMjk0OTg=> . 



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-file-tp6590399p6605407.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110720/9c0e06a0/attachment.html
From chaitanya.ch at gmail.com  Thu Jul 21 01:22:08 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul 21 03:51:17 2011
Subject: [gdal-dev] RE: GDAL unable to recognize large GRC file
In-Reply-To: <001c01cc475f$d993d070$8cbb7150$@com>
References: <1310852454935-6590399.post@n2.nabble.com>
	<CAMKgpOZYVhq6izger+1oqFHVDKaVqTYNi==SsSnuKx0GB08_iw@mail.gmail.com>
	<1311202488268-6604781.post@n2.nabble.com>
	<CAMKgpOaOBRk2NPmGFmJm_RgZS4WQPkv6LqcACDVvJdaJC0YvzQ@mail.gmail.com>
	<001c01cc475f$d993d070$8cbb7150$@com>
Message-ID: <CAMKgpOY2d=iJxMe0E5isyMSxuakcyg2vHvg7kNp4zRirYkkujQ@mail.gmail.com>

Sure, split the file send me the first 2KB.

On Thu, Jul 21, 2011 at 10:07 AM, jt2000 <thakkar@nexgenwireless.com> wrote:

> I would like to however, it?s a customer file and we?re bound by contract
> to keep it confidential.****
>
> ** **
>
> I can send you hex dump of the header if you?d like.  Or let me know any
> other way I can help.****
>
> ** **
>
> John****
>
> ** **
>
> *From:* Chaitanya kumar CH [via OSGeo.org] [mailto:[hidden email]<http://user/SendEmail.jtp?type=node&node=6605407&i=0>]
>
> *Sent:* Wednesday, July 20, 2011 11:11 PM
> *To:* jt2000
> *Subject:* Re: GDAL unable to recognize large GRC file****
>
> ** **
>
> John,
>
> Can you provide me the failing file? You can send a link to me alone.****
>
> On Thu, Jul 21, 2011 at 4:24 AM, jt2000 <[hidden email]<http://user/SendEmail.jtp?type=node&node=6605364&i=0>>
> wrote:****
>
> Yes, I'm able to open the raster file in mapinfo.
>
> Turning on the CPL_DEBUG env variable produces the following. ? It dosn't
>
> seem to help much.
> Are there any other methods I can debug this?
>
> The file is about 580MB. ? Is there a limitation on # of pixels?****
>
>
> ERROR 4: `filename.grc' not recognised as a supported file format.
>
> gdalinfo failed - unable to open 'filename.grc'.****
>
> GDAL: GDALDeregister_GTiff() called.
> GDAL: In GDALDestroy - unloading GDAL shared library.
>
> --
> View this message in context: click here. ****
>
> ------------------------------
> View this message in context: RE: GDAL unable to recognize large GRC file<http://osgeo-org.1803224.n2.nabble.com/GDAL-unable-to-recognize-large-GRC-file-tp6590399p6605407.html>
>
> Sent from the GDAL - Dev mailing list archive<http://osgeo-org.1803224.n2.nabble.com/GDAL-Dev-f2022644.html>at Nabble.com.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110721/c1f4ed0b/attachment.html
From julien.malik at c-s.fr  Thu Jul 21 05:19:20 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Thu Jul 21 08:01:21 2011
Subject: [gdal-dev] ESA Summer of Code In Space
Message-ID: <4E27EF18.7040300@c-s.fr>

Hello all,

As you may know, ESA, the European Space Agency, has launched their 
Summer of COde In Space (SOCIS), much like Google does with the Google 
Summer of Code.
The list of mentoring organizations is published here : 
http://sophia.estec.esa.int/socis2011/?q=node/13
Students can apply until next week, the 27th July (the schedule is very 
tight !)

As GDAL is not in the list, I'm taking the liberty to inform all 
students interested in image processing algorithm development that the 
Orfeo Toolbox project is selected. As such, there is an opportunity for 
a paid job working on open source image processing !

Orfeo Toolbox is an image processing library which targets mainly VHR 
remote sensing imagery.
Orfeo Toolbox rely heavily on GDAL for its I/O handling, both raster and 
vectors.

We have set up an idea list here :
http://wiki.orfeo-toolbox.org/index.php/ESA_SOCIS_2011
but other ideas are welcome of course !

Please step in on otb-users@googlegroups.com if you're interested !

Cheers,
Julien

From dmorissette at mapgears.com  Thu Jul 21 08:00:06 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu Jul 21 10:51:06 2011
Subject: [gdal-dev] Motion: Commit Access for Paul Ramsey
In-Reply-To: <201107202311.14667.even.rouault@mines-paris.org>
References: <201107202311.14667.even.rouault@mines-paris.org>
Message-ID: <4E2814C6.6040605@mapgears.com>

On 11-07-20 05:11 PM, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey
>

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From pavkiz at mail.ru  Thu Jul 21 08:46:14 2011
From: pavkiz at mail.ru (el_inca)
Date: Thu Jul 21 11:39:19 2011
Subject: [gdal-dev] Saving 16 bit image
Message-ID: <1311252374099-6606613.post@n2.nabble.com>

Hi,
Can anybody help me with saving TIFF images? I need to save 8 bit image to
16 bit image.
Raster data is keeping in Byte array.
When i save from 8 bit to 8 bit it works good.
But when i save from 8 to 16 bit Gdal creates an image, that i can read
after with this library, but not with another program that supports 16 bit
images.
I wrote a program that makes byte shift. So when shifting at 4 bytes in each
image row it displays correctly.
In documentation i have read that GDAL automatically translates data types.

Image colorscheme is in RGB.

Here is the part of code:

GDALDataset *new_dataset;
					
new_dataset=driver->Create(Filename,
                                        image_size_x,
                                        image_size_y,
                                        poDataset->GetRasterCount(),
                                        GDT_Int16,
		  	       NULL);

for (int raster=0;raster<poDataset->GetRasterCount();raster++)
      {
	GDALRasterBand *new_rasterband;
	new_rasterband=new_dataset->GetRasterBand(raster+1);
	for (int j=0;j&lt;image_size_y;j++)
	    {
		Byte * scanline=new  Byte[image_size_x];
		new_rasterband-&gt;RasterIO(GF_Write,
					     0,//start position in X
                       	 	                y,//start position in Y
					     image_size_x,
 					     1,
					     scanline,
					     image_size_x,//buffer
                                     		     1,
					     GDT_Byte,
					     0,
					     0);
              }
   }



--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Saving-16-bit-image-tp6606613p6606613.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Jul 21 09:03:10 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul 21 11:57:11 2011
Subject: [gdal-dev] Saving 16 bit image
In-Reply-To: <1311252374099-6606613.post@n2.nabble.com>
References: <1311252374099-6606613.post@n2.nabble.com>
Message-ID: <CAMKgpOZLf5pCnqQ1kFKL2u6ze4Ek3MyOd+rm=RDQvy5WZ-K++A@mail.gmail.com>

pavkiz,

You are using GDT_Byte in the RasterIO function call. If you want to write
the date with 16bit depth you need to use GDT_Int16 or GDT_UInt16.

Check the translation with the GDAL utility gdal_translate [1] with the -ot
option.

[1]: http://www.gdal.org/gdal_translate.html

On Thu, Jul 21, 2011 at 6:16 PM, el_inca <pavkiz@mail.ru> wrote:

> Hi,
> Can anybody help me with saving TIFF images? I need to save 8 bit image to
> 16 bit image.
> Raster data is keeping in Byte array.
> When i save from 8 bit to 8 bit it works good.
> But when i save from 8 to 16 bit Gdal creates an image, that i can read
> after with this library, but not with another program that supports 16 bit
> images.
> I wrote a program that makes byte shift. So when shifting at 4 bytes in
> each
> image row it displays correctly.
> In documentation i have read that GDAL automatically translates data types.
>
> Image colorscheme is in RGB.
>
> Here is the part of code:
>
> GDALDataset *new_dataset;
>
> new_dataset=driver->Create(Filename,
>                                        image_size_x,
>                                        image_size_y,
>                                        poDataset->GetRasterCount(),
>                                        GDT_Int16,
>                               NULL);
>
> for (int raster=0;raster<poDataset->GetRasterCount();raster++)
>      {
>        GDALRasterBand *new_rasterband;
>        new_rasterband=new_dataset->GetRasterBand(raster+1);
>        for (int j=0;j&lt;image_size_y;j++)
>            {
>                Byte * scanline=new  Byte[image_size_x];
>                new_rasterband-&gt;RasterIO(GF_Write,
>                                             0,//start position in X
>                                                y,//start position in Y
>                                             image_size_x,
>                                             1,
>                                             scanline,
>                                             image_size_x,//buffer
>                                                     1,
>                                             GDT_Byte,
>                                             0,
>                                             0);
>              }
>   }
>
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Saving-16-bit-image-tp6606613p6606613.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110721/970bcbb4/attachment.html
From dron at ak4719.spb.edu  Thu Jul 21 09:26:53 2011
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Thu Jul 21 12:22:30 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <201107202311.14667.even.rouault@mines-paris.org>
References: <201107202311.14667.even.rouault@mines-paris.org>
Message-ID: <20110721132650.GA6595@ak4719.spb.edu>

On Wed, Jul 20, 2011 at 11:11:14PM +0200, Even Rouault wrote:
> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey

+1


-- 
Andrey V. Kiselev
From pavkiz at mail.ru  Thu Jul 21 09:37:51 2011
From: pavkiz at mail.ru (el_inca)
Date: Thu Jul 21 12:33:39 2011
Subject: [gdal-dev] Re: Saving 16 bit image
In-Reply-To: <CAMKgpOZLf5pCnqQ1kFKL2u6ze4Ek3MyOd+rm=RDQvy5WZ-K++A@mail.gmail.com>
References: <1311252374099-6606613.post@n2.nabble.com>
	<CAMKgpOZLf5pCnqQ1kFKL2u6ze4Ek3MyOd+rm=RDQvy5WZ-K++A@mail.gmail.com>
Message-ID: <1311255471927-6606792.post@n2.nabble.com>

I just mean..Is it ne?essary to do manipulations with scanline (byte array
corresponding to 8 bit image) to save it  with RasterIO to 16 bit depth ? 

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Saving-16-bit-image-tp6606613p6606792.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Thu Jul 21 09:57:23 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul 21 12:54:22 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <20110721132650.GA6595@ak4719.spb.edu>
References: <201107202311.14667.even.rouault@mines-paris.org>
	<20110721132650.GA6595@ak4719.spb.edu>
Message-ID: <1311256643.4e2830431cb53@webmail.free.fr>

> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey
>

I declare this motion passed with support from PSC members AndreyK, DanielM,
EvenR, FrankW, HowardB and TamasS and with non-PSC member Andreas Neumann.

Paul, I'll let Frank deal with the practical details to enable you as a
committer.

Welcome aboard !

Best regards,

Even
From even.rouault at mines-paris.org  Thu Jul 21 10:26:24 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul 21 13:25:08 2011
Subject: [gdal-dev] Re: Saving 16 bit image
In-Reply-To: <1311255471927-6606792.post@n2.nabble.com>
References: <1311252374099-6606613.post@n2.nabble.com>
	<CAMKgpOZLf5pCnqQ1kFKL2u6ze4Ek3MyOd+rm=RDQvy5WZ-K++A@mail.gmail.com>
	<1311255471927-6606792.post@n2.nabble.com>
Message-ID: <1311258384.4e283710ccbb6@webmail.free.fr>

Selon el_inca <pavkiz@mail.ru>:

> I just mean..Is it necessary to do manipulations with scanline (byte array
> corresponding to 8 bit image) to save it  with RasterIO to 16 bit depth ?

You *can* use a byte array to write the scanline of a 16-bit image, but of
course in that case, the values written in the 16-bit image will only range from
0 to 255, and not the full 16 bit dynamic (GDAL will not automatically rescale
from 0-255 to 0-32767)

If you want to write values covering the full 16 bit dynamic, you will have to
use a short array and use GDT_Int16 in the RasterIO() call.

>
> --
> View this message in context:
>
http://osgeo-org.1803224.n2.nabble.com/Saving-16-bit-image-tp6606613p6606792.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From pramsey at cleverelephant.ca  Thu Jul 21 11:01:52 2011
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Thu Jul 21 14:02:18 2011
Subject: [gdal-dev] Re: Motion: Commit Access for Paul Ramsey
In-Reply-To: <1311256643.4e2830431cb53@webmail.free.fr>
References: <201107202311.14667.even.rouault@mines-paris.org>
	<20110721132650.GA6595@ak4719.spb.edu>
	<1311256643.4e2830431cb53@webmail.free.fr>
Message-ID: <CACowWR2PqFJ0az4PYiSvC_NS-NfMU9xs87xC7JkCqvr2AgQP7A@mail.gmail.com>

Thanks Even, et al, great to be part of the team!
P

On Thu, Jul 21, 2011 at 6:57 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> Motion: Extend GDAL/OGR Commit Access to Paul Ramsey
>>
>
> I declare this motion passed with support from PSC members AndreyK, DanielM,
> EvenR, FrankW, HowardB and TamasS and with non-PSC member Andreas Neumann.
>
> Paul, I'll let Frank deal with the practical details to enable you as a
> committer.
>
> Welcome aboard !
>
> Best regards,
>
> Even
>
From dcole at integrity-apps.com  Thu Jul 21 18:27:22 2011
From: dcole at integrity-apps.com (Cole, Derek)
Date: Thu Jul 21 21:52:30 2011
Subject: [gdal-dev] Writing data to "CreateCopy" files
In-Reply-To: <CA+YzLBdh+o+XEMp9oh5--CvNohYA9brjvA+9anzK=MSt9LKDJw@mail.gmail.com>
References: <8406B84EA8899042A8508D858843972903C0E44F@CHUNEX01.integrity-apps.com>,
	<CA+YzLBdh+o+XEMp9oh5--CvNohYA9brjvA+9anzK=MSt9LKDJw@mail.gmail.com>
Message-ID: <8406B84EA8899042A8508D858843972903C258BC@CHUNEX01.integrity-apps.com>

I think I may have tried to go down this road before, but perhaps someone can elighten me.

I am using CreateCopy on this file so that I get a copy of the file on disk with all the same metadata and projection info, etc. 

Is it possible for me to spawn CreateCopy in another thread which would presumably write the headers and such immediately. Then I could use my host thread or whatever to start writing my own data into the newly created file? It seems like it shows up on disk as the right size immediately when CreateCopy is called, so I assume all the delay is CreateCopy moving the raster data over (which I dont care about at this point, because I am overwriting it).

Am I maybe just better off creating a new file from the get-go with the required size parameters? If I was going to do that what is the best route to go to ensure that I copy all of the important metadata and projection, coordinates, etc?

Thanks

Derek
________________________________________
From: fwarmerdam@gmail.com [fwarmerdam@gmail.com] on behalf of Frank Warmerdam [warmerdam@pobox.com]
Sent: Friday, July 15, 2011 10:22 PM
To: Cole, Derek
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Writing data to "CreateCopy" files

On Fri, Jul 15, 2011 at 3:57 PM, Cole, Derek <dcole@integrity-apps.com> wrote:
> I have a couple of questions regarding this.
>
> Is the dataset that is returned from CreateCopy able to be used immediately?
> I would like to use it to get the first band from it, and use RasterIO on
> that band.

Derek,

Yes, you should be able to read the resulting file
with the returned GDALDataset object immediately.
Whether you can write to the resulting file will depend
on the format.  Some formats are readonly (with
CreateCopy being the only way to accomplishing
writing).


> Secondly - the data I am trying to write with RasterIO is unsigned char, but
> when I was reading the data, I had to read it with a GDT_Float32, which was
> allocated like so:
>
>     float * floatData = (float *)
> CPLMalloc(sizeof(float)*bufSizeX*bufSizeY);
>
> and that seemed to be working well. Will my copy have to be written via a
> GDT_Float32 data buffer like the one I read it into initially, or can I just
> change the RasterIO parameter on the write to be GDT_Byte?


You can read into a float buffer and write back out using
an unsigned char buffer as long as you use the appropriate
data type (GDT_Byte or GDT_Float32) in the RasterIO call.
RasterIO wlil take care of on the fly conversion of the data.

Be aware that writing a float buffer to a Byte file will not
cause the file on disk to be upgraded to store floating
point values.  Instead RasterIO will convert the floating
point values to unsigned char.  When down converting
types out of range values are clamped to the max and min
of the target type and otherwise a floor() convertion is
applied when going to integer types.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
From julien.malik at c-s.fr  Fri Jul 22 11:54:03 2011
From: julien.malik at c-s.fr (Julien Malik)
Date: Fri Jul 22 16:17:39 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <4E12222B.6070104@tiscali.it>
References: <201107031801.14594.even.rouault@mines-paris.org>	<201107031902.03119.even.rouault@mines-paris.org>	<4E11FBB5.3040009@tiscali.it>	<201107041952.38679.even.rouault@mines-paris.org>	<4E12022B.9070706@tiscali.it>
	<4E12222B.6070104@tiscali.it>
Message-ID: <4E299D1B.8050309@c-s.fr>

Hello,

A little late, but I report success in the tests I ran so far.
None of our problematic test cases causes an error anymore.
In the future I should be more reactive, as I have set up a platform 
testing OTB built on top of the gdal trunk, on a nightly basis.

I still have one last test to run for a final confirmation (building the 
OTB QGis plugins, where the crash was inevitable, despite the handling 
of the link order which bypassed the problem for executable). But I'm 
confident from the results of the other tests...

Many thanks for this long-awaited fix !
Julien

PS: Do you think this renaming option could be pushed upstream to 
libtiff and libgeotiff (maybe not as-is) ?
It would save GDAL the burden of maintaining a patch in its internal 
versions, and it would benefit other projects integrating those libs in 
their source. FYI I'm currently working on a similar patch for openjpeg, 
allowing to choose the renaming prefix at configuration time.



Le 04/07/2011 22:27, Antonio Valentino a ?crit :
> Hi,
>
> Il 04/07/2011 20:10, Antonio Valentino ha scritto:
>
> [CUT]
>
>>>> My only concern is that I'm not able to reproduce the crash in cases in
>>>> which GDAL is built without symbol renaming.
>>> Hum, did you activate --with-hide-internal-symbols ? I somehow remember that
>>> it paradoxically helped revealing the duplicate symbol issues.
>> Yes, I tested the both "hide internal symbols" and no symbol hiding with:
>>
>> * gdalinfo linked against gdal libtiff libgeotiff
>> * gdalinfo linked against libtiff libgeotiff gdal
>> * a simple test program that just open a tif file with GDAL and TIFF API
>> * gdal_translate linked against libtiff libgeotiff gdal
>>
>> The last test (the one with gdal_translate) also implies writing a TIFF
>> file.
>>
>> None of this tests produced a segfault even if in some cases I get
>> warnings about linking against the wrong libtiff version (one of the
>> changes you applied recently if I remember well).
>>
>> I clearly remember I was on debian when a experimented the problem some
>> time ago even if I don't understand why this should make any difference
>> if I build GDAL with the same compilation flags.
>>
>> I'm going to do some test with Julien's programs tonight.
> In my tests the only program that causes a segfault is
>
> [1] http://hg.orfeo-toolbox.org/OTB/file/tip/CMake/TestXTIFFOpen.cxx
> Linked with '-lgdal -lgeotiff -ltiff' (--with-hide-internal-symbols).
>
>
> The same program works as expected id GDAL is build with
>
> --with-hide-internal-symbols=yes
> --with-rename-internal-libtiff-symbols=yes
> --with-rename-internal-libgeotiff-symbols=yes
>
> IMHO this definitively closes the question.
>
>
> regards
>
From even.rouault at mines-paris.org  Fri Jul 22 13:21:01 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul 22 17:49:38 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <4E299D1B.8050309@c-s.fr>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<4E12222B.6070104@tiscali.it> <4E299D1B.8050309@c-s.fr>
Message-ID: <201107221921.02204.even.rouault@mines-paris.org>

Le vendredi 22 juillet 2011 17:54:03, Julien Malik a ?crit :
> Hello,
> 
> A little late, but I report success in the tests I ran so far.
> None of our problematic test cases causes an error anymore.
> In the future I should be more reactive, as I have set up a platform
> testing OTB built on top of the gdal trunk, on a nightly basis.

Great

> 
> I still have one last test to run for a final confirmation (building the
> OTB QGis plugins, where the crash was inevitable, despite the handling
> of the link order which bypassed the problem for executable). But I'm
> confident from the results of the other tests...
> 
> Many thanks for this long-awaited fix !
> Julien
> 
> PS: Do you think this renaming option could be pushed upstream to
> libtiff and libgeotiff (maybe not as-is) ?
> It would save GDAL the burden of maintaining a patch in its internal
> versions, and it would benefit other projects integrating those libs in
> their source.

Not sure if the said upstream projects would be interested (*) by such an 
option (it changes their API !), and especially in its current 
"implementation". And I don't know how it could be made cleaner. Anyway, I'm 
afraid I lack the energy/interest to pursue on this myself, so I'll let 
happily anyone interested in it to do it.

As far as libtiff is concerned, I personnaly think the most important item is 
to find the magic incantation so it can be finally labelled 4.0.0 and be adopted 
by the large crowds that stay away from something called "beta". Then --with-
libtiff=internal won't be necessary.

> FYI I'm currently working on a similar patch for openjpeg,
> allowing to choose the renaming prefix at configuration time.

And how do you establish the list of symbols to rename ? At configuration time 
too ?


(*) CC'ing a commiter of both projects ;-)
From mark024 at hotmail.com  Fri Jul 22 14:47:56 2011
From: mark024 at hotmail.com (mark)
Date: Fri Jul 22 19:21:07 2011
Subject: [gdal-dev] Draw map in Visual C++
Message-ID: <1311360476703-6611483.post@n2.nabble.com>

Hi 
I am a beginner to OSGEO, I am using GDAL/OGR. 
What is the fastest way , to draw maps / layers  in my application. 

I am using C++. 
Thanks in advance

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Draw-map-in-Visual-C-tp6611483p6611483.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From rush at winkey.org  Fri Jul 22 16:18:31 2011
From: rush at winkey.org (Brian Case)
Date: Fri Jul 22 20:56:49 2011
Subject: [gdal-dev] Draw map in Visual C++
In-Reply-To: <1311360476703-6611483.post@n2.nabble.com>
References: <1311360476703-6611483.post@n2.nabble.com>
Message-ID: <1311365911.12257.14.camel@octopi>

mark

That is a pretty general question so difficult to give you an answer.

I would like to point out that gdal will not draw the maps in your
application but will let you read the data from many different formats
with a single api.

Here is the urls to the tutorials.

raster data: http://gdal.org/gdal_tutorial.html

vector data: http://gdal.org/ogr/ogr_apitut.html

Brian




On Fri, 2011-07-22 at 11:47 -0700, mark wrote:
> Hi 
> I am a beginner to OSGEO, I am using GDAL/OGR. 
> What is the fastest way , to draw maps / layers  in my application. 
> 
> I am using C++. 
> Thanks in advance
> 
> --
> View this message in context: http://osgeo-org.1803224.n2.nabble.com/Draw-map-in-Visual-C-tp6611483p6611483.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mark024 at hotmail.com  Sat Jul 23 03:10:03 2011
From: mark024 at hotmail.com (mark)
Date: Sat Jul 23 08:23:50 2011
Subject: [gdal-dev] Re: Draw map in Visual C++
In-Reply-To: <1311365911.12257.14.camel@octopi>
References: <1311360476703-6611483.post@n2.nabble.com>
	<1311365911.12257.14.camel@octopi>
Message-ID: <1311405003790-6613079.post@n2.nabble.com>

Thank you Brian for you reply .
As you said , gdal is for read / write data. 
So do you know some libraries that allows me to draw maps in my application.
I see many standalone open applications, like OpenEV, but it is not my case
. 

I am using C++.

Thanks in advance 


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Draw-map-in-Visual-C-tp6611483p6613079.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Sat Jul 23 08:42:35 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jul 23 14:15:16 2011
Subject: [gdal-dev] Re: Draw map in Visual C++
In-Reply-To: <1311405003790-6613079.post@n2.nabble.com>
References: <1311360476703-6611483.post@n2.nabble.com>
	<1311365911.12257.14.camel@octopi>
	<1311405003790-6613079.post@n2.nabble.com>
Message-ID: <CAMKgpOYviNLw2u1YS4nJb--bofVVo=9KgN0zp-0Gyz5K_cMXcA@mail.gmail.com>

Mark,

You should be able to display an image by filling in a BitMap kind of object
using GDALRasterIO.

On Sat, Jul 23, 2011 at 12:40 PM, mark <mark024@hotmail.com> wrote:

> Thank you Brian for you reply .
> As you said , gdal is for read / write data.
> So do you know some libraries that allows me to draw maps in my
> application.
> I see many standalone open applications, like OpenEV, but it is not my case
> .
>
> I am using C++.
>
> Thanks in advance
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Draw-map-in-Visual-C-tp6611483p6613079.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110723/873f02af/attachment.html
From warmerdam at pobox.com  Sat Jul 23 12:05:05 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul 23 17:48:38 2011
Subject: [gdal-dev] Writing data to "CreateCopy" files
In-Reply-To: <8406B84EA8899042A8508D858843972903C258BC@CHUNEX01.integrity-apps.com>
References: <8406B84EA8899042A8508D858843972903C0E44F@CHUNEX01.integrity-apps.com>
	<CA+YzLBdh+o+XEMp9oh5--CvNohYA9brjvA+9anzK=MSt9LKDJw@mail.gmail.com>
	<8406B84EA8899042A8508D858843972903C258BC@CHUNEX01.integrity-apps.com>
Message-ID: <CA+YzLBcQ8HH5yNvAfzimXzpd-rrgura7vE6wnz+W0vgC9GqKXQ@mail.gmail.com>

Derek,

GDAL support multi-threading only in fairly restricted situations.
You particularly must not
be making calls on a single GDALDataset from mutliple threads at the
same time.  In fact,
due to a subtle issue with the way write caches are flushed you
shouldn't really do
multithreaded access to GDAL at all when writing to more than one file.

So I don't see how your suggested approach could work.



On Thu, Jul 21, 2011 at 3:27 PM, Cole, Derek <dcole@integrity-apps.com> wrote:
> I think I may have tried to go down this road before, but perhaps someone can elighten me.
>
> I am using CreateCopy on this file so that I get a copy of the file on disk with all the same metadata and projection info, etc.
>
> Is it possible for me to spawn CreateCopy in another thread which would presumably write the headers and such immediately. Then I could use my host thread or whatever to start writing my own data into the newly created file? It seems like it shows up on disk as the right size immediately when CreateCopy is called, so I assume all the delay is CreateCopy moving the raster data over (which I dont care about at this point, because I am overwriting it).
>
> Am I maybe just better off creating a new file from the get-go with the required size parameters? If I was going to do that what is the best route to go to ensure that I copy all of the important metadata and projection, coordinates, etc?

Yes, I think this is the best approach.  How careful you need to be
capturing everything depends a bit on how varied you believe your
datasets will be.  At a minimum you should be transferring the dataset
level coordinate system, geotransform and metadata.  For bands you
need to transfer the nodata value and color table .

Beyond that you start getting into rarer details.  GCPs, band level
metadata, geolocation metadata, RPC metadata, band level categories,
band level scaling info, etc.  Looking through the GDAL Data model
document will give you a sense of the things that are possible.  You
can look at gdal/apps/gdal_translate.c for an example (read from
VRTCreate() on.

Best regards,


>
> Thanks
>
> Derek
> ________________________________________
> From: fwarmerdam@gmail.com [fwarmerdam@gmail.com] on behalf of Frank Warmerdam [warmerdam@pobox.com]
> Sent: Friday, July 15, 2011 10:22 PM
> To: Cole, Derek
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Writing data to "CreateCopy" files
>
> On Fri, Jul 15, 2011 at 3:57 PM, Cole, Derek <dcole@integrity-apps.com> wrote:
>> I have a couple of questions regarding this.
>>
>> Is the dataset that is returned from CreateCopy able to be used immediately?
>> I would like to use it to get the first band from it, and use RasterIO on
>> that band.
>
> Derek,
>
> Yes, you should be able to read the resulting file
> with the returned GDALDataset object immediately.
> Whether you can write to the resulting file will depend
> on the format. ?Some formats are readonly (with
> CreateCopy being the only way to accomplishing
> writing).
>
>
>> Secondly - the data I am trying to write with RasterIO is unsigned char, but
>> when I was reading the data, I had to read it with a GDT_Float32, which was
>> allocated like so:
>>
>> ? ? float * floatData = (float *)
>> CPLMalloc(sizeof(float)*bufSizeX*bufSizeY);
>>
>> and that seemed to be working well. Will my copy have to be written via a
>> GDT_Float32 data buffer like the one I read it into initially, or can I just
>> change the RasterIO parameter on the write to be GDT_Byte?
>
>
> You can read into a float buffer and write back out using
> an unsigned char buffer as long as you use the appropriate
> data type (GDT_Byte or GDT_Float32) in the RasterIO call.
> RasterIO wlil take care of on the fly conversion of the data.
>
> Be aware that writing a float buffer to a Byte file will not
> cause the file on disk to be upgraded to store floating
> point values. ?Instead RasterIO will convert the floating
> point values to unsigned char. ?When down converting
> types out of range values are clamped to the max and min
> of the target type and otherwise a floor() convertion is
> applied when going to integer types.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Software Developer
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From warmerdam at pobox.com  Sat Jul 23 12:22:39 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jul 23 18:07:19 2011
Subject: [gdal-dev] Add capability to safely link against an external
	libtiff (3.X) and a GDAL build with internal libtiff (4.0) support
In-Reply-To: <201107221921.02204.even.rouault@mines-paris.org>
References: <201107031801.14594.even.rouault@mines-paris.org>
	<4E12222B.6070104@tiscali.it> <4E299D1B.8050309@c-s.fr>
	<201107221921.02204.even.rouault@mines-paris.org>
Message-ID: <CA+YzLBcuN+C6fMJ81L0EDxp6k3B2xCgEoPk1j6sk_TgQRFdmrg@mail.gmail.com>

On Fri, Jul 22, 2011 at 10:21 AM, Even Rouault
<even.rouault@mines-paris.org> wrote:
>> PS: Do you think this renaming option could be pushed upstream to
>> libtiff and libgeotiff (maybe not as-is) ?
>> It would save GDAL the burden of maintaining a patch in its internal
>> versions, and it would benefit other projects integrating those libs in
>> their source.
>
> Not sure if the said upstream projects would be interested (*) by such an
> option (it changes their API !), and especially in its current
> "implementation". And I don't know how it could be made cleaner. Anyway, I'm
> afraid I lack the energy/interest to pursue on this myself, so I'll let
> happily anyone interested in it to do it.

Julien,

I'm a bit vague on how the renaming worked but I am not
initially too enthusiastic about incorporating it upstream in
libtiff and libgeotiff.

If you wanted to pursue that, i'd suggest joining the mailing lists,
explaining the proposed changes and we could see if there is
broader interest.

> As far as libtiff is concerned, I personnaly think the most important item is
> to find the magic incantation so it can be finally labelled 4.0.0 and be adopted
> by the large crowds that stay away from something called "beta". Then --with-
> libtiff=internal won't be necessary.

/me sighs.  Yes, I really need to get this done.

>> FYI I'm currently working on a similar patch for openjpeg,
>> allowing to choose the renaming prefix at configuration time.
>
> And how do you establish the list of symbols to rename ? At configuration time
> too ?
>
>
> (*) CC'ing a commiter of both projects ;-)
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush? ? | Geospatial Software Developer
From mettbest at gmail.com  Sat Jul 23 13:28:50 2011
From: mettbest at gmail.com (mett)
Date: Sat Jul 23 19:17:15 2011
Subject: [gdal-dev] [gdal 1.8.0] Covert OGRlayer in Graphics2D object,
	how? [Java]
Message-ID: <1311442130404-6614000.post@n2.nabble.com>

Hello everybody!

I created some OGRlayers georeferenced, and I need to convert them somehow
in a java.awt.Shape object, to handle subsequently the Graphics2D object. Is
there any clever way to do that?


Thank you very much, 
Matt

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Covert-OGRlayer-in-Graphics2D-object-how-Java-tp6614000p6614000.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Jul 23 13:32:57 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 23 19:21:41 2011
Subject: [gdal-dev] [gdal 1.8.0] Covert OGRlayer in Graphics2D object,
	how? [Java]
In-Reply-To: <1311442130404-6614000.post@n2.nabble.com>
References: <1311442130404-6614000.post@n2.nabble.com>
Message-ID: <201107231932.57482.even.rouault@mines-paris.org>

Le samedi 23 juillet 2011 19:28:50, mett a ?crit :
> Hello everybody!
> 
> I created some OGRlayers georeferenced, and I need to convert them somehow
> in a java.awt.Shape object, to handle subsequently the Graphics2D object.
> Is there any clever way to do that?

There's nothing already coded in the OGR Java API to transform a OGR Geometry 
object into a java.awt.Shape object, but you should be able to code it with 
the existing API. You can extract the type of geometry to instanciate the 
appropriate Shape class and then you will have to add the points.

> 
> 
> Thank you very much,
> Matt
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-1-8-0-Covert-OGRlayer-in-Graph
> ics2D-object-how-Java-tp6614000p6614000.html Sent from the GDAL - Dev
> mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From pmlpml001 at yahoo.com  Sun Jul 24 04:09:18 2011
From: pmlpml001 at yahoo.com (Paul Lohr)
Date: Sun Jul 24 04:54:09 2011
Subject: [gdal-dev] libecwj
Message-ID: <1311494958.39336.YahooMailNeo@web130123.mail.mud.yahoo.com>

If anyone has the libecwj file and they would like to share it, that would help me out greatly. This is the ECW SDK that contains the source code (probably version 3.3). According to the GDAL website, the file is probably named libecwj2-3.3-2006-09-06.zip.?I would like to go through the configure / make / make install process to compile for a different operating system.

Thanks for any help,
Paul Lohr
From aperi2007 at gmail.com  Sun Jul 24 06:20:38 2011
From: aperi2007 at gmail.com (Andrea Peri)
Date: Sun Jul 24 07:09:16 2011
Subject: [gdal-dev] GML3 wrong result for some kind of fields
Message-ID: <CABqTJk_RdXGq_h32jzJjMC82nxf9KSbTDU1jqNGEeXwDH+PM8Q@mail.gmail.com>

Hi,

I notice that the GML driver wrong to understand some kind of field.

for example:

I have this tags:

<element>
  <id>1</id>
  <code>010206</code>
</element>
<element>
  <id>2</id>
  <code>100206</code>
</element>

the GML driver parsing this tags intepret they as integer so in the
shapefile result
they are translate in

id (integer), code (integer)
1, 10206
2, 100206

this is a bad situation for me because the values in code field is a
block-code to fixed lenght (6 characters).
And after the conversion in shapefile is not possible to join with tables
where there is the values (text) 010206, 100206

I see the GML driver create a .gfs field where it has the description of
these fileds,
I could change it, but unfortunately I have many files and to change all the
gfs is a huge work.

I think perhaps a good solution should be to use a config parameter to
overlap the description in the gfs files.
So I could manually write a GFS file usable for all the files GML I need to
translate in shapefile/postgis.

But I don't know if the gfs file do something else or only the description
of every field.


thx,

-- 
-----------------
Andrea Peri
. . . . . . . . .
qwerty ?????
-----------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110724/3da01e37/attachment.html
From even.rouault at mines-paris.org  Sun Jul 24 06:31:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 24 07:20:17 2011
Subject: [gdal-dev] GML3 wrong result for some kind of fields
In-Reply-To: <CABqTJk_RdXGq_h32jzJjMC82nxf9KSbTDU1jqNGEeXwDH+PM8Q@mail.gmail.com>
References: <CABqTJk_RdXGq_h32jzJjMC82nxf9KSbTDU1jqNGEeXwDH+PM8Q@mail.gmail.com>
Message-ID: <201107241231.10948.even.rouault@mines-paris.org>

Le dimanche 24 juillet 2011 12:20:38, Andrea Peri a ?crit :
> Hi,
> 
> I notice that the GML driver wrong to understand some kind of field.
> 
> for example:
> 
> I have this tags:
> 
> <element>
>   <id>1</id>
>   <code>010206</code>
> </element>
> <element>
>   <id>2</id>
>   <code>100206</code>
> </element>
> 
> the GML driver parsing this tags intepret they as integer so in the
> shapefile result
> they are translate in
> 
> id (integer), code (integer)
> 1, 10206
> 2, 100206
> 
> this is a bad situation for me because the values in code field is a
> block-code to fixed lenght (6 characters).
> And after the conversion in shapefile is not possible to join with tables
> where there is the values (text) 010206, 100206

Quote of http://gdal.org/ogr/drv_gml.html :

"When prescanning the GML file to determine the list of feature types, and 
fields, the contents of fields are scanned to try and determine the type of the 
field. In some applications it is easier if all fields are just treated as 
string fields. This can be accomplished by setting the configuration option 
GML_FIELDTYPES to the value ALWAYS_STRING."

> 
> I see the GML driver create a .gfs field where it has the description of
> these fileds,
> I could change it, but unfortunately I have many files and to change all
> the gfs is a huge work.
> 
> I think perhaps a good solution should be to use a config parameter to
> overlap the description in the gfs files.
> So I could manually write a GFS file usable for all the files GML I need to
> translate in shapefile/postgis.
> 
> But I don't know if the gfs file do something else or only the description
> of every field.

Yes essentially that, plus the layer name, and optionnaly its extent, the type 
of the geometry, the number of features, etc... 

Another alternative is to provide a .xsd file.

> 
> 
> thx,
From aperi2007 at gmail.com  Sun Jul 24 06:46:12 2011
From: aperi2007 at gmail.com (aperi2007)
Date: Sun Jul 24 07:36:13 2011
Subject: [gdal-dev] GML3 wrong result for some kind of fields
In-Reply-To: <201107241231.10948.even.rouault@mines-paris.org>
References: <CABqTJk_RdXGq_h32jzJjMC82nxf9KSbTDU1jqNGEeXwDH+PM8Q@mail.gmail.com>
	<201107241231.10948.even.rouault@mines-paris.org>
Message-ID: <4E2BF7F4.20209@gmail.com>

 > string fields. This can be accomplished by setting the configuration
 >option
 > GML_FIELDTYPES to the value ALWAYS_STRING."

wow, this is really a good choice for me !

 >> But I don't know if the gfs file do something else or only the 
description
 >> of every field.
 >
 > Yes essentially that, plus the layer name, and optionnaly its extent, 
the type
 > of the geometry, the number of features, etc...

unfortunately extent and number of feature are not fixed for all GML 
files I have. :(


 >
 > Another alternative is to provide a .xsd file.

The GML file has a set of xsds starting from a main xsd file linked over 
internet using the schemaLocation attribute.
(http://www.rete.toscana.it/sett/territorio/carto/gml/dbtopo/18.9.2/dbtopo.xsd)

The GML driver seem don't use it.
I guess was not used because it is linked with schemaLocation on 
internet and the xsd itself link to the GML's xsd in the OGC site.

again

the code fields are described with a enumeration like this:

--------------------
	<xs:simpleType name="ClasseLarghezzaType">
		<xs:restriction base="AbstractDominioType">
			<xs:enumeration value="0100">
				<xs:annotation>
					<xs:appinfo source="urn:x-gml:codelistValue">Larghezza Minore Di 
3.5 Mt</xs:appinfo>
				</xs:annotation>
			</xs:enumeration>
			<xs:enumeration value="0200">
				<xs:annotation>
					<xs:appinfo source="urn:x-gml:codelistValue">Larghezza Compresa Tra 
3.5 Mt E 7.0 Mt</xs:appinfo>
				</xs:annotation>
			</xs:enumeration>
			<xs:enumeration value="0300">
				<xs:annotation>
					<xs:appinfo source="urn:x-gml:codelistValue">Larghezza Maggiore Di 
7.0 Mt</xs:appinfo>
				</xs:annotation>
			</xs:enumeration>
---------------


However the solution to apply always text seem a good choice for me.

thx,

Andrea.


Il 24/07/2011 12:31, Even Rouault ha scritto:
> Le dimanche 24 juillet 2011 12:20:38, Andrea Peri a ?crit :
>> Hi,
>>
>> I notice that the GML driver wrong to understand some kind of field.
>>
>> for example:
>>
>> I have this tags:
>>
>> <element>
>>    <id>1</id>
>>    <code>010206</code>
>> </element>
>> <element>
>>    <id>2</id>
>>    <code>100206</code>
>> </element>
>>
>> the GML driver parsing this tags intepret they as integer so in the
>> shapefile result
>> they are translate in
>>
>> id (integer), code (integer)
>> 1, 10206
>> 2, 100206
>>
>> this is a bad situation for me because the values in code field is a
>> block-code to fixed lenght (6 characters).
>> And after the conversion in shapefile is not possible to join with tables
>> where there is the values (text) 010206, 100206
>
> Quote of http://gdal.org/ogr/drv_gml.html :
>
> "When prescanning the GML file to determine the list of feature types, and
> fields, the contents of fields are scanned to try and determine the type of the
> field. In some applications it is easier if all fields are just treated as
> string fields. This can be accomplished by setting the configuration option
> GML_FIELDTYPES to the value ALWAYS_STRING."
>
>>
>> I see the GML driver create a .gfs field where it has the description of
>> these fileds,
>> I could change it, but unfortunately I have many files and to change all
>> the gfs is a huge work.
>>
>> I think perhaps a good solution should be to use a config parameter to
>> overlap the description in the gfs files.
>> So I could manually write a GFS file usable for all the files GML I need to
>> translate in shapefile/postgis.
>>
>> But I don't know if the gfs file do something else or only the description
>> of every field.
>
> Yes essentially that, plus the layer name, and optionnaly its extent, the type
> of the geometry, the number of features, etc...
>
> Another alternative is to provide a .xsd file.
>
>>
>>
>> thx,

From even.rouault at mines-paris.org  Sun Jul 24 06:55:31 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 24 07:45:55 2011
Subject: [gdal-dev] GML3 wrong result for some kind of fields
In-Reply-To: <4E2BF7F4.20209@gmail.com>
References: <CABqTJk_RdXGq_h32jzJjMC82nxf9KSbTDU1jqNGEeXwDH+PM8Q@mail.gmail.com>
	<201107241231.10948.even.rouault@mines-paris.org>
	<4E2BF7F4.20209@gmail.com>
Message-ID: <201107241255.31329.even.rouault@mines-paris.org>

Le dimanche 24 juillet 2011 12:46:12, aperi2007 a ?crit :
>  > string fields. This can be accomplished by setting the configuration
>  >
>  >option
>  >
>  > GML_FIELDTYPES to the value ALWAYS_STRING."
> 
> wow, this is really a good choice for me !
> 
>  >> But I don't know if the gfs file do something else or only the
> 
> description
> 
>  >> of every field.
>  > 
>  > Yes essentially that, plus the layer name, and optionnaly its extent,
> 
> the type
> 
>  > of the geometry, the number of features, etc...
> 
> unfortunately extent and number of feature are not fixed for all GML
> files I have. :(

That's why I mentionned they are *optional* ;-) If you don't include them, the 
driver will recompute the missing info if necessary

> 
>  > Another alternative is to provide a .xsd file.
> 
> The GML file has a set of xsds starting from a main xsd file linked over
> internet using the schemaLocation attribute.
> (http://www.rete.toscana.it/sett/territorio/carto/gml/dbtopo/18.9.2/dbtopo.
> xsd)
> 
> The GML driver seem don't use it.
> I guess was not used because it is linked with schemaLocation on
> internet and the xsd itself link to the GML's xsd in the OGC site.

Yes, it won't download the schema. You have to put it besides the GML file and 
with the same basename. So if you have foo.gml, the XSD must be called 
foo.xsd. Note also that the XSD parser of the GML driver is limited and will 
not always understand the schema. In which case, it will scan the GML file to 
produce a .gfs file

> 
> again
> 
> the code fields are described with a enumeration like this:
> 
> --------------------
> 	<xs:simpleType name="ClasseLarghezzaType">
> 		<xs:restriction base="AbstractDominioType">
> 			<xs:enumeration value="0100">
> 				<xs:annotation>
> 					<xs:appinfo source="urn:x-
gml:codelistValue">Larghezza Minore Di
> 3.5 Mt</xs:appinfo>
> 				</xs:annotation>
> 			</xs:enumeration>
> 			<xs:enumeration value="0200">
> 				<xs:annotation>
> 					<xs:appinfo source="urn:x-
gml:codelistValue">Larghezza Compresa Tra
> 3.5 Mt E 7.0 Mt</xs:appinfo>
> 				</xs:annotation>
> 			</xs:enumeration>
> 			<xs:enumeration value="0300">
> 				<xs:annotation>
> 					<xs:appinfo source="urn:x-
gml:codelistValue">Larghezza Maggiore Di
> 7.0 Mt</xs:appinfo>
> 				</xs:annotation>
> 			</xs:enumeration>
> ---------------
> 
> 
> However the solution to apply always text seem a good choice for me.
> 
> thx,
> 
> Andrea.
> 
> Il 24/07/2011 12:31, Even Rouault ha scritto:
> > Le dimanche 24 juillet 2011 12:20:38, Andrea Peri a ?crit :
> >> Hi,
> >> 
> >> I notice that the GML driver wrong to understand some kind of field.
> >> 
> >> for example:
> >> 
> >> I have this tags:
> >> 
> >> <element>
> >> 
> >>    <id>1</id>
> >>    <code>010206</code>
> >> 
> >> </element>
> >> <element>
> >> 
> >>    <id>2</id>
> >>    <code>100206</code>
> >> 
> >> </element>
> >> 
> >> the GML driver parsing this tags intepret they as integer so in the
> >> shapefile result
> >> they are translate in
> >> 
> >> id (integer), code (integer)
> >> 1, 10206
> >> 2, 100206
> >> 
> >> this is a bad situation for me because the values in code field is a
> >> block-code to fixed lenght (6 characters).
> >> And after the conversion in shapefile is not possible to join with
> >> tables where there is the values (text) 010206, 100206
> > 
> > Quote of http://gdal.org/ogr/drv_gml.html :
> > 
> > "When prescanning the GML file to determine the list of feature types,
> > and fields, the contents of fields are scanned to try and determine the
> > type of the field. In some applications it is easier if all fields are
> > just treated as string fields. This can be accomplished by setting the
> > configuration option GML_FIELDTYPES to the value ALWAYS_STRING."
> > 
> >> I see the GML driver create a .gfs field where it has the description of
> >> these fileds,
> >> I could change it, but unfortunately I have many files and to change all
> >> the gfs is a huge work.
> >> 
> >> I think perhaps a good solution should be to use a config parameter to
> >> overlap the description in the gfs files.
> >> So I could manually write a GFS file usable for all the files GML I need
> >> to translate in shapefile/postgis.
> >> 
> >> But I don't know if the gfs file do something else or only the
> >> description of every field.
> > 
> > Yes essentially that, plus the layer name, and optionnaly its extent, the
> > type of the geometry, the number of features, etc...
> > 
> > Another alternative is to provide a .xsd file.
> > 
> >> thx,
From sfkeller at gmail.com  Sun Jul 24 15:09:20 2011
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Jul 24 16:26:41 2011
Subject: [gdal-dev] How to convert a GIF (being a grid with value in channel
 B from RGB) to XYZ?
Message-ID: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>

I have a raster/grid file transformation and conversion question:

The input are hunddrets of GIF files which in fact are a grid about
rainfall observations. The files have 8 BitsPerPixel (0..255). The B
channel (integer value) from RGB obviously represents the
precipitation intensity in [mm/h] according to a lookup table (0=>0,
1=>0.2, 2=>0.32, 3=>0.5, 4=>0.8, 5=1.3, 6=>2, 7=>5, 8=>8 9=>13 10=>20,
11=>32, 12=>50, 13=>50, 14=>80, 15=>130).

The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
The following is known about the geolocation (Switzerland,
EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
438000.

The target format is ASCII Gridded (XYZ)? or Arc/Info ASCII Grid
(AAIGrid), with e.g. the following on each line: "481000 38000 0.32",
meaning the transformed coordinates x and y and the float value (as
indicated above in the lookup table).

I know OGR but I'm new to GDAL: How would you accomplish this task?

Transforming with gdal_transform then converting with gdal_translate ?
Or do I have to write something myself (perhaps based on gdal2xyz.py)?

-S.
From alxster at gmail.com  Sun Jul 24 15:15:40 2011
From: alxster at gmail.com (alxster)
Date: Sun Jul 24 16:33:18 2011
Subject: [gdal-dev] building GDAL for Java with ECW support
Message-ID: <1311534940068-6616111.post@n2.nabble.com>

Hi,

I am completely new in compiling in C/C++

I am using MingW/MSYS as for instructions in
http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW

For first I downloaded ERDAS SDK and tried to enable ECW support as in
http://trac.osgeo.org/gdal/wiki/ECW

But support is still disabled.

on this newsletter arc I've found just old posts with broken links.

Is there any uptated tutorial (as easy as possible) to build a win32
gdal.dll to be used by gdal.jar Java JNI, with ECW support?

thanks


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/building-GDAL-for-Java-with-ECW-support-tp6616111p6616111.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Sun Jul 24 15:26:32 2011
From: jrepetto at free.fr (Jean-Claude Repetto)
Date: Sun Jul 24 16:44:52 2011
Subject: [gdal-dev] libecwj
In-Reply-To: <1311494958.39336.YahooMailNeo@web130123.mail.mud.yahoo.com>
References: <1311494958.39336.YahooMailNeo@web130123.mail.mud.yahoo.com>
Message-ID: <4E2C71E8.4080708@free.fr>

On 07/24/11 10:09, Paul Lohr wrote:
> If anyone has the libecwj file and they would like to share it, that would help me out greatly. This is the ECW SDK that contains the source code (probably version 3.3). According to the GDAL website, the file is probably named libecwj2-3.3-2006-09-06.zip. I would like to go through the configure / make / make install process to compile for a different operating system.

Google returns this link :
<http://dl.maptools.org/dl/fgs/releases/pre-1.0/fgs-dev/fgs-cache/libecwj2-3.3.20060906.tar.gz>

Jean-Claude
From even.rouault at mines-paris.org  Sun Jul 24 17:07:43 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jul 24 18:31:37 2011
Subject: [gdal-dev] building GDAL for Java with ECW support
In-Reply-To: <1311534940068-6616111.post@n2.nabble.com>
References: <1311534940068-6616111.post@n2.nabble.com>
Message-ID: <201107242307.43901.even.rouault@mines-paris.org>

Le dimanche 24 juillet 2011 21:15:40, alxster a ?crit :
> Hi,
> 
> I am completely new in compiling in C/C++
> 
> I am using MingW/MSYS as for instructions in
> http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
> 
> For first I downloaded ERDAS SDK and tried to enable ECW support as in
> http://trac.osgeo.org/gdal/wiki/ECW

I don't think it is possible to have ECW support with MinGW, because the ECW 
SDK has MSVC .lib that can't be turned into a GCC import library .a

> 
> But support is still disabled.
> 
> on this newsletter arc I've found just old posts with broken links.
> 
> Is there any uptated tutorial (as easy as possible) to build a win32
> gdal.dll to be used by gdal.jar Java JNI, with ECW support?
> 
> thanks
> 
> 
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/building-GDAL-for-Java-with-ECW-sup
> port-tp6616111p6616111.html Sent from the GDAL - Dev mailing list archive
> at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Mon Jul 25 00:18:14 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 25 02:06:22 2011
Subject: [gdal-dev] How to convert a GIF (being a grid with value in
	channel B from RGB) to XYZ?
In-Reply-To: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>
References: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>
Message-ID: <CAMKgpOYoC+5jCLqTKKnoztSi9TN8nf1LHRXy+jq3053jhy7W2Q@mail.gmail.com>

Stefan,

You can convert the integer codes to float values using a VRT file[1] for
each gif file.
Create a VRT file with the ColorTable element. Add the SimpleSource to point
to your gif and the SourceBand element as 3 to point to B band.

Once you create a VRT file for the GIF, you can use it like any other raster
file. GDAL interprets the elements in it and applies the conversions
internally. Use it with gdal_translate or gdalwarp (if you want to warp it
to a new coordinate system) to create an ASCII Grid file.

[1]: http://www.gdal.org/gdal_vrttut.html

On Mon, Jul 25, 2011 at 12:39 AM, Stefan Keller <sfkeller@gmail.com> wrote:

> I have a raster/grid file transformation and conversion question:
>
> The input are hunddrets of GIF files which in fact are a grid about
> rainfall observations. The files have 8 BitsPerPixel (0..255). The B
> channel (integer value) from RGB obviously represents the
> precipitation intensity in [mm/h] according to a lookup table (0=>0,
> 1=>0.2, 2=>0.32, 3=>0.5, 4=>0.8, 5=1.3, 6=>2, 7=>5, 8=>8 9=>13 10=>20,
> 11=>32, 12=>50, 13=>50, 14=>80, 15=>130).
>
> The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
> The following is known about the geolocation (Switzerland,
> EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
> 438000.
>
> The target format is ASCII Gridded (XYZ)? or Arc/Info ASCII Grid
> (AAIGrid), with e.g. the following on each line: "481000 38000 0.32",
> meaning the transformed coordinates x and y and the float value (as
> indicated above in the lookup table).
>
> I know OGR but I'm new to GDAL: How would you accomplish this task?
>
> Transforming with gdal_transform then converting with gdal_translate ?
> Or do I have to write something myself (perhaps based on gdal2xyz.py)?
>
> -S.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/38417678/attachment.html
From nicolas.simon at spw.wallonie.be  Mon Jul 25 04:00:00 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Mon Jul 25 06:00:53 2011
Subject: [gdal-dev] building GDAL for Java with ECW support
In-Reply-To: <201107242307.43901.even.rouault@mines-paris.org>
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926F9A@DGA-EXC01.mrw.wallonie.int>

Hi,
	Concerning convertion from MSVC .lib to GCC import library .a,
      help could by find here

	http://jrfonseca.planetaclix.pt/projects/gnu-win32/software/reimp/index.html

	Nicolas

> -----Message d'origine-----
> De : gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org]De la part de Even Rouault
> Envoy? : dimanche 24 juillet 2011 23:08
> ? : gdal-dev@lists.osgeo.org
> Cc : alxster
> Objet : Re: [gdal-dev] building GDAL for Java with ECW support
> 
> 
> Le dimanche 24 juillet 2011 21:15:40, alxster a ?crit :
> > Hi,
> > 
> > I am completely new in compiling in C/C++
> > 
> > I am using MingW/MSYS as for instructions in
> > http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
> > 
> > For first I downloaded ERDAS SDK and tried to enable ECW 
> support as in
> > http://trac.osgeo.org/gdal/wiki/ECW
> 
> I don't think it is possible to have ECW support with MinGW, 
> because the ECW 
> SDK has MSVC .lib that can't be turned into a GCC import library .a
> 
> > 
> > But support is still disabled.
> > 
> > on this newsletter arc I've found just old posts with broken links.
> > 
> > Is there any uptated tutorial (as easy as possible) to build a win32
> > gdal.dll to be used by gdal.jar Java JNI, with ECW support?
> > 
> > thanks
> > 
> > 
> > --
> > View this message in context:
> > 
http://osgeo-org.1803224.n2.nabble.com/building-GDAL-for-Java-with-ECW-sup
> port-tp6616111p6616111.html Sent from the GDAL - Dev mailing list archive
> at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




From pmlpml001 at yahoo.com  Mon Jul 25 03:58:53 2011
From: pmlpml001 at yahoo.com (Paul Lohr)
Date: Mon Jul 25 06:02:14 2011
Subject: [gdal-dev] building GDAL additional formats for iOS
Message-ID: <1311580733.95463.YahooMailNeo@web130105.mail.mud.yahoo.com>

I have the build_for_iphoneos.sh script from the Christopher Stawarz's pseudogreen website. After working through a few issues, it successfully installs GDAL. Now I would like to add things like ECW support, SID support, expat, libkml, and libcurl. I have downloaded the source code for most of these additional formats. The build_for_iphoneos.sh file changes quite a few settings. Do I need to change the same settings when I run configure for these additional formats? Here are some of the items changed by the build_for_iphoneos.sh file:

GCC_VERSION=4.2
IPHONEOS_DEPLOYMENT_TARGET=4.2
MACOSX_DEPLOYMENT_TARGET=10.6

and:

./configure --host=armv6-apple-darwin --disable-shared --enable-static

Just to restate the question, do I need to change the same settings that were changed for GDAL when I run configure for each additional format that I install?

Thank you for any help,
Paul Lohr
From bontepaarden at gmail.com  Mon Jul 25 04:07:49 2011
From: bontepaarden at gmail.com (Paul Meems)
Date: Mon Jul 25 06:08:57 2011
Subject: [gdal-dev] How to check if projections are the same?
Message-ID: <CAHNf2YT+hOt0jrp1BKU85rc+W9JpS7c9T9yPYHOsxFopph8n0w@mail.gmail.com>

We use GDAL/OGR/Proj4 in our application: MapWindow GIS.

We're testing the MapWinGIS.GeoProjection class. It's just a wrapper around
OGRSpatialReference class, so it's GDAL behavior infact.

The test code:

        private void button8_Click(object sender, EventArgs e)
        {
            MapWinGIS.GeoProjection proj = new GeoProjection();
            proj.ImportFromEPSG(4326);
            System.Diagnostics.Debug.Print(proj.ExportToWKT());

            string s = proj.ExportToProj4();
            proj.ImportFromProj4(s);
            System.Diagnostics.Debug.Print(proj.ExportToWKT());

            s = proj.ExportToProj4();
            proj.ImportFromProj4(s);
            System.Diagnostics.Debug.Print(proj.ExportToWKT());
        }


Results:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]


GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]


GEOGCS["WGS
84",DATUM["unknown",SPHEROID["WGS84",6378137,298.257223563],TOWGS84[0,0,0,0,0,0,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]


If we test the first and the third string with GeoProjection.IsSame() it
will return false, but they are the same.

How should we bypass this?
All suggestions are welcome.

Thanks,

Paul


 *Paul Meems *
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl

*
*
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/1ba3edb9/attachment-0001.html
From vipul.iiith at gmail.com  Mon Jul 25 05:27:41 2011
From: vipul.iiith at gmail.com (Vipul Raheja)
Date: Mon Jul 25 07:33:34 2011
Subject: [gdal-dev] Help needed regarding SWIG Packaging
Message-ID: <CANMJH-sPf5gRzXr23MDNXqTKfX9ZibQd+SQRkjiQSpLM9MTrPw@mail.gmail.com>

Hi,

I am working on developing SWIG-Python wrappings for OSSIM, a tool for
satellite image processing. I wanted some help regarding the same since GDAL
uses Swig for the same. I am facing a problem regarding the packaging.

As of now I have developed SWIG-Wrapper interface files (.i Files) for 130
different classes, and am ale to access them independently from a Python
console also; but I am not able to combine them into a single module so as
to be able to access them all together from a single import command, i.e.
suppose there are classes a.cpp/a.h and b.cpp/b.h, then I have created their
swig wrappers a.i and b.i, but in order to access them from a Python
console, I have to compile them separately, generate the .so file and when I
do an 'import module' in Python, I can access only one class's functionality
at a time (the one which I compiled). In order to access the other class's
functionality, I have to compile that class, generate the .so file, and then
I am able to import it.

And what I want is that by doing a single compilation, .so generation and
import command, I should be able to access all the wrapped functions from
Python rather than the piece wise way which is happening currently.

Any ideas on the issue? Help will be greatly appreciated.

Thanks and Regards,
Vipul Raheja
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/02078fe6/attachment.html
From nicoletti at consorzio-innova.it  Mon Jul 25 05:34:18 2011
From: nicoletti at consorzio-innova.it (Marco Nicoletti)
Date: Mon Jul 25 07:51:06 2011
Subject: [gdal-dev] gdalbuilvrt segmentation fault 
Message-ID: <EA9C1D0D85204D18B05C3E2879457314@nicolettiws>

Dear all,

I have got a problem using the GDAL tool gdalbuildvrt.

I would like to join two DEMs sampled on the same grid which insist on the same 
geografical zone. 
The first DEM has got some NoDataValue holes and I would like to feel them with the values in
the second DEM. 
I ave used also the flag to ignore the projection (-allow_projection_difference).

DEMs have the same raster size (xSize="10801" ySize="7201"), the same data type ("Float32")
and the same NoData Value (-3.27670000000000E+04).

The GDAL tool goes in segmentation fault: any ideas?

$ gdalbuildvrt -allow_projection_difference  output.vrt ned/safod+egm96.dem srtm/srtm_90m_egm96_grid.tif
0...10...20...30...40...50...60...70...80...90...100 - done.
Warning 6: gdalbuildvrt does not support heterogenous band characteristics. Skipping srtm/srtm_90m_egm96_grid.tif
Segmentation fault


Thanks in advanced.

Marco
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/b472ee07/attachment.html
From even.rouault at mines-paris.org  Mon Jul 25 05:46:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 25 07:52:47 2011
Subject: [gdal-dev] building GDAL for Java with ECW support
In-Reply-To: <8C7DAE7B21100F4CABDD600FAAD339D005926F9A@DGA-EXC01.mrw.wallonie.int>
References: <8C7DAE7B21100F4CABDD600FAAD339D005926F9A@DGA-EXC01.mrw.wallonie.int>
Message-ID: <1311587168.4e2d3b6010025@webmail.free.fr>

Selon Nicolas Simon <nicolas.simon@spw.wallonie.be>:

> Hi,
> 	Concerning convertion from MSVC .lib to GCC import library .a,
>       help could by find here
>
> 	http://jrfonseca.planetaclix.pt/projects/gnu-win32/software/reimp/index.html

Yes I know reimp, but AFAIR, it doesn't work well with C++ symbols, which the
ECW SDK contains. Perhaps this has improved, but I wouldn't be too optimistic.

Anyway the freely downloadable Visual Studio Express might be a better starting
point. GDAL can be built with it.

And/or start from Tamas Szekeres daily builds and customize them (there are
source packages) to your needs.

>
> 	Nicolas
>
> > -----Message d'origine-----
> > De : gdal-dev-bounces@lists.osgeo.org
> > [mailto:gdal-dev-bounces@lists.osgeo.org]De la part de Even Rouault
> > Envoy? : dimanche 24 juillet 2011 23:08
> > ? : gdal-dev@lists.osgeo.org
> > Cc : alxster
> > Objet : Re: [gdal-dev] building GDAL for Java with ECW support
> >
> >
> > Le dimanche 24 juillet 2011 21:15:40, alxster a ?crit :
> > > Hi,
> > >
> > > I am completely new in compiling in C/C++
> > >
> > > I am using MingW/MSYS as for instructions in
> > > http://trac.osgeo.org/gdal/wiki/BuildingWithMinGW
> > >
> > > For first I downloaded ERDAS SDK and tried to enable ECW
> > support as in
> > > http://trac.osgeo.org/gdal/wiki/ECW
> >
> > I don't think it is possible to have ECW support with MinGW,
> > because the ECW
> > SDK has MSVC .lib that can't be turned into a GCC import library .a
> >
> > >
> > > But support is still disabled.
> > >
> > > on this newsletter arc I've found just old posts with broken links.
> > >
> > > Is there any uptated tutorial (as easy as possible) to build a win32
> > > gdal.dll to be used by gdal.jar Java JNI, with ECW support?
> > >
> > > thanks
> > >
> > >
> > > --
> > > View this message in context:
> > >
> http://osgeo-org.1803224.n2.nabble.com/building-GDAL-for-Java-with-ECW-sup
> > port-tp6616111p6616111.html Sent from the GDAL - Dev mailing list archive
> > at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From even.rouault at mines-paris.org  Mon Jul 25 07:03:20 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 25 09:14:33 2011
Subject: [gdal-dev] gdalbuilvrt segmentation fault 
In-Reply-To: <EA9C1D0D85204D18B05C3E2879457314@nicolettiws>
References: <EA9C1D0D85204D18B05C3E2879457314@nicolettiws>
Message-ID: <1311591800.4e2d4d789e66c@webmail.free.fr>

Selon Marco Nicoletti <nicoletti@consorzio-innova.it>:

> Dear all,
>
> I have got a problem using the GDAL tool gdalbuildvrt.
>
> I would like to join two DEMs sampled on the same grid which insist on the
> same
> geografical zone.
> The first DEM has got some NoDataValue holes and I would like to feel them
> with the values in
> the second DEM.
> I ave used also the flag to ignore the projection
> (-allow_projection_difference).
>
> DEMs have the same raster size (xSize="10801" ySize="7201"), the same data
> type ("Float32")
> and the same NoData Value (-3.27670000000000E+04).
>
> The GDAL tool goes in segmentation fault: any ideas?

I'm not aware of remaining issues that could cause segmentation fault in the
current version. Do you use GDAL 1.8.x or an older version ? If older, please
upgrade and test again. If it is GDAL 1.8.0 or later, then I would need the
datasets to reproduce.

You could also run under a debugger or under Valgrind to see where it crashes.

>
> $ gdalbuildvrt -allow_projection_difference  output.vrt ned/safod+egm96.dem
> srtm/srtm_90m_egm96_grid.tif
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> Warning 6: gdalbuildvrt does not support heterogenous band characteristics.
> Skipping srtm/srtm_90m_egm96_grid.tif

Hum, looking at the code, this message can happen if the datasets have a
different color interpreation or data type. If your both datasets have same data
type, it must be due to the different color interpretation. Can you paste the
output of gdalinfo on both datasets ? I'm wondering if that test shouldn't be
relaxed : it could certainly be relaxed on color interpretation, which is just
an information, and as far as different data type it could be improved to select
the most appropriate datatype one or let the user define it...

If you can build from source, you can just remove the following code in
apps/gdalbuildvrt.cpp :

                if (pasBandProperties[j].colorInterpretation !=
GDALGetRasterColorInterpretation(hRasterBand) ||
                    pasBandProperties[j].dataType !=
GDALGetRasterDataType(hRasterBand))
                {
                    CPLError(CE_Warning, CPLE_NotSupported,
                                "gdalbuildvrt does not support heterogenous band
characteristics. Skipping %s",
                                dsFileName);
                    return FALSE;
                }

Best regards,

Even

From even.rouault at mines-paris.org  Mon Jul 25 07:24:18 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 25 09:36:40 2011
Subject: [gdal-dev] How to check if projections are the same?
In-Reply-To: <CAHNf2YT+hOt0jrp1BKU85rc+W9JpS7c9T9yPYHOsxFopph8n0w@mail.gmail.com>
References: <CAHNf2YT+hOt0jrp1BKU85rc+W9JpS7c9T9yPYHOsxFopph8n0w@mail.gmail.com>
Message-ID: <1311593058.4e2d5262b046e@webmail.free.fr>

Selon Paul Meems <bontepaarden@gmail.com>:

> We use GDAL/OGR/Proj4 in our application: MapWindow GIS.
>
> We're testing the MapWinGIS.GeoProjection class. It's just a wrapper around
> OGRSpatialReference class, so it's GDAL behavior infact.
>
> The test code:
>
>         private void button8_Click(object sender, EventArgs e)
>         {
>             MapWinGIS.GeoProjection proj = new GeoProjection();
>             proj.ImportFromEPSG(4326);
>             System.Diagnostics.Debug.Print(proj.ExportToWKT());
>
>             string s = proj.ExportToProj4();
>             proj.ImportFromProj4(s);
>             System.Diagnostics.Debug.Print(proj.ExportToWKT());
>
>             s = proj.ExportToProj4();
>             proj.ImportFromProj4(s);
>             System.Diagnostics.Debug.Print(proj.ExportToWKT());
>         }
>
>
> Results:
>
> GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],
> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
>
UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9122"]],AUTHORITY["EPSG","4326"]]
>
>
> GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
>
UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
>
>
> GEOGCS["WGS
>
84",DATUM["unknown",SPHEROID["WGS84",6378137,298.257223563],TOWGS84[0,0,0,0,0,0,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]
>
>
> If we test the first and the third string with GeoProjection.IsSame() it
> will return false, but they are the same.

Looking at  see OGRSpatialReference::IsSameGeogCS(), I see :

/* -------------------------------------------------------------------- */
/*      Does the datum name match?  Note that we assume                 */
/*      compatibility if either is missing a datum.                     */
/* -------------------------------------------------------------------- */
    pszThisValue = this->GetAttrValue( "DATUM" );
    pszOtherValue = poOther->GetAttrValue( "DATUM" );

    if( pszThisValue != NULL && pszOtherValue != NULL
        && !EQUAL(pszThisValue,pszOtherValue) )
        return FALSE;

So clearly the DATUM name is a criteria. In your example WGS_1984 != unknown,
hence the result.

>
> How should we bypass this?

You can reimplement a variant of IsSame() for fit your needs (remove the above
test).

But I'm not too sure if you can just use the other informations (spheroid,
towgs84, prime meridian, etc...) to test if 2 GEOGCS are identical. For example
:

WKT[EPSG:3824] =
GEOGCS["TWD97",
    DATUM["Taiwan_Datum_1997",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1026"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","3824"]]

WKT[EPSG:3889] =
GEOGCS["IGRS",
    DATUM["Iraqi_Geospatial_Reference_System",
        SPHEROID["GRS 1980",6378137,298.257222101,
            AUTHORITY["EPSG","7019"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","1029"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9122"]],
    AUTHORITY["EPSG","3889"]]

As far as proj4 is concerned, they are identical ("+proj=longlat +ellps=GRS80
+towgs84=0,0,0,0,0,0,0 +no_defs "). But are they the "same"... ?

So it really depends on what you do with the result of the comparision. If it is
just for reprojection purposes, you could ExportToProj4() and compare the
strings. But I guess there would be also some cases where it wouldn't be
perfect. For example "+datum=WGS84" is equivalent with "+ellps=WGS84
+towgs84=0,0,0,0,0,0,0".

Best regards,

Even
From sfkeller at gmail.com  Mon Jul 25 07:54:03 2011
From: sfkeller at gmail.com (Stefan Keller)
Date: Mon Jul 25 10:07:54 2011
Subject: [gdal-dev] How to convert a GIF (being a grid with value in
	channel B from RGB) to XYZ?
In-Reply-To: <CAMKgpOYoC+5jCLqTKKnoztSi9TN8nf1LHRXy+jq3053jhy7W2Q@mail.gmail.com>
References: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>
	<CAMKgpOYoC+5jCLqTKKnoztSi9TN8nf1LHRXy+jq3053jhy7W2Q@mail.gmail.com>
Message-ID: <CAFcOn29-VEJ7tV_yLPuNMTfAzLMFe6=RYojTjFivQHeiM-573Q@mail.gmail.com>

Hi Chaitanya kumar

Many thanks for the hints. I kow VRT from OGR but was not sure if this
works here too.

What I'm still wondering is, how to accomplish the transformation.
It's rather a coord. translation process not comparable to warping:

> The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
> The following is known about the geolocation (Switzerland,
> EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
> 438000.

So I'd like to do some shifting and scaling before XY-coordinates are
output (Z coming from the Colortable).

Yours, S.


2011/7/25 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> Stefan,
>
> You can convert the integer codes to float values using a VRT file[1] for
> each gif file.
> Create a VRT file with the ColorTable element. Add the SimpleSource to point
> to your gif and the SourceBand element as 3 to point to B band.
>
> Once you create a VRT file for the GIF, you can use it like any other raster
> file. GDAL interprets the elements in it and applies the conversions
> internally. Use it with gdal_translate or gdalwarp (if you want to warp it
> to a new coordinate system) to create an ASCII Grid file.
>
> [1]: http://www.gdal.org/gdal_vrttut.html
>
> On Mon, Jul 25, 2011 at 12:39 AM, Stefan Keller <sfkeller@gmail.com> wrote:
>>
>> I have a raster/grid file transformation and conversion question:
>>
>> The input are hunddrets of GIF files which in fact are a grid about
>> rainfall observations. The files have 8 BitsPerPixel (0..255). The B
>> channel (integer value) from RGB obviously represents the
>> precipitation intensity in [mm/h] according to a lookup table (0=>0,
>> 1=>0.2, 2=>0.32, 3=>0.5, 4=>0.8, 5=1.3, 6=>2, 7=>5, 8=>8 9=>13 10=>20,
>> 11=>32, 12=>50, 13=>50, 14=>80, 15=>130).
>>
>> The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
>> The following is known about the geolocation (Switzerland,
>> EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
>> 438000.
>>
>> The target format is ASCII Gridded (XYZ)? or Arc/Info ASCII Grid
>> (AAIGrid), with e.g. the following on each line: "481000 38000 0.32",
>> meaning the transformed coordinates x and y and the float value (as
>> indicated above in the lookup table).
>>
>> I know OGR but I'm new to GDAL: How would you accomplish this task?
>>
>> Transforming with gdal_transform then converting with gdal_translate ?
>> Or do I have to write something myself (perhaps based on gdal2xyz.py)?
>>
>> -S.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
From chaitanya.ch at gmail.com  Mon Jul 25 08:03:53 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jul 25 10:18:11 2011
Subject: [gdal-dev] How to convert a GIF (being a grid with value in
	channel B from RGB) to XYZ?
In-Reply-To: <CAFcOn29-VEJ7tV_yLPuNMTfAzLMFe6=RYojTjFivQHeiM-573Q@mail.gmail.com>
References: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>
	<CAMKgpOYoC+5jCLqTKKnoztSi9TN8nf1LHRXy+jq3053jhy7W2Q@mail.gmail.com>
	<CAFcOn29-VEJ7tV_yLPuNMTfAzLMFe6=RYojTjFivQHeiM-573Q@mail.gmail.com>
Message-ID: <CAMKgpOYqrbp-XiB+6HL-ZqrXmhhK4ydbZ2EvtK9cXAa+jQixXw@mail.gmail.com>

If the transformation is just shifting and scaling you can set the
GeoTransform element in the VRT file.
You can scale the pixel values using the Offset and Scale elements.

On Mon, Jul 25, 2011 at 5:24 PM, Stefan Keller <sfkeller@gmail.com> wrote:

> Hi Chaitanya kumar
>
> Many thanks for the hints. I kow VRT from OGR but was not sure if this
> works here too.
>
> What I'm still wondering is, how to accomplish the transformation.
> It's rather a coord. translation process not comparable to warping:
>
> > The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
> > The following is known about the geolocation (Switzerland,
> > EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
> > 438000.
>
> So I'd like to do some shifting and scaling before XY-coordinates are
> output (Z coming from the Colortable).
>
> Yours, S.
>
>
> 2011/7/25 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> > Stefan,
> >
> > You can convert the integer codes to float values using a VRT file[1] for
> > each gif file.
> > Create a VRT file with the ColorTable element. Add the SimpleSource to
> point
> > to your gif and the SourceBand element as 3 to point to B band.
> >
> > Once you create a VRT file for the GIF, you can use it like any other
> raster
> > file. GDAL interprets the elements in it and applies the conversions
> > internally. Use it with gdal_translate or gdalwarp (if you want to warp
> it
> > to a new coordinate system) to create an ASCII Grid file.
> >
> > [1]: http://www.gdal.org/gdal_vrttut.html
> >
> > On Mon, Jul 25, 2011 at 12:39 AM, Stefan Keller <sfkeller@gmail.com>
> wrote:
> >>
> >> I have a raster/grid file transformation and conversion question:
> >>
> >> The input are hunddrets of GIF files which in fact are a grid about
> >> rainfall observations. The files have 8 BitsPerPixel (0..255). The B
> >> channel (integer value) from RGB obviously represents the
> >> precipitation intensity in [mm/h] according to a lookup table (0=>0,
> >> 1=>0.2, 2=>0.32, 3=>0.5, 4=>0.8, 5=1.3, 6=>2, 7=>5, 8=>8 9=>13 10=>20,
> >> 11=>32, 12=>50, 13=>50, 14=>80, 15=>130).
> >>
> >> The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
> >> The following is known about the geolocation (Switzerland,
> >> EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
> >> 438000.
> >>
> >> The target format is ASCII Gridded (XYZ)? or Arc/Info ASCII Grid
> >> (AAIGrid), with e.g. the following on each line: "481000 38000 0.32",
> >> meaning the transformed coordinates x and y and the float value (as
> >> indicated above in the lookup table).
> >>
> >> I know OGR but I'm new to GDAL: How would you accomplish this task?
> >>
> >> Transforming with gdal_transform then converting with gdal_translate ?
> >> Or do I have to write something myself (perhaps based on gdal2xyz.py)?
> >>
> >> -S.
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/a62fb752/attachment-0001.html
From ragi at burhum.com  Mon Jul 25 13:07:45 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Mon Jul 25 15:38:28 2011
Subject: [gdal-dev] Re: Draw map in Visual C++
Message-ID: <CA+g+PQAs=rE-iFX1Tn8P9Nur9H78zwkgX6Rg5bGgwvS-h+Dshg@mail.gmail.com>

Brian,

There are various libraries that already support drawing spatial data. One
of them is Mapnik (which supports symbology and annotation among other
things). Take a look at their C++ drawing
sample<http://trac.mapnik.org/wiki/ExampleCode>.
If you want to draw things in a much lower level, you can also use
OpenGL<http://stackoverflow.com/questions/340185/using-gdal-ogr-api-to-read-vector-data-shapefile-how>
.

Best of luck,

- Ragi


> Date: Sat, 23 Jul 2011 18:12:35 +0530
> From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
> Subject: Re: [gdal-dev] Re: Draw map in Visual C++
> To: mark <mark024@hotmail.com>
> Cc: gdal-dev@lists.osgeo.org
> Message-ID:
>        <CAMKgpOYviNLw2u1YS4nJb--bofVVo=9KgN0zp-0Gyz5K_cMXcA@mail.gmail.com
> >
> Content-Type: text/plain; charset="utf-8"
>
> Mark,
>
> You should be able to display an image by filling in a BitMap kind of
> object
> using GDALRasterIO.
>
> On Sat, Jul 23, 2011 at 12:40 PM, mark <mark024@hotmail.com> wrote:
>
> > Thank you Brian for you reply .
> > As you said , gdal is for read / write data.
> > So do you know some libraries that allows me to draw maps in my
> > application.
> > I see many standalone open applications, like OpenEV, but it is not my
> case
> > .
> >
> > I am using C++.
> >
> > Thanks in advance
> >
> >
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/114952d7/attachment.html
From even.rouault at mines-paris.org  Mon Jul 25 13:49:48 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jul 25 16:22:38 2011
Subject: [gdal-dev] Help needed regarding SWIG Packaging
In-Reply-To: <CANMJH-sPf5gRzXr23MDNXqTKfX9ZibQd+SQRkjiQSpLM9MTrPw@mail.gmail.com>
References: <CANMJH-sPf5gRzXr23MDNXqTKfX9ZibQd+SQRkjiQSpLM9MTrPw@mail.gmail.com>
Message-ID: <201107251949.48305.even.rouault@mines-paris.org>

Le lundi 25 juillet 2011 11:27:41, Vipul Raheja a ?crit :
> Hi,
> 
> I am working on developing SWIG-Python wrappings for OSSIM, a tool for
> satellite image processing. I wanted some help regarding the same since
> GDAL uses Swig for the same. I am facing a problem regarding the
> packaging.
> 
> As of now I have developed SWIG-Wrapper interface files (.i Files) for 130
> different classes, and am ale to access them independently from a Python
> console also; but I am not able to combine them into a single module so as
> to be able to access them all together from a single import command, i.e.
> suppose there are classes a.cpp/a.h and b.cpp/b.h, then I have created
> their swig wrappers a.i and b.i, but in order to access them from a Python
> console, I have to compile them separately, generate the .so file and when
> I do an 'import module' in Python, I can access only one class's
> functionality at a time (the one which I compiled). In order to access the
> other class's functionality, I have to compile that class, generate the
> .so file, and then I am able to import it.
> 
> And what I want is that by doing a single compilation, .so generation and
> import command, I should be able to access all the wrapped functions from
> Python rather than the piece wise way which is happening currently.
> 
> Any ideas on the issue? Help will be greatly appreciated.

I'm far from being the ultimate swig specialist, but I think that you could 
create a global .i that would %include each of the .i . Then you just run swig 
over that global .i

> 
> Thanks and Regards,
> Vipul Raheja
From rush at winkey.org  Mon Jul 25 14:02:48 2011
From: rush at winkey.org (Brian Case)
Date: Mon Jul 25 16:36:47 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
Message-ID: <1311616968.12257.27.camel@octopi>

anna, Nikolaos,

after much experimentation I found something that seems to work.

gdalwarp --config GEOL_AS_GCPS FULL \
         -tps -geoloc -t_srs EPSG:4326 \
         -te -119.88004906118 13.5092548294379 \
         -92.6036641645677 34.7070050511582 \
HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB \ MOD02HKM.A2011169.1750.005.NRT.tif

note i tried to escape the newlines to make it easy to read but the
email may mess that up.

there is about 2.7 million gcp's in a normal 5min modis swath file, by
default gdal only reads every 10th row and column of gcp's this is not
enough to handle the bowtie effect.


Brian

On Tue, 2011-01-18 at 16:33 -0800, Nikolaos Hatzopoulos wrote:
> You are right, I notice that there isn't any difference from the
> band_1.tiff and band_1_warp.tiff
> 
> --Nikos Hatzopoulos
> 
> On Mon, Jan 17, 2011 at 8:15 AM, anna auge <annaauge@web.de> wrote:
>         Hi all,
>         
>         I am trying to convert modis level 1B data (type SWATH) to
>         geotiff following these steps.
>         
>         1) Examining the HDF
>         gdalinfo d:\modis\1b
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf
>         gdalinfo HDF4_EOS:EOS_SWATH:"d:\modis\1b
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>         2) Extracting the 1. band of the subdataset
>         MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>         gdal_translate -of GTiff -b 1 HDF4_EOS:EOS_SWATH:"d:\modis\1b
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB d:\modis\1b\band_1.tiff
>         4) Warping the image to WGS84
>         gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff d:\modis\1b
>         \band_1_warp.tiff
>         
>         The example dataset, which i am using, can be downloaded here
>         ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
>         
>         And now to my problem: I get always an certain shift
>         (http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/), which is avoided if i am using the "Georeference MODIS" option in ENVI (http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
>         I also tried a few workarounds, f.g.
>         http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but
>         nothing worked properly.
>         As far as I understand gdal supports Modis L1B SWATH, so what
>         I am doing wrong? Any help is appreciated.
>         
>         Regards Anna
>         
>         P.S. I am using FWTools 2.4.7 on Windows
>           
>         
>         
>         WEB.DE DSL Doppel-Flat ab 19,99 /mtl.! Jetzt mit    
>         gratis Handy-Flat!
>         http://produkte.web.de/go/DSL_Doppel_Flatrate/2
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From vipul.iiith at gmail.com  Mon Jul 25 15:11:31 2011
From: vipul.iiith at gmail.com (Vipul Raheja)
Date: Mon Jul 25 17:49:32 2011
Subject: [gdal-dev] Help needed regarding SWIG Packaging
In-Reply-To: <201107251949.48305.even.rouault@mines-paris.org>
References: <CANMJH-sPf5gRzXr23MDNXqTKfX9ZibQd+SQRkjiQSpLM9MTrPw@mail.gmail.com>
	<201107251949.48305.even.rouault@mines-paris.org>
Message-ID: <CANMJH-t=EqGLnVKgASPDKjEH3eMMxN58AVfcvcLNpjdFTpZgCg@mail.gmail.com>

Hi Even,

Thanks for the reply.

I was trying out the way you suggested it. I created a master.i which
%includes all the other .i files. Upon compilation I am facing anther issue.
It is a trivial issue I guess but I am not able to figure out. The things
is, compilation with swig is usually in following steps -

$ swig -c++ -python -Wall -I/<path to header files to be included> master.i
This I am able to do fine, it generates "master_wrap.cxx" and "module.py"
files

$ g++ -c - fPIC [path to file to be linked] master_wrap.cxx -I/<path to
python library>
Now since there are multiple files that need to be linked, I am not able to
figure out what to write here in place of [path to file to be linked]. It is
supposed to be the address of source file to be linked but in this case,
there are multiple files spread in multiple folders that need to be linked.

Upon giving the address of the parent folder, it says, "linker input file
unused because linking not done", clearly since it wants a filename and not
a folder address.

Kindly Help.

Regards,
Vipul Raheja

On Mon, Jul 25, 2011 at 11:19 PM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le lundi 25 juillet 2011 11:27:41, Vipul Raheja a ?crit :
> > Hi,
> >
> > I am working on developing SWIG-Python wrappings for OSSIM, a tool for
> > satellite image processing. I wanted some help regarding the same since
> > GDAL uses Swig for the same. I am facing a problem regarding the
> > packaging.
> >
> > As of now I have developed SWIG-Wrapper interface files (.i Files) for
> 130
> > different classes, and am ale to access them independently from a Python
> > console also; but I am not able to combine them into a single module so
> as
> > to be able to access them all together from a single import command, i.e.
> > suppose there are classes a.cpp/a.h and b.cpp/b.h, then I have created
> > their swig wrappers a.i and b.i, but in order to access them from a
> Python
> > console, I have to compile them separately, generate the .so file and
> when
> > I do an 'import module' in Python, I can access only one class's
> > functionality at a time (the one which I compiled). In order to access
> the
> > other class's functionality, I have to compile that class, generate the
> > .so file, and then I am able to import it.
> >
> > And what I want is that by doing a single compilation, .so generation and
> > import command, I should be able to access all the wrapped functions from
> > Python rather than the piece wise way which is happening currently.
> >
> > Any ideas on the issue? Help will be greatly appreciated.
>
> I'm far from being the ultimate swig specialist, but I think that you could
> create a global .i that would %include each of the .i . Then you just run
> swig
> over that global .i
>
> >
> > Thanks and Regards,
> > Vipul Raheja
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/650245a4/attachment.html
From thakkar at nexgenwireless.com  Mon Jul 25 20:05:21 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Mon Jul 25 22:59:25 2011
Subject: [gdal-dev] Re: gdal_translate -unscale option
In-Reply-To: <4B3D0C67.7060605@pobox.com>
References: <4B3D0C67.7060605@pobox.com>
Message-ID: <1311638721655-6620565.post@n2.nabble.com>

Frank,

Does the unscale option work as advertised?

I have a raster with offset and scale set.

Driver: GTiff/GeoTIFF
Files: raster.tif
       raster.tif.aux.xml
Size is 10295, 7735
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["unnamed",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 80",6378137,298.257222101],
            TOWGS84[0,0,0,-0,-0,-0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-87],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]
Origin = (246885.000000000000000,4726455.000000000000000)
Pixel Size = (30.000000000000000,-30.000000000000000)
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  246885.000, 4726455.000) ( 90d 5'15.87"W, 42d38'56.20"N)
Lower Left  (  246885.000, 4494405.000) ( 89d59'22.95"W, 40d33'42.29"N)
Upper Right (  555735.000, 4726455.000) ( 86d19'10.68"W, 42d41'18.81"N)
Lower Right (  555735.000, 4494405.000) ( 86d20'28.58"W, 40d35'54.87"N)
Center      (  401310.000, 4610430.000) ( 88d11' 5.93"W, 41d38'22.21"N)
Band 1 Block=10295x1 Type=Float32, ColorInterp=Gray
*  NoData Value=0
  Offset: -200,   Scale:0.00305185094759972*


when I do a gdallocationinfo on it, i get the value of -90.82 as follows:

gdallocationinfo -b 1  raster.tif 3000 3342
Report:
  Location: (3000P,3342L)
  Band 1:
    Value: -90.8230819702148
    Descaled Value: -200.277178508775

Applying unscale
 gdal_translate -unscale -of GTiff ~/raster.tif raster2.tif

 gdallocationinfo -b 1  raster2.tif 3000 3342                                    
Report:
  Location: (3000P,3342L)
  Band 1:
    Value: -200.27717590332

I would have expected -90.82 as the value.  Am I wrong?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/gdal-translate-unscale-option-tp4237854p6620565.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From nhatzop at gmail.com  Mon Jul 25 20:20:31 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Mon Jul 25 23:15:29 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <1311616968.12257.27.camel@octopi>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
	<1311616968.12257.27.camel@octopi>
Message-ID: <CALDJGKCbD8-VhzBD1nmUfe+rTaKmENZ8O9NcCC2eFYpdJrxeHw@mail.gmail.com>

It seems interesting I'll keep a note on this :)

The question is how you can build a VRT mosaic directly from MODIS hdf
files, because
the problem is that you have to mosaic first and after that to transform
them to the
EPSG:4326 projection. If you transform them first and mosaic them after you
might have
white lines.

--Nikos

2011/7/25 Brian Case <rush@winkey.org>

> anna, Nikolaos,
>
> after much experimentation I found something that seems to work.
>
> gdalwarp --config GEOL_AS_GCPS FULL \
>         -tps -geoloc -t_srs EPSG:4326 \
>         -te -119.88004906118 13.5092548294379 \
>         -92.6036641645677 34.7070050511582 \
> HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
> \ MOD02HKM.A2011169.1750.005.NRT.tif
>
> note i tried to escape the newlines to make it easy to read but the
> email may mess that up.
>
> there is about 2.7 million gcp's in a normal 5min modis swath file, by
> default gdal only reads every 10th row and column of gcp's this is not
> enough to handle the bowtie effect.
>
>
> Brian
>
> On Tue, 2011-01-18 at 16:33 -0800, Nikolaos Hatzopoulos wrote:
> > You are right, I notice that there isn't any difference from the
> > band_1.tiff and band_1_warp.tiff
> >
> > --Nikos Hatzopoulos
> >
> > On Mon, Jan 17, 2011 at 8:15 AM, anna auge <annaauge@web.de> wrote:
> >         Hi all,
> >
> >         I am trying to convert modis level 1B data (type SWATH) to
> >         geotiff following these steps.
> >
> >         1) Examining the HDF
> >         gdalinfo d:\modis\1b
> >         \MOD021KM.A2011008.0850.005.2011008195744.hdf
> >         gdalinfo HDF4_EOS:EOS_SWATH:"d:\modis\1b
> >
> \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> >         2) Extracting the 1. band of the subdataset
> >         MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> >         gdal_translate -of GTiff -b 1 HDF4_EOS:EOS_SWATH:"d:\modis\1b
> >
> \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> d:\modis\1b\band_1.tiff
> >         4) Warping the image to WGS84
> >         gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff d:\modis\1b
> >         \band_1_warp.tiff
> >
> >         The example dataset, which i am using, can be downloaded here
> >
> ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
> >
> >         And now to my problem: I get always an certain shift
> >         (
> http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/),
> which is avoided if i am using the "Georeference MODIS" option in ENVI (
> http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
> >         I also tried a few workarounds, f.g.
> >         http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but
> >         nothing worked properly.
> >         As far as I understand gdal supports Modis L1B SWATH, so what
> >         I am doing wrong? Any help is appreciated.
> >
> >         Regards Anna
> >
> >         P.S. I am using FWTools 2.4.7 on Windows
> >
> >
> >
> >         WEB.DE DSL Doppel-Flat ab 19,99 ?/mtl.! Jetzt mit
> >         gratis Handy-Flat!
> >         http://produkte.web.de/go/DSL_Doppel_Flatrate/2
> >
> >         _______________________________________________
> >         gdal-dev mailing list
> >         gdal-dev@lists.osgeo.org
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/a5a15867/attachment-0001.html
From thakkar at nexgenwireless.com  Mon Jul 25 23:19:01 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Tue Jul 26 02:23:48 2011
Subject: [gdal-dev] preserving alpha channel data with gdal_transform.py
Message-ID: <1311650341686-6620877.post@n2.nabble.com>

I have a very large raster file with data in the alpha band.  I need to
vectorize it and associate band 4 data with resulting polygons.

Is there anyway to preserve alpha channel data or get that data associated
with vectorized file after using gdal_polygonize.py?

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/preserving-alpha-channel-data-with-gdal-transform-py-tp6620877p6620877.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jzl5325 at psu.edu  Mon Jul 25 23:43:14 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Tue Jul 26 02:49:19 2011
Subject: [gdal-dev] preserving alpha channel data with gdal_transform.py
In-Reply-To: <1311650341686-6620877.post@n2.nabble.com>
References: <1311650341686-6620877.post@n2.nabble.com>
Message-ID: <CA+bfmPuCBGgn3E32GEU=v3YZVZ23jfKRxtpxautQZkMeCQY+GA@mail.gmail.com>

What format do you want the alphas channel in after running
gdal_polygonize.py?  I ask because after processing you could open the input
and read just the alpha band (band 4 I assume).  Here is a short script
framework that might get you started.

Something like:
from osgeo import gdal

gdal.open(inpudataset, gdal.GA_ReadOnly)

#Create an output
driverFormat = "GTiff" #Any GDAL supported write format
driver = gdal.GetDriverByName(driverFormat)
outdataset = driver.Create(options.output, dataset.RasterXSize,
dataset.RasterYSize, dataset.RasterCount)
outdataset.SetProjection(dataset.GetProjection())
outdataset.SetGeoTransform(dataset.GetGeoTransform())

inband = gdal.GetRasterBand(4) #Band counts are 1 based.  I am assuming that
your band 4 is alpha.

#Read in the gdal array
input_band = inband.ReadAsArray()
outdataset.GetRasterBand(1).WriteArray(input_band, 0, 0)

Someone with more experience might be able to tell you a method that uses
CreateCopy(), but I think that it isn't possible to selectively copy bands.

Hope that that helps,
Jay

On Mon, Jul 25, 2011 at 8:19 PM, jt2000 <thakkar@nexgenwireless.com> wrote:

> I have a very large raster file with data in the alpha band.  I need to
> vectorize it and associate band 4 data with resulting polygons.
>
> Is there anyway to preserve alpha channel data or get that data associated
> with vectorized file after using gdal_polygonize.py?
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/preserving-alpha-channel-data-with-gdal-transform-py-tp6620877p6620877.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110725/811dde16/attachment.html
From thakkar at nexgenwireless.com  Mon Jul 25 23:51:23 2011
From: thakkar at nexgenwireless.com (jt2000)
Date: Tue Jul 26 02:57:50 2011
Subject: [gdal-dev] Re: preserving alpha channel data with gdal_polygonize.py
In-Reply-To: <CA+bfmPuCBGgn3E32GEU=v3YZVZ23jfKRxtpxautQZkMeCQY+GA@mail.gmail.com>
References: <1311650341686-6620877.post@n2.nabble.com>
	<CA+bfmPuCBGgn3E32GEU=v3YZVZ23jfKRxtpxautQZkMeCQY+GA@mail.gmail.com>
Message-ID: <1311652283406-6620923.post@n2.nabble.com>

Thanks Jay,

Ideally I would like the data to be in a column of the shapefile output so I
can load it in the database and use it to query.  With gdal_polygonize.py
this doesn't seem possible so I was wondering what other options are out
there.

--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/preserving-alpha-channel-data-with-gdal-transform-py-tp6620877p6620923.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Jul 26 00:26:29 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 26 03:34:48 2011
Subject: [gdal-dev] Re: preserving alpha channel data with
	gdal_polygonize.py
In-Reply-To: <1311652283406-6620923.post@n2.nabble.com>
References: <1311650341686-6620877.post@n2.nabble.com>
	<CA+bfmPuCBGgn3E32GEU=v3YZVZ23jfKRxtpxautQZkMeCQY+GA@mail.gmail.com>
	<1311652283406-6620923.post@n2.nabble.com>
Message-ID: <CAMKgpOZczNXeY8qi7EaLL+4w7b-Fd=cZw_PmR_-qTyvf3pJB0A@mail.gmail.com>

John,

gdal_polygonize script stores the common pixel value in a field for every
polygon. By default it is named 'DN', which can be changed by specifying the
fieldname option.

You must use the alpha channel to polygonize. So you have to use the -b
option to specify that and may have to use the -nomask option too.

On Tue, Jul 26, 2011 at 9:21 AM, jt2000 <thakkar@nexgenwireless.com> wrote:

> Thanks Jay,
>
> Ideally I would like the data to be in a column of the shapefile output so
> I
> can load it in the database and use it to query.  With gdal_polygonize.py
> this doesn't seem possible so I was wondering what other options are out
> there.
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/preserving-alpha-channel-data-with-gdal-transform-py-tp6620877p6620923.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/6644795d/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 26 00:33:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 26 03:41:55 2011
Subject: [gdal-dev] Re: preserving alpha channel data with
	gdal_polygonize.py
In-Reply-To: <CAMKgpOZczNXeY8qi7EaLL+4w7b-Fd=cZw_PmR_-qTyvf3pJB0A@mail.gmail.com>
References: <1311650341686-6620877.post@n2.nabble.com>
	<CA+bfmPuCBGgn3E32GEU=v3YZVZ23jfKRxtpxautQZkMeCQY+GA@mail.gmail.com>
	<1311652283406-6620923.post@n2.nabble.com>
	<CAMKgpOZczNXeY8qi7EaLL+4w7b-Fd=cZw_PmR_-qTyvf3pJB0A@mail.gmail.com>
Message-ID: <CAMKgpOYPa_zkvd1c79gFxMCJj92ooRnNHo-afJLT0mdEARceag@mail.gmail.com>

Then, you can run a separate command to process the non-alpha bands.
You need two processes because there may not be one-to-one mapping of the
non-alpha and alpha band polygons.

Finally, you need to make intersections of the polygons in the two layers
and store the values of the alpha band polygons. I can't find any scripts
that do this. I'm afraid you need to do this yourselves.

On Tue, Jul 26, 2011 at 9:56 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com>wrote:

> John,
>
> gdal_polygonize script stores the common pixel value in a field for every
> polygon. By default it is named 'DN', which can be changed by specifying the
> fieldname option.
>
> You must use the alpha channel to polygonize. So you have to use the -b
> option to specify that and may have to use the -nomask option too.
>
>
> On Tue, Jul 26, 2011 at 9:21 AM, jt2000 <thakkar@nexgenwireless.com>wrote:
>
>> Thanks Jay,
>>
>> Ideally I would like the data to be in a column of the shapefile output so
>> I
>> can load it in the database and use it to query.  With gdal_polygonize.py
>> this doesn't seem possible so I was wondering what other options are out
>> there.
>>
>> --
>> View this message in context:
>> http://osgeo-org.1803224.n2.nabble.com/preserving-alpha-channel-data-with-gdal-transform-py-tp6620877p6620923.html
>> Sent from the GDAL - Dev mailing list archive at Nabble.com.
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/42e2d7bd/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 26 01:46:46 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 26 04:59:37 2011
Subject: [gdal-dev] Re: gdal_translate -unscale option
In-Reply-To: <1311638721655-6620565.post@n2.nabble.com>
References: <4B3D0C67.7060605@pobox.com>
	<1311638721655-6620565.post@n2.nabble.com>
Message-ID: <CAMKgpOYLiRW_HR+9Db12_DpS2WTii+d-xb283H0hr6=BFHbZog@mail.gmail.com>

John,

The 'unscale' operation computes the real value of that pixel.

-90.8230819702148 is the value stored at the pixel.
-200.277178508775 is the value of the pixel.

On Tue, Jul 26, 2011 at 5:35 AM, jt2000 <thakkar@nexgenwireless.com> wrote:

> Frank,
>
> Does the unscale option work as advertised?
>
> I have a raster with offset and scale set.
>
> Driver: GTiff/GeoTIFF
> Files: raster.tif
>       raster.tif.aux.xml
> Size is 10295, 7735
> Coordinate System is:
> PROJCS["unnamed",
>    GEOGCS["unnamed",
>        DATUM["North_American_Datum_1983",
>            SPHEROID["GRS 80",6378137,298.257222101],
>            TOWGS84[0,0,0,-0,-0,-0,0]],
>        PRIMEM["Greenwich",0],
>        UNIT["degree",0.0174532925199433]],
>    PROJECTION["Transverse_Mercator"],
>    PARAMETER["latitude_of_origin",0],
>    PARAMETER["central_meridian",-87],
>    PARAMETER["scale_factor",0.9996],
>    PARAMETER["false_easting",500000],
>    PARAMETER["false_northing",0],
>    UNIT["Meter",1]]
> Origin = (246885.000000000000000,4726455.000000000000000)
> Pixel Size = (30.000000000000000,-30.000000000000000)
> Image Structure Metadata:
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (  246885.000, 4726455.000) ( 90d 5'15.87"W, 42d38'56.20"N)
> Lower Left  (  246885.000, 4494405.000) ( 89d59'22.95"W, 40d33'42.29"N)
> Upper Right (  555735.000, 4726455.000) ( 86d19'10.68"W, 42d41'18.81"N)
> Lower Right (  555735.000, 4494405.000) ( 86d20'28.58"W, 40d35'54.87"N)
> Center      (  401310.000, 4610430.000) ( 88d11' 5.93"W, 41d38'22.21"N)
> Band 1 Block=10295x1 Type=Float32, ColorInterp=Gray
> *  NoData Value=0
>  Offset: -200,   Scale:0.00305185094759972*
>
>
> when I do a gdallocationinfo on it, i get the value of -90.82 as follows:
>
> gdallocationinfo -b 1  raster.tif 3000 3342
> Report:
>  Location: (3000P,3342L)
>  Band 1:
>    Value: -90.8230819702148
>    Descaled Value: -200.277178508775
>
> Applying unscale
>  gdal_translate -unscale -of GTiff ~/raster.tif raster2.tif
>
>  gdallocationinfo -b 1  raster2.tif 3000 3342
> Report:
>  Location: (3000P,3342L)
>  Band 1:
>    Value: -200.27717590332
>
> I would have expected -90.82 as the value.  Am I wrong?
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/gdal-translate-unscale-option-tp4237854p6620565.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/cf3d7213/attachment-0001.html
From sfkeller at gmail.com  Tue Jul 26 04:23:11 2011
From: sfkeller at gmail.com (Stefan Keller)
Date: Tue Jul 26 07:44:50 2011
Subject: [gdal-dev] How to convert a GIF (being a grid with value in
	channel B from RGB) to XYZ?
In-Reply-To: <CAMKgpOYqrbp-XiB+6HL-ZqrXmhhK4ydbZ2EvtK9cXAa+jQixXw@mail.gmail.com>
References: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>
	<CAMKgpOYoC+5jCLqTKKnoztSi9TN8nf1LHRXy+jq3053jhy7W2Q@mail.gmail.com>
	<CAFcOn29-VEJ7tV_yLPuNMTfAzLMFe6=RYojTjFivQHeiM-573Q@mail.gmail.com>
	<CAMKgpOYqrbp-XiB+6HL-ZqrXmhhK4ydbZ2EvtK9cXAa+jQixXw@mail.gmail.com>
Message-ID: <CAFcOn2_s8LgnUH3MPJ05aX=ik+a-94v1Wem8yk2AK0thhU8aAA@mail.gmail.com>

Hi Chaitanya

Thanks again for the hint. I have now to experiment with GeoTransform.
I first let generate a valid VRT to start doing a "% gdal_translate
-of VRT myinputfile.gif myinputfile.vrt". But I still have some
issues:

1. I'm stuck on where to put the geofererencing information (being
lower/left target coord in EPSG:21781 and pixel size 1000m). Are there
tools which calculate "six value affine geotransformation values"
(given lower/left target coord and pixel size 1000m)?

2. I'm confused what's the difference between GeoTransform and
offset/scale subtags in VRTRasterBand even after reading the VRT
tutorial (http://www.gdal.org/gdal_vrttut.html ).

3. Is there a way to process 600 input files without generating 600
VRT-files (one should have a placeholder in subtag SourceFilename
(under SimpleSource) which takes over the input parameters from the
gdal_translate shell command.)?

Yours, S.


2011/7/25 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> If the transformation is just shifting and scaling you can set the
> GeoTransform element in the VRT file.
> You can scale the pixel values using the Offset and Scale elements.
>
> On Mon, Jul 25, 2011 at 5:24 PM, Stefan Keller <sfkeller@gmail.com> wrote:
>>
>> Hi Chaitanya kumar
>>
>> Many thanks for the hints. I know VRT from OGR but was not sure if this
>> works here too.
>>
>> What I'm still wondering is, how to accomplish the transformation.
>> It's rather a coord. translation process not comparable to warping:
>>
>> > The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
>> > The following is known about the geolocation (Switzerland,
>> > EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
>> > 438000.
>>
>> So I'd like to do some shifting and scaling before XY-coordinates are
>> output (Z coming from the Colortable).
>>
>> Yours, S.
>>
>>
>> 2011/7/25 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
>> > Stefan,
>> >
>> > You can convert the integer codes to float values using a VRT file[1]
>> > for
>> > each gif file.
>> > Create a VRT file with the ColorTable element. Add the SimpleSource to
>> > point
>> > to your gif and the SourceBand element as 3 to point to B band.
>> >
>> > Once you create a VRT file for the GIF, you can use it like any other
>> > raster
>> > file. GDAL interprets the elements in it and applies the conversions
>> > internally. Use it with gdal_translate or gdalwarp (if you want to warp
>> > it
>> > to a new coordinate system) to create an ASCII Grid file.
>> >
>> > [1]: http://www.gdal.org/gdal_vrttut.html
>> >
>> > On Mon, Jul 25, 2011 at 12:39 AM, Stefan Keller <sfkeller@gmail.com>
>> > wrote:
>> >>
>> >> I have a raster/grid file transformation and conversion question:
>> >>
>> >> The input are hunddrets of GIF files which in fact are a grid about
>> >> rainfall observations. The files have 8 BitsPerPixel (0..255). The B
>> >> channel (integer value) from RGB obviously represents the
>> >> precipitation intensity in [mm/h] according to a lookup table (0=>0,
>> >> 1=>0.2, 2=>0.32, 3=>0.5, 4=>0.8, 5=1.3, 6=>2, 7=>5, 8=>8 9=>13 10=>20,
>> >> 11=>32, 12=>50, 13=>50, 14=>80, 15=>130).
>> >>
>> >> The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
>> >> The following is known about the geolocation (Switzerland,
>> >> EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
>> >> 438000.
>> >>
>> >> The target format is ASCII Gridded (XYZ)? or Arc/Info ASCII Grid
>> >> (AAIGrid), with e.g. the following on each line: "481000 38000 0.32",
>> >> meaning the transformed coordinates x and y and the float value (as
>> >> indicated above in the lookup table).
>> >>
>> >> I know OGR but I'm new to GDAL: How would you accomplish this task?
>> >>
>> >> Transforming with gdal_transform then converting with gdal_translate ?
>> >> Or do I have to write something myself (perhaps based on gdal2xyz.py)?
>> >>
>> >> -S.
>> >> _______________________________________________
>> >> gdal-dev mailing list
>> >> gdal-dev@lists.osgeo.org
>> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>> > --
>> > Best regards,
>> > Chaitanya kumar CH.
>> >
>> > +91-9494447584
>> > 17.2416N 80.1426E
>> >
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
From pavkiz at mail.ru  Tue Jul 26 05:23:54 2011
From: pavkiz at mail.ru (el_inca)
Date: Tue Jul 26 08:48:48 2011
Subject: [gdal-dev] Re: Saving 16 bit image
In-Reply-To: <1311258384.4e283710ccbb6@webmail.free.fr>
References: <1311252374099-6606613.post@n2.nabble.com>
	<CAMKgpOZLf5pCnqQ1kFKL2u6ze4Ek3MyOd+rm=RDQvy5WZ-K++A@mail.gmail.com>
	<1311255471927-6606792.post@n2.nabble.com>
	<1311258384.4e283710ccbb6@webmail.free.fr>
Message-ID: <1311672234153-6621525.post@n2.nabble.com>

Thank you for your answer.

In gdal-translate.exe there is an option of -scale pixel range.
How can i set this parameters from code (visual c++) ?


--
View this message in context: http://osgeo-org.1803224.n2.nabble.com/Saving-16-bit-image-tp6606613p6621525.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Tue Jul 26 06:08:09 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 26 09:35:19 2011
Subject: [gdal-dev] How to convert a GIF (being a grid with value in
	channel B from RGB) to XYZ?
In-Reply-To: <CAFcOn2_s8LgnUH3MPJ05aX=ik+a-94v1Wem8yk2AK0thhU8aAA@mail.gmail.com>
References: <CAFcOn29O8OcPS_o0jwxJTDZCegT2rc713XOobo5zj1USnNe1pg@mail.gmail.com>
	<CAMKgpOYoC+5jCLqTKKnoztSi9TN8nf1LHRXy+jq3053jhy7W2Q@mail.gmail.com>
	<CAFcOn29-VEJ7tV_yLPuNMTfAzLMFe6=RYojTjFivQHeiM-573Q@mail.gmail.com>
	<CAMKgpOYqrbp-XiB+6HL-ZqrXmhhK4ydbZ2EvtK9cXAa+jQixXw@mail.gmail.com>
	<CAFcOn2_s8LgnUH3MPJ05aX=ik+a-94v1Wem8yk2AK0thhU8aAA@mail.gmail.com>
Message-ID: <CAMKgpOZf+1geXqd2emG25g-TL6bqny6rrNFKgP=4Xttd6EAFFQ@mail.gmail.com>

On Tue, Jul 26, 2011 at 1:53 PM, Stefan Keller <sfkeller@gmail.com> wrote:

> Hi Chaitanya
>
> Thanks again for the hint. I have now to experiment with GeoTransform.
> I first let generate a valid VRT to start doing a "% gdal_translate
> -of VRT myinputfile.gif myinputfile.vrt". But I still have some
> issues:
>
> 1. I'm stuck on where to put the geofererencing information (being
> lower/left target coord in EPSG:21781 and pixel size 1000m). Are there
> tools which calculate "six value affine geotransformation values"
> (given lower/left target coord and pixel size 1000m)?
>
 These values are not hard to calculate. You can find an explanation in the
documentation for GDALDataset::GetGeoTransform() method[1].


> 2. I'm confused what's the difference between GeoTransform and
> offset/scale subtags in VRTRasterBand even after reading the VRT
> tutorial (http://www.gdal.org/gdal_vrttut.html ).
>
GeoTransform refers to the relationship between the pixel's position in
image verses the position in projection coordinate space.
Offset/scale is used to scale the value of the pixel. This is particularly
useful the actual pixel values are outside the current raster datatype's
value range. Refer to documentation of GDALRasterBand::GetOffset()
method[2].


> 3. Is there a way to process 600 input files without generating 600
> VRT-files (one should have a placeholder in subtag SourceFilename
> (under SimpleSource) which takes over the input parameters from the
> gdal_translate shell command.)?
>
Using a placeholder like you described would be easier than creating
multiple VRT files only if all the rasters are similar in location,
resolution and projection and only one raster per VRT file. Using multiple
VRT files is a lot more flexible, i.e. powerful.


>
> Yours, S.
>

[1]:
http://www.gdal.org/classGDALDataset.html#f9593cc241e7d140f5f3c4798a43a668
[2]:
http://www.gdal.org/classGDALRasterBand.html#b62e0761dde3e3b76f83155920275e4f



>
>
> 2011/7/25 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> > If the transformation is just shifting and scaling you can set the
> > GeoTransform element in the VRT file.
> > You can scale the pixel values using the Offset and Scale elements.
> >
> > On Mon, Jul 25, 2011 at 5:24 PM, Stefan Keller <sfkeller@gmail.com>
> wrote:
> >>
> >> Hi Chaitanya kumar
> >>
> >> Many thanks for the hints. I know VRT from OGR but was not sure if this
> >> works here too.
> >>
> >> What I'm still wondering is, how to accomplish the transformation.
> >> It's rather a coord. translation process not comparable to warping:
> >>
> >> > The GIF size (= grid size) is 400x400 pixel with a cell size of 1000m.
> >> > The following is known about the geolocation (Switzerland,
> >> > EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
> >> > 438000.
> >>
> >> So I'd like to do some shifting and scaling before XY-coordinates are
> >> output (Z coming from the Colortable).
> >>
> >> Yours, S.
> >>
> >>
> >> 2011/7/25 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> >> > Stefan,
> >> >
> >> > You can convert the integer codes to float values using a VRT file[1]
> >> > for
> >> > each gif file.
> >> > Create a VRT file with the ColorTable element. Add the SimpleSource to
> >> > point
> >> > to your gif and the SourceBand element as 3 to point to B band.
> >> >
> >> > Once you create a VRT file for the GIF, you can use it like any other
> >> > raster
> >> > file. GDAL interprets the elements in it and applies the conversions
> >> > internally. Use it with gdal_translate or gdalwarp (if you want to
> warp
> >> > it
> >> > to a new coordinate system) to create an ASCII Grid file.
> >> >
> >> > [1]: http://www.gdal.org/gdal_vrttut.html
> >> >
> >> > On Mon, Jul 25, 2011 at 12:39 AM, Stefan Keller <sfkeller@gmail.com>
> >> > wrote:
> >> >>
> >> >> I have a raster/grid file transformation and conversion question:
> >> >>
> >> >> The input are hunddrets of GIF files which in fact are a grid about
> >> >> rainfall observations. The files have 8 BitsPerPixel (0..255). The B
> >> >> channel (integer value) from RGB obviously represents the
> >> >> precipitation intensity in [mm/h] according to a lookup table (0=>0,
> >> >> 1=>0.2, 2=>0.32, 3=>0.5, 4=>0.8, 5=1.3, 6=>2, 7=>5, 8=>8 9=>13
> 10=>20,
> >> >> 11=>32, 12=>50, 13=>50, 14=>80, 15=>130).
> >> >>
> >> >> The GIF size (= grid size) is 400x400 pixel with a cell size of
> 1000m.
> >> >> The following is known about the geolocation (Switzerland,
> >> >> EPSG:21781/CH1903): xmin: 481000, ymin: 38000 and xmax: 881000, ymax:
> >> >> 438000.
> >> >>
> >> >> The target format is ASCII Gridded (XYZ)? or Arc/Info ASCII Grid
> >> >> (AAIGrid), with e.g. the following on each line: "481000 38000 0.32",
> >> >> meaning the transformed coordinates x and y and the float value (as
> >> >> indicated above in the lookup table).
> >> >>
> >> >> I know OGR but I'm new to GDAL: How would you accomplish this task?
> >> >>
> >> >> Transforming with gdal_transform then converting with gdal_translate
> ?
> >> >> Or do I have to write something myself (perhaps based on
> gdal2xyz.py)?
> >> >>
> >> >> -S.
> >> >> _______________________________________________
> >> >> gdal-dev mailing list
> >> >> gdal-dev@lists.osgeo.org
> >> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >> >
> >> >
> >> >
> >> > --
> >> > Best regards,
> >> > Chaitanya kumar CH.
> >> >
> >> > +91-9494447584
> >> > 17.2416N 80.1426E
> >> >
> >
> >
> >
> > --
> > Best regards,
> > Chaitanya kumar CH.
> >
> > +91-9494447584
> > 17.2416N 80.1426E
> >
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/dd8b48c2/attachment.html
From chaitanya.ch at gmail.com  Tue Jul 26 06:27:16 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jul 26 09:55:27 2011
Subject: [gdal-dev] Re: Saving 16 bit image
In-Reply-To: <1311672234153-6621525.post@n2.nabble.com>
References: <1311252374099-6606613.post@n2.nabble.com>
	<CAMKgpOZLf5pCnqQ1kFKL2u6ze4Ek3MyOd+rm=RDQvy5WZ-K++A@mail.gmail.com>
	<1311255471927-6606792.post@n2.nabble.com>
	<1311258384.4e283710ccbb6@webmail.free.fr>
	<1311672234153-6621525.post@n2.nabble.com>
Message-ID: <CAMKgpOaN34WQXBRSGu7cEQ53hXzSVRjr2aEwwXhFOupSQkiMGw@mail.gmail.com>

You can use the GDALRasterBand::SetScale() and GDALRasterBand::SetOffset()
methods[1]. There are methods to retrieve them too.

[1]: http://www.gdal.org/classGDALRasterBand.html

On Tue, Jul 26, 2011 at 2:53 PM, el_inca <pavkiz@mail.ru> wrote:

> Thank you for your answer.
>
> In gdal-translate.exe there is an option of -scale pixel range.
> How can i set this parameters from code (visual c++) ?
>
>
> --
> View this message in context:
> http://osgeo-org.1803224.n2.nabble.com/Saving-16-bit-image-tp6606613p6621525.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/2d6ae106/attachment-0001.html
From rush at winkey.org  Tue Jul 26 12:17:47 2011
From: rush at winkey.org (Brian Case)
Date: Tue Jul 26 16:05:03 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <CALDJGKCbD8-VhzBD1nmUfe+rTaKmENZ8O9NcCC2eFYpdJrxeHw@mail.gmail.com>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
	<1311616968.12257.27.camel@octopi>
	<CALDJGKCbD8-VhzBD1nmUfe+rTaKmENZ8O9NcCC2eFYpdJrxeHw@mail.gmail.com>
Message-ID: <1311697067.12257.38.camel@octopi>

Nikolaos

I have warped modis with swath2grid and mosaicked it with mapserver, I
have not seen that issue.

also you don't need to use a vrt to mosaic, this can be done with one
gdalwarp call.

gdalwarp file1 file2 file3 outfile


Brian

On Mon, 2011-07-25 at 17:20 -0700, Nikolaos Hatzopoulos wrote:
> It seems interesting I'll keep a note on this :)
> 
> The question is how you can build a VRT mosaic directly from MODIS hdf
> files, because
> the problem is that you have to mosaic first and after that to
> transform them to the
> EPSG:4326 projection. If you transform them first and mosaic them
> after you might have
> white lines.
> 
> --Nikos
> 
> 2011/7/25 Brian Case <rush@winkey.org>
>         anna, Nikolaos,
>         
>         after much experimentation I found something that seems to
>         work.
>         
>         gdalwarp --config GEOL_AS_GCPS FULL \
>                 -tps -geoloc -t_srs EPSG:4326 \
>                 -te -119.88004906118 13.5092548294379 \
>                 -92.6036641645677 34.7070050511582 \
>         HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB \ MOD02HKM.A2011169.1750.005.NRT.tif
>         
>         note i tried to escape the newlines to make it easy to read
>         but the
>         email may mess that up.
>         
>         there is about 2.7 million gcp's in a normal 5min modis swath
>         file, by
>         default gdal only reads every 10th row and column of gcp's
>         this is not
>         enough to handle the bowtie effect.
>         
>         
>         Brian
>         
>         On Tue, 2011-01-18 at 16:33 -0800, Nikolaos Hatzopoulos wrote:
>         > You are right, I notice that there isn't any difference from
>         the
>         > band_1.tiff and band_1_warp.tiff
>         >
>         > --Nikos Hatzopoulos
>         >
>         > On Mon, Jan 17, 2011 at 8:15 AM, anna auge <annaauge@web.de>
>         wrote:
>         >         Hi all,
>         >
>         >         I am trying to convert modis level 1B data (type
>         SWATH) to
>         >         geotiff following these steps.
>         >
>         >         1) Examining the HDF
>         >         gdalinfo d:\modis\1b
>         >         \MOD021KM.A2011008.0850.005.2011008195744.hdf
>         >         gdalinfo HDF4_EOS:EOS_SWATH:"d:\modis\1b
>         >
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>         >         2) Extracting the 1. band of the subdataset
>         >         MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>         >         gdal_translate -of GTiff -b 1 HDF4_EOS:EOS_SWATH:"d:
>         \modis\1b
>         >
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB d:\modis\1b\band_1.tiff
>         >         4) Warping the image to WGS84
>         >         gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff d:
>         \modis\1b
>         >         \band_1_warp.tiff
>         >
>         >         The example dataset, which i am using, can be
>         downloaded here
>         >
>         ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
>         >
>         >         And now to my problem: I get always an certain shift
>         >
>         (http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/), which is avoided if i am using the "Georeference MODIS" option in ENVI (http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
>         >         I also tried a few workarounds, f.g.
>         >
>         http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but
>         >         nothing worked properly.
>         >         As far as I understand gdal supports Modis L1B
>         SWATH, so what
>         >         I am doing wrong? Any help is appreciated.
>         >
>         >         Regards Anna
>         >
>         >         P.S. I am using FWTools 2.4.7 on Windows
>         >
>         >
>         >
>         >         WEB.DE DSL Doppel-Flat ab 19,99 ?/mtl.! Jetzt mit
>         >         gratis Handy-Flat!
>         >         http://produkte.web.de/go/DSL_Doppel_Flatrate/2
>         >
>         >         _______________________________________________
>         >         gdal-dev mailing list
>         >         gdal-dev@lists.osgeo.org
>         >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >
>         > _______________________________________________
>         > gdal-dev mailing list
>         > gdal-dev@lists.osgeo.org
>         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
>         
> 


From nhatzop at gmail.com  Tue Jul 26 12:38:16 2011
From: nhatzop at gmail.com (Nikolaos Hatzopoulos)
Date: Tue Jul 26 16:26:34 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <1311697067.12257.38.camel@octopi>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
	<1311616968.12257.27.camel@octopi>
	<CALDJGKCbD8-VhzBD1nmUfe+rTaKmENZ8O9NcCC2eFYpdJrxeHw@mail.gmail.com>
	<1311697067.12257.38.camel@octopi>
Message-ID: <CALDJGKCzvbSQX4iYsVdUcD0jv6fiLwABNoekg89KZK4Zm=Xrbg@mail.gmail.com>

cool!

does it works with 150 files?

--Nikos

On Tue, Jul 26, 2011 at 9:17 AM, Brian Case <rush@winkey.org> wrote:

> Nikolaos
>
> I have warped modis with swath2grid and mosaicked it with mapserver, I
> have not seen that issue.
>
> also you don't need to use a vrt to mosaic, this can be done with one
> gdalwarp call.
>
> gdalwarp file1 file2 file3 outfile
>
>
> Brian
>
> On Mon, 2011-07-25 at 17:20 -0700, Nikolaos Hatzopoulos wrote:
> > It seems interesting I'll keep a note on this :)
> >
> > The question is how you can build a VRT mosaic directly from MODIS hdf
> > files, because
> > the problem is that you have to mosaic first and after that to
> > transform them to the
> > EPSG:4326 projection. If you transform them first and mosaic them
> > after you might have
> > white lines.
> >
> > --Nikos
> >
> > 2011/7/25 Brian Case <rush@winkey.org>
> >         anna, Nikolaos,
> >
> >         after much experimentation I found something that seems to
> >         work.
> >
> >         gdalwarp --config GEOL_AS_GCPS FULL \
> >                 -tps -geoloc -t_srs EPSG:4326 \
> >                 -te -119.88004906118 13.5092548294379 \
> >                 -92.6036641645677 34.7070050511582 \
> >
> HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB
> \ MOD02HKM.A2011169.1750.005.NRT.tif
> >
> >         note i tried to escape the newlines to make it easy to read
> >         but the
> >         email may mess that up.
> >
> >         there is about 2.7 million gcp's in a normal 5min modis swath
> >         file, by
> >         default gdal only reads every 10th row and column of gcp's
> >         this is not
> >         enough to handle the bowtie effect.
> >
> >
> >         Brian
> >
> >         On Tue, 2011-01-18 at 16:33 -0800, Nikolaos Hatzopoulos wrote:
> >         > You are right, I notice that there isn't any difference from
> >         the
> >         > band_1.tiff and band_1_warp.tiff
> >         >
> >         > --Nikos Hatzopoulos
> >         >
> >         > On Mon, Jan 17, 2011 at 8:15 AM, anna auge <annaauge@web.de>
> >         wrote:
> >         >         Hi all,
> >         >
> >         >         I am trying to convert modis level 1B data (type
> >         SWATH) to
> >         >         geotiff following these steps.
> >         >
> >         >         1) Examining the HDF
> >         >         gdalinfo d:\modis\1b
> >         >         \MOD021KM.A2011008.0850.005.2011008195744.hdf
> >         >         gdalinfo HDF4_EOS:EOS_SWATH:"d:\modis\1b
> >         >
> >
> \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> >         >         2) Extracting the 1. band of the subdataset
> >         >         MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> >         >         gdal_translate -of GTiff -b 1 HDF4_EOS:EOS_SWATH:"d:
> >         \modis\1b
> >         >
> >
> \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
> d:\modis\1b\band_1.tiff
> >         >         4) Warping the image to WGS84
> >         >         gdalwarp -t_srs EPSG:4326 d:\modis\1b\band_1.tiff d:
> >         \modis\1b
> >         >         \band_1_warp.tiff
> >         >
> >         >         The example dataset, which i am using, can be
> >         downloaded here
> >         >
> >
> ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
> >         >
> >         >         And now to my problem: I get always an certain shift
> >         >
> >         (
> http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/),
> which is avoided if i am using the "Georeference MODIS" option in ENVI (
> http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
> >         >         I also tried a few workarounds, f.g.
> >         >
> >         http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but
> >         >         nothing worked properly.
> >         >         As far as I understand gdal supports Modis L1B
> >         SWATH, so what
> >         >         I am doing wrong? Any help is appreciated.
> >         >
> >         >         Regards Anna
> >         >
> >         >         P.S. I am using FWTools 2.4.7 on Windows
> >         >
> >         >
> >         >
> >         >         WEB.DE DSL Doppel-Flat ab 19,99 ?/mtl.! Jetzt mit
> >         >         gratis Handy-Flat!
> >         >         http://produkte.web.de/go/DSL_Doppel_Flatrate/2
> >         >
> >         >         _______________________________________________
> >         >         gdal-dev mailing list
> >         >         gdal-dev@lists.osgeo.org
> >         >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >         >
> >         > _______________________________________________
> >         > gdal-dev mailing list
> >         > gdal-dev@lists.osgeo.org
> >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110726/f0b683b4/attachment.html
From rush at winkey.org  Tue Jul 26 13:40:17 2011
From: rush at winkey.org (Brian Case)
Date: Tue Jul 26 17:32:05 2011
Subject: [gdal-dev] Modis L1B SWATH: georef problem hdf to geotiff
In-Reply-To: <CALDJGKCzvbSQX4iYsVdUcD0jv6fiLwABNoekg89KZK4Zm=Xrbg@mail.gmail.com>
References: <1726850918.3565346.1295280905986.JavaMail.fmail@mwmweb077>
	<AANLkTinxpi4Xej=WyptVK6fhJ66ot=MQ_rpPu5e=aUO=@mail.gmail.com>
	<1311616968.12257.27.camel@octopi>
	<CALDJGKCbD8-VhzBD1nmUfe+rTaKmENZ8O9NcCC2eFYpdJrxeHw@mail.gmail.com>
	<1311697067.12257.38.camel@octopi>
	<CALDJGKCzvbSQX4iYsVdUcD0jv6fiLwABNoekg89KZK4Zm=Xrbg@mail.gmail.com>
Message-ID: <1311702017.12257.41.camel@octopi>

Nikolaos,

I believe the only limitations will be ones imposed by the shell/os on
the number of arguments that can be passed to an app (2^15?), and the
cpu and memory resources available.

Brian

On Tue, 2011-07-26 at 09:38 -0700, Nikolaos Hatzopoulos wrote:
> cool!
> 
> does it works with 150 files?
> 
> --Nikos
> 
> On Tue, Jul 26, 2011 at 9:17 AM, Brian Case <rush@winkey.org> wrote:
>         Nikolaos
>         
>         I have warped modis with swath2grid and mosaicked it with
>         mapserver, I
>         have not seen that issue.
>         
>         also you don't need to use a vrt to mosaic, this can be done
>         with one
>         gdalwarp call.
>         
>         gdalwarp file1 file2 file3 outfile
>         
>         
>         Brian
>         
>         
>         On Mon, 2011-07-25 at 17:20 -0700, Nikolaos Hatzopoulos wrote:
>         > It seems interesting I'll keep a note on this :)
>         >
>         > The question is how you can build a VRT mosaic directly from
>         MODIS hdf
>         > files, because
>         > the problem is that you have to mosaic first and after that
>         to
>         > transform them to the
>         > EPSG:4326 projection. If you transform them first and mosaic
>         them
>         > after you might have
>         > white lines.
>         >
>         > --Nikos
>         >
>         > 2011/7/25 Brian Case <rush@winkey.org>
>         >         anna, Nikolaos,
>         >
>         >         after much experimentation I found something that
>         seems to
>         >         work.
>         >
>         >         gdalwarp --config GEOL_AS_GCPS FULL \
>         >                 -tps -geoloc -t_srs EPSG:4326 \
>         >                 -te -119.88004906118 13.5092548294379 \
>         >                 -92.6036641645677 34.7070050511582 \
>         >
>         HDF4_EOS:EOS_SWATH:"MOD02HKM.A2011169.1750.005.NRT.hdf":MODIS_SWATH_Type_L1B:EV_500_RefSB \ MOD02HKM.A2011169.1750.005.NRT.tif
>         >
>         >         note i tried to escape the newlines to make it easy
>         to read
>         >         but the
>         >         email may mess that up.
>         >
>         >         there is about 2.7 million gcp's in a normal 5min
>         modis swath
>         >         file, by
>         >         default gdal only reads every 10th row and column of
>         gcp's
>         >         this is not
>         >         enough to handle the bowtie effect.
>         >
>         >
>         >         Brian
>         >
>         >         On Tue, 2011-01-18 at 16:33 -0800, Nikolaos
>         Hatzopoulos wrote:
>         >         > You are right, I notice that there isn't any
>         difference from
>         >         the
>         >         > band_1.tiff and band_1_warp.tiff
>         >         >
>         >         > --Nikos Hatzopoulos
>         >         >
>         >         > On Mon, Jan 17, 2011 at 8:15 AM, anna auge
>         <annaauge@web.de>
>         >         wrote:
>         >         >         Hi all,
>         >         >
>         >         >         I am trying to convert modis level 1B data
>         (type
>         >         SWATH) to
>         >         >         geotiff following these steps.
>         >         >
>         >         >         1) Examining the HDF
>         >         >         gdalinfo d:\modis\1b
>         >         >
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf
>         >         >         gdalinfo HDF4_EOS:EOS_SWATH:"d:\modis\1b
>         >         >
>         >
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>         >         >         2) Extracting the 1. band of the
>         subdataset
>         >         >         MODIS_SWATH_Type_L1B:EV_1KM_RefSB
>         >         >         gdal_translate -of GTiff -b 1
>         HDF4_EOS:EOS_SWATH:"d:
>         >         \modis\1b
>         >         >
>         >
>         \MOD021KM.A2011008.0850.005.2011008195744.hdf":MODIS_SWATH_Type_L1B:EV_1KM_RefSB d:\modis\1b\band_1.tiff
>         >         >         4) Warping the image to WGS84
>         >         >         gdalwarp -t_srs EPSG:4326 d:\modis\1b
>         \band_1.tiff d:
>         >         \modis\1b
>         >         >         \band_1_warp.tiff
>         >         >
>         >         >         The example dataset, which i am using, can
>         be
>         >         downloaded here
>         >         >
>         >
>         ftp://ladsftp.nascom.nasa.gov/allData/5/MOD021KM/2011/008//MOD021KM.A2011008.0850.005.2011008195744.hdf
>         >         >
>         >         >         And now to my problem: I get always an
>         certain shift
>         >         >
>         >
>         (http://www.flickr.com/photos/54033867@N00/5363471425/in/photostream/), which is avoided if i am using the "Georeference MODIS" option in ENVI (http://www.flickr.com/photos/54033867@N00/5364083966/in/photostream/).
>         >         >         I also tried a few workarounds, f.g.
>         >         >
>         >
>         http://thread.gmane.org/gmane.comp.gis.gdal.devel/10482, but
>         >         >         nothing worked properly.
>         >         >         As far as I understand gdal supports Modis
>         L1B
>         >         SWATH, so what
>         >         >         I am doing wrong? Any help is appreciated.
>         >         >
>         >         >         Regards Anna
>         >         >
>         >         >         P.S. I am using FWTools 2.4.7 on Windows
>         >         >
>         >         >
>         >         >
>         >         >         WEB.DE DSL Doppel-Flat ab 19,99 ?/mtl.!
>         Jetzt mit
>         >         >         gratis Handy-Flat!
>         >         >
>         http://produkte.web.de/go/DSL_Doppel_Flatrate/2
>         >         >
>         >         >
>         _______________________________________________
>         >         >         gdal-dev mailing list
>         >         >         gdal-dev@lists.osgeo.org
>         >         >
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >         >
>         >         > _______________________________________________
>         >         > gdal-dev mailing list
>         >         > gdal-dev@lists.osgeo.org
>         >         > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         >
>         >
>         >
>         
>         
>         
> 


From src176 at psu.edu  Tue Jul 26 17:12:36 2011
From: src176 at psu.edu (Stephen Crawford)
Date: Wed Jul 27 01:05:16 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
Message-ID: <4E2F2DC4.9050107@psu.edu>

Hi All,

I have 60 or so asciiGrids of climate data that I would like to tun into 
PNGs, with the climate values classified by color.  I would like to 
script this process using Python.  Is there a way to do this with GDAL?  
Or if not, is there any other open source way to do this?

Thanks,
Steve


From talent_sxl at 126.com  Tue Jul 26 20:55:15 2011
From: talent_sxl at 126.com (=?gbk?B?y87Qoei0?=)
Date: Wed Jul 27 01:42:44 2011
Subject: [gdal-dev] how to build GDAL180 64-bit on VS2008
Message-ID: <d43806f.26b.13169169dd1.Coremail.talent_sxl@126.com>

Dear sir, 
I've been trying to build GDAL180 64-bit on VS2008 but there are always 163 errors and 2052 warnings. I uncomment WIN64=YES, and try all the ways found on internet, such as commenting ODBC, deleting '@XX' in line 47-50 of makefile.vc, setting up VC++ directories for platform 'x64'. However, errors appear just as before. 
A buildlog is attached for your reference. 
Creating temporary file "C:\Users\ADMINI~1\AppData\Local\Temp\BAT00000146001360.bat" with contents
[
@echo off


cd d:\gdal\gdal180\gdal-1.8.0\ && nmake -f makefile.vc MSVC_VER=1400 DEBUG=1 clean && nmake -f makefile.vc MSVC_VER=1400 DEBUG=1


if errorlevel 1 goto VCReportError


goto VCEnd


:VCReportError


echo Project : error PRJ0019: A tool returned an error code from "Performing Makefile project actions"


exit 1


:VCEnd
]
Creating command line "C:\Users\ADMINI~1\AppData\Local\Temp\BAT00000146001360.bat"
LINK : error LNK2001: unresolved external symbol _vbSafeArrayToPtr@16
LINK : error LNK2001: unresolved external symbol _OCTNewCoordinateTransformation@8
LINK : error LNK2001: unresolved external symbol _GDALDitherRGB2PCT@28
LINK : error LNK2001: unresolved external symbol _GDALComputeMedianCutPCT@32
LINK : error LNK2001: unresolved external symbol _GDALReprojectImage@48
LINK : error LNK2001: unresolved external symbol _GDALSimpleImageWarp@36
LINK : error LNK2001: unresolved external symbol _OGRRegisterAll
LINK : error LNK2001: unresolved external symbol _OGR_G_GetPointCount
LINK : error LNK2001: unresolved external symbol _OPTGetProjectionMethods
LINK : error LNK2001: unresolved external symbol _OSRValidate
LINK : error LNK2001: unresolved external symbol _OGRFeatureStylePuller
EHapi.obj : error LNK2019: unresolved external symbol __imp_Vinitialize referenced in function EHopen
EHapi.obj : error LNK2019: unresolved external symbol __imp_SDfindattr referenced in function EHopen
GDapi.obj : error LNK2001: unresolved external symbol __imp_SDfindattr
SWapi.obj : error LNK2001: unresolved external symbol __imp_SDfindattr
EHapi.obj : error LNK2019: unresolved external symbol __imp_Hopen referenced in function EHopen
...
Would you please help me with this problem? 
Thank you!


 Xiaolu Song 
2011-07-26 
 -- 
Xiaolu Song 
Center for Earth Observation and Digital Earth Chinese Academy of Sciences 
No.9 Dengzhuang South Road, Haidian District, Beijing 100094, China 
Tel: +86-010-82178188 +86-18610335605 
Email:talent_sxl@126.com 
 
9
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/e8278b94/attachment.html
From warmerdam at pobox.com  Tue Jul 26 22:26:19 2011
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jul 27 02:46:36 2011
Subject: [gdal-dev] how to build GDAL180 64-bit on VS2008
In-Reply-To: <d43806f.26b.13169169dd1.Coremail.talent_sxl@126.com>
References: <d43806f.26b.13169169dd1.Coremail.talent_sxl@126.com>
Message-ID: <CA+YzLBe+f3+NGXrGm9Tce95TJPRTJUNBTs3SXfcumGGC_sqETg@mail.gmail.com>

2011/7/26 =CB=CE=D0=A1=E8=B4 <talent_sxl@126.com>:
> Dear sir,
> I've been trying to build GDAL180 64-bit on VS2008 but there are always 1=
63
> errors and 2052 warnings. I uncomment WIN64=3DYES, and try all the ways f=
ound
> on internet, such as commenting ODBC, deleting '@XX' in line 47-50 of
> makefile.vc, setting up VC++ directories for platform 'x64'. However, err=
ors
> appear just as before.
> A buildlog is attached for your reference.
> Creating temporary file
> "C:\Users\ADMINI~1\AppData\Local\Temp\BAT00000146001360.bat" with content=
s
> [
> @echo off
> cd d:\gdal\gdal180\gdal-1.8.0\ && nmake -f makefile.vc MSVC_VER=3D1400 DE=
BUG=3D1
> clean && nmake -f makefile.vc MSVC_VER=3D1400 DEBUG=3D1

Hi,

I gather you are trying to use the project file?  I had a number of
problems with
it.  One was that I had to change MSVC_VER to be 1500 or else the
old VB6 stuff would get built in and fail due to missing libraries in
VS2008 express.  If you feel a compelling need to use the project file,
edit it and fix MSVC_VER.

However, I would suggest instead to run from a command window instead.

I'm not sure if this is your only problem, but it is at least one of your
problems.

It looks like you are also trying to build with HDF4 support.  You might wa=
nt
to disable that first to see if you can get a build and then add it in late=
r
if you need it.

Good luck,

> if errorlevel 1 goto VCReportError
> goto VCEnd
> :VCReportError
> echo Project : error PRJ0019: A tool returned an error code from "Perform=
ing
> Makefile project actions"
> exit 1
> :VCEnd
> ]
> Creating command line
> "C:\Users\ADMINI~1\AppData\Local\Temp\BAT00000146001360.bat"
> LINK : error LNK2001: unresolved external symbol _vbSafeArrayToPtr@16
> LINK : error LNK2001: unresolved external symbol
> _OCTNewCoordinateTransformation@8
> LINK : error LNK2001: unresolved external symbol _GDALDitherRGB2PCT@28
> LINK : error LNK2001: unresolved external symbol _GDALComputeMedianCutPCT=
@32
> LINK : error LNK2001: unresolved external symbol _GDALReprojectImage@48
> LINK : error LNK2001: unresolved external symbol _GDALSimpleImageWarp@36
> LINK : error LNK2001: unresolved external symbol _OGRRegisterAll
> LINK : error LNK2001: unresolved external symbol _OGR_G_GetPointCount
> LINK : error LNK2001: unresolved external symbol _OPTGetProjectionMethods
> LINK : error LNK2001: unresolved external symbol _OSRValidate
> LINK : error LNK2001: unresolved external symbol _OGRFeatureStylePuller
> EHapi.obj : error LNK2019: unresolved external symbol __imp_Vinitialize
> referenced in function EHopen
> EHapi.obj : error LNK2019: unresolved external symbol __imp_SDfindattr
> referenced in function EHopen
> GDapi.obj : error LNK2001: unresolved external symbol __imp_SDfindattr
> SWapi.obj : error LNK2001: unresolved external symbol __imp_SDfindattr
> EHapi.obj : error LNK2019: unresolved external symbol __imp_Hopen referen=
ced
> in function EHopen
>
> ...
>
> Would you please help me with this problem?
> Thank you!
>  Xiaolu Song
> 2011-07-26
>  --
> Xiaolu Song
> Center for Earth Observation and Digital Earth Chinese Academy of Science=
s
> No.9 Dengzhuang South Road, Haidian District, Beijing 100094, China
> Tel: +86-010-82178188 +86-18610335605
> Email:talent_sxl@126.com
> =D6=D0=B9=FA=BF=C6=D1=A7=D4=BA=B6=D4=B5=D8=B9=DB=B2=E2=D3=EB=CA=FD=D7=D6=
=B5=D8=C7=F2=BF=C6=D1=A7=D6=D0=D0=C4
> =B1=B1=BE=A9=CA=D0=BA=A3=B5=ED=C7=F8=B5=CB=D7=AF=C4=CF=C2=B79=BA=C5
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



--=20
---------------------------------------+-----------------------------------=
---
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.c=
om
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Software Developer
From chaitanya.ch at gmail.com  Wed Jul 27 01:00:17 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul 27 05:29:13 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
In-Reply-To: <4E2F2DC4.9050107@psu.edu>
References: <4E2F2DC4.9050107@psu.edu>
Message-ID: <CAMKgpObtFHzgYWqmWNN+zQa-Guri9xkdO+KYcerWPhtAo-BL0Q@mail.gmail.com>

Stephen,

The docs for rgb2pct.py script [1] has an example that shows how to convert
to a paletted image using hand made VRT file.
You can use the "-of PNG" option to set the destination format as png and
the -pct option with your VRT file.

On Wed, Jul 27, 2011 at 2:42 AM, Stephen Crawford <src176@psu.edu> wrote:

> Hi All,
>
> I have 60 or so asciiGrids of climate data that I would like to tun into
> PNGs, with the climate values classified by color.  I would like to script
> this process using Python.  Is there a way to do this with GDAL?  Or if not,
> is there any other open source way to do this?
>
> Thanks,
> Steve
>
>
> ______________________________**_________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/7ae12124/attachment.html
From chaitanya.ch at gmail.com  Wed Jul 27 01:01:48 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jul 27 05:30:47 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
In-Reply-To: <CAMKgpObtFHzgYWqmWNN+zQa-Guri9xkdO+KYcerWPhtAo-BL0Q@mail.gmail.com>
References: <4E2F2DC4.9050107@psu.edu>
	<CAMKgpObtFHzgYWqmWNN+zQa-Guri9xkdO+KYcerWPhtAo-BL0Q@mail.gmail.com>
Message-ID: <CAMKgpOanL7PWh0A_sD0kYhUE8sQBGav-H1i58TR8UCnOuwO5bA@mail.gmail.com>

Sorry, here are the links.

[1]: http://www.gdal.org/rgb2pct.html

[2]: http://www.gdal.org/gdal_vrttut.html
[3]: http://www.gdal.org/formats_list.html

On Wed, Jul 27, 2011 at 10:30 AM, Chaitanya kumar CH <chaitanya.ch@gmail.com
> wrote:

> Stephen,
>
> The docs for rgb2pct.py script [1] has an example that shows how to convert
> to a paletted image using hand made VRT file.
> You can use the "-of PNG" option to set the destination format as png and
> the -pct option with your VRT file.
>
>
> On Wed, Jul 27, 2011 at 2:42 AM, Stephen Crawford <src176@psu.edu> wrote:
>
>> Hi All,
>>
>> I have 60 or so asciiGrids of climate data that I would like to tun into
>> PNGs, with the climate values classified by color.  I would like to script
>> this process using Python.  Is there a way to do this with GDAL?  Or if not,
>> is there any other open source way to do this?
>>
>> Thanks,
>> Steve
>>
>>
>> ______________________________**_________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/**mailman/listinfo/gdal-dev<http://lists.osgeo.org/mailman/listinfo/gdal-dev>
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/ef624c6a/attachment-0001.html
From nicholas.g.lawrence at tmr.qld.gov.au  Wed Jul 27 02:19:15 2011
From: nicholas.g.lawrence at tmr.qld.gov.au (nicholas.g.lawrence@tmr.qld.gov.au)
Date: Wed Jul 27 07:08:47 2011
Subject: [gdal-dev] exif header for jpeg file
Message-ID: <OF6ABBE6D3.60826C79-ON4A2578DA.00228031-4A2578DA.0022B903@tmr.qld.gov.au>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/84300eb2/attachment.html
From even.rouault at mines-paris.org  Wed Jul 27 07:51:14 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jul 27 12:43:09 2011
Subject: [gdal-dev] gdalbuilvrt segmentation fault
In-Reply-To: <1311760408.1274.3.camel@insardeb.innova>
References: <EA9C1D0D85204D18B05C3E2879457314@nicolettiws>
	<1311591800.4e2d4d789e66c@webmail.free.fr>
	<DC56F065E0A844DEB8514A9B34B56C94@nicolettiws>
	<1311755551.4e2fcd1f954fd@webmail.free.fr>
	<1311760408.1274.3.camel@insardeb.innova>
Message-ID: <1311767474.4e2ffbb2980b9@webmail.free.fr>

Selon Marco nicoletti <nicoletti@consorzio-innova.it>:

Ok, I've tried with GDAL 1.8.0 and GDAL trunk and it doesn't crash. I haven't
tried with 1.7.0, but it is likely that the bug has been fixed during 1.8
development.

> Dear Even,
>
>
> I sent you two sample dataset whom you can reproduce the error with.
>
> The command line is the following:
>
> $ gdalbuildvrt out.vrt srtm_30m_sample.tif srtm_90m_sample.tif
>
> And it crashes.
>
> Thanks again.
>
> Marco
>
> On Wed, 2011-07-27 at 10:32 +0200, Even Rouault wrote:
> > Selon Marco Nicoletti <nicoletti@consorzio-innova.it>:
> >
> > > Dear Even,
> > >
> > > first of all thanks so much for your reply.
> > > I'm using GDAL 1.7.0 .
> > > You are right about the Data Type; as a matter of fact one DEM is Int16
> and
> > > the other
> > > one is Float32.
> > > The funny thing is that the logging message says that gdalbuildvrt does
> not
> > > support heterogenous
> > > projection instead of saying that the data types are different.
> >
> > Actually, in your example, the WKT strings are not strictly identical if
> you
> > look closely. Versions before 1.8.0 used string comparison which is not
> > appropriate. This has been fixed in GDAL 1.8.0.
> > http://trac.osgeo.org/gdal/ticket/3856
> >
> > I've looked at the changes in gdalbuildvrt between 1.7.0 and the latest
> version,
> > and I don't see any change that could fix the segmentation fault you
> reported
> > originaly. So I'd be interested in how I could replicate this, if you could
> > provide the datasets and the command line that caused the crash.
> >
> > >
> > > I have also experienced that is I change the data type of the first them
> > > using gdal_translate,
> > > then the tool works.
> > >
> > > I attach here the gdalinfo of both DEM files:
> > >
> > > $ gdalbuildvrt ned+srtm.vrt ned/safod+egm96.dem
> srtm/srtm_90m_egm96_grid.tif
> > > 0...10...20...30...40...50...60...70...80...90...100 - done.
> > > Warning 6: gdalbuildvrt does not support heterogenous projection.
> Skipping
> > > srtm/srtm_90m_egm96_grid.tif
> > >
> > > $ gdalinfo ned/safod+egm96.dem
> > > Driver: ENVI/ENVI .hdr Labelled
> > > Files: ned/safod+egm96.dem
> > >        ned/safod+egm96.dem.aux.xml
> > >        ned/safod+egm96.hdr
> > > Size is 10801, 7201
> > > Coordinate System is:
> > > GEOGCS["WGS 84",
> > >     DATUM["WGS_1984",
> > >         SPHEROID["WGS 84",6378137,298.257223563,
> > >             AUTHORITY["EPSG","7030"]],
> > >         TOWGS84[0,0,0,0,0,0,0],
> > >         AUTHORITY["EPSG","6326"]],
> > >     PRIMEM["Greenwich",0,
> > >         AUTHORITY["EPSG","8901"]],
> > >     UNIT["degree",0.0174532925199433,
> > >         AUTHORITY["EPSG","9108"]],
> > >     AUTHORITY["EPSG","4326"]]
> > > Origin = (-122.000138888888998,37.000138888888898)
> > > Pixel Size = (0.000277777777778,-0.000277777777778)
> > > Metadata:
> > >   Band_1=Band 1
> > > Image Structure Metadata:
> > >   INTERLEAVE=BAND
> > > Corner Coordinates:
> > > Upper Left  (-122.0001389,  37.0001389) (122d 0'0.50"W, 37d 0'0.50"N)
> > > Lower Left  (-122.0001389,  34.9998611) (122d 0'0.50"W, 34d59'59.50"N)
> > > Upper Right (-118.9998611,  37.0001389) (118d59'59.50"W, 37d 0'0.50"N)
> > > Lower Right (-118.9998611,  34.9998611) (118d59'59.50"W, 34d59'59.50"N)
> > > Center      (-120.5000000,  36.0000000) (120d30'0.00"W, 36d 0'0.00"N)
> > > Band 1 Block=10801x1 Type=Int16, ColorInterp=Undefined
> > >   NoData Value=-32767
> > >
> > > $ gdalinfo srtm/srtm_90m_egm96_grid.tif
> > > Driver: GTiff/GeoTIFF
> > > Files: srtm/srtm_90m_egm96_grid.tif
> > > Size is 10801, 7201
> > > Coordinate System is:
> > > GEOGCS["WGS 84",
> > >     DATUM["WGS_1984",
> > >         SPHEROID["WGS 84",6378137,298.257223563,
> > >             AUTHORITY["EPSG","7030"]],
> > >         AUTHORITY["EPSG","6326"]],
> > >     PRIMEM["Greenwich",0],
> > >     UNIT["degree",0.0174532925199433],
> > >     AUTHORITY["EPSG","4326"]]
> > > Origin = (-122.000139000000004,37.000138900000003)
> > > Pixel Size = (0.000277777777778,-0.000277777777778)
> > > Metadata:
> > >   AREA_OR_POINT=Area
> > > Image Structure Metadata:
> > >   INTERLEAVE=BAND
> > > Corner Coordinates:
> > > Upper Left  (-122.0001390,  37.0001389) (122d 0'0.50"W, 37d 0'0.50"N)
> > > Lower Left  (-122.0001390,  34.9998611) (122d 0'0.50"W, 34d59'59.50"N)
> > > Upper Right (-118.9998612,  37.0001389) (118d59'59.50"W, 37d 0'0.50"N)
> > > Lower Right (-118.9998612,  34.9998611) (118d59'59.50"W, 34d59'59.50"N)
> > > Center      (-120.5000001,  36.0000000) (120d30'0.00"W, 36d 0'0.00"N)
> > > Band 1 Block=256x256 Type=Float32, ColorInterp=Gray
> > >   NoData Value=-32767
> > >
> > >
> > > ----- Original Message -----
> > > From: "Even Rouault" <even.rouault@mines-paris.org>
> > > To: "Marco Nicoletti" <nicoletti@consorzio-innova.it>
> > > Cc: <gdal-dev@lists.osgeo.org>
> > > Sent: Monday, July 25, 2011 1:03 PM
> > > Subject: Re: [gdal-dev] gdalbuilvrt segmentation fault
> > >
> > >
> > > > Selon Marco Nicoletti <nicoletti@consorzio-innova.it>:
> > > >
> > > >> Dear all,
> > > >>
> > > >> I have got a problem using the GDAL tool gdalbuildvrt.
> > > >>
> > > >> I would like to join two DEMs sampled on the same grid which insist on
> > > >> the
> > > >> same
> > > >> geografical zone.
> > > >> The first DEM has got some NoDataValue holes and I would like to feel
> > > >> them
> > > >> with the values in
> > > >> the second DEM.
> > > >> I ave used also the flag to ignore the projection
> > > >> (-allow_projection_difference).
> > > >>
> > > >> DEMs have the same raster size (xSize="10801" ySize="7201"), the same
> > > >> data
> > > >> type ("Float32")
> > > >> and the same NoData Value (-3.27670000000000E+04).
> > > >>
> > > >> The GDAL tool goes in segmentation fault: any ideas?
> > > >
> > > > I'm not aware of remaining issues that could cause segmentation fault
> in
> > > > the
> > > > current version. Do you use GDAL 1.8.x or an older version ? If older,
> > > > please
> > > > upgrade and test again. If it is GDAL 1.8.0 or later, then I would need
> > > > the
> > > > datasets to reproduce.
> > > >
> > > > You could also run under a debugger or under Valgrind to see where it
> > > > crashes.
> > > >
> > > >>
> > > >> $ gdalbuildvrt -allow_projection_difference  output.vrt
> > > >> ned/safod+egm96.dem
> > > >> srtm/srtm_90m_egm96_grid.tif
> > > >> 0...10...20...30...40...50...60...70...80...90...100 - done.
> > > >> Warning 6: gdalbuildvrt does not support heterogenous band
> > > >> characteristics.
> > > >> Skipping srtm/srtm_90m_egm96_grid.tif
> > > >
> > > > Hum, looking at the code, this message can happen if the datasets have
> a
> > > > different color interpreation or data type. If your both datasets have
> > > > same data
> > > > type, it must be due to the different color interpretation. Can you
> paste
> > > > the
> > > > output of gdalinfo on both datasets ? I'm wondering if that test
> shouldn't
> > > > be
> > > > relaxed : it could certainly be relaxed on color interpretation, which
> is
> > > > just
> > > > an information, and as far as different data type it could be improved
> to
> > > > select
> > > > the most appropriate datatype one or let the user define it...
> > > >
> > > > If you can build from source, you can just remove the following code in
> > > > apps/gdalbuildvrt.cpp :
> > > >
> > > >                if (pasBandProperties[j].colorInterpretation !=
> > > > GDALGetRasterColorInterpretation(hRasterBand) ||
> > > >                    pasBandProperties[j].dataType !=
> > > > GDALGetRasterDataType(hRasterBand))
> > > >                {
> > > >                    CPLError(CE_Warning, CPLE_NotSupported,
> > > >                                "gdalbuildvrt does not support
> heterogenous
> > > > band
> > > > characteristics. Skipping %s",
> > > >                                dsFileName);
> > > >                    return FALSE;
> > > >                }
> > > >
> > > > Best regards,
> > > >
> > > > Even
> > > >
> > > >
> > >
> > >
> >
> >
> >
>
>


From Doug_Newcomb at fws.gov  Wed Jul 27 08:02:36 2011
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Jul 27 13:21:29 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
In-Reply-To: <4E2F2DC4.9050107@psu.edu>
Message-ID: <OFA5D6AFE5.7AA0DE03-ON852578DA.0041CD6E-852578DA.0042220F@fws.gov>

Stephen,
        You can script the import, classification, and display with python 
in GRASS in a couple of ways.  I generally just run python from the GRASS 
command window to echo the  GRASS commands and variables I need, but there 
are other ways of doing it.

Doug

Doug Newcomb 
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------
The opinions I express are my own and are not representative of the 
official policy of the U.S.Fish and Wildlife Service or Dept. of the 
Interior.   Life is too short for undocumented, proprietary data formats.



Stephen Crawford <src176@psu.edu> 
Sent by: gdal-dev-bounces@lists.osgeo.org
07/26/2011 08:50 PM

To
gdal-dev@lists.osgeo.org
cc

Subject
[gdal-dev] create classified PNG from ASCIIGrid






Hi All,

I have 60 or so asciiGrids of climate data that I would like to tun into 
PNGs, with the climate values classified by color.  I would like to 
script this process using Python.  Is there a way to do this with GDAL? 
Or if not, is there any other open source way to do this?

Thanks,
Steve


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/9acbf786/attachment.html
From nicolas.simon at spw.wallonie.be  Wed Jul 27 10:05:40 2011
From: nicolas.simon at spw.wallonie.be (Nicolas Simon)
Date: Wed Jul 27 15:05:17 2011
Subject: [gdal-dev] OGR: OCI driver patch review
Message-ID: <8C7DAE7B21100F4CABDD600FAAD339D005926FA7@DGA-EXC01.mrw.wallonie.int>

Hello,
	Is it possible to get a developper with commit acces to review this thicket and patch provided ?
      http://trac.osgeo.org/gdal/ticket/4161

      Thanks

	Nicolas



-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/65cd3a0f/attachment.html
From mather.stephen at gmail.com  Wed Jul 27 17:16:59 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Wed Jul 27 22:39:38 2011
Subject: [gdal-dev] gdal_translate -scale with PNG
Message-ID: <CAPkJWLXnSTwQT4NRvF6O2ocSb=+n0TvksRTkAQEt7gY+S6tuew@mail.gmail.com>

Hi All,
     I'm using gdal_translate (version 1.6.3 on Ubuntu) with a scale factor
to stretch float values to 16-bit integer values.  It works fine with tif
output, but with PNG it stretches the values to 8-bit:

gdal_translate -of PNG -scale 0 1550 0 65535 N2140615.txt N2140615.png

Is this a known issue and/or has it been fixed with more recent versions?  I
know I had trouble with this with an MS4W release as well.

Thanks,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/18d47e32/attachment.html
From mariusjigmond at hotmail.com  Wed Jul 27 22:16:51 2011
From: mariusjigmond at hotmail.com (Marius Jigmond)
Date: Thu Jul 28 03:57:11 2011
Subject: [gdal-dev] gdal_translate -scale with PNG
In-Reply-To: <CAPkJWLXnSTwQT4NRvF6O2ocSb=+n0TvksRTkAQEt7gY+S6tuew@mail.gmail.com>
References: <CAPkJWLXnSTwQT4NRvF6O2ocSb=+n0TvksRTkAQEt7gY+S6tuew@mail.gmail.com>
Message-ID: <BLU0-SMTP201C307FFAF18C5211C068CB2340@phx.gbl>

On 07/27/2011 04:16 PM, Stephen Mather wrote:
> Hi All,
>      I'm using gdal_translate (version 1.6.3 on Ubuntu) with a scale 
> factor to stretch float values to 16-bit integer values.  It works 
> fine with tif output, but with PNG it stretches the values to 8-bit:
>
> gdal_translate -of PNG -scale 0 1550 0 65535 N2140615.txt N2140615.png

Try gdal_translate -of PNG -ot UInt16 -scale 0 1550 0 65535 N2140615.txt 
N2140615.png

>
> Is this a known issue and/or has it been fixed with more recent 
> versions?  I know I had trouble with this with an MS4W release as well.
>
> Thanks,
> Steve
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-marius
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110727/196a5ffa/attachment.html
From mather.stephen at gmail.com  Thu Jul 28 09:36:41 2011
From: mather.stephen at gmail.com (Stephen Mather)
Date: Thu Jul 28 15:53:02 2011
Subject: [gdal-dev] gdal_translate -scale with PNG
In-Reply-To: <BLU0-SMTP201C307FFAF18C5211C068CB2340@phx.gbl>
References: <CAPkJWLXnSTwQT4NRvF6O2ocSb=+n0TvksRTkAQEt7gY+S6tuew@mail.gmail.com>
	<BLU0-SMTP201C307FFAF18C5211C068CB2340@phx.gbl>
Message-ID: <CAPkJWLVEpXNeND2OugBTpdkcEwNkSx-WPJCeJT-cOcnoKM-Arw@mail.gmail.com>

I thought I'd tried that and it failed, but it looks to be just a problem of
stale statistics.  Thanks Marius.

Steve


On Wed, Jul 27, 2011 at 10:16 PM, Marius Jigmond
<mariusjigmond@hotmail.com>wrote:

>  On 07/27/2011 04:16 PM, Stephen Mather wrote:
>
> Hi All,
>      I'm using gdal_translate (version 1.6.3 on Ubuntu) with a scale factor
> to stretch float values to 16-bit integer values.  It works fine with tif
> output, but with PNG it stretches the values to 8-bit:
>
> gdal_translate -of PNG -scale 0 1550 0 65535 N2140615.txt N2140615.png
>
>
> Try gdal_translate -of PNG -ot UInt16 -scale 0 1550 0 65535 N2140615.txt
> N2140615.png
>
>
> Is this a known issue and/or has it been fixed with more recent versions?
> I know I had trouble with this with an MS4W release as well.
>
> Thanks,
> Steve
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>  -marius
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110728/662ad3ed/attachment.html
From mike.omalley at nextcentury.com  Thu Jul 28 14:33:46 2011
From: mike.omalley at nextcentury.com (Mike O'Malley)
Date: Thu Jul 28 21:06:12 2011
Subject: [gdal-dev] Quick question regarding image translation in Java (I
	think)
Message-ID: <8EDBE3F4D9261F4A90677FB13B9CCEBC022388C5@ws2.hq.nextcentury.com>

Hi,

   Hopefully this is a quick one, I think the answer's so obvious I'm
missing it.  I'm trying to use GDAL to create a TIFF copy of a NITF
file.  I've downloaded and compiled 1.8.1 (under Windows) and used
gdal_translate from the command line to create the copy.  I can view the
new file  from IrfanView and everything looks good.

   When I try to do this programmatically from Java, however, things
break down.  I'm using the Java bindings from 1.7 in case that's an
issue; I've tried a number of things, but haven't recompiled the
bindings yet.  My code is:

 

                  Dataset ds=gdal.Open(datasetFilename,
gdalconstConstants.GA_ReadOnly);

 

                  if (ds == null) {

                        System.out.println("GDALOpen failed - " +
gdal.GetLastErrorNo());

                        System.out.println(gdal.GetLastErrorMsg());

                        gdal.GDALDestroyDriverManager();

                        System.exit(1);

                  }

                  

                  System.out.println("Image has "+ds.getRasterCount()+"
bands");

 

                  Driver driv=gdal.GetDriverByName(saveFormat);

                  driv.CreateCopy(outFilename+"."+saveFormat,ds);

            

  Which looks about as basic as it gets.  The file is created, but it's
slightly shorter than gdal_translate's version of the copy and contains
one color as opposed to the original count of 256 colors.  The histogram
of the new image is completely flat.  Both images are single-band,
though the gdal_translate copy has 8BPP and the new one has 24BPP.  The
dimensions remain unchanged and it's a valid TIFF file, just with bad
pixel data.

   This occurs with most of the NITFs in my set.  The NITFs are viewable
using FWTools and look good; the TIFFs created by gdal_translate match
them.  It's just my Java code that's producing blank images.

 

   Am I missing something obvious?

 

    Thanks,

          Mike

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110728/59413756/attachment.html
From src176 at psu.edu  Thu Jul 28 14:35:32 2011
From: src176 at psu.edu (Stephen Crawford)
Date: Thu Jul 28 21:08:00 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
In-Reply-To: <CAMKgpOanL7PWh0A_sD0kYhUE8sQBGav-H1i58TR8UCnOuwO5bA@mail.gmail.com>
References: <4E2F2DC4.9050107@psu.edu>	<CAMKgpObtFHzgYWqmWNN+zQa-Guri9xkdO+KYcerWPhtAo-BL0Q@mail.gmail.com>
	<CAMKgpOanL7PWh0A_sD0kYhUE8sQBGav-H1i58TR8UCnOuwO5bA@mail.gmail.com>
Message-ID: <4E31ABF4.5050001@psu.edu>

Thanks for the reply.  I had looked at these before, and then looked 
again after your note, but I just don't understand how I map the climate 
variable values to different colors in the palette, along the lines of:

tmax < 30            |  color1
30 < tmax < 50   | color2
tmax > 50            | color3

Thanks,
Steve

On 7/27/2011 1:01 AM, Chaitanya kumar CH wrote:
> Sorry, here are the links.
>
> [1]: http://www.gdal.org/rgb2pct.html
>
> [2]: http://www.gdal.org/gdal_vrttut.html
> [3]: http://www.gdal.org/formats_list.html
>
> On Wed, Jul 27, 2011 at 10:30 AM, Chaitanya kumar CH <chaitanya.ch 
> <http://chaitanya.ch>@gmail.com <http://gmail.com>> wrote:
>
>     Stephen,
>
>     The docs for rgb2pct.py script [1] has an example that shows how
>     to convert to a paletted image using hand made VRT file.
>     You can use the "-of PNG" option to set the destination format as
>     png and the -pct option with your VRT file.
>
>
>     On Wed, Jul 27, 2011 at 2:42 AM, Stephen Crawford <src176@psu.edu
>     <mailto:src176@psu.edu>> wrote:
>
>         Hi All,
>
>         I have 60 or so asciiGrids of climate data that I would like
>         to tun into PNGs, with the climate values classified by color.
>          I would like to script this process using Python.  Is there a
>         way to do this with GDAL?  Or if not, is there any other open
>         source way to do this?
>
>         Thanks,
>         Steve
>
>
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>
>     -- 
>     Best regards,
>     Chaitanya kumar CH.
>
>     +91-9494447584
>     17.2416N 80.1426E
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

-- 
Stephen Crawford
Center for Environmental Informatics
The Pennsylvania State University
src176@psu.edu
814.865.9905

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110728/07eef506/attachment.html
From even.rouault at mines-paris.org  Thu Jul 28 14:44:10 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jul 28 21:17:13 2011
Subject: [gdal-dev] Quick question regarding image translation in Java (I
	think)
In-Reply-To: <8EDBE3F4D9261F4A90677FB13B9CCEBC022388C5@ws2.hq.nextcentury.com>
References: <8EDBE3F4D9261F4A90677FB13B9CCEBC022388C5@ws2.hq.nextcentury.com>
Message-ID: <201107282044.10163.even.rouault@mines-paris.org>

> 
> 
>    Am I missing something obvious?

Not sure if you'll consider it as "obvious", but it is documented there :

http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy(java.lang.String,
%20org.gdal.gdal.Dataset,%20int,%20java.util.Vector,
%20org.gdal.gdal.ProgressCallback)

"""At the end of dataset manipulation, the delete() method *must* be called on 
the returned dataset otherwise data might not be properly flushed to the 
disk."""
From mike.omalley at nextcentury.com  Thu Jul 28 14:46:58 2011
From: mike.omalley at nextcentury.com (Mike O'Malley)
Date: Thu Jul 28 21:20:03 2011
Subject: [gdal-dev] Quick question regarding image translation in Java (I
	think)
In-Reply-To: <201107282044.10163.even.rouault@mines-paris.org>
References: <8EDBE3F4D9261F4A90677FB13B9CCEBC022388C5@ws2.hq.nextcentury.com>
	<201107282044.10163.even.rouault@mines-paris.org>
Message-ID: <8EDBE3F4D9261F4A90677FB13B9CCEBC022388CD@ws2.hq.nextcentury.com>

That was it exactly.  Next time I'll read the fine print a bit more closely.  Thanks Even!

Mike


-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Thursday, July 28, 2011 2:44 PM
To: gdal-dev@lists.osgeo.org
Cc: Mike O'Malley
Subject: Re: [gdal-dev] Quick question regarding image translation in Java (I think)

> 
> 
>    Am I missing something obvious?

Not sure if you'll consider it as "obvious", but it is documented there :

http://gdal.org/java/org/gdal/gdal/Driver.html#CreateCopy(java.lang.String,
%20org.gdal.gdal.Dataset,%20int,%20java.util.Vector,
%20org.gdal.gdal.ProgressCallback)

"""At the end of dataset manipulation, the delete() method *must* be called on 
the returned dataset otherwise data might not be properly flushed to the 
disk."""
From chaitanya.ch at gmail.com  Thu Jul 28 15:01:45 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jul 28 21:35:40 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
In-Reply-To: <4E31ABF4.5050001@psu.edu>
References: <4E2F2DC4.9050107@psu.edu>
	<CAMKgpObtFHzgYWqmWNN+zQa-Guri9xkdO+KYcerWPhtAo-BL0Q@mail.gmail.com>
	<CAMKgpOanL7PWh0A_sD0kYhUE8sQBGav-H1i58TR8UCnOuwO5bA@mail.gmail.com>
	<4E31ABF4.5050001@psu.edu>
Message-ID: <CAMKgpOZqdEo1DqyeLRAKzV9mh+_HCxEosz0yz-O4q2Wtq8HG=Q@mail.gmail.com>

The closest thing you can do without doing any coding is to use the
gdal_contour utility[1] to create a vector file and then use gdal_rasterize
[2] to burn them back to a raster. If you use appropriate options, all your
pixels will be clamped to the discrete levels used in gdal_contour. It's
straight forward to apply a color table to that.

If you want to do this using a script, refer to the gdal API tutorial[3].
You'll have to do the classification while you read and write the pixels
using GDALRasterIO(). You can set the color table too.

Note that there may be some differences along the edges of classified pixels
between these two methods. The lines generated by gdal_contour may go
through the area of a pixel and could change the burn value.

[1]: http://www.gdal.org/gdal_contour.html
[2]: http://www.gdal.org/gdal_rasterize.html
[3]: http://www.gdal.org/gdal_tutorial.html

On Fri, Jul 29, 2011 at 12:05 AM, Stephen Crawford <src176@psu.edu> wrote:

> **
> Thanks for the reply.  I had looked at these before, and then looked again
> after your note, but I just don't understand how I map the climate variable
> values to different colors in the palette, along the lines of:
>
> tmax < 30            |  color1
> 30 < tmax < 50   | color2
> tmax > 50            | color3
>
> Thanks,
> Steve
>
>
> On 7/27/2011 1:01 AM, Chaitanya kumar CH wrote:
>
> Sorry, here are the links.
>
> [1]: http://www.gdal.org/rgb2pct.html
>
> [2]: http://www.gdal.org/gdal_vrttut.html
> [3]: http://www.gdal.org/formats_list.html
>
> On Wed, Jul 27, 2011 at 10:30 AM, Chaitanya kumar CH <chaitanya.ch@
> gmail.com> wrote:
>
>> Stephen,
>>
>> The docs for rgb2pct.py script [1] has an example that shows how to
>> convert to a paletted image using hand made VRT file.
>> You can use the "-of PNG" option to set the destination format as png and
>> the -pct option with your VRT file.
>>
>>
>> On Wed, Jul 27, 2011 at 2:42 AM, Stephen Crawford <src176@psu.edu> wrote:
>>
>>> Hi All,
>>>
>>> I have 60 or so asciiGrids of climate data that I would like to tun into
>>> PNGs, with the climate values classified by color.  I would like to script
>>> this process using Python.  Is there a way to do this with GDAL?  Or if not,
>>> is there any other open source way to do this?
>>>
>>> Thanks,
>>> Steve
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>>  --
>> Best regards,
>> Chaitanya kumar CH.
>>
>> +91-9494447584
>> 17.2416N 80.1426E
>>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E
>
>
> --
> Stephen Crawford
> Center for Environmental Informatics
> The Pennsylvania State Universitysrc176@psu.edu
> 814.865.9905
>
>


-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110729/556e5d5e/attachment.html
From src176 at psu.edu  Thu Jul 28 15:53:51 2011
From: src176 at psu.edu (Stephen Crawford)
Date: Thu Jul 28 22:30:40 2011
Subject: [gdal-dev] create classified PNG from ASCIIGrid
In-Reply-To: <CAMKgpOZqdEo1DqyeLRAKzV9mh+_HCxEosz0yz-O4q2Wtq8HG=Q@mail.gmail.com>
References: <4E2F2DC4.9050107@psu.edu>	<CAMKgpObtFHzgYWqmWNN+zQa-Guri9xkdO+KYcerWPhtAo-BL0Q@mail.gmail.com>	<CAMKgpOanL7PWh0A_sD0kYhUE8sQBGav-H1i58TR8UCnOuwO5bA@mail.gmail.com>	<4E31ABF4.5050001@psu.edu>
	<CAMKgpOZqdEo1DqyeLRAKzV9mh+_HCxEosz0yz-O4q2Wtq8HG=Q@mail.gmail.com>
Message-ID: <4E31BE4F.70405@psu.edu>

OK, looks like [3] for me.  Thanks.

On 7/28/2011 3:01 PM, Chaitanya kumar CH wrote:
> The closest thing you can do without doing any coding is to use the 
> gdal_contour utility[1] to create a vector file and then use 
> gdal_rasterize [2] to burn them back to a raster. If you use 
> appropriate options, all your pixels will be clamped to the discrete 
> levels used in gdal_contour. It's straight forward to apply a color 
> table to that.
>
> If you want to do this using a script, refer to the gdal API 
> tutorial[3]. You'll have to do the classification while you read and 
> write the pixels using GDALRasterIO(). You can set the color table too.
>
> Note that there may be some differences along the edges of classified 
> pixels between these two methods. The lines generated by gdal_contour 
> may go through the area of a pixel and could change the burn value.
>
> [1]: http://www.gdal.org/gdal_contour.html
> [2]: http://www.gdal.org/gdal_rasterize.html
> [3]: http://www.gdal.org/gdal_tutorial.html
>
> On Fri, Jul 29, 2011 at 12:05 AM, Stephen Crawford <src176@psu.edu 
> <mailto:src176@psu.edu>> wrote:
>
>     Thanks for the reply.  I had looked at these before, and then
>     looked again after your note, but I just don't understand how I
>     map the climate variable values to different colors in the
>     palette, along the lines of:
>
>     tmax < 30            |  color1
>     30 < tmax < 50   | color2
>     tmax > 50            | color3
>
>     Thanks,
>     Steve
>
>
>     On 7/27/2011 1:01 AM, Chaitanya kumar CH wrote:
>>     Sorry, here are the links.
>>
>>     [1]: http://www.gdal.org/rgb2pct.html
>>
>>     [2]: http://www.gdal.org/gdal_vrttut.html
>>     [3]: http://www.gdal.org/formats_list.html
>>
>>     On Wed, Jul 27, 2011 at 10:30 AM, Chaitanya kumar CH
>>     <chaitanya.ch <http://chaitanya.ch>@gmail.com <http://gmail.com>>
>>     wrote:
>>
>>         Stephen,
>>
>>         The docs for rgb2pct.py script [1] has an example that shows
>>         how to convert to a paletted image using hand made VRT file.
>>         You can use the "-of PNG" option to set the destination
>>         format as png and the -pct option with your VRT file.
>>
>>
>>         On Wed, Jul 27, 2011 at 2:42 AM, Stephen Crawford
>>         <src176@psu.edu <mailto:src176@psu.edu>> wrote:
>>
>>             Hi All,
>>
>>             I have 60 or so asciiGrids of climate data that I would
>>             like to tun into PNGs, with the climate values classified
>>             by color.  I would like to script this process using
>>             Python.  Is there a way to do this with GDAL?  Or if not,
>>             is there any other open source way to do this?
>>
>>             Thanks,
>>             Steve
>>
>>
>>             _______________________________________________
>>             gdal-dev mailing list
>>             gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>>             http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>>         -- 
>>         Best regards,
>>         Chaitanya kumar CH.
>>
>>         +91-9494447584
>>         17.2416N 80.1426E
>>
>>
>>
>>
>>     -- 
>>     Best regards,
>>     Chaitanya kumar CH.
>>
>>     +91-9494447584
>>     17.2416N 80.1426E
>
>     -- 
>     Stephen Crawford
>     Center for Environmental Informatics
>     The Pennsylvania State University
>     src176@psu.edu  <mailto:src176@psu.edu>
>     814.865.9905
>
>
>
>
> -- 
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E

-- 
Stephen Crawford
Center for Environmental Informatics
The Pennsylvania State University
src176@psu.edu
814.865.9905

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110728/f44077cb/attachment.html
From jk.chen at sdl.usu.edu  Thu Jul 28 17:33:57 2011
From: jk.chen at sdl.usu.edu (JK Chen)
Date: Fri Jul 29 00:17:38 2011
Subject: [gdal-dev] gdal_tranlate 50% downsample doubling my file size
Message-ID: <75E6E48D29E14B4C93DA8ADFCA6D205A11215235@Mercury.usurf.usu.edu>

Hi,

I used gdal-translate command to downsample a nitf  file,  but the size of generated file almost doubles. Is there something that I did wrong? I can't use this new file because bigger size is not acceptable, even though its display looks correct.

Here is the command I used:

C:\Map\RPF\CIB\I2\2\tmp>gdal_translate -of NITF -outsize 50% 50% 00ev2n1a.i22  half
289,827               00EV2N1A.I22
591,383               half

Thanks.

JK

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110728/4bdc24cb/attachment-0001.html
From even.rouault at mines-paris.org  Thu Jul 28 18:05:22 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jul 29 00:49:43 2011
Subject: [gdal-dev] gdal_tranlate 50% downsample doubling my file size
In-Reply-To: <75E6E48D29E14B4C93DA8ADFCA6D205A11215235@Mercury.usurf.usu.edu>
References: <75E6E48D29E14B4C93DA8ADFCA6D205A11215235@Mercury.usurf.usu.edu>
Message-ID: <201107290005.22276.even.rouault@mines-paris.org>

Le jeudi 28 juillet 2011 23:33:57, JK Chen a ?crit :
> Hi,
> 
> I used gdal-translate command to downsample a nitf  file,  but the size of
> generated file almost doubles. Is there something that I did wrong? I
> can't use this new file because bigger size is not acceptable, even though
> its display looks correct.
> 
> Here is the command I used:
> 
> C:\Map\RPF\CIB\I2\2\tmp>gdal_translate -of NITF -outsize 50% 50%
> 00ev2n1a.i22  half 289,827               00EV2N1A.I22
> 591,383               half

It is not surprising. Your .I22 file is likely a CIB NITF, which uses a                                                                                                                                                                                                                                                                           
VQ compression scheme (quite efficient admitedly). But when doing gdal_translate 
-of NITF, you produce an uncompressed file, so it's not surprising that it will 
be larger than the original one. But GDAL cannot write VQ compressed files. So 
you could consider other compressions schemes of the NITF format (JPEG, 
JPEG2000 --> see http://gdal.org/frmt_nitf.html ) or other formats.

> 
> Thanks.
> 
> JK
From jk.chen at sdl.usu.edu  Thu Jul 28 19:21:37 2011
From: jk.chen at sdl.usu.edu (JK Chen)
Date: Fri Jul 29 02:10:04 2011
Subject: [gdal-dev] gdal_tranlate 50% downsample doubling my file size
In-Reply-To: <201107290005.22276.even.rouault@mines-paris.org>
References: <75E6E48D29E14B4C93DA8ADFCA6D205A11215235@Mercury.usurf.usu.edu>
	<201107290005.22276.even.rouault@mines-paris.org>
Message-ID: <75E6E48D29E14B4C93DA8ADFCA6D205A1121526F@Mercury.usurf.usu.edu>

Even,

Thanks for your reply. That all makes senses to me know. Indeed it's VQ. :-)

JK

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Thursday, July 28, 2011 4:05 PM
To: gdal-dev@lists.osgeo.org
Cc: JK Chen
Subject: Re: [gdal-dev] gdal_tranlate 50% downsample doubling my file size

Le jeudi 28 juillet 2011 23:33:57, JK Chen a ?crit :
> Hi,
> 
> I used gdal-translate command to downsample a nitf  file,  but the 
> size of generated file almost doubles. Is there something that I did 
> wrong? I can't use this new file because bigger size is not 
> acceptable, even though its display looks correct.
> 
> Here is the command I used:
> 
> C:\Map\RPF\CIB\I2\2\tmp>gdal_translate -of NITF -outsize 50% 50%
> 00ev2n1a.i22  half 289,827               00EV2N1A.I22
> 591,383               half

It is not surprising. Your .I22 file is likely a CIB NITF, which uses a                                                                                                                                                                                                                                                                           
VQ compression scheme (quite efficient admitedly). But when doing gdal_translate -of NITF, you produce an uncompressed file, so it's not surprising that it will be larger than the original one. But GDAL cannot write VQ compressed files. So you could consider other compressions schemes of the NITF format (JPEG,
JPEG2000 --> see http://gdal.org/frmt_nitf.html ) or other formats.

> 
> Thanks.
> 
> JK
From jmckenna at gatewaygeomatics.com  Fri Jul 29 11:30:22 2011
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Fri Jul 29 19:12:14 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E24BF4B.1080903@gatewaygeomatics.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E1B4F63.8040001@gatewaygeomatics.com>
	<4E24BF4B.1080903@gatewaygeomatics.com>
Message-ID: <4E32D20E.7090009@gatewaygeomatics.com>

An update on this issue:

I did some more testing and it seems that I was assuming that MapServer 
would use the SHAPEPATH value for the CONNECTION; I was wrong (in my 
filegdb testing on Windows I have discovered that this is not the case 
here).  So to use a relative path you must make sure your CONNECTION is 
relative to the mapfile.  I have made a note of this in the docs 
(http://www.mapserver.org/input/vector/filegdb.html).

Tricky! :)

-jeff



On 11-07-18 8:18 PM, Jeff McKenna wrote:
> More testing feedback:
>
> When displaying in MapServer, a full path is required on Windows (only
> Windows, relative paths work on Unix), in the CONNECTION parameter, such
> as:
>
> FAILS: CONNECTION "filegdb/us_states.gdb"
> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
>
> I have documented this at
> http://www.mapserver.org/input/vector/filegdb.html
>
> If others can test this issue: to duplicate, use GDAL-trunk and then try
> to display any FileGDB (created with Arc 10.0) in MapServer, on Windows.
> And let me know if you succeed. Thanks.
>
> -jeff
>
>
>


-- 
Jeff McKenna
MapServer Consulting and Training Services
http://www.gatewaygeomatics.com/


From dmorissette at mapgears.com  Fri Jul 29 17:20:48 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sat Jul 30 01:21:29 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E32D20E.7090009@gatewaygeomatics.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>	<4E1B4F63.8040001@gatewaygeomatics.com>	<4E24BF4B.1080903@gatewaygeomatics.com>
	<4E32D20E.7090009@gatewaygeomatics.com>
Message-ID: <4E332430.2010401@mapgears.com>

A little trivia for the weekend...

After his Windows vs FGDB adventures, Jeff reported an issue with FGDB 
on Linux as well, on the Linux server used for the FOSS4G benchmarking 
exercise and I've had a look.

I noticed something odd: OGROpen() (the method of the C API) is able to 
open the FGDB dataset when run at the command line, but is unable to 
open the same file when run as the same user, but under Apache. (Yes, 
same user)

MapServer is out of the equation, I am able to reproduce the problem 
with the following short program:

$ cat testfgdb.cpp

#include "ogr_api.h"

int main()
{
   OGRDataSourceH hDS = NULL;

   OGRRegisterAll();

   hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);

   printf("Content-type: text/plain\n\n");
   printf("hDS = %x\n", hDS);

   if (hDS)
     OGRReleaseDataSource( hDS );

}


When run as at the command line, I get the following output:

$ ./testfgdb
Content-type: text/plain

hDS = e23a710


... and when run via the web server I get:

http://12.189.158.78:8081/cgi-bin/testfgdb

hDS = 0


However, just to make things more confusing, a shell script calling 
ogrinfo on the same table does work fine via the web server... what does 
ogrinfo do that my little 3-liner program is missing?

See for yourself at the following URL and make your guesses...

http://12.189.158.78:8081/cgi-bin/ttt

***** Executing testfgdb program...

Content-type: text/plain

hDS = 0

***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary 
/tmp/us_states.gdb statesp020

INFO: Open of `/tmp/us_states.gdb'
       using driver `FileGDB' successful.

Layer name: statesp020
Geometry: Multi Polygon
Feature Count: 2895
Extent: (-179.000000, 17.000000) - (179.000000, 71.000000)
Layer SRS WKT:
GEOGCS["GCS_North_American_1983",
     DATUM["North_American_Datum_1983",
         SPHEROID["GRS_1980",6378137.0,298.257222101]],
     PRIMEM["Greenwich",0.0],
     UNIT["Degree",0.017453292519943295]]
FID Column = OBJECTID
Geometry Column = SHAPE
AREA: Real (0.0)
PERIMETER: Real (0.0)
STATESP020: Real (0.0)
STATE: String (0.0)
STATE_FIPS: String (0.0)
OGRFeature(statesp020):1
   AREA (Real) = 267.357
   PERIMETER (Real) = 374.768
   STATESP020 (Real) = 2
   STATE (String) = Alaska
   STATE_FIPS (String) = 02
   MULTIPOLYGON : 1 geometries:
     POLYGON : 70238 points


On 11-07-29 11:30 AM, Jeff McKenna wrote:
> An update on this issue:
>
> I did some more testing and it seems that I was assuming that MapServer
> would use the SHAPEPATH value for the CONNECTION; I was wrong (in my
> filegdb testing on Windows I have discovered that this is not the case
> here). So to use a relative path you must make sure your CONNECTION is
> relative to the mapfile. I have made a note of this in the docs
> (http://www.mapserver.org/input/vector/filegdb.html).
>
> Tricky! :)
>
> -jeff
>
>
>
> On 11-07-18 8:18 PM, Jeff McKenna wrote:
>> More testing feedback:
>>
>> When displaying in MapServer, a full path is required on Windows (only
>> Windows, relative paths work on Unix), in the CONNECTION parameter, such
>> as:
>>
>> FAILS: CONNECTION "filegdb/us_states.gdb"
>> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
>>
>> I have documented this at
>> http://www.mapserver.org/input/vector/filegdb.html
>>
>> If others can test this issue: to duplicate, use GDAL-trunk and then try
>> to display any FileGDB (created with Arc 10.0) in MapServer, on Windows.
>> And let me know if you succeed. Thanks.
>>
>> -jeff
>>
>>
>>
>
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From dmorissette at mapgears.com  Fri Jul 29 17:21:39 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sat Jul 30 01:22:21 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E332430.2010401@mapgears.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>	<4E1B4F63.8040001@gatewaygeomatics.com>	<4E24BF4B.1080903@gatewaygeomatics.com>
	<4E32D20E.7090009@gatewaygeomatics.com>
	<4E332430.2010401@mapgears.com>
Message-ID: <4E332463.2030606@mapgears.com>

Oh, BTW, before someone tries to claim the prize by blaming SELinux... 
it's disabled, we already checked that...


On 11-07-29 05:20 PM, Daniel Morissette wrote:
> A little trivia for the weekend...
>
> After his Windows vs FGDB adventures, Jeff reported an issue with FGDB
> on Linux as well, on the Linux server used for the FOSS4G benchmarking
> exercise and I've had a look.
>
> I noticed something odd: OGROpen() (the method of the C API) is able to
> open the FGDB dataset when run at the command line, but is unable to
> open the same file when run as the same user, but under Apache. (Yes,
> same user)
>
> MapServer is out of the equation, I am able to reproduce the problem
> with the following short program:
>
> $ cat testfgdb.cpp
>
> #include "ogr_api.h"
>
> int main()
> {
> OGRDataSourceH hDS = NULL;
>
> OGRRegisterAll();
>
> hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);
>
> printf("Content-type: text/plain\n\n");
> printf("hDS = %x\n", hDS);
>
> if (hDS)
> OGRReleaseDataSource( hDS );
>
> }
>
>
> When run as at the command line, I get the following output:
>
> $ ./testfgdb
> Content-type: text/plain
>
> hDS = e23a710
>
>
> ... and when run via the web server I get:
>
> http://12.189.158.78:8081/cgi-bin/testfgdb
>
> hDS = 0
>
>
> However, just to make things more confusing, a shell script calling
> ogrinfo on the same table does work fine via the web server... what does
> ogrinfo do that my little 3-liner program is missing?
>
> See for yourself at the following URL and make your guesses...
>
> http://12.189.158.78:8081/cgi-bin/ttt
>
> ***** Executing testfgdb program...
>
> Content-type: text/plain
>
> hDS = 0
>
> ***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary
> /tmp/us_states.gdb statesp020
>
> INFO: Open of `/tmp/us_states.gdb'
> using driver `FileGDB' successful.
>
> Layer name: statesp020
> Geometry: Multi Polygon
> Feature Count: 2895
> Extent: (-179.000000, 17.000000) - (179.000000, 71.000000)
> Layer SRS WKT:
> GEOGCS["GCS_North_American_1983",
> DATUM["North_American_Datum_1983",
> SPHEROID["GRS_1980",6378137.0,298.257222101]],
> PRIMEM["Greenwich",0.0],
> UNIT["Degree",0.017453292519943295]]
> FID Column = OBJECTID
> Geometry Column = SHAPE
> AREA: Real (0.0)
> PERIMETER: Real (0.0)
> STATESP020: Real (0.0)
> STATE: String (0.0)
> STATE_FIPS: String (0.0)
> OGRFeature(statesp020):1
> AREA (Real) = 267.357
> PERIMETER (Real) = 374.768
> STATESP020 (Real) = 2
> STATE (String) = Alaska
> STATE_FIPS (String) = 02
> MULTIPOLYGON : 1 geometries:
> POLYGON : 70238 points
>
>
> On 11-07-29 11:30 AM, Jeff McKenna wrote:
>> An update on this issue:
>>
>> I did some more testing and it seems that I was assuming that MapServer
>> would use the SHAPEPATH value for the CONNECTION; I was wrong (in my
>> filegdb testing on Windows I have discovered that this is not the case
>> here). So to use a relative path you must make sure your CONNECTION is
>> relative to the mapfile. I have made a note of this in the docs
>> (http://www.mapserver.org/input/vector/filegdb.html).
>>
>> Tricky! :)
>>
>> -jeff
>>
>>
>>
>> On 11-07-18 8:18 PM, Jeff McKenna wrote:
>>> More testing feedback:
>>>
>>> When displaying in MapServer, a full path is required on Windows (only
>>> Windows, relative paths work on Unix), in the CONNECTION parameter, such
>>> as:
>>>
>>> FAILS: CONNECTION "filegdb/us_states.gdb"
>>> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
>>>
>>> I have documented this at
>>> http://www.mapserver.org/input/vector/filegdb.html
>>>
>>> If others can test this issue: to duplicate, use GDAL-trunk and then try
>>> to display any FileGDB (created with Arc 10.0) in MapServer, on Windows.
>>> And let me know if you succeed. Thanks.
>>>
>>> -jeff
>>>
>>>
>>>
>>
>>
>
>


-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From even.rouault at mines-paris.org  Fri Jul 29 17:59:00 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 30 02:01:45 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <4E332430.2010401@mapgears.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E32D20E.7090009@gatewaygeomatics.com>
	<4E332430.2010401@mapgears.com>
Message-ID: <201107292359.00656.even.rouault@mines-paris.org>

Le vendredi 29 juillet 2011 23:20:48, Daniel Morissette a ?crit :

For the record, I've tested your little testfgdb and run it under my favorite 
http server : mongoose.

And... it works well...


> A little trivia for the weekend...
> 
> After his Windows vs FGDB adventures, Jeff reported an issue with FGDB
> on Linux as well, on the Linux server used for the FOSS4G benchmarking
> exercise and I've had a look.
> 
> I noticed something odd: OGROpen() (the method of the C API) is able to
> open the FGDB dataset when run at the command line, but is unable to
> open the same file when run as the same user, but under Apache. (Yes,
> same user)
> 
> MapServer is out of the equation, I am able to reproduce the problem
> with the following short program:
> 
> $ cat testfgdb.cpp
> 
> #include "ogr_api.h"
> 
> int main()
> {
>    OGRDataSourceH hDS = NULL;
> 
>    OGRRegisterAll();
> 
>    hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);
> 
>    printf("Content-type: text/plain\n\n");
>    printf("hDS = %x\n", hDS);
> 
>    if (hDS)
>      OGRReleaseDataSource( hDS );
> 
> }
> 
> 
> When run as at the command line, I get the following output:
> 
> $ ./testfgdb
> Content-type: text/plain
> 
> hDS = e23a710
> 
> 
> ... and when run via the web server I get:
> 
> http://12.189.158.78:8081/cgi-bin/testfgdb
> 
> hDS = 0
> 
> 
> However, just to make things more confusing, a shell script calling
> ogrinfo on the same table does work fine via the web server... what does
> ogrinfo do that my little 3-liner program is missing?
> 
> See for yourself at the following URL and make your guesses...
> 
> http://12.189.158.78:8081/cgi-bin/ttt
> 
> ***** Executing testfgdb program...
> 
> Content-type: text/plain
> 
> hDS = 0
> 
> ***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary
> /tmp/us_states.gdb statesp020
> 
> INFO: Open of `/tmp/us_states.gdb'
>        using driver `FileGDB' successful.
> 
> Layer name: statesp020
> Geometry: Multi Polygon
> Feature Count: 2895
> Extent: (-179.000000, 17.000000) - (179.000000, 71.000000)
> Layer SRS WKT:
> GEOGCS["GCS_North_American_1983",
>      DATUM["North_American_Datum_1983",
>          SPHEROID["GRS_1980",6378137.0,298.257222101]],
>      PRIMEM["Greenwich",0.0],
>      UNIT["Degree",0.017453292519943295]]
> FID Column = OBJECTID
> Geometry Column = SHAPE
> AREA: Real (0.0)
> PERIMETER: Real (0.0)
> STATESP020: Real (0.0)
> STATE: String (0.0)
> STATE_FIPS: String (0.0)
> OGRFeature(statesp020):1
>    AREA (Real) = 267.357
>    PERIMETER (Real) = 374.768
>    STATESP020 (Real) = 2
>    STATE (String) = Alaska
>    STATE_FIPS (String) = 02
>    MULTIPOLYGON : 1 geometries:
>      POLYGON : 70238 points
> 
> On 11-07-29 11:30 AM, Jeff McKenna wrote:
> > An update on this issue:
> > 
> > I did some more testing and it seems that I was assuming that MapServer
> > would use the SHAPEPATH value for the CONNECTION; I was wrong (in my
> > filegdb testing on Windows I have discovered that this is not the case
> > here). So to use a relative path you must make sure your CONNECTION is
> > relative to the mapfile. I have made a note of this in the docs
> > (http://www.mapserver.org/input/vector/filegdb.html).
> > 
> > Tricky! :)
> > 
> > -jeff
> > 
> > On 11-07-18 8:18 PM, Jeff McKenna wrote:
> >> More testing feedback:
> >> 
> >> When displaying in MapServer, a full path is required on Windows (only
> >> Windows, relative paths work on Unix), in the CONNECTION parameter, such
> >> as:
> >> 
> >> FAILS: CONNECTION "filegdb/us_states.gdb"
> >> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
> >> 
> >> I have documented this at
> >> http://www.mapserver.org/input/vector/filegdb.html
> >> 
> >> If others can test this issue: to duplicate, use GDAL-trunk and then try
> >> to display any FileGDB (created with Arc 10.0) in MapServer, on Windows.
> >> And let me know if you succeed. Thanks.
> >> 
> >> -jeff
From ian.walberg at airborne.aero  Fri Jul 29 18:48:37 2011
From: ian.walberg at airborne.aero (Ian Walberg)
Date: Sat Jul 30 03:04:59 2011
Subject: [gdal-dev] Build on Redhat 7.x
In-Reply-To: <4E332463.2030606@mapgears.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>	<4E1B4F63.8040001@gatewaygeomatics.com>	<4E24BF4B.1080903@gatewaygeomatics.com><4E32D20E.7090009@gatewaygeomatics.com><4E332430.2010401@mapgears.com>
	<4E332463.2030606@mapgears.com>
Message-ID: <D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>

Folks,

We need to be able to guild GDAL on Redhat 7.x as some of the systems we
deploy to still use it (don't ask)

Currently we are using 1.4.1 which was the newest version that we could
get to build some time ago.

However we now need to add spatialite support so need to build a later
version.

Has anyone out there needed to do this?

Thanks

Ian
From dmorissette at mapgears.com  Sat Jul 30 08:53:08 2011
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Sat Jul 30 17:45:26 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <201107292359.00656.even.rouault@mines-paris.org>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>	<4E32D20E.7090009@gatewaygeomatics.com>	<4E332430.2010401@mapgears.com>
	<201107292359.00656.even.rouault@mines-paris.org>
Message-ID: <4E33FEB4.1070509@mapgears.com>

On 11-07-29 05:59 PM, Even Rouault wrote:
> Le vendredi 29 juillet 2011 23:20:48, Daniel Morissette a ?crit :
>
> For the record, I've tested your little testfgdb and run it under my favorite
> http server : mongoose.
>
> And... it works well...
>

Actually, I've been told by Mike/Jeff that it worked under Apache on a 
different box as well... so it's really this specific Apache instance 
that produces the issue.

-- 
Daniel Morissette
http://www.mapgears.com/
Provider of Professional MapServer Support since 2000

From jzl5325 at psu.edu  Sat Jul 30 11:37:48 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Jul 30 20:39:15 2011
Subject: [gdal-dev] JP2k, ReadError, Python
Message-ID: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>

Morning all,

I have a rather large JP2 file (created using the Kakadu driver I believe)
that I am trying to process with a python script.  I am able to open the
dataset and grab the first band.

To calculate band statistics I use the following code which returns 1000
lines of error before exiting

def get_band_stats(band):
    NDV = band.GetNoDataValue()
    bandMin = band.GetMinimum()
    bandMax = band.GetMaximum()
    if bandMin is None or bandMax is None:
        #Approx has to be set to false to ensure that an accurate Min/Max
are calculated...
        (bandMin, bandMax) = band.ComputeRasterMinMax(False)
    return NDV, bandMin, bandMax

....
ERROR 1: IReadBlock failed at X offset 20, Y offset 25
ERROR 1: IReadBlock failed at X offset 21, Y offset 25
....

This cuts off after 1000 lines.

Commenting out the if statement, thereby using the "fast" method for getting
the min/max returns the following error:

error: cannot decode code stream
ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

Finally, using gdalinfo I see that the image is being opened with the
ECWJP2000 driver.  I am also able to calculate statistics without a problem
and the returned values are within the expected range.  I am also able to
use gdal_translate to convert these to .tif prior to processing, but I would
rather avoid this method.  Do I need to alter my code to work with JP2 as
they are compressed?

Can I implicitly define the driver to be used with JP2 within my python code
without performing the unload all / load what I want method?

Many thanks,
Jay
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110730/496ebddd/attachment.html
From ragi at burhum.com  Sat Jul 30 11:49:15 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Sat Jul 30 20:48:08 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <20110730160012.32C7AE01F1F@lists.osgeo.org>
References: <20110730160012.32C7AE01F1F@lists.osgeo.org>
Message-ID: <FB7E53D0-B749-4125-A4F4-D0DDF82BACDB@burhum.com>

Wild guess, you are using Apache Multithreaded. If you try on Apache prefork, and it works, it is a threading issue with the FileGDB API. The script version of your test would work because it spawns a brand new process. Just guessing...


> Date: Fri, 29 Jul 2011 23:59:00 +0200
> From: Even Rouault <even.rouault@mines-paris.org>
> Subject: Re: [gdal-dev] FileGDB OGR driver test
> To: gdal-dev@lists.osgeo.org
> Cc: Daniel Morissette <dmorissette@mapgears.com>
> Message-ID: <201107292359.00656.even.rouault@mines-paris.org>
> Content-Type: Text/Plain;  charset="iso-8859-1"
> 
> Le vendredi 29 juillet 2011 23:20:48, Daniel Morissette a ?crit :
> 
> For the record, I've tested your little testfgdb and run it under my favorite 
> http server : mongoose.
> 
> And... it works well...
> 
> 
>> A little trivia for the weekend...
>> 
>> After his Windows vs FGDB adventures, Jeff reported an issue with FGDB
>> on Linux as well, on the Linux server used for the FOSS4G benchmarking
>> exercise and I've had a look.
>> 
>> I noticed something odd: OGROpen() (the method of the C API) is able to
>> open the FGDB dataset when run at the command line, but is unable to
>> open the same file when run as the same user, but under Apache. (Yes,
>> same user)
>> 
>> MapServer is out of the equation, I am able to reproduce the problem
>> with the following short program
>> $ cat testfgdb.cpp
>> 
>> #include "ogr_api.h"
>> 
>> int main()
>> {
>>   OGRDataSourceH hDS = NULL;
>> 
>>   OGRRegisterAll();
>> 
>>   hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);
>> 
>>   printf("Content-type: text/plain\n\n");
>>   printf("hDS = %x\n", hDS);
>> 
>>   if (hDS)
>>     OGRReleaseDataSource( hDS );
>> 
>> }
>> 
>> 
>> When run as at the command line, I get the following output:
>> 
>> $ ./testfgdb
>> Content-type: text/plain
>> 
>> hDS = e23a710
>> 
>> 
>> ... and when run via the web server I get:
>> 
>> http://12.189.158.78:8081/cgi-bin/testfgdb
>> 
>> hDS = 0
>> 
>> 
>> However, just to make things more confusing, a shell script calling
>> ogrinfo on the same table does work fine via the web server... what does
>> ogrinfo do that my little 3-liner program is missing?
>> 
>> See for yourself at the following URL and make your guesses...
>> 
>> http://12.189.158.78:8081/cgi-bin/ttt
>> 
>> ***** Executing testfgdb program...
>> 
>> Content-type: text/plain
>> 
>> hDS = 0
>> 
>> ***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary
>> /tmp/us_states.gdb statesp020
>> 
>> INFO: Open of `/tmp/us_states.gdb'
>>       using driver `FileGDB' successful.
>> 
>> Layer name: statesp020
>> Geometry: Multi Polygon
>> Feature Count: 2895
>> Extent: (-179.000000, 17.000000) - (179.000000, 71.000000)
>> Layer SRS WKT:
>> GEOGCS["GCS_North_American_1983",
>>     DATUM["North_American_Datum_1983",
>>         SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>     PRIMEM["Greenwich",0.0],
>>     UNIT["Degree",0.017453292519943295]]
>> FID Column = OBJECTID
>> Geometry Column = SHAPE
>> AREA: Real (0.0)
>> PERIMETER: Real (0.0)
>> STATESP020: Real (0.0)
>> STATE: String (0.0)
>> STATE_FIPS: String (0.0)
>> OGRFeature(statesp020):1
>>   AREA (Real) = 267.357
>>   PERIMETER (Real) = 374.768
>>   STATESP020 (Real) = 2
>>   STATE (String) = Alaska
>>   STATE_FIPS (String) = 02
>>   MULTIPOLYGON : 1 geometries:
>>     POLYGON : 70238 points
>> 
>> On 11-07-29 11:30 AM, Jeff McKenna wrote:
>>> An update on this issue:
>>> 
>>> I did some more testing and it seems that I was assuming that MapServer
>>> would use the SHAPEPATH value for the CONNECTION; I was wrong (in my
>>> filegdb testing on Windows I have discovered that this is not the case
>>> here). So to use a relative path you must make sure your CONNECTION is
>>> relative to the mapfile. I have made a note of this in the docs
>>> (http://www.mapserver.org/input/vector/filegdb.html).
>>> 
>>> Tricky! :)
>>> 
>>> -jeff
>>> 
>>> On 11-07-18 8:18 PM, Jeff McKenna wrote:
>>>> More testing feedback:
>>>> 
>>>> When displaying in MapServer, a full path is required on Windows (only
>>>> Windows, relative paths work on Unix), in the CONNECTION parameter, such
>>>> as:
>>>> 
>>>> FAILS: CONNECTION "filegdb/us_states.gdb"
>>>> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
>>>> 
>>>> I have documented this at
>>>> http://www.mapserver.org/input/vector/filegdb.html
>>>> 
>>>> If others can test this issue: to duplicate, use GDAL-trunk and then try
>>>> to display any FileGDB (created with Arc 10.0) in MapServer, on Windows.
>>>> And let me know if you succeed. Thanks.
>>>> 
>>>> -jeff
> 
> 
> ------------------------------
> 
> Message: 5
> Date: Fri, 29 Jul 2011 18:48:37 -0400
> From: "Ian Walberg" <ian.walberg@airborne.aero>
> Subject: [gdal-dev] Build on Redhat 7.x
> To: <gdal-dev@lists.osgeo.org>
> Message-ID:
>    <D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
> Content-Type: text/plain;    charset="us-ascii"
> 
> Folks,
> 
> We need to be able to guild GDAL on Redhat 7.x as some of the systems we
> deploy to still use it (don't ask)
> 
> Currently we are using 1.4.1 which was the newest version that we could
> get to build some time ago.
> 
> However we now need to add spatialite support so need to build a later
> version.
> 
> Has anyone out there needed to do this?
> 
> Thanks
> 
> Ian
> 
> 
> ------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> End of gdal-dev Digest, Vol 86, Issue 88
> ****************************************
From even.rouault at mines-paris.org  Sat Jul 30 11:51:08 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 30 20:53:17 2011
Subject: [gdal-dev] Build on Redhat 7.x
In-Reply-To: <D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E332463.2030606@mapgears.com>
	<D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
Message-ID: <201107301751.08956.even.rouault@mines-paris.org>

Le samedi 30 juillet 2011 00:48:37, Ian Walberg a ?crit :
> Folks,
> 
> We need to be able to guild GDAL on Redhat 7.x as some of the systems we
> deploy to still use it (don't ask)
> 
> Currently we are using 1.4.1 which was the newest version that we could
> get to build some time ago.
> 
> However we now need to add spatialite support so need to build a later
> version.
> 
> Has anyone out there needed to do this?

I have a Virtual Machine with a RedHat 7.3 system on it. I managed to build 
GDAL 1.8.1 with the following fixes :
* apply patch of http://trac.osgeo.org/gdal/changeset/22835
* edit gcore/rasterio.cpp and remove the 3 following lines (so that the 
compiler is detected as broken compiler) :
#define NOT_BROKEN_COMPILER \
        (!(defined(_MSC_VER) && _MSC_VER <= 1200) && !defined(__BORLANDC__) && \
        !defined(__SUNPRO_CC))

Then ./configure --without-libtool --without-curl

(--without-curl because if you have the system curl installed, it is too 
ancient and not supported by GDAL)

The build goes well.

Next, I tried to compile spatialite but before that you need to compile proj4 
and GEOS. However it is impossible to compile GEOS, which heavily uses C++ 
features, with such an ancient and broken C++ compiler as gcc 2.96.

So for fun, I gave a try to build a more recent GCC !

Download
ftp://ftp.irisa.fr/pub/mirrors/gcc.gnu.org/gcc/releases/gcc-3.4.6/gcc-3.4.6.tar.bz2
and
ftp://ftp.irisa.fr/pub/mirrors/gcc.gnu.org/gcc/releases/gcc-3.4.6/gcc-
g++-3.4.6.tar.bz2

(I didn't dare to try compiling a GCC 4.X)

cd $HOME

tar xjvf gcc-3.4.6.tar.bz2
tar xjvf gcc-g++-3.4.6.tar.bz2

mkdir $HOME/install-gcc-346
cd gcc-3.4.6
./configure --prefix=$HOME/install-gcc-346 --enable-languages=c,c++
make
make install

export PATH=$HOME/install-gcc-346/bin

g++ --version  : you have a working GCC 3.4.6 compiler now !

You'll also need to define
export LD_LIBRARY_PATH=$HOME/install-gcc-346/lib
for the new libstdc++ (I didn't dare to install in system directories, but I 
think you could just copy the libstdc++.so.6 and libgcc_s.so.1 to /usr/lib to 
avoid to define this LD_LIBRARY_PATH )

Then I've managed to compile proj 4.7.0 and geos 3.3.0, and then 
libspatialite-amalgamation-2.4.0 without any problem

cd $HOME
wget http://download.osgeo.org/proj/proj-4.7.0.tar.gz
tar xvzf proj-4.7.0.tar.gz
cd proj-4.7.0
./configure --prefix=/usr
make
make install

cd $HOME
wget http://download.osgeo.org/geos/geos-3.3.0.tar.bz2
tar xjvf geos-3.3.0.tar.bz2
cd geos-3.3.0
./configure --prefix=/usr
make
make install

cd $HOME
wget http://www.gaia-gis.it/spatialite-2.4.0-4/libspatialite-
amalgamation-2.4.0.tar.gz
cd libspatialite-amalgamation
./configure --prefix=/usr
make
make install


And then I rebuilt GDAL with spatialite support :
cd gdal-1.8.1
make clean
./configure --without-libtool --without-curl --with-spatialite=/usr
make
export LD_LIBRARY_PATH=$PWD:$LD_LIBRARY_PATH
export PATH=$PWD/apps:$PATH
export GDAL_DATA=$PWD/data

The autotests for the OGR SQLite/Spatialite driver pass.

PS: With GCC 3.4.6, the patch quoted at the beginning and change in 
gcore/rasterio.cpp are not needed in fact.

Best regards,

Even

> 
> Thanks
> 
> Ian
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sat Jul 30 12:12:02 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 30 21:15:16 2011
Subject: [gdal-dev] JP2k, ReadError, Python
In-Reply-To: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
References: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
Message-ID: <201107301812.03006.even.rouault@mines-paris.org>

Le samedi 30 juillet 2011 17:37:48, Jay L. a ?crit :
> Morning all,
> 
> I have a rather large JP2 file (created using the Kakadu driver I believe)
> that I am trying to process with a python script.  I am able to open the
> dataset and grab the first band.
> 
> To calculate band statistics I use the following code which returns 1000
> lines of error before exiting
> 
> def get_band_stats(band):
>     NDV = band.GetNoDataValue()
>     bandMin = band.GetMinimum()
>     bandMax = band.GetMaximum()
>     if bandMin is None or bandMax is None:
>         #Approx has to be set to false to ensure that an accurate Min/Max
> are calculated...
>         (bandMin, bandMax) = band.ComputeRasterMinMax(False)
>     return NDV, bandMin, bandMax
> 
> ....
> ERROR 1: IReadBlock failed at X offset 20, Y offset 25
> ERROR 1: IReadBlock failed at X offset 21, Y offset 25
> ....
> 
> This cuts off after 1000 lines.
> 
> Commenting out the if statement, thereby using the "fast" method for
> getting the min/max returns the following error:
> 
> error: cannot decode code stream
> ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0

Not sure to follow you. What is the  "fast" method for getting the min/max ? 
band.ComputeRasterMinMax(False) ?

Did you try running with CPL_DEBUG=ON defined as an environment variable to 
check which driver is used and if there are other interesting warnings ?

> 
> Finally, using gdalinfo I see that the image is being opened with the
> ECWJP2000 driver.  I am also able to calculate statistics without a problem
> and the returned values are within the expected range.

Hum, strange, ComputeRasterMinMax() and ComputeRasterStatistics() are very 
silmilar : they use the same way of fetching the data, so I'd assume that if 
one works, the other one would too.

> I am also able to
> use gdal_translate to convert these to .tif prior to processing, but I
> would rather avoid this method.  Do I need to alter my code to work with
> JP2 as they are compressed?

Theroretically no. If it doesn't work, it's a defect of the driver. Could you 
share your JP2 file ?

> 
> Can I implicitly define the driver to be used with JP2 within my python
> code without performing the unload all / load what I want method?

You can unload a driver this way : 
gdal.GetDriverByName("short_name_of_driver").Deregister()

> 
> Many thanks,
> Jay
From jzl5325 at psu.edu  Sat Jul 30 12:46:42 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Jul 30 21:51:58 2011
Subject: [gdal-dev] JP2k, ReadError, Python
In-Reply-To: <201107301812.03006.even.rouault@mines-paris.org>
References: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
	<201107301812.03006.even.rouault@mines-paris.org>
Message-ID: <CA+bfmPs+Jpu4bpb0az6abdEos18JsOV9OYQaJPOpFGr_k4iBBg@mail.gmail.com>

Evan,

Thanks for the info.  Setting debug to on has allowed me to trace the
problem to this line:

scanBlock = band.ReadAsArray(h,i,numberColumns,
numberRows).astype(numpy.float)

showing this error / information:

C:\Py_Scripts\RunningSD>python ISCopy.py P01_001468_1534_XI_26S034W.jp2 -vus
5
JPEG2000: IHDR box found. Dump: width=9973, height=34577, numcmpts=1, bpp=8
JPEG2000: Component 0: bpp=8, signedness=0
GDALJP2Metadata: Got projection from GeoJP2 (geotiff) box:
PROJCS["Mars_Equidistant_Cylindrical_Sphere",GEOGCS["GCS_Mars_Sphere",DATUM["Mars_Sphere",SPHEROID["Mars_Spher
METER["standard_parallel_1",0],PARAMETER["false_easting",0],PARAMETER["false_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]]
GDAL: GDALOpen(P01_001468_1534_XI_26S034W.jp2, this=034E8230) succeeds as
JPEG2000.
GDAL: QuietDelete(output.tif) invoking Delete()
GDAL: GDALOpen(output.tif, this=01D5F260) succeeds as GTiff.
GDAL: GDALDefaultOverviews::OverviewScan()
GDAL: GDALClose(output.tif, this=01D5F260)
GDAL: GDALDriver::Create(GTiff,output.tif,9973,34577,1,Byte,00000000)
Processing band: 1
error: cannot decode code stream
JPEG2000: Unable to decode image. Format: jp2, 4
Traceback (most recent call last):
  File "ISCopy.py", line 357, in <module>
    main()
  File "ISCopy.py", line 343, in main
    perform_stretch(dataset,outdataset,**options.__dict__)
  File "ISCopy.py", line 235, in perform_stretch
    input_array = normalize(input_array, bandMin, bandMax)
  File "ISCopy.py", line 52, in normalize
    inputBand -= bandMin
  File "C:\Python26\ArcGIS10.0\lib\site-packages\numpy\ma\core.py", line
3698, in __isub__
    ndarray.__isub__(self._data, np.where(self._mask, 0, getdata(other)))
TypeError: unsupported operand type(s) for -: 'NoneType' and 'float'
GDAL: GDALClose(P01_001468_1534_XI_26S034W.jp2, this=034E8230)
GDAL: GDALClose(output.tif, this=01D5F260)
GDAL: GDALDeregister_GTiff() called.

Removing "astype" solves the attribute error, but the line is still
returning "None" when it should be returning an array.  Entering
gdal_translate in the command line without arguments shows that:

The following format drivers are configured and support output:
  ECW: ERDAS Compressed Wavelets (SDK 3.x)
  JP2ECW: ERDAS JPEG2000 (SDK 3.x)

Using "gdal.GetDriverByName("JPEG2000").Deregister()" to unload the JPEG2000
driver results in this error:

RuntimeError: `P01_001468_1534_XI_26S034W.jp2' not recognised as a supported
file format.

The ECW driver was downloaded and installed from gisinternals last evening.

I have a sample JP2 that is 28MB zipped.  What is the best way to get that
to you?  I can upload it to a webspace and get you the link if that is
easiest.

Not sure to follow you. What is the  "fast" method for getting the min/max ?
> band.ComputeRasterMinMax(False) ?


I had found that band.GetMinimum() and band.GetMaximum(), which processed
quite quickly, often returned "None" is statistics had not already been
calculated for the raster.  Using band.ComputeRasterMinMax(), while slower,
always allowed me to get a value.  Is there a better way to get the band
Min/Max?

Many thanks,
Jay


On Sat, Jul 30, 2011 at 9:12 AM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Le samedi 30 juillet 2011 17:37:48, Jay L. a ?crit :
> > Morning all,
> >
> > I have a rather large JP2 file (created using the Kakadu driver I
> believe)
> > that I am trying to process with a python script.  I am able to open the
> > dataset and grab the first band.
> >
> > To calculate band statistics I use the following code which returns 1000
> > lines of error before exiting
> >
> > def get_band_stats(band):
> >     NDV = band.GetNoDataValue()
> >     bandMin = band.GetMinimum()
> >     bandMax = band.GetMaximum()
> >     if bandMin is None or bandMax is None:
> >         #Approx has to be set to false to ensure that an accurate Min/Max
> > are calculated...
> >         (bandMin, bandMax) = band.ComputeRasterMinMax(False)
> >     return NDV, bandMin, bandMax
> >
> > ....
> > ERROR 1: IReadBlock failed at X offset 20, Y offset 25
> > ERROR 1: IReadBlock failed at X offset 21, Y offset 25
> > ....
> >
> > This cuts off after 1000 lines.
> >
> > Commenting out the if statement, thereby using the "fast" method for
> > getting the min/max returns the following error:
> >
> > error: cannot decode code stream
> > ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
>
> Not sure to follow you. What is the  "fast" method for getting the min/max
> ?
> band.ComputeRasterMinMax(False) ?
>
> Did you try running with CPL_DEBUG=ON defined as an environment variable to
> check which driver is used and if there are other interesting warnings ?
>
> >
> > Finally, using gdalinfo I see that the image is being opened with the
> > ECWJP2000 driver.  I am also able to calculate statistics without a
> problem
> > and the returned values are within the expected range.
>
> Hum, strange, ComputeRasterMinMax() and ComputeRasterStatistics() are very
> silmilar : they use the same way of fetching the data, so I'd assume that
> if
> one works, the other one would too.
>
> > I am also able to
> > use gdal_translate to convert these to .tif prior to processing, but I
> > would rather avoid this method.  Do I need to alter my code to work with
> > JP2 as they are compressed?
>
> Theroretically no. If it doesn't work, it's a defect of the driver. Could
> you
> share your JP2 file ?
>
> >
> > Can I implicitly define the driver to be used with JP2 within my python
> > code without performing the unload all / load what I want method?
>
> You can unload a driver this way :
> gdal.GetDriverByName("short_name_of_driver").Deregister()
>
> >
> > Many thanks,
> > Jay
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110730/a3ac27de/attachment-0001.html
From even.rouault at mines-paris.org  Sat Jul 30 13:02:53 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 30 22:08:52 2011
Subject: [gdal-dev] JP2k, ReadError, Python
In-Reply-To: <CA+bfmPs+Jpu4bpb0az6abdEos18JsOV9OYQaJPOpFGr_k4iBBg@mail.gmail.com>
References: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
	<201107301812.03006.even.rouault@mines-paris.org>
	<CA+bfmPs+Jpu4bpb0az6abdEos18JsOV9OYQaJPOpFGr_k4iBBg@mail.gmail.com>
Message-ID: <201107301902.53358.even.rouault@mines-paris.org>

Le samedi 30 juillet 2011 18:46:42, Jay L. a ?crit :
> Evan,
> 
> Thanks for the info.  Setting debug to on has allowed me to trace the
> problem to this line:
> 
> scanBlock = band.ReadAsArray(h,i,numberColumns,
> numberRows).astype(numpy.float)
> 
> showing this error / information:
> 
> C:\Py_Scripts\RunningSD>python ISCopy.py P01_001468_1534_XI_26S034W.jp2
> -vus 5
> JPEG2000: IHDR box found. Dump: width=9973, height=34577, numcmpts=1, bpp=8
> JPEG2000: Component 0: bpp=8, signedness=0
> GDALJP2Metadata: Got projection from GeoJP2 (geotiff) box:
> PROJCS["Mars_Equidistant_Cylindrical_Sphere",GEOGCS["GCS_Mars_Sphere",DATUM
> ["Mars_Sphere",SPHEROID["Mars_Spher
> METER["standard_parallel_1",0],PARAMETER["false_easting",0],PARAMETER["fal
> se_northing",0],UNIT["metre",1,AUTHORITY["EPSG","9001"]]] GDAL:
> GDALOpen(P01_001468_1534_XI_26S034W.jp2, this=034E8230) succeeds as
> JPEG2000.
> GDAL: QuietDelete(output.tif) invoking Delete()
> GDAL: GDALOpen(output.tif, this=01D5F260) succeeds as GTiff.
> GDAL: GDALDefaultOverviews::OverviewScan()
> GDAL: GDALClose(output.tif, this=01D5F260)
> GDAL: GDALDriver::Create(GTiff,output.tif,9973,34577,1,Byte,00000000)
> Processing band: 1
> error: cannot decode code stream
> JPEG2000: Unable to decode image. Format: jp2, 4
> Traceback (most recent call last):
>   File "ISCopy.py", line 357, in <module>
>     main()
>   File "ISCopy.py", line 343, in main
>     perform_stretch(dataset,outdataset,**options.__dict__)
>   File "ISCopy.py", line 235, in perform_stretch
>     input_array = normalize(input_array, bandMin, bandMax)
>   File "ISCopy.py", line 52, in normalize
>     inputBand -= bandMin
>   File "C:\Python26\ArcGIS10.0\lib\site-packages\numpy\ma\core.py", line
> 3698, in __isub__
>     ndarray.__isub__(self._data, np.where(self._mask, 0, getdata(other)))
> TypeError: unsupported operand type(s) for -: 'NoneType' and 'float'
> GDAL: GDALClose(P01_001468_1534_XI_26S034W.jp2, this=034E8230)
> GDAL: GDALClose(output.tif, this=01D5F260)
> GDAL: GDALDeregister_GTiff() called.
> 
> Removing "astype" solves the attribute error, but the line is still
> returning "None" when it should be returning an array.

Ah ok, so it is the Jasper JPEG2000 driver that was used. Well it is known not 
to be very robust, so I'm not surprised that it fails decoding your image.

> Entering
> gdal_translate in the command line without arguments shows that:
> 
> The following format drivers are configured and support output:
>   ECW: ERDAS Compressed Wavelets (SDK 3.x)
>   JP2ECW: ERDAS JPEG2000 (SDK 3.x)
> 
> Using "gdal.GetDriverByName("JPEG2000").Deregister()" to unload the
> JPEG2000 driver results in this error:
> 
> RuntimeError: `P01_001468_1534_XI_26S034W.jp2' not recognised as a
> supported file format.
> 
> The ECW driver was downloaded and installed from gisinternals last evening.

Hum, well then this image is quite particular then if it also fails with the 
JP2ECW driver...

> 
> I have a sample JP2 that is 28MB zipped.  What is the best way to get that
> to you?  I can upload it to a webspace and get you the link if that is
> easiest.

Yes, upload it somewhere and provide the link.

> 
> Not sure to follow you. What is the  "fast" method for getting the min/max
> ?
> 
> > band.ComputeRasterMinMax(False) ?
> 
> I had found that band.GetMinimum() and band.GetMaximum(), which processed
> quite quickly, often returned "None" is statistics had not already been
> calculated for the raster.  Using band.ComputeRasterMinMax(), while slower,
> always allowed me to get a value.  Is there a better way to get the band
> Min/Max?

ok, I understand better. GetMinimum() and GetMaximum() do zero computation. 
They only return a value if it is already known. If it is not known, then 
ComputeRasterMinMax() is definitely the way to go.

> 
> Many thanks,
> Jay
> 
> 
> On Sat, Jul 30, 2011 at 9:12 AM, Even Rouault
> 
> <even.rouault@mines-paris.org>wrote:
> > Le samedi 30 juillet 2011 17:37:48, Jay L. a ?crit :
> > > Morning all,
> > > 
> > > I have a rather large JP2 file (created using the Kakadu driver I
> > 
> > believe)
> > 
> > > that I am trying to process with a python script.  I am able to open
> > > the dataset and grab the first band.
> > > 
> > > To calculate band statistics I use the following code which returns
> > > 1000 lines of error before exiting
> > > 
> > > def get_band_stats(band):
> > >     NDV = band.GetNoDataValue()
> > >     bandMin = band.GetMinimum()
> > >     bandMax = band.GetMaximum()
> > >     
> > >     if bandMin is None or bandMax is None:
> > >         #Approx has to be set to false to ensure that an accurate
> > >         Min/Max
> > > 
> > > are calculated...
> > > 
> > >         (bandMin, bandMax) = band.ComputeRasterMinMax(False)
> > >     
> > >     return NDV, bandMin, bandMax
> > > 
> > > ....
> > > ERROR 1: IReadBlock failed at X offset 20, Y offset 25
> > > ERROR 1: IReadBlock failed at X offset 21, Y offset 25
> > > ....
> > > 
> > > This cuts off after 1000 lines.
> > > 
> > > Commenting out the if statement, thereby using the "fast" method for
> > > getting the min/max returns the following error:
> > > 
> > > error: cannot decode code stream
> > > ERROR 1: IReadBlock failed at X offset 0, Y offset 0
> > > ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
> > 
> > Not sure to follow you. What is the  "fast" method for getting the
> > min/max ?
> > band.ComputeRasterMinMax(False) ?
> > 
> > Did you try running with CPL_DEBUG=ON defined as an environment variable
> > to check which driver is used and if there are other interesting
> > warnings ?
> > 
> > > Finally, using gdalinfo I see that the image is being opened with the
> > > ECWJP2000 driver.  I am also able to calculate statistics without a
> > 
> > problem
> > 
> > > and the returned values are within the expected range.
> > 
> > Hum, strange, ComputeRasterMinMax() and ComputeRasterStatistics() are
> > very silmilar : they use the same way of fetching the data, so I'd
> > assume that if
> > one works, the other one would too.
> > 
> > > I am also able to
> > > use gdal_translate to convert these to .tif prior to processing, but I
> > > would rather avoid this method.  Do I need to alter my code to work
> > > with JP2 as they are compressed?
> > 
> > Theroretically no. If it doesn't work, it's a defect of the driver. Could
> > you
> > share your JP2 file ?
> > 
> > > Can I implicitly define the driver to be used with JP2 within my python
> > > code without performing the unload all / load what I want method?
> > 
> > You can unload a driver this way :
> > gdal.GetDriverByName("short_name_of_driver").Deregister()
> > 
> > > Many thanks,
> > > Jay
From jzl5325 at psu.edu  Sat Jul 30 13:14:17 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sat Jul 30 22:20:56 2011
Subject: [gdal-dev] JP2k, ReadError, Python
In-Reply-To: <201107301902.53358.even.rouault@mines-paris.org>
References: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
	<201107301812.03006.even.rouault@mines-paris.org>
	<CA+bfmPs+Jpu4bpb0az6abdEos18JsOV9OYQaJPOpFGr_k4iBBg@mail.gmail.com>
	<201107301902.53358.even.rouault@mines-paris.org>
Message-ID: <CA+bfmPth6FS0j06FSx9neuGnd7oZrwzyxhSpo_waHAoPeajDxA@mail.gmail.com>

Here is the link.  As I said, it is 28MB, including the .jp2, .aux.xml, and
.prj file.

http://www.personal.psu.edu/jzl5325/CTX.zip

I would have thought that unloading the JPEG2000 driver would have forced
the ECW driver to be used.  It looks to me as if that driver is not being
used although it is in the ProgramFiles/GDAL/gdalplugins directory.   What
is the best way to check for proper installation?

Again, many thanks,
Jay


> Ah ok, so it is the Jasper JPEG2000 driver that was used. Well it is known
> not
> to be very robust, so I'm not surprised that it fails decoding your image.
>
>
> Yes, upload it somewhere and provide the link.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110730/e74d55b8/attachment.html
From even.rouault at mines-paris.org  Sat Jul 30 13:31:06 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 30 22:38:38 2011
Subject: [gdal-dev] NGA High Resolution Elevation (HRE) data problem?
In-Reply-To: <29474044C503AA40A6D6403925FB04EB0837AEC6@mail02.stk.com>
References: <29474044C503AA40A6D6403925FB04EB09745F2A@mail02.stk.com>
	<201012221947.23055.even.rouault@mines-paris.org>
	<29474044C503AA40A6D6403925FB04EB0837AEC6@mail02.stk.com>
Message-ID: <201107301931.06772.even.rouault@mines-paris.org>

Just a small follow-up on this (non-GDAL) issue.

http://www.gwg.nga.mil/ntb/baseline/docs/HRE_spec/index.html has now an 
addendum :

"""	The concept sample files downloaded before 10 Feb 2011 included an 
anomaly. Although marked as no display; when displayed, the display indicated 
a vertical inversion. The metadata included in the files were accurate. The 
anomaly was corrected and files downloaded after 11 Feb 2011 date no longer 
contain the inversion anomaly. """

So GDAL is correctly interpretating those files. I've visually verified that the 
new samples matches what you can see on other data sources.

Le mercredi 22 d?cembre 2010 22:14:34, Reynolds, Scott a ?crit :
> Thanks Even.  I'll try to engage someone at the NGA and see if anyone has a
> non-GDAL viewer.
> 
> Scott
> 
> ________________________________
> 
> From: Even Rouault [mailto:even.rouault@mines-paris.org]
> Sent: Wed 22-Dec-10 1:47 PM
> To: gdal-dev@lists.osgeo.org
> Cc: Reynolds, Scott
> Subject: Re: [gdal-dev] NGA High Resolution Elevation (HRE) data problem?
> 
> 
> 
> Scott,
> 
> yes I also see the image being flipped upside-down when comparing with
> google- earth imagery for example.
> 
> I've looked at the coordinate registration info (the IGEOLO record) and it
> looks OK.
> 
> UpperLeft : 11N 487873 3627061
> UpperRight: 11N 488200 3627060
> LowerRight: 11N 488200 3626695
> LowerLeft : 11N 487872 3626695
> 
> Sometimes there are products where the registration is upside down and we
> try to correct it with a few heuristics, but it is not the case here. This
> looks like a regular NITF file that shouldn't cause problems.
> 
> So my only explanation is that the data is indeed written in the wrong
> order... I've looked (very quickly) at the PDF specification of the HRE
> products and didn't see any mention that the image should be interpreted
> south to north.
> 
> Do you have the opportunity to check with a non GDAL-based NITF viewer ? Or
> you could also try investigating with the NGA.
> 
> Best regards,
> 
> Even
> 
> Le mercredi 22 d?cembre 2010 17:24:45, Reynolds, Scott a ?crit :
> > Hi,
> > 
> > 
> > 
> > I'm trying to add support for NGA HRE data to our applications using
> > GDAL 1.7.3 NITF driver.  Sample files 1-4 at
> > http://www.gwg.nga.mil/ntb/baseline/docs/HRE_spec/index.html are
> > referenced to UTM zone 11 and appear to be inverted north to south.
> > NITF imagery I have that is also referenced to UTM looks ok.  Any ideas?
> > 
> > 
> > 
> > Thanks,
> > 
> > Scott
From even.rouault at mines-paris.org  Sat Jul 30 13:44:46 2011
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jul 30 22:53:03 2011
Subject: [gdal-dev] JP2k, ReadError, Python
In-Reply-To: <CA+bfmPth6FS0j06FSx9neuGnd7oZrwzyxhSpo_waHAoPeajDxA@mail.gmail.com>
References: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
	<201107301902.53358.even.rouault@mines-paris.org>
	<CA+bfmPth6FS0j06FSx9neuGnd7oZrwzyxhSpo_waHAoPeajDxA@mail.gmail.com>
Message-ID: <201107301944.46786.even.rouault@mines-paris.org>

Le samedi 30 juillet 2011 19:14:17, Jay L. a ?crit :
> Here is the link.  As I said, it is 28MB, including the .jp2, .aux.xml, and
> .prj file.
> 
> http://www.personal.psu.edu/jzl5325/CTX.zip
> 
> I would have thought that unloading the JPEG2000 driver would have forced
> the ECW driver to be used.  It looks to me as if that driver is not being
> used although it is in the ProgramFiles/GDAL/gdalplugins directory.   What
> is the best way to check for proper installation?

Hum, I'm confused : the JP2ECW driver works with gdalinfo, but not with python 
?

Under the Python console, you can try :
print(gdal.GetDriverByName('JP2ECW'))

If it returns None, then it's clear there's an issue with your setup.

And you should'nt have to unload the JPEG2000 driver because JP2ECW should be 
used before, due to the order in which the drivers are registered.

So I suppose that the GDAL_DRIVER_PATH env variable isn't defined or doesn't 
point to the gdalplugin directory when you run your python script.

I've tried on my (Linux) box and I can successfully run 
ComputeRasterMinMax(False) with the JP2ECW driver on your file.

> 
> Again, many thanks,
> Jay
> 
> > Ah ok, so it is the Jasper JPEG2000 driver that was used. Well it is
> > known not
> > to be very robust, so I'm not surprised that it fails decoding your
> > image.
> > 
> > 
> > Yes, upload it somewhere and provide the link.
From Michael.Smith at usace.army.mil  Sat Jul 30 15:23:40 2011
From: Michael.Smith at usace.army.mil (Smith, Michael ERDC-CRREL-NH)
Date: Sun Jul 31 00:37:17 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <FB7E53D0-B749-4125-A4F4-D0DDF82BACDB@burhum.com>
References: <20110730160012.32C7AE01F1F@lists.osgeo.org>
	<FB7E53D0-B749-4125-A4F4-D0DDF82BACDB@burhum.com>
Message-ID: <F2234E796835C54C9BC240FC23099D5C01100001@EIS-MB03WPC.eis.ds.usace.army.mil>

It is prefork

[msmith@linux_wms_bm ~]$ httpd -V
Server version: Apache/2.2.15 (Unix)
Server built:   Jul 23 2010 05:08:08
Server's Module Magic Number: 20051115:24
Server loaded:  APR 1.4.2, APR-Util 1.3.9
Compiled using: APR 1.4.2, APR-Util 1.3.9
Architecture:   64-bit
Server MPM:     Prefork
  threaded:     no
    forked:     yes (variable process count)
Server compiled with....
 -D APACHE_MPM_DIR="server/mpm/prefork"
 -D APR_HAS_SENDFILE
 -D APR_HAS_MMAP
 -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
 -D APR_USE_SYSVSEM_SERIALIZE
 -D APR_USE_PTHREAD_SERIALIZE
 -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
 -D APR_HAS_OTHER_CHILD
 -D AP_HAVE_RELIABLE_PIPED_LOGS
 -D DYNAMIC_MODULE_LIMIT=128
 -D HTTPD_ROOT="/opt/mapserver"
 -D SUEXEC_BIN="/opt/mapserver/bin/suexec"
 -D DEFAULT_PIDLOG="logs/httpd.pid"
 -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
 -D DEFAULT_LOCKFILE="logs/accept.lock"
 -D DEFAULT_ERRORLOG="logs/error_log"
 -D AP_TYPES_CONFIG_FILE="conf/mime.types"
 -D SERVER_CONFIG_FILE="conf/httpd.conf"

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ragi Burhum
Sent: Saturday, July 30, 2011 11:49 AM
To: gdal-dev@lists.osgeo.org; Daniel Morissette; Even Rouault
Subject: Re: [gdal-dev] FileGDB OGR driver test

Wild guess, you are using Apache Multithreaded. If you try on Apache prefork, and it works, it is a threading issue with the FileGDB API. The script version of your test would work because it spawns a brand new process. Just guessing...


> Date: Fri, 29 Jul 2011 23:59:00 +0200
> From: Even Rouault <even.rouault@mines-paris.org>
> Subject: Re: [gdal-dev] FileGDB OGR driver test
> To: gdal-dev@lists.osgeo.org
> Cc: Daniel Morissette <dmorissette@mapgears.com>
> Message-ID: <201107292359.00656.even.rouault@mines-paris.org>
> Content-Type: Text/Plain;  charset="iso-8859-1"
> 
> Le vendredi 29 juillet 2011 23:20:48, Daniel Morissette a ?crit :
> 
> For the record, I've tested your little testfgdb and run it under my 
> favorite http server : mongoose.
> 
> And... it works well...
> 
> 
>> A little trivia for the weekend...
>> 
>> After his Windows vs FGDB adventures, Jeff reported an issue with 
>> FGDB on Linux as well, on the Linux server used for the FOSS4G 
>> benchmarking exercise and I've had a look.
>> 
>> I noticed something odd: OGROpen() (the method of the C API) is able 
>> to open the FGDB dataset when run at the command line, but is unable 
>> to open the same file when run as the same user, but under Apache. 
>> (Yes, same user)
>> 
>> MapServer is out of the equation, I am able to reproduce the problem 
>> with the following short program $ cat testfgdb.cpp
>> 
>> #include "ogr_api.h"
>> 
>> int main()
>> {
>>   OGRDataSourceH hDS = NULL;
>> 
>>   OGRRegisterAll();
>> 
>>   hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);
>> 
>>   printf("Content-type: text/plain\n\n");
>>   printf("hDS = %x\n", hDS);
>> 
>>   if (hDS)
>>     OGRReleaseDataSource( hDS );
>> 
>> }
>> 
>> 
>> When run as at the command line, I get the following output:
>> 
>> $ ./testfgdb
>> Content-type: text/plain
>> 
>> hDS = e23a710
>> 
>> 
>> ... and when run via the web server I get:
>> 
>> http://12.189.158.78:8081/cgi-bin/testfgdb
>> 
>> hDS = 0
>> 
>> 
>> However, just to make things more confusing, a shell script calling 
>> ogrinfo on the same table does work fine via the web server... what 
>> does ogrinfo do that my little 3-liner program is missing?
>> 
>> See for yourself at the following URL and make your guesses...
>> 
>> http://12.189.158.78:8081/cgi-bin/ttt
>> 
>> ***** Executing testfgdb program...
>> 
>> Content-type: text/plain
>> 
>> hDS = 0
>> 
>> ***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary 
>> /tmp/us_states.gdb statesp020
>> 
>> INFO: Open of `/tmp/us_states.gdb'
>>       using driver `FileGDB' successful.
>> 
>> Layer name: statesp020
>> Geometry: Multi Polygon
>> Feature Count: 2895
>> Extent: (-179.000000, 17.000000) - (179.000000, 71.000000) Layer SRS 
>> WKT:
>> GEOGCS["GCS_North_American_1983",
>>     DATUM["North_American_Datum_1983",
>>         SPHEROID["GRS_1980",6378137.0,298.257222101]],
>>     PRIMEM["Greenwich",0.0],
>>     UNIT["Degree",0.017453292519943295]]
>> FID Column = OBJECTID
>> Geometry Column = SHAPE
>> AREA: Real (0.0)
>> PERIMETER: Real (0.0)
>> STATESP020: Real (0.0)
>> STATE: String (0.0)
>> STATE_FIPS: String (0.0)
>> OGRFeature(statesp020):1
>>   AREA (Real) = 267.357
>>   PERIMETER (Real) = 374.768
>>   STATESP020 (Real) = 2
>>   STATE (String) = Alaska
>>   STATE_FIPS (String) = 02
>>   MULTIPOLYGON : 1 geometries:
>>     POLYGON : 70238 points
>> 
>> On 11-07-29 11:30 AM, Jeff McKenna wrote:
>>> An update on this issue:
>>> 
>>> I did some more testing and it seems that I was assuming that 
>>> MapServer would use the SHAPEPATH value for the CONNECTION; I was 
>>> wrong (in my filegdb testing on Windows I have discovered that this 
>>> is not the case here). So to use a relative path you must make sure 
>>> your CONNECTION is relative to the mapfile. I have made a note of 
>>> this in the docs (http://www.mapserver.org/input/vector/filegdb.html).
>>> 
>>> Tricky! :)
>>> 
>>> -jeff
>>> 
>>> On 11-07-18 8:18 PM, Jeff McKenna wrote:
>>>> More testing feedback:
>>>> 
>>>> When displaying in MapServer, a full path is required on Windows 
>>>> (only Windows, relative paths work on Unix), in the CONNECTION 
>>>> parameter, such
>>>> as:
>>>> 
>>>> FAILS: CONNECTION "filegdb/us_states.gdb"
>>>> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
>>>> 
>>>> I have documented this at
>>>> http://www.mapserver.org/input/vector/filegdb.html
>>>> 
>>>> If others can test this issue: to duplicate, use GDAL-trunk and 
>>>> then try to display any FileGDB (created with Arc 10.0) in MapServer, on Windows.
>>>> And let me know if you succeed. Thanks.
>>>> 
>>>> -jeff
> 
> 
> ------------------------------
> 
> Message: 5
> Date: Fri, 29 Jul 2011 18:48:37 -0400
> From: "Ian Walberg" <ian.walberg@airborne.aero>
> Subject: [gdal-dev] Build on Redhat 7.x
> To: <gdal-dev@lists.osgeo.org>
> Message-ID:
>    <D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
> Content-Type: text/plain;    charset="us-ascii"
> 
> Folks,
> 
> We need to be able to guild GDAL on Redhat 7.x as some of the systems 
> we deploy to still use it (don't ask)
> 
> Currently we are using 1.4.1 which was the newest version that we 
> could get to build some time ago.
> 
> However we now need to add spatialite support so need to build a later 
> version.
> 
> Has anyone out there needed to do this?
> 
> Thanks
> 
> Ian
> 
> 
> ------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> End of gdal-dev Digest, Vol 86, Issue 88
> ****************************************
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ragi at burhum.com  Sat Jul 30 15:40:39 2011
From: ragi at burhum.com (Ragi Burhum)
Date: Sun Jul 31 00:55:06 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <F2234E796835C54C9BC240FC23099D5C01100001@EIS-MB03WPC.eis.ds.usace.army.mil>
References: <20110730160012.32C7AE01F1F@lists.osgeo.org>
	<FB7E53D0-B749-4125-A4F4-D0DDF82BACDB@burhum.com>
	<F2234E796835C54C9BC240FC23099D5C01100001@EIS-MB03WPC.eis.ds.usace.army.mil>
Message-ID: <CA+g+PQBVSwfJQ6PgcPxCZ0uVZ4FkXcngjpBXeDP0xyBEyu4+Lg@mail.gmail.com>

Do any of the APIs that return error messages say anything?
http://www.gdal.org/ogr/cpl__error_8h.html

Also, if multiple processes try to open the same file and stay resident, I
am not sure how the FileGDB API will behave. Can you set the worker mpm
settings to always have at most 1 process just to test?

On Sat, Jul 30, 2011 at 12:23 PM, Smith, Michael ERDC-CRREL-NH <
Michael.Smith@usace.army.mil> wrote:

> It is prefork
>
> [msmith@linux_wms_bm ~]$ httpd -V
> Server version: Apache/2.2.15 (Unix)
> Server built:   Jul 23 2010 05:08:08
> Server's Module Magic Number: 20051115:24
> Server loaded:  APR 1.4.2, APR-Util 1.3.9
> Compiled using: APR 1.4.2, APR-Util 1.3.9
> Architecture:   64-bit
> Server MPM:     Prefork
>  threaded:     no
>    forked:     yes (variable process count)
> Server compiled with....
>  -D APACHE_MPM_DIR="server/mpm/prefork"
>  -D APR_HAS_SENDFILE
>  -D APR_HAS_MMAP
>  -D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
>  -D APR_USE_SYSVSEM_SERIALIZE
>  -D APR_USE_PTHREAD_SERIALIZE
>  -D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
>  -D APR_HAS_OTHER_CHILD
>  -D AP_HAVE_RELIABLE_PIPED_LOGS
>  -D DYNAMIC_MODULE_LIMIT=128
>  -D HTTPD_ROOT="/opt/mapserver"
>  -D SUEXEC_BIN="/opt/mapserver/bin/suexec"
>  -D DEFAULT_PIDLOG="logs/httpd.pid"
>  -D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
>  -D DEFAULT_LOCKFILE="logs/accept.lock"
>  -D DEFAULT_ERRORLOG="logs/error_log"
>  -D AP_TYPES_CONFIG_FILE="conf/mime.types"
>  -D SERVER_CONFIG_FILE="conf/httpd.conf"
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ragi Burhum
> Sent: Saturday, July 30, 2011 11:49 AM
> To: gdal-dev@lists.osgeo.org; Daniel Morissette; Even Rouault
> Subject: Re: [gdal-dev] FileGDB OGR driver test
>
> Wild guess, you are using Apache Multithreaded. If you try on Apache
> prefork, and it works, it is a threading issue with the FileGDB API. The
> script version of your test would work because it spawns a brand new
> process. Just guessing...
>
>
> > Date: Fri, 29 Jul 2011 23:59:00 +0200
> > From: Even Rouault <even.rouault@mines-paris.org>
> > Subject: Re: [gdal-dev] FileGDB OGR driver test
> > To: gdal-dev@lists.osgeo.org
> > Cc: Daniel Morissette <dmorissette@mapgears.com>
> > Message-ID: <201107292359.00656.even.rouault@mines-paris.org>
> > Content-Type: Text/Plain;  charset="iso-8859-1"
> >
> > Le vendredi 29 juillet 2011 23:20:48, Daniel Morissette a ?crit :
> >
> > For the record, I've tested your little testfgdb and run it under my
> > favorite http server : mongoose.
> >
> > And... it works well...
> >
> >
> >> A little trivia for the weekend...
> >>
> >> After his Windows vs FGDB adventures, Jeff reported an issue with
> >> FGDB on Linux as well, on the Linux server used for the FOSS4G
> >> benchmarking exercise and I've had a look.
> >>
> >> I noticed something odd: OGROpen() (the method of the C API) is able
> >> to open the FGDB dataset when run at the command line, but is unable
> >> to open the same file when run as the same user, but under Apache.
> >> (Yes, same user)
> >>
> >> MapServer is out of the equation, I am able to reproduce the problem
> >> with the following short program $ cat testfgdb.cpp
> >>
> >> #include "ogr_api.h"
> >>
> >> int main()
> >> {
> >>   OGRDataSourceH hDS = NULL;
> >>
> >>   OGRRegisterAll();
> >>
> >>   hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);
> >>
> >>   printf("Content-type: text/plain\n\n");
> >>   printf("hDS = %x\n", hDS);
> >>
> >>   if (hDS)
> >>     OGRReleaseDataSource( hDS );
> >>
> >> }
> >>
> >>
> >> When run as at the command line, I get the following output:
> >>
> >> $ ./testfgdb
> >> Content-type: text/plain
> >>
> >> hDS = e23a710
> >>
> >>
> >> ... and when run via the web server I get:
> >>
> >> http://12.189.158.78:8081/cgi-bin/testfgdb
> >>
> >> hDS = 0
> >>
> >>
> >> However, just to make things more confusing, a shell script calling
> >> ogrinfo on the same table does work fine via the web server... what
> >> does ogrinfo do that my little 3-liner program is missing?
> >>
> >> See for yourself at the following URL and make your guesses...
> >>
> >> http://12.189.158.78:8081/cgi-bin/ttt
> >>
> >> ***** Executing testfgdb program...
> >>
> >> Content-type: text/plain
> >>
> >> hDS = 0
> >>
> >> ***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary
> >> /tmp/us_states.gdb statesp020
> >>
> >> INFO: Open of `/tmp/us_states.gdb'
> >>       using driver `FileGDB' successful.
> >>
> >> Layer name: statesp020
> >> Geometry: Multi Polygon
> >> Feature Count: 2895
> >> Extent: (-179.000000, 17.000000) - (179.000000, 71.000000) Layer SRS
> >> WKT:
> >> GEOGCS["GCS_North_American_1983",
> >>     DATUM["North_American_Datum_1983",
> >>         SPHEROID["GRS_1980",6378137.0,298.257222101]],
> >>     PRIMEM["Greenwich",0.0],
> >>     UNIT["Degree",0.017453292519943295]]
> >> FID Column = OBJECTID
> >> Geometry Column = SHAPE
> >> AREA: Real (0.0)
> >> PERIMETER: Real (0.0)
> >> STATESP020: Real (0.0)
> >> STATE: String (0.0)
> >> STATE_FIPS: String (0.0)
> >> OGRFeature(statesp020):1
> >>   AREA (Real) = 267.357
> >>   PERIMETER (Real) = 374.768
> >>   STATESP020 (Real) = 2
> >>   STATE (String) = Alaska
> >>   STATE_FIPS (String) = 02
> >>   MULTIPOLYGON : 1 geometries:
> >>     POLYGON : 70238 points
> >>
> >> On 11-07-29 11:30 AM, Jeff McKenna wrote:
> >>> An update on this issue:
> >>>
> >>> I did some more testing and it seems that I was assuming that
> >>> MapServer would use the SHAPEPATH value for the CONNECTION; I was
> >>> wrong (in my filegdb testing on Windows I have discovered that this
> >>> is not the case here). So to use a relative path you must make sure
> >>> your CONNECTION is relative to the mapfile. I have made a note of
> >>> this in the docs (http://www.mapserver.org/input/vector/filegdb.html).
> >>>
> >>> Tricky! :)
> >>>
> >>> -jeff
> >>>
> >>> On 11-07-18 8:18 PM, Jeff McKenna wrote:
> >>>> More testing feedback:
> >>>>
> >>>> When displaying in MapServer, a full path is required on Windows
> >>>> (only Windows, relative paths work on Unix), in the CONNECTION
> >>>> parameter, such
> >>>> as:
> >>>>
> >>>> FAILS: CONNECTION "filegdb/us_states.gdb"
> >>>> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
> >>>>
> >>>> I have documented this at
> >>>> http://www.mapserver.org/input/vector/filegdb.html
> >>>>
> >>>> If others can test this issue: to duplicate, use GDAL-trunk and
> >>>> then try to display any FileGDB (created with Arc 10.0) in MapServer,
> on Windows.
> >>>> And let me know if you succeed. Thanks.
> >>>>
> >>>> -jeff
> >
> >
> > ------------------------------
> >
> > Message: 5
> > Date: Fri, 29 Jul 2011 18:48:37 -0400
> > From: "Ian Walberg" <ian.walberg@airborne.aero>
> > Subject: [gdal-dev] Build on Redhat 7.x
> > To: <gdal-dev@lists.osgeo.org>
> > Message-ID:
> >    <D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
> > Content-Type: text/plain;    charset="us-ascii"
> >
> > Folks,
> >
> > We need to be able to guild GDAL on Redhat 7.x as some of the systems
> > we deploy to still use it (don't ask)
> >
> > Currently we are using 1.4.1 which was the newest version that we
> > could get to build some time ago.
> >
> > However we now need to add spatialite support so need to build a later
> > version.
> >
> > Has anyone out there needed to do this?
> >
> > Thanks
> >
> > Ian
> >
> >
> > ------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> > End of gdal-dev Digest, Vol 86, Issue 88
> > ****************************************
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110730/f349c84e/attachment.html
From bryanhempen at gmx.de  Sat Jul 30 21:07:46 2011
From: bryanhempen at gmx.de (Bryan Hempen)
Date: Sun Jul 31 06:40:21 2011
Subject: [gdal-dev] ogr2ogr projecting from postgis to postgis
Message-ID: <20110731010746.292090@gmx.net>

Hi!

I have a little trouble figuring out how to use ogr2ogr to read spatial data from a postgis table, project it and store it back in the database. I do not want to create a shapefile or something like that and load the data back into the database again.

Using ogr2ogr for data other than stored in a PostGIS database works perfectly fine, but I can't even export PostGIS data to a shapefile or GML (always empty) and I don't know why...

What worked out well so far is loading the PostGIS data with QGIS, save it as a shapefile, THEN project it to another shapefile and finally load the shapefile into the database. Yet, as I said before, I would like to directly project the data from database to database.

I know that PostGIS provides a function called st_transform for exactly this purpose, but I need to use ogr2ogr.

Here is the command which does not work so far, hopefully you guys can give me some help:

ogr2ogr -f "PostgreSQL" -s_srs "+proj=longlat +a=3396190 +b=3376200 +no_defs" -t_srs "+proj=tmerc +lat_0=0 +lon_0=0 +k=0.9996 +x_0=0 +y_0=0 +a=3396190 +b=3376200 +units=m +no_defs" PG:"dbname='test4' host='localhost' port='5432' user='postgres' password='xxx'" PG:"dbname='test3' host='localhost' port='5432' user='postgres' password='xxx'" alldata   

Notes:

- the table containing the geometry column is called alldata
- the_geom is added with AddGeometryColumns
- alldata contains some more non-spatial columns
- I need the results to be stored in the database. In this command above I try to store the results in a different database on the same server. The database is empty so far. What would be even better is to add an additional column in the same database as the original data like the_geom_projected and store the projected geometries in there.

I am using the last FWTools, PostGIS 2.0, PostgreSQL 8.4.  

When I run the command above I get the following message:

Warning 1: Multi-column primary key in 'raster_columns' detected but not supported.
Warning 1: Multi-column primary key in 'raster_columns' detected but not supported.
ERROR 1: AddGeometryColumn failed for layer alldata, layer creation has failed.
ERROR 1: Terminating translation prematurely after failed
translation of layer alldata (use -skipfailures to skip errors)

I have tried a lot of the examples on the website and some tutorials, but nothing worked. Even simple simple exports like 

ogr2ogr "C:\Documents and Settings\user\Deskto
p\new1.shp"  PG:"dbname='test3' host='localhost' port='5432' user='postgres' password='xxx'" alldata

produce an empty shapefile. What am I doing wrong? Thanks for your help.

Kind regards,
Bryan

From chaitanya.ch at gmail.com  Sun Jul 31 01:08:23 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jul 31 10:54:08 2011
Subject: [gdal-dev] ogr2ogr projecting from postgis to postgis
In-Reply-To: <20110731010746.292090@gmx.net>
References: <20110731010746.292090@gmx.net>
Message-ID: <CAMKgpOY9sx7v20=L9cZYTXCfaUbAnS=nhW+spMk=9BM6A-YC9w@mail.gmail.com>

Bryan,

OGR is reading the layer definition of the source. The problem must be when
reading the features.

Run your commands after setting the environment variable CPL_DEBUG to ON.
Report any new messages.
What is the output of ogrinfo with the options -al and -so on the database?

On Sun, Jul 31, 2011 at 6:37 AM, Bryan Hempen <bryanhempen@gmx.de> wrote:

> Hi!
>
> I have a little trouble figuring out how to use ogr2ogr to read spatial
> data from a postgis table, project it and store it back in the database. I
> do not want to create a shapefile or something like that and load the data
> back into the database again.
>
> Using ogr2ogr for data other than stored in a PostGIS database works
> perfectly fine, but I can't even export PostGIS data to a shapefile or GML
> (always empty) and I don't know why...
>
> What worked out well so far is loading the PostGIS data with QGIS, save it
> as a shapefile, THEN project it to another shapefile and finally load the
> shapefile into the database. Yet, as I said before, I would like to directly
> project the data from database to database.
>
> I know that PostGIS provides a function called st_transform for exactly
> this purpose, but I need to use ogr2ogr.
>
> Here is the command which does not work so far, hopefully you guys can give
> me some help:
>
> ogr2ogr -f "PostgreSQL" -s_srs "+proj=longlat +a=3396190 +b=3376200
> +no_defs" -t_srs "+proj=tmerc +lat_0=0 +lon_0=0 +k=0.9996 +x_0=0 +y_0=0
> +a=3396190 +b=3376200 +units=m +no_defs" PG:"dbname='test4' host='localhost'
> port='5432' user='postgres' password='xxx'" PG:"dbname='test3'
> host='localhost' port='5432' user='postgres' password='xxx'" alldata
>
> Notes:
>
> - the table containing the geometry column is called alldata
> - the_geom is added with AddGeometryColumns
> - alldata contains some more non-spatial columns
> - I need the results to be stored in the database. In this command above I
> try to store the results in a different database on the same server. The
> database is empty so far. What would be even better is to add an additional
> column in the same database as the original data like the_geom_projected and
> store the projected geometries in there.
>
> I am using the last FWTools, PostGIS 2.0, PostgreSQL 8.4.
>
> When I run the command above I get the following message:
>
> Warning 1: Multi-column primary key in 'raster_columns' detected but not
> supported.
> Warning 1: Multi-column primary key in 'raster_columns' detected but not
> supported.
> ERROR 1: AddGeometryColumn failed for layer alldata, layer creation has
> failed.
> ERROR 1: Terminating translation prematurely after failed
> translation of layer alldata (use -skipfailures to skip errors)
>
> I have tried a lot of the examples on the website and some tutorials, but
> nothing worked. Even simple simple exports like
>
> ogr2ogr "C:\Documents and Settings\user\Deskto
> p\new1.shp"  PG:"dbname='test3' host='localhost' port='5432'
> user='postgres' password='xxx'" alldata
>
> produce an empty shapefile. What am I doing wrong? Thanks for your help.
>
> Kind regards,
> Bryan
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110731/f48f48b3/attachment-0001.html
From jzl5325 at psu.edu  Sun Jul 31 01:25:43 2011
From: jzl5325 at psu.edu (Jay L.)
Date: Sun Jul 31 11:12:22 2011
Subject: [gdal-dev] JP2k, ReadError, Python
In-Reply-To: <201107301944.46786.even.rouault@mines-paris.org>
References: <CA+bfmPsHUB-4pr51pwTniNLGV7kCPQ9AiPA9yMeRgg6mLuB3iQ@mail.gmail.com>
	<201107301902.53358.even.rouault@mines-paris.org>
	<CA+bfmPth6FS0j06FSx9neuGnd7oZrwzyxhSpo_waHAoPeajDxA@mail.gmail.com>
	<201107301944.46786.even.rouault@mines-paris.org>
Message-ID: <CA+bfmPsW_gUJCTqYAuSic=Y60VTjvxzZxK7UNL03XfSRQYSuNQ@mail.gmail.com>

Even,

I feel quite foolish.  I had not properly registered the plugin PATH.  The
jp2 are processing without a problem as I type.  I will be sure to create a
blog post documenting ALL of the steps that are required to get GDAL up on
running on a windows machine.

Many thanks for your assistance!
Jay

On Sat, Jul 30, 2011 at 10:44 AM, Even Rouault <even.rouault@mines-paris.org
> wrote:

> Le samedi 30 juillet 2011 19:14:17, Jay L. a ?crit :
> > Here is the link.  As I said, it is 28MB, including the .jp2, .aux.xml,
> and
> > .prj file.
> >
> > http://www.personal.psu.edu/jzl5325/CTX.zip
> >
> > I would have thought that unloading the JPEG2000 driver would have forced
> > the ECW driver to be used.  It looks to me as if that driver is not being
> > used although it is in the ProgramFiles/GDAL/gdalplugins directory.
> What
> > is the best way to check for proper installation?
>
> Hum, I'm confused : the JP2ECW driver works with gdalinfo, but not with
> python
> ?
>
> Under the Python console, you can try :
> print(gdal.GetDriverByName('JP2ECW'))
>
> If it returns None, then it's clear there's an issue with your setup.
>
> And you should'nt have to unload the JPEG2000 driver because JP2ECW should
> be
> used before, due to the order in which the drivers are registered.
>
> So I suppose that the GDAL_DRIVER_PATH env variable isn't defined or
> doesn't
> point to the gdalplugin directory when you run your python script.
>
> I've tried on my (Linux) box and I can successfully run
> ComputeRasterMinMax(False) with the JP2ECW driver on your file.
>
> >
> > Again, many thanks,
> > Jay
> >
> > > Ah ok, so it is the Jasper JPEG2000 driver that was used. Well it is
> > > known not
> > > to be very robust, so I'm not surprised that it fails decoding your
> > > image.
> > >
> > >
> > > Yes, upload it somewhere and provide the link.
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110730/81b2af33/attachment.html
From max at geoinova.com  Sun Jul 31 11:15:34 2011
From: max at geoinova.com (Maksim Sestic)
Date: Sun Jul 31 21:49:29 2011
Subject: [gdal-dev] .NET and OGR writing to stream
Message-ID: <572E582730494988A495984D965C3AE4@max6>

Hi all,

 

Is there any example of OGR driver writing to memory stream (instead of file
stream), in .NET?

 

Regards,

Maksim Sestic

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110731/a4593f27/attachment.html
From chaitanya.ch at gmail.com  Sun Jul 31 12:06:19 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jul 31 22:28:29 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <572E582730494988A495984D965C3AE4@max6>
References: <572E582730494988A495984D965C3AE4@max6>
Message-ID: <CAMKgpOaCdtEKPyi6mSr9hkqEen67X1_asPJuajfgMf81aNVG_Q@mail.gmail.com>

Maksim,

You can use the Memory driver.

http://www.gdal.org/ogr/drv_memory.html
http://www.gdal.org/ogr/ogr_formats.html

On Sun, Jul 31, 2011 at 8:45 PM, Maksim Sestic <max@geoinova.com> wrote:

>  Hi all,****
>
> ** **
>
> Is there any example of OGR driver writing to memory stream (instead of
> file stream), in .NET?****
>
> ** **
>
> Regards,****
>
> Maksim Sestic****
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6338 (20110731) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110731/dce79602/attachment.html
From max at geoinova.com  Sun Jul 31 12:17:32 2011
From: max at geoinova.com (Maksim Sestic)
Date: Sun Jul 31 22:40:26 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <CAMKgpOaCdtEKPyi6mSr9hkqEen67X1_asPJuajfgMf81aNVG_Q@mail.gmail.com>
References: <572E582730494988A495984D965C3AE4@max6>
	<CAMKgpOaCdtEKPyi6mSr9hkqEen67X1_asPJuajfgMf81aNVG_Q@mail.gmail.com>
Message-ID: <D72A935F93F1408F82C9F45CB95A5856@max6>

Hi Chaitanya,

 

Actually, what I need is writing GML (using GML driver) to string, not a
file. Current managed wrapper looks like:

 

Public Function CreateDataSource(utf8_path As String, options() As String)
As OSGeo.OGR.DataSource

 

...while I need something like:

 

Public Function CreateDataSource(myStream As Stream, options() As String) As
OSGeo.OGR.DataSource

 

Regards,

Maksim Sestic

 

  _____  

From: Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com] 
Sent: Sunday, July 31, 2011 18:06
To: Maksim Sestic
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] .NET and OGR writing to stream

 

Maksim,

You can use the Memory driver.

http://www.gdal.org/ogr/drv_memory.html
http://www.gdal.org/ogr/ogr_formats.html

On Sun, Jul 31, 2011 at 8:45 PM, Maksim Sestic <max@geoinova.com> wrote:

Hi all,

 

Is there any example of OGR driver writing to memory stream (instead of file
stream), in .NET?

 

Regards,

Maksim Sestic



__________ Information from ESET NOD32 Antivirus, version of virus signature
database 6338 (20110731) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev




-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110731/22d7ff93/attachment.html
From chaitanya.ch at gmail.com  Sun Jul 31 13:32:39 2011
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sun Jul 31 23:59:41 2011
Subject: [gdal-dev] .NET and OGR writing to stream
In-Reply-To: <D72A935F93F1408F82C9F45CB95A5856@max6>
References: <572E582730494988A495984D965C3AE4@max6>
	<CAMKgpOaCdtEKPyi6mSr9hkqEen67X1_asPJuajfgMf81aNVG_Q@mail.gmail.com>
	<D72A935F93F1408F82C9F45CB95A5856@max6>
Message-ID: <CAMKgpObudvH7YEhLQoA0sYcmSU=i0+b4bkcCS-JwqBKjbJHh=g@mail.gmail.com>

Maksim,

You can use the memory file system handler in the GDAL library.
The documentation of VSIInstallMemFileHandler() includes a C++ example.

http://www.gdal.org/ogr/cpl__vsi_8h.html#66e2e6f093fd42f8a941b962d4c8a19e

On Sun, Jul 31, 2011 at 9:47 PM, Maksim Sestic <max@geoinova.com> wrote:

>  Hi Chaitanya,****
>
> ** **
>
> Actually, what I need is writing GML (using GML driver) to string, not a
> file. Current managed wrapper looks like:****
>
> ** **
>
> Public Function *CreateDataSource*(*utf8_path* As *String**, **options*()
> As *String*) As *OSGeo*.*OGR*.*DataSource*****
>
> ** **
>
> ...while I need something like:****
>
> ** **
>
> Public Function *CreateDataSource*(*myStream* As *Stream**, **options*()
> As *String*) As *OSGeo*.*OGR*.*DataSource*****
>
> ** **
>
> Regards,****
>
> Maksim Sestic****
>
> ** **
>  ------------------------------
>
> *From:* Chaitanya kumar CH [mailto:chaitanya.ch@gmail.com]
> *Sent:* Sunday, July 31, 2011 18:06
> *To:* Maksim Sestic
> *Cc:* gdal-dev@lists.osgeo.org
> *Subject:* Re: [gdal-dev] .NET and OGR writing to stream****
>
> ** **
>
> Maksim,
>
> You can use the Memory driver.
>
> http://www.gdal.org/ogr/drv_memory.html
> http://www.gdal.org/ogr/ogr_formats.html****
>
> On Sun, Jul 31, 2011 at 8:45 PM, Maksim Sestic <max@geoinova.com> wrote:**
> **
>
> Hi all,****
>
>  ****
>
> Is there any example of OGR driver writing to memory stream (instead of
> file stream), in .NET?****
>
>  ****
>
> Regards,****
>
> Maksim Sestic****
>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6338 (20110731) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com****
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev****
>
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
>
> +91-9494447584
> 17.2416N 80.1426E****
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 6338 (20110731) __________
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>



-- 
Best regards,
Chaitanya kumar CH.

+91-9494447584
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20110731/3bfa8501/attachment-0001.html
From pramsey at opengeo.org  Sun Jul 31 18:30:18 2011
From: pramsey at opengeo.org (Paul Ramsey)
Date: Mon Aug  1 05:14:00 2011
Subject: [gdal-dev] FileGDB OGR driver test
In-Reply-To: <CA+g+PQBVSwfJQ6PgcPxCZ0uVZ4FkXcngjpBXeDP0xyBEyu4+Lg@mail.gmail.com>
References: <20110730160012.32C7AE01F1F@lists.osgeo.org>
	<FB7E53D0-B749-4125-A4F4-D0DDF82BACDB@burhum.com>
	<F2234E796835C54C9BC240FC23099D5C01100001@EIS-MB03WPC.eis.ds.usace.army.mil>
	<CA+g+PQBVSwfJQ6PgcPxCZ0uVZ4FkXcngjpBXeDP0xyBEyu4+Lg@mail.gmail.com>
Message-ID: <CACowWR3oyr6UDhBUF7qZzUPM7QvLW8g_zOdGwpiegOnyH40MXw@mail.gmail.com>

Actually, it would be quite wise to check that... I've noticed
(because I happen to have my working area in a Dropbox folder) the
FGDB API creating transient lock files (gah!!) while in operation.

P.

On Sat, Jul 30, 2011 at 12:40 PM, Ragi Burhum <ragi@burhum.com> wrote:
> Do any of the APIs that return error messages say
> anything??http://www.gdal.org/ogr/cpl__error_8h.html
> Also, if multiple processes try to open the same file and stay resident, I
> am not sure how the FileGDB API will behave. Can you set the worker mpm
> settings to always have at most 1 process just to test?
>
> On Sat, Jul 30, 2011 at 12:23 PM, Smith, Michael ERDC-CRREL-NH
> <Michael.Smith@usace.army.mil> wrote:
>>
>> It is prefork
>>
>> [msmith@linux_wms_bm ~]$ httpd -V
>> Server version: Apache/2.2.15 (Unix)
>> Server built: ? Jul 23 2010 05:08:08
>> Server's Module Magic Number: 20051115:24
>> Server loaded: ?APR 1.4.2, APR-Util 1.3.9
>> Compiled using: APR 1.4.2, APR-Util 1.3.9
>> Architecture: ? 64-bit
>> Server MPM: ? ? Prefork
>> ?threaded: ? ? no
>> ? ?forked: ? ? yes (variable process count)
>> Server compiled with....
>> ?-D APACHE_MPM_DIR="server/mpm/prefork"
>> ?-D APR_HAS_SENDFILE
>> ?-D APR_HAS_MMAP
>> ?-D APR_HAVE_IPV6 (IPv4-mapped addresses enabled)
>> ?-D APR_USE_SYSVSEM_SERIALIZE
>> ?-D APR_USE_PTHREAD_SERIALIZE
>> ?-D SINGLE_LISTEN_UNSERIALIZED_ACCEPT
>> ?-D APR_HAS_OTHER_CHILD
>> ?-D AP_HAVE_RELIABLE_PIPED_LOGS
>> ?-D DYNAMIC_MODULE_LIMIT=128
>> ?-D HTTPD_ROOT="/opt/mapserver"
>> ?-D SUEXEC_BIN="/opt/mapserver/bin/suexec"
>> ?-D DEFAULT_PIDLOG="logs/httpd.pid"
>> ?-D DEFAULT_SCOREBOARD="logs/apache_runtime_status"
>> ?-D DEFAULT_LOCKFILE="logs/accept.lock"
>> ?-D DEFAULT_ERRORLOG="logs/error_log"
>> ?-D AP_TYPES_CONFIG_FILE="conf/mime.types"
>> ?-D SERVER_CONFIG_FILE="conf/httpd.conf"
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ragi Burhum
>> Sent: Saturday, July 30, 2011 11:49 AM
>> To: gdal-dev@lists.osgeo.org; Daniel Morissette; Even Rouault
>> Subject: Re: [gdal-dev] FileGDB OGR driver test
>>
>> Wild guess, you are using Apache Multithreaded. If you try on Apache
>> prefork, and it works, it is a threading issue with the FileGDB API. The
>> script version of your test would work because it spawns a brand new
>> process. Just guessing...
>>
>>
>> > Date: Fri, 29 Jul 2011 23:59:00 +0200
>> > From: Even Rouault <even.rouault@mines-paris.org>
>> > Subject: Re: [gdal-dev] FileGDB OGR driver test
>> > To: gdal-dev@lists.osgeo.org
>> > Cc: Daniel Morissette <dmorissette@mapgears.com>
>> > Message-ID: <201107292359.00656.even.rouault@mines-paris.org>
>> > Content-Type: Text/Plain; ?charset="iso-8859-1"
>> >
>> > Le vendredi 29 juillet 2011 23:20:48, Daniel Morissette a ?crit :
>> >
>> > For the record, I've tested your little testfgdb and run it under my
>> > favorite http server : mongoose.
>> >
>> > And... it works well...
>> >
>> >
>> >> A little trivia for the weekend...
>> >>
>> >> After his Windows vs FGDB adventures, Jeff reported an issue with
>> >> FGDB on Linux as well, on the Linux server used for the FOSS4G
>> >> benchmarking exercise and I've had a look.
>> >>
>> >> I noticed something odd: OGROpen() (the method of the C API) is able
>> >> to open the FGDB dataset when run at the command line, but is unable
>> >> to open the same file when run as the same user, but under Apache.
>> >> (Yes, same user)
>> >>
>> >> MapServer is out of the equation, I am able to reproduce the problem
>> >> with the following short program $ cat testfgdb.cpp
>> >>
>> >> #include "ogr_api.h"
>> >>
>> >> int main()
>> >> {
>> >> ? OGRDataSourceH hDS = NULL;
>> >>
>> >> ? OGRRegisterAll();
>> >>
>> >> ? hDS = OGROpen("/tmp/us_states.gdb", FALSE, NULL);
>> >>
>> >> ? printf("Content-type: text/plain\n\n");
>> >> ? printf("hDS = %x\n", hDS);
>> >>
>> >> ? if (hDS)
>> >> ? ? OGRReleaseDataSource( hDS );
>> >>
>> >> }
>> >>
>> >>
>> >> When run as at the command line, I get the following output:
>> >>
>> >> $ ./testfgdb
>> >> Content-type: text/plain
>> >>
>> >> hDS = e23a710
>> >>
>> >>
>> >> ... and when run via the web server I get:
>> >>
>> >> http://12.189.158.78:8081/cgi-bin/testfgdb
>> >>
>> >> hDS = 0
>> >>
>> >>
>> >> However, just to make things more confusing, a shell script calling
>> >> ogrinfo on the same table does work fine via the web server... what
>> >> does ogrinfo do that my little 3-liner program is missing?
>> >>
>> >> See for yourself at the following URL and make your guesses...
>> >>
>> >> http://12.189.158.78:8081/cgi-bin/ttt
>> >>
>> >> ***** Executing testfgdb program...
>> >>
>> >> Content-type: text/plain
>> >>
>> >> hDS = 0
>> >>
>> >> ***** Executing /opt/mapserver/bin/ogrinfo -fid 1 -geom=summary
>> >> /tmp/us_states.gdb statesp020
>> >>
>> >> INFO: Open of `/tmp/us_states.gdb'
>> >> ? ? ? using driver `FileGDB' successful.
>> >>
>> >> Layer name: statesp020
>> >> Geometry: Multi Polygon
>> >> Feature Count: 2895
>> >> Extent: (-179.000000, 17.000000) - (179.000000, 71.000000) Layer SRS
>> >> WKT:
>> >> GEOGCS["GCS_North_American_1983",
>> >> ? ? DATUM["North_American_Datum_1983",
>> >> ? ? ? ? SPHEROID["GRS_1980",6378137.0,298.257222101]],
>> >> ? ? PRIMEM["Greenwich",0.0],
>> >> ? ? UNIT["Degree",0.017453292519943295]]
>> >> FID Column = OBJECTID
>> >> Geometry Column = SHAPE
>> >> AREA: Real (0.0)
>> >> PERIMETER: Real (0.0)
>> >> STATESP020: Real (0.0)
>> >> STATE: String (0.0)
>> >> STATE_FIPS: String (0.0)
>> >> OGRFeature(statesp020):1
>> >> ? AREA (Real) = 267.357
>> >> ? PERIMETER (Real) = 374.768
>> >> ? STATESP020 (Real) = 2
>> >> ? STATE (String) = Alaska
>> >> ? STATE_FIPS (String) = 02
>> >> ? MULTIPOLYGON : 1 geometries:
>> >> ? ? POLYGON : 70238 points
>> >>
>> >> On 11-07-29 11:30 AM, Jeff McKenna wrote:
>> >>> An update on this issue:
>> >>>
>> >>> I did some more testing and it seems that I was assuming that
>> >>> MapServer would use the SHAPEPATH value for the CONNECTION; I was
>> >>> wrong (in my filegdb testing on Windows I have discovered that this
>> >>> is not the case here). So to use a relative path you must make sure
>> >>> your CONNECTION is relative to the mapfile. I have made a note of
>> >>> this in the docs (http://www.mapserver.org/input/vector/filegdb.html).
>> >>>
>> >>> Tricky! :)
>> >>>
>> >>> -jeff
>> >>>
>> >>> On 11-07-18 8:18 PM, Jeff McKenna wrote:
>> >>>> More testing feedback:
>> >>>>
>> >>>> When displaying in MapServer, a full path is required on Windows
>> >>>> (only Windows, relative paths work on Unix), in the CONNECTION
>> >>>> parameter, such
>> >>>> as:
>> >>>>
>> >>>> FAILS: CONNECTION "filegdb/us_states.gdb"
>> >>>> WORKS: CONNECTION "C:/ms4w/apps/ms101/data/filegdb/us_states.gdb"
>> >>>>
>> >>>> I have documented this at
>> >>>> http://www.mapserver.org/input/vector/filegdb.html
>> >>>>
>> >>>> If others can test this issue: to duplicate, use GDAL-trunk and
>> >>>> then try to display any FileGDB (created with Arc 10.0) in MapServer,
>> >>>> on Windows.
>> >>>> And let me know if you succeed. Thanks.
>> >>>>
>> >>>> -jeff
>> >
>> >
>> > ------------------------------
>> >
>> > Message: 5
>> > Date: Fri, 29 Jul 2011 18:48:37 -0400
>> > From: "Ian Walberg" <ian.walberg@airborne.aero>
>> > Subject: [gdal-dev] Build on Redhat 7.x
>> > To: <gdal-dev@lists.osgeo.org>
>> > Message-ID:
>> > ? ?<D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
>> > Content-Type: text/plain; ? ?charset="us-ascii"
>> >
>> > Folks,
>> >
>> > We need to be able to guild GDAL on Redhat 7.x as some of the systems
>> > we deploy to still use it (don't ask)
>> >
>> > Currently we are using 1.4.1 which was the newest version that we
>> > could get to build some time ago.
>> >
>> > However we now need to add spatialite support so need to build a later
>> > version.
>> >
>> > Has anyone out there needed to do this?
>> >
>> > Thanks
>> >
>> > Ian
>> >
>> >
>> > ------------------------------
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> > End of gdal-dev Digest, Vol 86, Issue 88
>> > ****************************************
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From ian.walberg at airborne.aero  Sun Jul 31 19:25:22 2011
From: ian.walberg at airborne.aero (Ian Walberg)
Date: Mon Aug  1 06:12:18 2011
Subject: [gdal-dev] Build on Redhat 7.x
In-Reply-To: <201107301751.08956.even.rouault@mines-paris.org>
References: <BANLkTikg4H-qUQGn8jVvpO8xZ5_zjiLSSQ@mail.gmail.com>
	<4E332463.2030606@mapgears.com>
	<D12323219CEDB24AA8FAE53FF3F59FB402DC0F33@be28.exg3.exghost.com>
	<201107301751.08956.even.rouault@mines-paris.org>
Message-ID: <D12323219CEDB24AA8FAE53FF3F59FB402DC0F58@be28.exg3.exghost.com>

Even,

Thank you very much for your fantastic instructions.

I have built everything and will test this week.

Regards

Ian

-----Original Message-----
From: Even Rouault [mailto:even.rouault@mines-paris.org] 
Sent: Saturday, July 30, 2011 8:51 AM
To: gdal-dev@lists.osgeo.org
Cc: Ian Walberg
Subject: Re: [gdal-dev] Build on Redhat 7.x

Le samedi 30 juillet 2011 00:48:37, Ian Walberg a ?crit :
> Folks,
> 
> We need to be able to guild GDAL on Redhat 7.x as some of the systems we
> deploy to still use it (don't ask)
> 
> Currently we are using 1.4.1 which was the newest version that we could
> get to build some time ago.
> 
> However we now need to add spatialite support so need to build a later
> version.
> 
> Has anyone out there needed to do this?

I have a Virtual Machine with a RedHat 7.3 system on it. I managed to build 
GDAL 1.8.1 with the following fixes :
* apply patch of http://trac.osgeo.org/gdal/changeset/22835
* edit gcore/rasterio.cpp and remove the 3 following lines (so that the 
compiler is detected as broken compiler) :
#define NOT_BROKEN_COMPILER \
        (!(defined(_MSC_VER) && _MSC_VER <= 1200) && !defined(__BORLANDC__) && \
        !defined(__SUNPRO_CC))

Then ./configure --without-libtool --without-curl

(--without-curl because if you have the system curl installed, it is too 
ancient and not supported by GDAL)

The build goes well.

Next, I tried to compile spatialite but before that you need to compile proj4 
and GEOS. However it is impossible to compile GEOS, which heavily uses C++ 
features, with such an ancient and broken C++ compiler as gcc 2.96.

So for fun, I gave a try to build a more recent GCC !

Download
ftp://ftp.irisa.fr/pub/mirrors/gcc.gnu.org/gcc/releases/gcc-3.4.6/gcc-3.4.6.tar.bz2
and
ftp://ftp.irisa.fr/pub/mirrors/gcc.gnu.org/gcc/releases/gcc-3.4.6/gcc-
g++-3.4.6.tar.bz2

(I didn't dare to try compiling a GCC 4.X)

cd $HOME

tar xjvf gcc-3.4.6.tar.bz2
tar xjvf gcc-g++-3.4.6.tar.bz2

mkdir $HOME/install-gcc-346
cd gcc-3.4.6
./configure --prefix=$HOME/install-gcc-346 --enable-languages=c,c++
make
make install

export PATH=$HOME/install-gcc-346/bin

g++ --version  : you have a working GCC 3.4.6 compiler now !

You'll also need to define
export LD_LIBRARY_PATH=$HOME/install-gcc-346/lib
for the new libstdc++ (I didn't dare to install in system directories, but I 
think you could just copy the libstdc++.so.6 and libgcc_s.so.1 to /usr/lib to 
avoid to define this LD_LIBRARY_PATH )

Then I've managed to compile proj 4.7.0 and geos 3.3.0, and then 
libspatialite-amalgamation-2.4.0 without any problem

cd $HOME
wget http://download.osgeo.org/proj/proj-4.7.0.tar.gz
tar xvzf proj-4.7.0.tar.gz
cd proj-4.7.0
./configure --prefix=/usr
make
make install

cd $HOME
wget http://download.osgeo.org/geos/geos-3.3.0.tar.bz2
tar xjvf geos-3.3.0.tar.bz2
cd geos-3.3.0
./configure --prefix=/usr
make
make install

cd $HOME
wget http://www.gaia-gis.it/spatialite-2.4.0-4/libspatialite-
amalgamation-2.4.0.tar.gz
cd libspatialite-amalgamation
./configure --prefix=/usr
make
make install


And then I rebuilt GDAL with spatialite support :
cd gdal-1.8.1
make clean
./configure --without-libtool --without-curl --with-spatialite=/usr
make
export LD_LIBRARY_PATH=$PWD:$LD_LIBRARY_PATH
export PATH=$PWD/apps:$PATH
export GDAL_DATA=$PWD/data

The autotests for the OGR SQLite/Spatialite driver pass.

PS: With GCC 3.4.6, the patch quoted at the beginning and change in 
gcore/rasterio.cpp are not needed in fact.

Best regards,

Even

> 
> Thanks
> 
> Ian
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
