From even.rouault at spatialys.com  Tue Jul  1 02:05:57 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Jul 2025 11:05:57 +0200
Subject: [gdal-dev] Motion: approve GDAL 3.11.1RC2 as final release
In-Reply-To: <3aa96fe2-a5e2-4a1e-a136-f4063850276c@spatialys.com>
References: <3aa96fe2-a5e2-4a1e-a136-f4063850276c@spatialys.com>
Message-ID: <896cd560-cbfe-4f02-b79e-a2760d0ac77d@spatialys.com>

Passed with +1 from PSC members TamasS, JukkaR, MichaelS, JavierJS and me

Le 27/06/2025 ? 11:00, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Jul  1 02:22:15 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Jul 2025 11:22:15 +0200
Subject: [gdal-dev] GDAL 3.11.1 is released
Message-ID: <b34770c2-4294-4dbe-914f-04e505f58823@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.11.1 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.11.1/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.xz
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.xz.md5
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.xz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.gz
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.gz.md5
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.gz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.1/gdal3111.zip
 ??? https://download.osgeo.org/gdal/3.11.1/gdal3111.zip.md5
 ??? https://download.osgeo.org/gdal/3.11.1/gdal3111.zip.sig

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dg0yt at darc.de  Tue Jul  1 12:42:40 2025
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Tue, 1 Jul 2025 21:42:40 +0200
Subject: [gdal-dev] Building GDAL from VCPKG fails with FreeXL
In-Reply-To: <01ba01dbe918$ed127ba0$c73772e0$@hyperacktive.com>
References: <018501dbe88f$23c3e650$6b4bb2f0$@hyperacktive.com>
 <93d3a5b5-ecfa-4a05-b555-a24a828e5586@spatialys.com>
 <01ba01dbe918$ed127ba0$c73772e0$@hyperacktive.com>
Message-ID: <6bab8526-6c93-40d3-b42c-2aaedc8b7f5e@darc.de>

- The freexl port builds in vcpkg CI, and there are no open issues for 
Windows.
- Either there are log files for the actual error, reported on the 
console, or it fails early for example because of mixing different 
msys2/cygwin runtimes.
- freexl is an optional feature of port gdal. If nothing asks for it, it 
is not enabled in port gdal.
- However, libspatialite is a default feature of port gdal, and freexl 
is a default feature of port libspatialite. ATM it is not possible to 
opt-out from libspatialite[freexl], but this will be fixed with port 
gdal 3.11.1.
- To opt-out from all default features of a port, you must declare this 
in the top-level manifest (manifest mode) or by using the pseudo feaure 
"core" (classic mode).? The reason why you can't do this now with 
libspatialite[core] is that gdal[libspatialite] implicitly depends on 
the default features of port libspatialite.

Kai Pastor

Am 29.06.25 um 19:11 schrieb Martin Chapman via gdal-dev:
>
> Even,
>
> I didn?t save the exact message but it was fairly non descriptive.? It 
> was something like BUILD_FAILED.? Sorry, my bad for not saving the 
> exact message.? It sounds like it may have just been my environment 
> and if it?s not critical then I can live without it.? If no one else 
> is complaining then I wouldn?t waste time looking into it.? If I have 
> time later I will try to rebuild and reproduce the error, it just 
> takes an hour to build so can?t do it right now.? Thanks for your help 
> though!
>
> Best regards,
>
> Martin Chapman
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* Sunday, June 29, 2025 3:33 AM
> *To:* mchapman at hyperacktive.com; gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Building GDAL from VCPKG fails with FreeXL
>
> Martin,
>
> what error messages did you get when trying with FreeXL ?
>
> Removing the FreeXL dependency removes support for the old 
> prior-to-Excel-2007 binary XLS format. So usually not a big deal
>
> Even
>
> Le 29/06/2025 ? 02:45, Martin Chapman via gdal-dev a ?crit?:
>
>     All,
>
>     I tried to build GDAL 3.11.0 from https://vcpkg.io/en/package/gdal
>     and FreeXL kept failing on my Windows 11 box using Microsoft
>     Visual Studio Professional 2022 (64-bit) ? Current Version
>     17.14.7.? To resolve the issue I built a custom-overlay port and
>     removed FreeXL from the build and then everything built great.? I
>     tried to just build FreeXL using VCPKG and that failed so I was
>     wondering if it?s just my machine that is messed up or are others
>     having issues as well?? By removing FreeXL will I be crippling any
>     other drivers that may depend on it?? I looked at the docs and it
>     didn?t seem that important? Also, is there a way to specify what
>     drivers not to build without doing a custom-overlay port?
>
>     Best regards,
>
>     Martin Chapman
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250701/34ebe5ce/attachment.htm>

From mchapman at hyperacktive.com  Tue Jul  1 13:10:53 2025
From: mchapman at hyperacktive.com (mchapman at hyperacktive.com)
Date: Tue, 1 Jul 2025 14:10:53 -0600
Subject: [gdal-dev] Building GDAL from VCPKG fails with FreeXL
In-Reply-To: <6bab8526-6c93-40d3-b42c-2aaedc8b7f5e@darc.de>
References: <018501dbe88f$23c3e650$6b4bb2f0$@hyperacktive.com>
 <93d3a5b5-ecfa-4a05-b555-a24a828e5586@spatialys.com>
 <01ba01dbe918$ed127ba0$c73772e0$@hyperacktive.com>
 <6bab8526-6c93-40d3-b42c-2aaedc8b7f5e@darc.de>
Message-ID: <02ac01dbeac4$40aeaac0$c20c0040$@hyperacktive.com>

Thanks for the information Kai.  I will look into it next week after the holiday weekend.  It must be something on my system.  Sorry to bother you with it but thank you so much for all your feedback.  I really love using GDAL and all the great work you people have done throughout the years!

 

Best regards,

Martin Chapman

 

From: Kai Pastor, DG0YT <dg0yt at darc.de> 
Sent: Tuesday, July 1, 2025 1:43 PM
To: mchapman at hyperacktive.com; 'Even Rouault' <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Building GDAL from VCPKG fails with FreeXL

 

- The freexl port builds in vcpkg CI, and there are no open issues for Windows.

- Either there are log files for the actual error, reported on the console, or it fails early for example because of mixing different msys2/cygwin runtimes.

- freexl is an optional feature of port gdal. If nothing asks for it, it is not enabled in port gdal.

- However, libspatialite is a default feature of port gdal, and freexl is a default feature of port libspatialite. ATM it is not possible to opt-out from libspatialite[freexl], but this will be fixed with port gdal 3.11.1.

- To opt-out from all default features of a port, you must declare this in the top-level manifest (manifest mode) or by using the pseudo feaure "core" (classic mode).  The reason why you can't do this now with libspatialite[core] is that gdal[libspatialite] implicitly depends on the default features of port libspatialite.

 

Kai Pastor

 

Am 29.06.25 um 19:11 schrieb Martin Chapman via gdal-dev:

Even,

 

I didn?t save the exact message but it was fairly non descriptive.  It was something like BUILD_FAILED.  Sorry, my bad for not saving the exact message.  It sounds like it may have just been my environment and if it?s not critical then I can live without it.  If no one else is complaining then I wouldn?t waste time looking into it.  If I have time later I will try to rebuild and reproduce the error, it just takes an hour to build so can?t do it right now.  Thanks for your help though!

  

Best regards,

Martin Chapman

 

From: Even Rouault  <mailto:even.rouault at spatialys.com> <even.rouault at spatialys.com> 
Sent: Sunday, June 29, 2025 3:33 AM
To: mchapman at hyperacktive.com <mailto:mchapman at hyperacktive.com> ; gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
Subject: Re: [gdal-dev] Building GDAL from VCPKG fails with FreeXL

 

Martin,

what error messages did you get when trying with FreeXL ?

Removing the FreeXL dependency removes support for the old prior-to-Excel-2007 binary XLS format. So usually not a big deal

Even

Le 29/06/2025 ? 02:45, Martin Chapman via gdal-dev a ?crit :

All,

 

I tried to build GDAL 3.11.0 from https://vcpkg.io/en/package/gdal and FreeXL kept failing on my Windows 11 box using Microsoft Visual Studio Professional 2022 (64-bit) ? Current Version 17.14.7.  To resolve the issue I built a custom-overlay port and removed FreeXL from the build and then everything built great.  I tried to just build FreeXL using VCPKG and that failed so I was wondering if it?s just my machine that is messed up or are others having issues as well?  By removing FreeXL will I be crippling any other drivers that may depend on it?  I looked at the docs and it didn?t seem that important?  Also, is there a way to specify what drivers not to build without doing a custom-overlay port?

 

Best regards,

Martin Chapman

 

 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250701/66d3edec/attachment.htm>

From jesse.r.meyer at nasa.gov  Thu Jul  3 13:14:48 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Thu, 3 Jul 2025 20:14:48 +0000
Subject: [gdal-dev] Possible to issue sqlite3_limit with "memory" OGR driver?
Message-ID: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>

We?re trying to gdal.Polygonize a feature that exceeds SQLite?s default blob size of 1,000,000,000 bytes.  Curiously, we?re using the memory dataset, but this appears to leverage SQLite under the hood (evidenced by the error message: ERROR 1: In GetNextRawFeature(): sqlite3_step() : string or blob too big).  SQLite docs state the that limit can be changed at runtime using the sqlite3_limit<https://www.sqlite.org/c3ref/limit.html>(db,SQLITE_LIMIT_LENGTH<https://www.sqlite.org/c3ref/c_limit_attached.html#sqlitelimitlength>,...) interface.   Maybe there could be some way to leverage PRELUDE_STATEMENTS to achieve this but we are not ?opening? a dataset - we?re creating one directly from the memory driver.

What is the best way to work around this?

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250703/df8d1795/attachment.htm>

From even.rouault at spatialys.com  Thu Jul  3 13:23:17 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Jul 2025 22:23:17 +0200
Subject: [gdal-dev] Possible to issue sqlite3_limit with "memory" OGR
 driver?
In-Reply-To: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <26b28923-3e0c-49ab-87ca-f8904263e949@spatialys.com>

Jesse,

Maybe you use SQL with the SQLite dialect? Otherwise we lack context to 
tell why you get SQLite kicking it.

I don't think sqlite3_limit() would really help you here, givenit can be 
used to grow settings beyond the compile time default which is 1 GiB I 
believe ("Attempts to increase a limit above its hard upper bound are 
silently truncated to the hard upper bound."). You would need to 
recompile SQLite itself.

Even

Le 03/07/2025 ? 22:14, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> We?re trying to gdal.Polygonize a feature that exceeds SQLite?s 
> default blob size of 1,000,000,000 bytes.? Curiously, we?re using the 
> memory dataset, but this appears to leverage SQLite under the hood 
> (evidenced by the error message: ERROR 1: In GetNextRawFeature(): 
> sqlite3_step() : string or blob too big).? SQLite docs state the that 
> limit can be changed at runtime using the sqlite3_limit 
> <https://www.sqlite.org/c3ref/limit.html>(db,SQLITE_LIMIT_LENGTH 
> <https://www.sqlite.org/c3ref/c_limit_attached.html#sqlitelimitlength>,...) 
> interface. ??Maybe there could be some way to leverage 
> PRELUDE_STATEMENTS to achieve this but we are not ?opening? a dataset 
> - we?re creating one directly from the memory driver.
>
> What is the best way to work around this?
>
> Best,
>
> Jesse
>
> Lead Computer Scientist
>
> Science Systems and Applications, Inc.
>
> Dr Compton Tucker Team
>
> NASA Goddard Space Flight Center
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250703/41fbaa50/attachment.htm>

From jesse.r.meyer at nasa.gov  Thu Jul  3 13:27:16 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Thu, 3 Jul 2025 20:27:16 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Possible to issue sqlite3_limit with
 "memory" OGR driver?
In-Reply-To: <26b28923-3e0c-49ab-87ca-f8904263e949@spatialys.com>
References: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>
 <26b28923-3e0c-49ab-87ca-f8904263e949@spatialys.com>
Message-ID: <MN2PR09MB5932F68C468CE6B9D913D3B8C943A@MN2PR09MB5932.namprd09.prod.outlook.com>

Thanks Even, that?s what I suspected.

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center

From: Even Rouault <even.rouault at spatialys.com>
Date: Thursday, July 3, 2025 at 4:23?PM
To: Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov>, gdal dev <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Possible to issue sqlite3_limit with "memory" OGR driver?
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.



Jesse,

Maybe you use SQL with the SQLite dialect? Otherwise we lack context to tell why you get SQLite kicking it.

I don't think sqlite3_limit() would really help you here, givenit can be used to grow settings beyond the compile time default which is 1 GiB I believe ("Attempts to increase a limit above its hard upper bound are silently truncated to the hard upper bound."). You would need to recompile SQLite itself.

Even
Le 03/07/2025 ? 22:14, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
We?re trying to gdal.Polygonize a feature that exceeds SQLite?s default blob size of 1,000,000,000 bytes.  Curiously, we?re using the memory dataset, but this appears to leverage SQLite under the hood (evidenced by the error message: ERROR 1: In GetNextRawFeature(): sqlite3_step() : string or blob too big).  SQLite docs state the that limit can be changed at runtime using the sqlite3_limit<https://www.sqlite.org/c3ref/limit.html>(db,SQLITE_LIMIT_LENGTH<https://www.sqlite.org/c3ref/c_limit_attached.html#sqlitelimitlength>,...) interface.   Maybe there could be some way to leverage PRELUDE_STATEMENTS to achieve this but we are not ?opening? a dataset - we?re creating one directly from the memory driver.

What is the best way to work around this?

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250703/a3898f56/attachment-0001.htm>

From mdsumner at gmail.com  Thu Jul  3 15:48:42 2025
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 4 Jul 2025 08:48:42 +1000
Subject: [gdal-dev] array dim permute
Message-ID: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>

I'm confused about the orientation of this in 2D mode 1485x1272 is correct,
with 122 bands.

(requires earthdata auth)

gdal raster info "/vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc"
  --output-format text | grep /rhos
#  SUBDATASET_1_NAME=NETCDF:"/vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc
":/geophysical_data/rhos
#  SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit
floating-point)

If we drill into the rhos sds X becomes unrolled as the 1485 bands:

gdal raster info "vrt:///vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos"
--output-format text | grep "Size"
#Size is 122, 1272

We can (redundantly??) cast via mdim to get 1485x1272, but then we've lost
the geolocation arrays:

gdal raster info "vrt:///vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1"
--output-format text | grep "Size"
#Size is 1485, 1272

At any rate in the default case the geolocation arrays don't match the data
orientation.

Cheers, Mike


-- 
Michael Sumner
Ordinary Member,  Streets People Love Hobart Association
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
0438489030
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/d20dc632/attachment.htm>

From even.rouault at spatialys.com  Fri Jul  4 03:21:26 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jul 2025 12:21:26 +0200
Subject: [gdal-dev] array dim permute
In-Reply-To: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
References: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
Message-ID: <795392c5-349f-4217-848b-5af0572283be@spatialys.com>

Hi Michael,

I guess this is finally the perfect use case we were waiting for to find 
a good reason to embed a Small Language Model within GDAL to figure out 
what are the columns and lines axis.? In the meantime, the boring 
https://github.com/OSGeo/gdal/pull/12700 will fix it

Even

Le 04/07/2025 ? 00:48, Michael Sumner via gdal-dev a ?crit?:
> I'm confused about the orientation of this in 2D mode 1485x1272 is 
> correct, with 122 bands.
>
> (requires earthdata auth)
>
> gdal raster info 
> "/vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc" 
> ? --output-format text | grep /rhos
> # 
> ?SUBDATASET_1_NAME=NETCDF:"/vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc":/geophysical_data/rhos
> # ?SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit 
> floating-point)
>
> If we drill into the rhos sds X becomes unrolled as the 1485 bands:
>
> gdal raster info 
> "vrt:///vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos" 
> --output-format text | grep "Size"
> #Size is 122, 1272
>
> We can (redundantly??) cast via mdim to get 1485x1272, but then we've 
> lost the geolocation arrays:
>
> gdal raster info 
> "vrt:///vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1" 
> --output-format text | grep "Size"
> #Size is 1485, 1272
>
> At any rate in the default case the geolocation arrays don't match the 
> data orientation.
>
> Cheers, Mike
>
> -- 
> Michael Sumner
> Ordinary Member,? Streets People Love Hobart Association
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> 0438489030
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/77921de2/attachment.htm>

From mdsumner at gmail.com  Fri Jul  4 04:22:51 2025
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 4 Jul 2025 21:22:51 +1000
Subject: [gdal-dev] array dim permute
In-Reply-To: <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
References: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
 <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
Message-ID: <CAAcGz98ZS93rBKfcspN25OU8c7BA8XAh4VbNW8LNkSC789a1oQ@mail.gmail.com>

Thanks Even!  Amazing, I don't think this is a rare case either, there's a
lot of data in files "like this" that I keep encountering.

Another few lines in the NetCDF behemoth, I'll keep reading (and update my
AI subscriptions).

Cheers, Mike


On Fri, Jul 4, 2025 at 8:21?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Michael,
>
> I guess this is finally the perfect use case we were waiting for to find a
> good reason to embed a Small Language Model within GDAL to figure out what
> are the columns and lines axis.  In the meantime, the boring
> https://github.com/OSGeo/gdal/pull/12700 will fix it
>
> Even
> Le 04/07/2025 ? 00:48, Michael Sumner via gdal-dev a ?crit :
>
> I'm confused about the orientation of this in 2D mode 1485x1272 is
> correct, with 122 bands.
>
> (requires earthdata auth)
>
> gdal raster info "/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc"
>   --output-format text | grep /rhos
> #  SUBDATASET_1_NAME=NETCDF:"/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc
> ":/geophysical_data/rhos
> #  SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit
> floating-point)
>
> If we drill into the rhos sds X becomes unrolled as the 1485 bands:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos"
> --output-format text | grep "Size"
> #Size is 122, 1272
>
> We can (redundantly??) cast via mdim to get 1485x1272, but then we've lost
> the geolocation arrays:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1"
> --output-format text | grep "Size"
> #Size is 1485, 1272
>
> At any rate in the default case the geolocation arrays don't match the
> data orientation.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Ordinary Member,  Streets People Love Hobart Association
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> 0438489030
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Ordinary Member,  Streets People Love Hobart Association
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
0438489030
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/4e43c3d0/attachment.htm>

From j1 at jimenezshaw.com  Fri Jul  4 07:29:48 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 4 Jul 2025 16:29:48 +0200
Subject: [gdal-dev] array dim permute
In-Reply-To: <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
References: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
 <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
Message-ID: <CADRrdKun7KkNcbRzfvb0m-27X16aEhob1-wYZdC7ywX-RApHnQ@mail.gmail.com>

"Small Language Mode"
LOL

On Fri, 4 Jul 2025 at 12:21, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Michael,
>
> I guess this is finally the perfect use case we were waiting for to find a
> good reason to embed a Small Language Model within GDAL to figure out what
> are the columns and lines axis.  In the meantime, the boring
> https://github.com/OSGeo/gdal/pull/12700 will fix it
>
> Even
> Le 04/07/2025 ? 00:48, Michael Sumner via gdal-dev a ?crit :
>
> I'm confused about the orientation of this in 2D mode 1485x1272 is
> correct, with 122 bands.
>
> (requires earthdata auth)
>
> gdal raster info "/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc"
>   --output-format text | grep /rhos
> #  SUBDATASET_1_NAME=NETCDF:"/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc
> ":/geophysical_data/rhos
> #  SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit
> floating-point)
>
> If we drill into the rhos sds X becomes unrolled as the 1485 bands:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos"
> --output-format text | grep "Size"
> #Size is 122, 1272
>
> We can (redundantly??) cast via mdim to get 1485x1272, but then we've lost
> the geolocation arrays:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1"
> --output-format text | grep "Size"
> #Size is 1485, 1272
>
> At any rate in the default case the geolocation arrays don't match the
> data orientation.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Ordinary Member,  Streets People Love Hobart Association
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> 0438489030
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/481668ca/attachment-0001.htm>

From alexhighviz at hotmail.com  Fri Jul  4 10:08:30 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Fri, 4 Jul 2025 17:08:30 +0000
Subject: [gdal-dev] Random Raster Driver
Message-ID: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Hi all,

I implemented a plugin raster format that produces raster of random values using the all the distributions that are offered by the standard library's random header. It is different from other random raster functionality in e.g. ArcGIS or QGIS because it does not store the data on file but generates blocks of data on-demand.

Now it is for my own use, but I'd be happy to polish it up if it can become part of GDAL.

There is documentation here:

https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md
[https://opengraph.githubassets.com/6043ab82cae0d7a681691a0536f0523cc36150ff5a466ad797d69782e59b5e8b/ahhz/random-raster]<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
random-raster/docs/random_raster_driver.md at main ? ahhz/random-raster<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
Create GDALDatasets containing rasters of random values, that do not store the values on disk - ahhz/random-raster
github.com
Would this be of interest as a GDAL format?

Kind regards, Alex


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/4810562a/attachment.htm>

From j1 at jimenezshaw.com  Fri Jul  4 10:50:43 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 4 Jul 2025 19:50:43 +0200
Subject: [gdal-dev] strange wkt recognition
Message-ID: <CADRrdKsVydnSmGJRpOg0HPxoztzACXk+sUihGZU=FW+1BY72TA@mail.gmail.com>

Hi

I would like to understand why do I have different behaviour recognizing a
WKT between GDAL 3.9.2 and 3.11.1, both using PROJ 9.5.0 (using C++)

There is a clear mistake in the WKT bellow: EPSG:102641 . It should be
ESRI. But the source of the data was wrong, and we worked with that for a
long time.

PROJCS["NAD_1983_StatePlane_California_I_FIPS_0401_Feet",GEOGCS["GCS_North_American_1983",DATUM["North_American_Datum_1983",
SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Lambert_Conformal_Conic_2SP"],
PARAMETER["False_Easting",6561666.666666666],PARAMETER["False_Northing",1640416.666666667],PARAMETER["Central_Meridian",-122],
PARAMETER["Standard_Parallel_1",40],PARAMETER["Standard_Parallel_2",41.66666666666666],PARAMETER["Latitude_Of_Origin",39.33333333333334],
UNIT["Foot_US",0.30480060960121924],AUTHORITY["EPSG","102641"]]

and yes, ESRI version of WKT does not have AUTHORITY. Again, the data
source is what it is.

My failing test is because OGRCreateCoordinateTransformation called with
EPSG:4326 and calStatePlaneCS (created with SetFromUserInput) is failing.
The reason I found is in GetTextRepresentation in ogrct.cpp. There it
checks (if I understood correctly) if EPSG:102641 and the
OGRSpatialReference constructed from the string are equivalent.
In GDAL 3.9.2 the function IsSame is returning false, and
GetTextRepresentation is trying later with PROJJSON
In GDAL 3.11.1 the function IsSame returns true, and it is using
EPSG:102641, that fails later in OGRProjCT::Initialize (more in particular
in auto targetCRS = proj_create(ctx, pszTargetSRS);)

See that I am not changing the version of PROJ: 9.5.0

I have been looking for any change in GDAL code that would explain why the
wrong "WKT from California" behaves differently, but I couldn't find
anything. The changes in the code in ogrct.cpp and ogrspatialreference.cpp
that I think are involved are years old (just a thread safe lock changed).
But obviously I am missing something.

Could you help me?

Thanks.
Javier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/9df0fdf3/attachment.htm>

From even.rouault at spatialys.com  Fri Jul  4 11:13:42 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jul 2025 20:13:42 +0200
Subject: [gdal-dev] strange wkt recognition
In-Reply-To: <CADRrdKsVydnSmGJRpOg0HPxoztzACXk+sUihGZU=FW+1BY72TA@mail.gmail.com>
References: <CADRrdKsVydnSmGJRpOg0HPxoztzACXk+sUihGZU=FW+1BY72TA@mail.gmail.com>
Message-ID: <5c9e5c2c-0ff8-4a70-b2b5-1047dbd69d12@spatialys.com>

Hi Javier,

the difference between 3.9.2 and 3.11 that explains what you see is : 
https://github.com/OSGeo/gdal/commit/a4aa0b50154b0558e2677a31dde416452ac07c97 
: "OGRSpatialReference::importFromEPSG(): tries with ESRI when it looks 
like an ESRI code, but with a warning when that succeeds"

The issue is then that GDAL tries to pass EPSG:102641 to proj_create() 
and proj_create() hasn't the above hack.

Fixed in https://github.com/OSGeo/gdal/pull/12705

Even


Le 04/07/2025 ? 19:50, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> I would like to understand why do I have different behaviour 
> recognizing a WKT between GDAL 3.9.2 and 3.11.1, both using PROJ 9.5.0 
> (using C++)
>
> There is a clear mistake in the WKT bellow: EPSG:102641 . It should be 
> ESRI. But the source of the data was wrong, and we worked with that 
> for a long time.
>
> PROJCS["NAD_1983_StatePlane_California_I_FIPS_0401_Feet",GEOGCS["GCS_North_American_1983",DATUM["North_American_Datum_1983",
> SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Lambert_Conformal_Conic_2SP"],
> PARAMETER["False_Easting",6561666.666666666],PARAMETER["False_Northing",1640416.666666667],PARAMETER["Central_Meridian",-122],
> PARAMETER["Standard_Parallel_1",40],PARAMETER["Standard_Parallel_2",41.66666666666666],PARAMETER["Latitude_Of_Origin",39.33333333333334],
> UNIT["Foot_US",0.30480060960121924],AUTHORITY["EPSG","102641"]]
>
> and yes, ESRI version of WKT does not have AUTHORITY. Again, the data 
> source is what it is.
>
> My failing test is because OGRCreateCoordinateTransformation called 
> with EPSG:4326 and calStatePlaneCS (created with SetFromUserInput) is 
> failing.
> The reason I found is in GetTextRepresentation in ogrct.cpp. There it 
> checks (if I understood correctly) if EPSG:102641 and the 
> OGRSpatialReference constructed from the string are equivalent.
> In GDAL 3.9.2 the function IsSame is returning false, and 
> GetTextRepresentation is trying later with PROJJSON
> In GDAL 3.11.1 the function IsSame returns true, and it is using 
> EPSG:102641, that fails later in OGRProjCT::Initialize (more in 
> particular in auto targetCRS = proj_create(ctx, pszTargetSRS);)
>
> See that I am not changing the version of PROJ: 9.5.0
>
> I have been looking for any change in GDAL code that would explain why 
> the wrong "WKT from California" behaves differently, but I couldn't 
> find anything. The changes in the code in ogrct.cpp and 
> ogrspatialreference.cpp that I think are involved are years old (just 
> a thread safe lock changed). But obviously I am missing something.
>
> Could you help me?
>
> Thanks.
> Javier
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/9c921b9f/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Jul  5 05:44:23 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Jul 2025 14:44:23 +0200
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
Message-ID: <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>

Alex,


I'm not super familiar myself with the usage of such random rasters, but 
it seems to be fairly common indeed in GIS software, and could likely 
make sense within GDAL too. I'm wondering if instead of having a new 
driver, the random distribution functions could not be exposed as VRT 
C++ built-in pixel functions 
(https://gdal.org/en/stable/drivers/raster/vrt.html#built-in-pixel-functions). 
That would make it possible to benefit from all the rest of the VRT 
infrastructure like setting geospatial information, adding metadata, 
multiband support etc There would be a bit of tweak to do in the 
VRTDerivedRasterBand in that case to force it to always operate on block 
boundaries (instead of any arbitrary requested window), so that the 
per-block seed can be used, but that should mostly be a matter of a few 
lines to add in its IRasterIO() implementation.


Even


Le 04/07/2025 ? 19:08, Alex Hagen-Zanker via gdal-dev a ?crit?:
> Hi all,
>
> I implemented a plugin raster format that produces raster of random 
> values using the all the distributions that are offered by the 
> standard library's random header. It is different from other random 
> raster functionality in e.g. ArcGIS or QGIS because it does not store 
> the data on file but generates blocks of data on-demand.
>
> Now it is for my own use, but I'd be happy to polish it up if it can 
> become part of GDAL.
>
> There is documentation here:
>
> https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md
> <https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
> 	
> random-raster/docs/random_raster_driver.md at main ? 
> ahhz/random-raster 
> <https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
> Create GDALDatasets containing rasters of random values, that do not 
> store the values on disk - ahhz/random-raster
> github.com
>
> Would this be of interest as a GDAL format?
>
> Kind regards, Alex
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250705/b4f278de/attachment.htm>

From public at postholer.com  Sat Jul  5 20:02:05 2025
From: public at postholer.com (Scott)
Date: Sat, 5 Jul 2025 20:02:05 -0700
Subject: [gdal-dev] GDAL CLI feature request
Message-ID: <a1576a42-5312-4d05-a707-dee66b6f7765@postholer.com>

When specifying bands from a raster, say:

gdal raster pipeline ! ... ! select -b "1,2,3,4,12,13,14,15,20,21" ! ...

It would be *nice* to be able to use a range of bands, perhaps with 
individual bands mixed in. Something like:

-b "1-4,12-15,20,21" ...

This would be hugely useful for calc and pixel functions in mosaic with 
the forthcoming --flatten switch in 3.12. Calc might look like:

-i A=input.tif --calc="max(A[1-4,12-15,20,21])"

Often you need to pull a large number of bands out of a netcdf or tif 
and it's always been a pain.

Also, nit-picky doc issue. The following --nodata paragraph is missing 
the magic words, "Added in version 3.12":

https://gdal.org/en/latest/programs/gdal_raster_calc.html#cmdoption-nodata

Thanks!
Scott
-- 
www.postholer.com


From alexhighviz at hotmail.com  Sun Jul  6 15:03:50 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Sun, 6 Jul 2025 22:03:50 +0000
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
Message-ID: <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Hi Even,

Random rasters are indeed fairly common functionality, and used for instance in dynamic simulations, synthetic landscape generation and some Monte Carlo type statistical approaches.

Having the random raster as a VRT does make sense to me, it would side-by-side with other generated raster types. I also agree that it would be preferred over having yet another raster format, especially if it is not-really-a-data-format.

I am not sure if I understand your suggestion correctly. Are you suggesting to change the behaviour or VRT DerivedRasterBand in general so that its IRasterIO would only work on block boundaries? That seems quite drastic to me. I think there would be a few more minor adaptations necessary for VRTDerivedRasterBand so that it can accept that there are zero source layers for the pixel function.

Looking at VRTDerivedRasterband I was surprised that it implements IRasterIO rather than IReadBlock. If you indeed meant to restrict IRasterIO to block boundaries in general, would it be a consideration to implement it as IReadBlock and use default behaviour for IRasterIO? From my understanding that would change the way the caching works, as it would cache the results of the pixel function rather than the input to the pixel function. It would also allow RasterIO to still be used as it currently is.

If you would leave it as IRasterIO, would the random values be cached at all? Or always just generated when requested?

Kind regards, Alex


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: 05 July 2025 13:44
To: Alex Hagen-Zanker <alexhighviz at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Random Raster Driver


Alex,


I'm not super familiar myself with the usage of such random rasters, but it seems to be fairly common indeed in GIS software, and could likely make sense within GDAL too. I'm wondering if instead of having a new driver, the random distribution functions could not be exposed as VRT C++ built-in pixel functions (https://gdal.org/en/stable/drivers/raster/vrt.html#built-in-pixel-functions).  That would make it possible to benefit from all the rest of the VRT infrastructure like setting geospatial information, adding metadata, multiband support etc There would be a bit of tweak to do in the VRTDerivedRasterBand in that case to force it to always operate on block boundaries (instead of any arbitrary requested window), so that the per-block seed can be used, but that should mostly be a matter of a few lines to add in its IRasterIO() implementation.


Even


Le 04/07/2025 ? 19:08, Alex Hagen-Zanker via gdal-dev a ?crit :
Hi all,

I implemented a plugin raster format that produces raster of random values using the all the distributions that are offered by the standard library's random header. It is different from other random raster functionality in e.g. ArcGIS or QGIS because it does not store the data on file but generates blocks of data on-demand.

Now it is for my own use, but I'd be happy to polish it up if it can become part of GDAL.

There is documentation here:

https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md
[https://opengraph.githubassets.com/6043ab82cae0d7a681691a0536f0523cc36150ff5a466ad797d69782e59b5e8b/ahhz/random-raster]<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
random-raster/docs/random_raster_driver.md at main ? ahhz/random-raster<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
Create GDALDatasets containing rasters of random values, that do not store the values on disk - ahhz/random-raster
github.com
Would this be of interest as a GDAL format?

Kind regards, Alex





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250706/23947fe3/attachment.htm>

From even.rouault at spatialys.com  Sun Jul  6 15:13:53 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 00:13:53 +0200
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
 <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
Message-ID: <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>

Alex,
>
> I am not sure if I understand your suggestion correctly. Are you 
> suggesting to change the behaviour or VRT DerivedRasterBand in general 
> so that its IRasterIO would only work on block boundaries? That seems 
> quite drastic to me.

No, my suggestion was to do that only when one of the random pixel 
functions is used.

> I think there would be a few more minor adaptations necessary for 
> VRTDerivedRasterBand so that it can accept that there are zero source 
> layers for the pixel function.
Yes
>
> Looking at VRTDerivedRasterband I was surprised that it implements 
> IRasterIO rather than IReadBlock.

The base class VRTSourcedRasterBand has a IReadBlock() method that 
forwards to IRasterIO(). That way you get both the caching effect if 
block based reading is done and goes through IReadBlock(), or if 
VRTDerivedRasterBand::IRasterIO() is directly called, it is short circuited.

> If you indeed meant to restrict IRasterIO to block boundaries in 
> general, would it be a consideration to implement it as IReadBlock and 
> use default behaviour for IRasterIO? From my understanding that would 
> change the way the caching works, as it would cache the results of the 
> pixel function rather than the input to the pixel function. It would 
> also allow RasterIO to still be used as it currently is.

basically what I'm suggesting is something along those lines:

CPLErr VRTDerivedRasterBand::IRasterIO(.... )
{
 ????? if( use_one_of_the_random_functions )
 ??????????? return GDALRasterBand::IRasterIO( ... );? // force base 
method to IReadBlock(), which will go to 
VRTSourcedRasterBand::IReadBlock() which will call us again, but on 
block boundaries

 ????? rest of the method mostly unchanged.? You'll need to pass the 
nXOff and nYOff arguments as arguments of the random pixel functions, 
around lines 1580-1590

}

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/b61ca27e/attachment-0001.htm>

From johnsmith7862025 at outlook.com  Mon Jul  7 01:55:04 2025
From: johnsmith7862025 at outlook.com (John Smith)
Date: Mon, 7 Jul 2025 08:55:04 +0000
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
Message-ID: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>

Hello

Can anyone explain the concept of proxy driver and real driver in GDAL? I am looking at the link https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html

Say I create an external plugin of some data format for e.g. say JP2 and then some Geospatial server loads my plugin file.


  1.
In this scenario I think the geospatial driver needs GDAL libs as well?
  2.
Now what is the proxy driver and what is real driver in this context? Is the real driver inside GDAL or inside my plugin?
  3.
What is the proxy driver in context of question (b)



Please clarify me so that I have clear picture in my mind.

BR
John

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/84608f8e/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  7 02:03:23 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 11:03:23 +0200
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
Message-ID: <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>

John,


As stated in the intro, this RFC is mostly for *in-tree* drivers. If you 
develop an out-of-tree plugin that doesn't modify GDAL sources, then you 
can ignore it


Even


Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit?:
> Hello
>
> Can anyone explain the concept of proxy driver and real driver in 
> GDAL? I am looking at the link 
> https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html
>
> Say I create an external plugin of some data format for e.g. say JP2 
> and then some Geospatial server loads my plugin file.
>
> 1.
>     In this scenario I think the geospatial driver needs GDAL libs as
>     well?
> 2.
>     Now what is the proxy driver and what is real driver in this
>     context? Is the real driver inside GDAL or inside my plugin?
> 3.
>     What is the proxy driver in context of question (b)
>
>
> Please clarify me so that I have clear picture in my mind.
>
> BR
> John
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/ae6f6ee5/attachment.htm>

From sharma1981 at outlook.com  Mon Jul  7 02:21:53 2025
From: sharma1981 at outlook.com (Parveen Sharma)
Date: Mon, 7 Jul 2025 09:21:53 +0000
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
 <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
Message-ID: <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>

Thanks Even

Still do you think I could have a brief intro if it's an in-tree driver. So from that point of view what would constitute a proxy and real driver?

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Monday, July 7, 2025 5:03 PM
To: John Smith <johnsmith7862025 at outlook.com>; Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Proxy vs Real Driver in GDAL


John,


As stated in the intro, this RFC is mostly for *in-tree* drivers. If you develop an out-of-tree plugin that doesn't modify GDAL sources, then you can ignore it


Even


Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit :
Hello

Can anyone explain the concept of proxy driver and real driver in GDAL? I am looking at the link https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html

Say I create an external plugin of some data format for e.g. say JP2 and then some Geospatial server loads my plugin file.


  1.
In this scenario I think the geospatial driver needs GDAL libs as well?
  2.
Now what is the proxy driver and what is real driver in this context? Is the real driver inside GDAL or inside my plugin?
  3.
What is the proxy driver in context of question (b)



Please clarify me so that I have clear picture in my mind.

BR
John




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/a601ea46/attachment-0001.htm>

From johnsmith7862025 at outlook.com  Mon Jul  7 02:37:54 2025
From: johnsmith7862025 at outlook.com (John Smith)
Date: Mon, 7 Jul 2025 09:37:54 +0000
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
 <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
 <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <TYZPR06MB4015AD97EBE074F50E53E10E884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>

Yeah
I am after that kind of explanation.
@Even Rouault via gdal-dev<mailto:gdal-dev at lists.osgeo.org> - Do you think there is any quick explanation available for this scenario?
________________________________
From: Parveen Sharma <sharma1981 at outlook.com>
Sent: Monday, July 7, 2025 9:21 AM
To: Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>; John Smith <johnsmith7862025 at outlook.com>; Even Rouault <even.rouault at spatialys.com>
Subject: Re: [gdal-dev] Proxy vs Real Driver in GDAL

Thanks Even

Still do you think I could have a brief intro if it's an in-tree driver. So from that point of view what would constitute a proxy and real driver?

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Monday, July 7, 2025 5:03 PM
To: John Smith <johnsmith7862025 at outlook.com>; Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Proxy vs Real Driver in GDAL


John,


As stated in the intro, this RFC is mostly for *in-tree* drivers. If you develop an out-of-tree plugin that doesn't modify GDAL sources, then you can ignore it


Even


Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit :
Hello

Can anyone explain the concept of proxy driver and real driver in GDAL? I am looking at the link https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html

Say I create an external plugin of some data format for e.g. say JP2 and then some Geospatial server loads my plugin file.


  1.
In this scenario I think the geospatial driver needs GDAL libs as well?
  2.
Now what is the proxy driver and what is real driver in this context? Is the real driver inside GDAL or inside my plugin?
  3.
What is the proxy driver in context of question (b)



Please clarify me so that I have clear picture in my mind.

BR
John




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/bce1a4ab/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  7 02:48:40 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 11:48:40 +0200
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <TYZPR06MB4015AD97EBE074F50E53E10E884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
 <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
 <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <TYZPR06MB4015AD97EBE074F50E53E10E884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
Message-ID: <8d0e2dd4-0368-42f9-9bf8-7c1f11cc2671@spatialys.com>

- How to create a GDAL driver: 
https://gdal.org/en/stable/tutorials/raster_driver_tut.html

- GDAL-GRASS plugin driver example: https://github.com/OSGeo/gdal-grass/

Le 07/07/2025 ? 11:37, John Smith a ?crit?:
> Yeah
> I am after that kind of explanation.
> @Even Rouault via gdal-dev <mailto:gdal-dev at lists.osgeo.org>?- Do you 
> think there is any quick explanation available for this scenario?
> ------------------------------------------------------------------------
> *From:* Parveen Sharma <sharma1981 at outlook.com>
> *Sent:* Monday, July 7, 2025 9:21 AM
> *To:* Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>; John Smith 
> <johnsmith7862025 at outlook.com>; Even Rouault <even.rouault at spatialys.com>
> *Subject:* Re: [gdal-dev] Proxy vs Real Driver in GDAL
> Thanks Even
>
> Still do you think I could have a brief intro if it's an in-tree 
> driver. So from that point of view what would constitute a proxy and 
> real driver?
>
> ------------------------------------------------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even 
> Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
> *Sent:* Monday, July 7, 2025 5:03 PM
> *To:* John Smith <johnsmith7862025 at outlook.com>; Even Rouault via 
> gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Proxy vs Real Driver in GDAL
>
> John,
>
>
> As stated in the intro, this RFC is mostly for *in-tree* drivers. If 
> you develop an out-of-tree plugin that doesn't modify GDAL sources, 
> then you can ignore it
>
>
> Even
>
>
> Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit?:
>> Hello
>>
>> Can anyone explain the concept of proxy driver and real driver in 
>> GDAL? I am looking at the link 
>> https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html 
>> <https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html>
>>
>> Say I create an external plugin of some data format for e.g. say JP2 
>> and then some Geospatial server loads my plugin file.
>>
>> 1.
>>     In this scenario I think the geospatial driver needs GDAL libs as
>>     well?
>> 2.
>>     Now what is the proxy driver and what is real driver in this
>>     context? Is the real driver inside GDAL or inside my plugin?
>> 3.
>>     What is the proxy driver in context of question (b)
>>
>>
>> Please clarify me so that I have clear picture in my mind.
>>
>> BR
>> John
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/85b1c71d/attachment-0001.htm>

From alexhighviz at hotmail.com  Mon Jul  7 03:18:29 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Mon, 7 Jul 2025 10:18:29 +0000
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
 <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>
Message-ID: <GV1P251MB0747FD9AE6F46D0224DD3D67B44FA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Hi Even,

Thank you, now I get it, and that would work well I think.

Would the next step be for me to prepare a PR based on this?

Kind regards, Alex
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: 06 July 2025 23:13
To: Alex Hagen-Zanker <alexhighviz at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Random Raster Driver

Alex,

I am not sure if I understand your suggestion correctly. Are you suggesting to change the behaviour or VRT DerivedRasterBand in general so that its IRasterIO would only work on block boundaries? That seems quite drastic to me.

No, my suggestion was to do that only when one of the random pixel functions is used.

I think there would be a few more minor adaptations necessary for VRTDerivedRasterBand so that it can accept that there are zero source layers for the pixel function.
Yes

Looking at VRTDerivedRasterband I was surprised that it implements IRasterIO rather than IReadBlock.

The base class VRTSourcedRasterBand has a IReadBlock() method that forwards to IRasterIO(). That way you get both the caching effect if block based reading is done and goes through IReadBlock(), or if VRTDerivedRasterBand::IRasterIO() is directly called, it is short circuited.

If you indeed meant to restrict IRasterIO to block boundaries in general, would it be a consideration to implement it as IReadBlock and use default behaviour for IRasterIO? From my understanding that would change the way the caching works, as it would cache the results of the pixel function rather than the input to the pixel function. It would also allow RasterIO to still be used as it currently is.

basically what I'm suggesting is something along those lines:

CPLErr VRTDerivedRasterBand::IRasterIO(.... )
{
      if( use_one_of_the_random_functions )
            return GDALRasterBand::IRasterIO( ... );  // force base method to IReadBlock(), which will go to VRTSourcedRasterBand::IReadBlock() which will call us again, but on block boundaries

      rest of the method mostly unchanged.  You'll need to pass the nXOff and nYOff arguments as arguments of the random pixel functions, around lines 1580-1590

}

Even


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/b18e3bfc/attachment.htm>

