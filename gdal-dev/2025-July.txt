From even.rouault at spatialys.com  Tue Jul  1 02:05:57 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Jul 2025 11:05:57 +0200
Subject: [gdal-dev] Motion: approve GDAL 3.11.1RC2 as final release
In-Reply-To: <3aa96fe2-a5e2-4a1e-a136-f4063850276c@spatialys.com>
References: <3aa96fe2-a5e2-4a1e-a136-f4063850276c@spatialys.com>
Message-ID: <896cd560-cbfe-4f02-b79e-a2760d0ac77d@spatialys.com>

Passed with +1 from PSC members TamasS, JukkaR, MichaelS, JavierJS and me

Le 27/06/2025 ? 11:00, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Tue Jul  1 02:22:15 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 1 Jul 2025 11:22:15 +0200
Subject: [gdal-dev] GDAL 3.11.1 is released
Message-ID: <b34770c2-4294-4dbe-914f-04e505f58823@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.11.1 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.11.1/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.xz
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.xz.md5
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.xz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.gz
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.gz.md5
 ??? https://download.osgeo.org/gdal/3.11.1/gdal-3.11.1.tar.gz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.1/gdal3111.zip
 ??? https://download.osgeo.org/gdal/3.11.1/gdal3111.zip.md5
 ??? https://download.osgeo.org/gdal/3.11.1/gdal3111.zip.sig

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From dg0yt at darc.de  Tue Jul  1 12:42:40 2025
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Tue, 1 Jul 2025 21:42:40 +0200
Subject: [gdal-dev] Building GDAL from VCPKG fails with FreeXL
In-Reply-To: <01ba01dbe918$ed127ba0$c73772e0$@hyperacktive.com>
References: <018501dbe88f$23c3e650$6b4bb2f0$@hyperacktive.com>
 <93d3a5b5-ecfa-4a05-b555-a24a828e5586@spatialys.com>
 <01ba01dbe918$ed127ba0$c73772e0$@hyperacktive.com>
Message-ID: <6bab8526-6c93-40d3-b42c-2aaedc8b7f5e@darc.de>

- The freexl port builds in vcpkg CI, and there are no open issues for 
Windows.
- Either there are log files for the actual error, reported on the 
console, or it fails early for example because of mixing different 
msys2/cygwin runtimes.
- freexl is an optional feature of port gdal. If nothing asks for it, it 
is not enabled in port gdal.
- However, libspatialite is a default feature of port gdal, and freexl 
is a default feature of port libspatialite. ATM it is not possible to 
opt-out from libspatialite[freexl], but this will be fixed with port 
gdal 3.11.1.
- To opt-out from all default features of a port, you must declare this 
in the top-level manifest (manifest mode) or by using the pseudo feaure 
"core" (classic mode).? The reason why you can't do this now with 
libspatialite[core] is that gdal[libspatialite] implicitly depends on 
the default features of port libspatialite.

Kai Pastor

Am 29.06.25 um 19:11 schrieb Martin Chapman via gdal-dev:
>
> Even,
>
> I didn?t save the exact message but it was fairly non descriptive.? It 
> was something like BUILD_FAILED.? Sorry, my bad for not saving the 
> exact message.? It sounds like it may have just been my environment 
> and if it?s not critical then I can live without it.? If no one else 
> is complaining then I wouldn?t waste time looking into it.? If I have 
> time later I will try to rebuild and reproduce the error, it just 
> takes an hour to build so can?t do it right now.? Thanks for your help 
> though!
>
> Best regards,
>
> Martin Chapman
>
> *From:*Even Rouault <even.rouault at spatialys.com>
> *Sent:* Sunday, June 29, 2025 3:33 AM
> *To:* mchapman at hyperacktive.com; gdal-dev at lists.osgeo.org
> *Subject:* Re: [gdal-dev] Building GDAL from VCPKG fails with FreeXL
>
> Martin,
>
> what error messages did you get when trying with FreeXL ?
>
> Removing the FreeXL dependency removes support for the old 
> prior-to-Excel-2007 binary XLS format. So usually not a big deal
>
> Even
>
> Le 29/06/2025 ? 02:45, Martin Chapman via gdal-dev a ?crit?:
>
>     All,
>
>     I tried to build GDAL 3.11.0 from https://vcpkg.io/en/package/gdal
>     and FreeXL kept failing on my Windows 11 box using Microsoft
>     Visual Studio Professional 2022 (64-bit) ? Current Version
>     17.14.7.? To resolve the issue I built a custom-overlay port and
>     removed FreeXL from the build and then everything built great.? I
>     tried to just build FreeXL using VCPKG and that failed so I was
>     wondering if it?s just my machine that is messed up or are others
>     having issues as well?? By removing FreeXL will I be crippling any
>     other drivers that may depend on it?? I looked at the docs and it
>     didn?t seem that important? Also, is there a way to specify what
>     drivers not to build without doing a custom-overlay port?
>
>     Best regards,
>
>     Martin Chapman
>
>
>
>     _______________________________________________
>
>     gdal-dev mailing list
>
>     gdal-dev at lists.osgeo.org
>
>     https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250701/34ebe5ce/attachment.htm>

From mchapman at hyperacktive.com  Tue Jul  1 13:10:53 2025
From: mchapman at hyperacktive.com (mchapman at hyperacktive.com)
Date: Tue, 1 Jul 2025 14:10:53 -0600
Subject: [gdal-dev] Building GDAL from VCPKG fails with FreeXL
In-Reply-To: <6bab8526-6c93-40d3-b42c-2aaedc8b7f5e@darc.de>
References: <018501dbe88f$23c3e650$6b4bb2f0$@hyperacktive.com>
 <93d3a5b5-ecfa-4a05-b555-a24a828e5586@spatialys.com>
 <01ba01dbe918$ed127ba0$c73772e0$@hyperacktive.com>
 <6bab8526-6c93-40d3-b42c-2aaedc8b7f5e@darc.de>
Message-ID: <02ac01dbeac4$40aeaac0$c20c0040$@hyperacktive.com>

Thanks for the information Kai.  I will look into it next week after the holiday weekend.  It must be something on my system.  Sorry to bother you with it but thank you so much for all your feedback.  I really love using GDAL and all the great work you people have done throughout the years!

 

Best regards,

Martin Chapman

 

From: Kai Pastor, DG0YT <dg0yt at darc.de> 
Sent: Tuesday, July 1, 2025 1:43 PM
To: mchapman at hyperacktive.com; 'Even Rouault' <even.rouault at spatialys.com>; gdal-dev at lists.osgeo.org
Subject: Re: [gdal-dev] Building GDAL from VCPKG fails with FreeXL

 

- The freexl port builds in vcpkg CI, and there are no open issues for Windows.

- Either there are log files for the actual error, reported on the console, or it fails early for example because of mixing different msys2/cygwin runtimes.

- freexl is an optional feature of port gdal. If nothing asks for it, it is not enabled in port gdal.

- However, libspatialite is a default feature of port gdal, and freexl is a default feature of port libspatialite. ATM it is not possible to opt-out from libspatialite[freexl], but this will be fixed with port gdal 3.11.1.

- To opt-out from all default features of a port, you must declare this in the top-level manifest (manifest mode) or by using the pseudo feaure "core" (classic mode).  The reason why you can't do this now with libspatialite[core] is that gdal[libspatialite] implicitly depends on the default features of port libspatialite.

 

Kai Pastor

 

Am 29.06.25 um 19:11 schrieb Martin Chapman via gdal-dev:

Even,

 

I didn?t save the exact message but it was fairly non descriptive.  It was something like BUILD_FAILED.  Sorry, my bad for not saving the exact message.  It sounds like it may have just been my environment and if it?s not critical then I can live without it.  If no one else is complaining then I wouldn?t waste time looking into it.  If I have time later I will try to rebuild and reproduce the error, it just takes an hour to build so can?t do it right now.  Thanks for your help though!

  

Best regards,

Martin Chapman

 

From: Even Rouault  <mailto:even.rouault at spatialys.com> <even.rouault at spatialys.com> 
Sent: Sunday, June 29, 2025 3:33 AM
To: mchapman at hyperacktive.com <mailto:mchapman at hyperacktive.com> ; gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
Subject: Re: [gdal-dev] Building GDAL from VCPKG fails with FreeXL

 

Martin,

what error messages did you get when trying with FreeXL ?

Removing the FreeXL dependency removes support for the old prior-to-Excel-2007 binary XLS format. So usually not a big deal

Even

Le 29/06/2025 ? 02:45, Martin Chapman via gdal-dev a ?crit :

All,

 

I tried to build GDAL 3.11.0 from https://vcpkg.io/en/package/gdal and FreeXL kept failing on my Windows 11 box using Microsoft Visual Studio Professional 2022 (64-bit) ? Current Version 17.14.7.  To resolve the issue I built a custom-overlay port and removed FreeXL from the build and then everything built great.  I tried to just build FreeXL using VCPKG and that failed so I was wondering if it?s just my machine that is messed up or are others having issues as well?  By removing FreeXL will I be crippling any other drivers that may depend on it?  I looked at the docs and it didn?t seem that important?  Also, is there a way to specify what drivers not to build without doing a custom-overlay port?

 

Best regards,

Martin Chapman

 

 

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org> 
https://lists.osgeo.org/mailman/listinfo/gdal-dev

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250701/66d3edec/attachment.htm>

From jesse.r.meyer at nasa.gov  Thu Jul  3 13:14:48 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Thu, 3 Jul 2025 20:14:48 +0000
Subject: [gdal-dev] Possible to issue sqlite3_limit with "memory" OGR driver?
Message-ID: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>

We?re trying to gdal.Polygonize a feature that exceeds SQLite?s default blob size of 1,000,000,000 bytes.  Curiously, we?re using the memory dataset, but this appears to leverage SQLite under the hood (evidenced by the error message: ERROR 1: In GetNextRawFeature(): sqlite3_step() : string or blob too big).  SQLite docs state the that limit can be changed at runtime using the sqlite3_limit<https://www.sqlite.org/c3ref/limit.html>(db,SQLITE_LIMIT_LENGTH<https://www.sqlite.org/c3ref/c_limit_attached.html#sqlitelimitlength>,...) interface.   Maybe there could be some way to leverage PRELUDE_STATEMENTS to achieve this but we are not ?opening? a dataset - we?re creating one directly from the memory driver.

What is the best way to work around this?

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250703/df8d1795/attachment.htm>

From even.rouault at spatialys.com  Thu Jul  3 13:23:17 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 3 Jul 2025 22:23:17 +0200
Subject: [gdal-dev] Possible to issue sqlite3_limit with "memory" OGR
 driver?
In-Reply-To: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <26b28923-3e0c-49ab-87ca-f8904263e949@spatialys.com>

Jesse,

Maybe you use SQL with the SQLite dialect? Otherwise we lack context to 
tell why you get SQLite kicking it.

I don't think sqlite3_limit() would really help you here, givenit can be 
used to grow settings beyond the compile time default which is 1 GiB I 
believe ("Attempts to increase a limit above its hard upper bound are 
silently truncated to the hard upper bound."). You would need to 
recompile SQLite itself.

Even

Le 03/07/2025 ? 22:14, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev a ?crit?:
>
> We?re trying to gdal.Polygonize a feature that exceeds SQLite?s 
> default blob size of 1,000,000,000 bytes.? Curiously, we?re using the 
> memory dataset, but this appears to leverage SQLite under the hood 
> (evidenced by the error message: ERROR 1: In GetNextRawFeature(): 
> sqlite3_step() : string or blob too big).? SQLite docs state the that 
> limit can be changed at runtime using the sqlite3_limit 
> <https://www.sqlite.org/c3ref/limit.html>(db,SQLITE_LIMIT_LENGTH 
> <https://www.sqlite.org/c3ref/c_limit_attached.html#sqlitelimitlength>,...) 
> interface. ??Maybe there could be some way to leverage 
> PRELUDE_STATEMENTS to achieve this but we are not ?opening? a dataset 
> - we?re creating one directly from the memory driver.
>
> What is the best way to work around this?
>
> Best,
>
> Jesse
>
> Lead Computer Scientist
>
> Science Systems and Applications, Inc.
>
> Dr Compton Tucker Team
>
> NASA Goddard Space Flight Center
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250703/41fbaa50/attachment.htm>

From jesse.r.meyer at nasa.gov  Thu Jul  3 13:27:16 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Thu, 3 Jul 2025 20:27:16 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Possible to issue sqlite3_limit with
 "memory" OGR driver?
In-Reply-To: <26b28923-3e0c-49ab-87ca-f8904263e949@spatialys.com>
References: <MN2PR09MB5932F60FD7F4B94268B8A91CC943A@MN2PR09MB5932.namprd09.prod.outlook.com>
 <26b28923-3e0c-49ab-87ca-f8904263e949@spatialys.com>
Message-ID: <MN2PR09MB5932F68C468CE6B9D913D3B8C943A@MN2PR09MB5932.namprd09.prod.outlook.com>

Thanks Even, that?s what I suspected.

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center

From: Even Rouault <even.rouault at spatialys.com>
Date: Thursday, July 3, 2025 at 4:23?PM
To: Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov>, gdal dev <gdal-dev at lists.osgeo.org>
Subject: [EXTERNAL] Re: [gdal-dev] Possible to issue sqlite3_limit with "memory" OGR driver?
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.



Jesse,

Maybe you use SQL with the SQLite dialect? Otherwise we lack context to tell why you get SQLite kicking it.

I don't think sqlite3_limit() would really help you here, givenit can be used to grow settings beyond the compile time default which is 1 GiB I believe ("Attempts to increase a limit above its hard upper bound are silently truncated to the hard upper bound."). You would need to recompile SQLite itself.

Even
Le 03/07/2025 ? 22:14, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev a ?crit :
We?re trying to gdal.Polygonize a feature that exceeds SQLite?s default blob size of 1,000,000,000 bytes.  Curiously, we?re using the memory dataset, but this appears to leverage SQLite under the hood (evidenced by the error message: ERROR 1: In GetNextRawFeature(): sqlite3_step() : string or blob too big).  SQLite docs state the that limit can be changed at runtime using the sqlite3_limit<https://www.sqlite.org/c3ref/limit.html>(db,SQLITE_LIMIT_LENGTH<https://www.sqlite.org/c3ref/c_limit_attached.html#sqlitelimitlength>,...) interface.   Maybe there could be some way to leverage PRELUDE_STATEMENTS to achieve this but we are not ?opening? a dataset - we?re creating one directly from the memory driver.

What is the best way to work around this?

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev

--

http://www.spatialys.com<http://www.spatialys.com/>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250703/a3898f56/attachment-0001.htm>

From mdsumner at gmail.com  Thu Jul  3 15:48:42 2025
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 4 Jul 2025 08:48:42 +1000
Subject: [gdal-dev] array dim permute
Message-ID: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>

I'm confused about the orientation of this in 2D mode 1485x1272 is correct,
with 122 bands.

(requires earthdata auth)

gdal raster info "/vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc"
  --output-format text | grep /rhos
#  SUBDATASET_1_NAME=NETCDF:"/vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc
":/geophysical_data/rhos
#  SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit
floating-point)

If we drill into the rhos sds X becomes unrolled as the 1485 bands:

gdal raster info "vrt:///vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos"
--output-format text | grep "Size"
#Size is 122, 1272

We can (redundantly??) cast via mdim to get 1485x1272, but then we've lost
the geolocation arrays:

gdal raster info "vrt:///vsicurl/
https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1"
--output-format text | grep "Size"
#Size is 1485, 1272

At any rate in the default case the geolocation arrays don't match the data
orientation.

Cheers, Mike


-- 
Michael Sumner
Ordinary Member,  Streets People Love Hobart Association
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
0438489030
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/d20dc632/attachment.htm>

From even.rouault at spatialys.com  Fri Jul  4 03:21:26 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jul 2025 12:21:26 +0200
Subject: [gdal-dev] array dim permute
In-Reply-To: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
References: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
Message-ID: <795392c5-349f-4217-848b-5af0572283be@spatialys.com>

Hi Michael,

I guess this is finally the perfect use case we were waiting for to find 
a good reason to embed a Small Language Model within GDAL to figure out 
what are the columns and lines axis.? In the meantime, the boring 
https://github.com/OSGeo/gdal/pull/12700 will fix it

Even

Le 04/07/2025 ? 00:48, Michael Sumner via gdal-dev a ?crit?:
> I'm confused about the orientation of this in 2D mode 1485x1272 is 
> correct, with 122 bands.
>
> (requires earthdata auth)
>
> gdal raster info 
> "/vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc" 
> ? --output-format text | grep /rhos
> # 
> ?SUBDATASET_1_NAME=NETCDF:"/vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc":/geophysical_data/rhos
> # ?SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit 
> floating-point)
>
> If we drill into the rhos sds X becomes unrolled as the 1485 bands:
>
> gdal raster info 
> "vrt:///vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos" 
> --output-format text | grep "Size"
> #Size is 122, 1272
>
> We can (redundantly??) cast via mdim to get 1485x1272, but then we've 
> lost the geolocation arrays:
>
> gdal raster info 
> "vrt:///vsicurl/https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1" 
> --output-format text | grep "Size"
> #Size is 1485, 1272
>
> At any rate in the default case the geolocation arrays don't match the 
> data orientation.
>
> Cheers, Mike
>
> -- 
> Michael Sumner
> Ordinary Member,? Streets People Love Hobart Association
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> 0438489030
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/77921de2/attachment.htm>

From mdsumner at gmail.com  Fri Jul  4 04:22:51 2025
From: mdsumner at gmail.com (Michael Sumner)
Date: Fri, 4 Jul 2025 21:22:51 +1000
Subject: [gdal-dev] array dim permute
In-Reply-To: <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
References: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
 <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
Message-ID: <CAAcGz98ZS93rBKfcspN25OU8c7BA8XAh4VbNW8LNkSC789a1oQ@mail.gmail.com>

Thanks Even!  Amazing, I don't think this is a rare case either, there's a
lot of data in files "like this" that I keep encountering.

Another few lines in the NetCDF behemoth, I'll keep reading (and update my
AI subscriptions).

Cheers, Mike


On Fri, Jul 4, 2025 at 8:21?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi Michael,
>
> I guess this is finally the perfect use case we were waiting for to find a
> good reason to embed a Small Language Model within GDAL to figure out what
> are the columns and lines axis.  In the meantime, the boring
> https://github.com/OSGeo/gdal/pull/12700 will fix it
>
> Even
> Le 04/07/2025 ? 00:48, Michael Sumner via gdal-dev a ?crit :
>
> I'm confused about the orientation of this in 2D mode 1485x1272 is
> correct, with 122 bands.
>
> (requires earthdata auth)
>
> gdal raster info "/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc"
>   --output-format text | grep /rhos
> #  SUBDATASET_1_NAME=NETCDF:"/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc
> ":/geophysical_data/rhos
> #  SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit
> floating-point)
>
> If we drill into the rhos sds X becomes unrolled as the 1485 bands:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos"
> --output-format text | grep "Size"
> #Size is 122, 1272
>
> We can (redundantly??) cast via mdim to get 1485x1272, but then we've lost
> the geolocation arrays:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1"
> --output-format text | grep "Size"
> #Size is 1485, 1272
>
> At any rate in the default case the geolocation arrays don't match the
> data orientation.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Ordinary Member,  Streets People Love Hobart Association
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> 0438489030
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
>

-- 
Michael Sumner
Ordinary Member,  Streets People Love Hobart Association
Research Software Engineer
Australian Antarctic Division
Hobart, Australia
0438489030
e-mail: mdsumner at gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/4e43c3d0/attachment.htm>

From j1 at jimenezshaw.com  Fri Jul  4 07:29:48 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 4 Jul 2025 16:29:48 +0200
Subject: [gdal-dev] array dim permute
In-Reply-To: <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
References: <CAAcGz988aCkEG0T=RXYDUGo-W4h1LRwjoN7xz0cV-HH2BKHMew@mail.gmail.com>
 <795392c5-349f-4217-848b-5af0572283be@spatialys.com>
Message-ID: <CADRrdKun7KkNcbRzfvb0m-27X16aEhob1-wYZdC7ywX-RApHnQ@mail.gmail.com>

"Small Language Mode"
LOL

On Fri, 4 Jul 2025 at 12:21, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi Michael,
>
> I guess this is finally the perfect use case we were waiting for to find a
> good reason to embed a Small Language Model within GDAL to figure out what
> are the columns and lines axis.  In the meantime, the boring
> https://github.com/OSGeo/gdal/pull/12700 will fix it
>
> Even
> Le 04/07/2025 ? 00:48, Michael Sumner via gdal-dev a ?crit :
>
> I'm confused about the orientation of this in 2D mode 1485x1272 is
> correct, with 122 bands.
>
> (requires earthdata auth)
>
> gdal raster info "/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc"
>   --output-format text | grep /rhos
> #  SUBDATASET_1_NAME=NETCDF:"/vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc
> ":/geophysical_data/rhos
> #  SUBDATASET_1_DESC=[1485x1272x122] /geophysical_data/rhos (32-bit
> floating-point)
>
> If we drill into the rhos sds X becomes unrolled as the 1485 bands:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?sd_name=/geophysical_data/rhos"
> --output-format text | grep "Size"
> #Size is 122, 1272
>
> We can (redundantly??) cast via mdim to get 1485x1272, but then we've lost
> the geolocation arrays:
>
> gdal raster info "vrt:///vsicurl/
> https://obdaac-tea.earthdatacloud.nasa.gov/ob-cumulus-prod-public/PACE_OCI.20250501T234515.L2.SFREFL.V3_0.nc?transpose=/geophysical_data/rhos:0,1"
> --output-format text | grep "Size"
> #Size is 1485, 1272
>
> At any rate in the default case the geolocation arrays don't match the
> data orientation.
>
> Cheers, Mike
>
>
> --
> Michael Sumner
> Ordinary Member,  Streets People Love Hobart Association
> Research Software Engineer
> Australian Antarctic Division
> Hobart, Australia
> 0438489030
> e-mail: mdsumner at gmail.com
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/481668ca/attachment-0001.htm>

From alexhighviz at hotmail.com  Fri Jul  4 10:08:30 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Fri, 4 Jul 2025 17:08:30 +0000
Subject: [gdal-dev] Random Raster Driver
Message-ID: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Hi all,

I implemented a plugin raster format that produces raster of random values using the all the distributions that are offered by the standard library's random header. It is different from other random raster functionality in e.g. ArcGIS or QGIS because it does not store the data on file but generates blocks of data on-demand.

Now it is for my own use, but I'd be happy to polish it up if it can become part of GDAL.

There is documentation here:

https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md
[https://opengraph.githubassets.com/6043ab82cae0d7a681691a0536f0523cc36150ff5a466ad797d69782e59b5e8b/ahhz/random-raster]<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
random-raster/docs/random_raster_driver.md at main ? ahhz/random-raster<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
Create GDALDatasets containing rasters of random values, that do not store the values on disk - ahhz/random-raster
github.com
Would this be of interest as a GDAL format?

Kind regards, Alex


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/4810562a/attachment.htm>

From j1 at jimenezshaw.com  Fri Jul  4 10:50:43 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Fri, 4 Jul 2025 19:50:43 +0200
Subject: [gdal-dev] strange wkt recognition
Message-ID: <CADRrdKsVydnSmGJRpOg0HPxoztzACXk+sUihGZU=FW+1BY72TA@mail.gmail.com>

Hi

I would like to understand why do I have different behaviour recognizing a
WKT between GDAL 3.9.2 and 3.11.1, both using PROJ 9.5.0 (using C++)

There is a clear mistake in the WKT bellow: EPSG:102641 . It should be
ESRI. But the source of the data was wrong, and we worked with that for a
long time.

PROJCS["NAD_1983_StatePlane_California_I_FIPS_0401_Feet",GEOGCS["GCS_North_American_1983",DATUM["North_American_Datum_1983",
SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Lambert_Conformal_Conic_2SP"],
PARAMETER["False_Easting",6561666.666666666],PARAMETER["False_Northing",1640416.666666667],PARAMETER["Central_Meridian",-122],
PARAMETER["Standard_Parallel_1",40],PARAMETER["Standard_Parallel_2",41.66666666666666],PARAMETER["Latitude_Of_Origin",39.33333333333334],
UNIT["Foot_US",0.30480060960121924],AUTHORITY["EPSG","102641"]]

and yes, ESRI version of WKT does not have AUTHORITY. Again, the data
source is what it is.

My failing test is because OGRCreateCoordinateTransformation called with
EPSG:4326 and calStatePlaneCS (created with SetFromUserInput) is failing.
The reason I found is in GetTextRepresentation in ogrct.cpp. There it
checks (if I understood correctly) if EPSG:102641 and the
OGRSpatialReference constructed from the string are equivalent.
In GDAL 3.9.2 the function IsSame is returning false, and
GetTextRepresentation is trying later with PROJJSON
In GDAL 3.11.1 the function IsSame returns true, and it is using
EPSG:102641, that fails later in OGRProjCT::Initialize (more in particular
in auto targetCRS = proj_create(ctx, pszTargetSRS);)

See that I am not changing the version of PROJ: 9.5.0

I have been looking for any change in GDAL code that would explain why the
wrong "WKT from California" behaves differently, but I couldn't find
anything. The changes in the code in ogrct.cpp and ogrspatialreference.cpp
that I think are involved are years old (just a thread safe lock changed).
But obviously I am missing something.

Could you help me?

Thanks.
Javier
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/9df0fdf3/attachment.htm>

From even.rouault at spatialys.com  Fri Jul  4 11:13:42 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 4 Jul 2025 20:13:42 +0200
Subject: [gdal-dev] strange wkt recognition
In-Reply-To: <CADRrdKsVydnSmGJRpOg0HPxoztzACXk+sUihGZU=FW+1BY72TA@mail.gmail.com>
References: <CADRrdKsVydnSmGJRpOg0HPxoztzACXk+sUihGZU=FW+1BY72TA@mail.gmail.com>
Message-ID: <5c9e5c2c-0ff8-4a70-b2b5-1047dbd69d12@spatialys.com>

Hi Javier,

the difference between 3.9.2 and 3.11 that explains what you see is : 
https://github.com/OSGeo/gdal/commit/a4aa0b50154b0558e2677a31dde416452ac07c97 
: "OGRSpatialReference::importFromEPSG(): tries with ESRI when it looks 
like an ESRI code, but with a warning when that succeeds"

The issue is then that GDAL tries to pass EPSG:102641 to proj_create() 
and proj_create() hasn't the above hack.

Fixed in https://github.com/OSGeo/gdal/pull/12705

Even


Le 04/07/2025 ? 19:50, Javier Jimenez Shaw via gdal-dev a ?crit?:
> Hi
>
> I would like to understand why do I have different behaviour 
> recognizing a WKT between GDAL 3.9.2 and 3.11.1, both using PROJ 9.5.0 
> (using C++)
>
> There is a clear mistake in the WKT bellow: EPSG:102641 . It should be 
> ESRI. But the source of the data was wrong, and we worked with that 
> for a long time.
>
> PROJCS["NAD_1983_StatePlane_California_I_FIPS_0401_Feet",GEOGCS["GCS_North_American_1983",DATUM["North_American_Datum_1983",
> SPHEROID["GRS_1980",6378137,298.257222101]],PRIMEM["Greenwich",0],UNIT["Degree",0.017453292519943295]],PROJECTION["Lambert_Conformal_Conic_2SP"],
> PARAMETER["False_Easting",6561666.666666666],PARAMETER["False_Northing",1640416.666666667],PARAMETER["Central_Meridian",-122],
> PARAMETER["Standard_Parallel_1",40],PARAMETER["Standard_Parallel_2",41.66666666666666],PARAMETER["Latitude_Of_Origin",39.33333333333334],
> UNIT["Foot_US",0.30480060960121924],AUTHORITY["EPSG","102641"]]
>
> and yes, ESRI version of WKT does not have AUTHORITY. Again, the data 
> source is what it is.
>
> My failing test is because OGRCreateCoordinateTransformation called 
> with EPSG:4326 and calStatePlaneCS (created with SetFromUserInput) is 
> failing.
> The reason I found is in GetTextRepresentation in ogrct.cpp. There it 
> checks (if I understood correctly) if EPSG:102641 and the 
> OGRSpatialReference constructed from the string are equivalent.
> In GDAL 3.9.2 the function IsSame is returning false, and 
> GetTextRepresentation is trying later with PROJJSON
> In GDAL 3.11.1 the function IsSame returns true, and it is using 
> EPSG:102641, that fails later in OGRProjCT::Initialize (more in 
> particular in auto targetCRS = proj_create(ctx, pszTargetSRS);)
>
> See that I am not changing the version of PROJ: 9.5.0
>
> I have been looking for any change in GDAL code that would explain why 
> the wrong "WKT from California" behaves differently, but I couldn't 
> find anything. The changes in the code in ogrct.cpp and 
> ogrspatialreference.cpp that I think are involved are years old (just 
> a thread safe lock changed). But obviously I am missing something.
>
> Could you help me?
>
> Thanks.
> Javier
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250704/9c921b9f/attachment-0001.htm>

From even.rouault at spatialys.com  Sat Jul  5 05:44:23 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 5 Jul 2025 14:44:23 +0200
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
Message-ID: <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>

Alex,


I'm not super familiar myself with the usage of such random rasters, but 
it seems to be fairly common indeed in GIS software, and could likely 
make sense within GDAL too. I'm wondering if instead of having a new 
driver, the random distribution functions could not be exposed as VRT 
C++ built-in pixel functions 
(https://gdal.org/en/stable/drivers/raster/vrt.html#built-in-pixel-functions). 
That would make it possible to benefit from all the rest of the VRT 
infrastructure like setting geospatial information, adding metadata, 
multiband support etc There would be a bit of tweak to do in the 
VRTDerivedRasterBand in that case to force it to always operate on block 
boundaries (instead of any arbitrary requested window), so that the 
per-block seed can be used, but that should mostly be a matter of a few 
lines to add in its IRasterIO() implementation.


Even


Le 04/07/2025 ? 19:08, Alex Hagen-Zanker via gdal-dev a ?crit?:
> Hi all,
>
> I implemented a plugin raster format that produces raster of random 
> values using the all the distributions that are offered by the 
> standard library's random header. It is different from other random 
> raster functionality in e.g. ArcGIS or QGIS because it does not store 
> the data on file but generates blocks of data on-demand.
>
> Now it is for my own use, but I'd be happy to polish it up if it can 
> become part of GDAL.
>
> There is documentation here:
>
> https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md
> <https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
> 	
> random-raster/docs/random_raster_driver.md at main ? 
> ahhz/random-raster 
> <https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
> Create GDALDatasets containing rasters of random values, that do not 
> store the values on disk - ahhz/random-raster
> github.com
>
> Would this be of interest as a GDAL format?
>
> Kind regards, Alex
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250705/b4f278de/attachment.htm>

From public at postholer.com  Sat Jul  5 20:02:05 2025
From: public at postholer.com (Scott)
Date: Sat, 5 Jul 2025 20:02:05 -0700
Subject: [gdal-dev] GDAL CLI feature request
Message-ID: <a1576a42-5312-4d05-a707-dee66b6f7765@postholer.com>

When specifying bands from a raster, say:

gdal raster pipeline ! ... ! select -b "1,2,3,4,12,13,14,15,20,21" ! ...

It would be *nice* to be able to use a range of bands, perhaps with 
individual bands mixed in. Something like:

-b "1-4,12-15,20,21" ...

This would be hugely useful for calc and pixel functions in mosaic with 
the forthcoming --flatten switch in 3.12. Calc might look like:

-i A=input.tif --calc="max(A[1-4,12-15,20,21])"

Often you need to pull a large number of bands out of a netcdf or tif 
and it's always been a pain.

Also, nit-picky doc issue. The following --nodata paragraph is missing 
the magic words, "Added in version 3.12":

https://gdal.org/en/latest/programs/gdal_raster_calc.html#cmdoption-nodata

Thanks!
Scott
-- 
www.postholer.com


From alexhighviz at hotmail.com  Sun Jul  6 15:03:50 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Sun, 6 Jul 2025 22:03:50 +0000
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
Message-ID: <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Hi Even,

Random rasters are indeed fairly common functionality, and used for instance in dynamic simulations, synthetic landscape generation and some Monte Carlo type statistical approaches.

Having the random raster as a VRT does make sense to me, it would side-by-side with other generated raster types. I also agree that it would be preferred over having yet another raster format, especially if it is not-really-a-data-format.

I am not sure if I understand your suggestion correctly. Are you suggesting to change the behaviour or VRT DerivedRasterBand in general so that its IRasterIO would only work on block boundaries? That seems quite drastic to me. I think there would be a few more minor adaptations necessary for VRTDerivedRasterBand so that it can accept that there are zero source layers for the pixel function.

Looking at VRTDerivedRasterband I was surprised that it implements IRasterIO rather than IReadBlock. If you indeed meant to restrict IRasterIO to block boundaries in general, would it be a consideration to implement it as IReadBlock and use default behaviour for IRasterIO? From my understanding that would change the way the caching works, as it would cache the results of the pixel function rather than the input to the pixel function. It would also allow RasterIO to still be used as it currently is.

If you would leave it as IRasterIO, would the random values be cached at all? Or always just generated when requested?

Kind regards, Alex


________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: 05 July 2025 13:44
To: Alex Hagen-Zanker <alexhighviz at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Random Raster Driver


Alex,


I'm not super familiar myself with the usage of such random rasters, but it seems to be fairly common indeed in GIS software, and could likely make sense within GDAL too. I'm wondering if instead of having a new driver, the random distribution functions could not be exposed as VRT C++ built-in pixel functions (https://gdal.org/en/stable/drivers/raster/vrt.html#built-in-pixel-functions).  That would make it possible to benefit from all the rest of the VRT infrastructure like setting geospatial information, adding metadata, multiband support etc There would be a bit of tweak to do in the VRTDerivedRasterBand in that case to force it to always operate on block boundaries (instead of any arbitrary requested window), so that the per-block seed can be used, but that should mostly be a matter of a few lines to add in its IRasterIO() implementation.


Even


Le 04/07/2025 ? 19:08, Alex Hagen-Zanker via gdal-dev a ?crit :
Hi all,

I implemented a plugin raster format that produces raster of random values using the all the distributions that are offered by the standard library's random header. It is different from other random raster functionality in e.g. ArcGIS or QGIS because it does not store the data on file but generates blocks of data on-demand.

Now it is for my own use, but I'd be happy to polish it up if it can become part of GDAL.

There is documentation here:

https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md
[https://opengraph.githubassets.com/6043ab82cae0d7a681691a0536f0523cc36150ff5a466ad797d69782e59b5e8b/ahhz/random-raster]<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
random-raster/docs/random_raster_driver.md at main ? ahhz/random-raster<https://github.com/ahhz/random-raster/blob/main/docs/random_raster_driver.md>
Create GDALDatasets containing rasters of random values, that do not store the values on disk - ahhz/random-raster
github.com
Would this be of interest as a GDAL format?

Kind regards, Alex





_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250706/23947fe3/attachment.htm>

From even.rouault at spatialys.com  Sun Jul  6 15:13:53 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 00:13:53 +0200
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
 <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
Message-ID: <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>

Alex,
>
> I am not sure if I understand your suggestion correctly. Are you 
> suggesting to change the behaviour or VRT DerivedRasterBand in general 
> so that its IRasterIO would only work on block boundaries? That seems 
> quite drastic to me.

No, my suggestion was to do that only when one of the random pixel 
functions is used.

> I think there would be a few more minor adaptations necessary for 
> VRTDerivedRasterBand so that it can accept that there are zero source 
> layers for the pixel function.
Yes
>
> Looking at VRTDerivedRasterband I was surprised that it implements 
> IRasterIO rather than IReadBlock.

The base class VRTSourcedRasterBand has a IReadBlock() method that 
forwards to IRasterIO(). That way you get both the caching effect if 
block based reading is done and goes through IReadBlock(), or if 
VRTDerivedRasterBand::IRasterIO() is directly called, it is short circuited.

> If you indeed meant to restrict IRasterIO to block boundaries in 
> general, would it be a consideration to implement it as IReadBlock and 
> use default behaviour for IRasterIO? From my understanding that would 
> change the way the caching works, as it would cache the results of the 
> pixel function rather than the input to the pixel function. It would 
> also allow RasterIO to still be used as it currently is.

basically what I'm suggesting is something along those lines:

CPLErr VRTDerivedRasterBand::IRasterIO(.... )
{
 ????? if( use_one_of_the_random_functions )
 ??????????? return GDALRasterBand::IRasterIO( ... );? // force base 
method to IReadBlock(), which will go to 
VRTSourcedRasterBand::IReadBlock() which will call us again, but on 
block boundaries

 ????? rest of the method mostly unchanged.? You'll need to pass the 
nXOff and nYOff arguments as arguments of the random pixel functions, 
around lines 1580-1590

}

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/b61ca27e/attachment-0001.htm>

From johnsmith7862025 at outlook.com  Mon Jul  7 01:55:04 2025
From: johnsmith7862025 at outlook.com (John Smith)
Date: Mon, 7 Jul 2025 08:55:04 +0000
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
Message-ID: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>

Hello

Can anyone explain the concept of proxy driver and real driver in GDAL? I am looking at the link https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html

Say I create an external plugin of some data format for e.g. say JP2 and then some Geospatial server loads my plugin file.


  1.
In this scenario I think the geospatial driver needs GDAL libs as well?
  2.
Now what is the proxy driver and what is real driver in this context? Is the real driver inside GDAL or inside my plugin?
  3.
What is the proxy driver in context of question (b)



Please clarify me so that I have clear picture in my mind.

BR
John

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/84608f8e/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  7 02:03:23 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 11:03:23 +0200
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
Message-ID: <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>

John,


As stated in the intro, this RFC is mostly for *in-tree* drivers. If you 
develop an out-of-tree plugin that doesn't modify GDAL sources, then you 
can ignore it


Even


Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit?:
> Hello
>
> Can anyone explain the concept of proxy driver and real driver in 
> GDAL? I am looking at the link 
> https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html
>
> Say I create an external plugin of some data format for e.g. say JP2 
> and then some Geospatial server loads my plugin file.
>
> 1.
>     In this scenario I think the geospatial driver needs GDAL libs as
>     well?
> 2.
>     Now what is the proxy driver and what is real driver in this
>     context? Is the real driver inside GDAL or inside my plugin?
> 3.
>     What is the proxy driver in context of question (b)
>
>
> Please clarify me so that I have clear picture in my mind.
>
> BR
> John
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/ae6f6ee5/attachment.htm>

From sharma1981 at outlook.com  Mon Jul  7 02:21:53 2025
From: sharma1981 at outlook.com (Parveen Sharma)
Date: Mon, 7 Jul 2025 09:21:53 +0000
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
 <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
Message-ID: <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>

Thanks Even

Still do you think I could have a brief intro if it's an in-tree driver. So from that point of view what would constitute a proxy and real driver?

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Monday, July 7, 2025 5:03 PM
To: John Smith <johnsmith7862025 at outlook.com>; Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Proxy vs Real Driver in GDAL


John,


As stated in the intro, this RFC is mostly for *in-tree* drivers. If you develop an out-of-tree plugin that doesn't modify GDAL sources, then you can ignore it


Even


Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit :
Hello

Can anyone explain the concept of proxy driver and real driver in GDAL? I am looking at the link https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html

Say I create an external plugin of some data format for e.g. say JP2 and then some Geospatial server loads my plugin file.


  1.
In this scenario I think the geospatial driver needs GDAL libs as well?
  2.
Now what is the proxy driver and what is real driver in this context? Is the real driver inside GDAL or inside my plugin?
  3.
What is the proxy driver in context of question (b)



Please clarify me so that I have clear picture in my mind.

BR
John




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/a601ea46/attachment-0001.htm>

From johnsmith7862025 at outlook.com  Mon Jul  7 02:37:54 2025
From: johnsmith7862025 at outlook.com (John Smith)
Date: Mon, 7 Jul 2025 09:37:54 +0000
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
 <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
 <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <TYZPR06MB4015AD97EBE074F50E53E10E884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>

Yeah
I am after that kind of explanation.
@Even Rouault via gdal-dev<mailto:gdal-dev at lists.osgeo.org> - Do you think there is any quick explanation available for this scenario?
________________________________
From: Parveen Sharma <sharma1981 at outlook.com>
Sent: Monday, July 7, 2025 9:21 AM
To: Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>; John Smith <johnsmith7862025 at outlook.com>; Even Rouault <even.rouault at spatialys.com>
Subject: Re: [gdal-dev] Proxy vs Real Driver in GDAL

Thanks Even

Still do you think I could have a brief intro if it's an in-tree driver. So from that point of view what would constitute a proxy and real driver?

________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Monday, July 7, 2025 5:03 PM
To: John Smith <johnsmith7862025 at outlook.com>; Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Proxy vs Real Driver in GDAL


John,


As stated in the intro, this RFC is mostly for *in-tree* drivers. If you develop an out-of-tree plugin that doesn't modify GDAL sources, then you can ignore it


Even


Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit :
Hello

Can anyone explain the concept of proxy driver and real driver in GDAL? I am looking at the link https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html

Say I create an external plugin of some data format for e.g. say JP2 and then some Geospatial server loads my plugin file.


  1.
In this scenario I think the geospatial driver needs GDAL libs as well?
  2.
Now what is the proxy driver and what is real driver in this context? Is the real driver inside GDAL or inside my plugin?
  3.
What is the proxy driver in context of question (b)



Please clarify me so that I have clear picture in my mind.

BR
John




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/bce1a4ab/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  7 02:48:40 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 11:48:40 +0200
Subject: [gdal-dev] Proxy vs Real Driver in GDAL
In-Reply-To: <TYZPR06MB4015AD97EBE074F50E53E10E884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
References: <TYZPR06MB40153E253D6375D960CDBD23884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
 <84c39b00-6f1a-48db-b80f-9a85e4d31807@spatialys.com>
 <SYZP282MB3189006F65A1BDC6A81741CAD94FA@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <TYZPR06MB4015AD97EBE074F50E53E10E884FA@TYZPR06MB4015.apcprd06.prod.outlook.com>
Message-ID: <8d0e2dd4-0368-42f9-9bf8-7c1f11cc2671@spatialys.com>

- How to create a GDAL driver: 
https://gdal.org/en/stable/tutorials/raster_driver_tut.html

- GDAL-GRASS plugin driver example: https://github.com/OSGeo/gdal-grass/

Le 07/07/2025 ? 11:37, John Smith a ?crit?:
> Yeah
> I am after that kind of explanation.
> @Even Rouault via gdal-dev <mailto:gdal-dev at lists.osgeo.org>?- Do you 
> think there is any quick explanation available for this scenario?
> ------------------------------------------------------------------------
> *From:* Parveen Sharma <sharma1981 at outlook.com>
> *Sent:* Monday, July 7, 2025 9:21 AM
> *To:* Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org>; John Smith 
> <johnsmith7862025 at outlook.com>; Even Rouault <even.rouault at spatialys.com>
> *Subject:* Re: [gdal-dev] Proxy vs Real Driver in GDAL
> Thanks Even
>
> Still do you think I could have a brief intro if it's an in-tree 
> driver. So from that point of view what would constitute a proxy and 
> real driver?
>
> ------------------------------------------------------------------------
> *From:* gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Even 
> Rouault via gdal-dev <gdal-dev at lists.osgeo.org>
> *Sent:* Monday, July 7, 2025 5:03 PM
> *To:* John Smith <johnsmith7862025 at outlook.com>; Even Rouault via 
> gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Proxy vs Real Driver in GDAL
>
> John,
>
>
> As stated in the intro, this RFC is mostly for *in-tree* drivers. If 
> you develop an out-of-tree plugin that doesn't modify GDAL sources, 
> then you can ignore it
>
>
> Even
>
>
> Le 07/07/2025 ? 10:55, John Smith via gdal-dev a ?crit?:
>> Hello
>>
>> Can anyone explain the concept of proxy driver and real driver in 
>> GDAL? I am looking at the link 
>> https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html 
>> <https://gdal.org/en/stable/development/rfc/rfc96_deferred_plugin_loading.html>
>>
>> Say I create an external plugin of some data format for e.g. say JP2 
>> and then some Geospatial server loads my plugin file.
>>
>> 1.
>>     In this scenario I think the geospatial driver needs GDAL libs as
>>     well?
>> 2.
>>     Now what is the proxy driver and what is real driver in this
>>     context? Is the real driver inside GDAL or inside my plugin?
>> 3.
>>     What is the proxy driver in context of question (b)
>>
>>
>> Please clarify me so that I have clear picture in my mind.
>>
>> BR
>> John
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org  <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev  <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
> -- 
> http://www.spatialys.com  <http://www.spatialys.com>
> My software is free, but my time generally not.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/85b1c71d/attachment-0001.htm>

From alexhighviz at hotmail.com  Mon Jul  7 03:18:29 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Mon, 7 Jul 2025 10:18:29 +0000
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
 <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>
Message-ID: <GV1P251MB0747FD9AE6F46D0224DD3D67B44FA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Hi Even,

Thank you, now I get it, and that would work well I think.

Would the next step be for me to prepare a PR based on this?

Kind regards, Alex
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: 06 July 2025 23:13
To: Alex Hagen-Zanker <alexhighviz at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Random Raster Driver

Alex,

I am not sure if I understand your suggestion correctly. Are you suggesting to change the behaviour or VRT DerivedRasterBand in general so that its IRasterIO would only work on block boundaries? That seems quite drastic to me.

No, my suggestion was to do that only when one of the random pixel functions is used.

I think there would be a few more minor adaptations necessary for VRTDerivedRasterBand so that it can accept that there are zero source layers for the pixel function.
Yes

Looking at VRTDerivedRasterband I was surprised that it implements IRasterIO rather than IReadBlock.

The base class VRTSourcedRasterBand has a IReadBlock() method that forwards to IRasterIO(). That way you get both the caching effect if block based reading is done and goes through IReadBlock(), or if VRTDerivedRasterBand::IRasterIO() is directly called, it is short circuited.

If you indeed meant to restrict IRasterIO to block boundaries in general, would it be a consideration to implement it as IReadBlock and use default behaviour for IRasterIO? From my understanding that would change the way the caching works, as it would cache the results of the pixel function rather than the input to the pixel function. It would also allow RasterIO to still be used as it currently is.

basically what I'm suggesting is something along those lines:

CPLErr VRTDerivedRasterBand::IRasterIO(.... )
{
      if( use_one_of_the_random_functions )
            return GDALRasterBand::IRasterIO( ... );  // force base method to IReadBlock(), which will go to VRTSourcedRasterBand::IReadBlock() which will call us again, but on block boundaries

      rest of the method mostly unchanged.  You'll need to pass the nXOff and nYOff arguments as arguments of the random pixel functions, around lines 1580-1590

}

Even


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/b18e3bfc/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  7 03:30:06 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 12:30:06 +0200
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <GV1P251MB0747FD9AE6F46D0224DD3D67B44FA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
 <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>
 <GV1P251MB0747FD9AE6F46D0224DD3D67B44FA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
Message-ID: <324eb379-e41e-40ec-960a-bbf0bc425108@spatialys.com>


>
> Would the next step be for me to prepare a PR based on this?

yes I think so. Perhaps start small with just one distribution function, 
and once this initial PR is merged you can follow up with other ones


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/318df1f7/attachment.htm>

From alexhighviz at hotmail.com  Mon Jul  7 03:55:15 2025
From: alexhighviz at hotmail.com (Alex Hagen-Zanker)
Date: Mon, 7 Jul 2025 10:55:15 +0000
Subject: [gdal-dev] Random Raster Driver
In-Reply-To: <324eb379-e41e-40ec-960a-bbf0bc425108@spatialys.com>
References: <GV1P251MB0747052BA977812DCE97438EB442A@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <44ea61f3-6ffd-4951-8c0e-1d3072557f07@spatialys.com>
 <GV1P251MB0747DA6663DE56DC79F5788BB44CA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <dae5a8ee-f41c-41e4-99fc-54ac4af43db4@spatialys.com>
 <GV1P251MB0747FD9AE6F46D0224DD3D67B44FA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>
 <324eb379-e41e-40ec-960a-bbf0bc425108@spatialys.com>
Message-ID: <GV1P251MB0747AB2B2D18E36F21FB51D2B44FA@GV1P251MB0747.EURP251.PROD.OUTLOOK.COM>

Great, will do. It will take a while, as I am about to go on holidays, but will be this Summer
Thanks, ALex
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: 07 July 2025 11:30
To: Alex Hagen-Zanker <alexhighviz at hotmail.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Random Raster Driver



Would the next step be for me to prepare a PR based on this?

yes I think so. Perhaps start small with just one distribution function, and once this initial PR is merged you can follow up with other ones


--
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/2aff62eb/attachment-0001.htm>

From public at postholer.com  Mon Jul  7 09:51:39 2025
From: public at postholer.com (Scott)
Date: Mon, 7 Jul 2025 09:51:39 -0700
Subject: [gdal-dev] Issues with gdalwarp 3.11.1
Message-ID: <f5f456ca-c478-4656-99a3-fe1fe53981bc@postholer.com>

Using GDAL 3.11.1 on Debian 12 proj 9.1.1 and GDAL 3.11.1 on AWS Linux 
2, proj 9.2.1, with this source file:

  
https://water.noaa.gov/resources/downloads/precip/stageIV/2025/07/06/nws_precip_wytd_20250706_conus.tif

This following command fails with 'Warning 1: PROJ: stere: Invalid 
latitude':

    gdalwarp -f COG -overwrite -t_srs EPSG:4326 
nws_precip_wytd_20250706_conus.tif tst.tif

However, this works fine:

    gdal raster pipeline read nws_precip_wytd_20250706_conus.tif ! 
reproject --dst-crs EPSG:4326 ! write tst_cli.tif --of=COG --overwrite

If you change the crs to EPSG:3857 or any mercator, gdalwarp doesn't 
throw any errors, but gdallocationinfo returns no data:

    gdallocationinfo -l_srs EPSG:4326 -valonly tst.tif -97.4475 29.4843

GDAL CLI works fine for either. gdalwarp 3.9.2 (Debian 12) and 3.7.1 
(AWS Linux 2) also work fine.

Thanks!
Scott

-- 
www.postholer.com


From even.rouault at spatialys.com  Mon Jul  7 12:08:53 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 21:08:53 +0200
Subject: [gdal-dev] Issues with gdalwarp 3.11.1
In-Reply-To: <f5f456ca-c478-4656-99a3-fe1fe53981bc@postholer.com>
References: <f5f456ca-c478-4656-99a3-fe1fe53981bc@postholer.com>
Message-ID: <67bb0f89-4f87-42f0-aa72-a1cc790baace@spatialys.com>

Thanks for raising this. Fixed per 
https://github.com/OSGeo/gdal/pull/12722 . As that's a rather annoying 
regression, I'll likely issue a 3.11.2 RC tomorrow

Even

Le 07/07/2025 ? 18:51, Scott via gdal-dev a ?crit?:
> Using GDAL 3.11.1 on Debian 12 proj 9.1.1 and GDAL 3.11.1 on AWS Linux 
> 2, proj 9.2.1, with this source file:
>
>
> https://water.noaa.gov/resources/downloads/precip/stageIV/2025/07/06/nws_precip_wytd_20250706_conus.tif 
>
>
> This following command fails with 'Warning 1: PROJ: stere: Invalid 
> latitude':
>
> ?? gdalwarp -f COG -overwrite -t_srs EPSG:4326 
> nws_precip_wytd_20250706_conus.tif tst.tif
>
> However, this works fine:
>
> ?? gdal raster pipeline read nws_precip_wytd_20250706_conus.tif ! 
> reproject --dst-crs EPSG:4326 ! write tst_cli.tif --of=COG --overwrite
>
> If you change the crs to EPSG:3857 or any mercator, gdalwarp doesn't 
> throw any errors, but gdallocationinfo returns no data:
>
> ?? gdallocationinfo -l_srs EPSG:4326 -valonly tst.tif -97.4475 29.4843
>
> GDAL CLI works fine for either. gdalwarp 3.9.2 (Debian 12) and 3.7.1 
> (AWS Linux 2) also work fine.
>
> Thanks!
> Scott
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From howard at hobu.co  Mon Jul  7 12:58:42 2025
From: howard at hobu.co (Howard Butler)
Date: Mon, 7 Jul 2025 14:58:42 -0500
Subject: [gdal-dev] GDAL Maintainers Meeting Minutes
Message-ID: <8C87E9FE-B661-469B-9422-3A6FABEC661D@hobu.co>

Howard Butler, Dan Baston, Alessandro Pasotti,, Michael Sumner, Seth Girvin, Even Rouault, Mike Smith, Norman Barker and Javier Jimenez Shaw held the monthly GDAL Maintainers Meeting on 06/26/2025. The following items were discussed and reported upon:

Project News
----------------------------

* Find Even and Javier presenting about GDAL and PROJ at FOSS4G Europe in Mostar 14-20 July, 2025
* GDAL 3.11.1 was released  https://github.com/OSGeo/gdal/blob/v3.11.1/NEWS.md
* 2025 GDAL Sponsorship Program fundraising has been dreadful. No new sponsors and almost no renewals. See https://gdal.org/en/latest/sponsors/index.html for the current active roster. If your organization values the benefits of the GDAL Sponsorship Program and is interested in stepping forward to provide support, please contact me directly.

Maintenance activities update
------------------------------------------

Alessandro

* PR reviews
* 'gdal vector info' improvements

Seth

* Python API doc additions and enhancements
* Overture + GeoParquet walkthrough tutorial including usage of both new and classic CLIs https://gdal.org/en/latest/tutorials/vector_geoparquet_tut.html 
* A glossary https://gdal.org/en/latest/glossary.html
* Working on a hillshade + raster document tutorial next

Dan
* VRT expressions enhancements
* GDALRasterBand::IterateWindows ? a C++ version of rasterio's block_windows method
* gdal vector rasterize error message improvements
* PR reviews

Even

* Coverity scans are now clean and detect new issues as they come in. This was significant security effort that would not have been possible without the time provided by the GDAL Sponsorship Program.
* Exploratory progress callback addition to GEOS-based commands like simplify
* gdal pipelines can now mix raster+vector (gdal vector rasterize, for example)
* Pixel function SSE optimizations
* gdal raster calc --dialect ? allows selection of VRT expression engine
* Increased verbosity of some compiler warnings with opt-out for some especially noisy drivers
* gdal raster reproject ? enhanced autocomplete now suggest intersecting CRSs sorted by smallest CRS extent
* gdal raster algebra ? simplification of band algebra https://github.com/OSGeo/gdal/pull/12605 and subsequent PRs
* PROJ 9.6.2 release fixes a small regression https://github.com/OSGeo/PROJ/releases/tag/9.6.2

Michael Sumner

* GeoZarr discussion 
* warper for multidimensional 
* GDAL+exactextract desire

Javier

* Inquired about geodetic buffering in PROJ/GDAL https://lists.osgeo.org/pipermail/gdal-dev/2025-June/060661.html 
* Development of projinfo as a library similar to GDAL CLIs

Norman

* Investigation of multidimensional API and interaction with TileDB driver
* Ditch SWIG for pybind11 or similar?


The next GDAL Maintainers Meeting is 07/24/2025 at 13:00 UTC. GDAL PSC members and Pull Request contributors are welcome to contact me for an invite.

Howard



From fengting.chen at oracle.com  Mon Jul  7 12:18:34 2025
From: fengting.chen at oracle.com (Fengting Chen)
Date: Mon, 7 Jul 2025 19:18:34 +0000
Subject: [gdal-dev] Can GDAL driver be reused by GDAL python binding
Message-ID: <IA4PR10MB8636D306F73E6BD854A08D9C934FA@IA4PR10MB8636.namprd10.prod.outlook.com>

Hi,

A Python program can invoke GDAL driver through gdal.open() to read/write raster/vector data. Is it possible for the GDAL driver to be reused in order to avoid reinitializing the driver for each gdal.open() call? For example, if a GDAL driver to a database implements a connection pool, will each gdal.open() call be able to ask the driver to retrieve a db connection from the connection pool, instead of creating a new database connection?

Thanks!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/638b57dc/attachment.htm>

From even.rouault at spatialys.com  Mon Jul  7 14:23:05 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 7 Jul 2025 23:23:05 +0200
Subject: [gdal-dev] Can GDAL driver be reused by GDAL python binding
In-Reply-To: <IA4PR10MB8636D306F73E6BD854A08D9C934FA@IA4PR10MB8636.namprd10.prod.outlook.com>
References: <IA4PR10MB8636D306F73E6BD854A08D9C934FA@IA4PR10MB8636.namprd10.prod.outlook.com>
Message-ID: <20f5d85d-4397-4494-b584-0eb48854f293@spatialys.com>

Hi,

Connection pooling is an internal implementation driver of each driver. 
You have to be careful about multi-threaded use cases if you want to 
implement that though. The PostGISRaster driver has some connection 
pooling. See PostGISRasterDriver::GetConnection()

Even

Le 07/07/2025 ? 21:18, Fengting Chen via gdal-dev a ?crit?:
>
> Hi,
>
> A Python program can invoke GDAL driver through gdal.open() to 
> read/write raster/vector data. Is it possible for the GDAL driver to 
> be reused in order to avoid reinitializing the driver for each 
> gdal.open() call? For example, if a GDAL driver to a database 
> implements a connection pool, will each gdal.open() call be able to 
> ask the driver to retrieve a db connection from the connection pool, 
> instead of creating a new database connection?
>
> Thanks!
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250707/e1129b31/attachment-0001.htm>

From s.n.g at gmx.com  Mon Jul  7 23:08:19 2025
From: s.n.g at gmx.com (Stephane Goldstein)
Date: Tue, 8 Jul 2025 14:08:19 +0800
Subject: [gdal-dev] Clip by row / column
Message-ID: <CAC8kFhiQQP0Xa+eGJJoWpUon=S0oB04pwU5uXmWQUOOzoi8yAQ@mail.gmail.com>

Hi. I tried to use the gdal raster today to clip a raster by row and column
as I used to do with

gdal_translate -srcwin <xoff> <yoff> <xsize> <ysize>

But couldn't find the equivalent command. Is it available ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250708/dcda311d/attachment.htm>

From even.rouault at spatialys.com  Tue Jul  8 01:30:25 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jul 2025 10:30:25 +0200
Subject: [gdal-dev] Clip by row / column
In-Reply-To: <CAC8kFhiQQP0Xa+eGJJoWpUon=S0oB04pwU5uXmWQUOOzoi8yAQ@mail.gmail.com>
References: <CAC8kFhiQQP0Xa+eGJJoWpUon=S0oB04pwU5uXmWQUOOzoi8yAQ@mail.gmail.com>
Message-ID: <433ed2d3-3eba-4cb5-98d1-f2331efc561e@spatialys.com>

Hi,

that should likely be a mode to add to gdal raster clip. Can you file an 
enhancement ticket about that?

Even

Le 08/07/2025 ? 08:08, Stephane Goldstein via gdal-dev a ?crit?:
> Hi. I tried to use the gdal raster today to clip a raster by row and 
> column as I used to do with
> gdal_translate -srcwin <xoff> <yoff> <xsize> <ysize>
> But couldn't find the equivalent command. Is it available ?
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250708/41a9ccf2/attachment.htm>

From even.rouault at spatialys.com  Tue Jul  8 01:45:04 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jul 2025 10:45:04 +0200
Subject: [gdal-dev] GDAL 3.11.2 release candidate available
Message-ID: <cff7745d-793c-4bea-a245-7c2d0e3ec930@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.11.2 release candidate (mostly triggered to 
fix a 3.11.0 regression regarding gdalwarp to COG)

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.11.2/gdal3112rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc1.tar.gz
https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.11.2RC1/NEWS.md

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Tue Jul  8 09:32:55 2025
From: public at postholer.com (Scott)
Date: Tue, 8 Jul 2025 09:32:55 -0700
Subject: [gdal-dev] GDAL 3.11.2 release candidate available
In-Reply-To: <cff7745d-793c-4bea-a245-7c2d0e3ec930@spatialys.com>
References: <cff7745d-793c-4bea-a245-7c2d0e3ec930@spatialys.com>
Message-ID: <d527f53d-ad02-4959-b19b-7e1608ef767f@postholer.com>

Thanks Even for doing that so quickly, looks like it was a late night. 
Works perfect now.

Scott

On 7/8/25 01:45, Even Rouault via gdal-dev wrote:
> Hi,
> 
> I have prepared a GDAL/OGR 3.11.2 release candidate (mostly triggered to 
> fix a 3.11.0 regression regarding gdalwarp to COG)
> 
> Pick up an archive among the following ones (by ascending size):
> 
>  ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc1.tar.xz
>  ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc1.tar.gz
>  ? https://download.osgeo.org/gdal/3.11.2/gdal3112rc1.zip
> 
> A snapshot of the gdalautotest suite is also available:
> 
> https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc1.tar.gz
> https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc1.zip
> 
> The NEWS file is here:
> 
>  ? https://github.com/OSGeo/gdal/blob/v3.11.2RC1/NEWS.md
> 
> Best regards,
> 
> Even
> 


From public at postholer.com  Tue Jul  8 11:55:43 2025
From: public at postholer.com (Scott)
Date: Tue, 8 Jul 2025 11:55:43 -0700
Subject: [gdal-dev] gdallocationinfo issues, after 3.9.2
Message-ID: <5911d725-c5f2-4361-bfb7-091af3d4d564@postholer.com>

Say you have a file called raster.vrt. In that file are 15 tif's. 9 of 
those rasters don't have data (nodata) at the specified lon/lat:

gdallocationinfo -geoloc -valonly -field_sep "," rasters.vrt -88.730767 
32.649060

The above may return 6 values, with or without -field_sep:
26,2,2,0,3.10467481613159,32.7341842651367,1433

You have no idea which tif those values belong to. In versions 3.9.2 or 
earlier, it returns the 'nodata' value for each tif. Not only is nodata 
a valid value, it acts as a place holder. 15 rasters, 15 values returned.

Yes, you can remove the -valonly switch and use -xml, but then it 
becomes a parsing debacle. Unnecessary code and overhead.

Apologies for being a pain. I just rolled 3.11.1 and now 3.11.2 into 
production, up from 3.9.2 and it's breaking stuff I did not anticipate. :)

Thank you!
Scott

-- 
www.postholer.com


From even.rouault at spatialys.com  Tue Jul  8 12:18:24 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jul 2025 21:18:24 +0200
Subject: [gdal-dev] gdallocationinfo issues, after 3.9.2
In-Reply-To: <5911d725-c5f2-4361-bfb7-091af3d4d564@postholer.com>
References: <5911d725-c5f2-4361-bfb7-091af3d4d564@postholer.com>
Message-ID: <d4d36bc7-8110-49b9-88c6-52ea501da106@spatialys.com>

Please file a ticket, ideally with a dataset to reproduce

Le 08/07/2025 ? 20:55, Scott via gdal-dev a ?crit?:
> Say you have a file called raster.vrt. In that file are 15 tif's. 9 of 
> those rasters don't have data (nodata) at the specified lon/lat:
>
> gdallocationinfo -geoloc -valonly -field_sep "," rasters.vrt 
> -88.730767 32.649060
>
> The above may return 6 values, with or without -field_sep:
> 26,2,2,0,3.10467481613159,32.7341842651367,1433
>
> You have no idea which tif those values belong to. In versions 3.9.2 
> or earlier, it returns the 'nodata' value for each tif. Not only is 
> nodata a valid value, it acts as a place holder. 15 rasters, 15 values 
> returned.
>
> Yes, you can remove the -valonly switch and use -xml, but then it 
> becomes a parsing debacle. Unnecessary code and overhead.
>
> Apologies for being a pain. I just rolled 3.11.1 and now 3.11.2 into 
> production, up from 3.9.2 and it's breaking stuff I did not 
> anticipate. :)
>
> Thank you!
> Scott
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From fengting.chen at oracle.com  Tue Jul  8 14:15:36 2025
From: fengting.chen at oracle.com (Fengting Chen)
Date: Tue, 8 Jul 2025 21:15:36 +0000
Subject: [gdal-dev] [External] : Re: Can GDAL driver be reused by GDAL
 python binding
In-Reply-To: <20f5d85d-4397-4494-b584-0eb48854f293@spatialys.com>
References: <IA4PR10MB8636D306F73E6BD854A08D9C934FA@IA4PR10MB8636.namprd10.prod.outlook.com>
 <20f5d85d-4397-4494-b584-0eb48854f293@spatialys.com>
Message-ID: <IA4PR10MB86361F73BD049CFD4FE66B3D934EA@IA4PR10MB8636.namprd10.prod.outlook.com>

Hi Even,

Thanks for the helpful information. I understand that the connection pool can be stored in the driver instance and destroyed when the driver is destroyed. My question is that in the python environment, when is the individual driver created and registered, and when is the driver deregistered or destroyed?

Thanks!
Fengting

From: Even Rouault <even.rouault at spatialys.com>
Date: Monday, July 7, 2025 at 5:23?PM
To: Fengting Chen <fengting.chen at oracle.com>, gdal dev <gdal-dev at lists.osgeo.org>
Subject: [External] : Re: [gdal-dev] Can GDAL driver be reused by GDAL python binding

Hi,

Connection pooling is an internal implementation driver of each driver. You have to be careful about multi-threaded use cases if you want to implement that though. The PostGISRaster driver has some connection pooling. See PostGISRasterDriver::GetConnection()

Even
Le 07/07/2025 ? 21:18, Fengting Chen via gdal-dev a ?crit :
Hi,

A Python program can invoke GDAL driver through gdal.open() to read/write raster/vector data. Is it possible for the GDAL driver to be reused in order to avoid reinitializing the driver for each gdal.open() call? For example, if a GDAL driver to a database implements a connection pool, will each gdal.open() call be able to ask the driver to retrieve a db connection from the connection pool, instead of creating a new database connection?

Thanks!



_______________________________________________

gdal-dev mailing list

gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>

https://lists.osgeo.org/mailman/listinfo/gdal-dev<https://urldefense.com/v3/__https:/lists.osgeo.org/mailman/listinfo/gdal-dev__;!!ACWV5N9M2RV99hQ!KAckGsX9gNCOP-HAQTxfRsZm3Xod4abGQdnGxilkZwyUS8AF_Tt1OaLmGdLSQdFv9inMKSETawTOUt6BTT5Egb0JUSxL$>

--

http://www.spatialys.com<https://urldefense.com/v3/__http:/www.spatialys.com__;!!ACWV5N9M2RV99hQ!KAckGsX9gNCOP-HAQTxfRsZm3Xod4abGQdnGxilkZwyUS8AF_Tt1OaLmGdLSQdFv9inMKSETawTOUt6BTT5EgSzi2TuS$>

My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250708/fb5f578c/attachment.htm>

From even.rouault at spatialys.com  Tue Jul  8 14:23:20 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jul 2025 23:23:20 +0200
Subject: [gdal-dev] [External] : Re: Can GDAL driver be reused by GDAL
 python binding
In-Reply-To: <IA4PR10MB86361F73BD049CFD4FE66B3D934EA@IA4PR10MB8636.namprd10.prod.outlook.com>
References: <IA4PR10MB8636D306F73E6BD854A08D9C934FA@IA4PR10MB8636.namprd10.prod.outlook.com>
 <20f5d85d-4397-4494-b584-0eb48854f293@spatialys.com>
 <IA4PR10MB86361F73BD049CFD4FE66B3D934EA@IA4PR10MB8636.namprd10.prod.outlook.com>
Message-ID: <c8de0ae8-abb9-40a0-b671-9a06e17840be@spatialys.com>


Le 08/07/2025 ? 23:15, Fengting Chen a ?crit?:
>
> Hi Even,
>
> Thanks for the helpful information. I understand that the connection 
> pool can be stored in the driver instance and destroyed when the 
> driver is destroyed. My question is that in the python environment, 
> when is the individual driver created and registered,
>
At "from osgeo import gdal" time
>
> and when is the driver deregistered or destroyed?
>
It is never destroyed


-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250708/80da3777/attachment-0001.htm>

From even.rouault at spatialys.com  Tue Jul  8 14:30:13 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 8 Jul 2025 23:30:13 +0200
Subject: [gdal-dev] 3.11.2 RC2 available (was Re: GDAL 3.11.2 release
 candidate available)
In-Reply-To: <cff7745d-793c-4bea-a245-7c2d0e3ec930@spatialys.com>
References: <cff7745d-793c-4bea-a245-7c2d0e3ec930@spatialys.com>
Message-ID: <90f2aa43-516c-4919-b908-fc22aa57c3b0@spatialys.com>

A 3.11.2 RC2 with an extra bug fix for the gdallocationinfo regression 
that has just been reported:

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.11.2/gdal3112rc2.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc2.tar.gz
https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc2.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.11.2RC2/NEWS.md

Even


-- 
http://www.spatialys.com
My software is free, but my time generally not.


From public at postholer.com  Tue Jul  8 15:32:19 2025
From: public at postholer.com (Scott)
Date: Tue, 8 Jul 2025 15:32:19 -0700
Subject: [gdal-dev] 3.11.2 RC2 available (was Re: GDAL 3.11.2 release
 candidate available)
In-Reply-To: <90f2aa43-516c-4919-b908-fc22aa57c3b0@spatialys.com>
References: <cff7745d-793c-4bea-a245-7c2d0e3ec930@spatialys.com>
 <90f2aa43-516c-4919-b908-fc22aa57c3b0@spatialys.com>
Message-ID: <5be2014a-da86-4e9d-9ec0-004b14315874@postholer.com>

Works great!

Thanks again Even for the quick fix.

Scott

On 7/8/25 14:30, Even Rouault via gdal-dev wrote:
> A 3.11.2 RC2 with an extra bug fix for the gdallocationinfo regression 
> that has just been reported:
> 
> Pick up an archive among the following ones (by ascending size):
> 
>  ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc2.tar.xz
>  ? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2rc2.tar.gz
>  ? https://download.osgeo.org/gdal/3.11.2/gdal3112rc2.zip
> 
> A snapshot of the gdalautotest suite is also available:
> 
> https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc2.tar.gz
> https://download.osgeo.org/gdal/3.11.2/gdalautotest-3.11.2rc2.zip
> 
> The NEWS file is here:
> 
>  ? https://github.com/OSGeo/gdal/blob/v3.11.2RC2/NEWS.md
> 
> Even
> 
> 


From even.rouault at spatialys.com  Wed Jul  9 00:30:01 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 9 Jul 2025 09:30:01 +0200
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
Message-ID: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>

Hi,

starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From j1 at jimenezshaw.com  Wed Jul  9 00:31:16 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Wed, 9 Jul 2025 09:31:16 +0200
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
In-Reply-To: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
References: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
Message-ID: <CADRrdKt10o+-EnZCS11iD___8ukXt67zccDct-ZyK4Pk01wPOQ@mail.gmail.com>

+1 Javier

On Wed, 9 Jul 2025, 09:30 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250709/ca2fa0c8/attachment.htm>

From michael.smith.erdc at gmail.com  Wed Jul  9 02:10:42 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Wed, 9 Jul 2025 05:10:42 -0400
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
Message-ID: <C2D41617-0484-4CD0-82FF-BDB93BBFD0B3@gmail.com>

+1

Michael Smith

> On Jul 9, 2025, at 3:30?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> ?Hi,
> 
> starting with my +1
> 
> Even
> 
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From howard at hobu.co  Wed Jul  9 07:06:30 2025
From: howard at hobu.co (Howard Butler)
Date: Wed, 9 Jul 2025 09:06:30 -0500
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
In-Reply-To: <C2D41617-0484-4CD0-82FF-BDB93BBFD0B3@gmail.com>
References: <C2D41617-0484-4CD0-82FF-BDB93BBFD0B3@gmail.com>
Message-ID: <D9CC6CE3-56F1-4AE5-B744-4DA48560B4AB@hobu.co>

+1

> On Jul 9, 2025, at 4:10?AM, Michael Smith via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1
> 
> Michael Smith
> 
>> On Jul 9, 2025, at 3:30?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
>> 
>> ?Hi,
>> 
>> starting with my +1
>> 
>> Even
>> 
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Wed Jul  9 11:42:46 2025
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Wed, 9 Jul 2025 18:42:46 +0000
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
In-Reply-To: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
References: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
Message-ID: <DB9PR09MB68874891BAA72DA90435F81CFD49A@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-


________________________________________
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> k?ytt?j?n Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> puolesta
L?hetetty: Keskiviikko 9. hein?kuuta 2025 10.30
Vastaanottaja: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release


Hi,

starting with my +1

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev



From szekerest at gmail.com  Wed Jul  9 12:28:44 2025
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed, 9 Jul 2025 21:28:44 +0200
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
In-Reply-To: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
References: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
Message-ID: <CACALY+SxOmRfLPvJ74y-Gg=dDTwztzC8BnOCdRCc1a_=2BDovA@mail.gmail.com>

+1

Tamas

Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> ezt ?rta (id?pont:
2025. j?l. 9., Sze, 9:30):

> Hi,
>
> starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250709/95f51b2d/attachment.htm>

From norman.barker at gmail.com  Wed Jul  9 12:50:02 2025
From: norman.barker at gmail.com (Norman Barker)
Date: Wed, 9 Jul 2025 14:50:02 -0500
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
In-Reply-To: <CACALY+SxOmRfLPvJ74y-Gg=dDTwztzC8BnOCdRCc1a_=2BDovA@mail.gmail.com>
References: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
 <CACALY+SxOmRfLPvJ74y-Gg=dDTwztzC8BnOCdRCc1a_=2BDovA@mail.gmail.com>
Message-ID: <CAN_Dn-FZinvNCEYX8LLxVsdASfkB+vSFE_+COQybZN4Gv=5a9g@mail.gmail.com>

+1

On Wed, Jul 9, 2025 at 2:29?PM Tamas Szekeres via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1
>
> Tamas
>
> Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> ezt ?rta (id?pont:
> 2025. j?l. 9., Sze, 9:30):
>
>> Hi,
>>
>> starting with my +1
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250709/56b87834/attachment.htm>

From tmoore at spatial.ca  Thu Jul 10 17:31:46 2025
From: tmoore at spatial.ca (Tom Moore)
Date: Thu, 10 Jul 2025 20:31:46 -0400
Subject: [gdal-dev] Problems setting up the Windows build environment for
 first time
Message-ID: <fee3da78-3fa0-4260-acf3-e2f642daabef@app.fastmail.com>

Newbie here.  As the title says I am trying to set up a build environment.

I was trying to follow the instructions from the website: https://gdal.org/en/stable/development/dev_environment.html

I got to the step to install the compiler and got an error about conflicts and the process stopped.  Does anyone have a clue about what is going wrong here??  Output follows:

===== start of output

(gdal) C:\Users\tmoore> conda install --yes -c conda-forge compilers clcache
Channels:
- conda-forge
- defaults
Platform: win-64
Collecting package metadata (repodata.json): done
Solving environment: failed

LibMambaUnsatisfiableError: Encountered problems while solving:
  - nothing provides vc 10.* needed by python-3.4.5-0

Could not solve for environment specs
The following packages are incompatible
?? clcache =* * is installable with the potential options
?  ?? clcache 4.2.0 would require
?  ?  ?? python >=3.10,<3.11.0a0 *, which can be installed;
?  ?? clcache [4.1.0|4.2.0] would require
?  ?  ?? python >=3.8,<3.9.0a0 *, which can be installed;
?  ?? clcache [4.1.0|4.2.0] would require
?  ?  ?? python >=3.9,<3.10.0a0 *, which can be installed;
?  ?? clcache 3.3.0 would require
?  ?  ?? python =3.4 * but there are no viable options
?  ?     ?? python 3.4.5 would require
?  ?     ?  ?? vc =10 *, which does not exist (perhaps a missing channel);
?  ?     ?? python 3.4.5 would require
?  ?        ?? vs2010_runtime =* *, which does not exist (perhaps a missing channel);
?  ?? clcache [3.3.0|4.0.0|4.1.0] would require
?  ?  ?? python [=3.5 *|>=3.5,<3.6.0a0 *], which can be installed;
?  ?? clcache [4.0.0|4.1.0] would require
?  ?  ?? python =3.6 *, which can be installed;
?  ?? clcache [4.1.0|4.2.0] would require
?  ?  ?? python >=3.6,<3.7.0a0 *, which can be installed;
?  ?? clcache 4.1.0 would require
?     ?? python >=3.7,<3.8.0a0 *, which can be installed;
?? pin on python 3.13.* =* * is not installable because it requires
   ?? python =3.13 *, which conflicts with any installable versions previously reported.

Pins seem to be involved in the conflict. Currently pinned specs:
- python=3.13

==== end of output

Thanks, Tom

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250710/bfd2349d/attachment.htm>

From even.rouault at spatialys.com  Fri Jul 11 01:49:05 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jul 2025 10:49:05 +0200
Subject: [gdal-dev] Motion: approve GDAL 3.11.2RC2 as final release
In-Reply-To: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
References: <b10c7f20-7c3d-4eb5-96ea-5c267c9caae8@spatialys.com>
Message-ID: <a79e6457-3d58-42a1-aed5-60bb6c67fde0@spatialys.com>

Motion passed with +1 from PSC members JavierJS, JukkaR, TamasS, 
NormanB, MichaelS, HowardB and me

Le 09/07/2025 ? 09:30, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Jul 11 02:02:35 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jul 2025 11:02:35 +0200
Subject: [gdal-dev] GDAL 3.11.2 is released
Message-ID: <0ea70d08-3773-4cb4-b610-10761b401939@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.11.2 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.11.2/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2.tar.xz
 ??? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2.tar.xz.md5
 ??? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2.tar.xz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2.tar.gz
 ??? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2.tar.gz.md5
 ??? https://download.osgeo.org/gdal/3.11.2/gdal-3.11.2.tar.gz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.2/gdal3112.zip
 ??? https://download.osgeo.org/gdal/3.11.2/gdal3112.zip.md5
 ??? https://download.osgeo.org/gdal/3.11.2/gdal3112.zip.sig

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Fri Jul 11 08:24:59 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 11 Jul 2025 17:24:59 +0200
Subject: [gdal-dev] Problems setting up the Windows build environment
 for first time
In-Reply-To: <fee3da78-3fa0-4260-acf3-e2f642daabef@app.fastmail.com>
References: <fee3da78-3fa0-4260-acf3-e2f642daabef@app.fastmail.com>
Message-ID: <6a872f80-36f6-4c15-bc13-d472265c1e41@spatialys.com>

Tom,

you can drop the clcache dependency if that helps. Otherwise try to 
create a conda env from scratch (if you didn't do that)

Even

Le 11/07/2025 ? 02:31, Tom Moore via gdal-dev a ?crit?:
> Newbie here.? As the title says I am trying to set up a build environment.
>
> I was trying to follow the instructions from the website: 
> https://gdal.org/en/stable/development/dev_environment.html
>
> I got to the step to install the compiler and got an error about 
> conflicts and the process stopped.? Does anyone have a clue about what 
> is going wrong here??? Output follows:
>
> ===== start of output
>
> (gdal) C:\Users\tmoore> conda install --yes -c conda-forge compilers 
> clcache
> Channels:
> - conda-forge
> - defaults
> Platform: win-64
> Collecting package metadata (repodata.json): done
> Solving environment: failed
>
> LibMambaUnsatisfiableError: Encountered problems while solving:
> ? - nothing provides vc 10.* needed by python-3.4.5-0
>
> Could not solve for environment specs
> The following packages are incompatible
> ?? clcache =* * is installable with the potential options
> ?? ?? clcache 4.2.0 would require
> ?? ?? ?? python >=3.10,<3.11.0a0 *, which can be installed;
> ?? ?? clcache [4.1.0|4.2.0] would require
> ?? ?? ?? python >=3.8,<3.9.0a0 *, which can be installed;
> ?? ?? clcache [4.1.0|4.2.0] would require
> ?? ?? ?? python >=3.9,<3.10.0a0 *, which can be installed;
> ?? ?? clcache 3.3.0 would require
> ?? ?? ?? python =3.4 * but there are no viable options
> ?? ????? ?? python 3.4.5 would require
> ?? ????? ?? ?? vc =10 *, which does not exist (perhaps a missing channel);
> ?? ????? ?? python 3.4.5 would require
> ?? ???????? ?? vs2010_runtime =* *, which does not exist (perhaps a 
> missing channel);
> ?? ?? clcache [3.3.0|4.0.0|4.1.0] would require
> ?? ?? ?? python [=3.5 *|>=3.5,<3.6.0a0 *], which can be installed;
> ?? ?? clcache [4.0.0|4.1.0] would require
> ?? ?? ?? python =3.6 *, which can be installed;
> ?? ?? clcache [4.1.0|4.2.0] would require
> ?? ?? ?? python >=3.6,<3.7.0a0 *, which can be installed;
> ?? ?? clcache 4.1.0 would require
> ????? ?? python >=3.7,<3.8.0a0 *, which can be installed;
> ?? pin on python 3.13.* =* * is not installable because it requires
> ?? ?? python =3.13 *, which conflicts with any installable versions 
> previously reported.
>
> Pins seem to be involved in the conflict. Currently pinned specs:
> - python=3.13
>
> ==== end of output
>
> Thanks, Tom
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sethg at geographika.co.uk  Sat Jul 12 03:45:07 2025
From: sethg at geographika.co.uk (Seth G)
Date: Sat, 12 Jul 2025 12:45:07 +0200
Subject: [gdal-dev] ADBC driver and DuckDB on Windows
Message-ID: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>

Hi all,

I'm wondering if anyone has got this working on Windows?

With a test.db the following works fine on a full Linux GDAL Docker image:

docker run -it --name gdal-ubuntu -v D:/Data/GDAL:/data ghcr.io/osgeo/gdal:ubuntu-full-3.11.0 /bin/bash
ogr2ogr out.gpkg test.db

>From the docs https://gdal.org/en/latest/drivers/vector/adbc.html

"Assuming libduckdb.so, libduckdb.dylib or duckdb.dll is available (and it is in a system location, or can be located through LD_LIBRARY_PATH on Linux, DYLD_LIBRARY_PATH on MacOSX or PATH on Windows)."

I'm trying to get this working using GDAL via Conda on Windows. The ADBC driver is isntalled:

gdal vector --formats
# includes ADBC -vector- (ro): Arrow Database Connectivity

I tried downloaded the duckdb.dll from https://duckdb.org/docs/installation/?version=stable&environment=cplusplus&platform=win&download_method=direct&architecture=x86_64 (https://github.com/duckdb/duckdb/releases/download/v1.3.2/libduckdb-windows-amd64.zip) and setting the path:

$env:Path = "D:\Tools\libduckdb-windows-amd64;" + $env:Path
ogr2ogr out.gpkg test.db

Each time, the following error is returned:

ERROR 1: Unable to open datasource `test.db' with the following drivers.

With a longer command:

ogr2ogr -f parquet overture-vt-addresses.parquet `
	-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64/duckdb.dll" `
	-oo PRELUDE_STATEMENTS="LOAD SPATIAL" `
	-oo PRELUDE_STATEMENTS="LOAD PARQUET" `
	-oo PRELUDE_STATEMENTS="load httpfs" `
	-oo PRELUDE_STATEMENTS="load aws" `
	-oo SQL="select * from read_parquet('s3://overturemaps-us-west-2/release/2025-05-21.0/theme=addresses/type=address/*')'"  ADBC:

Results in:

ERROR 1: AdbcLoadDriver() failed:
ERROR 1: Unable to open datasource `ADBC:' with the following drivers.

I tried various paths for ADBC_DRIVER:

	-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64"
	-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64/duckdb.dll"
	-oo ADBC_DRIVER="D:\Tools\libduckdb-windows-amd64\duckdb.dll"

Just to note the following works in the Conda environment:

python -c "import ctypes;ctypes.CDLL(r'D:\Tools\libduckdb-windows-amd64\duckdb.dll')"

conda install duckdb doesn't help and `conda install conda-forge::libduckdb` isn't available on Windows. 

Thanks for any suggestions,

Seth


From even.rouault at spatialys.com  Sat Jul 12 04:12:15 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Jul 2025 13:12:15 +0200
Subject: [gdal-dev] GDAL 3.11.3 is released
Message-ID: <09f98448-5246-4713-810b-7f8c2bfd8c2f@spatialys.com>

Hi,

Without any advanced warning, here's a 3.11.3 whose only difference with 
3.11.2 is the following fix for a regression that went in 3.11.1:

PG driver:
 ?* restore string truncation that was broken in 3.11.1


Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.11.3/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.11.3/gdal-3.11.3.tar.xz
 ??? https://download.osgeo.org/gdal/3.11.3/gdal-3.11.3.tar.xz.md5
 ??? https://download.osgeo.org/gdal/3.11.3/gdal-3.11.3.tar.xz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.3/gdal-3.11.3.tar.gz
 ??? https://download.osgeo.org/gdal/3.11.3/gdal-3.11.3.tar.gz.md5
 ??? https://download.osgeo.org/gdal/3.11.3/gdal-3.11.3.tar.gz.sig

or

 ??? https://download.osgeo.org/gdal/3.11.3/gdal3113.zip
 ??? https://download.osgeo.org/gdal/3.11.3/gdal3113.zip.md5
 ??? https://download.osgeo.org/gdal/3.11.3/gdal3113.zip.sig

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From even.rouault at spatialys.com  Sat Jul 12 04:16:22 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Jul 2025 13:16:22 +0200
Subject: [gdal-dev] ADBC driver and DuckDB on Windows
In-Reply-To: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>
References: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>
Message-ID: <54490d96-8378-4959-8be0-93acd65887df@spatialys.com>

Seth,

there has been an enhancement in *master* (not in 3.11) for being able 
to load libduckdb when the ADBC driver is built without 
libadbc-driver-manager support. So if you're not on master, this is 
expected

Even

Le 12/07/2025 ? 12:45, Seth G via gdal-dev a ?crit?:
> Hi all,
>
> I'm wondering if anyone has got this working on Windows?
>
> With a test.db the following works fine on a full Linux GDAL Docker image:
>
> docker run -it --name gdal-ubuntu -v D:/Data/GDAL:/data ghcr.io/osgeo/gdal:ubuntu-full-3.11.0 /bin/bash
> ogr2ogr out.gpkg test.db
>
> >From the docs https://gdal.org/en/latest/drivers/vector/adbc.html
>
> "Assuming libduckdb.so, libduckdb.dylib or duckdb.dll is available (and it is in a system location, or can be located through LD_LIBRARY_PATH on Linux, DYLD_LIBRARY_PATH on MacOSX or PATH on Windows)."
>
> I'm trying to get this working using GDAL via Conda on Windows. The ADBC driver is isntalled:
>
> gdal vector --formats
> # includes ADBC -vector- (ro): Arrow Database Connectivity
>
> I tried downloaded the duckdb.dll from https://duckdb.org/docs/installation/?version=stable&environment=cplusplus&platform=win&download_method=direct&architecture=x86_64 (https://github.com/duckdb/duckdb/releases/download/v1.3.2/libduckdb-windows-amd64.zip) and setting the path:
>
> $env:Path = "D:\Tools\libduckdb-windows-amd64;" + $env:Path
> ogr2ogr out.gpkg test.db
>
> Each time, the following error is returned:
>
> ERROR 1: Unable to open datasource `test.db' with the following drivers.
>
> With a longer command:
>
> ogr2ogr -f parquet overture-vt-addresses.parquet `
> 	-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64/duckdb.dll" `
> 	-oo PRELUDE_STATEMENTS="LOAD SPATIAL" `
> 	-oo PRELUDE_STATEMENTS="LOAD PARQUET" `
> 	-oo PRELUDE_STATEMENTS="load httpfs" `
> 	-oo PRELUDE_STATEMENTS="load aws" `
> 	-oo SQL="select * from read_parquet('s3://overturemaps-us-west-2/release/2025-05-21.0/theme=addresses/type=address/*')'"  ADBC:
>
> Results in:
>
> ERROR 1: AdbcLoadDriver() failed:
> ERROR 1: Unable to open datasource `ADBC:' with the following drivers.
>
> I tried various paths for ADBC_DRIVER:
>
> 	-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64"
> 	-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64/duckdb.dll"
> 	-oo ADBC_DRIVER="D:\Tools\libduckdb-windows-amd64\duckdb.dll"
>
> Just to note the following works in the Conda environment:
>
> python -c "import ctypes;ctypes.CDLL(r'D:\Tools\libduckdb-windows-amd64\duckdb.dll')"
>
> conda install duckdb doesn't help and `conda install conda-forge::libduckdb` isn't available on Windows.
>
> Thanks for any suggestions,
>
> Seth
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.


From michael.smith.erdc at gmail.com  Sat Jul 12 04:46:14 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sat, 12 Jul 2025 07:46:14 -0400
Subject: [gdal-dev] ADBC driver and DuckDB on Windows
In-Reply-To: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>
References: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>
Message-ID: <85C52096-E9B9-4B33-8025-88DB8A1894F1@gmail.com>

Seth,

Have you tried adding https://anaconda.org/conda-forge/libadbc-driver-manager to your conda build and then adding duckdb.dll?

Mike


-- 

Michael Smith 
RSGIS Center ? ERDC CRREL NH 
US Army Corps 





?On 7/12/25, 6:51 AM, "gdal-dev on behalf of Seth G via gdal-dev" <gdal-dev-bounces at lists.osgeo.org <mailto:gdal-dev-bounces at lists.osgeo.org> on behalf of gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:


Hi all,


I'm wondering if anyone has got this working on Windows?


With a test.db the following works fine on a full Linux GDAL Docker image:


docker run -it --name gdal-ubuntu -v D:/Data/GDAL:/data ghcr.io/osgeo/gdal:ubuntu-full-3.11.0 /bin/bash
ogr2ogr out.gpkg test.db


>From the docs https://gdal.org/en/latest/drivers/vector/adbc.html <https://gdal.org/en/latest/drivers/vector/adbc.html>


"Assuming libduckdb.so, libduckdb.dylib or duckdb.dll is available (and it is in a system location, or can be located through LD_LIBRARY_PATH on Linux, DYLD_LIBRARY_PATH on MacOSX or PATH on Windows)."


I'm trying to get this working using GDAL via Conda on Windows. The ADBC driver is isntalled:


gdal vector --formats
# includes ADBC -vector- (ro): Arrow Database Connectivity


I tried downloaded the duckdb.dll from https://duckdb.org/docs/installation/?version=stable&environment=cplusplus&platform=win&download_method=direct&architecture=x86_64 <https://duckdb.org/docs/installation/?version=stable&amp;environment=cplusplus&amp;platform=win&amp;download_method=direct&amp;architecture=x86_64> (https://github.com/duckdb/duckdb/releases/download/v1.3.2/libduckdb-windows-amd64.zip <https://github.com/duckdb/duckdb/releases/download/v1.3.2/libduckdb-windows-amd64.zip>) and setting the path:


$env:Path = "D:\Tools\libduckdb-windows-amd64;" + $env:Path
ogr2ogr out.gpkg test.db


Each time, the following error is returned:


ERROR 1: Unable to open datasource `test.db' with the following drivers.


With a longer command:


ogr2ogr -f parquet overture-vt-addresses.parquet `
-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64/duckdb.dll" `
-oo PRELUDE_STATEMENTS="LOAD SPATIAL" `
-oo PRELUDE_STATEMENTS="LOAD PARQUET" `
-oo PRELUDE_STATEMENTS="load httpfs" `
-oo PRELUDE_STATEMENTS="load aws" `
-oo SQL="select * from read_parquet('s3://overturemaps-us-west-2/release/2025-05-21.0/theme=addresses/type=address/*')'" ADBC:


Results in:


ERROR 1: AdbcLoadDriver() failed:
ERROR 1: Unable to open datasource `ADBC:' with the following drivers.


I tried various paths for ADBC_DRIVER:


-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64"
-oo ADBC_DRIVER="D:/Tools/libduckdb-windows-amd64/duckdb.dll"
-oo ADBC_DRIVER="D:\Tools\libduckdb-windows-amd64\duckdb.dll"


Just to note the following works in the Conda environment:


python -c "import ctypes;ctypes.CDLL(r'D:\Tools\libduckdb-windows-amd64\duckdb.dll')"


conda install duckdb doesn't help and `conda install conda-forge::libduckdb` isn't available on Windows. 


Thanks for any suggestions,


Seth


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>





From even.rouault at spatialys.com  Sat Jul 12 04:50:38 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Sat, 12 Jul 2025 13:50:38 +0200
Subject: [gdal-dev] ADBC driver and DuckDB on Windows
In-Reply-To: <85C52096-E9B9-4B33-8025-88DB8A1894F1@gmail.com>
References: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>
 <85C52096-E9B9-4B33-8025-88DB8A1894F1@gmail.com>
Message-ID: <d92b0cb8-7b91-4b52-962a-a2e8b84e5cb4@spatialys.com>

Mike,

I don't remember the details but there's an issue (or at least used to 
be last time I tried) with the conda package libadbc-driver-manager on 
Windows.

Le 12/07/2025 ? 13:46, Michael Smith via gdal-dev a ?crit?:
> Seth,
>
> Have you tried adding https://anaconda.org/conda-forge/libadbc-driver-manager to your conda build and then adding duckdb.dll?
>
> Mike
>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.


From sethg at geographika.co.uk  Sat Jul 12 07:00:08 2025
From: sethg at geographika.co.uk (Seth G)
Date: Sat, 12 Jul 2025 16:00:08 +0200
Subject: [gdal-dev] ADBC driver and DuckDB on Windows
In-Reply-To: <d92b0cb8-7b91-4b52-962a-a2e8b84e5cb4@spatialys.com>
References: <215af795-3328-4212-b889-d9f01da80d62@app.fastmail.com>
 <85C52096-E9B9-4B33-8025-88DB8A1894F1@gmail.com>
 <d92b0cb8-7b91-4b52-962a-a2e8b84e5cb4@spatialys.com>
Message-ID: <f4838f8d-75e8-47c9-9b8a-27856f19c18e@app.fastmail.com>

Thanks Even and Mike.

Using GDAL master works (I presume due to this PR - https://github.com/OSGeo/gdal/pull/12635).
Working example:

```
 conda create --yes --name gdal-master
 conda activate gdal-master
 conda install -c gdal-master -c conda-forge gdal-master::gdal
  
 $env:Path = "D:\Tools\libduckdb-windows-amd64;" + $env:Path
 ogrinfo D:\Data\GDAL\test.db
```

I also tried `conda install conda-forge::libadbc-driver-manager`, but I couldn't find a duckdb.dll after it was installed (it does install adbc_driver_manager.dll).

A tutorial/examples to follow!

Seth

--
web:https://geographika.net & https://mapserverstudio.net
mastodon: @geographika at mastodon.social

On Sat, Jul 12, 2025, at 1:50 PM, Even Rouault wrote:
> Mike,
>
> I don't remember the details but there's an issue (or at least used to 
> be last time I tried) with the conda package libadbc-driver-manager on 
> Windows.
>
> Le 12/07/2025 ? 13:46, Michael Smith via gdal-dev a ?crit?:
>> Seth,
>>
>> Have you tried adding https://anaconda.org/conda-forge/libadbc-driver-manager to your conda build and then adding duckdb.dll?
>>
>> Mike
>>
>>
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.

From tmoore at spatial.ca  Sat Jul 12 12:42:54 2025
From: tmoore at spatial.ca (Tom Moore)
Date: Sat, 12 Jul 2025 15:42:54 -0400
Subject: [gdal-dev] Problems setting up the Windows build environment
 for first time
In-Reply-To: <6a872f80-36f6-4c15-bc13-d472265c1e41@spatialys.com>
References: <fee3da78-3fa0-4260-acf3-e2f642daabef@app.fastmail.com>
 <6a872f80-36f6-4c15-bc13-d472265c1e41@spatialys.com>
Message-ID: <493563dc-59a9-412d-818e-1ce678b369a9@app.fastmail.com>

I got my development environment working after a bit of messing around.

I read the error message more closely and read about the dependency solver, and investigated the clcache package.  It turns out that clcache has not been updated since February 2020.  As the error message below clearly indicates, clcache-4.2.0 (the most recent release) has a dependency on python version no earlier than 3.10 and no later than 3.11.0a0), and newer pythons are not supported.  By default conda installed (and pinned) python 3.13 which is the the latest stable version, thus the unsatisfied dependency.

I changed the conda python install command to python=3.10 and the rest of the installation carried off without a hitch.  By the way, skipping the installation of clcache does not completely solve the problem because there were other packages that also needed an older version of python.

It might help other newbies like me if the documentation in https://gdal.org/en/stable/development/dev_environment.html could be changed to 

conda install --yes --quiet curl libiconv icu git python=3.10 swig numpy pytest zlib

although the law of the web is that even though this advice is right for today it will eventually become incorrect.

Thanks,
Tom

On Fri, Jul 11, 2025, at 11:24 AM, Even Rouault wrote:
> Tom,
> 
> you can drop the clcache dependency if that helps. Otherwise try to 
> create a conda env from scratch (if you didn't do that)
> 
> Even
> 
> Le 11/07/2025 ? 02:31, Tom Moore via gdal-dev a ?crit :
> > Newbie here.  As the title says I am trying to set up a build environment.
> >
> > I was trying to follow the instructions from the website: 
> > https://gdal.org/en/stable/development/dev_environment.html
> >
> > I got to the step to install the compiler and got an error about 
> > conflicts and the process stopped.  Does anyone have a clue about what 
> > is going wrong here??  Output follows:
> >
> > ===== start of output
> >
> > (gdal) C:\Users\tmoore> conda install --yes -c conda-forge compilers 
> > clcache
> > Channels:
> > - conda-forge
> > - defaults
> > Platform: win-64
> > Collecting package metadata (repodata.json): done
> > Solving environment: failed
> >
> > LibMambaUnsatisfiableError: Encountered problems while solving:
> >   - nothing provides vc 10.* needed by python-3.4.5-0
> >
> > Could not solve for environment specs
> > The following packages are incompatible
> > ?? clcache =* * is installable with the potential options
> > ?  ?? clcache 4.2.0 would require
> > ?  ?  ?? python >=3.10,<3.11.0a0 *, which can be installed;
> > ?  ?? clcache [4.1.0|4.2.0] would require
> > ?  ?  ?? python >=3.8,<3.9.0a0 *, which can be installed;
> > ?  ?? clcache [4.1.0|4.2.0] would require
> > ?  ?  ?? python >=3.9,<3.10.0a0 *, which can be installed;
> > ?  ?? clcache 3.3.0 would require
> > ?  ?  ?? python =3.4 * but there are no viable options
> > ?  ?     ?? python 3.4.5 would require
> > ?  ?     ?  ?? vc =10 *, which does not exist (perhaps a missing channel);
> > ?  ?     ?? python 3.4.5 would require
> > ?  ?        ?? vs2010_runtime =* *, which does not exist (perhaps a 
> > missing channel);
> > ?  ?? clcache [3.3.0|4.0.0|4.1.0] would require
> > ?  ?  ?? python [=3.5 *|>=3.5,<3.6.0a0 *], which can be installed;
> > ?  ?? clcache [4.0.0|4.1.0] would require
> > ?  ?  ?? python =3.6 *, which can be installed;
> > ?  ?? clcache [4.1.0|4.2.0] would require
> > ?  ?  ?? python >=3.6,<3.7.0a0 *, which can be installed;
> > ?  ?? clcache 4.1.0 would require
> > ?     ?? python >=3.7,<3.8.0a0 *, which can be installed;
> > ?? pin on python 3.13.* =* * is not installable because it requires
> >    ?? python =3.13 *, which conflicts with any installable versions 
> > previously reported.
> >
> > Pins seem to be involved in the conflict. Currently pinned specs:
> > - python=3.13
> >
> > ==== end of output
> >
> > Thanks, Tom
> >
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250712/0be506d1/attachment.htm>

From info at umweltschutz-und-lebenshilfe.de  Tue Jul 15 05:15:11 2025
From: info at umweltschutz-und-lebenshilfe.de (Dr. Kai Behncke)
Date: Tue, 15 Jul 2025 14:15:11 +0200 (CEST)
Subject: [gdal-dev] Creating gdal with oracle-support
Message-ID: <20250715121511.7707A3DF2CC7@dd15822.kasserver.com>

An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250715/c5b527b4/attachment.htm>

From michael.smith.erdc at gmail.com  Tue Jul 15 05:35:42 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Tue, 15 Jul 2025 08:35:42 -0400
Subject: [gdal-dev] Creating gdal with oracle-support
In-Reply-To: <20250715121511.7707A3DF2CC7@dd15822.kasserver.com>
References: <20250715121511.7707A3DF2CC7@dd15822.kasserver.com>
Message-ID: <2B9C2479-93EE-4635-B6BB-774C5FA8630A@gmail.com>

For compiling gdal with oracle, I build gdal oracle drivers as a plugin to use with conda compiled gdal. You need the instant client SDK to build.

 

I build the plugin with 

 

export CXXFLAGS="${CXXFLAGS} -std=c++17 -D_LIBCPP_DISABLE_AVAILABILITY"

 

mkdir build

cd build

 

cmake -G "Ninja" \

?????? ${CMAKE_ARGS} \

?????? -DCMAKE_BUILD_TYPE=Release \

?????? -DCMAKE_PREFIX_PATH=$PREFIX \

?????? -DCMAKE_INSTALL_PREFIX=$PREFIX \

?????? -DCMAKE_INSTALL_LIBDIR=lib \

?????? -DBUILD_SHARED_LIBS=ON \

?????? -DGDAL_ENABLE_PLUGINS=ON \

?????? -DOracle_INCLUDE_DIR=${PREFIX}/instantclient/sdk/include/ \

?????? -DBUILD_PYTHON_BINDINGS=OFF \

?????? -DGDAL_BUILD_OPTIONAL_DRIVERS:BOOL=OFF \

?????? -DOGR_BUILD_OPTIONAL_DRIVERS:BOOL=OFF \

?????? -DOGR_ENABLE_DRIVER_OCI_PLUGIN=ON \

?????? -DOGR_ENABLE_DRIVER_OCI=ON \

?????? -DGDAL_USE_GEOTIFF_INTERNAL=OFF \

?????? -DGDAL_HIDE_INTERNAL_SYMBOLS=OFF \

?????? -DOracle_LIBRARY=${PREFIX}/lib/libclntsh.so \

????? ${SRC_DIR}

 

cmake --build . -j ${CPU_COUNT} --config Release --target ogr_OCI --verbose 

 

mkdir -p $PREFIX/lib/gdalplugins

cp gdalplugins/ogr_OCI.so $PREFIX/lib/gdalplugins

? 

 

 

-- 

Michael Smith

RSGIS Center ? ERDC CRREL NH

US Army Corps

 

 

From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of "Dr. Kai Behncke via gdal-dev" <gdal-dev at lists.osgeo.org>
Reply-To: "Dr. Kai Behncke" <info at umweltschutz-und-lebenshilfe.de>
Date: Tuesday, July 15, 2025 at 8:24?AM
To: <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Creating gdal with oracle-support

 

Dear users,

I would like to create gdal with Oracle-support.

I already tried e.g. " cmake .. -DWITH_OCI=ON -DWITH_OCI8=ON -DWITH_ORACLE=ON" but I had no success.

Could anybody give me a hint how to do that please?

Thank you very much, Kai

I 

----------------------
gemeinn?tzige GmbH (gGmbH) Behncke Umweltschutz und Lebenshilfe
Dr. Kai Behncke
Am Wulberg 15
49324 Melle 
Tel.: 0176-84019660 (ab 18.00 Uhr)
http://umweltschutz-und-lebenshilfe.de

Unsere Klima- und Tierschutzprojekte sind zuweilen nicht ganz g?nstig. Wir freuen uns immer ?ber Spenden:
https://www.betterplace.org/de/projects/71760-gnadenhof-broedel-melle-artenschutzprojekt-blumiger-landkreis-osnabrueck

_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250715/f42e98c3/attachment.htm>

From richard.greenwood at gmail.com  Tue Jul 15 05:40:04 2025
From: richard.greenwood at gmail.com (Richard Greenwood)
Date: Tue, 15 Jul 2025 06:40:04 -0600
Subject: [gdal-dev] Creating gdal with oracle-support
In-Reply-To: <20250715121511.7707A3DF2CC7@dd15822.kasserver.com>
References: <20250715121511.7707A3DF2CC7@dd15822.kasserver.com>
Message-ID: <CAHBySPbYOtaP9gi_3-q-Ej6f5650WUmX3QF+qFq6koaX3DzcqQ@mail.gmail.com>

I put instant client in /opt/instantclient_21_9 and then I do:
     cmake -DOracle_ROOT=/opt/instantclient_21_9
But building it as a plugin as Michael Smith suggests is probably better,


On Tue, Jul 15, 2025 at 6:24?AM Dr. Kai Behncke via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Dear users,
>
> I would like to create gdal with Oracle-support.
>
> I already tried e.g. " cmake .. -DWITH_OCI=ON -DWITH_OCI8=ON
> -DWITH_ORACLE=ON" but I had no success.
>
> Could anybody give me a hint how to do that please?
>
> Thank you very much, Kai
>
> I
> ----------------------
> gemeinn?tzige GmbH (gGmbH) Behncke Umweltschutz und Lebenshilfe
> Dr. Kai Behncke
> Am Wulberg 15
> 49324 Melle
> Tel.: 0176-84019660 (ab 18.00 Uhr)
> http://umweltschutz-und-lebenshilfe.de
>
> Unsere Klima- und Tierschutzprojekte sind zuweilen nicht ganz g?nstig. Wir
> freuen uns immer ?ber Spenden:
>
> https://www.betterplace.org/de/projects/71760-gnadenhof-broedel-melle-artenschutzprojekt-blumiger-landkreis-osnabrueck
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Richard W. Greenwood
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250715/36eb68ec/attachment.htm>

From tmoore at spatial.ca  Wed Jul 16 17:28:51 2025
From: tmoore at spatial.ca (Tom Moore)
Date: Wed, 16 Jul 2025 20:28:51 -0400
Subject: [gdal-dev] Java bindings to gdal/ogr - looking for more
 developer documentation
In-Reply-To: <d6a0d3a4-e6fc-4dc4-a944-9c7fc1959a79@spatialys.com>
References: <40a2c286-0557-4eca-b5e4-7723d89c5250@app.fastmail.com>
 <b38b8b70-f299-4c27-a037-b03a9505eafb@spatialys.com>
 <57ba58aa-b0c4-4d85-bdc7-28fb39d1b38b@app.fastmail.com>
 <e8f79d7b-a4fd-4505-8b8d-d929c71c75ca@spatialys.com>
 <c3457988-0de7-4c66-86d8-407771b80936@app.fastmail.com>
 <d6a0d3a4-e6fc-4dc4-a944-9c7fc1959a79@spatialys.com>
Message-ID: <1370f2a3-3753-4ef1-8f75-770c79b988a7@app.fastmail.com>

Hi Evan

I seem to still be having problems closing datasets in Java resulting in a JVM crash, using gdal-3-13-3_x64 downloaded from the GISInternals site.  Below is the stack trace information. 

---------------  T H R E A D  ---------------

Current thread (0x000001ffd39932c0):  JavaThread "Finalizer" daemon [_thread_in_native, id=25140, stack(0x000000ba6eb00000,0x000000ba6ec00000) (1024K)]

Stack: [0x000000ba6eb00000,0x000000ba6ec00000],  sp=0x000000ba6ebfed60,  free space=1019k
Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, C=native code)
C  [gdal.dll+0xc86927]

Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
j  org.gdal.gdal.gdalJNI.delete_Dataset(J)V+0
j  org.gdal.gdal.Dataset.delete()V+25
j  org.gdal.gdal.Dataset.finalize()V+1
j  java.lang.System$2.invokeFinalize(Ljava/lang/Object;)V+1 java.base at 21.0.6
j  java.lang.ref.Finalizer.runFinalizer(Ljdk/internal/access/JavaLangAccess;)V+115 java.base at 21.0.6
j  java.lang.ref.Finalizer$FinalizerThread.run()V+29 java.base at 21.0.6
v  ~StubRoutines::call_stub 0x000001ffa369100d

siginfo: EXCEPTION_ACCESS_VIOLATION (0xc0000005), reading address 0xffffffffffffffff

The crash is happening when the swig delete_Dataset method, called by the finalizer, calls into the gdal.dll.

I tried calling Open() and Close() several times in a row to see if this would trigger the problem, like this:
gdal.*AllRegister*();
 Dataset ds = gdal.Open(filename); 
 ds.Close();
 ds.Close();  

but that seemed to work ok.

I also tried open and close sequences, like this:
 Dataset ds = gdal.Open(filename);
 ds.Close();
 ds = gdal.Open(filename);
 ds.Close();  
 ds = gdal.Open(filename);
 System.gc();
 System.runFinalization();

This didn't trigger a problem either.  I did a few more tests, repeating steps of opening a dataset, reading a band, closing the dataset, and this didn't do it either.

If I enable CPL_DEBUG then my pattern of access that causes the crash is:
GDAL: GDALDriver::Create(GTiff,c:/tmp/test1.tif,10,10,1,Int32,000001BCB9893680)
GDAL: GDALClose(c:/tmp/test1.tif, this=000001BCB9872A90)
GDAL: GDALOpen(c:/tmp/test1.tif, this=000001BCB98784D0) succeeds as GTiff.
GDAL: GDALClose(c:/tmp/test1.tif, this=000001BCB98784D0)
GDAL: GDALOpen(c:/tmp/test1.tif, this=000001BCBE486550) succeeds as GTiff.
GDAL: GDALOpen(c:/tmp/test1.tif.vat.dbf, this=000001BCBE10D070) succeeds as ESRI Shapefile.
GDAL: GDALClose(c:/tmp/test1.tif.vat.dbf, this=000001BCBE10D070)
GDAL: GDALClose(c:/tmp/test1.tif, this=000001BCBE486550)

Around this point the finalizer kicks in and the JVM crashes.

This is a hard one for me to track down, because I don't know the tooling to debug native cpp code from within Java.  What I could do is insert some debugging statements in to the code to try to see what is going on.  If you have any suggestions about this I would be happy to try it.

Tom


On Fri, May 30, 2025, at 5:53 PM, Even Rouault wrote:
> 
> Le 30/05/2025 ? 23:39, Tom Moore a ?crit :
> > Hi Even
> >
> > I just wanted to update you and provide a record for posterity with 
> > the results of me playing around with gdal/java and resource management.
> >
> > It appears to me that Dataset objects should not be closed from Java 
> > client code.  If you do then often there will be an access violation 
> > (native null pointer) that will crash the JVM. From the dump file the 
> > following stack trace shows the Java code being executed when the 
> > exception occurs:
> 
> I believe this issue should be fixed in 3.11.0 per 
> https://github.com/OSGeo/gdal/commit/ec4ca7930b48653bb0fac27b59c6c1bf883c45f2
> 
> Actually historically this was the .delete() method that should be 
> called. The exposition of .Close() is quite recent and was broken (until 
> the above mentioned fix)
> 
> >
> > Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
> > j  org.gdal.gdal.gdalJNI.delete_Dataset(J)V+0
> > j  org.gdal.gdal.Dataset.delete()V+25
> > j  org.gdal.gdal.Dataset.finalize()V+1
> > j  java.lang.System$2.invokeFinalize(Ljava/lang/Object;)V+1 
> > java.base at 21.0.6
> > j 
> > java.lang.ref.Finalizer.runFinalizer(Ljdk/internal/access/JavaLangAccess;)V+115 
> > java.base at 21.0.6
> > j  java.lang.ref.Finalizer$FinalizerThread.run()V+29 java.base at 21.0.6
> >
> > So it looks like the swig bindings implement a finalizer to dispose of 
> > the native object when the reference is no longer reachable (nice!).  
> > However it looks like there might not be any protection to prevent bad 
> > things from happening when the Delete method is called more than 
> > once.  It appears that in this case that when the finalizer calls 
> > Delete on the Dataset the jvm crashes because the Dataset has already 
> > been closed manually and the resources have already been released.
> >
> > If I am correct in this conclusions then this is not a problem.  If 
> > correct I suggest that either the docs be updated to indicate do not 
> > manually call Delete on the Dataset object, or change the Delete 
> > method code to gracefully handle multiple calls (better choice).
> >
> > By the way, something to note for the future is that finalizers have 
> > been deprecated since Java 9 (2017).  This is described in 
> > https://openjdk.org/jeps/421. Although deprecated, finalizers are 
> > still allowed in modern jdk's and probably will be for a while yet. At 
> > some future time they will be removed.  The suggested replacement for 
> > finalizers are cleaners, but they are only available in Java 9+.  When 
> > finalizers are removed there will need to be a new set of bindings 
> > that use cleaners.  You can probably ignore this problem for a few 
> > more years, but at some point you will need to provide two sets of 
> > Java bindings (one required for Java 8 and earlier, and one required 
> > for some future Java and later).
> 
> Thanks for the heads up. Seizing the opportunity to remind interesting 
> parties in the GDAL Java bindings that they should not be shy and are 
> welcome to be proactive. On my side, they are very very minimilastically 
> maintained.
> 
> Even
> 
> -- 
> http://www.spatialys.com
> My software is free, but my time generally not.
> 
> 

--
Tom Moore
Spatial Planning Systems
960 Burkes Bluff Lane
Deep River ON  K0J 1P0
Canada

Phone: +1 613 584 9354
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250716/58d98163/attachment.htm>

From even.rouault at spatialys.com  Fri Jul 18 01:27:59 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 18 Jul 2025 10:27:59 +0200
Subject: [gdal-dev] Java bindings to gdal/ogr - looking for more
 developer documentation
In-Reply-To: <1370f2a3-3753-4ef1-8f75-770c79b988a7@app.fastmail.com>
References: <40a2c286-0557-4eca-b5e4-7723d89c5250@app.fastmail.com>
 <b38b8b70-f299-4c27-a037-b03a9505eafb@spatialys.com>
 <57ba58aa-b0c4-4d85-bdc7-28fb39d1b38b@app.fastmail.com>
 <e8f79d7b-a4fd-4505-8b8d-d929c71c75ca@spatialys.com>
 <c3457988-0de7-4c66-86d8-407771b80936@app.fastmail.com>
 <d6a0d3a4-e6fc-4dc4-a944-9c7fc1959a79@spatialys.com>
 <1370f2a3-3753-4ef1-8f75-770c79b988a7@app.fastmail.com>
Message-ID: <bf5b57e6-6bb6-4ec1-94f0-cf8636e6b1a4@spatialys.com>

Hi Tom,

please file an issue at https://github.com/OSGeo/gdal/issues with your 
reproducer snippet

Even

Le 17/07/2025 ? 02:28, Tom Moore a ?crit?:
> Hi Evan
>
> I seem to still be having problems closing datasets in Java resulting 
> in a JVM crash, using gdal-3-13-3_x64 downloaded from the GISInternals 
> site.? Below is the stack trace information.
>
> ---------------? T H R E A D? ---------------
>
> Current thread (0x000001ffd39932c0):? JavaThread "Finalizer" daemon 
> [_thread_in_native, id=25140, 
> stack(0x000000ba6eb00000,0x000000ba6ec00000) (1024K)]
>
> Stack: [0x000000ba6eb00000,0x000000ba6ec00000], 
> sp=0x000000ba6ebfed60,? free space=1019k
> Native frames: (J=compiled Java code, j=interpreted, Vv=VM code, 
> C=native code)
> C? [gdal.dll+0xc86927]
>
> Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
> j? org.gdal.gdal.gdalJNI.delete_Dataset(J)V+0
> j? org.gdal.gdal.Dataset.delete()V+25
> j? org.gdal.gdal.Dataset.finalize()V+1
> j? java.lang.System$2.invokeFinalize(Ljava/lang/Object;)V+1 
> java.base at 21.0.6
> j 
> java.lang.ref.Finalizer.runFinalizer(Ljdk/internal/access/JavaLangAccess;)V+115 
> java.base at 21.0.6
> j? java.lang.ref.Finalizer$FinalizerThread.run()V+29 java.base at 21.0.6
> v? ~StubRoutines::call_stub 0x000001ffa369100d
>
> siginfo: EXCEPTION_ACCESS_VIOLATION (0xc0000005), reading address 
> 0xffffffffffffffff
>
> The crash is happening when the swig delete_Dataset method, called by 
> the finalizer, calls into the gdal.dll.
>
> I tried calling Open() and Close() several times in a row to see if 
> this would trigger the problem, like this:
> gdal./AllRegister/();
> ?Dataset ds = gdal.Open(filename);
> ?ds.Close();
> ?ds.Close();
>
> but that seemed to work ok.
>
> I also tried open and close sequences, like this:
> ?Dataset ds = gdal.Open(filename);
> ?ds.Close();
> ?ds = gdal.Open(filename);
> ?ds.Close();
> ?ds = gdal.Open(filename);
> ?System.gc();
> ?System.runFinalization();
>
> This didn't trigger a problem either.? I did a few more tests, 
> repeating steps of opening a dataset, reading a band, closing the 
> dataset, and this didn't do it either.
>
> If I enable CPL_DEBUG then my pattern of access that causes the crash is:
> GDAL: 
> GDALDriver::Create(GTiff,c:/tmp/test1.tif,10,10,1,Int32,000001BCB9893680)
> GDAL: GDALClose(c:/tmp/test1.tif, this=000001BCB9872A90)
> GDAL: GDALOpen(c:/tmp/test1.tif, this=000001BCB98784D0) succeeds as GTiff.
> GDAL: GDALClose(c:/tmp/test1.tif, this=000001BCB98784D0)
> GDAL: GDALOpen(c:/tmp/test1.tif, this=000001BCBE486550) succeeds as GTiff.
> GDAL: GDALOpen(c:/tmp/test1.tif.vat.dbf, this=000001BCBE10D070) 
> succeeds as ESRI Shapefile.
> GDAL: GDALClose(c:/tmp/test1.tif.vat.dbf, this=000001BCBE10D070)
> GDAL: GDALClose(c:/tmp/test1.tif, this=000001BCBE486550)
>
> Around this point the finalizer kicks in and the JVM crashes.
>
> This is a hard one for me to track down, because I don't know the 
> tooling to debug native cpp code from within Java.? What I could do is 
> insert some debugging statements in to the code to try to see what is 
> going on.? If you have any suggestions about this I would be happy to 
> try it.
>
> Tom
>
>
> On Fri, May 30, 2025, at 5:53 PM, Even Rouault wrote:
>>
>> Le 30/05/2025 ? 23:39, Tom Moore a ?crit?:
>> > Hi Even
>> >
>> > I just wanted to update you and provide a record for posterity with
>> > the results of me playing around with gdal/java and resource 
>> management.
>> >
>> > It appears to me that Dataset objects should not be closed from Java
>> > client code.? If you do then often there will be an access violation
>> > (native null pointer) that will crash the JVM. From the dump file the
>> > following stack trace shows the Java code being executed when the
>> > exception occurs:
>>
>> I believe this issue should be fixed in 3.11.0 per
>> https://github.com/OSGeo/gdal/commit/ec4ca7930b48653bb0fac27b59c6c1bf883c45f2
>>
>> Actually historically this was the .delete() method that should be
>> called. The exposition of .Close() is quite recent and was broken (until
>> the above mentioned fix)
>>
>> >
>> > Java frames: (J=compiled Java code, j=interpreted, Vv=VM code)
>> > j? org.gdal.gdal.gdalJNI.delete_Dataset(J)V+0
>> > j? org.gdal.gdal.Dataset.delete()V+25
>> > j? org.gdal.gdal.Dataset.finalize()V+1
>> > j java.lang.System$2.invokeFinalize(Ljava/lang/Object;)V+1
>> > java.base at 21.0.6
>> > j
>> > 
>> java.lang.ref.Finalizer.runFinalizer(Ljdk/internal/access/JavaLangAccess;)V+115 
>>
>> > java.base at 21.0.6
>> > j? java.lang.ref.Finalizer$FinalizerThread.run()V+29 java.base at 21.0.6
>> >
>> > So it looks like the swig bindings implement a finalizer to dispose of
>> > the native object when the reference is no longer reachable (nice!).
>> > However it looks like there might not be any protection to prevent bad
>> > things from happening when the Delete method is called more than
>> > once.? It appears that in this case that when the finalizer calls
>> > Delete on the Dataset the jvm crashes because the Dataset has already
>> > been closed manually and the resources have already been released.
>> >
>> > If I am correct in this conclusions then this is not a problem.? If
>> > correct I suggest that either the docs be updated to indicate do not
>> > manually call Delete on the Dataset object, or change the Delete
>> > method code to gracefully handle multiple calls (better choice).
>> >
>> > By the way, something to note for the future is that finalizers have
>> > been deprecated since Java 9 (2017).? This is described in
>> > https://openjdk.org/jeps/421. Although deprecated, finalizers are
>> > still allowed in modern jdk's and probably will be for a while yet. At
>> > some future time they will be removed.? The suggested replacement for
>> > finalizers are cleaners, but they are only available in Java 9+.? When
>> > finalizers are removed there will need to be a new set of bindings
>> > that use cleaners.? You can probably ignore this problem for a few
>> > more years, but at some point you will need to provide two sets of
>> > Java bindings (one required for Java 8 and earlier, and one required
>> > for some future Java and later).
>>
>> Thanks for the heads up. Seizing the opportunity to remind interesting
>> parties in the GDAL Java bindings that they should not be shy and are
>> welcome to be proactive. On my side, they are very very minimilastically
>> maintained.
>>
>> Even
>>
>> -- 
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>>
>>
>
> --
> Tom Moore
> Spatial Planning Systems
> 960 Burkes Bluff Lane
> Deep River ON? K0J 1P0
> Canada
>
> Phone: +1 613 584 9354
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250718/1df8b253/attachment.htm>

From michael.smith.erdc at gmail.com  Fri Jul 18 05:05:01 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Fri, 18 Jul 2025 08:05:01 -0400
Subject: [gdal-dev] Gdal raster reproject equivalent to gdalwarp -rpc
Message-ID: <B6121C19-D08F-4E62-8820-99CAED56A716@gmail.com>

All,

 

Is there an gdal raster reproject equivalent command to gdalwarp -rpc (which we use for NITF files with RPC georeferencing information? Additionally, is there a gdal pipeline way to use info as the last step rather than writing a file? I would be very useful to be able to do 

gdal raster pipeline ! read? example_01_P004.NTF ! reproject --rpc ! info -f text 

 

or if there is a stdout/stdin method then gdal raster pipeline ! read? example_01_P004.NTF ! reproject --rpc ! write <stdout> | gdal raster info -f text <stdin>?

 

Mike

 

 

-- 

Michael Smith

RSGIS Center ? ERDC CRREL NH

US Army Corps

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250718/a36eef7c/attachment.htm>

From public at postholer.com  Fri Jul 18 08:38:49 2025
From: public at postholer.com (Scott)
Date: Fri, 18 Jul 2025 08:38:49 -0700
Subject: [gdal-dev] Gdal raster reproject equivalent to gdalwarp -rpc
In-Reply-To: <B6121C19-D08F-4E62-8820-99CAED56A716@gmail.com>
References: <B6121C19-D08F-4E62-8820-99CAED56A716@gmail.com>
Message-ID: <edb65096-7d5d-462e-90bb-f1372a1d158d@postholer.com>

Hey Mike,

For the -rpc option I *think* you can use the -to option in reproject. 
Look at the documentation at the link under -to and read that. I *think* 
what you're looking for is -to RPC_DEM=pathToDem .

For the pipeline command you can use a gdalg virtual file and "poor 
mans" pipeline in bash like:

gdal raster pipeline \
! read some.tif \
! write tmp.gdalg.json --overwrite \
&& gdal raster info tmp.gdalg.json -f text

Hope that helps,
Scott



On 7/18/25 05:05, Michael Smith via gdal-dev wrote:
> All,
> 
> Is there an gdal raster reproject equivalent command to gdalwarp -rpc 
> (which we use for NITF files with RPC georeferencing information? 
> Additionally, is there a gdal pipeline way to use info as the last step 
> rather than writing a file? I would be very useful to be able to do
> 
> gdal raster pipeline ! read? example_01_P004.NTF ! reproject --rpc ! 
> info -f text
> 
> or if there is a stdout/stdin method then gdal raster pipeline ! read  
> example_01_P004.NTF ! reproject --rpc ! write <stdout> | gdal raster 
> info -f text <stdin>?
> 
> Mike
> 
> -- 
> 
> Michael Smith
> 
> RSGIS Center ? ERDC CRREL NH
> 
> US Army Corps
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Fri Jul 18 08:49:35 2025
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri, 18 Jul 2025 11:49:35 -0400
Subject: [gdal-dev] Gdal raster reproject equivalent to gdalwarp -rpc
In-Reply-To: <edb65096-7d5d-462e-90bb-f1372a1d158d@postholer.com>
References: <B6121C19-D08F-4E62-8820-99CAED56A716@gmail.com>
 <edb65096-7d5d-462e-90bb-f1372a1d158d@postholer.com>
Message-ID: <CA+YzLBcEkbbG-Vy1+ndRVhi-U+BYmHqXB=ue1=3nEgnumFPzMg@mail.gmail.com>

Michael,

If you were depending on -rpc to force use of the RPC method instead of
geotransforms for instance, it might be sufficient to pass -to METHOD=RPC
to things that take transformer options.

Best regards,
Frank


On Fri, Jul 18, 2025 at 11:39?AM Scott via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hey Mike,
>
> For the -rpc option I *think* you can use the -to option in reproject.
> Look at the documentation at the link under -to and read that. I *think*
> what you're looking for is -to RPC_DEM=pathToDem .
>
> For the pipeline command you can use a gdalg virtual file and "poor
> mans" pipeline in bash like:
>
> gdal raster pipeline \
> ! read some.tif \
> ! write tmp.gdalg.json --overwrite \
> && gdal raster info tmp.gdalg.json -f text
>
> Hope that helps,
> Scott
>
>
>
> On 7/18/25 05:05, Michael Smith via gdal-dev wrote:
> > All,
> >
> > Is there an gdal raster reproject equivalent command to gdalwarp -rpc
> > (which we use for NITF files with RPC georeferencing information?
> > Additionally, is there a gdal pipeline way to use info as the last step
> > rather than writing a file? I would be very useful to be able to do
> >
> > gdal raster pipeline ! read  example_01_P004.NTF ! reproject --rpc !
> > info -f text
> >
> > or if there is a stdout/stdin method then gdal raster pipeline ! read
> > example_01_P004.NTF ! reproject --rpc ! write <stdout> | gdal raster
> > info -f text <stdin>?
> >
> > Mike
> >
> > --
> >
> > Michael Smith
> >
> > RSGIS Center ? ERDC CRREL NH
> >
> > US Army Corps
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev at lists.osgeo.org
> > https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250718/7f3736cf/attachment.htm>

From michael.smith.erdc at gmail.com  Fri Jul 18 09:41:20 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Fri, 18 Jul 2025 12:41:20 -0400
Subject: [gdal-dev] Gdal raster reproject equivalent to gdalwarp -rpc
In-Reply-To: <edb65096-7d5d-462e-90bb-f1372a1d158d@postholer.com>
References: <B6121C19-D08F-4E62-8820-99CAED56A716@gmail.com>
 <edb65096-7d5d-462e-90bb-f1372a1d158d@postholer.com>
Message-ID: <F139CB6F-06F3-4AB6-804A-9328CDE0EBF5@gmail.com>

>From Frank Wamerdam, the answer is to use --to METHOD=RPC.

And the pipeline would be:

gdal raster pipeline ! read /vsis3/file_P004.NTF ! reproject --to METHOD=RPC ! write /tmp/test2.gdalg.json --overwrite && gdal raster info -f text /tmp/test2.gdalg.json


Mike

-- 

Michael Smith 
RSGIS Center ? ERDC CRREL NH 
US Army Corps 




?On 7/18/25, 11:39 AM, "gdal-dev on behalf of Scott via gdal-dev" <gdal-dev-bounces at lists.osgeo.org <mailto:gdal-dev-bounces at lists.osgeo.org> on behalf of gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>> wrote:


Hey Mike,


For the -rpc option I *think* you can use the -to option in reproject. 
Look at the documentation at the link under -to and read that. I *think* 
what you're looking for is -to RPC_DEM=pathToDem .


For the pipeline command you can use a gdalg virtual file and "poor 
mans" pipeline in bash like:


gdal raster pipeline \
! read some.tif \
! write tmp.gdalg.json --overwrite \
&& gdal raster info tmp.gdalg.json -f text


Hope that helps,
Scott






On 7/18/25 05:05, Michael Smith via gdal-dev wrote:
> All,
> 
> Is there an gdal raster reproject equivalent command to gdalwarp -rpc 
> (which we use for NITF files with RPC georeferencing information? 
> Additionally, is there a gdal pipeline way to use info as the last step 
> rather than writing a file? I would be very useful to be able to do
> 
> gdal raster pipeline ! read example_01_P004.NTF ! reproject --rpc ! 
> info -f text
> 
> or if there is a stdout/stdin method then gdal raster pipeline ! read 
> example_01_P004.NTF ! reproject --rpc ! write <stdout> | gdal raster 
> info -f text <stdin>?
> 
> Mike
> 
> -- 
> 
> Michael Smith
> 
> RSGIS Center ? ERDC CRREL NH
> 
> US Army Corps
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>


_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://lists.osgeo.org/mailman/listinfo/gdal-dev>





From michael.smith.erdc at gmail.com  Fri Jul 18 09:41:54 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Fri, 18 Jul 2025 12:41:54 -0400
Subject: [gdal-dev] Gdal raster reproject equivalent to gdalwarp -rpc
In-Reply-To: <CA+YzLBcEkbbG-Vy1+ndRVhi-U+BYmHqXB=ue1=3nEgnumFPzMg@mail.gmail.com>
References: <B6121C19-D08F-4E62-8820-99CAED56A716@gmail.com>
 <edb65096-7d5d-462e-90bb-f1372a1d158d@postholer.com>
 <CA+YzLBcEkbbG-Vy1+ndRVhi-U+BYmHqXB=ue1=3nEgnumFPzMg@mail.gmail.com>
Message-ID: <B5F4B9DC-044E-48E4-AC40-67BD2148CF01@gmail.com>

Frank,

Thanks for that, I can confirm I get the same results with gdalwarp -rpc and gdal raster reproject --to METHOD=RPC. I?ll create a doc ticket to preserve this.


-- 

Michael Smith 
RSGIS Center ? ERDC CRREL NH 
US Army Corps 






From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Frank Warmerdam via gdal-dev <gdal-dev at lists.osgeo.org>
Reply-To: Frank Warmerdam <warmerdam at pobox.com>
Date: Friday, July 18, 2025 at 11:49?AM
To: Scott <public at postholer.com>
Cc: <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Gdal raster reproject equivalent to gdalwarp -rpc

Michael,

If you were depending on -rpc to force use of the RPC method instead of geotransforms for instance, it might be sufficient to pass -to METHOD=RPC to things that take transformer options.?

Best regards,
Frank


On Fri, Jul 18, 2025 at 11:39?AM Scott via gdal-dev <mailto:gdal-dev at lists.osgeo.org> wrote:
Hey Mike,

For the -rpc option I *think* you can use the -to option in reproject. 
Look at the documentation at the link under -to and read that. I *think* 
what you're looking for is -to RPC_DEM=pathToDem .

For the pipeline command you can use a gdalg virtual file and "poor 
mans" pipeline in bash like:

gdal raster pipeline \
! read some.tif \
! write tmp.gdalg.json --overwrite \
&& gdal raster info tmp.gdalg.json -f text

Hope that helps,
Scott



On 7/18/25 05:05, Michael Smith via gdal-dev wrote:
> All,
> 
> Is there an gdal raster reproject equivalent command to gdalwarp -rpc 
> (which we use for NITF files with RPC georeferencing information? 
> Additionally, is there a gdal pipeline way to use info as the last step 
> rather than writing a file? I would be very useful to be able to do
> 
> gdal raster pipeline ! read? example_01_P004.NTF ! reproject --rpc ! 
> info -f text
> 
> or if there is a stdout/stdin method then gdal raster pipeline ! read? 
> example_01_P004.NTF ! reproject --rpc ! write <stdout> | gdal raster 
> info -f text <stdin>?
> 
> Mike
> 
> -- 
> 
> Michael Smith
> 
> RSGIS Center ? ERDC CRREL NH
> 
> US Army Corps
> 
> 
> _______________________________________________
> gdal-dev mailing list
> mailto:gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

_______________________________________________
gdal-dev mailing list
mailto:gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up ? | Frank Warmerdam, mailto:warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
and watch the world go round - Rush ? ?| CAN: +1 343-550-9984
_______________________________________________ gdal-dev mailing list gdal-dev at lists.osgeo.org https://lists.osgeo.org/mailman/listinfo/gdal-dev 



From schnetter at gmail.com  Sat Jul 19 08:44:21 2025
From: schnetter at gmail.com (Erik Schnetter)
Date: Sat, 19 Jul 2025 11:44:21 -0400
Subject: [gdal-dev] Errors while creating sozip zarr file
Message-ID: <64BEA276-1F9D-4D25-9AF4-0B6B21FAAAC1@gmail.com>

I am using GDAL to create a multidimensional zarr file that is sozip compressed. I see this error when creating the file:

ERROR 1: dish_positions.00000000.zarr/zarr.json already exists in ZIP file
ERROR 8: Open file /vsizip/data/fengine_init_pathfinder/cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr/zarr.json to write failed

Everything is working fine when I do not use sozip compression. I enable sozip compression by adding a "/vsizip" prefix to the file name. Although there is an error reported on screen, I do not see an error code reported by the function creating or closing the multidimensional dataset. The resulting file ("*.zarr.zip") is created fine and looks almost correct, but all attributes seem to be missing.

I wonder ? is it actually possible to create a zarr file that is sozip compressed, given that zarr probably writes to each of its file multiple times? If not, what is the preferred way to create a sozip-compressed zarr file efficiently?

Some details:

I create the dataset (i.e. the file) via

                const auto driver_manager = GetGDALDriverManager();
                const auto driver = driver_manager->GetDriverByName("Zarr");
                const auto dataset = std::unique_ptr<GDALDataset>(driver->CreateMultiDimensional(
                    full_path.c_str(), root_group_options_c.data(), options_c.data()));

where "full_path" is "/vsizip/data/fengine_init_pathfinder/cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr".

I then create multiple attributes ("CreateAttribute") and then

                const auto mdarray = group->CreateMDArray(meta->get_name(), dimensions, datatype,
                                                          array_options_c.data());
                    const bool success = mdarray->Write(
                        arrayStart.data(), count.data(), nullptr, bufferStride.data(), datatype,
                        frame + datatypesize * meta->offset, frame, buffer->frame_size);

and finish with

                const CPLErr err = dataset->Close();
                assert(!err);

The full code is available at <https://github.com/kotekan/kotekan/blob/eschnett/updates-2/lib/stages/gdalFileWrite.cpp>.

-erik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250719/ef60f4de/attachment.htm>

From schnetter at gmail.com  Sat Jul 19 08:44:21 2025
From: schnetter at gmail.com (Erik Schnetter)
Date: Sat, 19 Jul 2025 11:44:21 -0400
Subject: [gdal-dev] Errors while creating sozip zarr file
Message-ID: <64BEA276-1F9D-4D25-9AF4-0B6B21FAAAC1@gmail.com>

I am using GDAL to create a multidimensional zarr file that is sozip compressed. I see this error when creating the file:

ERROR 1: dish_positions.00000000.zarr/zarr.json already exists in ZIP file
ERROR 8: Open file /vsizip/data/fengine_init_pathfinder/cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr/zarr.json to write failed

Everything is working fine when I do not use sozip compression. I enable sozip compression by adding a "/vsizip" prefix to the file name. Although there is an error reported on screen, I do not see an error code reported by the function creating or closing the multidimensional dataset. The resulting file ("*.zarr.zip") is created fine and looks almost correct, but all attributes seem to be missing.

I wonder ? is it actually possible to create a zarr file that is sozip compressed, given that zarr probably writes to each of its file multiple times? If not, what is the preferred way to create a sozip-compressed zarr file efficiently?

Some details:

I create the dataset (i.e. the file) via

                const auto driver_manager = GetGDALDriverManager();
                const auto driver = driver_manager->GetDriverByName("Zarr");
                const auto dataset = std::unique_ptr<GDALDataset>(driver->CreateMultiDimensional(
                    full_path.c_str(), root_group_options_c.data(), options_c.data()));

where "full_path" is "/vsizip/data/fengine_init_pathfinder/cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr".

I then create multiple attributes ("CreateAttribute") and then

                const auto mdarray = group->CreateMDArray(meta->get_name(), dimensions, datatype,
                                                          array_options_c.data());
                    const bool success = mdarray->Write(
                        arrayStart.data(), count.data(), nullptr, bufferStride.data(), datatype,
                        frame + datatypesize * meta->offset, frame, buffer->frame_size);

and finish with

                const CPLErr err = dataset->Close();
                assert(!err);

The full code is available at <https://github.com/kotekan/kotekan/blob/eschnett/updates-2/lib/stages/gdalFileWrite.cpp>.

-erik
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250719/ef60f4de/attachment-0001.htm>

From public at postholer.com  Sat Jul 19 09:11:14 2025
From: public at postholer.com (Scott)
Date: Sat, 19 Jul 2025 09:11:14 -0700
Subject: [gdal-dev] Errors while creating sozip zarr file
In-Reply-To: <64BEA276-1F9D-4D25-9AF4-0B6B21FAAAC1@gmail.com>
References: <64BEA276-1F9D-4D25-9AF4-0B6B21FAAAC1@gmail.com>
Message-ID: <98051f0f-ec06-499f-a87e-d201f0b0a88a@postholer.com>

Hey Orik,

If I remember correctly, it's only for gpkg, fgb or shp formats. Other 
than that the docs show a 'validate' switch which is more robust than 
the 'light' validation that is done.

Scott

On 7/19/25 08:44, Erik Schnetter via gdal-dev wrote:
> I am using GDAL to create a multidimensional zarr file that is sozip 
> compressed. I see this error when creating the file:
> 
> ERROR 1: dish_positions.00000000.zarr/zarr.json already exists in ZIP file
> ERROR 8: Open file /vsizip/data/fengine_init_pathfinder/ 
> cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr/ 
> zarr.json to write failed
> 
> Everything is working fine when I do not use sozip compression. I enable 
> sozip compression by adding a "/vsizip" prefix to the file name. 
> Although there is an error reported on screen, I do not see an error 
> code reported by the function creating or closing the multidimensional 
> dataset. The resulting file ("*.zarr.zip") is created fine and looks 
> almost correct, but all attributes seem to be missing.
> 
> I wonder ? is it actually possible to create a zarr file that is sozip 
> compressed, given that zarr probably writes to each of its file multiple 
> times? If not, what is the preferred way to create a sozip-compressed 
> zarr file efficiently?
> 
> Some details:
> 
> I create the dataset (i.e. the file) via
> 
>  ? ? ? ? ? ? ? ? const auto driver_manager = GetGDALDriverManager();
>  ? ? ? ? ? ? ? ? const auto driver = driver_manager- 
>  >GetDriverByName("Zarr");
>  ? ? ? ? ? ? ? ? const auto dataset = 
> std::unique_ptr<GDALDataset>(driver->CreateMultiDimensional(
>  ? ? ? ? ? ? ? ? ? ? full_path.c_str(), root_group_options_c.data(), 
> options_c.data()));
> 
> where "full_path" is "/vsizip/data/fengine_init_pathfinder/ 
> cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr".
> 
> I then create multiple attributes ("CreateAttribute") and then
> 
>  ? ? ? ? ? ? ? ? const auto mdarray = group->CreateMDArray(meta- 
>  >get_name(), dimensions, datatype,
>                                                            
> array_options_c.data());
>  ? ? ? ? ? ? ? ? ? ? const bool success = mdarray->Write(
>  ? ? ? ? ? ? ? ? ? ? ? ? arrayStart.data(), count.data(), nullptr, 
> bufferStride.data(), datatype,
>  ? ? ? ? ? ? ? ? ? ? ? ? frame + datatypesize * meta->offset, frame, 
> buffer->frame_size);
> 
> and finish with
> 
>  ? ? ? ? ? ? ? ? const CPLErr err = dataset->Close();
>  ? ? ? ? ? ? ? ? assert(!err);
> 
> The full code is available at <https://github.com/kotekan/kotekan/blob/ 
> eschnett/updates-2/lib/stages/gdalFileWrite.cpp <https://github.com/ 
> kotekan/kotekan/blob/eschnett/updates-2/lib/stages/gdalFileWrite.cpp>>.
> 
> -erik
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From jukka.rahkonen at maanmittauslaitos.fi  Sat Jul 19 11:13:17 2025
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Sat, 19 Jul 2025 18:13:17 +0000
Subject: [gdal-dev] Errors while creating sozip zarr file
In-Reply-To: <64BEA276-1F9D-4D25-9AF4-0B6B21FAAAC1@gmail.com>
References: <64BEA276-1F9D-4D25-9AF4-0B6B21FAAAC1@gmail.com>
Message-ID: <DB9PR09MB68877B5B7E91699D3FA49510FD53A@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Do you get the same error if you create the zarr first ready and sozip it later with https://gdal.org/en/stable/programs/gdal_vsi_sozip.html#gdal-vsi-sozip (or https://gdal.org/en/stable/programs/sozip.html#sozip)?

-Jukka Rahkonen-

________________________________________
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> k?ytt?j?n Erik Schnetter via gdal-dev <gdal-dev at lists.osgeo.org> puolesta
L?hetetty: Lauantai 19. hein?kuuta 2025 18.44
Vastaanottaja: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Errors while creating sozip zarr file

I am using GDAL to create a multidimensional zarr file that is sozip compressed. I see this error when creating the file:ERROR 1: dish_positions.00000000.zarr/zarr.json already exists in ZIP fileERROR 8: Open file /vsizip/data/fengine_init_pathfinder/cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr/zarr.json to write failedEverything is working fine when I do not use sozip compression. I enable sozip compression by adding a "/vsizip" prefix to the file name. Although there is an error reported on screen, I do not see an error code reported by the function creating or closing the multidimensional dataset. The resulting file ("*.zarr.zip") is created fine and looks almost correct, but all attributes seem to be missing.I wonder ? is it actually possible to create a zarr file that is sozip compressed, given that zarr probably writes to each of its file multiple times? If not, what is the preferred way to create a sozip-compressed zarr file efficiently?Some details:I create the dataset (i.e. the file) via? ? ? ? ? ? ? ? const auto driver_manager = GetGDALDriverManager();? ? ? ? ? ? ? ? const auto driver = driver_manager->GetDriverByName("Zarr");? ? ? ? ? ? ? ? const auto dataset = std::unique_ptr<GDALDataset>(driver->CreateMultiDimensional(? ? ? ? ? ? ? ? ? ? full_path.c_str(), root_group_options_c.data(), options_c.data()));where "full_path" is "/vsizip/data/fengine_init_pathfinder/cx66_dish_positions.00000000.zarr.zip/dish_positions.00000000.zarr".I then create multiple attributes ("CreateAttribute") and then? ? ? ? ? ? ? ? const auto mdarray = group->CreateMDArray(meta->get_name(), dimensions, datatype,? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? ? array_options_c.data());? ? ? ? ? ? ? ? ? ? const bool success = mdarray->Write(? ? ? ? ? ? ? ? ? ? ? ? arrayStart.data(), count.data(), nullptr, bufferStride.data(), datatype,? ? ? ? ? ? ? ? ? ? ? ? frame + datatypesize * meta->offset, frame, buffer->frame_size);and finish with? ? ? ? ? ? ? ? const CPLErr err = dataset->Close();? ? ? ? ? ? ? ? assert(!err);The full code is available at <https://github.com/kotekan/kotekan/blob/eschnett/updates-2/lib/stages/gdalFileWrite.cpp>.-erik

From michael.smith.erdc at gmail.com  Sun Jul 20 04:27:28 2025
From: michael.smith.erdc at gmail.com (Michael Smith)
Date: Sun, 20 Jul 2025 07:27:28 -0400
Subject: [gdal-dev] Understanding parquet vs adbc performance and
 SORT_BY_BBOX=YES
Message-ID: <6B81054F-06B2-4FB7-B557-3410AEA6C1BC@gmail.com>

Using GDAL 3.11.3:

 

I have a dataset Geometry: Point Feature Count: 15546949 in parquet format (written using gdal from oracle source). When doing a spatial query using the geoparquet driver, I see it accessing almost all the row groups of the dataset (PARQUET: 155/156 row groups selected) with a spatial filter fetching 12000 of the 15M points and it takes 0m18.794s. When accessing via ADBC and libduckdb, it takes 0m7.102s (but it also uses 7x CPU and about 10x memory (from looking at top). 

 

I then rewrote the dataset using -lco SORT_BY_BBOX=YES. Then parquet driver accesses PARQUET: 9/238 row groups selected, and the time drops to 0m1.412s. Using ADBC and libduckdb, the performance doesn?t change. 

 

For proper performance with gdal, is SORT_BY_BBOX=YES always needed?

 

 

-- 

Michael Smith

RSGIS Center ? ERDC CRREL NH

US Army Corps

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250720/1df38e52/attachment.htm>

