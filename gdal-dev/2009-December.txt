From chaitanya.ch at gmail.com  Tue Dec  1 06:35:21 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Dec  1 06:35:30 2009
Subject: [gdal-dev] mdb to shape conversion: no geometry exported
In-Reply-To: <CEF2A10A74B6DF4E940F3704ECC8B990144AC2C9@img-str-e002214.forces.mil.ca>
References: <CEF2A10A74B6DF4E940F3704ECC8B990144AC2C9@img-str-e002214.forces.mil.ca>
Message-ID: <eb502d880912010335x34bf314fvbf6141a055f71043@mail.gmail.com>

Boris,

I fixed the pgeo driver in the ticket #3100
http://trac.osgeo.org/gdal/ticket/3100
This allows the following esri shapetypes to be handled as the usual
case. Additional attributes including non-linear segments and vertex
identifier attributes are ignored.

esriShapeGeneralPolyline as esriShapePolyline
esriShapeGeneralPolygon as esriShapePolygon
esriShapeGeneralPoint as esriShapePoint
esriShapeGeneralMultipoint as esriShapeMultipoint
esriShapeGeneralMultiPatch as esriShapeMultiPatch

Only esriShapeGeneralPolyline and esriShapeGeneralPolygon are tested
with limited sample data. There may be issues here.

On Thu, Nov 26, 2009 at 9:41 PM, <Boris.Vasiliev@forces.gc.ca> wrote:
>
> > Boris,
> > I had not understood you were working on linux. I have been very
> frustrated with the
> > fragility of the mdbtools based odbc driver and I'm no longer
> interested in investing
> > effort in supporting it. If you really really want it, then review:
> > http://trac.osgeo.org/gdal/wiki/mdbtools
> > There may also be open tickets on the issues.
> > Best regards,
> My apologies for the misunderstanding; I should have specified my
> operating system at the beginning. ?I will try to install FWtools on
> Windows XP and check whether I can export the shape file from my .mbd
> database.
> Regards,
> Boris,
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


--
Best regards,
Chaitanya kumar CH.

+91-9848167848
17.241582N 80.142635E
From hobu.inc at gmail.com  Tue Dec  1 13:05:22 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec  1 13:08:57 2009
Subject: [gdal-dev] GDAL 1.7 release candidate expected on December 15th
Message-ID: <10CD06F3-E85B-42E7-96CE-69B4BEC8D9AD@gmail.com>

All (developers and testers),

Consider this your notice of our desire to complete our annual Frank's-birthday-is-GDAL-major-release-day task on December 20th (21st).  All developers should expect that RC1 will happen on December 15th to give us enough time to fix up any show stoppers before Frank's birthday.  Extra testing during this time will also be greatly appreciated, especially of new drivers and utilities.  

Get your fixes, features, and documentation in soon to help make this a great release.  

Howard
From warmerdam at pobox.com  Tue Dec  1 13:29:08 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec  1 13:29:18 2009
Subject: [gdal-dev] GDAL 1.7 release candidate expected on December 15th
In-Reply-To: <10CD06F3-E85B-42E7-96CE-69B4BEC8D9AD@gmail.com>
References: <10CD06F3-E85B-42E7-96CE-69B4BEC8D9AD@gmail.com>
Message-ID: <4B156074.10505@pobox.com>

oward Butler wrote:
> All (developers and testers),
> 
> Consider this your notice of our desire to complete our annual
> Frank's-birthday-is-GDAL-major-release-day task on December 20th (21st).
> All developers should expect that RC1 will happen on December 15th to give
> us enough time to fix up any show stoppers before Frank's birthday.  Extra
> testing during this time will also be greatly appreciated, especially of new
> drivers and utilities.
> 
> Get your fixes, features, and documentation in soon to help make this a
> great release.

Folks,

I have prepared a preliminary page to help keep track of 1.7 planning at:

   http://trac.osgeo.org/gdal/wiki/ReleasePlan17

If you have a substantial work item you want to complete for deployment in
1.7 please note it in the release plan with your name.  This is also an
excellent time to fix some bugs, so feel free to review the open bug list.

http://trac.osgeo.org/gdal/query?status=%21closed&type=defect&order=id&desc=1

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Dec  1 17:41:10 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  1 17:41:10 2009
Subject: [gdal-dev] OGR random read optimization?
In-Reply-To: <4B14881F.2000203@daylongraphics.com>
References: <004401ca70ca$1f936ae0$5eba40a0$@net>	<f3b73b7d0911301208r17c6074chf85f4d3415c92ef8@mail.gmail.com>
	<4B14881F.2000203@daylongraphics.com>
Message-ID: <4B159B86.8000308@mines-paris.org>

Ray,

The idea is interesting but unfortunately, I don't see how this can be 
implemented in a generic way in current OGRLayer. The root of the 
problem is that OGRLayer doesn't track the current index because 
GetNextFeature() is a virtual method overriden by each driver. The 
nicest way your idea could be implemented would be to have instead a 
virtual IGetNextFeature() method which would be the one overriden by 
drivers (and do the job of current GetNextFeature()) but called by non 
virtual OGRLayer::GetNextFeature(). The latter method could keep track 
of the current index and store it as a member of OGRLayer. This would be 
a bit similar to RasterIO() / IRasterIO() that exists on the GDAL side. 
The approach would also have the advantage to avoid that each driver's 
GetNextFeature() has to deal with testing spatial and attribute filters. 
Unfortunately, this would require changes in all OGR drivers, which 
makes it probably not appropriate for any release in the GDAL/OGR 1.X 
series. Maybe something for a GDAL/OGR 2.0 ;-) ?

In fact, this could be in theory introduced in a backward compatible way 
if we :
1) Add a OGRLayer::IGetNextFeature() virtual method : Default 
implementation in OGRLayer class : issue a CPLError and return NULL
2) Add a OGRLayer::IResetReading() virtual method : Default 
implementation in OGRLayer class : issue a CPLError
3) Add a OGRLayer::ImplementsIGetNextFeatureAndIResetReading() virtual 
method. Default implementation in OGRLayer class : return FALSE.
4) Change OGRLayer declaration so that GetNextFeature() and 
ResetReading() are no longer pure virtual, but just virtual. Their 
default implementation would call IGetNextFeature() and IResetReading()
5) Change OGRLayer::SetNextByIndex() default implementation so that it 
does the optimization you suggest when 
ImplementsIGetNextFeatureAndIResetReading() returns TRUE. Otherwise it 
defaults to current code.

That approach would not require any code change in existing drivers. And 
drivers interested in the new capability would just need to rename their 
GetNextFeature() -> IGetNextFeature(), ResetReading() -> IResetReading() 
and override ImplementsIGetNextFeatureAndIResetReading() to make it 
return TRUE.

I'm wondering if it's worth the change. For true random access patterns, 
even with your optimization, SetNextByIndex() will always be slow for 
drivers that don't have a specialized fast implementation of it (average 
complexity of O(n) by call). It can only bring performance gains if you 
request increasing indices.

I'd note that currently efficient implementations of SetNextByIndex() 
exist in Shapefile, MEM and GRASS drivers. GDAL/OGR 1.7.0dev has also 
added implementation of it for PostgreSQL and VRT (for the latter, only 
if the underlying layer has OLCFastSetNextByIndex capability).

Best regards,

Even

Ray Gardener a ?crit :
> The OGRLayer::SetNextByIndex() function can be sped up by keeping 
> track of the previously used index, and calling ResetReading() only if 
> the new index is lesser than it. Otherwise, read forward and skip 
> features by the difference of the new and old indices.
>
> For thread safety, the old index should be kept in a caller-level data 
> structure which is passed in as an argument to SetNextByIndex.
>
> Ray
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


From rayg at daylongraphics.com  Tue Dec  1 18:13:57 2009
From: rayg at daylongraphics.com (Ray Gardener)
Date: Tue Dec  1 18:14:21 2009
Subject: [gdal-dev] OGR random read optimization?
In-Reply-To: <4B159B86.8000308@mines-paris.org>
References: <004401ca70ca$1f936ae0$5eba40a0$@net>	<f3b73b7d0911301208r17c6074chf85f4d3415c92ef8@mail.gmail.com>
	<4B14881F.2000203@daylongraphics.com>
	<4B159B86.8000308@mines-paris.org>
Message-ID: <4B15A335.2040000@daylongraphics.com>

Hmmm... okay. Fwiw, I did the optimization in a wrapper layer class to 
help simplify the interface, i.e., folding sequential and random access 
into a single get_feature(int index) call. The optimization allows 
efficient access if the indices are sequential and best-effort if 
random, and the concept of SetNextByIndex goes away.

An STL-like approach could also be used, treat a layer as a collection 
with explicit iterator types, e.g., sequential_feature_iterator, 
random_feature_iterator, etc. This is also useful for thread safety 
since the iterator can hold the iteration state.

Another optimization is to cache the necessary filemark (and any other 
info) every so often along with the index number, into an array sorted 
by index. Then if an index which is less than the current index is 
given, a bsearch can be done into the cache for the nearest filemark 
behind the desired index, and we seek to there, then seek forward, 
avoiding having to reset and seek from the start.

Ray


Even Rouault wrote:
> Ray,
> 
> The idea is interesting but unfortunately, I don't see how this can be 
> implemented in a generic way in current OGRLayer. The root of the 
> problem is that OGRLayer doesn't track the current index because 
> GetNextFeature() is a virtual method overriden by each driver. The 
> nicest way your idea could be implemented would be to have instead a 
> virtual IGetNextFeature() method which would be the one overriden by 
> drivers (and do the job of current GetNextFeature()) but called by non 
> virtual OGRLayer::GetNextFeature(). The latter method could keep track 
> of the current index and store it as a member of OGRLayer. This would be 
> a bit similar to RasterIO() / IRasterIO() that exists on the GDAL side. 
> The approach would also have the advantage to avoid that each driver's 
> GetNextFeature() has to deal with testing spatial and attribute filters. 
> Unfortunately, this would require changes in all OGR drivers, which 
> makes it probably not appropriate for any release in the GDAL/OGR 1.X 
> series. Maybe something for a GDAL/OGR 2.0 ;-) ?
> 
> In fact, this could be in theory introduced in a backward compatible way 
> if we :
> 1) Add a OGRLayer::IGetNextFeature() virtual method : Default 
> implementation in OGRLayer class : issue a CPLError and return NULL
> 2) Add a OGRLayer::IResetReading() virtual method : Default 
> implementation in OGRLayer class : issue a CPLError
> 3) Add a OGRLayer::ImplementsIGetNextFeatureAndIResetReading() virtual 
> method. Default implementation in OGRLayer class : return FALSE.
> 4) Change OGRLayer declaration so that GetNextFeature() and 
> ResetReading() are no longer pure virtual, but just virtual. Their 
> default implementation would call IGetNextFeature() and IResetReading()
> 5) Change OGRLayer::SetNextByIndex() default implementation so that it 
> does the optimization you suggest when 
> ImplementsIGetNextFeatureAndIResetReading() returns TRUE. Otherwise it 
> defaults to current code.
> 
> That approach would not require any code change in existing drivers. And 
> drivers interested in the new capability would just need to rename their 
> GetNextFeature() -> IGetNextFeature(), ResetReading() -> IResetReading() 
> and override ImplementsIGetNextFeatureAndIResetReading() to make it 
> return TRUE.
> 
> I'm wondering if it's worth the change. For true random access patterns, 
> even with your optimization, SetNextByIndex() will always be slow for 
> drivers that don't have a specialized fast implementation of it (average 
> complexity of O(n) by call). It can only bring performance gains if you 
> request increasing indices.
> 
> I'd note that currently efficient implementations of SetNextByIndex() 
> exist in Shapefile, MEM and GRASS drivers. GDAL/OGR 1.7.0dev has also 
> added implementation of it for PostgreSQL and VRT (for the latter, only 
> if the underlying layer has OLCFastSetNextByIndex capability).
> 
> Best regards,
> 
> Even
> 
> Ray Gardener a ?crit :
>> The OGRLayer::SetNextByIndex() function can be sped up by keeping 
>> track of the previously used index, and calling ResetReading() only if 
>> the new index is lesser than it. Otherwise, read forward and skip 
>> features by the difference of the new and old indices.
>>
>> For thread safety, the old index should be kept in a caller-level data 
>> structure which is passed in as an argument to SetNextByIndex.
>>
>> Ray
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
> 
> 
> 
> 

From gregcoats at mac.com  Tue Dec  1 20:34:20 2009
From: gregcoats at mac.com (Greg Coats)
Date: Tue Dec  1 20:34:30 2009
Subject: [gdal-dev] gdalbuildvrt save relative paths
In-Reply-To: <358B3EEA-369C-4A2C-B441-67E85938DCB5@mac.com>
References: <358B3EEA-369C-4A2C-B441-67E85938DCB5@mac.com>
Message-ID: <15094F24-AF8C-4E9F-9BE9-F9305A1EF34A@mac.com>

On Oct 14, 2009, at 12:40 PM, Greg Coats wrote:

> How does one specify that gdalbuildvrt save relative paths, rather  
> than absolute paths?

On Oct 14, 2009, at 12:59 PM, J?rgen E. Fischer wrote:

> Looks like that isn't supported directly yet.

Since Qgis supports saving relative paths, it would be helpful and  
convenient for gdalbuildvrt to also support saving relative paths.  
What is the mechanism for formally requesting that saving relative  
paths be incorporated as a feature into GDAL 1.7.0?
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091201/6b9513e2/attachment.html
From bicro at KMS.dk  Wed Dec  2 02:26:46 2009
From: bicro at KMS.dk (Rosenkranz, Brigitte Christine)
Date: Wed Dec  2 02:34:19 2009
Subject: [gdal-dev] Can't initialise my gdal16.dll because of a C runtime
	error - Can somebody help?
In-Reply-To: <9AE3068694E29A4F930488CCADBE8B7F0FF20695@resc-ex002.res.adroot.dk>
References: <9AE3068694E29A4F930488CCADBE8B7F0FF20695@resc-ex002.res.adroot.dk>
Message-ID: <53D7A0A1A7E1B94689D14547F9262CF605C9F8DA@resc-ex002.res.adroot.dk>

> Hi,
> 
> I am fighting with a problem that I can't initialise my gdal16.dll. I made all my installation and my bindings and I also have the PATH correct. But still it is impossible to run my gdal-dll. There is no problem in finding it but it just can't be initialised. I get the following error. It looks like some C runtime error is occuring.
> 
> Does somebody have any idea what could be wrong in my computer setup?
---
Runtime Error!
Programm C:\Python25\python.exe
R6034
An application has made an attempt to load the C runtime library incorrectly. Please contact the application's support team for more information.
--- 

> Thanks in advance and best regards,
> Gitte
> 
> ------------------------------------------------------
> Brigitte Rosenkranz
> Kort & Matrikelstyrelsen
> National Survey and Cadastre
> Rentemestervej 8
> DK-2400 K?benhavn NV
> Dir. tlf. +45 72 54 5203
> e-mail: bicro@kms.dk <mailto:mos@kms.dk> 
> Tlf. (+45) 72 54 50 00
> Fax. (+45) 72 54 50 51
> ------------------------------------------------------
> 
> 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091202/b868d8ad/attachment-0001.html
From stefano.moratto at gmail.com  Wed Dec  2 04:41:54 2009
From: stefano.moratto at gmail.com (Stefano Moratto)
Date: Wed Dec  2 04:47:00 2009
Subject: [gdal-dev] GDAL/WMS and Proxy
Message-ID: <d566cee10912020141l22ead618lc2903029daee6bae@mail.gmail.com>

Hello,

         I'm experimenting accessing openstreetmap's tiles using GDAL (WMS
minidriver).  I'm using gdaltranslate and the configuration file provided at
http://www.gdal.org/frmt_wms.html.

If the PC, where gdaltranslate is running, is not behind a firewall It works
fine.

In http://trac.osgeo.org/gdal/wiki/SoCWMSDriver it can be read a reference
to a HTTP proxy configuration entry that can be specified in the gdal xml
configuration file describing the dataset.
I set proxy information as described but It did not work. I browsed the code
(I compile the trunk) but I did not find any code that set the proxy option
for lib_curl.

Is this feature planned for a future release?
I have a osgeo id (moratto) and I'm a committer (I'm working on the delphi
binding). I can add this feature and commit the code.

Regards,

Stefano

----------------------

Dr.Eng. Stefano Moratto
stefano.moratto@gmail.com
stefano.moratto@csiat.it
http://www.csiat.it - Traffic Optimization Software
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091202/23272052/attachment.html
From jukka.rahkonen at mmmtike.fi  Wed Dec  2 05:00:57 2009
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Dec  2 05:01:33 2009
Subject: [gdal-dev] Re: GDAL/WMS and Proxy
References: <d566cee10912020141l22ead618lc2903029daee6bae@mail.gmail.com>
Message-ID: <loom.20091202T105639-816@post.gmane.org>

Stefano Moratto <stefano.moratto <at> gmail.com> writes:

> I set proxy information as described but It did not work.

Have you tried to set proxy in the Windows command window first? I believe the
command is
SET http_proxy=server:port

It would be good to have an option to set it in the xml file also.

-Jukka Rahkonen-

From szekerest at gmail.com  Wed Dec  2 05:15:27 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Dec  2 05:15:30 2009
Subject: [gdal-dev] Can't initialise my gdal16.dll because of a C runtime 
	error - Can somebody help?
In-Reply-To: <53D7A0A1A7E1B94689D14547F9262CF605C9F8DA@resc-ex002.res.adroot.dk>
References: <9AE3068694E29A4F930488CCADBE8B7F0FF20695@resc-ex002.res.adroot.dk>
	<53D7A0A1A7E1B94689D14547F9262CF605C9F8DA@resc-ex002.res.adroot.dk>
Message-ID: <f3b73b7d0912020215h6b8db6c7nc5d03195281e1ceb@mail.gmail.com>

Hi Gitte,

How did you obtain those binaries? It appears as if a manifest file haven't
been embedded in one of the dll-s as a resource. This may apply with the
dll-s compiled with MSVC2005 or above.



Best regards,

Tamas



2009/12/2 Rosenkranz, Brigitte Christine <bicro@kms.dk>

>  Hi,
>
> I am fighting with a problem that I can't initialise my gdal16.dll. I made
> all my installation and my bindings and I also have the PATH correct. But
> still it is impossible to run my gdal-dll. There is no problem in finding it
> but it just can't be initialised. I get the following error. It looks like
> some C runtime error is occuring.
>
> Does somebody have any idea what could be wrong in my computer setup?
> ---
> Runtime Error!
> Programm C:\Python25\python.exe
> R6034
> An application has made an attempt to load the C runtime library
> incorrectly. Please contact the application's support team for more
> information.
>
> ---
>
> Thanks in advance and best regards,
> Gitte
>
> ------------------------------------------------------
> *Brigitte Rosenkranz
> *Kort & Matrikelstyrelsen
> National Survey and Cadastre
> Rentemestervej 8
> DK-2400 K?benhavn NV
> Dir. tlf. +45 72 54 5203
> e-mail: *bicro@kms.dk* <mos@kms.dk>
> Tlf. (+45) 72 54 50 00
> Fax. (+45) 72 54 50 51
> ------------------------------------------------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091202/e05b62b1/attachment.html
From stefano.moratto at gmail.com  Wed Dec  2 05:41:22 2009
From: stefano.moratto at gmail.com (stefano.moratto@gmail.com)
Date: Wed Dec  2 06:27:28 2009
Subject: R:[gdal-dev] Re: GDAL/WMS and Proxy
In-Reply-To: <loom.20091202T105639-816@post.gmane.org>
Message-ID: <0016e6dab16c074ff30479bc8440@google.com>

SET http_proxy=server:port should be an lib_curl option. I use it but It  
did not work (I'm under XP)

Since I would like to use GDAL in my delphi gis application I need to set  
this option programmatically.
I will modify gdalhttp.* and dataset in gdal\trunk\frmts\wms in order to  
add this option.

I would be nice to a have a global GDL function to set PROXY information,  
like CPLSetHttpProxyInfo because the modification I'm going
to introduce will concern only the WMS driver. but not other drivers that  
use lib_curl

Stefano


Il giorno 02/dic/2009 11.00, Jukka Rahkonen <jukka.rahkonen@mmmtike.fi> ha  
scritto:
> Stefano Moratto gmail.com> writes:



> > I set proxy information as described but It did not work.



> Have you tried to set proxy in the Windows command window first? I  
> believe the

> command is

> SET http_proxy=server:port



> It would be good to have an option to set it in the xml file also.



> -Jukka Rahkonen-



> _______________________________________________

> gdal-dev mailing list

> gdal-dev@lists.osgeo.org

> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091202/7840b097/attachment.html
From silyko at gmail.com  Wed Dec  2 06:22:42 2009
From: silyko at gmail.com (Simon Lyngby Kokkendorff)
Date: Wed Dec  2 06:30:33 2009
Subject: [gdal-dev] Can't initialise my gdal16.dll because of a C runtime 
	error - Can somebody help?
In-Reply-To: <53D7A0A1A7E1B94689D14547F9262CF605C9F8DA@resc-ex002.res.adroot.dk>
References: <9AE3068694E29A4F930488CCADBE8B7F0FF20695@resc-ex002.res.adroot.dk>
	<53D7A0A1A7E1B94689D14547F9262CF605C9F8DA@resc-ex002.res.adroot.dk>
Message-ID: <b4a4b0380912020322m780284c5vd94ae4ee079731e8@mail.gmail.com>

Hi all,

 I know that Gitte installed the python bindings for gdal from
http://pypi.python.org/pypi/GDAL/ and followed the link to the minimalistic
gdal binaries at
http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip. I did the same
thing, and the python bindings run fine on my machine - however on hers it
gives the c- runtime error message below (both machines are running Windows
XP).

 Best,
 Simon


On Wed, Dec 2, 2009 at 8:26 AM, Rosenkranz, Brigitte Christine <bicro@kms.dk
> wrote:

>  Hi,
>
> I am fighting with a problem that I can't initialise my gdal16.dll. I made
> all my installation and my bindings and I also have the PATH correct. But
> still it is impossible to run my gdal-dll. There is no problem in finding it
> but it just can't be initialised. I get the following error. It looks like
> some C runtime error is occuring.
>
> Does somebody have any idea what could be wrong in my computer setup?
> ---
> Runtime Error!
> Programm C:\Python25\python.exe
> R6034
> An application has made an attempt to load the C runtime library
> incorrectly. Please contact the application's support team for more
> information.
>
> ---
>
> Thanks in advance and best regards,
> Gitte
>
> ------------------------------------------------------
> *Brigitte Rosenkranz
> *Kort & Matrikelstyrelsen
> National Survey and Cadastre
> Rentemestervej 8
> DK-2400 K?benhavn NV
> Dir. tlf. +45 72 54 5203
> e-mail: *bicro@kms.dk* <mos@kms.dk>
> Tlf. (+45) 72 54 50 00
> Fax. (+45) 72 54 50 51
> ------------------------------------------------------
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091202/e83cd611/attachment.html
From ivan.lucena at pmldnet.com  Wed Dec  2 08:16:32 2009
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Dec  2 08:16:35 2009
Subject: [gdal-dev] Windows build is broken
Message-ID: <20091202131632.11434.qmail@s466.sureserver.com>

Hi there,

Is that only me or there is something wrong with the trunk build:

{{{
NMAKE : fatal error U1077: 'cl' : return code '0x2'
Stop.
E:\Dev\gdal\ogr\ogrsf_frmts\dxf>cd odbc   && nmake /nologo /f makefile.vc   && cd .. 
The system cannot find the path specified.
E:\Dev\gdal\ogr\ogrsf_frmts\dxf>cd pgeo   && nmake /nologo /f makefile.vc   && cd .. 
The system cannot find the path specified.
NMAKE : fatal error U1077: 'for' : return code '0x1'
Stop.
NMAKE : fatal error U1077: '"E:\Program Files (x86)\Microsoft Visual Studio .NET 2003\Vc7\bin\nmake.exe"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"E:\Program Files (x86)\Microsoft Visual Studio .NET 2003\Vc7\bin\nmake.exe"' : return code '0x2'
Stop.
Project : error PRJ0019: A tool returned an error code from "Performing Makefile project actions"

Build log was saved at "file://e:\Dev\gdal\Debug\BuildLog.htm"
makegdal - 8 error(s), 1454 warning(s)


---------------------- Done ----------------------

    Build: 0 succeeded, 1 failed, 0 skipped
}}}

Regards,

Ivan
From antonio.valentino at tiscali.it  Wed Dec  2 08:17:23 2009
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Wed Dec  2 08:20:01 2009
Subject: [gdal-dev] GDAL 1.6.3 released
In-Reply-To: <0F637640-C47E-4162-823D-C092C15680D2@gmail.com>
References: <455014C8-CC57-476D-90AA-D8D0243457FA@gmail.com>
	<27FDEA6B-73F8-4458-A189-84C7B811C83C@gmail.com>
	<BD698357-5870-4E1C-AA60-59AECC615026@gmail.com>
	<4B0E9C40.7040100@mapgears.com>
	<4055E14E-8060-45E5-A6FB-3A0BF42E6969@gmail.com>
	<0F637640-C47E-4162-823D-C092C15680D2@gmail.com>
Message-ID: <20091202141723.493a44fe@asigrid01>

Hi Howard,

Il giorno Fri, 27 Nov 2009 13:59:12 -0600
Howard Butler <hobu.inc@gmail.com> ha scritto:

> All,
> 
> The GDAL team is pleased to announce the release of GDAL 1.6.3.
> 
> http://download.osgeo.org/gdal/gdal-1.6.3.tar.gz
> http://download.osgeo.org/gdal/gdal163.zip

First of all many compliments for your job.

It would be great to have an updated version of win32 binaries.
The one in http://download.osgeo.org/gdal/win32/1.6/ is one year old
and the version is 1.6.0.

Also it would be great to have a fresher version of the python bindings
package. The one at pypi is for GDAL 1.6.1.


Best regards


-- 
Antonio Valentino
From harsh.govind at spadac.com  Wed Dec  2 09:17:52 2009
From: harsh.govind at spadac.com (Harsh Govind)
Date: Wed Dec  2 09:18:56 2009
Subject: [gdal-dev] Can't initialize my gdal16.dll because of a C
	runtime 	error - Can somebody help?
In-Reply-To: <b4a4b0380912020322m780284c5vd94ae4ee079731e8@mail.gmail.com>
References: <9AE3068694E29A4F930488CCADBE8B7F0FF20695@resc-ex002.res.adroot.dk>
	<53D7A0A1A7E1B94689D14547F9262CF605C9F8DA@resc-ex002.res.adroot.dk>
	<b4a4b0380912020322m780284c5vd94ae4ee079731e8@mail.gmail.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817EAA40745@SPATCEX003.spadac.com>

You probably have Visual studio installed or some other application that installed the required manifest files on your machine but is not the case on Brigitte's machine. On her machine check if for the following directory:

C:\WINDOWS\WinSxS\x86_Microsoft.VC90.CRT_1fc8b3b9a1e18e3b_9.0.21022.8_x-ww_d08d0375

If you don't that means she is missing needed manifest files.


Regards,
Harsh Govind


From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Simon Lyngby Kokkendorff
Sent: Wednesday, December 02, 2009 6:23 AM
To: Rosenkranz, Brigitte Christine
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Can't initialise my gdal16.dll because of a C runtime error - Can somebody help?

Hi all,

 I know that Gitte installed the python bindings for gdal from http://pypi.python.org/pypi/GDAL/ and followed the link to the minimalistic gdal binaries at http://download.osgeo.org/gdal/win32/1.6/gdalwin32exe160.zip. I did the same thing, and the python bindings run fine on my machine - however on hers it gives the c- runtime error message below (both machines are running Windows XP).

 Best,
 Simon

On Wed, Dec 2, 2009 at 8:26 AM, Rosenkranz, Brigitte Christine <bicro@kms.dk<mailto:bicro@kms.dk>> wrote:

Hi,

I am fighting with a problem that I can't initialise my gdal16.dll. I made all my installation and my bindings and I also have the PATH correct. But still it is impossible to run my gdal-dll. There is no problem in finding it but it just can't be initialised. I get the following error. It looks like some C runtime error is occuring.

Does somebody have any idea what could be wrong in my computer setup?
---
Runtime Error!
Programm C:\Python25\python.exe
R6034
An application has made an attempt to load the C runtime library incorrectly. Please contact the application's support team for more information.

---

Thanks in advance and best regards,
Gitte

------------------------------------------------------
Brigitte Rosenkranz
Kort & Matrikelstyrelsen
National Survey and Cadastre
Rentemestervej 8
DK-2400 K?benhavn NV
Dir. tlf. +45 72 54 5203
e-mail: bicro@kms.dk<mailto:mos@kms.dk>
Tlf. (+45) 72 54 50 00
Fax. (+45) 72 54 50 51
------------------------------------------------------


_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org<mailto:gdal-dev@lists.osgeo.org>
http://lists.osgeo.org/mailman/listinfo/gdal-dev

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091202/3b0ae2e9/attachment.html
From tom.van.tilburg at gmail.com  Wed Dec  2 09:25:05 2009
From: tom.van.tilburg at gmail.com (TomvanTilburg)
Date: Wed Dec  2 09:25:08 2009
Subject: [Gdal-dev] PROJ.4 EPSG:28992
In-Reply-To: <4B0ED808.20700@mines-paris.org>
References: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>
	<47C8332B.1070003@pobox.com>
	<1259239461411-4070970.post@n2.nabble.com>
	<4B0ED808.20700@mines-paris.org>
Message-ID: <1259763905593-4100011.post@n2.nabble.com>


Hi Even,

Thanks for replying.

I don't think GDAL installation is the problem, since trying the same code
with different geom works fine.
But I just ran it in the DOS box and got a bit more descriptives:

WKT:POINT(127576.476563 481237.375)
POINT (127576.476563 481237.375)
ERROR 6: Failed to initialize PROJ.4 with `+proj=sterea
+lat_0=52.15616055555555 +lon_0=5.387638888888889 +k=0.9999079 +x_0=0 +y_0=0
+ellps=bessel +units=m +no_defs '.
unknown projection id

Seems like the projection id (this is the EPSG code?) is the culprit.

Any new ideas?

best regards,
 Tom


Even Rouault wrote:
> 
> A few points to check that come to mind :
> * Did you check that the proj.dll can be loaded by GDAL ? Check an error 
> message about it
> * Is the GDAL_DATA environment variable correctly set ?
> * If testepsg.exe is compiled (nmake /f makefile.vc testepsg.exe in apps 
> directory should do), try testepsg EPSG:28992
> 

-- 
View this message in context: http://n2.nabble.com/PROJ-4-EPSG-28992-tp2033665p4100011.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Dec  2 10:17:49 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  2 10:19:11 2009
Subject: [gdal-dev] Windows build is broken
In-Reply-To: <20091202131632.11434.qmail@s466.sureserver.com>
References: <20091202131632.11434.qmail@s466.sureserver.com>
Message-ID: <4B16851D.9020306@pobox.com>

Ivan Lucena wrote:
> Hi there,
> 
> Is that only me or there is something wrong with the trunk build:

Ahem,

Sorry folks - the rest of my changes are now committed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Dec  2 16:31:21 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  2 16:31:32 2009
Subject: [gdal-dev] gdalbuildvrt save relative paths
In-Reply-To: <15094F24-AF8C-4E9F-9BE9-F9305A1EF34A@mac.com>
References: <358B3EEA-369C-4A2C-B441-67E85938DCB5@mac.com>
	<15094F24-AF8C-4E9F-9BE9-F9305A1EF34A@mac.com>
Message-ID: <4B16DCA9.4030201@mines-paris.org>

Greg,

I already answered to the question in the very same thread you're 
refering to.

The conclusion is that gdalbuildvrt already saves relative paths in most 
cases where it makes sense. See my post : 
http://lists.osgeo.org/pipermail/gdal-dev/2009-October/022358.html.

> On Oct 14, 2009, at 12:40 PM, Greg Coats wrote:
>
>> How does one specify that gdalbuildvrt save relative paths, rather 
>> than absolute paths?
>
> On Oct 14, 2009, at 12:59 PM, J?rgen E. Fischer wrote:
>
>> Looks like that isn't supported directly yet.
>
> Since Qgis supports saving relative paths, it would be helpful and 
> convenient for gdalbuildvrt to also support saving relative paths. 
> What is the mechanism for formally requesting that saving relative 
> paths be incorporated as a feature into GDAL 1.7.0?
> Greg
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Dec  2 17:13:27 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  2 17:13:36 2009
Subject: [Gdal-dev] PROJ.4 EPSG:28992
In-Reply-To: <1259763905593-4100011.post@n2.nabble.com>
References: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>	<47C8332B.1070003@pobox.com>	<1259239461411-4070970.post@n2.nabble.com>	<4B0ED808.20700@mines-paris.org>
	<1259763905593-4100011.post@n2.nabble.com>
Message-ID: <4B16E687.90409@mines-paris.org>

TomvanTilburg a ?crit :

hum, looks a bit like a (mysterious) PROJ.4 issue. The "unknown 
projection id" probably referes to the 'sterea' method.

I've found a ticket in the PROJ trac database that seems to be very 
similar to your issue : http://trac.osgeo.org/proj/ticket/43
> Hi Even,
>
> Thanks for replying.
>
> I don't think GDAL installation is the problem, since trying the same code
> with different geom works fine.
> But I just ran it in the DOS box and got a bit more descriptives:
>
> WKT:POINT(127576.476563 481237.375)
> POINT (127576.476563 481237.375)
> ERROR 6: Failed to initialize PROJ.4 with `+proj=sterea
> +lat_0=52.15616055555555 +lon_0=5.387638888888889 +k=0.9999079 +x_0=0 +y_0=0
> +ellps=bessel +units=m +no_defs '.
> unknown projection id
>
> Seems like the projection id (this is the EPSG code?) is the culprit.
>
> Any new ideas?
>
> best regards,
>  Tom
>
>
> Even Rouault wrote:
>   
>> A few points to check that come to mind :
>> * Did you check that the proj.dll can be loaded by GDAL ? Check an error 
>> message about it
>> * Is the GDAL_DATA environment variable correctly set ?
>> * If testepsg.exe is compiled (nmake /f makefile.vc testepsg.exe in apps 
>> directory should do), try testepsg EPSG:28992
>>
>>     
>
>   


From gispowerfan at gmail.com  Wed Dec  2 22:52:18 2009
From: gispowerfan at gmail.com (=?utf-8?B?Z2lzcG93ZXJmYW4=?=)
Date: Wed Dec  2 22:52:24 2009
Subject: =?utf-8?B?UmU6IFJlOiBbZ2RhbC1kZXZdIGRyaXZlciBxdWVzdGlvbj8=?=
References: <200911230142271568123@gmail.com>
Message-ID: <200912031152153758519@gmail.com>

thank you for your reply,
now I am confused that besides write makefile with plugin support in dirver dir, are there other changes? and are there any changes in our partner's dirver source? IN my opinion, gdal_FOO.dll  is just the interface between FOO.DLL and gdal16.dll, and our partner need provid their dirver as xxx.dll?

Best


2009-12-03 



gispowerfan 



???? Even Rouault 
????? 2009-11-23  02:17:27 
???? gispowerfan 
??? gdal-dev 
??? Re: [gdal-dev] driver question? 
 
The best solution would be that your partner delivers to you its driver 
A compiled as a separate GDAL plugin (for example, if the driver 
shortname is FOO : gdal_FOO.dll with an entry point GDALRegister_FOO()). 
You then just have to define GDAL_DRIVER_PATH to point to the directory 
where gdal_FOO.dll is. Be careful : you and your partner must use use 
the same major GDAL version (identical X if GDAL version is 1.X.Y)  to 
compile & run against, otherwise there is a risk of C++ ABI 
incompatibility. As far as your driver B is concerned, compiling it as a 
plugin or fully integrated in your GDAL source tree is just a matter of 
conveniency.
See http://trac.osgeo.org/gdal/browser/trunk/gdal/frmts/hdf5/makefile.vc 
for an example of a makefile with a plugin target.
gispowerfan a ?crit :
> Hi
>  
>          I want to ask a question about how to implement the driver 
> for gdal. Because the partner don't provide their driver source(driver 
> A) for gdal, but we need it and we have our own drivers(driver b) for 
> gdal. So the easy way is that we provide the source contain driver B 
> to our partner, and out partner add their source, then compile it, 
> give us the final dll. Now the question is that we need upate our 
> source frequently, are there other method? is if feasible that our 
> partner change their souce code and put the implement code into *.lib 
> and *.dll, just interface of driver A in frmts driver source?
>  
> Best regards
>  
> 2009-11-23
> ------------------------------------------------------------------------
> gispowerfan
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091203/8909a862/attachment.html
From tom.van.tilburg at gmail.com  Thu Dec  3 04:20:35 2009
From: tom.van.tilburg at gmail.com (TomvanTilburg)
Date: Thu Dec  3 04:20:38 2009
Subject: [Gdal-dev] PROJ.4 EPSG:28992
In-Reply-To: <4B16E687.90409@mines-paris.org>
References: <5c6dd3b0751f426d8a62fd26d1095835@145.50.39.11>
	<47C8332B.1070003@pobox.com>
	<1259239461411-4070970.post@n2.nabble.com>
	<4B0ED808.20700@mines-paris.org>
	<1259763905593-4100011.post@n2.nabble.com>
	<4B16E687.90409@mines-paris.org>
Message-ID: <1259832035068-4104971.post@n2.nabble.com>



Even Rouault wrote:
> 
> TomvanTilburg a ?crit :
> 
> hum, looks a bit like a (mysterious) PROJ.4 issue. The "unknown 
> projection id" probably referes to the 'sterea' method.
> 
> I've found a ticket in the PROJ trac database that seems to be very 
> similar to your issue : http://trac.osgeo.org/proj/ticket/43
> 

'sterea' should be okay I think, it stands for OBLIQUE_STEREOGRAPHIC as far
as I know.

What surprises me is that my transform is running ok under linux but fails
under win.
It seems that somewhere a lookup for this projection is missing.
If someone can tell me the easiest way to produce some version numbers that
might help.

Below I'll put my code that produces the error (at the point where
'point.Transform(coordTrans)' should happen from epsg=28992 to epsg=4326)


from osgeo import ogr, osr

def transf(sample,epsgIn,epsgOut):

    # CREATE PROJECTION OBJECTS
    srIn = osr.SpatialReference ()
    srIn.ImportFromEPSG(epsgIn)
    srOut = osr.SpatialReference()
    srOut.ImportFromEPSG(epsgOut)
    coordTrans = osr.CoordinateTransformation(srIn, srOut)
    
    # CREATE OGR POINT OBJECT, ASSIGN PROJECTION, REPROJECT
    x = sample[0]
    y = sample[1]
    wkt = 'POINT(%s %s)' % (x, y)
    point = ogr.CreateGeometryFromWkt(wkt)
    point.AssignSpatialReference(srIn)
    #point.TransformTo(srOut)
    point.Transform(coordTrans)

    print '======================='
    print 'Input: ',wkt
    print srIn.ExportToProj4()
    print 'Output1: ',point


# CREATE WKT STRING OF POINT COORDS
sample = (' 776041.000', ' 3386618.000')
transf(sample,26916,4326)
sample = (' 143423.00', ' 473057.00')
transf(sample,28992,4326)


Output:

=======================
Input:  POINT( 776041.000  3386618.000)
+proj=utm +zone=16 +ellps=GRS80 +datum=NAD83 +units=m +no_defs
Output1:  POINT (-84.121611219545073 30.5802861582041)
ERROR 6: Failed to initialize PROJ.4 with `+proj=sterea
+lat_0=52.15616055555555
 +lon_0=5.387638888888889 +k=0.9999079 +x_0=155000 +y_0=463000 +ellps=bessel
+un
its=m +no_defs '.
unknown projection id
Traceback (most recent call last):
  File "projtest.py", line 32, in <module>
    transf(sample,28992,4326)
  File "projtest.py", line 20, in transf
    point.Transform(coordTrans)
  File
"C:\Python26\lib\site-packages\gdal-1.6.1-py2.6-win32.egg\osgeo\ogr.py",
line 3173, in Transform
    return _ogr.Geometry_Transform(*args)
TypeError: in method 'Geometry_Transform', argument 2 of type
'OSRCoordinateTran
sformationShadow *'


-- 
View this message in context: http://n2.nabble.com/PROJ-4-EPSG-28992-tp2033665p4104971.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From regis.visiere at meteo.fr  Thu Dec  3 04:58:30 2009
From: regis.visiere at meteo.fr (=?iso-8859-1?Q?R=E9gis_Visi=E8re?=)
Date: Thu Dec  3 05:22:58 2009
Subject: [gdal-dev] GDAL 1.7 Pb with GeoTiff Driver since revision 17563
Message-ID: <074D40E796FC45D1BD0AEF5A6EC146FD@dpdsi.ad.meteo.fr>

Hi all,

I have a problem with Jpeg compressed Tiff images ang GDAL 1.7 since 
revision 17563
The Geotiff driver can no longer read some of these images.

These images have all the same characteristics :
 - GeoTiff Image
 - Jpeg Compression
 - RGB  BitsPerSample 8
 - Photometric=YCbCr
 - Not Tiled
 - Width > 2000 and Height > 2000
 - Image OK in any standard Viewer
 - No problem with GDAL 1.6.2

A simple command like :
     gdal_translate imgpb17.tif img.png -of PNG does not work.
( Windows XP 32b and Linux 64b )

--> There's a lot of warnings :
....
Warning 1: imgpb17.tif:fractional scanline not read

...10...20.Warning 1: imgpb17.tif:fractional scanline not read
Warning 1: imgpb17.tif:fractional scanline not read
...
Warning 1: imgpb17.tif:fractional scanline not read
More than 1000 errors or warnings have been reported. No more will be 
reported f
rom now.
..30...40...50...60...70...80...90...100 - done.

and the output image is "black"

As a workaround, I modified the following line in frmts/gtiff/geotiff.cpp

line 4840
 if( !TIFFIsTiled(hTIFF)
        && nBitsPerSample == 8
        && nBlockYSize == nYSize
        && nYSize > 2000
        && !bTreatAsRGBA )
{
   /* bTreatAsSplit = TRUE; */   <--------- 
 }

But it's only a workaround, not a solution

Here is a test image : http://www.meteo.fr/special/gdal/imgpb17.tif

Could you confirm that this is really a bug and not a mistake on my part.

Best regards

R?gis Visi?re


From tappenbeck at widemann.de  Thu Dec  3 08:05:19 2009
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Thu Dec  3 08:05:27 2009
Subject: [gdal-dev] why aerophoto-strip is black ??
Message-ID: <4B17B78F.6010309@widemann.de>

hi !

i had 11 strip-images of aerophotos with total 200MB.

i want to merge this with gdal_merge.py by using FWTools in Windows.

> gdal_merge -v -o file.tif -of GTIFF --co --optfile filelist.txt

the result is a file with 8.85 GB. when i open the file in OpenEV one of
the image-strip will not show ! it is black.

look at 
http://www.tappenbeck.net/forum/gdal/gdal_merge_missing_strip.jpg - 
there is a picture of this result in OpenEV.

then i try to make a workaround and translate every ecw to tif - open 
eveny one to controll -> ok.

in the next step i merge these 11 strips to one tif-file with gdal_merge

but the result - one strip is missing !

can anybody help me ??

regards Jan .-)
From chaitanya.ch at gmail.com  Thu Dec  3 08:23:28 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Dec  3 08:30:24 2009
Subject: [gdal-dev] why aerophoto-strip is black ??
In-Reply-To: <4B17B78F.6010309@widemann.de>
References: <4B17B78F.6010309@widemann.de>
Message-ID: <eb502d880912030523p6813312fi84178d31d4dc1bbf@mail.gmail.com>

Jan,

Can you provide the gdalinfo of the individual strips?

On Thu, Dec 3, 2009 at 6:35 PM, Jan Tappenbeck <tappenbeck@widemann.de> wrote:
> hi !
>
> i had 11 strip-images of aerophotos with total 200MB.
>
> i want to merge this with gdal_merge.py by using FWTools in Windows.
>
>> gdal_merge -v -o file.tif -of GTIFF --co --optfile filelist.txt
>
> the result is a file with 8.85 GB. when i open the file in OpenEV one of
> the image-strip will not show ! it is black.
>
> look at http://www.tappenbeck.net/forum/gdal/gdal_merge_missing_strip.jpg -
> there is a picture of this result in OpenEV.
>
> then i try to make a workaround and translate every ecw to tif - open eveny
> one to controll -> ok.
>
> in the next step i merge these 11 strips to one tif-file with gdal_merge
>
> but the result - one strip is missing !
>
> can anybody help me ??
>
> regards Jan .-)
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Best regards,
Chaitanya kumar CH.

+91-98481 67848
17.241582N 80.142635E
From tappenbeck at widemann.de  Thu Dec  3 08:48:46 2009
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Thu Dec  3 08:48:54 2009
Subject: [gdal-dev] why aerophoto-strip is black ??
In-Reply-To: <eb502d880912030523p6813312fi84178d31d4dc1bbf@mail.gmail.com>
References: <4B17B78F.6010309@widemann.de>
	<eb502d880912030523p6813312fi84178d31d4dc1bbf@mail.gmail.com>
Message-ID: <4B17C1BE.3080007@widemann.de>

hi !

it is very difficult - i open the 11 files now again in the 
OpenEV-Viewer and every time it is ANOTHER picture that will not be show 
!!!!!

Did you think it could be a problem by the memory (3 GB) ???

regards jan :-)

CH.... k?nnen auch deutsch mailen ?

Gru? Jan :-)

Chaitanya kumar CH schrieb:
> Jan,
>
> Can you provide the gdalinfo of the individual strips?
>
> On Thu, Dec 3, 2009 at 6:35 PM, Jan Tappenbeck <tappenbeck@widemann.de> wrote:
>   
>> hi !
>>
>> i had 11 strip-images of aerophotos with total 200MB.
>>
>> i want to merge this with gdal_merge.py by using FWTools in Windows.
>>
>>     
>>> gdal_merge -v -o file.tif -of GTIFF --co --optfile filelist.txt
>>>       
>> the result is a file with 8.85 GB. when i open the file in OpenEV one of
>> the image-strip will not show ! it is black.
>>
>> look at http://www.tappenbeck.net/forum/gdal/gdal_merge_missing_strip.jpg -
>> there is a picture of this result in OpenEV.
>>
>> then i try to make a workaround and translate every ecw to tif - open eveny
>> one to controll -> ok.
>>
>> in the next step i merge these 11 strips to one tif-file with gdal_merge
>>
>> but the result - one strip is missing !
>>
>> can anybody help me ??
>>
>> regards Jan .-)
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>     
>
>   


-- 

Freundliche Gr??e
i.A. Jan Tappenbeck

Dipl. Vermessungsingenieur
CAD-Systemberater & AutoCAD-Support

Widemann Systeme GmbH
CAD- und GIS-Systemhaus
Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf ? Saarbr?cken
  
Ackermannstra?e 21, 22087 Hamburg
Fon: 040 / 229477-22
Fax: 040 / 229477-29 	
tappenbeck@widemann.de    www.widemann.de

Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345
 
Zu jedem Produkt das passende Forum unter http://www.widemann.de/wisysforen/
 

Widemann Systeme - aktuell:

geosi.DE - Vermessungssoftware ...
... f?r Stra?enbau, Bauwesen, ....

- weitere Infos unter:
http://www.widemann.de/produkte/geoside/geosi.htm


Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte Informationen.
Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte 
sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte Kopieren 
dieser E-Mail oder die unbefugte Weitergabe der enthaltenen Informationen 
ist nicht gestattet.

The information contained in this message is confidential or protected by 
law. If you are not the intended recipient, please contact the sender and 
delete this message. Any unauthorised copying of this message or unauthorised 
distribution of the information contained herein is prohibited. 

From jrepetto at free.fr  Thu Dec  3 09:27:59 2009
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Dec  3 09:30:01 2009
Subject: [gdal-dev] why aerophoto-strip is black ??
In-Reply-To: <4B17B78F.6010309@widemann.de>
References: <4B17B78F.6010309@widemann.de>
Message-ID: <4B17CAEF.9090106@free.fr>

Jan Tappenbeck a ?crit :
> hi !
> 
> i had 11 strip-images of aerophotos with total 200MB.
> 
> i want to merge this with gdal_merge.py by using FWTools in Windows.
> 

Hi,

Have you tried to use gdalwarp instead of gdal_merge.py ? AFAIK, 
gdal_merge.py is only an example of a Python script, the correct tool to 
use to merge tiles is gdalwarp.

Syntax :
gdalwarp file1 file2 file3 output_file

Jean-Claude
From regis.visiere at meteo.fr  Thu Dec  3 10:00:20 2009
From: regis.visiere at meteo.fr (=?utf-8?Q?R=C3=A9gis_Visi=C3=A8re?=)
Date: Thu Dec  3 10:00:28 2009
Subject: [gdal-dev] GDAL 1.7 Pb with GeoTiff Driver since revision 17563
References: <074D40E796FC45D1BD0AEF5A6EC146FD@dpdsi.ad.meteo.fr>
	<eb502d880912030455l6cf9c804u1175db0d5f54a0d9@mail.gmail.com>
Message-ID: <58E5272618F14B6BB467D5F7C995EB15@dpdsi.ad.meteo.fr>

Thank you for the confirmation
--> Ticket created : #3259

Best regards

R?gis Visi?re


----- Original Message ----- 
From: "Chaitanya kumar CH" <chaitanya.ch@gmail.com>
To: "R?gis Visi?re" <regis.visiere@meteo.fr>
Sent: Thursday, December 03, 2009 1:55 PM
Subject: Re: [gdal-dev] GDAL 1.7 Pb with GeoTiff Driver since revision 17563


I am getting a segfault with the trunk(1.7) without any warning while
it's working fine with 1.6

R?gis, please raise at http://trac.osgeo.org/gdal/newticket

2009/12/3 R?gis Visi?re <regis.visiere@meteo.fr>:
> Hi all,
>
> I have a problem with Jpeg compressed Tiff images ang GDAL 1.7 since
> revision 17563
> The Geotiff driver can no longer read some of these images.
>
> These images have all the same characteristics :
> - GeoTiff Image
> - Jpeg Compression
> - RGB BitsPerSample 8
> - Photometric=YCbCr
> - Not Tiled
> - Width > 2000 and Height > 2000
> - Image OK in any standard Viewer
> - No problem with GDAL 1.6.2
>
> A simple command like :
> gdal_translate imgpb17.tif img.png -of PNG does not work.
> ( Windows XP 32b and Linux 64b )
>
> --> There's a lot of warnings :
> ....
> Warning 1: imgpb17.tif:fractional scanline not read
>
> ...10...20.Warning 1: imgpb17.tif:fractional scanline not read
> Warning 1: imgpb17.tif:fractional scanline not read
> ...
> Warning 1: imgpb17.tif:fractional scanline not read
> More than 1000 errors or warnings have been reported. No more will be
> reported f
> rom now.
> ..30...40...50...60...70...80...90...100 - done.
>
> and the output image is "black"
>
> As a workaround, I modified the following line in frmts/gtiff/geotiff.cpp
>
> line 4840
> if( !TIFFIsTiled(hTIFF)
> && nBitsPerSample == 8
> && nBlockYSize == nYSize
> && nYSize > 2000
> && !bTreatAsRGBA )
> {
> /* bTreatAsSplit = TRUE; */ <--------- }
>
> But it's only a workaround, not a solution
>
> Here is a test image : http://www.meteo.fr/special/gdal/imgpb17.tif
>
> Could you confirm that this is really a bug and not a mistake on my part.
>
> Best regards
>
> R?gis Visi?re
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Best regards,
Chaitanya kumar CH.

+91-98481 67848
17.241582N 80.142635E 

From tappenbeck at widemann.de  Thu Dec  3 10:11:58 2009
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Thu Dec  3 10:12:10 2009
Subject: [gdal-dev] why aerophoto-strip is black ??
In-Reply-To: <4B17CAEF.9090106@free.fr>
References: <4B17B78F.6010309@widemann.de> <4B17CAEF.9090106@free.fr>
Message-ID: <4B17D53E.6020806@widemann.de>

Dear Jean-Claude,

thanks for mailing - is it possible to define a list-of-inputfile ???

regards Jan :-)

Jean-Claude REPETTO schrieb:
> Jan Tappenbeck a ?crit :
>> hi !
>>
>> i had 11 strip-images of aerophotos with total 200MB.
>>
>> i want to merge this with gdal_merge.py by using FWTools in Windows.
>>
>
> Hi,
>
> Have you tried to use gdalwarp instead of gdal_merge.py ? AFAIK, 
> gdal_merge.py is only an example of a Python script, the correct tool 
> to use to merge tiles is gdalwarp.
>
> Syntax :
> gdalwarp file1 file2 file3 output_file
>
> Jean-Claude
>
>


-- 

Freundliche Gr??e
i.A. Jan Tappenbeck

Dipl. Vermessungsingenieur
CAD-Systemberater & AutoCAD-Support

Widemann Systeme GmbH
CAD- und GIS-Systemhaus
Wiesbaden ? Hamburg ? M?nchen ? D?sseldorf ? Saarbr?cken
  
Ackermannstra?e 21, 22087 Hamburg
Fon: 040 / 229477-22
Fax: 040 / 229477-29 	
tappenbeck@widemann.de    www.widemann.de

Sitz der Gesellschaft: Wiesbaden, Amtsgericht Wiesbaden HRB 23345
 
Zu jedem Produkt das passende Forum unter http://www.widemann.de/wisysforen/
 

Widemann Systeme - aktuell:

geosi.DE - Vermessungssoftware ...
... f?r Stra?enbau, Bauwesen, ....

- weitere Infos unter:
http://www.widemann.de/produkte/geoside/geosi.htm


Diese E-Mail enth?lt vertrauliche oder rechtlich gesch?tzte Informationen.
Wenn Sie nicht der beabsichtigte Empf?nger sind, informieren Sie bitte 
sofort den Absender und l?schen Sie diese E-Mail. Das unbefugte Kopieren 
dieser E-Mail oder die unbefugte Weitergabe der enthaltenen Informationen 
ist nicht gestattet.

The information contained in this message is confidential or protected by 
law. If you are not the intended recipient, please contact the sender and 
delete this message. Any unauthorised copying of this message or unauthorised 
distribution of the information contained herein is prohibited. 

From gispowerfan at gmail.com  Thu Dec  3 10:24:06 2009
From: gispowerfan at gmail.com (gispowerfan)
Date: Thu Dec  3 10:24:11 2009
Subject: [gdal-dev] why aerophoto-strip is black ??
Message-ID: <200912032324026402055@gmail.com>

try to merge adjoin two strips into one image(such as A), and merge A and the adjoin strips into B, ..., you will have the reason of black strip.
I think that the reason maby be the data itself or  one strip's geotransform para error.

regards,

gispowerfan

2009-12-03 



gispowerfan 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091203/47fd96c4/attachment.html
From kpribadi at rscusa.com  Thu Dec  3 17:12:10 2009
From: kpribadi at rscusa.com (Kris Pribadi)
Date: Thu Dec  3 17:11:04 2009
Subject: [gdal-dev] FWTools Win64 version
Message-ID: <26A788810F651C4281D7C9919FBE6163770E5D@sbs1.sbs.local>

Tamas:

 

Is there a plan to build FWTools binaries for Win64 version? I am using the gdal_csharp library and gdal utilities and need to deploy this on Vista-64 bit machines. Currently running into  "invalid format" problems.

 

Thank you.

 

Kris Pribadi

Renaissance Sciences Corp. (RSC)

Sr. Systems Engineer

 

?   480-374-5084

? 480-258-0182

 

1351 N. Alma School Rd. STE 265

Chandler, AZ 85224

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091203/2b27925c/attachment.html
From tappenbeck at widemann.de  Fri Dec  4 03:39:33 2009
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Fri Dec  4 03:39:47 2009
Subject: [gdal-dev] problem with make a color transparent [-n nodata value]
Message-ID: <4B18CAC5.3090004@widemann.de>

Hallo !

i want to make a white-border of a tif-image transparent for merge in 
the next steps.

in photoshop a analyst the color like 255,255,255 => color-index 255.

the image to edit is:

Driver: GTiff/GeoTIFF
Files: C:\temp\Nordfriesland\L1516l0.tif
       C:\temp\Nordfriesland\L1516l0.tfw
Size is 8845, 9119
Coordinate System is `'
Origin = (3456524.965278996600000,6052507.832452093300000)
Pixel Size = (2.500185047310530,-2.500185047310530)
Metadata:
  TIFFTAG_SOFTWARE=WGEO 5.0 LVA_SH
  TIFFTAG_DATETIME=2007/11/19 11:58:59
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 3456524.965, 6052507.832)
Lower Left  ( 3456524.965, 6029708.645)
Upper Right ( 3478639.102, 6052507.832)
Lower Right ( 3478639.102, 6029708.645)
Center      ( 3467582.034, 6041108.239)
Band 1 Block=8845x1 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 256 entries)
    0: 255,255,255,255
    1: 0,0,0,255
    2: 0,0,255,255
    3: 204,255,255,255
    4: 178,102,0,255
    5: 204,255,204,255
    6: 211,211,211,255
    7: 242,214,170,255
    8: 0,229,0,255
    9: 255,242,89,255
   10: 255,89,89,255
   11: 102,51,0,255
   12: 178,216,255,255
   13: 255,89,89,255
   14: 255,178,178,255
   15: 204,102,216,255
   16: 229,204,242,255
   17: 216,153,216,255
   18: 114,165,89,255
   19: 216,255,178,255
   20: 255,255,255,255
   21: 255,255,204,255
   22: 255,242,153,255
   23: 255,216,38,255
   24: 255,196,0,255
   25: 255,178,0,255
   26: 216,165,99,255
   27: 130,0,63,255
   28: 255,119,104,255
   29: 255,196,0,255
   30: 216,255,178,255
   31: 178,234,127,255
   32: 255,127,0,255
   33: 255,242,119,255
   34: 255,255,255,255
   35: 204,219,165,255
   36: 255,255,255,255
   37: 255,255,255,255
   38: 255,255,255,255
   39: 255,255,255,255
   40: 255,255,255,255
   41: 255,255,255,255
   42: 255,255,255,255
   43: 255,255,255,255
   44: 255,255,255,255
   45: 255,255,255,255
   46: 255,255,255,255
   47: 255,255,255,255
   48: 255,255,255,255
   49: 255,255,255,255
   50: 255,255,255,255
   51: 255,255,255,255
   52: 255,255,255,255
   53: 255,255,255,255
   54: 255,255,255,255
   55: 255,255,255,255
   56: 255,255,255,255
   57: 255,255,255,255
   58: 255,255,255,255
   59: 255,255,255,255
   60: 255,255,255,255
   61: 255,255,255,255
   62: 255,255,255,255
   63: 255,255,255,255
   64: 255,255,255,255
   65: 255,255,255,255
   66: 255,255,255,255
   67: 255,255,255,255
   68: 255,255,255,255
   69: 255,255,255,255
   70: 255,255,255,255
   71: 255,255,255,255
   72: 255,255,255,255
   73: 255,255,255,255
   74: 255,255,255,255
   75: 255,255,255,255
   76: 255,255,255,255
   77: 255,255,255,255
   78: 255,255,255,255
   79: 255,255,255,255
   80: 255,255,255,255
   81: 255,255,255,255
   82: 255,255,255,255
   83: 255,255,255,255
   84: 255,255,255,255
   85: 255,255,255,255
   86: 255,255,255,255
   87: 255,255,255,255
   88: 255,255,255,255
   89: 255,255,255,255
   90: 255,255,255,255
   91: 255,255,255,255
   92: 255,255,255,255
   93: 255,255,255,255
   94: 255,255,255,255
   95: 255,255,255,255
   96: 255,255,255,255
   97: 255,255,255,255
   98: 255,255,255,255
   99: 255,255,255,255
  100: 255,255,255,255
  101: 255,255,255,255
  102: 255,255,255,255
  103: 255,255,255,255
  104: 255,255,255,255
  105: 255,255,255,255
  106: 255,255,255,255
  107: 255,255,255,255
  108: 255,255,255,255
  109: 255,255,255,255
  110: 255,255,255,255
  111: 255,255,255,255
  112: 255,255,255,255
  113: 255,255,255,255
  114: 255,255,255,255
  115: 255,255,255,255
  116: 255,255,255,255
  117: 255,255,255,255
  118: 255,255,255,255
  119: 255,255,255,255
  120: 255,255,255,255
  121: 255,255,255,255
  122: 255,255,255,255
  123: 255,255,255,255
  124: 255,255,255,255
  125: 255,255,255,255
  126: 255,255,255,255
  127: 255,255,255,255
  128: 255,255,255,255
  129: 255,255,255,255
  130: 255,255,255,255
  131: 255,255,255,255
  132: 255,255,255,255
  133: 255,255,255,255
  134: 255,255,255,255
  135: 255,255,255,255
  136: 255,255,255,255
  137: 255,255,255,255
  138: 255,255,255,255
  139: 255,255,255,255
  140: 255,255,255,255
  141: 255,255,255,255
  142: 255,255,255,255
  143: 255,255,255,255
  144: 255,255,255,255
  145: 255,255,255,255
  146: 255,255,255,255
  147: 255,255,255,255
  148: 255,255,255,255
  149: 255,255,255,255
  150: 255,255,255,255
  151: 255,255,255,255
  152: 255,255,255,255
  153: 255,255,255,255
  154: 255,255,255,255
  155: 255,255,255,255
  156: 255,255,255,255
  157: 255,255,255,255
  158: 255,255,255,255
  159: 255,255,255,255
  160: 255,255,255,255
  161: 255,255,255,255
  162: 255,255,255,255
  163: 255,255,255,255
  164: 255,255,255,255
  165: 255,255,255,255
  166: 255,255,255,255
  167: 255,255,255,255
  168: 255,255,255,255
  169: 255,255,255,255
  170: 255,255,255,255
  171: 255,255,255,255
  172: 255,255,255,255
  173: 255,255,255,255
  174: 255,255,255,255
  175: 255,255,255,255
  176: 255,255,255,255
  177: 255,255,255,255
  178: 255,255,255,255
  179: 255,255,255,255
  180: 255,255,255,255
  181: 255,255,255,255
  182: 255,255,255,255
  183: 255,255,255,255
  184: 255,255,255,255
  185: 255,255,255,255
  186: 255,255,255,255
  187: 255,255,255,255
  188: 255,255,255,255
  189: 255,255,255,255
  190: 255,255,255,255
  191: 255,255,255,255
  192: 255,255,255,255
  193: 255,255,255,255
  194: 255,255,255,255
  195: 255,255,255,255
  196: 255,255,255,255
  197: 255,255,255,255
  198: 255,255,255,255
  199: 255,255,255,255
  200: 255,255,255,255
  201: 255,255,255,255
  202: 255,255,255,255
  203: 255,255,255,255
  204: 255,255,255,255
  205: 255,255,255,255
  206: 255,255,255,255
  207: 255,255,255,255
  208: 255,255,255,255
  209: 255,255,255,255
  210: 255,255,255,255
  211: 255,255,255,255
  212: 255,255,255,255
  213: 255,255,255,255
  214: 255,255,255,255
  215: 255,255,255,255
  216: 255,255,255,255
  217: 255,255,255,255
  218: 255,255,255,255
  219: 255,255,255,255
  220: 255,255,255,255
  221: 255,255,255,255
  222: 255,255,255,255
  223: 255,255,255,255
  224: 255,255,255,255
  225: 255,255,255,255
  226: 255,255,255,255
  227: 255,255,255,255
  228: 255,255,255,255
  229: 255,255,255,255
  230: 255,255,255,255
  231: 255,255,255,255
  232: 255,255,255,255
  233: 255,255,255,255
  234: 255,255,255,255
  235: 255,255,255,255
  236: 255,255,255,255
  237: 255,255,255,255
  238: 255,255,255,255
  239: 255,255,255,255
  240: 255,255,255,255
  241: 255,255,255,255
  242: 255,255,255,255
  243: 255,255,255,255
  244: 255,255,255,255
  245: 255,255,255,255
  246: 255,255,255,255
  247: 255,255,255,255
  248: 255,255,255,255
  249: 255,255,255,255
  250: 255,255,255,255
  251: 255,255,255,255
  252: 255,255,255,255
  253: 255,255,255,255
  254: 255,255,255,255
  255: 255,255,255,255

now i start follwing command:

gdal_merge -v -o c:\temp\Nordfriesland\outputfile.tif -of GTiff -ps 1 1 
-pct -co COMPRESS=LZW -n 255 C:\temp\Nordfriesland\L1516l0.tif

and i became this error message:
Filename: C:\temp\Nordfriesland\L1516l0.tif
File Size: 8845x9119x1
Pixel Size: 2.500185 x -2.500185
UL:(3456524.965279,6052507.832452)   LR:(3478639.102022,6029708.645006)
Copy 0,0,8845,9119 to 246,0,22115,22799.
Traceback (most recent call last):
  File "C:\PROGRA~1\FWTOOL~1.6\bin\gdal_merge.py", line 434, in ?
    fi.copy_into( t_fh, band, band, nodata )
  File "C:\PROGRA~1\FWTOOL~1.6\bin\gdal_merge.py", line 228, in copy_into
    nodata_arg )
  File "C:\PROGRA~1\FWTOOL~1.6\bin\gdal_merge.py", line 48, in raster_copy
    nodata )
  File "C:\PROGRA~1\FWTOOL~1.6\bin\gdal_merge.py", line 85, in 
raster_copy_with_
nodata
    data_dst = t_band.ReadAsArray( t_xoff, t_yoff, t_xsize, t_ysize )
  File "C:\PROGRA~1\FWTOOL~1.6\pymod\gdal.py", line 877, in ReadAsArray
    buf_xsize, buf_ysize, buf_obj )
  File "C:\PROGRA~1\FWTOOL~1.6\pymod\gdalnumeric.py", line 178, in 
BandReadAsArr
ay
    buf_obj = zeros( shape, typecode )
MemoryError: can't allocate memory for array

did anybody had more informations for the reasons ????

regards Jan :-)

From cudars at yeah.net  Fri Dec  4 09:16:27 2009
From: cudars at yeah.net (cudars)
Date: Fri Dec  4 09:16:29 2009
Subject: [Gdal-dev] how to write out a tiff file using GDAL?
Message-ID: <1259936187119-4112637.post@n2.nabble.com>


I am quite new to GDAL.
I want to read a big remote sensing image (tiff file format),do the digital
image process, then write the result to a tiff file. The program language is
C++.

I have finished read in the digital image file and digital image processing.

As the image file has several bands. I do not know how to write out a tiff
file.

Should I use create or createcopy?  The gdalenhance source code using
VRTDataset. In my case, should I use VRTDataset ?  I did not understand the
gdalenhance source code so far.

Could anyone give me a example to illustrate how to write out a tiff file in
GDAL?

Thanks in advanced.

-- 
View this message in context: http://n2.nabble.com/how-to-write-out-a-tiff-file-using-GDAL-tp4112637p4112637.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Fri Dec  4 09:33:16 2009
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Dec  4 09:33:20 2009
Subject: =?iso-8859-1?B?UmU6IFtHZGFsLWRldl0gaG93IHRvIHdyaXRlIG91dCBhIHRpZmYgZmlsZSB1c2luZyBHREFMPw==?=
Message-ID: <20091204143317.18974.qmail@s466.sureserver.com>

You can start by looking at the tutorial:

http://gdal.org/gdal_tutorial.html

The section "Using Create()" shows how to create new files.

Other examples in C or C++ can be found at the /apps folder. 

Regards.

>  -------Original Message-------
>  From: cudars <cudars@yeah.net>
>  Subject: [Gdal-dev] how to write out a tiff file using GDAL?
>  Sent: Dec 04 '09 09:16
>  
>  
>  I am quite new to GDAL.
>  I want to read a big remote sensing image (tiff file format),do the digital
>  image process, then write the result to a tiff file. The program language is
>  C++.
>  
>  I have finished read in the digital image file and digital image processing.
>  
>  As the image file has several bands. I do not know how to write out a tiff
>  file.
>  
>  Should I use create or createcopy???The gdalenhance source code using
>  VRTDataset. In my case, should I use VRTDataset ???I did not understand the
>  gdalenhance source code so far.
>  
>  Could anyone give me a example to illustrate how to write out a tiff file in
>  GDAL?
>  
>  Thanks in advanced.
>  
>  --
>  View this message in context: http://n2.nabble.com/how-to-write-out-a-tiff-file-using-GDAL-tp4112637p4112637.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From cudars at yeah.net  Fri Dec  4 09:49:29 2009
From: cudars at yeah.net (cudars)
Date: Fri Dec  4 09:49:31 2009
Subject: [Gdal-dev] how to write out a tiff file using GDAL?
In-Reply-To: <20091204143317.18974.qmail@s466.sureserver.com>
References: <1259936187119-4112637.post@n2.nabble.com>
	<20091204143317.18974.qmail@s466.sureserver.com>
Message-ID: <1259938169293-4112847.post@n2.nabble.com>




Ivan-5 wrote:
> 
> You can start by looking at the tutorial:
> 
> http://gdal.org/gdal_tutorial.html
> 
> The section "Using Create()" shows how to create new files.
> 
> Other examples in C or C++ can be found at the /apps folder. 
> 
> Regards.
> 
>>  -------Original Message-------
>>  From: cudars <cudars@yeah.net>
>>  Subject: [Gdal-dev] how to write out a tiff file using GDAL?
>>  Sent: Dec 04 '09 09:16
>>  
>>  
>>  I am quite new to GDAL.
>>  I want to read a big remote sensing image (tiff file format),do the
>> digital
>>  image process, then write the result to a tiff file. The program
>> language is
>>  C++.
>>  
>>  I have finished read in the digital image file and digital image
>> processing.
>>  
>>  As the image file has several bands. I do not know how to write out a
>> tiff
>>  file.
>>  
>>  Should I use create or createcopy???The gdalenhance source code using
>>  VRTDataset. In my case, should I use VRTDataset ???I did not understand
>> the
>>  gdalenhance source code so far.
>>  
>>  Could anyone give me a example to illustrate how to write out a tiff
>> file in
>>  GDAL?
>>  
>>  Thanks in advanced.
>>  
>>  --
>>  View this message in context:
>> http://n2.nabble.com/how-to-write-out-a-tiff-file-using-GDAL-tp4112637p4112637.html
>>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

I have read GDAL API Tutorial.
The Tutorial wrote "Once the dataset is successfully created, all
appropriate metadata and raster data must be written to the file. What this
is will vary according to usage, but a simple case with a projection,
geotransform and raster data is covered here."

If I want to write more metadata other than projection, geotransform etc,
What should I do?
I want to keep the original tiff file metadata and add my metadata to the
new create tiff.


 

-- 
View this message in context: http://n2.nabble.com/how-to-write-out-a-tiff-file-using-GDAL-tp4112637p4112847.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Fri Dec  4 10:59:52 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  4 10:59:44 2009
Subject: [Gdal-dev] how to write out a tiff file using GDAL?
In-Reply-To: <1259938169293-4112847.post@n2.nabble.com>
References: <1259936187119-4112637.post@n2.nabble.com>
	<20091204143317.18974.qmail@s466.sureserver.com>
	<1259938169293-4112847.post@n2.nabble.com>
Message-ID: <4B1931F8.7020103@pobox.com>

cudars wrote:
> I have read GDAL API Tutorial.
> The Tutorial wrote "Once the dataset is successfully created, all
> appropriate metadata and raster data must be written to the file. What this
> is will vary according to usage, but a simple case with a projection,
> geotransform and raster data is covered here."
> 
> If I want to write more metadata other than projection, geotransform etc,
> What should I do?
> I want to keep the original tiff file metadata and add my metadata to the
> new create tiff.

Cudars,

In C++ you could do:

   poDstDS->SetMetadata( poSrcDS->GetMetadata() );

to copy the primary metadata domain from GDALDataset poSrcDS to GDALDataset
poDstDS.  You could also loop over the bands, and do something similar with
them.  You can then set individual metadata items with the SetMetadataItem()
method.

   poDstDS->SetMetadataItem( "TIFFTAG_DOCUMENTNAME", "My first english essay" );

Generic metadata is access via the metadata methods on the GDALMajorObject
from which both GDALDataset and GDALRasterBand are derived.

   http://www.gdal.org/classGDALMajorObject.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Roger.Bivand at nhh.no  Fri Dec  4 11:19:20 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Dec  4 11:20:26 2009
Subject: [gdal-dev] /usr/lib/libexpat.so found when /usr/lib64/libexpat.so
	needed
Message-ID: <alpine.LRH.2.00.0912041653350.2807@reclus.nhh.no>

Hi,

In trying to build GDAL 1.6.3 and 1.7.0 on an RHEL 5 64-bit box, I'm 
seeing that libtool in linking is inserting -L/usr/lib 
/usr/lib/libexpat.so and provoking:

/usr/lib/libexpat.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/home/rsb/topics/gdal/gdal'
make: *** [check-lib] Error 2

in the step after:

libtool: link: creating GNU ld script: .libs/libgdal.la.lnkscript

On the same box with the same:

./configure --with-netcdf=/usr/include/netcdf-3

1.6.2 now also fails, although it built when released.

I expect that the 32-bit /usr/lib/libexpat.so got installed to meet 
another binary install dependency (GEOS ? netcdf ? among others ??), and I 
cannot remove it without the other binaries going away. I've tried 
incantations with --with-expat= without effect. Has anyone seen similar 
behaviour and does anyone have a fix?

This hurts because this is my main development box, but I have to use a 
distant 32-bit RHEL 5 box with very similar binary installs instead for 
work now on the coming SAGA driver.

Best wishes,

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From warmerdam at pobox.com  Fri Dec  4 11:27:54 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec  4 11:27:44 2009
Subject: [gdal-dev] /usr/lib/libexpat.so found when
	/usr/lib64/libexpat.so needed
In-Reply-To: <alpine.LRH.2.00.0912041653350.2807@reclus.nhh.no>
References: <alpine.LRH.2.00.0912041653350.2807@reclus.nhh.no>
Message-ID: <4B19388A.5040107@pobox.com>

Roger Bivand wrote:
> Hi,
> 
> In trying to build GDAL 1.6.3 and 1.7.0 on an RHEL 5 64-bit box, I'm 
> seeing that libtool in linking is inserting -L/usr/lib 
> /usr/lib/libexpat.so and provoking:
> 
> /usr/lib/libexpat.so: could not read symbols: File in wrong format
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/home/rsb/topics/gdal/gdal'
> make: *** [check-lib] Error 2
> 
> in the step after:
> 
> libtool: link: creating GNU ld script: .libs/libgdal.la.lnkscript
> 
> On the same box with the same:
> 
> ./configure --with-netcdf=/usr/include/netcdf-3
> 
> 1.6.2 now also fails, although it built when released.
> 
> I expect that the 32-bit /usr/lib/libexpat.so got installed to meet 
> another binary install dependency (GEOS ? netcdf ? among others ??), and 
> I cannot remove it without the other binaries going away. I've tried 
> incantations with --with-expat= without effect. Has anyone seen similar 
> behaviour and does anyone have a fix?
> 
> This hurts because this is my main development box, but I have to use a 
> distant 32-bit RHEL 5 box with very similar binary installs instead for 
> work now on the coming SAGA driver.

Roger,

Does the /usr/lib/libexpat.so exist in the GDALmake.opt file?  If not then
libtool is likely picking it up as a dependency from something else's
.la file.  It might be worth configuring GDAL with the --without-libtool
switch and then, as needed, manually editing the GDALmake.opt file's link
paths and options to get things working.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Roger.Bivand at nhh.no  Fri Dec  4 12:16:36 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Dec  4 12:16:40 2009
Subject: [gdal-dev] /usr/lib/libexpat.so found when /usr/lib64/libexpat.so
	needed
In-Reply-To: <4B19388A.5040107@pobox.com>
References: <alpine.LRH.2.00.0912041653350.2807@reclus.nhh.no>
	<4B19388A.5040107@pobox.com>
Message-ID: <alpine.LRH.2.00.0912041806120.2807@reclus.nhh.no>

On Fri, 4 Dec 2009, Frank Warmerdam wrote:

> Roger Bivand wrote:
>> Hi,
>> 
>> In trying to build GDAL 1.6.3 and 1.7.0 on an RHEL 5 64-bit box, I'm seeing 
>> that libtool in linking is inserting -L/usr/lib /usr/lib/libexpat.so and 
>> provoking:
>> 
>> /usr/lib/libexpat.so: could not read symbols: File in wrong format
>> collect2: ld returned 1 exit status
>> make[1]: *** [libgdal.la] Error 1
>> make[1]: Leaving directory `/home/rsb/topics/gdal/gdal'
>> make: *** [check-lib] Error 2
>> 
>> in the step after:
>> 
>> libtool: link: creating GNU ld script: .libs/libgdal.la.lnkscript
>> 
>> On the same box with the same:
>> 
>> ./configure --with-netcdf=/usr/include/netcdf-3
>> 
>> 1.6.2 now also fails, although it built when released.
>> 
>> I expect that the 32-bit /usr/lib/libexpat.so got installed to meet another 
>> binary install dependency (GEOS ? netcdf ? among others ??), and I cannot 
>> remove it without the other binaries going away. I've tried incantations 
>> with --with-expat= without effect. Has anyone seen similar behaviour and 
>> does anyone have a fix?
>> 
>> This hurts because this is my main development box, but I have to use a 
>> distant 32-bit RHEL 5 box with very similar binary installs instead for 
>> work now on the coming SAGA driver.
>
> Roger,
>
> Does the /usr/lib/libexpat.so exist in the GDALmake.opt file?

No, the fragment reads: "-L/usr/local/lib -lgeos_c -I/usr/include 
-lsqlite3 -L/usr/lib -lexpat".

The --with-netcdf= leads to some library nonsense, but at least the 
headers are found.

> If not then libtool is likely picking it up as a dependency from 
> something else's .la file.  It might be worth configuring GDAL with the 
> --without-libtool switch and then, as needed, manually editing the 
> GDALmake.opt file's link paths and options to get things working.
>

./configure --without-libtool --with-netcdf=/usr/include/netcdf-3

gets through the build without intervention, with:

$ gdalinfo --version
GDAL 1.7.0dev, released 2008/11/26

for an updated svn trunk version. So I can get back to SAGA ...

Thanks!

Roger

> Best regards,
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From gregcoats at mac.com  Fri Dec  4 12:32:32 2009
From: gregcoats at mac.com (Greg Coats)
Date: Fri Dec  4 12:32:36 2009
Subject: [gdal-dev] /usr/lib/libexpat.so found when /usr/lib64/libexpat.so
	needed
In-Reply-To: <alpine.LRH.2.00.0912041806120.2807@reclus.nhh.no>
References: <alpine.LRH.2.00.0912041653350.2807@reclus.nhh.no>
	<4B19388A.5040107@pobox.com>
	<alpine.LRH.2.00.0912041806120.2807@reclus.nhh.no>
Message-ID: <9C4C1907-4CF0-4A6B-A3B5-A6FEC9942928@mac.com>

I think the year for GDAL 1.7.0 should be 2009, instead of 2008. Greg

On Dec 4, 2009, at 12:16 PM, Roger Bivand wrote:

> $ gdalinfo --version
> GDAL 1.7.0dev, released 2008/11/26

From szekerest at gmail.com  Fri Dec  4 16:26:36 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Dec  4 16:32:43 2009
Subject: [gdal-dev] Problem with readraster in C#
In-Reply-To: <004401ca70ca$1f936ae0$5eba40a0$@net>
References: <004401ca70ca$1f936ae0$5eba40a0$@net>
Message-ID: <f3b73b7d0912041326g499a5600r402c7bcbc738a44e@mail.gmail.com>

Patrik,

The code you mentioned did't appear to do correct mashaling with the buffer
passed to gdal.
You might want to use the following readraster signature instead:

public OSGeo.GDAL.CPLErr ReadRaster(int xOff, int yOff, int xSize, int
ySize, short[] buffer, int buf_xSize, int buf_ySize, int pixelSpace, int
lineSpace)

which would implicitly do something like:


      GCHandle handle = GCHandle.Alloc(buffer, GCHandleType.Pinned);
      try {
          retval = ReadRaster(xOff, yOff, xSize, ySize,
handle.AddrOfPinnedObject(), buf_xSize, buf_ySize, DataType.GDT_Int16,
pixelSpace, lineSpace);
      } finally {
          handle.Free();
      }
      GC.KeepAlive(this);



Best regards,

Tamas



2009/11/29 patsv <patsv@bredband.net>

>  Hi,  I am trying to read GDEM data from the ASTER dataset.
>
> But all I get is a buffer with zeroes, is there something wrong with my
> code or is it something with the readraster function.
>
>
>
> Part of my code:
>
>        Band band = ds.GetRasterBand(1);
>
>        short[] DEM = new short[band.XSize * band.YSize];
>
>
>
>        CPLErr Ret = band.ReadRaster(0, 0, band.XSize,band.YSize, DEM,
> band.XSize, band.YSize, 2, band.XSize * 2);
>
>        if (Ret != CPLErr.CE_None)
>
>        {
>
>                 throw new Exception("Read error " + Ret.ToString());
>
>        }
>
>
>
> As mentioned above all I get is a buffer filled with Zeroes.
>
>
>
> Thanks for a good library.
>
>
>
> Regards
>
> Patrik Svensson
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091204/9542f51f/attachment.html
From cudars at yeah.net  Sat Dec  5 01:16:31 2009
From: cudars at yeah.net (cudars)
Date: Sat Dec  5 01:16:34 2009
Subject: [Gdal-dev] how to write out a tiff file using GDAL?
In-Reply-To: <4B1931F8.7020103@pobox.com>
References: <1259936187119-4112637.post@n2.nabble.com>
	<20091204143317.18974.qmail@s466.sureserver.com>
	<1259938169293-4112847.post@n2.nabble.com>
	<4B1931F8.7020103@pobox.com>
Message-ID: <1259993791996-4116617.post@n2.nabble.com>




Frank Warmerdam wrote:
> 
> cudars wrote:
>> I have read GDAL API Tutorial.
>> The Tutorial wrote "Once the dataset is successfully created, all
>> appropriate metadata and raster data must be written to the file. What
>> this
>> is will vary according to usage, but a simple case with a projection,
>> geotransform and raster data is covered here."
>> 
>> If I want to write more metadata other than projection, geotransform etc,
>> What should I do?
>> I want to keep the original tiff file metadata and add my metadata to the
>> new create tiff.
> 
> Cudars,
> 
> In C++ you could do:
> 
>    poDstDS->SetMetadata( poSrcDS->GetMetadata() );
> 
> to copy the primary metadata domain from GDALDataset poSrcDS to
> GDALDataset
> poDstDS.  You could also loop over the bands, and do something similar
> with
> them.  You can then set individual metadata items with the
> SetMetadataItem()
> method.
> 
>    poDstDS->SetMetadataItem( "TIFFTAG_DOCUMENTNAME", "My first english
> essay" );
> 
> Generic metadata is access via the metadata methods on the GDALMajorObject
> from which both GDALDataset and GDALRasterBand are derived.
> 
>    http://www.gdal.org/classGDALMajorObject.html
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

Thanks. Frank. You are always so kind.

-- 
View this message in context: http://n2.nabble.com/how-to-write-out-a-tiff-file-using-GDAL-tp4112637p4116617.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From cudars at yeah.net  Sat Dec  5 01:49:07 2009
From: cudars at yeah.net (cudars)
Date: Sat Dec  5 01:49:09 2009
Subject: [Gdal-dev] import gdal error in python
Message-ID: <1259995747369-4116658.post@n2.nabble.com>


python 3.1.1
gdal 1.6.2
There are no errors during I built the gdal and python. The installtion is
ok.
But when I type import gdal in python, I got the error as follow:
>>> import gdal

Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "D:\Python31\lib\site-packages\gdal.py", line 295
    raise ValueError, GetLastErrorMsg()
                    ^
SyntaxError: invalid syntax

I do not what is wrong with this.

help.
-- 
View this message in context: http://n2.nabble.com/import-gdal-error-in-python-tp4116658p4116658.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Sat Dec  5 05:00:44 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec  5 05:00:53 2009
Subject: [Gdal-dev] import gdal error in python
In-Reply-To: <1259995747369-4116658.post@n2.nabble.com>
References: <1259995747369-4116658.post@n2.nabble.com>
Message-ID: <4B1A2F4C.7040903@mines-paris.org>

GDAL Python bindings are not compatible with Python 3. I'm even 
surprised you managed to build them because the setup.py script doesn't 
work with Python 3.

You need a Python 2.X version to make them work.

cudars a ?crit :
> python 3.1.1
> gdal 1.6.2
> There are no errors during I built the gdal and python. The installtion is
> ok.
> But when I type import gdal in python, I got the error as follow:
>   
>>>> import gdal
>>>>         
>
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
>   File "D:\Python31\lib\site-packages\gdal.py", line 295
>     raise ValueError, GetLastErrorMsg()
>                     ^
> SyntaxError: invalid syntax
>
> I do not what is wrong with this.
>
> help.
>   


From warmerdam at pobox.com  Sat Dec  5 13:26:25 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec  5 13:26:10 2009
Subject: [gdal-dev] OGR DXF Driver, /me blogs
Message-ID: <4B1AA5D1.5050309@pobox.com>

Folks,

There is no trend to trendy for me to jump on ten years late.  So, I've
started a blog at:

   http://fwarmerdam.blogspot.org

It will be available on Planet OSGeo which I recommend highly at:

   http://planet.osgeo.org/

My first post is related to the new DXF driver I'm working on for GDAL/OGR 1.7.
I've included fdo-users in this post, not only because I'm vain and self
promotional, but because I thought there might be interested in DXF support
in the FDO world.

Discussion on particular approaches in the DXF driver would likely be best
handled on gdal-dev.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From no-reply at neogeo-online.net  Sat Dec  5 14:49:23 2009
From: no-reply at neogeo-online.net (Guillaume Sueur)
Date: Sat Dec  5 14:49:32 2009
Subject: [gdal-dev] OGR DXF Driver, /me blogs
In-Reply-To: <4B1AA5D1.5050309@pobox.com>
References: <4B1AA5D1.5050309@pobox.com>
Message-ID: <1260042563.22335.3.camel@guillaume-desktop>

Frank,

Happy to read you online. Please note that the url you sent is wrong.
The correct one is http://fwarmerdam.blogspot.com as mentionned on
Planet. These new technologies aren't easy to master properly. Keep
going. Hope you see you on twitter in a couple of years :-)

Best regards,

Guillaume 

Le samedi 05 d?cembre 2009 ? 13:26 -0500, Frank Warmerdam a ?crit :
> Folks,
> 
> There is no trend to trendy for me to jump on ten years late.  So, I've
> started a blog at:
> 
>    http://fwarmerdam.blogspot.org
> 
> It will be available on Planet OSGeo which I recommend highly at:
> 
>    http://planet.osgeo.org/
> 
> My first post is related to the new DXF driver I'm working on for GDAL/OGR 1.7.
> I've included fdo-users in this post, not only because I'm vain and self
> promotional, but because I thought there might be interested in DXF support
> in the FDO world.
> 
> Discussion on particular approaches in the DXF driver would likely be best
> handled on gdal-dev.
> 
> Best regards,


From bruce.h.liang at gmail.com  Sat Dec  5 15:26:09 2009
From: bruce.h.liang at gmail.com (Bruce Liang)
Date: Sat Dec  5 15:31:34 2009
Subject: [gdal-dev] no date value by gdal_merge from DEM to GTiff ?
Message-ID: <436cc6810912051226g2d0fd10ao5c8ecc0a9a47fe5c@mail.gmail.com>

Hello, guys,

I have several DEMs from USGS GTOPO30, and by merging them with
gdal_merge.py, it seems the no data value can not be assigned?

the command is like:
gdal_merge.py  -of GTiff  -o Europe.tiff -n -9999 -co "PROFILE=GeoTIFF"  -co
"INTERLEAVE=PIXEL"  -co "COMPRESS=NONE"  -co "TILED=YES"   *.DEM

and to check it with "gdalinfo -stats Europe.tiff ",  i got:

Band 1 Block=256x256 Type=UInt16, ColorInterp=Gray
  Minimum=1.000, Maximum=65535.000, Mean=30979.953, StdDev=27318.154
  Metadata:
    STATISTICS_MINIMUM=1
    STATISTICS_MAXIMUM=65535
    STATISTICS_MEAN=30979.952856589
    STATISTICS_STDDEV=27318.154016739

seems the no data value is now 65535 ? how to assign it correctly?
Thank you!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091205/f36c6dfc/attachment.html
From j.l.h.hartmann at uva.nl  Sat Dec  5 15:34:02 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Dec  5 15:56:41 2009
Subject: [gdal-dev] OGR DXF Driver, /me blogs
In-Reply-To: <4B1AA5D1.5050309@pobox.com>
References: <4B1AA5D1.5050309@pobox.com>
Message-ID: <4B1AC3BA.6090505@uva.nl>


<Quoting from the new blog>
"If only one in ten cities in the world made serious use of free gis 
software and provided enough financial support for one core developer it 
would have a huge boosting effect".
</Quoting from the new blog>

Frank, do you realise in your Canadian basement how many cities there 
are in the world? What are you trying to become? A multi-billionaire? 

http://en.wikipedia.org/wiki/Billionaire

Jan

Frank Warmerdam wrote:
> Folks,
>
> There is no trend to trendy for me to jump on ten years late.  So, I've
> started a blog at:
>
>   http://fwarmerdam.blogspot.org
>
> It will be available on Planet OSGeo which I recommend highly at:
>
>   http://planet.osgeo.org/
>
> My first post is related to the new DXF driver I'm working on for 
> GDAL/OGR 1.7.
> I've included fdo-users in this post, not only because I'm vain and self
> promotional, but because I thought there might be interested in DXF 
> support
> in the FDO world.
>
> Discussion on particular approaches in the DXF driver would likely be 
> best
> handled on gdal-dev.
>
> Best regards,
From cudars at yeah.net  Sun Dec  6 02:12:20 2009
From: cudars at yeah.net (cudars)
Date: Sun Dec  6 02:12:27 2009
Subject: [Gdal-dev] import gdal error in python
In-Reply-To: <4B1A2F4C.7040903@mines-paris.org>
References: <1259995747369-4116658.post@n2.nabble.com>
	<4B1A2F4C.7040903@mines-paris.org>
Message-ID: <1260083540522-4120579.post@n2.nabble.com>




Even Rouault wrote:
> 
> GDAL Python bindings are not compatible with Python 3. I'm even 
> surprised you managed to build them because the setup.py script doesn't 
> work with Python 3.
> 
> You need a Python 2.X version to make them work.
> 
> cudars a ?crit :
>> python 3.1.1
>> gdal 1.6.2
>> There are no errors during I built the gdal and python. The installtion
>> is
>> ok.
>> But when I type import gdal in python, I got the error as follow:
>>   
>>>>> import gdal
>>>>>         
>>
>> Traceback (most recent call last):
>>   File "<stdin>", line 1, in <module>
>>   File "D:\Python31\lib\site-packages\gdal.py", line 295
>>     raise ValueError, GetLastErrorMsg()
>>                     ^
>> SyntaxError: invalid syntax
>>
>> I do not what is wrong with this.
>>
>> help.
>>   
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

Thanks a lot. Even

-- 
View this message in context: http://n2.nabble.com/import-gdal-error-in-python-tp4116658p4120579.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From peifer at gmx.eu  Sun Dec  6 05:13:18 2009
From: peifer at gmx.eu (Hermann Peifer)
Date: Sun Dec  6 05:13:23 2009
Subject: [gdal-dev] Re: no date value by gdal_merge from DEM to GTiff ?
In-Reply-To: <436cc6810912051226g2d0fd10ao5c8ecc0a9a47fe5c@mail.gmail.com>
References: <436cc6810912051226g2d0fd10ao5c8ecc0a9a47fe5c@mail.gmail.com>
Message-ID: <4B1B83BE.1010703@gmx.eu>

Bruce Liang wrote:
> Hello, guys,
> 
> I have several DEMs from USGS GTOPO30, and by merging them with
> gdal_merge.py, it seems the no data value can not be assigned?
> 
> the command is like:
> gdal_merge.py  -of GTiff  -o Europe.tiff -n -9999 -co "PROFILE=GeoTIFF"  -co
> "INTERLEAVE=PIXEL"  -co "COMPRESS=NONE"  -co "TILED=YES"   *.DEM
> 
> and to check it with "gdalinfo -stats Europe.tiff ",  i got:
> 
> Band 1 Block=256x256 Type=UInt16, ColorInterp=Gray
>   Minimum=1.000, Maximum=65535.000, Mean=30979.953, StdDev=27318.154
>   Metadata:
>     STATISTICS_MINIMUM=1
>     STATISTICS_MAXIMUM=65535
>     STATISTICS_MEAN=30979.952856589
>     STATISTICS_STDDEV=27318.154016739
> 
> seems the no data value is now 65535 ? how to assign it correctly?

No. It seems that your highest *data* value is now 65535 and there isn't any *no data* value defined. According to your GeoTIFF statistics, the average elevation in Europe is around 31000 meters above sea level. Which seems to be a bit too high, as far as I can judge. You might have also noted, that your GeoTIFF type is UInt16, which doesn't allow for negative values. Elevation data can however be negative: a good part of the Netherlands is below sea level, not to talk about the Dead Sea (-422m or so).

Here is what I did the other day in order to merge GTOPO30 data:
gdalwarp -srcnodata -9999 -dstnodata -9999 -co TILED=YES *.DEM outfile.tif

In my case, the resulting GeoTIFF type was Int16 (same type as the *.DEMs), and the statistics are:

  Minimum=-405.000, Maximum=5417.000, Mean=359.426, StdDev=456.872
  NoData Value=-9999
  Metadata:
    STATISTICS_MINIMUM=-405
    STATISTICS_MAXIMUM=5417
    STATISTICS_MEAN=359.42640750109
    STATISTICS_STDDEV=456.87166274078

gdal_merge.py is an example Python script and I am not quite sure what its advantage is over gdalwarp. FrankW could perhaps shed some light on this issue.

Hermann
From szekerest at gmail.com  Sun Dec  6 05:36:02 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Dec  6 05:36:04 2009
Subject: [gdal-dev] RFC 26: GDAL Block Cache Improvements
Message-ID: <f3b73b7d0912060236m47902e35l7ce0cf8ac0861579@mail.gmail.com>

Devs,

I'm quite involved in fixing the problems have already been raised in
http://n2.nabble.com/Problems-with-large-raster-sizes-WMS-TMS-td3996139.html

Those issues are mostly related to the following issues:

1. The current GDAL block cache implementation may result in out of memory
errors with large raster dimensions.
2. The raster size is stored in a signed int in GDAL which may overflow when
the size of the raster is large.


These issues will less likely happen with most drivers storing the raster in
the same physical file. However this may be a problem with those drivers
which compose the rasters from multiple tiles which eventually results in
rasters with large virtual dimensions.

I'm about to handle issue #1 by introducing RFC26 which would establish a
hastable based caching solution in parallel to the current array based block
cache implementation.
As this change would affect the gdal core it seems reasonable to come up
with a new RFC here and open up a discussion about that:

http://trac.osgeo.org/gdal/wiki/rfc26_blockcache

You could also review the corresponding patch which implements this
solution:

http://trac.osgeo.org/gdal/attachment/ticket/3264/blockcache.patch#preview

Any comments or ideas would be helpful.

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091206/3647dc1e/attachment.html
From bruce.h.liang at gmail.com  Sun Dec  6 06:53:54 2009
From: bruce.h.liang at gmail.com (Bruce Liang)
Date: Sun Dec  6 06:53:58 2009
Subject: [gdal-dev] Re: no date value by gdal_merge from DEM to GTiff ?
In-Reply-To: <4B1B83BE.1010703@gmx.eu>
References: <436cc6810912051226g2d0fd10ao5c8ecc0a9a47fe5c@mail.gmail.com>
	<4B1B83BE.1010703@gmx.eu>
Message-ID: <436cc6810912060353p2d09e77yd1356b66a4d38c53@mail.gmail.com>

Thank you Herrmann,
yes, the problem is about the data type.  looks like your GTOPO30 data is a
little different from mine. If I run your command, the result tiff will
still be UInt16, and the largest data value is 65535, with NoDate=-9999.

the info of the original DEM (e.g. E020N40.DEM) is :
Band 1 Block=4800x1 Type=UInt16, ColorInterp=Undefined
  Min=-9999.000 Max=5825.000
  Minimum=-9999.000, Maximum=5825.000, Mean=-2347.600, StdDev=4873.500
  NoData Value=-9999

it's strange that even type is UInt16, there are still negative values. So
either with gdalwarp or gdal_merge.py, the result Tiff will still be UInt16.
Problem has been solved, by explicitly adding "PIXELTYPE SIGNEDINT" in the
.HDR files, and the result is now correct.



On Sun, Dec 6, 2009 at 11:13 AM, Hermann Peifer <peifer@gmx.eu> wrote:

> Bruce Liang wrote:
>
>> Hello, guys,
>>
>> I have several DEMs from USGS GTOPO30, and by merging them with
>> gdal_merge.py, it seems the no data value can not be assigned?
>>
>> the command is like:
>> gdal_merge.py  -of GTiff  -o Europe.tiff -n -9999 -co "PROFILE=GeoTIFF"
>>  -co
>> "INTERLEAVE=PIXEL"  -co "COMPRESS=NONE"  -co "TILED=YES"   *.DEM
>>
>> and to check it with "gdalinfo -stats Europe.tiff ",  i got:
>>
>> Band 1 Block=256x256 Type=UInt16, ColorInterp=Gray
>>  Minimum=1.000, Maximum=65535.000, Mean=30979.953, StdDev=27318.154
>>  Metadata:
>>    STATISTICS_MINIMUM=1
>>    STATISTICS_MAXIMUM=65535
>>    STATISTICS_MEAN=30979.952856589
>>    STATISTICS_STDDEV=27318.154016739
>>
>> seems the no data value is now 65535 ? how to assign it correctly?
>>
>
> No. It seems that your highest *data* value is now 65535 and there isn't
> any *no data* value defined. According to your GeoTIFF statistics, the
> average elevation in Europe is around 31000 meters above sea level. Which
> seems to be a bit too high, as far as I can judge. You might have also
> noted, that your GeoTIFF type is UInt16, which doesn't allow for negative
> values. Elevation data can however be negative: a good part of the
> Netherlands is below sea level, not to talk about the Dead Sea (-422m or
> so).
>
> Here is what I did the other day in order to merge GTOPO30 data:
> gdalwarp -srcnodata -9999 -dstnodata -9999 -co TILED=YES *.DEM outfile.tif
>
> In my case, the resulting GeoTIFF type was Int16 (same type as the *.DEMs),
> and the statistics are:
>
>  Minimum=-405.000, Maximum=5417.000, Mean=359.426, StdDev=456.872
>  NoData Value=-9999
>  Metadata:
>   STATISTICS_MINIMUM=-405
>   STATISTICS_MAXIMUM=5417
>   STATISTICS_MEAN=359.42640750109
>   STATISTICS_STDDEV=456.87166274078
>
> gdal_merge.py is an example Python script and I am not quite sure what its
> advantage is over gdalwarp. FrankW could perhaps shed some light on this
> issue.
>
> Hermann
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091206/ac46c209/attachment-0001.html
From warmerdam at pobox.com  Sun Dec  6 11:40:04 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Dec  6 11:39:40 2009
Subject: [gdal-dev] SWIG Version
Message-ID: <4B1BDE64.2060202@pobox.com>

Folks - particularly swig bindings maintainers,

I have regenerated the swig bindings for python with swig 1.3.39 on
www.gdal.org and committed them.  I used that version to be compatible
with what Even used last time.  However, the scripts that building
the perl and csharp bindings for the nightly snapshots are still using
SWIG 1.3.36.

Before GDAL 1.7 release, I'd like us to settle on a preferred version of
SWIG and I will update this to be the one used for the nightly snapshots
and that we would use at other times for building source distributions.

Is SWIG 1.3.39 acceptable for all bindings maintainers?

PS. SWIG 1.3.39 is built and installed in ~warmerdam/gdal-swig on
www.gdal.org (aka xblade14).   SWIG 1.3.36 is in /usr/local/bin.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hobu.inc at gmail.com  Sun Dec  6 11:42:46 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Sun Dec  6 11:46:28 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <4B1BDE64.2060202@pobox.com>
References: <4B1BDE64.2060202@pobox.com>
Message-ID: <C061901D-D710-425D-A1FC-7A2EBF3C6FED@gmail.com>

On Dec 6, 2009, at 10:40 AM, Frank Warmerdam wrote:
> 
> Is SWIG 1.3.39 acceptable for all bindings maintainers?

1.3.39 as our default moving forward would be fine for the Python bindings.  IIRC, 1.3.40 isn't a good release (for some reason, swig releases are like wine vintages).

Howard
From szekerest at gmail.com  Sun Dec  6 11:59:07 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sun Dec  6 11:59:09 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <4B1BDE64.2060202@pobox.com>
References: <4B1BDE64.2060202@pobox.com>
Message-ID: <f3b73b7d0912060859g7f2426d5vf71dbdc59e1edc8c@mail.gmail.com>

1.3.39 should be fine with the c# bindings as well.
I'm using this version for my regular builds since 2009 05.

Best regards,

Tamas



2009/12/6 Frank Warmerdam <warmerdam@pobox.com>

> Folks - particularly swig bindings maintainers,
>
> I have regenerated the swig bindings for python with swig 1.3.39 on
> www.gdal.org and committed them.  I used that version to be compatible
> with what Even used last time.  However, the scripts that building
> the perl and csharp bindings for the nightly snapshots are still using
> SWIG 1.3.36.
>
> Before GDAL 1.7 release, I'd like us to settle on a preferred version of
> SWIG and I will update this to be the one used for the nightly snapshots
> and that we would use at other times for building source distributions.
>
> Is SWIG 1.3.39 acceptable for all bindings maintainers?
>
> PS. SWIG 1.3.39 is built and installed in ~warmerdam/gdal-swig on
> www.gdal.org (aka xblade14).   SWIG 1.3.36 is in /usr/local/bin.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091206/0316bc7b/attachment.html
From warmerdam at pobox.com  Sun Dec  6 12:46:14 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Dec  6 12:45:57 2009
Subject: [gdal-dev] RFC 26: GDAL Block Cache Improvements
In-Reply-To: <f3b73b7d0912060236m47902e35l7ce0cf8ac0861579@mail.gmail.com>
References: <f3b73b7d0912060236m47902e35l7ce0cf8ac0861579@mail.gmail.com>
Message-ID: <4B1BEDE6.4070802@pobox.com>

Tamas Szekeres wrote:
> I'm about to handle issue #1 by introducing RFC26 which would establish 
> a hastable based caching solution in parallel to the current array based 
> block cache implementation.
> As this change would affect the gdal core it seems reasonable to come up 
> with a new RFC here and open up a discussion about that:
> 
> http://trac.osgeo.org/gdal/wiki/rfc26_blockcache

Tamas,

In the interest of simplicity, I would like the hashing mechanism to
replace the existing subblocking mechanism which was intended to be used
when there were too many blocks to store a direct array of pointers.   Hmm,
looking through the patch, it appears at least some of the subblocking
support has been removed which is good, but parts are left behind (like
the SUBBLOCK, TO_SUBBLOCK() macros, and some stuff in GDALRasterBand.

I'm not sure I grasp the mutex issues completely, and I'm not positive
it was a good idea incorporating them into the rfc but it would be good
to address them and the approach seems generally reasonable.

Any thoughts on possible performance (memory and cpu) impact?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Sun Dec  6 13:21:53 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec  6 13:21:58 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <4B1BDE64.2060202@pobox.com>
References: <4B1BDE64.2060202@pobox.com>
Message-ID: <4B1BF641.7020007@mines-paris.org>

I've been using SWIG 1.3.39 for Java bindings for a few months now, and 
it's working fine.

Frank Warmerdam a ?crit :
> Folks - particularly swig bindings maintainers,
>
> I have regenerated the swig bindings for python with swig 1.3.39 on
> www.gdal.org and committed them.  I used that version to be compatible
> with what Even used last time.  However, the scripts that building
> the perl and csharp bindings for the nightly snapshots are still using
> SWIG 1.3.36.
>
> Before GDAL 1.7 release, I'd like us to settle on a preferred version of
> SWIG and I will update this to be the one used for the nightly snapshots
> and that we would use at other times for building source distributions.
>
> Is SWIG 1.3.39 acceptable for all bindings maintainers?
>
> PS. SWIG 1.3.39 is built and installed in ~warmerdam/gdal-swig on
> www.gdal.org (aka xblade14).   SWIG 1.3.36 is in /usr/local/bin.
>
> Best regards,


From even.rouault at mines-paris.org  Sun Dec  6 15:43:31 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec  6 15:43:33 2009
Subject: [gdal-dev] Python 3.X support added for GDAL Python bindings
Message-ID: <4B1C1773.8030408@mines-paris.org>

Folks,

I've just added support for Python 3.X in trunk ( 
http://trac.osgeo.org/gdal/ticket/3265 ). Compatibility with Python 2.X 
has been kept of course.

The bindings are successfully regenerated and autotest suite passes with 
both Python 2.3, Python 2.6 and Python 3.1 (except a few OGR tests that 
involve non ASCII content that don't pass with Python 3.1)

As this is a pretty massive change (159 files changed), broad testing 
would be appreciated to ensure that at least no regression was 
introduced when run against Python 2.X

Best regards,

Even


From ivan.lucena at pmldnet.com  Sun Dec  6 18:35:56 2009
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Sun Dec  6 18:35:59 2009
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUHl0aG9uIDMuWCBzdXBwb3J0IGFkZGVkIGZvciBHREFMIFB5dGhvbiBiaW5kaW5ncw==?=
Message-ID: <20091206233556.20241.qmail@s466.sureserver.com>

Hi Even,

Is the Python 3.0 still compiled with VC71? I am asking that because I tried to build a GDAL-Python with VC9 (VS 
2008 Express Edition) and it usually doesn't work since Python 2.5 was compiled with VC71 (VS 2003).

Regards,

Ivan


>  -------Original Message-------
>  From: Even Rouault <even.rouault@mines-paris.org>
>  Subject: [gdal-dev] Python 3.X support added for GDAL Python bindings
>  Sent: Dec 06 '09 15:43
>  
>  Folks,
>  
>  I've just added support for Python 3.X in trunk (
>  http://trac.osgeo.org/gdal/ticket/3265 ). Compatibility with Python 2.X
>  has been kept of course.
>  
>  The bindings are successfully regenerated and autotest suite passes with
>  both Python 2.3, Python 2.6 and Python 3.1 (except a few OGR tests that
>  involve non ASCII content that don't pass with Python 3.1)
>  
>  As this is a pretty massive change (159 files changed), broad testing
>  would be appreciated to ensure that at least no regression was
>  introduced when run against Python 2.X
>  
>  Best regards,
>  
>  Even
>  
>  
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From even.rouault at mines-paris.org  Sun Dec  6 18:44:22 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec  6 18:44:25 2009
Subject: [gdal-dev] Python 3.X support added for GDAL Python bindings
In-Reply-To: <20091206233556.20241.qmail@s466.sureserver.com>
References: <20091206233556.20241.qmail@s466.sureserver.com>
Message-ID: <4B1C41D6.3070107@mines-paris.org>

Ivan Lucena a ?crit :

To tell the truth, I've tested Python 3.1 and managed to compile the 
bindings with an antique VC6.0 (by doing a few horrible hacks in 
Python31\Lib\distutils\msvc9compiler.py)

I see that the Python 2.6 distribution has also a 
Lib\distutils\msvc9compiler.py file, so I guess it means you can use VC9 
with Python 2.6 and later.
> Hi Even,
>
> Is the Python 3.0 still compiled with VC71? I am asking that because I tried to build a GDAL-Python with VC9 (VS 
> 2008 Express Edition) and it usually doesn't work since Python 2.5 was compiled with VC71 (VS 2003).
>
> Regards,
>
> Ivan
>
>
>   
>>  -------Original Message-------
>>  From: Even Rouault <even.rouault@mines-paris.org>
>>  Subject: [gdal-dev] Python 3.X support added for GDAL Python bindings
>>  Sent: Dec 06 '09 15:43
>>  
>>  Folks,
>>  
>>  I've just added support for Python 3.X in trunk (
>>  http://trac.osgeo.org/gdal/ticket/3265 ). Compatibility with Python 2.X
>>  has been kept of course.
>>  
>>  The bindings are successfully regenerated and autotest suite passes with
>>  both Python 2.3, Python 2.6 and Python 3.1 (except a few OGR tests that
>>  involve non ASCII content that don't pass with Python 3.1)
>>  
>>  As this is a pretty massive change (159 files changed), broad testing
>>  would be appreciated to ensure that at least no regression was
>>  introduced when run against Python 2.X
>>  
>>  Best regards,
>>  
>>  Even
>>  
>>  
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>>     
>
>
>
>   


From Jukka.Rahkonen at mmmtike.fi  Mon Dec  7 05:06:52 2009
From: Jukka.Rahkonen at mmmtike.fi (Rahkonen Jukka)
Date: Mon Dec  7 05:12:14 2009
Subject: [gdal-dev] Re: CUDA PyCUDA and GDAL
Message-ID: <CC197224AC75CE4DB23F739B16891B86018797FC@tikka.haapa.mmm.fi>

>  <Doug_Newcomb <at> fws.gov> writes:
> 
> Hi Folks,Here's the gdal command (gdal 1.6.2) I used to merge ~3500 1
meter NAIP
> quarter quads (uncompressed geotiff TIFF) in 3 UTM projections into
one Bigtiff Image
> in the USGS Albers projection.  It took about 15 hours ( on a 3 year
old Intel Core2
> Duo 64 bit Centos 5.3 Linux box with 6GB RAM) and created an
uncompressed, tiled,
> bigtiff file of 485 GB. About 32 GB/hr.
> gdalwarp -t_srs "+proj=aea +lat_1=29.5+lat_2=45.5 +lat_0=23.0
+lon_0=-96 
> +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m no_defs <>"
> -wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500" -wm=5000
> -co "TILED=YES" */*.tif /biggis/albers/nc_naip2008.tif
> 
> In the above command, -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5
+lat_0=23.0 
> +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m no_defs
<>"
> indicates the target projection, -wo "SKIP_NOSOURCE" don't write
> in areas for which there is no data for the current file, 
> --config "GDAL_CACHEMAX=500" set the cache memory at 500MB ( set this
close 
> to the maximum input file size), -wm=5000 set the warp memory to
5000MB ,
> -co "TILED=YES" create a tiled tiff as output, */*.tif, use all of the
tiffs 
> in all of the subdirectories as input files ( in this case there was
one 
> directory for each of the 3 utm zones) ,
/biggis/albers/nc_naip2008.tif,
> the output file name and location. 
> 

Hi Doug,

I finally tried your parameters and they did work fine for me also.  I
had something like  hundred geotiffs, 400 MB each, and I was pushing
them to bigtiff mosaic. I tried first with your *.tif selection and then
again by using a virtual raster file as source, created from Mapserver
tileindex shapefile with gdalbuildvrt. My Windows computer was handling
about 20 GB/hour with cubic resampling (-rc) this time.  Parameters 
-wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500" -wm=5000
seem to have a big influence on efficiency.  I wonder if there are some
rules of thumb for selecting values of GDAL_CACHEMAX and -wm.  You said
cachemax is good to be close to the maximum input file size, how about
-wm?

-Jukka Rahkonen-
From jason.roberts at duke.edu  Mon Dec  7 09:48:03 2009
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Dec  7 09:48:10 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <C061901D-D710-425D-A1FC-7A2EBF3C6FED@gmail.com>
References: <4B1BDE64.2060202@pobox.com>
	<C061901D-D710-425D-A1FC-7A2EBF3C6FED@gmail.com>
Message-ID: <011e01ca774c$4865c750$d93155f0$@roberts@duke.edu>

FWIW, the Python bindings generated by the old version of SWIG you were
using has a compatibility problem with ArcGIS 9.3.x; the problem is fixed by
1.3.9 (possibly one of the builds in between, but I don't know which).

A new feature of ArcGIS 9.3.x is to allow Python-based geoprocessing tools
to run in the ArcGIS process itself. Previously, ArcGIS created a python.exe
process to run them; now, it creates a Python sub-interpreter in its own
process (ArcMap.exe or ArcCatalog.exe). The Python extension modules
generated by the old version of SWIG had some Python type comparison code
that did not work properly in this scenario. It worked fine for the first
sub-interpreter that ArcGIS instantiated. But in the second and subsequent
ones, the type comparison code failed; it tried to compare types of
PyObjects allocated in the new sub-interpreter to types allocated in the old
one. These types were maintained as C module statics, or something like
that. As a result, many OGR functions would fail in the second and
subsequent sub-interpreters, making OGR unfit for use in Python-based ArcGIS
geoprocessing tools.

Sorry for the long story there. In sum, as a user who wants to use GDAL and
OGR from Python code invoked by ArcGIS, I am very happy you are moving to
SWIG 1.3.39.

Best regards,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Howard Butler
Sent: Sunday, December 06, 2009 11:43 AM
To: Frank Warmerdam
Cc: gdal-dev
Subject: Re: [gdal-dev] SWIG Version

On Dec 6, 2009, at 10:40 AM, Frank Warmerdam wrote:
> 
> Is SWIG 1.3.39 acceptable for all bindings maintainers?

1.3.39 as our default moving forward would be fine for the Python bindings.
IIRC, 1.3.40 isn't a good release (for some reason, swig releases are like
wine vintages).

Howard_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From Doug_Newcomb at fws.gov  Mon Dec  7 10:31:59 2009
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Mon Dec  7 10:40:58 2009
Subject: [gdal-dev] Re: CUDA PyCUDA and GDAL
In-Reply-To: <CC197224AC75CE4DB23F739B16891B86018797FC@tikka.haapa.mmm.fi>
Message-ID: <OF2E63F93A.26070722-ON85257685.00544861-85257685.0055535B@fws.gov>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: graycol.gif
Type: image/gif
Size: 105 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091207/6221f31e/graycol-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pic28464.gif
Type: image/gif
Size: 1255 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091207/6221f31e/pic28464-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ecblank.gif
Type: image/gif
Size: 45 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091207/6221f31e/ecblank-0001.gif
From warmerdam at pobox.com  Mon Dec  7 13:24:57 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  7 13:25:17 2009
Subject: [gdal-dev] Re: CUDA PyCUDA and GDAL
In-Reply-To: <OF2E63F93A.26070722-ON85257685.00544861-85257685.0055535B@fws.gov>
References: <OF2E63F93A.26070722-ON85257685.00544861-85257685.0055535B@fws.gov>
Message-ID: <4B1D4879.6070707@pobox.com>

Doug_Newcomb@fws.gov wrote:
> 
>  >Hi Doug,
> 
>  >I finally tried your parameters and they did work fine for me also.  I
>  >had something like  hundred geotiffs, 400 MB each, and I was pushing
>  >them to bigtiff mosaic. I tried first with your *.tif selection and then
>  >again by using a virtual raster file as source, created from Mapserver
>  >tileindex shapefile with gdalbuildvrt. My Windows computer was handling
>  >about 20 GB/hour with cubic resampling (-rc) this time.  Parameters
> ?-wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500" -wm=5000
>  >seem to have a big influence on efficiency.  I wonder if there are some
>  >rules of thumb for selecting values of GDAL_CACHEMAX and -wm.  You said
>  >cachemax is good to be close to the maximum input file size, how about
>  >-wm?
> 
>  >-Jukka Rahkonen-
> 
> Jukka,
> I remember seeing someone mention on the mailing list ( Can't recall who 
> at the moment) that setting GDAL_CACHEMAX close to the maximum size of 
> the input files gave the best performance.  I did try bumping 
> GDAL_CACHEMAX up to 2000 to see what would happen ( while dropping -wm 
> down to 3000, only 6GB of RAM on that computer) , but none of the input 
> files I was processing were larger than 500MB and I saw no increase in 
> performance.  For the -wm parameter, I just gave it the rest of the RAM 
> available on the computer, and I did not benchmark while varying that 
> number.
> 
> Doug
>  
> 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the 
> official policy of the U.S.Fish and Wildlife Service or Dept. of the 
> Interior. Life is too short for undocumented, proprietary data formats.
> Inactive hide details for "Rahkonen Jukka" 
> <Jukka.Rahkonen@mmmtike.fi>"Rahkonen Jukka" <Jukka.Rahkonen@mmmtike.fi>
> 
> 
>                         *"Rahkonen Jukka" <Jukka.Rahkonen@mmmtike.fi>*
> 
>                         12/07/2009 05:06 AM
> 
> 	
> 
> To
> 	
> <gdal-dev@lists.osgeo.org>, <Doug_Newcomb@fws.gov>
> 
> cc
> 	
> 
> Subject
> 	
> Re: CUDA PyCUDA and GDAL
> 
> 	
> 
> 
>  >  <Doug_Newcomb <at> fws.gov> writes:
>  >
>  > Hi Folks,Here's the gdal command (gdal 1.6.2) I used to merge ~3500 1
> meter NAIP
>  > quarter quads (uncompressed geotiff TIFF) in 3 UTM projections into
> one Bigtiff Image
>  > in the USGS Albers projection.  It took about 15 hours ( on a 3 year
> old Intel Core2
>  > Duo 64 bit Centos 5.3 Linux box with 6GB RAM) and created an
> uncompressed, tiled,
>  > bigtiff file of 485 GB. About 32 GB/hr.
>  > gdalwarp -t_srs "+proj=aea +lat_1=29.5+lat_2=45.5 +lat_0=23.0
> +lon_0=-96
>  > +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m no_defs <>"
>  > -wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500" -wm=5000
>  > -co "TILED=YES" */*.tif /biggis/albers/nc_naip2008.tif
>  >
>  > In the above command, -t_srs "+proj=aea +lat_1=29.5 +lat_2=45.5
> +lat_0=23.0
>  > +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m no_defs
> <>"
>  > indicates the target projection, -wo "SKIP_NOSOURCE" don't write
>  > in areas for which there is no data for the current file,
>  > --config "GDAL_CACHEMAX=500" set the cache memory at 500MB ( set this
> close
>  > to the maximum input file size), -wm=5000 set the warp memory to
> 5000MB ,
>  > -co "TILED=YES" create a tiled tiff as output, */*.tif, use all of the
> tiffs
>  > in all of the subdirectories as input files ( in this case there was
> one
>  > directory for each of the 3 utm zones) ,
> /biggis/albers/nc_naip2008.tif,
>  > the output file name and location.
>  >
> 
> Hi Doug,
> 
> I finally tried your parameters and they did work fine for me also.  I
> had something like  hundred geotiffs, 400 MB each, and I was pushing
> them to bigtiff mosaic. I tried first with your *.tif selection and then
> again by using a virtual raster file as source, created from Mapserver
> tileindex shapefile with gdalbuildvrt. My Windows computer was handling
> about 20 GB/hour with cubic resampling (-rc) this time.  Parameters
> -wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500" -wm=5000
> seem to have a big influence on efficiency.  I wonder if there are some
> rules of thumb for selecting values of GDAL_CACHEMAX and -wm.  You said
> cachemax is good to be close to the maximum input file size, how about
> -wm?

Folks,

I would note that large -wm values can be very counter productive when
used in combination with SKIP_NOSOURCE.  The problem is that the larger
the chunk size, you run into the chance that a large window will intersect
a small amount of data and the whole window ends up being processed - most
of it without any real work to do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Mon Dec  7 15:21:23 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec  7 15:21:29 2009
Subject: [gdal-dev] RFC 26: GDAL Block Cache Improvements
In-Reply-To: <f3b73b7d0912060236m47902e35l7ce0cf8ac0861579@mail.gmail.com>
References: <f3b73b7d0912060236m47902e35l7ce0cf8ac0861579@mail.gmail.com>
Message-ID: <4B1D63C3.2090809@mines-paris.org>

Tamas,

I agree with Frank's comments. The few remaining traces of subblocking 
mechanism should be removed :  the bSubBlockingActive, nSubBlocksPerRow, 
nSubBlocksPerColumn members of GDALRasterBand and all associated code.

I've an few additional comments on the patch :

* The CACHE_SIZE_MAX = 10 485 760 is maybe a good criterion to 
distinguish between the direct array access or the hash set access. But 
I think that using CACHE_SIZE_MAX directly as the initial capacity of 
the hash set is not appropriate. This would mean that you think that at 
a moment, the hash set will have 10 M blocks stored. If you take 256 x 
256 = 65 536 for a typical single block size, the set could only be 
filled if you have an enormous cache limit (687 GB) whereas the default 
is 40 MB. Thus an initial size of 40 * 1024 * 1024 / 65 536 = 640 should 
in theory be enough for the defaut values. Let's say MIN(CACHE_SIZE_MAX, 
2 * GDALGetCacheMax() / (nBlockXSize * nBlockYSize)) for a more general 
formula that takes into account some margin (the factor 2) to make hash 
collisions less likely and that avoids allocating too much memory if the 
cache max size is very big and/or the block size very small. Well, 
that's just theory. Would need some test.

* Very minor : I've the feeling that all the uses of 
GDALRasterBlock::SafeLockBlock done in GDALRasterBand are now explicetly 
protected by the hRBMutex (should be carefully checked). As this 
function also tries to take the lock, we have maybe an extra lock 
attempt that is unnecessary (I don't know the cost of this. It might be 
neglectable after all). I doublt that there are other users of 
GDALRasterBlock::SafeLockBlock() in the GDAL code base, so removing the 
lock and renaming it to LockBlock() and asking for it to be protected by 
the hRBMutex in the doc should be sufficient.

* Similarly with your patch all the few uses of GDALRasterBlock::Touch() 
done by GDALRasterBlock and GDALRasterBand seem already to be protected 
by the mutex. So the lock inside Touch() itself could be removed.

Best regards,

Even
> Devs,
>
> I'm quite involved in fixing the problems have already been raised in 
> http://n2.nabble.com/Problems-with-large-raster-sizes-WMS-TMS-td3996139.html
>
> Those issues are mostly related to the following issues:
>
> 1. The current GDAL block cache implementation may result in out of 
> memory errors with large raster dimensions.
> 2. The raster size is stored in a signed int in GDAL which may 
> overflow when the size of the raster is large.
>
>
> These issues will less likely happen with most drivers storing the 
> raster in the same physical file. However this may be a problem with 
> those drivers which compose the rasters from multiple tiles which 
> eventually results in rasters with large virtual dimensions.
>
> I'm about to handle issue #1 by introducing RFC26 which would 
> establish a hastable based caching solution in parallel to the current 
> array based block cache implementation.
> As this change would affect the gdal core it seems reasonable to come 
> up with a new RFC here and open up a discussion about that:
>
> http://trac.osgeo.org/gdal/wiki/rfc26_blockcache
>
> You could also review the corresponding patch which implements this 
> solution:
>
> http://trac.osgeo.org/gdal/attachment/ticket/3264/blockcache.patch#preview
>
> Any comments or ideas would be helpful.
>
> Best regards,
>
> Tamas
>
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From hagrdan at gmail.com  Mon Dec  7 16:11:50 2009
From: hagrdan at gmail.com (Dan)
Date: Mon Dec  7 16:19:57 2009
Subject: [gdal-dev] getting "FL" (filelength) metadata field out of NITF
	file header
Message-ID: <c24c7b1e0912071311p64855176t775188390ec5662a@mail.gmail.com>

Hi,
Brand new to GDAL, and I'm using GDAL under SWIG's C# wrapper to read
metadata out of nitf files using the GetMetaData("") command.  It's
going very well in general.

If this is a dumb question, please forgive me.  There is a field "FL"
(FileLength) in the NITF spec, but this field is not in the set of
values passed back from this command, or at least it doesn't come back
using the stock command.

Is there another way to get the "FL" data back from a NITF file using GDAL?

Thanks in advance,
Dan
From warmerdam at pobox.com  Mon Dec  7 16:55:04 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec  7 16:55:15 2009
Subject: [gdal-dev] getting "FL" (filelength) metadata field out of NITF
	file header
In-Reply-To: <c24c7b1e0912071311p64855176t775188390ec5662a@mail.gmail.com>
References: <c24c7b1e0912071311p64855176t775188390ec5662a@mail.gmail.com>
Message-ID: <4B1D79B8.3030009@pobox.com>

Dan wrote:
> Hi,
> Brand new to GDAL, and I'm using GDAL under SWIG's C# wrapper to read
> metadata out of nitf files using the GetMetaData("") command.  It's
> going very well in general.
> 
> If this is a dumb question, please forgive me.  There is a field "FL"
> (FileLength) in the NITF spec, but this field is not in the set of
> values passed back from this command, or at least it doesn't come back
> using the stock command.
> 
> Is there another way to get the "FL" data back from a NITF file using GDAL?

Dan,

I don't see any sign of this being preserved currently as GDAL level
metadata.   Sorry.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From hagrdan at gmail.com  Mon Dec  7 18:42:09 2009
From: hagrdan at gmail.com (Dan)
Date: Mon Dec  7 18:42:31 2009
Subject: [gdal-dev] getting "FL" (filelength) metadata field out of NITF 
	file header
In-Reply-To: <4B1D79B8.3030009@pobox.com>
References: <c24c7b1e0912071311p64855176t775188390ec5662a@mail.gmail.com> 
	<4B1D79B8.3030009@pobox.com>
Message-ID: <c24c7b1e0912071542p33c7f03cxdffe649b526c68b@mail.gmail.com>

Thanks, Frank.  In case anyone has this question and stumbles on this,
the FL field is stored in bytes 342 - 354 (0 based) in the NTF file,
so can be easily read and parsed manually.  I'll keep using GDAL for
all the other stuff though! :-)
Dan


On Mon, Dec 7, 2009 at 3:55 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Dan wrote:
>>
>> Hi,
>> Brand new to GDAL, and I'm using GDAL under SWIG's C# wrapper to read
>> metadata out of nitf files using the GetMetaData("") command. ?It's
>> going very well in general.
>>
>> If this is a dumb question, please forgive me. ?There is a field "FL"
>> (FileLength) in the NITF spec, but this field is not in the set of
>> values passed back from this command, or at least it doesn't come back
>> using the stock command.
>>
>> Is there another way to get the "FL" data back from a NITF file using
>> GDAL?
>
> Dan,
>
> I don't see any sign of this being preserved currently as GDAL level
> metadata. ? Sorry.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From bontepaarden at gmail.com  Tue Dec  8 04:41:05 2009
From: bontepaarden at gmail.com (Paul Meems)
Date: Tue Dec  8 04:41:09 2009
Subject: [gdal-dev] MG4 LiDAR Decode SDK 1.0.1
Message-ID: <870e056a0912080141s3f8bf3easf4da3b071681d1d8@mail.gmail.com>

LizardTech has released MG4 LiDAR Decode SDK 1.0.1
when will GDAL support this library?

Thanks,

Paul
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091208/e56ca001/attachment.html
From bartvde at osgis.nl  Tue Dec  8 04:45:25 2009
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Tue Dec  8 04:45:39 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
Message-ID: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>

Hi list,

I've been trying to debug my problem which I originally posted on
mapserver-users here:

http://lists.osgeo.org/pipermail/mapserver-users/2009-November/063706.html

I've debugged the problem to the following part of
frmts/sde/sderasterband.cpp:

    if (bits_per_pixel >= 8) {
        memcpy(pImage, pixels, block_size);
        GByte *p = reinterpret_cast<GByte*>(pImage);
    } else {

The values in the pixels variable are still okay, and contain mostly
negative values as well as 0 (for example -42).

The p variable only contains positive values and 0 values.

Hopefully this will help somebody to pinpoint the problem, as I am not
familiar enough with C++ to solve this.

TIA.

Best regards,
Bart


From bartvde at osgis.nl  Tue Dec  8 06:33:10 2009
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Tue Dec  8 06:33:27 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <200912081228.00172.k.dejong@geo.uu.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<200912081228.00172.k.dejong@geo.uu.nl>
Message-ID: <33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>

Hi Cor,

in ArcMap I see negative values, in GDAL all values seem to have a shift
of 256, so -21 becomes 235. Nodata values are also off with 256, so -256
in ArcMap becomes 0 in GDAL.

Best regards,
Bart

> Hi Bart,
>
> On Tuesday 08 December 2009 10:45:25 bartvde@osgis.nl wrote:
>> I've debugged the problem to the following part of
>> frmts/sde/sderasterband.cpp:
>>
>>     if (bits_per_pixel >= 8) {
>>         memcpy(pImage, pixels, block_size);
>>         GByte *p = reinterpret_cast<GByte*>(pImage);
>>     } else {
>>
>> The values in the pixels variable are still okay, and contain mostly
>> negative values as well as 0 (for example -42).
>>
>> The p variable only contains positive values and 0 values.
>
> What differences do you see when reading the data using ArcMap and
> reading it using gdal?
> - Is it only the no-data values that get truncated?
> - Do all negative values get converted to a positive value?
> - Something else?
>
> The piece of code you're showing only deals with copying bits and bytes
> from one buffer to another. These buffers have types that are convenient
> for doing that and have no relation with the real type of the values in
> the buffers. Using these pointers to test the values is not very useful,
> I think. Why do you think this piece of code must contain a bug?
>
> BTW, the current trunk version of this module looks different. Maybe
> upgrading gdal solves your problem already?
>
> Sorry, more questions than answers...
>
> Kor
>
>
>


From bartvde at osgis.nl  Tue Dec  8 06:38:35 2009
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Tue Dec  8 06:38:51 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<200912081228.00172.k.dejong@geo.uu.nl>
	<33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <40907.145.50.39.11.1260272315.squirrel@webmail.hostingdiscounter.nl>

Sorry I meant Kor ofcourse :-)

Btw, the GByte *p = reinterpret_cast<GByte*>(pImage); line was a paste
error from my debugging, it's also not in 1.6.1 which I am using.

Best regards,
Bart

> Hi Cor,
>
> in ArcMap I see negative values, in GDAL all values seem to have a shift
> of 256, so -21 becomes 235. Nodata values are also off with 256, so -256
> in ArcMap becomes 0 in GDAL.
>
> Best regards,
> Bart
>
>> Hi Bart,
>>
>> On Tuesday 08 December 2009 10:45:25 bartvde@osgis.nl wrote:
>>> I've debugged the problem to the following part of
>>> frmts/sde/sderasterband.cpp:
>>>
>>>     if (bits_per_pixel >= 8) {
>>>         memcpy(pImage, pixels, block_size);
>>>         GByte *p = reinterpret_cast<GByte*>(pImage);
>>>     } else {
>>>
>>> The values in the pixels variable are still okay, and contain mostly
>>> negative values as well as 0 (for example -42).
>>>
>>> The p variable only contains positive values and 0 values.
>>
>> What differences do you see when reading the data using ArcMap and
>> reading it using gdal?
>> - Is it only the no-data values that get truncated?
>> - Do all negative values get converted to a positive value?
>> - Something else?
>>
>> The piece of code you're showing only deals with copying bits and bytes
>> from one buffer to another. These buffers have types that are convenient
>> for doing that and have no relation with the real type of the values in
>> the buffers. Using these pointers to test the values is not very useful,
>> I think. Why do you think this piece of code must contain a bug?
>>
>> BTW, the current trunk version of this module looks different. Maybe
>> upgrading gdal solves your problem already?
>>
>> Sorry, more questions than answers...
>>
>> Kor
>>
>>
>>
>
>


From ivan.lucena at pmldnet.com  Tue Dec  8 01:43:14 2009
From: ivan.lucena at pmldnet.com (Ivan)
Date: Tue Dec  8 06:44:00 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <4B1DF582.4090605@pmldnet.com>

bartvde@osgis.nl wrote:
> Hi list,
> 
> I've been trying to debug my problem which I originally posted on
> mapserver-users here:
> 
> http://lists.osgeo.org/pipermail/mapserver-users/2009-November/063706.html
> 
> I've debugged the problem to the following part of
> frmts/sde/sderasterband.cpp:
> 
>     if (bits_per_pixel >= 8) {
>         memcpy(pImage, pixels, block_size);
>         GByte *p = reinterpret_cast<GByte*>(pImage);
>     } else {
> 
> The values in the pixels variable are still okay, and contain mostly
> negative values as well as 0 (for example -42).
> 
> The p variable only contains positive values and 0 values.
> 
> Hopefully this will help somebody to pinpoint the problem, as I am not
> familiar enough with C++ to solve this.
> 
> TIA.
> 
> Best regards,
> Bart
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

Bart,

Since you are using Oracle 10g, have you tried to use the GDAL/GeoRaster driver instead of the 
GDAL/SDE?

The GeoRaster driver uses the OCI library to read BLOB direct from the server, as long as the column 
data type is the ORACLE's SDO_GEORASTER, not the ESRI's ST_RASTER or Terralib's TE_RASTER or 
anything else...

You would need to change your .MAP file, LAYER/DATA parameter according to the GeoRaster 
identification string [http://gdal.org/frmt_georaster.html].

Regards,

Ivan

From bartvde at osgis.nl  Tue Dec  8 06:49:41 2009
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Tue Dec  8 06:49:56 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <4B1DF582.4090605@pmldnet.com>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<4B1DF582.4090605@pmldnet.com>
Message-ID: <53469.145.50.39.11.1260272981.squirrel@webmail.hostingdiscounter.nl>

Hi Ivan,

unfortunately that's not an option yet, since we use ArcSDE 9.1 which is
not compatible with GeoRaster. We need to wait until our 9.3.1 or 9.4
upgrade.

Best regards,
Bart

> bartvde@osgis.nl wrote:
>> Hi list,
>>
>> I've been trying to debug my problem which I originally posted on
>> mapserver-users here:
>>
>> http://lists.osgeo.org/pipermail/mapserver-users/2009-November/063706.html
>>
>> I've debugged the problem to the following part of
>> frmts/sde/sderasterband.cpp:
>>
>>     if (bits_per_pixel >= 8) {
>>         memcpy(pImage, pixels, block_size);
>>         GByte *p = reinterpret_cast<GByte*>(pImage);
>>     } else {
>>
>> The values in the pixels variable are still okay, and contain mostly
>> negative values as well as 0 (for example -42).
>>
>> The p variable only contains positive values and 0 values.
>>
>> Hopefully this will help somebody to pinpoint the problem, as I am not
>> familiar enough with C++ to solve this.
>>
>> TIA.
>>
>> Best regards,
>> Bart
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
> Bart,
>
> Since you are using Oracle 10g, have you tried to use the GDAL/GeoRaster
> driver instead of the
> GDAL/SDE?
>
> The GeoRaster driver uses the OCI library to read BLOB direct from the
> server, as long as the column
> data type is the ORACLE's SDO_GEORASTER, not the ESRI's ST_RASTER or
> Terralib's TE_RASTER or
> anything else...
>
> You would need to change your .MAP file, LAYER/DATA parameter according to
> the GeoRaster
> identification string [http://gdal.org/frmt_georaster.html].
>
> Regards,
>
> Ivan
>
>


From k.dejong at geo.uu.nl  Tue Dec  8 06:28:00 2009
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Tue Dec  8 06:52:10 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <200912081228.00172.k.dejong@geo.uu.nl>

Hi Bart,

On Tuesday 08 December 2009 10:45:25 bartvde@osgis.nl wrote:
> I've debugged the problem to the following part of
> frmts/sde/sderasterband.cpp:
>
>     if (bits_per_pixel >= 8) {
>         memcpy(pImage, pixels, block_size);
>         GByte *p = reinterpret_cast<GByte*>(pImage);
>     } else {
>
> The values in the pixels variable are still okay, and contain mostly
> negative values as well as 0 (for example -42).
>
> The p variable only contains positive values and 0 values.

What differences do you see when reading the data using ArcMap and
reading it using gdal?
- Is it only the no-data values that get truncated?
- Do all negative values get converted to a positive value?
- Something else?

The piece of code you're showing only deals with copying bits and bytes
from one buffer to another. These buffers have types that are convenient
for doing that and have no relation with the real type of the values in
the buffers. Using these pointers to test the values is not very useful,
I think. Why do you think this piece of code must contain a bug?

BTW, the current trunk version of this module looks different. Maybe
upgrading gdal solves your problem already?

Sorry, more questions than answers...

Kor


From k.dejong at geo.uu.nl  Tue Dec  8 07:21:56 2009
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Tue Dec  8 07:22:04 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<200912081228.00172.k.dejong@geo.uu.nl>
	<33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <200912081321.56771.k.dejong@geo.uu.nl>

Hi Bart,

On Tuesday 08 December 2009 12:33:10 bartvde@osgis.nl wrote:
> in ArcMap I see negative values, in GDAL all values seem to have a shift
> of 256, so -21 becomes 235. Nodata values are also off with 256, so -256
> in ArcMap becomes 0 in GDAL.

The pixel type of your input is char (signed 8 bit). The no-data value
is -256 (which cannot be represented by the signed 8 bit, btw).

For some reason your data gets converted from a signed 8 bit type to an
unsigned 8 bit type.

Looking at the trunk version of sderasterband.cpp I see that GDT_BYTE is
taken to be the equivalent of SE_PIXEL_TYPE_8BIT_S. If this means that
an input of signed 8 bit value is stored in an unsigned 8 bit value,
than that would explain what you are seeing. An alternative would be to
update this code to return GDT_Int16, which will leave your data intact.
Line 833.

Special care may have to be taken to handle the no-data values
correctly.

Probably the original author will have something to say about this.

Kor


From bartvde at osgis.nl  Tue Dec  8 07:53:07 2009
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Tue Dec  8 07:53:26 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <200912081321.56771.k.dejong@geo.uu.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<200912081228.00172.k.dejong@geo.uu.nl>
	<33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>
	<200912081321.56771.k.dejong@geo.uu.nl>
Message-ID: <32689.145.50.39.11.1260276787.squirrel@webmail.hostingdiscounter.nl>

Hi Kor,

I tried this change but with strange results. Also in Mapserver it seems
that a GByte * is used for the buffer:

LoadGDALImage( GDALRasterBandH hBand, int iColorIndex,
               layerObj *layer,
               int src_xoff, int src_yoff, int src_xsize, int src_ysize,
               GByte *pabyBuffer, int dst_xsize, int dst_ysize );

Would this need a change as well?

Best regards,
Bart

> Hi Bart,
>
> On Tuesday 08 December 2009 12:33:10 bartvde@osgis.nl wrote:
>> in ArcMap I see negative values, in GDAL all values seem to have a shift
>> of 256, so -21 becomes 235. Nodata values are also off with 256, so -256
>> in ArcMap becomes 0 in GDAL.
>
> The pixel type of your input is char (signed 8 bit). The no-data value
> is -256 (which cannot be represented by the signed 8 bit, btw).
>
> For some reason your data gets converted from a signed 8 bit type to an
> unsigned 8 bit type.
>
> Looking at the trunk version of sderasterband.cpp I see that GDT_BYTE is
> taken to be the equivalent of SE_PIXEL_TYPE_8BIT_S. If this means that
> an input of signed 8 bit value is stored in an unsigned 8 bit value,
> than that would explain what you are seeing. An alternative would be to
> update this code to return GDT_Int16, which will leave your data intact.
> Line 833.
>
> Special care may have to be taken to handle the no-data values
> correctly.
>
> Probably the original author will have something to say about this.
>
> Kor
>
>
>


From k.dejong at geo.uu.nl  Tue Dec  8 08:05:48 2009
From: k.dejong at geo.uu.nl (Kor de Jong)
Date: Tue Dec  8 08:05:56 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <32689.145.50.39.11.1260276787.squirrel@webmail.hostingdiscounter.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<200912081321.56771.k.dejong@geo.uu.nl>
	<32689.145.50.39.11.1260276787.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <200912081405.48477.k.dejong@geo.uu.nl>

Hi Bart,

On Tuesday 08 December 2009 13:53:07 bartvde@osgis.nl wrote:
> I tried this change but with strange results. Also in Mapserver it seems
> that a GByte * is used for the buffer:
>
> LoadGDALImage( GDALRasterBandH hBand, int iColorIndex,
>                layerObj *layer,
>                int src_xoff, int src_yoff, int src_xsize, int src_ysize,
>                GByte *pabyBuffer, int dst_xsize, int dst_ysize );
>
> Would this need a change as well?

I don't think the type of these memory buffers is related to the type
of the values in your raster. They are probably fine.

You may have to look into the MorphESRIRasterDepth function to see
whether that needs to be updated. It probably needs to be in sync with
the MorphESRIRasterType function.

If that doesn't help than you may want to wait for other suggestions,
because I might be completely wrong. That has happened before ;-)

Kor



From dejan.gregor at GMAIL.COM  Tue Dec  8 09:20:29 2009
From: dejan.gregor at GMAIL.COM (Dejan Gregor)
Date: Tue Dec  8 09:20:31 2009
Subject: [Gdal-dev] Import ESRI shpaefile (line) into exsiting Oracle
	Spatial schema
Message-ID: <1260282029802-4132690.post@n2.nabble.com>


Hi,

I was searching fro a good sample how I can import a file called
'LINE5001.shp' (linear feature class) into a predefined schema of an SDO
layer in 'USER1' schema into the 'LINE1' table? TNS name is 'ORCL'.

Geometry field is called 'GEOM' and the SRID for the SDO layer is set to the
value '5000000'. The schema owner 'USER1' has a password 'pwd'.

What would be syntax for the import of the line objects into Oracle through
OCI and OGR2OGR?

I have found a sample on the

ogr2ogr -f OCI OCI:user1/pwd@orcl LINE5001.shp ...?

Any help would be very much appreciated.


Dejan

-----
__ 

Dejan Gregor, MSc 
GISc Researcher and Consultant 

http://www.linkedin.com/in/dgregor 
-- 
View this message in context: http://n2.nabble.com/Import-ESRI-shpaefile-line-into-exsiting-Oracle-Spatial-schema-tp4132690p4132690.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hobu.inc at gmail.com  Tue Dec  8 09:24:47 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec  8 09:28:36 2009
Subject: [gdal-dev] MG4 LiDAR Decode SDK 1.0.1
In-Reply-To: <870e056a0912080141s3f8bf3easf4da3b071681d1d8@mail.gmail.com>
References: <870e056a0912080141s3f8bf3easf4da3b071681d1d8@mail.gmail.com>
Message-ID: <1C277138-0940-4651-9E53-74E85E017A30@gmail.com>


On Dec 8, 2009, at 3:41 AM, Paul Meems wrote:

> LizardTech has released MG4 LiDAR Decode SDK 1.0.1
> when will GDAL support this library?

It most likely won't, at least not without a giant update to support some sort of point patch or lidar data model within either GDAL or OGR.  And even then, someone will have to step forward with the development effort to map the MG4 LiDAR SDK to that.  Years, if at all.

Howard
From hobu.inc at gmail.com  Tue Dec  8 09:28:03 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec  8 09:31:53 2009
Subject: [gdal-dev] problem with ArcSDE raster (negative values)
In-Reply-To: <200912081321.56771.k.dejong@geo.uu.nl>
References: <3137.145.50.39.11.1260265525.squirrel@webmail.hostingdiscounter.nl>
	<200912081228.00172.k.dejong@geo.uu.nl>
	<33357.145.50.39.11.1260271990.squirrel@webmail.hostingdiscounter.nl>
	<200912081321.56771.k.dejong@geo.uu.nl>
Message-ID: <A3A47C87-8C70-4493-B7FF-25BFC29F9B9D@gmail.com>


On Dec 8, 2009, at 6:21 AM, Kor de Jong wrote:

> Hi Bart,
> 
> On Tuesday 08 December 2009 12:33:10 bartvde@osgis.nl wrote:
>> in ArcMap I see negative values, in GDAL all values seem to have a shift
>> of 256, so -21 becomes 235. Nodata values are also off with 256, so -256
>> in ArcMap becomes 0 in GDAL.
> 
> The pixel type of your input is char (signed 8 bit). The no-data value
> is -256 (which cannot be represented by the signed 8 bit, btw).
> 
> For some reason your data gets converted from a signed 8 bit type to an
> unsigned 8 bit type.
> 
> Looking at the trunk version of sderasterband.cpp I see that GDT_BYTE is
> taken to be the equivalent of SE_PIXEL_TYPE_8BIT_S. If this means that
> an input of signed 8 bit value is stored in an unsigned 8 bit value,
> than that would explain what you are seeing. An alternative would be to
> update this code to return GDT_Int16, which will leave your data intact.
> Line 833.

This is very likely the culprit.   Thanks Kor.  Please file a bug on this and I will try to apply it before the release.  I would note that I don't have SDE anymore to be able to test against, so I would have to depend on Bart's assessment of whether or not the issue is resolved.

Howard

From jukka.rahkonen at mmmtike.fi  Tue Dec  8 09:56:47 2009
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Dec  8 09:57:14 2009
Subject: [gdal-dev] Re: Import ESRI shpaefile (line) into exsiting
	Oracle	Spatial schema
References: <1260282029802-4132690.post@n2.nabble.com>
Message-ID: <loom.20091208T153634-689@post.gmane.org>

Dejan Gregor <dejan.gregor <at> GMAIL.COM> writes:

> Hi,
> 
> I was searching fro a good sample how I can import a file called
> 'LINE5001.shp' (linear feature class) into a predefined schema of an SDO
> layer in 'USER1' schema into the 'LINE1' table? TNS name is 'ORCL'.
> 
> Geometry field is called 'GEOM' and the SRID for the SDO layer is set to the
> value '5000000'. The schema owner 'USER1' has a password 'pwd'.
> 
> What would be syntax for the import of the line objects into Oracle through
> OCI and OGR2OGR?

In principle it should go this way:
ogr2ogr -update -append -f "OCI" OCI:USER1/pwd@ORCL:LINE1 line50001.shp

However, it will fail and give you a SRID missmatch error. I have a feeling that
OCI driver cannot append data to Oracle at all if the table is using SRID. 
There is an OCI specific parameter that works when creating a new table (-lco
SRID=5000000), but because it is a layer creation option it does not work when
appending data to an existing table. A work around would be to 
- drop the spatial index of your table
- update all the geometries in the table into so that they have SRID=null

SQL> update LINE1 L set L.geom.sdo_srid=null;

- append your data now with the ogr2ogr command above
- update SRID of the geometries to the correct one
- create the spatial index again

I have not tested this procedure with real data but I thing it should work. 
Better approach is that somebody checks if appending data with SRID through OCI
driver is really impossible, files a ticket and the bug will be corrected.

-Jukka Rahkonen-





From hi_ono2001 at ybb.ne.jp  Tue Dec  8 12:03:37 2009
From: hi_ono2001 at ybb.ne.jp (Hisaji ONO)
Date: Tue Dec  8 12:10:22 2009
Subject: [gdal-dev] Re: CUDA PyCUDA and GDAL
In-Reply-To: <OF2E63F93A.26070722-ON85257685.00544861-85257685.0055535B@fws.gov>
Message-ID: <20091208170338.3811.qmail@web10502.mail.ogk.yahoo.co.jp>

Hello.

 Is there no gap or noises in image data generated by this
method? 


 Regards.

--- Doug_Newcomb@fws.gov wrote:

> 
> 
> 
> 
> >Hi Doug,
> 
> >I finally tried your parameters and they did work
> fine for me also.  I
> >had something like  hundred geotiffs, 400 MB each,
> and I was pushing
> >them to bigtiff mosaic. I tried first with your
> *.tif selection and then
> >again by using a virtual raster file as source,
> created from Mapserver
> >tileindex shapefile with gdalbuildvrt. My Windows
> computer was handling
> >about 20 GB/hour with cubic resampling (-rc) this
> time.  Parameters
> ?-wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500"
> -wm=5000
> >seem to have a big influence on efficiency.  I
> wonder if there are some
> >rules of thumb for selecting values of
> GDAL_CACHEMAX and -wm.  You said
> >cachemax is good to be close to the maximum input
> file size, how about
> >-wm?
> 
> >-Jukka Rahkonen-
> 
> Jukka,
>       I remember seeing someone mention on the
> mailing list ( Can't recall
> who at the moment) that setting GDAL_CACHEMAX close
> to the maximum size of
> the input files gave the best performance.  I did
> try bumping GDAL_CACHEMAX
> up to 2000 to see what would happen ( while dropping
> -wm down to 3000, only
> 6GB of RAM on that computer) , but none of the input
> files I was processing
> were larger than 500MB and I saw no increase in
> performance.  For the -wm
> parameter, I just gave it the rest of the RAM
> available on the computer,
> and I did not benchmark while varying that number.
> 
> Doug
> 
> 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
>
---------------------------------------------------------------------------------------------------------
> 
> The opinions I express are my own and are not
> representative of the
> official policy of the U.S.Fish and Wildlife Service
> or Dept. of the
> Interior.   Life is too short for undocumented,
> proprietary data formats.
> 
> 
>                                                     
>                   
>              "Rahkonen Jukka"                       
>                   
>              <Jukka.Rahkonen@m                      
>                   
>              mmtike.fi>                             
>                    To
>                                       
> <gdal-dev@lists.osgeo.org>,     
>              12/07/2009 05:06         
> <Doug_Newcomb@fws.gov>          
>              AM                                     
>                    cc
>                                                     
>                   
>                                                     
>               Subject
>                                        Re: CUDA
> PyCUDA and GDAL        
>                                                     
>                   
>                                                     
>                   
>                                                     
>                   
>                                                     
>                   
>                                                     
>                   
>                                                     
>                   
> 
> 
> 
> 
> >  <Doug_Newcomb <at> fws.gov> writes:
> >
> > Hi Folks,Here's the gdal command (gdal 1.6.2) I
> used to merge ~3500 1
> meter NAIP
> > quarter quads (uncompressed geotiff TIFF) in 3 UTM
> projections into
> one Bigtiff Image
> > in the USGS Albers projection.  It took about 15
> hours ( on a 3 year
> old Intel Core2
> > Duo 64 bit Centos 5.3 Linux box with 6GB RAM) and
> created an
> uncompressed, tiled,
> > bigtiff file of 485 GB. About 32 GB/hr.
> > gdalwarp -t_srs "+proj=aea +lat_1=29.5+lat_2=45.5
> +lat_0=23.0
> +lon_0=-96
> > +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83 +units=m
> no_defs <>"
> > -wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500"
> -wm=5000
> > -co "TILED=YES" */*.tif
> /biggis/albers/nc_naip2008.tif
> >
> > In the above command, -t_srs "+proj=aea
> +lat_1=29.5 +lat_2=45.5
> +lat_0=23.0
> > +lon_0=-96 +x_0=0 +y_0=0 +ellps=GRS80 +datum=NAD83
> +units=m no_defs
> <>"
> > indicates the target projection, -wo
> "SKIP_NOSOURCE" don't write
> > in areas for which there is no data for the
> current file,
> > --config "GDAL_CACHEMAX=500" set the cache memory
> at 500MB ( set this
> close
> > to the maximum input file size), -wm=5000 set the
> warp memory to
> 5000MB ,
> > -co "TILED=YES" create a tiled tiff as output,
> */*.tif, use all of the
> tiffs
> > in all of the subdirectories as input files ( in
> this case there was
> one
> > directory for each of the 3 utm zones) ,
> /biggis/albers/nc_naip2008.tif,
> > the output file name and location.
> >
> 
> Hi Doug,
> 
> I finally tried your parameters and they did work
> fine for me also.  I
> had something like  hundred geotiffs, 400 MB each,
> and I was pushing
> them to bigtiff mosaic. I tried first with your
> *.tif selection and then
> again by using a virtual raster file as source,
> created from Mapserver
> tileindex shapefile with gdalbuildvrt. My Windows
> computer was handling
> about 20 GB/hour with cubic resampling (-rc) this
> time.  Parameters
> -wo "SKIP_NOSOURCE"  --config "GDAL_CACHEMAX=500"
> -wm=5000
> seem to have a big influence on efficiency.  I
> wonder if there are some
> rules of thumb for selecting values of GDAL_CACHEMAX
> and -wm.  You said
> cachemax is good to be close to the maximum input
> file size, how about
> -wm?
> 
> -Jukka Rahkonen-
> > _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From collinsb at mitre.org  Tue Dec  8 11:10:55 2009
From: collinsb at mitre.org (Collins, Benjamin)
Date: Tue Dec  8 12:16:04 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <4B1BF641.7020007@mines-paris.org>
References: <4B1BDE64.2060202@pobox.com> <4B1BF641.7020007@mines-paris.org>
Message-ID: <77F7C5B5FC691E438C577AEDAC9D6D560C6C745D54@IMCMBX4.MITRE.ORG>

1.3.39 produces code that does not compile on x64 Windows (at least with MSVC).  See: http://trac.osgeo.org/gdal/ticket/2928.  The ticket mentions c# bindings but the same is true for the Java bindings.  Rolling back to 1.3.38 fixes the problem.  

--
Ben

> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
> bounces@lists.osgeo.org] On Behalf Of Even Rouault
> Sent: Sunday, December 06, 2009 1:22 PM
> To: Frank Warmerdam
> Cc: gdal-dev
> Subject: Re: [gdal-dev] SWIG Version
> 
> I've been using SWIG 1.3.39 for Java bindings for a few months now, and
> it's working fine.
> 
> Frank Warmerdam a ?crit :
> > Folks - particularly swig bindings maintainers,
> >
> > I have regenerated the swig bindings for python with swig 1.3.39 on
> > www.gdal.org and committed them.  I used that version to be
> compatible
> > with what Even used last time.  However, the scripts that building
> > the perl and csharp bindings for the nightly snapshots are still
> using
> > SWIG 1.3.36.
> >
> > Before GDAL 1.7 release, I'd like us to settle on a preferred version
> of
> > SWIG and I will update this to be the one used for the nightly
> snapshots
> > and that we would use at other times for building source
> distributions.
> >
> > Is SWIG 1.3.39 acceptable for all bindings maintainers?
> >
> > PS. SWIG 1.3.39 is built and installed in ~warmerdam/gdal-swig on
> > www.gdal.org (aka xblade14).   SWIG 1.3.36 is in /usr/local/bin.
> >
> > Best regards,
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Tue Dec  8 14:21:07 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec  8 14:21:06 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <77F7C5B5FC691E438C577AEDAC9D6D560C6C745D54@IMCMBX4.MITRE.ORG>
References: <4B1BDE64.2060202@pobox.com> <4B1BF641.7020007@mines-paris.org>
	<77F7C5B5FC691E438C577AEDAC9D6D560C6C745D54@IMCMBX4.MITRE.ORG>
Message-ID: <4B1EA723.6050904@mines-paris.org>

Benjamin,

Ticket #2928 was fixed for 1.6.1 release. Are the compilation problems 
you mention still current with latest SVN trunk ? If so, you should 
consider open a new ticket and mention the exact error log you get from 
the compiler. But this is a bit surprising as one of our slavebots is a 
x64 Windows that uses SWIG 1.3.39 and it can compile the Java bindings. 
See szekerest-vc90x64-full slavebot on 
http://buildbot.osgeo.org:8500/waterfall

Best regards,

Even

Collins, Benjamin a ?crit :
> 1.3.39 produces code that does not compile on x64 Windows (at least with MSVC).  See: http://trac.osgeo.org/gdal/ticket/2928.  The ticket mentions c# bindings but the same is true for the Java bindings.  Rolling back to 1.3.38 fixes the problem.  
>
> --
> Ben
>
>   
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-
>> bounces@lists.osgeo.org] On Behalf Of Even Rouault
>> Sent: Sunday, December 06, 2009 1:22 PM
>> To: Frank Warmerdam
>> Cc: gdal-dev
>> Subject: Re: [gdal-dev] SWIG Version
>>
>> I've been using SWIG 1.3.39 for Java bindings for a few months now, and
>> it's working fine.
>>
>> Frank Warmerdam a ?crit :
>>     
>>> Folks - particularly swig bindings maintainers,
>>>
>>> I have regenerated the swig bindings for python with swig 1.3.39 on
>>> www.gdal.org and committed them.  I used that version to be
>>>       
>> compatible
>>     
>>> with what Even used last time.  However, the scripts that building
>>> the perl and csharp bindings for the nightly snapshots are still
>>>       
>> using
>>     
>>> SWIG 1.3.36.
>>>
>>> Before GDAL 1.7 release, I'd like us to settle on a preferred version
>>>       
>> of
>>     
>>> SWIG and I will update this to be the one used for the nightly
>>>       
>> snapshots
>>     
>>> and that we would use at other times for building source
>>>       
>> distributions.
>>     
>>> Is SWIG 1.3.39 acceptable for all bindings maintainers?
>>>
>>> PS. SWIG 1.3.39 is built and installed in ~warmerdam/gdal-swig on
>>> www.gdal.org (aka xblade14).   SWIG 1.3.36 is in /usr/local/bin.
>>>
>>> Best regards,
>>>       
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     
>
>
>
>   


From traviskirstine at gmail.com  Tue Dec  8 16:50:58 2009
From: traviskirstine at gmail.com (Travis Kirstine)
Date: Tue Dec  8 16:51:01 2009
Subject: [gdal-dev] get_Area() Python
Message-ID: <681116190912081350p16c00c64me6ef6ab6eae651e7@mail.gmail.com>

Hi all,
I'm trying a simple python script to calculate the polygon areas.  Are
the swig bindings for python working because is returning the geometry
type as -2147483645 the dimension and 2 for a 3d feature and the
get_Area returns a error?



#!/usr/bin/env python

from osgeo import ogr
import sys
import os

def get_file(dgn):

  dataset = ogr.Open(dgn)
  sql = 'SELECT * FROM elements WHERE Type=6'
  layer = dataset.ExecuteSQL(sql)
  feature = layer.GetNextFeature()

  while feature is not None:
    geom = feature.GetGeometryRef()
    type = geom.GetGeometryType()
    print 'Type =', type
    dim = geom.GetDimension()
    print 'Dimension =', dim
    area = geom.get_Area()
    print 'Area =', area

    # get the next feature
    feature.Destroy()
    feature = layer.GetNextFeature()

def main():
  # get a listing of all dgn in dir
  dlist = os.listdir('.')
  for item in dlist:
    if item[-4:] == '.dgn':
      get_file(item)


if __name__ == '__main__':
    main()

##############################################


Type = -2147483645
Dimension = 2
Traceback (most recent call last):
  File "./get_dgn_neatline.py", line 40, in ?
    main()
  File "./get_dgn_neatline.py", line 36, in main
    get_file(item)
  File "./get_dgn_neatline.py", line 21, in get_file
    area = geom.get_Area()
  File "/usr/lib/python2.4/site-packages/osgeo/ogr.py", line 2370, in <lambda>
    __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
  File "/usr/lib/python2.4/site-packages/osgeo/ogr.py", line 34, in
_swig_getattr
    raise AttributeError,name
AttributeError: get_Area

###########################################

Had to open data source read-only.
INFO: Open of `car_01.dgn'
      using driver `DGN' successful.

Layer name: elements
Geometry: Unknown (any)
Feature Count: 438
Extent: (660241.900000, 4854102.500000) - (662678.200000, 4855934.400000)
Layer SRS WKT:
(unknown)
Type: Integer (2.0)
Level: Integer (2.0)
GraphicGroup: Integer (4.0)
ColorIndex: Integer (3.0)
Weight: Integer (2.0)
Style: Integer (1.0)
EntityNum: Integer (0.0)
MSLink: Integer (0.0)
Text: String (0.0)
OGRFeature(elements):74
  Type (Integer) = 6
  Level (Integer) = 22
  GraphicGroup (Integer) = 0
  ColorIndex (Integer) = 0
  Weight (Integer) = 0
  Style (Integer) = 0
  EntityNum (Integer) = (null)
  MSLink (Integer) = (null)
  Text (String) = (null)
  POLYGON ((662248.700000000069849 4854562.299999999813735 0,662249.0
4854562.5 0,662250.200000000069849 4854563.0 0,662251.40
0000000023283 4854563.400000000372529 0,662252.700000000069849
4854563.600000000558794 0,662254.100000000093132 4854563.700000
000186265 0,662255.5 4854563.5 0,662256.900000000023283
4854563.100000000558794 0,662258.200000000069849 4854562.4000000003725
29 0,662259.5 4854561.400000000372529 0,662258 4854562
0,662256.600000000093132 4854562.400000000372529
0,662255.2000000000698
49 4854562.5 0,662253.800000000046566 4854562.400000000372529
0,662252.5 4854562.100000000558794 0,662251.300000000046566 4854
561.600000000558794 0,662250.200000000069849 4854561.0
0,662249.200000000069849 4854560.200000000186265
0,662248.2000000000698
49 4854559.400000000372529 0,662247.400000000023283 4854558.5
0,662246.600000000093132 4854557.600000000558794 0,662246.0 4854
556.600000000558794 0,662245.600000000093132 4854555.700000000186265
0,662245.100000000093132 4854556.600000000558794 0,662244
.5 4854557.600000000558794 0,662243.800000000046566 4854558.5
0,662243.0 4854559.400000000372529 0,662242.100000000093132 4854
560.299999999813735 0,662241 4854561 0,662239.900000000023283
4854561.700000000186265 0,662238.800000000046566 4854562.1000000
00558794 0,662237.5 4854562.400000000372529 0,662236.200000000069849
4854562.600000000558794 0,662234.800000000046566 4854562.
400000000372529 0,662233.400000000023283 4854562.0
0,662231.900000000023283 4854561.299999999813735
0,662233.300000000046566 4
854562.400000000372529 0,662234.800000000046566
4854563.200000000186265 0,662236.300000000046566
4854563.600000000558794 0,662
237.800000000046566 4854563.600000000558794 0,662239.200000000069849
4854563.5 0,662240.600000000093132 4854563.10000000055879
4 0,662241.900000000023283 4854562.600000000558794
0,662243.100000000093132 4854562.0 0,662244.100000000093132
4854561.2000000
00186265 0,662245.0 4854560.900000000372529 0,662246.100000000093132
4854560.900000000372529 0,662247.0 4854561.20000000018626
5 0,662247.900000000023283 4854561.900000000372529
0,662248.700000000069849 4854562.299999999813735
0,662248.700000000069849 4
854562.299999999813735 0))


-- 
Travis K.
From warmerdam at pobox.com  Wed Dec  9 10:01:34 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  9 10:01:37 2009
Subject: [gdal-dev] get_Area() Python
In-Reply-To: <681116190912081350p16c00c64me6ef6ab6eae651e7@mail.gmail.com>
References: <681116190912081350p16c00c64me6ef6ab6eae651e7@mail.gmail.com>
Message-ID: <4B1FBBCE.7040109@pobox.com>

Travis Kirstine wrote:
> Hi all,
> I'm trying a simple python script to calculate the polygon areas.  Are
> the swig bindings for python working because is returning the geometry
> type as -2147483645 the dimension and 2 for a 3d feature and the
> get_Area returns a error?
...
>     area = geom.get_Area()

Travis,

For reasons that are not at all clear to me this method was named get_Area()
in the C++ API but elsewhere it is GetArea() (C, Python, etc).

Try geom.GetArea().

Does the geometry type not match any of the predefined values?  Note that
the OGR constants for the types are such that the 2.5D bit is the high order
bit and when viewed as a signed value it flips the values negative.  So your
value is actually wkbPolygon25D.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Wed Dec  9 11:28:15 2009
From: joelodom at gmail.com (Joel Odom)
Date: Wed Dec  9 11:28:21 2009
Subject: [gdal-dev] Changing CURL options
Message-ID: <d422b4500912090828r1023a6d9wf0cc73bea69a4e98@mail.gmail.com>

Is there a good way to change CURL options at run-time?  We're using the
pre-built GDAL binaries, and I need to change the CURL behavior when I call
into GDAL from FalconView.  Specifically, I want to disable SSL certificate
verification.  Thanks for any help on this.


-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091209/7235c0a9/attachment.html
From warmerdam at pobox.com  Wed Dec  9 12:12:02 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  9 12:12:08 2009
Subject: [gdal-dev] Changing CURL options
In-Reply-To: <d422b4500912090828r1023a6d9wf0cc73bea69a4e98@mail.gmail.com>
References: <d422b4500912090828r1023a6d9wf0cc73bea69a4e98@mail.gmail.com>
Message-ID: <4B1FDA62.5020203@pobox.com>

Joel Odom wrote:
> Is there a good way to change CURL options at run-time?  We're using the 
> pre-built GDAL binaries, and I need to change the CURL behavior when I 
> call into GDAL from FalconView.  Specifically, I want to disable SSL 
> certificate verification.  Thanks for any help on this.

Joel,

There are some specific options that can be controlled via passed in
options to the CPLHTTPFetch() function but this does not appear to be
one of them.  I vaguely recall some curl options being overrideable
via some sort of dot file in the user home directory and/or environment
variables.  You might want to read up on this in the Curl docs.  If not,
you can pretty easily locally modify CPLHTTPFetch() in gdal/port/cpl_http.cpp.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tappenbeck at widemann.de  Wed Dec  9 12:34:36 2009
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Wed Dec  9 12:35:11 2009
Subject: [gdal-dev] merge two black/white image -> result only black
Message-ID: <4B1FDFAC.4060203@widemann.de>

hallo !

i had two tif-image and want to merge them:

d:\cad\FWTools2.4.6>gdalinfo c:\temp\geesthacht\586922g.tif
Driver: GTiff/GeoTIFF
Files: c:\temp\geesthacht\586922g.tif
       c:\temp\geesthacht\586922g.tfw
Size is 8000, 8000
Coordinate System is `'
Origin = (3585999.875000000000000,5924000.125000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
  INTERLEAVE=BAND
  MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 3585999.875, 5924000.125)
Lower Left  ( 3585999.875, 5922000.125)
Upper Right ( 3587999.875, 5924000.125)
Lower Right ( 3587999.875, 5922000.125)
Center      ( 3586999.875, 5923000.125)
Band 1 Block=8000x1 Type=Byte, ColorInterp=Palette
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255
-----------------------------

d:\cad\FWTools2.4.6>gdalinfo c:\temp\geesthacht\586922h.tif
Driver: GTiff/GeoTIFF
Files: c:\temp\geesthacht\586922h.tif
       c:\temp\geesthacht\586922h.tfw
Size is 8000, 8000
Coordinate System is `'
Origin = (3585999.875000000000000,5924000.125000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Metadata:
  TIFFTAG_SOFTWARE=IrfanView
  TIFFTAG_XRESOLUTION=508
  TIFFTAG_YRESOLUTION=508
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Image Structure Metadata:
  COMPRESSION=CCITTFAX4
  INTERLEAVE=BAND
  MINISWHITE=YES
Corner Coordinates:
Upper Left  ( 3585999.875, 5924000.125)
Lower Left  ( 3585999.875, 5922000.125)
Upper Right ( 3587999.875, 5924000.125)
Lower Right ( 3587999.875, 5922000.125)
Center      ( 3586999.875, 5923000.125)
Band 1 Block=8000x1 Type=Byte, ColorInterp=Palette
  Image Structure Metadata:
    NBITS=1
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255

i merge with gdal_merge by following command:

d:\cad\FWTools2.4.6>gdal_merge -v -o C:\temp\geesthacht\gh_test.tif -of 
GTiff -co COMPRESS=LZW c:\temp\geesthacht\586922g.tif 
c:\temp\geesthacht\586922h.tif

but when i open the resultfile it is black-complete! !

d:\cad\FWTools2.4.6>gdalinfo c:\temp\geesthacht\gh_test1.tif
Driver: GTiff/GeoTIFF
Files: c:\temp\geesthacht\gh_test1.tif
Size is 8000, 8000
Coordinate System is `'
Origin = (3585999.875000000000000,5924000.125000000000000)
Pixel Size = (0.250000000000000,-0.250000000000000)
Image Structure Metadata:
  COMPRESSION=LZW
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  ( 3585999.875, 5924000.125)
Lower Left  ( 3585999.875, 5922000.125)
Upper Right ( 3587999.875, 5924000.125)
Lower Right ( 3587999.875, 5922000.125)
Center      ( 3586999.875, 5923000.125)
Band 1 Block=8000x1 Type=Byte, ColorInterp=Gray


can anybody tell me why ?????

regards Jan :-)

From even.rouault at mines-paris.org  Wed Dec  9 12:45:54 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  9 12:46:42 2009
Subject: [gdal-dev] merge two black/white image -> result only black
In-Reply-To: <4B1FDFAC.4060203@widemann.de>
References: <4B1FDFAC.4060203@widemann.de>
Message-ID: <4B1FE252.1070102@mines-paris.org>

Jan,

I see 2 issues :
1) your 2 images have the same spatial extent ! So gdal_merge has 
nothing to merge really... It will just copy the data from the second 
image on top of the data from the first image I think.
2) the images have a color table. But by default, gdal_merge doesn't 
copy it to the target file. You'd have to add the -pct option on the 
command line for that.

Best regards,

Even

Jan Tappenbeck a ?crit :
> hallo !
>
> i had two tif-image and want to merge them:
>
> d:\cad\FWTools2.4.6>gdalinfo c:\temp\geesthacht\586922g.tif
> Driver: GTiff/GeoTIFF
> Files: c:\temp\geesthacht\586922g.tif
>       c:\temp\geesthacht\586922g.tfw
> Size is 8000, 8000
> Coordinate System is `'
> Origin = (3585999.875000000000000,5924000.125000000000000)
> Pixel Size = (0.250000000000000,-0.250000000000000)
> Metadata:
>  TIFFTAG_SOFTWARE=IrfanView
>  TIFFTAG_XRESOLUTION=508
>  TIFFTAG_YRESOLUTION=508
>  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>  COMPRESSION=CCITTFAX4
>  INTERLEAVE=BAND
>  MINISWHITE=YES
> Corner Coordinates:
> Upper Left  ( 3585999.875, 5924000.125)
> Lower Left  ( 3585999.875, 5922000.125)
> Upper Right ( 3587999.875, 5924000.125)
> Lower Right ( 3587999.875, 5922000.125)
> Center      ( 3586999.875, 5923000.125)
> Band 1 Block=8000x1 Type=Byte, ColorInterp=Palette
>  Image Structure Metadata:
>    NBITS=1
>  Color Table (RGB with 2 entries)
>    0: 255,255,255,255
>    1: 0,0,0,255
> -----------------------------
>
> d:\cad\FWTools2.4.6>gdalinfo c:\temp\geesthacht\586922h.tif
> Driver: GTiff/GeoTIFF
> Files: c:\temp\geesthacht\586922h.tif
>       c:\temp\geesthacht\586922h.tfw
> Size is 8000, 8000
> Coordinate System is `'
> Origin = (3585999.875000000000000,5924000.125000000000000)
> Pixel Size = (0.250000000000000,-0.250000000000000)
> Metadata:
>  TIFFTAG_SOFTWARE=IrfanView
>  TIFFTAG_XRESOLUTION=508
>  TIFFTAG_YRESOLUTION=508
>  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
> Image Structure Metadata:
>  COMPRESSION=CCITTFAX4
>  INTERLEAVE=BAND
>  MINISWHITE=YES
> Corner Coordinates:
> Upper Left  ( 3585999.875, 5924000.125)
> Lower Left  ( 3585999.875, 5922000.125)
> Upper Right ( 3587999.875, 5924000.125)
> Lower Right ( 3587999.875, 5922000.125)
> Center      ( 3586999.875, 5923000.125)
> Band 1 Block=8000x1 Type=Byte, ColorInterp=Palette
>  Image Structure Metadata:
>    NBITS=1
>  Color Table (RGB with 2 entries)
>    0: 255,255,255,255
>    1: 0,0,0,255
>
> i merge with gdal_merge by following command:
>
> d:\cad\FWTools2.4.6>gdal_merge -v -o C:\temp\geesthacht\gh_test.tif 
> -of GTiff -co COMPRESS=LZW c:\temp\geesthacht\586922g.tif 
> c:\temp\geesthacht\586922h.tif
>
> but when i open the resultfile it is black-complete! !
>
> d:\cad\FWTools2.4.6>gdalinfo c:\temp\geesthacht\gh_test1.tif
> Driver: GTiff/GeoTIFF
> Files: c:\temp\geesthacht\gh_test1.tif
> Size is 8000, 8000
> Coordinate System is `'
> Origin = (3585999.875000000000000,5924000.125000000000000)
> Pixel Size = (0.250000000000000,-0.250000000000000)
> Image Structure Metadata:
>  COMPRESSION=LZW
>  INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  ( 3585999.875, 5924000.125)
> Lower Left  ( 3585999.875, 5922000.125)
> Upper Right ( 3587999.875, 5924000.125)
> Lower Right ( 3587999.875, 5922000.125)
> Center      ( 3586999.875, 5923000.125)
> Band 1 Block=8000x1 Type=Byte, ColorInterp=Gray
>
>
> can anybody tell me why ?????
>
> regards Jan :-)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


From warmerdam at pobox.com  Wed Dec  9 12:50:15 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  9 12:50:54 2009
Subject: [gdal-dev] merge two black/white image -> result only black
In-Reply-To: <4B1FDFAC.4060203@widemann.de>
References: <4B1FDFAC.4060203@widemann.de>
Message-ID: <4B1FE357.90006@pobox.com>

Jan Tappenbeck wrote:
> hallo !
> 
> i had two tif-image and want to merge them:
...
> Center      ( 3586999.875, 5923000.125)
> Band 1 Block=8000x1 Type=Byte, ColorInterp=Palette
>  Image Structure Metadata:
>    NBITS=1
>  Color Table (RGB with 2 entries)
>    0: 255,255,255,255
>    1: 0,0,0,255
> 
> i merge with gdal_merge by following command:
> 
> d:\cad\FWTools2.4.6>gdal_merge -v -o C:\temp\geesthacht\gh_test.tif -of 
> GTiff -co COMPRESS=LZW c:\temp\geesthacht\586922g.tif 
> c:\temp\geesthacht\586922h.tif

Jan,

The input images are paletted and for no obvious reason gdal_merge.py
requires you to specify that you want to copy the color table from the
first image to the resulting mosaic with the -pct switch.

Try adding that in your gdal_merge command invocation.

PS. if you looked at your merge in some viewers, I'm sure you would
find some pixels are zero and some are one.  But in many viewers they
will just look like black and so-slightly-less-black as to be
indistinguishable.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From tappenbeck at widemann.de  Wed Dec  9 14:17:48 2009
From: tappenbeck at widemann.de (Jan Tappenbeck)
Date: Wed Dec  9 14:17:53 2009
Subject: [gdal-dev] merge ground and elevation image
Message-ID: <4B1FF7DC.2060708@widemann.de>

Hi !

i have two  black/white images with ground and elevation - and the 
background is white.

when i merge this two with gdal_merge i see in the result only one of 
this informations ground or elevation.

did anybody now a way to merge both informations with a white background 
in the result?

regards Jan :-)

From alfreale74 at gmail.com  Wed Dec  9 14:50:55 2009
From: alfreale74 at gmail.com (Alfredo Alessandrini)
Date: Wed Dec  9 14:50:57 2009
Subject: [gdal-dev] gdal-grass fail to build
Message-ID: <d2c05c5a0912091150i5d868791j2b2a14b077a79a4a@mail.gmail.com>

Hi,

The build failed when I try to compile gdal-grass.

alfredo@astore:~/alfredo/grass_install/gdal-grass-1.4.3$ ./configure
--with-gdal=/usr/local/bin/gdal-config
--with-grass=/usr/local/grass-7.0.svn
checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
checking for g++ -shared ... yes
user supplied gdal-config (/usr/local/bin/gdal-config)
using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
checking for G_asprintf in -lgrass_gis... no
configure: error: --with-grass=/usr/local/grass-7.0.svn requested, but
libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
include /usr/local/grass-7.0.svn/lib?
From warmerdam at pobox.com  Wed Dec  9 15:01:01 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec  9 15:01:10 2009
Subject: [gdal-dev] gdal-grass fail to build
In-Reply-To: <d2c05c5a0912091150i5d868791j2b2a14b077a79a4a@mail.gmail.com>
References: <d2c05c5a0912091150i5d868791j2b2a14b077a79a4a@mail.gmail.com>
Message-ID: <4B2001FD.5030800@pobox.com>

Alfredo Alessandrini wrote:
> Hi,
> 
> The build failed when I try to compile gdal-grass.
> 
> alfredo@astore:~/alfredo/grass_install/gdal-grass-1.4.3$ ./configure
> --with-gdal=/usr/local/bin/gdal-config
> --with-grass=/usr/local/grass-7.0.svn
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking for g++... g++
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> checking for ranlib... ranlib
> checking for g++ -shared ... yes
> user supplied gdal-config (/usr/local/bin/gdal-config)
> using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/usr/local/grass-7.0.svn requested, but
> libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
> include /usr/local/grass-7.0.svn/lib?

Alfredo,

I'll assume you read the last message and considered that before
emailing the 1000 people on this list.

The next usual step is to examine the config.log file.  Try searching it
for G_asprintf().  You will hopefully find the results of a failed link
attempt of a small test program that calls G_asprintf(), and hopefully
those errors will provide a clue as to what is missing.

It could be an issue where a newer GRASS depends on a different set of
libraries, or where something is missing on your system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Dec  9 15:16:24 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec  9 15:17:50 2009
Subject: [gdal-dev] gdal-grass fail to build
In-Reply-To: <d2c05c5a0912091150i5d868791j2b2a14b077a79a4a@mail.gmail.com>
References: <d2c05c5a0912091150i5d868791j2b2a14b077a79a4a@mail.gmail.com>
Message-ID: <4B200598.3070500@mines-paris.org>

I'm pretty sure that the gdal-grass-1.4.3 package is likely not recent 
enough to be compatible with recent GRASS.

You probably need the version of the grass driver from the GDAL SVN 
trunk where there were changes a few months ago to build against newer 
GRASS.

Alfredo Alessandrini a ?crit :
> Hi,
>
> The build failed when I try to compile gdal-grass.
>
> alfredo@astore:~/alfredo/grass_install/gdal-grass-1.4.3$ ./configure
> --with-gdal=/usr/local/bin/gdal-config
> --with-grass=/usr/local/grass-7.0.svn
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking for g++... g++
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> checking for ranlib... ranlib
> checking for g++ -shared ... yes
> user supplied gdal-config (/usr/local/bin/gdal-config)
> using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/usr/local/grass-7.0.svn requested, but
> libraries not found!  Perhaps you need to set LD_LIBRARY_PATH to
> include /usr/local/grass-7.0.svn/lib?
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>   


From zstauber at bhinc.com  Wed Dec  9 15:43:22 2009
From: zstauber at bhinc.com (Zack Stauber)
Date: Wed Dec  9 15:43:24 2009
Subject: [Gdal-dev] Programming with GDAL in Windows XP using DEV-C++ or
	CodeBlocks
In-Reply-To: <1253685551510-3697752.post@n2.nabble.com>
References: <1253685551510-3697752.post@n2.nabble.com>
Message-ID: <1260391402567-4141840.post@n2.nabble.com>


I've programmed against the binary FWTools installs under Windows using
Visual Studio 2005.  It's a bit easier for me than linking against the GDAL
source because I couldn't manage to find and configure the correct versions
of all the extra stuff that's in FWTools that I use, like the MrSID SDK,
Boost, JPEG and TIFF libs, Jasper, and all that.  Now anything I compile
just looks for a few DLL's under C:\Program Files\FWTools or C:\Program
Files(x86)\FWTools and works.

If you're using C++ just go into your project properties (not solution
properties) set the Configuration to "All Configurations, then under C/C++
General add:
"$(ProgramFiles)\FWTools2.4.6\include" to your additional include
directories
then under Linker General
"$(ProgramFiles)\FWTools2.4.6\lib" to your additional library directories
and under Linker Input
gdal_i.lib geos_i.lib (at least) to your additional dependencies

Now under any *.cpp source file, add
#include "gdal.h"
And whatever other .h files have the functions you need to use.  ogr_api.h
will have most of the vector stuff, but for rasters gdal.h will probably do
it.

I know you said CodeBlocks, but maybe it is similar.  There is a free
version of Visual Studio Express that works the same way for C++ so in a
pinch it can still all be pretty cheap.
-- 
View this message in context: http://n2.nabble.com/Programming-with-GDAL-in-Windows-XP-using-DEV-C-or-CodeBlocks-tp3697752p4141840.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Sjur.A.Kolberg at sintef.no  Wed Dec  9 18:47:56 2009
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Wed Dec  9 18:49:03 2009
Subject: [gdal-dev] GDALOpen crash on large GRIB files
Message-ID: <72251B925CE10A478606EEAC6AA683BE178ACC9410@SINTEFEXMBX01.sintef.no>


Hello, list:

I have problems reading some large GRIB files from ECMWF. I have several files, 29MB and 50MB works fine, 141 MB and above crashes. The crash is within the first GDALOpen() function, and I track it through GRIBDataset::Open() to GDALDataset::Setband(). The error arises in the last statement given below, and because papoBands==NULL. By the two breakpoints I can tell that papoBands is not NULL when entering the SetBand() function, so it seems to be the VSIRealloc function that returns NULL. The error doesn't occur for the same band each time I try, but typically runs to band number somewhere around 50000. (bandno is a combined index of forecast reference time, forecast lead time and variable).

I run GDAL 1.6.3 on Windows XP, compiled with Visual Studio 2008. The error appears both in debug and release version. The application uses about 144 MB when it crashes, but has been up to a peak memory usage of 283 MB before the crash. I have 3.5 GB memory on the PC, of which 2.5 appears to be available. Both GDAL and the application is compiled with extended memory sizes and /LARGEADDRESSAWARE, but I am not sure about how this works. The error message is:

Unhandled exception at 0x30c36acd (gdal16d-vc9.dll) in RegModel.exe: 0xC0000005: Access violation writing location 0x00036c74.

Has anyone had similar problems?
Best regards,
Sjur K :-)



void GDALDataset::SetBand( int nNewBand, GDALRasterBand * poBand )

{

/* -------------------------------------------------------------------- */

/* Do we need to grow the bands list? */

/* -------------------------------------------------------------------- */

if( nBands < nNewBand || papoBands == NULL ) {

    int i;

    if( papoBands == NULL )

        papoBands = (GDALRasterBand **)  /* Breakpoint before this statement */

            VSICalloc(sizeof(GDALRasterBand*), MAX(nNewBand,nBands));

    else

    papoBands = (GDALRasterBand **)

        VSIRealloc(papoBands, sizeof(GDALRasterBand*) *

            MAX(nNewBand,nBands));

    for( i = nBands; i < nNewBand; i++ )   /* Breakpoint before this statement; condition: papoBands=0 */

        papoBands[i] = NULL;    /* Offending statement, papoBands==NULL.



State of poBand at error:

-  poBand 0x357f4228 {start=172766438 subgNum=0 longFstLevel=0x746a3e28 "0[-] SFC (Ground or water surface)" ...} GDALRasterBand *
+  [GRIBRasterBand] {start=172766438 subgNum=0 longFstLevel=0x746a3e28 "0[-] SFC (Ground or water surface)" ...} GRIBRasterBand
+  GDALMajorObject {nFlags=49 sDescription={...} oMDMD={...} } GDALMajorObject
+  poDS 0x3424f4b0 {fp=0x3424fb08 pszProjection=0x35b3ce68 "GEOGCS["Coordinate System imported from GRIB file",DATUM["unknown",SPHEROID["Sphere",6367470,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]" pszDescription=0xcdcdcdcd <Bad Ptr> ...} GDALDataset *
  nBand 56094 int
  nRasterXSize 0 int
  nRasterYSize 0 int
  eDataType GDT_Float64 GDALDataType
  eAccess GA_ReadOnly GDALAccess
  nBlockXSize 45 int
  nBlockYSize 1 int
  nBlocksPerRow 0 int
  nBlocksPerColumn 0 int
  bSubBlockingActive 0 int
  nSubBlocksPerRow 0 int
  nSubBlocksPerColumn 0 int
+  papoBlocks 0x00000000 GDALRasterBlock * *
  nBlockReads 0 int
  bForceCachedIO 0 int
+  poMask 0x00000000 {poDS=??? nBand=??? nRasterXSize=??? ...} GDALRasterBand *
  bOwnMask false bool
  nMaskFlags 0 int

Status of this GDALDataset:

  i -858993460 int
  nBands 49093 int
  nNewBand 49094 int
+  papoBands 0x00000000 GDALRasterBand * *
-  this 0x3424f4b0 {fp=0x3424fab8 pszProjection=0x35b31048 "GEOGCS["Coordinate System imported from GRIB file",DATUM["unknown",SPHEROID["Sphere",6367470,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]" pszDescription=0xcdcdcdcd <Bad Ptr> ...} GDALDataset * const
+  [GRIBDataset] {fp=0x3424fab8 pszProjection=0x35b31048 "GEOGCS["Coordinate System imported from GRIB file",DATUM["unknown",SPHEROID["Sphere",6367470,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]" pszDescription=0xcdcdcdcd <Bad Ptr> ...} GRIBDataset
+  GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} } GDALMajorObject
+  poDriver 0x00000000 {pfnOpen=??? pfnCreate=??? pfnDelete=??? ...} GDALDriver *
  eAccess GA_ReadOnly GDALAccess
  nRasterXSize 45 int
  nRasterYSize 33 int
  nBands 49093 int
+  papoBands 0x00000000 GDALRasterBand * *
  bForceCachedIO 0 int
  nRefCount 1 int
  bShared 0 int
+  oOvManager {poDS=0x00000000 poODS=0x00000000 osOvrFilename={...} ...} GDALDefaultOverviews






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091210/ca9262e3/attachment.html
From Roger.Bivand at nhh.no  Thu Dec 10 04:25:31 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Dec 10 04:25:36 2009
Subject: [gdal-dev] 1.7.0 MSYS build broken in GPX
Message-ID: <alpine.LRH.2.00.0912101015480.3681@reclus.nhh.no>

Hi,

I've probably missed something, but while 1.6.3 builds OK with EXPAT for 
GPX on MSYS, 1.7.0 revision 18238 doesn't. The problem is in:

libtool: compile:  g++ -O2 -Wall -I.. -I../.. -I/usr/local/include 
-I/home/s1155 /gdal_svn/gdal/port -I/home/s1155/gdal_svn/gdal/gcore 
-I/home/s1155/gdal_svn/gdal/alg -I/home/s1155/gdal_svn/gdal/ogr 
-I/home/s1155/gdal_svn/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
-I/home/s1155/gdal_svn/gdal/port -DHAVE_EXPAT -c ogrgpxlayer.cpp
-DDLL_EXPORT -DPIC -o ../o/.libs/ogrgpxlayer.o
ogrgpxlayer.cpp: In function 'char* OGRGPX_GetUTF8String(const char*)':
ogrgpxlayer.cpp:1088: error: 'CPLIsUTF8' was not declared in this scope
ogrgpxlayer.cpp:1106: error: 'CPLForceToASCII' was not declared in this 
scope
make[3]: *** [../o/ogrgpxlayer.lo] Error 1

I can't see why CPLIsUTF8 is not being picked up from port/cpl_strings.h. 
These are recent changes - has anyone else seen the problem?

Motivation - trying to build an rgdal Windows binary using MSYS in the 
usual way to let R/SAGA people try out the GDAL SAGA driver. I could drop 
expat for now, but I'll need it again when 1.7.0 is released for GPX and 
KML.

Grateful for pointers,

Roger

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From even.rouault at mines-paris.org  Thu Dec 10 06:34:22 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Dec 10 06:35:06 2009
Subject: [gdal-dev] (no subject)
Message-ID: <1260444862.4b20dcbec21da@imp.free.fr>

Roger,

this is weird indeed as I use daily MSYS on trunk... I'd bet that you have  an
installed version of cpl_string.h in /usr/local/include that corresponds to the
1.6.3 version that didn't have the CPLIsUTF8 and CPLForceToASCII symbols. If
you've done a make install when building 1.6.3 before, it would have gone there.
And as -I/usr/local/include is before -I/home/s1155/gdal_svn/gdal/port on the
GCC command line, the old version would be picked up. I'd recommand you to use
--prefix when you configure to be able easily to switch between different
versions to avoid installing stuff in "system" directories.

Best regards,

Even

From Roger.Bivand at nhh.no  Thu Dec 10 08:21:26 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Dec 10 08:21:30 2009
Subject: [gdal-dev] Re: your mail
In-Reply-To: <1260444862.4b20dcbec21da@imp.free.fr>
References: <1260444862.4b20dcbec21da@imp.free.fr>
Message-ID: <alpine.LRH.2.00.0912101419490.3176@reclus.nhh.no>

On Thu, 10 Dec 2009, Even Rouault wrote:

> Roger,
>
> this is weird indeed as I use daily MSYS on trunk... I'd bet that you have  an
> installed version of cpl_string.h in /usr/local/include that corresponds to the
> 1.6.3 version that didn't have the CPLIsUTF8 and CPLForceToASCII symbols. If
> you've done a make install when building 1.6.3 before, it would have gone there.
> And as -I/usr/local/include is before -I/home/s1155/gdal_svn/gdal/port on the
> GCC command line, the old version would be picked up. I'd recommand you to use
> --prefix when you configure to be able easily to switch between different
> versions to avoid installing stuff in "system" directories.

Even,

Thanks, removing the 1.6.3 headers in local/include resolved the problem. 
Would re-ordering the directories included be a safety-first policy?

Best wishes,

Roger

>
> Best regards,
>
> Even
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From Roger.Bivand at nhh.no  Thu Dec 10 08:55:01 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Dec 10 08:55:04 2009
Subject: [gdal-dev] Re: your mail
In-Reply-To: <alpine.LRH.2.00.0912101419490.3176@reclus.nhh.no>
References: <1260444862.4b20dcbec21da@imp.free.fr>
	<alpine.LRH.2.00.0912101419490.3176@reclus.nhh.no>
Message-ID: <alpine.LRH.2.00.0912101454180.3176@reclus.nhh.no>

On Thu, 10 Dec 2009, Roger Bivand wrote:

> On Thu, 10 Dec 2009, Even Rouault wrote:
>
>> Roger,
>> 
>> this is weird indeed as I use daily MSYS on trunk... I'd bet that you have 
>> an
>> installed version of cpl_string.h in /usr/local/include that corresponds to 
>> the
>> 1.6.3 version that didn't have the CPLIsUTF8 and CPLForceToASCII symbols. 
>> If
>> you've done a make install when building 1.6.3 before, it would have gone 
>> there.
>> And as -I/usr/local/include is before -I/home/s1155/gdal_svn/gdal/port on 
>> the
>> GCC command line, the old version would be picked up. I'd recommand you to 
>> use
>> --prefix when you configure to be able easily to switch between different
>> versions to avoid installing stuff in "system" directories.
>
> Even,
>
> Thanks, removing the 1.6.3 headers in local/include resolved the problem. 
> Would re-ordering the directories included be a safety-first policy?

A draft Windows binary rgdal package is at:

http://spatial.nhh.no/R/Devel/rgdal_0.6-23.zip

Roger

>
> Best wishes,
>
> Roger
>
>> 
>> Best regards,
>> 
>> Even
>> 
>> 
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From alan.stratford at goodrich.com  Thu Dec 10 09:59:45 2009
From: alan.stratford at goodrich.com (Alans)
Date: Thu Dec 10 09:59:48 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
Message-ID: <1260457185258-4145777.post@n2.nabble.com>


I am trying to build gdal on SUSE LINUX Enterprise Server 10 and I get the
following error. I have tried 1.6.3 and the latest daily build. Both give
the same error.

alan@stratford:~/gdal/gdal-1.6.3 47% gmake
(cd port; gmake)
gmake[1]: Entering directory `/nashome/alan/gdal/gdal-1.6.3/port'
/bin/sh /nashome/alan/gdal/gdal-1.6.3/libtool --mode=compile --tag=CXX g++
-g -O2  -Wall  -DOGR_ENABLED -I/nashome/alan/gdal/gdal-1.6.3/port -I
-I/include      -DHAVE_CURL -DHAVE_LIBZ -c -o cpl_conv.lo cpl_conv.cpp
libtool: clean: rmdir .libs >/dev/null 2>&1
libtool: clean: rmdir .libs >/dev/null 2>&1
libtool: compile:  g++ -g -O2 -Wall -DOGR_ENABLED
-I/nashome/alan/gdal/gdal-1.6.3/port -I -I/include -DHAVE_CURL -DHAVE_LIBZ
-c cpl_conv.cpp  -fPIC -DPIC -o .libs/cpl_conv.o
Assembler messages:
FATAL: can't create .libs/cpl_conv.o: No such file or directory
gmake[1]: *** [cpl_conv.lo] Error 1
gmake[1]: Leaving directory `/nashome/alan/gdal/gdal-1.6.3/port'
gmake: *** [port-target] Error 2
alan@stratford:~/gdal/gdal-1.6.3 48%

The problem seems to be that the port/.libs directory is removed before an
attempt to create a file in that directory. I am not sufficiently proficient
with makefiles to diagnose the problem. Could it be something wrong with my
configuration, or the fact that I am using SLES 10?

I have tried adding a dummy file to the port/.libs directory to make the rm
fail. This just causes a failure in the next director (i.e. gcore/.libs).

Any ideas?

-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4145777.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Thu Dec 10 10:11:41 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 10 10:11:47 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <1260457185258-4145777.post@n2.nabble.com>
References: <1260457185258-4145777.post@n2.nabble.com>
Message-ID: <4B210FAD.2020206@pobox.com>

Alans wrote:
> I am trying to build gdal on SUSE LINUX Enterprise Server 10 and I get the
> following error. I have tried 1.6.3 and the latest daily build. Both give
> the same error.
> 
> alan@stratford:~/gdal/gdal-1.6.3 47% gmake
> (cd port; gmake)
> gmake[1]: Entering directory `/nashome/alan/gdal/gdal-1.6.3/port'
> /bin/sh /nashome/alan/gdal/gdal-1.6.3/libtool --mode=compile --tag=CXX g++
> -g -O2  -Wall  -DOGR_ENABLED -I/nashome/alan/gdal/gdal-1.6.3/port -I
> -I/include      -DHAVE_CURL -DHAVE_LIBZ -c -o cpl_conv.lo cpl_conv.cpp
> libtool: clean: rmdir .libs >/dev/null 2>&1
> libtool: clean: rmdir .libs >/dev/null 2>&1
> libtool: compile:  g++ -g -O2 -Wall -DOGR_ENABLED
> -I/nashome/alan/gdal/gdal-1.6.3/port -I -I/include -DHAVE_CURL -DHAVE_LIBZ
> -c cpl_conv.cpp  -fPIC -DPIC -o .libs/cpl_conv.o
> Assembler messages:
> FATAL: can't create .libs/cpl_conv.o: No such file or directory
> gmake[1]: *** [cpl_conv.lo] Error 1
> gmake[1]: Leaving directory `/nashome/alan/gdal/gdal-1.6.3/port'
> gmake: *** [port-target] Error 2
> alan@stratford:~/gdal/gdal-1.6.3 48%
> 
> The problem seems to be that the port/.libs directory is removed before an
> attempt to create a file in that directory. I am not sufficiently proficient
> with makefiles to diagnose the problem. Could it be something wrong with my
> configuration, or the fact that I am using SLES 10?
> 
> I have tried adding a dummy file to the port/.libs directory to make the rm
> fail. This just causes a failure in the next director (i.e. gcore/.libs).

Alan,

This is very odd - I've never seen something quite like it.

One work around would likely be to configure GDAL --without-libtool.  I
wonder if 1.6.3 got released with an unstable libtool version.  Could you
try 1.6.2 on this system and see if that works?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alan.stratford at goodrich.com  Thu Dec 10 10:15:25 2009
From: alan.stratford at goodrich.com (Alans)
Date: Thu Dec 10 10:15:26 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <4B210FAD.2020206@pobox.com>
References: <1260457185258-4145777.post@n2.nabble.com>
	<4B210FAD.2020206@pobox.com>
Message-ID: <1260458125291-4145859.post@n2.nabble.com>




Frank Warmerdam wrote:
> 
> 
> This is very odd - I've never seen something quite like it.
> 
> One work around would likely be to configure GDAL --without-libtool.  I
> wonder if 1.6.3 got released with an unstable libtool version.  Could you
> try 1.6.2 on this system and see if that works?
> 

Thanks Frank,

I will try 1.6.2 and get back to you.

Alan
-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4145859.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From alan.stratford at goodrich.com  Thu Dec 10 10:29:59 2009
From: alan.stratford at goodrich.com (Alans)
Date: Thu Dec 10 10:30:02 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <1260458125291-4145859.post@n2.nabble.com>
References: <1260457185258-4145777.post@n2.nabble.com>
	<4B210FAD.2020206@pobox.com>
	<1260458125291-4145859.post@n2.nabble.com>
Message-ID: <1260458999635-4145944.post@n2.nabble.com>




Alans wrote:
> 
> 
> 
> Frank Warmerdam wrote:
>> 
>> 
>> This is very odd - I've never seen something quite like it.
>> 
>> One work around would likely be to configure GDAL --without-libtool.  I
>> wonder if 1.6.3 got released with an unstable libtool version.  Could you
>> try 1.6.2 on this system and see if that works?
>> 
> 
> Thanks Frank,
> 
> I will try 1.6.2 and get back to you.
> 
> Alan
> 

Yep. 1.6.2 has exactly the same error.

-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4145944.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pcreso at pcreso.com  Thu Dec 10 10:44:20 2009
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Thu Dec 10 10:51:03 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <1260458125291-4145859.post@n2.nabble.com>
Message-ID: <870160.58482.qm@web33207.mail.mud.yahoo.com>

Hi Alan, 

This doesn't fix you problem specifically, but may help.

We usually use the packages from the OpenSuse Geo repository, which has SLES specific builds available. (We are using SLES for most Linux servers in our organisation)

See:  http://download.opensuse.org/repositories/Application:/Geo/SLE_10/

This saves either compiling from source or building our own SLES packages.

If we need something, like a new version which is not there, I have found the repository maintainers are very responsive to requests to provide updates & new packages.

While I like OpenSuse anyway, as a FOSS GIS "specialist" the Geo repository is the main reason I primarily use OpenSuse as a Linux distro. 


Cheers,
  
  Brent Wood


--- On Fri, 12/11/09, Alans <alan.stratford@goodrich.com> wrote:

> From: Alans <alan.stratford@goodrich.com>
> Subject: Re: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
> To: gdal-dev@lists.osgeo.org
> Date: Friday, December 11, 2009, 4:15 AM
> 
> 
> 
> Frank Warmerdam wrote:
> > 
> > 
> > This is very odd - I've never seen something quite
> like it.
> > 
> > One work around would likely be to configure GDAL
> --without-libtool.? I
> > wonder if 1.6.3 got released with an unstable libtool
> version.? Could you
> > try 1.6.2 on this system and see if that works?
> > 
> 
> Thanks Frank,
> 
> I will try 1.6.2 and get back to you.
> 
> Alan
> -- 
> View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4145859.html
> Sent from the GDAL - Dev mailing list archive at
> Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
From warmerdam at pobox.com  Thu Dec 10 12:48:32 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 10 12:48:27 2009
Subject: [gdal-dev] New OSGeo4W Package, virtual io activity, beta
Message-ID: <4B213470.6070707@pobox.com>

Folks,

I have prepared a new OSGeo4W "gdal-dev" package capturing the state
of GDAL as of lunchtime today.  This is a windows package as part of
OSGeo4W.  To use it install OSGeo4W and in the advanced install add
the "gdal-dev" package.  Then in the OSGeo4W command shell type "gdaldev"
to switch to the current development status package.

   http://osgeo4w.osgeo.org/

I also made a small change today to have "gdalinfo --formats" report drivers
that support virtual io.  Virtual IO support in a driver means that the
driver does all it's io through the VSI*L virtual io layer,and that it
can be used for memory access (/vsimem), reading from gzip files or zip files
(/vsigzip, /vsizip) and potentially other io virtualization games.

Relatively few formats report support for virtual io but that is mostly because
we have not made a consistent effort to set the GDAL_DCAP_VIRTUALIO metadata
on drivers that do support it in the past.  I am hoping we can make a push to
flesh this out.  A quick way to test (read) virtual io access is to put the
data file (say test.tif) in a directory by itself (say testdir) and then
do:

   gdalinfo --mempreload testdir /vsimem/test.tif

the --mempreload switch tells gdalinfo to first load all files in the named
directory into memory under the /vsimem/ virtual directory.  So in the above
case we would see the test.tif file being accessed through virtual io.

A safe driver can be marked in the registration method with a line like:

   poDriver->SetMetadataItem(GDAL_DCAP_VIRTUALIO, "YES");

Currently the only application I know of that makes use of this is the
MapServer WCS 1.1 support which uses this as a clue that working results
do not need to be written to disk.  But I'd like to make this more trustworthy
for other applications to use.

Lastly, our Beta1 date of December 8th went by without anyone acting on it.
I shall attempt to package a Beta1 tomorrow morning or afternoon.

Best regard,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Doug_Newcomb at fws.gov  Thu Dec 10 13:47:20 2009
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Thu Dec 10 13:47:36 2009
Subject: [gdal-dev] Re: CUDA PyCUDA and GDAL
In-Reply-To: <4B1D4879.6070707@pobox.com>
Message-ID: <OF1F0C494C.7AABE41D-ON85257688.00671687-85257688.00673614@fws.gov>


>Folks,

>I would note that large -wm values can be very counter productive when
>used in combination with SKIP_NOSOURCE.  The problem is that the larger
>the chunk size, you run into the chance that a large window will intersect
>a small amount of data and the whole window ends up being processed - most
>of it without any real work to do.

>Best regards,
>--
>---------------------------------------+--------------------------------------

>I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent

Frank,
      As always, thanks for the insight.
Doug


______________________________________________
Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of the
Interior.   Life is too short for undocumented, proprietary data formats.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091210/6ebde4c5/attachment.html
From sweet at sfos.uaf.edu  Thu Dec 10 14:14:39 2009
From: sweet at sfos.uaf.edu (Steve Sweet)
Date: Thu Dec 10 14:30:21 2009
Subject: [gdal-dev] linking problem with gdal
Message-ID: <4B21489F.9080408@sfos.uaf.edu>

I'm having the same problem described in this posting to the mailing 
list: http://lists.osgeo.org/pipermail/gdal-dev/2009-July/021247.html. 

I've tried a variety of versions of gdal and libdap but I get the same 
result each time.  My OS is a fresh install of Centos 5.4 and my most 
recent compilation attempts were with libdap-3.8.2 and gdal-1.5.2 
following the steps I used to successfully compile under Centos 5.3.  
Does anyone have any idea where to start looking? 

Thanks.
From sweet at sfos.uaf.edu  Thu Dec 10 16:37:28 2009
From: sweet at sfos.uaf.edu (Steve Sweet)
Date: Thu Dec 10 16:37:30 2009
Subject: [gdal-dev] linking problem with gdal
In-Reply-To: <4B21489F.9080408@sfos.uaf.edu>
References: <4B21489F.9080408@sfos.uaf.edu>
Message-ID: <4B216A18.6030805@sfos.uaf.edu>

So, just like you immediately find something you've lost right after you 
buy its replacement, about 15 minutes after posting this question I 
discovered the solution.  I didn't realize it but my fresh OS install 
had the rpm versions of libdap on it.  So even though the linker knew 
about the version I had just built, it was trying to link to the wrong 
one.  I removed the rpm version, re-ran ldconfig and the gdal build 
finished fine.

Steve Sweet wrote:
> I'm having the same problem described in this posting to the mailing 
> list: http://lists.osgeo.org/pipermail/gdal-dev/2009-July/021247.html.
> I've tried a variety of versions of gdal and libdap but I get the same 
> result each time.  My OS is a fresh install of Centos 5.4 and my most 
> recent compilation attempts were with libdap-3.8.2 and gdal-1.5.2 
> following the steps I used to successfully compile under Centos 5.3.  
> Does anyone have any idea where to start looking?
> Thanks.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From adamkubach at gmail.com  Thu Dec 10 23:21:25 2009
From: adamkubach at gmail.com (Adam Kubach)
Date: Thu Dec 10 23:21:29 2009
Subject: [gdal-dev] RasterIO slower on Windows
Message-ID: <4e18cf4e0912102021l728967efm84b55f1e31ad7ede@mail.gmail.com>

Hi,

It appears that my calls to RasterIO are about 10 times slower on
Windows than Linux when reading from the same dataset.  I wouldn't
think that there would be a noticeable difference.  Has anyone else
seen this?  Is it possible that the overviews aren't being used on
Windows?  Is there anyway I can verify that they are being used (Other
than a debugger)?

Thanks,
Adam
From Sjur.A.Kolberg at sintef.no  Fri Dec 11 07:47:41 2009
From: Sjur.A.Kolberg at sintef.no (Sjur Kolberg)
Date: Fri Dec 11 07:47:46 2009
Subject: [gdal-dev] RE: GDALOpen crash on large GRIB files - workaround
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE178ACC9410@SINTEFEXMBX01.sintef.no>
References: <72251B925CE10A478606EEAC6AA683BE178ACC9410@SINTEFEXMBX01.sintef.no>
Message-ID: <72251B925CE10A478606EEAC6AA683BE17BD184955@SINTEFEXMBX01.sintef.no>


Hi again,

This was obviously not a known problem. What we ended up with was to split the GRIB files up in smaller pieces using another software and importing bit by bit using GDAL. During the work we also had memory allocation problems in plain C++ code (myarray = new float[alotofcells]; gives "Out of memory" exception), so it seems that it is Windows that is not too happy with allocating large memory chunks. This amount of memory space, I guess, is most often needed by meteorological formats like grib, NetCDF or HDF, which are not too extensively used on Windows.

Does GDAL, or the drivers of often-large files, offer any possibility to restrict the subset of bands before calling GDALOpen() on the file?

Best regards,

Sjur K :-)


________________________________
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Sjur Kolberg
Sent: 10. desember 2009 00:48
To: gdal-dev@lists.osgeo.org
Cc: Kolbj?rn Engeland
Subject: [gdal-dev] GDALOpen crash on large GRIB files


Hello, list:

I have problems reading some large GRIB files from ECMWF. I have several files, 29MB and 50MB works fine, 141 MB and above crashes. The crash is within the first GDALOpen() function, and I track it through GRIBDataset::Open() to GDALDataset::Setband(). The error arises in the last statement given below, and because papoBands==NULL. By the two breakpoints I can tell that papoBands is not NULL when entering the SetBand() function, so it seems to be the VSIRealloc function that returns NULL. The error doesn't occur for the same band each time I try, but typically runs to band number somewhere around 50000. (bandno is a combined index of forecast reference time, forecast lead time and variable).

I run GDAL 1.6.3 on Windows XP, compiled with Visual Studio 2008. The error appears both in debug and release version. The application uses about 144 MB when it crashes, but has been up to a peak memory usage of 283 MB before the crash. I have 3.5 GB memory on the PC, of which 2.5 appears to be available. Both GDAL and the application is compiled with extended memory sizes and /LARGEADDRESSAWARE, but I am not sure about how this works. The error message is:

Unhandled exception at 0x30c36acd (gdal16d-vc9.dll) in RegModel.exe: 0xC0000005: Access violation writing location 0x00036c74.

Has anyone had similar problems?
Best regards,
Sjur K :-)



void GDALDataset::SetBand( int nNewBand, GDALRasterBand * poBand )

{

/* -------------------------------------------------------------------- */

/* Do we need to grow the bands list? */

/* -------------------------------------------------------------------- */

if( nBands < nNewBand || papoBands == NULL ) {

    int i;

    if( papoBands == NULL )

        papoBands = (GDALRasterBand **)  /* Breakpoint before this statement */

            VSICalloc(sizeof(GDALRasterBand*), MAX(nNewBand,nBands));

    else

    papoBands = (GDALRasterBand **)

        VSIRealloc(papoBands, sizeof(GDALRasterBand*) *

            MAX(nNewBand,nBands));

    for( i = nBands; i < nNewBand; i++ )   /* Breakpoint before this statement; condition: papoBands=0 */

        papoBands[i] = NULL;    /* Offending statement, papoBands==NULL.



State of poBand at error:

-  poBand 0x357f4228 {start=172766438 subgNum=0 longFstLevel=0x746a3e28 "0[-] SFC (Ground or water surface)" ...} GDALRasterBand *
+  [GRIBRasterBand] {start=172766438 subgNum=0 longFstLevel=0x746a3e28 "0[-] SFC (Ground or water surface)" ...} GRIBRasterBand
+  GDALMajorObject {nFlags=49 sDescription={...} oMDMD={...} } GDALMajorObject
+  poDS 0x3424f4b0 {fp=0x3424fb08 pszProjection=0x35b3ce68 "GEOGCS["Coordinate System imported from GRIB file",DATUM["unknown",SPHEROID["Sphere",6367470,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]" pszDescription=0xcdcdcdcd <Bad Ptr> ...} GDALDataset *
  nBand 56094 int
  nRasterXSize 0 int
  nRasterYSize 0 int
  eDataType GDT_Float64 GDALDataType
  eAccess GA_ReadOnly GDALAccess
  nBlockXSize 45 int
  nBlockYSize 1 int
  nBlocksPerRow 0 int
  nBlocksPerColumn 0 int
  bSubBlockingActive 0 int
  nSubBlocksPerRow 0 int
  nSubBlocksPerColumn 0 int
+  papoBlocks 0x00000000 GDALRasterBlock * *
  nBlockReads 0 int
  bForceCachedIO 0 int
+  poMask 0x00000000 {poDS=??? nBand=??? nRasterXSize=??? ...} GDALRasterBand *
  bOwnMask false bool
  nMaskFlags 0 int

Status of this GDALDataset:

  i -858993460 int
  nBands 49093 int
  nNewBand 49094 int
+  papoBands 0x00000000 GDALRasterBand * *
-  this 0x3424f4b0 {fp=0x3424fab8 pszProjection=0x35b31048 "GEOGCS["Coordinate System imported from GRIB file",DATUM["unknown",SPHEROID["Sphere",6367470,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]" pszDescription=0xcdcdcdcd <Bad Ptr> ...} GDALDataset * const
+  [GRIBDataset] {fp=0x3424fab8 pszProjection=0x35b31048 "GEOGCS["Coordinate System imported from GRIB file",DATUM["unknown",SPHEROID["Sphere",6367470,0]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433]]" pszDescription=0xcdcdcdcd <Bad Ptr> ...} GRIBDataset
+  GDALMajorObject {nFlags=33 sDescription={...} oMDMD={...} } GDALMajorObject
+  poDriver 0x00000000 {pfnOpen=??? pfnCreate=??? pfnDelete=??? ...} GDALDriver *
  eAccess GA_ReadOnly GDALAccess
  nRasterXSize 45 int
  nRasterYSize 33 int
  nBands 49093 int
+  papoBands 0x00000000 GDALRasterBand * *
  bForceCachedIO 0 int
  nRefCount 1 int
  bShared 0 int
+  oOvManager {poDS=0x00000000 poODS=0x00000000 osOvrFilename={...} ...} GDALDefaultOverviews






-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091211/3c860d99/attachment-0001.html
From warmerdam at pobox.com  Fri Dec 11 09:55:12 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 11 09:55:16 2009
Subject: [gdal-dev] RE: GDALOpen crash on large GRIB files - workaround
In-Reply-To: <72251B925CE10A478606EEAC6AA683BE17BD184955@SINTEFEXMBX01.sintef.no>
References: <72251B925CE10A478606EEAC6AA683BE178ACC9410@SINTEFEXMBX01.sintef.no>
	<72251B925CE10A478606EEAC6AA683BE17BD184955@SINTEFEXMBX01.sintef.no>
Message-ID: <4B225D50.6020900@pobox.com>

Sjur Kolberg wrote:
>  
> Hi again,
>  
> This was obviously not a known problem. What we ended up with was to 
> split the GRIB files up in smaller pieces using another software and 
> importing bit by bit using GDAL. During the work we also had memory 
> allocation problems in plain C++ code (myarray = new float[alotofcells]; 
> gives "Out of memory" exception), so it seems that it is Windows that is 
> not too happy with allocating large memory chunks. This amount of memory 
> space, I guess, is most often needed by meteorological formats like 
> grib, NetCDF or HDF, which are not too extensively used on Windows.

Sjur,

While I have found 32bit windows is generally unable to take advantage of
more than about 1GB of RAM for a single process it did not sound like you
were running into this.  So I find the situation still somewhat odd.

> Does GDAL, or the drivers of often-large files, offer any possibility to 
> restrict the subset of bands before calling GDALOpen() on the file?

Generally speaking no.

However, the GRIB driver could theoretically be restructured to support
using subdatasets to treat individual bands or ranges of bands as
standalone datasets which would presumably help.  However, there does
seem to be a mismatch between the GDAL data model and that of the essentially
3+ dimensional grib file you are working with.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alan.stratford at goodrich.com  Fri Dec 11 12:18:10 2009
From: alan.stratford at goodrich.com (Alans)
Date: Fri Dec 11 12:18:11 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <870160.58482.qm@web33207.mail.mud.yahoo.com>
References: <1260457185258-4145777.post@n2.nabble.com>
	<4B210FAD.2020206@pobox.com>
	<1260458125291-4145859.post@n2.nabble.com>
	<870160.58482.qm@web33207.mail.mud.yahoo.com>
Message-ID: <1260551890016-4152485.post@n2.nabble.com>




pcreso wrote:
> 
> Hi Alan, 
> 
> This doesn't fix you problem specifically, but may help.
> 
> We usually use the packages from the OpenSuse Geo repository, which has
> SLES specific builds available. (We are using SLES for most Linux servers
> in our organisation)
> 
> See:  http://download.opensuse.org/repositories/Application:/Geo/SLE_10/
> 
> This saves either compiling from source or building our own SLES packages.
> 
> If we need something, like a new version which is not there, I have found
> the repository maintainers are very responsive to requests to provide
> updates & new packages.
> 
> While I like OpenSuse anyway, as a FOSS GIS "specialist" the Geo
> repository is the main reason I primarily use OpenSuse as a Linux distro. 
> 
> 
> Cheers,
>   
>   Brent Wood
> 
> 

Thanks Brent,

I did get the rpm for gdal 1.6.3 to install, but I need support for the SRP
format, which is only present in the latest daily builds.

Regards
Alan
-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4152485.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From alan.stratford at goodrich.com  Fri Dec 11 12:22:31 2009
From: alan.stratford at goodrich.com (Alans)
Date: Fri Dec 11 12:22:33 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <1260458999635-4145944.post@n2.nabble.com>
References: <1260457185258-4145777.post@n2.nabble.com>
	<4B210FAD.2020206@pobox.com>
	<1260458125291-4145859.post@n2.nabble.com>
	<1260458999635-4145944.post@n2.nabble.com>
Message-ID: <1260552151721-4152504.post@n2.nabble.com>




Alans wrote:
> 
> 
> 
> Alans wrote:
>> 
>> 
>> 
>> Frank Warmerdam wrote:
>>> 
>>> 
>>> This is very odd - I've never seen something quite like it.
>>> 
>>> One work around would likely be to configure GDAL --without-libtool.  I
>>> wonder if 1.6.3 got released with an unstable libtool version.  Could
>>> you
>>> try 1.6.2 on this system and see if that works?
>>> 
>> 
>> Thanks Frank,
>> 
>> I will try 1.6.2 and get back to you.
>> 
>> Alan
>> 
> 
> Yep. 1.6.2 has exactly the same error.
> 
> 

I have now got the gdal-svn-trunk-2009.12.09 version to build on SLES 10 sp2
by configuring --without-libtool, as Frank suggested.

Thanks
Alan
-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4152504.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Dec 11 13:41:28 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 11 13:41:36 2009
Subject: [gdal-dev] RasterIO slower on Windows
In-Reply-To: <4e18cf4e0912102021l728967efm84b55f1e31ad7ede@mail.gmail.com>
References: <4e18cf4e0912102021l728967efm84b55f1e31ad7ede@mail.gmail.com>
Message-ID: <4B229258.1050205@mines-paris.org>

Adam,

I assume that you're testing on the same machine. Such difference is not 
expected. Do you see that slowdown with different GDAL drivers or just 
for one in particular (which one?)

Windows builds are able to use overviews. But are you speaking about 
internal GeoTIFF overviews or about external overviews (.ovr files) ?

Even

Adam Kubach a ?crit :
> Hi,
>
> It appears that my calls to RasterIO are about 10 times slower on
> Windows than Linux when reading from the same dataset.  I wouldn't
> think that there would be a noticeable difference.  Has anyone else
> seen this?  Is it possible that the overviews aren't being used on
> Windows?  Is there anyway I can verify that they are being used (Other
> than a debugger)?
>
> Thanks,
> Adam
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>   


From mgdenno at gmail.com  Fri Dec 11 16:33:37 2009
From: mgdenno at gmail.com (Matthew Denno)
Date: Fri Dec 11 16:33:43 2009
Subject: [gdal-dev] Multipoint Iterator
Message-ID: <633be2250912111333q2ed316ecr4097d837b8f9180f@mail.gmail.com>

Hello list,

Could someone tell me how to iterate over the points in a multipoint
feature?  I have searched through the mailing list and have looked through
the documentation but can't seem to find it.  I was expecting there to be a
"nextPart" or iterator or something, but I don't see anything, am I missing
it?

Any help would be greatly appreciated.

Matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091211/75f10bd8/attachment.html
From mjaiteh at ciesin.columbia.edu  Fri Dec 11 16:17:34 2009
From: mjaiteh at ciesin.columbia.edu (Malanding Jaiteh)
Date: Fri Dec 11 16:35:34 2009
Subject: [gdal-dev] ImportError: No module named osgeo
Message-ID: <4B22B6EE.9000502@ciesin.columbia.edu>

Folks I need help setting up gdal.
I get the following error when I tried to run the following import line:

from osgeo import gdal

error message:

Traceback (most recent call last):
  File "C:\GIS_TOOLS\Python\GDAL_Geotiff_conversion.py", line 9, in <module>
    from osgeo import gdal
ImportError: No module named osgeo

I recall running the same script months ago the same machine although I 
had a Windows XP x64 on my machine then. Now I have gdawin32-1.6 on 32 
bit Windows XP Professional  Service Pack 3, with the following user 
variables:
PATH = C:\C:\gdalwin32-1.6\bin
GDAL_DATA = C:\gdalwin32-1.6\data

I am running Python 2.5.1 Tk version 8.4
IDLE version 1.2.1

I tried without success to physically locate osgeo module either in 
C:\gdalwin32-1.6 or C:\PYTHON 2.5 directories.

Also is there a way to do text search on the entire gdal-dev archives?


Malanding Jaiteh


From even.rouault at mines-paris.org  Fri Dec 11 16:36:00 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 11 16:36:07 2009
Subject: [gdal-dev] Multipoint Iterator
In-Reply-To: <633be2250912111333q2ed316ecr4097d837b8f9180f@mail.gmail.com>
References: <633be2250912111333q2ed316ecr4097d837b8f9180f@mail.gmail.com>
Message-ID: <4B22BB40.8070908@mines-paris.org>

Matthew Denno a ?crit :

A multipoint geometry is a geometry collection, so you can use 
OGRGeometry::getGeometryRef(iSubGeom).

See 
http://gdal.org/ogr/classOGRGeometryCollection.html#d609f2c7886918a766dd3d3a4fa52ec3

> Hello list,
>
> Could someone tell me how to iterate over the points in a multipoint 
> feature?  I have searched through the mailing list and have looked 
> through the documentation but can't seem to find it.  I was expecting 
> there to be a "nextPart" or iterator or something, but I don't see 
> anything, am I missing it?
>
> Any help would be greatly appreciated.
>
> Matt
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From mgdenno at gmail.com  Fri Dec 11 16:48:04 2009
From: mgdenno at gmail.com (Matthew Denno)
Date: Fri Dec 11 16:48:07 2009
Subject: [gdal-dev] Multipoint Iterator
In-Reply-To: <4B22BB40.8070908@mines-paris.org>
References: <633be2250912111333q2ed316ecr4097d837b8f9180f@mail.gmail.com>
	<4B22BB40.8070908@mines-paris.org>
Message-ID: <633be2250912111348g260c2592la10b6b790effa22d@mail.gmail.com>

Even,

Thank you for your quick reply.  I will give it a try when I get home.

Matt

On Fri, Dec 11, 2009 at 4:36 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Matthew Denno a ?crit :
>
> A multipoint geometry is a geometry collection, so you can use
> OGRGeometry::getGeometryRef(iSubGeom).
>
> See
> http://gdal.org/ogr/classOGRGeometryCollection.html#d609f2c7886918a766dd3d3a4fa52ec3
>
>  Hello list,
>>
>> Could someone tell me how to iterate over the points in a multipoint
>> feature?  I have searched through the mailing list and have looked through
>> the documentation but can't seem to find it.  I was expecting there to be a
>> "nextPart" or iterator or something, but I don't see anything, am I missing
>> it?
>>
>> Any help would be greatly appreciated.
>>
>> Matt
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091211/be3f6a37/attachment.html
From even.rouault at mines-paris.org  Fri Dec 11 17:04:51 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 11 17:05:00 2009
Subject: [gdal-dev] ImportError: No module named osgeo
In-Reply-To: <4B22B6EE.9000502@ciesin.columbia.edu>
References: <4B22B6EE.9000502@ciesin.columbia.edu>
Message-ID: <4B22C203.4000106@mines-paris.org>

Malanding Jaiteh a ?crit :

The Python bindings are not contained in the packages avalaible at 
http://download.osgeo.org/gdal/win32/1.6/
That explains the error you get.

However, you can find prebuilt packages with GDAL Python bindings in :
- FWTools : http://fwtools.maptools.org/
- OSGeo4W : http://trac.osgeo.org/osgeo4w/
- Tamas Szekeres daily builts : http://vbkto.dyndns.org/sdk/

> Folks I need help setting up gdal.
> I get the following error when I tried to run the following import line:
>
> from osgeo import gdal
>
> error message:
>
> Traceback (most recent call last):
>  File "C:\GIS_TOOLS\Python\GDAL_Geotiff_conversion.py", line 9, in 
> <module>
>    from osgeo import gdal
> ImportError: No module named osgeo
>
> I recall running the same script months ago the same machine although 
> I had a Windows XP x64 on my machine then. Now I have gdawin32-1.6 on 
> 32 bit Windows XP Professional  Service Pack 3, with the following 
> user variables:
> PATH = C:\C:\gdalwin32-1.6\bin
> GDAL_DATA = C:\gdalwin32-1.6\data
>
> I am running Python 2.5.1 Tk version 8.4
> IDLE version 1.2.1
>
> I tried without success to physically locate osgeo module either in 
> C:\gdalwin32-1.6 or C:\PYTHON 2.5 directories.
>
> Also is there a way to do text search on the entire gdal-dev archives?
>
>
> Malanding Jaiteh
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


From bertelli at charta.acme.com  Fri Dec 11 17:06:51 2009
From: bertelli at charta.acme.com (Carlo A. Bertelli (Charta s.r.l.))
Date: Fri Dec 11 17:06:54 2009
Subject: [gdal-dev] Stop gdalladdo eating fillets
Message-ID: <303ea9510912111406k2595f210l14a9f323b0491ac0@mail.gmail.com>

Hallo,
I have a set of very detailed b&w needing an overlay. But when I run
gdaladdo, no matter what option I choose, fillets are spitefully
deleted.
I don't know if there is a better solution, I tried to get a thicker
trace on a copy of the original image, make the pyramids and rename
the resulting file.
To make the fillets grow I used ImageMagick, like this
convert -blur 3 -threshold 20 ORIGINAL.tif THICKER.tif
(the treshold is less than 50 because the original image is white on black)
gdaladdo --config COMPRESS_OVERVIEW DEFLATE -r average  --config
INTERLEAVE_OVERVIEW PIXEL --config NODATA 0 -ro THICKER.tif 2 4 8 16
than I renamed THICKER.tif.ovr as ORIGINAL.tif.ovr.
Well, it doesn't work well, I should have made a thicker version while
I was reducing the image. There is always a size where fillets
disappear.
The problem seems to ask for a resize method that keeps the thickness
of the lines while reducing the objects. There should be a procedure
like mine but carefully adapted to any scale reduction.
Am I missing something or this is really a problem?
Carlo
From even.rouault at mines-paris.org  Fri Dec 11 18:00:51 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 11 18:00:57 2009
Subject: [gdal-dev] Stop gdalladdo eating fillets
In-Reply-To: <303ea9510912111406k2595f210l14a9f323b0491ac0@mail.gmail.com>
References: <303ea9510912111406k2595f210l14a9f323b0491ac0@mail.gmail.com>
Message-ID: <4B22CF23.2050200@mines-paris.org>

Carlo A. Bertelli (Charta s.r.l.) a ?crit :

Well, I think it's not really a problem, but a characteristics of the 
processing. I doubt that any general purpose pyramid building can 
preserve high frequency details like fillets. It would require special 
processing that would know what is a line and what is not, but that is 
not implemented in GDAL.

> Hallo,
> I have a set of very detailed b&w needing an overlay. But when I run
> gdaladdo, no matter what option I choose, fillets are spitefully
> deleted.
> I don't know if there is a better solution, I tried to get a thicker
> trace on a copy of the original image, make the pyramids and rename
> the resulting file.
> To make the fillets grow I used ImageMagick, like this
> convert -blur 3 -threshold 20 ORIGINAL.tif THICKER.tif
> (the treshold is less than 50 because the original image is white on black)
> gdaladdo --config COMPRESS_OVERVIEW DEFLATE -r average  --config
> INTERLEAVE_OVERVIEW PIXEL --config NODATA 0 -ro THICKER.tif 2 4 8 16
> than I renamed THICKER.tif.ovr as ORIGINAL.tif.ovr.
> Well, it doesn't work well, I should have made a thicker version while
> I was reducing the image. There is always a size where fillets
> disappear.
> The problem seems to ask for a resize method that keeps the thickness
> of the lines while reducing the objects. There should be a procedure
> like mine but carefully adapted to any scale reduction.
> Am I missing something or this is really a problem?
> Carlo
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>   


From adamkubach at gmail.com  Sat Dec 12 00:14:51 2009
From: adamkubach at gmail.com (Adam Kubach)
Date: Sat Dec 12 00:14:54 2009
Subject: [gdal-dev] RasterIO slower on Windows
In-Reply-To: <4B229258.1050205@mines-paris.org>
References: <4e18cf4e0912102021l728967efm84b55f1e31ad7ede@mail.gmail.com>
	<4B229258.1050205@mines-paris.org>
Message-ID: <4e18cf4e0912112114wc148cd7ie71a03114415d2e5@mail.gmail.com>

Even,

Yes, this is on the same machine.  The driver is GeoTIFF (I haven't
tried other ones) with external overviews.

Adam

On Fri, Dec 11, 2009 at 12:41 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Adam,
>
> I assume that you're testing on the same machine. Such difference is not
> expected. Do you see that slowdown with different GDAL drivers or just for
> one in particular (which one?)
>
> Windows builds are able to use overviews. But are you speaking about
> internal GeoTIFF overviews or about external overviews (.ovr files) ?
>
> Even
>
> Adam Kubach a ?crit :
>>
>> Hi,
>>
>> It appears that my calls to RasterIO are about 10 times slower on
>> Windows than Linux when reading from the same dataset. ?I wouldn't
>> think that there would be a noticeable difference. ?Has anyone else
>> seen this? ?Is it possible that the overviews aren't being used on
>> Windows? ?Is there anyway I can verify that they are being used (Other
>> than a debugger)?
>>
>> Thanks,
>> Adam
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>
>
>
From lists at fuchsschwanzdomain.de  Sat Dec 12 08:39:10 2009
From: lists at fuchsschwanzdomain.de (Sven Geggus)
Date: Sat Dec 12 08:57:21 2009
Subject: [gdal-dev] natgrids option in /usr/share/proj/epsg entry?
Message-ID: <hg06du$aif$1@ultimate100.geggus.net>

Dear List,

I have a problem which is related to the one I had in summer.

While it works fine using the +nadgrids option on the command line of
gdal tools (with +wktext added) it does not seem to work when added
ad an entry to /usr/share/proj/epsg.

The nadgrids Option is ignored in this case which I can verify using
strace.

So what would I need to add to /usr/share/proj/epsg to get the
behaviour of the following command line argument:

'+proj=tmerc +lat_0=0 +lon_0=12 +x_0=4500000 +y_0=0 +k=1.000000 +ellps=bessel +units=m +nadgrids=/usr/share/proj/BETA2007.gsb +wktext'

Here is the entry which does not work:

# DHDN / Gauss-Kruger zone 4
<31468> +proj=tmerc +lat_0=0 +lon_0=12 +x_0=4500000 +y_0=0 +k=1.000000 +ellps=bessel +units=m +nadgrids=/usr/share/proj/BETA2007.gsb +no_defs  <>


Sven

-- 
"Der wichtigste Aspekt, den Sie vor der Entscheidung f?r ein Open
Source-Betriebssystem bedenken sollten, ist, dass Sie kein
Windows-Betriebssystem erhalten." (von http://www.dell.de/ubuntu)
/me is giggls@ircnet, http://sven.gegg.us/ on the Web
From even.rouault at mines-paris.org  Sat Dec 12 09:21:00 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 12 09:21:05 2009
Subject: [gdal-dev] natgrids option in /usr/share/proj/epsg entry?
In-Reply-To: <hg06du$aif$1@ultimate100.geggus.net>
References: <hg06du$aif$1@ultimate100.geggus.net>
Message-ID: <4B23A6CC.4090105@mines-paris.org>

Sven,

You're the one who decided me to extend the FAQ as it is really becoming 
a FAQ ;-)

So see 
http://trac.osgeo.org/gdal/wiki/FAQCoordinateSystemsAndProjections#DoesGDALOGRusethePROJ.4EPSGinitfileusrshareprojepsg 


Best regards,

Even

Sven Geggus a ?crit :
> Dear List,
>
> I have a problem which is related to the one I had in summer.
>
> While it works fine using the +nadgrids option on the command line of
> gdal tools (with +wktext added) it does not seem to work when added
> ad an entry to /usr/share/proj/epsg.
>
> The nadgrids Option is ignored in this case which I can verify using
> strace.
>
> So what would I need to add to /usr/share/proj/epsg to get the
> behaviour of the following command line argument:
>
> '+proj=tmerc +lat_0=0 +lon_0=12 +x_0=4500000 +y_0=0 +k=1.000000 +ellps=bessel +units=m +nadgrids=/usr/share/proj/BETA2007.gsb +wktext'
>
> Here is the entry which does not work:
>
> # DHDN / Gauss-Kruger zone 4
> <31468> +proj=tmerc +lat_0=0 +lon_0=12 +x_0=4500000 +y_0=0 +k=1.000000 +ellps=bessel +units=m +nadgrids=/usr/share/proj/BETA2007.gsb +no_defs  <>
>
>
> Sven
>
>   


From fer.eze.miguez at gmail.com  Sat Dec 12 20:05:01 2009
From: fer.eze.miguez at gmail.com (Fernando Miguez)
Date: Sat Dec 12 20:05:03 2009
Subject: [gdal-dev] Suppress zero return in WriteArray
Message-ID: <cadc20490912121705if4312dfve74623cf1a081520@mail.gmail.com>

Hi all,

band.WriteArray(array, xoff, yoff) returns zero. Is there anyway to suppress
this?

Thanks,

Fernando
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091212/a5f94efc/attachment.html
From fer.eze.miguez at gmail.com  Sun Dec 13 09:56:59 2009
From: fer.eze.miguez at gmail.com (Fernando Miguez)
Date: Sun Dec 13 09:57:01 2009
Subject: [gdal-dev] Re: Suppress zero return in WriteArray
In-Reply-To: <cadc20490912121705if4312dfve74623cf1a081520@mail.gmail.com>
References: <cadc20490912121705if4312dfve74623cf1a081520@mail.gmail.com>
Message-ID: <cadc20490912130656p7c00651dhe19018afcc6bab0d@mail.gmail.com>

Please disregard my previous question

On Sat, Dec 12, 2009 at 8:05 PM, Fernando Miguez
<fer.eze.miguez@gmail.com>wrote:

> Hi all,
>
> band.WriteArray(array, xoff, yoff) returns zero. Is there anyway to
> suppress this?
>
> Thanks,
>
> Fernando
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091213/3f96d5f0/attachment.html
From stephane.cyr at msp.gouv.qc.ca  Mon Dec 14 14:07:59 2009
From: stephane.cyr at msp.gouv.qc.ca (=?Windows-1252?Q?ST=C9PHANE=20CYR?=)
Date: Mon Dec 14 14:08:09 2009
Subject: [gdal-dev] ORA-01406: fetched column value was truncated
Message-ID: <4B2646BD.0884.00CA.0@msp.gouv.qc.ca>

I have a problem transfering a table from oracle to postgresql (post-gis).
The Oracle table contain a field of type varchar2(250 byte) and when i try to load the table i get the error "ORA-01406: fetched column value was truncated. " I tryed with field of type varchar2(250 char) and  i got the same erreor. 
 
In many records of the table, this field is filled with 250 character, including line breaks and special characters. To solve the problem, i created a new table on oracle with the varchar2(250 byte) field changed for a varchar2(500) and the data loaded correctly. Then, I altered the table on postgresql and changed the field type from varchar(500)  to varchar(250) and it works.  My conclusion is that there is no problem with the data but the loading is not working well. Is there something i can do or set to avoid this problem. 
 
Regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091214/ed905b9f/attachment.html
From warmerdam at pobox.com  Mon Dec 14 23:32:41 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 14 23:32:49 2009
Subject: [gdal-dev] GDAL/OGR 1.7.0 Beta 1
Message-ID: <4B271169.806@pobox.com>

Folks,

I have prepared a somewhat late GDAL/OGR 1.7.0 Beta 1 release at:

   http://download.osgeo.org/gdal/gdal-1.7.0b1.tar.gz
   http://download.osgeo.org/gdal/gdal170b1.zip

Please test and file tickets at:

   http://trac.osgeo.org/gdal

with problems encountered.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Dec 14 23:36:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 14 23:36:17 2009
Subject: [gdal-dev] Remove Old Generation Python bindings for 1.7 release
Message-ID: <4B27123B.9040502@pobox.com>

Folks,

Today I got tripped up in a windows build which compiled the old generation
python bindings by default.

I would like to remove the gdal/pymod directory from trunk before the 1.7.0
beta2 is cut.

The old generation bindings have been preserved but not well maintained for
several years after the establishment of the new multi-language bindings
because OpenEV requires the old generation bindings.  But at this point I think
they are too old to continue to carry along.

Does anyone have a concern with removing them?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.l.h.hartmann at uva.nl  Tue Dec 15 05:24:09 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue Dec 15 05:24:17 2009
Subject: [gdal-dev] Remove Old Generation Python bindings for 1.7 release
In-Reply-To: <4B27123B.9040502@pobox.com>
References: <4B27123B.9040502@pobox.com>
Message-ID: <4B2763C9.9090100@uva.nl>

I'm not a developer, but I have had the same problems in my builds (I 
must compile everything on a Linux-cluster  as non-root in non-standard 
locations, with up-to-date versions of Python, that kind of thing).

Removing the old bindings would remove one further source of headaches, 
for me at least.

Jan

On 15-12-2009 5:36, Frank Warmerdam wrote:
> Folks,
>
> Today I got tripped up in a windows build which compiled the old 
> generation
> python bindings by default.
>
> I would like to remove the gdal/pymod directory from trunk before the 
> 1.7.0
> beta2 is cut.
>
> The old generation bindings have been preserved but not well 
> maintained for
> several years after the establishment of the new multi-language bindings
> because OpenEV requires the old generation bindings.  But at this 
> point I think
> they are too old to continue to carry along.
>
> Does anyone have a concern with removing them?
>
> Best regards,
From hobu.inc at gmail.com  Tue Dec 15 09:43:43 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec 15 09:47:34 2009
Subject: [gdal-dev] Remove Old Generation Python bindings for 1.7 release
In-Reply-To: <4B2763C9.9090100@uva.nl>
References: <4B27123B.9040502@pobox.com> <4B2763C9.9090100@uva.nl>
Message-ID: <B1F68EBF-B1E2-46A9-A1F7-6A2EF3E1BAEE@gmail.com>

Enthusiastically, +1.  I'll even help do the surgery.

Howard

On Dec 15, 2009, at 4:24 AM, Jan Hartmann wrote:

> I'm not a developer, but I have had the same problems in my builds (I must compile everything on a Linux-cluster  as non-root in non-standard locations, with up-to-date versions of Python, that kind of thing).
> 
> Removing the old bindings would remove one further source of headaches, for me at least.
> 
> Jan
> 
> On 15-12-2009 5:36, Frank Warmerdam wrote:
>> Folks,
>> 
>> Today I got tripped up in a windows build which compiled the old generation
>> python bindings by default.
>> 
>> I would like to remove the gdal/pymod directory from trunk before the 1.7.0
>> beta2 is cut.
>> 
>> The old generation bindings have been preserved but not well maintained for
>> several years after the establishment of the new multi-language bindings
>> because OpenEV requires the old generation bindings.  But at this point I think
>> they are too old to continue to carry along.
>> 
>> Does anyone have a concern with removing them?
>> 
>> Best regards,
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From weixj2003ld at 163.com  Tue Dec 15 09:39:55 2009
From: weixj2003ld at 163.com (weixj2003ld)
Date: Tue Dec 15 09:55:13 2009
Subject: [gdal-dev] ogre3d and gdal
In-Reply-To: <20091212170059.B6574E01353@lists.osgeo.org>
References: <20091212170059.B6574E01353@lists.osgeo.org>
Message-ID: <3280897.486791260887995905.JavaMail.coremail@bj163app83.163.com>

1.I am a newer to gdal,I want to know that can gdal and ogre3d be integrated?
2.How could I get the value of (x,y,z) of the Satellite photos file through gdal?
 
Kind regards.
Wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091215/143b58d0/attachment.html
From warmerdam at pobox.com  Tue Dec 15 10:02:00 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 15 10:02:08 2009
Subject: [gdal-dev] ogre3d and gdal
In-Reply-To: <3280897.486791260887995905.JavaMail.coremail@bj163app83.163.com>
References: <20091212170059.B6574E01353@lists.osgeo.org>
	<3280897.486791260887995905.JavaMail.coremail@bj163app83.163.com>
Message-ID: <4B27A4E8.3070207@pobox.com>

weixj2003ld wrote:
> 1.I am a newer to gdal,I want to know that can gdal and ogre3d be 
> integrated?


Wei,

I am not familiar with anyone having integrated GDAL with ogre3d; however,
folks do use GDAL as an imagery and elevation model source for lots of 3D
rendering engines so I don't foresee any problems.

 > 2.How could I get the value of (x,y,z) of the Satellite photos file
 > through gdal?

Generally this is accomplished by reading an elevation model from a
raster file - often in a format like USGS DEM or DTED, though elevation
data can be in quite a variety of formats.   The elevation model may be
provided in a different coordinate system, and often at a different
density than the imagery you are draping over the elevation model. So
there is some work to relate pixel/line locations in the drape image
with the pixel/line in the elevation model.

I would suggest you start by reading up on the GDAL data model, and focusing
on the handling of coordinate system, and georeferencing (ie. the
GeoTransform).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mrxonx at hotmail.com  Tue Dec 15 20:26:36 2009
From: mrxonx at hotmail.com (ogr user)
Date: Tue Dec 15 20:32:14 2009
Subject: [gdal-dev] S57 questions
Message-ID: <4B28374C.30801@hotmail.com>

I wonder if anyone here with a good knowledge of S57 format internals
can help me out on this issue.

OGR S57 parser seems to work quite well with most charts in NOAA ENC
data set. However, I found a feature on one of the charts that puzzles
me (to be specific, the chart is US5CA92M, the feature RCID is 1167 in
current chart edition).

This is a polygon-based feature which is defined such that, as read by
OGR, the outer polygon ring does not enclose inner rings (it is
essentially "on the side"). The first inner ring is what you would
consider the outer ring in OGR definition, if you were to visualize this
polygon. This in turn causes all sorts of issues (in particular in any
code that assumes the entire polygon to be enclosed in the outer ring).

So, my question is - is it that S57 standard allows for multiple outer
rings for polygons and so this is not handled in OGR because OGRPolygon
is defined that way? Is it an error in S57 data, something that chart
makers did? Or is it, perhaps, something in DDF encoding that is not
read correctly by the iso8211 module?

Any help on this would be appreciated.

--Mike
From warmerdam at pobox.com  Tue Dec 15 22:26:16 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 15 22:26:18 2009
Subject: [gdal-dev] S57 questions
In-Reply-To: <4B28374C.30801@hotmail.com>
References: <4B28374C.30801@hotmail.com>
Message-ID: <4B285358.9010806@pobox.com>

ogr user wrote:
> I wonder if anyone here with a good knowledge of S57 format internals
> can help me out on this issue.
> 
> OGR S57 parser seems to work quite well with most charts in NOAA ENC
> data set. However, I found a feature on one of the charts that puzzles
> me (to be specific, the chart is US5CA92M, the feature RCID is 1167 in
> current chart edition).
> 
> This is a polygon-based feature which is defined such that, as read by
> OGR, the outer polygon ring does not enclose inner rings (it is
> essentially "on the side"). The first inner ring is what you would
> consider the outer ring in OGR definition, if you were to visualize this
> polygon. This in turn causes all sorts of issues (in particular in any
> code that assumes the entire polygon to be enclosed in the outer ring).
> 
> So, my question is - is it that S57 standard allows for multiple outer
> rings for polygons and so this is not handled in OGR because OGRPolygon
> is defined that way? Is it an error in S57 data, something that chart
> makers did? Or is it, perhaps, something in DDF encoding that is not
> read correctly by the iso8211 module?
> 

Mike,

The S-57 driver uses OGRBuildPolygonFromEdges() to form the set of lines
into a polygon.  No effort is currently made to properly represent
exterior vs. interior rings as is required by the simple features geometry
specification.

So, I believe this is a bug of the S-57 driver and OGRBuildPolygonFromEdges()
function.  In OGRBuildPolygonFromEdges() I see this comment:

// Eventually we should at least identify the external ring properly,
// perhaps even ordering the direction of rings, though this isn't
// required by the OGC geometry model.

You might want to file a ticket on this issue, though I can't say when the
issue will be fixed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Dec 16 01:33:17 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 16 01:33:15 2009
Subject: [gdal-dev] Death by Complexity
Message-ID: <4B287F2D.3040607@pobox.com>

Folks,

Another GDAL related post on my blog related to the complexity and
fragility of some aspects of GDAL:

   http://fwarmerdam.blogspot.com/2009/12/death-by-complexity.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rayg at daylongraphics.com  Wed Dec 16 03:40:26 2009
From: rayg at daylongraphics.com (Ray Gardener)
Date: Wed Dec 16 03:40:46 2009
Subject: [gdal-dev] Death by Complexity
In-Reply-To: <4B287F2D.3040607@pobox.com>
References: <4B287F2D.3040607@pobox.com>
Message-ID: <4B289CFA.4080701@daylongraphics.com>

You're right -- that post was incomprehensible. I read it twice and 
still wonder what it's all about. :)

But it's a good lesson to learn. And it happens to everyone. The 
software is telling us "Please refactor me, even my interfaces or 
fundamental design if you have to, because I'm getting overextended 
trying to do things that weren't anticipated at my birth."

No one really wants interfaces to change, but fwiw, if GDAL 2.0 isn't 
backwards-compatible with 1.x (but it means a better GDAL) then I for 
one will have no complaints. If you gotta do what you gotta do, then by 
all means do it, and I'm behind you 100%.

Ray



Frank Warmerdam wrote:
> Folks,
> 
> Another GDAL related post on my blog related to the complexity and
> fragility of some aspects of GDAL:
> 
>   http://fwarmerdam.blogspot.com/2009/12/death-by-complexity.html
> 
> Best regards,

From warmerdam at pobox.com  Wed Dec 16 10:19:09 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 16 10:19:17 2009
Subject: [gdal-dev] Death by Complexity
In-Reply-To: <4B289CFA.4080701@daylongraphics.com>
References: <4B287F2D.3040607@pobox.com> <4B289CFA.4080701@daylongraphics.com>
Message-ID: <4B28FA6D.5050106@pobox.com>

Ray Gardener wrote:
> You're right -- that post was incomprehensible. I read it twice and 
> still wonder what it's all about. :)

Ray,

Given the amount of time it took me to grasp the problem (and the
fact that this understanding is already fraying around the edges) I
knew I wouldn't be able to explain the issue well.  I think I have
at least communicated a sense of the complexity and fragility of
some aspects of the software.

> But it's a good lesson to learn. And it happens to everyone. The 
> software is telling us "Please refactor me, even my interfaces or 
> fundamental design if you have to, because I'm getting overextended 
> trying to do things that weren't anticipated at my birth."

To be honest, even with a rewrite of GDAL I'm not sure I could handle
this particular situation all that gracefully.  But it might be helpful
if use of the overview manager, the PAM (.aux.xml) mechanism, support
for subdatasets, and support for using one driver to implement imagery
decoding for another were designed in better.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From pramsey at cleverelephant.ca  Wed Dec 16 12:23:59 2009
From: pramsey at cleverelephant.ca (Paul Ramsey)
Date: Wed Dec 16 12:24:04 2009
Subject: [gdal-dev] New York Code Sprint
Message-ID: <30fe546d0912160923y306c46e1vd650a627f9e50e8e@mail.gmail.com>

Fellow members of the C tribe! I hope the holidays find you in good
spirits, and that you'll consider joining your other tribe members at
the New York Code Sprint early next year:

http://wiki.osgeo.org/wiki/New_York_Code_Sprint_2010

All details and planning on the wiki page. If you want to join in
discussions and get all updates, please subscribe to

http://lists.osgeo.org/mailman/listinfo/tosprint

Time is of the essence! We are filling our hotel block quickly and
have a limited number of spaces in the meeting area.

Thanks!

Paul
From daniele.romagnoli at geo-solutions.it  Wed Dec 16 12:50:59 2009
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Wed Dec 16 12:51:02 2009
Subject: [gdal-dev] How to set BoundingBox within a shapefile using OGR
	Pythons bindings
Message-ID: <7221db410912160950wcc18219sf7b834d03843ce4e@mail.gmail.com>

Hi list,
I'm creating a shapefile using the OGR python bindings. (from  the 1.6.1
installer)
I have some issues in creating the boundingBox for it.
This is a snippet of the code I'm using:
-----------------------------------------------------
from osgeo import ogr
from osgeo import osr
....
....
northings_llc = dd['northings_llc']
northings_urc = dd['northings_urc']
eastings_llc = dd['eastings_llc']
eastings_urc = dd['eastings_urc']
t_srs = osr.SpatialReference()
t_srs.SetFromUserInput('EPSG:32632')
drv = ogr.GetDriverByName('ESRI Shapefile')
ds = drv.CreateDataSource(fileout)
x0, y0, x1, y1 = str(eastings_llc[0][0]), str(northings_llc[0][0]),
str(eastings_urc[0][0]), str(northings_urc[0][0])

layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbPolygon, srs =
t_srs)
geom = ogr.Geometry(type = layer.GetLayerDefn().GetGeomType())
geom.AssignSpatialReference(t_srs)
wkt = 'POLYGON('+x0+','+y0+','+ x0+','+ y1+','+ x1+',' +y1+','+ x1+','
+y0+','+ x0+',' +y0+')'
print(wkt)
geom.importFromWkt(wkt)
...
...

When running, I get this output:
POLYGON(602759.984846,4739727.96408,602759.984846,4739720.3473,602760.45247,4739720.3473,602760.45247,4739727.96408,602759.984846,4739727.96408)
Traceback (most recent call last):
  File "prova.py", line 42, in <module>
    geom.importFromWkt(wkt)
  File "c:\python26\lib\site-packages\osgeo\ogr.py", line 2672, in <lambda>
    __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
  File "c:\python26\lib\site-packages\osgeo\ogr.py", line 34, in
_swig_getattr
    raise AttributeError,name
AttributeError: importFromWkt

Indeed, looking at the ogr.py there is no "importFromWkt" in the Geometry
definition.
How can I set the bounding box within the geometry?
Any help would be greatly appreciated.

Best Regards,
Daniele

-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091216/baacc4a4/attachment.html
From ari.jolma at gmail.com  Wed Dec 16 13:22:31 2009
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Dec 16 13:22:37 2009
Subject: [gdal-dev] 1.7.0 MSYS build broken in GPX
In-Reply-To: <alpine.LRH.2.00.0912101015480.3681@reclus.nhh.no>
References: <alpine.LRH.2.00.0912101015480.3681@reclus.nhh.no>
Message-ID: <4B292567.2010702@tkk.fi>

Roger,

I have no problems with building the GPX driver.

However, I've got several problems with the basic build process with 
MSYS. I seem to need to run libtoolize, aclocal, and autoconf (is the 
libtool in repo old?). Then I need to fix the cpl_config.h with MSYS 
related defines (something broken in the MSYS autotools I have?).

With those fixes there are no problems in the actual make.

This was just tried with svn update. My MSYS and MinGW should be very up 
to date.

Ari

Roger Bivand kirjoitti:
> Hi,
>
> I've probably missed something, but while 1.6.3 builds OK with EXPAT 
> for GPX on MSYS, 1.7.0 revision 18238 doesn't. The problem is in:
>
> libtool: compile:  g++ -O2 -Wall -I.. -I../.. -I/usr/local/include 
> -I/home/s1155 /gdal_svn/gdal/port -I/home/s1155/gdal_svn/gdal/gcore 
> -I/home/s1155/gdal_svn/gdal/alg -I/home/s1155/gdal_svn/gdal/ogr 
> -I/home/s1155/gdal_svn/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
> -I/home/s1155/gdal_svn/gdal/port -DHAVE_EXPAT -c ogrgpxlayer.cpp
> -DDLL_EXPORT -DPIC -o ../o/.libs/ogrgpxlayer.o
> ogrgpxlayer.cpp: In function 'char* OGRGPX_GetUTF8String(const char*)':
> ogrgpxlayer.cpp:1088: error: 'CPLIsUTF8' was not declared in this scope
> ogrgpxlayer.cpp:1106: error: 'CPLForceToASCII' was not declared in 
> this scope
> make[3]: *** [../o/ogrgpxlayer.lo] Error 1
>
> I can't see why CPLIsUTF8 is not being picked up from 
> port/cpl_strings.h. These are recent changes - has anyone else seen 
> the problem?
>
> Motivation - trying to build an rgdal Windows binary using MSYS in the 
> usual way to let R/SAGA people try out the GDAL SAGA driver. I could 
> drop expat for now, but I'll need it again when 1.7.0 is released for 
> GPX and KML.
>
> Grateful for pointers,
>
> Roger
>


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi

From ari.jolma at gmail.com  Wed Dec 16 13:32:39 2009
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Dec 16 13:32:42 2009
Subject: [gdal-dev] SWIG Version
In-Reply-To: <4B1BDE64.2060202@pobox.com>
References: <4B1BDE64.2060202@pobox.com>
Message-ID: <4B2927C7.8040205@tkk.fi>

Frank,

SWIG 1.3.39 is ok for Perl bindings. However, it introduces (I 
previously used 1.3.36) a warning  (125) that is related to 
SWIGmake.base, which can be removed by defining the complete path to the 
interface file in the swig command line. I committed the fix.

Ari

Frank Warmerdam kirjoitti:
> Folks - particularly swig bindings maintainers,
>
> I have regenerated the swig bindings for python with swig 1.3.39 on
> www.gdal.org and committed them.  I used that version to be compatible
> with what Even used last time.  However, the scripts that building
> the perl and csharp bindings for the nightly snapshots are still using
> SWIG 1.3.36.
>
> Before GDAL 1.7 release, I'd like us to settle on a preferred version of
> SWIG and I will update this to be the one used for the nightly snapshots
> and that we would use at other times for building source distributions.
>
> Is SWIG 1.3.39 acceptable for all bindings maintainers?
>
> PS. SWIG 1.3.39 is built and installed in ~warmerdam/gdal-swig on
> www.gdal.org (aka xblade14).   SWIG 1.3.36 is in /usr/local/bin.
>
> Best regards,


-- 
Prof. Ari Jolma
Environmental Management Information Technology
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 4511 address: POBox 5300, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://geoinformatics.tkk.fi

From even.rouault at mines-paris.org  Wed Dec 16 13:40:36 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Dec 16 13:40:48 2009
Subject: [gdal-dev] How to set BoundingBox within a shapefile using OGR
	Pythons bindings
In-Reply-To: <7221db410912160950wcc18219sf7b834d03843ce4e@mail.gmail.com>
References: <7221db410912160950wcc18219sf7b834d03843ce4e@mail.gmail.com>
Message-ID: <4B2929A4.5000600@mines-paris.org>

Daniele,

Try: ogr.CreateGeometryFromWkt(wkt)

Best regards,
Even

Daniele Romagnoli a ?crit :
> Hi list,
> I'm creating a shapefile using the OGR python bindings. (from  the 
> 1.6.1 installer)
> I have some issues in creating the boundingBox for it.
> This is a snippet of the code I'm using:
> -----------------------------------------------------
> from osgeo import ogr
> from osgeo import osr
> ....
> ....
> northings_llc = dd['northings_llc']
> northings_urc = dd['northings_urc']
> eastings_llc = dd['eastings_llc']
> eastings_urc = dd['eastings_urc']
> t_srs = osr.SpatialReference()
> t_srs.SetFromUserInput('EPSG:32632')
> drv = ogr.GetDriverByName('ESRI Shapefile')
> ds = drv.CreateDataSource(fileout)
> x0, y0, x1, y1 = str(eastings_llc[0][0]), str(northings_llc[0][0]), 
> str(eastings_urc[0][0]), str(northings_urc[0][0])
>
> layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbPolygon, srs = 
> t_srs)
> geom = ogr.Geometry(type = layer.GetLayerDefn().GetGeomType())
> geom.AssignSpatialReference(t_srs)
> wkt = 'POLYGON('+x0+','+y0+','+ x0+','+ y1+','+ x1+',' +y1+','+ x1+',' 
> +y0+','+ x0+',' +y0+')'
> print(wkt)
> geom.importFromWkt(wkt)
> ...
> ...
>
> When running, I get this output:
> POLYGON(602759.984846,4739727.96408,602759.984846,4739720.3473,602760.45247,4739720.3473,602760.45247,4739727.96408,602759.984846,4739727.96408)
> Traceback (most recent call last):
>   File "prova.py", line 42, in <module>
>     geom.importFromWkt(wkt)
>   File "c:\python26\lib\site-packages\osgeo\ogr.py", line 2672, in 
> <lambda>
>     __getattr__ = lambda self, name: _swig_getattr(self, Geometry, name)
>   File "c:\python26\lib\site-packages\osgeo\ogr.py", line 34, in 
> _swig_getattr
>     raise AttributeError,name
> AttributeError: importFromWkt
>
> Indeed, looking at the ogr.py there is no "importFromWkt" in the 
> Geometry definition.
> How can I set the bounding box within the geometry?
> Any help would be greatly appreciated.
>
> Best Regards,
> Daniele
>
> -- 
> -------------------------------------------------------
> Eng. Daniele Romagnoli
> Software Engineer
>
> GeoSolutions S.A.S.
> Via Carignoni 51
> 55041 Camaiore (LU)
> Italy
>
> phone: +39 0584983027
> fax:     +39 0584983027
> mob:   +39 328 0559267
>
>
> http://www.geo-solutions.it
>
> -------------------------------------------------------
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Dec 16 13:43:58 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Dec 16 13:44:09 2009
Subject: [gdal-dev] How to set BoundingBox within a shapefile using OGR
	Pythons bindings
In-Reply-To: <7221db410912160950wcc18219sf7b834d03843ce4e@mail.gmail.com>
References: <7221db410912160950wcc18219sf7b834d03843ce4e@mail.gmail.com>
Message-ID: <4B292A6E.6020708@pobox.com>

Daniele Romagnoli wrote:
> Hi list,
> I'm creating a shapefile using the OGR python bindings. (from  the 1.6.1 
> installer)
> I have some issues in creating the boundingBox for it.
> This is a snippet of the code I'm using:
> -----------------------------------------------------
> from osgeo import ogr
> from osgeo import osr
> ....
> ....
> northings_llc = dd['northings_llc']
> northings_urc = dd['northings_urc']
> eastings_llc = dd['eastings_llc']
> eastings_urc = dd['eastings_urc']
> t_srs = osr.SpatialReference()
> t_srs.SetFromUserInput('EPSG:32632')
> drv = ogr.GetDriverByName('ESRI Shapefile')
> ds = drv.CreateDataSource(fileout)
> x0, y0, x1, y1 = str(eastings_llc[0][0]), str(northings_llc[0][0]), 
> str(eastings_urc[0][0]), str(northings_urc[0][0])
> 
> layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbPolygon, srs = 
> t_srs)
> geom = ogr.Geometry(type = layer.GetLayerDefn().GetGeomType())
> geom.AssignSpatialReference(t_srs)
> wkt = 'POLYGON('+x0+','+y0+','+ x0+','+ y1+','+ x1+',' +y1+','+ x1+',' 
> +y0+','+ x0+',' +y0+')'

Daniele,

You are not formatting your WKT right. There should be spaces between
x and y.  The commas are only between tuples.

eg.

POLYGON ((479819.84375 4765180.5,479690.1875 4765259.5,...

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mrxonx at hotmail.com  Wed Dec 16 15:57:40 2009
From: mrxonx at hotmail.com (ogr user)
Date: Wed Dec 16 15:57:46 2009
Subject: [gdal-dev] S57 questions
In-Reply-To: <4B285358.9010806@pobox.com>
References: <4B28374C.30801@hotmail.com> <4B285358.9010806@pobox.com>
Message-ID: <4B2949C4.3090302@hotmail.com>

In case anyone is interested, here is a simple patch for the polygon
outer ring issue. It's not a perfect way to detect the outer ring since
in some cases inner rings can have the *same* envelope area as the outer
ring, but in any practical chart case this works just fine. Calculating
actual ring area would work better, but would be slower (though not by
much considering that getEnvelope does not use any cached envelope
information and keeps iterating over all the vertices). In any case,
this patch solved the issue I was grappling with and may help in many
other similar cases.

Pardon the trivial variable names - I am not quite familiar with
variable naming convention in OGR.
This would also work faster if there was a way to delete a ring from
polygon, so we wouldn't have to copy it over.
--Make


===================================================================
--- ogr/ograssemblepolygon.cpp    (revision 17)
+++ ogr/ograssemblepolygon.cpp    (working copy)
@@ -276,6 +276,40 @@
 // perhaps even ordering the direction of rings, though this isn't
 // required by the OGC geometry model.
 
+    double maxarea, tarea;
+    int maxring = -1, rn, rcount;
+    OGREnvelope tenv;
+    OGRLinearRing *tring;
+
+    tring = poPolygon->getExteriorRing();
+    if (tring) tring->getEnvelope(&tenv);
+    maxarea = (tenv.MaxX - tenv.MinX) * (tenv.MaxY - tenv.MinY);
+
+    rcount = poPolygon->getNumInteriorRings();
+    for (rn = 0; rn < rcount; ++rn) {
+      tring = poPolygon->getInteriorRing(rn);
+      tring->getEnvelope(&tenv);
+      tarea = (tenv.MaxX - tenv.MinX) * (tenv.MaxY - tenv.MinY);
+      if (tarea > maxarea) {
+         maxarea = tarea;
+         maxring = rn;
+      }
+    }
+
+    if (maxring != -1) {
+       OGRPolygon  *poNewPoly = new OGRPolygon();
+
+       poNewPoly->addRing(poPolygon->getInteriorRing(maxring));
+       poNewPoly->addRing(poPolygon->getExteriorRing());
+       for (rn = 0; rn < rcount; ++rn) {
+          if (rn == maxring) continue;
+          poNewPoly->addRing(poPolygon->getInteriorRing(rn));
+       }
+
+       delete poPolygon;
+       poPolygon = poNewPoly;
+    }
+     
     if( peErr != NULL )
     {
         if( bSuccess )

Frank Warmerdam wrote:
>
> Mike,
>
> The S-57 driver uses OGRBuildPolygonFromEdges() to form the set of lines
> into a polygon.  No effort is currently made to properly represent
> exterior vs. interior rings as is required by the simple features
> geometry
> specification.
>
> So, I believe this is a bug of the S-57 driver and
> OGRBuildPolygonFromEdges()
> function.  In OGRBuildPolygonFromEdges() I see this comment:
>
> // Eventually we should at least identify the external ring properly,
> // perhaps even ordering the direction of rings, though this isn't
> // required by the OGC geometry model.
>
> You might want to file a ticket on this issue, though I can't say when
> the
> issue will be fixed.
>
> Best regards,

From daniele.romagnoli at geo-solutions.it  Thu Dec 17 03:23:19 2009
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu Dec 17 03:23:49 2009
Subject: [gdal-dev] How to set BoundingBox within a shapefile using OGR 
	Pythons bindings
In-Reply-To: <4B292A6E.6020708@pobox.com>
References: <7221db410912160950wcc18219sf7b834d03843ce4e@mail.gmail.com>
	<4B292A6E.6020708@pobox.com>
Message-ID: <7221db410912170023v19e1b8dfr464eb42a3f61351f@mail.gmail.com>

Thank you guys for the correction.
It seems I have copied an old polygon definition in my previous email (in my
last script, I have changed odd ',' with ' ' to set couples). The issue was
that I missed double brackets. However, the importFromWkt didn't work (Being
undefined in the python bindings, I guess).
Before sending the email, I had tried ogr.CreateGeometryFromWkt(wkt) as
suggested by Even, but having missformed WKT (single brackets), it gave me
ERROR 5: OGR Error: Corrupt data. Now my problem have been solved. Thank you
all.

Best Regards,
Daniele


On Wed, Dec 16, 2009 at 7:43 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Daniele Romagnoli wrote:
>
>> Hi list,
>> I'm creating a shapefile using the OGR python bindings. (from  the 1.6.1
>> installer)
>> I have some issues in creating the boundingBox for it.
>> This is a snippet of the code I'm using:
>> -----------------------------------------------------
>> from osgeo import ogr
>> from osgeo import osr
>> ....
>> ....
>> northings_llc = dd['northings_llc']
>> northings_urc = dd['northings_urc']
>> eastings_llc = dd['eastings_llc']
>> eastings_urc = dd['eastings_urc']
>> t_srs = osr.SpatialReference()
>> t_srs.SetFromUserInput('EPSG:32632')
>> drv = ogr.GetDriverByName('ESRI Shapefile')
>> ds = drv.CreateDataSource(fileout)
>> x0, y0, x1, y1 = str(eastings_llc[0][0]), str(northings_llc[0][0]),
>> str(eastings_urc[0][0]), str(northings_urc[0][0])
>>
>> layer = ds.CreateLayer(ds.GetName(), geom_type = ogr.wkbPolygon, srs =
>> t_srs)
>> geom = ogr.Geometry(type = layer.GetLayerDefn().GetGeomType())
>> geom.AssignSpatialReference(t_srs)
>> wkt = 'POLYGON('+x0+','+y0+','+ x0+','+ y1+','+ x1+',' +y1+','+ x1+','
>> +y0+','+ x0+',' +y0+')'
>>
>
> Daniele,
>
> You are not formatting your WKT right. There should be spaces between
> x and y.  The commas are only between tuples.
>
> eg.
>
> POLYGON ((479819.84375 4765180.5,479690.1875 4765259.5,...
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091217/dcd6be0c/attachment.html
From Roger.Bivand at nhh.no  Thu Dec 17 03:25:31 2009
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Dec 17 03:25:39 2009
Subject: [gdal-dev] 1.7.0 MSYS build broken in GPX
In-Reply-To: <4B292567.2010702@tkk.fi>
References: <alpine.LRH.2.00.0912101015480.3681@reclus.nhh.no>
	<4B292567.2010702@tkk.fi>
Message-ID: <alpine.LRH.2.00.0912170920350.17211@reclus.nhh.no>

On Wed, 16 Dec 2009, Ari Jolma wrote:

> Roger,
>
> I have no problems with building the GPX driver.

Ari,

Thanks. My problem was the presence in /usr/local/include of 1.6 GDAL 
headers, and that directory being ahead of the build tree includes. I 
build without --prefix= set in ./configure, so default to /usr/local.

>
> However, I've got several problems with the basic build process with MSYS. I 
> seem to need to run libtoolize, aclocal, and autoconf (is the libtool in repo 
> old?). Then I need to fix the cpl_config.h with MSYS related defines 
> (something broken in the MSYS autotools I have?).

The only problem I see regularly is that ltmain.sh needs editing in one 
place to change the path that linking looks for, something like the remark 
in the Wiki MinGW build comments.

Roger

>
> With those fixes there are no problems in the actual make.
>
> This was just tried with svn update. My MSYS and MinGW should be very up to 
> date.
>
> Ari
>
> Roger Bivand kirjoitti:
>> Hi,
>> 
>> I've probably missed something, but while 1.6.3 builds OK with EXPAT for 
>> GPX on MSYS, 1.7.0 revision 18238 doesn't. The problem is in:
>> 
>> libtool: compile:  g++ -O2 -Wall -I.. -I../.. -I/usr/local/include 
>> -I/home/s1155 /gdal_svn/gdal/port -I/home/s1155/gdal_svn/gdal/gcore 
>> -I/home/s1155/gdal_svn/gdal/alg -I/home/s1155/gdal_svn/gdal/ogr 
>> -I/home/s1155/gdal_svn/gdal/ogr/ogrsf_frmts -DOGR_ENABLED
>> -I/home/s1155/gdal_svn/gdal/port -DHAVE_EXPAT -c ogrgpxlayer.cpp
>> -DDLL_EXPORT -DPIC -o ../o/.libs/ogrgpxlayer.o
>> ogrgpxlayer.cpp: In function 'char* OGRGPX_GetUTF8String(const char*)':
>> ogrgpxlayer.cpp:1088: error: 'CPLIsUTF8' was not declared in this scope
>> ogrgpxlayer.cpp:1106: error: 'CPLForceToASCII' was not declared in this 
>> scope
>> make[3]: *** [../o/ogrgpxlayer.lo] Error 1
>> 
>> I can't see why CPLIsUTF8 is not being picked up from port/cpl_strings.h. 
>> These are recent changes - has anyone else seen the problem?
>> 
>> Motivation - trying to build an rgdal Windows binary using MSYS in the 
>> usual way to let R/SAGA people try out the GDAL SAGA driver. I could drop 
>> expat for now, but I'll need it again when 1.7.0 is released for GPX and 
>> KML.
>> 
>> Grateful for pointers,
>> 
>> Roger
>> 
>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From obe at IVV-AACHEN.DE  Thu Dec 17 05:53:49 2009
From: obe at IVV-AACHEN.DE (Obermaier, Felix)
Date: Thu Dec 17 06:13:02 2009
Subject: [gdal-dev] C# Wrapper + GdalWarpOptions
Message-ID: <941E09AD62CA6F41913924A35EA3985E47B22A69@ivv-mx.ivv-aachen.de>

Hello,

I'm to reprojecting/warping geotiff images with C# OSGeo.Gdal assembly.
Is there a way to initialize the output geotiff to some odd color (not black)
so setting the transparency only affects the areas it should?

>From the C++ api i learned that there should be something like GdalWarpOptions
but I cannot find that, and if I look at the swig interface files I see that
that parameter is explicitly set to 0.

Would it be enough to set NoDataValue in the source geotiff?

Thanks in advance

Felix Obermaier


From daniele.romagnoli at geo-solutions.it  Thu Dec 17 06:56:31 2009
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu Dec 17 06:56:35 2009
Subject: [gdal-dev] OSR: EPSG code and WKT definition (ESRI vs OGC)
Message-ID: <7221db410912170356o7ceb226drd72b5aebdbfc0c12@mail.gmail.com>

Hi again list,
I'm building a shapefile and, when setting the CRS, I use this code:
.....
t_srs = osr.SpatialReference()
t_srs.SetFromUserInput("EPSG:32632")
....
Looking at the generated PRJ, I see it uses the ESRI WKT definition [1].
Is there a way to get the OGC definition [2] instead? (This one is
preserving the EPSG authority code inside)

Any help would be greatly appreciated.
Best Regards,
Daniele

[1]: http://www.spatialreference.org/ref/epsg/32632/esriwkt/
[2]: http://www.spatialreference.org/ref/epsg/32632/ogcwkt/
-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091217/44f191db/attachment.html
From warmerdam at pobox.com  Thu Dec 17 10:12:43 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 17 10:12:49 2009
Subject: [gdal-dev] OSR: EPSG code and WKT definition (ESRI vs OGC)
In-Reply-To: <7221db410912170356o7ceb226drd72b5aebdbfc0c12@mail.gmail.com>
References: <7221db410912170356o7ceb226drd72b5aebdbfc0c12@mail.gmail.com>
Message-ID: <4B2A4A6B.50701@pobox.com>

Daniele Romagnoli wrote:
> Hi again list,
> I'm building a shapefile and, when setting the CRS, I use this code:
> .....
> t_srs = osr.SpatialReference()
> t_srs.SetFromUserInput("EPSG:32632")
> ....
> Looking at the generated PRJ, I see it uses the ESRI WKT definition [1].
> Is there a way to get the OGC definition [2] instead? (This one is 
> preserving the EPSG authority code inside)

Daniele,

ESRI .prj files are supposed to be in ESRI format, and so the shapefile
driver morphs appropriately.  There is no way to tell it not to.

However, you can export the srs to WKT and write it over the .prj file
if you want.

eg. (in python)

open('basename.prj','w').write(t_srs.ExportToWkt())

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From alan.stratford at goodrich.com  Thu Dec 17 10:34:26 2009
From: alan.stratford at goodrich.com (Alans)
Date: Thu Dec 17 10:34:28 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <1260552151721-4152504.post@n2.nabble.com>
References: <1260457185258-4145777.post@n2.nabble.com>
	<4B210FAD.2020206@pobox.com>
	<1260458125291-4145859.post@n2.nabble.com>
	<1260458999635-4145944.post@n2.nabble.com>
	<1260552151721-4152504.post@n2.nabble.com>
Message-ID: <1261064066753-4181832.post@n2.nabble.com>




Alans wrote:
> 
> 
> 
> Alans wrote:
>> 
>> 
>> 
>> Alans wrote:
>>> 
>>> 
>>> 
>>> Frank Warmerdam wrote:
>>>> 
>>>> 
>>>> This is very odd - I've never seen something quite like it.
>>>> 
>>>> One work around would likely be to configure GDAL --without-libtool.  I
>>>> wonder if 1.6.3 got released with an unstable libtool version.  Could
>>>> you
>>>> try 1.6.2 on this system and see if that works?
>>>> 
>>> 
>>> Thanks Frank,
>>> 
>>> I will try 1.6.2 and get back to you.
>>> 
>>> Alan
>>> 
>> 
>> Yep. 1.6.2 has exactly the same error.
>> 
>> 
> 
> I have now got the gdal-svn-trunk-2009.12.09 version to build on SLES 10
> sp2 by configuring --without-libtool, as Frank suggested.
> 
> Thanks
> Alan
> 

My attempted build of GDAL is now getting a little further. I have upgraded
libtools to 2.2.6b and unset my RM environment var (this was previously set
to "/bin/rm" but there seemed to have been an assumption that it was "rm -f"
or not set!)

My new problem is as follows:

libtool: link: g++ -shared -nostdlib
/usr/lib64/gcc/x86_64-suse-linux/4.1.2/../../../../lib64/crti.o
/usr/lib64/gcc/x86_64-suse-linux/4.1.2/crtbeginS.o
.libs/libgdal.la.lnkscript  -Wl,-rpath
-Wl,/usr/lib64/gcc/x86_64-suse-linux/4.1.2 -Wl,-rpath
-Wl,/usr/lib64/gcc/x86_64-suse-linux/4.1.2 -L/usr/lib /usr/lib/libexpat.so
-L/usr/local/lib -lxerces-c -lpthread /usr/lib/libjasper.so
/usr/lib/libjpeg.so -lpng -lrt -L/usr/lib64 /usr/lib/libcurl.so
/usr/lib64/libidn.so -lssl -lcrypto -ldl -lz
-L/usr/lib64/gcc/x86_64-suse-linux/4.1.2
-L/usr/lib64/gcc/x86_64-suse-linux/4.1.2/../../../../lib64 -L/lib/../lib64
-L/usr/lib/../lib64
-L/usr/lib64/gcc/x86_64-suse-linux/4.1.2/../../../../x86_64-suse-linux/lib
-L/usr/lib64/gcc/x86_64-suse-linux/4.1.2/../../..
/usr/lib64/gcc/x86_64-suse-linux/4.1.2/libstdc++.so -lm -lc -lgcc_s
/usr/lib64/gcc/x86_64-suse-linux/4.1.2/crtendS.o
/usr/lib64/gcc/x86_64-suse-linux/4.1.2/../../../../lib64/crtn.o             
-Wl,-soname -Wl,libgdal.so.1 -o .libs/libgdal.so.1.13.0
/usr/lib/libexpat.so: could not read symbols: File in wrong format
collect2: ld returned 1 exit status
gmake[1]: *** [libgdal.la] Error 1
gmake[1]: Leaving directory `/nashome/alan/gdal/gdal-svn-trunk-2009.12.14'
gmake: *** [check-lib] Error 2

The problem here is that it is looking for libexpat.so in /usr/lib rather
than /usr/lib64.

I have tried configuring with '--with-expat-lib="-L/usr/lib64"' and with
'--with-expat-lib=/usr/lib64' but neither made any difference. It is not
clear to me how --with-expat-lib should be used or what it should be set to.

In anycase I am not sure that I should need to use this option since the
library is in a fairly common place, i.e. /usr/lib64, especially as I don't
need to specify this for lots of other libraries!

Also, once I get past libexpat it looks like I will get similar failures for
libjasper, libjpeg and others. Perhaps  there is some other
setting/environment variable that I should be aware of.

Can anyone help this very weary, and obviously not very clever GDAL
builder:confused:.

Regards
Alan
-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4181832.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From alan.stratford at goodrich.com  Thu Dec 17 12:45:18 2009
From: alan.stratford at goodrich.com (Alans)
Date: Thu Dec 17 12:45:20 2009
Subject: [Gdal-dev] gdal build failure on SUSE LINUX Enterprise Server 10
In-Reply-To: <1261064066753-4181832.post@n2.nabble.com>
References: <1260457185258-4145777.post@n2.nabble.com>
	<4B210FAD.2020206@pobox.com>
	<1260458125291-4145859.post@n2.nabble.com>
	<1260458999635-4145944.post@n2.nabble.com>
	<1260552151721-4152504.post@n2.nabble.com>
	<1261064066753-4181832.post@n2.nabble.com>
Message-ID: <1261071918234-4182514.post@n2.nabble.com>




Alans wrote:
> 
> 
> The problem here is that it is looking for libexpat.so in /usr/lib rather
> than /usr/lib64.
> 
> I have tried configuring with '--with-expat-lib="-L/usr/lib64"' and with
> '--with-expat-lib=/usr/lib64' but neither made any difference. It is not
> clear to me how --with-expat-lib should be used or what it should be set
> to.
> 
> In anycase I am not sure that I should need to use this option since the
> library is in a fairly common place, i.e. /usr/lib64, especially as I
> don't need to specify this for lots of other libraries!
> 
> 

I did some digging around in the configuration script and finally got GDAL
to build by changing line 24687 (expat_lib_flags="-L$expat_prefix/lib
-lexpat") to (expat_lib_flags="-L$expat_prefix/lib64 -lexpat").

I think there must be something wrong with the --with-expat-lib switch, as I
could not get it to work, but I am not familiar with these config files. The
experts might like to take a look.

Regards
Alan
-- 
View this message in context: http://n2.nabble.com/gdal-build-failure-on-SUSE-LINUX-Enterprise-Server-10-tp4145777p4182514.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ahmettemiz88 at gmail.com  Thu Dec 17 13:56:26 2009
From: ahmettemiz88 at gmail.com (ahmettemiz88@gmail.com)
Date: Thu Dec 17 14:30:54 2009
Subject: [gdal-dev] wrong about the project conversion
Message-ID: <000e0cdf748a236c79047af12efe@google.com>

hello

what is wrong about this project conversion ?
resulting map does not seem to be in lat/long.

Here is the original map's metadata:

name: Lambert Conformal Conic
proj: lcc
datum: wgs84
ellps: wgs84
lat_1: 40.66666666666666
lat_2: 43.33333333333334
lat_0: 0
lon_0: 34
x_0: 1000000
y_0: 0
no_defs: defined


I try to convert it to lat/long like this:

~$ ogr2ogr -t_srs EPSG:4326 -s_srs '+proj=lcc +lat_1=40.66666666  
+lat_2=43.333333333 +lat_0=0 lon_0=34.0 +x_0=1000000 +y_0=0 +datum=wgs84  
+units=m' geohidro_cizgi_adf9.shp hidro_cizgi_adf.shp

~~~~
Result seems to be wrong:

$ ogrinfo geohidro_cizgi_adf9.shp -al -summary
INFO: Open of `geohidro_cizgi_adf9.shp'
using driver `ESRI Shapefile' successful.

Layer name: geohidro_cizgi_adf9
Geometry: Line String
Feature Count: 4929
Extent: (-8.914342, 34.000149) - (11.953119, 42.237237) *** looks weird for  
Turkey
Layer SRS WKT:
GEOGCS["GCS_WGS_1984",
DATUM["WGS_1984",
SPHEROID["WGS_1984",6378137,298.257223563]],
PRIMEM["Greenwich",0],
UNIT["Degree",0.017453292519943295]]
UserId: Integer (10.0)
FNODE_: Integer (10.0)
TNODE_: Integer (10.0)
LPOLY_: Integer (10.0)
RPOLY_: Integer (10.0)
LENGTH: Real (32.3)
HIDRO_CIZG: Integer (10.0)


I will appreciate if you explain what to do

kind regards

Ahmet Temiz
TURKEY
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091217/6b29896e/attachment.html
From Sebastien.Donnet at amec.com  Thu Dec 17 16:53:40 2009
From: Sebastien.Donnet at amec.com (Donnet , Sebastien)
Date: Thu Dec 17 16:56:17 2009
Subject: [gdal-dev] ESRI arcgis 9.x
Message-ID: <D688BDE22B02984496332260B9E36A8F0C5EEEE0@ATT1-EX1.am.int.amec.com>

Hi,

sorry in advance if it's a stupid (or already well covered) question,
but today I tried to read a shapefile coming from, I believe, ArcGIS 9.2 and run out into trouble:

ERROR 4: Unable to open Bedrock.shx or Bedrock.SHX.
FAILURE:
Unable to open datasource `Bedrock.shp' with the following drivers.

instead of an shx I have an sbn and an sbx

My version of ogr/gdal: from FWTools226.exe
(I'm on windows)

thanks in advance for any hints.


S.

________________________________
The information contained in this e-mail is intended only for the individual or entity to whom it is addressed.
Its contents (including any attachments) may contain confidential and/or privileged information.
If you are not an intended recipient you must not use, disclose, disseminate, copy or print its contents.
If you receive this e-mail in error, please notify the sender by reply e-mail and delete and destroy the message.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091217/e0f79d2c/attachment.html
From warmerdam at pobox.com  Thu Dec 17 17:10:47 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 17 17:10:43 2009
Subject: [gdal-dev] ESRI arcgis 9.x
In-Reply-To: <D688BDE22B02984496332260B9E36A8F0C5EEEE0@ATT1-EX1.am.int.amec.com>
References: <D688BDE22B02984496332260B9E36A8F0C5EEEE0@ATT1-EX1.am.int.amec.com>
Message-ID: <4B2AAC67.4010904@pobox.com>

Donnet , Sebastien wrote:
> Hi,
>  
> sorry in advance if it's a stupid (or already well covered) question,
> but today I tried to read a shapefile coming from, I believe, ArcGIS 9.2 
> and run out into trouble:
>  
> ERROR 4: Unable to open Bedrock.shx or Bedrock.SHX.
> FAILURE:
> Unable to open datasource `Bedrock.shp' with the following drivers.
>  
> instead of an shx I have an sbn and an sbx 
>  
> My version of ogr/gdal: from FWTools226.exe
> (I'm on windows)
>  
> thanks in advance for any hints.

Sebastien,

OGR cannot currently read shapefiles without a .shx file.  The .sbn and
.sbx files are spatial indexes, and not used by GDAL. The .shx file is
basically a "shape id to file offset" index.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jerome at georezo.net  Thu Dec 17 17:37:47 2009
From: jerome at georezo.net (=?iso-8859-1?b?Suly9G1l?= - GeoRezo.net)
Date: Thu Dec 17 17:37:57 2009
Subject: [gdal-dev] ESRI arcgis 9.x
In-Reply-To: <4B2AAC67.4010904@pobox.com>
References: <D688BDE22B02984496332260B9E36A8F0C5EEEE0@ATT1-EX1.am.int.amec.com>
	<4B2AAC67.4010904@pobox.com>
Message-ID: <1261089467.4b2ab2bb267c4@imp.free.fr>

Hello,

However, you can repair shapefiles. ESRI site give several tools, one :
http://arcscripts.esri.com/details.asp?dbid=13733

After repairing, you will read your ESRI files with ogr how you want.

Thanks


-- 
J?r?me Cuinet


Selon Frank Warmerdam <warmerdam@pobox.com>:

> Donnet , Sebastien wrote:
> > Hi,
> >
> > sorry in advance if it's a stupid (or already well covered) question,
> > but today I tried to read a shapefile coming from, I believe, ArcGIS 9.2
> > and run out into trouble:
> >
> > ERROR 4: Unable to open Bedrock.shx or Bedrock.SHX.
> > FAILURE:
> > Unable to open datasource `Bedrock.shp' with the following drivers.
> >
> > instead of an shx I have an sbn and an sbx
> >
> > My version of ogr/gdal: from FWTools226.exe
> > (I'm on windows)
> >
> > thanks in advance for any hints.
>
> Sebastien,
>
> OGR cannot currently read shapefiles without a .shx file.  The .sbn and
> .sbx files are spatial indexes, and not used by GDAL. The .shx file is
> basically a "shape id to file offset" index.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From jukka.rahkonen at mmmtike.fi  Thu Dec 17 18:35:58 2009
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Dec 17 18:36:31 2009
Subject: [gdal-dev] Re: ESRI arcgis 9.x
References: <D688BDE22B02984496332260B9E36A8F0C5EEEE0@ATT1-EX1.am.int.amec.com>
	<4B2AAC67.4010904@pobox.com>
Message-ID: <loom.20091218T003343-757@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:


> Sebastien,
> 
> OGR cannot currently read shapefiles without a .shx file.  The .sbn and
> .sbx files are spatial indexes, and not used by GDAL. The .shx file is
> basically a "shape id to file offset" index.

OpenJUMP can read features from just a lonely .shp file , and then save the full
package with .dbf and .shx.  That has helped me sometimes.

-Jukka Rahkonen-


From landa.martin at gmail.com  Fri Dec 18 08:04:14 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Fri Dec 18 08:04:18 2009
Subject: [gdal-dev] ogr vfk and write access
Message-ID: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>

Hi GDAL developers,

some months ago I started working on OGR driver for specific Czech
data format used in cadastre, see [1] for more info. The source code
is available here [2]. I would like to ask you if there is any chance
to move VFK driver to the main GDAL/OGR SVN repository. There is no
dependency, so it could be compiled by default.

I am also interested to get write access to the main GDAL/OGR
repository if possible. My name is Martin Landa and I am GRASS
developer for some years [3]. It would be honest for me to contribute
also on the GDAL/OGR project. I would focus myself on GRASS and VFK
driver and later probably more.

Thanks & best regards, Martin

[1] http://gama.fsv.cvut.cz/~landa/publications/2010/gis-ostrava-2010/paper/landa-ogr-vfk.pdf
[2] http://josef.fsv.cvut.cz/svn/landa/programming/gdal/vfk/
[3] http://www.ohloh.net/accounts/martinl

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From szekerest at gmail.com  Fri Dec 18 09:02:10 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Dec 18 09:02:13 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
Message-ID: <f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>

Martin,

Does this driver compile on both Windows and Linux platforms? Just by
looking into your repository I don't see a windows makefile for that. I
would require to support both platforms before adding this in trunk. It
would also be reasonable to include some autotest scripts to make sure the
driver is working correctly.

With regards to the commit access, assuming you intend to be the mainainer
of this code and agree with http://trac.osgeo.org/gdal/wiki/rfc3_commiters
I would support this addition.


Best regards,

Tamas





2009/12/18 Martin Landa <landa.martin@gmail.com>

> Hi GDAL developers,
>
> some months ago I started working on OGR driver for specific Czech
> data format used in cadastre, see [1] for more info. The source code
> is available here [2]. I would like to ask you if there is any chance
> to move VFK driver to the main GDAL/OGR SVN repository. There is no
> dependency, so it could be compiled by default.
>
> I am also interested to get write access to the main GDAL/OGR
> repository if possible. My name is Martin Landa and I am GRASS
> developer for some years [3]. It would be honest for me to contribute
> also on the GDAL/OGR project. I would focus myself on GRASS and VFK
> driver and later probably more.
>
> Thanks & best regards, Martin
>
> [1]
> http://gama.fsv.cvut.cz/~landa/publications/2010/gis-ostrava-2010/paper/landa-ogr-vfk.pdf<http://gama.fsv.cvut.cz/%7Elanda/publications/2010/gis-ostrava-2010/paper/landa-ogr-vfk.pdf>
> [2] http://josef.fsv.cvut.cz/svn/landa/programming/gdal/vfk/
> [3] http://www.ohloh.net/accounts/martinl
>
> --
> Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa<http://gama.fsv.cvut.cz/%7Elanda>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091218/fad907e0/attachment-0001.html
From landa.martin at gmail.com  Fri Dec 18 09:21:29 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Fri Dec 18 09:21:33 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
Message-ID: <f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>

Hi,

2009/12/18 Tamas Szekeres <szekerest@gmail.com>:
> Does this driver compile on both Windows and Linux platforms? Just by
> looking into your repository I don't see a windows makefile for that. I

Right, currently there is only GNUMakefile available. Compiled on
Windows with MinGW. Unfortunately I have no MSVC to test. It's my
TODO.

> would require to support both platforms before adding this in trunk. It
> would also be reasonable to include some autotest scripts to make sure the
> driver is working correctly.

Sure. I will do.

> With regards to the commit access, assuming you intend to be the mainainer
> of this code and agree with http://trac.osgeo.org/gdal/wiki/rfc3_commiters
> I would support this addition.

I agree with RFC3.

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From landa.martin at gmail.com  Fri Dec 18 12:54:28 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Fri Dec 18 12:54:33 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
Message-ID: <f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>

Hi,

2009/12/18 Martin Landa <landa.martin@gmail.com>:
> Hi,
>
> 2009/12/18 Tamas Szekeres <szekerest@gmail.com>:
>> Does this driver compile on both Windows and Linux platforms? Just by
>> looking into your repository I don't see a windows makefile for that. I
>
> Right, currently there is only GNUMakefile available. Compiled on
> Windows with MinGW. Unfortunately I have no MSVC to test. It's my
> TODO.

done in r1311. Untested, I just need to install MSVC on my laptop.

>> would require to support both platforms before adding this in trunk. It
>> would also be reasonable to include some autotest scripts to make sure the
>> driver is working correctly.
>
> Sure. I will do.

Can you point me to a sample autotest script?

Thanks, Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From even.rouault at mines-paris.org  Fri Dec 18 14:21:40 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 18 14:21:48 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
Message-ID: <4B2BD644.5010002@mines-paris.org>

Martin,

the autotest suite is located here : 
http://trac.osgeo.org/gdal/browser/trunk/autotest

I'm not sure which existing script might serve as a reference. You can 
have a look at 
http://trac.osgeo.org/gdal/browser/trunk/autotest/ogr/ogr_bna.py for a 
script that checks both read and write support

Martin Landa a ?crit :
> Hi,
>
> 2009/12/18 Martin Landa <landa.martin@gmail.com>:
>   
>> Hi,
>>
>> 2009/12/18 Tamas Szekeres <szekerest@gmail.com>:
>>     
>>> Does this driver compile on both Windows and Linux platforms? Just by
>>> looking into your repository I don't see a windows makefile for that. I
>>>       
>> Right, currently there is only GNUMakefile available. Compiled on
>> Windows with MinGW. Unfortunately I have no MSVC to test. It's my
>> TODO.
>>     
>
> done in r1311. Untested, I just need to install MSVC on my laptop.
>
>   
>>> would require to support both platforms before adding this in trunk. It
>>> would also be reasonable to include some autotest scripts to make sure the
>>> driver is working correctly.
>>>       
>> Sure. I will do.
>>     
>
> Can you point me to a sample autotest script?
>
> Thanks, Martin
>
>   


From hobu.inc at gmail.com  Fri Dec 18 14:22:47 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Dec 18 14:26:44 2009
Subject: [gdal-dev] Remove Old Generation Python bindings for 1.7 release
In-Reply-To: <B1F68EBF-B1E2-46A9-A1F7-6A2EF3E1BAEE@gmail.com>
References: <4B27123B.9040502@pobox.com> <4B2763C9.9090100@uva.nl>
	<B1F68EBF-B1E2-46A9-A1F7-6A2EF3E1BAEE@gmail.com>
Message-ID: <854C1A80-DB90-4C0D-96F9-DE8776D5BC34@gmail.com>

Just a note to let everyone know that these are now gone.

Howard

http://trac.osgeo.org/gdal/ticket/3286


On Dec 15, 2009, at 8:43 AM, Howard Butler wrote:

> Enthusiastically, +1.  I'll even help do the surgery.
> 
> Howard
> 
> On Dec 15, 2009, at 4:24 AM, Jan Hartmann wrote:
> 
>> I'm not a developer, but I have had the same problems in my builds (I must compile everything on a Linux-cluster  as non-root in non-standard locations, with up-to-date versions of Python, that kind of thing).
>> 
>> Removing the old bindings would remove one further source of headaches, for me at least.
>> 
>> Jan
>> 
>> On 15-12-2009 5:36, Frank Warmerdam wrote:
>>> Folks,
>>> 
>>> Today I got tripped up in a windows build which compiled the old generation
>>> python bindings by default.
>>> 
>>> I would like to remove the gdal/pymod directory from trunk before the 1.7.0
>>> beta2 is cut.
>>> 
>>> The old generation bindings have been preserved but not well maintained for
>>> several years after the establishment of the new multi-language bindings
>>> because OpenEV requires the old generation bindings.  But at this point I think
>>> they are too old to continue to carry along.
>>> 
>>> Does anyone have a concern with removing them?
>>> 
>>> Best regards,
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 

From Andreas.Fischer at kreis-unna.de  Fri Dec 18 15:26:08 2009
From: Andreas.Fischer at kreis-unna.de (Fischer, Andreas)
Date: Fri Dec 18 15:27:17 2009
Subject: [gdal-dev] Differences in the coordinates of the origin in tfw-file
	and GeoTiff
Message-ID: <A85A2E77866D1D4183268072EB15A8B80517C1E3@kum1.kreis-unna.int>

Dear list, 
while translating or warping rasterdata with gdal_translate or gdalwarp I experienced a difference in the origin of an image in the tags of the GeoTiff-header and the tfw-file. 
The header of my original image looks as follows: 

Driver: GTiff/GeoTIFF 
Files: C:\test\in.tif 
Size is 10000, 10000 
Coordinate System is: 
PROJCS["DHDN / 3-degree Gauss-Kruger zone 3", 
GEOGCS["DHDN", 
DATUM["Deutsches_Hauptdreiecksnetz", 
SPHEROID["Bessel 1841",6377397.155,299.1528128000009, 
AUTHORITY["EPSG","7004"]], 
AUTHORITY["EPSG","6314"]], 
PRIMEM["Greenwich",0], 
UNIT["degree",0.0174532925199433], 
AUTHORITY["EPSG","4314"]], 
PROJECTION["Transverse_Mercator"], 
PARAMETER["latitude_of_origin",0], 
PARAMETER["central_meridian",9], 
PARAMETER["scale_factor",1], 
PARAMETER["false_easting",3500000], 
PARAMETER["false_northing",0], 
UNIT["metre",1, 
AUTHORITY["EPSG","9001"]], 
AUTHORITY["EPSG","31467"]]Origin = (3406000.000000000000000,5703000.000000000000000) 
Pixel Size = (0.100000000000000,-0.100000000000000) 
[ ... ] 
Corner Coordinates: 
Upper Left ( 3406000.000, 5703000.000) ( 7d38'50.85"E, 51d27'18.40"N) 
Lower Left ( 3406000.000, 5702000.000) ( 7d38'51.81"E, 51d26'46.05"N) 
Upper Right ( 3407000.000, 5703000.000) ( 7d39'42.63"E, 51d27'19.00"N) 
Lower Right ( 3407000.000, 5702000.000) ( 7d39'43.58"E, 51d26'46.64"N) 
Center ( 3406500.000, 5702500.000) ( 7d39'17.22"E, 51d27'2.52"N) 

The tfw-file coming out using the creation option -co TFW=YES (gdal_translate -co TFW=YES C:\test\in.tif C:\test\out.tif) looks like this: 

0.1000000000 
0.0000000000 
0.0000000000 
-0.1000000000 
3406000.0499999998 
5702999.9500000002 

The GeoTiff-tags in this image (out.tif) is still the same as above. But amazingly there is a slight difference in x and y coordinate of approximately 5 cm between tfw and GeoTiff. This difference does occur the other way around too. For example creating a GeoTiff from a png image with a tfw-file I get the difference in the new GeoTiff-tags as well. 
I start with those values in the tfw-file ... 

0.0846596700 
0.0000000000 
0.0000000000 
-0.0846596700 
392000.0000000000 
5733000.0000000000 

... and get these in the GeoTiff: 

Origin = (391999.957670164990000,5733000.042329834800000) 
Pixel Size = (0.084659670000000,-0.084659670000000) 

As mentioned above, the coordinates for the origin are not the same, but the image didn't change. Does anybody know about this behavior? 
I would be glad to hear from you. 
Thanks so far and best regards 
Andreas

Im Auftrag 
Andreas Fischer 
Kreis Unna - Der Landrat
Zentrale Datenverarbeitung
Friedrich-Ebert-Stra?e 17
59425 Unna 
Fon 02303 27-4416
Fax 02303 27-2896

Diese E-Mail wurde beim Ausgang auf Viren geprueft. Wegen der potentiellen Gefahr auf den Uebertragungswegen wird zu einer Vireneingangskontrolle geraten. Eine Haftung f?r Virenfreiheit wird ausgeschlossen.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091218/943b607a/attachment.html
From even.rouault at mines-paris.org  Fri Dec 18 15:39:18 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 18 15:39:30 2009
Subject: [gdal-dev] Differences in the coordinates of the origin in
	tfw-file and GeoTiff
In-Reply-To: <A85A2E77866D1D4183268072EB15A8B80517C1E3@kum1.kreis-unna.int>
References: <A85A2E77866D1D4183268072EB15A8B80517C1E3@kum1.kreis-unna.int>
Message-ID: <4B2BE876.6010503@mines-paris.org>

Yes, this is always a bit surprising at the beginning. There's a 
half-pixel size shift between worlfile and GDAL conventions for the 
origin. wordfile origin is at the center of the topleft pixel, whereas 
GDAL origin is at the topleft corner of the topleft pixel. But GDAL 
takes care of applying the right shift when reading from or writing into 
worldfile.

Your 5cm shift is indeed half the pixel size in your example.

Fischer, Andreas a ?crit :
>
> Dear list,
>
> while translating or warping rasterdata with gdal_translate or 
> gdalwarp I experienced a difference in the origin of an image in the 
> tags of the GeoTiff-header and the tfw-file.
>
> The header of my original image looks as follows:
>
> Driver: GTiff/GeoTIFF
>
> Files: C:\test\in.tif
>
> Size is 10000, 10000
>
> Coordinate System is:
>
> PROJCS["DHDN / 3-degree Gauss-Kruger zone 3",
>
> GEOGCS["DHDN",
>
> DATUM["Deutsches_Hauptdreiecksnetz",
>
> SPHEROID["Bessel 1841",6377397.155,299.1528128000009,
>
> AUTHORITY["EPSG","7004"]],
>
> AUTHORITY["EPSG","6314"]],
>
> PRIMEM["Greenwich",0],
>
> UNIT["degree",0.0174532925199433],
>
> AUTHORITY["EPSG","4314"]],
>
> PROJECTION["Transverse_Mercator"],
>
> PARAMETER["latitude_of_origin",0],
>
> PARAMETER["central_meridian",9],
>
> PARAMETER["scale_factor",1],
>
> PARAMETER["false_easting",3500000],
>
> PARAMETER["false_northing",0],
>
> UNIT["metre",1,
>
> AUTHORITY["EPSG","9001"]],
>
> AUTHORITY["EPSG","31467"]]Origin = 
> (3406000.000000000000000,5703000.000000000000000)
>
> Pixel Size = (0.100000000000000,-0.100000000000000)
>
> [ ? ]
>
> Corner Coordinates:
>
> Upper Left ( 3406000.000, 5703000.000) ( 7d38'50.85"E, 51d27'18.40"N)
>
> Lower Left ( 3406000.000, 5702000.000) ( 7d38'51.81"E, 51d26'46.05"N)
>
> Upper Right ( 3407000.000, 5703000.000) ( 7d39'42.63"E, 51d27'19.00"N)
>
> Lower Right ( 3407000.000, 5702000.000) ( 7d39'43.58"E, 51d26'46.64"N)
>
> Center ( 3406500.000, 5702500.000) ( 7d39'17.22"E, 51d27'2.52"N)
>
> The tfw-file coming out using the creation option -co TFW=YES 
> (gdal_translate -co TFW=YES C:\test\in.tif C:\test\out.tif) looks like 
> this:
>
> 0.1000000000
>
> 0.0000000000
>
> 0.0000000000
>
> -0.1000000000
>
> 3406000.0499999998
>
> 5702999.9500000002
>
> The GeoTiff-tags in this image (out.tif) is still the same as above. 
> But amazingly there is a slight difference in x and y coordinate of 
> approximately 5 cm between tfw and GeoTiff. This difference does occur 
> the other way around too. For example creating a GeoTiff from a png 
> image with a tfw-file I get the difference in the new GeoTiff-tags as 
> well.
>
> I start with those values in the tfw-file ?
>
> 0.0846596700
>
> 0.0000000000
>
> 0.0000000000
>
> -0.0846596700
>
> 392000.0000000000
>
> 5733000.0000000000
>
> ? and get these in the GeoTiff:
>
> Origin = (391999.957670164990000,5733000.042329834800000)
>
> Pixel Size = (0.084659670000000,-0.084659670000000)
>
> As mentioned above, the coordinates for the origin are not the same, 
> but the image didn't change. Does anybody know about this behavior?
>
> I would be glad to hear from you.
>
> Thanks so far and best regards
>
> Andreas
>
> Im Auftrag
>
> Andreas Fischer
>
> Kreis Unna - Der Landrat
> Zentrale Datenverarbeitung
> Friedrich-Ebert-Stra?e 17
> 59425 Unna
>
> Fon 02303 27-4416
> Fax 02303 27-2896
>
> Diese E-Mail wurde beim Ausgang auf Viren geprueft. Wegen der potentiellen Gefahr auf den Uebertragungswegen wird zu einer Vireneingangskontrolle geraten. Eine Haftung f?r Virenfreiheit wird ausgeschlossen.
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Fri Dec 18 16:04:05 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Dec 18 16:04:07 2009
Subject: [gdal-dev] Motion: Commit Access for Martin Landa
Message-ID: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>

I nominate Martin Landa for SVN commit access to GDAL.

Martin is a GRASS developer and about to include a new driver (VFK) in OGR
and be a maintainer of this driver and would also focus on the GRASS related
portions of the GDAL code. Martin has replied to this list indicating his
agreement to RFC 3.

I'm starting with my +1 to this motion.


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091218/7bcb7740/attachment.html
From even.rouault at mines-paris.org  Fri Dec 18 16:06:23 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Dec 18 16:06:28 2009
Subject: [gdal-dev] Motion: Commit Access for Martin Landa
In-Reply-To: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
References: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
Message-ID: <4B2BEECF.8010908@mines-paris.org>

I'm +1

Best regards,

Even

Tamas Szekeres a ?crit :
> I nominate Martin Landa for SVN commit access to GDAL.
>
> Martin is a GRASS developer and about to include a new driver (VFK) in 
> OGR and be a maintainer of this driver and would also focus on the 
> GRASS related portions of the GDAL code. Martin has replied to this 
> list indicating his agreement to RFC 3.
>
> I'm starting with my +1 to this motion.
>
>
> Best regards,
>
> Tamas
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From hobu.inc at gmail.com  Fri Dec 18 16:06:49 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Fri Dec 18 16:06:52 2009
Subject: [gdal-dev] Motion: Commit Access for Martin Landa
In-Reply-To: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
References: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
Message-ID: <26B12532-0985-4982-9824-F8CFA30749D2@gmail.com>

+1 Howard

On Dec 18, 2009, at 3:04 PM, Tamas Szekeres wrote:

> I nominate Martin Landa for SVN commit access to GDAL.
> 
> Martin is a GRASS developer and about to include a new driver (VFK) in OGR and be a maintainer of this driver and would also focus on the GRASS related portions of the GDAL code. Martin has replied to this list indicating his agreement to RFC 3.
> 
> I'm starting with my +1 to this motion.
> 
> 
> Best regards,
> 
> Tamas
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From dmorissette at mapgears.com  Fri Dec 18 16:07:24 2009
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Fri Dec 18 16:07:27 2009
Subject: [gdal-dev] Motion: Commit Access for Martin Landa
In-Reply-To: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
References: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
Message-ID: <4B2BEF0C.8060106@mapgears.com>

Tamas Szekeres wrote:
> I nominate Martin Landa for SVN commit access to GDAL.
> 
> Martin is a GRASS developer and about to include a new driver (VFK) in 
> OGR and be a maintainer of this driver and would also focus on the GRASS 
> related portions of the GDAL code. Martin has replied to this list 
> indicating his agreement to RFC 3.
> 

+1

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From Andreas.Fischer at kreis-unna.de  Fri Dec 18 18:22:11 2009
From: Andreas.Fischer at kreis-unna.de (Fischer, Andreas)
Date: Fri Dec 18 18:22:15 2009
Subject: AW: [gdal-dev] Differences in the coordinates of the origin in
	tfw-file and GeoTiff
In-Reply-To: <4B2BE876.6010503@mines-paris.org>
Message-ID: <A85A2E77866D1D4183268072EB15A8B80517C1E4@kum1.kreis-unna.int>

Dear Even,
thank your very much for that explanation. And indeed, I'm very surprised that there is a kind of a suborder within a pixel!
But that leads me to another question: 
You are talking about GDAL conventions. That means looking on the GeoTiff tags with another program than GDAL would show different values of the coordinates as well? So it's not a matter of GeoTiff itself?
And do you know about the behavior of MapInfo Professional? Is it right, that MapInfo uses the same reference as GDAL?
And the most important question: Assume I have a GeoTiff, a tfw and a MapInfo TAB-file for the same image file. Is the displaying of the image always the same regardless of which kind of referencing information a GIS programms uses?
I would be glad to hear from you again.
Thanks and best regards
Andreas

-----Urspr?ngliche Nachricht-----
Von: Even Rouault [mailto:even.rouault@mines-paris.org]
Gesendet: Freitag, 18. Dezember 2009 21:39
An: Fischer, Andreas
Cc: gdal-dev@lists.osgeo.org
Betreff: Re: [gdal-dev] Differences in the coordinates of the origin in
tfw-file and GeoTiff


Yes, this is always a bit surprising at the beginning. There's a 
half-pixel size shift between worlfile and GDAL conventions for the 
origin. wordfile origin is at the center of the topleft pixel, whereas 
GDAL origin is at the topleft corner of the topleft pixel. But GDAL 
takes care of applying the right shift when reading from or writing into 
worldfile.

Your 5cm shift is indeed half the pixel size in your example.

Fischer, Andreas a ?crit :
>
> Dear list,
>
> while translating or warping rasterdata with gdal_translate or 
> gdalwarp I experienced a difference in the origin of an image in the 
> tags of the GeoTiff-header and the tfw-file.
>
> The header of my original image looks as follows:
>
> Driver: GTiff/GeoTIFF
>
> Files: C:\test\in.tif
>
> Size is 10000, 10000
>
> Coordinate System is:
>
> PROJCS["DHDN / 3-degree Gauss-Kruger zone 3",
>
> GEOGCS["DHDN",
>
> DATUM["Deutsches_Hauptdreiecksnetz",
>
> SPHEROID["Bessel 1841",6377397.155,299.1528128000009,
>
> AUTHORITY["EPSG","7004"]],
>
> AUTHORITY["EPSG","6314"]],
>
> PRIMEM["Greenwich",0],
>
> UNIT["degree",0.0174532925199433],
>
> AUTHORITY["EPSG","4314"]],
>
> PROJECTION["Transverse_Mercator"],
>
> PARAMETER["latitude_of_origin",0],
>
> PARAMETER["central_meridian",9],
>
> PARAMETER["scale_factor",1],
>
> PARAMETER["false_easting",3500000],
>
> PARAMETER["false_northing",0],
>
> UNIT["metre",1,
>
> AUTHORITY["EPSG","9001"]],
>
> AUTHORITY["EPSG","31467"]]Origin = 
> (3406000.000000000000000,5703000.000000000000000)
>
> Pixel Size = (0.100000000000000,-0.100000000000000)
>
> [ ? ]
>
> Corner Coordinates:
>
> Upper Left ( 3406000.000, 5703000.000) ( 7d38'50.85"E, 51d27'18.40"N)
>
> Lower Left ( 3406000.000, 5702000.000) ( 7d38'51.81"E, 51d26'46.05"N)
>
> Upper Right ( 3407000.000, 5703000.000) ( 7d39'42.63"E, 51d27'19.00"N)
>
> Lower Right ( 3407000.000, 5702000.000) ( 7d39'43.58"E, 51d26'46.64"N)
>
> Center ( 3406500.000, 5702500.000) ( 7d39'17.22"E, 51d27'2.52"N)
>
> The tfw-file coming out using the creation option -co TFW=YES 
> (gdal_translate -co TFW=YES C:\test\in.tif C:\test\out.tif) looks like 
> this:
>
> 0.1000000000
>
> 0.0000000000
>
> 0.0000000000
>
> -0.1000000000
>
> 3406000.0499999998
>
> 5702999.9500000002
>
> The GeoTiff-tags in this image (out.tif) is still the same as above. 
> But amazingly there is a slight difference in x and y coordinate of 
> approximately 5 cm between tfw and GeoTiff. This difference does occur 
> the other way around too. For example creating a GeoTiff from a png 
> image with a tfw-file I get the difference in the new GeoTiff-tags as 
> well.
>
> I start with those values in the tfw-file ?
>
> 0.0846596700
>
> 0.0000000000
>
> 0.0000000000
>
> -0.0846596700
>
> 392000.0000000000
>
> 5733000.0000000000
>
> ? and get these in the GeoTiff:
>
> Origin = (391999.957670164990000,5733000.042329834800000)
>
> Pixel Size = (0.084659670000000,-0.084659670000000)
>
> As mentioned above, the coordinates for the origin are not the same, 
> but the image didn't change. Does anybody know about this behavior?
>
> I would be glad to hear from you.
>
> Thanks so far and best regards
>
> Andreas
>
> Im Auftrag
>
> Andreas Fischer
>
> Kreis Unna - Der Landrat
> Zentrale Datenverarbeitung
> Friedrich-Ebert-Stra?e 17
> 59425 Unna
>
> Fon 02303 27-4416
> Fax 02303 27-2896
>
> Diese E-Mail wurde beim Ausgang auf Viren geprueft. Wegen der potentiellen Gefahr auf den Uebertragungswegen wird zu einer Vireneingangskontrolle geraten. Eine Haftung f?r Virenfreiheit wird ausgeschlossen.
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


Diese E-Mail wurde beim Ausgang auf Viren geprueft. Wegen der potentiellen Gefahr auf den Uebertragungswegen wird zu einer Vireneingangskontrolle geraten. Eine Haftung f?r Virenfreiheit wird ausgeschlossen.

From warmerdam at pobox.com  Fri Dec 18 19:36:32 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Dec 18 19:36:18 2009
Subject: [gdal-dev] Motion: Commit Access for Martin Landa
In-Reply-To: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
References: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
Message-ID: <4B2C2010.90409@pobox.com>

Tamas Szekeres wrote:
> I nominate Martin Landa for SVN commit access to GDAL.
> 
> Martin is a GRASS developer and about to include a new driver (VFK) in 
> OGR and be a maintainer of this driver and would also focus on the GRASS 
> related portions of the GDAL code. Martin has replied to this list 
> indicating his agreement to RFC 3.

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From didier.richard at ign.fr  Sat Dec 19 08:24:21 2009
From: didier.richard at ign.fr (RICHARD Didier)
Date: Sat Dec 19 08:33:44 2009
Subject: [gdal-dev] [MITAB] Unsupported case or corrupt file
Message-ID: <33670.87.231.96.39.1261229061.squirrel@webmail.ign.fr>

Hi all,

I'm trying to read a (big) mapinfo TAB file and I'm facing the following
error (source is the today's trunk) with ogr2ogr as well as ogrinfo :

____
$ ogrinfo -al rall.TAB
Had to open data source read-only.
INFO: Open of `rall.TAB'
      using driver `MapInfo File' successful.

Layer name: rall
Geometry: Unknown (any)
Feature Count: 6138177
Extent: (-5.053907, 41.367176) - (9.559522, 51.075147)
Layer SRS WKT:
GEOGCS["unnamed",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563],
        TOWGS84[0,0,0,-0,-0,-0,0]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
ID: Integer (0.0)
ERROR 7: Unsupported case or corrupt file: MULTIPLINE/REGION object
vertices do not appear to be grouped together.
ERROR 3: Failed reading coordinate data at offset 210440
____

With debug on there is no more usefull information.
My objective is to put this dataset into postgresql.

The mapinfo files I'm trying to read are as follows (ls -lh):

____
  135 rall.TAB
 1,2G rall.MAP
  24M rall.ID
  30M rall.DAT
____

In mitab_mapcoordblock.cpp (line 503) when the error occurs I have got the
following values :
i=0 numSections=1
nVextexOffset=-16384003
numVertices=24
numVerticesTotal=24

The negative offset is the cause of the error, but it is declared as an
int. Is this right ?

I have not found any tickets about this kind of error.

Any idea on how to fix this (I could read the TAB file with QGIS 1.3.0 but
not sure if QGIS is using GDAL/OGR for reading files)?


Regards
-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From leonardo.piga at gmail.com  Sat Dec 19 09:32:23 2009
From: leonardo.piga at gmail.com (Leonardo Piga)
Date: Sat Dec 19 09:32:51 2009
Subject: [gdal-dev] Possible SWIG Python bug
Message-ID: <2b366a5e0912190632i52f84f22lcdc6f24348b80a1d@mail.gmail.com>

I'm working on creating an autotest for OGR GTM driver, I just started
the work and I faced a little problem with the script run_all.py.
I've already solved the problem, however, since I'm not a Python
expert, I'm reporting the problem that I had. If it is not a bug,
please excuse me.

I've checked out and installed gdal from source. I've checked out
autotest scripts, too.
When I ran run_all.py I got the following message:

Traceback (most recent call last):
  File "run_all.py", line 30, in <module>
    import gdaltest
  File "pymod/gdaltest.py", line 35, in <module>
    from osgeo import gdal
  File "/usr/local/lib/python2.6/dist-packages/osgeo/__init__.py",
line 21, in <module>
    _gdal = swig_import_helper()
  File "/usr/local/lib/python2.6/dist-packages/osgeo/__init__.py",
line 20, in swig_import_helper
    return _mod
UnboundLocalError: local variable '_mod' referenced before assignment

I took a look at the file
/usr/local/lib/python2.6/dist-packages/osgeo/__init__.py and I saw
that I was having an exception, but the error message was not giving
me any hint. I think there is a bug in __init__.py code, because _mod
is being used without being defined when the exception is raised.


Take a look at these lines:

            try:
                _mod = imp.load_module('_gdal', fp, pathname, description)
            finally:
                fp.close()
                return _mod

Is it really a bug? Is it possible to define _mod before the try and
finally block?

In time, I solved the problem by making LD_LIBRARY_PATH point to
/user/local/lib. So I'm not having the exception anymore and the
problem was solved.

Thanks a lot
-- 
Leonardo de Paula Rosa Piga
http://lampiao.lsc.ic.unicamp.br/~piga
From even.rouault at mines-paris.org  Sat Dec 19 10:47:02 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 19 10:47:17 2009
Subject: [gdal-dev] Possible SWIG Python bug
In-Reply-To: <2b366a5e0912190632i52f84f22lcdc6f24348b80a1d@mail.gmail.com>
References: <2b366a5e0912190632i52f84f22lcdc6f24348b80a1d@mail.gmail.com>
Message-ID: <4B2CF576.4000305@mines-paris.org>

Leonardo,

This part of swig/python/osgeo/__init__.py is in fact a copy & paste of 
code in osgeo/gdal.py, which is a SWIG generated file.
It was definitely a bug in SWIG 1.3.39 that was fixed in 1.3.40 and in 
that latter version, the generated code looks like :

            try:
                _mod = imp.load_module('_gdal', fp, pathname, description)
            finally:
                fp.close()
            return _mod

So, I've fixed similarly swig/python/osgeo/__init__.py in r18350 and now 
a more meaningful error is reported

Thanks for having reported that.

Best regards,

Even

> I'm working on creating an autotest for OGR GTM driver, I just started
> the work and I faced a little problem with the script run_all.py.
> I've already solved the problem, however, since I'm not a Python
> expert, I'm reporting the problem that I had. If it is not a bug,
> please excuse me.
>
> I've checked out and installed gdal from source. I've checked out
> autotest scripts, too.
> When I ran run_all.py I got the following message:
>
> Traceback (most recent call last):
>   File "run_all.py", line 30, in <module>
>     import gdaltest
>   File "pymod/gdaltest.py", line 35, in <module>
>     from osgeo import gdal
>   File "/usr/local/lib/python2.6/dist-packages/osgeo/__init__.py",
> line 21, in <module>
>     _gdal = swig_import_helper()
>   File "/usr/local/lib/python2.6/dist-packages/osgeo/__init__.py",
> line 20, in swig_import_helper
>     return _mod
> UnboundLocalError: local variable '_mod' referenced before assignment
>
> I took a look at the file
> /usr/local/lib/python2.6/dist-packages/osgeo/__init__.py and I saw
> that I was having an exception, but the error message was not giving
> me any hint. I think there is a bug in __init__.py code, because _mod
> is being used without being defined when the exception is raised.
>
>
> Take a look at these lines:
>
>             try:
>                 _mod = imp.load_module('_gdal', fp, pathname, description)
>             finally:
>                 fp.close()
>                 return _mod
>
> Is it really a bug? Is it possible to define _mod before the try and
> finally block?
>
> In time, I solved the problem by making LD_LIBRARY_PATH point to
> /user/local/lib. So I'm not having the exception anymore and the
> problem was solved.
>
> Thanks a lot
>   


From mgdenno at gmail.com  Sat Dec 19 13:53:42 2009
From: mgdenno at gmail.com (Matthew Denno)
Date: Sat Dec 19 13:53:45 2009
Subject: [gdal-dev] Hangs on OGRLayer ResetReading
Message-ID: <633be2250912191053i72d566ccr8b886c50450ddba@mail.gmail.com>

Hi,

I was wondering if someone could help me out. ?I have been working on
a little piece of code here and seems to be stuck. ?The piece is very
close to one of the examples on the website so I would think that it
would be right...maybe I have missed something simple. ?Anyway below
is the code. ?It seems like it hangs on "poLayer->ResetReading();".
It successfully prints out the number of features then dies.

Thanks,

Matt

CODE:

int z_shape_to_delaunay(Delaunay &dt,
                        QString myLayerPath,
                        bool useAnalysisMask,
                        QString analysisMaskPath)
{
    qDebug("z_shape_to_delaunay");

    OGRRegisterAll();

    OGRDataSource       *poDS;

    poDS = OGRSFDriverRegistrar::Open( myLayerPath, FALSE );
    if( poDS == NULL )
    {
        qDebug( "Shapefile failed to open" );
        exit( 1 );
    }

    OGRLayer  *poLayer;

    poLayer = poDS->GetLayer( 0 );

    qDebug() << "Number of Features: " << poLayer->GetFeatureCount(1);

    if (poLayer = NULL)
    {
        qDebug( "Layer ID was out of range" );
        exit( 1 );
    }

    OGRFeature *poFeature;

    poLayer->ResetReading();

    qDebug("start loop");

    while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
        OGRGeometry *poGeometry;
        poGeometry = poFeature->GetGeometryRef();

        qDebug("in loop");

        if (!poGeometry)
        {
            continue;
        }

        if( poGeometry != NULL && poGeometry->getGeometryType() == wkbPoint25D )
        {
            OGRPoint *poPoint = (OGRPoint *) poGeometry;
            Point pt = Point(poPoint->getX(), poPoint->getY(), poPoint->getZ());
            dt.insert(pt);
        }
        else
        {
            qDebug( "no point geometry" );
        }
     }

    }
    return (0);
}
From even.rouault at mines-paris.org  Sat Dec 19 16:06:29 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 19 16:06:42 2009
Subject: [gdal-dev] Hangs on OGRLayer ResetReading
In-Reply-To: <633be2250912191053i72d566ccr8b886c50450ddba@mail.gmail.com>
References: <633be2250912191053i72d566ccr8b886c50450ddba@mail.gmail.com>
Message-ID: <4B2D4055.6040309@mines-paris.org>

Matthew,

I can't see why it would fail on ResetReading(). It should run just 
fine. The only point I've seen is that your code has memory leaks. It 
leaks each read OGRFeature and the OGRDataSource. See the full example 
on the tutorial to correctly deallocate those objects. But that doesn't 
explain your issue.

I think you'll have to use a debugger and step in to see what happens.

Do OGR command line utilities work on your shapefile ? For example, 
ogrinfo ?

Best regards,

Even

Matthew Denno a ?crit :
> Hi,
>
> I was wondering if someone could help me out.  I have been working on
> a little piece of code here and seems to be stuck.  The piece is very
> close to one of the examples on the website so I would think that it
> would be right...maybe I have missed something simple.  Anyway below
> is the code.  It seems like it hangs on "poLayer->ResetReading();".
> It successfully prints out the number of features then dies.
>
> Thanks,
>
> Matt
>
> CODE:
>
> int z_shape_to_delaunay(Delaunay &dt,
>                         QString myLayerPath,
>                         bool useAnalysisMask,
>                         QString analysisMaskPath)
> {
>     qDebug("z_shape_to_delaunay");
>
>     OGRRegisterAll();
>
>     OGRDataSource       *poDS;
>
>     poDS = OGRSFDriverRegistrar::Open( myLayerPath, FALSE );
>     if( poDS == NULL )
>     {
>         qDebug( "Shapefile failed to open" );
>         exit( 1 );
>     }
>
>     OGRLayer  *poLayer;
>
>     poLayer = poDS->GetLayer( 0 );
>
>     qDebug() << "Number of Features: " << poLayer->GetFeatureCount(1);
>
>     if (poLayer = NULL)
>     {
>         qDebug( "Layer ID was out of range" );
>         exit( 1 );
>     }
>
>     OGRFeature *poFeature;
>
>     poLayer->ResetReading();
>
>     qDebug("start loop");
>
>     while( (poFeature = poLayer->GetNextFeature()) != NULL )
>     {
>         OGRGeometry *poGeometry;
>         poGeometry = poFeature->GetGeometryRef();
>
>         qDebug("in loop");
>
>         if (!poGeometry)
>         {
>             continue;
>         }
>
>         if( poGeometry != NULL && poGeometry->getGeometryType() == wkbPoint25D )
>         {
>             OGRPoint *poPoint = (OGRPoint *) poGeometry;
>             Point pt = Point(poPoint->getX(), poPoint->getY(), poPoint->getZ());
>             dt.insert(pt);
>         }
>         else
>         {
>             qDebug( "no point geometry" );
>         }
>      }
>
>     }
>     return (0);
> }
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>   


From kanenas0 at yahoo.com  Sat Dec 19 19:17:01 2009
From: kanenas0 at yahoo.com (kanenas)
Date: Sat Dec 19 19:17:04 2009
Subject: [Gdal-dev] Build Gdal 1.6.3 with MSG driver on Windows Vista and
	Microsoft Visual Studio 2008
Message-ID: <1261268221979-4193252.post@n2.nabble.com>


Dear list

I want to build MSG DRIVER for GDAL in order to read hrit data. I have
downloaded Wavelet Transform Software 2.04 on my Vista PC. I have also
installed Microsoft Visual Studio 2008 with SP1.

When I built GDAL 1.6.3 with no extra enabled driver, everything was fine.
Build was successful and gdal worked fine. After that I tried to enable MSG
driver. I extracted the *.vc makefiles for the PublicDecompWT folder from
the file PublicDecompWTMakefiles.zip and I also copied the Wavelet Transform
Files (folders DISE and COMP). I built GDAL again, and it was successful.
When I tried to read hrit data, gdal didn't support MSG driver. I checked
the build log and there was not any line for the PublicDecompWT. I opened
the \gdal\frmts\makefle.vc and I saw that there was not EXTRAFLAG for MSG. I
added  -DFRMT_msg at the end of EXTRAFLAGS. I built GDAL again, and I got
many warnings and one error for MSG


1>e:\soft\gdal\frmts>cd msg   && nmake /nologo /f makefile.vc   && cd .. 
1> cl /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd..\..\gdal16.pdb -I..\..\port -I..\..\ogr
-I..\..\gcore  -I..\..\alg -I..\..\ogr\ogrsf_frmts -I PublicDecompWT\DISE -I
PublicDecompWT\COMP\WT\Inc -I PublicDecompWT\COMP\Inc -DOGR_ENABLED  /c
msgdataset.cpp
1>msgdataset.cpp
1>e:\soft\gdal\frmts\msg\reflectancecalculator.h(57) : warning C4512:
'ReflectanceCalculator' : assignment operator could not be generated
1>        e:\soft\gdal\frmts\msg\reflectancecalculator.h(40) : see
declaration of 'ReflectanceCalculator'
1>WINDOWS BUILD
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(793) : warning
C4996: 'std::basic_string<_Elem,_Traits,_Ax>::copy': Function call with
parameters that may be unsafe - this call relies on the caller to check that
the passed values are correct. To disable this warning, use
-D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++
'Checked Iterators'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>        C:\Program Files\Microsoft Visual Studio
9.0\VC\include\xstring(1709) : see declaration of
'std::basic_string<_Elem,_Traits,_Ax>::copy'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(803) : warning
C4996: 'std::basic_string<_Elem,_Traits,_Ax>::copy': Function call with
parameters that may be unsafe - this call relies on the caller to check that
the passed values are correct. To disable this warning, use
-D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++
'Checked Iterators'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>        C:\Program Files\Microsoft Visual Studio
9.0\VC\include\xstring(1709) : see declaration of
'std::basic_string<_Elem,_Traits,_Ax>::copy'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(2020) : warning
C4100: 'span' : unreferenced formal parameter
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(2207) : warning
C4244: '-=' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(2235) : warning
C4244: 'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT\DISE\CDataField.h(381) : warning
C4100: 'i_Size' : unreferenced formal parameter
1>e:\soft\gdal\frmts\msg\PublicDecompWT\COMP\Inc\CImage.h(198) : warning
C4244: '=' : conversion from 'unsigned int' to 'unsigned short', possible
loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT\COMP\Inc\CImage.h(258) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'const unsigned
short', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT\COMP\Inc\CImage.h(258) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'const unsigned
short', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT\COMP\Inc\CQualityInfo.h(146) :
warning C4244: '=' : conversion from 'int' to 'short', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT/COMP/WT/Inc/CWTDecoder.h(87) :
warning C4244: 'argument' : conversion from 'unsigned int' to 'const
unsigned short', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT/COMP/WT/Inc/CWTDecoder.h(87) :
warning C4244: 'argument' : conversion from 'unsigned int' to 'const
unsigned short', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT/COMP/WT/Inc/CWTDecoder.h(88) :
warning C4244: 'argument' : conversion from 'unsigned int' to 'const
unsigned short', possible loss of data
1>e:\soft\gdal\frmts\msg\PublicDecompWT/COMP/WT/Inc/CWTDecoder.h(88) :
warning C4244: 'argument' : conversion from 'unsigned int' to 'const
unsigned short', possible loss of data
1>msgdataset.cpp(496) : warning C4244: 'initializing' : conversion from
'const int' to 'unsigned short', possible loss of data
1>msgdataset.cpp(497) : warning C4244: 'initializing' : conversion from
'const int' to 'unsigned short', possible loss of data
1>msgdataset.cpp(498) : warning C4244: 'initializing' : conversion from
'const int' to 'unsigned short', possible loss of data
1>msgdataset.cpp(578) : warning C4244: '=' : conversion from 'int' to
'GByte', possible loss of data
1>msgdataset.cpp(583) : warning C4244: '=' : conversion from 'unsigned
short' to 'GByte', possible loss of data
1>msgdataset.cpp(599) : warning C4244: '=' : conversion from 'int' to
'GByte', possible loss of data
1>msgdataset.cpp(611) : warning C4244: '=' : conversion from 'unsigned
short' to 'GByte', possible loss of data
1>msgdataset.cpp(455) : warning C4100: 'nBlockXOff' : unreferenced formal
parameter
1> cl /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd..\..\gdal16.pdb -I..\..\port -I..\..\ogr
-I..\..\gcore  -I..\..\alg -I..\..\ogr\ogrsf_frmts -I PublicDecompWT\DISE -I
PublicDecompWT\COMP\WT\Inc -I PublicDecompWT\COMP\Inc -DOGR_ENABLED  /c
xritheaderparser.cpp
1>xritheaderparser.cpp
1>xritheaderparser.cpp(75) : warning C4146: unary minus operator applied to
unsigned type, result still unsigned
1>xritheaderparser.cpp(129) : warning C4189: 'loff' : local variable is
initialized but not referenced
1>xritheaderparser.cpp(128) : warning C4189: 'coff' : local variable is
initialized but not referenced
1>xritheaderparser.cpp(126) : warning C4189: 'cfac' : local variable is
initialized but not referenced
1> cl /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd..\..\gdal16.pdb -I..\..\port -I..\..\ogr
-I..\..\gcore  -I..\..\alg -I..\..\ogr\ogrsf_frmts -I PublicDecompWT\DISE -I
PublicDecompWT\COMP\WT\Inc -I PublicDecompWT\COMP\Inc -DOGR_ENABLED  /c
prologue.cpp
1>prologue.cpp
1>prologue.cpp(221) : warning C4189: 'version' : local variable is
initialized but not referenced
1> cl /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd..\..\gdal16.pdb -I..\..\port -I..\..\ogr
-I..\..\gcore  -I..\..\alg -I..\..\ogr\ogrsf_frmts -I PublicDecompWT\DISE -I
PublicDecompWT\COMP\WT\Inc -I PublicDecompWT\COMP\Inc -DOGR_ENABLED  /c
msgcommand.cpp
1>msgcommand.cpp
1>msgcommand.cpp(82) : warning C4018: '<' : signed/unsigned mismatch
1>msgcommand.cpp(83) : warning C4018: '>' : signed/unsigned mismatch
1>msgcommand.cpp(133) : warning C4018: '<' : signed/unsigned mismatch
1>msgcommand.cpp(156) : warning C4018: '<' : signed/unsigned mismatch
1>msgcommand.cpp(185) : warning C4018: '<' : signed/unsigned mismatch
1> cl /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd..\..\gdal16.pdb -I..\..\port -I..\..\ogr
-I..\..\gcore  -I..\..\alg -I..\..\ogr\ogrsf_frmts -I PublicDecompWT\DISE -I
PublicDecompWT\COMP\WT\Inc -I PublicDecompWT\COMP\Inc -DOGR_ENABLED  /c
reflectancecalculator.cpp
1>reflectancecalculator.cpp
1>e:\soft\gdal\frmts\msg\reflectancecalculator.h(57) : warning C4512:
'ReflectanceCalculator' : assignment operator could not be generated
1>        e:\soft\gdal\frmts\msg\reflectancecalculator.h(40) : see
declaration of 'ReflectanceCalculator'
1>reflectancecalculator.cpp(69) : warning C4189: 'lam' : local variable is
initialized but not referenced
1> cd PublicDecompWT\COMP\WT\Src  && nmake /NOLOGO /f makefile.vc  && cd
..\..\..\..
1> copy *.obj ..\..\..\..\..\o
1>CACCoder.obj
1>CACDecoder.obj
1>CACModel.obj
1>CompressWT.obj
1>CVLCCoder.obj
1>CVLCDecoder.obj
1>CWBlock.obj
1>CWTCoder.obj
1>CWTDecoder.obj
1>        9 file(s) copied.
1> cd PublicDecompWT\COMP\Src  && nmake /NOLOGO /f makefile.vc  && cd
..\..\..
1> copy *.obj ..\..\..\..\o
1>CBuffer.obj
1>CImage.obj
1>CQualityMeasures.obj
1>        3 file(s) copied.
1> cd PublicDecompWT\DISE  && nmake /NOLOGO /f makefile.vc  && cd ..\..
1> cl /nologo /MD /EHsc /Zi /W4 /D_CRT_SECURE_NO_DEPRECATE
/D_CRT_NONSTDC_NO_DEPRECATE /Fd..\..\..\..\gdal16.pdb -I..\..\..\..\port
-I..\..\..\..\ogr -I..\..\..\..\gcore  -I..\..\..\..\alg
-I..\..\..\..\ogr\ogrsf_frmts -D"WIN32" -DOGR_ENABLED  /c
CxRITFileHeaderRecords.cpp
1>CxRITFileHeaderRecords.cpp
1>WINDOWS BUILD
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime.h(463) : warning C4244:
'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(793) : warning
C4996: 'std::basic_string<_Elem,_Traits,_Ax>::copy': Function call with
parameters that may be unsafe - this call relies on the caller to check that
the passed values are correct. To disable this warning, use
-D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++
'Checked Iterators'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>        C:\Program Files\Microsoft Visual Studio
9.0\VC\include\xstring(1709) : see declaration of
'std::basic_string<_Elem,_Traits,_Ax>::copy'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(803) : warning
C4996: 'std::basic_string<_Elem,_Traits,_Ax>::copy': Function call with
parameters that may be unsafe - this call relies on the caller to check that
the passed values are correct. To disable this warning, use
-D_SCL_SECURE_NO_WARNINGS. See documentation on how to use Visual C++
'Checked Iterators'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>        C:\Program Files\Microsoft Visual Studio
9.0\VC\include\xstring(1709) : see declaration of
'std::basic_string<_Elem,_Traits,_Ax>::copy'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>,
1>            _Ax=std::allocator<char>
1>        ]
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(2020) : warning
C4100: 'span' : unreferenced formal parameter
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(2207) : warning
C4244: '-=' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\MSGTime_impl.h(2235) : warning
C4244: 'argument' : conversion from 'int' to 'WORD', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(71) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(71) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(71) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(71) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(71) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(131) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(131) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(131) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(131) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(131) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\YYYYMMDDhhmm.h(131) : warning
C4244: 'argument' : conversion from 'unsigned int' to 'WORD', possible loss
of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\CSpacecraftID.h(200) : warning
C4244: 'return' : conversion from 'const GP_SC_ID::E_SC_ID' to 'unsigned
short', possible loss of data
1>e:\soft\gdal\frmts\msg\publicdecompwt\dise\CSpectralChannelID.h(169) :
warning C4244: 'return' : conversion from 'const
GP_SC_CHAN_ID::E_SC_CHAN_ID' to 'unsigned char', possible loss of data
1>CxRITFileHeaderRecords.cpp(385) : warning C4127: conditional expression is
constant
1>CxRITFileHeaderRecords.cpp(420) : warning C4244: 'argument' : conversion
from 'const DISE::CxRITFileHeaderRecords::EHeaderType' to 'unsigned char',
possible loss of data
1>CxRITFileHeaderRecords.cpp(432) : warning C4244: 'argument' : conversion
from 'const DISE::EFileTypeCode' to 'unsigned char', possible loss of data
1>CxRITFileHeaderRecords.cpp(444) : warning C4244: 'argument' : conversion
from 'const DISE::CxRITFileHeaderRecords::ECompressionFlag' to 'unsigned
char', possible loss of data
1>CxRITFileHeaderRecords.cpp(468) : error C2664:
'std::basic_ostream<_Elem,_Traits>::write' : cannot convert parameter 1 from
'std::_String_const_iterator<_Elem,_Traits,_Alloc>' to 'const char *'
1>        with
1>        [
1>            _Elem=char,
1>            _Traits=std::char_traits<char>
1>        ]
1>        No user-defined-conversion operator available that can perform
this conversion, or the operator cannot be called
1>CxRITFileHeaderRecords.cpp(516) : warning C4244: 'argument' : conversion
from 'const DISE::CxRITFileHeaderRecords::EDataFieldRepresentation' to
'unsigned char', possible loss of data
1>NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\bin\cl.EXE"' : return code '0x2'
1>Stop.



Building failed. I have already built gdal 1.6.3 with msg driver
(--with-msg) on Linux and works fine. Any idea why it doesn't work on
Windows? 

Thanks in advance for your time 

-- 
View this message in context: http://n2.nabble.com/Build-Gdal-1-6-3-with-MSG-driver-on-Windows-Vista-and-Microsoft-Visual-Studio-2008-tp4193252p4193252.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mgdenno at gmail.com  Sun Dec 20 00:10:56 2009
From: mgdenno at gmail.com (Matthew Denno)
Date: Sun Dec 20 00:10:59 2009
Subject: [gdal-dev] Hangs on OGRLayer ResetReading
In-Reply-To: <4B2D4055.6040309@mines-paris.org>
References: <633be2250912191053i72d566ccr8b886c50450ddba@mail.gmail.com>
	<4B2D4055.6040309@mines-paris.org>
Message-ID: <633be2250912192110xdb9b963ub41ff14eb6798587@mail.gmail.com>

Hi Even,

Thanks for your reply and for pointing out my memory leak.

I tried ogrinfo as you suggested and it seems to work fine.  Also, I
am able to output the number of features from my OGRLayer so I know
that it is accessing the file ok...I think anyway.

I have tried to use a debugger but don't seem to be getting anywhere
with that.  When I try and step into the ResetReading a few messages
go by too fast to read then it stops at " Stopped: "signal-received"
".  If I try to step over it I also does something similar.  I am
using the QtCreator IDE.  I guess I need to find out if there is a way
to read all the messages that are generated.

Thanks again,

Matt

On Sat, Dec 19, 2009 at 4:06 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Matthew,
>
> I can't see why it would fail on ResetReading(). It should run just fine.
> The only point I've seen is that your code has memory leaks. It leaks each
> read OGRFeature and the OGRDataSource. See the full example on the tutorial
> to correctly deallocate those objects. But that doesn't explain your issue.
>
> I think you'll have to use a debugger and step in to see what happens.
>
> Do OGR command line utilities work on your shapefile ? For example, ogrinfo
> ?
>
> Best regards,
>
> Even
>
> Matthew Denno a ?crit :
>>
>> Hi,
>>
>> I was wondering if someone could help me out. ?I have been working on
>> a little piece of code here and seems to be stuck. ?The piece is very
>> close to one of the examples on the website so I would think that it
>> would be right...maybe I have missed something simple. ?Anyway below
>> is the code. ?It seems like it hangs on "poLayer->ResetReading();".
>> It successfully prints out the number of features then dies.
>>
>> Thanks,
>>
>> Matt
>>
>> CODE:
>>
>> int z_shape_to_delaunay(Delaunay &dt,
>> ? ? ? ? ? ? ? ? ? ? ? ?QString myLayerPath,
>> ? ? ? ? ? ? ? ? ? ? ? ?bool useAnalysisMask,
>> ? ? ? ? ? ? ? ? ? ? ? ?QString analysisMaskPath)
>> {
>> ? ?qDebug("z_shape_to_delaunay");
>>
>> ? ?OGRRegisterAll();
>>
>> ? ?OGRDataSource ? ? ? *poDS;
>>
>> ? ?poDS = OGRSFDriverRegistrar::Open( myLayerPath, FALSE );
>> ? ?if( poDS == NULL )
>> ? ?{
>> ? ? ? ?qDebug( "Shapefile failed to open" );
>> ? ? ? ?exit( 1 );
>> ? ?}
>>
>> ? ?OGRLayer ?*poLayer;
>>
>> ? ?poLayer = poDS->GetLayer( 0 );
>>
>> ? ?qDebug() << "Number of Features: " << poLayer->GetFeatureCount(1);
>>
>> ? ?if (poLayer = NULL)
>> ? ?{
>> ? ? ? ?qDebug( "Layer ID was out of range" );
>> ? ? ? ?exit( 1 );
>> ? ?}
>>
>> ? ?OGRFeature *poFeature;
>>
>> ? ?poLayer->ResetReading();
>>
>> ? ?qDebug("start loop");
>>
>> ? ?while( (poFeature = poLayer->GetNextFeature()) != NULL )
>> ? ?{
>> ? ? ? ?OGRGeometry *poGeometry;
>> ? ? ? ?poGeometry = poFeature->GetGeometryRef();
>>
>> ? ? ? ?qDebug("in loop");
>>
>> ? ? ? ?if (!poGeometry)
>> ? ? ? ?{
>> ? ? ? ? ? ?continue;
>> ? ? ? ?}
>>
>> ? ? ? ?if( poGeometry != NULL && poGeometry->getGeometryType() ==
>> wkbPoint25D )
>> ? ? ? ?{
>> ? ? ? ? ? ?OGRPoint *poPoint = (OGRPoint *) poGeometry;
>> ? ? ? ? ? ?Point pt = Point(poPoint->getX(), poPoint->getY(),
>> poPoint->getZ());
>> ? ? ? ? ? ?dt.insert(pt);
>> ? ? ? ?}
>> ? ? ? ?else
>> ? ? ? ?{
>> ? ? ? ? ? ?qDebug( "no point geometry" );
>> ? ? ? ?}
>> ? ? }
>>
>> ? ?}
>> ? ?return (0);
>> }
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>>
>
>
>
From gispowerfan at gmail.com  Sun Dec 20 10:18:48 2009
From: gispowerfan at gmail.com (gispowerfan)
Date: Sun Dec 20 10:18:50 2009
Subject: [gdal-dev] question about georaster and python
Message-ID: <200912202318460935010@gmail.com>

hi list,

 I have a question about georaster and python, it's maybe not related to GDAL code directly, but I think it is related question.
Now I want to connect to ORACLE by cx_Oracle(which is Python interface to ORACLE), I can use cx_Oracle to create table,insert simple data, 
but can't run the image loader pl/sql, do anyone have any idea? I don't know whether or not that some image loader pl/sql can run by cx_Oracle? 
I know that I can use gdal python interface to connect Georaster, but I need to test the performance.
thanks in advance.

2009-12-20 



gispowerfan 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091220/fc6b3a9a/attachment.html
From ivan.lucena at pmldnet.com  Sun Dec 20 13:11:44 2009
From: ivan.lucena at pmldnet.com (Ivan)
Date: Sun Dec 20 13:11:56 2009
Subject: [gdal-dev] question about georaster and python
In-Reply-To: <200912202318460935010@gmail.com>
References: <200912202318460935010@gmail.com>
Message-ID: <4B2E68E0.7010300@pmldnet.com>

gispowerfan wrote:
> hi list,
>  
>  I have a question about georaster and python, it's maybe not related to 
> GDAL code directly, but I think it is related question.
> Now I want to connect to ORACLE by cx_Oracle(which is Python interface to ORACLE), I can use cx_Oracle to create table,insert simple data, 
> but can't run the image loader pl/sql, do anyone have any idea? I don't know whether or not that some image loader pl/sql can run by cx_Oracle? 
> I know that I can use gdal python interface to connect Georaster, but I 
> need to test the performance.
> thanks in advance.
>  
> 2009-12-20
> ------------------------------------------------------------------------
> gispowerfan
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

Example:

 >>> from osgeo import gdal
 >>> driver = gdal.GetDriverByName("georaster")
 >>> source = gdal.Open("example.tif")
 >>> target = driver.CreateCopy(source, "geor:user/pwd@db,tab,col", <create options>)
 >>> target = None
 >>> source = None

That would load the geotiff file to GeoRaster.

From gispowerfan at gmail.com  Sun Dec 20 20:51:55 2009
From: gispowerfan at gmail.com (=?utf-8?B?Z2lzcG93ZXJmYW4=?=)
Date: Sun Dec 20 20:59:35 2009
Subject: =?utf-8?B?UmU6IFJlOiBbZ2RhbC1kZXZdIHF1ZXN0aW9uIGFib3V0IGdlb3Jhc3RlciBhbmQgcHl0aG9u?=
References: <200912202318460935010@gmail.com>
Message-ID: <200912210951536718683@gmail.com>

thanks! but I think that the method you mentioned will depress the performance, for example, when using the python driver.CreateCopy(source, "geor:user/pwd@db,tab,col", <create options>), in fact it will use the gdal_translate function. And the performance of PL/SQL will exceed the gdal_translate. so I want to use cx_Oracle, but I don't know how to use PL/SQL by cx_Oracle.


2009-12-21 



gispowerfan 



???? Ivan 
????? 2009-12-21  02:11:53 
???? gispowerfan 
??? gdal-dev 
??? Re: [gdal-dev] question about georaster and python 
 
gispowerfan wrote:
> hi list,
>  
>  I have a question about georaster and python, it's maybe not related to 
> GDAL code directly, but I think it is related question.
> Now I want to connect to ORACLE by cx_Oracle(which is Python interface to ORACLE), I can use cx_Oracle to create table,insert simple data, 
> but can't run the image loader pl/sql, do anyone have any idea? I don't know whether or not that some image loader pl/sql can run by cx_Oracle? 
> I know that I can use gdal python interface to connect Georaster, but I 
> need to test the performance.
> thanks in advance.
>  
> 2009-12-20
> ------------------------------------------------------------------------
> gispowerfan
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
Example:
 >>> from osgeo import gdal
 >>> driver = gdal.GetDriverByName("georaster")
 >>> source = gdal.Open("example.tif")
 >>> target = driver.CreateCopy(source, "geor:user/pwd@db,tab,col", <create options>)
 >>> target = None
 >>> source = None
That would load the geotiff file to GeoRaster.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091221/809589d7/attachment.html
From ivan.lucena at pmldnet.com  Sun Dec 20 21:40:03 2009
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Sun Dec 20 21:40:08 2009
Subject: =?iso-8859-1?B?UmU6IFJlOiBbZ2RhbC1kZXZdIHF1ZXN0aW9uIGFib3V0IGdlb3Jhc3RlciBhbmQgcHl0aG9u?=
Message-ID: <20091221024003.32069.qmail@s466.sureserver.com>

Hi,

The call to CreateCopy will call the C++ method of the same name on the driver. Right, that is the same method that gdal_translate calls. So you get the same performance in Python as in gdal_translate.

You can take a look at how to run PL/SQL statement on Python using cx_Oracle from here:

http://www.oracle.com/technology/pub/articles/devlin-python-oracle.html
http://www.oracle.com/technology/pub/articles/prez-python-queries.html

And good luck with that.

>  -------Original Message-------
>  From: gispowerfan <gispowerfan@gmail.com>
>  Subject: Re: Re: [gdal-dev] question about georaster and python
>  Sent: Dec 20 '09 20:51
>  
>  
>  thanks! but I think that the method   you mentioned will depress the
>  performance, for example, when using the   python driver.CreateCopy(source,
>  "geor:user/pwd@db,tab,col", <create options>),   in fact it will use the
>  gdal_translate function. And the performance   of PL/SQL will exceed the
>  gdal_translate. so I want to use cx_Oracle, but I   don't know how to use
>  PL/SQL by cx_Oracle.
>  
>  
>  2009-12-21
>  --------------------
>  
>  gispowerfan
>  --------------------
>  
>   Ivan
>   2009-12-21  02:11:53
>   gispowerfan
>   gdal-dev
>   Re: [gdal-dev] question   about georaster and python
>  
>  
>  gispowerfan wrote:
>  > hi list,
>  >
>  >  I have a question about georaster and python, it's maybe not related to
>  
>  > GDAL code directly, but I think it is related question.
>  > Now I want to connect to ORACLE by cx_Oracle(which is Python interface
>  to ORACLE), I can use cx_Oracle to create table,insert simple data,
>  > but can't run the image loader pl/sql, do anyone have any idea? I don't
>  know whether or not that some image loader pl/sql can run by cx_Oracle?
>  > I know that I can use gdal python interface to connect Georaster, but I
>  
>  > need to test the performance.
>  > thanks in advance.
>  >
>  > 2009-12-20
>  > ------------------------------------------------------------------------
>  
>  > gispowerfan
>  >
>  >
>  > ------------------------------------------------------------------------
>  
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
>  Example:
>  
>  >>> from osgeo import gdal
>  >>> driver = gdal.GetDriverByName("georaster")
>  >>> source = gdal.Open("example.tif")
>  >>> target = driver.CreateCopy(source, "geor:user/pwd@db,tab,col",
>  <create options>)
>  >>> target = None
>  >>> source = None
>  
>  That would load the geotiff file to GeoRaster.
From zoltans at geograph.co.za  Mon Dec 21 03:11:20 2009
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Mon Dec 21 03:11:54 2009
Subject: [gdal-dev] Why does gdal_translate rotate and rescale images?
Message-ID: <4B2F2DA8.2020505@geograph.co.za>

Hi List,
I have 2 pesky satellite images in .IMG format that need to be
re-blocked because their tile size is not a multiple of 16 (so img2tiff
cannot handle them).

gdal_translate -b 1 -b 2 -b 3 src.img dst.tif   does work, but it
rotates & rescales my images (and loses the geo-referencing?).

Is this correct?

If this is the wrong list to post this query on, please direct me to the
correct list.
Thanks in advance,
Zoltan

Extract from tiffdump:
00 18000 18000 18000 18000 18000 18000 18000 18000 18000 18000 18000
18000 18000>
PlanarConfig (284) SHORT (3) 1<1>
SampleFormat (339) SHORT (3) 3<1 1 1>
33922 (0x8482) DOUBLE (12) 216<0.5 0.5 0 27.3782 -11.1753 0 1200.3 0.5 0
27.5098 -11.2066 0 2400.1 0.5 0 27.6414 -11.238 0 3599.9 0.5 0 27.7731
-11.2694 0 4799.7 0.5 0 27.9047 -11.3008 0 5999.5 0.5 0 28.0363 -11.3321
0 0.5 1200.3 0 27.3525 -11.281 0 1200.3 1200.3 0 27.4841 -11.3124 0
2400.1 1200.3 0 27.6158 -11.3437 0 3599.9 1200.3 0 27.7474 -11.3751 0
4799.7 1200.3 0 27.879 -11.4065 0 5999.5 1200.3 0 28.0106 -11.4378 0 0.5
2400.1 0 27.3268 -11.3867 0 1200.3 2400.1 0 27.4585 -11.4181 0 2400.1
2400.1 0 27.5901 -11.4495 0 3599.9 2400.1 0 27.7217 -11.4808 0 4799.7
2400.1 0 27.8533 -11.5122 0 5999.5 2400.1 0 27.9849 -11.5436 0 0.5
3599.9 0 27.3012 -11.4924 0 1200.3 3599.9 0 27.4328 -11.5238 0 2400.1
3599.9 0 27.5644 -11.5552 0 3599.9 3599.9 0 27.696 -11.5866 0 4799.7
3599.9 0 27.8276 -11.6179 0 5999.5 3599.9 0 27.9592 -11.6493 0 0.5
4799.7 0 27.2755 -11.5982 0 1200.3 4799.7 0 27.4071 -11.6295 0 2400.1
4799.7 0 27.5387 -11.6609 0 3599.9 4799.7 0 27.6703 -11.6923 0 4799.7
4799.7 0 27.8019 -11.7236 0 5999.5 4799.7 0 27.9335 -11.755 0 0.5 5999.5
0 27.2498 -11.7039 0 1200.3 5999.5 0 27.3814 -11.7353 0 2400.1 5999.5 0
27.513 -11.7666 0 3599.9 5999.5 0 27.6446 -11.798 0 4799.7 5999.5 0
27.7762 -11.8294 0 5999.5 5999.5 0 27.9079 -11.8607 0>
34735 (0x87af) SHORT (3) 24<1 1 0 5 1024 0 1 2 1025 0 1 1 2048 0 1 4326
2049 34737 9 0 2054 0 1 9102>
34736 (0x87b0) DOUBLE (12) 1<0>
34737 (0x87b1) ASCII (2) 10<WGS_1984|\000>
42112 (0xa480) ASCII (2) 5777<<GDALMetadata>\n  <Item
name="STATISTICS_MINIMUM" sample="0">26</Item>\n  <Item
name="STATISTICS_MAXIMUM" sample="0">255</Item>\n  <Item
name="STATISTICS_MEAN" sample="0">120.17384</Item>\n  <Item
name="STATISTICS_MEDIAN" sample="0">120</Item>\n  <Item
name="STATISTICS_MODE" sample="0">122</Item>\n  <Item
name="STATISTICS_STDDEV" sample="0">17.84385760024</Item>\n  <Item
name="STATISTICS_HISTONUMBINS" sample="0">256</Item>\n  <Item
name="STATISTICS_HISTOMIN" sample="0">0</Item>\n  <Item
name="STATISTICS_HISTOMAX" sample="0">255</Item>\n  <Item
name="LAYER_TYPE" sample="0">athematic</Item>\n  <Item
name="STATISTICS_HISTOBINVALUES"
sample="0">0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|0|36|360|3168|1836|900|684|792|1044|576|360|612|936|864|756|180|720|684|504|504|612|684|1008|1260|2088|2160|4068|3852




-- 

===========================================
Zoltan Szecsei
Director

Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.

34? 6'16.35"S 18?28'5.62"E

Tel: +27-21-7884897
Fax: +27-86-6115323    www.geograph.co.za
===========================================

-------------- next part --------------
Skipped content of type multipart/alternative
From warmerdam at pobox.com  Mon Dec 21 08:51:03 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Dec 21 08:51:16 2009
Subject: [gdal-dev] Why does gdal_translate rotate and rescale images?
In-Reply-To: <4B2F2DA8.2020505@geograph.co.za>
References: <4B2F2DA8.2020505@geograph.co.za>
Message-ID: <4B2F7D47.1080307@pobox.com>

Zoltan Szecsei wrote:
> Hi List,
> I have 2 pesky satellite images in .IMG format that need to be
> re-blocked because their tile size is not a multiple of 16 (so img2tiff
> cannot handle them).
> 
> gdal_translate -b 1 -b 2 -b 3 src.img dst.tif   does work, but it
> rotates & rescales my images (and loses the geo-referencing?).
> 
> Is this correct?
> 
> If this is the wrong list to post this query on, please direct me to the
> correct list.

Zoltan,

gdal_translate does not rotate images so I imagine there is some
aspects of the georeferencing of the source image which is being lost
in the transfer.

If you can make the image available, I could do some inspection to see what
seems to be happening.  Alternatively you could provide gdalinfo reports
on the original and final file, or perhaps even better a "hfatest -dt your.img"
report on the source image.

I need something that makes clear what is changing.  In order to fix things
I will likely need an image file demonstrating the problem.

A ticket would be appropriate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Mon Dec 21 09:18:28 2009
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Dec 21 09:18:36 2009
Subject: [gdal-dev] [MITAB] Unsupported case or corrupt file
In-Reply-To: <33670.87.231.96.39.1261229061.squirrel@webmail.ign.fr>
References: <33670.87.231.96.39.1261229061.squirrel@webmail.ign.fr>
Message-ID: <4B2F83B4.7090608@mapgears.com>

Which version of GDAL/OGR are you using?

Can you please try to convert your dataset from TAB to MIF using the 
tab2tab program available at http://mitab.maptools.org/ and see if you 
get the same error?

About QGIS, yes, AFAIK it uses OGR (and MITAB) to read TAB files, so the 
difference in behavior may be related to different versions of the libs 
being used.

Daniel


RICHARD Didier wrote:
> Hi all,
> 
> I'm trying to read a (big) mapinfo TAB file and I'm facing the following
> error (source is the today's trunk) with ogr2ogr as well as ogrinfo :
> 
> ____
> $ ogrinfo -al rall.TAB
> Had to open data source read-only.
> INFO: Open of `rall.TAB'
>       using driver `MapInfo File' successful.
> 
> Layer name: rall
> Geometry: Unknown (any)
> Feature Count: 6138177
> Extent: (-5.053907, 41.367176) - (9.559522, 51.075147)
> Layer SRS WKT:
> GEOGCS["unnamed",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563],
>         TOWGS84[0,0,0,-0,-0,-0,0]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433]]
> ID: Integer (0.0)
> ERROR 7: Unsupported case or corrupt file: MULTIPLINE/REGION object
> vertices do not appear to be grouped together.
> ERROR 3: Failed reading coordinate data at offset 210440
> ____
> 
> With debug on there is no more usefull information.
> My objective is to put this dataset into postgresql.
> 
> The mapinfo files I'm trying to read are as follows (ls -lh):
> 
> ____
>   135 rall.TAB
>  1,2G rall.MAP
>   24M rall.ID
>   30M rall.DAT
> ____
> 
> In mitab_mapcoordblock.cpp (line 503) when the error occurs I have got the
> following values :
> i=0 numSections=1
> nVextexOffset=-16384003
> numVertices=24
> numVerticesTotal=24
> 
> The negative offset is the cause of the error, but it is declared as an
> int. Is this right ?
> 
> I have not found any tickets about this kind of error.
> 
> Any idea on how to fix this (I could read the TAB file with QGIS 1.3.0 but
> not sure if QGIS is using GDAL/OGR for reading files)?
> 
> 
> Regards


-- 
Daniel Morissette
http://www.mapgears.com/
From miczanin at gmail.com  Mon Dec 21 10:33:45 2009
From: miczanin at gmail.com (Michele Zanin)
Date: Mon Dec 21 10:39:28 2009
Subject: [gdal-dev] WMS problem
Message-ID: <c27147560912210733n263dbca3k885e3e9ddf58aa17@mail.gmail.com>

Dear friends,
   I'm playing with the WMS format from GDAL (svn version, 18323).
Please note it's my first try with WMS, so it is possible i'm missing
something important.

I discovered some inconsistencies about documentation and actual
parameters for the xml config file.

In the official documentation http://www.gdal.org/frmt_wms.html , the
layer is selected with the <Layers> tag.

_ the TileService mini-driver requires <Dataset> (undocumented)
_ the WorldWind mini-driver requires <Layer> (without the 's', undocumented).

The affected files are:
./frmts/wms/minidriver_worldwind.cpp
./frmts/wms/minidriver_tileservice.cpp

Also, after some try&error (mainly caused by the fact that the right
SizeX and SizeY are not derivable from GetCapabilities) I came up with
some working xml config files for accessing interesting WMS (e.g. US
topo from terraservice, PCN for Italy, BlueMarbleNG worldwind).
I think someone else did the same effort in the past and someone else
will do it in the future. In order to avoid other people to waste
their time, I think we could create a repository of tested config
file, maybe in the same http://www.gdal.org/frmt_wms.html page. What
do you think? I'd like to share my files.

Thank you for your attention,
michele
From didier.richard at ign.fr  Mon Dec 21 11:20:46 2009
From: didier.richard at ign.fr (RICHARD Didier)
Date: Mon Dec 21 11:20:54 2009
Subject: [gdal-dev] [MITAB] Unsupported case or corrupt file
In-Reply-To: <4B2F83B4.7090608@mapgears.com>
References: <33670.87.231.96.39.1261229061.squirrel@webmail.ign.fr>
	<4B2F83B4.7090608@mapgears.com>
Message-ID: <33105.87.231.96.39.1261412446.squirrel@webmail.ign.fr>


> Which version of GDAL/OGR are you using?
>

trunk (as it was last friday)

it is compiled as follows :

CPPFLAGS=-D_FILE_OFFSET_BITS=64 CFLAGS=-D_FILE_OFFSET_BITS=64
CXXFLAGS=-D_FILE_OFFSET_BITS=64 ./configure --prefix=/opt/gdal-1.7.0b1
--with-pg=/usr/bin/pg_config --with-jasper=/usr/lib/ --with-geos=yes
--with-perl --with-python --with-libz=/usr/lib/ --with-png=/usr/lib/
--with-xerces=yes --with-curl=/usr/bin/curl-config --with-libtiff=internal

> Can you please try to convert your dataset from TAB to MIF using the
> tab2tab program available at http://mitab.maptools.org/ and see if you
> get the same error?

tried and it seems ok :

46Mb rall.mid
 2Gb rall.mif

$ ogrinfo -al -so rall.mif
Had to open data source read-only.
INFO: Open of `rall.mif'
      using driver `MapInfo File' successful.

Layer name: rall
Geometry: Unknown (any)
Feature Count: 3889708
Extent: (-5.053907, 41.367176) - (9.559522, 50.167815)
Layer SRS WKT:
GEOGCS["unnamed",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563],
        TOWGS84[0,0,0,-0,-0,-0,0]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433]]
ID: Integer (0.0)


BTW, i changed GNUmake.opt, line 34 is now CXX= g++ to get tab2tab
compiled on my linux box.

>
> About QGIS, yes, AFAIK it uses OGR (and MITAB) to read TAB files, so the
> difference in behavior may be related to different versions of the libs
> being used.

ldd on qgis gives me : libgdal.1.6.0.so.1
while ogr2ogr --version gives me : GDAL 1.7.0b1, released 2009/12/14

didier

>
> Daniel
>
>
> RICHARD Didier wrote:
>> Hi all,
>>
>> I'm trying to read a (big) mapinfo TAB file and I'm facing the following
>> error (source is the today's trunk) with ogr2ogr as well as ogrinfo :
>>
>> ____
>> $ ogrinfo -al rall.TAB
>> Had to open data source read-only.
>> INFO: Open of `rall.TAB'
>>       using driver `MapInfo File' successful.
>>
>> Layer name: rall
>> Geometry: Unknown (any)
>> Feature Count: 6138177
>> Extent: (-5.053907, 41.367176) - (9.559522, 51.075147)
>> Layer SRS WKT:
>> GEOGCS["unnamed",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563],
>>         TOWGS84[0,0,0,-0,-0,-0,0]],
>>     PRIMEM["Greenwich",0],
>>     UNIT["degree",0.0174532925199433]]
>> ID: Integer (0.0)
>> ERROR 7: Unsupported case or corrupt file: MULTIPLINE/REGION object
>> vertices do not appear to be grouped together.
>> ERROR 3: Failed reading coordinate data at offset 210440
>> ____
>>
>> With debug on there is no more usefull information.
>> My objective is to put this dataset into postgresql.
>>
>> The mapinfo files I'm trying to read are as follows (ls -lh):
>>
>> ____
>>   135 rall.TAB
>>  1,2G rall.MAP
>>   24M rall.ID
>>   30M rall.DAT
>> ____
>>
>> In mitab_mapcoordblock.cpp (line 503) when the error occurs I have got
>> the
>> following values :
>> i=0 numSections=1
>> nVextexOffset=-16384003
>> numVertices=24
>> numVerticesTotal=24
>>
>> The negative offset is the cause of the error, but it is declared as an
>> int. Is this right ?
>>
>> I have not found any tickets about this kind of error.
>>
>> Any idea on how to fix this (I could read the TAB file with QGIS 1.3.0
>> but
>> not sure if QGIS is using GDAL/OGR for reading files)?
>>
>>
>> Regards
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From even.rouault at mines-paris.org  Mon Dec 21 14:13:48 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Dec 21 14:13:47 2009
Subject: [gdal-dev] WMS problem
In-Reply-To: <c27147560912210733n263dbca3k885e3e9ddf58aa17@mail.gmail.com>
References: <c27147560912210733n263dbca3k885e3e9ddf58aa17@mail.gmail.com>
Message-ID: <4B2FC8EC.6010806@mines-paris.org>

Michele Zanin a ?crit :

Michele,

I've created a Trac ticket for the inconsistency between the code and 
the documentation. See http://trac.osgeo.org/gdal/ticket/3299

You're welcome to share your files. I think the best way would be for 
you to create a WMS page in the wiki and reference it under the "File 
formats" paragraph of http://trac.osgeo.org/gdal/wiki/UserDocs. We might 
then add a link from the http://www.gdal.org/frmt_wms.html page to the 
wiki page.

Best regards,

Even

> Dear friends,
>    I'm playing with the WMS format from GDAL (svn version, 18323).
> Please note it's my first try with WMS, so it is possible i'm missing
> something important.
>
> I discovered some inconsistencies about documentation and actual
> parameters for the xml config file.
>
> In the official documentation http://www.gdal.org/frmt_wms.html , the
> layer is selected with the <Layers> tag.
>
> _ the TileService mini-driver requires <Dataset> (undocumented)
> _ the WorldWind mini-driver requires <Layer> (without the 's', undocumented).
>
> The affected files are:
> ./frmts/wms/minidriver_worldwind.cpp
> ./frmts/wms/minidriver_tileservice.cpp
>
> Also, after some try&error (mainly caused by the fact that the right
> SizeX and SizeY are not derivable from GetCapabilities) I came up with
> some working xml config files for accessing interesting WMS (e.g. US
> topo from terraservice, PCN for Italy, BlueMarbleNG worldwind).
> I think someone else did the same effort in the past and someone else
> will do it in the future. In order to avoid other people to waste
> their time, I think we could create a repository of tested config
> file, maybe in the same http://www.gdal.org/frmt_wms.html page. What
> do you think? I'd like to share my files.
>
> Thank you for your attention,
> michele
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>   


From jluis at ualg.pt  Tue Dec 22 08:00:41 2009
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Tue Dec 22 08:01:06 2009
Subject: [gdal-dev] Error compiling Trunk
Message-ID: <20091222140041.267523cid3k5fvnc@wmail.ualg.pt>

Hi,

I'm having this error while trying to build on Windows with VC7.1

   Creating library gdal_i.lib and object gdal_i.exp
gdalallregister.obj : error LNK2019: unresolved external symbol  
_GDALRegister_PC
IDSK referenced in function _GDALAllRegister@0
gdal17dev.dll : fatal error LNK1120: 1 unresolved externals
NMAKE : fatal error U1077: 'link' : return code '0x460'
Stop.

Joaquim Luis

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.


From miczanin at gmail.com  Tue Dec 22 08:10:14 2009
From: miczanin at gmail.com (Michele Zanin)
Date: Tue Dec 22 08:10:17 2009
Subject: [gdal-dev] WMS problem
In-Reply-To: <4B2FC8EC.6010806@mines-paris.org>
References: <c27147560912210733n263dbca3k885e3e9ddf58aa17@mail.gmail.com>
	<4B2FC8EC.6010806@mines-paris.org>
Message-ID: <c27147560912220510t10aaf591xe73f1b41778ab8e0@mail.gmail.com>

Even,

On Mon, Dec 21, 2009 at 8:13 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> You're welcome to share your files. I think the best way would be for you to
> create a WMS page in the wiki and reference it under the "File formats"
> paragraph

done, it is here http://trac.osgeo.org/gdal/wiki/UserDocs/WebMapService

Thank you for creating the trac ticket.

kind regards,
michele
From ekkehart at gmx.de  Tue Dec 22 11:12:49 2009
From: ekkehart at gmx.de (NopMap)
Date: Tue Dec 22 11:12:51 2009
Subject: [Gdal-dev] Which tool to add an offset?
Message-ID: <1261498369853-4204322.post@n2.nabble.com>



Hi!

I am building a map with several layers containing OSM geometry and
hillshading+contours. The rendering chain for the hillshading is

SRTM GeoTiff -> gdal_merge -> gdal_warp -> hillshading.exe -> mapnik

Now I have the problem that the hillshading and the geometry do not
quite match. It seems the hillshading is offset some constant distance
to the north and west. I suspect as the offset looks like some 100m that
this is a result of the sample size of the SRTM data and the particular
hillshading algorithm.

Now I am looking for a way to correct this offset, so that optically the
shading rests in the expected position relative to the geometry. But I don't
know how to do this. I have tried modifying the projections for gdal_warp
with some false northing, but the results always remains the same.

Any idea on how to move the hillshading 100m to the south?

thank you

    Nop



-- 
View this message in context: http://n2.nabble.com/Which-tool-to-add-an-offset-tp4204322p4204322.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From alan.stratford at goodrich.com  Tue Dec 22 12:13:36 2009
From: alan.stratford at goodrich.com (Alans)
Date: Tue Dec 22 12:13:38 2009
Subject: [Gdal-dev] ASRP data sets with multiple IMG files
Message-ID: <1261502016417-4204628.post@n2.nabble.com>


I am having trouble getting GDAL to recognize ASRP IMG files when the
filename ends in anything other than 01.IMG. For example I have a directory
containing the following ASRP files:

  U2881301.GEN,
  U2881301.GER,
  U2881301.IMG,
  U2881301.QAL,
  U2881301.SOU,
  U2881302.IMG.

When i try to generate a shape file to index these ASRP files with the
command:

  gdaltindex shapefile.shp *.IMG

GDAL reports:

  ERROR 4: '/path/U2881302.IMG' not recognised as a supported file format.
  Unable to open /path/U2881302.IMG, skipping. 

Does anyone have a workaround for this?

Regards
Alan
-- 
View this message in context: http://n2.nabble.com/ASRP-data-sets-with-multiple-IMG-files-tp4204628p4204628.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From craig.miller at spatialminds.com  Tue Dec 22 13:41:03 2009
From: craig.miller at spatialminds.com (Miller, Craig)
Date: Tue Dec 22 13:49:10 2009
Subject: [Gdal-dev] Which tool to add an offset?
In-Reply-To: <1261498369853-4204322.post@n2.nabble.com>
References: <1261498369853-4204322.post@n2.nabble.com>
Message-ID: <e3e1d0090912221041y3d40bc61see289635d256f856@mail.gmail.com>

Sounds to me like it has the incorrect datum set.  E.g. it says it's NAD83
but in reality is NAD27.

On Tue, Dec 22, 2009 at 8:12 AM, NopMap <ekkehart@gmx.de> wrote:

>
>
> Hi!
>
> I am building a map with several layers containing OSM geometry and
> hillshading+contours. The rendering chain for the hillshading is
>
> SRTM GeoTiff -> gdal_merge -> gdal_warp -> hillshading.exe -> mapnik
>
> Now I have the problem that the hillshading and the geometry do not
> quite match. It seems the hillshading is offset some constant distance
> to the north and west. I suspect as the offset looks like some 100m that
> this is a result of the sample size of the SRTM data and the particular
> hillshading algorithm.
>
> Now I am looking for a way to correct this offset, so that optically the
> shading rests in the expected position relative to the geometry. But I
> don't
> know how to do this. I have tried modifying the projections for gdal_warp
> with some false northing, but the results always remains the same.
>
> Any idea on how to move the hillshading 100m to the south?
>
> thank you
>
>    Nop
>
>
>
> --
> View this message in context:
> http://n2.nabble.com/Which-tool-to-add-an-offset-tp4204322p4204322.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Craig Miller
Geospatial Software Architect
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091222/aebdeef4/attachment.html
From even.rouault at mines-paris.org  Tue Dec 22 14:17:34 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Dec 22 14:17:33 2009
Subject: [Gdal-dev] ASRP data sets with multiple IMG files
In-Reply-To: <1261502016417-4204628.post@n2.nabble.com>
References: <1261502016417-4204628.post@n2.nabble.com>
Message-ID: <4B311B4E.3010601@mines-paris.org>

Alan,

this issue was reported as http://trac.osgeo.org/gdal/ticket/3194. 
There's a proposed patch in it.
Another workaround (untested) is to copy U2881301.GEN as U2881302.GEN 
and U2881301.QAL as U2881302.QAL

Best regards,

Even

Alans a ?crit :
> I am having trouble getting GDAL to recognize ASRP IMG files when the
> filename ends in anything other than 01.IMG. For example I have a directory
> containing the following ASRP files:
>
>   U2881301.GEN,
>   U2881301.GER,
>   U2881301.IMG,
>   U2881301.QAL,
>   U2881301.SOU,
>   U2881302.IMG.
>
> When i try to generate a shape file to index these ASRP files with the
> command:
>
>   gdaltindex shapefile.shp *.IMG
>
> GDAL reports:
>
>   ERROR 4: '/path/U2881302.IMG' not recognised as a supported file format.
>   Unable to open /path/U2881302.IMG, skipping. 
>
> Does anyone have a workaround for this?
>
> Regards
> Alan
>   


From ivan at sanchezortega.es  Tue Dec 22 22:34:52 2009
From: ivan at sanchezortega.es (=?utf-8?q?Iv=C3=A1n_S=C3=A1nchez_Ortega?=)
Date: Tue Dec 22 22:35:16 2009
Subject: [gdal-dev] OGR: Why not GetPoint() under win32?
Message-ID: <200912230434.57613.ivan@sanchezortega.es>

Hi all,

I've been recently learning Python and OGR in order to code ogr2osm. See 
http://lists.openstreetmap.org/pipermail/dev/2009-December/017864.html


Problem is, this script doesn't work when in a win32 box. I'm testing it with 
FWTools 2.4.6. It runs OK wiht python-gdal 1.6.3 in my Debian box.

"ogrinfo --version" says 1.7.0dev for FWTools, 1.6.3 for the Debian 
python-gdal package.


I've hunted down the bug, and it seems that it's because of a mismatch between 
the implementations of the wkbLineString class.


See, I'm doing this:
	print geometry
	print dir(geometry)

Under Debian, I get this:

LINESTRING (459974 4605130,459974 4605130)
['AddGeometry', 'AddGeometryDirectly', 'AddPoint', 'AddPoint_2D', 
'AssignSpatialReference', 'Buffer', 'Centroid', 'Clone', 'CloseRings',
 'Contains', 'ConvexHull', 'Crosses', 'Destroy', 'Difference', 'Disjoint',
 'Distance', 'Empty', 'Equal', 'ExportToGML', 'ExportToJson', 'ExportToKML',
 'ExportToWkb', 'ExportToWkt', 'FlattenTo2D', 'GetArea', 'GetBoundary',
 'GetCoordinateDimension', 'GetDimension', 'GetEnvelope', 'GetGeometryCount',
 'GetGeometryName', 'GetGeometryRef', 'GetGeometryType', 'GetPoint',
 'GetPointCount', 'GetPoint_2D', 'GetSpatialReference', 'GetX', 'GetY', 'GetZ',
 'Intersect', 'Intersection', 'IsEmpty', 'IsRing', 'IsSimple', 'IsValid',
 'Overlaps', 'SetCoordinateDimension', 'SetPoint', 'SetPoint_2D',
 'SymmetricDifference', 'Touches', 'Transform', 'TransformTo', 'Union',
 'Within', 'WkbSize', '__class__', '__del__', '__delattr__', '__dict__',
 '__doc__', '__getattr__', '__getattribute__', '__hash__', '__init__',
 '__module__', '__new__', '__reduce__', '__reduce_ex__', '__repr__',
 '__setattr__', '__setstate__', '__str__', '__swig_destroy__',
 '__swig_getmethods__', '__swig_setmethods__', '__weakref__', 'this']


But, under win32 + FWTools, I get this instead:

LINESTRING (459974 4605130,459974 4605130)
['AddGeometry', 'AddGeometryDirectly', 'AddPoint', 'AddPoint_2D',
 'AssignSpatialReference', 'Buffer', 'Centroid', 'Clone', 'CloseRings',
 'Contains', 'ConvexHull', 'Crosses', 'Destroy', 'Difference', 'Disjoint',
 'Distance', 'Empty', 'Equal', 'ExportToGML', 'ExportToWkb', 'ExportToWkt',
 'FlattenTo2D', 'GetArea', 'GetBoundary', 'GetCoordinateDimension',
 'GetDimension', 'GetEnvelope', 'GetGeometryCount', 'GetGeometryName',
 'GetGeometryRef', 'GetGeometryType', 'GetPointCount', 'GetSpatialReference',
 'GetX', 'GetY', 'GetZ', 'Intersect', 'Intersection', 'Overlaps',
 'SetCoordinateDimension', 'SetPoint', 'SetPoint_2D', 'SymmetricDifference',
 'Touches', 'Transform', 'TransformTo', 'Union', 'Within', 'WkbSize',
 '__copy__', '__del__', '__doc__', '__init__', '__module__', '__str__',
 '_o', 'thisown']



So, why do I have a GetPoint() method in one implementation but not in the 
other?



Cheers,
-- 
----------------------------------
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

Your reasoning is excellent -- it's only your basic assumptions that are 
wrong.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091223/11ca4148/attachment.bin
From warmerdam at pobox.com  Tue Dec 22 22:58:40 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Dec 22 22:58:59 2009
Subject: [gdal-dev] OGR: Why not GetPoint() under win32?
In-Reply-To: <200912230434.57613.ivan@sanchezortega.es>
References: <200912230434.57613.ivan@sanchezortega.es>
Message-ID: <4B319570.8020706@pobox.com>

Iv?n S?nchez Ortega wrote:
> Hi all,
> 
> I've been recently learning Python and OGR in order to code ogr2osm. See 
> http://lists.openstreetmap.org/pipermail/dev/2009-December/017864.html
> 
> 
> Problem is, this script doesn't work when in a win32 box. I'm testing it with 
> FWTools 2.4.6. It runs OK wiht python-gdal 1.6.3 in my Debian box.
> 
> "ogrinfo --version" says 1.7.0dev for FWTools, 1.6.3 for the Debian 
> python-gdal package.
...
> 
> So, why do I have a GetPoint() method in one implementation but not in the 
> other?

Folks,

For reference, the FWTools package is still using the old generation
python bindings which seem to lack GetPoint().  I encourage Ivan and his
users to use OSGeo4W.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ivan at sanchezortega.es  Tue Dec 22 23:11:02 2009
From: ivan at sanchezortega.es (=?utf-8?q?Iv=C3=A1n_S=C3=A1nchez_Ortega?=)
Date: Tue Dec 22 23:11:16 2009
Subject: [gdal-dev] OGR: Why not GetPoint() under win32?
In-Reply-To: <4B319570.8020706@pobox.com>
References: <200912230434.57613.ivan@sanchezortega.es>
	<4B319570.8020706@pobox.com>
Message-ID: <200912230511.05790.ivan@sanchezortega.es>

El Mi?rcoles, 23 de Diciembre de 2009, Frank Warmerdam escribi?:
> For reference, the FWTools package is still using the old generation
> python bindings which seem to lack GetPoint().  I encourage Ivan and his
> users to use OSGeo4W.

Yeah, I'll probably try osgeo4w and report back.


Cheers,
-- 
----------------------------------
Iv?n S?nchez Ortega <ivan@sanchezortega.es>

Un ordenador no es un televisor ni un microondas, es una herramienta compleja.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: application/pgp-signature
Size: 198 bytes
Desc: This is a digitally signed message part.
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091223/fa250d8b/attachment.bin
From ayhan.tekgul at netcad.com.tr  Sat Dec 26 08:32:05 2009
From: ayhan.tekgul at netcad.com.tr (=?iso-8859-9?Q?Ayhan_TEKG=DCL?=)
Date: Sat Dec 26 08:38:23 2009
Subject: [gdal-dev] Display ADRG data with multiple subdatasets
Message-ID: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>

Hi, all;

I am using gdal-1.5.0 to display ADRG data. But when ADRG data has multiple subdatasets, I can display just one image.

I have tried to search the wiki and gdal-dev archives, but I cannot get any similar problem with this issue or solution to this problem. (Maybe I have missed.)

Is there anybody who knows to display adrg data with multiple subdatasets?

Best regards...

Ayhan TEKG?L
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091226/b7a67640/attachment.html
From landa.martin at gmail.com  Sat Dec 26 10:14:14 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Sat Dec 26 10:14:16 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <4B2BD644.5010002@mines-paris.org>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
	<4B2BD644.5010002@mines-paris.org>
Message-ID: <f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>

Hi,

2009/12/18 Even Rouault <even.rouault@mines-paris.org>:
> the autotest suite is located here :
> http://trac.osgeo.org/gdal/browser/trunk/autotest

thanks, I added initial version of the script to SVN repo [1].

Martin

[1] http://josef.fsv.cvut.cz/svn/landa/programming/gdal/vfk/autotest/ogr_vfk.py

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From j.l.h.hartmann at uva.nl  Sat Dec 26 10:56:26 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Dec 26 10:56:33 2009
Subject: [gdal-dev] Calibrating colors of a series of maps
In-Reply-To: <30fe546d0912160923y306c46e1vd650a627f9e50e8e@mail.gmail.com>
References: <30fe546d0912160923y306c46e1vd650a627f9e50e8e@mail.gmail.com>
Message-ID: <4B36322A.2030600@uva.nl>

Hi,

I put the following question on the GRASS user list. It isn't possible 
with GRASS (or the programs mentioned by Glynn), but if someone on this 
list can help me further, I would be very grateful. I have been 
struggling for some time with this problem, and I'll have to process 
lots of scanned old maps in the near future.

Jan


Jan Hartmann wrote:


> >  I am working with series of old topographical maps, ranging from 10 to
> >  600 map sheets per map. Each sheet is discolored a bit from age. How can
> >  I process a complete series in such a way that there are no differences
> >  visible any more between map sheets? Preferably I would like to
> >  downsample them to 8 bits color table, as the originals only have a
> >  small set of colors. In other words: how do I calibrate set of maps to
> >  the same optimal color table?
>    
This is probably better done with general image-processing software,
e.g. pnmquant (from the Netpbm package) or "convert -colors ..." (from
ImageMagick).

-- Glynn Clements <glynn@gclements.plus.com>


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091226/12e65fff/attachment.html
From warmerdam at pobox.com  Sat Dec 26 11:51:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Dec 26 11:51:21 2009
Subject: [gdal-dev] Calibrating colors of a series of maps
In-Reply-To: <4B36322A.2030600@uva.nl>
References: <30fe546d0912160923y306c46e1vd650a627f9e50e8e@mail.gmail.com>
	<4B36322A.2030600@uva.nl>
Message-ID: <4B363EFF.9090302@pobox.com>

Jan Hartmann wrote:
> Hi,
> 
> I put the following question on the GRASS user list. It isn't possible 
> with GRASS (or the programs mentioned by Glynn), but if someone on this 
> list can help me further, I would be very grateful. I have been 
> struggling for some time with this problem, and I'll have to process 
> lots of scanned old maps in the near future.

Jan,

The rgb2pct.py script can be used to downsample 24bit images to 8bit
paletted form.  I see it now supports providing a predefined palette.
It might be best to pick a representative map, and use it for the first
downsampling - restricting the number of colors with the -n flag - and
then use the resulting palette for the other maps.

If the discoloring is not too severe, and if you restrict the palette
to a very distinct set of colors, you might find this reduces things to
a sufficiently similar set of images.

Doh!  I just looked and rgb2pct.py always does dithering which means
it will end up using speckled pixels of the available colors to
try and approximate the original.  This will be quite unsuitable for
your purposes.

If you would like, I'd be willing to expose a non-dithered option in
rgb2pct.py which might be useful.

Note that if the discoloring is too severe some additional sorts of
image processing might be required to get a good result.

Best regards,

>> > I am working with series of old topographical maps, ranging from 10 to 
>> > 600 map sheets per map. Each sheet is discolored a bit from age. How can 
>> > I process a complete series in such a way that there are no differences 
>> > visible any more between map sheets? Preferably I would like to 
>> > downsample them to 8 bits color table, as the originals only have a 
>> > small set of colors. In other words: how do I calibrate set of maps to 
>> > the same optimal color table?
>>   
> This is probably better done with general image-processing software,
> e.g. pnmquant (from the Netpbm package) or "convert -colors ..." (from
> ImageMagick).
> 
> -- Glynn Clements <glynn@gclements.plus.com>
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.l.h.hartmann at uva.nl  Sat Dec 26 12:46:50 2009
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Dec 26 12:46:58 2009
Subject: [gdal-dev] Calibrating colors of a series of maps
In-Reply-To: <4B363EFF.9090302@pobox.com>
References: <30fe546d0912160923y306c46e1vd650a627f9e50e8e@mail.gmail.com>
	<4B36322A.2030600@uva.nl> <4B363EFF.9090302@pobox.com>
Message-ID: <4B364C0A.90909@uva.nl>

Hi Frank, I didn't know about that predefined palette, because that is 
just what I was looking for! If it's not too much trouble to add the 
non-dither option, you'll have solved again a problem of mine.

A late merry Christmas from a white Amsterdam, although the snow is 
melting here.

Jan

On 26-12-2009 17:51, Frank Warmerdam wrote:
> Jan Hartmann wrote:
>> Hi,
>>
>> I put the following question on the GRASS user list. It isn't 
>> possible with GRASS (or the programs mentioned by Glynn), but if 
>> someone on this list can help me further, I would be very grateful. I 
>> have been struggling for some time with this problem, and I'll have 
>> to process lots of scanned old maps in the near future.
>
> Jan,
>
> The rgb2pct.py script can be used to downsample 24bit images to 8bit
> paletted form.  I see it now supports providing a predefined palette.
> It might be best to pick a representative map, and use it for the first
> downsampling - restricting the number of colors with the -n flag - and
> then use the resulting palette for the other maps.
>
> If the discoloring is not too severe, and if you restrict the palette
> to a very distinct set of colors, you might find this reduces things to
> a sufficiently similar set of images.
>
> Doh!  I just looked and rgb2pct.py always does dithering which means
> it will end up using speckled pixels of the available colors to
> try and approximate the original.  This will be quite unsuitable for
> your purposes.
>
> If you would like, I'd be willing to expose a non-dithered option in
> rgb2pct.py which might be useful.
>
> Note that if the discoloring is too severe some additional sorts of
> image processing might be required to get a good result.
>
> Best regards,
>
>>> > I am working with series of old topographical maps, ranging from 
>>> 10 to > 600 map sheets per map. Each sheet is discolored a bit from 
>>> age. How can > I process a complete series in such a way that there 
>>> are no differences > visible any more between map sheets? Preferably 
>>> I would like to > downsample them to 8 bits color table, as the 
>>> originals only have a > small set of colors. In other words: how do 
>>> I calibrate set of maps to > the same optimal color table?
>> This is probably better done with general image-processing software,
>> e.g. pnmquant (from the Netpbm package) or "convert -colors ..." (from
>> ImageMagick).
>>
>> -- Glynn Clements <glynn@gclements.plus.com>
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
From even.rouault at mines-paris.org  Sat Dec 26 13:10:02 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 26 13:10:07 2009
Subject: [gdal-dev] Display ADRG data with multiple subdatasets
In-Reply-To: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>
References: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>
Message-ID: <4B36517A.6030203@mines-paris.org>

Ayhan,

the driver has support for ADRG subdatasets (although I'm not 100% 
positive this has been tested). Theoretically, if you do a gdalinfo on 
the .THF file and it has several subdatasets, they should be listed. But 
basically the list is just the list of related .GEN files, so you can 
directly do gdalinfo on the .GEN files.

Best regards,

Even

Ayhan TEKG?L a ?crit :
> Hi, all;
>  
> I am using gdal-1.5.0 to display ADRG data. But when ADRG data has 
> multiple subdatasets, I can display just one image.
>  
> I have tried to search the wiki and gdal-dev archives, but I cannot 
> get any similar problem with this issue or solution to this problem. 
> (Maybe I have missed.)
>  
> Is there anybody who knows to display adrg data with multiple subdatasets?
>  
> Best regards...
>  
> Ayhan TEKG?L
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From szekerest at gmail.com  Sat Dec 26 14:36:34 2009
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Dec 26 14:36:37 2009
Subject: [gdal-dev] Motion: Commit Access for Martin Landa
In-Reply-To: <4B2C2010.90409@pobox.com>
References: <f3b73b7d0912181304w6e620bc9r708372e24ce4a422@mail.gmail.com>
	<4B2C2010.90409@pobox.com>
Message-ID: <f3b73b7d0912261136p3ed40f64naab0b3f5b738a15c@mail.gmail.com>

Folks,


I declare this motion passed with support from EvenR, HowardB, DanielM,
FrankW
and TamasS.


Best regards,


Tamas




2009/12/19 Frank Warmerdam <warmerdam@pobox.com>

> Tamas Szekeres wrote:
>
>> I nominate Martin Landa for SVN commit access to GDAL.
>>
>> Martin is a GRASS developer and about to include a new driver (VFK) in OGR
>> and be a maintainer of this driver and would also focus on the GRASS related
>> portions of the GDAL code. Martin has replied to this list indicating his
>> agreement to RFC 3.
>>
>
> +1 Frank
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091226/ed7fa025/attachment.html
From landa.martin at gmail.com  Sat Dec 26 15:12:10 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Sat Dec 26 15:12:12 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
	<4B2BD644.5010002@mines-paris.org>
	<f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>
Message-ID: <f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>

Hi,

2009/12/26 Martin Landa <landa.martin@gmail.com>:

thanks for the support! I got write access to SVN repository. It's
really pleasure for me to contribute to GDAL project.

My first issue is to add VFK driver [1]. Please let me know if you
have any objections or notes.

Martin

[1] http://josef.fsv.cvut.cz/svn/landa/programming/gdal/vfk/

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From didier.richard at ign.fr  Sat Dec 26 15:48:21 2009
From: didier.richard at ign.fr (RICHARD Didier)
Date: Sat Dec 26 15:52:55 2009
Subject: [gdal-dev] [MITAB] Unsupported case or corrupt file
Message-ID: <32976.87.231.96.39.1261860501.squirrel@webmail.ign.fr>

> Which version of GDAL/OGR are you using?
>

I finally found the problem in my copy of the trunk : my copy of
mitab_mapcoordblock.cpp was "v 1.16 2007/02/23", while the trunk version
of the same file was "v 1.17 2008/02/01". This was the only corrupted file
...

> Can you please try to convert your dataset from TAB to MIF using the
tab2tab program available at http://mitab.maptools.org/ and see if you
get the same error?
>

After running tab2tab (without error), I have got a big difference in the
resulting MapInfo files : there are big parts of the original TAB file
that are missing in the resulting mif file. I got pdf generated with QGIS
showing that, but I am not sure it is allowed to send them over the list.

On the other hand, after having recompiled GDAL/OGR, I got the data into a
postgreSQL database : the result is the same as the original TAB file.

@daniel: if you want I can upload the original files (and PDF) where you
would like.

Sincerely,

didier

> Daniel
>
>
> RICHARD Didier wrote:
>> Hi all,
>> I'm trying to read a (big) mapinfo TAB file and I'm facing the
following
>> error (source is the today's trunk) with ogr2ogr as well as ogrinfo : ____
>> $ ogrinfo -al rall.TAB
>> Had to open data source read-only.
>> INFO: Open of `rall.TAB'
>>       using driver `MapInfo File' successful.
>> Layer name: rall
>> Geometry: Unknown (any)
>> Feature Count: 6138177
>> Extent: (-5.053907, 41.367176) - (9.559522, 51.075147)
>> Layer SRS WKT:
>> GEOGCS["unnamed",
>>     DATUM["WGS_1984",
>>         SPHEROID["WGS 84",6378137,298.257223563],
>>         TOWGS84[0,0,0,-0,-0,-0,0]],
>>     PRIMEM["Greenwich",0],
>>     UNIT["degree",0.0174532925199433]]
>> ID: Integer (0.0)
>> ERROR 7: Unsupported case or corrupt file: MULTIPLINE/REGION object
vertices do not appear to be grouped together.
>> ERROR 3: Failed reading coordinate data at offset 210440
>> ____
>> With debug on there is no more usefull information.
>> My objective is to put this dataset into postgresql.
>> The mapinfo files I'm trying to read are as follows (ls -lh):
>> ____
>>   135 rall.TAB
>>  1,2G rall.MAP
>>   24M rall.ID
>>   30M rall.DAT
>> ____
>> In mitab_mapcoordblock.cpp (line 503) when the error occurs I have got the
>> following values :
>> i=0 numSections=1
>> nVextexOffset=-16384003
>> numVertices=24
>> numVerticesTotal=24
>> The negative offset is the cause of the error, but it is declared as an
int. Is this right ?
>> I have not found any tickets about this kind of error.
>> Any idea on how to fix this (I could read the TAB file with QGIS 1.3.0 but
>> not sure if QGIS is using GDAL/OGR for reading files)?
>> Regards
>
>
> --
> Daniel Morissette
> http://www.mapgears.com/
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23



From even.rouault at mines-paris.org  Sat Dec 26 16:29:44 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Dec 26 16:29:50 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>	
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>	
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>	
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>	
	<4B2BD644.5010002@mines-paris.org>	
	<f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>
	<f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>
Message-ID: <4B368048.2010708@mines-paris.org>

Martin,

from a very quick look between two Christmas meals, it looks good to me. 
I've noticed that there might be a few missing parts for Win32 support, 
in  ogr/ogrsf_frmts/makefile.vc for example (you can grep for 'dxf' for 
example in the whole tree to see all the places that need to be patched 
when adding a new driver). You might also check with the test_ogrsf 
binary (not compiled by default, but a make test_ogrsf in the apps 
subdirectory will build it) that the driver is "compliant" with some 
basic rules for the expected behaviour of an OGR driver.

As 1.7.0 release should happen soon, the top priority is to be careful 
not to break GDAL building. You can have a look at the various slavebots 
at http://buildbot.osgeo.org:8500/waterfall to check that everything is OK.

Best regards,

Even

Martin Landa a ?crit :
> Hi,
>
> 2009/12/26 Martin Landa <landa.martin@gmail.com>:
>
> thanks for the support! I got write access to SVN repository. It's
> really pleasure for me to contribute to GDAL project.
>
> My first issue is to add VFK driver [1]. Please let me know if you
> have any objections or notes.
>
> Martin
>
> [1] http://josef.fsv.cvut.cz/svn/landa/programming/gdal/vfk/
>
>   


From landa.martin at gmail.com  Sat Dec 26 16:58:38 2009
From: landa.martin at gmail.com (Martin Landa)
Date: Sat Dec 26 16:58:41 2009
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <4B368048.2010708@mines-paris.org>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
	<4B2BD644.5010002@mines-paris.org>
	<f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>
	<f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>
	<4B368048.2010708@mines-paris.org>
Message-ID: <f8fe65c40912261358n7f4117c8pa598b2c7e779b312@mail.gmail.com>

Hi,

2009/12/26 Even Rouault <even.rouault@mines-paris.org>:
> As 1.7.0 release should happen soon, the top priority is to be careful not
> to break GDAL building. You can have a look at the various slavebots at
> http://buildbot.osgeo.org:8500/waterfall to check that everything is OK.

probably I should wait for releasing 1.7.0 [1] and after that add new
VFK driver. What do you think?

Martin

[1] http://trac.osgeo.org/gdal/wiki/ReleasePlan17

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From ayhan.tekgul at netcad.com.tr  Sun Dec 27 05:54:55 2009
From: ayhan.tekgul at netcad.com.tr (=?iso-8859-9?Q?Ayhan_TEKG=DCL?=)
Date: Sun Dec 27 05:58:23 2009
Subject: [gdal-dev] Display ADRG data with multiple subdatasets
References: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>
	<4B36517A.6030203@mines-paris.org>
Message-ID: <000e01ca86e3$06ddd560$6a01a8c0@ulusal.local>

Hi Even,

When I check gdalinfo for transh01.thf file, the result is,
-------------------------------------------------------
Driver: ADRG/ARC Digitized Raster Graphics
Files: transh01.thf
Size is 13696, 2944
Coordinate System is:
GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
84",6378137,298.257223563]],
    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
AUTHORITY["EPSG","4326"]]
Origin = (-10.588233333333333,52.738852777777780)
Pixel Size = (0.005908613445378,-0.004478503184713)
Band number: 3
Metadata:
  ADRG_SCA=5000000
  ADRG_NAM=GNUR0102
Corner Coordinates:
Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
  NoData Value=0
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
  NoData Value=0
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
  NoData Value=0
------------------------------------------------------------------------------------

When I check gdalinfo for gnur0101.gen file, the result is,
-----------------------------------------------------------------------------------
Driver: ADRG/ARC Digitized Raster Graphics
Files: gnur0101.gen
Size is 13696, 2944
Coordinate System is:
GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
84",6378137,298.257223563]],
    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
AUTHORITY["EPSG","4326"]]
Origin = (-10.588233333333333,52.738852777777780)
Pixel Size = (0.005908613445378,-0.004478503184713)
Band number: 3
Metadata:
  ADRG_SCA=5000000
  ADRG_NAM=GNUR0102
Corner Coordinates:
Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
Band 1 Block=128x128 Type=Byte, ColorInterp=Red
  NoData Value=0
Band 2 Block=128x128 Type=Byte, ColorInterp=Green
  NoData Value=0
Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
  NoData Value=0
--------------------------------------------------------------------------------------

There are 4 subdatasets, but gdalinfo shows just the first one in metadata 
as ADRG_NAM=GNUR0102 with size 13696, 2944

In ADRGDataset::GetGENListFromTHF function of adrgdataset.cpp file, I tried 
to catch IMG files and add to fileNames. Then gdalinfo showed all the img 
files in subdatasets metadata.

But this time GDALGetRasterCount gives 0 band. Because in ADRGDataset::Open 
function, when count of fileNames is bigger than 1, all fileNames[i] are 
being added as subdatasets to poDS and poDS returns without nBands are set.

As I understand that, when subdatasets exist, subdataset files should be 
handled separately. But gdalinfo does not recognize the subdataset files 
(xxx.img).

So maybe I should handle the adrg data, which has multiple subdatasets, by 
my own code. But this is not a convenient way of reading adrg data.

Best regards...

Ayhan TEKG?L

----- Original Message ----- 
From: "Even Rouault" <even.rouault@mines-paris.org>
To: "Ayhan TEKG?L" <ayhan.tekgul@netcad.com.tr>
Cc: <gdal-dev@lists.osgeo.org>
Sent: Saturday, December 26, 2009 8:10 PM
Subject: Re: [gdal-dev] Display ADRG data with multiple subdatasets


> Ayhan,
>
> the driver has support for ADRG subdatasets (although I'm not 100% 
> positive this has been tested). Theoretically, if you do a gdalinfo on the 
> .THF file and it has several subdatasets, they should be listed. But 
> basically the list is just the list of related .GEN files, so you can 
> directly do gdalinfo on the .GEN files.
>
> Best regards,
>
> Even
>
> Ayhan TEKG?L a ?crit :
>> Hi, all;
>>  I am using gdal-1.5.0 to display ADRG data. But when ADRG data has 
>> multiple subdatasets, I can display just one image.
>>  I have tried to search the wiki and gdal-dev archives, but I cannot get 
>> any similar problem with this issue or solution to this problem. (Maybe I 
>> have missed.)
>>  Is there anybody who knows to display adrg data with multiple 
>> subdatasets?
>>  Best regards...
>>  Ayhan TEKG?L
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> 

From jorsion at gmail.com  Sun Dec 27 09:08:00 2009
From: jorsion at gmail.com (josn)
Date: Sun Dec 27 09:08:03 2009
Subject: [gdal-dev] where to find LIMP library
Message-ID: <8c2bdf730912270608s38dd5488j243d7f9de1be288a@mail.gmail.com>

Hi,

I want to download LIMP library ,but I can not find the link.

Any helps?

Thanks,

Best wishes,

-- 
JoSn
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091227/d902794e/attachment.html
From even.rouault at mines-paris.org  Sun Dec 27 09:39:04 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec 27 09:39:07 2009
Subject: [gdal-dev] Display ADRG data with multiple subdatasets
In-Reply-To: <000e01ca86e3$06ddd560$6a01a8c0@ulusal.local>
References: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>
	<4B36517A.6030203@mines-paris.org>
	<000e01ca86e3$06ddd560$6a01a8c0@ulusal.local>
Message-ID: <4B377188.70704@mines-paris.org>

Ayhan,

this obviously confirms that ADRG subdataset was never tested before.  
I'd be willing to improve the support for them in GDAL itself rather 
than forcing each user to use their little own hacks.

The ADRG driver cannot currently open directly the .IMG files, but I 
suspect this would be propably the right thing to do for subdataset 
access. This might be probably something similar to what is suggested 
for the ASRP/USRP driver in http://trac.osgeo.org/gdal/ticket/3194

If I could have access to your data, it will be of course the most 
convenient solution. Otherwise could you list all the filenames of your 
ADRG product (from what you say I suspect there's only one GEN file but 
several IMG files ?). What would also greatly help is that you provide 
the output of the '8211dump' utility on both the .THF and .GEN files. 
The source for this utility is in the frmts/iso8211 subdirectory of GDAL 
source distribution. If you cd into this directory and do 'make 
8211dump' (on Linux), it should get compiled (but you might need to try 
this on gdal-trunk, as I'm not sure the GNUmakefile in the 1.5 branch 
will compile it without a few changes).

Even

Ayhan TEKG?L a ?crit :
> Hi Even,
>
> When I check gdalinfo for transh01.thf file, the result is,
> -------------------------------------------------------
> Driver: ADRG/ARC Digitized Raster Graphics
> Files: transh01.thf
> Size is 13696, 2944
> Coordinate System is:
> GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
> 84",6378137,298.257223563]],
>    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
> AUTHORITY["EPSG","4326"]]
> Origin = (-10.588233333333333,52.738852777777780)
> Pixel Size = (0.005908613445378,-0.004478503184713)
> Band number: 3
> Metadata:
>  ADRG_SCA=5000000
>  ADRG_NAM=GNUR0102
> Corner Coordinates:
> Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
> Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
> Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
> Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
> Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>  NoData Value=0
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>  NoData Value=0
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>  NoData Value=0
> ------------------------------------------------------------------------------------ 
>
>
> When I check gdalinfo for gnur0101.gen file, the result is,
> ----------------------------------------------------------------------------------- 
>
> Driver: ADRG/ARC Digitized Raster Graphics
> Files: gnur0101.gen
> Size is 13696, 2944
> Coordinate System is:
> GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
> 84",6378137,298.257223563]],
>    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
> AUTHORITY["EPSG","4326"]]
> Origin = (-10.588233333333333,52.738852777777780)
> Pixel Size = (0.005908613445378,-0.004478503184713)
> Band number: 3
> Metadata:
>  ADRG_SCA=5000000
>  ADRG_NAM=GNUR0102
> Corner Coordinates:
> Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
> Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
> Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
> Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
> Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>  NoData Value=0
> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>  NoData Value=0
> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>  NoData Value=0
> -------------------------------------------------------------------------------------- 
>
>
> There are 4 subdatasets, but gdalinfo shows just the first one in 
> metadata as ADRG_NAM=GNUR0102 with size 13696, 2944
>
> In ADRGDataset::GetGENListFromTHF function of adrgdataset.cpp file, I 
> tried to catch IMG files and add to fileNames. Then gdalinfo showed 
> all the img files in subdatasets metadata.
>
> But this time GDALGetRasterCount gives 0 band. Because in 
> ADRGDataset::Open function, when count of fileNames is bigger than 1, 
> all fileNames[i] are being added as subdatasets to poDS and poDS 
> returns without nBands are set.
>
> As I understand that, when subdatasets exist, subdataset files should 
> be handled separately. But gdalinfo does not recognize the subdataset 
> files (xxx.img).
>
> So maybe I should handle the adrg data, which has multiple 
> subdatasets, by my own code. But this is not a convenient way of 
> reading adrg data.
>
> Best regards...
>
> Ayhan TEKG?L
>
> ----- Original Message ----- From: "Even Rouault" 
> <even.rouault@mines-paris.org>
> To: "Ayhan TEKG?L" <ayhan.tekgul@netcad.com.tr>
> Cc: <gdal-dev@lists.osgeo.org>
> Sent: Saturday, December 26, 2009 8:10 PM
> Subject: Re: [gdal-dev] Display ADRG data with multiple subdatasets
>
>
>> Ayhan,
>>
>> the driver has support for ADRG subdatasets (although I'm not 100% 
>> positive this has been tested). Theoretically, if you do a gdalinfo 
>> on the .THF file and it has several subdatasets, they should be 
>> listed. But basically the list is just the list of related .GEN 
>> files, so you can directly do gdalinfo on the .GEN files.
>>
>> Best regards,
>>
>> Even
>>
>> Ayhan TEKG?L a ?crit :
>>> Hi, all;
>>>  I am using gdal-1.5.0 to display ADRG data. But when ADRG data has 
>>> multiple subdatasets, I can display just one image.
>>>  I have tried to search the wiki and gdal-dev archives, but I cannot 
>>> get any similar problem with this issue or solution to this problem. 
>>> (Maybe I have missed.)
>>>  Is there anybody who knows to display adrg data with multiple 
>>> subdatasets?
>>>  Best regards...
>>>  Ayhan TEKG?L
>>> ------------------------------------------------------------------------ 
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>
>
>
>


From ayhan.tekgul at netcad.com.tr  Sun Dec 27 11:28:25 2009
From: ayhan.tekgul at netcad.com.tr (=?iso-8859-9?Q?Ayhan_TEKG=DCL?=)
Date: Sun Dec 27 11:31:18 2009
Subject: [gdal-dev] Display ADRG data with multiple subdatasets
References: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>
	<4B36517A.6030203@mines-paris.org>
	<000e01ca86e3$06ddd560$6a01a8c0@ulusal.local>
	<4B377188.70704@mines-paris.org>
Message-ID: <003601ca8711$9d504e00$6a01a8c0@ulusal.local>

Hi Even,
The dump results are in the zip file attached.

Best regards...

Ayhan TEKG?L

----- Original Message ----- 
From: "Even Rouault" <even.rouault@mines-paris.org>
To: "Ayhan TEKG?L" <ayhan.tekgul@netcad.com.tr>
Cc: <gdal-dev@lists.osgeo.org>
Sent: Sunday, December 27, 2009 4:39 PM
Subject: Re: [gdal-dev] Display ADRG data with multiple subdatasets


> Ayhan,
>
> this obviously confirms that ADRG subdataset was never tested before.  I'd 
> be willing to improve the support for them in GDAL itself rather than 
> forcing each user to use their little own hacks.
>
> The ADRG driver cannot currently open directly the .IMG files, but I 
> suspect this would be propably the right thing to do for subdataset 
> access. This might be probably something similar to what is suggested for 
> the ASRP/USRP driver in http://trac.osgeo.org/gdal/ticket/3194
>
> If I could have access to your data, it will be of course the most 
> convenient solution. Otherwise could you list all the filenames of your 
> ADRG product (from what you say I suspect there's only one GEN file but 
> several IMG files ?). What would also greatly help is that you provide the 
> output of the '8211dump' utility on both the .THF and .GEN files. The 
> source for this utility is in the frmts/iso8211 subdirectory of GDAL 
> source distribution. If you cd into this directory and do 'make 8211dump' 
> (on Linux), it should get compiled (but you might need to try this on 
> gdal-trunk, as I'm not sure the GNUmakefile in the 1.5 branch will compile 
> it without a few changes).
>
> Even
>
> Ayhan TEKG?L a ?crit :
>> Hi Even,
>>
>> When I check gdalinfo for transh01.thf file, the result is,
>> -------------------------------------------------------
>> Driver: ADRG/ARC Digitized Raster Graphics
>> Files: transh01.thf
>> Size is 13696, 2944
>> Coordinate System is:
>> GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
>> 84",6378137,298.257223563]],
>>    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
>> AUTHORITY["EPSG","4326"]]
>> Origin = (-10.588233333333333,52.738852777777780)
>> Pixel Size = (0.005908613445378,-0.004478503184713)
>> Band number: 3
>> Metadata:
>>  ADRG_SCA=5000000
>>  ADRG_NAM=GNUR0102
>> Corner Coordinates:
>> Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
>> Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
>> Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
>> Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
>> Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
>> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>>  NoData Value=0
>> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>>  NoData Value=0
>> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>>  NoData Value=0
>> ------------------------------------------------------------------------------------
>>
>>
>> When I check gdalinfo for gnur0101.gen file, the result is,
>> -----------------------------------------------------------------------------------
>>
>> Driver: ADRG/ARC Digitized Raster Graphics
>> Files: gnur0101.gen
>> Size is 13696, 2944
>> Coordinate System is:
>> GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
>> 84",6378137,298.257223563]],
>>    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
>> AUTHORITY["EPSG","4326"]]
>> Origin = (-10.588233333333333,52.738852777777780)
>> Pixel Size = (0.005908613445378,-0.004478503184713)
>> Band number: 3
>> Metadata:
>>  ADRG_SCA=5000000
>>  ADRG_NAM=GNUR0102
>> Corner Coordinates:
>> Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
>> Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
>> Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
>> Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
>> Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
>> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>>  NoData Value=0
>> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>>  NoData Value=0
>> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>>  NoData Value=0
>> --------------------------------------------------------------------------------------
>>
>>
>> There are 4 subdatasets, but gdalinfo shows just the first one in 
>> metadata as ADRG_NAM=GNUR0102 with size 13696, 2944
>>
>> In ADRGDataset::GetGENListFromTHF function of adrgdataset.cpp file, I 
>> tried to catch IMG files and add to fileNames. Then gdalinfo showed all 
>> the img files in subdatasets metadata.
>>
>> But this time GDALGetRasterCount gives 0 band. Because in 
>> ADRGDataset::Open function, when count of fileNames is bigger than 1, all 
>> fileNames[i] are being added as subdatasets to poDS and poDS returns 
>> without nBands are set.
>>
>> As I understand that, when subdatasets exist, subdataset files should be 
>> handled separately. But gdalinfo does not recognize the subdataset files 
>> (xxx.img).
>>
>> So maybe I should handle the adrg data, which has multiple subdatasets, 
>> by my own code. But this is not a convenient way of reading adrg data.
>>
>> Best regards...
>>
>> Ayhan TEKG?L
>>
>> ----- Original Message ----- From: "Even Rouault" 
>> <even.rouault@mines-paris.org>
>> To: "Ayhan TEKG?L" <ayhan.tekgul@netcad.com.tr>
>> Cc: <gdal-dev@lists.osgeo.org>
>> Sent: Saturday, December 26, 2009 8:10 PM
>> Subject: Re: [gdal-dev] Display ADRG data with multiple subdatasets
>>
>>
>>> Ayhan,
>>>
>>> the driver has support for ADRG subdatasets (although I'm not 100% 
>>> positive this has been tested). Theoretically, if you do a gdalinfo on 
>>> the .THF file and it has several subdatasets, they should be listed. But 
>>> basically the list is just the list of related .GEN files, so you can 
>>> directly do gdalinfo on the .GEN files.
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> Ayhan TEKG?L a ?crit :
>>>> Hi, all;
>>>>  I am using gdal-1.5.0 to display ADRG data. But when ADRG data has 
>>>> multiple subdatasets, I can display just one image.
>>>>  I have tried to search the wiki and gdal-dev archives, but I cannot 
>>>> get any similar problem with this issue or solution to this problem. 
>>>> (Maybe I have missed.)
>>>>  Is there anybody who knows to display adrg data with multiple 
>>>> subdatasets?
>>>>  Best regards...
>>>>  Ayhan TEKG?L
>>>> ------------------------------------------------------------------------
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>
>>
>>
>>
>>
>
> 
-------------- next part --------------
A non-text attachment was scrubbed...
Name: adrg8211dump.zip
Type: application/octet-stream
Size: 5181 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091227/633b6530/adrg8211dump.obj
From even.rouault at mines-paris.org  Sun Dec 27 12:34:21 2009
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Dec 27 12:34:31 2009
Subject: [gdal-dev] Display ADRG data with multiple subdatasets
In-Reply-To: <003601ca8711$9d504e00$6a01a8c0@ulusal.local>
References: <005d01ca862f$d100b5b0$6a01a8c0@ulusal.local>
	<4B36517A.6030203@mines-paris.org>
	<000e01ca86e3$06ddd560$6a01a8c0@ulusal.local>
	<4B377188.70704@mines-paris.org>
	<003601ca8711$9d504e00$6a01a8c0@ulusal.local>
Message-ID: <4B379A9D.20007@mines-paris.org>

Thanks. I've created a ticket ( http://trac.osgeo.org/gdal/ticket/3302 ) 
for that issue and attached your dump results to it. This should be 
sufficient input to add (working) support for subdatasets.

Ayhan TEKG?L a ?crit :
> Hi Even,
> The dump results are in the zip file attached.
>
> Best regards...
>
> Ayhan TEKG?L
>
> ----- Original Message ----- From: "Even Rouault" 
> <even.rouault@mines-paris.org>
> To: "Ayhan TEKG?L" <ayhan.tekgul@netcad.com.tr>
> Cc: <gdal-dev@lists.osgeo.org>
> Sent: Sunday, December 27, 2009 4:39 PM
> Subject: Re: [gdal-dev] Display ADRG data with multiple subdatasets
>
>
>> Ayhan,
>>
>> this obviously confirms that ADRG subdataset was never tested 
>> before.  I'd be willing to improve the support for them in GDAL 
>> itself rather than forcing each user to use their little own hacks.
>>
>> The ADRG driver cannot currently open directly the .IMG files, but I 
>> suspect this would be propably the right thing to do for subdataset 
>> access. This might be probably something similar to what is suggested 
>> for the ASRP/USRP driver in http://trac.osgeo.org/gdal/ticket/3194
>>
>> If I could have access to your data, it will be of course the most 
>> convenient solution. Otherwise could you list all the filenames of 
>> your ADRG product (from what you say I suspect there's only one GEN 
>> file but several IMG files ?). What would also greatly help is that 
>> you provide the output of the '8211dump' utility on both the .THF and 
>> .GEN files. The source for this utility is in the frmts/iso8211 
>> subdirectory of GDAL source distribution. If you cd into this 
>> directory and do 'make 8211dump' (on Linux), it should get compiled 
>> (but you might need to try this on gdal-trunk, as I'm not sure the 
>> GNUmakefile in the 1.5 branch will compile it without a few changes).
>>
>> Even
>>
>> Ayhan TEKG?L a ?crit :
>>> Hi Even,
>>>
>>> When I check gdalinfo for transh01.thf file, the result is,
>>> -------------------------------------------------------
>>> Driver: ADRG/ARC Digitized Raster Graphics
>>> Files: transh01.thf
>>> Size is 13696, 2944
>>> Coordinate System is:
>>> GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
>>> 84",6378137,298.257223563]],
>>>    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
>>> AUTHORITY["EPSG","4326"]]
>>> Origin = (-10.588233333333333,52.738852777777780)
>>> Pixel Size = (0.005908613445378,-0.004478503184713)
>>> Band number: 3
>>> Metadata:
>>>  ADRG_SCA=5000000
>>>  ADRG_NAM=GNUR0102
>>> Corner Coordinates:
>>> Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
>>> Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
>>> Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
>>> Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
>>> Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
>>> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>>>  NoData Value=0
>>> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>>>  NoData Value=0
>>> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>>>  NoData Value=0
>>> ------------------------------------------------------------------------------------ 
>>>
>>>
>>>
>>> When I check gdalinfo for gnur0101.gen file, the result is,
>>> ----------------------------------------------------------------------------------- 
>>>
>>>
>>> Driver: ADRG/ARC Digitized Raster Graphics
>>> Files: gnur0101.gen
>>> Size is 13696, 2944
>>> Coordinate System is:
>>> GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS 
>>> 84",6378137,298.257223563]],
>>>    PRIMEM["Greenwich",0], UNIT["degree",0.0174532925199433], 
>>> AUTHORITY["EPSG","4326"]]
>>> Origin = (-10.588233333333333,52.738852777777780)
>>> Pixel Size = (0.005908613445378,-0.004478503184713)
>>> Band number: 3
>>> Metadata:
>>>  ADRG_SCA=5000000
>>>  ADRG_NAM=GNUR0102
>>> Corner Coordinates:
>>> Upper Left  ( -10.5882333,  52.7388528) ( 10d35'17.64"W, 52d44'19.87"N)
>>> Lower Left  ( -10.5882333,  39.5541394) ( 10d35'17.64"W, 39d33'14.90"N)
>>> Upper Right (  70.3361364,  52.7388528) ( 70d20'10.09"E, 52d44'19.87"N)
>>> Lower Right (  70.3361364,  39.5541394) ( 70d20'10.09"E, 39d33'14.90"N)
>>> Center      (  29.8739515,  46.1464961) ( 29d52'26.23"E, 46d 8'47.39"N)
>>> Band 1 Block=128x128 Type=Byte, ColorInterp=Red
>>>  NoData Value=0
>>> Band 2 Block=128x128 Type=Byte, ColorInterp=Green
>>>  NoData Value=0
>>> Band 3 Block=128x128 Type=Byte, ColorInterp=Blue
>>>  NoData Value=0
>>> -------------------------------------------------------------------------------------- 
>>>
>>>
>>>
>>> There are 4 subdatasets, but gdalinfo shows just the first one in 
>>> metadata as ADRG_NAM=GNUR0102 with size 13696, 2944
>>>
>>> In ADRGDataset::GetGENListFromTHF function of adrgdataset.cpp file, 
>>> I tried to catch IMG files and add to fileNames. Then gdalinfo 
>>> showed all the img files in subdatasets metadata.
>>>
>>> But this time GDALGetRasterCount gives 0 band. Because in 
>>> ADRGDataset::Open function, when count of fileNames is bigger than 
>>> 1, all fileNames[i] are being added as subdatasets to poDS and poDS 
>>> returns without nBands are set.
>>>
>>> As I understand that, when subdatasets exist, subdataset files 
>>> should be handled separately. But gdalinfo does not recognize the 
>>> subdataset files (xxx.img).
>>>
>>> So maybe I should handle the adrg data, which has multiple 
>>> subdatasets, by my own code. But this is not a convenient way of 
>>> reading adrg data.
>>>
>>> Best regards...
>>>
>>> Ayhan TEKG?L
>>>
>>> ----- Original Message ----- From: "Even Rouault" 
>>> <even.rouault@mines-paris.org>
>>> To: "Ayhan TEKG?L" <ayhan.tekgul@netcad.com.tr>
>>> Cc: <gdal-dev@lists.osgeo.org>
>>> Sent: Saturday, December 26, 2009 8:10 PM
>>> Subject: Re: [gdal-dev] Display ADRG data with multiple subdatasets
>>>
>>>
>>>> Ayhan,
>>>>
>>>> the driver has support for ADRG subdatasets (although I'm not 100% 
>>>> positive this has been tested). Theoretically, if you do a gdalinfo 
>>>> on the .THF file and it has several subdatasets, they should be 
>>>> listed. But basically the list is just the list of related .GEN 
>>>> files, so you can directly do gdalinfo on the .GEN files.
>>>>
>>>> Best regards,
>>>>
>>>> Even
>>>>
>>>> Ayhan TEKG?L a ?crit :
>>>>> Hi, all;
>>>>>  I am using gdal-1.5.0 to display ADRG data. But when ADRG data 
>>>>> has multiple subdatasets, I can display just one image.
>>>>>  I have tried to search the wiki and gdal-dev archives, but I 
>>>>> cannot get any similar problem with this issue or solution to this 
>>>>> problem. (Maybe I have missed.)
>>>>>  Is there anybody who knows to display adrg data with multiple 
>>>>> subdatasets?
>>>>>  Best regards...
>>>>>  Ayhan TEKG?L
>>>>> ------------------------------------------------------------------------ 
>>>>>
>>>>>
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>>
>>>
>>>
>>
>>


From weixj2003ld at 163.com  Mon Dec 28 02:57:33 2009
From: weixj2003ld at 163.com (weixj2003ld)
Date: Mon Dec 28 03:13:13 2009
Subject: [gdal-dev] the format of satellite photo file
Message-ID: <19485403.543381261987053065.JavaMail.coremail@app159.163.com>

Hi,
1.I get a satellite photo file,and its extention is .tifand how get the (x,y,z) and the value of each poiont?
2.Could you tell me the article which introduces the format of satellite photo file in detail?
3.Is tif the only format of satellite photo file?
Best regards.
Wei
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091228/937a7f67/attachment.html
From chaitanya.ch at gmail.com  Mon Dec 28 04:08:04 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Dec 28 04:08:08 2009
Subject: [gdal-dev] the format of satellite photo file
In-Reply-To: <19485403.543381261987053065.JavaMail.coremail@app159.163.com>
References: <19485403.543381261987053065.JavaMail.coremail@app159.163.com>
Message-ID: <eb502d880912280108w6845d62bw266be9d860be74ac@mail.gmail.com>

Wei,

2009/12/28 weixj2003ld <weixj2003ld@163.com>:
> Hi,
> 1.I get a satellite photo file,and its extention is .tif?and how get the
> (x,y,z) and the value of each poiont?
tif is the extension for TIFF file format. You may be able to view the
file in a normal image viewer. But you should be able to to view the
coordinates and stuff in a geographic raster viewer like openev.
Google for more viewers.

> 2.Could you tell me the article which introduces the format of satellite
> photo file in detail?
There is no specific format for satellite imagery. Your image is
probably a processed form of a satellite image.

> 3.Is tif the only format of satellite photo file?
No. Refer to http://gdal.org/formats_list.html the list of raster
formats supported by GDAL.

> Best regards.
> Wei
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From chaitanya.ch at gmail.com  Tue Dec 29 03:27:03 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Dec 29 03:27:09 2009
Subject: [gdal-dev] the format of satellite photo file
In-Reply-To: <25647080.296201262074782935.JavaMail.coremail@app159.163.com>
References: <19485403.543381261987053065.JavaMail.coremail@app159.163.com>
	<eb502d880912280108w6845d62bw266be9d860be74ac@mail.gmail.com>
	<2992082.125711262055464332.JavaMail.coremail@bj163app124.163.com>
	<eb502d880912281945i531adb7ak90cd9bac2ba83452@mail.gmail.com>
	<25647080.296201262074782935.JavaMail.coremail@app159.163.com>
Message-ID: <eb502d880912290027o422d1e2ex61e80f366112de1d@mail.gmail.com>

Wei,

Can you give some explanation on what exactly you mean by 3D view. Is
it enough to show the elevations on a 2D image or do you want to
display a 3D with changeable perspective?

Elevation display on a 2D image is straight forward. 3D modelling is
more involved.

On Tue, Dec 29, 2009 at 8:19 AM, weixj2003ld <weixj2003ld@163.com> wrote:
> Hi,Thank you for your answer in detail.
> I want to display the satellite?photo file in 3D,what open source tool can
> do it,could you give me some advance?
> Kind regards.
> wei
>
>
> ?2009-12-29?"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ???
>>Wei,
>>
>>On Tue, Dec 29, 2009 at 2:57 AM, weixj2003ld <weixj2003ld@163.com> wrote:
>>> Hi,Thk u? for your answer.
>>> 1.I want to use GDAL to get information about a satellite?photo file,such
>>> as
>>> x,y,z,and the value of each poiont,could GDAL?do that?
>>
>>You can certainly use GDAL for this. Refer to
>> http://gdal.org/gdal_tutorial.html
>>
>>> 2.In gereral,the size of a satellite?photo file is large(such as 100M),I
>>> want to display it in a 3D viewer,which tool can display it
>>> sooner,Openev?or
>>> other?
>>
>>GDAL is routinely used to read files larger than 100MB.
>>openev is a tool to view raster images in 2D. opevev uses GDAL for
>>retrieving raster data.
>>
>>Once you have everything working, you can tweak some stuff for a
>>performance boost.
>>
>>> Kind regards.
>>> Wei
>>>
>>>
>>> ?2009-12-28?"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ???
>>>>Wei,
>>>>
>>>>2009/12/28 weixj2003ld <weixj2003ld@163.com>:
>>>>> Hi,
>>>>> 1.I get a satellite photo file,and its extention is .tif?and how get
>>>>> the
>>>>> (x,y,z) and the value of each poiont?
>>>>tif is the extension for TIFF file format. You may be able to view the
>>>>file in a normal image viewer. But you should be able to to view the
>>>>coordinates and stuff in a geographic raster viewer like openev.
>>>>Google for more viewers.
>>>>
>>>>> 2.Could you tell me the article which introduces the format of
>>>>> satellite
>>>>> photo file in detail?
>>>>There is no specific format for satellite imagery. Your image is
>>>>probably a processed form of a satellite image.
>>>>
>>>>> 3.Is tif the only format of satellite photo file?
>>>>No. Refer to http://gdal.org/formats_list.html the list of raster
>>>>formats supported by GDAL.
>>>>
>>>>> Best regards.
>>>>> Wei
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>
>>>>--
>>>>Best regards,
>>>>Chaitanya kumar CH.
>>>>/t?a???nj?/ /k?m?r/
>>>>+91-9848167848
>>>>17.241582N 80.142635E
>>>
>>>
>>>
>>
>>
>>
>>--
>>Best regards,
>>Chaitanya kumar CH.
>>/t?a???nj?/ /k?m?r/
>>+91-9848167848
>>17.241582N 80.142635E
>
>
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From chaitanya.ch at gmail.com  Tue Dec 29 04:32:34 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Dec 29 04:32:38 2009
Subject: [gdal-dev] the format of satellite photo file
In-Reply-To: <18086631.440591262076940373.JavaMail.coremail@bj163app123.163.com>
References: <19485403.543381261987053065.JavaMail.coremail@app159.163.com>
	<eb502d880912280108w6845d62bw266be9d860be74ac@mail.gmail.com>
	<2992082.125711262055464332.JavaMail.coremail@bj163app124.163.com>
	<eb502d880912281945i531adb7ak90cd9bac2ba83452@mail.gmail.com>
	<25647080.296201262074782935.JavaMail.coremail@app159.163.com>
	<eb502d880912290027o422d1e2ex61e80f366112de1d@mail.gmail.com>
	<18086631.440591262076940373.JavaMail.coremail@bj163app123.163.com>
Message-ID: <eb502d880912290132kde235d2nd12959c96e0d38e1@mail.gmail.com>

Wei,

In that case you may also want to consider vectorisation
tools/algorithms. GDAL has some of them.

Here is a starting point for your search.
http://opensourcegis.org/
http://en.wikipedia.org/wiki/List_of_GIS_software

On Tue, Dec 29, 2009 at 8:55 AM, weixj2003ld <weixj2003ld@163.com> wrote:
> Hi,
> Thank you for your answer in time.
> I do not want to display a satellite?photo file in plane picture.
> I want to display it 3D picture, that is,?a satellite?photo file? may
> contains mountains,gorge etc,If I display it in 3D picture(shows as
> attachment),I can show it to user vividly.
> could you tell me some opensource tool that can display GDAL raster data in
> 3D viewer?
> Thank you.
> Kind regards.
>
> ?2009-12-29?"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ???
>>Wei,
>>
>>Can you give some explanation on what exactly you mean by 3D view. Is
>>it enough to show the elevations on a 2D image or do you want to
>>display a 3D with changeable perspective?
>>
>>Elevation display on a 2D image is straight forward. 3D modelling is
>>more involved.
>>
>>On Tue, Dec 29, 2009 at 8:19 AM, weixj2003ld <weixj2003ld@163.com> wrote:
>>> Hi,Thank you for your answer in detail.
>>> I want to display the satellite?photo file in 3D,what open source tool
>>> can
>>> do it,could you give me some advance?
>>> Kind regards.
>>> wei
>>>
>>>
>>> ?2009-12-29?"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ???
>>>>Wei,
>>>>
>>>>On Tue, Dec 29, 2009 at 2:57 AM, weixj2003ld <weixj2003ld@163.com> wrote:
>>>>> Hi,Thk u? for your answer.
>>>>> 1.I want to use GDAL to get information about a satellite?photo
>>>>> file,such
>>>>> as
>>>>> x,y,z,and the value of each poiont,could GDAL?do that?
>>>>
>>>>You can certainly use GDAL for this. Refer to
>>>> http://gdal.org/gdal_tutorial.html
>>>>
>>>>> 2.In gereral,the size of a satellite?photo file is large(such as
>>>>> 100M),I
>>>>> want to display it in a 3D viewer,which tool can display it
>>>>> sooner,Openev?or
>>>>> other?
>>>>
>>>>GDAL is routinely used to read files larger than 100MB.
>>>>openev is a tool to view raster images in 2D. opevev uses GDAL for
>>>>retrieving raster data.
>>>>
>>>>Once you have everything working, you can tweak some stuff for a
>>>>performance boost.
>>>>
>>>>> Kind regards.
>>>>> Wei
>>>>>
>>>>>
>>>>> ?2009-12-28?"Chaitanya kumar CH" <chaitanya.ch@gmail.com> ???
>>>>>>Wei,
>>>>>>
>>>>>>2009/12/28 weixj2003ld <weixj2003ld@163.com>:
>>>>>>> Hi,
>>>>>>> 1.I get a satellite photo file,and its extention is .tif?and how get
>>>>>>> the
>>>>>>> (x,y,z) and the value of each poiont?
>>>>>>tif is the extension for TIFF file format. You may be able to view the
>>>>>>file in a normal image viewer. But you should be able to to view the
>>>>>>coordinates and stuff in a geographic raster viewer like openev.
>>>>>>Google for more viewers.
>>>>>>
>>>>>>> 2.Could you tell me the article which introduces the format of
>>>>>>> satellite
>>>>>>> photo file in detail?
>>>>>>There is no specific format for satellite imagery. Your image is
>>>>>>probably a processed form of a satellite image.
>>>>>>
>>>>>>> 3.Is tif the only format of satellite photo file?
>>>>>>No. Refer to http://gdal.org/formats_list.html the list of raster
>>>>>>formats supported by GDAL.
>>>>>>
>>>>>>> Best regards.
>>>>>>> Wei
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>
>>>>>>
>>>>>>--
>>>>>>Best regards,
>>>>>>Chaitanya kumar CH.
>>>>>>/t?a???nj?/ /k?m?r/
>>>>>>+91-9848167848
>>>>>>17.241582N 80.142635E
>>>>>
>>>>>
>>>>>
>>>>
>>>>
>>>>
>>>>--
>>>>Best regards,
>>>>Chaitanya kumar CH.
>>>>/t?a???nj?/ /k?m?r/
>>>>+91-9848167848
>>>>17.241582N 80.142635E
>>>
>>>
>>>
>>
>>
>>
>>--
>>Best regards,
>>Chaitanya kumar CH.
>>/t?a???nj?/ /k?m?r/
>>+91-9848167848
>>17.241582N 80.142635E
>
>
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From leohardtke at gmail.com  Tue Dec 29 09:29:21 2009
From: leohardtke at gmail.com (Leonardo Hardtke)
Date: Tue Dec 29 09:29:24 2009
Subject: [gdal-dev] python gdal problem
Message-ID: <556fa6de0912290629q102e943ei90bb7344d5909cf3@mail.gmail.com>

Hi all,
I've been using Python-gdal bindings in Ubuntu 9.04 without problems.
Recently I made a fresh Ubuntu 9.10 install and I can't install the bindings
on it...

leo@rs7 ~/Descargas/GDAL-1.6.1 $ python setup.py build
numpy include /usr/lib/python2.6/dist-packages/numpy/core/include
setup.py:78: DeprecationWarning: The popen2 module is deprecated.  Use the
subprocess module.
  import popen2
running build
running build_py
creating build
creating build/lib.linux-x86_64-2.6
copying gdal.py -> build/lib.linux-x86_64-2.6
copying ogr.py -> build/lib.linux-x86_64-2.6
copying osr.py -> build/lib.linux-x86_64-2.6
copying gdalconst.py -> build/lib.linux-x86_64-2.6
copying gdalnumeric.py -> build/lib.linux-x86_64-2.6
creating build/lib.linux-x86_64-2.6/osgeo
copying osgeo/gdal.py -> build/lib.linux-x86_64-2.6/osgeo
copying osgeo/osr.py -> build/lib.linux-x86_64-2.6/osgeo
copying osgeo/gdal_array.py -> build/lib.linux-x86_64-2.6/osgeo
copying osgeo/gdalconst.py -> build/lib.linux-x86_64-2.6/osgeo
copying osgeo/__init__.py -> build/lib.linux-x86_64-2.6/osgeo
copying osgeo/gdalnumeric.py -> build/lib.linux-x86_64-2.6/osgeo
copying osgeo/ogr.py -> build/lib.linux-x86_64-2.6/osgeo
running build_ext
Could not run gdal-config!!!!
building 'osgeo._gdal' extension
creating build/temp.linux-x86_64-2.6
creating build/temp.linux-x86_64-2.6/extensions
gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall
-Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg
-I../../ogr/ -I/usr/include/python2.6
-I/usr/lib/python2.6/dist-packages/numpy/core/include -c
extensions/gdal_wrap.cpp -o
build/temp.linux-x86_64-2.6/extensions/gdal_wrap.o
cc1plus: warning: command line option "-Wstrict-prototypes" is valid for
Ada/C/ObjC but not for C++
extensions/gdal_wrap.cpp:129:20: error: Python.h: No existe el fichero ?
directorio
extensions/gdal_wrap.cpp:2502:4: error: #error "This python version requires
swig to be run with the '-classic' option"
extensions/gdal_wrap.cpp:2587:22: error: cpl_port.h: No existe el fichero ?
directorio
extensions/gdal_wrap.cpp:2588:24: error: cpl_string.h: No existe el fichero
? directorio
extensions/gdal_wrap.cpp:2590:18: error: gdal.h: No existe el fichero ?
directorio
extensions/gdal_wrap.cpp:2591:23: error: gdal_priv.h: No existe el fichero ?
directorio
extensions/gdal_wrap.cpp:2592:22: error: gdal_alg.h: No existe el fichero ?
directorio
extensions/gdal_wrap.cpp:2593:24: error: gdalwarper.h: No existe el fichero
? directorio
extensions/gdal_wrap.cpp:734: error: expected initializer before ?*? token
extensions/gdal_wrap.cpp:789: error: expected initializer before ?*? token
extensions/gdal_wrap.cpp:810: error: expected initializer before ?*? token
In file included from /usr/include/c++/4.4/stdexcept:38,
                 from extensions/gdal_wrap.cpp:2521:
/usr/include/c++/4.4/exception:35: error: expected declaration before end of
line
error: command 'gcc' failed with exit status 1

the problem is with gdal-config (it is installed on /usr/local/bin), but I
don't now how to fix it!

Tanks in advise
-- 
Lic. Leonardo A. Hardtke
Laboratorio de Teledetecci?n y S.I.G.
Centro Nacional Patag?nico (CONICET)
Bvd. Brown 2825, 9120
Puerto Madryn, Chubut, Argentina
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091229/bed5a68d/attachment.html
From hobu.inc at gmail.com  Tue Dec 29 09:30:07 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Dec 29 09:34:09 2009
Subject: [gdal-dev] python gdal problem
In-Reply-To: <556fa6de0912290629q102e943ei90bb7344d5909cf3@mail.gmail.com>
References: <556fa6de0912290629q102e943ei90bb7344d5909cf3@mail.gmail.com>
Message-ID: <4FADF8BA-1F23-47F3-B1E8-E288218A0890@gmail.com>

Edit setup.cfg in swig/python to point to the location of your gdal-config script.  Alternatively, you could edit your PATH environment variable to have /usr/local/bin on it, and setup should find it.  

Howard

On Dec 29, 2009, at 8:29 AM, Leonardo Hardtke wrote:

> Hi all,
> I've been using Python-gdal bindings in Ubuntu 9.04 without problems.
> Recently I made a fresh Ubuntu 9.10 install and I can't install the bindings on it...
> 
> leo@rs7 ~/Descargas/GDAL-1.6.1 $ python setup.py build
> numpy include /usr/lib/python2.6/dist-packages/numpy/core/include
> setup.py:78: DeprecationWarning: The popen2 module is deprecated.  Use the subprocess module.
>   import popen2
> running build
> running build_py
> creating build
> creating build/lib.linux-x86_64-2.6
> copying gdal.py -> build/lib.linux-x86_64-2.6
> copying ogr.py -> build/lib.linux-x86_64-2.6
> copying osr.py -> build/lib.linux-x86_64-2.6
> copying gdalconst.py -> build/lib.linux-x86_64-2.6
> copying gdalnumeric.py -> build/lib.linux-x86_64-2.6
> creating build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/gdal.py -> build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/osr.py -> build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/gdal_array.py -> build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/gdalconst.py -> build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/__init__.py -> build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/gdalnumeric.py -> build/lib.linux-x86_64-2.6/osgeo
> copying osgeo/ogr.py -> build/lib.linux-x86_64-2.6/osgeo
> running build_ext
> Could not run gdal-config!!!!
> building 'osgeo._gdal' extension
> creating build/temp.linux-x86_64-2.6
> creating build/temp.linux-x86_64-2.6/extensions
> gcc -pthread -fno-strict-aliasing -DNDEBUG -g -fwrapv -O2 -Wall -Wstrict-prototypes -fPIC -I../../port -I../../gcore -I../../alg -I../../ogr/ -I/usr/include/python2.6 -I/usr/lib/python2.6/dist-packages/numpy/core/include -c extensions/gdal_wrap.cpp -o build/temp.linux-x86_64-2.6/extensions/gdal_wrap.o
> cc1plus: warning: command line option "-Wstrict-prototypes" is valid for Ada/C/ObjC but not for C++
> extensions/gdal_wrap.cpp:129:20: error: Python.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:2502:4: error: #error "This python version requires swig to be run with the '-classic' option"
> extensions/gdal_wrap.cpp:2587:22: error: cpl_port.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:2588:24: error: cpl_string.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:2590:18: error: gdal.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:2591:23: error: gdal_priv.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:2592:22: error: gdal_alg.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:2593:24: error: gdalwarper.h: No existe el fichero ? directorio
> extensions/gdal_wrap.cpp:734: error: expected initializer before ?*? token
> extensions/gdal_wrap.cpp:789: error: expected initializer before ?*? token
> extensions/gdal_wrap.cpp:810: error: expected initializer before ?*? token
> In file included from /usr/include/c++/4.4/stdexcept:38,
>                  from extensions/gdal_wrap.cpp:2521:
> /usr/include/c++/4.4/exception:35: error: expected declaration before end of line
> error: command 'gcc' failed with exit status 1
> 
> the problem is with gdal-config (it is installed on /usr/local/bin), but I don't now how to fix it!
> 
> Tanks in advise
> -- 
> Lic. Leonardo A. Hardtke   
> Laboratorio de Teledetecci?n y S.I.G.  
> Centro Nacional Patag?nico (CONICET) 
> Bvd. Brown 2825, 9120 
> Puerto Madryn, Chubut, Argentina 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From randre at gmail.com  Thu Dec 31 10:58:08 2009
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Dec 31 10:58:10 2009
Subject: [gdal-dev] Setting nodata tag with Python API
Message-ID: <9c2015090912310758h6bde4f15q4f118d0996b03c3@mail.gmail.com>

Hi All,

I'm using the Python API to build some GeoTIFFs and would like to set
the nodata value to -9999 at creation time.  How do I do that?  Below
is a sample of my code

  def makeRaster(self):
    out_drv = gdal.GetDriverByName('GTiff')
    out_ds = out_drv.Create(self.raster_name, 4320, 2160 , 1, gdal.GDT_Float32)
    out_ds.SetGeoTransform([-180, 0.0833330, 0, 90, 0, -0.0833330])
    out_band = numpy.zeros([out_ds.RasterYSize, out_ds.RasterXSize])
    for iY in range(out_ds.RasterYSize):
      for iX in range(out_ds.RasterXSize):
        alloc_key = self.makeAllocKey(iY + 1, iX + 1)
        pixel_value = self.checkPixel(alloc_key)
        out_band[iY][iX] = pixel_value
    out_ds.GetRasterBand(1).WriteArray(out_band)
    out_ds = None

Thanks,

Roger
--
From warmerdam at pobox.com  Thu Dec 31 11:27:46 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 31 11:27:56 2009
Subject: [gdal-dev] Setting nodata tag with Python API
In-Reply-To: <9c2015090912310758h6bde4f15q4f118d0996b03c3@mail.gmail.com>
References: <9c2015090912310758h6bde4f15q4f118d0996b03c3@mail.gmail.com>
Message-ID: <4B3CD102.3070506@pobox.com>

Roger Andr? wrote:
> Hi All,
> 
> I'm using the Python API to build some GeoTIFFs and would like to set
> the nodata value to -9999 at creation time.  How do I do that?  Below
> is a sample of my code
> 
>   def makeRaster(self):
>     out_drv = gdal.GetDriverByName('GTiff')
>     out_ds = out_drv.Create(self.raster_name, 4320, 2160 , 1, gdal.GDT_Float32)
>     out_ds.SetGeoTransform([-180, 0.0833330, 0, 90, 0, -0.0833330])
>     out_band = numpy.zeros([out_ds.RasterYSize, out_ds.RasterXSize])
>     for iY in range(out_ds.RasterYSize):
>       for iX in range(out_ds.RasterXSize):
>         alloc_key = self.makeAllocKey(iY + 1, iX + 1)
>         pixel_value = self.checkPixel(alloc_key)
>         out_band[iY][iX] = pixel_value
>     out_ds.GetRasterBand(1).WriteArray(out_band)
>     out_ds = None

Roger,

Try adding:

   out_ds.GetRasterBand(1).SetNoDataValue( -9999 )

after the WriteArray() (or anywhere after the Create() call I suppose).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Thu Dec 31 11:59:55 2009
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Thu Dec 31 11:59:58 2009
Subject: [gdal-dev] trying to change regionator image resampling to 
	nearest-neighbor
In-Reply-To: <alpine.LNX.1.10.0911121102170.20251@wuzzles.colorado.edu>
References: <alpine.LNX.1.10.0911121102170.20251@wuzzles.colorado.edu>
Message-ID: <9c2015090912310859k5a48e9bch4b378795e0cfb486@mail.gmail.com>

Hi Mary Jo,

Sounds like you have started down a slightly different path to resolve
this by using gdal2tiles.py, but I'm still a bit curious about the
results you were seeing with the regionator.  Would you mind sending
me a couple screenshots that show the before and after images, with
haloing?  Your description makes me think that it is a jpg compression
problem, more than a resampling artifact.  It might be possible to
simply change the output format to PNG in the code, and eliminate the
problem.

Regards,

Roger
--



On Thu, Nov 12, 2009 at 11:32 AM, Mary Jo Brodzik <brodzik@nsidc.org> wrote:
>
> Dear gdal-dev list members,
>
> I'm using a python tool called the regionator
> (http://code.google.com/p/regionator/wiki/ Welcome) on a large (14352x7440)
> png image. ?The regionator uses the GDAL library to resample subsets of the
> original image into much smaller chunk images. ?These images are set up at
> increasing levels of detail in a kml file that make the download of this
> information into a googleEarth client much more efficient.
>
> The png is color and includes transparency; its approximate resolution is
> 500 meters. I basically have 4 colors in the original image, black, white,
> blue and yellow. The output images that regionator is producing are great,
> but when I zoom in to distances where the original pixel sizes are visible,
> it looks like the resampling did some averaging across the 4 colors, so I'm
> getting blue sections surrounded by a blue halo that bleeds into white, and
> yellow and blue values bleeding into each other, etc.
>
> I'd like to control the resampling, and force it to do nearest-neighbor
> rather than averaging to eliminate the halos. ?It looks to me like the
> regionator is doing the resampling with calls to ReadRaster and WriteRaster
> in in a class called extractor.py, but I don't know enough about the GDAL
> libraries to know how to change them. Is it possible to force the resampling
> to be nearest neighbor? ?extractor.py isn't terribly large or complicated,
> so I'm including it here (below).
>
> I've already tried the googleearth forum and the kml-developers forum, no
> help from those communities. ?Python's new to me, and I've only used the
> GDAL command-line utilities up to now.
>
> Thanks in advance for any tips.
>
> Mary Jo
>
> Here's the regionator's extractor.py:
>
> """
> Copyright (C) 2006 Google Inc.
>
> Licensed under the Apache License, Version 2.0 (the "License");
> you may not use this file except in compliance with the License.
> You may obtain a copy of the License at
>
> ? ? http://www.apache.org/licenses/LICENSE-2.0
>
> Unless required by applicable law or agreed to in writing, software
> distributed under the License is distributed on an "AS IS" BASIS,
> WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
> See the License for the specific language governing permissions and
> limitations under the License.
> """
>
> """
> $URL: http://regionator.googlecode.com/svn/trunk/kml/extractor.py $
> $Revision: 200 $
> $Date: 2007-01-12 09:12:48 -0700 (Fri, 12 Jan 2007) $
> """
>
> """ class Extractor
>
> Phase 3 of SuperOverlay creation.
>
> Extract tiles from an image
>
> Front-ends GDAL. ?Input file and output driver must be
> some format known to GDAL.
>
> """
>
> import gdal
> import tempfile
> import os
>
>
> class Extractor:
>
> ?""" class Extractor
>
> ?Create for Extractor the image file.
> ?Each tile is resampled to the specified size and written
> ?to a file of the given format.
>
> ?"""
>
> ?def __init__(self,imgfile,twid,tht,fmt,verbose=False):
>
> ? ?"""
>
> ? ?Args:
> ? ? ?imgfile: a gtiff
> ? ? ?twid,tht: extracted tile resample pixel width/height
> ? ? ?fmt: GDAL output driver name ('PNG','JPEG')
> ? ?"""
>
> ? ?self.__in_ds = gdal.Open(imgfile)
> ? ?self.__twid = twid
> ? ?self.__tht = tht
> ? ?self.__fmt = fmt
> ? ?self.__verbose = verbose
>
> ? ?self.__bands = self.__in_ds.RasterCount
>
> ? ?if self.__verbose:
> ? ? ?print 'Extractor %s %d bands' % (imgfile,self.__bands)
>
> ? ?# Intermediate work must be in GTiff (?)
> ? ?self.__gtiff_driver = gdal.GetDriverByName('GTiff')
>
> ? ?# Output driver/format is whatever the user specifies
> ? ?# XXX handle bad/wrong fmt's less gracelessly
> ? ?self.__o_driver = gdal.GetDriverByName(fmt)
>
> ?def Extract(self,x,y,wid,ht,basename):
>
> ? ?""" Extract a tile into a file
>
> ? ?The given tile is extracted, resampled and saved
> ? ?according to the tile pixel dimensions and format
> ? ?specified at object __init__().
>
> ? ?Args:
> ? ? ?x,y: pixel offset
> ? ? ?wid,ht: pixel dimensions
>
> ? ?Returns:
> ? ? ?True: complete success
> ? ? ?False: any failure
>
> ? ?"""
>
> ? ?# Get the tile's pixels resampled
> ? ?twid = self.__twid
> ? ?tht = self.__tht
> ? ?i_data = self.__in_ds.ReadRaster(x,y,wid,ht,buf_xsize=twid,buf_ysize=tht)
>
> ? ?# Have to Create out to GTiff first (?)
> ? ?(fd, tmpfile) = tempfile.mkstemp(suffix='GTiff')
> ? ?os.close(fd)
> ? ?o_ds = self.__gtiff_driver.Create(tmpfile,twid,tht,bands=self.__bands)
> ? ?o_ds.WriteRaster(0,0,twid,tht,i_data)
>
> ? ?# Save off using the specified driver
> ? ?filename = '%s.%s' % (basename, self.__fmt)
> ? ?options = []
> ? ?if self.__fmt == 'JPEG':
> ? ? ?options.append('QUALITY=90') # Default of 75 is low quality
> ? ?self.__o_driver.CreateCopy(filename, o_ds, options=options)
>
> ? ?if self.__verbose:
> ? ? ?print filename
>
> ? ?# Delete the tmp file
> ? ?self.__gtiff_driver.Delete(tmpfile)
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From fer.eze.miguez at gmail.com  Thu Dec 31 13:24:36 2009
From: fer.eze.miguez at gmail.com (Fernando Miguez)
Date: Thu Dec 31 13:24:38 2009
Subject: [gdal-dev] Installing gdal
Message-ID: <cadc20490912311024r154886fbgea49f69bd87f6ae6@mail.gmail.com>

Hi all,

I'm trying to install gdal (1.6.1) and get the following error

python setup.py build

[...]

gcc -pthread -fno-strict-aliasing -DNDEBUG -O2 -g -pipe -Wall
-Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector
--param=ssp-buffer-size=4 -m64 -mtune=generic -D_GNU_SOURCE -fPIC -fPIC
-I../../port -I../../gcore -I../../alg -I../../ogr/ -I/usr/include/python2.4
-I. -I/usr/include -c extensions/gdal_wrap.cpp -o
build/temp.linux-x86_64-2.4/extensions/gdal_wrap.o
gcc: error trying to exec 'cc1plus': execvp: No such file or directory
error: command 'gcc' failed with exit status 1

Some background:
uname -a
2.6.18-53.1.14.el5 #1 SMP Wed Mar 5 11:37:38 EST 2008 x86_64 x86_64 x86_64
GNU/Linux

/usr/lib64/libgdal.so.1
/usr/lib64/libgdal.so.1.11.4

gcc --version
gcc (GCC) 4.1.2 20070626 (Red Hat 4.1.2-14)

I edited setup.cfg to this

[egg_info]
tag_build =
tag_date = 0
tag_svn_revision = 0

[build_ext]
gdal_config = /usr/bin/gdal-config

and

[...]$ locate gdal-config
/usr/bin/gdal-config

I'm trying to install locally as I don't have root privileges.

Any ideas or suggestions are welcome,

Thanks,

Fernando
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20091231/268fb3a8/attachment.html
From hobu.inc at gmail.com  Thu Dec 31 13:44:37 2009
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Dec 31 13:48:45 2009
Subject: [gdal-dev] Installing gdal
In-Reply-To: <cadc20490912311024r154886fbgea49f69bd87f6ae6@mail.gmail.com>
References: <cadc20490912311024r154886fbgea49f69bd87f6ae6@mail.gmail.com>
Message-ID: <176B2177-C9E9-4795-A11A-3CAD68159312@gmail.com>


On Dec 31, 2009, at 12:24 PM, Fernando Miguez wrote:

> gcc: error trying to exec 'cc1plus': execvp: No such file or directory
> error: command 'gcc' failed with exit status 1


You have no g++ installed, which you need to build the GDAL Python bindings.

http://ubuntuforums.org/showthread.php?t=345201
From warmerdam at pobox.com  Thu Dec 31 15:41:11 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 31 15:41:18 2009
Subject: [gdal-dev] gdal_translate -unscale option
Message-ID: <4B3D0C67.7060605@pobox.com>

Folks,

I have added the -unscale option to gdal_translate.  Some image formats
compact pixel values by subtracting an offset and rescaling - for instance
to fit floating point values into 16bit pixels.  The scaling and offset
can be carried with the data model, and are accessable via the GetOffset()
and GetScale() methods on the GDALRasterBand.

However, till now there was no explicit way to convert the pixel values
back to their original domain.  The new -unscale value basically
applies the scale and offset as part of the translation and then clears
these metadata in the output image.

This feature will appear in GDAL 1.7.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Dec 31 15:45:01 2009
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Dec 31 15:45:06 2009
Subject: [gdal-dev] IAU 2000 Coordinate System Dictionary
Message-ID: <4B3D0D4D.4040904@pobox.com>

Folks,

I have received a request from Trent Hare to include support for the IAU
(International Astronomical Union) set of planetary coordinate systems with
GDAL.  I have distributed this in the past with FWTools, but had hesitated
to include it in the core GDAL distribution since it amounts to nearly 1MB
of text uncompressed.  The dictionary is at:

   http://home.gdal.org/tmp/IAU2000.wkt

I'm interested in feedback on whether this would be a good idea to include,
or if there are practical other mechanisms to make them available.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Thu Dec 31 15:57:43 2009
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Dec 31 15:57:47 2009
Subject: [gdal-dev] IAU 2000 Coordinate System Dictionary
In-Reply-To: <4B3D0D4D.4040904@pobox.com>
References: <4B3D0D4D.4040904@pobox.com>
Message-ID: <eb502d880912311257t477616ffi188f3052b60270dd@mail.gmail.com>

Frank,

IMHO, it is a hassle when a user finds that GDAL is not working for
something. The bandwidth is well spent.

I noticed powerful media players discarded because they needed extra codecs.

On Thu, Dec 31, 2009 at 8:45 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Folks,
>
> I have received a request from Trent Hare to include support for the IAU
> (International Astronomical Union) set of planetary coordinate systems with
> GDAL. ?I have distributed this in the past with FWTools, but had hesitated
> to include it in the core GDAL distribution since it amounts to nearly 1MB
> of text uncompressed. ?The dictionary is at:
>
> ?http://home.gdal.org/tmp/IAU2000.wkt
>
> I'm interested in feedback on whether this would be a good idea to include,
> or if there are practical other mechanisms to make them available.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev



--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
