From lzzgeo at yahoo.cn  Mon Mar  1 01:37:02 2010
From: lzzgeo at yahoo.cn (=?utf-8?B?5YiY5b+g5b+XICA=?=)
Date: Mon Mar  1 01:43:46 2010
Subject: re [gdal-dev] make install -- copy "shapefil.h" into the include dir
Message-ID: <163141.28607.qm@web15001.mail.cnb.yahoo.com>

I think this is pretty good idea.
Now I have add a function into shapelib files, which can read a geometry from shapefile directly, not through OGRFeature, and I have copilated shapelib into GDAL,? then, in my applications I will include shapefil.h and use that fuction to read a geometry. so it is very fast!






      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/b0f741c5/attachment-0001.html
From jorgearevalo at gis4free.org  Mon Mar  1 05:03:04 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Mon Mar  1 05:03:28 2010
Subject: [gdal-dev] Storing Gdal datasets in Postgis
In-Reply-To: <SNT125-W2860145087AB6BA9830E65C23F0@phx.gbl>
References: <SNT125-W2860145087AB6BA9830E65C23F0@phx.gbl>
Message-ID: <d321138e1003010203l5a3210cdl2607ab21bc6b4a11@mail.gmail.com>

On Fri, Feb 26, 2010 at 2:51 PM, Ricardo Cezar Bonfim Rodrigues <
rikardocezar@msn.com> wrote:

>  Hi,
>
> I'm using Gdal to load dted files and get max elevations of a region, but I
> have constraints concerning speed. Inspite of loading geotifs generated from
> dted has reduced a lot the processing time, its still not enough to the
> constraints I have. I'm loading geotiffs which represents dted L1 files,
> reading its points using rasterIO and verifying the max elevation of a
> rectangle area given ( lat, lon, width).
> I've noticed the more expensive is the data reading, so I'm thinking about
> storing the dted (or geotiff) files in a Postgis. Would it increase the
> search speed?
> Does anyone know the best way to store dted files in a Postgis? I thought
> about storing geotiffs (generated from deted using gdal), but I dont now
> exactly how it would work. I know there are spatial queries in Postgis and I
> think it would be very useful in my case.
>
> I look forwarding to receving any tip of how to do this.
>
> Thanks in Advance,
>
> Ricardo Rodrigues
> Brazil
>
>
Hi Ricardo,

If you're planning to manage raster data in PostGIS, you should know we're
working in a new extension (WKT Raster). Check this:
http://trac.osgeo.org/postgis/wiki/WKTRaster

It's under development yet, just like the GDAL WKT Raster driver:
http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html

Most of the spatial queries involving rasters are under development, I say,
but it may be useful for you in the future... Keep an eye.

Best regards,
Jorge


> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/6f6b1ba3/attachment.html
From rikardocezar at msn.com  Mon Mar  1 07:37:06 2010
From: rikardocezar at msn.com (Ricardo Cezar Bonfim Rodrigues)
Date: Mon Mar  1 07:37:09 2010
Subject: [gdal-dev] Storing Gdal datasets in Postgis
In-Reply-To: <d321138e1003010203l5a3210cdl2607ab21bc6b4a11@mail.gmail.com>
References: <SNT125-W2860145087AB6BA9830E65C23F0@phx.gbl>,
	<d321138e1003010203l5a3210cdl2607ab21bc6b4a11@mail.gmail.com>
Message-ID: <SNT125-W62FE42D93280CDC7F05CDDC23C0@phx.gbl>


Hi Jorge,

I've implemented a customized gdal reader using the method readBlock instead of using RasterIO and now it seems to be much faster and will propably be adequate to my problem.
But thanks by the tips, I'll keep it in mind if I need it.

Ricardo Rodrigues
Brazil

From: jorgearevalo@gis4free.org
Date: Mon, 1 Mar 2010 11:03:04 +0100
Subject: Re: [gdal-dev] Storing Gdal datasets in Postgis
To: rikardocezar@msn.com
CC: gdal-dev@lists.osgeo.org

On Fri, Feb 26, 2010 at 2:51 PM, Ricardo Cezar Bonfim Rodrigues <rikardocezar@msn.com> wrote:







Hi,

I'm using Gdal to load dted files and get max elevations of a region, but I have constraints concerning speed. Inspite of loading geotifs generated from dted has reduced a lot the processing time, its still not enough to the constraints I have. I'm loading geotiffs which represents dted L1 files, reading its points using rasterIO and verifying the max elevation of a rectangle area given ( lat, lon, width).


I've noticed the more expensive is the data reading, so I'm thinking about storing the dted (or geotiff) files in a Postgis. Would it increase the search speed?
Does anyone know the best way to store dted files in a Postgis? I thought about storing geotiffs (generated from deted using gdal), but I dont now exactly how it would work. I know there are spatial queries in Postgis and I think it would be very useful in my case.



I look forwarding to receving any tip of how to do this.

Thanks in Advance,

Ricardo Rodrigues
Brazil
 		 	   		  


Hi Ricardo,
If you're planning to manage raster data in PostGIS, you should know we're working in a new extension (WKT Raster). Check this: http://trac.osgeo.org/postgis/wiki/WKTRaster


It's under development yet, just like the GDAL WKT Raster driver: http://trac.osgeo.org/gdal/wiki/frmts_wtkraster.html


Most of the spatial queries involving rasters are under development, I say, but it may be useful for you in the future... Keep an eye.
Best regards,Jorge 

_______________________________________________

gdal-dev mailing list

gdal-dev@lists.osgeo.org

http://lists.osgeo.org/mailman/listinfo/gdal-dev

 		 	   		  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/8cb94b7f/attachment.html
From discoursemap at live.com  Mon Mar  1 09:21:37 2010
From: discoursemap at live.com (Discourse Maps)
Date: Mon Mar  1 09:22:40 2010
Subject: [gdal-dev] (no subject)
Message-ID: <SNT130-w485EE2F5BD297FA5C38709BC3C0@phx.gbl>


I am simply trying to open a raster image, manipulate in NumPy and then spit
it back out in GDAL.

I am having trouble setting null data...
I tried: ds.GetRasterBand(1).SetNoDataValue( -9999 )
but nothing seems to work.

Any help is appreciated!


Below is my code:


#! /usr/bin/env python 

import os, sys
use_numeric = True

try:
from osgeo import ogr, gdal
from osgeo.gdalconst import *
import numpy
os.chdir(r'L:\users\gv\numPyGDAL\ospy_data4\ospy_data4')
use_numeric = False

except ImportError:
import ogr, gdal
from gdalconst import *
import Numeric
os.chdir(r'L:\users\gv\numPyGDAL\ospy_data4\ospy_data4')


# register all of the drivers
gdal.AllRegister()

# open the image
ds = gdal.Open('sequest', GA_ReadOnly)
if ds is None:
print 'Could not open image'
sys.exit(1)

band = ds.GetRasterBand(1))# 1-based index
# read data and add the value to the string
data = band.ReadAsArray()
print data
dims = data.shape 
nx=dims[1] 
ny=dims[0]
nxarray=numpy.zeros(nx)

dst_format = 'HFA' 
dst_datatype = gdal.GDT_Int16
dst_options = ['COMPRESS=LZW'] 
dst_file='sequest_final.img' 
dst_xsize = nx 
dst_ysize = ny 
dst_nbands = 1 

geoTransform = ds.GetGeoTransform()
proj = ds.GetProjection()

driver = gdal.GetDriverByName( dst_format ) 
dst_ds = driver.Create(dst_file, dst_xsize, dst_ysize, dst_nbands, 
dst_datatype, dst_options)

for j in range(ny):
nxarray = data[j,:]
nxarray.shape = (1,nx)
print nxarray
dst_ds.GetRasterBand(1).WriteArray(nxarray,0,j)
dst_ds.SetGeoTransform(geoTransform)
dst_ds.SetProjection(proj)
dst_ds = None  		 	   		  
_________________________________________________________________
Hotmail: Free, trusted and rich email service.
http://clk.atdmt.com/GBL/go/201469228/direct/01/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/0331db87/attachment.html
From warmerdam at pobox.com  Mon Mar  1 10:10:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar  1 10:10:53 2010
Subject: [gdal-dev] (no subject)
In-Reply-To: <SNT130-w485EE2F5BD297FA5C38709BC3C0@phx.gbl>
References: <SNT130-w485EE2F5BD297FA5C38709BC3C0@phx.gbl>
Message-ID: <4B8BD900.6040506@pobox.com>

Discourse Maps wrote:
> I am simply trying to open a raster image, manipulate in NumPy and then spit
> it back out in GDAL.
> 
> I am having trouble setting null data...
> I tried: ds.GetRasterBand(1).SetNoDataValue( -9999 )
> but nothing seems to work.
...

Dear Discourse Maps,

Presumably you should be setting the nodata value on the
first band of the "dst_ds", not the source dataset.  But
I don't see any SetNoDataValue() call at all in your script.

I would suggest adding it right after the Create() call.

I would also note that the HFA driver does not have a COMPRESS=LZW
creation option, though you can use [ 'COMPRESSED=YES' ] to use
the grid compression scheme supported by the format.

> dst_format = 'HFA'
> dst_datatype = gdal.GDT_Int16
> dst_options = ['COMPRESS=LZW']
> dst_file='sequest_final.img'
> dst_xsize = nx
> dst_ysize = ny
> dst_nbands = 1
> 
> geoTransform = ds.GetGeoTransform()
> proj = ds.GetProjection()
> 
> driver = gdal.GetDriverByName( dst_format )
> dst_ds = driver.Create(dst_file, dst_xsize, dst_ysize, dst_nbands,
> dst_datatype, dst_options)
> 
> for j in range(ny):
> nxarray = data[j,:]
> nxarray.shape = (1,nx)
> print nxarray
> dst_ds.GetRasterBand(1).WriteArray(nxarray,0,j)
> dst_ds.SetGeoTransform(geoTransform)
> dst_ds.SetProjection(proj)
> dst_ds = None

Your email client has reformatted the script so it is hard
to see the indentation.  But I would advise strongly against
doing SetGeoTransform() and SetProjection() many times on the
same dataset.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sjgardner at wisc.edu  Mon Mar  1 10:20:58 2010
From: sjgardner at wisc.edu (Spencer Gardner)
Date: Mon Mar  1 11:21:03 2010
Subject: [gdal-dev] Python Buffer Features
Message-ID: <6f80a9d8dfeee.4b8b86fa@wiscmail.wisc.edu>

I'm writing some code that involves buffering a feature in a point layer and then doing a spatial filter with another set of layers.  I've got everything working just fine but I'm having a hard time determining how the spatial filter works.  Based on the documentation, it looks like all features that intersect the buffer will be included.  Is this true?  Is there any way to include only those features which are completely within the buffer?

On a related note, how do I know what the units of the spatial filter are?  Does it simply use the units of the original shapefile?  Is there any way to use different units?

Thanks,
Spencer Gardner
University of Wisconsin-Madison
Department of Urban and Regional Planning
From warmerdam at pobox.com  Mon Mar  1 11:36:33 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar  1 11:36:33 2010
Subject: [gdal-dev] Python Buffer Features
In-Reply-To: <6f80a9d8dfeee.4b8b86fa@wiscmail.wisc.edu>
References: <6f80a9d8dfeee.4b8b86fa@wiscmail.wisc.edu>
Message-ID: <4B8BED11.4030106@pobox.com>

Spencer Gardner wrote:
> I'm writing some code that involves buffering a feature in a point layer and
> then doing a spatial filter with another set of layers.  I've got everything
> working just fine but I'm having a hard time determining how the spatial
> filter works.  Based on the documentation, it looks like all features that
> intersect the buffer will be included.  Is this true?  Is there any way to
> include only those features which are completely within the buffer?

Spencer,

The actual behavior may depend on whether you have built with GEOS support
or not.  Without it, you are guaranteed to get back all features which
intersect the spatial filter geometry but there may be extras.  In fact,
in this situation the comparison is strictly done as a bounding box to
bounding box comparison.

If GDAL is built with GEOS support, then a final "real" intersect test is
done using GEOS.

Currently there is no way to request the spatial filter to return only
geometries that are entirely within the spatial filter region.  So you
would need to do an extra test on the features you get to determine if
they fall entirely within the filter geometry.  I believe the
OGRGeometry::Within() test is appropriate for this.

> On a related note, how do I know what the units of the spatial filter are?
> Does it simply use the units of the original shapefile?  Is there any way to
> use different units?

The spatial filter is interpreted as being in the same coordinate system
as the layer it is being used with.  If you are working with a shapefile
then this will be the coordinate system of the shapefile.

There is no provision for comparing or filtering with different units
than the underlying layer.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From wbhk at unm.edu  Mon Mar  1 13:12:40 2010
From: wbhk at unm.edu (Bill Hudspeth)
Date: Mon Mar  1 13:44:00 2010
Subject: [gdal-dev] Problems with gdalwarp re-projecting from lat-long to
 Lambert Conformal
Message-ID: <1267467160.17855.14.camel@igor>

Hello,

I am having problems re-projecting an ArcAscii Grid from LatLong/WGS84
to Lambert Conformal. The source grid was derived from a GRASS mapset.


Using r.out.gdal, a GRASS raster was exported to AAIGrid format using:


r.out.gdal input=MODIS_input_raster format=AAIGrid type=UInt16
output=MODIS_output_latlong.asc

The resulting grid has the following projection parameters:

Driver: AAIGrid/Arc/Info ASCII Grid
Size is 5039, 3244
Coordinate System is:
GEOGCS["GCS_WGS_1984",
    DATUM["WGS_1984",
        SPHEROID["wgs84",6378137,298.257223563]],
    PRIMEM["Greenwich",0],
    UNIT["Degree",0.017453292519943295]]
Origin = (-130.004289,47.007502)
Pixel Size = (0.00833565,-0.00833565)
Corner Coordinates:
Upper Left  (-130.0042888,  47.0075018) (130d 0'15.44"W, 47d 0'27.01"N)
Lower Left  (-130.0042888,  19.9666571) (130d 0'15.44"W, 19d57'59.97"N)
Upper Right ( -88.0009546,  47.0075018) ( 88d 0'3.44"W, 47d 0'27.01"N)
Lower Right ( -88.0009546,  19.9666571) ( 88d 0'3.44"W, 19d57'59.97"N)
Center      (-109.0026217,  33.4870795) (109d 0'9.44"W, 33d29'13.49"N)
Band 1 Block=5039x1 Type=Int16, ColorInterp=Undefined
  NoData Value=255

When I try to re-project the exported AAIGrid to another projection, I
use:

gdalwarp -s_srs EPSG:4326 -t_srs '+proj=lcc +lat__1=33n +lat_2=45n
+lon_0=97w' MODIS_output_latlong.asc MODIS_output_lambert.asc

While the resultant projection information looks correct,

Driver: GTiff/GeoTIFF
Size is 5576, 4283
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["unknown",
            SPHEROID["unnamed",6378137,298.2572235629972]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",33],
    PARAMETER["standard_parallel_2",45],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",-97],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (-3540115.789204,5964029.040523)
Pixel Size = (811.62081646,-811.62081646)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-3540115.789, 5964029.041) (142d23'11.19"W, 42d57'29.68"N)
Lower Left  (-3540115.789, 2487857.084) (128d 1'12.16"W, 14d47'2.22"N)
Upper Right (  985481.883, 5964029.041) ( 83d18'11.06"W, 50d22'40.86"N)
Lower Right (  985481.883, 2487857.084) ( 88d 2'31.57"W, 19d32'55.81"N)
Center      (-1277316.953, 4225943.062) (110d59'51.34"W, 34d30'30.05"N)
Band 1 Block=5576x1 Type=Int16, ColorInterp=Gray



The resultant text file has only the following on the top line:

II*

and possibly with lots of binary characters at the bottom.

Thanks much for any help...

Bill



From stephane.benchimol at gmail.com  Mon Mar  1 13:53:33 2010
From: stephane.benchimol at gmail.com (=?ISO-8859-1?Q?St=E9phane?=)
Date: Mon Mar  1 13:53:35 2010
Subject: [gdal-dev] Georeferencing Geostationnary (+proj=geos) projection
Message-ID: <589d51301003011053s173d4affx41652a2a7a88c522@mail.gmail.com>

Hello,

I'm trying to put georeference information to a raster HDF file which
doesn't containt projection nor geo-transformation or any GCP.

HDF is not georeferenced, but contain lot of useful metadata, so I manage to
get the projection, which is Geostationnary projection ( +proj=geos).

However, I don't understand how to compute GeoTransformation or GCP to
geo-reference properly my image:

For "classic flat" geo-referenced image, computation between pixel and
lat/lon can be done by gdal_translate -a_ullr. But it's not possible with
GEOS projection since the image is not "flat" !

What is the correct method to put GeoTransformation or GCP to GeoTIFF ?
Below some metadata of the file that could help.

Thanks,
St?phane

---------------------------------------------------------------------------------------------------------------------------------------------------------------------
  Projection GeoReference=+proj=geos +h=3.58011e+07 +lon_0=73.9617
+ellps=WGS84 +x_0=-5632000 +y_0=5632000
  Nominal Altitude (km)=42179.2
  Nominal Central Point Coordinates (degrees)=0.349082, 73.9617
  Nominal X_resolution (km)=2
  Nominal Y_resolution (km)=2
  Nominal False Northing (km)=5632
  Nominal False Easting (km)=-5632
  Nominal Pixel Stepping Angle (nanoradian)=223457.048379966
  Nominal Line Stepping Angle (nanoradian)=223457.048379966
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/e8a0ddb8/attachment.html
From deadpickle at gmail.com  Mon Mar  1 13:54:36 2010
From: deadpickle at gmail.com (Jamie Lahowetz)
Date: Mon Mar  1 13:54:59 2010
Subject: [gdal-dev] Transform not working
Message-ID: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>

I'm new to GDAL and am usingthe python bindings. I want to transform a newly
created shapefile from WGS84 to a Lambert Conical Conformal so that I can
calculate the length of the contained polylines. The script exits with no
errors but when I look at the shapefile in arcCatalog I see that the
projection is still WGS84. Any ideas? Also, is there a way to calculate the
length directly from GDAL? Thanks.

import os
try:
    from osgeo import ogr
    from osgeo import osr

except:
    import ogr
    import osr

#~ start driver
driver = ogr.GetDriverByName('ESRI Shapefile')
#~ set workspace
ws = 'C:\\Users\\deadpickle\\
Desktop\\case study\\verify\\'
os.chdir(ws)

#~ check if it exists
if os.path.exists('test.shp'):
    driver.DeleteDataSource('test.shp')

#~ create a new shp
ds = driver.CreateDataSource('test.shp')

#~ create spatref for new shp
source = osr.SpatialReference()
source.SetFromUserInput('WGS84')

#~ create a new data layer
layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)

#~ add an id field
fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
layer.CreateField(fieldDefn)

#~ create a geometry
line = ogr.Geometry(ogr.wkbLineString)

#~ get the def of the layer, scheme
featureDefn = layer.GetLayerDefn()

# create a new feature
feature = ogr.Feature(featureDefn)

#~ Read 2006track file
file = open("2006track.csv","r")
file.readline()
lnlist = file.readlines()
for lines in lnlist:
    value = lines.split(",")
    if float(value[1]) == 2:
        print value
        line.AddPoint(float(value[3]),float(value[2]))
        #~ set the field 'ID'
        feature.SetField('id', float(value[1]))

#~ set the geometry for this shp
feature.SetGeometry(line)

# add the feature to the output layer
layer.CreateFeature(feature)

#~ feature = layer.GetFeature(0)
geom = feature.GetGeometryRef()

#~ change projection to lcc
target = osr.SpatialReference()
target.ImportFromProj4('+proj=lcc +lat_1= 33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0')
coordtrans = osr.CoordinateTransformation(source, target)

geom.Transform(coordtrans)

# destroy the geometry and feature and close the data source

ds.Destroy()
line.Destroy()
feature.Destroy()
file.close()
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/900e86e5/attachment.html
From deadpickle at gmail.com  Mon Mar  1 18:24:41 2010
From: deadpickle at gmail.com (deadpickle)
Date: Mon Mar  1 18:58:43 2010
Subject: [gdal-dev] Re: Transform not working
In-Reply-To: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>
References: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>
Message-ID: <899719b6-672c-4206-9ad3-c73744422bd3@b36g2000pri.googlegroups.com>

Not much of a response going on here. In order to change the shapefile
projection from geographic to projected do I need to reopen the file,
get each feature, and transform the points individually? If so what
calls do I need to invoke?

On Mar 1, 12:54?pm, Jamie Lahowetz <deadpic...@gmail.com> wrote:
> I'm new to GDAL and am usingthe python bindings. I want to transform a newly
> created shapefile from WGS84 to a Lambert Conical Conformal so that I can
> calculate the length of the contained polylines. The script exits with no
> errors but when I look at the shapefile in arcCatalog I see that the
> projection is still WGS84. Any ideas? Also, is there a way to calculate the
> length directly from GDAL? Thanks.
>
> import os
> try:
> ? ? from osgeo import ogr
> ? ? from osgeo import osr
>
> except:
> ? ? import ogr
> ? ? import osr
>
> #~ start driver
> driver = ogr.GetDriverByName('ESRI Shapefile')
> #~ set workspace
> ws = 'C:\\Users\\deadpickle\\
> Desktop\\case study\\verify\\'
> os.chdir(ws)
>
> #~ check if it exists
> if os.path.exists('test.shp'):
> ? ? driver.DeleteDataSource('test.shp')
>
> #~ create a new shp
> ds = driver.CreateDataSource('test.shp')
>
> #~ create spatref for new shp
> source = osr.SpatialReference()
> source.SetFromUserInput('WGS84')
>
> #~ create a new data layer
> layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)
>
> #~ add an id field
> fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
> layer.CreateField(fieldDefn)
>
> #~ create a geometry
> line = ogr.Geometry(ogr.wkbLineString)
>
> #~ get the def of the layer, scheme
> featureDefn = layer.GetLayerDefn()
>
> # create a new feature
> feature = ogr.Feature(featureDefn)
>
> #~ Read 2006track file
> file = open("2006track.csv","r")
> file.readline()
> lnlist = file.readlines()
> for lines in lnlist:
> ? ? value = lines.split(",")
> ? ? if float(value[1]) == 2:
> ? ? ? ? print value
> ? ? ? ? line.AddPoint(float(value[3]),float(value[2]))
> ? ? ? ? #~ set the field 'ID'
> ? ? ? ? feature.SetField('id', float(value[1]))
>
> #~ set the geometry for this shp
> feature.SetGeometry(line)
>
> # add the feature to the output layer
> layer.CreateFeature(feature)
>
> #~ feature = layer.GetFeature(0)
> geom = feature.GetGeometryRef()
>
> #~ change projection to lcc
> target = osr.SpatialReference()
> target.ImportFromProj4('+proj=lcc +lat_1= 33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0')
> coordtrans = osr.CoordinateTransformation(source, target)
>
> geom.Transform(coordtrans)
>
> # destroy the geometry and feature and close the data source
>
> ds.Destroy()
> line.Destroy()
> feature.Destroy()
> file.close()
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From garrard.chris+gis at gmail.com  Mon Mar  1 19:49:27 2010
From: garrard.chris+gis at gmail.com (Chris Garrard)
Date: Mon Mar  1 19:56:29 2010
Subject: [gdal-dev] Re: Transform not working
In-Reply-To: <899719b6-672c-4206-9ad3-c73744422bd3@b36g2000pri.googlegroups.com>
References: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>
	<899719b6-672c-4206-9ad3-c73744422bd3@b36g2000pri.googlegroups.com>
Message-ID: <92022f531003011649l45085f2qf38c9624748565a3@mail.gmail.com>

Jamie, Try transforming the line geometry before adding it to the feature.
That should do it.

chris

On Mon, Mar 1, 2010 at 4:24 PM, deadpickle <deadpickle@gmail.com> wrote:

> Not much of a response going on here. In order to change the shapefile
> projection from geographic to projected do I need to reopen the file,
> get each feature, and transform the points individually? If so what
> calls do I need to invoke?
>
> On Mar 1, 12:54 pm, Jamie Lahowetz <deadpic...@gmail.com> wrote:
> > I'm new to GDAL and am usingthe python bindings. I want to transform a
> newly
> > created shapefile from WGS84 to a Lambert Conical Conformal so that I can
> > calculate the length of the contained polylines. The script exits with no
> > errors but when I look at the shapefile in arcCatalog I see that the
> > projection is still WGS84. Any ideas? Also, is there a way to calculate
> the
> > length directly from GDAL? Thanks.
> >
> > import os
> > try:
> >     from osgeo import ogr
> >     from osgeo import osr
> >
> > except:
> >     import ogr
> >     import osr
> >
> > #~ start driver
> > driver = ogr.GetDriverByName('ESRI Shapefile')
> > #~ set workspace
> > ws = 'C:\\Users\\deadpickle\\
> > Desktop\\case study\\verify\\'
> > os.chdir(ws)
> >
> > #~ check if it exists
> > if os.path.exists('test.shp'):
> >     driver.DeleteDataSource('test.shp')
> >
> > #~ create a new shp
> > ds = driver.CreateDataSource('test.shp')
> >
> > #~ create spatref for new shp
> > source = osr.SpatialReference()
> > source.SetFromUserInput('WGS84')
> >
> > #~ create a new data layer
> > layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)
> >
> > #~ add an id field
> > fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
> > layer.CreateField(fieldDefn)
> >
> > #~ create a geometry
> > line = ogr.Geometry(ogr.wkbLineString)
> >
> > #~ get the def of the layer, scheme
> > featureDefn = layer.GetLayerDefn()
> >
> > # create a new feature
> > feature = ogr.Feature(featureDefn)
> >
> > #~ Read 2006track file
> > file = open("2006track.csv","r")
> > file.readline()
> > lnlist = file.readlines()
> > for lines in lnlist:
> >     value = lines.split(",")
> >     if float(value[1]) == 2:
> >         print value
> >         line.AddPoint(float(value[3]),float(value[2]))
> >         #~ set the field 'ID'
> >         feature.SetField('id', float(value[1]))
> >
> > #~ set the geometry for this shp
> > feature.SetGeometry(line)
> >
> > # add the feature to the output layer
> > layer.CreateFeature(feature)
> >
> > #~ feature = layer.GetFeature(0)
> > geom = feature.GetGeometryRef()
> >
> > #~ change projection to lcc
> > target = osr.SpatialReference()
> > target.ImportFromProj4('+proj=lcc +lat_1= 33.000000 +lat_2=45.000000
> > +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0')
> > coordtrans = osr.CoordinateTransformation(source, target)
> >
> > geom.Transform(coordtrans)
> >
> > # destroy the geometry and feature and close the data source
> >
> > ds.Destroy()
> > line.Destroy()
> > feature.Destroy()
> > file.close()
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/458f897d/attachment-0001.html
From deadpickle at gmail.com  Mon Mar  1 20:05:03 2010
From: deadpickle at gmail.com (Jamie Lahowetz)
Date: Mon Mar  1 20:05:26 2010
Subject: [gdal-dev] Re: Transform not working
In-Reply-To: <92022f531003011649l45085f2qf38c9624748565a3@mail.gmail.com>
References: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com> 
	<899719b6-672c-4206-9ad3-c73744422bd3@b36g2000pri.googlegroups.com> 
	<92022f531003011649l45085f2qf38c9624748565a3@mail.gmail.com>
Message-ID: <e7cd032f1003011705web0a667u7eb1aed5d7a351e8@mail.gmail.com>

Thanks for the response. I'm sorry I'm really new to this and am not sure
where to transform the line geometry, I know it should be before
layer.CreateFeature(feature) but after I add the points to the geometry. Is
it before or after feature.SetGeometry(line)? And is the right way to call
the transform
target = osr.SpatialReference()
target.ImportFromProj4('+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83')
coordtrans = osr.CoordinateTransformation(source, target)
line.Transform(coordtrans)?



import os
try:
    from osgeo import ogr
    from osgeo import osr

except:
    import ogr
    import osr

#~ start driver
driver = ogr.GetDriverByName('ESRI Shapefile')
#~ set workspace
ws = 'C:\\Users\\deadpickle\\Desktop\\case study\\verify\\'
os.chdir(ws)

#~ check if it exists
if os.path.exists('test.shp'):
    driver.DeleteDataSource('test.shp')

#~ create a new shp
ds = driver.CreateDataSource('test.shp')

#~ create spatref for new shp
source = osr.SpatialReference()
source.SetFromUserInput('WGS84')
#~ source.SetFromUserInput('+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83')
#~ create a new data layer
layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)

#~ add an id field
fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
layer.CreateField(fieldDefn)

#~ create a geometry
line = ogr.Geometry(ogr.wkbLineString)

#~ get the def of the layer, scheme
featureDefn = layer.GetLayerDefn()

# create a new feature
feature = ogr.Feature(featureDefn)

#~ Read 2006track file
file = open("2006track.csv","r")
file.readline()
lnlist = file.readlines()
for lines in lnlist:
    value = lines.split(",")
    if float(value[1]) == 2:
        print value
        line.AddPoint(float(value[3]),float(value[2]))
        #~ set the field 'ID'
        feature.SetField('id', float(value[1]))

#~ feature = layer.GetFeature(0)
#~ geom = feature.GetGeometryRef()

#~ change projection to lcc
target = osr.SpatialReference()
target.ImportFromProj4('+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83')
coordtrans = osr.CoordinateTransformation(source, target)
line.Transform(coordtrans)

#~ set the geometry for this shp
feature.SetGeometry(line)

# add the feature to the output layer
layer.CreateFeature(feature)

# destroy the geometry and feature and close the data source
ds.Destroy()
line.Destroy()
feature.Destroy()
file.close()




On Mon, Mar 1, 2010 at 6:49 PM, Chris Garrard
<garrard.chris+gis@gmail.com<garrard.chris%2Bgis@gmail.com>
> wrote:

> Jamie, Try transforming the line geometry before adding it to the feature.
> That should do it.
>
> chris
>
>
> On Mon, Mar 1, 2010 at 4:24 PM, deadpickle <deadpickle@gmail.com> wrote:
>
>> Not much of a response going on here. In order to change the shapefile
>> projection from geographic to projected do I need to reopen the file,
>> get each feature, and transform the points individually? If so what
>> calls do I need to invoke?
>>
>> On Mar 1, 12:54 pm, Jamie Lahowetz <deadpic...@gmail.com> wrote:
>> > I'm new to GDAL and am usingthe python bindings. I want to transform a
>> newly
>> > created shapefile from WGS84 to a Lambert Conical Conformal so that I
>> can
>> > calculate the length of the contained polylines. The script exits with
>> no
>> > errors but when I look at the shapefile in arcCatalog I see that the
>> > projection is still WGS84. Any ideas? Also, is there a way to calculate
>> the
>> > length directly from GDAL? Thanks.
>> >
>> > import os
>> > try:
>> >     from osgeo import ogr
>> >     from osgeo import osr
>> >
>> > except:
>> >     import ogr
>> >     import osr
>> >
>> > #~ start driver
>> > driver = ogr.GetDriverByName('ESRI Shapefile')
>> > #~ set workspace
>> > ws = 'C:\\Users\\deadpickle\\
>> > Desktop\\case study\\verify\\'
>> > os.chdir(ws)
>> >
>> > #~ check if it exists
>> > if os.path.exists('test.shp'):
>> >     driver.DeleteDataSource('test.shp')
>> >
>> > #~ create a new shp
>> > ds = driver.CreateDataSource('test.shp')
>> >
>> > #~ create spatref for new shp
>> > source = osr.SpatialReference()
>> > source.SetFromUserInput('WGS84')
>> >
>> > #~ create a new data layer
>> > layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)
>> >
>> > #~ add an id field
>> > fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
>> > layer.CreateField(fieldDefn)
>> >
>> > #~ create a geometry
>> > line = ogr.Geometry(ogr.wkbLineString)
>> >
>> > #~ get the def of the layer, scheme
>> > featureDefn = layer.GetLayerDefn()
>> >
>> > # create a new feature
>> > feature = ogr.Feature(featureDefn)
>> >
>> > #~ Read 2006track file
>> > file = open("2006track.csv","r")
>> > file.readline()
>> > lnlist = file.readlines()
>> > for lines in lnlist:
>> >     value = lines.split(",")
>> >     if float(value[1]) == 2:
>> >         print value
>> >         line.AddPoint(float(value[3]),float(value[2]))
>> >         #~ set the field 'ID'
>> >         feature.SetField('id', float(value[1]))
>> >
>> > #~ set the geometry for this shp
>> > feature.SetGeometry(line)
>> >
>> > # add the feature to the output layer
>> > layer.CreateFeature(feature)
>> >
>> > #~ feature = layer.GetFeature(0)
>> > geom = feature.GetGeometryRef()
>> >
>> > #~ change projection to lcc
>> > target = osr.SpatialReference()
>> > target.ImportFromProj4('+proj=lcc +lat_1= 33.000000 +lat_2=45.000000
>> > +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0')
>> > coordtrans = osr.CoordinateTransformation(source, target)
>> >
>> > geom.Transform(coordtrans)
>> >
>> > # destroy the geometry and feature and close the data source
>> >
>> > ds.Destroy()
>> > line.Destroy()
>> > feature.Destroy()
>> > file.close()
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-...@lists.osgeo.orghttp://
>> lists.osgeo.org/mailman/listinfo/gdal-dev
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Jamie Ryan Lahowetz
University of Nebraska - Lincoln
Graduate Student - Geosciences
402.304.0766
jlahowetz@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100301/badb0244/attachment.html
From scottd777 at yahoo.com  Tue Mar  2 00:02:26 2010
From: scottd777 at yahoo.com (scottd777)
Date: Tue Mar  2 00:02:28 2010
Subject: [gdal-dev] GDAL for BNG to Lat/Long, WGS84
In-Reply-To: <1267409428843-4652000.post@n2.nabble.com>
References: <1267409428843-4652000.post@n2.nabble.com>
Message-ID: <1267506146698-4659130.post@n2.nabble.com>


Please?  Anyone?  I'm sure the response will be really quick...
-- 
View this message in context: http://n2.nabble.com/gdal-dev-GDAL-for-BNG-to-Lat-Long-WGS84-tp4652000p4659130.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Mar  2 00:52:07 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar  2 00:52:00 2010
Subject: [gdal-dev] GDAL for BNG to Lat/Long, WGS84
In-Reply-To: <1267409428843-4652000.post@n2.nabble.com>
References: <1267409428843-4652000.post@n2.nabble.com>
Message-ID: <4B8CA787.3020803@pobox.com>

scottd777 wrote:
> Hi, and thank heaven for GDAL!   
> 
> I was so happy to find this tool, but I am having some trouble figuring out
> the exact command I need for an image warping application.  If there is
> someone who doesn't mind a newbie type question, I could really use the
> help! 
> 
> Essentially, I have imagery which is referenced with British National Grid. 
> I am tyring to convert / warp this so that it can be used within Google
> Earth.  I have reference points for the upper left and lower right of the
> image in Easting and Northing, and transformed those so that I got lat /
> long coordinates which line up very well within Google Earth, however it
> appears that the projection is off.   
> 
> I am hoping to use gdalwarp to convert the TIF file (referenced as
> mentioned), but I had some questions: 
> - For the world file that I create for gdalwarp, should I include the
> Easting / Northing, or does this need to be lat / long? 

Scott,

If the file is in the british national grid then the origin and pixel
size should be in british national grid meters.

> - Can I just go straight to gdalwarp, or do I need to do some other
> translation first? 

If you have a TIFF with a world file you should be able to just proceed
directly with the warp.

> - The command I am trying to use looks like this: 
> gdalwarp -s_srs "proj=utm +zone=33v +datum=OSGB36" -t_srs "proj=latlong
> +datum=WGS84" filein.tif out.tif 
 >
> Is this the correct command to get from a BNG source ortho image to what
> would overlay correctly in something like Google Earth? 

I'm not google earth guru, but I had assumed that it expected imagery in
the "google mercator" projection, not in geographic lat/long as you have
targetted.  I would instead use a command like:

gdalwarp filein.tif out.tif -s_srs EPSG:27700  \
-t_srs "+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 
+k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"

I don't believe british national grid is the same as UTM 33, and I don't
believe that a "v" in the zone indicator will mean anything to PROJ.4.
EPSG:27700 is the british national grid.

I have provided the full definition of the google mercator projection
though shorter forms like EPSG:900913 or EPSG:3857 might work depending
on the version of GDAL and supporting files you have.

scottd777 wrote:
 > Please?  Anyone?  I'm sure the response will be really quick...

Not such an easy answer, and I'm not sure it will be everything you
need.  The problem with the popularity of Google Earth is that it
has introduced a flood of new people with little GIS background all
asking the same questions.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Mar  2 01:02:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar  2 01:02:39 2010
Subject: [gdal-dev] Re: Transform not working
In-Reply-To: <899719b6-672c-4206-9ad3-c73744422bd3@b36g2000pri.googlegroups.com>
References: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>
	<899719b6-672c-4206-9ad3-c73744422bd3@b36g2000pri.googlegroups.com>
Message-ID: <4B8CAA06.9020509@pobox.com>

deadpickle wrote:
> Not much of a response going on here. In order to change the shapefile
> projection from geographic to projected do I need to reopen the file,
> get each feature, and transform the points individually? If so what
> calls do I need to invoke?
> 
> On Mar 1, 12:54 pm, Jamie Lahowetz <deadpic...@gmail.com> wrote:
>> I'm new to GDAL and am usingthe python bindings. I want to transform a newly
>> created shapefile from WGS84 to a Lambert Conical Conformal so that I can
>> calculate the length of the contained polylines. The script exits with no
>> errors but when I look at the shapefile in arcCatalog I see that the
>> projection is still WGS84. Any ideas? Also, is there a way to calculate the
>> length directly from GDAL? Thanks.

Jamie,

My suggestion in the following script would be to create the file with
the "target" srs instead of WGS84, and to transform the geometry
before even assigning it to the feature that will be written.

A few notes:
  * There is no way with OGR of changing the coordinate system of
    an existing layer.  The only point at which it can be set is
    layer creation time.
  * The CreateFeature() method on the layer creates the feature in
    the datastore (ie. shapefile) but there is no meaningful
    connection maintained between the ogr.Feature object and the
    feature in the file after this.  Alterations to the feature
    or it's geometry will have no effect on the file without doing
    another layer.SetFeature() call.

>> import os
>> try:
>>     from osgeo import ogr
>>     from osgeo import osr
>>
>> except:
>>     import ogr
>>     import osr
>>
>> #~ start driver
>> driver = ogr.GetDriverByName('ESRI Shapefile')
>> #~ set workspace
>> ws = 'C:\\Users\\deadpickle\\
>> Desktop\\case study\\verify\\'
>> os.chdir(ws)
>>
>> #~ check if it exists
>> if os.path.exists('test.shp'):
>>     driver.DeleteDataSource('test.shp')
>>
>> #~ create a new shp
>> ds = driver.CreateDataSource('test.shp')
>>
>> #~ create spatref for new shp
>> source = osr.SpatialReference()
>> source.SetFromUserInput('WGS84')
>>
>> #~ create a new data layer
>> layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)
>>
>> #~ add an id field
>> fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
>> layer.CreateField(fieldDefn)
>>
>> #~ create a geometry
>> line = ogr.Geometry(ogr.wkbLineString)
>>
>> #~ get the def of the layer, scheme
>> featureDefn = layer.GetLayerDefn()
>>
>> # create a new feature
>> feature = ogr.Feature(featureDefn)
>>
>> #~ Read 2006track file
>> file = open("2006track.csv","r")
>> file.readline()
>> lnlist = file.readlines()
>> for lines in lnlist:
>>     value = lines.split(",")
>>     if float(value[1]) == 2:
>>         print value
>>         line.AddPoint(float(value[3]),float(value[2]))
>>         #~ set the field 'ID'
>>         feature.SetField('id', float(value[1]))
>>
>> #~ set the geometry for this shp
>> feature.SetGeometry(line)
>>
>> # add the feature to the output layer
>> layer.CreateFeature(feature)
>>
>> #~ feature = layer.GetFeature(0)
>> geom = feature.GetGeometryRef()
>>
>> #~ change projection to lcc
>> target = osr.SpatialReference()
>> target.ImportFromProj4('+proj=lcc +lat_1= 33.000000 +lat_2=45.000000
>> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0')
>> coordtrans = osr.CoordinateTransformation(source, target)
>>
>> geom.Transform(coordtrans)
>>
>> # destroy the geometry and feature and close the data source
>>
>> ds.Destroy()
>> line.Destroy()
>> feature.Destroy()
>> file.close()
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From deadpickle at gmail.com  Tue Mar  2 01:45:27 2010
From: deadpickle at gmail.com (Jamie Lahowetz)
Date: Tue Mar  2 01:45:51 2010
Subject: [gdal-dev] Re: Transform not working
In-Reply-To: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>
References: <e7cd032f1003011054s3de2ca35h237177802ed16faa@mail.gmail.com>
Message-ID: <e7cd032f1003012245m2dc227et610e54d9a2c94638@mail.gmail.com>

I figured it out... with all of your help. I had the coordtrans =
osr.CoordinateTransformation switched. I wanted to input lat/lon (WGS84) and
transform it to lcc (source) and I also had to set the source prj to lcc. I
think you all said this stuff already, just took me a little while. Thanks
for all the help.


import os
try:
    from osgeo import ogr
    from osgeo import osr

except:
    import ogr
    import osr

#~ start driver
driver = ogr.GetDriverByName('ESRI Shapefile')
#~ set workspace
ws = 'C:\\Users\\deadpickle\\Desktop\\case study\\verify\\'
os.chdir(ws)

#~ check if it exists
if os.path.exists('test.shp'):
    driver.DeleteDataSource('test.shp')

#~ create a new shp
ds = driver.CreateDataSource('test.shp')

#~ create spatref for new shp
source = osr.SpatialReference()
target = osr.SpatialReference()
source.SetFromUserInput('+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83')
target.SetFromUserInput('WGS84')
coordtrans = osr.CoordinateTransformation(target, source)

#~ create a new data layer
layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)

#~ add an id field
fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
layer.CreateField(fieldDefn)

#~ create a geometry
line = ogr.Geometry(ogr.wkbLineString)

#~ get the def of the layer, scheme
featureDefn = layer.GetLayerDefn()

# create a new feature
feature = ogr.Feature(featureDefn)

#~ Read 2006track file
file = open("2006track.csv","r")
file.readline()
lnlist = file.readlines()
for lines in lnlist:
    value = lines.split(",")
    if float(value[1]) == 2:
        print float(value[3]),float(value[2])
        line.AddPoint(float(value[3]),float(value[2]))
        #~ set the field 'ID'
        feature.SetField('id', float(value[1]))

#~ trans from lat/lon input to lcc
line.Transform(coordtrans)

#~ set the geometry for this shp
feature.SetGeometry(line)

# add the feature to the output layer
layer.CreateFeature(feature)

# destroy the geometry and feature and close the data source
ds.Destroy()
line.Destroy()
feature.Destroy()
file.close()


On Mon, Mar 1, 2010 at 12:54 PM, Jamie Lahowetz <deadpickle@gmail.com>wrote:

> I'm new to GDAL and am usingthe python bindings. I want to transform a
> newly created shapefile from WGS84 to a Lambert Conical Conformal so that I
> can calculate the length of the contained polylines. The script exits with
> no errors but when I look at the shapefile in arcCatalog I see that the
> projection is still WGS84. Any ideas? Also, is there a way to calculate the
> length directly from GDAL? Thanks.
>
> import os
> try:
>     from osgeo import ogr
>     from osgeo import osr
>
> except:
>     import ogr
>     import osr
>
> #~ start driver
> driver = ogr.GetDriverByName('ESRI Shapefile')
> #~ set workspace
> ws = 'C:\\Users\\deadpickle\\
> Desktop\\case study\\verify\\'
> os.chdir(ws)
>
> #~ check if it exists
> if os.path.exists('test.shp'):
>     driver.DeleteDataSource('test.shp')
>
> #~ create a new shp
> ds = driver.CreateDataSource('test.shp')
>
> #~ create spatref for new shp
> source = osr.SpatialReference()
> source.SetFromUserInput('WGS84')
>
> #~ create a new data layer
> layer = ds.CreateLayer('test',geom_type=ogr.wkbLineString,srs=source)
>
> #~ add an id field
> fieldDefn = ogr.FieldDefn('id', ogr.OFTInteger)
> layer.CreateField(fieldDefn)
>
> #~ create a geometry
> line = ogr.Geometry(ogr.wkbLineString)
>
> #~ get the def of the layer, scheme
> featureDefn = layer.GetLayerDefn()
>
> # create a new feature
> feature = ogr.Feature(featureDefn)
>
> #~ Read 2006track file
> file = open("2006track.csv","r")
> file.readline()
> lnlist = file.readlines()
> for lines in lnlist:
>     value = lines.split(",")
>     if float(value[1]) == 2:
>         print value
>         line.AddPoint(float(value[3]),float(value[2]))
>         #~ set the field 'ID'
>         feature.SetField('id', float(value[1]))
>
> #~ set the geometry for this shp
> feature.SetGeometry(line)
>
> # add the feature to the output layer
> layer.CreateFeature(feature)
>
> #~ feature = layer.GetFeature(0)
> geom = feature.GetGeometryRef()
>
> #~ change projection to lcc
> target = osr.SpatialReference()
> target.ImportFromProj4('+proj=lcc +lat_1= 33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0')
> coordtrans = osr.CoordinateTransformation(source, target)
>
> geom.Transform(coordtrans)
>
> # destroy the geometry and feature and close the data source
>
> ds.Destroy()
> line.Destroy()
> feature.Destroy()
> file.close()
>



-- 
Jamie Ryan Lahowetz
University of Nebraska - Lincoln
Graduate Student - Geosciences
402.304.0766
jlahowetz@gmail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100302/2d3e9b7e/attachment.html
From neteler at osgeo.org  Tue Mar  2 02:50:38 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Tue Mar  2 02:51:01 2010
Subject: [gdal-dev] Problems with gdalwarp re-projecting from lat-long to 
	Lambert Conformal
In-Reply-To: <1267467160.17855.14.camel@igor>
References: <1267467160.17855.14.camel@igor>
Message-ID: <86782b611003012350u5b71ed62i859d83fe83808161@mail.gmail.com>

On Mon, Mar 1, 2010 at 7:12 PM, Bill Hudspeth <wbhk@unm.edu> wrote:
...
> When I try to re-project the exported AAIGrid to another projection, I
> use:
>
> gdalwarp -s_srs EPSG:4326 -t_srs '+proj=lcc +lat__1=33n +lat_2=45n
> +lon_0=97w' MODIS_output_latlong.asc MODIS_output_lambert.asc

Note that without -of format] you generate a GeoTIFF file...

> While the resultant projection information looks correct,
>
> Driver: GTiff/GeoTIFF
   ^^^^^^^^^^^^^^^^^^^^^^^

> The resultant text file has only the following on the top line:

... it is binary, not a text file. check

 gdalwarp --formats

for the available formats.

Markus
From bjlin.sw at gmail.com  Tue Mar  2 03:51:31 2010
From: bjlin.sw at gmail.com (=?gb2312?B?S2V2aW4gTGlu?=)
Date: Tue Mar  2 03:58:36 2010
Subject: [gdal-dev] ask for help about the reading of the hdf4 file of the
	modis
Message-ID: <4b8cd1a2.0603c00a.214e.ffff8162@mx.google.com>


 hi,all

I have a problem when I use the gdal to open the modis Hdf4 file.
when I get the latitude and the Longitude, I do not know how to read it.

is it use GetMetadata( "SUBDATASETS" )?
but the SUBDATASETS, don't include the geolocation information.

in the hdf4 file, ther is a geolocation fields, data fields and swatch attributes.
when I read the data in the data fields, I use GetMetadata( "SUBDATASETS" ).
but I do not know how to read the data in the geolocation fields.

can anyone help me?

best regards.





Kevin Lin 
Bjlin.sw@gmail.com 
2010-03-02 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100302/e2a78d47/attachment.html
From chaitanya.ch at gmail.com  Tue Mar  2 04:43:19 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Mar  2 04:43:27 2010
Subject: [gdal-dev] ask for help about the reading of the hdf4 file of the
	modis
In-Reply-To: <4b8cd1a2.0603c00a.214e.ffff8162@mx.google.com>
References: <4b8cd1a2.0603c00a.214e.ffff8162@mx.google.com>
Message-ID: <eb502d881003020143i2a0c9bdds78b4c9754acb4f89@mail.gmail.com>

Kevin,

Try the GDALDataset::GetGeoTransform() and the
GDALDataset::GetProjectionRef() functions on the subdataset.
Here is some sample code:
http://trac.osgeo.org/gdal/browser/trunk/gdal/apps/gdal_translate.cpp#L435

2010/3/2 Kevin Lin <bjlin.sw@gmail.com>

>
>  hi,all
>
> I have a problem when I use the gdal to open the modis Hdf4 file.
> when I get the latitude and the Longitude, I do not know how to read it.
>
> is it use GetMetadata( "SUBDATASETS" )?
> but the SUBDATASETS, don't include the geolocation information.
>
> in the hdf4 file, ther is a geolocation fields, data fields and swatch
> attributes.
> when I read the data in the data fields, I use GetMetadata( "SUBDATASETS"
> ).
> but I do not know how to read the data in the geolocation fields.
>
> can anyone help me?
>
> best regards.
>
>
>
>
>
> Kevin Lin
> Bjlin.sw@gmail.com
> 2010-03-02
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100302/db378ddb/attachment.html
From sherstad at gmail.com  Tue Mar  2 04:44:22 2010
From: sherstad at gmail.com (Sigbjorn Herstad)
Date: Tue Mar  2 04:44:26 2010
Subject: [gdal-dev] Copy / manipulate TIFF-header
Message-ID: <6ba94d771003020144o78dd6336l7fe88296c8446883@mail.gmail.com>

Hi,

This is my first post here, but have followed the list for several
years. I am trying to find a good way to edit a GeoTIFF-header. I have
looked at the Python-script and listgeo and geotifcp mentioned here:
http://lists.osgeo.org/pipermail/gdal-dev/2008-April/016752.html

Using the Python-script updates the header of a given GeoTIFF- however
not with all parameters I need. Using the listgeo and geotifcp a new
file is written so update is not possible (like in the Python-script)
- ie reprocessing all files are necessary. I am thinking about
creating a Python-script which will update / delete / add certain
attributes from a GeoTIFF-file, but I am not sure if this is possible?
I do NOT want to create a new file with the changed GeoTIFF-header,
but update the already existing one.

Here are some of the TAGS I wish to DELETE or CHANGE:
GTModelTypeGeoKey (Short,1):
GTRasterTypeGeoKey (Short,1):
GTCitationGeoKey (Ascii,8):
GeogCitationGeoKey (Ascii,7):
GeogAngularUnitsGeoKey (Short,1):
ProjectedCSTypeGeoKey (Short,1):
ProjLinearUnitsGeoKey (Short,1):
GCS:
Datum:
Ellipsoid:

Greetings
SigTill
From michael.smith at usace.army.mil  Tue Mar  2 06:45:24 2010
From: michael.smith at usace.army.mil (Smith, Michael ERDC-USACE-NH)
Date: Tue Mar  2 06:45:28 2010
Subject: [gdal-dev] GDAL for BNG to Lat/Long, WGS84
In-Reply-To: <4B8CA787.3020803@pobox.com>
Message-ID: <C7B26484.2ECC5%michael.smith@usace.army.mil>

Frank and Scott,

For Google Earth output (rather than Google Maps which would be in "google
mercator") the output projection should be EPSG:4326, or WGS1984 Latitude
Longitude.

Mike


-- 
Michael Smith
RSGIS Center
US Army Corps of Engineers




On 3/2/10 12:52 AM, "Frank Warmerdam" <warmerdam@pobox.com> wrote:

> scottd777 wrote:
>> Hi, and thank heaven for GDAL!
>> 
>> I was so happy to find this tool, but I am having some trouble figuring out
>> the exact command I need for an image warping application.  If there is
>> someone who doesn't mind a newbie type question, I could really use the
>> help! 
>> 
>> Essentially, I have imagery which is referenced with British National Grid.
>> I am tyring to convert / warp this so that it can be used within Google
>> Earth.  I have reference points for the upper left and lower right of the
>> image in Easting and Northing, and transformed those so that I got lat /
>> long coordinates which line up very well within Google Earth, however it
>> appears that the projection is off.
>> 
>> I am hoping to use gdalwarp to convert the TIF file (referenced as
>> mentioned), but I had some questions:
>> - For the world file that I create for gdalwarp, should I include the
>> Easting / Northing, or does this need to be lat / long?
> 
> Scott,
> 
> If the file is in the british national grid then the origin and pixel
> size should be in british national grid meters.
> 
>> - Can I just go straight to gdalwarp, or do I need to do some other
>> translation first?
> 
> If you have a TIFF with a world file you should be able to just proceed
> directly with the warp.
> 
>> - The command I am trying to use looks like this:
>> gdalwarp -s_srs "proj=utm +zone=33v +datum=OSGB36" -t_srs "proj=latlong
>> +datum=WGS84" filein.tif out.tif
>> 
>> Is this the correct command to get from a BNG source ortho image to what
>> would overlay correctly in something like Google Earth?
> 
> I'm not google earth guru, but I had assumed that it expected imagery in
> the "google mercator" projection, not in geographic lat/long as you have
> targetted.  I would instead use a command like:
> 
> gdalwarp filein.tif out.tif -s_srs EPSG:27700  \
> -t_srs "+proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0
> +y_0=0 
> +k=1.0 +units=m +nadgrids=@null +wktext  +no_defs"
> 
> I don't believe british national grid is the same as UTM 33, and I don't
> believe that a "v" in the zone indicator will mean anything to PROJ.4.
> EPSG:27700 is the british national grid.
> 
> I have provided the full definition of the google mercator projection
> though shorter forms like EPSG:900913 or EPSG:3857 might work depending
> on the version of GDAL and supporting files you have.
> 
> scottd777 wrote:
>> Please?  Anyone?  I'm sure the response will be really quick...
> 
> Not such an easy answer, and I'm not sure it will be everything you
> need.  The problem with the popularity of Google Earth is that it
> has introduced a flood of new people with little GIS background all
> asking the same questions.
> 
> Best regards,

From abausch at nova.whrc.org  Tue Mar  2 08:42:16 2010
From: abausch at nova.whrc.org (Adam Bausch)
Date: Tue Mar  2 08:42:23 2010
Subject: [gdal-dev] gdal_translate and ArcGIS
Message-ID: <4B8D15B8.10309@nova.whrc.org>

I am attempting to take a series of rasters in 32 bit GTiff and use 
gdal_translate to convert then to a 16 bit AAIGRID, however I have been 
running into several difficulties.
Although gdal_translate appears to have the functionality to change 
output data type AND output format in the same line the resultant output 
appears to change only the output format.
Doing this in separate comments:

gdal_translate -ot Int16 -of GTiff input.tif output1.tif
gdal_translate -of of AAIGrid output1.tif tested.asc

Works but using the .asc grid in ArcMap is incredibly slow.

If I back up one step:
If I run the ArcGIS 'copy raster' tool after completing GDAL_translate 
to the Int16 GTiff, the output is an ESRI grid, however, the values do 
not match up.
I am pretty sure this is a problem of the upper left corner to set the 
grid extent in either software being different, but how or can I correct 
for this in gdal before moving over to ArcGIS?  And is there any way to 
easily complete this in any of the gdal utilities on a series of rasters?

(I think gdal takes the upper left corner of the top left pixel, 
however, ArcGIS takes the center location of the uppler left pixel?)

Thank you in advance.

Adam Bausch

From kevin.chiou at progeny.net  Tue Mar  2 10:17:51 2010
From: kevin.chiou at progeny.net (Chiou, Kevin)
Date: Tue Mar  2 10:33:35 2010
Subject: [gdal-dev] Code submission for NITF driver
Message-ID: <3F87AA6367687C43A854B8E7073CDF8C0BD9C2@es-108a.paxriver.progeny.net>

Hi,
  I just wonder what the process is for submitting code to GDAL.  
  I was working on a NITF editing tool using GDAL driver.  I made some
modification to the NITF driver including adding a CGM writing feature
and fixed some data validation bugs.  I submitted a ticket a couple
weeks ago, but nothing happened since then.  Is there something else I
should do or are there someone I should get in touch with?

Ticket opened: http://trac.osgeo.org/gdal/ticket/3376

Thank you,
  Kevin
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100302/b8e93575/attachment.html
From wbhk at unm.edu  Tue Mar  2 10:57:10 2010
From: wbhk at unm.edu (Bill Hudspeth)
Date: Tue Mar  2 10:58:41 2010
Subject: [gdal-dev] Problems with gdalwarp re-projecting from lat-long
	to  Lambert Conformal
In-Reply-To: <86782b611003012350u5b71ed62i859d83fe83808161@mail.gmail.com>
References: <1267467160.17855.14.camel@igor>
	<86782b611003012350u5b71ed62i859d83fe83808161@mail.gmail.com>
Message-ID: <1267545430.22993.9.camel@igor>

Hello,

Thanks for responding. When I use gdalinfo --formats, I see that AAIGrid
is included in the list of acceptable formats. However, when I use

/usr/local/gdal/bin/gdalwarp -of AAIGrid -s_srs EPSG:4326 -t_srs
'+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
lambert_mcd12_sep2109.asc

I get,

Output driver `AAIGrid' not recognised or does not support
direct output file creation.  The following format drivers are
configured
and support direct output:
  VRT: Virtual Raster
  GTiff: GeoTIFF
  NITF: National Imagery Transmission Format
  HFA: Erdas Imagine Images (.img)
  ELAS: ELAS
  MEM: In Memory Raster
  BMP: MS Windows Device Independent Bitmap
  PCIDSK: PCIDSK Database File
  ILWIS: ILWIS Raster Map
  HDF4Image: HDF4 Dataset
  PNM: Portable Pixmap Format (netpbm)
  ENVI: ENVI .hdr Labelled
  EHdr: ESRI .hdr Labelled
  PAux: PCI .aux Labelled
  MFF: Atlantis MFF Raster
  MFF2: Atlantis MFF2 (HKV) Raster
  BT: VTP .bt (Binary Terrain) 1.3 Format
  IDA: Image Data and Analysis
  RMF: Raster Matrix Format


????





On Tue, 2010-03-02 at 08:50 +0100, Markus Neteler wrote:
> On Mon, Mar 1, 2010 at 7:12 PM, Bill Hudspeth <wbhk@unm.edu> wrote:
> ...
> > When I try to re-project the exported AAIGrid to another projection, I
> > use:
> >
> > gdalwarp -s_srs EPSG:4326 -t_srs '+proj=lcc +lat__1=33n +lat_2=45n
> > +lon_0=97w' MODIS_output_latlong.asc MODIS_output_lambert.asc
> 
> Note that without -of format] you generate a GeoTIFF file...
> 
> > While the resultant projection information looks correct,
> >
> > Driver: GTiff/GeoTIFF
>    ^^^^^^^^^^^^^^^^^^^^^^^
> 
> > The resultant text file has only the following on the top line:
> 
> ... it is binary, not a text file. check
> 
>  gdalwarp --formats
> 
> for the available formats.
> 
> Markus


From scottd777 at yahoo.com  Tue Mar  2 12:24:23 2010
From: scottd777 at yahoo.com (scottd777)
Date: Tue Mar  2 12:24:25 2010
Subject: [gdal-dev] Re: GDAL for BNG to Lat/Long, WGS84
In-Reply-To: <C7B26484.2ECC5%michael.smith@usace.army.mil>
References: <1267409428843-4652000.post@n2.nabble.com>
	<4B8CA787.3020803@pobox.com>
	<C7B26484.2ECC5%michael.smith@usace.army.mil>
Message-ID: <1267550663327-4662245.post@n2.nabble.com>


Frank & Mike,

THANK YOU!  I apologize if I repeated a question previously posted.  I did
quite a bit of searching, and was still having trouble coming up with
exactly what gdalwarp was looking for.

I don't actually have a geotiff from the vendor - I just have a basic JPEG
and Easting / Northing coords for the UL and LR.  I'm working on converting
that to a form that gdalwarp wants.  The most straightforward path (for me
at least) was to try to make it into a geotiff with a worldfile.  

Thanks again!

Scott
-- 
View this message in context: http://n2.nabble.com/gdal-dev-GDAL-for-BNG-to-Lat-Long-WGS84-tp4652000p4662245.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ksshannon at gmail.com  Tue Mar  2 13:36:06 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Mar  2 13:36:24 2010
Subject: [gdal-dev] Problems with gdalwarp re-projecting from lat-long to 
	Lambert Conformal
In-Reply-To: <1267545430.22993.9.camel@igor>
References: <1267467160.17855.14.camel@igor>
	<86782b611003012350u5b71ed62i859d83fe83808161@mail.gmail.com> 
	<1267545430.22993.9.camel@igor>
Message-ID: <c28f2e141003021036l42adc4d6x3fbfd9ffc33b679e@mail.gmail.com>

Bill,

It may be necessary to create an intermediate file that supports creation (I
think the (rw+) flag on gdalinfo --formats shows which formats support
create, AAIGrid supports CreateCopy() but not Create()).  Use gdalwarp to
make a vrt file, then translate the file to AAIGrid:

/usr/local/gdal/bin/gdalwarp -of VRT -s_srs EPSG:4326 -t_srs
'+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
lambert_mcd12_sep2109.vrt

then:

/usr/local/gdal/bin/gdal_translate -of AAIGrid -s_srs EPSG:4326 -t_srs
 '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' lambert_mcd12_sep2109.vrt
lambert_mcd12_sep2109.asc

hope that helps,

regards,

-Kyle


On Tue, Mar 2, 2010 at 8:57 AM, Bill Hudspeth <wbhk@unm.edu> wrote:

> Hello,
>
> Thanks for responding. When I use gdalinfo --formats, I see that AAIGrid
> is included in the list of acceptable formats. However, when I use
>
> /usr/local/gdal/bin/gdalwarp -of AAIGrid -s_srs EPSG:4326 -t_srs
> '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
> lambert_mcd12_sep2109.asc
>
> I get,
>
> Output driver `AAIGrid' not recognised or does not support
> direct output file creation.  The following format drivers are
> configured
> and support direct output:
>  VRT: Virtual Raster
>  GTiff: GeoTIFF
>  NITF: National Imagery Transmission Format
>  HFA: Erdas Imagine Images (.img)
>  ELAS: ELAS
>  MEM: In Memory Raster
>  BMP: MS Windows Device Independent Bitmap
>  PCIDSK: PCIDSK Database File
>  ILWIS: ILWIS Raster Map
>  HDF4Image: HDF4 Dataset
>  PNM: Portable Pixmap Format (netpbm)
>  ENVI: ENVI .hdr Labelled
>  EHdr: ESRI .hdr Labelled
>  PAux: PCI .aux Labelled
>  MFF: Atlantis MFF Raster
>  MFF2: Atlantis MFF2 (HKV) Raster
>  BT: VTP .bt (Binary Terrain) 1.3 Format
>  IDA: Image Data and Analysis
>  RMF: Raster Matrix Format
>
>
> ????
>
>
>
>
>
> On Tue, 2010-03-02 at 08:50 +0100, Markus Neteler wrote:
> > On Mon, Mar 1, 2010 at 7:12 PM, Bill Hudspeth <wbhk@unm.edu> wrote:
> > ...
> > > When I try to re-project the exported AAIGrid to another projection, I
> > > use:
> > >
> > > gdalwarp -s_srs EPSG:4326 -t_srs '+proj=lcc +lat__1=33n +lat_2=45n
> > > +lon_0=97w' MODIS_output_latlong.asc MODIS_output_lambert.asc
> >
> > Note that without -of format] you generate a GeoTIFF file...
> >
> > > While the resultant projection information looks correct,
> > >
> > > Driver: GTiff/GeoTIFF
> >    ^^^^^^^^^^^^^^^^^^^^^^^
> >
> > > The resultant text file has only the following on the top line:
> >
> > ... it is binary, not a text file. check
> >
> >  gdalwarp --formats
> >
> > for the available formats.
> >
> > Markus
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100302/3d28ea24/attachment.html
From stephane.benchimol at gmail.com  Tue Mar  2 14:12:18 2010
From: stephane.benchimol at gmail.com (=?ISO-8859-1?Q?St=E9phane?=)
Date: Tue Mar  2 14:12:22 2010
Subject: [gdal-dev] Georeferencing Geostationnary (+proj=geos)
In-Reply-To: <4B8CE6C1.5010102@deimos.com.pt>
References: <4B8CDCB0.4090907@deimos.com.pt>
	<589d51301003020213h19a090bes6acf8b814d8c7b5d@mail.gmail.com>
	<4B8CE6C1.5010102@deimos.com.pt>
Message-ID: <589d51301003021112w7cf2b868g2bc428c764fe225e@mail.gmail.com>

Hi,

Does anyone know if Gdal, current version or development version, is able to
translate from Geostationnary projection to other regular projection ?

Is it planned in future Gdal release ?

Many thanks !
St?phane

2010/3/2 Ant?nio Rocha <antonio.rocha@deimos.com.pt>

> Hi St?phane
>
> According to http://www.gdal.org/gdal_translate.html
>
> *-a_ullr* /ulx uly lrx lry/:
>   Assign/override the georeferenced bounds of the output file. This
>   assigns georeferenced bounds to the output file, ignoring what would
>   have been derived from the source file.
> Yes... Regarding extracting sub-domains, I didn't tried
>
> Yes, please keep me in touch in case there are better methods
>
> Antonio
>
>
> St?phane wrote:
>
>> Thanks for feedback !
>>
>> Do you have any ideas of the meaning of -a_ullr arguments they gave you ?
>>
>> Futhermore, once you get your GeoTiff file, did you success to translate
>> it to other projection, or extracting sub domains ?
>>
>> I've heard that GEOS projection is not so really supported currently by
>> GDAL, and re-projection / sub domain extraction doesn't work correctly ...
>>
>> I'll keep you in touch if any news !
>> St?phane
>>
>> 2010/3/2 Ant?nio Rocha <antonio.rocha@deimos.com.pt <mailto:
>> antonio.rocha@deimos.com.pt>>
>>
>>
>>    Greetings
>>
>>    I had exacly the same problem. I have been using LSASAF data (from
>>    MSG-2nd Generation satellites) that provides LST and FVC in HDF5
>>    files. For some technical reason they are not goerreferenced and
>>    their  information.
>>
>>    I talked with a few ILWIS software developers and they gave the
>>    following Commands (adapted to my spatial coverage images):
>>
>>    gdal_translate -a_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
>>    +y_0=0.0" -a_ullr -924124.2 5421728.5 4179561.6 3468466.1
>>    "HDF5:"HDF5_LSASAF_MSG_LST_Euro_200802170100"://LST"
>>    "euro_area_georeferenced.tif"
>>
>>
>>    gdalwarp -s_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
>>    +y_0=0.0" -t_srs "+proj=latlong" "euro_area_georeferenced.tif"
>>    "euro_area_latlong.tif"
>>
>>    My HDF5 file doesn't contain any infoprmation regarding GEOS
>>    projection. So, I had to do this
>>
>>
>>    Hope this helps
>>
>>    If you get any news/information/method regarding this, please let
>>    me know
>>
>>    Best regards
>>    Antonio
>>
>>
>>    __________ Information from ESET NOD32 Antivirus, version of virus
>>    signature database 4907 (20100302) __________
>>
>>    The message was checked by ESET NOD32 Antivirus.
>>
>>    http://www.eset.com
>>
>>
>>
>>
>
>
> __________ Information from ESET NOD32 Antivirus, version of virus
> signature database 4908 (20100302) __________
>
>
> The message was checked by ESET NOD32 Antivirus.
>
> http://www.eset.com
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100302/a9171b3d/attachment.html
From jason.roberts at duke.edu  Tue Mar  2 14:29:29 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Mar  2 14:29:38 2010
Subject: [gdal-dev] gdal_translate and ArcGIS
In-Reply-To: <4B8D15B8.10309@nova.whrc.org>
References: <4B8D15B8.10309@nova.whrc.org>
Message-ID: <00cf01caba3e$aeb581f0$0c2085d0$@roberts@duke.edu>

Adam,

I am by no means a gdal_translate expert but I do have experience with
ArcGIS, so I can offer a few comments.

ArcInfo ASCII Grid format does not include a specification of the bit depth,
or even whether the file contains integers or floats. When ArcGIS reads the
file, it infers all of this from its contents. Thus, when you say "convert
to a 16 bit AAIGRID", I'm not sure what you mean. If the AAIGRID file
contains integers that range from -32768 to 32767 (or -32767 to 32767 if a
NODATA value is specified), then ArcGIS will usually treat the AAIGRID as
16-bit integers. For example, if you used the ArcGIS ASCII To Raster tool to
create an ArcInfo Binary Grid, it will contain 16-bit integers.

Loading AAIGRID files (.asc files) into ArcMap will typically be very slow
if the files are very large. This is because ArcMap has to parse the entire
file--in effect running the ASCII To Raster tool behind the scenes--in order
to display it.

If you look up the AAIGRID format you will see that AAIGRIDs are
georeferenced using the coordinates of the lower-left corner of the
lower-left cell. I'm not sure about GeoTIFF. As far as I know, GDAL
understands how to properly georeference both GeoTIFF and AAIGRID files. One
problem with AIIGRID is that the format does not include the ability to
specify what spatial reference should be used. Perhaps your match up problem
results from this.

Modern versions of ArcGIS can read GeoTIFF, and may even use GDAL internally
to read it (others on gdal-dev would have a better idea about that than me.)
Is there a reason you are not using the GeoTIFFs directly with ArcGIS?

Hope that helps,

Jason


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Adam Bausch
Sent: Tuesday, March 02, 2010 8:42 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] gdal_translate and ArcGIS

I am attempting to take a series of rasters in 32 bit GTiff and use 
gdal_translate to convert then to a 16 bit AAIGRID, however I have been 
running into several difficulties.
Although gdal_translate appears to have the functionality to change 
output data type AND output format in the same line the resultant output 
appears to change only the output format.
Doing this in separate comments:

gdal_translate -ot Int16 -of GTiff input.tif output1.tif
gdal_translate -of of AAIGrid output1.tif tested.asc

Works but using the .asc grid in ArcMap is incredibly slow.

If I back up one step:
If I run the ArcGIS 'copy raster' tool after completing GDAL_translate 
to the Int16 GTiff, the output is an ESRI grid, however, the values do 
not match up.
I am pretty sure this is a problem of the upper left corner to set the 
grid extent in either software being different, but how or can I correct 
for this in gdal before moving over to ArcGIS?  And is there any way to 
easily complete this in any of the gdal utilities on a series of rasters?

(I think gdal takes the upper left corner of the top left pixel, 
however, ArcGIS takes the center location of the uppler left pixel?)

Thank you in advance.

Adam Bausch

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Tue Mar  2 14:41:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar  2 14:40:59 2010
Subject: [gdal-dev] Georeferencing Geostationnary (+proj=geos)
In-Reply-To: <589d51301003021112w7cf2b868g2bc428c764fe225e@mail.gmail.com>
References: <4B8CDCB0.4090907@deimos.com.pt>
	<589d51301003020213h19a090bes6acf8b814d8c7b5d@mail.gmail.com>
	<4B8CE6C1.5010102@deimos.com.pt>
	<589d51301003021112w7cf2b868g2bc428c764fe225e@mail.gmail.com>
Message-ID: <4B8D69CE.9010006@pobox.com>

St?phane wrote:
> Hi,
> 
> Does anyone know if Gdal, current version or development version, is 
> able to translate from Geostationnary projection to other regular 
> projection ?
> 
> Is it planned in future Gdal release ?

St?phane,

I can confirm that GDAL/OGR supports the geostationary projection
(+proj=geos in PROJ.4).  You can specify the +proj=geos projection
strings with GDAL where it would normally accept proj.4 strings.
I see it translates:

+proj=geos +lon_0=42 +h=35785831 +datum=WGS84

as:

PROJCS["unnamed",
     GEOGCS["WGS 84",
         DATUM["WGS_1984",
             SPHEROID["WGS 84",6378137,298.257223563,
                 AUTHORITY["EPSG","7030"]],
             TOWGS84[0,0,0,0,0,0,0],
             AUTHORITY["EPSG","6326"]],
         PRIMEM["Greenwich",0,
             AUTHORITY["EPSG","8901"]],
         UNIT["degree",0.0174532925199433,
             AUTHORITY["EPSG","9108"]],
         AUTHORITY["EPSG","4326"]],
     PROJECTION["Geostationary_Satellite"],
     PARAMETER["central_meridian",42],
     PARAMETER["satellite_height",35785831],
     PARAMETER["false_easting",0],
     PARAMETER["false_northing",0]]

I do not know how you would construct the geotransform
for an arbitrary satellite image though.

Best regards,

> 
> 2010/3/2 Ant?nio Rocha <antonio.rocha@deimos.com.pt 
> <mailto:antonio.rocha@deimos.com.pt>>
> 
>     Hi St?phane
> 
>     According to http://www.gdal.org/gdal_translate.html
> 
>     *-a_ullr* /ulx uly lrx lry/:
>       Assign/override the georeferenced bounds of the output file. This
>       assigns georeferenced bounds to the output file, ignoring what would
>       have been derived from the source file.
>     Yes... Regarding extracting sub-domains, I didn't tried
> 
>     Yes, please keep me in touch in case there are better methods
> 
>     Antonio
> 
> 
>     St?phane wrote:
> 
>         Thanks for feedback !
> 
>         Do you have any ideas of the meaning of -a_ullr arguments they
>         gave you ?
> 
>         Futhermore, once you get your GeoTiff file, did you success to
>         translate it to other projection, or extracting sub domains ?
> 
>         I've heard that GEOS projection is not so really supported
>         currently by GDAL, and re-projection / sub domain extraction
>         doesn't work correctly ...
> 
>         I'll keep you in touch if any news !
>         St?phane
> 
>         2010/3/2 Ant?nio Rocha <antonio.rocha@deimos.com.pt
>         <mailto:antonio.rocha@deimos.com.pt>
>         <mailto:antonio.rocha@deimos.com.pt
>         <mailto:antonio.rocha@deimos.com.pt>>>
> 
> 
>            Greetings
> 
>            I had exacly the same problem. I have been using LSASAF data
>         (from
>            MSG-2nd Generation satellites) that provides LST and FVC in HDF5
>            files. For some technical reason they are not goerreferenced and
>            their  information.
> 
>            I talked with a few ILWIS software developers and they gave the
>            following Commands (adapted to my spatial coverage images):
> 
>            gdal_translate -a_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
>            +y_0=0.0" -a_ullr -924124.2 5421728.5 4179561.6 3468466.1
>            "HDF5:"HDF5_LSASAF_MSG_LST_Euro_200802170100"://LST"
>            "euro_area_georeferenced.tif"
> 
> 
>            gdalwarp -s_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
>            +y_0=0.0" -t_srs "+proj=latlong" "euro_area_georeferenced.tif"
>            "euro_area_latlong.tif"
> 
>            My HDF5 file doesn't contain any infoprmation regarding GEOS
>            projection. So, I had to do this
> 
> 
>            Hope this helps
> 
>            If you get any news/information/method regarding this, please let
>            me know
> 
>            Best regards
>            Antonio
> 
> 
>            __________ Information from ESET NOD32 Antivirus, version of
>         virus
>            signature database 4907 (20100302) __________
> 
>            The message was checked by ESET NOD32 Antivirus.
> 
>            http://www.eset.com
> 
> 
> 
> 
> 
> 
>     __________ Information from ESET NOD32 Antivirus, version of virus
>     signature database 4908 (20100302) __________
> 
> 
>     The message was checked by ESET NOD32 Antivirus.
> 
>     http://www.eset.com
> 
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Mar  2 15:01:22 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Mar  2 15:01:33 2010
Subject: [gdal-dev] Minor changes to RFC3
Message-ID: <201003022101.23292.even.rouault@mines-paris.org>

Folks,

With the agreement of FrankW and based on feedback from new commiters, I've 
made a few minor changes to RFC3 (GDAL Commiter Guildlines) to better reflect 
our current practice on how to write commit messages and link them with Trac.

See http://trac.osgeo.org/gdal/wiki/rfc3_commiters?action=diff&version=5 for 
the changes.

Inline version :

"""
 * Add a bug reference like "(#1232)" at the end of SVN commit log entries 
when committing changes related to a ticket in Trac. The '#' character 
enables Trac to create a hyperlink from the changeset to the mentionned 
ticket. 
* After commiting changes related to a ticket in Trac, write the tree and 
revision in which it was fixed in the ticket description. Such as "Fixed in 
trunk (r12345) and in branches/1.7 (r12346)". The 'r' character enables Trac 
to create a hyperlink from the ticket to the changeset. 
"""

Best regards,

Even
From warmerdam at pobox.com  Tue Mar  2 15:45:53 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar  2 15:46:08 2010
Subject: [gdal-dev] Code submission for NITF driver
In-Reply-To: <3F87AA6367687C43A854B8E7073CDF8C0BD9C2@es-108a.paxriver.progeny.net>
References: <3F87AA6367687C43A854B8E7073CDF8C0BD9C2@es-108a.paxriver.progeny.net>
Message-ID: <4B8D7901.60902@pobox.com>

Chiou, Kevin wrote:
> Hi,
>   I just wonder what the process is for submitting code to GDAL. 
>   I was working on a NITF editing tool using GDAL driver.  I made some 
> modification to the NITF driver including adding a CGM writing feature 
> and fixed some data validation bugs.  I submitted a ticket a couple 
> weeks ago, but nothing happened since then.  Is there something else I 
> should do or are there someone I should get in touch with?
> 
> Ticket opened: _http://trac.osgeo.org/gdal/ticket/3376_

Kevin,

I appreciate the submission but it seems neither Even nor I have had
time to review and integrate your changes.  The NITF driver is fragile
and complex enough I hesitate to ask Chaitanya or anyone else to try
commit the changes.

I hope one of us will get to it reasonably soon, though I'm pretty sure
there are significant NITF driver contributions still sitting in trac
unintegrated from other contributors from years ago.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From dmorissette at mapgears.com  Tue Mar  2 15:55:11 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Mar  2 15:55:16 2010
Subject: [gdal-dev] Minor changes to RFC3
In-Reply-To: <201003022101.23292.even.rouault@mines-paris.org>
References: <201003022101.23292.even.rouault@mines-paris.org>
Message-ID: <4B8D7B2F.20707@mapgears.com>

Thanks for making those fixes/changes Even.

Daniel

Even Rouault wrote:
> Folks,
> 
> With the agreement of FrankW and based on feedback from new commiters, I've 
> made a few minor changes to RFC3 (GDAL Commiter Guildlines) to better reflect 
> our current practice on how to write commit messages and link them with Trac.
> 
> See http://trac.osgeo.org/gdal/wiki/rfc3_commiters?action=diff&version=5 for 
> the changes.
> 
> Inline version :
> 
> """
>  * Add a bug reference like "(#1232)" at the end of SVN commit log entries 
> when committing changes related to a ticket in Trac. The '#' character 
> enables Trac to create a hyperlink from the changeset to the mentionned 
> ticket. 
> * After commiting changes related to a ticket in Trac, write the tree and 
> revision in which it was fixed in the ticket description. Such as "Fixed in 
> trunk (r12345) and in branches/1.7 (r12346)". The 'r' character enables Trac 
> to create a hyperlink from the ticket to the changeset. 
> """
> 
> Best regards,
> 
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/
From even.rouault at mines-paris.org  Tue Mar  2 16:23:21 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Mar  2 16:23:32 2010
Subject: [gdal-dev] Code submission for NITF driver
In-Reply-To: <4B8D7901.60902@pobox.com>
References: <3F87AA6367687C43A854B8E7073CDF8C0BD9C2@es-108a.paxriver.progeny.net>
	<4B8D7901.60902@pobox.com>
Message-ID: <201003022223.21844.even.rouault@mines-paris.org>

Kevin,

I'll try reviewing and commiting your changes. From a first look, they are 
quite substantial/non trivial. Am I wrong if I say they belong more to the 
enhancement category than to the bugfix one ? (I assume writing TEXT and CGM 
segments, and the interaction with writing multiple images, is not a common 
use case of the NITF driver)

I'll need your testing to check that the changes that will be commited still 
work with third-party software and validation tools (not using GDAL I mean). 
I anticipate a few refactoring changes, for example as there seems to be 
several instances of code that reads NUMI, NUMS and NUMT records.  I think 
I'll avoid the use of the CGM_%d_SIZE hidden option to be passed to 
NITFCreate(), but let NITFWriteCGMSegments() patch the necessary bytes in the 
header instead.

Best regards,

Even

> Chiou, Kevin wrote:
> > Hi,
> >   I just wonder what the process is for submitting code to GDAL.
> >   I was working on a NITF editing tool using GDAL driver.  I made some
> > modification to the NITF driver including adding a CGM writing feature
> > and fixed some data validation bugs.  I submitted a ticket a couple
> > weeks ago, but nothing happened since then.  Is there something else I
> > should do or are there someone I should get in touch with?
> >
> > Ticket opened: _http://trac.osgeo.org/gdal/ticket/3376_
>
> Kevin,
>
> I appreciate the submission but it seems neither Even nor I have had
> time to review and integrate your changes.  The NITF driver is fragile
> and complex enough I hesitate to ask Chaitanya or anyone else to try
> commit the changes.
>
> I hope one of us will get to it reasonably soon, though I'm pretty sure
> there are significant NITF driver contributions still sitting in trac
> unintegrated from other contributors from years ago.
>
> Best regards,


From deadpickle at gmail.com  Tue Mar  2 22:22:58 2010
From: deadpickle at gmail.com (deadpickle)
Date: Tue Mar  2 22:23:01 2010
Subject: [gdal-dev] C GDAL beginner
Message-ID: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>

I'm trying to write a simple C program that creates and populates a
shapefile (have one done in python). I'm very new to C and GDAL both
and could use some help. I'm trying to apply coordinatetransformation
to my points but first I have to create the coordinatetransformation.
In python I can do this simply by:
coordtrans = osr.CoordinateTransformation(target, source)
but in C I cant seem to find the right call for this. Any ideas?

#include "ogr_api.h"
#include "ogr_srs_api.h"

int main()
{
	//~ variable declaration
	const char *format = "ESRI Shapefile", *name = "testc.shp", *source,
*target;
	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
	const char *tprj = "WGS84";
	OGRSFDriverH driver;
	OGRDataSourceH ds;
	OGRCoordinateTransformation ctrans;

	//~ get driver and create ds
	OGRRegisterAll();
	driver = OGRGetDriverByName(format);
	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);

	//~ create spatrefs and trans
	OSRNewSpatialReference(source);
	OSRNewSpatialReference(target);
	OSRSetFromUserInput(source, sprj);
	OSRSetFromUserInput(target, tprj);
	ctrans = OGRCreateCoordinateTransformation(target, source);
}

[thor@updraft ~/Programs]$ gcc -o gdal_test_convert
gdal_test_convert.c
gdal_test_convert.c: In function ???main???:
gdal_test_convert.c:12: error: ???OGRCoordinateTransformation???
undeclared (first use in this function)
gdal_test_convert.c:12: error: (Each undeclared identifier is reported
only once
gdal_test_convert.c:12: error: for each function it appears in.)
gdal_test_convert.c:12: error: expected ???;??? before ???ctrans???
gdal_test_convert.c:22: warning: passing argument 1 of ?
??OSRSetFromUserInput??? discards qualifiers from pointer target type
gdal_test_convert.c:23: warning: passing argument 1 of ?
??OSRSetFromUserInput??? discards qualifiers from pointer target type
gdal_test_convert.c:24: error: ???ctrans??? undeclared (first use in
this function)


From rush at winkey.org  Tue Mar  2 23:48:03 2010
From: rush at winkey.org (brian)
Date: Tue Mar  2 23:53:15 2010
Subject: [gdal-dev] C GDAL beginner
In-Reply-To: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
References: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
Message-ID: <1267591683.2807.35.camel@winkey.org>

deadpickle,


The types in the OGR C api pretty much end in H.

OGRCoordinateTransformation ctrans;
should read
OGRCoordinateTransformationH ctrans;

The function your looking for is OCTNewCoordinateTransformation().


Brian

On Tue, 2010-03-02 at 19:22 -0800, deadpickle wrote:
> I'm trying to write a simple C program that creates and populates a
> shapefile (have one done in python). I'm very new to C and GDAL both
> and could use some help. I'm trying to apply coordinatetransformation
> to my points but first I have to create the coordinatetransformation.
> In python I can do this simply by:
> coordtrans = osr.CoordinateTransformation(target, source)
> but in C I cant seem to find the right call for this. Any ideas?
> 
> #include "ogr_api.h"
> #include "ogr_srs_api.h"
> 
> int main()
> {
> 	//~ variable declaration
> 	const char *format = "ESRI Shapefile", *name = "testc.shp", *source,
> *target;
> 	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
> 	const char *tprj = "WGS84";
> 	OGRSFDriverH driver;
> 	OGRDataSourceH ds;
> 	OGRCoordinateTransformation ctrans;
> 
> 	//~ get driver and create ds
> 	OGRRegisterAll();
> 	driver = OGRGetDriverByName(format);
> 	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);
> 
> 	//~ create spatrefs and trans
> 	OSRNewSpatialReference(source);
> 	OSRNewSpatialReference(target);
> 	OSRSetFromUserInput(source, sprj);
> 	OSRSetFromUserInput(target, tprj);
> 	ctrans = OGRCreateCoordinateTransformation(target, source);
> }
> 
> [thor@updraft ~/Programs]$ gcc -o gdal_test_convert
> gdal_test_convert.c
> gdal_test_convert.c: In function ?main??:
> gdal_test_convert.c:12: error: ?OGRCoordinateTransformation??
> undeclared (first use in this function)
> gdal_test_convert.c:12: error: (Each undeclared identifier is reported
> only once
> gdal_test_convert.c:12: error: for each function it appears in.)
> gdal_test_convert.c:12: error: expected ?;?? before ?ctrans??
> gdal_test_convert.c:22: warning: passing argument 1 of ?
> OSRSetFromUserInput?? discards qualifiers from pointer target type
> gdal_test_convert.c:23: warning: passing argument 1 of ?
> OSRSetFromUserInput?? discards qualifiers from pointer target type
> gdal_test_convert.c:24: error: ?ctrans?? undeclared (first use in
> this function)
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From deadpickle at gmail.com  Wed Mar  3 00:01:41 2010
From: deadpickle at gmail.com (deadpickle)
Date: Wed Mar  3 00:09:32 2010
Subject: [gdal-dev] Re: C GDAL beginner
In-Reply-To: <1267591683.2807.35.camel@winkey.org>
References: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
	<1267591683.2807.35.camel@winkey.org>
Message-ID: <9159d8c4-c17d-4d66-aba8-55f74e01548b@u19g2000prh.googlegroups.com>

Thanks for the reply. I was wonder what the deal is with the other
warnings:

#include "ogr_api.h"
#include "ogr_srs_api.h"

int main()
{
	//~ variable declaration
	const char *format = "ESRI Shapefile", *name = "testc.shp", *source,
*target;
	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
	const char *tprj = "WGS84";
	OGRSFDriverH driver;
	OGRDataSourceH ds;
	OGRCoordinateTransformationH ctrans;

	//~ get driver and create ds
	driver = OGRGetDriverByName(format);
	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);

	//~ create spatrefs and trans
	OSRNewSpatialReference(source);
	OSRNewSpatialReference(target);
	OSRSetFromUserInput(source, sprj);
	OSRSetFromUserInput(target, tprj);
	ctrans = OCTNewCoordinateTransformation(target, source);

}

dal_test_convert.c: In function ???main???:
gdal_test_convert.c:22: warning: passing argument 1 of ?
??OSRSetFromUserInput??? discards qualifiers from pointer target type
gdal_test_convert.c:23: warning: passing argument 1 of ?
??OSRSetFromUserInput??? discards qualifiers from pointer target type
gdal_test_convert.c:24: warning: passing argument 1 of ?
??OCTNewCoordinateTransformation??? discards qualifiers from pointer
target type
gdal_test_convert.c:24: warning: passing argument 2 of ?
??OCTNewCoordinateTransformation??? discards qualifiers from pointer
target type

On Mar 2, 10:48?pm, brian <r...@winkey.org> wrote:
> deadpickle,
>
> The types in the OGR C api pretty much end in H.
>
> OGRCoordinateTransformation ctrans;
> should read
> OGRCoordinateTransformationH ctrans;
>
> The function your looking for is OCTNewCoordinateTransformation().
>
> Brian
>
>
>
> On Tue, 2010-03-02 at 19:22 -0800, deadpickle wrote:
> > I'm trying to write a simple C program that creates and populates a
> > shapefile (have one done in python). I'm very new to C and GDAL both
> > and could use some help. I'm trying to apply coordinatetransformation
> > to my points but first I have to create the coordinatetransformation.
> > In python I can do this simply by:
> > coordtrans = osr.CoordinateTransformation(target, source)
> > but in C I cant seem to find the right call for this. Any ideas?
>
> > #include "ogr_api.h"
> > #include "ogr_srs_api.h"
>
> > int main()
> > {
> > ? ?//~ variable declaration
> > ? ?const char *format = "ESRI Shapefile", *name = "testc.shp", *source,
> > *target;
> > ? ?const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> > +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
> > ? ?const char *tprj = "WGS84";
> > ? ?OGRSFDriverH driver;
> > ? ?OGRDataSourceH ds;
> > ? ?OGRCoordinateTransformation ctrans;
>
> > ? ?//~ get driver and create ds
> > ? ?OGRRegisterAll();
> > ? ?driver = OGRGetDriverByName(format);
> > ? ?ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);
>
> > ? ?//~ create spatrefs and trans
> > ? ?OSRNewSpatialReference(source);
> > ? ?OSRNewSpatialReference(target);
> > ? ?OSRSetFromUserInput(source, sprj);
> > ? ?OSRSetFromUserInput(target, tprj);
> > ? ?ctrans = OGRCreateCoordinateTransformation(target, source);
> > }
>
> > [thor@updraft ~/Programs]$ gcc -o gdal_test_convert
> > gdal_test_convert.c
> > gdal_test_convert.c: In function main :
> > gdal_test_convert.c:12: error: OGRCoordinateTransformation
> > undeclared (first use in this function)
> > gdal_test_convert.c:12: error: (Each undeclared identifier is reported
> > only once
> > gdal_test_convert.c:12: error: for each function it appears in.)
> > gdal_test_convert.c:12: error: expected ; before ctrans
> > gdal_test_convert.c:22: warning: passing argument 1 of
> > OSRSetFromUserInput discards qualifiers from pointer target type
> > gdal_test_convert.c:23: warning: passing argument 1 of
> > OSRSetFromUserInput discards qualifiers from pointer target type
> > gdal_test_convert.c:24: error: ctrans undeclared (first use in
> > this function)
>
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-...@lists.osgeo.org
> >http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From ari.jolma at gmail.com  Wed Mar  3 01:40:58 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Mar  3 01:41:09 2010
Subject: [gdal-dev] Proposal to split this list into gdal-dev and gdal-users
Message-ID: <4B8E047A.9090804@gmail.com>

Folks,

gdal-dev has grown to more than 10 mails per day. There are a lot of
mails about using gdal (often programming questions but still just using
gdal through one of the APIs). I propose to split this list into
gdal-dev (for mails that relate to development of and bugs in gdal) and
gdal-users. If users want to get the attention of specific developer
(who knows the inner workings best) I propose a habit of adding into the
subject the name of the driver or HL interface or another identifier.

Best regards,

Ari (developer of the Perl API to GDAL)


From yilmaz.arslanoglu at gmail.com  Wed Mar  3 04:25:38 2010
From: yilmaz.arslanoglu at gmail.com (Yilmaz Arslanoglu)
Date: Wed Mar  3 04:25:50 2010
Subject: [gdal-dev] using encrypted data
Message-ID: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>

Hi all;

One of our customer wants to share their data which is in ESRI Shapefile format.
However, they also would like to limit the usage of this data such
that the contents
will be utilized only through our software, and not for any other purposes.

Does anybody have a suggestion about how this could be achieved ?
Does GDAL have any related encryption based support, and is there any
GDAL supported encrypted vector formats that we can convert it into?

Best regards,
Yilmaz
From mateusz at loskot.net  Wed Mar  3 06:15:51 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Mar  3 06:15:52 2010
Subject: [gdal-dev] Re: C GDAL beginner
In-Reply-To: <9159d8c4-c17d-4d66-aba8-55f74e01548b@u19g2000prh.googlegroups.com>
References: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
	<1267591683.2807.35.camel@winkey.org>
	<9159d8c4-c17d-4d66-aba8-55f74e01548b@u19g2000prh.googlegroups.com>
Message-ID: <1267614951131-4666854.post@n2.nabble.com>


You need to buy a book about C/C++ or ask on comp.lang.c or comp.lang.c++

Best regards,

-----
-- 
Mateusz Loskot
http://mateusz.loskot.net
-- 
View this message in context: http://n2.nabble.com/gdal-dev-C-GDAL-beginner-tp4665330p4666854.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From hobu.inc at gmail.com  Wed Mar  3 09:08:01 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Wed Mar  3 09:20:18 2010
Subject: [gdal-dev] Proposal to split this list into gdal-dev and
	gdal-users
In-Reply-To: <4B8E047A.9090804@gmail.com>
References: <4B8E047A.9090804@gmail.com>
Message-ID: <C8360824-4284-4CB6-9814-EDDF0C40BF09@gmail.com>


On Mar 3, 2010, at 12:40 AM, Ari Jolma wrote:

> Folks,
> 
> gdal-dev has grown to more than 10 mails per day. There are a lot of
> mails about using gdal (often programming questions but still just using
> gdal through one of the APIs). I propose to split this list into
> gdal-dev (for mails that relate to development of and bugs in gdal) and
> gdal-users. If users want to get the attention of specific developer
> (who knows the inner workings best) I propose a habit of adding into the
> subject the name of the driver or HL interface or another identifier.

I'm -1 on this proposal at this time.  Splitting our community in this way fragments our community and implicitly categorizes one kind of question (for developers) as somehow more important than another (for users).  If we were 20 messages a day, most of these were usage questions, and there was plenty of non-developer user-to-user help across the forum, I would be more in support of splitting things up.  I don't think we're there yet.

Howard


From ari.jolma at gmail.com  Wed Mar  3 09:22:26 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Mar  3 09:22:54 2010
Subject: [gdal-dev] Proposal to split this list into gdal-dev and
	gdal-users
In-Reply-To: <C8360824-4284-4CB6-9814-EDDF0C40BF09@gmail.com>
References: <4B8E047A.9090804@gmail.com>
	<C8360824-4284-4CB6-9814-EDDF0C40BF09@gmail.com>
Message-ID: <4B8E70A2.3070004@gmail.com>

Howard Butler wrote:
> On Mar 3, 2010, at 12:40 AM, Ari Jolma wrote:
>
>   
>> Folks,
>>
>> gdal-dev has grown to more than 10 mails per day. There are a lot of
>> mails about using gdal (often programming questions but still just using
>> gdal through one of the APIs). I propose to split this list into
>> gdal-dev (for mails that relate to development of and bugs in gdal) and
>> gdal-users. If users want to get the attention of specific developer
>> (who knows the inner workings best) I propose a habit of adding into the
>> subject the name of the driver or HL interface or another identifier.
>>     
>
> I'm -1 on this proposal at this time.  Splitting our community in this way fragments our community and implicitly categorizes one kind of question (for developers) as somehow more important than another (for users).

I comment only on this one. I wouldn't say more important, just 
different. Having a separate list would help to keep those apart. I'm a 
bit afraid that some developer discussions are lost because of all the 
traffic. Maybe I'm just not very good with my emails :)

Ari

>   If we were 20 messages a day, most of these were usage questions, and there was plenty of non-developer user-to-user help across the forum, I would be more in support of splitting things up.  I don't think we're there yet.
> Howard
>
>
>   

From warmerdam at pobox.com  Wed Mar  3 09:53:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar  3 09:53:20 2010
Subject: [gdal-dev] using encrypted data
In-Reply-To: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
References: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
Message-ID: <4B8E77E7.7080003@pobox.com>

Yilmaz Arslanoglu wrote:
> Hi all;
> 
> One of our customer wants to share their data which is in ESRI Shapefile format.
> However, they also would like to limit the usage of this data such
> that the contents
> will be utilized only through our software, and not for any other purposes.
> 
> Does anybody have a suggestion about how this could be achieved ?
> Does GDAL have any related encryption based support, and is there any
> GDAL supported encrypted vector formats that we can convert it into?

Yilmaz,

There are no encrypted GDAL or OGR formats that come to mind.

My suggestion is that you encrypt the shapefile(s) using some
generic encryption and then implement a VSI*L filesystem handler
for /vsiyilmazencrypt/ that would decrypt the data on the fly as
it is read.

The VSI*L file access layer provides for library and application
supplied custom file io handlers.  There are several examples of
implementations in gdal/port including cpl_vsil_subfile.cpp and
cpl_vsil_mem.cpp and cpl_vsil_unix_stdio_64.cpp.

I'm sure a good search on encryption libraries will turn up various
options for encryption libraries.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Mar  3 10:20:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar  3 10:20:38 2010
Subject: [gdal-dev] Proposal to split this list into gdal-dev and
	gdal-users
In-Reply-To: <4B8E047A.9090804@gmail.com>
References: <4B8E047A.9090804@gmail.com>
Message-ID: <4B8E7E51.7010806@pobox.com>

Ari Jolma wrote:
> Folks,
> 
> gdal-dev has grown to more than 10 mails per day. There are a lot of
> mails about using gdal (often programming questions but still just using
> gdal through one of the APIs). I propose to split this list into
> gdal-dev (for mails that relate to development of and bugs in gdal) and
> gdal-users. If users want to get the attention of specific developer
> (who knows the inner workings best) I propose a habit of adding into the
> subject the name of the driver or HL interface or another identifier.

Ari,

The gdal-dev list has a pretty large subscription count (1341) though we
can assume many of those are not humans receiving and reading the emails.

I have a few concerns with starting a gdal-users.

1) It would turn into a "support ghetto" of unanswered questions if
the developers and knowledgable folks don't subscribe to it.

2) Because there are already 1300 people subscribed to gdal-dev now it would
be difficult to convince users to move over to gdal-users.

In fact, if we were to establish a gdal-users I almost wonder if it wouldn't
be best to move everyone to it and require developers to resubscribe to
gdal-dev.

To me the most obvious benefit to having a gdal-users list is that we
could do routine stuff like voting on PSC motions on gdal-dev without
feeling we are stuffing the mailbox of many folks who don't care about
our administrative junk.  I do try to include Motion: in the subject of
these administrative emails so they are easily skipped by those who don't
care and easily recognised by PSC members as requiring review.

I must confess even I don't read every gdal-dev email.  Some threads I
skim or skip once I'm reasonably convinced it isn't an area of interest
of mine. I can imagine the traffic is daunting for those with a casual
interest in GDAL.

If we were to split the list, I wonder if it wouldn't make sense to
actually split it into three:

   gdal-users - for folks using GDAL utilities or using it as a user
                (rather than developer) in an application like MapServer,
                QGIS, etc.   Obviously if some/most internals developers
                do not subscribe here it will be hard to get good
                answers!
   gdal-dev - for developers - both application developers using GDAL and
              and those of us developing GDAL internals.  Those using
              swig scripting interfaces also likely belong here.
   gdal-admin - for GDAL administrative discussions including PSC votes,
                and more perhaps "community oriented" discussions like
                this one.  All committers and PSC members and other
                dedicated community members could be a member here.

If we did have such a split I think we would still want to announce
new RFCs and other substantial discussions on all three lists even
if the actual discussion is directed to one list.

However, all things considered I'm not certain how much a split will help
and it seems it will end up splitting the community in ways that makes it
hard to keep people aware of what is going on, and given an opportunity
to speak up when appropriate.  At most I can only work up enough
enthusiasm for perhaps a +0 on this idea.

As an aside, I also think that the nabble and similar interfaces are no
longer supporting posting to the list (if they ever did).  Getting them
working again might make casual participation easier for some folks.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From russell at flora.ca  Wed Mar  3 11:07:47 2010
From: russell at flora.ca (Russell McOrmond)
Date: Wed Mar  3 11:07:51 2010
Subject: [gdal-dev] Proposal to split this list into gdal-dev and
	gdal-users
In-Reply-To: <4B8E7E51.7010806@pobox.com>
References: <4B8E047A.9090804@gmail.com> <4B8E7E51.7010806@pobox.com>
Message-ID: <alpine.LRH.2.00.1003031103400.31291@calcutta.int.flora.ca>


On Wed, 3 Mar 2010, Frank Warmerdam wrote:

> I have a few concerns with starting a gdal-users.

   As a user I appreciate the heads-up of the developer conversations and 
the who-is-who of the administrative conversations.  If the list were 
split into 3 I would try to subscribe to all 3.

   I've been a mailing list user for near 20 years, and my experience with 
list splits have tended to be negative.  They never quite work out the way 
the designers intended, and often end up making the problem they were 
attempting to solve (too many messages) worse as people subscribe to 
multiple lists and these multiple lists end up being sent the same 
messages.

-- 
  Russell McOrmond, Internet Consultant: <http://www.flora.ca/>
  Please help us tell the Canadian Parliament to protect our property
  rights as owners of Information Technology. Sign the petition!
  http://digital-copyright.ca/petition/ict/     http://KillBillC61.ca

  "The government, lobbied by legacy copyright holders and hardware
   manufacturers, can pry control over my camcorder, computer,
   home theatre, or portable media player from my cold dead hands!"
From yilmaz.arslanoglu at gmail.com  Wed Mar  3 11:08:57 2010
From: yilmaz.arslanoglu at gmail.com (Yilmaz Arslanoglu)
Date: Wed Mar  3 11:09:00 2010
Subject: [gdal-dev] using encrypted data
In-Reply-To: <4B8E77E7.7080003@pobox.com>
References: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
	<4B8E77E7.7080003@pobox.com>
Message-ID: <150158ad1003030808i67f66f37u81119f2b8cd33bed@mail.gmail.com>

Thank you very much for pointing to the sources, Frank!
Let me have a look at them, then...

On Wed, Mar 3, 2010 at 3:53 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Yilmaz Arslanoglu wrote:
>>
>> Hi all;
>>
>> One of our customer wants to share their data which is in ESRI Shapefile
>> format.
>> However, they also would like to limit the usage of this data such
>> that the contents
>> will be utilized only through our software, and not for any other
>> purposes.
>>
>> Does anybody have a suggestion about how this could be achieved ?
>> Does GDAL have any related encryption based support, and is there any
>> GDAL supported encrypted vector formats that we can convert it into?
>
> Yilmaz,
>
> There are no encrypted GDAL or OGR formats that come to mind.
>
> My suggestion is that you encrypt the shapefile(s) using some
> generic encryption and then implement a VSI*L filesystem handler
> for /vsiyilmazencrypt/ that would decrypt the data on the fly as
> it is read.
>
> The VSI*L file access layer provides for library and application
> supplied custom file io handlers. ?There are several examples of
> implementations in gdal/port including cpl_vsil_subfile.cpp and
> cpl_vsil_mem.cpp and cpl_vsil_unix_stdio_64.cpp.
>
> I'm sure a good search on encryption libraries will turn up various
> options for encryption libraries.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From yilmaz.arslanoglu at gmail.com  Wed Mar  3 11:10:39 2010
From: yilmaz.arslanoglu at gmail.com (Yilmaz Arslanoglu)
Date: Wed Mar  3 11:10:42 2010
Subject: [gdal-dev] using encrypted data
In-Reply-To: <alpine.LRH.2.00.1003031054040.31291@calcutta.int.flora.ca>
References: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
	<alpine.LRH.2.00.1003031054040.31291@calcutta.int.flora.ca>
Message-ID: <150158ad1003030810n6d622cabtc7163a276e44df7e@mail.gmail.com>

Hi Russell;

Yes, you are right, actually we are also considering the option that
you have mentioned.
Because even the best technical option will be hackable in theory, anyway...

On Wed, Mar 3, 2010 at 4:55 PM, Russell McOrmond <russell@flora.ca> wrote:
>
> On Wed, 3 Mar 2010, Yilmaz Arslanoglu wrote:
>
>> Hi all;
>>
>> One of our customer wants to share their data which is in ESRI Shapefile
>> format. However, they also would like to limit the usage of this data such
>> that the contents will be utilized only through our software, and not for
>> any other purposes.
>
> ?My recommendation is to accomplish this through contractual measures
> protected by law rather than technical measures. ?Attempts to substitute
> technology rather than clarify legal relationships tend to fail and cause
> more problems than they are worth.
>
> --
> ?Russell McOrmond, Internet Consultant: <http://www.flora.ca/>
> ?Please help us tell the Canadian Parliament to protect our property
> ?rights as owners of Information Technology. Sign the petition!
> ?http://digital-copyright.ca/petition/ict/ ? ? http://KillBillC61.ca
>
> ?"The government, lobbied by legacy copyright holders and hardware
> ?manufacturers, can pry control over my camcorder, computer,
> ?home theatre, or portable media player from my cold dead hands!"
>
From russell at flora.ca  Wed Mar  3 11:19:35 2010
From: russell at flora.ca (Russell McOrmond)
Date: Wed Mar  3 11:19:38 2010
Subject: [gdal-dev] using encrypted data
In-Reply-To: <150158ad1003030810n6d622cabtc7163a276e44df7e@mail.gmail.com>
References: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
	<alpine.LRH.2.00.1003031054040.31291@calcutta.int.flora.ca>
	<150158ad1003030810n6d622cabtc7163a276e44df7e@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1003031112100.31291@calcutta.int.flora.ca>


On Wed, 3 Mar 2010, Yilmaz Arslanoglu wrote:

> Hi Russell;
>
> Yes, you are right, actually we are also considering the option that
> you have mentioned.
> Because even the best technical option will be hackable in theory, anyway...

   The theory is pretty simple:  In order to make the data useful you need 
to deliver the encrypted data as well as the decryption key and the 
decryption algorithm to the end user (embeded in software or elsewhere). 
The only thing stopping a minimally technical person from putting these 3 
things together and getting out the plaintext is in fact the law, not any 
technological limitation.

   Encryption hides the plaintext message from a third party, not the 
source or intended destination of a message.  Any time you see encryption 
attempted to hide information from the source or destination you are 
noticing a mis-use of technology, most often attempting to substitute 
technology for clear and enforceable legal constructs.

   Sorry to dive into this, but I worry whenever companies attempt to do 
these things as it tends to encourage people to circumvent the 
technological measure.  In effect, this (mis-)use of cryptography 
backfires where clear contracts would have worked well.  Avoid this if you 
want to protect your valuable data.

-- 
  Russell McOrmond, Internet Consultant: <http://www.flora.ca/>
  Please help us tell the Canadian Parliament to protect our property
  rights as owners of Information Technology. Sign the petition!
  http://digital-copyright.ca/petition/ict/     http://KillBillC61.ca

  "The government, lobbied by legacy copyright holders and hardware
   manufacturers, can pry control over my camcorder, computer,
   home theatre, or portable media player from my cold dead hands!"
From russell at flora.ca  Wed Mar  3 10:55:54 2010
From: russell at flora.ca (Russell McOrmond)
Date: Wed Mar  3 11:42:18 2010
Subject: [gdal-dev] using encrypted data
In-Reply-To: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
References: <150158ad1003030125o706a50bufe509238877cea87@mail.gmail.com>
Message-ID: <alpine.LRH.2.00.1003031054040.31291@calcutta.int.flora.ca>


On Wed, 3 Mar 2010, Yilmaz Arslanoglu wrote:

> Hi all;
>
> One of our customer wants to share their data which is in ESRI Shapefile 
> format. However, they also would like to limit the usage of this data 
> such that the contents will be utilized only through our software, and 
> not for any other purposes.

   My recommendation is to accomplish this through contractual measures 
protected by law rather than technical measures.  Attempts to substitute 
technology rather than clarify legal relationships tend to fail and cause 
more problems than they are worth.

-- 
  Russell McOrmond, Internet Consultant: <http://www.flora.ca/>
  Please help us tell the Canadian Parliament to protect our property
  rights as owners of Information Technology. Sign the petition!
  http://digital-copyright.ca/petition/ict/     http://KillBillC61.ca

  "The government, lobbied by legacy copyright holders and hardware
   manufacturers, can pry control over my camcorder, computer,
   home theatre, or portable media player from my cold dead hands!"
From wbhk at unm.edu  Wed Mar  3 11:44:21 2010
From: wbhk at unm.edu (Bill Hudspeth)
Date: Wed Mar  3 11:46:06 2010
Subject: [gdal-dev] Problems with gdalwarp re-projecting from lat-long
	to  Lambert Conformal
In-Reply-To: <c28f2e141003021036l42adc4d6x3fbfd9ffc33b679e@mail.gmail.com>
References: <1267467160.17855.14.camel@igor>
	<86782b611003012350u5b71ed62i859d83fe83808161@mail.gmail.com>
	<1267545430.22993.9.camel@igor>
	<c28f2e141003021036l42adc4d6x3fbfd9ffc33b679e@mail.gmail.com>
Message-ID: <1267634661.27263.3.camel@igor>

Thanks for the input Kyle. Just a quick question. In the second
operation using gdal_translate, you indicate an -s_srs of EPSG:4326 for
the *.vrt file. Wasn't the vrt file written in the Lambert projection in
the first step? And if so, the second step could probably be done
without having to specify either s_srs or t_srs?

Is this true?

Thanks again, Bill

On Tue, 2010-03-02 at 11:36 -0700, Kyle Shannon wrote:
> Bill,
> 
> It may be necessary to create an intermediate file that supports
> creation (I think the (rw+) flag on gdalinfo --formats shows which
> formats support create, AAIGrid supports CreateCopy() but not
> Create()).  Use gdalwarp to make a vrt file, then translate the file
> to AAIGrid:
> 
> /usr/local/gdal/bin/gdalwarp -of VRT -s_srs EPSG:4326 -t_srs
> '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
> lambert_mcd12_sep2109.vrt
> 
> then:
> 
> /usr/local/gdal/bin/gdal_translate -of AAIGrid -s_srs EPSG:4326 -t_srs
> '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' lambert_mcd12_sep2109.vrt
> lambert_mcd12_sep2109.asc
> 
> hope that helps,
> 
> regards,
> 
> -Kyle
> 
> 
> On Tue, Mar 2, 2010 at 8:57 AM, Bill Hudspeth <wbhk@unm.edu> wrote:
>         Hello,
>         
>         Thanks for responding. When I use gdalinfo --formats, I see
>         that AAIGrid
>         is included in the list of acceptable formats. However, when I
>         use
>         
>         /usr/local/gdal/bin/gdalwarp -of AAIGrid -s_srs EPSG:4326
>         -t_srs
>         '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
>         lambert_mcd12_sep2109.asc
>         
>         I get,
>         
>         Output driver `AAIGrid' not recognised or does not support
>         direct output file creation.  The following format drivers are
>         configured
>         and support direct output:
>          VRT: Virtual Raster
>          GTiff: GeoTIFF
>          NITF: National Imagery Transmission Format
>          HFA: Erdas Imagine Images (.img)
>          ELAS: ELAS
>          MEM: In Memory Raster
>          BMP: MS Windows Device Independent Bitmap
>          PCIDSK: PCIDSK Database File
>          ILWIS: ILWIS Raster Map
>          HDF4Image: HDF4 Dataset
>          PNM: Portable Pixmap Format (netpbm)
>          ENVI: ENVI .hdr Labelled
>          EHdr: ESRI .hdr Labelled
>          PAux: PCI .aux Labelled
>          MFF: Atlantis MFF Raster
>          MFF2: Atlantis MFF2 (HKV) Raster
>          BT: VTP .bt (Binary Terrain) 1.3 Format
>          IDA: Image Data and Analysis
>          RMF: Raster Matrix Format
>         
>         
>         ????
>         
>         
>         
>         
>         
>         
>         On Tue, 2010-03-02 at 08:50 +0100, Markus Neteler wrote:
>         > On Mon, Mar 1, 2010 at 7:12 PM, Bill Hudspeth <wbhk@unm.edu>
>         wrote:
>         > ...
>         > > When I try to re-project the exported AAIGrid to another
>         projection, I
>         > > use:
>         > >
>         > > gdalwarp -s_srs EPSG:4326 -t_srs '+proj=lcc +lat__1=33n
>         +lat_2=45n
>         > > +lon_0=97w' MODIS_output_latlong.asc
>         MODIS_output_lambert.asc
>         >
>         > Note that without -of format] you generate a GeoTIFF file...
>         >
>         > > While the resultant projection information looks correct,
>         > >
>         > > Driver: GTiff/GeoTIFF
>         >    ^^^^^^^^^^^^^^^^^^^^^^^
>         >
>         > > The resultant text file has only the following on the top
>         line:
>         >
>         > ... it is binary, not a text file. check
>         >
>         >  gdalwarp --formats
>         >
>         > for the available formats.
>         >
>         > Markus
>         
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
>         
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From matt.gregory at oregonstate.edu  Wed Mar  3 12:02:56 2010
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Mar  3 12:11:59 2010
Subject: [gdal-dev] Proposal to split this list into gdal-dev and
	gdal-users
In-Reply-To: <alpine.LRH.2.00.1003031103400.31291@calcutta.int.flora.ca>
References: <4B8E047A.9090804@gmail.com> <4B8E7E51.7010806@pobox.com>
	<alpine.LRH.2.00.1003031103400.31291@calcutta.int.flora.ca>
Message-ID: <1D673F86DDA00841A1216F04D1CE70D64183196507@EXCH2.nws.oregonstate.edu>

Russell McOrmand wrote:
>    As a user I appreciate the heads-up of the developer 
> conversations and the who-is-who of the administrative 
> conversations.  If the list were split into 3 I would try to 
> subscribe to all 3.

As an avid lurker, I'd echo this sentiment.  Much of the listserve traffic may be over my head, but it always presents opportunities to dig more into the guts of GDAL and recognize issues in my own code that I didn't realize I had.

My concern about a gdal-users list would be just what Frank mentions - namely that developers may not be as involved on such a list.  I'm always floored by how patient the developers of GDAL are and how very few threads go unaddressed.  Selfishly, I wouldn't want that resource split up.

thanks, matt

Matt Gregory
Faculty Research Assistant
Department of Forest Ecosystems and Society
Oregon State University

From ksshannon at gmail.com  Wed Mar  3 12:21:16 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Wed Mar  3 12:27:45 2010
Subject: [gdal-dev] Problems with gdalwarp re-projecting from lat-long to 
	Lambert Conformal
In-Reply-To: <1267634661.27263.3.camel@igor>
References: <1267467160.17855.14.camel@igor>
	<86782b611003012350u5b71ed62i859d83fe83808161@mail.gmail.com> 
	<1267545430.22993.9.camel@igor>
	<c28f2e141003021036l42adc4d6x3fbfd9ffc33b679e@mail.gmail.com> 
	<1267634661.27263.3.camel@igor>
Message-ID: <c28f2e141003030921y43a48c45vb7c6f32b01952aef@mail.gmail.com>

Yes, that is correct, that was a cut and paste mistake. You should not need
either -s_srs or -t_srs.

kss

-Kyle


On Wed, Mar 3, 2010 at 9:44 AM, Bill Hudspeth <wbhk@unm.edu> wrote:

> Thanks for the input Kyle. Just a quick question. In the second
> operation using gdal_translate, you indicate an -s_srs of EPSG:4326 for
> the *.vrt file. Wasn't the vrt file written in the Lambert projection in
> the first step? And if so, the second step could probably be done
> without having to specify either s_srs or t_srs?
>
> Is this true?
>
> Thanks again, Bill
>
> On Tue, 2010-03-02 at 11:36 -0700, Kyle Shannon wrote:
> > Bill,
> >
> > It may be necessary to create an intermediate file that supports
> > creation (I think the (rw+) flag on gdalinfo --formats shows which
> > formats support create, AAIGrid supports CreateCopy() but not
> > Create()).  Use gdalwarp to make a vrt file, then translate the file
> > to AAIGrid:
> >
> > /usr/local/gdal/bin/gdalwarp -of VRT -s_srs EPSG:4326 -t_srs
> > '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
> > lambert_mcd12_sep2109.vrt
> >
> > then:
> >
> > /usr/local/gdal/bin/gdal_translate -of AAIGrid -s_srs EPSG:4326 -t_srs
> > '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' lambert_mcd12_sep2109.vrt
> > lambert_mcd12_sep2109.asc
> >
> > hope that helps,
> >
> > regards,
> >
> > -Kyle
> >
> >
> > On Tue, Mar 2, 2010 at 8:57 AM, Bill Hudspeth <wbhk@unm.edu> wrote:
> >         Hello,
> >
> >         Thanks for responding. When I use gdalinfo --formats, I see
> >         that AAIGrid
> >         is included in the list of acceptable formats. However, when I
> >         use
> >
> >         /usr/local/gdal/bin/gdalwarp -of AAIGrid -s_srs EPSG:4326
> >         -t_srs
> >         '+proj=lcc +lat_1=33n +lat_2=45n +lon_0=97w' mcd12_sep2109.asc
> >         lambert_mcd12_sep2109.asc
> >
> >         I get,
> >
> >         Output driver `AAIGrid' not recognised or does not support
> >         direct output file creation.  The following format drivers are
> >         configured
> >         and support direct output:
> >          VRT: Virtual Raster
> >          GTiff: GeoTIFF
> >          NITF: National Imagery Transmission Format
> >          HFA: Erdas Imagine Images (.img)
> >          ELAS: ELAS
> >          MEM: In Memory Raster
> >          BMP: MS Windows Device Independent Bitmap
> >          PCIDSK: PCIDSK Database File
> >          ILWIS: ILWIS Raster Map
> >          HDF4Image: HDF4 Dataset
> >          PNM: Portable Pixmap Format (netpbm)
> >          ENVI: ENVI .hdr Labelled
> >          EHdr: ESRI .hdr Labelled
> >          PAux: PCI .aux Labelled
> >          MFF: Atlantis MFF Raster
> >          MFF2: Atlantis MFF2 (HKV) Raster
> >          BT: VTP .bt (Binary Terrain) 1.3 Format
> >          IDA: Image Data and Analysis
> >          RMF: Raster Matrix Format
> >
> >
> >         ????
> >
> >
> >
> >
> >
> >
> >         On Tue, 2010-03-02 at 08:50 +0100, Markus Neteler wrote:
> >         > On Mon, Mar 1, 2010 at 7:12 PM, Bill Hudspeth <wbhk@unm.edu>
> >         wrote:
> >         > ...
> >         > > When I try to re-project the exported AAIGrid to another
> >         projection, I
> >         > > use:
> >         > >
> >         > > gdalwarp -s_srs EPSG:4326 -t_srs '+proj=lcc +lat__1=33n
> >         +lat_2=45n
> >         > > +lon_0=97w' MODIS_output_latlong.asc
> >         MODIS_output_lambert.asc
> >         >
> >         > Note that without -of format] you generate a GeoTIFF file...
> >         >
> >         > > While the resultant projection information looks correct,
> >         > >
> >         > > Driver: GTiff/GeoTIFF
> >         >    ^^^^^^^^^^^^^^^^^^^^^^^
> >         >
> >         > > The resultant text file has only the following on the top
> >         line:
> >         >
> >         > ... it is binary, not a text file. check
> >         >
> >         >  gdalwarp --formats
> >         >
> >         > for the available formats.
> >         >
> >         > Markus
> >
> >
> >         _______________________________________________
> >         gdal-dev mailing list
> >         gdal-dev@lists.osgeo.org
> >         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100303/f2274a21/attachment.html
From ChiefDan at gmail.com  Wed Mar  3 13:20:29 2010
From: ChiefDan at gmail.com (ChiefDan)
Date: Wed Mar  3 13:20:30 2010
Subject: [gdal-dev] Compile error with --with-python
Message-ID: <1267640429069-4669408.post@n2.nabble.com>


I am seeing a very odd build error that seems to be happening in the
swig/python area.
For some reason on a "-L" options the directory name is getting spaces
between every character:

compile options: '-I../../port -I../../gcore -I../../alg -I../../ogr/
-I/usr/include/python2.5
-I/usr/lib/python2.5/site-packages/numpy/core/include
-I/home/xeniaprod/src/gdal-1.7.1/include -c'
g++ -pthread -shared -Wl,-O1 -Wl,-Bsymbolic-functions
build/temp.linux-i686-2.5/extensions/gdal_wrap.o -L../../.libs -L../../ - L
/ h o m e / x e n i a p r o d / s r c / g d a l - 1 . 7 . 1 / l i b -lgdal
-o build/lib.linux-i686-2.5/osgeo/_gdal.so

I then get a bunch of errors such as:
g++: L: No such file or directory
g++: h: No such file or directory
g++: o: No such file or directory

basically one per letter because I assume the spaces between each character
in the directory is fooling the process into thing each letter is a file. 
I am trying to compile under an Ubuntu installation.
My configure command line is:  ./configure --with-static-proj4 --with-png
--with-jpeg --with-sqlite3 --with-geotiff --with-python --with-tif
--without-odbcmake

Any pointers would be greatly appreciated!

Dan


-- 
View this message in context: http://n2.nabble.com/Compile-error-with-with-python-tp4669408p4669408.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ChiefDan at gmail.com  Wed Mar  3 14:00:54 2010
From: ChiefDan at gmail.com (ChiefDan)
Date: Wed Mar  3 14:00:56 2010
Subject: [gdal-dev] Re: Compile error with --with-python
In-Reply-To: <1267640429069-4669408.post@n2.nabble.com>
References: <1267640429069-4669408.post@n2.nabble.com>
Message-ID: <1267642854692-4669751.post@n2.nabble.com>


Another odd thing I see is if I "make" a second time without making any
changes, I don't get any errors.
It basically runs through all the directories, when it gets to the swig area
I see " `build' is up to date."

Dan
-- 
View this message in context: http://n2.nabble.com/Compile-error-with-with-python-tp4669408p4669751.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pablotcarreira at hotmail.com  Wed Mar  3 15:00:47 2010
From: pablotcarreira at hotmail.com (Pablo Carreira)
Date: Wed Mar  3 15:01:50 2010
Subject: [gdal-dev] OGR to Mysql problems
Message-ID: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>



 Hi, I'am trying to export some vectors to Mysql but I got the following problem:

ERROR 1: MySQL error message:Duplicate entry '1' for key 'OGR_FID'

For every vector it try to use the same OGR_FID and at the end It exports only the first vector becouse the other has duplicated FID.

Any help?

Thanks.

Pablo Torres Carreira


 		 	   		  
_________________________________________________________________
Navegue sem medo com o Internet Explorer 8. Clique aqui para instalar gratuitamente.
http://go.microsoft.com/?linkid=9707132
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100303/3794435d/attachment.html
From even.rouault at mines-paris.org  Wed Mar  3 15:08:33 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Mar  3 15:08:42 2010
Subject: [gdal-dev] OGR to Mysql problems
In-Reply-To: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>
References: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>
Message-ID: <201003032108.33861.even.rouault@mines-paris.org>

Pablo,

This could happen if you pass to CreateFeature() features that have the same 
id set by OGRFeature::SetFID() as being 1... Check with OGRFeature::GetFID() 
what you pass to CreateFeature().

Best regards,

Even

Le Wednesday 03 March 2010 21:00:47 Pablo Carreira, vous avez ?crit?:
>  Hi, I'am trying to export some vectors to Mysql but I got the following
> problem:
>
> ERROR 1: MySQL error message:Duplicate entry '1' for key 'OGR_FID'
>
> For every vector it try to use the same OGR_FID and at the end It exports
> only the first vector becouse the other has duplicated FID.
>
> Any help?
>
> Thanks.
>
> Pablo Torres Carreira
>
>
>
> _________________________________________________________________
> Navegue sem medo com o Internet Explorer 8. Clique aqui para instalar
> gratuitamente. http://go.microsoft.com/?linkid=9707132


From deadpickle at gmail.com  Wed Mar  3 15:43:49 2010
From: deadpickle at gmail.com (deadpickle)
Date: Wed Mar  3 15:43:52 2010
Subject: [gdal-dev] Driver pointer NULL
Message-ID: <7759c4b6-38d3-47b7-a81c-615c218419a5@s25g2000prd.googlegroups.com>

I have finally compiled my C program and tried running it for the
first time. When I ran the file I got the error:
[thor@updraft ~/Programs]$ ./gdal_test_convert
ERROR 10: Pointer 'hDriver' is NULL in 'OGR_Dr_CreateDataSource'.
I'm trying to load the ESRI Shapefile driver. When I compiled it I
linked it to the libgdal.a library. Is there something I'm missing?

#include "ogr_api.h"
#include "ogr_srs_api.h"
#include "stdio.h"

int main()
{
	//~ variable declaration
	const char *name = "testc.shp", *dir = "C:\\Users\\deadpickle\\Desktop
\\case study\\verify\\";
	char *source, *target;
	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
	const char *tprj = "WGS84";
	char c[100];
	OGRSFDriverH driver;
	OGRDataSourceH ds;
	OGRCoordinateTransformationH ctrans;
	OGRLayerH layer;
	OGRFieldDefnH fieldDefn;
	OGRGeometryH line;
	OGRFeatureDefnH featureDefn;
	OGRFeatureH feature;
	FILE *file;

	//~ working directory
	chdir(dir);

	//~ get driver and create ds
	driver = OGRGetDriverByName("ESRI Shapefile");
	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);

	//~ create spatrefs and trans
	OSRNewSpatialReference(source);
	OSRNewSpatialReference(target);
	OSRSetFromUserInput(source, sprj);
	OSRSetFromUserInput(target, tprj);
	ctrans = OCTNewCoordinateTransformation(target, source);

	//~ create the layer
	layer = OGR_DS_CreateLayer(ds, "test", source, wkbMultiLineString,
NULL);

	//~ add an id field
	fieldDefn = OGR_Fld_Create("id", OFTInteger);
	OGR_L_CreateField(layer, fieldDefn, FALSE);

	//~ create geometry
	line = OGR_G_CreateGeometry(wkbMultiLineString);

	//~ layer def and create feature
	featureDefn = OGR_L_GetLayerDefn(layer);
	feature = OGR_F_Create(featureDefn);

	//~ open file
	file = fopen("2006track.csv","r");

	if(file==NULL) {
		printf("Error: can't open file.\n");
		/* fclose(file); DON'T PASS A NULL POINTER TO fclose !! */
		return 1;
	}
	else {
		printf("File opened successfully. Contents:\n\n");

		while(fgets(c, 100, file)!=NULL) {
			/* keep looping until NULL pointer... */
			printf("String: %s", c);
			/* print the file one line at a time  */
		}

		printf("\n\nNow closing file...\n");
	}

	//~ close file
	fclose(file);
}
From warmerdam at pobox.com  Wed Mar  3 15:57:44 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar  3 15:57:37 2010
Subject: [gdal-dev] Driver pointer NULL
In-Reply-To: <7759c4b6-38d3-47b7-a81c-615c218419a5@s25g2000prd.googlegroups.com>
References: <7759c4b6-38d3-47b7-a81c-615c218419a5@s25g2000prd.googlegroups.com>
Message-ID: <4B8ECD48.9090502@pobox.com>

deadpickle wrote:
> I have finally compiled my C program and tried running it for the
> first time. When I ran the file I got the error:
> [thor@updraft ~/Programs]$ ./gdal_test_convert
> ERROR 10: Pointer 'hDriver' is NULL in 'OGR_Dr_CreateDataSource'.
> I'm trying to load the ESRI Shapefile driver. When I compiled it I
> linked it to the libgdal.a library. Is there something I'm missing?
> 
> #include "ogr_api.h"
> #include "ogr_srs_api.h"
> #include "stdio.h"
...
> 
> 	//~ get driver and create ds
> 	driver = OGRGetDriverByName("ESRI Shapefile");
> 	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);

Dead Pickle,

I believe you need to call OGRRegisterAll() before calling the get driver
function.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Wed Mar  3 15:58:47 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Mar  3 15:58:59 2010
Subject: [gdal-dev] Driver pointer NULL
In-Reply-To: <7759c4b6-38d3-47b7-a81c-615c218419a5@s25g2000prd.googlegroups.com>
References: <7759c4b6-38d3-47b7-a81c-615c218419a5@s25g2000prd.googlegroups.com>
Message-ID: <201003032158.48697.even.rouault@mines-paris.org>

Would you mind reading the "OGR C++ API Read/Write Tutorial" available on 
http://gdal.org/ogr/ogr_apitut.html ? The answer is in the first code 
snippet ;-)

Le Wednesday 03 March 2010 21:43:49 deadpickle, vous avez ?crit?:
> I have finally compiled my C program and tried running it for the
> first time. When I ran the file I got the error:
> [thor@updraft ~/Programs]$ ./gdal_test_convert
> ERROR 10: Pointer 'hDriver' is NULL in 'OGR_Dr_CreateDataSource'.
> I'm trying to load the ESRI Shapefile driver. When I compiled it I
> linked it to the libgdal.a library. Is there something I'm missing?
>
> #include "ogr_api.h"
> #include "ogr_srs_api.h"
> #include "stdio.h"
>
> int main()
> {
> 	//~ variable declaration
> 	const char *name = "testc.shp", *dir = "C:\\Users\\deadpickle\\Desktop
> \\case study\\verify\\";
> 	char *source, *target;
> 	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
> 	const char *tprj = "WGS84";
> 	char c[100];
> 	OGRSFDriverH driver;
> 	OGRDataSourceH ds;
> 	OGRCoordinateTransformationH ctrans;
> 	OGRLayerH layer;
> 	OGRFieldDefnH fieldDefn;
> 	OGRGeometryH line;
> 	OGRFeatureDefnH featureDefn;
> 	OGRFeatureH feature;
> 	FILE *file;
>
> 	//~ working directory
> 	chdir(dir);
>
> 	//~ get driver and create ds
> 	driver = OGRGetDriverByName("ESRI Shapefile");
> 	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);
>
> 	//~ create spatrefs and trans
> 	OSRNewSpatialReference(source);
> 	OSRNewSpatialReference(target);
> 	OSRSetFromUserInput(source, sprj);
> 	OSRSetFromUserInput(target, tprj);
> 	ctrans = OCTNewCoordinateTransformation(target, source);
>
> 	//~ create the layer
> 	layer = OGR_DS_CreateLayer(ds, "test", source, wkbMultiLineString,
> NULL);
>
> 	//~ add an id field
> 	fieldDefn = OGR_Fld_Create("id", OFTInteger);
> 	OGR_L_CreateField(layer, fieldDefn, FALSE);
>
> 	//~ create geometry
> 	line = OGR_G_CreateGeometry(wkbMultiLineString);
>
> 	//~ layer def and create feature
> 	featureDefn = OGR_L_GetLayerDefn(layer);
> 	feature = OGR_F_Create(featureDefn);
>
> 	//~ open file
> 	file = fopen("2006track.csv","r");
>
> 	if(file==NULL) {
> 		printf("Error: can't open file.\n");
> 		/* fclose(file); DON'T PASS A NULL POINTER TO fclose !! */
> 		return 1;
> 	}
> 	else {
> 		printf("File opened successfully. Contents:\n\n");
>
> 		while(fgets(c, 100, file)!=NULL) {
> 			/* keep looping until NULL pointer... */
> 			printf("String: %s", c);
> 			/* print the file one line at a time  */
> 		}
>
> 		printf("\n\nNow closing file...\n");
> 	}
>
> 	//~ close file
> 	fclose(file);
> }
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From deadpickle at gmail.com  Wed Mar  3 18:47:32 2010
From: deadpickle at gmail.com (deadpickle)
Date: Wed Mar  3 18:56:51 2010
Subject: [gdal-dev] Re: C GDAL beginner
In-Reply-To: <1267614951131-4666854.post@n2.nabble.com>
References: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
	<1267591683.2807.35.camel@winkey.org>
	<9159d8c4-c17d-4d66-aba8-55f74e01548b@u19g2000prh.googlegroups.com>
	<1267614951131-4666854.post@n2.nabble.com>
Message-ID: <774e6146-d9d5-4f42-bc66-8aac264509c0@b5g2000prd.googlegroups.com>

Thanks for the replies. Just as a note, the warnings are caused by the
variable being a const. Omitting the const solved it.
I'm not sure if this is a C program or a GDAL thing, thats why I'm not
sure where to post this at, but I get a segfault. I know segfaults are
generally caused by ordinary, and sometimes strange, syntax but it
involves a GDAL C API call, so I'll post it here. Basically, from what
I understand from printing, the esgfault is caused by
OSRSetFromUserInput(source, sprj);
where char *source;
 OSRNewSpatialReference(source);
 and const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";.
 what I'm wondering is if I'm calling these correctly? Is the proj4
string right? If they are then I'll redirect my questions else where.
Thanks.

#include "ogr_api.h"
#include "ogr_srs_api.h"
#include "stdio.h"

int main()
{
	//~ variable declaration
	const char *name = "testc.shp", *dir = "C:\\Users\\deadpickle\\Desktop
\\case study\\verify\\";
	char *source, *target;
	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
+lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
	const char *tprj = "WGS84";
	char c[100];
	OGRSFDriverH driver;
	OGRDataSourceH ds;
	OGRCoordinateTransformationH ctrans;
	OGRLayerH layer;
	OGRFieldDefnH fieldDefn;
	OGRGeometryH line;
	OGRFeatureDefnH featureDefn;
	OGRFeatureH feature;
	FILE *file;

	//~ working directory
	chdir(dir);

	OGRRegisterAll();

	//~ get driver and create ds
	driver = OGRGetDriverByName("ESRI Shapefile");
	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);

	if(ds == NULL) {
		printf("Creation of output file failed.\n");
		exit(1);
	}

	printf("HERE1\n");

	//~ create spatrefs and trans
	OSRNewSpatialReference(source);
	OSRNewSpatialReference(target);

	OSRSetFromUserInput(source, sprj);

	printf("HERE2\n");

	OSRSetFromUserInput(target, tprj);

	printf("HERE3\n");

	ctrans = OCTNewCoordinateTransformation(target, source);

	//~ create the layer
	layer = OGR_DS_CreateLayer(ds, "testc", source, wkbMultiLineString,
NULL);

	//~ add an id field
	fieldDefn = OGR_Fld_Create("id", OFTInteger);
	OGR_L_CreateField(layer, fieldDefn, FALSE);

	//~ create geometry
	line = OGR_G_CreateGeometry(wkbMultiLineString);

	//~ layer def and create feature
	featureDefn = OGR_L_GetLayerDefn(layer);
	feature = OGR_F_Create(featureDefn);

	//~ open file
	file = fopen("2006track.csv","r");

	if(file==NULL) {
		printf("Error: can't open file.\n");
		/* fclose(file); DON'T PASS A NULL POINTER TO fclose !! */
		return 1;
	}
	else {
		printf("File opened successfully. Contents:\n\n");

		while(fgets(c, 100, file)!=NULL) {
			/* keep looping until NULL pointer... */
			printf("String: %s", c);
			/* print the file one line at a time  */
		}

		printf("\n\nNow closing file...\n");
	}

	//~ close file
	fclose(file);
}


On Mar 3, 5:15?am, Mateusz Loskot <mate...@loskot.net> wrote:
> You need to buy a book about C/C++ or ask on comp.lang.c or comp.lang.c++
>
> Best regards,
>
> -----
> --
> Mateusz Loskothttp://mateusz.loskot.net
> --
> View this message in context:http://n2.nabble.com/gdal-dev-C-GDAL-beginner-tp4665330p4666854.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
From rush at winkey.org  Wed Mar  3 21:12:08 2010
From: rush at winkey.org (brian)
Date: Wed Mar  3 21:12:12 2010
Subject: [gdal-dev] Re: C GDAL beginner
In-Reply-To: <774e6146-d9d5-4f42-bc66-8aac264509c0@b5g2000prd.googlegroups.com>
References: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
	<1267591683.2807.35.camel@winkey.org>
	<9159d8c4-c17d-4d66-aba8-55f74e01548b@u19g2000prh.googlegroups.com>
	<1267614951131-4666854.post@n2.nabble.com>
	<774e6146-d9d5-4f42-bc66-8aac264509c0@b5g2000prd.googlegroups.com>
Message-ID: <1267668728.2807.71.camel@winkey.org>

I accedently replied off list so I will send it again with a couple of
additions.

deadpickle

One of c's drawbacks is its not safe unless you do it right, pointers
are very good at letting you access memory you don't own. To hunt down
such problems you can run your app under the valgrind utility on linux,
or another memory profiler on other systems.

You should use the doxygen docs to look up the functions you are calling
to see what there args are and what they return. 

http://www.gdal.org/ogr/ogr__srs__api_8h.html#6bfe88d5f18f2a8705f9e7a9586b795e

your discarding the return value and feeding it the wrong argument. 

source = OSRNewSpatialReference(NULL);

Chances are if it compiles with warnings you need to look real close at
that line.

Teaching a language is beyond the scope of this list. There are however
good resorces for that too. the irc networks freenode, efnet, and
undernet all have a #c channel, as mloskot mentioned there is also
comp.lang.c

Brian


On Wed, 2010-03-03 at 15:47 -0800, deadpickle wrote:
> Thanks for the replies. Just as a note, the warnings are caused by the
> variable being a const. Omitting the const solved it.
> I'm not sure if this is a C program or a GDAL thing, thats why I'm not
> sure where to post this at, but I get a segfault. I know segfaults are
> generally caused by ordinary, and sometimes strange, syntax but it
> involves a GDAL C API call, so I'll post it here. Basically, from what
> I understand from printing, the esgfault is caused by
> OSRSetFromUserInput(source, sprj);
> where char *source;
>  OSRNewSpatialReference(source);
>  and const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";.
>  what I'm wondering is if I'm calling these correctly? Is the proj4
> string right? If they are then I'll redirect my questions else where.
> Thanks.
> 
> #include "ogr_api.h"
> #include "ogr_srs_api.h"
> #include "stdio.h"
> 
> int main()
> {
> 	//~ variable declaration
> 	const char *name = "testc.shp", *dir = "C:\\Users\\deadpickle\\Desktop
> \\case study\\verify\\";
> 	char *source, *target;
> 	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
> 	const char *tprj = "WGS84";
> 	char c[100];
> 	OGRSFDriverH driver;
> 	OGRDataSourceH ds;
> 	OGRCoordinateTransformationH ctrans;
> 	OGRLayerH layer;
> 	OGRFieldDefnH fieldDefn;
> 	OGRGeometryH line;
> 	OGRFeatureDefnH featureDefn;
> 	OGRFeatureH feature;
> 	FILE *file;
> 
> 	//~ working directory
> 	chdir(dir);
> 
> 	OGRRegisterAll();
> 
> 	//~ get driver and create ds
> 	driver = OGRGetDriverByName("ESRI Shapefile");
> 	ds = OGR_Dr_CreateDataSource(driver, "testc.shp", NULL);
> 
> 	if(ds == NULL) {
> 		printf("Creation of output file failed.\n");
> 		exit(1);
> 	}
> 
> 	printf("HERE1\n");
> 
> 	//~ create spatrefs and trans
> 	OSRNewSpatialReference(source);
> 	OSRNewSpatialReference(target);
> 
> 	OSRSetFromUserInput(source, sprj);
> 
> 	printf("HERE2\n");
> 
> 	OSRSetFromUserInput(target, tprj);
> 
> 	printf("HERE3\n");
> 
> 	ctrans = OCTNewCoordinateTransformation(target, source);
> 
> 	//~ create the layer
> 	layer = OGR_DS_CreateLayer(ds, "testc", source, wkbMultiLineString,
> NULL);
> 
> 	//~ add an id field
> 	fieldDefn = OGR_Fld_Create("id", OFTInteger);
> 	OGR_L_CreateField(layer, fieldDefn, FALSE);
> 
> 	//~ create geometry
> 	line = OGR_G_CreateGeometry(wkbMultiLineString);
> 
> 	//~ layer def and create feature
> 	featureDefn = OGR_L_GetLayerDefn(layer);
> 	feature = OGR_F_Create(featureDefn);
> 
> 	//~ open file
> 	file = fopen("2006track.csv","r");
> 
> 	if(file==NULL) {
> 		printf("Error: can't open file.\n");
> 		/* fclose(file); DON'T PASS A NULL POINTER TO fclose !! */
> 		return 1;
> 	}
> 	else {
> 		printf("File opened successfully. Contents:\n\n");
> 
> 		while(fgets(c, 100, file)!=NULL) {
> 			/* keep looping until NULL pointer... */
> 			printf("String: %s", c);
> 			/* print the file one line at a time  */
> 		}
> 
> 		printf("\n\nNow closing file...\n");
> 	}
> 
> 	//~ close file
> 	fclose(file);
> }
> 
> 
> On Mar 3, 5:15 am, Mateusz Loskot <mate...@loskot.net> wrote:
> > You need to buy a book about C/C++ or ask on comp.lang.c or comp.lang.c++
> >
> > Best regards,
> >
> > -----
> > --
> > Mateusz Loskothttp://mateusz.loskot.net
> > --
> > View this message in context:http://n2.nabble.com/gdal-dev-C-GDAL-beginner-tp4665330p4666854.html
> > Sent from the GDAL - Dev mailing list archive at Nabble.com.
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-...@lists.osgeo.orghttp://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From warmerdam at pobox.com  Wed Mar  3 22:53:18 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar  3 22:52:59 2010
Subject: [gdal-dev] Re: C GDAL beginner
In-Reply-To: <774e6146-d9d5-4f42-bc66-8aac264509c0@b5g2000prd.googlegroups.com>
References: <daeff3c1-1748-414f-b373-fcc5e0802ec8@c37g2000prb.googlegroups.com>
	<1267591683.2807.35.camel@winkey.org>
	<9159d8c4-c17d-4d66-aba8-55f74e01548b@u19g2000prh.googlegroups.com>
	<1267614951131-4666854.post@n2.nabble.com>
	<774e6146-d9d5-4f42-bc66-8aac264509c0@b5g2000prd.googlegroups.com>
Message-ID: <4B8F2EAE.9080303@pobox.com>

deadpickle wrote:
> Thanks for the replies. Just as a note, the warnings are caused by the
> variable being a const. Omitting the const solved it.
> I'm not sure if this is a C program or a GDAL thing, thats why I'm not
> sure where to post this at, but I get a segfault. I know segfaults are
> generally caused by ordinary, and sometimes strange, syntax but it
> involves a GDAL C API call, so I'll post it here. Basically, from what
> I understand from printing, the esgfault is caused by
> OSRSetFromUserInput(source, sprj);
> where char *source;
>  OSRNewSpatialReference(source);
>  and const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";.
>  what I'm wondering is if I'm calling these correctly? Is the proj4
> string right? If they are then I'll redirect my questions else where.
...
> int main()
> {
> 	//~ variable declaration
> 	const char *name = "testc.shp", *dir = "C:\\Users\\deadpickle\\Desktop
> \\case study\\verify\\";
> 	char *source, *target;
> 	const char *sprj = "+proj=lcc +lat_1=33.000000 +lat_2=45.000000
> +lat_0=39.000000 +lon_0=-96.000000 +x_0=0.0 +y_0=0.0 +datum=NAD83";
> 	const char *tprj = "WGS84";
...
> 	//~ create spatrefs and trans
> 	OSRNewSpatialReference(source);
> 	OSRNewSpatialReference(target);

No, it's quite wrong.

It should be
         OGRSpatialReferenceH source, target;

         source = OSRNewSpatialReference(NULL);
         OSRSetFromUserInput( source, sprj );

         target = OSRNewSpatialReference(NULL);
         OSRSetFromUserInput( target, tprj );

...
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From agnesyipck at gmail.com  Thu Mar  4 01:51:20 2010
From: agnesyipck at gmail.com (agnes123)
Date: Thu Mar  4 01:51:23 2010
Subject: [gdal-dev] transformation from WGS84 to Sphere
Message-ID: <1267685480607-4672744.post@n2.nabble.com>


Dear all,

i am trying to projection a shapefile from geodatic projection in WGS84
datum to geodatic projection in sphere datum by using the utility "ogr2ogr
".

I defined the original projection as:
'+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'

and the target projection as :
'+proj=longlat +a=6370997 +b=6370997 +no_defs'

but the result seems no change as compare with the one in WGS84 datum. Did i
miss out something in the above projection definition or ogr2ogr does not
support the datum transformation between WGS84 and sphere? 

Regards,
Agnes
-- 
View this message in context: http://n2.nabble.com/transformation-from-WGS84-to-Sphere-tp4672744p4672744.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From sherstad at gmail.com  Thu Mar  4 02:07:48 2010
From: sherstad at gmail.com (Sigbjorn Herstad)
Date: Thu Mar  4 02:07:52 2010
Subject: [gdal-dev] Copy / manipulate TIFF-header
In-Reply-To: <6ba94d771003020144o78dd6336l7fe88296c8446883@mail.gmail.com>
References: <6ba94d771003020144o78dd6336l7fe88296c8446883@mail.gmail.com>
Message-ID: <6ba94d771003032307r2eb99b72ve6e5d5f903ca7f77@mail.gmail.com>

Hi,

This is my first post here, but have followed the list for several
years. I am trying to find a good way to edit a GeoTIFF-header. I have
looked at the Python-script and listgeo and geotifcp mentioned here:
http://lists.osgeo.org/pipermail/gdal-dev/2008-April/016752.html

Using the Python-script updates the header of a given GeoTIFF- however
not with all parameters I need. Using the listgeo and geotifcp a new
file is written so update is not possible (like in the Python-script)
- ie reprocessing all files are necessary. I am thinking about
creating a Python-script which will update / delete / add certain
attributes from a GeoTIFF-file, but I am not sure if this is possible?
I do NOT want to create a new file with the changed GeoTIFF-header,
but update the already existing one.

Here are some of the TAGS I wish to DELETE or CHANGE:
GTModelTypeGeoKey (Short,1):
GTRasterTypeGeoKey (Short,1):
GTCitationGeoKey (Ascii,8):
GeogCitationGeoKey (Ascii,7):
GeogAngularUnitsGeoKey (Short,1):
ProjectedCSTypeGeoKey (Short,1):
ProjLinearUnitsGeoKey (Short,1):
GCS:
Datum:
Ellipsoid:

Greetings
SigTill
From jrepetto at free.fr  Thu Mar  4 02:08:04 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Mar  4 02:08:15 2010
Subject: [gdal-dev] transformation from WGS84 to Sphere
In-Reply-To: <1267685480607-4672744.post@n2.nabble.com>
References: <1267685480607-4672744.post@n2.nabble.com>
Message-ID: <4B8F5C54.6090500@free.fr>

agnes123 a ?crit :
> 
> i am trying to projection a shapefile from geodatic projection in WGS84
> datum to geodatic projection in sphere datum by using the utility "ogr2ogr
> ".
> 
> I defined the original projection as:
> '+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs'
> 
> and the target projection as :
> '+proj=longlat +a=6370997 +b=6370997 +no_defs'
> 
> but the result seems no change as compare with the one in WGS84 datum. Did i
> miss out something in the above projection definition or ogr2ogr does not
> support the datum transformation between WGS84 and sphere? 


Hello,

The target parameters you have used define a spheroid, but not a datum. 
Try to add the +towgs84=0,0,0,0,0,0,0 parameter.

Jean-Claude
From vinod.bholla at gmail.com  Thu Mar  4 02:23:32 2010
From: vinod.bholla at gmail.com (vinod bholla)
Date: Thu Mar  4 02:53:56 2010
Subject: [gdal-dev] vinod bholla wants to chat
Message-ID: <f488e0471003032323x37a5cf2i@mail.gmail.com>

-----------------------------------------------------------------------

vinod bholla wants to stay in better touch using some of Google's coolest new
products.

If you already have Gmail or Google Talk, visit:
http://mail.google.com/mail/b-455a70fe1d-e51478d95e-49786f79528d309f
You'll need to click this link to be able to chat with vinod bholla.

To get Gmail - a free email account from Google with over 2,800 megabytes of
storage - and chat with vinod bholla, visit:
http://mail.google.com/mail/a-455a70fe1d-e51478d95e-49786f79528d309f

Gmail offers:
- Instant messaging right inside Gmail
- Powerful spam protection
- Built-in search for finding your messages and a helpful way of organizing
  emails into "conversations"
- No pop-up ads or untargeted banners - just text ads and related information
  that are relevant to the content of your messages

All this, and its yours for free. But wait, there's more! By opening a Gmail
account, you also get access to Google Talk, Google's instant messaging
service:

http://www.google.com/talk/

Google Talk offers:
- Web-based chat that you can use anywhere, without a download
- A contact list that's synchronized with your Gmail account
- Free, high quality PC-to-PC voice calls when you download the Google Talk
  client

We're working hard to add new features and make improvements, so we might also
ask for your comments and suggestions periodically. We appreciate your help in
making our products even better!

Thanks,
The Google Team

To learn more about Gmail and Google Talk, visit:
http://mail.google.com/mail/help/about.html
http://www.google.com/talk/about.html

(If clicking the URLs in this message does not work, copy and paste them into
the address bar of your browser).
From daniele.romagnoli at geo-solutions.it  Thu Mar  4 06:53:36 2010
From: daniele.romagnoli at geo-solutions.it (Daniele Romagnoli)
Date: Thu Mar  4 06:53:39 2010
Subject: [gdal-dev] SWIG Java Bindings: ColorTable -> IndexColorModel
	improvement proposal [#3455]
Message-ID: <7221db411003040353g49c9ec0bg812f57d3eaf3d8b2@mail.gmail.com>

Hi list,
I have just opened a ticket (#3455) to propose an improvement in the SWIG
Java Bindings about how to get an IndexColorModel from a ColorTable when
there are special cases involving transparency/alpha values.
Feedbacks and reviews are very welcome.
Best Regards,

Daniele


[1]: http://trac.osgeo.org/gdal/attachment/ticket/3455
-- 
-------------------------------------------------------
Eng. Daniele Romagnoli
Software Engineer

GeoSolutions S.A.S.
Via Carignoni 51
55041 Camaiore (LU)
Italy

phone: +39 0584983027
fax:     +39 0584983027
mob:   +39 328 0559267


http://www.geo-solutions.it

-------------------------------------------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100304/0a6e01ac/attachment.html
From pablotcarreira at hotmail.com  Thu Mar  4 07:27:28 2010
From: pablotcarreira at hotmail.com (Pablo Carreira)
Date: Thu Mar  4 07:27:32 2010
Subject: [gdal-dev] OGR to Mysql problems
In-Reply-To: <201003032108.33861.even.rouault@mines-paris.org>
References: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>,
	<201003032108.33861.even.rouault@mines-paris.org>
Message-ID: <SNT114-W64C82F8F9C7D96F798FED6D6390@phx.gbl>


Hi Even,
 I don't know much of programming. I'am using the GRASS v.out.ogr tool to export from GRASS to Mysql.
Do you think it's a GRASS bug?
I had tryied ogr2ogr from command line in windows but I got this error:

c:\>ogr2ogr -f mysql MYSQL:geodados,user=root,password=xxxxxx,host=localhost /grassdata/utmwgs23/geral/vector/areas_recuperacao_trabalhado/head -overwrite -lco spatial_index=no

Warning 1: GRASS warning: Line? of ellipsoid table file <c:\osgeo4w\apps\grass\grass-6.a.0svn/etc/ellipse.table> is invalid
.
.
.
More than 1000 errors or warnings have been reported. No more will be reported from now.

Thank you very much.

Pablo.


>Pablo,
 
>This could happen if you pass to CreateFeature() features that have the same 
>id set by OGRFeature::SetFID() as being 1... Check with OGRFeature::GetFID() 
>what you pass to CreateFeature().
 
>Best regards,
 
>Even
 ------------------------------
Le Wednesday 03 March 2010 21:00:47 Pablo Carreira, vous avez ?crit :
>  Hi, I'am trying to export some vectors to Mysql but I got the following
> problem:
>
> ERROR 1: MySQL error message:Duplicate entry '1' for key 'OGR_FID'
>
> For every vector it try to use the same OGR_FID and at the end It exports
> only the first vector becouse the other has duplicated FID.
>
> Any help?
>
> Thanks.
>
> Pablo Torres Carreira
>
>
>
> _________________________________________________________________
> Navegue sem medo com o Internet Explorer 8. Clique aqui para instalar
> gratuitamente. http://go.microsoft.com/?linkid=9707132
 
  		 	   		  
_________________________________________________________________
Com o Internet Explorer 8 voc? fica mais protegido contra amea?as da web. Saiba mais.
http://go.microsoft.com/?linkid=9707132
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100304/f3dfb388/attachment.html
From shukla_abhishek at satyam.com  Thu Mar  4 08:18:19 2010
From: shukla_abhishek at satyam.com (Abhishek_Nabble)
Date: Thu Mar  4 08:18:22 2010
Subject: [gdal-dev] error in building gdal-1.6.3 in Linux(Fedora 9)
Message-ID: <1267708699411-4674196.post@n2.nabble.com>


Hi,
 I am trying to build gdal-1.6.3 in Linux(Fedora 9).
 I am trying the following commands:
 #./configure
 #make
 #make install (not yet done)
 
 However, once I run make, I am getting following error:
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_easy_perform'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_easy_getinfo'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to `curl_easy_init'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_slist_append'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_multi_add_handle'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to `curl_multi_fdset'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to `curl_multi_init'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_easy_cleanup'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_multi_perform'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_multi_cleanup'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_multi_remove_handle'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_slist_free_all'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to
`curl_multi_info_read'
/home/gdal-1.6.3/.libs/libgdal.so: undefined reference to `curl_easy_setopt'

I am not sure what is causing the problem and how to resolve it.

/******************************************************************************/
In case you want to see the output of ./configure, its given below:

GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -g -O2
  C++ compiler:              g++ -g -O2

  LIBTOOL support:           yes

  LIBZ support:              external
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NetCDF support:            no
  LIBPNG support:            external
  LIBTIFF support:           external (BigTIFF=no)
  LIBGEOTIFF support:        internal
  LIBJPEG support:           external
  LIBGIF support:            external
  OGDI support:              no
  HDF4 support:              no
  HDF5 support:              no
  Kakadu support:            no
  JasPer support:            no
  ECW support:               no
  MrSID support:             no
  MSG support:               no
  GRIB support:              yes
  cURL support (wms/wcs/...):yes
  PostgreSQL support:        no
  MySQL support:             no
  Ingres support:            no
  Xerces-C support:          yes
  NAS support:               no
  Expat support:             yes
  ODBC support:              no
  PGeo support:              no
  OCI support:               no
  GEORASTER support:         no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  DWGdirect support          no
  INFORMIX DataBlade support:no
  GEOS support:              no


  Old-gen python          no
  SWIG Bindings:          no

  Statically link PROJ.4:    no
  enable OGR building:       yes
  enable pthread support:    no
  hide internal symbols:     no
/****************************************************/

 Thanks in advance,
 Abhishek Shukla
-- 
View this message in context: http://n2.nabble.com/error-in-building-gdal-1-6-3-in-Linux-Fedora-9-tp4674196p4674196.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ChiefDan at gmail.com  Thu Mar  4 08:19:34 2010
From: ChiefDan at gmail.com (ChiefDan)
Date: Thu Mar  4 08:19:35 2010
Subject: [gdal-dev] Re: Compile error with --with-python
In-Reply-To: <1267640429069-4669408.post@n2.nabble.com>
References: <1267640429069-4669408.post@n2.nabble.com>
Message-ID: <1267708774481-4674203.post@n2.nabble.com>


I grabbed the gdal-1.6.3.tar.gz  release and ran through the make with no
issues.
Perhaps something has changed in the latest release make scripts somewhere?



Dan


-- 
View this message in context: http://n2.nabble.com/Compile-error-with-with-python-tp4669408p4674203.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From neteler at osgeo.org  Thu Mar  4 10:22:49 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Thu Mar  4 10:23:19 2010
Subject: [gdal-dev] OGR to Mysql problems
In-Reply-To: <SNT114-W64C82F8F9C7D96F798FED6D6390@phx.gbl>
References: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>
	<201003032108.33861.even.rouault@mines-paris.org> 
	<SNT114-W64C82F8F9C7D96F798FED6D6390@phx.gbl>
Message-ID: <86782b611003040722q68cf6c9cy890cd273e1098621@mail.gmail.com>

On Thu, Mar 4, 2010 at 1:27 PM, Pablo Carreira
<pablotcarreira@hotmail.com> wrote:
> Hi Even,
>  I don't know much of programming. I'am using the GRASS v.out.ogr tool to
> export from GRASS to Mysql.
> Do you think it's a GRASS bug?

Hi Pablo,

how old is your GRASS version?

> I had tryied ogr2ogr from command line in windows but I got this error:
>
> c:\>ogr2ogr -f mysql MYSQL:geodados,user=root,password=xxxxxx,host=localhost
> /grassdata/utmwgs23/geral/vector/areas_recuperacao_trabalhado/head
> -overwrite -lco spatial_index=no
>
> Warning 1: GRASS warning: Line? of ellipsoid table file
> <c:\osgeo4w\apps\grass\grass-6.a.0svn/etc/ellipse.table> is invalid

I observe that there is a mixture of \ and / mixed...  (also
grass-6.a.0svn is funny,
note the "a"?).

OSGeo4W-GRASS has been updated recently and should have all needed fixes
for the \ and / confusion. Perhaps it comes from the GRASS-GDAL plugin? I darkly
remember that it opens the ellipsoid table.

Markus
From pablotcarreira at hotmail.com  Thu Mar  4 10:51:42 2010
From: pablotcarreira at hotmail.com (Pablo Carreira)
Date: Thu Mar  4 10:51:46 2010
Subject: [gdal-dev] OGR to Mysql problems
In-Reply-To: <86782b611003040722q68cf6c9cy890cd273e1098621@mail.gmail.com>
References: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>
	<201003032108.33861.even.rouault@mines-paris.org>,
	<SNT114-W64C82F8F9C7D96F798FED6D6390@phx.gbl>,
	<86782b611003040722q68cf6c9cy890cd273e1098621@mail.gmail.com>
Message-ID: <SNT114-W1430E3EA146C9EAD53B11AD6390@phx.gbl>


Hi Markus, after your email I have some new results:

1)With ogr2ogr:
SET GISBASE=C:\OSGeo4W\apps\grass\grass-6.4.0svn

ogr2ogr -f mysql MYSQL:geodados,user=root,password=rcamargo,host=localhost
/grassdata/utmwgs23/geral/vector/areas_recuperacao_trabalhado/head 
-overwrite -lco spatial_index=no -nln areas

It worked very well!! I think the problem was with the GISBASE path (the \ / mixture and the "a").


2)With v.out.ogr:
v.out.ogr --verbose input=areas_recuperacao_trabalhado@geral 
type=area dsn=MYSQL:geodados,user=root,password=rcamargo,host=localhost 
format=MySQL olayer=teste3 -c lco=spatial_index=no

I still get the error: 
"ERROR 1: MySQL error message:Duplicate entry '1' for key 'OGR_FID'"
and only one row created at Mysql

My GRASS is the latest OSGeo4W version.

Pablo.



On Thu, Mar 4, 2010 at 1:27 PM, Pablo Carreira
<pablotcarreira@hotmail.com> wrote:
> Hi Even,
>  I don't know much of programming. I'am using the GRASS v.out.ogr tool to
> export from GRASS to Mysql.
> Do you think it's a GRASS bug?
 
Hi Pablo,
 
how old is your GRASS version?
 
> I had tryied ogr2ogr from command line in windows but I got this error:
>
> c:\>ogr2ogr -f mysql MYSQL:geodados,user=root,password=xxxxxx,host=localhost
> /grassdata/utmwgs23/geral/vector/areas_recuperacao_trabalhado/head
> -overwrite -lco spatial_index=no
>
> Warning 1: GRASS warning: Line? of ellipsoid table file
> <c:\osgeo4w\apps\grass\grass-6.a.0svn/etc/ellipse.table> is invalid
 
I observe that there is a mixture of \ and / mixed...  (also
grass-6.a.0svn is funny,
note the "a"?).
 
OSGeo4W-GRASS has been updated recently and should have all needed fixes
for the \ and / confusion. Perhaps it comes from the GRASS-GDAL plugin? I darkly
remember that it opens the ellipsoid table.
 
Markus 		 	   		  
_________________________________________________________________
Navegue sem medo: O Internet Explorer 8 te deixa mais protegido. Baixe gratuitamente.
http://go.microsoft.com/?linkid=9707132
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100304/2e9345d5/attachment-0001.html
From neteler at osgeo.org  Thu Mar  4 10:57:43 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Thu Mar  4 10:58:06 2010
Subject: [gdal-dev] OGR to Mysql problems
In-Reply-To: <SNT114-W1430E3EA146C9EAD53B11AD6390@phx.gbl>
References: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>
	<201003032108.33861.even.rouault@mines-paris.org> 
	<SNT114-W64C82F8F9C7D96F798FED6D6390@phx.gbl>
	<86782b611003040722q68cf6c9cy890cd273e1098621@mail.gmail.com> 
	<SNT114-W1430E3EA146C9EAD53B11AD6390@phx.gbl>
Message-ID: <86782b611003040757v53446c57l257218a35fd5b8c5@mail.gmail.com>

On Thu, Mar 4, 2010 at 4:51 PM, Pablo Carreira
<pablotcarreira@hotmail.com> wrote:
> Hi Markus, after your email I have some new results:
>
> 1)With ogr2ogr:
> SET GISBASE=C:\OSGeo4W\apps\grass\grass-6.4.0svn
>
> ogr2ogr -f mysql MYSQL:geodados,user=root,password=rcamargo,host=localhost
> /grassdata/utmwgs23/geral/vector/areas_recuperacao_trabalhado/head
> -overwrite -lco spatial_index=no -nln areas
>
> It worked very well!!

So the plugin seems to work ok, good.

> I think the problem was with the GISBASE path (the \ /  mixture and the "a").
>
>
> 2)With v.out.ogr:
> v.out.ogr --verbose input=areas_recuperacao_trabalhado@geral
> type=area dsn=MYSQL:geodados,user=root,password=rcamargo,host=localhost
> format=MySQL olayer=teste3 -c lco=spatial_index=no
>
> I still get the error:
> "ERROR 1: MySQL error message:Duplicate entry '1' for key 'OGR_FID'"
> and only one row created at Mysql
>
> My GRASS is the latest OSGeo4W version.

Please file a bug report with the needed details.

Markus
From pablotcarreira at hotmail.com  Thu Mar  4 11:21:26 2010
From: pablotcarreira at hotmail.com (Pablo Carreira)
Date: Thu Mar  4 11:21:29 2010
Subject: [gdal-dev] OGR to Mysql problems
In-Reply-To: <86782b611003040757v53446c57l257218a35fd5b8c5@mail.gmail.com>
References: <SNT114-W51063038F6796782B03D6BD63A0@phx.gbl>
	<201003032108.33861.even.rouault@mines-paris.org>,
	<SNT114-W64C82F8F9C7D96F798FED6D6390@phx.gbl>
	<86782b611003040722q68cf6c9cy890cd273e1098621@mail.gmail.com>,
	<SNT114-W1430E3EA146C9EAD53B11AD6390@phx.gbl>,
	<86782b611003040757v53446c57l257218a35fd5b8c5@mail.gmail.com>
Message-ID: <SNT114-W20412E824A777869AB279CD6390@phx.gbl>


> > 2)With v.out.ogr:
> > I still get the error:
> > "ERROR 1: MySQL error message:Duplicate entry '1' for key 'OGR_FID'"
> > and only one row created at Mysql
> 
> Please file a bug report with the needed details.
> 
> Markus

Done.

Thanks for the help.

Pablo.
 		 	   		  
_________________________________________________________________
Quer transformar suas fotos em emoticons para Messenger? Conhe?a o I Love Messenger.
http://ilm.windowslive.com.br/?ocid=ILM:ILM:Hotmail:Tagline:1x1:Tagline
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100304/17637bcd/attachment.html
From ggp08ctl at sheffield.ac.uk  Thu Mar  4 16:55:15 2010
From: ggp08ctl at sheffield.ac.uk (ggp08ctl)
Date: Thu Mar  4 16:55:17 2010
Subject: [gdal-dev] gdal_translate pixel shift?
Message-ID: <1267739715436-4677510.post@n2.nabble.com>


Hello,

I am in the process of using some Gebco bathymetry data for a project,
visualising it with Arcgis 9.3. I am using osgeo4w/ gdal to convert the
gebco netcdf file to a geotif, for use in arcmap.

I wondered if someone might be able to offer a hint to a relative beginner?
I am having what I think is a projection issue with the gebco data, as
translated in gdal using the command 'gdal_translate -a_srs EPSG:4326
gebco_08.nc'.

As part of my project, I have converted the gebco_08 data from nc to tif,
and then removed the srtm30 land topography that is part of the gebco file,
so as to just use the bathymetry data, and then added the higher resolution
esri supplied srtm3 land topography data instead. I notice that once I have
converted and displayed the gebco file (now a tif) in arcmap, that it does
not align neatly with the edge of the srtm3 data. Even when taking into
account the difference in pixel size between the two datasets there is still
a displacement between the two, with the gebco appearing 'shifted' too far
north or north-west relative to the srtm3 by as much as maybe approx one
gebco pixel. Both datasets are lat long GCS_WGS_1984. Can anyone offer me
advice as to what might be causing this. I wonder if there  might be a bug
in the gdal_translate package, or whether EPSG:4326 is the most accurate
projection for me to use in this instance. I would really appreciate any
advice, especially if I am missing something obvious.

Regards,
Chris

-- 
View this message in context: http://n2.nabble.com/gdal-translate-pixel-shift-tp4677510p4677510.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Jonathan.Shaw at gdc4s.com  Thu Mar  4 17:03:10 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Thu Mar  4 17:04:19 2010
Subject: [gdal-dev] Memory access violation with GDALGetRandomRasterSample
	and NITF/JPEG2000
Message-ID: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com>

I am using GDALGetRandomRasterSample() to determine scale values for
16-bit per band map sources that I'm processing. What I've found is that
for my NITF files that use JPEG2000 subimages,
GDALGetRandomRasterSample() takes a long time to run and consumes a lot
of memory (~800 MB RAM for a 540 MB NITF). The memory is not released
until the source is closed (with GDALClose()).

One of my sources causes GDAL or the source driver (NITF? JP2ECW?
JP2MrSID?) to commit an access violation by attempting to read or write
addresses 0x0 or 0x4, for instance. This is a larger map (9132x37889
pixels, a 1.2 gigabyte file). Watching in the debugger, I can that
GDALGetRandomRasterSample() takes about 90 seconds or so on the first
raster band. At this point it is using over 900 MB RAM. Maybe 10 seconds
in to processing the second raster band, it crashes with the access
violation (at around a gig of memory usage, maybe less).

The problem can be reproduced by running gdalinfo on the source, with
the -sample option. The -stats option also fails, but only once it
reaches/exceeds 2 gigs memory usage.

Here is what I've attempted so far:

 * FWTools 2.4.7 (1.7.0b2) and 2.2.8 (1.6.0?), on Windows XP x64 (8 gigs
RAM) and in a 32-bit
   virtual machine (2 gigs). My target environment is 32-bit XP.

 * I set GDAL_CACHEMAX to 900 MB, but have also tried 100 MB.

 * I tried setting GDAL_ECW_CACHE_MAXMEM to 200 MB. This appears to make
   no difference whatsoever, so I'm not positive that I'm using the
   JP2ECW driver. "gdalinfo --formats" shows both JP2ECW and JP2MrSID.

 * I've tried opening the large NITF in OpenEV under both 2.4.7 and
2.2.8.
   It takes a while, prompts me to select which subdataset (there are
2),
   I select the subdataset and then it processes for a long time and
   eventually crashes. Basically, it's the same behavior I see from my
   own code.

 * I also tried building GDAL myself from the 1.7.1 sources, but I
cannot
   build the ECW driver because I do not have the required third party
   products. Perhaps because of this, I also could not figure out how to
   step into the GDAL sources for the driver from my VS2008 SP1
debugger.

 * I tried copying the GDALGetRandomRasterSample() into my code and
   stepped through it. The large memory allocations occur when
   GetLockedBlockRef() is called. For these NITF/JPEG2000 files, the
   memory is never released by DropLock().

 * The memory appears to be released when the source dataset is
destructed
   with GDALClose(). This might be a workaround for me, i.e. process one
   band at a time, closing and reopening the file between bands, but I
am
   still concerned about my target platform running out of RAM, and the
   long time that this takes.

 * I'm also considering making a temporary, much smaller GeoTIFF from
the
   source and then computing the scale values from the smaller file. I
   haven't tried this, yet, and would prefer an approach that runs
   quickly with low memory.

Is this a known problem for NITF or JPEG2000 files? Is there a way to
see which JPEG2000 driver is used and to switch it to the other one? Any
other suggestions?

Thanks,
Jonathan

From warmerdam at pobox.com  Thu Mar  4 17:33:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar  4 17:33:20 2010
Subject: [gdal-dev] Memory access violation with
	GDALGetRandomRasterSample and NITF/JPEG2000
In-Reply-To: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com>
References: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com>
Message-ID: <4B903543.3080402@pobox.com>

Shaw, Jonathan-P29740 wrote:
> Is this a known problem for NITF or JPEG2000 files? Is there a way to
> see which JPEG2000 driver is used and to switch it to the other one? Any
> other suggestions?

Jonathan,

The gdalinfo command should report the driver used for a file.  It's
the first piece of information reported.  Sometimes adding "--debug on"
can also be helpful to report details of what is going on internally.
For jpeg2000 in nitf you will need this to find out what jpeg2000 driver
is getting used for the jpeg2000 data stream.

The random sample function is likely setting a lot of views to get
bits of data which is terribly slow with any of the jpeg2000 drivers.
There was also a problem detected in some versions of the ecw library
that may be causing your problem.  It is documented at:

   http://trac.osgeo.org/mapserver/ticket/3245

I have not made any effort to incorporate the fix into FWTools, and
I'm hesitant too.  The ECW support in OSGeo4W uses the latest DLLs
from Erdas and may not have the same problem, though I understand getting
the DLLs from Leica is not as easy as it used to be.

OSGeo4W does have good MrSID support (with the mrsid plugin) which
also gives jpeg2000 support.  You might aim for that instead of
depending on ECW jpeg2000 support.

It is also possible/likely that the JP2MrSID driver will actually
pull the samples from a high overview and be much faster than the full
res sampling that occurs with the ecw driver (due to an unfortunate
approach to overviews in the ecw driver I wrote).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Jonathan.Shaw at gdc4s.com  Thu Mar  4 18:06:12 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Thu Mar  4 18:06:17 2010
Subject: [gdal-dev] Memory access violation withGDALGetRandomRasterSample
	and NITF/JPEG2000
In-Reply-To: <4B903543.3080402@pobox.com>
References: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com>
	<4B903543.3080402@pobox.com>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF702386220@AZ25EXM03.gddsi.com>

Ah -- turning on the debug logging reveals JP2ECW messages (below).

I will definitely take a look at OSGeo4W. Out of curiosity, is there a
programmatic way to force the NITF driver to use JP2MrSID (which is also
in FWTools 2.4.7) rather than the ECW driver? Or to disable the ECW
driver altogether?


ECW: NCScbmOpenFileView(/vsisubfile/3695_1180575911,file.ntf): eErr = 2
ECW: Got mutex.
ECW: FileInfo: SizeXY=9132,37889 Bands=4
       OriginXY=0,0  CellIncrementXY=1,1

ECW: projection=RAW, datum=RAW
GDAL: GDALOpen(/vsisubfile/3695_1180575911,file.ntf, this=031B52D0)
succeeds as JP2ECW.
GDAL: GDALOpen(file.ntf, this=0105FB88) succeeds as NITF.
GDAL: GDALDefaultOverviews::OverviewScan()
OGRCT: Source: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
OGRCT: Target: +proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs
GDAL: GDALClose(/vsisubfile/3695_1180575911,file.ntf, this=031B52D0)
GDAL: GDALClose(file.ntf, this=0105FB88)
GDAL: GDALDeregister_GTiff() called.



Thanks again,
Jonathan

From sjgardner at wisc.edu  Thu Mar  4 18:57:00 2010
From: sjgardner at wisc.edu (Spencer Gardner)
Date: Thu Mar  4 18:57:03 2010
Subject: [gdal-dev] SetSpatialFilter not working?
In-Reply-To: <4B8BED11.4030106@pobox.com>
References: <6f80a9d8dfeee.4b8b86fa@wiscmail.wisc.edu>
	<4B8BED11.4030106@pobox.com>
Message-ID: <7100ecdc4dd5.4b8ff46c@wiscmail.wisc.edu>

I'm writing a script with 2 primary layers, a road layer and an intersection layer.  I have designed the script to cycle through the intersections and remove any that have less than 3 road segments connected to it.  I have set a buffer of 1 foot to account for any misalignment.  The script runs just fine (using almost 24,000 intersection nodes) but doesn't identify any intersections for removal.

After troubleshooting, I have found that counting the road features after setting the spatial filter returns an unusually high number of road segments (usually between 9 and 12) for each intersection so that no intersection returns less than 3 segments.  The same phenomenon occurs if I remove the 1-foot buffer.  If I test the layers in ArcView by selecting roads that intersect a specific node, the result is correct.  Is there something in my code that could be causing this problem?  The documentation says the SetSpatialFilter method "may be inaccurately implemented" - would this be a symptom of this problem?  Is there another way of doing this type of analysis?

Thanks for the help.  Please excuse my lack of knowledge as I'm fairly new to this.

Spencer Gardner
University of Wisconsin-Madison
Department of Urban and Regional Planning





# import modules

import os, sys
try:
  from osgeo import ogr

except:
  import ogr

startDir = os.getcwd()

tempDir = '/tmp'

# set the working directory

os.chdir(startDir + '/Roads')



# get the shapefile driver

driver = ogr.GetDriverByName('ESRI Shapefile')



# open nodes.shp and get the layer

nodesDS = driver.Open('nodesdelete.shp', 0)

if nodesDS is None:

  print 'Could not open nodesdelete.shp'

  sys.exit(1)

nodesLayer = nodesDS.GetLayer()



# open 2009roads.shp and get the layer

roadsDS = driver.Open('2009roads.shp', 0)

if roadsDS is None:

  print 'Could not open 2009roads.shp'

  sys.exit(1)

roadsLayer = roadsDS.GetLayer()
print 'found' + str(roadsLayer.GetFeatureCount()) + 'total road features'

# set up the array to store id's to be deleted
deleteNodes = []


# set up the progress bar
count = 1
totalNodes = nodesLayer.GetFeatureCount()
print 'found ' + str(totalNodes) + 'total nodes'

# loop through each node to count the number of connected roads
nodesLayer.ResetReading()
nodesFeature = nodesLayer.GetNextFeature()
while nodesFeature:

  # buffer the nodes by 1 foot (to get only the adjacent roads)
  nodesGeom = nodesFeature.GetGeometryRef()
  bufferGeom = nodesGeom.Buffer(1)


  # use bufferGeom as a spatial filter on the node to get all roads

  # within 1 foot of the node

  roadsLayer.SetSpatialFilter(bufferGeom)

  roadCount = roadsLayer.GetFeatureCount()
  print str(roadsLayer.GetFeatureCount())
  if roadCount < 3:
    deleteNodes.append(nodesFeature.GetFID())

  # show progress
  count += 1
  sys.stdout.write('.')
  progress = divmod(1000*count, 24000)
  if progress[1] == 0:
    print str(count) + '/' + str(24000)

  # move to the next node
  nodesFeature.Destroy()
  nodesFeature = nodesLayer.GetNextFeature()

# delete the features
print 'deleting features\n'
for node in deleteNodes:
  nodesLayer.DeleteFeature(node)
  sys.stdout.write('.')


# close the shapefiles

nodesDS.Destroy()

roadsDS.Destroy()
From warmerdam at pobox.com  Thu Mar  4 19:09:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar  4 19:08:47 2010
Subject: [gdal-dev] Memory access violation withGDALGetRandomRasterSample
	and NITF/JPEG2000
In-Reply-To: <0873B50412231C47AFF7ECE2B4226CF702386220@AZ25EXM03.gddsi.com>
References: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com>
	<4B903543.3080402@pobox.com>
	<0873B50412231C47AFF7ECE2B4226CF702386220@AZ25EXM03.gddsi.com>
Message-ID: <4B904BA6.20707@pobox.com>

Shaw, Jonathan-P29740 wrote:
> Ah -- turning on the debug logging reveals JP2ECW messages (below).
> 
> I will definitely take a look at OSGeo4W. Out of curiosity, is there a
> programmatic way to force the NITF driver to use JP2MrSID (which is also
> in FWTools 2.4.7) rather than the ECW driver? Or to disable the ECW
> driver altogether?

Jonathan,

Ah, I hadn't realized mrsid was built in too.  If you set the GDAL_SKIP
environment variable to JP2ECW then the JP2ECW driver will not be
registered and things should fall through to JP2MrSID.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Mar  4 19:11:53 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar  4 19:11:34 2010
Subject: [gdal-dev] SetSpatialFilter not working?
In-Reply-To: <7100ecdc4dd5.4b8ff46c@wiscmail.wisc.edu>
References: <6f80a9d8dfeee.4b8b86fa@wiscmail.wisc.edu>
	<4B8BED11.4030106@pobox.com> <7100ecdc4dd5.4b8ff46c@wiscmail.wisc.edu>
Message-ID: <4B904C49.20301@pobox.com>

Spencer Gardner wrote:
> I'm writing a script with 2 primary layers, a road layer and an intersection
> layer.  I have designed the script to cycle through the intersections and
> remove any that have less than 3 road segments connected to it.  I have set
> a buffer of 1 foot to account for any misalignment.  The script runs just
> fine (using almost 24,000 intersection nodes) but doesn't identify any
> intersections for removal.
> 
> After troubleshooting, I have found that counting the road features after
> setting the spatial filter returns an unusually high number of road segments
> (usually between 9 and 12) for each intersection so that no intersection
> returns less than 3 segments.  The same phenomenon occurs if I remove the
> 1-foot buffer.  If I test the layers in ArcView by selecting roads that
> intersect a specific node, the result is correct.  Is there something in my
> code that could be causing this problem?  The documentation says the
> SetSpatialFilter method "may be inaccurately implemented" - would this be a
> symptom of this problem?  Is there another way of doing this type of
> analysis?
> 
> Thanks for the help.  Please excuse my lack of knowledge as I'm fairly new
> to this.

Spencer,

If GEOS is linked into GDAL/OGR the spatial filtering should be accurate.
Otherwise a bounding box comparison is done and you can get significant
numbers of false positives depending on the structure of the data.

So, my suggestion is to rebuild GDAL with GEOS support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Mar  4 20:16:22 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar  4 20:16:05 2010
Subject: [gdal-dev] Copy / manipulate TIFF-header
In-Reply-To: <6ba94d771003032307r2eb99b72ve6e5d5f903ca7f77@mail.gmail.com>
References: <6ba94d771003020144o78dd6336l7fe88296c8446883@mail.gmail.com>
	<6ba94d771003032307r2eb99b72ve6e5d5f903ca7f77@mail.gmail.com>
Message-ID: <4B905B66.2010804@pobox.com>

Sigbjorn Herstad wrote:
> Hi,
> 
> This is my first post here, but have followed the list for several
> years. I am trying to find a good way to edit a GeoTIFF-header. I have
> looked at the Python-script and listgeo and geotifcp mentioned here:
> http://lists.osgeo.org/pipermail/gdal-dev/2008-April/016752.html
> 
> Using the Python-script updates the header of a given GeoTIFF- however
> not with all parameters I need. Using the listgeo and geotifcp a new
> file is written so update is not possible (like in the Python-script)
> - ie reprocessing all files are necessary. I am thinking about
> creating a Python-script which will update / delete / add certain
> attributes from a GeoTIFF-file, but I am not sure if this is possible?
> I do NOT want to create a new file with the changed GeoTIFF-header,
> but update the already existing one.
> 
> Here are some of the TAGS I wish to DELETE or CHANGE:
> GTModelTypeGeoKey (Short,1):
> GTRasterTypeGeoKey (Short,1):
> GTCitationGeoKey (Ascii,8):
> GeogCitationGeoKey (Ascii,7):
> GeogAngularUnitsGeoKey (Short,1):
> ProjectedCSTypeGeoKey (Short,1):
> ProjLinearUnitsGeoKey (Short,1):
> GCS:
> Datum:
> Ellipsoid:

SigTill,

I do not believe it is possible to accomplish this with commandline
tools like listgeo and geotifcp, or with scripting around GDAL.

It is, in theory, possible to accomplish this using a C program
built on libtiff and libgeotiff.  But if you do this you need to be
careful to use the very latest libgeotiff code (possibly from svn) and
also very recent libtiff code (best from svn).  Rewriting a TIFF
directory is a risky process and some bugs have recently been fixed
in this regard.  Likewise, updating a GTIF (GeoTIFF tags) structure
in place is risky and recently some changes were made in libgeotiff
to support this.

Generally speaking libtiff and libgeotiff were not written with update
in place in mind which is why it is surprisingly hard.  Just how
important is it to you?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Thu Mar  4 20:44:29 2010
From: gregcoats at mac.com (Greg Coats)
Date: Thu Mar  4 20:44:35 2010
Subject: [gdal-dev] Copy / manipulate TIFF-header
In-Reply-To: <6ba94d771003032307r2eb99b72ve6e5d5f903ca7f77@mail.gmail.com>
References: <6ba94d771003020144o78dd6336l7fe88296c8446883@mail.gmail.com>
	<6ba94d771003032307r2eb99b72ve6e5d5f903ca7f77@mail.gmail.com>
Message-ID: <9E05C357-FDD1-4139-A71E-B4143E6C1986@mac.com>

A .tif file in organized such that it begins with a very small header, is followed by all of the pixels, and then the file ends with the TIFF tags.
So, if one wanted to change or set for example the TIFF resolution tags, there are three resolution tags: XResolution=282, YResolution=283, and ResolutionUnit=296, it is possible and convenient to write TIFF tags 282, 283, and 296 that follow the pixels values, near the end of the .tif file, withOUT re-writing any of the pixel values. The TIFF utility tiffset provides a convenient way for changing TIFF tags withOUT reading and writing any of the pixel values, and even supports setting a TIFF tag to the contents of a file.
http://www.remotesensing.org/libtiff/man/tiffset.1.html

However, I do not know that tiffset supports GeoTIFF tags.
Greg

On Mar 4, 2010, at 2:07 AM, Sigbjorn Herstad wrote:

> Hi,
> 
> This is my first post here, but have followed the list for several
> years. I am trying to find a good way to edit a GeoTIFF-header. I have
> looked at the Python-script and listgeo and geotifcp mentioned here:
> http://lists.osgeo.org/pipermail/gdal-dev/2008-April/016752.html
> 
> Using the Python-script updates the header of a given GeoTIFF- however
> not with all parameters I need. Using the listgeo and geotifcp a new
> file is written so update is not possible (like in the Python-script)
> - ie reprocessing all files are necessary. I am thinking about
> creating a Python-script which will update / delete / add certain
> attributes from a GeoTIFF-file, but I am not sure if this is possible?
> I do NOT want to create a new file with the changed GeoTIFF-header,
> but update the already existing one.
> 
> Here are some of the TAGS I wish to DELETE or CHANGE:
> GTModelTypeGeoKey (Short,1):
> GTRasterTypeGeoKey (Short,1):
> GTCitationGeoKey (Ascii,8):
> GeogCitationGeoKey (Ascii,7):
> GeogAngularUnitsGeoKey (Short,1):
> ProjectedCSTypeGeoKey (Short,1):
> ProjLinearUnitsGeoKey (Short,1):
> GCS:
> Datum:
> Ellipsoid:
> 
> Greetings
> SigTill

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100304/c65229a4/attachment.html
From Jonathan.Shaw at gdc4s.com  Thu Mar  4 20:55:38 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Thu Mar  4 20:55:41 2010
Subject: [gdal-dev] Memory access violation with GDALGetRandomRasterSample
	and NITF/JPEG2000
In-Reply-To: <4B904BA6.20707@pobox.com>
References: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com><4B903543.3080402@pobox.com><0873B50412231C47AFF7ECE2B4226CF702386220@AZ25EXM03.gddsi.com>
	<4B904BA6.20707@pobox.com>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF7023C06C8@AZ25EXM03.gddsi.com>

Frank,

Thank you very much! Disabling the JP2ECW driver works and allows the
JP2MrSID driver to process my map.

I appreciate your quick and helpful responses.

Thanks,
Jonathan

From jukka.rahkonen at mmmtike.fi  Fri Mar  5 04:44:28 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Mar  5 04:44:55 2010
Subject: [gdal-dev] Re: Memory access violation
	withGDALGetRandomRasterSample	and NITF/JPEG2000
References: <0873B50412231C47AFF7ECE2B4226CF7023861DC@AZ25EXM03.gddsi.com>
	<4B903543.3080402@pobox.com>
	<0873B50412231C47AFF7ECE2B4226CF702386220@AZ25EXM03.gddsi.com>
	<4B904BA6.20707@pobox.com>
Message-ID: <loom.20100305T102603-746@post.gmane.org>

Frank Warmerdam <warmerdam <at> pobox.com> writes:

> Ah, I hadn't realized mrsid was built in too.  If you set the GDAL_SKIP
> environment variable to JP2ECW then the JP2ECW driver will not be
> registered and things should fall through to JP2MrSID.

JPEG2000 is perhaps the only file format that has several drivers available and
therefore the possibility or need to use GDAL_SKIP is not obvious to users. It
is documented in a not-so-easy-to-find place
(http://trac.osgeo.org/gdal/wiki/ConfigOptions). Perhaps it would be worth
mentioning separately on info pages for each JPEG2000 driver. It might be good
to order the drivers also so that JP2MrSID driver (or JP2KAK) would be the first
one so it would get selected by default. JP2ECW driver is often rather fast but
it seems to have some odd bugs. At least a couple of years ago it surprised be
by producing lossy output from lossless images which were created with Kakadu.

-Jukka Rahkonen-

From sherstad at gmail.com  Fri Mar  5 04:51:45 2010
From: sherstad at gmail.com (Sigbjorn Herstad)
Date: Fri Mar  5 04:51:49 2010
Subject: [gdal-dev] Copy / manipulate TIFF-header
In-Reply-To: <4B905B66.2010804@pobox.com>
References: <6ba94d771003020144o78dd6336l7fe88296c8446883@mail.gmail.com>
	<6ba94d771003032307r2eb99b72ve6e5d5f903ca7f77@mail.gmail.com>
	<4B905B66.2010804@pobox.com>
Message-ID: <6ba94d771003050151s189accf3l9dbb06185d846bb2@mail.gmail.com>

Using the Python-script I was able to update the SetGeoTransform and
SetProjection with success. I have also done the same with a VB-script
with the same result. I do not see anything wrong in the header and
the file itself opens without errors.
Thanks for the warning regarding bugs in the libtiff and libgeotiff.

1. I am curious - how can I figure out if a file is broken after
updating the Transform, Projection and other parameters? Is simply
loading the file into some software and displaying it properly and
checking that the header have OK values sufficient? Or is there a more
"programmatic" way to figure out?

The option to update-in-place on files is nice when you have 200-500
GB of uncompressed TIF-files, as reprocessing them takes a while.

2. As I understand it the Updating-in-place is the problem. If I want
to create a new file with certain specified tags there should be "no"
problem writing this and risking corrupt files?


On Fri, Mar 5, 2010 at 2:16 AM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Sigbjorn Herstad wrote:
>>
>
> I do not believe it is possible to accomplish this with commandline
> tools like listgeo and geotifcp, or with scripting around GDAL.
>
> It is, in theory, possible to accomplish this using a C program
> built on libtiff and libgeotiff. ?But if you do this you need to be
> careful to use the very latest libgeotiff code (possibly from svn) and
> also very recent libtiff code (best from svn). ?Rewriting a TIFF
> directory is a risky process and some bugs have recently been fixed
> in this regard. ?Likewise, updating a GTIF (GeoTIFF tags) structure
> in place is risky and recently some changes were made in libgeotiff
> to support this.
>
> Generally speaking libtiff and libgeotiff were not written with update
> in place in mind which is why it is surprisingly hard. ?Just how
> important is it to you?
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From sjgardner at wisc.edu  Fri Mar  5 08:36:01 2010
From: sjgardner at wisc.edu (Spencer Gardner)
Date: Fri Mar  5 08:36:04 2010
Subject: [gdal-dev] SetSpatialFilter not working?
In-Reply-To: <4B904C49.20301@pobox.com>
References: <6f80a9d8dfeee.4b8b86fa@wiscmail.wisc.edu>
	<4B8BED11.4030106@pobox.com> <7100ecdc4dd5.4b8ff46c@wiscmail.wisc.edu>
	<4B904C49.20301@pobox.com>
Message-ID: <7100daf13bba.4b90b461@wiscmail.wisc.edu>

That makes sense.  I was using FTools so perhaps the GEOS support is not built in?  Anyway, I ran it on my Linux box and the analysis part works fine.  However, the features that it identifies for deletion don't actually get deleted so the file remains unchanged.  

(code included at bottom)

The documentation mentions that Layer.DeleteFeature() doesn't work for some drivers, but I don't see any error messages.  Does the ESRI Shapefile driver not support deletion?  If so, how does one remove features from a shapefile layer?

Thanks,
Spencer Gardner
University of Wisconsin-Madison
Department of Urban and Regional Planning


----- Original Message -----
From: Frank Warmerdam <warmerdam@pobox.com>
Date: Thursday, March 4, 2010 6:11 pm
Subject: Re: [gdal-dev] SetSpatialFilter not working?
To: Spencer Gardner <sjgardner@wisc.edu>
Cc: gdal-dev@lists.osgeo.org


> Spencer Gardner wrote:
> >I'm writing a script with 2 primary layers, a road layer and an intersection
> >layer.  I have designed the script to cycle through the intersections 
> and
> >remove any that have less than 3 road segments connected to it.  I 
> have set
> >a buffer of 1 foot to account for any misalignment.  The script runs 
> just
> >fine (using almost 24,000 intersection nodes) but doesn't identify any
> >intersections for removal.
> >
> >After troubleshooting, I have found that counting the road features after
> >setting the spatial filter returns an unusually high number of road segments
> >(usually between 9 and 12) for each intersection so that no intersection
> >returns less than 3 segments.  The same phenomenon occurs if I remove 
> the
> >1-foot buffer.  If I test the layers in ArcView by selecting roads that
> >intersect a specific node, the result is correct.  Is there something 
> in my
> >code that could be causing this problem?  The documentation says the
> >SetSpatialFilter method "may be inaccurately implemented" - would 
> this be a
> >symptom of this problem?  Is there another way of doing this type of
> >analysis?
> >
> >Thanks for the help.  Please excuse my lack of knowledge as I'm 
> fairly new
> >to this.
> 
> Spencer,
> 
> If GEOS is linked into GDAL/OGR the spatial filtering should be accurate.
> Otherwise a bounding box comparison is done and you can get significant
> numbers of false positives depending on the structure of the data.
> 
> So, my suggestion is to rebuild GDAL with GEOS support.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

# import modules

import os, sys
try:
  from osgeo import ogr

except:
  import ogr

startDir = os.getcwd()

tempDir = '/tmp'

# set the working directory

os.chdir(startDir + '/Roads')



# get the shapefile driver

driver = ogr.GetDriverByName('ESRI Shapefile')



# open nodes.shp and get the layer

nodesDS = driver.Open('nodesdelete.shp', 1)

if nodesDS is None:

  print 'Could not open nodesdelete.shp'

  sys.exit(1)

nodesLayer = nodesDS.GetLayer()



# open 2009roads.shp and get the layer

roadsDS = driver.Open('2009roads.shp', 0)

if roadsDS is None:

  print 'Could not open 2009roads.shp'

  sys.exit(1)

roadsLayer = roadsDS.GetLayer()
print 'found ' + str(roadsLayer.GetFeatureCount()) + ' total road features'

# set up the array to store id's to be deleted
deleteNodes = []


# set up the progress bar
count = 1
totalNodes = nodesLayer.GetFeatureCount()
print 'found ' + str(totalNodes) + ' total nodes'

# loop through each node to count the number of connected roads
nodesLayer.ResetReading()
nodesFeature = nodesLayer.GetNextFeature()
while nodesFeature and count < 100:

  # buffer the nodes by 1 foot (to get only the adjacent roads)
  nodesGeom = nodesFeature.GetGeometryRef()
  bufferGeom = nodesGeom.Buffer(1)


  # use bufferGeom as a spatial filter on the node to get all roads

  # within 1 foot of the node

  roadsLayer.SetSpatialFilter(bufferGeom)

  roadCount = roadsLayer.GetFeatureCount()
  if roadCount < 3:
    deleteNodes.append(nodesFeature.GetFID())

  # show progress
  count += 1
  sys.stdout.write('.')
  progress = divmod(1000*count, 24000)
  if progress[1] == 0:
    print str(count) + '/' + str(24000)

  # move to the next node
  nodesFeature.Destroy()
  nodesFeature = nodesLayer.GetNextFeature()

# delete the features
print 'identified ' + str(len(deleteNodes)) + ' features to be deleted'
print 'deleting features\n'
for node in deleteNodes:
  nodesLayer.DeleteFeature(node)
  sys.stdout.write('.')


# close the shapefiles

nodesDS.Destroy()

roadsDS.Destroy()



From toefftoeff1 at gmx.net  Fri Mar  5 11:26:42 2010
From: toefftoeff1 at gmx.net (toefftoeff1@gmx.net)
Date: Fri Mar  5 11:27:05 2010
Subject: [gdal-dev] enable GEOS support (GDAL/OGR 1.7.1; GEOS 2.3.0; VB.NET)
Message-ID: <4B9130C2.5030807@gmx.net>

Hello,

I would like to build and use OGR with GEOS support on Windows XP 32 bit
using
Visual Basic.NET (.NET framework 2.0 or 3.5).

GDAL/OGR 1.7.1 and GEOS 2.3.0 compilation seem to work fine (using
nmake, Visual Studio 2008, only
warnings, no error messages).

I used the following GDAL/OGR nmake.opt settings to include GEOMS support:

# Uncomment for GEOS support
GEOS_DIR=D:\svn\code\Tools\geos-3.2.0
GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
GEOS_LIB     = $(GEOS_DIR)/build/msvc90/Release/geos_c_i.lib

But using GEOMS in a sample .NET project always results in an exception
"GEOS support not enabled".

Sample code:

            Ogr.RegisterAll()

            Dim g1 As Geometry = Geometry.CreateFromWkt("POLYGON((0 0,
10 10, 10 0, 0 0))")
            Dim g2 As Geometry = Geometry.CreateFromWkt("POLYGON((-90
-90, -90 90, 190 -90, -90 -90))")

            Dim result As Boolean = g2.Contains(g1)

I copied all GDAL/OGR wrapper libraries and geos_c.dll to the
appropriate places.

Any suggestions?

Thanks a lot...

  Christoph
From lucafasano at interfree.it  Fri Mar  5 12:32:06 2010
From: lucafasano at interfree.it (Luca Fasano)
Date: Fri Mar  5 12:39:42 2010
Subject: [gdal-dev] gdal_merge.py doesn't find input files.
Message-ID: <1267810326.9507.11.camel@fasano-debian.innova>

Hi list,
I'm trying to use gdal_merge.py of GDAL 1.6.3 version.
I encountered some problem merging datasets represented in GDAL
subdataset format (i.e. DRIVERNAME:FILENAME://SUBDATASETS). In
particular I'm trying to merge two HDF5 subdatasets.
In this case the script crashes returning strange message:

File not found: <dataset1>
File not found: <dataset2>
No input files selected.

I searching for something useful in code and I found, starting from row
336:

            # Expand any possible wildcards from command line arguments
            f = glob.glob( arg )
            if len(f) == 0:
                print 'File not found: "%s"' % (str( arg ))
            names += f # append 1 or more files


that seems to check if inputs are present in file system.
But of course something like HDF5:filename://S01/SBI is never a valid
path.

Did you know this behaviour?


From warmerdam at pobox.com  Fri Mar  5 14:25:02 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Mar  5 14:24:34 2010
Subject: [gdal-dev] gdal_merge.py doesn't find input files.
In-Reply-To: <1267810326.9507.11.camel@fasano-debian.innova>
References: <1267810326.9507.11.camel@fasano-debian.innova>
Message-ID: <4B915A8E.8040308@pobox.com>

Luca Fasano wrote:
> Hi list,
> I'm trying to use gdal_merge.py of GDAL 1.6.3 version.
> I encountered some problem merging datasets represented in GDAL
> subdataset format (i.e. DRIVERNAME:FILENAME://SUBDATASETS). In
> particular I'm trying to merge two HDF5 subdatasets.
> In this case the script crashes returning strange message:
> 
> File not found: <dataset1>
> File not found: <dataset2>
> No input files selected.
> 
> I searching for something useful in code and I found, starting from row
> 336:
> 
>             # Expand any possible wildcards from command line arguments
>             f = glob.glob( arg )
>             if len(f) == 0:
>                 print 'File not found: "%s"' % (str( arg ))
>             names += f # append 1 or more files
> 
> 
> that seems to check if inputs are present in file system.
> But of course something like HDF5:filename://S01/SBI is never a valid
> path.
> 
> Did you know this behaviour?

Luca,

I concur that the globbing is inappropriate for this script.  I have reopened
the ticket for which it was implemented.

   http://trac.osgeo.org/gdal/ticket/2783

In the meantime, I imagine you can just comment out the globbing.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From allison.hoch at ll.mit.edu  Fri Mar  5 14:52:22 2010
From: allison.hoch at ll.mit.edu (allie92187)
Date: Fri Mar  5 14:52:24 2010
Subject: [gdal-dev] Error trying to use OGR tutorial code
Message-ID: <1267818742399-4683021.post@n2.nabble.com>


I am trying to get some code from http://www.gdal.org/ogr/ogr_apitut.html. I
modified the code slightly to use a shapefile I had containing two points
since the shapefile in the code is not provided. The code below is the code
taken from above website with changes marked by comments. The problem is
occurring in the line if( poGeometry != NULL 
            && wkbFlatten(poGeometry->getGeometryType()) ==
wkbMultiLineString ) .

When I was attempting to debug I added a print statement which caused the
program to terminate successfully, but when I remove this print statement 
(printf("%p\n", poGeometry);) the above line causes a seg fault.

Does anyone know why this is happening? It doesn't seem to be a problem with
earlier versions of gdal (1.4)


Thank you!

#include "ogrsf_frmts.h"
#include <iostream>
using namespace std;

int main()

{
    OGRRegisterAll();

    OGRDataSource       *poDS;

    //I changed the name of the shape file here:
    poDS = OGRSFDriverRegistrar::Open( "targets.shp", FALSE );
    if( poDS == NULL )
    {
        printf( "Open failed.\n" );
        exit( 1 );
    }
  
    OGRLayer  *poLayer;

    //I changed the name of the layer name here:
    poLayer = poDS->GetLayerByName( "targets" );

    OGRFeature *poFeature;
    poLayer->ResetReading();
    while( (poFeature = poLayer->GetNextFeature()) != NULL )
    {
        OGRFeatureDefn *poFDefn = poLayer->GetLayerDefn();
        int iField;
        for( iField = 0; iField < poFDefn->GetFieldCount(); iField++ )
        {
            OGRFieldDefn *poFieldDefn = poFDefn->GetFieldDefn( iField );

            if( poFieldDefn->GetType() == OFTInteger )
                printf( "%d,", poFeature->GetFieldAsInteger( iField ) );
            else if( poFieldDefn->GetType() == OFTReal )
                printf( "%.3f,", poFeature->GetFieldAsDouble(iField) );
            else if( poFieldDefn->GetType() == OFTString )
                printf( "%s,", poFeature->GetFieldAsString(iField) );
            else
                printf( "%s,", poFeature->GetFieldAsString(iField) );
        }
        OGRGeometry *poGeometry;
        poGeometry = poFeature->GetGeometryRef();

        //If I take  out this line that I added when decoding, there is a
seg fault - this really strange!
        printf("%p\n", poGeometry);

        //Here I'm checking for wkbMultiLineString instead of wkbPoint as
was in the original code
        if( poGeometry != NULL 
            && wkbFlatten(poGeometry->getGeometryType()) ==
wkbMultiLineString )  
        {
            OGRMultiLineString *mls = (OGRMultiLineString *)poGeometry;
            //This next line I added, but when it is uncommented there is a
segfault in the line below thta calls DestroyFeature. 
            //I'm not sure why this is happening.
            //printf("name: %s\n", poGeometry->getGeometryName());               


            //OGRPoint *poPoint = (OGRPoint *) poGeometry;                      
(Removed from original code)
            //printf( "%.3f,%3.f\n", poPoint->getX(), poPoint->getY() );        
(Removed from original code)
        }
        else
        {
            printf( "no point geometry\n" );
        }       
        OGRFeature::DestroyFeature( poFeature );
    }
    OGRDataSource::DestroyDataSource( poDS ); }

-- 
View this message in context: http://n2.nabble.com/Error-trying-to-use-OGR-tutorial-code-tp4683021p4683021.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Fri Mar  5 14:57:22 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Mar  5 14:57:26 2010
Subject: [gdal-dev] enable GEOS support (GDAL/OGR 1.7.1; GEOS 2.3.0; 
	VB.NET)
In-Reply-To: <4B9130C2.5030807@gmx.net>
References: <4B9130C2.5030807@gmx.net>
Message-ID: <f3b73b7d1003051157v795e2c46l56b7d66976a79d92@mail.gmail.com>

Hi,

You might wan't to make a test with the packages available at:
http://vbkto.dyndns.org/sdk/

All of those gave geos support compiled in.

By downloading the SDK pacakges your could also compile gdal by yourself
easily using a VS Command Prompt and type 'nmake gdal' in the SDK root
directory.

Best regards,

Tamas


2010/3/5 <toefftoeff1@gmx.net>

> Hello,
>
> I would like to build and use OGR with GEOS support on Windows XP 32 bit
> using
> Visual Basic.NET (.NET framework 2.0 or 3.5).
>
> GDAL/OGR 1.7.1 and GEOS 2.3.0 compilation seem to work fine (using
> nmake, Visual Studio 2008, only
> warnings, no error messages).
>
> I used the following GDAL/OGR nmake.opt settings to include GEOMS support:
>
> # Uncomment for GEOS support
> GEOS_DIR=D:\svn\code\Tools\geos-3.2.0
> GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers -DHAVE_GEOS
> GEOS_LIB     = $(GEOS_DIR)/build/msvc90/Release/geos_c_i.lib
>
> But using GEOMS in a sample .NET project always results in an exception
> "GEOS support not enabled".
>
> Sample code:
>
>            Ogr.RegisterAll()
>
>            Dim g1 As Geometry = Geometry.CreateFromWkt("POLYGON((0 0,
> 10 10, 10 0, 0 0))")
>            Dim g2 As Geometry = Geometry.CreateFromWkt("POLYGON((-90
> -90, -90 90, 190 -90, -90 -90))")
>
>            Dim result As Boolean = g2.Contains(g1)
>
> I copied all GDAL/OGR wrapper libraries and geos_c.dll to the
> appropriate places.
>
> Any suggestions?
>
> Thanks a lot...
>
>  Christoph
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/403af124/attachment.html
From pawell.b at gmail.com  Fri Mar  5 15:16:40 2010
From: pawell.b at gmail.com (=?ISO-8859-2?Q?Pawe=B3_Byszewski?=)
Date: Fri Mar  5 15:16:44 2010
Subject: [gdal-dev] faster way to display shapeFile
Message-ID: <e215baa41003051216xaddcd91s9ef5ce5b314022b7@mail.gmail.com>

Hello,
I have some map in ShapeFile and I am using OGR to display it. I folow the
example od OGR website: OGR C++ API Read/Write
Tutorial<http://gdal.org/ogr/ogr_apitut.html>
(http://gdal.org/ogr/ogr_apitut.html). Unfortunately that way is very slow.
I have map of whole country(only roads) and even when I try to display onlu
one big city and I set spatial filter it takes very much times. Could you
tell me if gdal/ogr has oportunity to read big files in faster way?

Regards,
Pawe?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/e67ae3cb/attachment.html
From acomer at digitalglobe.com  Fri Mar  5 15:45:47 2010
From: acomer at digitalglobe.com (Alex Comer)
Date: Fri Mar  5 15:51:04 2010
Subject: [gdal-dev] Error inserting GDAL generated GML into Oracle Spatial
Message-ID: <776D8D3D76D94B448BEDCAC5D41AF6DF0434B611@COMAIL01.digitalglobe.com>

Greetings,

 

I am attempting to store a GML file generated by GDAL/OGR (specifically
by the class "OGRGMLDataSource
<http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gml/ogrgm
ldatasource.cpp> ") into Oracle Spatial. I am getting the error message
"Error converting from GML to JGeometry original exception: Message:GML
Geometry type ogr:FeatureCollection not suppoted". Indeed, the GML
contains an outer element <ogr:FeatureCollection> and many other
elements in the "ogr" namespace such as <ogr:polygons> and
<ogr:geometryProperty>. Looking at the OGRGMLDataSource source code I
can see that these elements in the  "ogr" namespace are hard-coded in
the output. I'm just starting to comprehend the GML format, but I am
wondering if anyone else has had any success storing GDAL-generated GML
into Oracle Spatial or if anyone has any clue as to what I might need to
do to make this work. I'd really rather not have to write my own utility
to generate GML given that GDAL/OGR can supposedly already do this.

 

Kind regards,

A. Comer

 


This electronic communication and any attachments may contain confidential and proprietary 
information of DigitalGlobe, Inc. If you are not the intended recipient, or an agent or employee 
responsible for delivering this communication to the intended recipient, or if you have received 
this communication in error, please do not print, copy, retransmit, disseminate or 
otherwise use the information. Please indicate to the sender that you have received this 
communication in error, and delete the copy you received. DigitalGlobe reserves the 
right to monitor any electronic communication sent or received by its employees, agents 
or representatives.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/db5b354c/attachment-0001.html
From warmerdam at pobox.com  Fri Mar  5 16:05:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Mar  5 16:04:47 2010
Subject: [gdal-dev] faster way to display shapeFile
In-Reply-To: <e215baa41003051216xaddcd91s9ef5ce5b314022b7@mail.gmail.com>
References: <e215baa41003051216xaddcd91s9ef5ce5b314022b7@mail.gmail.com>
Message-ID: <4B917209.4030600@pobox.com>

Pawe? Byszewski wrote:
> Hello,
> I have some map in ShapeFile and I am using OGR to display it. I folow 
> the example od OGR website: OGR C++ API Read/Write Tutorial 
> <http://gdal.org/ogr/ogr_apitut.html>(http://gdal.org/ogr/ogr_apitut.html). 
> Unfortunately that way is very slow. I have map of whole country(only 
> roads) and even when I try to display onlu one big city and I set 
> spatial filter it takes very much times. Could you tell me if gdal/ogr 
> has oportunity to read big files in faster way?

Pawe?,

I get the impression you have a very large shapefile and are only wanting
to draw a subarea.  I would suggest you spatially index the file and use
the SetSpatialFilter() method to fetch only features in the area of interest.

There is some information on spatial indexing for shapefiles at:

   http://www.gdal.org/ogr/drv_shapefile.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ggp08ctl at sheffield.ac.uk  Fri Mar  5 16:07:26 2010
From: ggp08ctl at sheffield.ac.uk (ggp08ctl)
Date: Fri Mar  5 16:07:28 2010
Subject: [gdal-dev] gdal_translate not working/ windows 7 64bit?
Message-ID: <1267823246134-4683419.post@n2.nabble.com>


Hi all,

I have used gdal before (very briefly) to translate gebco bathemetry data
from the netcdf file it comes as, into a tif format that I can use/ further
convert in esri arcgis software. When I used gdal before (on another system)
I used the osgeo4w windows version on 64bit vista, and simply typed in the
command 'gdal_translate -a_srs EPSG:4326 filename.nc' at the command prompt.
This worked well. I now need to repeat the process, this time using osgeo4w
on 64bit windows 7.

The problem I am having is that this no longer seems to work. I go to the
osgeo4w command prompt, type in the above with the appropriate file name and
nothing happens. I just get the standard dos message regarding the usage of
the tool. Gdalinfo works ok. I do not believe that I am typing anything
incorrectly. Does anyone know if the issue is associated with my change of
OS? Should there be entries for osgeo4w or gdal in environment variables,
because there doesn't seem to be any at present. Any suggestions
appreciated.

Regards,
Chris

-- 
View this message in context: http://n2.nabble.com/gdal-translate-not-working-windows-7-64bit-tp4683419p4683419.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From pcreso at pcreso.com  Fri Mar  5 16:14:34 2010
From: pcreso at pcreso.com (pcreso@pcreso.com)
Date: Fri Mar  5 16:14:37 2010
Subject: [gdal-dev] faster way to display shapeFile
In-Reply-To: <e215baa41003051216xaddcd91s9ef5ce5b314022b7@mail.gmail.com>
Message-ID: <626638.92974.qm@web33201.mail.mud.yahoo.com>

Hi Pawell,

A shapefile is not usually spatially indexed, and ogr cannot use the ESRI index anyway, so the entire dataset is read every time to plot it. For a large shapefile this is considerable overhead, especially when you are zoomed in & only want to render a small region. 

See the info here on how to create a spatial index for your shapefile:
http://www.gdal.org/ogr/drv_shapefile.html either with a sql via ogr or using the shptree command.

Essentially you have a data management issue - as an alternative approach, I suggest you look at a spatially enabled database (Postgis) if you want better performance & more effective indexes when rendering a large dataset, but zoomed in to a small area. You can use ogr2ogr or shp2pgsql to load shapefiles into a database, & the data management capabilities of a "proper" database are generally far better than managing shapefiles.


HTH,

  Brent Wood


--- On Sat, 3/6/10, Pawe? Byszewski <pawell.b@gmail.com> wrote:

> From: Pawe? Byszewski <pawell.b@gmail.com>
> Subject: [gdal-dev] faster way to display shapeFile
> To: gdal-dev@lists.osgeo.org
> Date: Saturday, March 6, 2010, 9:16 AM
> Hello,I have some map in ShapeFile and
> I am using OGR to display it. I folow the example od OGR
> website:?OGR C++ API
> Read/Write Tutorial(http://gdal.org/ogr/ogr_apitut.html).
> Unfortunately that way is very slow. I have map of whole
> country(only roads) and even when I try to display onlu one
> big city and I set spatial filter it takes very much times.
> Could you tell me if gdal/ogr has oportunity to read big
> files in faster way?
> 
> 
> Regards,
> Pawe?
> 
> -----Inline Attachment Follows-----
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From stephane.benchimol at gmail.com  Fri Mar  5 16:26:02 2010
From: stephane.benchimol at gmail.com (=?ISO-8859-1?Q?St=E9phane?=)
Date: Fri Mar  5 16:26:05 2010
Subject: [gdal-dev] Georeferencing Geostationnary (+proj=geos)
In-Reply-To: <4B8D69CE.9010006@pobox.com>
References: <4B8CDCB0.4090907@deimos.com.pt>
	<589d51301003020213h19a090bes6acf8b814d8c7b5d@mail.gmail.com>
	<4B8CE6C1.5010102@deimos.com.pt>
	<589d51301003021112w7cf2b868g2bc428c764fe225e@mail.gmail.com>
	<4B8D69CE.9010006@pobox.com>
Message-ID: <589d51301003051326o3c795bd3hc1f86cba9b2b01c@mail.gmail.com>

So, as far as I understand:

GDAL can reference image with geos projection like
       +proj=geos +lon_0=42 +h=35785831 +datum=WGS84

GDAL can put GeoTransformation information like
       -a_ullr -924124.2 5421728.5 4179561.6 3468466.1
I guess this is related to maxium / minimum latitude and longitude seen from
satellite position.


*But I'm still wondering if someone success to reproject an image from
geostationnary projection to regular lat/lon ?*

Thanks,
St?phane

2010/3/2 Frank Warmerdam <warmerdam@pobox.com>

> St?phane wrote:
>
>> Hi,
>>
>> Does anyone know if Gdal, current version or development version, is able
>> to translate from Geostationnary projection to other regular projection ?
>>
>> Is it planned in future Gdal release ?
>>
>
> St?phane,
>
> I can confirm that GDAL/OGR supports the geostationary projection
> (+proj=geos in PROJ.4).  You can specify the +proj=geos projection
> strings with GDAL where it would normally accept proj.4 strings.
> I see it translates:
>
> +proj=geos +lon_0=42 +h=35785831 +datum=WGS84
>
> as:
>
> PROJCS["unnamed",
>    GEOGCS["WGS 84",
>        DATUM["WGS_1984",
>            SPHEROID["WGS 84",6378137,298.257223563,
>                AUTHORITY["EPSG","7030"]],
>            TOWGS84[0,0,0,0,0,0,0],
>            AUTHORITY["EPSG","6326"]],
>        PRIMEM["Greenwich",0,
>            AUTHORITY["EPSG","8901"]],
>        UNIT["degree",0.0174532925199433,
>            AUTHORITY["EPSG","9108"]],
>        AUTHORITY["EPSG","4326"]],
>    PROJECTION["Geostationary_Satellite"],
>    PARAMETER["central_meridian",42],
>    PARAMETER["satellite_height",35785831],
>    PARAMETER["false_easting",0],
>    PARAMETER["false_northing",0]]
>
> I do not know how you would construct the geotransform
> for an arbitrary satellite image though.
>
> Best regards,
>
>
>> 2010/3/2 Ant?nio Rocha <antonio.rocha@deimos.com.pt <mailto:
>> antonio.rocha@deimos.com.pt>>
>>
>>    Hi St?phane
>>
>>    According to http://www.gdal.org/gdal_translate.html
>>
>>    *-a_ullr* /ulx uly lrx lry/:
>>      Assign/override the georeferenced bounds of the output file. This
>>      assigns georeferenced bounds to the output file, ignoring what would
>>      have been derived from the source file.
>>    Yes... Regarding extracting sub-domains, I didn't tried
>>
>>    Yes, please keep me in touch in case there are better methods
>>
>>    Antonio
>>
>>
>>    St?phane wrote:
>>
>>        Thanks for feedback !
>>
>>        Do you have any ideas of the meaning of -a_ullr arguments they
>>        gave you ?
>>
>>        Futhermore, once you get your GeoTiff file, did you success to
>>        translate it to other projection, or extracting sub domains ?
>>
>>        I've heard that GEOS projection is not so really supported
>>        currently by GDAL, and re-projection / sub domain extraction
>>        doesn't work correctly ...
>>
>>        I'll keep you in touch if any news !
>>        St?phane
>>
>>        2010/3/2 Ant?nio Rocha <antonio.rocha@deimos.com.pt
>>        <mailto:antonio.rocha@deimos.com.pt>
>>        <mailto:antonio.rocha@deimos.com.pt
>>        <mailto:antonio.rocha@deimos.com.pt>>>
>>
>>
>>           Greetings
>>
>>           I had exacly the same problem. I have been using LSASAF data
>>        (from
>>           MSG-2nd Generation satellites) that provides LST and FVC in HDF5
>>           files. For some technical reason they are not goerreferenced and
>>           their  information.
>>
>>           I talked with a few ILWIS software developers and they gave the
>>           following Commands (adapted to my spatial coverage images):
>>
>>           gdal_translate -a_srs "+proj=geos +lon_0=0.0 +h=35785831
>> +x_0=0.0
>>           +y_0=0.0" -a_ullr -924124.2 5421728.5 4179561.6 3468466.1
>>           "HDF5:"HDF5_LSASAF_MSG_LST_Euro_200802170100"://LST"
>>           "euro_area_georeferenced.tif"
>>
>>
>>           gdalwarp -s_srs "+proj=geos +lon_0=0.0 +h=35785831 +x_0=0.0
>>           +y_0=0.0" -t_srs "+proj=latlong" "euro_area_georeferenced.tif"
>>           "euro_area_latlong.tif"
>>
>>           My HDF5 file doesn't contain any infoprmation regarding GEOS
>>           projection. So, I had to do this
>>
>>
>>           Hope this helps
>>
>>           If you get any news/information/method regarding this, please
>> let
>>           me know
>>
>>           Best regards
>>           Antonio
>>
>>
>>           __________ Information from ESET NOD32 Antivirus, version of
>>        virus
>>           signature database 4907 (20100302) __________
>>
>>           The message was checked by ESET NOD32 Antivirus.
>>
>>           http://www.eset.com
>>
>>
>>
>>
>>
>>
>>    __________ Information from ESET NOD32 Antivirus, version of virus
>>    signature database 4908 (20100302) __________
>>
>>
>>    The message was checked by ESET NOD32 Antivirus.
>>
>>    http://www.eset.com
>>
>>
>>
>>
>> ------------------------------------------------------------------------
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/5bd1005d/attachment.html
From szekerest at gmail.com  Fri Mar  5 16:32:25 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Mar  5 16:32:29 2010
Subject: [gdal-dev] gdal_translate not working/ windows 7 64bit?
In-Reply-To: <1267823246134-4683419.post@n2.nabble.com>
References: <1267823246134-4683419.post@n2.nabble.com>
Message-ID: <f3b73b7d1003051332yc6b29acqcbeef7dc66d3bde9@mail.gmail.com>

Hi Chris,

While I'm no aware of any specific issues related to Win7 if you provide
some test data I could try your command on my Win7 x64. So as to make sure
about the problem you might also want to test with the binaries available at
http://vbkto.dyndns.org/sdk/  (Run sdkshell.bat for the command prompt).

Best regards,

Tamas


2010/3/5 ggp08ctl <ggp08ctl@sheffield.ac.uk>

>
> Hi all,
>
> I have used gdal before (very briefly) to translate gebco bathemetry data
> from the netcdf file it comes as, into a tif format that I can use/ further
> convert in esri arcgis software. When I used gdal before (on another
> system)
> I used the osgeo4w windows version on 64bit vista, and simply typed in the
> command 'gdal_translate -a_srs EPSG:4326 filename.nc' at the command
> prompt.
> This worked well. I now need to repeat the process, this time using osgeo4w
> on 64bit windows 7.
>
> The problem I am having is that this no longer seems to work. I go to the
> osgeo4w command prompt, type in the above with the appropriate file name
> and
> nothing happens. I just get the standard dos message regarding the usage of
> the tool. Gdalinfo works ok. I do not believe that I am typing anything
> incorrectly. Does anyone know if the issue is associated with my change of
> OS? Should there be entries for osgeo4w or gdal in environment variables,
> because there doesn't seem to be any at present. Any suggestions
> appreciated.
>
> Regards,
> Chris
>
> --
> View this message in context:
> http://n2.nabble.com/gdal-translate-not-working-windows-7-64bit-tp4683419p4683419.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/9a805b5f/attachment-0001.html
From ggp08ctl at sheffield.ac.uk  Fri Mar  5 17:01:30 2010
From: ggp08ctl at sheffield.ac.uk (ggp08ctl)
Date: Fri Mar  5 17:01:33 2010
Subject: [gdal-dev] Re: gdal_translate not working/ windows 7 64bit?
In-Reply-To: <f3b73b7d1003051332yc6b29acqcbeef7dc66d3bde9@mail.gmail.com>
References: <1267823246134-4683419.post@n2.nabble.com>
	<f3b73b7d1003051332yc6b29acqcbeef7dc66d3bde9@mail.gmail.com>
Message-ID: <1267826490907-4683698.post@n2.nabble.com>


Hi Tamas,

Thanks for replying. Alas, I am not terribly able when it comes to binaries
and compiling programs (hence my use of osgeo4w). I have just downloaded a
*.nc file from another source altogether, to try. I get the same problem, so
I don't think it is specific to the gebco data. The file is small and found
here
http://www.unidata.ucar.edu/software/netcdf/examples/sresa1b_ncar_ccsm3_0_run1_200001.nc
if you would like to try it. I would be very interested to know whether it
works on your pc or not.

Best regards,

Chris

-- 
View this message in context: http://n2.nabble.com/gdal-translate-not-working-windows-7-64bit-tp4683419p4683698.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Fri Mar  5 17:23:46 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Mar  5 17:23:49 2010
Subject: [gdal-dev] Re: gdal_translate not working/ windows 7 64bit?
In-Reply-To: <1267826490907-4683698.post@n2.nabble.com>
References: <1267823246134-4683419.post@n2.nabble.com>
	<f3b73b7d1003051332yc6b29acqcbeef7dc66d3bde9@mail.gmail.com>
	<1267826490907-4683698.post@n2.nabble.com>
Message-ID: <f3b73b7d1003051423xf36f3c1of2e3f1a17e16f866@mail.gmail.com>

It works for me.

Tried with
http://vbkto.dyndns.org/sdk/release-1500-gdal-1-7-mapserver-5-6.zip

with the following cmdline.

gdal_translate -sds sresa1b_ncar_ccsm3_0_run1_200001.nc sample.tif

Best regards,

Tamas


2010/3/5 ggp08ctl <ggp08ctl@sheffield.ac.uk>

>
> Hi Tamas,
>
> Thanks for replying. Alas, I am not terribly able when it comes to binaries
> and compiling programs (hence my use of osgeo4w). I have just downloaded a
> *.nc file from another source altogether, to try. I get the same problem,
> so
> I don't think it is specific to the gebco data. The file is small and found
> here
>
> http://www.unidata.ucar.edu/software/netcdf/examples/sresa1b_ncar_ccsm3_0_run1_200001.nc
> if you would like to try it. I would be very interested to know whether it
> works on your pc or not.
>
> Best regards,
>
> Chris
>
> --
> View this message in context:
> http://n2.nabble.com/gdal-translate-not-working-windows-7-64bit-tp4683419p4683698.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/a412b8c1/attachment.html
From ksshannon at gmail.com  Fri Mar  5 17:29:07 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Fri Mar  5 17:29:24 2010
Subject: [gdal-dev] Re: gdal_translate not working/ windows 7 64bit?
In-Reply-To: <1267826490907-4683698.post@n2.nabble.com>
References: <1267823246134-4683419.post@n2.nabble.com>
	<f3b73b7d1003051332yc6b29acqcbeef7dc66d3bde9@mail.gmail.com> 
	<1267826490907-4683698.post@n2.nabble.com>
Message-ID: <c28f2e141003051429p3d979a74m12c8fa9febf3308f@mail.gmail.com>

Chris,
gdal_translate requires selection of a subdataset if the NetCDF file has
more than one subdataset.  Either specify which subdataset you want, or use
-sds for all of them as Tamas did.  I don't know if that will solve your
problem.

kss

-Kyle


On Fri, Mar 5, 2010 at 3:01 PM, ggp08ctl <ggp08ctl@sheffield.ac.uk> wrote:

>
> Hi Tamas,
>
> Thanks for replying. Alas, I am not terribly able when it comes to binaries
> and compiling programs (hence my use of osgeo4w). I have just downloaded a
> *.nc file from another source altogether, to try. I get the same problem,
> so
> I don't think it is specific to the gebco data. The file is small and found
> here
>
> http://www.unidata.ucar.edu/software/netcdf/examples/sresa1b_ncar_ccsm3_0_run1_200001.nc
> if you would like to try it. I would be very interested to know whether it
> works on your pc or not.
>
> Best regards,
>
> Chris
>
> --
> View this message in context:
> http://n2.nabble.com/gdal-translate-not-working-windows-7-64bit-tp4683419p4683698.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100305/3632a25f/attachment.html
From jorgearevalo at gis4free.org  Fri Mar  5 19:44:45 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Fri Mar  5 19:45:10 2010
Subject: [gdal-dev] [WKTRaster] WKT Raster band to GDAL band
Message-ID: <d321138e1003051644q5732f541h4a67f0ea8731ab9f@mail.gmail.com>

Hello,

I've created a WKTRasterBand-to-GDALRasterBand conversor, in the frame of
WKT Raster project. I'm not sure if the results are correct. You can get the
code from here
https://svn.osgeo.org/postgis/spike/wktraster/rt_core/rt_api.c, but
basically, the steps are:

1.- Register GDAL/OGR drivers

2.- Create empty OGR in-memory
Datasource: OGR_Dr_CreateDataSource(OGRGetDriverByName("Memory"),"", NULL);

3.- Create empty GDAL Dataset, taking width and height from WKT Raster Band
("band"
variable): GDALCreate(GDALGetDriverByName("MEM"), "",rt_band_get_width(ctx,
band), rt_band_get_height(ctx, band), 0, GDT_Byte, NULL);

4.- Add default geotransform to GDAL empty dataset: {0.0, 1.0, 0.0, 0.0,
0.0,1.0 }; (I can't get geotransform from WKT Raster Band)

5.- Add GDAL band, getting data from WKT Raster Band:

 sprintf(szDataPointer, "DATAPOINTER=%p", rt_band_get_data(ctx, band));
 apszOptions[0] = szDataPointer;
 GDALAddBand(memdataset, nPixelType, apszOptions)

(pixel type got from WKT Raster Band too)

6.- Create empty OGR layer, to store polygonized
raster: OGR_DS_CreateLayer(memdatasource, "Polygonized layer", NULL,
        wkbPolygon, NULL);

7.- Get GDAL RasterBand from GDAL Dataset, and polygonize it

 gdal_band = GDALGetRasterBand(memdataset, 1);
 GDALPolygonize(gdal_band, NULL, hLayer, -1, NULL, NULL, NULL);

8.- Get all the features from layer and export them to WKT format:

 for(j = 0; j < nFeatureCount; j++)
 {
        hFeature = OGR_L_GetFeature(hLayer, j);
        hGeom = OGR_F_GetGeometryRef(hFeature);
        OGR_G_ExportToWkt(hGeom, &pszSrcText);
 }

So, at the end, pszSrcText has each of the WKT polygons from original
raster. My problems are:

1.- I'm testing this code with really simple raster, and I'm confused. For
example:
* 2x2 32 bits signed int raster, with "1" in all cells. The result:
POLYGON((0 0, 0 2, 2 2, 2 0, 0 0)). I was expecting POLYGON((0 0, 0 1, 1 1,
1 0, 0 0))
* the raster from
http://trac.osgeo.org/postgis/attachment/wiki/WKTRaster/SpecificationWorking01/WKTRasterEnvelopeConvexHullAndShape.gif.
The result:
POLYGON ((3 1,3 2,2 2,2 3,1 3,1 6,2 6,2 7,3 7,3 8,5 8,5 6,3 6,3 3,4 3,5 3,5
1,3 1))
POLYGON ((3 3,3 6,6 6,6 3,3 3))
POLYGON ((5 1,5 3,6 3,6 6,5 6,5 8,6 8,6 7,7 7,7 6,8 6,8 3,7 3,7 2,6 2,6 1,5
1))
POLYGON ((0 0,0 9,9 9,9 0,0 0),(6 7,6 8,3 8,3 7,2 7,2 6,1 6,1 3,2 3,2 2,3
2,3 1,6 1,6 2,7 2,7 3,8 3,8 6,7 6,7 7,6 7))

Something strange here? Am I doing things right?

2.- I'd like to store the pixel value in each polygon. Is a good idea to
create a field in the layer to store pixel value?

3.- From a GDAL RasterBand, I can fetch the owning dataset handle
(GDALGetBandDataset).I think it could be useful to get the WKT Raster handle
from a WKT RasterBand too... Am I right?

Sorry, I know this post is really long. Thanks for reading it, anyway :-)

Best regards,
Jorge

http://www.gis4free.org/blog
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100306/52e73fde/attachment.html
From sjgardner at wisc.edu  Sat Mar  6 08:59:46 2010
From: sjgardner at wisc.edu (Spencer Gardner)
Date: Sat Mar  6 08:59:50 2010
Subject: [gdal-dev] Layer.DeleteFeature problems
Message-ID: <6fc0f22673a0.4b920b72@wiscmail.wisc.edu>

I'm writing a script that implements Layer.DeleteFeature on an ESRI shapefile.  Everything appears to be working - no error messages or anything, but when the script is finished, no features have been deleted.  On a related note, I have tried to circumvent the problem by simply writing a new true/false field on the features marked for deletion using Feature.SetField, but that doesn't seem to be writing anything either.

Running TestCapability on my input layer shows that the feature should be supported, so the error seems to be a failure to write changes to my file.  Maybe I'm missing something?  I'm not sure where I've gone wrong.  Any advice is appreciated:

Thanks,
Spencer Gardner

# import modules
import os, sys
try:
  from osgeo import ogr
except:
  import ogr
startDir = os.getcwd()
tempDir = '/tmp'

# set the working directory
os.chdir(startDir + '/Roads')

# get the shapefile driver
driver = ogr.GetDriverByName('ESRI Shapefile')

# open nodes.shp and get the layer
nodesDS = driver.Open('nodesdelete.shp', 1)

if nodesDS is None:
  print 'Could not open nodesdelete.shp'
  sys.exit(1)

nodesLayer = nodesDS.GetLayer()

# open 2009roads.shp and get the layer
roadsDS = driver.Open('2009roads.shp', 0)
if roadsDS is None:
  print 'Could not open 2009roads.shp'
  sys.exit(1)
roadsLayer = roadsDS.GetLayer()
print 'found ' + str(roadsLayer.GetFeatureCount()) + ' total road features'

# set up the array to store id's to be deleted
deleteNodes = []

# set up the progress bar
count = 1
totalNodes = nodesLayer.GetFeatureCount()
print 'found ' + str(totalNodes) + ' total nodes'

# loop through each node to count the number of connected roads
nodesLayer.ResetReading()
nodesFeature = nodesLayer.GetNextFeature()
while nodesFeature and count < 100:

  # buffer the nodes by 1 foot
  nodesGeom = nodesFeature.GetGeometryRef()
  bufferGeom = nodesGeom.Buffer(1)


  # use bufferGeom as a spatial filter on the node to get all roads
  # within 1 foot of the node
  roadsLayer.SetSpatialFilter(bufferGeom)
  roadCount = roadsLayer.GetFeatureCount()

  # identify nodes for deletion
  if roadCount < 3:
    deleteNodes.append(nodesFeature.GetFID())

  # show progress
  count += 1
  sys.stdout.write('.')
  progress = divmod(1000*count, 24000)
  if progress[1] == 0:
    print str(count) + '/' + str(24000)

  # move to the next node
  nodesFeature.Destroy()
  nodesFeature = nodesLayer.GetNextFeature()

# delete the features
print 'identified ' + str(len(deleteNodes)) + ' features to be deleted'
print 'deleting features\n'
for node in deleteNodes:
  nodesLayer.DeleteFeature(node)
  sys.stdout.write('.')

# close the shapefiles
nodesDS.Destroy()
roadsDS.Destroy()
From jason.roberts at duke.edu  Sat Mar  6 09:15:17 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Sat Mar  6 09:15:23 2010
Subject: [gdal-dev] Layer.DeleteFeature problems
In-Reply-To: <6fc0f22673a0.4b920b72@wiscmail.wisc.edu>
References: <6fc0f22673a0.4b920b72@wiscmail.wisc.edu>
Message-ID: <010601cabd37$72a5cd40$57f167c0$@roberts@duke.edu>

Spencer,

Although I have not tried the DeleteFeature method (yet), I do recall that
the ESRI Shapefile driver docs mention this:

"The OGR shapefile driver supports rewriting existing shapes in a shapefile
as well as deleting shapes. Deleted shapes are marked for deletion in the
.dbf file, and then ignored by OGR. To actually remove them permanently
(resulting in renumbering of FIDs) invoke the SQL 'REPACK ' via the
datasource ExecuteSQL() method."

Perhaps that would help.

Best,
Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Spencer Gardner
Sent: Saturday, March 06, 2010 9:00 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Layer.DeleteFeature problems

I'm writing a script that implements Layer.DeleteFeature on an ESRI
shapefile.  Everything appears to be working - no error messages or
anything, but when the script is finished, no features have been deleted.
On a related note, I have tried to circumvent the problem by simply writing
a new true/false field on the features marked for deletion using
Feature.SetField, but that doesn't seem to be writing anything either.

Running TestCapability on my input layer shows that the feature should be
supported, so the error seems to be a failure to write changes to my file.
Maybe I'm missing something?  I'm not sure where I've gone wrong.  Any
advice is appreciated:

Thanks,
Spencer Gardner

# import modules
import os, sys
try:
  from osgeo import ogr
except:
  import ogr
startDir = os.getcwd()
tempDir = '/tmp'

# set the working directory
os.chdir(startDir + '/Roads')

# get the shapefile driver
driver = ogr.GetDriverByName('ESRI Shapefile')

# open nodes.shp and get the layer
nodesDS = driver.Open('nodesdelete.shp', 1)

if nodesDS is None:
  print 'Could not open nodesdelete.shp'
  sys.exit(1)

nodesLayer = nodesDS.GetLayer()

# open 2009roads.shp and get the layer
roadsDS = driver.Open('2009roads.shp', 0)
if roadsDS is None:
  print 'Could not open 2009roads.shp'
  sys.exit(1)
roadsLayer = roadsDS.GetLayer()
print 'found ' + str(roadsLayer.GetFeatureCount()) + ' total road features'

# set up the array to store id's to be deleted
deleteNodes = []

# set up the progress bar
count = 1
totalNodes = nodesLayer.GetFeatureCount()
print 'found ' + str(totalNodes) + ' total nodes'

# loop through each node to count the number of connected roads
nodesLayer.ResetReading()
nodesFeature = nodesLayer.GetNextFeature()
while nodesFeature and count < 100:

  # buffer the nodes by 1 foot
  nodesGeom = nodesFeature.GetGeometryRef()
  bufferGeom = nodesGeom.Buffer(1)


  # use bufferGeom as a spatial filter on the node to get all roads
  # within 1 foot of the node
  roadsLayer.SetSpatialFilter(bufferGeom)
  roadCount = roadsLayer.GetFeatureCount()

  # identify nodes for deletion
  if roadCount < 3:
    deleteNodes.append(nodesFeature.GetFID())

  # show progress
  count += 1
  sys.stdout.write('.')
  progress = divmod(1000*count, 24000)
  if progress[1] == 0:
    print str(count) + '/' + str(24000)

  # move to the next node
  nodesFeature.Destroy()
  nodesFeature = nodesLayer.GetNextFeature()

# delete the features
print 'identified ' + str(len(deleteNodes)) + ' features to be deleted'
print 'deleting features\n'
for node in deleteNodes:
  nodesLayer.DeleteFeature(node)
  sys.stdout.write('.')

# close the shapefiles
nodesDS.Destroy()
roadsDS.Destroy()
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From ggp08ctl at sheffield.ac.uk  Sat Mar  6 10:54:43 2010
From: ggp08ctl at sheffield.ac.uk (ggp08ctl)
Date: Sat Mar  6 10:54:46 2010
Subject: [gdal-dev] Re: gdal_translate not working/ windows 7 64bit?
In-Reply-To: <c28f2e141003051429p3d979a74m12c8fa9febf3308f@mail.gmail.com>
References: <1267823246134-4683419.post@n2.nabble.com>
	<f3b73b7d1003051332yc6b29acqcbeef7dc66d3bde9@mail.gmail.com>
	<1267826490907-4683698.post@n2.nabble.com>
	<c28f2e141003051429p3d979a74m12c8fa9febf3308f@mail.gmail.com>
Message-ID: <1267890883950-4686688.post@n2.nabble.com>


Hi guys,
thanks for all your responses. I discovered what the error was. I had simply
omitted the name of the tif file that I wanted to output from the command.
It was that simple! I am feeling very foolish now %-|

Regards,
Chris

-- 
View this message in context: http://n2.nabble.com/gdal-translate-not-working-windows-7-64bit-tp4683419p4686688.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lucafasano at interfree.it  Sat Mar  6 11:58:57 2010
From: lucafasano at interfree.it (LFas)
Date: Sat Mar  6 11:58:59 2010
Subject: [gdal-dev] Re: gdal_merge.py doesn't find input files.
In-Reply-To: <4B915A8E.8040308@pobox.com>
References: <1267810326.9507.11.camel@fasano-debian.innova>
	<4B915A8E.8040308@pobox.com>
Message-ID: <1267894737511-4686916.post@n2.nabble.com>


Thanks a lot Frank,
I've just comment out the globbing.
I only desired a confirm that I was wrong.
So I'll check  http://trac.osgeo.org/gdal/ticket/2783.
Thanks
-- 
View this message in context: http://n2.nabble.com/gdal-dev-gdal-merge-py-doesn-t-find-input-files-tp4682337p4686916.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Pierre.Racine at sbf.ulaval.ca  Mon Mar  8 11:42:18 2010
From: Pierre.Racine at sbf.ulaval.ca (Pierre Racine)
Date: Mon Mar  8 11:43:26 2010
Subject: [gdal-dev] [WKTRaster] WKT Raster band to GDAL band
In-Reply-To: <d321138e1003051644q5732f541h4a67f0ea8731ab9f@mail.gmail.com>
References: <d321138e1003051644q5732f541h4a67f0ea8731ab9f@mail.gmail.com>
Message-ID: <87A96661E65C5541AB4D20721C2DD7F88099EA1EE1@EXCH-MBX-A.ulaval.ca>

>4.- Add default geotransform to GDAL empty dataset: {0.0, 1.0, 0.0, 0.0, 0.0,1.0 }; (I can't get
>geotransform from WKT Raster Band)

Why? You can get all the parameters with (in order): rt_raster_get_x_offset(), rt_raster_get_pixel_width(), rt_raster_get_x_rotation(), rt_raster_get_y_offset(), rt_raster_get_y_rotation(), rt_raster_get_pixel_height()...

>1.- I'm testing this code with really simple raster, and I'm confused. For example:
>* 2x2 32 bits signed int raster, with "1" in all cells. The result: POLYGON((0 0, 0 2, 2 2, 2 0, 0
>0)). I was expecting POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))

The result is correct since the pixel size is 1, the raster dimension is 2x2 and there is only one group of pixel sharing the same value.

>* the raster
>from http://trac.osgeo.org/postgis/attachment/wiki/WKTRaster/SpecificationWorking01/WKTRasterEnvelopeC
>onvexHullAndShape.gif. The result:
>POLYGON ((3 1,3 2,2 2,2 3,1 3,1 6,2 6,2 7,3 7,3 8,5 8,5 6,3 6,3 3,4 3,5 3,5 1,3 1))
>POLYGON ((3 3,3 6,6 6,6 3,3 3))
>POLYGON ((5 1,5 3,6 3,6 6,5 6,5 8,6 8,6 7,7 7,7 6,8 6,8 3,7 3,7 2,6 2,6 1,5 1))
>POLYGON ((0 0,0 9,9 9,9 0,0 0),(6 7,6 8,3 8,3 7,2 7,2 6,1 6,1 3,2 3,2 2,3 2,3 1,6 1,6 2,7 2,7 3,8 3,8
>6,7 6,7 7,6 7))
>
>Something strange here? Am I doing things right?

It look good to me. What is wrong?

>2.- I'd like to store the pixel value in each polygon. Is a good idea to create a field in the layer
>to store pixel value?

You are supposed to return the value for each polygon in a "wktgeomval set" as stated in the specs. This way the SQL caller can decide what to do with the value. Isn't that what you did?

>3.- From a GDAL RasterBand, I can fetch the owning dataset handle (GDALGetBandDataset).I think it
>could be useful to get the WKT Raster handle from a WKT RasterBand too... Am I right?

rt_band_get_data()?

Pierre
From jorgearevalo at gis4free.org  Mon Mar  8 13:43:59 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Mon Mar  8 13:44:21 2010
Subject: [gdal-dev] [WKTRaster] WKT Raster band to GDAL band
In-Reply-To: <87A96661E65C5541AB4D20721C2DD7F88099EA1EE1@EXCH-MBX-A.ulaval.ca>
References: <d321138e1003051644q5732f541h4a67f0ea8731ab9f@mail.gmail.com> 
	<87A96661E65C5541AB4D20721C2DD7F88099EA1EE1@EXCH-MBX-A.ulaval.ca>
Message-ID: <d321138e1003081043s8aeb36pf5b10008e4f1b97d@mail.gmail.com>

On Mon, Mar 8, 2010 at 5:42 PM, Pierre Racine
<Pierre.Racine@sbf.ulaval.ca> wrote:
>
> >4.- Add default geotransform to GDAL empty dataset: {0.0, 1.0, 0.0, 0.0, 0.0,1.0 }; (I can't get
> >geotransform from WKT Raster Band)
>
> Why? You can get all the parameters with (in order): rt_raster_get_x_offset(), rt_raster_get_pixel_width(), rt_raster_get_x_rotation(), rt_raster_get_y_offset(), rt_raster_get_y_rotation(), rt_raster_get_pixel_height()...

Yes, I can. It was testing code. But you're right.

>
> >1.- I'm testing this code with really simple raster, and I'm confused. For example:
> >* 2x2 32 bits signed int raster, with "1" in all cells. The result: POLYGON((0 0, 0 2, 2 2, 2 0, 0
> >0)). I was expecting POLYGON((0 0, 0 1, 1 1, 1 0, 0 0))
>
> The result is correct since the pixel size is 1, the raster dimension is 2x2 and there is only one group of pixel sharing the same value.

Ok, Thanks for confirmation.

>
> >* the raster
> >from http://trac.osgeo.org/postgis/attachment/wiki/WKTRaster/SpecificationWorking01/WKTRasterEnvelopeC
> >onvexHullAndShape.gif. The result:
> >POLYGON ((3 1,3 2,2 2,2 3,1 3,1 6,2 6,2 7,3 7,3 8,5 8,5 6,3 6,3 3,4 3,5 3,5 1,3 1))
> >POLYGON ((3 3,3 6,6 6,6 3,3 3))
> >POLYGON ((5 1,5 3,6 3,6 6,5 6,5 8,6 8,6 7,7 7,7 6,8 6,8 3,7 3,7 2,6 2,6 1,5 1))
> >POLYGON ((0 0,0 9,9 9,9 0,0 0),(6 7,6 8,3 8,3 7,2 7,2 6,1 6,1 3,2 3,2 2,3 2,3 1,6 1,6 2,7 2,7 3,8 3,8
> >6,7 6,7 7,6 7))
> >
> >Something strange here? Am I doing things right?
>
> It look good to me. What is wrong?

Mmm... ok, it may be only my impression.

>
> >2.- I'd like to store the pixel value in each polygon. Is a good idea to create a field in the layer
> >to store pixel value?
>
> You are supposed to return the value for each polygon in a "wktgeomval set" as stated in the specs. This way the SQL caller can decide what to do with the value. Isn't that what you did?

Yes, I did this. The point is I was trying to label each polygon with
its pixel value (GDALPolygonize allows this). Then, in a loop, I get
all the features of the layer written by GDALPolygonize and store the
exported WKT polygon and the px value in a wktgeomval structure.
Sounds good?

>
> >3.- From a GDAL RasterBand, I can fetch the owning dataset handle (GDALGetBandDataset).I think it
> >could be useful to get the WKT Raster handle from a WKT RasterBand too... Am I right?
>
> rt_band_get_data()?

No, I mean getting the raster that contains this band, from the band
struct itself, like

GDALDatasetH?GDALGetBandDataset(GDALRasterBandH?hBand?)

from GDAL C API

(or GDALRasterBand::GetDataset() from GDAL C++ API)

>
> Pierre

Thanks Pierre!
Jorge
From toefftoeff1 at gmx.net  Mon Mar  8 14:10:54 2010
From: toefftoeff1 at gmx.net (toefftoeff1@gmx.net)
Date: Mon Mar  8 14:12:10 2010
Subject: [gdal-dev] enable GEOS support (GDAL/OGR 1.7.1; GEOS 2.3.0; 
	VB.NET)
In-Reply-To: <f3b73b7d1003051157v795e2c46l56b7d66976a79d92@mail.gmail.com>
References: <4B9130C2.5030807@gmx.net>
	<f3b73b7d1003051157v795e2c46l56b7d66976a79d92@mail.gmail.com>
Message-ID: <4B954BBE.9060905@gmx.net>

Hi Tamas,

thanks a lot for Your reply.

Using Your SDK I was able to track down the compilation problem - swig
did not re-generate all files
and I needed to include an extra GEOS-header directory as follows:

GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers
-I$(GEOS_DIR)/source/headers/geos -DHAVE_GEOS

-- 
Kind regards,

  Christoph

> Hi,
>
> You might wan't to make a test with the packages available at:
> http://vbkto.dyndns.org/sdk/
>
> All of those gave geos support compiled in.
>
> By downloading the SDK pacakges your could also compile gdal by
> yourself easily using a VS Command Prompt and type 'nmake gdal' in the
> SDK root directory.
>
> Best regards,
>
> Tamas
>
>
> 2010/3/5 <toefftoeff1@gmx.net <mailto:toefftoeff1@gmx.net>>
>
>     Hello,
>
>     I would like to build and use OGR with GEOS support on Windows XP
>     32 bit
>     using
>     Visual Basic.NET (.NET framework 2.0 or 3.5).
>
>     GDAL/OGR 1.7.1 and GEOS 2.3.0 compilation seem to work fine (using
>     nmake, Visual Studio 2008, only
>     warnings, no error messages).
>
>     I used the following GDAL/OGR nmake.opt settings to include GEOMS
>     support:
>
>     # Uncomment for GEOS support
>     GEOS_DIR=D:\svn\code\Tools\geos-3.2.0
>     GEOS_CFLAGS = -I$(GEOS_DIR)/capi -I$(GEOS_DIR)/source/headers
>     -DHAVE_GEOS
>     GEOS_LIB     = $(GEOS_DIR)/build/msvc90/Release/geos_c_i.lib
>
>     But using GEOMS in a sample .NET project always results in an
>     exception
>     "GEOS support not enabled".
>
>     Sample code:
>
>                Ogr.RegisterAll()
>
>                Dim g1 As Geometry = Geometry.CreateFromWkt("POLYGON((0 0,
>     10 10, 10 0, 0 0))")
>                Dim g2 As Geometry = Geometry.CreateFromWkt("POLYGON((-90
>     -90, -90 90, 190 -90, -90 -90))")
>
>                Dim result As Boolean = g2.Contains(g1)
>
>     I copied all GDAL/OGR wrapper libraries and geos_c.dll to the
>     appropriate places.
>
>     Any suggestions?
>
>     Thanks a lot...
>
>      Christoph
>     _______________________________________________
>     gdal-dev mailing list
>     gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100308/f2726464/attachment.html
From aboudreault at mapgears.com  Mon Mar  8 14:52:10 2010
From: aboudreault at mapgears.com (Alan Boudreault)
Date: Mon Mar  8 14:52:12 2010
Subject: [gdal-dev] Re: Compile error with --with-python
In-Reply-To: <1267708774481-4674203.post@n2.nabble.com>
References: <1267640429069-4669408.post@n2.nabble.com>
	<1267708774481-4674203.post@n2.nabble.com>
Message-ID: <201003081452.10419.aboudreault@mapgears.com>

Dan,

This is a problem related to the python setup tools and string encoding. To 
fix it:

 - Open the file "setup.py" in swig/python/.
 - Go to line 141: self.library_dirs.append(os.path.join(self.gdaldir,'lib'))
 -  Add the following line just below the the line 141:
self.library_dirs = [path.encode("utf-8",'ignore') for path in 
self.library_dirs]
 -  Save and compile/install

Alan

On March 4, 2010 08:19:34 am ChiefDan wrote:
> I grabbed the gdal-1.6.3.tar.gz  release and ran through the make with no
> issues.
> Perhaps something has changed in the latest release make scripts somewhere?
> 
> 
> 
> Dan
> 

-- 
Alan Boudreault
Mapgears
http://www.mapgears.com
From chiefdan at gmail.com  Mon Mar  8 17:36:59 2010
From: chiefdan at gmail.com (ChiefDan@gmail.com)
Date: Mon Mar  8 17:37:02 2010
Subject: [gdal-dev] Re: Compile error with --with-python
In-Reply-To: <201003081452.10419.aboudreault@mapgears.com>
References: <1267640429069-4669408.post@n2.nabble.com>
	<1267708774481-4674203.post@n2.nabble.com>
	<201003081452.10419.aboudreault@mapgears.com>
Message-ID: <8929941d1003081436s4f37f78btc7b6f13fc9f7355f@mail.gmail.com>

Alan,
Thanks for the info. I'll give that a shot.

Dan

On Mon, Mar 8, 2010 at 2:52 PM, Alan Boudreault
<aboudreault@mapgears.com> wrote:
> Dan,
>
> This is a problem related to the python setup tools and string encoding. To
> fix it:
>
> ?- Open the file "setup.py" in swig/python/.
> ?- Go to line 141: self.library_dirs.append(os.path.join(self.gdaldir,'lib'))
> ?- ?Add the following line just below the the line 141:
> self.library_dirs = [path.encode("utf-8",'ignore') for path in
> self.library_dirs]
> ?- ?Save and compile/install
>
> Alan
>
> On March 4, 2010 08:19:34 am ChiefDan wrote:
>> I grabbed the gdal-1.6.3.tar.gz ?release and ran through the make with no
>> issues.
>> Perhaps something has changed in the latest release make scripts somewhere?
>>
>>
>>
>> Dan
>>
>
> --
> Alan Boudreault
> Mapgears
> http://www.mapgears.com
>
From sjgardner at wisc.edu  Mon Mar  8 18:51:51 2010
From: sjgardner at wisc.edu (Spencer Gardner)
Date: Mon Mar  8 18:51:54 2010
Subject: [gdal-dev] Geometry.Within error
In-Reply-To: <6fc0f22673a0.4b920b72@wiscmail.wisc.edu>
References: <6fc0f22673a0.4b920b72@wiscmail.wisc.edu>
Message-ID: <6f20870f147c.4b953937@wiscmail.wisc.edu>

I'm writing a script that tests whether a feature lies completely within features of another layer.  When the script runs, it gives me the following error:

Traceback (most recent call last):
  File "landuse.py", line 82, in <module>
    if landGeom.Within(bufferGeom):
AttributeError: 'NoneType' object has no attribute 'Within'

I don't know Python well enough to know exactly what that error is telling me.  I was able to run the script several days ago without problems and don't remember making any significant modifications since that time.  In the meantime, I have received an update to OGR.  Could this be a bug introduced by the update?

Thanks for the help,
Spencer Gardner
----------------------------
relevant code:

while nodesFeature:

  # buffer the nodes by .5 miles (2640 feet)
  nodesGeom = nodesFeature.GetGeometryRef()
  bufferGeom = nodesGeom.Buffer(2640)


  # use bufferGeom as a spatial filter on the node to get all parcels
  # within .5 miles
  landLayer.SetSpatialFilter(bufferGeom)

  # set up the resarea and totalarea variables
  resarea = 0
  totalarea = 0

  # select the first feature in land use
  landFeature = landLayer.GetNextFeature()

  # loop through each land feature and check if it falls entirely within the buffer
  while landFeature:
    landGeom = landFeature.GetGeometryRef()
    if landGeom.Within(bufferGeom):
      lucode = landFeature.GetFieldAsInteger(landFeature.GetFieldIndex('LUCODE'))
      area = landGeom.GetArea()
      totalarea += area
      if lucode == 111 or lucode == 113 or lucode == 115:
        resarea += area

    # close things down and move to the next landFeature
    landFeature.Destroy()
    landFeature = landLayer.GetNextFeature()
  

  # write the resarea and total area for each node
  nodesFeature.SetField(nodesFeature.GetFieldIndex('TOTAREA'), totalarea)
  nodesFeature.SetField(nodesFeature.GetFieldIndex('RESAREA'), resarea)
From warmerdam at pobox.com  Mon Mar  8 19:39:42 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar  8 19:38:59 2010
Subject: [gdal-dev] Geometry.Within error
In-Reply-To: <6f20870f147c.4b953937@wiscmail.wisc.edu>
References: <6fc0f22673a0.4b920b72@wiscmail.wisc.edu>
	<6f20870f147c.4b953937@wiscmail.wisc.edu>
Message-ID: <4B9598CE.90905@pobox.com>

Spencer Gardner wrote:
> I'm writing a script that tests whether a feature lies completely within features of another layer.  When the script runs, it gives me the following error:
> 
> Traceback (most recent call last):
>   File "landuse.py", line 82, in <module>
>     if landGeom.Within(bufferGeom):
> AttributeError: 'NoneType' object has no attribute 'Within'
> 
> I don't know Python well enough to know exactly what that error is telling me.  I was able to run the script several days ago without problems and don't remember making any significant modifications since that time.  In the meantime, I have received an update to OGR.  Could this be a bug introduced by the update?

Spencer,

It is indicating that for some reason landGeom is None, the null value
for python.  I don't see anything odd about the script so perhaps there
are actually features in this dataset that are null.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From david.m.baker at chk.com  Mon Mar  8 19:40:22 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon Mar  8 19:40:27 2010
Subject: [gdal-dev] OgrInfo ShapeFile Extents Report
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C6@OKCEXHPRD007.chkenergy.net>

List,

Does OgrInfo report the actual extents of the geometries in a ShapeFile or just the extents reported in the header of the ShapeFile?

Thanks,
David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com<mailto:david.m.baker@chk.com>


________________________________
This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100308/3f57f7bd/attachment-0001.html
From warmerdam at pobox.com  Mon Mar  8 19:50:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar  8 19:49:53 2010
Subject: [gdal-dev] OgrInfo ShapeFile Extents Report
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C6@OKCEXHPRD007.chkenergy.net>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C6@OKCEXHPRD007.chkenergy.net>
Message-ID: <4B959B5D.9080308@pobox.com>

David Baker (Geoscience) wrote:
> List,
> 
>  
> 
> Does OgrInfo report the actual extents of the geometries in a ShapeFile 
> or just the extents reported in the header of the ShapeFile?

David,

GetExtent() is optimized by the shapefile driver to report the extents
from the file header rather than scanning the data as most drivers do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From david.m.baker at chk.com  Mon Mar  8 19:53:51 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon Mar  8 19:53:54 2010
Subject: [gdal-dev] OgrInfo ShapeFile Extents Report
In-Reply-To: <4B959B5D.9080308@pobox.com>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C6@OKCEXHPRD007.chkenergy.net>
	<4B959B5D.9080308@pobox.com>
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C9@OKCEXHPRD007.chkenergy.net>

Frank,

Thanks...  Is there a method in org that scans all geometries or will I have to iterate through myself?

David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Monday, March 08, 2010 6:51 PM
To: David Baker (Geoscience)
Cc: 'gdal-dev@lists.osgeo.org'
Subject: Re: [gdal-dev] OgrInfo ShapeFile Extents Report

David Baker (Geoscience) wrote:
> List,
>
>
>
> Does OgrInfo report the actual extents of the geometries in a ShapeFile
> or just the extents reported in the header of the ShapeFile?

David,

GetExtent() is optimized by the shapefile driver to report the extents
from the file header rather than scanning the data as most drivers do.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From warmerdam at pobox.com  Mon Mar  8 20:24:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar  8 20:24:08 2010
Subject: [gdal-dev] OgrInfo ShapeFile Extents Report
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C9@OKCEXHPRD007.chkenergy.net>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C6@OKCEXHPRD007.chkenergy.net>
	<4B959B5D.9080308@pobox.com>
	<E3B01AE590420B45B38B00C9A8B23FDB4AA42090C9@OKCEXHPRD007.chkenergy.net>
Message-ID: <4B95A368.2060102@pobox.com>

David Baker (Geoscience) wrote:
> Frank,
> 
> Thanks...  Is there a method in org that scans all geometries or will I have to iterate through myself?

David,

I think you would have to do this yourself.  You can see the default
implementation at:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrlayer.cpp#L189

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From david.m.baker at chk.com  Mon Mar  8 20:27:34 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Mon Mar  8 20:27:41 2010
Subject: [gdal-dev] OgrInfo ShapeFile Extents Report
In-Reply-To: <4B95A368.2060102@pobox.com>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA42090C6@OKCEXHPRD007.chkenergy.net>
	<4B959B5D.9080308@pobox.com>
	<E3B01AE590420B45B38B00C9A8B23FDB4AA42090C9@OKCEXHPRD007.chkenergy.net>
	<4B95A368.2060102@pobox.com>
Message-ID: <CD94299B-CE41-434D-B30F-10F960DA5D56@chk.com>

Thanks for the info Frank.

David Baker @ CHK
Sent from my iPhone

On Mar 8, 2010, at 7:24 PM, "Frank Warmerdam" <warmerdam@pobox.com>
wrote:

> David Baker (Geoscience) wrote:
>> Frank,
>>
>> Thanks...  Is there a method in org that scans all geometries or
>> will I have to iterate through myself?
>
> David,
>
> I think you would have to do this yourself.  You can see the default
> implementation at:
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/generic/ogrlayer.cpp#L189
>
> Best regards,
> --
> ---------------------------------------
> +--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for
> Rent
>

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From warmerdam at pobox.com  Mon Mar  8 22:25:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar  8 22:24:37 2010
Subject: [gdal-dev] Re: Motion: Commit access for Brian Case
In-Reply-To: <4B87FDE9.1010102@pobox.com>
References: <4B87FDE9.1010102@pobox.com>
Message-ID: <4B95BFA7.9040905@pobox.com>

Frank Warmerdam wrote:
> Motion: Commit access on the GDAL/OGR project is extended to Brian Case.

Folks,

This motion passed (a while ago) with support from FrankW, DanielM,
EvenR and TamasS.

Welcome board Brian (aka Winkey)!

Best regard,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From robert.zermeno at navy.mil  Tue Mar  9 16:44:01 2010
From: robert.zermeno at navy.mil (Zermeno, Robert J CIV NAVAIR, 472100D)
Date: Tue Mar  9 16:44:06 2010
Subject: [gdal-dev] GDAL, Borland C++, and GeoPDF
Message-ID: <F8A8A114E3F41D4D9157F1BECCA3BA910298BDD4@nawechlkez02v.nadsuswe.nads.navy.mil>

Has anyone attempted to port GDAL to Borland (codegear) c++?  If so or not, can you give input as to what might need to be done to get the code working in Borland (issues of portability? Files I might need to touch?).  My supervisors have funded me money to take GDAL to be ported to Borland.  I have seen the link that specifies main issues:  http://trac.osgeo.org/gdal/wiki/FAQInstallationAndBuilding#CanIbuildGDALwithBorlandCorotherCcompilers, under the question: "Can I build GDAL with Borland C or other C compilers?".

Responses will be much appreciated.  Once I have completed it, I will like to supply my solution to the group.  

Lastly, what has become of GeoPDF and GDAL?  I read talks of people wanting this option, but what is the current status?  Is someone doing it or until a later time?

Robert
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 4926 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100309/3e2e391c/smime.bin
From peter.hopfgartner at r3-gis.com  Wed Mar 10 06:35:05 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Wed Mar 10 07:35:14 2010
Subject: [gdal-dev] Issues when exporting from PostGIS to shape
Message-ID: <4B9783E9.6080702@r3-gis.com>

Dear GDAL devs

Since I'm new to OGR, the following issues may be caused by my complete 
ignorance. Anyway, the story goes like this:


I have a PostGIS tabel, like this:
CREATE TABLE impexp_shp.points (
id serial,
name varchar(80),
CONSTRAINT points_pkey PRIMARY KEY (id)
);

which contains the following:

INSERT INTO impexp_shp.points (name, the_geom)
VALUES
('cos? ?, Stra?e, ??? ??? ? ? ? ? ? ? ? ? ?', ST_GeomFromText('POINT(1 
1)',-1));

I try to export this as a shape file:

ogr2ogr -f 'ESRI Shapefile' '/tmp/ut_table_with_geom/points' 
PG:'host=postgis user=unittest dbname=unittest password=unittestx' 
'impexpshp.points'

And get the attached shape file.

I have the following issues with the result:

i) The .dbf in this shape file does not contain the column "id".

ii) the resulting shape file has a language identifier set to 57 (ANSI), 
but it really is UTF-8 [1][2].

GDAL is version 1.6.3. PostGIS is version 1.4.1. platform is CentOS 5, 
64 bit.

Regards,

Peter

[1] 
http://support.esri.com/index.cfm?fa=knowledgebase.techArticles.articleShow&d=21106
[2] http://www.dbase.com/knowledgebase/int/db7_file_fmt.htm

-- 
 
Dott. Peter Hopfgartner
 
R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535 

-------------- next part --------------
A non-text attachment was scrubbed...
Name: points.zip
Type: application/zip
Size: 859 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100310/1d6ba147/points.zip
From peter.hopfgartner at r3-gis.com  Wed Mar 10 07:40:14 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Wed Mar 10 07:45:58 2010
Subject: [gdal-dev] Issues when exporting from PostGIS to shape
Message-ID: <1575283986.1268224814516@ace.smi>

This email contained a .zip file attachment. Raytheon does not allow email attachments that are considered likely to contain malicious code. For your protection this attachment has been removed.

If this email is from an unknown source, please simply delete this email.

If this email was expected, and it is from a known sender, you may follow the below suggested instructions to obtain these types of attachments.

+ Instruct the sender to enclose the file(s) in a ".zip" compressed file, and rename the ".zip" compressed file with a different extension, such as, ".rtnzip".  Password protecting the renamed ".zip" compressed file adds an additional layer of protection. When you receive the file, please rename it with the extension ".zip".

Additional instructions and options on how to receive these attachments can be found at:

http://security.it.ray.com/antivirus/extensions.html
http://security.it.ray.com/news/2007/zipfiles.html

Should you have any questions or difficulty with these instructions, please contact the Help Desk at 877.844.4712

---

Dear GDAL devs

Since I'm new to OGR, the following issues may be caused by my complete 
ignorance. Anyway, the story goes like this:


I have a PostGIS tabel, like this:
CREATE TABLE impexp_shp.points (
id serial,
name varchar(80),
CONSTRAINT points_pkey PRIMARY KEY (id)
);

which contains the following:

INSERT INTO impexp_shp.points (name, the_geom)
VALUES
('cos? ?, Stra?e, ??? ??? ? ? ? ? ? ? ? ? ?', ST_GeomFromText('POINT(1 
1)',-1));

I try to export this as a shape file:

ogr2ogr -f 'ESRI Shapefile' '/tmp/ut_table_with_geom/points' 
PG:'host=postgis user=unittest dbname=unittest password=unittestx' 
'impexpshp.points'

And get the attached shape file.

I have the following issues with the result:

i) The .dbf in this shape file does not contain the column "id".

ii) the resulting shape file has a language identifier set to 57 (ANSI), 
but it really is UTF-8 [1][2].

GDAL is version 1.6.3. PostGIS is version 1.4.1. platform is CentOS 5, 
64 bit.

Regards,

Peter

[1] 
http://support.esri.com/index.cfm?fa=knowledgebase.techArticles.articleShow&d=21106
[2] http://www.dbase.com/knowledgebase/int/db7_file_fmt.htm

-- 
 
Dott. Peter Hopfgartner
 
R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535
From warmerdam at pobox.com  Wed Mar 10 10:08:46 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 10 10:07:51 2010
Subject: [gdal-dev] Issues when exporting from PostGIS to shape
In-Reply-To: <1575283986.1268224814516@ace.smi>
References: <1575283986.1268224814516@ace.smi>
Message-ID: <4B97B5FE.6040700@pobox.com>

Peter Hopfgartner wrote:
> i) The .dbf in this shape file does not contain the column "id".

Peter,

I believe the "id" field is being treated as the feature id, and
thus is not exposed as a regular column.  This results in it being
lost in the translation.

I can see that in some circumstances it would be desirable to preserve
this as a regular attribute but currently there is no mechanism within
the postgres driver itself to accomplish this.

One workaround is to do the translation as an explicit user sql command
to avoid the automatic handling.

eg.
ogr2ogr /tmp/ut_table_with_geom/points PG:... \
   -sql "select * from impexpshp.points"

> ii) the resulting shape file has a language identifier set to 57 (ANSI), 
> but it really is UTF-8 [1][2].

That is correct.   The Shapefile driver is currently unaware of
encoding issues and always marks the generated dbf files with the default
(ANSI) setting.  Internally OGR attempts to manage text attributes
in UTF-8, and the postgres driver does honour that.

The Shapefile driver really needs to be upgraded to be encoding aware;
however, there are manpower and technical issues around how to do that
properly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From peter.hopfgartner at r3-gis.com  Wed Mar 10 11:03:04 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Wed Mar 10 11:03:16 2010
Subject: [gdal-dev] Issues when exporting from PostGIS to shape
In-Reply-To: <4B97B5FE.6040700@pobox.com>
References: <1575283986.1268224814516@ace.smi> <4B97B5FE.6040700@pobox.com>
Message-ID: <4B97C2B8.3050302@r3-gis.com>

Frank Warmerdam wrote:
> Peter Hopfgartner wrote:
>> i) The .dbf in this shape file does not contain the column "id".
>
> Peter,
>
> I believe the "id" field is being treated as the feature id, and
> thus is not exposed as a regular column.  This results in it being
> lost in the translation.
>
> I can see that in some circumstances it would be desirable to preserve
> this as a regular attribute but currently there is no mechanism within
> the postgres driver itself to accomplish this.
>
> One workaround is to do the translation as an explicit user sql command
> to avoid the automatic handling.
>
> eg.
> ogr2ogr /tmp/ut_table_with_geom/points PG:... \
>   -sql "select * from impexpshp.points"
>
This works. Thank you. One minor issue: The resulting shape file is 
names sql_statement. Can I change this name?
>> ii) the resulting shape file has a language identifier set to 57 
>> (ANSI), but it really is UTF-8 [1][2].
>
> That is correct.   The Shapefile driver is currently unaware of
> encoding issues and always marks the generated dbf files with the default
> (ANSI) setting.  Internally OGR attempts to manage text attributes
> in UTF-8, and the postgres driver does honour that.
>
> The Shapefile driver really needs to be upgraded to be encoding aware;
> however, there are manpower and technical issues around how to do that
> properly.
>
Where could one start to work on this issue? Is this in the realm of 
shapelib? We did some analysis on this in our company and maybe we can 
help with this.
> Best regards,

Thank you,

Peter

-- 
 
Dott. Peter Hopfgartner
 
R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535 

From warmerdam at pobox.com  Wed Mar 10 11:57:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 10 11:57:01 2010
Subject: [gdal-dev] Issues when exporting from PostGIS to shape
In-Reply-To: <4B97C2B8.3050302@r3-gis.com>
References: <1575283986.1268224814516@ace.smi> <4B97B5FE.6040700@pobox.com>
	<4B97C2B8.3050302@r3-gis.com>
Message-ID: <4B97CF8D.8010300@pobox.com>

Peter Hopfgartner wrote:
>> eg.
>> ogr2ogr /tmp/ut_table_with_geom/points PG:... \
>>   -sql "select * from impexpshp.points"
>>
> This works. Thank you. One minor issue: The resulting shape file is 
> names sql_statement. Can I change this name?

Peter,

You can use the -nln (new layer name) switch to set the name of the
created layer.

ogr2ogr /tmp/ut_table_with_geom/points PG:... \
   -nln out_points -sql "select * from impexpshp.points"

>>> ii) the resulting shape file has a language identifier set to 57 
>>> (ANSI), but it really is UTF-8 [1][2].
>>
>> That is correct.   The Shapefile driver is currently unaware of
>> encoding issues and always marks the generated dbf files with the default
>> (ANSI) setting.  Internally OGR attempts to manage text attributes
>> in UTF-8, and the postgres driver does honour that.
>>
>> The Shapefile driver really needs to be upgraded to be encoding aware;
>> however, there are manpower and technical issues around how to do that
>> properly.
>>
> Where could one start to work on this issue? Is this in the realm of 
> shapelib? We did some analysis on this in our company and maybe we can 
> help with this.

Some work would need to be done within shapelib's dbfopen.c code to
read and write the encoding indicators.  Some work would need to be
done in the OGR shapefile driver to translate to UTF-8 when reading
and to translate to the target encoding on output with a creation
option to control encoding.

I am very concerned about compatability issues, so some care would
be necessary.

There are tickets on the issue that may have some information.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sintsixtus at gmail.com  Wed Mar 10 13:23:53 2010
From: sintsixtus at gmail.com (marc)
Date: Wed Mar 10 13:24:04 2010
Subject: [gdal-dev] Compilation issues with gdal/ecw.
Message-ID: <4B97E3B9.7040303@gmail.com>

Hello,

I'm on Ubuntu 9.10/jaunty.


I have the combo "gdal-1.7.1/libecwj2-3.3"

gcc -v
Using built-in specs.
Target: i486-linux-gnu
Configured with: ../src/configure -v --with-pkgversion='Ubuntu 
4.4.1-4ubuntu9' --with-bugurl=file:///usr/share/doc/gcc-4.4/README.Bugs 
--enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr 
--enable-shared --enable-multiarch --enable-linker-build-id 
--with-system-zlib --libexecdir=/usr/lib --without-included-gettext 
--enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.4 
--program-suffix=-4.4 --enable-nls --enable-clocale=gnu 
--enable-libstdcxx-debug --enable-objc-gc --enable-targets=all 
--disable-werror --with-arch-32=i486 --with-tune=generic 
--enable-checking=release --build=i486-linux-gnu --host=i486-linux-gnu 
--target=i486-linux-gnu
Thread model: posix
gcc version 4.4.1 (Ubuntu 4.4.1-4ubuntu9)


After ecw make & install, I compile gdal. (wiith configure --with-ecw)

Then I get


make[2]: Map '/home/marc/development/gdal-1.7.1/frmts/ecw' wordt 
binnengegaan
/bin/sh /home/marc/development/gdal-1.7.1/libtool --mode=compile 
--tag=CXX g++ -g -O2  -Wall  -I/home/marc/development/gdal-1.7.1/port 
-I/home/marc/development/gdal-1.7.1/gcore 
-I/home/marc/development/gdal-1.7.1/alg 
-I/home/marc/development/gdal-1.7.1/ogr 
-I/home/marc/development/gdal-1.7.1/ogr/ogrsf_frmts -DFRMT_ecw 
-DOGR_ENABLED -I/home/marc/development/gdal-1.7.1/port 
-I/usr/local/include   -c -o ../o/ecwdataset.lo ecwdataset.cpp 

libtool: compile:  g++ -g -O2 -Wall 
-I/home/marc/development/gdal-1.7.1/port 
-I/home/marc/development/gdal-1.7.1/gcore 
-I/home/marc/development/gdal-1.7.1/alg 
-I/home/marc/development/gdal-1.7.1/ogr 
-I/home/marc/development/gdal-1.7.1/ogr/ogrsf_frmts -DFRMT_ecw 
-DOGR_ENABLED -I/home/marc/development/gdal-1.7.1/port 
-I/usr/local/include -c ecwdataset.cpp  -fPIC -DPIC -o 
../o/.libs/ecwdataset.o 

In file included from /usr/local/include/NCSDefs.h:38, 

                  from /usr/local/include/NCSECWClient.h:48, 

                  from vsiiostream.h:43, 

                  from ecwdataset.cpp:35: 

/usr/local/include/NCSTypes.h:247:2: error: #error unknown machine type 
will require custom 64 bit variables 

In file included from /usr/local/include/NCSECWClient.h:48, 

                  from vsiiostream.h:43, 

                  from ecwdataset.cpp:35: 

/usr/local/include/NCSDefs.h:220:2: error: #error DEFINE SYSTEM INCLUDES 
FOR TYPES
In file included from /usr/local/include/NCSJP2FileView.h:39, 

                  from /usr/local/include/NCSFile.h:27, 

                  from vsiiostream.h:46, 

                  from ecwdataset.cpp:35: 

/usr/local/include/NCSMutex.h:93:2: error: #error NCSGlobalLockInfo 

In file included from /usr/local/include/NCSJPCIOStream.h:30, 

                  from /usr/local/include/NCSJP2Box.h:27, 

                  from /usr/local/include/NCSJP2FileView.h:45, 

                  from /usr/local/include/NCSFile.h:27, 

                  from vsiiostream.h:46, 

                  from ecwdataset.cpp:35: 

/usr/local/include/NCSFileIO.h:132:2: error: #error - need to include 
types.h and stat.h for this platform 

In file included from /usr/local/include/NCSDefs.h:38, 

                  from /usr/local/include/NCSECWClient.h:48, 

                  from vsiiostream.h:43, 

                  from ecwdataset.cpp:35: 

/usr/local/include/NCSTypes.h:263: error: 'UINT32' does not name a type 

/usr/local/include/NCSTypes.h:264: error: 'UINT64' does not name a type 

/usr/local/include/NCSTypes.h:265: error: 'UINT64' does not name a type 

/usr/local/include/NCSTypes.h:266: error: 'INT64' does not name a type 

/usr/local/include/NCSTypes.h:267: error: 'INT64' does not name a type 

/usr/local/include/NCSTypes.h:272: error: 'UINT32' does not name a type 

In file included from vsiiostream.h:43, 

                  from ecwdataset.cpp:35:
etc.


1) since the source of ecw is more or less open, a bin tar.gz gdal+ecw 
would be fine. (just a gdal folder where we need to do "make install")

2) a solution for this problem??  It might be a development/*.h  package??



Thanks,
Marc
-- 
What's on Shortwave guide: choose an hour, go!
http://shortwave.tk
700+ Radio Stations on SW http://swstations.tk
300+ languages on SW http://radiolanguages.tk
From bontepaarden at gmail.com  Wed Mar 10 15:16:07 2010
From: bontepaarden at gmail.com (Paul Meems)
Date: Wed Mar 10 15:16:32 2010
Subject: [gdal-dev] Change Resampling method
Message-ID: <870e056a1003101216k35e1f953wea10e3b1948b9437@mail.gmail.com>

We're using GDAL in MapWindow GIS and we're very happy about it.
Thanks for this great library.

Currently we have problems displaying png files representing only a few
lines.
The lines show up very stippled. Pixels are missing.

Reading this article, this seems 'by design':
http://n2.nabble.com/Change-Resampling-method-td3827881.html

This is not tolerable for us so we will try and make a custom method to
resample using lanscoz.
Before we dig in to this I want to know is others are working on this as
well and/or have some tips&tricks.
No need to reinvent the wheel again, right ;)

Thanks,

Paul

--
Paul Meems
Release manager, configuration manager
and forum moderator of MapWindow GIS.
www.mapwindow.org

Owner of MapWindow.nl - Support for
Dutch speaking users.
www.mapwindow.nl
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100310/79ea7139/attachment.html
From warmerdam at pobox.com  Wed Mar 10 15:31:12 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 10 15:30:17 2010
Subject: [gdal-dev] Change Resampling method
In-Reply-To: <870e056a1003101216k35e1f953wea10e3b1948b9437@mail.gmail.com>
References: <870e056a1003101216k35e1f953wea10e3b1948b9437@mail.gmail.com>
Message-ID: <4B980190.2080206@pobox.com>

Paul Meems wrote:
> We're using GDAL in MapWindow GIS and we're very happy about it.
> Thanks for this great library.
> 
> Currently we have problems displaying png files representing only a few 
> lines.
> The lines show up very stippled. Pixels are missing.
> 
> Reading this article, this seems 'by design':
> http://n2.nabble.com/Change-Resampling-method-td3827881.html
> 
> This is not tolerable for us so we will try and make a custom method to 
> resample using lanscoz.
> Before we dig in to this I want to know is others are working on this as 
> well and/or have some tips&tricks.
> No need to reinvent the wheel again, right ;)

Paul,

There is a lanscoz resampler built into the GDAL warper, but I'm not
convinced this would be a good idea for general use by a display engine.

I'd suggest, in cases like this, to use RasterIO() to load a closer to
the underlying resolution and do the rest of the downsampling yourself
using lanscoz or other methods.

In a web mapping application built on MapServer using black and white
scanline linework drawings, we found just using averaging for downsamping
gave good results in preserving the linework in a sort of anti-aliased
fashion.  So you might not need anything to fancy for the resampling.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ekkehart at gmx.de  Wed Mar 10 16:59:29 2010
From: ekkehart at gmx.de (NopMap)
Date: Wed Mar 10 16:59:31 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <1267040120346-4628026.post@n2.nabble.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
	<1266965795875-4622435.post@n2.nabble.com>
	<1267040120346-4628026.post@n2.nabble.com>
Message-ID: <1268258369264-4712621.post@n2.nabble.com>



Hi!


I am still struggling with this problem. No ideas anybody? Or maybe a
recommendation for a better forum to adress this matter?

bye
          Nop

-- 
View this message in context: http://n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p4712621.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Pablo.Angelo at dlr.de  Thu Mar 11 01:54:24 2010
From: Pablo.Angelo at dlr.de (Pablo.Angelo@dlr.de)
Date: Thu Mar 11 01:55:28 2010
Subject: [gdal-dev] How to access Z Offset and Scale in GTiff?
Message-ID: <561F7362D8C4FD418500446D17B21DE116179C@exbe7.intra.dlr.de>

Hi all,

Is there a way to read / write the Z component in the Geotiff ModelPixelScaleTag and ModelTiepointTag? I mostly work with DEM data, where the vertical resolution of the DEM raster is often stored in this tag.
 
>From the API, one would expect that the RasterBand::GetOffset() and RasterBand::GetScale() should make use of this information, however, it seems that that the GTiff driver does simply ignore the Z entries in ModelPixelScaleTag and ModelTiepointTag.

Would you accept a patch that implements reading and writing the offsets from and to these tags?

Best regards
  Pablo d'Angelo
From theunsheydenrych at gmail.com  Thu Mar 11 07:11:04 2010
From: theunsheydenrych at gmail.com (theuns)
Date: Thu Mar 11 07:11:23 2010
Subject: [gdal-dev] gdal_translate give upside down result for Geotiff
Message-ID: <1268309464.8623.22.camel@theuns-laptop>

Hi
I have scanned in maps, that needs to be georeferenced.
I usually did the georeferencing in ArcMap. I would like to move a away
from propriety software to do this.

I used gdal_translate to georeference the supplied tif file. The result
is "upside down".
So i went back ArcMap, load the original un-georeferenced tif file and
it is displayed correctly. I then loaded the gdal_translate produced
georeferenced file, and it display "upside down".

What am i missing?

When generating a preview of the gdal_translated georeferenced tiff file
in the windows explorer it displays correctly.
Maybe this suggest that some tag or flag in the gdal_translate produced
file is not set?
I get the same result with the FWTools 1.3.5(very old) and FWTools
2.4.7 

Here is the gdal_translate command i used.
gdal_translate -a_ullr 28.4696526275608 4.96918660287081 30.029965644484
6.29703349282297 E:\Gis\wt250cd_sb35-8_0528_kalemie_2005_ed1.tif E:\Gis
\wt250cd_sb35-8_0528_kalemie_2005_referenced.tif

Here is the gdalinfo information on the original tif file.
gdalinfo.exe e:\Gis\wt250cd_sb35-8_0528_kalemie_2005_ed1.tif

Driver: GTiff/GeoTIFF

Files: e:\Gis\wt250cd_sb35-8_0528_kalemie_2005_ed1.tif

Size is 8175, 6938

Coordinate System is `'

Metadata:

  TIFFTAG_SOFTWARE=Adobe Photoshop CS3 Windows

  TIFFTAG_DATETIME=2008:06:24 10:21:23

  TIFFTAG_XRESOLUTION=300

  TIFFTAG_YRESOLUTION=300

  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)

Image Structure Metadata:

  COMPRESSION=LZW

  INTERLEAVE=PIXEL

Corner Coordinates:

Upper Left  (    0.0,    0.0)

Lower Left  (    0.0, 6938.0)

Upper Right ( 8175.0,    0.0)

Lower Right ( 8175.0, 6938.0)

Center      ( 4087.5, 3469.0)

Band 1 Block=8175x10 Type=Byte, ColorInterp=Red

Band 2 Block=8175x10 Type=Byte, ColorInterp=Green

Band 3 Block=8175x10 Type=Byte, ColorInterp=Blue

Best Regards
Theuns Heydenrych

From jrepetto at free.fr  Thu Mar 11 08:04:02 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Thu Mar 11 08:04:41 2010
Subject: [gdal-dev] gdal_translate give upside down result for Geotiff
In-Reply-To: <1268309464.8623.22.camel@theuns-laptop>
References: <1268309464.8623.22.camel@theuns-laptop>
Message-ID: <4B98EA42.8080204@free.fr>

theuns a ?crit :
>
> I used gdal_translate to georeference the supplied tif file. The result
> is "upside down".
>
> What am i missing?
>
> Here is the gdal_translate command i used.
> gdal_translate -a_ullr 28.4696526275608 4.96918660287081 30.029965644484
> 6.29703349282297 E:\Gis\wt250cd_sb35-8_0528_kalemie_2005_ed1.tif E:\Gis
> \wt250cd_sb35-8_0528_kalemie_2005_referenced.tif

It seems that you have given coordinates of the lower left and upper 
right corners, instead of of upper left and lower right corners.

Jean-Claude
From theunsheydenrych at gmail.com  Thu Mar 11 08:31:04 2010
From: theunsheydenrych at gmail.com (theunsgis)
Date: Thu Mar 11 08:31:05 2010
Subject: [gdal-dev] gdal_translate give upside down result for Geotiff
In-Reply-To: <1268309464.8623.22.camel@theuns-laptop>
References: <1268309464.8623.22.camel@theuns-laptop>
Message-ID: <1268314264136-4715904.post@n2.nabble.com>


HI, OK
I have to apologize, i got the coordinates wrong.
The map is for a region south of the equator, so the latitudes should have
been negative, once a fixed that, it generates it correctly.
Sorry about that, everyone.


 
-- 
View this message in context: http://n2.nabble.com/gdal-dev-gdal-translate-give-upside-down-result-for-Geotiff-tp4715547p4715904.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From bfraser at geoanalytic.com  Thu Mar 11 14:15:49 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Mar 11 14:21:25 2010
Subject: [gdal-dev] OGR and SpatiaLite
Message-ID: <4B994165.20104@geoanalytic.com>

What would "ogrinfo --formats" show if GDAL was compiled with HAVE_SPATIALITE set?
What would it show if only SQLite (and not SpatiaLite) was compiled in?

Thanks!
Brent Fraser


From szekerest at gmail.com  Thu Mar 11 15:32:39 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Mar 11 15:32:43 2010
Subject: [gdal-dev] OGR and SpatiaLite
In-Reply-To: <4B994165.20104@geoanalytic.com>
References: <4B994165.20104@geoanalytic.com>
Message-ID: <f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>

Brent,

It should be "SQLite" in both cases.

Best regards,

Tamas


2010/3/11 Brent Fraser <bfraser@geoanalytic.com>

> What would "ogrinfo --formats" show if GDAL was compiled with
> HAVE_SPATIALITE set?
> What would it show if only SQLite (and not SpatiaLite) was compiled in?
>
> Thanks!
> Brent Fraser
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100311/5fe7f6c4/attachment.html
From SGONG at mdacorporation.com  Thu Mar 11 16:05:35 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Thu Mar 11 16:06:40 2010
Subject: [gdal-dev] GEOS windows build question
Message-ID: <5F76F80A436C1146A7C04C6F844026FB06104700@VMXYVR2.ds.mda.ca>

Hi list,

I am building GEOS3.2.0 on windows, using MS VS 2008.
I got an error: can't find inttypes.h, I downloaded inttypes.h and stdint.h

Then error message: headers/geos/platform.h(72) : error C3861: 'isfinite': identifier not found

Have anyone made GEOS on windows? How did you deal with the missing headers and declarations?


Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100311/1000d832/attachment.html
From bfraser at geoanalytic.com  Thu Mar 11 16:31:16 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Thu Mar 11 16:31:14 2010
Subject: [gdal-dev] OGR and SpatiaLite
In-Reply-To: <f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>
References: <4B994165.20104@geoanalytic.com>
	<f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>
Message-ID: <95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>

Tamas,

  I was afraid of that.  I'm having trouble getting MS4W 3 Beta 10's OGR
to read my SpatiaLite database.  I suspect it's because SpatiaLite was
not compiled in (I'm a SQLite newbie so I'm not sure); but there's no
way to tell.

Thanks!
Brent

> Brent,
>
> It should be "SQLite" in both cases.
>
> Best regards,
>
> Tamas
>
>
> 2010/3/11 Brent Fraser <bfraser@geoanalytic.com>
>
>> What would "ogrinfo --formats" show if GDAL was compiled with
>> HAVE_SPATIALITE set?
>> What would it show if only SQLite (and not SpatiaLite) was compiled in?
>>
>> Thanks!
>> Brent Fraser
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>



From szekerest at gmail.com  Thu Mar 11 16:46:37 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Mar 11 16:46:40 2010
Subject: [gdal-dev] OGR and SpatiaLite
In-Reply-To: <95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>
References: <4B994165.20104@geoanalytic.com>
	<f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>
	<95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>
Message-ID: <f3b73b7d1003111346u26ca4672u43881f4e515cf62e@mail.gmail.com>

Check out the recent builds from here:
http://vbkto.dyndns.org/sdk/

Those have been compiled with spatialite support.

Best regards,

Tamas



2010/3/11 Brent Fraser <bfraser@geoanalytic.com>

> Tamas,
>
>  I was afraid of that.  I'm having trouble getting MS4W 3 Beta 10's OGR
> to read my SpatiaLite database.  I suspect it's because SpatiaLite was
> not compiled in (I'm a SQLite newbie so I'm not sure); but there's no
> way to tell.
>
> Thanks!
> Brent
>
> > Brent,
> >
> > It should be "SQLite" in both cases.
> >
> > Best regards,
> >
> > Tamas
> >
> >
> > 2010/3/11 Brent Fraser <bfraser@geoanalytic.com>
> >
> >> What would "ogrinfo --formats" show if GDAL was compiled with
> >> HAVE_SPATIALITE set?
> >> What would it show if only SQLite (and not SpatiaLite) was compiled in?
> >>
> >> Thanks!
> >> Brent Fraser
> >>
> >>
> >> _______________________________________________
> >> gdal-dev mailing list
> >> gdal-dev@lists.osgeo.org
> >> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >>
> >
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100311/2ac04332/attachment.html
From szekerest at gmail.com  Thu Mar 11 16:54:18 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Mar 11 16:54:20 2010
Subject: [gdal-dev] GEOS windows build question
In-Reply-To: <5F76F80A436C1146A7C04C6F844026FB06104700@VMXYVR2.ds.mda.ca>
References: <5F76F80A436C1146A7C04C6F844026FB06104700@VMXYVR2.ds.mda.ca>
Message-ID: <f3b73b7d1003111354i778b9342h5cc1b7a5b7dfb0d7@mail.gmail.com>

Just tried to compile the 5.2 branch from SVN and works for me. Did you make
a command line build?

Best regards,

Tamas


2010/3/11 Shawn GONG <SGONG@mdacorporation.com>

>  Hi list,
>
> I am building GEOS3.2.0 on windows, using MS VS 2008.
> I got an error: can't find inttypes.h, I downloaded inttypes.h and stdint.h
>
> Then error message: headers/geos/platform.h(72) : error C3861: 'isfinite':
> identifier not found
>
> Have anyone made GEOS on windows? How did you deal with the missing headers
> and declarations?
>
>
> Thanks,
> Shawn
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100311/0a5f02af/attachment.html
From szekerest at gmail.com  Thu Mar 11 16:55:18 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Mar 11 16:55:20 2010
Subject: [gdal-dev] GEOS windows build question
In-Reply-To: <f3b73b7d1003111354i778b9342h5cc1b7a5b7dfb0d7@mail.gmail.com>
References: <5F76F80A436C1146A7C04C6F844026FB06104700@VMXYVR2.ds.mda.ca>
	<f3b73b7d1003111354i778b9342h5cc1b7a5b7dfb0d7@mail.gmail.com>
Message-ID: <f3b73b7d1003111355g7ad3ddfn4a0e7de83317d8a6@mail.gmail.com>

I mean the 3.2 branch, sorry



2010/3/11 Tamas Szekeres <szekerest@gmail.com>

> Just tried to compile the 5.2 branch from SVN and works for me. Did you
> make a command line build?
>
> Best regards,
>
> Tamas
>
>
> 2010/3/11 Shawn GONG <SGONG@mdacorporation.com>
>
>>  Hi list,
>>
>> I am building GEOS3.2.0 on windows, using MS VS 2008.
>> I got an error: can't find inttypes.h, I downloaded inttypes.h and
>> stdint.h
>>
>> Then error message: headers/geos/platform.h(72) : error C3861: 'isfinite':
>> identifier not found
>>
>> Have anyone made GEOS on windows? How did you deal with the missing
>> headers and declarations?
>>
>>
>> Thanks,
>> Shawn
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100311/978599f1/attachment.html
From parshakov at uleth.ca  Thu Mar 11 17:59:56 2010
From: parshakov at uleth.ca (vona)
Date: Thu Mar 11 18:00:01 2010
Subject: [gdal-dev] RE: Simple Q: fatal error LNK1120: 19 unresolved
	externals
In-Reply-To: <1267156360423-4637053.post@n2.nabble.com>
References: <1266277834419-4577872.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE18081E12E3@SINTEFEXMBX01.sintef.no>
	<1266281496083-4578039.post@n2.nabble.com>
	<72251B925CE10A478606EEAC6AA683BE18081E12E4@SINTEFEXMBX01.sintef.no>
	<1267156360423-4637053.post@n2.nabble.com>
Message-ID: <1268348396658-4719278.post@n2.nabble.com>


I managed to open geotiff file without GDAL somehow.
But it doesn't show the coordinates,
which is not a problem in my project anyway. The bad thing is that it can
take up to 5 seconds to load an image of 6000*6000 resolution..
-- 
View this message in context: http://n2.nabble.com/Simple-Q-fatal-error-LNK1120-19-unresolved-externals-tp4577872p4719278.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jorgearevalo at gis4free.org  Thu Mar 11 18:59:40 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Thu Mar 11 19:00:07 2010
Subject: [gdal-dev] Polygonize: are these steps the right ones?
Message-ID: <d321138e1003111559s11fb9f9cp881e9b41a4d9c067@mail.gmail.com>

Hi,

I'm using GDALPolygonize to polygonize a dataset with one band created
using MEM driver:

memdataset = GDALCreate(GDALGetDriverByName("MEM"),"", width, height,
0, GDT_Byte, NULL);
GDALAddBand(memdataset, nPixelType, apszOptions); // in apszOptions[0]
there are the band data

Then, I create a MEM datasource, to store the polygons. Using MEM
driver for OGR:

memdatasource = OGR_Dr_CreateDataSource(OGRGetDriverByName("Memory"), "", NULL);

Of course, I create a Layer to store the pols:
hLayer = OGR_DS_CreateLayer(memdatasource, "Polygonized layer", NULL,
wkbPolygon, NULL);

As I can read in the source code of GDALPolygonize function
(http://trac.osgeo.org/gdal/browser/trunk/gdal/alg/polygonize.cpp), a
new Feature is created, based on the Feature Definition of the layer.

hFeat = OGR_F_Create( OGR_L_GetLayerDefn( hOutLayer ) );

Then, the field of the Feature with index "iPixValue" is set with a
pixel value (the pixel value of all the raster cells with the same
value, polygonized in the same geometry, really)

 if( iPixValField >= 0 )
       OGR_F_SetFieldInteger( hFeat, iPixValField, poRPoly->nPolyValue
); //poRPoly->nPolyValue is the pixel value

The problem is that the MEM-based layer doesn't have fields. So, if I
use "0" as iPixValField, I get an error, because there's no field with
index 0 in the Feature. Of course, the same result if I use any value
> 0.

I thought the solution was to "modify" the Layer's Feature Definition
to allow fields in the Features created. So, I created a new Feature
Defintion, with a Field Definition of one field, of type OFTReal.
Then, I created a new Feature following this schema, and I added this
Feature to the Layer. I know, it's not the best way, and it didn't
work. But I don't know how to "force" the MEM-based layer to allow
fields in its features. Is it possible? If not, how could I polygonize
a mem-based raster?

Thanks in advance, and best regards,
Jorge
From lzzgeo at yahoo.cn  Thu Mar 11 19:57:06 2010
From: lzzgeo at yahoo.cn (=?gb2312?B?wfXW0ta+ICA=?=)
Date: Thu Mar 11 19:57:13 2010
Subject: [gdal-dev] Re: GEOS windows build question
Message-ID: <26803.47867.qm@web15001.mail.cnb.yahoo.com>

you should download Windows Server 2003 R2 Platform SDK, and install it.
That pachage includes what you need--header fileslibs etc.

download :http://www.microsoft.com/downloads/details.aspx?displaylang=en&FamilyID=0baf2b35-c656-4969-ace8-e4c0c0716adb



      
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100312/c820d8dd/attachment.html
From warmerdam at pobox.com  Thu Mar 11 20:09:15 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 11 20:08:11 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
Message-ID: <4B99943B.4010007@pobox.com>

Folks,

I have spent several days working on the JPIP driver initiated by
Norman Barker, and also worked on by Garrett Briggs.  This driver
uses a proposed new method for asynchronous and progressive data
access for GDAL.  The driver now seems to be working fairly well, and
based on that work I have fleshed out the RFC for the proposed new
API.

The implementation can be found in:

   http://svn.osgeo.org/gdal/sandbox/normanb/gdal

It is somewhat hard to build due to the Kakadu dependency - some makefile
hacking may be required.

The RFC can be found at:

   http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support

Currently I am calling for discussion on the proposed interface - similar
to what it was on the last round, though I've tried to clarify a few issues
and streamlined away a few items.

Depending on feedback I hope to call for a vote on the RFC within a couple
of days.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From agnesyipck at gmail.com  Fri Mar 12 05:08:49 2010
From: agnesyipck at gmail.com (agnes123)
Date: Fri Mar 12 05:08:52 2010
Subject: [gdal-dev] projection of GDAL and ArcMap
Message-ID: <1268388529866-4721380.post@n2.nabble.com>


Dear All,

I'm trying to project a shapefile from Transverse Mercator projection with
Krasovsky 1940 datum to Lambert Conformal Conic with D_Sphere_ARC_INFO datum
by ArcMap and GDAL. 

I project the shapefile by importing it to the ArcMap which is with the
target projection in advance. There is a geographic transformation warning
box comes out and i choose 

(1) close the transformation box
(2)add a new transformation parameters of geocentric method with 0 x,y,z
axis translation.

When compare to the result of GDAL with the command:

target_prj='+proj=lcc +a=6370997 +b=6370997 +towgs84=0,0,0,0,0,0,0
+lat_0=28.5 +lat_1=15 +lat_2=40 +lon_0=114 +x_0=0 +y_0=0 +units=m '

org_prj=' +proj=tmerc +ellps=krass +lat_0=0 +lon_0=111 +k=1 +x_0=500000
+y_0=0.0 +units=m +no_defs '

ogr2ogr -skipfailures -s_srs org_prj -f ESRI Shapefile -t_srs target_prj
a.shp b.shp


I found out that the result is idential to (2) one. But what i want is to
generate the result of (1) by using GDAL. The result of (2) and (1) has
vertical difference around 20km. What should i need to do in order to get
the result of (1) by GDAL?Is there something wrong for my projection
definition?

It would be grateful if someone can give me suggestion on how to do this!

Regards,
Agnes
-- 
View this message in context: http://n2.nabble.com/projection-of-GDAL-and-ArcMap-tp4721380p4721380.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From lucafasano at interfree.it  Fri Mar 12 05:39:08 2010
From: lucafasano at interfree.it (Luca Fasano)
Date: Fri Mar 12 05:40:11 2010
Subject: [gdal-dev] "Zoom" parameter causes crash of gdal2tiles.py
Message-ID: <1268390348.2992.14.camel@fasano-debian.innova>

Hi all,
I tested gdal2tiles.py of GDAL 1.6.3 on Debian unsatble.
I noticed that if I use "zoom" parameter, the script crashes.
Example:

$ /usr/bin/python -u /usr/bin/gdal2tiles.py --zoom 3
"/home/userxx/data/data123.N1"
Traceback (most recent call last):
  File "/usr/bin/gdal2tiles.py", line 2136, in <module>
    gdal2tiles.process()
  File "/usr/bin/gdal2tiles.py", line 473, in process
    self.generate_metadata()
  File "/usr/bin/gdal2tiles.py", line 1036, in generate_metadata
    f.write( self.generate_tilemapresource())
  File "/usr/bin/gdal2tiles.py", line 1425, in generate_tilemapresource
    for z in range(self.tminz, self.tmaxz+1):
TypeError: cannot concatenate 'str' and 'int' objects


Did you know that?

Thanks

From randyqiuxy at hotmail.com  Fri Mar 12 07:04:31 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Fri Mar 12 07:05:32 2010
Subject: [gdal-dev] question with field name read from ogrinfo
Message-ID: <BAY123-DS418B2D403DC40D89C8512C3310@phx.gbl>

Hi Frank and list,

 I have a question about field name in OGR:

I read the "IHO transfer standard for digital hydrographic data publication
S-57 Edition 3.1-November 2000",and it tells me that one spatial record
should have a "Record name" and its field name is [RCNM].But in ogrinfo ,it
gives me a field name-"NAME_RCNM".

Then, I'd like to know if the ogrinfo's writer change the field name or it
means the [NAME_RCNM] is on the new S-57 version while [RCNM] is just on the
old version(3.1 edition)?

Thanks for your time!

 

Best regards,

Randy

 

 

 

 

 

 

 

 

 

 

--------------------------------------------

To be frank, dream is hard to own!

Fortunately, I do understand what deserves me to dedicate myself to through
all my life.

--------------------------------------------

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100312/5dc0793d/attachment.html
From theunsheydenrych at gmail.com  Fri Mar 12 07:53:07 2010
From: theunsheydenrych at gmail.com (theuns)
Date: Fri Mar 12 07:53:28 2010
Subject: [gdal-dev] ImportError: No module named gdal
Message-ID: <1268398387.11866.4.camel@theuns-laptop>

HI, i am a newbie
I am trying to merge two geotif files, with gdal_merge.py.
I get the following error message. 
ImportError: No module named gdal.

I am sure its just a configuration issue. I am using windows xp, and
FWTools2.4.7, and i did add the C:\Program files\FWtools2.4.7\Pymod to
the path, and rebooted but still get the error?

Any suggestion, will be greatly appreciated, than you.'

Theuns Heydenrych 



From ari.jolma at gmail.com  Fri Mar 12 07:54:33 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Fri Mar 12 07:54:40 2010
Subject: [gdal-dev] Polygonize: are these steps the right ones?
In-Reply-To: <d321138e1003111559s11fb9f9cp881e9b41a4d9c067@mail.gmail.com>
References: <d321138e1003111559s11fb9f9cp881e9b41a4d9c067@mail.gmail.com>
Message-ID: <4B9A3989.8060102@gmail.com>

I should have sent this to the list and not just Jorge. Anyway, the 
problem is solved.

Jorge Arevalo kirjoitti:
> The problem is that the MEM-based layer doesn't have fields. So, if I
> use "0" as iPixValField, I get an error, because there's no field with
> index 0 in the Feature. Of course, the same result if I use any value
>   
>> 0.
>>     
>
> I thought the solution was to "modify" the Layer's Feature Definition
> to allow fields in the Features created. So, I created a new Feature
> Defintion, with a Field Definition of one field, of type OFTReal.
> Then, I created a new Feature following this schema, and I added this
> Feature to the Layer. I know, it's not the best way, and it didn't
> work. But I don't know how to "force" the MEM-based layer to allow
> fields in its features.

Jorge,

You can manipulate (well, add fields only) the schema of the layer with
the CreateField method:
http://www.gdal.org/ogr/classOGRLayer.html#00b1376a1eabb1298ef278f92f6d84be

This works for in-memory layers. Depending on the driver, when you add a
feature, the schema may become read-only.

Best regards,

Ari

From jorgearevalo at gis4free.org  Fri Mar 12 08:00:00 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Fri Mar 12 08:00:23 2010
Subject: [gdal-dev] Polygonize: are these steps the right ones?
In-Reply-To: <4B9A3989.8060102@gmail.com>
References: <d321138e1003111559s11fb9f9cp881e9b41a4d9c067@mail.gmail.com> 
	<4B9A3989.8060102@gmail.com>
Message-ID: <d321138e1003120500x63ea5185q24459d760ecaa779@mail.gmail.com>

On Fri, Mar 12, 2010 at 1:54 PM, Ari Jolma <ari.jolma@gmail.com> wrote:
> I should have sent this to the list and not just Jorge. Anyway, the problem
> is solved.
>
> Jorge Arevalo kirjoitti:
>>
>> The problem is that the MEM-based layer doesn't have fields. So, if I
>> use "0" as iPixValField, I get an error, because there's no field with
>> index 0 in the Feature. Of course, the same result if I use any value
>>
>>>
>>> 0.
>>>
>>
>> I thought the solution was to "modify" the Layer's Feature Definition
>> to allow fields in the Features created. So, I created a new Feature
>> Defintion, with a Field Definition of one field, of type OFTReal.
>> Then, I created a new Feature following this schema, and I added this
>> Feature to the Layer. I know, it's not the best way, and it didn't
>> work. But I don't know how to "force" the MEM-based layer to allow
>> fields in its features.
>
> Jorge,
>
> You can manipulate (well, add fields only) the schema of the layer with
> the CreateField method:
> http://www.gdal.org/ogr/classOGRLayer.html#00b1376a1eabb1298ef278f92f6d84be
>
> This works for in-memory layers. Depending on the driver, when you add a
> feature, the schema may become read-only.
>
> Best regards,
>
> Ari
>

Yes, I should have added the list direction too. Sorry. Thanks for
solution, it was easier than my code.

Best regards,
Jorge


> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From warmerdam at pobox.com  Fri Mar 12 08:12:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Mar 12 08:11:43 2010
Subject: [gdal-dev] ImportError: No module named gdal
In-Reply-To: <1268398387.11866.4.camel@theuns-laptop>
References: <1268398387.11866.4.camel@theuns-laptop>
Message-ID: <4B9A3DD3.3090508@pobox.com>

theuns wrote:
> HI, i am a newbie
> I am trying to merge two geotif files, with gdal_merge.py.
> I get the following error message. 
> ImportError: No module named gdal.
> 
> I am sure its just a configuration issue. I am using windows xp, and
> FWTools2.4.7, and i did add the C:\Program files\FWtools2.4.7\Pymod to
> the path, and rebooted but still get the error?
> 
> Any suggestion, will be greatly appreciated, than you.'
> 
> Theuns Heydenrych 

Theuns,

You should issue the command from within the FWTools Shell to ensure
the environment is setup.  If not, you will need to review the settings
in setfw.bat and setfwenv.bat.  I imagine you have missed adding the
bin directory to the path, but there are also other important environment
variables.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From yassefa at dmsolutions.ca  Fri Mar 12 08:12:12 2010
From: yassefa at dmsolutions.ca (Yewondwossen Assefa)
Date: Fri Mar 12 08:19:52 2010
Subject: [gdal-dev] OGR and SpatiaLite
In-Reply-To: <95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>
References: <4B994165.20104@geoanalytic.com>	<f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>
	<95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>
Message-ID: <4B9A3DAC.9020806@dmsolutions.ca>

Brent,

MS4W 3 Beta 10's OGR was not build with that -DHAVE_SPATIALITE. Next version would have it (bug refernece: http://bugzilla.maptools.org/show_bug.cgi?id=2167)

regards,

Brent Fraser wrote:
> Tamas,
>
>   I was afraid of that.  I'm having trouble getting MS4W 3 Beta 10's OGR
> to read my SpatiaLite database.  I suspect it's because SpatiaLite was
> not compiled in (I'm a SQLite newbie so I'm not sure); but there's no
> way to tell.
>
> Thanks!
> Brent
>
>   
>> Brent,
>>
>> It should be "SQLite" in both cases.
>>
>> Best regards,
>>
>> Tamas
>>
>>
>> 2010/3/11 Brent Fraser <bfraser@geoanalytic.com>
>>
>>     
>>> What would "ogrinfo --formats" show if GDAL was compiled with
>>> HAVE_SPATIALITE set?
>>> What would it show if only SQLite (and not SpatiaLite) was compiled in?
>>>
>>> Thanks!
>>> Brent Fraser
>>>
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>>       
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>   


-- 
----------------------------------------------------------------
Assefa Yewondwossen           
Software Analyst   

Email: assefa@dmsolutions.ca    
http://www.dmsolutions.ca/

Phone: (613) 565-5056 (ext 14)
Fax:   (613) 565-0925
----------------------------------------------------------------


From bfraser at geoanalytic.com  Fri Mar 12 10:17:28 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Mar 12 10:17:38 2010
Subject: [gdal-dev] OGR and SpatiaLite
In-Reply-To: <4B9A3DAC.9020806@dmsolutions.ca>
References: <4B994165.20104@geoanalytic.com>	<f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>
	<95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>
	<4B9A3DAC.9020806@dmsolutions.ca>
Message-ID: <4B9A5B08.6020300@geoanalytic.com>

Execellent!  Thanks!

Brent

Yewondwossen Assefa wrote:
> Brent,
> 
> MS4W 3 Beta 10's OGR was not build with that -DHAVE_SPATIALITE. Next 
> version would have it (bug refernece: 
> http://bugzilla.maptools.org/show_bug.cgi?id=2167)
> 
> regards,
> 
> Brent Fraser wrote:
>> Tamas,
>>
>>   I was afraid of that.  I'm having trouble getting MS4W 3 Beta 10's OGR
>> to read my SpatiaLite database.  I suspect it's because SpatiaLite was
>> not compiled in (I'm a SQLite newbie so I'm not sure); but there's no
>> way to tell.
>>
>> Thanks!
>> Brent
>>
>>  
>>> Brent,
>>>
>>> It should be "SQLite" in both cases.
>>>
>>> Best regards,
>>>
>>> Tamas
>>>
>>>
>>> 2010/3/11 Brent Fraser <bfraser@geoanalytic.com>
>>>
>>>    
>>>> What would "ogrinfo --formats" show if GDAL was compiled with
>>>> HAVE_SPATIALITE set?
>>>> What would it show if only SQLite (and not SpatiaLite) was compiled in?
>>>>
>>>> Thanks!
>>>> Brent Fraser
>>>>
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>       
>>
>>
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>   
> 
> 

From bfraser at geoanalytic.com  Fri Mar 12 11:27:44 2010
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Fri Mar 12 11:27:49 2010
Subject: [gdal-dev] OGR and SpatiaLite
In-Reply-To: <f3b73b7d1003111346u26ca4672u43881f4e515cf62e@mail.gmail.com>
References: <4B994165.20104@geoanalytic.com>	
	<f3b73b7d1003111232med7588ehfa53d5c75d8cacfb@mail.gmail.com>	
	<95ccdf09d57d1f043b9784890ce9b004.squirrel@mail.geoanalytic.com>
	<f3b73b7d1003111346u26ca4672u43881f4e515cf62e@mail.gmail.com>
Message-ID: <4B9A6B80.7090506@geoanalytic.com>

Thanks!  I keep forgetting about those builds.

But I do think the SQLite driver should report if it supports SpatiaLite.  For 
example, in ogrsqlitedriver.cpp have something like:


const char *OGRSQLiteDriver::GetName()

{
#ifdef HAVE_SPATIALITE
     return "SQLite+SpatiaLite functions";
#else
     return "SQLite";
#endif
}

   Although looking at the driver code, the support really isn't as simple as 
that.  As the OGR driver doc mentions the OGR implementation of SQLite will read 
and write SpatiaLite databases, it just will not do spatial indexes or 
SpatiaLite spatial functions (as these are in the code library, not in the 
database as Stored Procedures as with other spatial database types like 
PostGIS).  But it WILL read and write SpatiaLite's flavour of geometry, and 
create SpatiaLite-compatible databases (it even creates the geometry_columns and 
spatial_ref_sys tables!).  I think these points need to be stated explicitly in 
the driver doc.

Best Regards,
Brent Fraser

Tamas Szekeres wrote:
> Check out the recent builds from here:
> http://vbkto.dyndns.org/sdk/
> 
> Those have been compiled with spatialite support.
> 
> Best regards,
> 
> Tamas
> 
> 
> 
> 2010/3/11 Brent Fraser <bfraser@geoanalytic.com 
> <mailto:bfraser@geoanalytic.com>>
> 
>     Tamas,
> 
>      I was afraid of that.  I'm having trouble getting MS4W 3 Beta 10's OGR
>     to read my SpatiaLite database.  I suspect it's because SpatiaLite was
>     not compiled in (I'm a SQLite newbie so I'm not sure); but there's no
>     way to tell.
> 
>     Thanks!
>     Brent
> 
>     >  Brent,
>     >
>     >  It should be "SQLite" in both cases.
>     >
>     >  Best regards,
>     >
>     >  Tamas
>     >
>     >
>     >  2010/3/11 Brent Fraser <bfraser@geoanalytic.com
>     <mailto:bfraser@geoanalytic.com>>
>     >
>     > > What would "ogrinfo --formats" show if GDAL was compiled with
>     > > HAVE_SPATIALITE set?
>     > > What would it show if only SQLite (and not SpatiaLite) was
>     compiled in?
>     > >
>     > > Thanks!
>     > > Brent Fraser
>     > >
>     > >
>     > > _______________________________________________
>     > > gdal-dev mailing list
>     > > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     > > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>     > >
>     >
> 
> 
> 
> 

From warmerdam at pobox.com  Fri Mar 12 11:51:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Mar 12 11:50:23 2010
Subject: [gdal-dev] question with field name read from ogrinfo
In-Reply-To: <BAY123-DS418B2D403DC40D89C8512C3310@phx.gbl>
References: <BAY123-DS418B2D403DC40D89C8512C3310@phx.gbl>
Message-ID: <4B9A710F.50908@pobox.com>

Randy wrote:
> Hi Frank and list,
> 
>  I have a question about field name in OGR:
> 
> I read the ?IHO transfer standard for digital hydrographic data 
> publication S-57 Edition 3.1-November 2000?,and it tells me that one 
> spatial record should have a ?Record name? and its field name is 
> [RCNM].But in ogrinfo ,it gives me a field name-?NAME_RCNM?.
> 
> Then, I?d like to know if the ogrinfo?s writer change the field name or 
> it means the [NAME_RCNM] is on the new S-57 version while [RCNM] is just 
> on the old version(3.1 edition)?

Randy,

I always called this field NAME_RCNM so it isn't about what edition it is
from.  I believe it is named this because it is the RCNM extracted from
the NAME field of the feature (FSPT).  I presume it is used to lookup
the RCNM and RCID in the set of spatial records when composing the geometry
for the feature.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Mar 12 13:45:38 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Mar 12 13:44:31 2010
Subject: [gdal-dev] pcidsk sdk svn:externals
Message-ID: <4B9A8BD2.1050302@pobox.com>

Folks,

For a few months now the gdal/frmts/pcidsk/sdk directory has been
referenced from the pcidsk sdk subversion using svn:externals in
GDAL trunk.  This had the benefit of ensuing the latest pcidsk code was
always used with GDAL trunk.  However, it has had some downsides too.

1) I tended to forget to update gdal/frmts/pcidsk/GNUmakefile when
I added files to the pcidsk sdk which was breaking the build.

2) When folks made branches, such as winkey recently did, it was hard
to keep the gdal/frmts/pcidsk/GNUmakefile up to date.

3) Each time I make a stable branch, like for 1.7, I need to futz
around to turn the svn:external into a local copy.

4) Evaluating the svn:external made my svn updates noticably slower
since they were done as an extra roundtrip to the server.

Anyways, the problem are not insurmountable, but on balance I think
the benefits of using svn:external are outweighed by hassles and so I
have gotten rid of the svn:external and done an svn copy of the sdk
into the GDAL trunk.   I will refresh it periodically.

Let me know if anyone runs into problems or thinks this was the wrong
thing to do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randyqiuxy at hotmail.com  Fri Mar 12 20:48:39 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Fri Mar 12 20:48:37 2010
Subject: [gdal-dev] question with field name read from ogrinfo
In-Reply-To: <4B9A710F.50908@pobox.com>
References: <BAY123-DS418B2D403DC40D89C8512C3310@phx.gbl>
	<4B9A710F.50908@pobox.com>
Message-ID: <BAY123-DS2096AB8A831DE995973A11C3300@phx.gbl>

Hi Frank,
Thanks for your reply!
I know what you mean now, NAME_RCID can tell the difference between Feature
records' RCID and Spatial Records', and it is easily to know the NAME_RCNM
subfield is from Spatial Record from its prefix-"NAME".

Best regards,
Randy

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Saturday, March 13, 2010 12:51 AM
To: Randy
Cc: GDAL/OGR mailing list
Subject: Re: [gdal-dev] question with field name read from ogrinfo

> I read the "IHO transfer standard for digital hydrographic data 
> publication S-57 Edition 3.1-November 2000",and it tells me that one 
> spatial record should have a "Record name" and its field name is 
> [RCNM].But in ogrinfo ,it gives me a field name-"NAME_RCNM".
> 
> Then, I'd like to know if the ogrinfo's writer change the field name or 
> it means the [NAME_RCNM] is on the new S-57 version while [RCNM] is just 
> on the old version(3.1 edition)?

Randy,

I always called this field NAME_RCNM so it isn't about what edition it is
from.  I believe it is named this because it is the RCNM extracted from
the NAME field of the feature (FSPT).  I presume it is used to lookup
the RCNM and RCID in the set of spatial records when composing the geometry
for the feature.


From warmerdam at pobox.com  Fri Mar 12 20:54:15 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Mar 12 21:01:48 2010
Subject: [gdal-dev] Summer of Code
Message-ID: <931f8ea91003121754u6792b67aw3ee48be474836fd@mail.gmail.com>

Folks,

The Google Summer of Code program is running again this
year, and I'd like GDAL to partcipate under OSGeo.  I have
freshed up the ideas list and listed myself as an available
mentor at:

  http://trac.osgeo.org/gdal/wiki/SummerOfCode

I would encourage anyone else who is interested to add
themselves as an available mentor, and to update the ideas
list.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From szekerest at gmail.com  Sat Mar 13 11:04:03 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Sat Mar 13 11:04:06 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <4B99943B.4010007@pobox.com>
References: <4B99943B.4010007@pobox.com>
Message-ID: <f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com>

Frank,

The described approach with regards to the API seems reasonable for me, I
recall I took part in the conversation that time when the initial version
have been worked out, and I remember of most aspect.

Just by having a quick review of the code I have the following
questions/concerns:


1. The implementation of the PERSISTENT flag is handled by using a static
curl handle shared by multiple threads without having synchronization in the
cpl code. I'm not sure whether it's completely guarded by the driver level
mutex (pGlobalMutex), however it would be better to do the sync in-place
where the shared variable is declared. This would require for example to
place http_persistent_handle either at the driver, or do the sync in the CPL
code.

2. Not sure whether it's safe to use the same curl handle by multiple
threads (either with syncing or without).

3. Could you explain the reason of using 2 worker threads (with different
priorities) at the driver? I'm not sure about the use case where these 2
threads are required to have.

4. It would be reasonable to use (probably by extenting the CPL code)
sychronized waiting instead of
busy-waiting<http://en.wikipedia.org/wiki/Busy_waiting>implemented in
the diver code. This cause for example the implementation of
JPIPKAKAsyncRasterIO::Stop() getting odd, and error prone. For instance it
may result in a wait forever condition if the thread would terminate without
setting the exit flag correctly. By using a synchronized wait approach
instead (ie an event handle) the wait function would terminate with an error
if the owner thread have been terminated in the meantime.

5. The diver doesn't seem to do any specific if CPLAcquireMutex fails or
returns with timeout (by not getting the ownership of the mutex in effect)


By all means I have no problem with the API (which appears to be the primary
subject of this RFC)

Best regards,

Tamas



2010/3/12 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> I have spent several days working on the JPIP driver initiated by
> Norman Barker, and also worked on by Garrett Briggs.  This driver
> uses a proposed new method for asynchronous and progressive data
> access for GDAL.  The driver now seems to be working fairly well, and
> based on that work I have fleshed out the RFC for the proposed new
> API.
>
> The implementation can be found in:
>
>  http://svn.osgeo.org/gdal/sandbox/normanb/gdal
>
> It is somewhat hard to build due to the Kakadu dependency - some makefile
> hacking may be required.
>
> The RFC can be found at:
>
>  http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> Currently I am calling for discussion on the proposed interface - similar
> to what it was on the last round, though I've tried to clarify a few issues
> and streamlined away a few items.
>
> Depending on feedback I hope to call for a vote on the RFC within a couple
> of days.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100313/dfa31c7a/attachment.html
From peter.hopfgartner at r3-gis.com  Sat Mar 13 16:41:15 2010
From: peter.hopfgartner at r3-gis.com (Peter Hopfgartner)
Date: Sat Mar 13 16:41:20 2010
Subject: [gdal-dev] Issues when exporting from PostGIS to shape
In-Reply-To: <4B97CF8D.8010300@pobox.com>
References: <1575283986.1268224814516@ace.smi> <4B97B5FE.6040700@pobox.com>
	<4B97C2B8.3050302@r3-gis.com> <4B97CF8D.8010300@pobox.com>
Message-ID: <4B9C067B.5020300@r3-gis.com>

Frank Warmerdam wrote:
> Peter Hopfgartner wrote:
> (...)
>>>> ii) the resulting shape file has a language identifier set to 57 
>>>> (ANSI), but it really is UTF-8 [1][2].
>>>
>>> That is correct.   The Shapefile driver is currently unaware of
>>> encoding issues and always marks the generated dbf files with the 
>>> default
>>> (ANSI) setting.  Internally OGR attempts to manage text attributes
>>> in UTF-8, and the postgres driver does honour that.
>>>
>>> The Shapefile driver really needs to be upgraded to be encoding aware;
>>> however, there are manpower and technical issues around how to do that
>>> properly.
>>>
>> Where could one start to work on this issue? Is this in the realm of 
>> shapelib? We did some analysis on this in our company and maybe we 
>> can help with this.
>
> Some work would need to be done within shapelib's dbfopen.c code to
> read and write the encoding indicators.  Some work would need to be
> done in the OGR shapefile driver to translate to UTF-8 when reading
> and to translate to the target encoding on output with a creation
> option to control encoding.
>
> I am very concerned about compatability issues, so some care would
> be necessary.
>
> There are tickets on the issue that may have some information.
>
> Best regards,
Hello Frank,

as far as I can tell (and resulting from some simple test programs, see 
attachment), shapelib seems to handle LDID and the cpg file perfectly 
well, both in reading and writing.

I will try to have a look at the OGR code in the next days.

Regards,

Peter

-- 
 
Dott. Peter Hopfgartner
 
R3 GIS Srl - GmbH
Via Johann Kravogl-Str. 2
I-39012 Meran/Merano (BZ)
Email: peter.hopfgartner@r3-gis.com
Tel. : +39 0473 494949
Fax  : +39 0473 069902
www  : http://www.r3-gis.com

XING : http://www.xing.com/go/invita/8917535 

From warmerdam at pobox.com  Sun Mar 14 11:59:06 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Mar 14 11:59:34 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com>
References: <4B99943B.4010007@pobox.com>
	<f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com>
Message-ID: <4B9D07CA.5080104@pobox.com>

Tamas Szekeres wrote:
> Frank,
> 
> The described approach with regards to the API seems reasonable for me, 
> I recall I took part in the conversation that time when the initial 
> version have been worked out, and I remember of most aspect.
> 
> Just by having a quick review of the code I have the following 
> questions/concerns:
> 
> 
> 1. The implementation of the PERSISTENT flag is handled by using a 
> static curl handle shared by multiple threads without having 
> synchronization in the cpl code. I'm not sure whether it's completely 
> guarded by the driver level mutex (pGlobalMutex), however it would be 
> better to do the sync in-place where the shared variable is declared. 
> This would require for example to place http_persistent_handle either at 
> the driver, or do the sync in the CPL code.
 >
> 2. Not sure whether it's safe to use the same curl handle by multiple 
> threads (either with syncing or without).

Tamas,

I agree that the current use of a persistent connection in the
CPL fetch code is unsafe.  I will look into correcting it today.
Also, this aspect is really not core to the API - just an artifact
needed for the JPIPKAK implementation so I have removed mention of
it from the RFC.

> 3. Could you explain the reason of using 2 worker threads (with 
> different priorities) at the driver? I'm not sure about the use case 
> where these 2 threads are required to have.

I'll have to let Norman or someone else at ITT respond to this
as I'm not clear on the use.  However, I will note that this is
an artifact of the JPIPKAK driver and not implicit in the
asynchronous IO API nor do I forsee it being a common pattern in
GDAL.

> 4. It would be reasonable to use (probably by extenting the CPL code) 
> sychronized waiting instead of busy-waiting 
> <http://en.wikipedia.org/wiki/Busy_waiting> implemented in the diver 
> code. This cause for example the implementation of 
> JPIPKAKAsyncRasterIO::Stop() getting odd, and error prone. For instance 
> it may result in a wait forever condition if the thread would terminate 
> without setting the exit flag correctly. By using a synchronized wait 
> approach instead (ie an event handle) the wait function would terminate 
> with an error if the owner thread have been terminated in the meantime.

I'm not entirely clear on what you mean about the current implementation
being error prone.  Perhaps you could provide some additional detail?

When you talk about a synchronized wait approach, I can imagine two
approach.

1) The application calls the POSIX select() function or a system
specific equivelent thing which blocks until there is data waiting on
one or more of the file/socket objects passed in.

2) A callback mechanism where a provided function is called when data
is ready - possible in a distinct thread, or as an interruption (ala
unix signals).

I am not fond of either approach as a universal mechanism because it
is often impractical to reengineer sublibraries to use them.  So for
instance, a driver like the OPeNDAP driver might use a separate library
to manage the connection to a remote server but it does not necessarly
provide any mechanism to implement either of the above methods.

So I am inclined to take a cheap polling appoach.  If an application
has several asynchronous activities on the go - perhaps GUI events,
socket connections and file io, it is easier to let it poll each
and then sleep/wait when there is nothing to do.

The defined RFC 24 API allows the application to do the waiting by
passing a timeout of zero into the GetNextUpdatedRegion() method.

I would add that the implementation of the timeout does *not*
do busy waiting.  Instead it uses CPLSleep() to release control
to the operating system for other processes between polls.

> 5. The diver doesn't seem to do any specific if CPLAcquireMutex fails or 
> returns with timeout (by not getting the ownership of the mutex in effect)

Good point.  This may be a flaw in the current driver which I can
try to rectify.  I will note that the existing JPIPKAK driver is
intended primarily to be an illustraction of the API in use rather
than a perfect implementation.  It was contributed by Norman and
adapted by me.

> By all means I have no problem with the API (which appears to be the 
> primary subject of this RFC)

Excellent!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From theunsheydenrych at gmail.com  Sun Mar 14 13:40:03 2010
From: theunsheydenrych at gmail.com (Theuns Heydenrych)
Date: Sun Mar 14 13:40:10 2010
Subject: [gdal-dev] Meaning of some switches in the gdal utilities
Message-ID: <1a2c61f71003141040l1a84c69cq54df2e78f87884d5@mail.gmail.com>

HI.

I am new to the libraries, and would like some more info on some of the
switches of the utilities.

I am mainly using the command line utilities.

On the gdaltransform utility:
1. -rpc: Force use of RPCs.
a) What does this mean exactly? I can see, the utility is forced to use
rps's.
b) What is a rpc, sorry for this stupid question, but please, what does
it stands for?
c) How do i provide these rpc's?

2. -geoloc: Force use of Geolocation Arrays.
a) Again i can gather the utility is forced to use geolocation arrays,
how to a supply these?
b) What is the format for these arrays, comma delimited, space
delimited, should it be in a file...?

3. -gcp pixel line easting northing [elevation]:
a) Ok, i could figure this one out, but what does "gcp" stands for, "geo
control point"?

On the gdalwarp utility:
I have only used it once and would realy like to use it to more.
1) -cutline datasource:
a) What will this do for me exactly, will it crop the image for me
according to a extend in a shapefile?
b) Could this be a polygon in a shapefile?


I have only used the utilities now for a few days, and are really
impressed, i could do all my geolocation work with out opening any
proprietary software(being ArcMap).

I would like to play more with the utilities, like to merge some of the
raster data, and cut it up in tiles and do some warping on some of the
georeferenced raster i down loaded from the net.

About some of the questions above, may seem very stupid, but hey, i have
to know some of it, to use the utilities to its full potential.

Thanks in advance, and best regards.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100314/06ea95a1/attachment.html
From warmerdam at pobox.com  Sun Mar 14 14:00:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Mar 14 14:00:50 2010
Subject: [gdal-dev] Meaning of some switches in the gdal utilities
In-Reply-To: <1a2c61f71003141040l1a84c69cq54df2e78f87884d5@mail.gmail.com>
References: <1a2c61f71003141040l1a84c69cq54df2e78f87884d5@mail.gmail.com>
Message-ID: <4B9D2440.1030105@pobox.com>

Theuns Heydenrych wrote:
> HI.
> 
> I am new to the libraries, and would like some more info on some of the
> switches of the utilities.
> 
> I am mainly using the command line utilities. 
> 
> On the gdaltransform utility:
> 1. -rpc: Force use of RPCs.
> a) What does this mean exactly? I can see, the utility is forced to use
> rps's.
> b) What is a rpc, sorry for this stupid question, but please, what does
> it stands for?

Theuns,

RPCs are a way of providing a bunch of coefficients
for a ratio of polynomials that can be evaluated to
transform between pixel/line space and lat/long/elevation
space.  It is used fairly widely provide rough georeferencing
for unrectified satellite imagery.

There is some material on this at:

   http://geotiff.maptools.org/rpc_prop.html

> c) How do i provide these rpc's?

Generally they should be already associated with the input
datasource as metadata.  There are various mechanisms to associate
the appropriate metadata with a dataset including wrapping with a
GDAL VRT and using the -mo flag to gdal_translate.  GDAL does
attempt to read RPC metadata from a variety of supported formats.

> 2. -geoloc: Force use of Geolocation Arrays.
> a) Again i can gather the utility is forced to use geolocation arrays,
> how to a supply these?

There is a discussion of geolocation arrays in RFC 4:

   http://trac.osgeo.org/gdal/wiki/rfc4_geolocate

> b) What is the format for these arrays, comma delimited, space
> delimited, should it be in a file...?

The arrays themselves are in the format of GDAL
supported raster bands - so in theory they can
come from any GDAL supported format.

> 3. -gcp pixel line easting northing [elevation]:
> a) Ok, i could figure this one out, but what does "gcp" stands for, "geo
> control point"?

"Ground Control Point"

It is an association of a location the ground - usually
expressed as a pixel/line location on an image with a geospatial
location, possibly in latitude and longitude.

> On the gdalwarp utility:
> I have only used it once and would realy like to use it to more.
> 1) -cutline datasource:
> a) What will this do for me exactly, will it crop the image for me
> according to a extend in a shapefile?

It can be used to set all pixels outside the cutline to zero,
but it will not generally affect the extents of the output
file image.

> b) Could this be a polygon in a shapefile?

Yes

> I have only used the utilities now for a few days, and are really
> impressed, i could do all my geolocation work with out opening any
> proprietary software(being ArcMap).
> 
> I would like to play more with the utilities, like to merge some of the
> raster data, and cut it up in tiles and do some warping on some of the
> georeferenced raster i down loaded from the net.
> 
> About some of the questions above, may seem very stupid, but hey, i have
> to know some of it, to use the utilities to its full potential.

The questions are not at all stupid.  I will say that "geolocation"
and "RPC" support in GDAL is less widely used than georeferencing
based on geotransform's or gcps.  You may find the documentation
somewhat inadequate, and the workflows challenging (ie. constructing
appropriate metadata).  But with some fortitude you should be able
to accomplish a lot.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Sun Mar 14 14:57:12 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Mar 14 14:57:29 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <4B99943B.4010007@pobox.com>
References: <4B99943B.4010007@pobox.com>
Message-ID: <201003141957.13886.even.rouault@mines-paris.org>

Frank,

The API & concepts look good to me. I also agree with Tamas' remarks.

I think what Tamas means by synchronized wait approach is something based on 
pthread_cond_new() / pthread_cond_signal() / pthread_cond_wait() for Unix or 
CreateEvent() / SetEvent() / WaitForSingleObject() for Windows, which enables 
a thread to wait for an event signaled by another thread. But this is just an 
implementation detail of the JPIPKAK driver.

As far as the API is concerned, here are my questions :

* I've skimmed the past discussions on RFC24 and I see one of your remarks 
was "The GDALAsyncRasterIO object should be renamed GDALAsyncRasterReader or 
something that does not imply that writing is supported unless that is 
intended for the future". Perhaps that we can leave the name of 
GDALAsyncRasterIO/BeginAsyncRasterIO() but introduce a GDALRWFlag eRWFlag 
parameter as first parameter of BeginAsyncRasterIO() if we want to allow 
future use for writing ?

* LockBuffer() / UnlockBuffer(): the RFC says "The LockBuffer() and 
UnlockBuffer() methods can be used to temporarily disable updates to the 
buffer while application code accesses the buffer". Shouldn't it say 
rather "... *should* be used ... " as the user has no way to tell if the 
driver implementation makes it necessary or not to use 
LockBuffer()/UnlockBuffer(). 

* Shouldn't LockBuffer() have a return code instead of void ? In case the 
underlying locking primitive fail. Shouldn't LockBuffer() have a timeout 
parameter for consistency ? Or we want it to wait for infinite time ?

* The timeout parameter of GetNextUpdatedRegion(). This is related to the 
meaning of the timeout parameter of the related CPL primitive 
CPLAcquireMutex(). 
	-  I notice that CPLAcquireMutex() use a dfWaitInSeconds parameter : wouldn't 
it be more consistant to use it also for GetNextUpdatedRegion() ?
	- Shouldn't we have a special constant meaning infinite waiting, instead of 
using arbirtrary numbers such as 100.0 used in 
JPIPKAKAsyncRasterIO::GetNextUpdatedRegion().

* BeginAsyncRasterIO() : neither the RFC nor the doc of the method explains if 
it is legal or not to initiate multiple AsyncRasterIO() without waiting the 
first ones to be termintated before beginning a new one. My understanding of 
the JPIPKAK driver is that this particular driver allows 2 concurrent 
AsyncRasterIO(). Perhaps just adding a note in the doc of 
BeginAsyncRasterIO() to say that this is a driver specific behaviour might be 
sufficient. In which case, the doc should probably add "@return The 
GDALAsyncRasterIO object representing the request or NULL if the request 
cannot be started". (by the way, it might fail for other reasons such as 
wrong parameter values)

Best regards,

Even

Le Friday 12 March 2010 02:09:15 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> I have spent several days working on the JPIP driver initiated by
> Norman Barker, and also worked on by Garrett Briggs.  This driver
> uses a proposed new method for asynchronous and progressive data
> access for GDAL.  The driver now seems to be working fairly well, and
> based on that work I have fleshed out the RFC for the proposed new
> API.
>
> The implementation can be found in:
>
>    http://svn.osgeo.org/gdal/sandbox/normanb/gdal
>
> It is somewhat hard to build due to the Kakadu dependency - some makefile
> hacking may be required.
>
> The RFC can be found at:
>
>    http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> Currently I am calling for discussion on the proposed interface - similar
> to what it was on the last round, though I've tried to clarify a few issues
> and streamlined away a few items.
>
> Depending on feedback I hope to call for a vote on the RFC within a couple
> of days.
>
> Best regards,


From sfkeller at gmail.com  Sun Mar 14 15:07:26 2010
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Mar 14 15:13:43 2010
Subject: [gdal-dev] Howto convert a CSV with geometry and a CVS without into
	one Geodatabase (.mdb)?
Message-ID: <25bc040b1003141207tab24e39x75bf7d498a4bcb4b@mail.gmail.com>

Dear all

I'm trying something new to me: I have two comma separated value files
(CSV, from an Excel user naturally :->) - one file having a lat and a
lon column.

The target database is a Geodatabase (.mdb) which not only has a
feature class table (fctable) but also another 'normal' MS Access
table (without geometry). The columns of the CSV with la/lon goes to
the fctable and the other CSV goes to othertable.

One of the challenges here is that othertable can't be accessed
through PGeo driver AFAIK.

In addition - after inserting a row into the fctable with a new oid -
there should be a foreign key added to othertable which establishes a
relationship from othertable to fctable.

=> How do I shuffle these CSVs into this Geodatabase (preferrably with Python)?
=> Has anyone accomplished a similar conversion (using Python or other scripts)?

Regards, Stefan
From warmerdam at pobox.com  Sun Mar 14 15:18:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Mar 14 15:18:44 2010
Subject: [gdal-dev] Howto convert a CSV with geometry and a CVS without
	into one Geodatabase (.mdb)?
In-Reply-To: <25bc040b1003141207tab24e39x75bf7d498a4bcb4b@mail.gmail.com>
References: <25bc040b1003141207tab24e39x75bf7d498a4bcb4b@mail.gmail.com>
Message-ID: <4B9D3681.8070808@pobox.com>

Stefan Keller wrote:
> Dear all
> 
> I'm trying something new to me: I have two comma separated value files
> (CSV, from an Excel user naturally :->) - one file having a lat and a
> lon column.
> 
> The target database is a Geodatabase (.mdb) which not only has a
> feature class table (fctable) but also another 'normal' MS Access
> table (without geometry). The columns of the CSV with la/lon goes to
> the fctable and the other CSV goes to othertable.
> 
> One of the challenges here is that othertable can't be accessed
> through PGeo driver AFAIK.
> 
> In addition - after inserting a row into the fctable with a new oid -
> there should be a foreign key added to othertable which establishes a
> relationship from othertable to fctable.
> 
> => How do I shuffle these CSVs into this Geodatabase (preferrably with Python)?
> => Has anyone accomplished a similar conversion (using Python or other scripts)?

Stefan,

The OGR PGeo and ODBC drivers are read-only.  If you want to update
a geodatabase you will need to find another route, or just route
low level SQL through the ODBC driver using ExecuteSQL().

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Mar 14 17:14:09 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Mar 14 17:14:36 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <201003141957.13886.even.rouault@mines-paris.org>
References: <4B99943B.4010007@pobox.com>
	<201003141957.13886.even.rouault@mines-paris.org>
Message-ID: <4B9D51A1.8020506@pobox.com>

Even Rouault wrote:
> * I've skimmed the past discussions on RFC24 and I see one of your remarks 
> was "The GDALAsyncRasterIO object should be renamed GDALAsyncRasterReader or 
> something that does not imply that writing is supported unless that is 
> intended for the future". Perhaps that we can leave the name of 
> GDALAsyncRasterIO/BeginAsyncRasterIO() but introduce a GDALRWFlag eRWFlag 
> parameter as first parameter of BeginAsyncRasterIO() if we want to allow 
> future use for writing ?

Even,

I agree.  I am renaming everything to AsyncReader instead of
AsyncRasterIO.

> * LockBuffer() / UnlockBuffer(): the RFC says "The LockBuffer() and 
> UnlockBuffer() methods can be used to temporarily disable updates to the 
> buffer while application code accesses the buffer". Shouldn't it say 
> rather "... *should* be used ... " as the user has no way to tell if the 
> driver implementation makes it necessary or not to use 
> LockBuffer()/UnlockBuffer(). 

I'm a bit lost in the distinction.

> * Shouldn't LockBuffer() have a return code instead of void ? In case the 
> underlying locking primitive fail. Shouldn't LockBuffer() have a timeout 
> parameter for consistency ? Or we want it to wait for infinite time ?

Yes, this is reasonable.  I will change it accordingly.

> * The timeout parameter of GetNextUpdatedRegion(). This is related to the 
> meaning of the timeout parameter of the related CPL primitive 
> CPLAcquireMutex(). 
> 	-  I notice that CPLAcquireMutex() use a dfWaitInSeconds parameter : wouldn't 
> it be more consistant to use it also for GetNextUpdatedRegion() ?

I agree, I will change to a double precision value measured in seconds.

> 	- Shouldn't we have a special constant meaning infinite waiting, instead of 
> using arbirtrary numbers such as 100.0 used in 
> JPIPKAKAsyncRasterIO::GetNextUpdatedRegion().

I will change it to use -1 as a special infinite value.

> * BeginAsyncRasterIO() : neither the RFC nor the doc of the method explains if 
> it is legal or not to initiate multiple AsyncRasterIO() without waiting the 
> first ones to be termintated before beginning a new one. My understanding of 
> the JPIPKAK driver is that this particular driver allows 2 concurrent 
> AsyncRasterIO(). Perhaps just adding a note in the doc of 
> BeginAsyncRasterIO() to say that this is a driver specific behaviour might be 
> sufficient. In which case, the doc should probably add "@return The 
> GDALAsyncRasterIO object representing the request or NULL if the request 
> cannot be started". (by the way, it might fail for other reasons such as 
> wrong parameter values)

My thinking was that an application could have multiple asynchronous
requests active at once and that the limitation to two is just a
peculiar limitations of the JPIPKAK implementation.  I've got an email
out to Norman to see if there is any reason to avoid generalizing this.

I'm going to avoid adjusting the docs and RFC till I hear back.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sfkeller at gmail.com  Sun Mar 14 20:27:01 2010
From: sfkeller at gmail.com (Stefan Keller)
Date: Sun Mar 14 20:27:03 2010
Subject: [gdal-dev] Howto convert a CSV with geometry and a CVS without 
	into one Geodatabase (.mdb)?
In-Reply-To: <4B9D3681.8070808@pobox.com>
References: <25bc040b1003141207tab24e39x75bf7d498a4bcb4b@mail.gmail.com>
	<4B9D3681.8070808@pobox.com>
Message-ID: <25bc040b1003141727i38cd3xf6c36362264547ce@mail.gmail.com>

Thanks for the hint, right.

So how can I insert the point geometry attribute (called SHAPE) which
is an OLE Object?

Do you know the binary encoding of that?

Yours, S.
--


2010/3/14 Frank Warmerdam <warmerdam@pobox.com>:
> Stefan Keller wrote:
>>
>> Dear all
>>
>> I'm trying something new to me: I have two comma separated value files
>> (CSV, from an Excel user naturally :->) - one file having a lat and a
>> lon column.
>>
>> The target database is a Geodatabase (.mdb) which not only has a
>> feature class table (fctable) but also another 'normal' MS Access
>> table (without geometry). The columns of the CSV with la/lon goes to
>> the fctable and the other CSV goes to othertable.
>>
>> One of the challenges here is that othertable can't be accessed
>> through PGeo driver AFAIK.
>>
>> In addition - after inserting a row into the fctable with a new oid -
>> there should be a foreign key added to othertable which establishes a
>> relationship from othertable to fctable.
>>
>> => How do I shuffle these CSVs into this Geodatabase (preferrably with
>> Python)?
>> => Has anyone accomplished a similar conversion (using Python or other
>> scripts)?
>
> Stefan,
>
> The OGR PGeo and ODBC drivers are read-only. ?If you want to update
> a geodatabase you will need to find another route, or just route
> low level SQL through the ODBC driver using ExecuteSQL().
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
>
From dor_ben2000 at hotmail.com  Sun Mar 14 22:13:49 2010
From: dor_ben2000 at hotmail.com (benbendor)
Date: Sun Mar 14 22:14:53 2010
Subject: [gdal-dev] can't open HDF5 subdatasets
Message-ID: <BAY107-W325DEF36797A11446C7E95822E0@phx.gbl>


Hello:

 

I think is woking well by using GDALINFO to  open hdf5 image,like this:

   I:\gdalinfo Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115
_0250M_MS.h5
Driver: HDF5/Hierarchical Data Format Release 5
Files: Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.
h5
Size is 512, 512
Coordinate System is `'
Subdatasets:
  SUBDATASET_1_NAME=HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_G   BAL_L1_20100129_0115_0250M_MS.h5"://BB_DN_average
SUBDATASET_1_DESC=[5x8000] //BB_DN_average (32-bit floating-point)
  SUBDATASET_2_NAME=HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.h5"://EV_250_Emissive
SUBDATASET_2_DESC=[8000x8192] //EV_250_Emissive (16-bit unsigned integer)
  SUBDATASET_3_NAME=HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.h5"://EV_250_RefSB_b1
SUBDATASET_3_DESC=[8000x8192] //EV_250_RefSB_b1 (16-bit unsigned integer)
 
.
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)
 
 but wen I trying to open a subdataset ,it's can't work well,why?
I:\gdalinfo HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_2010012
9_0115_0250M_MS.h5"=BB_DN_average
ERROR 4: `HDF5:Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0
250M_MS.h5=BB_DN_average' does not exist in the file system,
and is not recognised as a supported dataset name.
 
gdalinfo failed - unable to open 'HDF5:Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI
_GBAL_L1_20100129_0115_0250M_MS.h5=BB_DN_average'.
regards
ben
 
 		 	   		  
_________________________________________________________________
SkyDrive!
http://www.windowslive.cn/campaigns/e-magazine/ngmchina/?a=c
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100315/2463b6d3/attachment.html
From antonio.valentino at tiscali.it  Mon Mar 15 04:15:37 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Mon Mar 15 04:16:46 2010
Subject: [gdal-dev] can't open HDF5 subdatasets
In-Reply-To: <BAY107-W325DEF36797A11446C7E95822E0@phx.gbl>
References: <BAY107-W325DEF36797A11446C7E95822E0@phx.gbl>
Message-ID: <20100315091537.1e158e13@asigrid01>

Hi Ben, 

Il giorno Mon, 15 Mar 2010 10:13:49 +0800
benbendor <dor_ben2000@hotmail.com> ha scritto:

> 
> Hello:
> 
>  
> 
> I think is woking well by using GDALINFO to  open hdf5 image,like
> this:
> 
>    I:\gdalinfo
> Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115
> _0250M_MS.h5 Driver: HDF5/Hierarchical Data Format Release 5
> Files:
> Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.
> h5 Size is 512, 512
> Coordinate System is `'
> Subdatasets:
>   SUBDATASET_1_NAME=HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_G
> BAL_L1_20100129_0115_0250M_MS.h5"://BB_DN_average
> SUBDATASET_1_DESC=[5x8000] //BB_DN_average (32-bit floating-point)
> SUBDATASET_2_NAME=HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.h5"://EV_250_Emissive
> SUBDATASET_2_DESC=[8000x8192] //EV_250_Emissive (16-bit unsigned
> integer)
> SUBDATASET_3_NAME=HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.h5"://EV_250_RefSB_b1
> SUBDATASET_3_DESC=[8000x8192] //EV_250_RefSB_b1 (16-bit unsigned
> integer) ?? ???. Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  512.0)
> Upper Right (  512.0,    0.0)
> Lower Right (  512.0,  512.0)
> Center      (  256.0,  256.0)
>  
>  but wen I trying to open a subdataset ,it's can't work well,why?
> I:\gdalinfo
> HDF5:"Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_2010012
> 9_0115_0250M_MS.h5"=BB_DN_average ERROR 4:
> `HDF5:Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0
> 250M_MS.h5=BB_DN_average' does not exist in the file system, and is
> not recognised as a supported dataset name. 
> gdalinfo failed - unable to open
> 'HDF5:Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI
> _GBAL_L1_20100129_0115_0250M_MS.h5=BB_DN_average'. regards
> ben

I think it should be 

$ gdalinfo HDF5:Z_SATE_C_BAWX_20100129130049_P_FY3A_MERSI_GBAL_L1_20100129_0115_0250M_MS.h5://BB_DN_average

why do you use the "=" separator?

best regards


-- 
Antonio Valentino
From mail at andreas-joisten.de  Mon Mar 15 04:24:01 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Mon Mar 15 04:24:10 2010
Subject: [gdal-dev] question to <GeoTransform> in Virtual Format file
Message-ID: <20100315082401.9CD943AE69C@dd2010.kasserver.com>

Hi All,

In a simple case I use a vrt file to create a GeoTiff file and that works fine.

Now I have the problem, that the input tif file is not quite right.  The Image must be fliped horizontal to have the right position.


How can I use the geoTransform array to execute this operation?


Many thanks



From randyqiuxy at hotmail.com  Mon Mar 15 04:40:57 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Mon Mar 15 04:41:00 2010
Subject: [gdal-dev] questions about S-57
Message-ID: <BAY123-DS1697C75055C9C968A0777FC32E0@phx.gbl>

Hi Frank and list,

I have several questions which are not relevant to GDAL/OGR itself, but S-57
format.

Wish any hint, thanks!

NO.1

I'd like to know whether PRIM is as same as NAME_RCNM? If not, what's the
difference between the two?

NO.2

I got some info via ogrinfo from a s-57 file(*.000). In a caution area
object(CTNARE),some fields are as follows:

PRIM=3---------------------------------------------------which means the
object's geometry is a face, right?

NAME_RCNM=130-----------------------------------which means the vector
record's type is edge, I guess. But the next three fields should exist with
a face vector record(5.1.3.3 chapter in S-57 Editon3.1 seems give this hint,
but I'm not sure it's true.)

ORNT=2:2,2

USAG=2:1,1

MASK=2:255,255

 

And another two questions:

NO.1

The field value in spatial records such as "NAME_RCID=2:25,413" has a prefix
"2:", does it mean the field belong to spatial record not feature record?

NO.2

And why one is 25,and another is 413?Does it mean 25 is the ID in spatial
record and 413 is the ID in the whole record?

 

Thanks a lot!

 

Best regards,

Randy

 

--------------------------------------------

To be frank, dream is hard to own!

Fortunately, I do understand what deserves me to dedicate myself to through
all my life.

--------------------------------------------

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100315/8012cf21/attachment-0001.html
From warmerdam at pobox.com  Mon Mar 15 07:09:10 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 15 07:12:18 2010
Subject: [gdal-dev] questions about S-57
In-Reply-To: <BAY123-DS1697C75055C9C968A0777FC32E0@phx.gbl>
References: <BAY123-DS1697C75055C9C968A0777FC32E0@phx.gbl>
Message-ID: <4B9E1556.50306@pobox.com>

Randy wrote:
> Hi Frank and list,
> 
> I have several questions which are not relevant to GDAL/OGR itself, but 
> S-57 format.
> 
> Wish any hint, thanks!
> 
> NO.1
> 
> I?d like to know whether PRIM is as same as NAME_RCNM? If not, what?s 
> the difference between the two?

Randy,

Reviewing a WRECKS feature I see they are not, I have:

   PRIM (Integer) = 1
   NAME_RCNM (IntegerList) = (1:110)
   NAME_RCID (IntegerList) = (1:498)

So, RCNM is 110 (isolated node) and PRIM is 1 (point feature).  From
the include file:

/* -------------------------------------------------------------------- */
/*      RCNM values.                                                    */
/* -------------------------------------------------------------------- */

#define RCNM_FE         100     /* Feature record */

#define RCNM_VI         110     /* Isolated Node */
#define RCNM_VC         120     /* Connected Node */
#define RCNM_VE         130     /* Edge */
#define RCNM_VF         140     /* Face */

/* -------------------------------------------------------------------- */
/*      FRID PRIM values.                                               */
/* -------------------------------------------------------------------- */
#define PRIM_P          1       /* point feature */
#define PRIM_L          2       /* line feature */
#define PRIM_A          3       /* area feature */
#define PRIM_N          4       /* non-spatial feature  */


> NO.2
> 
> I got some info via ogrinfo from a s-57 file(*.000). In a caution area 
> object(CTNARE),some fields are as follows:
> 
> PRIM=3---------------------------------------------------which means the 
> object?s geometry is a face, right?

Yes, it means it is an area feature.

> NAME_RCNM=130-----------------------------------which means the vector 
> record?s type is edge, I guess. But the next three fields should exist 
> with a face vector record(5.1.3.3 chapter in S-57 Editon3.1 seems give 
> this hint, but I?m not sure it?s true.)
> 
> ORNT=2:2,2
> USAG=2:1,1
> MASK=2:255,255

Was there a question in here?

> And another two questions:
> 
> NO.1
> 
> The field value in spatial records such as ?NAME_RCID=2:25,413? has a 
> prefix ?2:?, does it mean the field belong to spatial record not feature 
> record?

The fields NAME_RCID and and NAME_RCNM are list fields, so the first
value is the report is the count of items in the list followed by a
colon, and then the list of values separated by commas.  It is just
a particular reporting format of the ogrinfo program.

> NO.2
> 
> And why one is 25,and another is 413?Does it mean 25 is the ID in 
> spatial record and 413 is the ID in the whole record?

It presumably means there are two edge objects one with
RCID=25 and one with RCID=413.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Mar 15 07:12:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 15 07:14:42 2010
Subject: [gdal-dev] question to <GeoTransform> in Virtual Format file
In-Reply-To: <20100315082401.9CD943AE69C@dd2010.kasserver.com>
References: <20100315082401.9CD943AE69C@dd2010.kasserver.com>
Message-ID: <4B9E1624.1080006@pobox.com>

Andreas Joisten wrote:
> Hi All,
> 
> In a simple case I use a vrt file to create a GeoTiff file and that works
> fine.
> 
> Now I have the problem, that the input tif file is not quite right.  The
> Image must be fliped horizontal to have the right position.
> 
> How can I use the geoTransform array to execute this operation?

Andreas,

You cannot exactly horizontaly flip an image with the geotransform though
you can use to indicate that the first pixel on a scanline is the
eastmost, and the last is the west most.  This is normally accomplished
by ensuring that the x origin (geotransform[0]) is the easting of the east
edge of the image and having a negative x pixel size (geotransform[1])
indicating that the easting value decrements as you move along the scanline.

A few applications that are determined to show the image in a normal map
orientation will use the geotransform to flip the image.  Some others
won't but will at least show correct georeferenced locations when you
point at the pixels based on the geotransform.  Some apps may just get
confused.

If you get the image properly georeferenced and run it through gdalwarp
you will get an image with a normal orientation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randyqiuxy at hotmail.com  Mon Mar 15 08:00:54 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Mon Mar 15 08:00:57 2010
Subject: [gdal-dev] questions about S-57
In-Reply-To: <4B9E1556.50306@pobox.com>
References: <BAY123-DS1697C75055C9C968A0777FC32E0@phx.gbl>
	<4B9E1556.50306@pobox.com>
Message-ID: <BAY123-DS175A78CC7848981E725A1DC32E0@phx.gbl>

Hi Frank and list,
Thanks for your prompt and explicit response, I think I see now.

Best regards,
Randy

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Monday, March 15, 2010 7:09 PM
To: Randy
Cc: GDAL/OGR mailing list
Subject: Re: [gdal-dev] questions about S-57

Randy wrote:
> Hi Frank and list,
> 
> I have several questions which are not relevant to GDAL/OGR itself, but 
> S-57 format.
> 
> Wish any hint, thanks!
> 
> NO.1
> 
> I'd like to know whether PRIM is as same as NAME_RCNM? If not, what's 
> the difference between the two?

Randy,

Reviewing a WRECKS feature I see they are not, I have:

   PRIM (Integer) = 1
   NAME_RCNM (IntegerList) = (1:110)
   NAME_RCID (IntegerList) = (1:498)

So, RCNM is 110 (isolated node) and PRIM is 1 (point feature).  From
the include file:

/* -------------------------------------------------------------------- */
/*      RCNM values.                                                    */
/* -------------------------------------------------------------------- */

#define RCNM_FE         100     /* Feature record */

#define RCNM_VI         110     /* Isolated Node */
#define RCNM_VC         120     /* Connected Node */
#define RCNM_VE         130     /* Edge */
#define RCNM_VF         140     /* Face */

/* -------------------------------------------------------------------- */
/*      FRID PRIM values.                                               */
/* -------------------------------------------------------------------- */
#define PRIM_P          1       /* point feature */
#define PRIM_L          2       /* line feature */
#define PRIM_A          3       /* area feature */
#define PRIM_N          4       /* non-spatial feature  */


> NO.2
> 
> I got some info via ogrinfo from a s-57 file(*.000). In a caution area 
> object(CTNARE),some fields are as follows:
> 
> PRIM=3---------------------------------------------------which means the 
> object's geometry is a face, right?

Yes, it means it is an area feature.

> NAME_RCNM=130-----------------------------------which means the vector 
> record's type is edge, I guess. But the next three fields should exist 
> with a face vector record(5.1.3.3 chapter in S-57 Editon3.1 seems give 
> this hint, but I'm not sure it's true.)
> 
> ORNT=2:2,2
> USAG=2:1,1
> MASK=2:255,255

Was there a question in here?

> And another two questions:
> 
> NO.1
> 
> The field value in spatial records such as "NAME_RCID=2:25,413" has a 
> prefix "2:", does it mean the field belong to spatial record not feature 
> record?

The fields NAME_RCID and and NAME_RCNM are list fields, so the first
value is the report is the count of items in the list followed by a
colon, and then the list of values separated by commas.  It is just
a particular reporting format of the ogrinfo program.

> NO.2
> 
> And why one is 25,and another is 413?Does it mean 25 is the ID in 
> spatial record and 413 is the ID in the whole record?

It presumably means there are two edge objects one with
RCID=25 and one with RCID=413.



From warmerdam at pobox.com  Mon Mar 15 10:47:12 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 15 10:47:28 2010
Subject: [gdal-dev] Howto convert a CSV with geometry and a CVS without
	into one Geodatabase (.mdb)?
In-Reply-To: <25bc040b1003141727i38cd3xf6c36362264547ce@mail.gmail.com>
References: <25bc040b1003141207tab24e39x75bf7d498a4bcb4b@mail.gmail.com>
	<4B9D3681.8070808@pobox.com>
	<25bc040b1003141727i38cd3xf6c36362264547ce@mail.gmail.com>
Message-ID: <4B9E4870.8010707@pobox.com>

Stefan Keller wrote:
> Thanks for the hint, right.
> 
> So how can I insert the point geometry attribute (called SHAPE) which
> is an OLE Object?
> 
> Do you know the binary encoding of that?

Stefan,

I don't know the details of how to do this, but the binary format
returned from the shape column is already supported by the PGEO driver.
You could scan that to get a sense of how it works.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From eggert at gavia.is  Tue Mar 16 07:27:34 2010
From: eggert at gavia.is (Eggert Jon Magnusson)
Date: Tue Mar 16 07:27:37 2010
Subject: [gdal-dev] Problem loading S-57 charts
Message-ID: <9fb53a21003160427g2427391dmdf148942c52e0346@mail.gmail.com>

Hi there.

I've got problems loading certain local S-57 charts exported
especially for me by a Hydrographic office into my application.  It
appears that when accessing a feature via GetNextFeature(), something
crashes.  I've tried the latest fwtools and the problem exists there,
as well.  This is probably something incorrectly exported in the S57
chart, zero pointer or some-such, and I can probably write myself
around this specific chart, but I'm concerned that the problem can pop
up at any time.

I'm not able to send the files, since they are not public, so I'm at a
bit of a loss - is there a way to get fwtools to generate a crash
report?

My application uses Python, btw., and Gdal.VersionInfo() returns 1500.

Best regards, and thanks in advance.
-- 
Eggert J?n Magn?sson
Software Engineer

Gavia | Autonomous Underwater Vehicles
Hafmynd ehf - Vesturv?r 29
200 K?pavogur, Iceland
Tel. +354 511 2990
Mobile: +354 698 8088
www.gavia.is
From warmerdam at pobox.com  Tue Mar 16 07:50:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 16 07:50:41 2010
Subject: [gdal-dev] Problem loading S-57 charts
In-Reply-To: <9fb53a21003160427g2427391dmdf148942c52e0346@mail.gmail.com>
References: <9fb53a21003160427g2427391dmdf148942c52e0346@mail.gmail.com>
Message-ID: <4B9F707F.7010106@pobox.com>

Eggert Jon Magnusson wrote:
> Hi there.
> 
> I've got problems loading certain local S-57 charts exported
> especially for me by a Hydrographic office into my application.  It
> appears that when accessing a feature via GetNextFeature(), something
> crashes.  I've tried the latest fwtools and the problem exists there,
> as well.  This is probably something incorrectly exported in the S57
> chart, zero pointer or some-such, and I can probably write myself
> around this specific chart, but I'm concerned that the problem can pop
> up at any time.
> 
> I'm not able to send the files, since they are not public, so I'm at a
> bit of a loss - is there a way to get fwtools to generate a crash
> report?
> 
> My application uses Python, btw., and Gdal.VersionInfo() returns 1500.

Eggert,

The FWTools builds are done without debugging information.  If you wish
to investigate this problem you would either need to build GDAL/OGR yourself
from source and debug information and track it down in the debugger or find
a way to provide the problem file to a developer who could investigate the
problem.

Note that I am prepared to treat files as confidential with appropriate
notice, though I will not sign a non-disclosure for such purposes except
for paying clients.

If you can't do either of the above, then you are out of luck.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ian.dees at gmail.com  Tue Mar 16 10:08:38 2010
From: ian.dees at gmail.com (Ian Dees)
Date: Tue Mar 16 10:08:40 2010
Subject: [gdal-dev] gdalwarp with JPEG not working?
Message-ID: <1268748518249-4743823.post@n2.nabble.com>


I am attempting to warp a JPG/JPW file pair to a TIFF using the following
command: 

$ gdalwarp -t_srs EPSG:4326
EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg_warped.tif 

But I'm getting the following error: 

ERROR 4: `EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg' not
recognised as a supported file format. 

When I run gdalinfo on the same file, it reads it fine and I get: 

$ gdalinfo EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jpg 
Driver: JPEG/JPEG JFIF 
Files: EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jpg 
       EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jgw 
Size is 9934, 7016 
Coordinate System is `' 
Origin = (307064.001182469015475,3618798.550588979851454) 
Pixel Size = (0.635000000000018,-0.635000000000014) 
Metadata: 
  EXIF_BitsPerSample=8 8 8 
  EXIF_Compression=1 
  EXIF_PhotometricInterpretation=2 
  EXIF_ImageDescription=ZKI Map 
  EXIF_Orientation=1 
  EXIF_SamplesPerPixel=3 
  EXIF_XResolution=(300) 
  EXIF_YResolution=(300) 
  EXIF_PlanarConfiguration=1 
  EXIF_ResolutionUnit=2 
  EXIF_Software=Adobe Photoshop CS2 Windows 
  EXIF_DateTime=2010:02:25 15:48:31 
  EXIF_Artist=German Aerospace Center (DLR), German Remote Sensing
Datacenter (DFD), Center for Satellite Based Crisis Information (ZKI)
  EXIF_Copyright=Copyright (c) German Aerospace Center (DLR), German Remote
Sensing Datacenter (DFD), Center for Satellite Based Crisis Information
(ZKI) 
  EXIF_ColorSpace=65535 
  EXIF_PixelXDimension=9934 
  EXIF_PixelYDimension=7016 
Image Structure Metadata: 
  SOURCE_COLOR_SPACE=YCbCr 
  INTERLEAVE=PIXEL 
  COMPRESSION=JPEG 
Corner Coordinates: 
Upper Left  (  307064.001, 3618798.551) 
Lower Left  (  307064.001, 3614343.391) 
Upper Right (  313372.091, 3618798.551) 
Lower Right (  313372.091, 3614343.391) 
Center      (  310218.046, 3616570.971) 
Band 1 Block=9934x1 Type=Byte, ColorInterp=Red 
  Image Structure Metadata: 
    COMPRESSION=JPEG 
Band 2 Block=9934x1 Type=Byte, ColorInterp=Green 
  Image Structure Metadata: 
    COMPRESSION=JPEG 
Band 3 Block=9934x1 Type=Byte, ColorInterp=Blue 
  Image Structure Metadata: 
    COMPRESSION=JPEG 

Why can't gdalwarp read this file?
-- 
View this message in context: http://n2.nabble.com/gdalwarp-with-JPEG-not-working-tp4743823p4743823.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Mar 16 10:34:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 16 10:35:13 2010
Subject: [gdal-dev] gdalwarp with JPEG not working?
In-Reply-To: <1268748518249-4743823.post@n2.nabble.com>
References: <1268748518249-4743823.post@n2.nabble.com>
Message-ID: <4B9F9710.7070304@pobox.com>

Ian Dees wrote:
> I am attempting to warp a JPG/JPW file pair to a TIFF using the following
> command: 
> 
> $ gdalwarp -t_srs EPSG:4326
> EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
> EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg_warped.tif 
> 
> But I'm getting the following error: 
> 
> ERROR 4: `EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg' not
> recognised as a supported file format. 
> 
> When I run gdalinfo on the same file, it reads it fine and I get: 
...
> Why can't gdalwarp read this file?

Ian,

I notice that you used two different filenames:

 > $ gdalwarp -t_srs EPSG:4326
 > EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
...
 > $ gdalinfo EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jpg

One is 01_high and one is 09_high.

Perhaps that is related?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ian.dees at gmail.com  Tue Mar 16 10:41:31 2010
From: ian.dees at gmail.com (Ian Dees)
Date: Tue Mar 16 10:41:37 2010
Subject: [gdal-dev] Re: gdalwarp with JPEG not working?
In-Reply-To: <4B9F9710.7070304@pobox.com>
References: <1268748518249-4743823.post@n2.nabble.com>
	<4B9F9710.7070304@pobox.com>
Message-ID: <1268750491885-4744026.post@n2.nabble.com>



Frank Warmerdam wrote:
> 
> Ian,
> 
> I notice that you used two different filenames:
> 
>  > $ gdalwarp -t_srs EPSG:4326
>  > EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
> ...
>  > $ gdalinfo EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jpg
> 
> One is 01_high and one is 09_high.
> 
> Perhaps that is related?
> 

Ack, thanks! It appears that only 2 out of the 15 jpegs are readable by
gdalinfo.
-- 
View this message in context: http://n2.nabble.com/gdalwarp-with-JPEG-not-working-tp4743823p4744026.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Mar 16 13:40:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 16 13:40:24 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
Message-ID: <4B9FC27D.3020604@pobox.com>

Folks,

Motion: To approve RFC 24 - GDAL Progressive Data Support.

   http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support

--

I've incorporated adjustments based on the feedback in the last few
days, and now I'd like to move to formally adopt RFC 24.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Tue Mar 16 14:45:49 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Mar 16 14:45:59 2010
Subject: [gdal-dev] Re: gdalwarp with JPEG not working?
In-Reply-To: <1268750491885-4744026.post@n2.nabble.com>
References: <1268748518249-4743823.post@n2.nabble.com>
	<4B9F9710.7070304@pobox.com>
	<1268750491885-4744026.post@n2.nabble.com>
Message-ID: <201003161945.49404.even.rouault@mines-paris.org>

Le Tuesday 16 March 2010 15:41:31 Ian Dees, vous avez ?crit?:
> Frank Warmerdam wrote:
> > Ian,
> >
> > I notice that you used two different filenames:
> >  > $ gdalwarp -t_srs EPSG:4326
> >  > EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
> >
> > ...
> >
> >  > $ gdalinfo EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jpg
> >
> > One is 01_high and one is 09_high.
> >
> > Perhaps that is related?
>
> Ack, thanks! It appears that only 2 out of the 15 jpegs are readable by
> gdalinfo.

Hum, this is not expected. Do you get an error message when trying to read 
those 13 files ? Can they be opened by standard image viewers ?
From ian.dees at gmail.com  Tue Mar 16 14:51:56 2010
From: ian.dees at gmail.com (Ian Dees)
Date: Tue Mar 16 15:07:12 2010
Subject: [gdal-dev] Re: gdalwarp with JPEG not working?
In-Reply-To: <201003161945.49404.even.rouault@mines-paris.org>
References: <1268748518249-4743823.post@n2.nabble.com>
	<4B9F9710.7070304@pobox.com>
	<1268750491885-4744026.post@n2.nabble.com>
	<201003161945.49404.even.rouault@mines-paris.org>
Message-ID: <3baad6b81003161151p7598eden46ef6dfd2e46b480@mail.gmail.com>

On Tue, Mar 16, 2010 at 1:45 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Le Tuesday 16 March 2010 15:41:31 Ian Dees, vous avez ?crit?:
>> Frank Warmerdam wrote:
>> > Ian,
>> >
>> > I notice that you used two different filenames:
>> > ?> $ gdalwarp -t_srs EPSG:4326
>> > ?> EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
>> >
>> > ...
>> >
>> > ?> $ gdalinfo EUSC_20100222_Portugal_Madeira_flood_Funchal09_high.jpg
>> >
>> > One is 01_high and one is 09_high.
>> >
>> > Perhaps that is related?
>>
>> Ack, thanks! It appears that only 2 out of the 15 jpegs are readable by
>> gdalinfo.
>
> Hum, this is not expected. Do you get an error message when trying to read
> those 13 files ? Can they be opened by standard image viewers ?
>

The bad files were only a few kilobytes big (and Firefox couldn't view
them), so I think gdalinfo is correct. The two that were readable were
11MB.
From hobu.inc at gmail.com  Tue Mar 16 14:21:57 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Tue Mar 16 15:20:34 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FC27D.3020604@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
Message-ID: <EE5D85F8-9128-4DC6-9A6B-299D09D07829@gmail.com>


On Mar 16, 2010, at 12:40 PM, Frank Warmerdam wrote:

> Folks,
> 
> Motion: To approve RFC 24 - GDAL Progressive Data Support.
> 
>  http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
> 
> --
> 
> I've incorporated adjustments based on the feedback in the last few
> days, and now I'd like to move to formally adopt RFC 24.


+0.  I do not feel qualified to vote for this, but if people are happy enough with its GDAL'ishness, ok with me.

Howard

From even.rouault at mines-paris.org  Tue Mar 16 15:34:04 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Mar 16 15:34:15 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FC27D.3020604@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
Message-ID: <201003162034.05055.even.rouault@mines-paris.org>

+1

Best regards,

Even

Le Tuesday 16 March 2010 18:40:13 Frank Warmerdam, vous avez ?crit?:
> Folks,
>
> Motion: To approve RFC 24 - GDAL Progressive Data Support.
>
>    http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> --
>
> I've incorporated adjustments based on the feedback in the last few
> days, and now I'd like to move to formally adopt RFC 24.
>
> Best regards,


From dmorissette at mapgears.com  Tue Mar 16 15:37:41 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Tue Mar 16 15:37:43 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <EE5D85F8-9128-4DC6-9A6B-299D09D07829@gmail.com>
References: <4B9FC27D.3020604@pobox.com>
	<EE5D85F8-9128-4DC6-9A6B-299D09D07829@gmail.com>
Message-ID: <4B9FDE05.60300@mapgears.com>

Howard Butler wrote:
> On Mar 16, 2010, at 12:40 PM, Frank Warmerdam wrote:
> 
>> Folks,
>>
>> Motion: To approve RFC 24 - GDAL Progressive Data Support.
>>
>>  http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>>
>> --
>>
>> I've incorporated adjustments based on the feedback in the last few
>> days, and now I'd like to move to formally adopt RFC 24.
> 
> 
> +0.  I do not feel qualified to vote for this, but if people are happy enough with its GDAL'ishness, ok with me.
> 

Same here: +0. I have read and understand most of the RFC and I like it, 
but since I'm not familiar enough with that part of GDAL I may be 
missing some issues so I'll let those in the know make the final call.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
From aronrubin at gmail.com  Tue Mar 16 16:15:10 2010
From: aronrubin at gmail.com (Aron Rubin)
Date: Tue Mar 16 16:15:13 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com>
References: <4B99943B.4010007@pobox.com>
	<f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com>
Message-ID: <c46d99051003161315m4ae70f07r5ff007c7990a16d1@mail.gmail.com>

Sorry to enter the discussion a little late here but I have a couple
of notes regarding the RFC. The RFC motion forced me to write this
quickly so I hope I get the points across.

1. The RFC is intentionally not callback/event oriented. You can
derive a non-callback/event version from a callback/event version but
not the other way around unless the boundaries match exactly.
This issue is illustrated by a the ability to satisfy the use case of
a display of a progressive resolution image. I am lacking the time so
I will abbreviate. In this use case I see two potential choices of
display - mixed resolution and fixed resolution. In the mixed
resolution case anything that happens to be in the loading buffer
(including nodata values) at display iteration time. In the fixed
resolution case the display is updated at times when the loading
buffer is in a consistent state, filled with data at a specific
resolution. A user may choose the fixed resolution because it may less
visually confusing or because they want to end the reading at a
specific resolution. If the reading is bounded on I/O time only there
is no event emitted (callback) when each resolution pass is completed.
This is fine for the mixed resolution case but not for fixed
resolution.
One way to switch to an event basis without callbacks would be to
specify reading flags to stop at events and then augment the return
information with the event parameters i.e. which pass was completed.
This approach is not scalable however. For example if the dataset in
question was tiled or had subdatasets the event information would need
to include which of those were loaded at which resolution and whether
I/O was complete for a specific tile. Is that all supposed to come
through the GetNextUpdatedRegion arguments? Would the user be expected
to keep track of time since the I/O epoch started to get the same I/O
time budget effect?
If callback style event notification was used it would be possible for
different drivers to have a capability-matched set of events with an
appropriate event structure for each, the user would not need to
manage the I/O budget, and a I/O cancel could be issued if needed.

2. There is no consideration or mention of how this would work with
user managed I/O if that ever happens. I would like to eventually see
a GDAL/OGR user managed I/O in both push and pull forms. Asynchronous
I/O and user managed I/O have implications for each other.

Thank you for your consideration of these issues.
Aron

-- 
Aron Rubin
Handy Husband & Daddy Jungle Gym & Senior Engineer
From szekerest at gmail.com  Tue Mar 16 16:19:38 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Mar 16 16:19:42 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FC27D.3020604@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
Message-ID: <f3b73b7d1003161319ta92c0d6yef6fcdc14078bf3@mail.gmail.com>

+1


BTW: I couldn't review the recent implementation in detail, however I would
suggest using the functions defined recently in cpl_atomic_ops.cpp to access
the volatile variables by multiple threads to prevent from the possible
issues pointed out in:
http://trac.osgeo.org/gdal/ticket/2648

Best regards,

Tamas



2010/3/16 Frank Warmerdam <warmerdam@pobox.com>

> Folks,
>
> Motion: To approve RFC 24 - GDAL Progressive Data Support.
>
>  http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> --
>
> I've incorporated adjustments based on the feedback in the last few
> days, and now I'd like to move to formally adopt RFC 24.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100316/e44e47dd/attachment.html
From david.m.baker at chk.com  Tue Mar 16 16:31:33 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Tue Mar 16 16:31:37 2010
Subject: [gdal-dev] Geodetic Problem
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>

Frank and the List,

I have a geodetic problem I hope GDAL/OGR can solve.

The setup:

I have two radio towers each the same height and at the same elevation being 10,000 meters apart.  I know the latitude and longitude of the first tower and those coordinates reference WGS84 (though they could be any geographic CRS, NAD27, NAD83, etc.).  I also now the baring to the second from the first measured from true north at the first tower.

The problem:

Given the above information and using the prebuilt tools, GDAL/OGR utilities, what workflow would one use to calculate the latitude and longitude of the second tower?

The hints I have gotten so far say to use a conformal projection (UTM maybe?) centered at the first point with a scale factor of 1, a local projection.  Calculate the Cartesian offsets from the first point to the second based on the azimuth of the given baring.  Using the baring calculate the x and y offsets to the second point and use offsets to find the x and y of the second point in the local coordinate system.  Then, reproject the x and y of the second point to the latitude and longitude in the CRS of the first points latitude and longitude.  If this is correct, I guess the question is, what would the proj4 parameters be for such a local projections.

Thanks,
David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com<mailto:david.m.baker@chk.com>


________________________________
This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law. If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited. If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100316/4f158483/attachment-0001.html
From warmerdam at pobox.com  Tue Mar 16 16:31:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 16 16:31:59 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <c46d99051003161315m4ae70f07r5ff007c7990a16d1@mail.gmail.com>
References: <4B99943B.4010007@pobox.com>
	<f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com>
	<c46d99051003161315m4ae70f07r5ff007c7990a16d1@mail.gmail.com>
Message-ID: <4B9FEAB1.5070106@pobox.com>

Aron Rubin wrote:
> Sorry to enter the discussion a little late here but I have a couple
> of notes regarding the RFC. The RFC motion forced me to write this
> quickly so I hope I get the points across.
> 
> 1. The RFC is intentionally not callback/event oriented. You can
> derive a non-callback/event version from a callback/event version but
> not the other way around unless the boundaries match exactly.
> This issue is illustrated by a the ability to satisfy the use case of
> a display of a progressive resolution image. I am lacking the time so
> I will abbreviate. In this use case I see two potential choices of
> display - mixed resolution and fixed resolution. In the mixed
> resolution case anything that happens to be in the loading buffer
> (including nodata values) at display iteration time. In the fixed
> resolution case the display is updated at times when the loading
> buffer is in a consistent state, filled with data at a specific
> resolution. A user may choose the fixed resolution because it may less
> visually confusing or because they want to end the reading at a
> specific resolution. If the reading is bounded on I/O time only there
> is no event emitted (callback) when each resolution pass is completed.
> This is fine for the mixed resolution case but not for fixed
> resolution.
> One way to switch to an event basis without callbacks would be to
> specify reading flags to stop at events and then augment the return
> information with the event parameters i.e. which pass was completed.
> This approach is not scalable however. For example if the dataset in
> question was tiled or had subdatasets the event information would need
> to include which of those were loaded at which resolution and whether
> I/O was complete for a specific tile. Is that all supposed to come
> through the GetNextUpdatedRegion arguments? Would the user be expected
> to keep track of time since the I/O epoch started to get the same I/O
> time budget effect?
> If callback style event notification was used it would be possible for
> different drivers to have a capability-matched set of events with an
> appropriate event structure for each, the user would not need to
> manage the I/O budget, and a I/O cancel could be issued if needed.

Aron,

There seem to be a few ideas in here.

With regard to the fixed vs. mixed resolution results, it is true
that the current API provides no mechanism to request particular
levels of completeness, such as passes in an interleaved progressive
display.  I imagine this issue was not addressed in part because
it has no applicability to the JPIP case.  I'm not at all clear on
how important it is.

I still didn't quite grasp why an event/callback approach is better
than GetNextUpdateRegion() style polling to handle distinct levels
of completeness, nor what you mean by mangaging the I/O budget.

> 2. There is no consideration or mention of how this would work with
> user managed I/O if that ever happens. I would like to eventually see
> a GDAL/OGR user managed I/O in both push and pull forms. Asynchronous
> I/O and user managed I/O have implications for each other.

I'm not sure what you mean by user managed I/O.  Do you mean applications
providing their own low level IO handlers - for instance to the VSI*L
layer?  I'm not sure I see the relationship between the progressive data
api and managing IO.

I appreciate your feedback though I am concerned that you are raising
pretty fundamental changes in the implementation.  I'd want pretty
compelling reasoning to start over.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From didier.richard at ign.fr  Tue Mar 16 16:23:04 2010
From: didier.richard at ign.fr (RICHARD Didier)
Date: Tue Mar 16 16:32:54 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FC27D.3020604@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
Message-ID: <33399.87.231.96.39.1268770984.squirrel@webmail.ign.fr>


> Folks,
>
> Motion: To approve RFC 24 - GDAL Progressive Data Support.
>
>    http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
>
> --
>
> I've incorporated adjustments based on the feedback in the last few
> days, and now I'd like to move to formally adopt RFC 24.
>

+1

some questions for my understanding :

  * does it only aim at raster datasets async read (no vector dataset
support) ? whilst jpip at first is of great interest, it could be really
interesting to be able to read WFS streams for instance.
  * no write support foreseen ? (well, not sure it is relevant ...)

Sincerely,


didier

> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From warmerdam at pobox.com  Tue Mar 16 16:54:21 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 16 16:54:37 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <33399.87.231.96.39.1268770984.squirrel@webmail.ign.fr>
References: <4B9FC27D.3020604@pobox.com>
	<33399.87.231.96.39.1268770984.squirrel@webmail.ign.fr>
Message-ID: <4B9FEFFD.7010907@pobox.com>

RICHARD Didier wrote:
> +1
> 
> some questions for my understanding :
> 
>   * does it only aim at raster datasets async read (no vector dataset
> support) ? whilst jpip at first is of great interest, it could be really
> interesting to be able to read WFS streams for instance.

Didier,

The RFC does not attempt to address a similar capability in the OGR realm.

>   * no write support foreseen ? (well, not sure it is relevant ...)

I do not foresee write support.  While I can see value in asynchronous
writing, it does not that the concept of progressive update applies on
the write side.  I will note that writes are already cached rather than
being done synchronously, so we could do async writing right now without
changing the API if we just had a thread that flushed out writable blocks
without interfering with the main thread.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Mar 16 17:13:29 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 16 17:13:44 2010
Subject: [gdal-dev] Geodetic Problem
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
Message-ID: <4B9FF479.8030807@pobox.com>

David Baker (Geoscience) wrote:
> Frank and the List,
> 
>  
> 
> I have a geodetic problem I hope GDAL/OGR can solve.
> 
>  
> 
> The setup:
> 
>  
> 
> I have two radio towers each the same height and at the same elevation 
> being 10,000 meters apart.  I know the latitude and longitude of the 
> first tower and those coordinates reference WGS84 (though they could be 
> any geographic CRS, NAD27, NAD83, etc.).  I also now the baring to the 
> second from the first measured from true north at the first tower.
> 
>  
> 
> The problem:
> 
>  
> 
> Given the above information and using the prebuilt tools, GDAL/OGR 
> utilities, what workflow would one use to calculate the latitude and 
> longitude of the second tower?
> 
>  
> 
> The hints I have gotten so far say to use a conformal projection (UTM 
> maybe?) centered at the first point with a scale factor of 1, a local 
> projection.  Calculate the Cartesian offsets from the first point to the 
> second based on the azimuth of the given baring.  Using the baring 
> calculate the x and y offsets to the second point and use offsets to 
> find the x and y of the second point in the local coordinate system.  
> Then, reproject the x and y of the second point to the latitude and 
> longitude in the CRS of the first points latitude and longitude.  If 
> this is correct, I guess the question is, what would the proj4 
> parameters be for such a local projections.

David,

The above will give a pretty good approximation, degrading as the
distance increases.  However, the proper way to do this is using
great circle operations.  The PROJ.4 "geod" program can do this:

   http://trac.osgeo.org/proj/wiki/man_geod

There is more information on geodesic operations at:

   http://trac.osgeo.org/proj/wiki/GeodesicCalculations

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From aronrubin at gmail.com  Tue Mar 16 17:13:50 2010
From: aronrubin at gmail.com (Aron Rubin)
Date: Tue Mar 16 17:13:54 2010
Subject: [gdal-dev] Geodetic Problem
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
Message-ID: <c46d99051003161413s4bb28530weaab346698809c14@mail.gmail.com>

On 3/16/10, David Baker (Geoscience) <david.m.baker@chk.com> wrote:
> Frank and the List,
>
> I have a geodetic problem I hope GDAL/OGR can solve.
>

I have not seen the direct or inverse gedesic routines in either Proj
or OGR. SimGear provides an implementation here
<http://cvs.simgear.org/viewvc/source/simgear/math/SGGeodesy.cxx?root=SimGear&view=markup>
(function _geo_direct_wgs_84) and you could use OSRGetSemiMajor
OSRGetInvFlattening OSRGetSemiMinor for the "a", "rf", and "b"
variables respectively to use other ellipsoids assigned in OGR. Proj
wiki has notes here
<http://trac.osgeo.org/proj/wiki/GeodesicCalculations> which notes a
fortran implementation <http://www.ngs.noaa.gov/PC_PROD/Inv_Fwd/>.

Aron

-- 
Aron Rubin
Handy Husband & Daddy Jungle Gym & Senior Engineer
From didier.richard at ign.fr  Tue Mar 16 17:21:33 2010
From: didier.richard at ign.fr (RICHARD Didier)
Date: Tue Mar 16 17:30:24 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FEFFD.7010907@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
	<33399.87.231.96.39.1268770984.squirrel@webmail.ign.fr>
	<4B9FEFFD.7010907@pobox.com>
Message-ID: <34402.87.231.96.39.1268774493.squirrel@webmail.ign.fr>


> RICHARD Didier wrote:
>> +1
>>
>> some questions for my understanding :
>>
>>   * does it only aim at raster datasets async read (no vector dataset
>> support) ? whilst jpip at first is of great interest, it could be really
>> interesting to be able to read WFS streams for instance.
>
> Didier,
>
> The RFC does not attempt to address a similar capability in the OGR realm.
>
>>   * no write support foreseen ? (well, not sure it is relevant ...)
>
> I do not foresee write support.  While I can see value in asynchronous
> writing, it does not that the concept of progressive update applies on
> the write side.  I will note that writes are already cached rather than
> being done synchronously, so we could do async writing right now without
> changing the API if we just had a thread that flushed out writable blocks
> without interfering with the main thread.
>

Frank,

Thanks for the informations,

Sincerely,

didier

> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
RICHARD Didier - Chef du p?le technique du G?oportail
2/4, avenue Pasteur - 94165 Saint Mand? Cedex
T?l : +33 (0) 1 43 98 83 23
From ksshannon at gmail.com  Tue Mar 16 18:14:37 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Mar 16 18:15:46 2010
Subject: [gdal-dev] AIG -- Arc/Info Binary Grid color table does not support
	alpha?
Message-ID: <c28f2e141003161514w1f99b2b5hbb398d503fa5314b@mail.gmail.com>

I am doing a little work with the Arc/Info binary grids and noticed that the
AIGDataset::TranslateColorTable doesn't allow for an alpha channel in the
color table.  I checked the format documentation on
gdal.org/formats_list.html and didn't see any reference to colormaps.  Does
anyone know if the format has this restriction, or where I could look to
find out more?  Thanks.

kss

# ============================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)829-6954
kshannon@fs.fed.us
# ============================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100316/71e2d948/attachment-0001.html
From jukka.rahkonen at mmmtike.fi  Tue Mar 16 18:23:39 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Mar 16 18:24:00 2010
Subject: [gdal-dev] Re: gdalwarp with JPEG not working?
References: <1268748518249-4743823.post@n2.nabble.com>
Message-ID: <loom.20100316T231338-59@post.gmane.org>

Ian Dees <ian.dees <at> gmail.com> writes:

> 
> 
> I am attempting to warp a JPG/JPW file pair to a TIFF using the following
> command: 
> 
> $ gdalwarp -t_srs EPSG:4326
> EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg
> EUSC_20100222_Portugal_Madeira_flood_Funchal01_high.jpg_warped.tif 

Hi,

Not directly related to your question, but I believe your command needs some
tuning.  You are giving -t_srs but you should give also -s_srs because jpg/jgw
pair does not tell the original projection. I guess also that your aim is to use
the warped image with Mapserver WMS. If that is the case I would recommend to
create a tiled tiff with -co TILED=YES option.

-Jukka Rahkonen-

From david.m.baker at chk.com  Tue Mar 16 19:25:10 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Tue Mar 16 19:25:14 2010
Subject: [gdal-dev] Geodetic Problem
In-Reply-To: <4B9FF479.8030807@pobox.com>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
	<4B9FF479.8030807@pobox.com>
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B827@OKCEXHPRD007.chkenergy.net>

Frank,

Thanks for the references...  I will look them over.  I am correct that the c# binding will not have access to the Geod calc's?

David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tuesday, March 16, 2010 4:13 PM
To: David Baker (Geoscience)
Cc: 'gdal-dev@lists.osgeo.org'
Subject: Re: [gdal-dev] Geodetic Problem

David Baker (Geoscience) wrote:
> Frank and the List,
>
>
>
> I have a geodetic problem I hope GDAL/OGR can solve.
>
>
>
> The setup:
>
>
>
> I have two radio towers each the same height and at the same elevation
> being 10,000 meters apart.  I know the latitude and longitude of the
> first tower and those coordinates reference WGS84 (though they could be
> any geographic CRS, NAD27, NAD83, etc.).  I also now the baring to the
> second from the first measured from true north at the first tower.
>
>
>
> The problem:
>
>
>
> Given the above information and using the prebuilt tools, GDAL/OGR
> utilities, what workflow would one use to calculate the latitude and
> longitude of the second tower?
>
>
>
> The hints I have gotten so far say to use a conformal projection (UTM
> maybe?) centered at the first point with a scale factor of 1, a local
> projection.  Calculate the Cartesian offsets from the first point to the
> second based on the azimuth of the given baring.  Using the baring
> calculate the x and y offsets to the second point and use offsets to
> find the x and y of the second point in the local coordinate system.
> Then, reproject the x and y of the second point to the latitude and
> longitude in the CRS of the first points latitude and longitude.  If
> this is correct, I guess the question is, what would the proj4
> parameters be for such a local projections.

David,

The above will give a pretty good approximation, degrading as the
distance increases.  However, the proper way to do this is using
great circle operations.  The PROJ.4 "geod" program can do this:

   http://trac.osgeo.org/proj/wiki/man_geod

There is more information on geodesic operations at:

   http://trac.osgeo.org/proj/wiki/GeodesicCalculations

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From david.m.baker at chk.com  Tue Mar 16 19:25:40 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Tue Mar 16 19:25:43 2010
Subject: [gdal-dev] Geodetic Problem
In-Reply-To: <c46d99051003161413s4bb28530weaab346698809c14@mail.gmail.com>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
	<c46d99051003161413s4bb28530weaab346698809c14@mail.gmail.com>
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B828@OKCEXHPRD007.chkenergy.net>

Aron,

Thanks for the info...

David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com


-----Original Message-----
From: Aron Rubin [mailto:aronrubin@gmail.com]
Sent: Tuesday, March 16, 2010 4:14 PM
To: David Baker (Geoscience)
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Geodetic Problem

On 3/16/10, David Baker (Geoscience) <david.m.baker@chk.com> wrote:
> Frank and the List,
>
> I have a geodetic problem I hope GDAL/OGR can solve.
>

I have not seen the direct or inverse gedesic routines in either Proj
or OGR. SimGear provides an implementation here
<http://cvs.simgear.org/viewvc/source/simgear/math/SGGeodesy.cxx?root=SimGear&view=markup>
(function _geo_direct_wgs_84) and you could use OSRGetSemiMajor
OSRGetInvFlattening OSRGetSemiMinor for the "a", "rf", and "b"
variables respectively to use other ellipsoids assigned in OGR. Proj
wiki has notes here
<http://trac.osgeo.org/proj/wiki/GeodesicCalculations> which notes a
fortran implementation <http://www.ngs.noaa.gov/PC_PROD/Inv_Fwd/>.

Aron

--
Aron Rubin
Handy Husband & Daddy Jungle Gym & Senior Engineer

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From aronrubin at gmail.com  Wed Mar 17 01:28:31 2010
From: aronrubin at gmail.com (Aron Rubin)
Date: Wed Mar 17 01:28:54 2010
Subject: [gdal-dev] GDAL Progressive Data Support RFC Discussion
In-Reply-To: <4B9FEAB1.5070106@pobox.com>
References: <4B99943B.4010007@pobox.com>
	<f3b73b7d1003130804n49e356dbnb3509877c96e8d45@mail.gmail.com> 
	<c46d99051003161315m4ae70f07r5ff007c7990a16d1@mail.gmail.com> 
	<4B9FEAB1.5070106@pobox.com>
Message-ID: <c46d99051003162228y2c354b9cu7759e89c7aa06703@mail.gmail.com>

On Tue, Mar 16, 2010 at 4:31 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> With regard to the fixed vs. mixed resolution results, it is true
> that the current API provides no mechanism to request particular
> levels of completeness, such as passes in an interleaved progressive
> display.  I imagine this issue was not addressed in part because
> it has no applicability to the JPIP case.  I'm not at all clear on
> how important it is.
>

You might have guessed that it a technique I use in my own applications.
This could also allow notification for tile/block completion among other
things. I am not sure how JPIP is implemented in GDAL but it seems that only
a fixed window and resolution are allowed at a time I am not sure if the
image data itself can be progressive. However JPEG (maybe JPEG in Tiff?) and
PNG support progressive data. Loading a GeoTiff I would want to know when a
tile read was complete.

>
> I still didn't quite grasp why an event/callback approach is better
> than GetNextUpdateRegion() style polling to handle distinct levels
> of completeness, nor what you mean by mangaging the I/O budget.


The timeout passed to GetNextUpdateRegion is abstractly thought of as an I/O
budget. In this case it is constrained in time. On a related note the RFC
does not specify when GetNextUpdateRegion would return besides the
expiration of the timeout and end of stream.

 2. There is no consideration or mention of how this would work with
> user managed I/O if that ever happens. I would like to eventually see
> a GDAL/OGR user managed I/O in both push and pull forms. Asynchronous
> I/O and user managed I/O have implications for each other.
>

I'm not sure what you mean by user managed I/O.  Do you mean applications
> providing their own low level IO handlers - for instance to the VSI*L
> layer?  I'm not sure I see the relationship between the progressive data
> api and managing IO.
>

Right, I mean when the user feeds data (push) to a driver or a I/O handling
object (pull) like VSIVirtualHandle (preferably with a C interface). This
would interact with async I/O because it would affect the I/O state and
enable a graceful read interruption. For example if a synchronous read does
not return the expected number of bytes in the current GDAL my guess is that
would cause an error condition. In an asynchronous read there is no
completion expectation so a PENDING could be returned. That type of behavior
was not captured in the RFC.


> I appreciate your feedback though I am concerned that you are raising
> pretty fundamental changes in the implementation.  I'd want pretty
> compelling reasoning to start over.


I don't think a rewrite is at all required to implement some of these
suggestions. If it would be helpful for me to demonstrate how to derive the
same GetNextUpdateRegion interface from a callback style interface.

Aron

-- 
Aron Rubin
Handy Husband & Daddy Jungle Gym & Senior Engineer
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100317/0c6fbcde/attachment.html
From mail at andreas-joisten.de  Wed Mar 17 06:50:06 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Wed Mar 17 06:50:08 2010
Subject: [gdal-dev] Does gdalwarp support a horizontal flipping for a raster
	image?
Message-ID: <20100317105006.7985A1263DF@dd2010.kasserver.com>

Hi all,

Does gdalwarp support a horizontal flipping for a raster image?

Thanks for your help






From jukka.rahkonen at mmmtike.fi  Wed Mar 17 07:49:27 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Mar 17 07:49:40 2010
Subject: [gdal-dev] Re: Does gdalwarp support a horizontal flipping for a
	raster	image?
References: <20100317105006.7985A1263DF@dd2010.kasserver.com>
Message-ID: <loom.20100317T124129-670@post.gmane.org>

Andreas Joisten <mail <at> andreas-joisten.de> writes:

 
> Hi all,
> Does gdalwarp support a horizontal flipping for a raster image?

I doubt it really supports flipping but you can fool it by falsifying the
worldfile.  Original tfw:
9.59221863494081
0.0
0.0
-9.59221863494081
3410565.2630452723
6886078.998445481

North coordinate made to grow downwards

9.59221863494081
0.0
0.0
9.59221863494081
3410565.2630452723
6886078.998445481

gdalwarp fliptest.tif fliptest2.tif

Fliptest2.tif is upside down.

-Jukka Rahkonen-

From frederik at remote.org  Wed Mar 17 08:17:48 2010
From: frederik at remote.org (Frederik Ramm)
Date: Wed Mar 17 08:37:34 2010
Subject: [gdal-dev] writing DWG/DXF
Message-ID: <4BA0C86C.8000105@remote.org>

Hi,

    I want to convert shape files into DWG or DXF. (And I do not have 
ArcView, nor Windows, available.)

I've been reading the lists and found information on a "spike" branch of 
ogr2ogr which is supposed to be able to write DWG/DXF files. In the 
readme it says

"The ability to write DXF and DWG is only available when OGR is linked 
against the DWGdirect library provided by the Open Design Alliance. 
Note that the DWGdirect library is not open source, though the license 
terms are not terribly draconian."

The GDAL wiki says:

"The DXFDWG driver is currently a write-only driver dependent on the 
Open Design Alliance DWGdirect libraries for writing to the DWG and DXF 
formats. The DWGdirect library is not open source, though it is offered 
under fairly permissive terms."

Now as far as I can see, nothing works without the DWGdirect library, 
and unless you are associated with an educational institution and are 
willing to sign and fax lots of forms to confirm that, the only way to 
get your hands on that library is to become an "Associated Member" of 
the ODA and pay them US$250 (for the first year), and that does not even 
include a license to distribute the library.

Are these the "fairly permissive terms" mentioned above - or have I 
overlooked some easy and free-of-charge way of downloading the library 
(or a statically linked ogr2ogr)?

Cheers
Frederik




From bartvde at osgis.nl  Wed Mar 17 08:39:45 2010
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Wed Mar 17 08:46:26 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <4BA0C86C.8000105@remote.org>
References: <4BA0C86C.8000105@remote.org>
Message-ID: <15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>

Hi,

there is a new driver that does not have this dependency:

http://fwarmerdam.blogspot.com/2009/12/ogr-dxf-driver.html

Best regards,
Bart

> Hi,
>
>     I want to convert shape files into DWG or DXF. (And I do not have
> ArcView, nor Windows, available.)
>
> I've been reading the lists and found information on a "spike" branch of
> ogr2ogr which is supposed to be able to write DWG/DXF files. In the
> readme it says
>
> "The ability to write DXF and DWG is only available when OGR is linked
> against the DWGdirect library provided by the Open Design Alliance.
> Note that the DWGdirect library is not open source, though the license
> terms are not terribly draconian."
>
> The GDAL wiki says:
>
> "The DXFDWG driver is currently a write-only driver dependent on the
> Open Design Alliance DWGdirect libraries for writing to the DWG and DXF
> formats. The DWGdirect library is not open source, though it is offered
> under fairly permissive terms."
>
> Now as far as I can see, nothing works without the DWGdirect library,
> and unless you are associated with an educational institution and are
> willing to sign and fax lots of forms to confirm that, the only way to
> get your hands on that library is to become an "Associated Member" of
> the ODA and pay them US$250 (for the first year), and that does not even
> include a license to distribute the library.
>
> Are these the "fairly permissive terms" mentioned above - or have I
> overlooked some easy and free-of-charge way of downloading the library
> (or a statically linked ogr2ogr)?
>
> Cheers
> Frederik
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


From frederik at remote.org  Wed Mar 17 09:02:55 2010
From: frederik at remote.org (Frederik Ramm)
Date: Wed Mar 17 09:03:04 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <4BA0D2FF.4040303@remote.org>

Bart,

bartvde@osgis.nl wrote:
> there is a new driver that does not have this dependency:
> http://fwarmerdam.blogspot.com/2009/12/ogr-dxf-driver.html

Thanks for pointing this out, I was not aware of the development. But 
that is a read-only driver, is it not?

Bye
Frederik

From bartvde at osgis.nl  Wed Mar 17 09:07:07 2010
From: bartvde at osgis.nl (bartvde@osgis.nl)
Date: Wed Mar 17 09:07:33 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <4BA0D2FF.4040303@remote.org>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
	<4BA0D2FF.4040303@remote.org>
Message-ID: <51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>

Hi,

I believe it also writes:

http://svn.osgeo.org/gdal/trunk/gdal/ogr/ogrsf_frmts/dxf/drv_dxf.html

"DXF files are written in AutoCAD 2000 format."

Best regards,
Bart

> Bart,
>
> bartvde@osgis.nl wrote:
>> there is a new driver that does not have this dependency:
>> http://fwarmerdam.blogspot.com/2009/12/ogr-dxf-driver.html
>
> Thanks for pointing this out, I was not aware of the development. But
> that is a read-only driver, is it not?
>
> Bye
> Frederik
>
>


From gispowerfan at gmail.com  Wed Mar 17 09:46:36 2010
From: gispowerfan at gmail.com (gisfans gisfans)
Date: Wed Mar 17 09:46:42 2010
Subject: [gdal-dev] question about overview?
Message-ID: <f91261f01003170646n3e29e9bbg2bfffe2d8deffe54@mail.gmail.com>

hi,

    Recently I  am writing  a driver(such as driver_a) for GDAL, and the
driver need overview function. there are a question about
band::IReadBlock(int nBlockXOff, int BlockYOff, void *pImage), you know  the
memory of pImage is malloced in the gdal core code such  as  new datablock
function, gdal has buildin cache management, and Its size is corresponding
overview band size, for example, origin image is 512*512, block size is
256,256, I need to get the 3rd layer of pyramid, in fact, the overview level
3 of the image is 128*128, so the memory of pImage is128*128*byte, but the
standard block of my program is 256*256, in  the function of
band::IReadBlock(), I need to adjust the size of pixel data, such as

if ( blockcol<nColumnBlockSize || blockrow<nRowBlockSize )
{
....
}

memcpy( pImage , pabyBlockBuf, nGDALBlockBytes );

and copy the pabyBlockBuf into PImage, but now the PImage is 128*128, and
pabyBlockBuf is 256*256, so there are some mistakes. and suggestion?

gispowerfan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100317/49035c66/attachment.html
From smith.todd at gmail.com  Wed Mar 17 11:45:59 2010
From: smith.todd at gmail.com (Todd Smith)
Date: Wed Mar 17 11:46:23 2010
Subject: [gdal-dev] JPEG2000 question
Message-ID: <3bfcc5b71003170845m7153efbw439a47f058f898d7@mail.gmail.com>

 Hello,

I am investigating adding JPEG2000 in addition to the other compression
schemes we use internally in our software, and I was wondering if anyone had
some information about which of the JPEG2000 implementations offers the best
performance in GDAL, and additionally, on its own generally. We have two
different scenarios where we would want to use the library with GDAL and
separate from it. As I googled this, my impression was that Kakadu was
generally considered to perform well, and was what other libraries were
compared to. So I guess I'll just get specific and hope that the group has
some insights :)

- In and out of GDAL, compare the performance of the different JPEG2000
libraries against each other. Which can decompress/compress the fastest? I
don't have to worry about moving any of the data over a network during
compression/decompression, so all I'm really asking is, if I have a big
beefy machine, which library will process the data the fastest?

- What about plain old ECW vs JPEG2000 (.ecw vs .jp2)? Again, which performs
faster for compression/decompression?

- As we investigate alternatives to JPEG and ZLIB compression (because we
like the compression sizes we get with jpeg, but we like the quality of
zlib, and yeah I know I'm comparing lossy vs. lossless so it's not a fair
comparison but...) what other compression formats would any of you recommend
that offer at least a 6 to 1 compression ratio, but also process very
quickly (inside and outside of GDAL).

Thanks for any help,

Todd
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100317/f6eba1eb/attachment.html
From jrepetto at free.fr  Wed Mar 17 12:44:57 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Mar 17 12:45:04 2010
Subject: [gdal-dev] Geodetic Problem
In-Reply-To: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
Message-ID: <4BA10709.8080905@free.fr>

David Baker (Geoscience) a ?crit :
> 
> Given the above information and using the prebuilt tools, GDAL/OGR 
> utilities, what workflow would one use to calculate the latitude and 
> longitude of the second tower?
> 

Hello David,

Maybe the "geod" utility from the GeographicLib can solve your problem :
<http://geographiclib.sourceforge.net/html/utilities.html#geod>

Jean-Claude
From david.m.baker at chk.com  Wed Mar 17 14:17:11 2010
From: david.m.baker at chk.com (David Baker (Geoscience))
Date: Wed Mar 17 14:17:15 2010
Subject: [gdal-dev] Geodetic Problem
In-Reply-To: <4BA10709.8080905@free.fr>
References: <E3B01AE590420B45B38B00C9A8B23FDB4AA442B752@OKCEXHPRD007.chkenergy.net>
	<4BA10709.8080905@free.fr>
Message-ID: <E3B01AE590420B45B38B00C9A8B23FDB4AA442BA79@OKCEXHPRD007.chkenergy.net>

Jean-Claude,

I have looked at that and not being a c++ guys did not really know how to recompile geographiclib into a dll that I could then pinvoke into C#.  I did find http://www.gavaghan.org/blog/free-source-code/geodesy-library-vincentys-formula/ that looks like it will do the trick.

The application I am working on takes deviation survey station readings (wellbore measured depth from the wells surface location, wellbore inclination from vertical and wellbore azimuth from true or grid north) recorded in horizontal wellbores, and using a minimum curvature calculation calculates the x, y and z (x and y are relative to the azimuth reference and z is true vertical depth) offsets of each survey station along the wellbore path.  I need to calculate the latitude and longitude of each of these points.

Thanks for the reference.

David

David M. Baker
Senior Geologist - Chief Technology Advisor
Chesapeake Energy Corporation
405-935-3715 office
405-496-5373 cell
david.m.baker@chk.com

-----Original Message-----
From: Jean-Claude REPETTO [mailto:jrepetto@free.fr]
Sent: Wednesday, March 17, 2010 11:45 AM
To: David Baker (Geoscience)
Cc: 'gdal-dev@lists.osgeo.org'
Subject: Re: [gdal-dev] Geodetic Problem

David Baker (Geoscience) a ?crit :
>
> Given the above information and using the prebuilt tools, GDAL/OGR
> utilities, what workflow would one use to calculate the latitude and
> longitude of the second tower?
>

Hello David,

Maybe the "geod" utility from the GeographicLib can solve your problem :
<http://geographiclib.sourceforge.net/html/utilities.html#geod>

Jean-Claude

This email (and attachments if any) is intended only for the use of the individual or entity to which it is addressed, and may contain information that is privileged, confidential and exempt from disclosure under applicable law.  If the reader of this email is not the intended recipient, or the employee or agent responsible for delivering this message to the intended recipient, you are hereby notified that any dissemination, distribution or copying of this communication is strictly prohibited.  If you have received this communication in error, please notify the sender immediately by return email and destroy all copies of the email (and attachments if any).
From a.neumann at carto.net  Wed Mar 17 15:06:34 2010
From: a.neumann at carto.net (Andreas Neumann)
Date: Wed Mar 17 15:07:04 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
References: <4BA0C86C.8000105@remote.org>	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>	<4BA0D2FF.4040303@remote.org>
	<51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <4BA1283A.4000004@carto.net>

Hi,

yes - it is a read/write driver.

Since there are so many dxf variations out there reading may not be 
supported for all files. Also there are some issues with reading (e.g. 
block references, maybe some text issues). Curves and Splines are 
segmented on reading the dxf. An application that reads dxf needs to be 
able to deal with multiple geometry formats at once - e.g. mixed 
linestrings/point/text/polygon.

DWG reading is not supported by this reader, since DWG is not well 
documented (at least not in the public) and a binary format.

It would be good if you could test and report issues.

Regarding writing:
* OGRFeatureStyling is supported partially (at least pen colors work, 
dashes I think not)
* currently there is no way to write to more than one layer
* again issues with block references

There will be further work on this provider. If you (or someone else) 
would have some money for improvements it would help as well.

Best,
Andreas

bartvde@osgis.nl wrote:
> Hi,
>
> I believe it also writes:
>
> http://svn.osgeo.org/gdal/trunk/gdal/ogr/ogrsf_frmts/dxf/drv_dxf.html
>
> "DXF files are written in AutoCAD 2000 format."
>
> Best regards,
> Bart
>
>   
>> Bart,
>>
>> bartvde@osgis.nl wrote:
>>     
>>> there is a new driver that does not have this dependency:
>>> http://fwarmerdam.blogspot.com/2009/12/ogr-dxf-driver.html
>>>       
>> Thanks for pointing this out, I was not aware of the development. But
>> that is a read-only driver, is it not?
>>
>> Bye
>> Frederik
>>
>>
>>     
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>   

From robert.coup at onetrackmind.co.nz  Wed Mar 17 17:04:26 2010
From: robert.coup at onetrackmind.co.nz (Robert Coup)
Date: Wed Mar 17 17:11:49 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <4BA0C86C.8000105@remote.org>
References: <4BA0C86C.8000105@remote.org>
Message-ID: <c5097ac41003171404o66a72990md85971924b65cda7@mail.gmail.com>

On Thu, Mar 18, 2010 at 1:17 AM, Frederik Ramm <frederik@remote.org> wrote:
>
> "The ability to write DXF and DWG is only available when OGR is linked
> against the DWGdirect library provided by the Open Design Alliance. Note
> that the DWGdirect library is not open source, though the license terms are
> not terribly draconian."

Becoming an associate member of ODA used to be free, and binaries of
the DWGdirect libraries were then available for internal  use. It's
only in the last couple of years they've introduced a charge, but I
think they're happy to make FOSS users members. I guess the doc page
needs updating.

Rob :)
From John.C.Cartwright at noaa.gov  Wed Mar 17 16:22:01 2010
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Mar 17 17:22:03 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
Message-ID: <4BA139E9.6020601@noaa.gov>

Hello All,

I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
successfully and have included the following in my configure statement
for gdal:

  --with-hdf5=/usr/local/contrib/hdf5-1.8.4

However, configure complains that:

checking for SDreaddata in -lmfhdfalt... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lmfhdf... no
checking for H5Fopen in -lhdf5... no
configure: error: HDF5 support requested with arg
/usr/local/contrib/hdf5-1.8.4, but no hdf5 lib found


I don't understand this since the library seems to be present:

[jcc@lion gdal-1.7.1]$ ls -l /usr/local/contrib/hdf5-1.8.4/lib
total 6488
-rw-r--r-- 1 jcc eds 6413146 Mar 17 11:44 libhdf5.a
-rw-r--r-- 1 jcc eds  196564 Mar 17 11:44 libhdf5_hl.a
-rwxr-xr-x 1 jcc eds     939 Mar 17 11:44 libhdf5_hl.la
-rwxr-xr-x 1 jcc eds     930 Mar 17 11:44 libhdf5.la
-rw-r--r-- 1 jcc eds    2891 Mar 17 11:44 libhdf5.settings

Can someone please help me with what the problem is here?

Thanks!

--john

From nbarker at ittvis.com  Wed Mar 17 17:03:12 2010
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Mar 17 17:40:49 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FC27D.3020604@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
Message-ID: <B1B624F7C110834B96594065A74F3A540D016D26@gemini.rsinc.com>

Frank,

Did I get approved for commit writes for GDAL trunk, if so +1.

Norman 

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam
Sent: Tuesday, March 16, 2010 11:40 AM
To: gdal-dev
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data
Support

Folks,

Motion: To approve RFC 24 - GDAL Progressive Data Support.

   http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support

--

I've incorporated adjustments based on the feedback in the last few
days, and now I'd like to move to formally adopt RFC 24.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From antonio.valentino at tiscali.it  Thu Mar 18 03:57:38 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Thu Mar 18 03:59:10 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
In-Reply-To: <4BA139E9.6020601@noaa.gov>
References: <4BA139E9.6020601@noaa.gov>
Message-ID: <20100318085738.5bbc75de@asigrid01>

Hi John,

Il giorno Wed, 17 Mar 2010 14:22:01 -0600
John Cartwright <John.C.Cartwright@noaa.gov> ha scritto:

> Hello All,
> 
> I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
> hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
> successfully and have included the following in my configure statement
> for gdal:
> 
>   --with-hdf5=/usr/local/contrib/hdf5-1.8.4

not sure, but maybe you should use something like

  --with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5-1.8.4/lib


best regards

-- 
Antonio Valentino
From schut at sarvision.nl  Thu Mar 18 03:50:54 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Thu Mar 18 04:08:35 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
In-Reply-To: <4BA139E9.6020601@noaa.gov>
References: <4BA139E9.6020601@noaa.gov>
Message-ID: <4BA1DB5E.70002@sarvision.nl>

On 03/17/2010 09:22 PM, John Cartwright wrote:
> Hello All,
>
> I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
> hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
> successfully and have included the following in my configure statement
> for gdal:
>
>    --with-hdf5=/usr/local/contrib/hdf5-1.8.4
>
> However, configure complains that:
>
> checking for SDreaddata in -lmfhdfalt... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lhdf4... no
> checking for SDreaddata in -lmfhdf... no
> checking for SDreaddata in -lmfhdf... no
> checking for H5Fopen in -lhdf5... no
> configure: error: HDF5 support requested with arg
> /usr/local/contrib/hdf5-1.8.4, but no hdf5 lib found
>
>
> I don't understand this since the library seems to be present:
>
> [jcc@lion gdal-1.7.1]$ ls -l /usr/local/contrib/hdf5-1.8.4/lib
> total 6488
> -rw-r--r-- 1 jcc eds 6413146 Mar 17 11:44 libhdf5.a
> -rw-r--r-- 1 jcc eds  196564 Mar 17 11:44 libhdf5_hl.a
> -rwxr-xr-x 1 jcc eds     939 Mar 17 11:44 libhdf5_hl.la
> -rwxr-xr-x 1 jcc eds     930 Mar 17 11:44 libhdf5.la
> -rw-r--r-- 1 jcc eds    2891 Mar 17 11:44 libhdf5.settings
>
> Can someone please help me with what the problem is here?
>    
Well, have you tried with 
"--with-hdf5=/usr/local/contrib/hdf5-1.8.4/lib"? As that seems to be the 
dir where the configure script searches for the library files.

Vincent.
> Thanks!
>
> --john
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    
From jukka.rahkonen at mmmtike.fi  Thu Mar 18 06:46:25 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Thu Mar 18 06:46:44 2010
Subject: [gdal-dev] Re: JPEG2000 question
References: <3bfcc5b71003170845m7153efbw439a47f058f898d7@mail.gmail.com>
Message-ID: <loom.20100318T105043-737@post.gmane.org>

Todd Smith <smith.todd <at> gmail.com> writes:


> - In and out of GDAL, compare the performance of the different JPEG2000
libraries against each other. Which can decompress/compress the fastest? I don't
have to worry about moving any of the data over a network during
compression/decompression, so all I'm really asking is, if I have a big beefy
machine, which library will process the data the fastest?

To give a somewhat reliable answer to your question would mean a lot of planning
and hard, controlled work. I hope somebody will do it some day and report it.
While JPEG and ECW have mainly one user selectable parameter, compression
quality, JPEG2000 is an extraordinary complicated format because of the huge
amount of options it has. Therefore your question should be formatted as 

"Which can decompress/compress the fastest an image with these parameters:
Big Image Tiled (2bpp) 13,333x13,333 (full RGB) 1024x1024 tiles, RPCL, W9x7,
Clayers=5, Clevels=6, Cblk={64,64}, Cprecincts={256,256}"

Parameters are copied from these online documents:
http://www.kakadusoftware.com/documents/kakadu-encode-speed.pdf
http://www.kakadusoftware.com/documents/kakadu-decode-speed.pdf
 
> - What about plain old ECW vs JPEG2000 (.ecw vs .jp2)? Again, which performs
faster for compression/decompression?

ECW vs which kind of JPEG2000? However, ecw is rather standard and we can guess
that the late ERMapper was aiming to rather similar result with its own JPEG2000
compressor. I have an "ECW JPEG 2000 Compressor 7.0" from the ER Mapper time on
my machine and it is faster with ECW than with JPEG2000. Still I can only say
that ER Mapper ECW is faster that ER Mapper JPEG2000. I have a feeling that
Kakadu JPEG2000 is faster than ER Mapper JPEG2000 but I cannot run ER Mapper
JPEG2000 with my favourite Kakadu parameters.

> - As we investigate alternatives to JPEG and ZLIB compression (because we like
the compression sizes we get with jpeg, but we like the quality of zlib, and
yeah I know I'm comparing lossy vs. lossless so it's not a fair comparison
but...) what other compression formats would any of you recommend that offer at
least a 6 to 1 compression ratio, but also process very quickly (inside and
outside of GDAL).

There are for sure other fine JPEG2000 utilities around, but I know best the
free demo programs from Kakadu. Have a try by compressing some reasonable sized
test image, 500 MB or so, to lossless JPEG2000 with kdu_compress and open it
with kdu_show viewer. This test should give some idea about the speed of
compressing and browsing JPEG2000 imagery when done properly. Reading the
Usage_Examples.txt file and checking all the options supported by kdu_compress
will affirm that JPEG200 really is a complicated beast.

By the way, we compress aerial images (1000 by 10000 pixels) for archive with
these parameters, they should be quite good for interactive viewing and serving
through JPIP as well. Result is lossless, naturally.

-rate - Clevels=7 Clayers=27 Creversible=yes Cycc=yes
Cprecincts={256,256},{128,128} Corder=RPCL Cblk={32,32} ORGgen_plt=yes
ORGtparts=R ORGgen_tlm=8 -cpu 0 -mem

-Jukka Rahkonen-

From frederik at remote.org  Thu Mar 18 06:47:42 2010
From: frederik at remote.org (Frederik Ramm)
Date: Thu Mar 18 06:47:50 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <4BA1283A.4000004@carto.net>
References: <4BA0C86C.8000105@remote.org>	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>	<4BA0D2FF.4040303@remote.org>
	<51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
	<4BA1283A.4000004@carto.net>
Message-ID: <4BA204CE.6000604@remote.org>

Hi,

Andreas Neumann wrote:
> yes - it is a read/write driver.

I have meanwhile checked out and tried it successfully. My use case is 
taking shape files with geodata (road networks, railway, land use etc) 
and converting them to DXF for a client of mine. I created a set of DXF 
files from my shapes and checked them in QCAD.

Sadly I only get geometries, no extra attributes ("DXF layer does not 
support arbitrary field creation."). I can work around this by creating 
one shape file for every type of feature, but I'll never get something 
like street names that way.

> There will be further work on this provider. If you (or someone else) 
> would have some money for improvements it would help as well.

Is not being able to convert something like a street name a fundamental 
problem of DXF, or is this something that could be implemented for a 
client willing to part with some money?

Bye
Frederik
From j.l.h.hartmann at uva.nl  Thu Mar 18 07:04:28 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Mar 18 07:04:35 2010
Subject: [gdal-dev] gdal --with-php
In-Reply-To: <15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
Message-ID: <4BA208BC.4050106@uva.nl>

Hi all,

What is the status of the php-bindings for gdal (./configure 
--with-php)? I found a message from Frank (2006) stating that it is not 
well supported 
(http://lists.osgeo.org/pipermail/gdal-dev/2006-March/008258.html), but 
that there are php-bindings for OGR, developed by DMSolutions 
(http://dl.maptools.org/dl/php_ogr/). The last version of those dates 
from a few months ago. Does something like that exist for GDAL? At the 
moment I am calling the GDAL utilities with exec-calls, but that is not 
really optimal, of course.

Jan
From thanhvu.le at univ-pau.fr  Thu Mar 18 09:46:27 2010
From: thanhvu.le at univ-pau.fr (tle)
Date: Thu Mar 18 09:46:30 2010
Subject: [gdal-dev] RasterIO decimation question ?
Message-ID: <1268919987853-4756535.post@n2.nabble.com>


Hi,

I'm writing a terrain visualization prototype and I'm using GDAL for reading
DEM data (GeoTif format without compressing and overview)
When the source and destination image dimension are different, I have
noticed a small translation of destination image to the left and bottom when
the dimension is getting smaller and smaller.
I have written a test program to find out what happened

This is an example of how i did :
Here is my source image with only 4x4 pixels :
0,0    1,0    2,0    3,0
0,1    1,1    2,1    3,1
0,2    1,2    2,2    3,2
0,3    1,3    2,3    3,3

By performing a rasterIO with destination dimension = 4, I got :
0,0    1,0    2,0    3,0
0,1    1,1    2,1    3,1
0,2    1,2    2,2    3,2
0,3    1,3    2,3    3,3
which is normal

Now I keep the same view and reduce the destination by haft (destination
dimension = 2), I got :
1,1    3,1
1,3    3,3

And with destination dimenstion = 1 :
2,2

Those results explain why my image is translating to right and bottom 
when reducing the destination size

I would like to know if it is because of decimation process (nearest
neighbor) ?
In this case the returned result should be like this :
For destination dimension = 2 :
0,0    2,0
0,2    2,2

And with destination dimension = 1 :
0,0

If it is not how it should work I would like to know where and how I could
make changes to keep the first line and column in the returned image ?
Should i inherit GDALRasterBand and make some changes in RasterIO function ?
It is important for my height field rendering application.

Best regards,

P/S : My test program is in C++, I could send it here if it is necessary

-- 
View this message in context: http://n2.nabble.com/RasterIO-decimation-question-tp4756535p4756535.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From randyqiuxy at hotmail.com  Thu Mar 18 10:12:34 2010
From: randyqiuxy at hotmail.com (Randy)
Date: Thu Mar 18 10:14:44 2010
Subject: [gdal-dev] GDAL/OGR is available on embedded platform?
Message-ID: <BLU0-SMTP9A88CAD1B566B46029062C32B0@phx.gbl>

Hi list,
I'm going to do something about graphic display on an embedded platform
(such as ARM) which needs GDAL/OGR to read the file.
But I'm not very sure it's available on embedded platform.Has anyone
done something like this?Any hint?
Thanks for your time!

Best regards,
Randy 

From CHaste at airdata.co.uk  Thu Mar 18 10:31:39 2010
From: CHaste at airdata.co.uk (Chris Haste)
Date: Thu Mar 18 10:31:43 2010
Subject: [gdal-dev] gdalinfo error 4
Message-ID: <6AED4720540426409658F48F77981AB30595A6C4@MIA-WEX-V03.wfs.com>

Hi Frank and list,

I am very new to gdal and seem to have a problem that I wasn't expecting.

I have a GRIB1 file that represents wind and temperature data. It was issued by the UK Met Office and contains GRIB bulletins wrapped in the WMO bulletin distribution envelope.

When I run gdalinfo (1.7.1) against this file I get the following error:
ERROR:  Couldn't find 'GRIB' or 'TDLP'
There were 4 trailing bytes in the file.
ERROR 4: SADISGrib1-0000-T+6.grb is a grib file, but no raster dataset was successfully identified.
Gdalinfo failed - unable to open 'SADISGrib1-0000-T+6.grb'.

Can anyone throw some light on this please?

I can attach the file if needed.

Thanks in advance,

Chris

*** This communication has been sent from World Fuel Services 
Corporation or its subsidiaries or its affiliates for the intended recipient 
only and may contain proprietary, confidential or privileged information. 
If you are not the intended recipient, any review, disclosure, copying, 
use, or distribution of the information included in this communication 
and any attachments is strictly prohibited. If you have received this 
communication in error, please notify us immediately by replying to this 
communication and delete the communication, including any 
attachments, from your computer. Electronic communications sent to or 
from World Fuel Services Corporation or its subsidiaries or its affiliates 
may be monitored for quality assurance and compliance purposes.***

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100318/e470e6e1/attachment.html
From warmerdam at pobox.com  Thu Mar 18 10:27:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 18 10:34:57 2010
Subject: [gdal-dev] RasterIO decimation question ?
In-Reply-To: <1268919987853-4756535.post@n2.nabble.com>
References: <1268919987853-4756535.post@n2.nabble.com>
Message-ID: <931f8ea91003180727i63dedbcbt397f66efd2e3e406@mail.gmail.com>

On Thu, Mar 18, 2010 at 9:46 AM, tle <thanhvu.le@univ-pau.fr> wrote:
>
> Hi,
>
> I'm writing a terrain visualization prototype and I'm using GDAL for reading
> DEM data (GeoTif format without compressing and overview)
> When the source and destination image dimension are different, I have
> noticed a small translation of destination image to the left and bottom when
> the dimension is getting smaller and smaller.
> I have written a test program to find out what happened
>
> This is an example of how i did :
> Here is my source image with only 4x4 pixels :
> 0,0 ? ?1,0 ? ?2,0 ? ?3,0
> 0,1 ? ?1,1 ? ?2,1 ? ?3,1
> 0,2 ? ?1,2 ? ?2,2 ? ?3,2
> 0,3 ? ?1,3 ? ?2,3 ? ?3,3
>
> By performing a rasterIO with destination dimension = 4, I got :
> 0,0 ? ?1,0 ? ?2,0 ? ?3,0
> 0,1 ? ?1,1 ? ?2,1 ? ?3,1
> 0,2 ? ?1,2 ? ?2,2 ? ?3,2
> 0,3 ? ?1,3 ? ?2,3 ? ?3,3
> which is normal
>
> Now I keep the same view and reduce the destination by haft (destination
> dimension = 2), I got :
> 1,1 ? ?3,1
> 1,3 ? ?3,3
...
> Those results explain why my image is translating to right and bottom
> when reducing the destination size
>
> I would like to know if it is because of decimation process (nearest
> neighbor) ?
> In this case the returned result should be like this :
> For destination dimension = 2 :
> 0,0 ? ?2,0
> 0,2 ? ?2,2

Than Hvu Le,

I disagree with your conclusion on how things ought to work.  I think
either decimation system would be consistent with the downsampling.
Currently the sampling takes the center of the destination pixel and
transforms it back to the source image.  In this case it falls on a
boundary between two pixels and which is selected is arbitrary.

If you wish to change the logic the place to look would be the IRasterIO
implementation in the gdal/gcore/rasterio.cpp file - circa line 408
which looks like:

/* -------------------------------------------------------------------- */
/*      Read case                                                       */
/*      Loop over buffer computing source locations.                    */
/* -------------------------------------------------------------------- */
        for( iBufYOff = 0; iBufYOff < nBufYSize; iBufYOff++ )
        {
            size_t   iBufOffset, iSrcOffset;

            dfSrcY = (iBufYOff+0.5) * dfSrcYInc + nYOff;
            iSrcY = (int) dfSrcY;

There is similar logic for the "X" case just below it.  Changing
it here should affect most drivers, though a few handle the
decimation themselves.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Thu Mar 18 10:50:28 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 18 10:50:33 2010
Subject: [gdal-dev] gdal --with-php
In-Reply-To: <4BA208BC.4050106@uva.nl>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
	<4BA208BC.4050106@uva.nl>
Message-ID: <931f8ea91003180750k77caa44bq1c27b721789a332b@mail.gmail.com>

Jan,

As far as I know the situation is essentially the same, but the
unmaintained bindings are likely further decayed over time.

Best regards,

On Thu, Mar 18, 2010 at 7:04 AM, Jan Hartmann <j.l.h.hartmann@uva.nl> wrote:
> Hi all,
>
> What is the status of the php-bindings for gdal (./configure --with-php)? I
> found a message from Frank (2006) stating that it is not well supported
> (http://lists.osgeo.org/pipermail/gdal-dev/2006-March/008258.html), but that
> there are php-bindings for OGR, developed by DMSolutions
> (http://dl.maptools.org/dl/php_ogr/). The last version of those dates from a
> few months ago. Does something like that exist for GDAL? At the moment I am
> calling the GDAL utilities with exec-calls, but that is not really optimal,
> of course.
>
> Jan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From sunburned.surveyor at gmail.com  Thu Mar 18 11:19:52 2010
From: sunburned.surveyor at gmail.com (Sunburned Surveyor)
Date: Thu Mar 18 11:19:55 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <4BA204CE.6000604@remote.org>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
	<4BA0D2FF.4040303@remote.org>
	<51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
	<4BA1283A.4000004@carto.net> <4BA204CE.6000604@remote.org>
Message-ID: <71097ae21003180819k34029823oc3cdd4f0222a35fc@mail.gmail.com>

You could create each feature as a block, and then have the attributes
of the feature as the block.

The other way is to create text entities in your DXF file with the
values of the attribute. Both of these solutions are possible, but I'm
sure would require some extra programming.

My CAD web page lists a couple of other free CAD program/viewers you
can use to test your DXF files:

http://www.redefinedhorizons.com/community_cad.html

Landon

On Thu, Mar 18, 2010 at 3:47 AM, Frederik Ramm <frederik@remote.org> wrote:
> Hi,
>
> Andreas Neumann wrote:
>>
>> yes - it is a read/write driver.
>
> I have meanwhile checked out and tried it successfully. My use case is
> taking shape files with geodata (road networks, railway, land use etc) and
> converting them to DXF for a client of mine. I created a set of DXF files
> from my shapes and checked them in QCAD.
>
> Sadly I only get geometries, no extra attributes ("DXF layer does not
> support arbitrary field creation."). I can work around this by creating one
> shape file for every type of feature, but I'll never get something like
> street names that way.
>
>> There will be further work on this provider. If you (or someone else)
>> would have some money for improvements it would help as well.
>
> Is not being able to convert something like a street name a fundamental
> problem of DXF, or is this something that could be implemented for a client
> willing to part with some money?
>
> Bye
> Frederik
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From sunburned.surveyor at gmail.com  Thu Mar 18 11:20:34 2010
From: sunburned.surveyor at gmail.com (Sunburned Surveyor)
Date: Thu Mar 18 11:20:38 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <71097ae21003180819k34029823oc3cdd4f0222a35fc@mail.gmail.com>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
	<4BA0D2FF.4040303@remote.org>
	<51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
	<4BA1283A.4000004@carto.net> <4BA204CE.6000604@remote.org>
	<71097ae21003180819k34029823oc3cdd4f0222a35fc@mail.gmail.com>
Message-ID: <71097ae21003180820u3c0683dbxda4a24e8f00eab6d@mail.gmail.com>

I meant to say "have the attribute values of the feature as the
attributes of the blcok."

Sorry about that.

Landon

On Thu, Mar 18, 2010 at 8:19 AM, Sunburned Surveyor
<sunburned.surveyor@gmail.com> wrote:
> You could create each feature as a block, and then have the attributes
> of the feature as the block.
>
> The other way is to create text entities in your DXF file with the
> values of the attribute. Both of these solutions are possible, but I'm
> sure would require some extra programming.
>
> My CAD web page lists a couple of other free CAD program/viewers you
> can use to test your DXF files:
>
> http://www.redefinedhorizons.com/community_cad.html
>
> Landon
>
> On Thu, Mar 18, 2010 at 3:47 AM, Frederik Ramm <frederik@remote.org> wrote:
>> Hi,
>>
>> Andreas Neumann wrote:
>>>
>>> yes - it is a read/write driver.
>>
>> I have meanwhile checked out and tried it successfully. My use case is
>> taking shape files with geodata (road networks, railway, land use etc) and
>> converting them to DXF for a client of mine. I created a set of DXF files
>> from my shapes and checked them in QCAD.
>>
>> Sadly I only get geometries, no extra attributes ("DXF layer does not
>> support arbitrary field creation."). I can work around this by creating one
>> shape file for every type of feature, but I'll never get something like
>> street names that way.
>>
>>> There will be further work on this provider. If you (or someone else)
>>> would have some money for improvements it would help as well.
>>
>> Is not being able to convert something like a street name a fundamental
>> problem of DXF, or is this something that could be implemented for a client
>> willing to part with some money?
>>
>> Bye
>> Frederik
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From ramirogonzalez at suremptec.com.ar  Thu Mar 18 12:20:06 2010
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Thu Mar 18 12:20:12 2010
Subject: [gdal-dev] Area of hourglass shaped polygon
Message-ID: <38b082f61003180920i5793f212j8699a1664b4a0a2@mail.gmail.com>

I use gdal to calculate the area of polygons drawn by a user over a map. The
points are added to the polygon in same order the user selects them. An
hourglass shaped polygon can be created adding 4 points like a 'z'.

When the polygon has the shape of an hourglass, the measure returned by
get_Area() is smaller than the sum of the areas of the two independent
triangles.
I'd like to know if there is a way to calculate the area in this situation?

I tried to intersect the polygon with another that contains it but the
operation fails when the polygon cross itself(return NULL). I could use this
to inform that the area calculated is invalid, but I'd like to know if there
is a better way of knowing this.

Thanks,
Ramiro
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100318/88d9d1cf/attachment.html
From xenon at alphapixel.com  Thu Mar 18 12:26:11 2010
From: xenon at alphapixel.com (Chris 'Xenon' Hanson)
Date: Thu Mar 18 12:33:01 2010
Subject: [gdal-dev] Area of hourglass shaped polygon
In-Reply-To: <38b082f61003180920i5793f212j8699a1664b4a0a2@mail.gmail.com>
References: <38b082f61003180920i5793f212j8699a1664b4a0a2@mail.gmail.com>
Message-ID: <4BA25423.7070804@alphapixel.com>

On 3/18/2010 10:20 AM, Ramiro Gonzalez wrote:
> I use gdal to calculate the area of polygons drawn by a user over a map.
> The points are added to the polygon in same order the user selects them.
> An hourglass shaped polygon can be created adding 4 points like a 'z'.
> When the polygon has the shape of an hourglass, the measure returned by
> get_Area() is smaller than the sum of the areas of the two independent
> triangles.
> I'd like to know if there is a way to calculate the area in this situation?
> I tried to intersect the polygon with another that contains it but the
> operation fails when the polygon cross itself(return NULL). I could use
> this to inform that the area calculated is invalid, but I'd like to know
> if there is a better way of knowing this.

  I'm pretty sure this would be considered nonsensical topology. Area calculations usually
rely on the points in a polygon winding either consistently clockwise or
counter-clockwise, but yours are mixed.

  Don't do that. It's bad.

  If you want to measure the area of a shape like that, create it out of two normal
consistently-wound triangles stacked tip-to-tip.

> Thanks,
> Ramiro

-- 
Chris 'Xenon' Hanson, omo sanza lettere                  Xenon AlphaPixel.com
PixelSense Landsat processing now available! http://www.alphapixel.com/demos/
"There is no Truth. There is only Perception. To Perceive is to Exist." - Xen
From warmerdam at pobox.com  Thu Mar 18 12:57:48 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 18 12:57:50 2010
Subject: [gdal-dev] gdalinfo error 4
In-Reply-To: <6AED4720540426409658F48F77981AB30595A6C4@MIA-WEX-V03.wfs.com>
References: <6AED4720540426409658F48F77981AB30595A6C4@MIA-WEX-V03.wfs.com>
Message-ID: <931f8ea91003180957k29d60412tdb5217c6959d1a62@mail.gmail.com>

Chris,

If possible, it would be helpful if you could make the file
available for folks to review.  The GRIB driver has a variety
of limitations and it can be confused by some GRIB products.

Best regards,

On Thu, Mar 18, 2010 at 10:31 AM, Chris Haste <CHaste@airdata.co.uk> wrote:
> Hi Frank and list,
>
>
>
> I am very new to gdal and seem to have a problem that I wasn?t expecting.
>
>
>
> I have a GRIB1 file that represents wind and temperature data. It was issued
> by the UK Met Office and contains GRIB bulletins wrapped in the WMO bulletin
> distribution envelope.
>
>
>
> When I run gdalinfo (1.7.1) against this file I get the following error:
>
> ERROR:? Couldn?t find ?GRIB? or ?TDLP?
>
> There were 4 trailing bytes in the file.
>
> ERROR 4: SADISGrib1-0000-T+6.grb is a grib file, but no raster dataset was
> successfully identified.
>
> Gdalinfo failed ? unable to open ?SADISGrib1-0000-T+6.grb?.
>
>
>
> Can anyone throw some light on this please?
>
>
>
> I can attach the file if needed.
>
>
>
> Thanks in advance,
>
>
>
> Chris
>
>
>
> *** This communication has been sent from World Fuel Services
> Corporation or its subsidiaries or its affiliates for the intended recipient
> only and may contain proprietary, confidential or privileged information.
> If you are not the intended recipient, any review, disclosure, copying,
> use, or distribution of the information included in this communication
> and any attachments is strictly prohibited. If you have received this
> communication in error, please notify us immediately by replying to this
> communication and delete the communication, including any
> attachments, from your computer. Electronic communications sent to or
> from World Fuel Services Corporation or its subsidiaries or its affiliates
> may be monitored for quality assurance and compliance purposes.***
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Thu Mar 18 13:15:53 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 18 13:15:57 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <4BA204CE.6000604@remote.org>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
	<4BA0D2FF.4040303@remote.org>
	<51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
	<4BA1283A.4000004@carto.net> <4BA204CE.6000604@remote.org>
Message-ID: <931f8ea91003181015x313d9c11ya23191ba6da0cd25@mail.gmail.com>

On Thu, Mar 18, 2010 at 6:47 AM, Frederik Ramm <frederik@remote.org> wrote:
> Hi,
>
> Andreas Neumann wrote:
>>
>> yes - it is a read/write driver.
>
> I have meanwhile checked out and tried it successfully. My use case is
> taking shape files with geodata (road networks, railway, land use etc) and
> converting them to DXF for a client of mine. I created a set of DXF files
> from my shapes and checked them in QCAD.
>
> Sadly I only get geometries, no extra attributes ("DXF layer does not
> support arbitrary field creation."). I can work around this by creating one
> shape file for every type of feature, but I'll never get something like
> street names that way.

Frederik,

It is not immediately obvious to me how to attach general purpose
attributes to DXF entities in a way that will be useful so I have not
yet attempted this.  With some guidance something could likely be
done.


>> There will be further work on this provider. If you (or someone else)
>> would have some money for improvements it would help as well.
>
> Is not being able to convert something like a street name a fundamental
> problem of DXF, or is this something that could be implemented for a client
> willing to part with some money?

I think there is ambiguity or at least several different ways
of associating what we think of as attribute data.  So something
can be done with money/time but I'm concerned it won't be
as generally useful as it could be.   It would also take some
investigation to come up with the best method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From reinaldo at geodesign.com.br  Thu Mar 18 13:41:38 2010
From: reinaldo at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Thu Mar 18 13:50:36 2010
Subject: [gdal-dev] writing DWG/DXF
In-Reply-To: <931f8ea91003181015x313d9c11ya23191ba6da0cd25@mail.gmail.com>
References: <4BA0C86C.8000105@remote.org>
	<15479.145.50.39.11.1268829585.squirrel@webmail.hostingdiscounter.nl>
	<4BA0D2FF.4040303@remote.org>
	<51326.145.50.39.11.1268831227.squirrel@webmail.hostingdiscounter.nl>
	<4BA1283A.4000004@carto.net> <4BA204CE.6000604@remote.org>
	<931f8ea91003181015x313d9c11ya23191ba6da0cd25@mail.gmail.com>
Message-ID: <5c5a5ca7f6932a8967475e2a21c421e2.squirrel@webmail.geodesign.com.br>

Features can have attributes in DXF as BLOCKS.  See the attached file for
an example of a POINT feature with attributes asDXF.  The same can be done
for line, polyline, polygon, etc.

Regards,

Reinaldo


> On Thu, Mar 18, 2010 at 6:47 AM, Frederik Ramm <frederik@remote.org>
> wrote:
>> Hi,
>>
>> Andreas Neumann wrote:
>>>
>>> yes - it is a read/write driver.
>>
>> I have meanwhile checked out and tried it successfully. My use case is
>> taking shape files with geodata (road networks, railway, land use etc)
>> and
>> converting them to DXF for a client of mine. I created a set of DXF
>> files
>> from my shapes and checked them in QCAD.
>>
>> Sadly I only get geometries, no extra attributes ("DXF layer does not
>> support arbitrary field creation."). I can work around this by creating
>> one
>> shape file for every type of feature, but I'll never get something like
>> street names that way.
>
> Frederik,
>
> It is not immediately obvious to me how to attach general purpose
> attributes to DXF entities in a way that will be useful so I have not
> yet attempted this.  With some guidance something could likely be
> done.
>
>
>>> There will be further work on this provider. If you (or someone else)
>>> would have some money for improvements it would help as well.
>>
>> Is not being able to convert something like a street name a fundamental
>> problem of DXF, or is this something that could be implemented for a
>> client
>> willing to part with some money?
>
> I think there is ambiguity or at least several different ways
> of associating what we think of as attribute data.  So something
> can be done with money/time but I'm concerned it won't be
> as generally useful as it could be.   It would also take some
> investigation to come up with the best method.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Reinaldo Escada Chohfi
Diretor Geral
GeoDesign Internacional - www.geodesign.com.br

E-mail: reinaldo@geodesign.com.br
Tel./Fax: +55-12-3153-5115
Skype: rechohfi

Intelig?ncia e Tecnologia GeoEspacial de Ponta

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2009 GeoDesign Internacional
Todos os direitos reservados.
-------------- next part --------------
  0
SECTION
  2
HEADER
  9
$ACADVER
  1
AC1009
  9
$EXTMIN
 10
-45.861725
 20
-23.207114
 30
0.0
  9
$EXTMAX
 10
-45.861725
 20
-23.207114
 30
0.0
  9
$LIMMIN
 10
0.0
 20
0.0
  9
$LIMMAX
 10
12.0
 20
9.0
  9
$ORTHOMODE
 70
     0
  9
$REGENMODE
 70
     1
  9
$FILLMODE
 70
     1
  9
$QTEXTMODE
 70
     0
  9
$MIRRTEXT
 70
     0
  9
$DRAGMODE
 70
     2
  9
$LTSCALE
 40
1.0
  9
$OSMODE
 70
    77
  9
$ATTMODE
 70
     1
  9
$TEXTSIZE
 40
0.2
  9
$TRACEWID
 40
0.05
  9
$TEXTSTYLE
  7
STANDARD
  9
$CLAYER
  8
FOTOS_GEORREFERENCIADAS
  9
$CELTYPE
  6
BYLAYER
  9
$CECOLOR
 62
   7
  9
$DIMSCALE
 40
1.0
  9
$DIMASZ
 40
0.18
  9
$DIMEXO
 40
0.0625
  9
$DIMDLI
 40
0.38
  9
$DIMRND
 40
0.0
  9
$DIMDLE
 40
0.0
  9
$DIMEXE
 40
0.18
  9
$DIMTP
 40
0.0
  9
$DIMTM
 40
0.0
  9
$DIMTXT
 40
0.18
  9
$DIMCEN
 40
0.09
  9
$DIMTSZ
 40
0.0
  9
$DIMTOL
 70
     0
  9
$DIMLIM
 70
     0
  9
$DIMTIH
 70
     1
  9
$DIMTOH
 70
     1
  9
$DIMSE1
 70
     0
  9
$DIMSE2
 70
     0
  9
$DIMTAD
 70
     0
  9
$DIMZIN
 70
     0
  9
$DIMBLK
  1

  9
$DIMASO
 70
     1
  9
$DIMSHO
 70
     1
  9
$DIMPOST
  1

  9
$DIMAPOST
  1

  9
$DIMALT
 70
     0
  9
$DIMALTD
 70
     2
  9
$DIMALTF
 40
25.399999999999999
  9
$DIMLFAC
 40
1.0
  9
$DIMTOFL
 70
     0
  9
$DIMTVP
 40
0.0
  9
$DIMTIX
 70
     0
  9
$DIMSOXD
 70
     0
  9
$DIMSAH
 70
     0
  9
$DIMBLK1
  1

  9
$DIMBLK2
  1

  9
$DIMSTYLE
  2
STANDARD
  9
$DIMCLRD
 70
     0
  9
$DIMCLRE
 70
     0
  9
$DIMCLRT
 70
     0
  9
$DIMTFAC
 40
1.0
  9
$DIMGAP
 40
0.09
  9
$LUNITS
 70
     2
  9
$LUPREC
 70
     4
  9
$SKETCHINC
 40
0.1
  9
$FILLETRAD
 40
0.0
  9
$AUNITS
 70
     0
  9
$AUPREC
 70
     0
  9
$MENU
  1
.
  9
$ELEVATION
 40
0.0
  9
$PELEVATION
 40
0.0
  9
$THICKNESS
 40
0.0
  9
$LIMCHECK
 70
     0
  9
$BLIPMODE
 70
     0
  9
$CHAMFERA
 40
0.0
  9
$CHAMFERB
 40
0.0
  9
$SKPOLY
 70
     0
  9
$TDCREATE
 40
2455010.5500146411
  9
$TDUPDATE
 40
2455019.7225251272
  9
$TDINDWG
 40
0.0149699884
  9
$TDUSRTIMER
 40
0.0149698032
  9
$USRTIMER
 70
     1
  9
$ANGBASE
 50
0.0
  9
$ANGDIR
 70
     0
  9
$PDMODE
 70
    34
  9
$PDSIZE
 40
-1.5
  9
$PLINEWID
 40
0.0
  9
$COORDS
 70
     1
  9
$SPLFRAME
 70
     0
  9
$SPLINETYPE
 70
     6
  9
$SPLINESEGS
 70
     8
  9
$ATTDIA
 70
     0
  9
$ATTREQ
 70
     1
  9
$HANDLING
 70
     1
  9
$HANDSEED
  5
116
  9
$SURFTAB1
 70
     6
  9
$SURFTAB2
 70
     6
  9
$SURFTYPE
 70
     6
  9
$SURFU
 70
     6
  9
$SURFV
 70
     6
  9
$UCSNAME
  2

  9
$UCSORG
 10
0.0
 20
0.0
 30
0.0
  9
$UCSXDIR
 10
1.0
 20
0.0
 30
0.0
  9
$UCSYDIR
 10
0.0
 20
1.0
 30
0.0
  9
$PUCSNAME
  2

  9
$PUCSORG
 10
0.0
 20
0.0
 30
0.0
  9
$PUCSXDIR
 10
1.0
 20
0.0
 30
0.0
  9
$PUCSYDIR
 10
0.0
 20
1.0
 30
0.0
  9
$USERI1
 70
     0
  9
$USERI2
 70
     0
  9
$USERI3
 70
     0
  9
$USERI4
 70
     0
  9
$USERI5
 70
     0
  9
$USERR1
 40
0.0
  9
$USERR2
 40
0.0
  9
$USERR3
 40
0.0
  9
$USERR4
 40
0.0
  9
$USERR5
 40
0.0
  9
$WORLDVIEW
 70
     1
  9
$SHADEDGE
 70
     3
  9
$SHADEDIF
 70
    70
  9
$TILEMODE
 70
     1
  9
$MAXACTVP
 70
    64
  9
$PLIMCHECK
 70
     0
  9
$PEXTMIN
 10
0.0
 20
0.0
 30
0.0
  9
$PEXTMAX
 10
0.0
 20
0.0
 30
0.0
  9
$PLIMMIN
 10
0.0
 20
0.0
  9
$PLIMMAX
 10
12.0
 20
9.0
  9
$UNITMODE
 70
     0
  9
$VISRETAIN
 70
     1
  9
$PLINEGEN
 70
     0
  9
$PSLTSCALE
 70
     1
  0
ENDSEC
  0
SECTION
  2
TABLES
  0
TABLE
  2
VPORT
 70
     3
  0
VPORT
  2
*ACTIVE
 70
     0
 10
0.0
 20
0.0
 11
1.0
 21
1.0
 12
-45.861725
 22
-23.207114
 13
0.0
 23
0.0
 14
0.5
 24
0.5
 15
0.5
 25
0.5
 16
0.0
 26
0.0
 36
1.0
 17
0.0
 27
0.0
 37
0.0
 40
3.00
 41
1.50
 42
50.0
 43
0.0
 44
0.0
 50
0.0
 51
0.0
 71
     0
 72
  1000
 73
     1
 74
     3
 75
     0
 76
     0
 77
     0
 78
     0
  0
ENDTAB
  0
TABLE
  2
LTYPE
 70
     1
  0
LTYPE
  2
CONTINUOUS
 70
     0
  3
Solid line
 72
    65
 73
     0
 40
0.0
  0
ENDTAB
  0
TABLE
  2
LAYER
 70
     2
  0
LAYER
  2
0
 70
     0
 62
     7
  6
CONTINUOUS
  0
LAYER
  2
FOTOS_GEORREFERENCIADAS
 70
     0
 62
     7
  6
CONTINUOUS
  0
ENDTAB
  0
TABLE
  2
STYLE
 70
     1
  0
STYLE
  2
STANDARD
 70
     0
 40
0.0
 41
1.0
 50
0.0
 71
     0
 42
0.2
  3
txt
  4

  0
ENDTAB
  0
TABLE
  2
VIEW
 70
     0
  0
ENDTAB
  0
TABLE
  2
UCS
 70
     0
  0
ENDTAB
  0
TABLE
  2
APPID
 70
     1
  0
APPID
  2
ACAD
 70
     0
  0
ENDTAB
  0
TABLE
  2
DIMSTYLE
 70
     1
  0
DIMSTYLE
  2
STANDARD
 70
     0
  3

  4

  5

  6

  7

 40
1.0
 41
0.18
 42
0.0625
 43
0.38
 44
0.18
 45
0.0
 46
0.0
 47
0.0
 48
0.0
140
0.18
141
0.09
142
0.0
143
25.399999999999999
144
1.0
145
0.0
146
1.0
147
0.09
 71
     0
 72
     0
 73
     1
 74
     1
 75
     0
 76
     0
 77
     0
 78
     0
170
     0
171
     2
172
     0
173
     0
174
     0
175
     0
176
     0
177
     0
178
     0
  0
ENDTAB
  0
ENDSEC
  0
SECTION
  2
BLOCKS
  0
BLOCK
  8
0
  2
$MODEL_SPACE
 70
     0
 10
0.0
 20
0.0
 30
0.0
  3
$MODEL_SPACE
  1

  0
ENDBLK
  5
F8
  8
0
  0
BLOCK
 67
     1
  8
0
  2
$PAPER_SPACE
 70
     0
 10
0.0
 20
0.0
 30
0.0
  3
$PAPER_SPACE
  1

  0
ENDBLK
  5
F4
 67
     1
  8
0
  0
BLOCK
  8
0
  2
BLK1
 70
     2
 10
0.0
 20
0.0
 30
0.0
  3
BLK1
  1

  0
POINT
  5
200
  8
0
 62
     7
 10
-45.861725
 20
-23.207114
 30
0.0
  0
ATTDEF
  5
201
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
NOME
 70
     1
  0
ATTDEF
  5
202
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DIRETORIO
 70
     1
  0
ATTDEF
  5
203
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DATUM
 70
     1
  0
ATTDEF
  5
204
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
PROJECAO
 70
     1
  0
ATTDEF
  5
205
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
LATITUDE
 70
     1
  0
ATTDEF
  5
206
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
LONGITUDE
 70
     1
  0
ATTDEF
  5
207
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ALTITUDE_M
 70
     1
  0
ATTDEF
  5
208
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ORI_MAGNET
 70
     1
  0
ATTDEF
  5
209
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ORI_VERDAD
 70
     1
  0
ATTDEF
  5
210
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DECLINACAO
 70
     1
  0
ATTDEF
  5
211
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
LAT_DEST
 70
     1
  0
ATTDEF
  5
212
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
LON_DEST
 70
     1
  0
ATTDEF
  5
213
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ORI_MAG_DEST
 70
     1
  0
ATTDEF
  5
214
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ORI_VER_DEST
 70
     1
  0
ATTDEF
  5
215
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DECL_DEST
 70
     1
  0
ATTDEF
  5
216
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DIST_DEST
 70
     1
  0
ATTDEF
  5
217
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DATA
 70
     1
  0
ATTDEF
  5
218
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
HORARIO
 70
     1
  0
ATTDEF
  5
219
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
SATELITES
 70
     1
  0
ATTDEF
  5
220
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DATA_SAT
 70
     1
  0
ATTDEF
  5
221
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
HORA_UTC
 70
     1
  0
ATTDEF
  5
222
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
MEASURE
 70
     1
  0
ATTDEF
  5
223
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
DOP
 70
     1
  0
ATTDEF
  5
224
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
FABRICANTE
 70
     1
  0
ATTDEF
  5
225
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
MODELO
 70
     1
  0
ATTDEF
  5
226
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
EXP_TIME
 70
     1
  0
ATTDEF
  5
227
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
EXP_MODE
 70
     1
  0
ATTDEF
  5
228
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
FNUMBER
 70
     1
  0
ATTDEF
  5
229
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
FLASH
 70
     1
  0
ATTDEF
  5
230
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
WHITE_BAL
 70
     1
  0
ATTDEF
  5
231
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
BRIGHTNESS
 70
     1
  0
ATTDEF
  5
232
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ISO
 70
     1
  0
ATTDEF
  5
233
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
METER_MODE
 70
     1
  0
ATTDEF
  5
234
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
SHARPNESS
 70
     1
  0
ATTDEF
  5
235
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
WIDTH
 70
     1
  0
ATTDEF
  5
236
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
HEIGHT
 70
     1
  0
ATTDEF
  5
237
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
CRS_REPROJ
 70
     1
  0
ATTDEF
  5
238
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
COORD_X
 70
     1
  0
ATTDEF
  5
239
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
COORD_Y
 70
     1
  0
ATTDEF
  5
240
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_01
 70
     1
  0
ATTDEF
  5
241
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_02
 70
     1
  0
ATTDEF
  5
242
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_03
 70
     1
  0
ATTDEF
  5
243
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_04
 70
     1
  0
ATTDEF
  5
244
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_05
 70
     1
  0
ATTDEF
  5
245
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_06
 70
     1
  0
ATTDEF
  5
246
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_07
 70
     1
  0
ATTDEF
  5
247
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_08
 70
     1
  0
ATTDEF
  5
248
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_09
 70
     1
  0
ATTDEF
  5
249
  8
0
 10
0.0
 20
0.0
 30
0.0
 40
0.2
  1

  3

  2
ATRIB_10
 70
     1
  0
ENDBLK
  5
250
  8
0
  0
BLOCK
  8
0
  2
A$C1AB21049
 70
     0
 10
0.0
 20
0.0
 30
0.0
  3
A$C1AB21049
  1

  0
INSERT
  5
251
  8
FOTOS_GEORREFERENCIADAS
 66
     1
  2
BLK1
 10
-45.861725
 20
-23.207114
 30
0.0
  0
ATTRIB
  5
252
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
rimg03-91537_tst.jpg
  2
NOME
 70
     1
  0
ATTRIB
  5
253
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
C:\fotos\all_formats\
  2
DIRETORIO
 70
     1
  0
ATTRIB
  5
254
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
WGS-84
  2
DATUM
 70
     1
  0
ATTRIB
  5
255
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
LAT/LON
  2
PROJE??O
 70
     1
  0
ATTRIB
  5
256
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
23 graus 12 min 25.61 seg S
  2
LATITUDE
 70
     1
  0
ATTRIB
  5
257
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
45 graus 51 min 42.21 seg O
  2
LONGITUDE
 70
     1
  0
ATTRIB
  5
258
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
604
  2
ALTITUDE_M
 70
     1
  0
ATTRIB
  5
259
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
224.300
  2
ORI_MAGNET
 70
     1
  0
ATTRIB
  5
260
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
203.641
  2
ORI_VERDAD
 70
     1
  0
ATTRIB
  5
261
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
-20.659
  2
DECLINACAO
 70
     1
  0
ATTRIB
  5
262
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
INCL_HOR
 70
     1
  0
ATTRIB
  5
263
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
INCL_VER
 70
     1
  0
ATTRIB
  5
264
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
LAT_DEST
 70
     1
  0
ATTRIB
  5
265
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
LON_DEST
 70
     1
  0
ATTRIB
  5
266
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
20.659
  2
ORI_MAG_DEST
 70
     1
  0
ATTRIB
  5
267
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
0.00
  2
ORI_VER_DEST
 70
     1
  0
ATTRIB
  5
268
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
-20.659
  2
DECL_DEST
 70
     1
  0
ATTRIB
  5
269
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
0.00
  2
DIST_DEST
 70
     1
  0
ATTRIB
  5
270
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
2009:03:11
  2
DATA
 70
     1
  0
ATTRIB
  5
271
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
14:50:33
  2
HORARIO
 70
     1
  0
ATTRIB
  5
272
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
02,15,27,17,26,04,12,09,28,05
  2
SATELITES
 70
     1
  0
ATTRIB
  5
273
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
2009:03:11
  2
DATA_SAT
 70
     1
  0
ATTRIB
  5
274
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
16:52:26
  2
HORA_UTC
 70
     1
  0
ATTRIB
  5
275
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
3D Diff
  2
MEASURE
 70
     1
  0
ATTRIB
  5
276
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
1.50
  2
DOP
 70
     1
  0
ATTRIB
  5
277
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
RICOH
  2
FABRICANTE
 70
     1
  0
ATTRIB
  5
278
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
Caplio 500SE
  2
MODELO
 70
     1
  0
ATTRIB
  5
279
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
0.005291
  2
EXP_TIME
 70
     1
  0
ATTRIB
  5
280
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
Auto exp.
  2
EXP_MODE
 70
     1
  0
ATTRIB
  5
281
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
4.30
  2
FNUMBER
 70
     1
  0
ATTRIB
  5
282
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
Off
  2
FLASH
 70
     1
  0
ATTRIB
  5
283
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
Auto
  2
WHITE_BAL
 70
     1
  0
ATTRIB
  5
284
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
5.50
  2
BRIGHTNESS
 70
     1
  0
ATTRIB
  5
285
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
64
  2
ISO
 70
     1
  0
ATTRIB
  5
286
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
Pattern
  2
METER_MODE
 70
     1
  0
ATTRIB
  5
287
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
Normal
  2
SHARPNESS
 70
     1
  0
ATTRIB
  5
288
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
1280
  2
WIDTH
 70
     1
  0
ATTRIB
  5
289
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
960
  2
HEIGHT
 70
     1
  0
ATTRIB
  5
290
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
CRS_REPROJ
 70
     1
  0
ATTRIB
  5
291
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
COORD_X
 70
     1
  0
ATTRIB
  5
292
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
COORD_Y
 70
     1
  0
ATTRIB
  5
293
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_01
 70
     1
  0
ATTRIB
  5
294
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_02
 70
     1
  0
ATTRIB
  5
295
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_03
 70
     1
  0
ATTRIB
  5
296
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_04
 70
     1
  0
ATTRIB
  5
297
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_05
 70
     1
  0
ATTRIB
  5
298
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_06
 70
     1
  0
ATTRIB
  5
299
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_07
 70
     1
  0
ATTRIB
  5
300
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_08
 70
     1
  0
ATTRIB
  5
301
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_09
 70
     1
  0
ATTRIB
  5
302
  8
0
 10
1.334568664741588
 20
0.9815886637563231
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_10
 70
     1
  0
SEQEND
  5
303
  8
FOTOS_GEORREFERENCIADAS
 62
     7
  0
ENDBLK
  5
304
  8
0
  0
ENDSEC
  0
SECTION
  2
ENTITIES
  0
INSERT
  5
305
  8
FOTOS_GEORREFERENCIADAS
 66
     1
  2
BLK1
 10
0.0
 20
0.0
 30
0.0
  0
ATTRIB
  5
306
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
rimg03-91537_tst.jpg
  2
NOME
 70
     1
  0
ATTRIB
  5
307
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
C:\fotos\all_formats\
  2
DIRETORIO
 70
     1
  0
ATTRIB
  5
308
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
WGS-84
  2
DATUM
 70
     1
  0
ATTRIB
  5
309
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
LAT/LON
  2
PROJECAO
 70
     1
  0
ATTRIB
  5
310
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
23 graus 12 min 25.61 seg S
  2
LATITUDE
 70
     1
  0
ATTRIB
  5
311
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
45 graus 51 min 42.21 seg O
  2
LONGITUDE
 70
     1
  0
ATTRIB
  5
312
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
604
  2
ALTITUDE_M
 70
     1
  0
ATTRIB
  5
313
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
224.300
  2
ORI_MAGNET
 70
     1
  0
ATTRIB
  5
314
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
203.641
  2
ORI_VERDAD
 70
     1
  0
ATTRIB
  5
315
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
-20.659
  2
DECLINACAO
 70
     1
  0
ATTRIB
  5
316
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
INCL_HOR
 70
     1
  0
ATTRIB
  5
317
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
INCL_VER
 70
     1
  0
ATTRIB
  5
318
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
LAT_DEST
 70
     1
  0
ATTRIB
  5
319
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
LON_DEST
 70
     1
  0
ATTRIB
  5
320
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
20.659
  2
ORI_MAG_DEST
 70
     1
  0
ATTRIB
  5
321
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
0.00
  2
ORI_VER_DEST
 70
     1
  0
ATTRIB
  5
322
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
-20.659
  2
DECL_DEST
 70
     1
  0
ATTRIB
  5
323
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
0.00
  2
DIST_DEST
 70
     1
  0
ATTRIB
  5
324
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
2009:03:11
  2
DATA
 70
     1
  0
ATTRIB
  5
325
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
14:50:33
  2
HORARIO
 70
     1
  0
ATTRIB
  5
326
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
02,15,27,17,26,04,12,09,28,05
  2
SATELITES
 70
     1
  0
ATTRIB
  5
327
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
2009:03:11
  2
DATA_SAT
 70
     1
  0
ATTRIB
  5
328
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
16:52:26
  2
HORA_UTC
 70
     1
  0
ATTRIB
  5
329
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
3D Diff
  2
MEASURE
 70
     1
  0
ATTRIB
  5
330
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
1.50
  2
DOP
 70
     1
  0
ATTRIB
  5
331
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
RICOH
  2
FABRICANTE
 70
     1
  0
ATTRIB
  5
332
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
Caplio 500SE
  2
MODELO
 70
     1
  0
ATTRIB
  5
333
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
0.005291
  2
EXP_TIME
 70
     1
  0
ATTRIB
  5
334
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
Auto exp.
  2
EXP_MODE
 70
     1
  0
ATTRIB
  5
335
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
4.30
  2
FNUMBER
 70
     1
  0
ATTRIB
  5
336
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
Off
  2
FLASH
 70
     1
  0
ATTRIB
  5
337
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
Auto
  2
WHITE_BAL
 70
     1
  0
ATTRIB
  5
338
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
5.50
  2
BRIGHTNESS
 70
     1
  0
ATTRIB
  5
339
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
64
  2
ISO
 70
     1
  0
ATTRIB
  5
340
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
Pattern
  2
METER_MODE
 70
     1
  0
ATTRIB
  5
341
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
Normal
  2
SHARPNESS
 70
     1
  0
ATTRIB
  5
342
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
1280
  2
WIDTH
 70
     1
  0
ATTRIB
  5
343
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
960
  2
HEIGHT
 70
     1
  0
ATTRIB
  5
344
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
CRS_REPROJ
 70
     1
  0
ATTRIB
  5
345
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
COORD_X
 70
     1
  0
ATTRIB
  5
346
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
COORD_Y
 70
     1
  0
ATTRIB
  5
347
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_01
 70
     1
  0
ATTRIB
  5
348
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_02
 70
     1
  0
ATTRIB
  5
349
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_03
 70
     1
  0
ATTRIB
  5
350
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_04
 70
     1
  0
ATTRIB
  5
351
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_05
 70
     1
  0
ATTRIB
  5
352
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_06
 70
     1
  0
ATTRIB
  5
353
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_07
 70
     1
  0
ATTRIB
  5
354
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_08
 70
     1
  0
ATTRIB
  5
355
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_09
 70
     1
  0
ATTRIB
  5
356
  8
0
 10
-45.861725
 20
-23.207114
 30
0.0
 40
0.2
  1
N/D
  2
ATRIB_10
 70
     1
  0
SEQEND
  5
357
  8
FOTOS_GEORREFERENCIADAS
 62
     7
  0
ENDSEC
  0
EOF
From szekerest at gmail.com  Thu Mar 18 18:38:51 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Thu Mar 18 18:38:53 2010
Subject: [gdal-dev] GDAL/OGR is available on embedded platform?
In-Reply-To: <BLU0-SMTP9A88CAD1B566B46029062C32B0@phx.gbl>
References: <BLU0-SMTP9A88CAD1B566B46029062C32B0@phx.gbl>
Message-ID: <f3b73b7d1003181538l77efe426oc64ed745e70d8253@mail.gmail.com>

Randy,

If you intend to develop on WinCE check out this:
http://www.gdal.org/wince.html

Best regards,

Tamas



2010/3/18 Randy <randyqiuxy@hotmail.com>

> Hi list,
> I'm going to do something about graphic display on an embedded platform
> (such as ARM) which needs GDAL/OGR to read the file.
> But I'm not very sure it's available on embedded platform.Has anyone
> done something like this?Any hint?
> Thanks for your time!
>
> Best regards,
> Randy
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100318/b18a3697/attachment.html
From even.rouault at mines-paris.org  Thu Mar 18 18:52:42 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Mar 18 18:52:57 2010
Subject: [gdal-dev] GDAL/OGR is available on embedded platform?
In-Reply-To: <f3b73b7d1003181538l77efe426oc64ed745e70d8253@mail.gmail.com>
References: <BLU0-SMTP9A88CAD1B566B46029062C32B0@phx.gbl>
	<f3b73b7d1003181538l77efe426oc64ed745e70d8253@mail.gmail.com>
Message-ID: <201003182352.45221.even.rouault@mines-paris.org>

GDAL/OGR can run on ARM Linux as well. The package is available on the armel 
architecture of Debian for example.

Le Thursday 18 March 2010 23:38:51 Tamas Szekeres, vous avez ?crit?:
> Randy,
>
> If you intend to develop on WinCE check out this:
> http://www.gdal.org/wince.html
>
> Best regards,
>
> Tamas
>
>
>
> 2010/3/18 Randy <randyqiuxy@hotmail.com>
>
> > Hi list,
> > I'm going to do something about graphic display on an embedded platform
> > (such as ARM) which needs GDAL/OGR to read the file.
> > But I'm not very sure it's available on embedded platform.Has anyone
> > done something like this?Any hint?
> > Thanks for your time!
> >
> > Best regards,
> > Randy
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From P.Halls at york.ac.uk  Fri Mar 19 03:13:39 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Mar 19 03:19:20 2010
Subject: [gdal-dev] Area of hourglass shaped polygon
In-Reply-To: <4BA25423.7070804@alphapixel.com>
References: <38b082f61003180920i5793f212j8699a1664b4a0a2@mail.gmail.com>
	<4BA25423.7070804@alphapixel.com>
Message-ID: <4BA32423.3040700@york.ac.uk>

Whilst I agree with Chris that the 'winding' method for calculating polygon 
areas would need tweaking to work with a shape like this, the 'complementary 
areas' method or the triangulation method would.  See Stephen Wise, GIS Basics, 
London: Taylor & Francis (2002) pp61-64 or Joseph O'Rourke, Computational 
Geometry in C, Cambridge (2nd Edn): Cambridge University Press (1998) pp18-22.

Best wishes,

Peter

Chris 'Xenon' Hanson wrote:
> On 3/18/2010 10:20 AM, Ramiro Gonzalez wrote:
>> I use gdal to calculate the area of polygons drawn by a user over a map.
>> The points are added to the polygon in same order the user selects them.
>> An hourglass shaped polygon can be created adding 4 points like a 'z'.
>> When the polygon has the shape of an hourglass, the measure returned by
>> get_Area() is smaller than the sum of the areas of the two independent
>> triangles.
>> I'd like to know if there is a way to calculate the area in this situation?
>> I tried to intersect the polygon with another that contains it but the
>> operation fails when the polygon cross itself(return NULL). I could use
>> this to inform that the area calculated is invalid, but I'd like to know
>> if there is a better way of knowing this.
> 
>   I'm pretty sure this would be considered nonsensical topology. Area calculations usually
> rely on the points in a polygon winding either consistently clockwise or
> counter-clockwise, but yours are mixed.
> 
>   Don't do that. It's bad.
> 
>   If you want to measure the area of a shape like that, create it out of two normal
> consistently-wound triangles stacked tip-to-tip.
> 
>> Thanks,
>> Ramiro
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From gbassiere at gmail.com  Fri Mar 19 09:47:16 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Fri Mar 19 10:06:00 2010
Subject: [gdal-dev] print throw a SyntaxError with Python 2.6
Message-ID: <4BA38064.1020301@gmail.com>

Hi,

I got the following error with gdal_retile.py (fresh GDAL 1.7.1 install
on an Ubuntu jaunty box):

>   File "/home/gba/Apps/usr/bin/gdal_retile.py", line 273
>     print("Building internal Index for %d tile(s) ..." % len(inputTiles), end=' ')
>                                                                              ^
> SyntaxError: invalid syntax

My Python verstion is:

> $ python -V
> Python 2.6.2

I think the problem comes from the use of print as a function instead of
a statement. Indeed, as long as print is considered a statement, the
parenthesis delimits a tuple (not function arguments) and a tuple
doesn't accept named arguments, hence the SyntaxError.

I've been able to work around this by adding:
> from __future__ import print_function
at the beginning of the script, as suggested in
http://docs.python.org/release/2.6.2/library/functions.html#print.

Regards
-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From ChDohmen at gmx.de  Fri Mar 19 10:13:29 2010
From: ChDohmen at gmx.de (Christoph Dohmen)
Date: Fri Mar 19 10:13:34 2010
Subject: [gdal-dev] how to use osm files
Message-ID: <20100319141329.11940@gmx.net>

Hi list,

I trying to find out a way to deal with osm files using ogr.
Am I right that there is no direct support?
There are ready converted shape files out in the web to download
but there is only one describing attribute set. So this is also
not really usable :-(
Last try was using the osm2shp utility found at osm svn. But the
tool creates files larger than 2GB and stops working.

Does anybody out there have any experience in dealing with osm-files
in ogr?

thanks

Christoph
-- 
GRATIS f?r alle GMX-Mitglieder: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://portal.gmx.net/de/go/maxdome01
From Ralf.Suhr at itc-halle.de  Fri Mar 19 10:18:11 2010
From: Ralf.Suhr at itc-halle.de (Ralf Suhr)
Date: Fri Mar 19 10:19:19 2010
Subject: [gdal-dev] how to use osm files
In-Reply-To: <20100319141329.11940@gmx.net>
References: <20100319141329.11940@gmx.net>
Message-ID: <201003191518.11526.Ralf.Suhr@itc-halle.de>

Hi Christoph,

use osm2pgsql and create your own custom shapefiles. All attributes from osm 
can be used by editing the default.style from osm2pgsql.

Gr 
Ralf

Am Freitag 19 M?rz 2010 15:13:29 schrieb Christoph Dohmen:
> Hi list,
> 
> I trying to find out a way to deal with osm files using ogr.
> Am I right that there is no direct support?
> There are ready converted shape files out in the web to download
> but there is only one describing attribute set. So this is also
> not really usable :-(
> Last try was using the osm2shp utility found at osm svn. But the
> tool creates files larger than 2GB and stops working.
> 
> Does anybody out there have any experience in dealing with osm-files
> in ogr?
> 
> thanks
> 
> Christoph

From frederik at remote.org  Fri Mar 19 10:41:15 2010
From: frederik at remote.org (Frederik Ramm)
Date: Fri Mar 19 10:41:24 2010
Subject: [gdal-dev] how to use osm files
In-Reply-To: <20100319141329.11940@gmx.net>
References: <20100319141329.11940@gmx.net>
Message-ID: <4BA38D0B.60802@remote.org>

Hi,

Christoph Dohmen wrote:
> I trying to find out a way to deal with osm files using ogr.
> Am I right that there is no direct support?

What format would you like to convert OSM into?

> There are ready converted shape files out in the web to download
> but there is only one describing attribute set. So this is also
> not really usable :-(

Can you say again what exactly is unsuitable about the existing shape files?

The problem with conversion from OSM into many other formats, including 
shape files, is that OSM supports unlimited attributes and the 
destination file will often only support a pre-defined number of 
attributes so you have to write some rules. osm2pgsql contains such 
rules but you might want to adapt them; pre-made shapefiles are using 
such rules as well. There is no "standard" way to convert an OSM file 
into a shapefile.

> Last try was using the osm2shp utility found at osm svn. But the
> tool creates files larger than 2GB and stops working.

There is also a shapefile creator named osmexport at rubyforge, and 
vizure.net claims to generate shape files on the fly. But in all cases 
(even if you go the osm2pgsql route) you will have to select layers or 
regions otherwise you'll get more data than a shape file can handle.

You can use the Osmosis tool to cut an area from an OSM file.

Bye
Frederik
From zoltans at geograph.co.za  Fri Mar 19 12:17:57 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Fri Mar 19 12:18:43 2010
Subject: [gdal-dev] ogr2ogr SHAPE to MIDMIF
Message-ID: <4BA3A3B5.50304@geograph.co.za>

Hi,
I've got some shapefiles that came out of Oracle via GeoMedia, and I 
need to convert them to MIDMIF.
(they are LatLong)

$ ogr2ogr -a_srs WGS84 -f "MapInfo File" midmif/2822/  
shape/2822/TRAN_ROADS.shp
ERROR 1: IMapInfoFile::CreateField() called with unsupported field type 9.
Note that Mapinfo files don't support list field types.

Also,  I get the default TAB format - where do I put the FORMAT=MIF 
statement in?

I've tried the ogr & formats sections on the gdal website, but can't see 
any clues.

Any pointers would be appreciated.

Thanks & regards,
Zoltan


-- 

===========================================
Zoltan Szecsei
Geograph (Pty) Ltd.
P.O. Box 7, Muizenberg 7950, South Africa.

65 Main Road, Muizenberg 7945
Western Cape, South Africa.  

34? 6'16.35"S 18?28'5.62"E 

Tel: +27-21-7884897  Mobile: +27-83-6004028
Fax: +27-86-6115323     www.geograph.co.za
===========================================

From jukka.rahkonen at mmmtike.fi  Fri Mar 19 12:27:54 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Fri Mar 19 12:28:16 2010
Subject: [gdal-dev] Re: ogr2ogr SHAPE to MIDMIF
References: <4BA3A3B5.50304@geograph.co.za>
Message-ID: <loom.20100319T172337-129@post.gmane.org>

Zoltan Szecsei <zoltans <at> geograph.co.za> writes:


> Note that Mapinfo files don't support list field types.
> 
> Also,  I get the default TAB format - where do I put the FORMAT=MIF 
> statement in?

Hi,

I can't say anything about your main problem, but this is easy:
http://gdal.org/ogr/drv_mitab.html
"Dataset Creation Options
    * FORMAT=MIF: To create MIF/MID instead of TAB files (TAB is the default). "

Thus, try -dsco FORMAT=MIF.

-Jukka Rahkonen-

From John.C.Cartwright at noaa.gov  Fri Mar 19 16:56:37 2010
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Fri Mar 19 16:56:40 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
In-Reply-To: <20100318085738.5bbc75de@asigrid01>
References: <4BA139E9.6020601@noaa.gov> <20100318085738.5bbc75de@asigrid01>
Message-ID: <4BA3E505.6050401@noaa.gov>

Thanks for suggestions Antonio and Vincent.  Unfortunately, neither

--with-hdf5=/usr/local/contrib/hdf5-1.8.4/lib 

nor

--with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5-1.8.4/lib

made any difference.


--john




On 03/18/2010 01:57 AM, Antonio Valentino wrote:
> Hi John,
>
> Il giorno Wed, 17 Mar 2010 14:22:01 -0600
> John Cartwright <John.C.Cartwright@noaa.gov> ha scritto:
>
>   
>> Hello All,
>>
>> I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
>> hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
>> successfully and have included the following in my configure statement
>> for gdal:
>>
>>   --with-hdf5=/usr/local/contrib/hdf5-1.8.4
>>     
> not sure, but maybe you should use something like
>
>   --with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5-1.8.4/lib
>
>
> best regards
>
>   
From zoltans at geograph.co.za  Sat Mar 20 04:46:55 2010
From: zoltans at geograph.co.za (Zoltan Szecsei)
Date: Sat Mar 20 04:47:44 2010
Subject: [gdal-dev] Re: ogr2ogr SHAPE to MIDMIF
In-Reply-To: <loom.20100319T172337-129@post.gmane.org>
References: <4BA3A3B5.50304@geograph.co.za>
	<loom.20100319T172337-129@post.gmane.org>
Message-ID: <4BA48B7F.2040505@geograph.co.za>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100320/2c0bcf11/attachment.html
From j.l.h.hartmann at uva.nl  Sun Mar 21 13:47:49 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sun Mar 21 13:47:55 2010
Subject: [gdal-dev] GDAL WMS driver
Message-ID: <4BA65BC5.3000002@uva.nl>

Skipped content of type multipart/alternative-------------- next part --------------
------------------------------------------------------------------------------
Download Intel&#174; Parallel Studio Eval
Try the new software tools for yourself. Speed compiling, find bugs
proactively, and fine-tune applications for parallel performance.
See why Intel Parallel Studio got high marks during beta.
http://p.sf.net/sfu/intel-sw-dev
-------------- next part --------------
_______________________________________________
jOrgan-user mailing list
jOrgan-user@lists.sourceforge.net
https://lists.sourceforge.net/lists/listinfo/jorgan-user

From schut at sarvision.nl  Mon Mar 22 04:38:32 2010
From: schut at sarvision.nl (Vincent Schut)
Date: Mon Mar 22 04:42:16 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
In-Reply-To: <4BA3E505.6050401@noaa.gov>
References: <4BA139E9.6020601@noaa.gov> <20100318085738.5bbc75de@asigrid01>
	<4BA3E505.6050401@noaa.gov>
Message-ID: <4BA72C88.8010602@sarvision.nl>

On 03/19/2010 09:56 PM, John Cartwright wrote:
> Thanks for suggestions Antonio and Vincent.  Unfortunately, neither
>
> --with-hdf5=/usr/local/contrib/hdf5-1.8.4/lib
>
> nor
>
> --with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5-1.8.4/lib
>
> made any difference.
>    

Hmm, then I don't know, I'm afraid. I have only experience compiling 
gdal with hdf4 (for reading spot, modis), not with hdf5... You might get 
some more info by checking the config.log file.

Vincent.
>
> --john
>
>
>
>
> On 03/18/2010 01:57 AM, Antonio Valentino wrote:
>    
>> Hi John,
>>
>> Il giorno Wed, 17 Mar 2010 14:22:01 -0600
>> John Cartwright<John.C.Cartwright@noaa.gov>  ha scritto:
>>
>>
>>      
>>> Hello All,
>>>
>>> I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
>>> hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
>>> successfully and have included the following in my configure statement
>>> for gdal:
>>>
>>>    --with-hdf5=/usr/local/contrib/hdf5-1.8.4
>>>
>>>        
>> not sure, but maybe you should use something like
>>
>>    --with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5-1.8.4/lib
>>
>>
>> best regards
>>
>>
>>      
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    
From mail at andreas-joisten.de  Mon Mar 22 05:21:12 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Mon Mar 22 05:24:47 2010
Subject: [gdal-dev] How to define the shear parameter of an affine
	transformation in a world file?
Message-ID: <20100322092113.184233B7893@dd2010.kasserver.com>

Hi,

How to define the shear parameter of an affine transformation in a world file?


I use a world file for gdalwarp.


Cheers



From mail at andreas-joisten.de  Mon Mar 22 05:53:06 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Mon Mar 22 05:54:48 2010
Subject: [gdal-dev] How to define the shear parameter of an affine
	transformation in a world file?
Message-ID: <20100322095306.6B94D3B13BF@dd2010.kasserver.com>

Hi all,


how to define the shear parameter of an affine transformation in a world file?


Thanks for your help,


Cheers



From warmerdam at pobox.com  Mon Mar 22 08:02:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 22 11:08:41 2010
Subject: [gdal-dev] Motion: Approve RFC 24 - GDAL Progressive Data Support
In-Reply-To: <4B9FC27D.3020604@pobox.com>
References: <4B9FC27D.3020604@pobox.com>
Message-ID: <4BA75C57.7040509@pobox.com>

Frank Warmerdam wrote:
> Folks,
> 
> Motion: To approve RFC 24 - GDAL Progressive Data Support.
> 
>   http://trac.osgeo.org/gdal/wiki/rfc24_progressive_data_support
> 
> -- 
> 
> I've incorporated adjustments based on the feedback in the last few
> days, and now I'd like to move to formally adopt RFC 24.

Folks,

I declare this motion passed with support (+1) from FrankW, TamasS,
and EvenR and a +0 from DanielM and HowardB.

I will proceed to merge the work into trunk.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From CHaste at airdata.co.uk  Mon Mar 22 07:41:06 2010
From: CHaste at airdata.co.uk (Chris Haste)
Date: Mon Mar 22 11:08:56 2010
Subject: [gdal-dev] gdalinfo error 4
In-Reply-To: <931f8ea91003180957k29d60412tdb5217c6959d1a62@mail.gmail.com>
References: <6AED4720540426409658F48F77981AB30595A6C4@MIA-WEX-V03.wfs.com>
	<931f8ea91003180957k29d60412tdb5217c6959d1a62@mail.gmail.com>
Message-ID: <6AED4720540426409658F48F77981AB305A8D01E@MIA-WEX-V03.wfs.com>

Hi Frank,

I have tried to attach the file to an email sent in reply to your original
Response (last week), but I don't think it has been accepted by whoever moderates this list yet.
So, I have made it available for download via ftp here:
ftp.planethaste.com
user name = gdal
password = qwerty-99

The file name is grib1data.grb

Please let me know if you can access it from here?

thanks

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank Warmerdam
Sent: 18 March 2010 16:58
To: Chris Haste
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] gdalinfo error 4

Chris,

If possible, it would be helpful if you could make the file
available for folks to review.  The GRIB driver has a variety
of limitations and it can be confused by some GRIB products.

Best regards,

On Thu, Mar 18, 2010 at 10:31 AM, Chris Haste <CHaste@airdata.co.uk> wrote:
> Hi Frank and list,
>
>
>
> I am very new to gdal and seem to have a problem that I wasn't expecting.
>
>
>
> I have a GRIB1 file that represents wind and temperature data. It was issued
> by the UK Met Office and contains GRIB bulletins wrapped in the WMO bulletin
> distribution envelope.
>
>
>
> When I run gdalinfo (1.7.1) against this file I get the following error:
>
> ERROR:? Couldn't find 'GRIB' or 'TDLP'
>
> There were 4 trailing bytes in the file.
>
> ERROR 4: SADISGrib1-0000-T+6.grb is a grib file, but no raster dataset was
> successfully identified.
>
> Gdalinfo failed - unable to open 'SADISGrib1-0000-T+6.grb'.
>
>
>
> Can anyone throw some light on this please?
>
>
>
> I can attach the file if needed.
>
>
>
> Thanks in advance,
>
>
>
> Chris
>
>
>
> *** This communication has been sent from World Fuel Services
> Corporation or its subsidiaries or its affiliates for the intended recipient
> only and may contain proprietary, confidential or privileged information.
> If you are not the intended recipient, any review, disclosure, copying,
> use, or distribution of the information included in this communication
> and any attachments is strictly prohibited. If you have received this
> communication in error, please notify us immediately by replying to this
> communication and delete the communication, including any
> attachments, from your computer. Electronic communications sent to or
> from World Fuel Services Corporation or its subsidiaries or its affiliates
> may be monitored for quality assurance and compliance purposes.***
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From mail at andreas-joisten.de  Mon Mar 22 13:02:58 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Mon Mar 22 13:03:03 2010
Subject: [gdal-dev] reprojection from BNG to WGS84 -- using gdalwarp
Message-ID: <20100322170258.A15BC160103@dd2010.kasserver.com>

Hi all,

I have problem to reproject a raster file in BNG British National Grid to WGS84.

gdalwarp -s_srs EPSG:27700 -tps -t_srs EPSG:4326 -co TFW=YES -r near input.tif geo_output.tif


I have some questions:

Must be the input file a GeoTiff file? 
Which requirements must be met by the input file?
If the input file is a GeoTiff, do I need ground controlpoints?



Thanks for help.








From warmerdam at pobox.com  Mon Mar 22 13:14:09 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 22 13:14:29 2010
Subject: [gdal-dev] reprojection from BNG to WGS84 -- using gdalwarp
In-Reply-To: <20100322170258.A15BC160103@dd2010.kasserver.com>
References: <20100322170258.A15BC160103@dd2010.kasserver.com>
Message-ID: <4BA7A561.3040309@pobox.com>

Andreas Joisten wrote:
> Hi all,
> 
> I have problem to reproject a raster file in BNG British National Grid to WGS84.
> 
> gdalwarp -s_srs EPSG:27700 -tps -t_srs EPSG:4326 -co TFW=YES -r near input.tif geo_output.tif
> 
> 
> I have some questions:
> 
> Must be the input file a GeoTiff file? 

Andreas,

No, gdalwarp will accept any GDAL supported raster format as input
as long as it has georeferencing.

> Which requirements must be met by the input file?

It must be georeferenced in some fashion.

> If the input file is a GeoTiff, do I need ground controlpoints?

By default gdalwarp will look for an affine transform, but I
see you have selected -tps which requires control points as input.
So yes, with -tps the input file would need to have 3 or more ground
control points.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mitchelljj98 at gmail.com  Mon Mar 22 13:54:03 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Mon Mar 22 13:54:10 2010
Subject: [gdal-dev] How can I display the extent of a shapefile when using
	ogrinfo or from another command line tool?
Message-ID: <fa2ac0581003221054r5a19b7cdw88be9bb7c26779dd@mail.gmail.com>

When I trying to use ogrinfo against a shape file it does not show the extent:

like ogrinfo -so shapefile.shp

The documentation shows ogrinfo returning an extent but my example
listed below does not show the extent.

How can I display the extent of a shapefile when using ogrinfo or from
another command line tool?

Thanks,

John

C:\Documents and Settings\jmitchell.INSEQUENCE2>ogrinfo -so K:\GlobalView\NGA\Ba
ltimore_MD_02_2008\128Resolution.shp
INFO: Open of `K:\GlobalView\NGA\Baltimore_MD_02_2008\128Resolution.shp'
      using driver `ESRI Shapefile' successful.
1: 128Resolution (Polygon)

-- 
John J. Mitchell
From CHaste at airdata.co.uk  Mon Mar 22 14:02:04 2010
From: CHaste at airdata.co.uk (Chris Haste)
Date: Mon Mar 22 14:02:12 2010
Subject: [gdal-dev] gdalinfo error 4
In-Reply-To: <4BA76148.1080609@pobox.com>
References: <6AED4720540426409658F48F77981AB30595A6C4@MIA-WEX-V03.wfs.com>
	<931f8ea91003180957k29d60412tdb5217c6959d1a62@mail.gmail.com>
	<6AED4720540426409658F48F77981AB305A8D01E@MIA-WEX-V03.wfs.com>
	<4BA75DF4.4090405@pobox.com>
	<6AED4720540426409658F48F77981AB305A8D09D@MIA-WEX-V03.wfs.com>
	<4BA76148.1080609@pobox.com>
Message-ID: <6AED4720540426409658F48F77981AB305C44938@MIA-WEX-V03.wfs.com>

I have not been able to step through the code yet but have compared the raw data grib headers against the GRIB1 specification so I just thought I would ask the list if anyone has any information/views on the following:

Warning: Inside GRIB2Inventory, Message # 1297
ERROR: Couldn't find 'GRIB' or 'TDLP'
There were 7 trailing bytes in the file

---Ok, this is not a problem simply the remnants of the footer of the bulletin wrapper.

Caution: GRIB1 GDS: FOR ALL NWS products, PV should be 255 rather than 33
GRIB: Problems with ReadGrib1Record called by ReadGrib2Record
Inside ReadGrib1Record
GRIB1 GDS: Expect PV = 255 != 33 

--Ok, this one I do not agree with. The grib file has the hex value 21 (decimal 33) in Octet 5 of the GDS. Gdalinfo seems to indicate that it expects the value FF (255).
This is incorrect the data is NOT a NWS product it is a UK Met Office product as defined in octet 5 of the PDS (value = 74 decimal)

If I look at the specification for WMO Grib I can see (relevant octets marked -->) :- 

Grid Description Section (GDS)
-------------------------------
Byte/Octet	Description
01-03       Length in bytes of the GDS
04          NV, the number of vertical coordinate parameters
-->05       PV, the location (octet number) of the list of vertical coordinate parameters, 		if present or PL, the location (octet number) of the list of numbers of points 		in each row (when no vertical parameters are present), if present or (all bits 		set to 1) if neither are present
06		Data representation type
07-32		Grid description, according to data representation type, except Lambert, 			Mercator or Space View.
07-42		Grid description for Lambert or Mercator grid
07-44		Grid description for Space View perspective grid 
PV		List of vertical coordinate parameters. length = NV x 4 octets; if present, then 		PL = 4 x NV + PV
PL		List of numbers of points in each row, used for quasi-regular grids. length = 		NROWS x 2 octets, where NROWS is the total number of rows defined within the 			grid description

Originating Centers (PDS)
-------------------------
Value 	Contents
07 		US Weather Service - National Met. Center
08 		US Weather Service - NWS Telecomms Gateway
09 		US Weather Service - Field Stations
34 		Japanese Meteorological Agency - Tokyo
52 		National Hurricane Center, Miami
54 		Canadian Meteorological Service - Montreal
57 		U.S. Air Force - Global Weather Center
58 		US Navy - Fleet Numerical Oceanography Center
59 		NOAA Forecast Systems Lab, Boulder CO
-->74		U.K. Met Office - Bracknell
85 		French Weather Service - Toulouse
97 		European Space Agency (ESA)
98 		European Center for Medium-Range Weather Forecasts - Reading
99 		DeBilt, Netherlands


Does this indicate that gdalinfo only expects grib1 data without PV and PL information?

The specification for the GRIB1 that I am working with can be viewed here:
http://www.wmo.int/pages/prog/www/WMOCodes/Guides/GRIB/GRIB1-Contents.html#Introduction

Any comments / thoughts gratefully received.

Chris

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: 22 March 2010 12:24
To: Chris Haste
Subject: Re: [gdal-dev] gdalinfo error 4

Chris Haste wrote:
> Frank,
> 
> Yes, I am aware of that. It is just a temp account and will be removed in a
> day or so.
> 
> So on the face of it, you don't think that the WMO bulletin wrapper text is
> a problem?

Chris,

I wouldn't say my "analysis" was deep enough to answer that.

> Unfortunately, I need to be able to decode these files so if you don't have
> time for a detailed investigation I'd appreciate any pointers as to how to
> proceed by myself.

The GRIB2Inventory() function is not returning anything raster-like.  You
will need to step through it.  I'm seeing several error/warning messages
when I run too that might be important - or not.

warmerda@gdal64[4]% gdalinfo grib1data.grb
Warning: Inside GRIB2Inventory, Message # 1297
ERROR: Couldn't find 'GRIB' or 'TDLP'
There were 7 trailing bytes in the file.

         Caution: GRIB1 GDS: FOR ALL NWS products, PV should be 255 rather than 33
GRIB: Problems with ReadGrib1Record called by ReadGrib2Record
Inside ReadGrib1Record
GRIB1 GDS: Expect PV = 255 != 33

ERROR 4: grib1data.grb is a grib file, but no raster dataset was successfully 
identified.
gdalinfo failed - unable to open 'grib1data.grb'.
GDAL: GDALDeregister_GTiff() called.



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

*** This communication has been sent from World Fuel Services 
Corporation or its subsidiaries or its affiliates for the intended recipient 
only and may contain proprietary, confidential or privileged information. 
If you are not the intended recipient, any review, disclosure, copying, 
use, or distribution of the information included in this communication 
and any attachments is strictly prohibited. If you have received this 
communication in error, please notify us immediately by replying to this 
communication and delete the communication, including any 
attachments, from your computer. Electronic communications sent to or 
from World Fuel Services Corporation or its subsidiaries or its affiliates 
may be monitored for quality assurance and compliance purposes.***


From gbassiere at gmail.com  Mon Mar 22 14:35:47 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Mon Mar 22 14:36:02 2010
Subject: [gdal-dev] How to divide a raster layer into a set of tiles?
Message-ID: <4BA7B883.10001@gmail.com>

Hi,

I'm trying to reproject an aerial imagery dataset with GDAL.

The initial dataset is composed of ECW tiles in EPSG:27572 and my goal
is to compute a new set set of ECW tiles projected in EPSG:2154.

The initial tileset is about 7.5GB. That's why I don't want to merge
everything into a single big ECW.

Reprojecting each individual tile separately is not an option since it
creates black pixels near tile edges (because of warping).

My current workflow consists in the following steps:
1) create a single GDAL layer from all initial tiles with gdalbuildvrt
2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
3) divide this virtual raster into a new set of tile using gdal_retile.py

The problem with this workflow is that it creates non-georeferenced
tiles (I don't know if this is the intended behaviour of this command).

Hence my question, how do I cut up a raster layer into a set of
georeferenced tiles with GDAL?

Cheers
-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From even.rouault at mines-paris.org  Mon Mar 22 15:09:55 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Mar 22 15:10:09 2010
Subject: [gdal-dev] print throw a SyntaxError with Python 2.6
In-Reply-To: <4BA38064.1020301@gmail.com>
References: <4BA38064.1020301@gmail.com>
Message-ID: <201003222009.55871.even.rouault@mines-paris.org>

Gilles,

Yes this is a known regression of GDAL 1.7.0. See 
http://trac.osgeo.org/gdal/ticket/3441 that contains the fix. You can grab a 
working version of gdal_retile.py from latest gdal-svn-stable archive from 
http://download.osgeo.org/gdal/daily/

Best regards,

Even

Le Friday 19 March 2010 14:47:16 Gilles Bassi?re, vous avez ?crit?:
> Hi,
>
> I got the following error with gdal_retile.py (fresh GDAL 1.7.1 install
>
> on an Ubuntu jaunty box):
> >   File "/home/gba/Apps/usr/bin/gdal_retile.py", line 273
> >     print("Building internal Index for %d tile(s) ..." % len(inputTiles),
> > end=' ') ^ SyntaxError: invalid syntax
>
> My Python verstion is:
> > $ python -V
> > Python 2.6.2
>
> I think the problem comes from the use of print as a function instead of
> a statement. Indeed, as long as print is considered a statement, the
> parenthesis delimits a tuple (not function arguments) and a tuple
> doesn't accept named arguments, hence the SyntaxError.
>
> I've been able to work around this by adding:
> > from __future__ import print_function
>
> at the beginning of the script, as suggested in
> http://docs.python.org/release/2.6.2/library/functions.html#print.
>
> Regards


From jukka.rahkonen at mmmtike.fi  Mon Mar 22 15:29:50 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Mar 22 15:32:43 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
References: <4BA7B883.10001@gmail.com>
Message-ID: <loom.20100322T202440-624@post.gmane.org>

Gilles Bassi?re <gbassiere <at> gmail.com> writes:

> 
> Hi,
> 
> I'm trying to reproject an aerial imagery dataset with GDAL.
> 
> The initial dataset is composed of ECW tiles in EPSG:27572 and my goal
> is to compute a new set set of ECW tiles projected in EPSG:2154.
...

> My current workflow consists in the following steps:
> 1) create a single GDAL layer from all initial tiles with gdalbuildvrt
> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)

I would perhaps calculate the extents I want the output tiles to have and run
gdalwarp for each tile with -te option.

-Jukka Rahkonen-

From jukka.rahkonen at mmmtike.fi  Mon Mar 22 15:32:19 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Mon Mar 22 15:36:50 2010
Subject: [gdal-dev] Re: How can I display the extent of a shapefile when
	using	ogrinfo or from another command line tool?
References: <fa2ac0581003221054r5a19b7cdw88be9bb7c26779dd@mail.gmail.com>
Message-ID: <loom.20100322T203141-427@post.gmane.org>

John Mitchell <mitchelljj98 <at> gmail.com> writes:

> 
> When I trying to use ogrinfo against a shape file it does not show the extent:
> 
> like ogrinfo -so shapefile.shp

Try ogrinfo -so -al shapefile.shp

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Mon Mar 22 16:04:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Mar 22 16:04:57 2010
Subject: [gdal-dev] How to divide a raster layer into a set of tiles?
In-Reply-To: <4BA7B883.10001@gmail.com>
References: <4BA7B883.10001@gmail.com>
Message-ID: <201003222104.47236.even.rouault@mines-paris.org>

Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit?:
> Hi,
>
> The problem with this workflow is that it creates non-georeferenced
> tiles (I don't know if this is the intended behaviour of this command).

gdal_retile.py *does* create georeferenced tiles. I've just verified it. What 
make you think the contrary ?


From even.rouault at mines-paris.org  Mon Mar 22 16:06:02 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Mar 22 16:06:12 2010
Subject: [gdal-dev] help compiling hdf5  option on linux
In-Reply-To: <4BA3E505.6050401@noaa.gov>
References: <4BA139E9.6020601@noaa.gov> <20100318085738.5bbc75de@asigrid01>
	<4BA3E505.6050401@noaa.gov>
Message-ID: <201003222106.02910.even.rouault@mines-paris.org>

John,

Re-try but remove the /lib suffix, so something like :

--with-hdf5=/usr/local/contrib/hdf5-1.8.4

The configure script will look for include files in the include subdirectory 
and library files in the lib subdirectory

Le Friday 19 March 2010 21:56:37 John Cartwright, vous avez ?crit?:
> Thanks for suggestions Antonio and Vincent.  Unfortunately, neither
>
> --with-hdf5=/usr/local/contrib/hdf5-1.8.4/lib
>
> nor
>
> --with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5-1
>.8.4/lib
>
> made any difference.
>
>
> --john
>
> On 03/18/2010 01:57 AM, Antonio Valentino wrote:
> > Hi John,
> >
> > Il giorno Wed, 17 Mar 2010 14:22:01 -0600
> >
> > John Cartwright <John.C.Cartwright@noaa.gov> ha scritto:
> >> Hello All,
> >>
> >> I'm trying to get 1.7.1 compiled on a 64-bit RHEL 5 server using
> >> hdf5-1.8.4-patch1.  I have hdf5 and netcdf apparently compiled
> >> successfully and have included the following in my configure statement
> >> for gdal:
> >>
> >>   --with-hdf5=/usr/local/contrib/hdf5-1.8.4
> >
> > not sure, but maybe you should use something like
> >
> >  
> > --with-hdf5=/usr/local/contrib/hdf5-1.8.4/include,/usr/local/contrib/hdf5
> >-1.8.4/lib
> >
> >
> > best regards
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From christian.mueller at nvoe.at  Mon Mar 22 16:35:58 2010
From: christian.mueller at nvoe.at (Christian =?iso-8859-1?Q?M=FCller?=)
Date: Mon Mar 22 16:41:56 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
In-Reply-To: <201003222104.47236.even.rouault@mines-paris.org>
References: <4BA7B883.10001@gmail.com>
	<201003222104.47236.even.rouault@mines-paris.org>
Message-ID: <20100322203558.3836.qmail@mail.linux4all.at>

gdal_retile.py definitely creates georeferenced tiles, I developed this 
utility. 

I did some experiments reprojecting the single tiles while retiling, but it 
simply does not work. As a consequence I canceled the reprojecting support. 

The solution for your problem is: 

1) Use gdal_merge to create the big image
2) reproject with gdal_warp
3) use gdal_retile to create your new tiles 

I did a lot of experiments to avoid creating the big picture without 
success. 


Even Rouault writes: 

> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit :
>> Hi, 
>>
>> The problem with this workflow is that it creates non-georeferenced
>> tiles (I don't know if this is the intended behaviour of this command).
> 
> gdal_retile.py *does* create georeferenced tiles. I've just verified it. What 
> make you think the contrary ? 
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 

From gregor at hostgis.com  Mon Mar 22 18:16:30 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Mon Mar 22 18:16:45 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
Message-ID: <4BA7EC3E.8080102@hostgis.com>

Hey guys. A few weeks back, Chaitanya helped us out with some fixes 
regarding unixODBC on 64-bit platforms, and got MapServer able to render 
remote data via ODBC from PostgreSQL and MySQL. Thanks a million!

Now we're on the last step: getting OGR data sources to work when the 
ODBC server is Microsoft SQL Server. Unlike MySQL and PgSQL, though, MS 
SQL returns some weird binary stuff:

$ ogrinfo test.ovf
ERROR 1: No column definitions found for table 
'???o??????y.????????????y', layer not usable.
ERROR 1: No column definitions found for table 
'???????????????????????????.????????????????????????S', layer not usable.
ERROR 1: No column definitions found for table 
'???????????????????????????.???????????????????????????EA', layer not 
usable.
(... and so on ...)


PHP and MS SQL and ODBC get along just fine as long as I set my ODBCINI 
and FREETDSCONF files, and make sure to use a DSN instead of a DSN-less 
connection string. I can use the isql program and connect too. So the 
basic unixODBC and MS SQL layers seem to be working okay.

Any ideas?

The OVF is as follows:

<OGRVRTDataSource>
     <OGRVRTLayer name="dsn">
         <SrcDataSource>ODBC:user/pass@dsn</SrcDataSource>
         <SrcLayer>cities</SrcLayer>
         <GeometryType>wkbPoint</GeometryType>
         <LayerSRS>WGS84</LayerSRS>
         <GeometryField encoding="PointFromColumns" x="x" y="y"/>
     </OGRVRTLayer>
</OGRVRTDataSource>


The odbc.ini is:

[dsn]
Driver  = Microsoft SQL Server
Server  = ec2-A-B-C-D.compute-1.amazonaws.com
Port    = 1433
Database = testing
TDS_Version = 7.0

The freetds.conf is:

[global]
tds version = 7.0
text size = 64512
[dsn]
host = ec2-A-B-C-D.compute-1.amazonaws.com
port = 1433


-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From gbassiere at gmail.com  Tue Mar 23 04:41:19 2010
From: gbassiere at gmail.com (=?ISO-8859-1?Q?Gilles_Bassi=E8re?=)
Date: Tue Mar 23 04:44:43 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
In-Reply-To: <20100322203558.3836.qmail@mail.linux4all.at>
References: <4BA7B883.10001@gmail.com>	<201003222104.47236.even.rouault@mines-paris.org>
	<20100322203558.3836.qmail@mail.linux4all.at>
Message-ID: <4BA87EAF.8050109@gmail.com>

Christian M?ller wrote:
> gdal_retile.py definitely creates georeferenced tiles, I developed this
> utility.
> I did some experiments reprojecting the single tiles while retiling, but
> it simply does not work. As a consequence I canceled the reprojecting
> support.
> The solution for your problem is:
> 1) Use gdal_merge to create the big image
> 2) reproject with gdal_warp
> 3) use gdal_retile to create your new tiles
> I did a lot of experiments to avoid creating the big picture without
> success.

I understand. In my case, gdal_retile.py eventually crashed with a
Python MemoryError. I assume it is unsurprising with a 7.5GB input for a
single Python process.

> 
> Even Rouault writes:
>> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit :
>>> Hi,
>>> The problem with this workflow is that it creates non-georeferenced
>>> tiles (I don't know if this is the intended behaviour of this command).
>>
>> gdal_retile.py *does* create georeferenced tiles. I've just verified
>> it. What make you think the contrary ?
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From gbassiere at gmail.com  Tue Mar 23 04:32:26 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Tue Mar 23 04:49:04 2010
Subject: [gdal-dev] How to divide a raster layer into a set of tiles?
In-Reply-To: <201003222104.47236.even.rouault@mines-paris.org>
References: <4BA7B883.10001@gmail.com>
	<201003222104.47236.even.rouault@mines-paris.org>
Message-ID: <4BA87C9A.8020104@gmail.com>

Even Rouault wrote:
> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit :
>> Hi,
>>
>> The problem with this workflow is that it creates non-georeferenced
>> tiles (I don't know if this is the intended behaviour of this command).
> 
> gdal_retile.py *does* create georeferenced tiles. I've just verified it. What 
> make you think the contrary ?
> 
> 

I created the new tile set with this command:
$ gdal_retile.py -targetDir $DATA_OUT/ -ps 10000 10000 -of ECW
$DATA/ortho-dept04-2004-lam93.vrt

and if I run gdalinfo on one of the resulting tiles, I get:
$ gdalinfo $DATA_OUT/ortho-dept04-2004-lam93_04_08.ecw
Driver: ECW/ERMapper Compressed Wavelets
Files:
/home/gilux/Data/ortho-dept04-2004-lam93/ortho-dept04-2004-lam93_04_08.ecw

/home/gilux/Data/ortho-dept04-2004-lam93/ortho-dept04-2004-lam93_04_08.ecw.aux.xml
Size is 10000, 10000
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["GRS 1980(IUGG, 1980)",
        DATUM["unknown",
            SPHEROID["GRS80",6378137,298.257222101],
            TOWGS84[0,0,0,0,0,0,0]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",49],
    PARAMETER["standard_parallel_2",44],
    PARAMETER["latitude_of_origin",46.5],
    PARAMETER["central_meridian",3],
    PARAMETER["false_easting",700000],
    PARAMETER["false_northing",6600000],
    UNIT["Meter",1]]
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,10000.0)
Upper Right (10000.0,    0.0)
Lower Right (10000.0,10000.0)
Center      ( 5000.0, 5000.0)
Band 1 Block=10000x1 Type=Byte, ColorInterp=Red
  Overviews: arbitrary
Band 2 Block=10000x1 Type=Byte, ColorInterp=Green
  Overviews: arbitrary
Band 3 Block=10000x1 Type=Byte, ColorInterp=Blue
  Overviews: arbitrary

The tiles are actually georeferenced but pixel coordinates are used. For
every tile, the corner coordinates are the same and it corresponds to
the -ps option.

-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From mail at andreas-joisten.de  Tue Mar 23 04:51:57 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Tue Mar 23 04:54:05 2010
Subject: [gdal-dev] ERROR 6: Failed to initialize PROJ.4 -- convert from BNG
	to WGS84; using gdalwarp
Message-ID: <20100323085158.794E53B79AC@dd2010.kasserver.com>

Hi all,

I want to use gdalwarp to convert a GeoTiff file in BNG (British National Grid) to WGS84, but I got the following error:

ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.
9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs
'.

The input file in BNG looks like:

Size is 2365, 2366
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["OSGB 1936",
        DATUM["OSGB_1936",
            SPHEROID["Airy 1830",6377563.396,299.3249646000044,
                AUTHORITY["EPSG","7001"]],
            AUTHORITY["EPSG","6277"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4277"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",49],
    PARAMETER["central_meridian",-2],
    PARAMETER["scale_factor",0.9996012717],
    PARAMETER["false_easting",400000],
    PARAMETER["false_northing",-100000],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (546999.336021105410000,263500.317128534600000)
Pixel Size = (0.634719746381245,-0.634719746381245)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (  546999.336,  263500.317)
Lower Left  (  546999.336,  261998.570)
Upper Right (  548500.448,  263500.317)
Lower Right (  548500.448,  261998.570)
Center      (  547749.892,  262749.444)
Band 1 Block=2365x3 Type=Byte, ColorInterp=Palette


This is the command to convert into WGS84:

gdalwarp -s_srs "+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs" -t_srs "+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs" geo_BNG_proj4.tif  geo_wgs84_13.tif


Which data is required to initialize PROJ.4 correct?


Many thanks for your help.





From christian.mueller at nvoe.at  Tue Mar 23 05:58:43 2010
From: christian.mueller at nvoe.at (Christian =?iso-8859-1?Q?M=FCller?=)
Date: Tue Mar 23 06:01:09 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
In-Reply-To: <4BA87EAF.8050109@gmail.com>
References: <4BA7B883.10001@gmail.com>
	<201003222104.47236.even.rouault@mines-paris.org>
	<20100322203558.3836.qmail@mail.linux4all.at>
	<4BA87EAF.8050109@gmail.com>
Message-ID: <20100323095843.25791.qmail@mail.linux4all.at>

That is a surprise. 

In all my tests I had no memory problems with gdal_retile. Sometimes I had 
some memory problems with gdal_merge. The biggest input file for gdal_retile 
was a 80 GB Erdas image (not compressed) and it works fine. 

I have never testet with an ECW File and my tests run on a Linux Box or AIX 
Box. 

Perhaps the problem is in the ECW gdal driver. You can try to transform your 
ecw file in another format using gdal_transform. 

 


Gilles Bassi?re writes: 

> Christian M?ller wrote:
>> gdal_retile.py definitely creates georeferenced tiles, I developed this
>> utility.
>> I did some experiments reprojecting the single tiles while retiling, but
>> it simply does not work. As a consequence I canceled the reprojecting
>> support.
>> The solution for your problem is:
>> 1) Use gdal_merge to create the big image
>> 2) reproject with gdal_warp
>> 3) use gdal_retile to create your new tiles
>> I did a lot of experiments to avoid creating the big picture without
>> success.
> 
> I understand. In my case, gdal_retile.py eventually crashed with a
> Python MemoryError. I assume it is unsurprising with a 7.5GB input for a
> single Python process. 
> 
>> 
>> Even Rouault writes:
>>> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit :
>>>> Hi,
>>>> The problem with this workflow is that it creates non-georeferenced
>>>> tiles (I don't know if this is the intended behaviour of this command).
>>>
>>> gdal_retile.py *does* create georeferenced tiles. I've just verified
>>> it. What make you think the contrary ? 
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
> 
> -- 
> Gilles Bassi?re - Web/GIS software engineer
> http://gbassiere.free.fr/
 

From ChDohmen at gmx.de  Tue Mar 23 10:04:49 2010
From: ChDohmen at gmx.de (Christoph Dohmen)
Date: Tue Mar 23 13:33:02 2010
Subject: [gdal-dev] how: dealing with osm data and creating custom shape
	files
Message-ID: <20100323140449.301230@gmx.net>

Hi all,

thanks to the hints from last week I was able to successfully create a
postgresql database with osm data and from there I am able to create
shape files containing all the attributes from osm.

Thanks to Ralf and Frederik!

But now I want to group those data together.
Well, I want to create a shapefile containing all road-objects.
This is quite easy using ogr2ogr select everything with a value
for highway-attribute. Doing the same for rivers is also done
in no time. BUT, I want to create an attribute containing the
attribute value like 'object_id'. This should be set to the value
of highway-atrtibute in case of generating the road-file and it
should be set to the value of the waterway-attribute in case of
generating the river-file.

Can anyone give me a hint?

Christoph
-- 
Sicherer, schneller und einfacher. Die aktuellen Internet-Browser -
jetzt kostenlos herunterladen! http://portal.gmx.net/de/go/chbrowser
From gbassiere at gmail.com  Tue Mar 23 11:01:33 2010
From: gbassiere at gmail.com (=?ISO-8859-1?Q?Gilles_Bassi=E8re?=)
Date: Tue Mar 23 13:33:13 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
In-Reply-To: <20100323095843.25791.qmail@mail.linux4all.at>
References: <4BA7B883.10001@gmail.com>
	<201003222104.47236.even.rouault@mines-paris.org>
	<20100322203558.3836.qmail@mail.linux4all.at>
	<4BA87EAF.8050109@gmail.com>
	<20100323095843.25791.qmail@mail.linux4all.at>
Message-ID: <4BA8D7CD.1050300@gmail.com>

Christian M?ller wrote:
> That is a surprise.
> In all my tests I had no memory problems with gdal_retile. Sometimes I
> had some memory problems with gdal_merge. The biggest input file for
> gdal_retile was a 80 GB Erdas image (not compressed) and it works fine.
> I have never testet with an ECW File and my tests run on a Linux Box or
> AIX Box.
> Perhaps the problem is in the ECW gdal driver. You can try to transform
> your ecw file in another format using gdal_transform.
> 

That's may be caused by something wrong with the ECW driver indeed. I
will test gdal_retile again once I have a clean GDAL+ECW install.

Regards
Gilles

> 
> 
> Gilles Bassi?re writes:
>> Christian M?ller wrote:
>>> gdal_retile.py definitely creates georeferenced tiles, I developed this
>>> utility.
>>> I did some experiments reprojecting the single tiles while retiling, but
>>> it simply does not work. As a consequence I canceled the reprojecting
>>> support.
>>> The solution for your problem is:
>>> 1) Use gdal_merge to create the big image
>>> 2) reproject with gdal_warp
>>> 3) use gdal_retile to create your new tiles
>>> I did a lot of experiments to avoid creating the big picture without
>>> success.
>>
>> I understand. In my case, gdal_retile.py eventually crashed with a
>> Python MemoryError. I assume it is unsurprising with a 7.5GB input for a
>> single Python process.
>>>
>>> Even Rouault writes:
>>>> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit :
>>>>> Hi,
>>>>> The problem with this workflow is that it creates non-georeferenced
>>>>> tiles (I don't know if this is the intended behaviour of this
>>>>> command).
>>>>
>>>> gdal_retile.py *does* create georeferenced tiles. I've just verified
>>>> it. What make you think the contrary ?
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>  
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>  
>>
>> -- 
>> Gilles Bassi?re - Web/GIS software engineer
>> http://gbassiere.free.fr/
> 
> 


-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From gbassiere at gmail.com  Tue Mar 23 11:08:58 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Tue Mar 23 13:33:37 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
In-Reply-To: <loom.20100322T202440-624@post.gmane.org>
References: <4BA7B883.10001@gmail.com>
	<loom.20100322T202440-624@post.gmane.org>
Message-ID: <4BA8D98A.2020905@gmail.com>

Jukka Rahkonen wrote:
> Gilles Bassi?re <gbassiere <at> gmail.com> writes:
> 
>> Hi,
>>
>> I'm trying to reproject an aerial imagery dataset with GDAL.
>>
>> The initial dataset is composed of ECW tiles in EPSG:27572 and my goal
>> is to compute a new set set of ECW tiles projected in EPSG:2154.
> ...
> 
>> My current workflow consists in the following steps:
>> 1) create a single GDAL layer from all initial tiles with gdalbuildvrt
>> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
> 
> I would perhaps calculate the extents I want the output tiles to have and run
> gdalwarp for each tile with -te option.
> 
> -Jukka Rahkonen-
> 

Hi Jukka,

Thanks for your suggestion. I've been able to get the extent
automatically computed by a little Bash scripting:

 for x in `seq -w 895 5 1020`; do
     for y in `seq -w 6290 5 6410`; do
         e="$((10#${x}*1000)) $((10#${y}*1000)) $(((10#${x}+5)*1000))
$(((10#${y}+5)*1000))"
         echo "=== Processing tile $x-$y ==="
         gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154" -te
$e -ts 10000 10000 ortho-dept04-2004-la2e.vrt
ortho-dept04-2004-lam93-tif/04-2004-$x-$y-lam93.tif
     done
 done

Regards

-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From jukka.rahkonen at mmmtike.fi  Tue Mar 23 07:54:50 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Mar 23 13:33:51 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles?
References: <4BA7B883.10001@gmail.com>
Message-ID: <loom.20100323T125053-679@post.gmane.org>

Gilles Bassi?re <gbassiere <at> gmail.com> writes:

> 
> Hi,
> 
> I'm trying to reproject an aerial imagery dataset with GDAL.
> 
> The initial dataset is composed of ECW tiles in EPSG:27572 and my goal
> is to compute a new set set of ECW tiles projected in EPSG:2154.

Hi,

May I ask if you are ready with your new tiles? The task is for sure doable with
a few alternative ways. It would be nice to know which route you decided to
follow, perhaps with some examples of the commands you have used.

-Jukka Rahkonen-

From gbassiere at gmail.com  Tue Mar 23 11:40:45 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Tue Mar 23 13:33:55 2010
Subject: [gdal-dev] GDAL custom build (ECW required)
Message-ID: <4BA8E0FD.6000401@gmail.com>

Hi (again),

I'm facing problems with GeoTiff compression on a custom build of GDAL.

My source dataset is a virtual raster composed of ECW tiles built with:
 gdalbuildvrt ortho-dept04-2004-la2e.vrt ortho-dept04-2004-la2e/*.ecw

The error comes when I try to extract and reproject some portions of
this virtual raster with gdalwarp. With no compression, everything runs
fine but I get huge GeoTiffs. Problems arise with compression:

with COMPRESS=JPEG:

 Creating output file that is 10000P x 10000L.
 Processing input file ortho-dept04-2004-la2e.vrt.
 0...10...20...30..gdalwarp: tif_jpeg.c:691: JPEGPreDecode: Assertion
`sp->cinfo.comm.is_decompressor' failed.
 Aborted

with COMPRESS=DEFLATE:

 Creating output file that is 10000P x 10000L.
 Processing input file ortho-dept04-2004-la2e.vrt.
 0...10...20...30...40...50...60...70...80...90ERROR 1:
ZIPDecode:ortho-dept04-2004-lam93-tif/04-2004-0895-6290-lam93.tif:
Decoding error at scanline 0, incorrect header check
 ERROR 1: TIFFReadEncodedTile() failed.
 ...100 - done.

with COMPRESS=LZW:

 Creating output file that is 10000P x 10000L.
 Processing input file ortho-dept04-2004-la2e.vrt.
 0...10...20...30...40...50...60...70...80...90Segmentation fault

In the case of JPEG, the error appears randomly (most files are created
with no error) but in the cases of LZW and DEFLATE, it happens every
time and always after the 90% mark.

The command used was:
 gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154" \
    -te $e -ts 10000 10000 -co COMPRESS=LZW -co TILED=YES \
    -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 ortho-dept04-2004-la2e.vrt \
    ortho-dept04-2004-lam93-tif/04-2004-$x-$y-lam93.tif

My system is Ubuntu Jaunty (9.04) and all dependencies where installed
with the package manager (including -dev packages). I've built libecw
and gdal from source with the following commands:

# Build libecw
DEST=`pwd`
cd ../src/libecwj2-3.3/
./configure --prefix=$DEST
make -j2
mkdir $DEST/include
make install

# Build GDAL
cd ../gdal-1.7.1/
./configure --prefix=$DEST --with-ecw=$DEST --with-python
make -j2
source ../../env/gdal/bin/activate # virtualenv for Python bindings
make install
deactivate

# Register libs in $DEST/lib
sudo ldconfig

Because of ticket #3139 [1], I suspect something wrong with my build but
I don't know what. Any help would be much appreciated.

Thanks in advance

[1] https://trac.osgeo.org/gdal/ticket/3139

-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From mitchelljj98 at gmail.com  Tue Mar 23 11:48:17 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Tue Mar 23 13:34:39 2010
Subject: [gdal-dev] Re: How can I display the extent of a shapefile
	when	using	ogrinfo or from another command line tool?
References: <fa2ac0581003221054r5a19b7cdw88be9bb7c26779dd@mail.gmail.com>
	<loom.20100322T203141-427@post.gmane.org>
Message-ID: <loom.20100323T164004-64@post.gmane.org>

Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:

Thanks,

That worked great!!!  Anyone know why I did not receive the below response to my
question to my email account?  I had to search via google to find this response.

John






From mail at andreas-joisten.de  Tue Mar 23 06:42:06 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Tue Mar 23 13:35:42 2010
Subject: [gdal-dev] Problem with +ellps=airy  which is used for BNG
Message-ID: <20100323104206.755703B2224@dd2010.kasserver.com>

Hi all,

The BNG (British Natial Grid) based on the airy Ellipsoid but GDAL did not know this parameter.


+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs 

Probably, gdal does not know this parameter:  +ellps=airy

But gdal know these parameter:
ellipsoid_code	ellipsoid_name
7001	                 Airy 1830
7002	                 Airy Modified 1849
                

When I try to convert a Geotiff file from BNG to WGS84, I get an exception according to the ellipsoid.


Thanks for your help.




From jrepetto at free.fr  Tue Mar 23 14:06:33 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Mar 23 14:06:43 2010
Subject: [gdal-dev] Problem with +ellps=airy  which is used for BNG
In-Reply-To: <20100323104206.755703B2224@dd2010.kasserver.com>
References: <20100323104206.755703B2224@dd2010.kasserver.com>
Message-ID: <4BA90329.4000106@free.fr>

Andreas Joisten a ?crit :
> Hi all,
> 
> The BNG (British Natial Grid) based on the airy Ellipsoid but GDAL did not know this parameter.
> 
> 
> +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs 
> 
> Probably, gdal does not know this parameter:  +ellps=airy

Hello,

You don't need to specify the ellipsoid, because it is already contained 
in the datum definition :

proj -v +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 
+y_0=-100000 +datum=OSGB36 +units=m +no_defs
#Transverse Mercator
#	Cyl, Sph&Ell
# +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000
# +datum=OSGB36 +units=m +no_defs +ellps=airy
# +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894

Jean-Claude
From gbassiere at gmail.com  Tue Mar 23 14:21:22 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Tue Mar 23 14:21:29 2010
Subject: [gdal-dev] Re: GDAL custom build (ECW required)
In-Reply-To: <4BA8E0FD.6000401@gmail.com>
References: <4BA8E0FD.6000401@gmail.com>
Message-ID: <4BA906A2.3020601@gmail.com>

Gilles Bassi?re wrote:
> Hi (again),
> 
> I'm facing problems with GeoTiff compression on a custom build of GDAL.
> 
> My source dataset is a virtual raster composed of ECW tiles built with:
>  gdalbuildvrt ortho-dept04-2004-la2e.vrt ortho-dept04-2004-la2e/*.ecw
> 
> The error comes when I try to extract and reproject some portions of
> this virtual raster with gdalwarp. With no compression, everything runs
> fine but I get huge GeoTiffs. Problems arise with compression:
> 
> with COMPRESS=JPEG:
> 
>  Creating output file that is 10000P x 10000L.
>  Processing input file ortho-dept04-2004-la2e.vrt.
>  0...10...20...30..gdalwarp: tif_jpeg.c:691: JPEGPreDecode: Assertion
> `sp->cinfo.comm.is_decompressor' failed.
>  Aborted
> 
> with COMPRESS=DEFLATE:
> 
>  Creating output file that is 10000P x 10000L.
>  Processing input file ortho-dept04-2004-la2e.vrt.
>  0...10...20...30...40...50...60...70...80...90ERROR 1:
> ZIPDecode:ortho-dept04-2004-lam93-tif/04-2004-0895-6290-lam93.tif:
> Decoding error at scanline 0, incorrect header check
>  ERROR 1: TIFFReadEncodedTile() failed.
>  ...100 - done.
> 
> with COMPRESS=LZW:
> 
>  Creating output file that is 10000P x 10000L.
>  Processing input file ortho-dept04-2004-la2e.vrt.
>  0...10...20...30...40...50...60...70...80...90Segmentation fault
> 
> In the case of JPEG, the error appears randomly (most files are created
> with no error) but in the cases of LZW and DEFLATE, it happens every
> time and always after the 90% mark.
> 
> The command used was:
>  gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154" \
>     -te $e -ts 10000 10000 -co COMPRESS=LZW -co TILED=YES \
>     -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 ortho-dept04-2004-la2e.vrt \
>     ortho-dept04-2004-lam93-tif/04-2004-$x-$y-lam93.tif
> 
> My system is Ubuntu Jaunty (9.04) and all dependencies where installed
> with the package manager (including -dev packages). I've built libecw
> and gdal from source with the following commands:
> 
> # Build libecw
> DEST=`pwd`
> cd ../src/libecwj2-3.3/
> ./configure --prefix=$DEST
> make -j2
> mkdir $DEST/include
> make install
> 
> # Build GDAL
> cd ../gdal-1.7.1/
> ./configure --prefix=$DEST --with-ecw=$DEST --with-python
> make -j2
> source ../../env/gdal/bin/activate # virtualenv for Python bindings
> make install
> deactivate
> 
> # Register libs in $DEST/lib
> sudo ldconfig
> 
> Because of ticket #3139 [1], I suspect something wrong with my build but
> I don't know what. Any help would be much appreciated.
> 
> Thanks in advance
> 
> [1] https://trac.osgeo.org/gdal/ticket/3139
> 


Below is another example of the strange behaviour of my GDAL build.

I've produced two GeoTiff extracts of my virtual raster with these commands:

$ gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154" \
    -te 910000 6316500 910500 6319000 -ts 1000 5000 -co COMPRESS=JPEG \
    -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 \
    ortho-dept04-2004-la2e.vrt test1000x5000.tif
 Creating output file that is 1000P x 5000L.
 Processing input file ortho-dept04-2004-la2e.vrt.
 0...10...20...30...40...50...60...70...80...90...100 - done.

$ gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154" \
    -te 910000 6315000 915000 6320000 -ts 10000 10000 -co COMPRESS=JPEG \
    -co TILED=YES -co BLOCKXSIZE=512 -co BLOCKYSIZE=512 \
    ortho-dept04-2004-la2e.vrt test10000x10000.tif
 Creating output file that is 10000P x 10000L.
 Processing input file ortho-dept04-2004-la2e.vrt.
 0...10...20...30...40...50...60...70...80...90...100 - done.

The output files can be viewed from
http://depot.makina-corpus.org/public/gdal/

The largest image has a black gap in the middle instead of the actual
data. The smaller image doesn't show this gap and prove that there is
actually data in the input dataset.

Could this be due to wrong values read in the ECW input files?

-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From mail at andreas-joisten.de  Tue Mar 23 14:47:41 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Tue Mar 23 14:47:45 2010
Subject: [gdal-dev] Bug in coordinate system library? unknown elliptical
	parameter for BNG coordinate system
In-Reply-To: <4BA90329.4000106@free.fr>
Message-ID: <20100323184741.E17B313A960@dd2010.kasserver.com>

Hi Jean-Claude,

many thanks for your answer.

As you can see I did not specifiy the ellipsoid parameter:

gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326 input_geotiff_in_BNG.tiff  output_geotiff.tiff


the gdal error message was:
ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.
9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs'.
unknown elliptical parameter name


Is that a bug in GDAL?


Many thanks

----- Original Message -----
From: jrepetto@free.fr
Date: 23.03.2010 19:06:33
Subject: Re: [gdal-dev] Problem with +ellps=airy which is used for BNG


> Andreas Joisten a ?crit :
> > Hi all,
> > 
> > The BNG (British Natial Grid) based on the airy Ellipsoid but GDAL did not know this parameter.
> > 
> > 
> > +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs 
> > 
> > Probably, gdal does not know this parameter:??+ellps=airy
> 
> Hello,
> 
> You don't need to specify the ellipsoid, because it is already contained 
> in the datum definition :
> 
> proj -v +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 
> +y_0=-100000 +datum=OSGB36 +units=m +no_defs
> #Transverse Mercator
> #	 Cyl, Sph&Ell
> # +proj=tmerc +lat_0=49 +lon_0=-2 +k=0.9996012717 +x_0=400000 +y_0=-100000
> # +datum=OSGB36 +units=m +no_defs +ellps=airy
> # +towgs84=446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894
> 
> Jean-Claude
> 




From warmerdam at pobox.com  Tue Mar 23 14:59:40 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 23 14:59:49 2010
Subject: [gdal-dev] Re: GDAL custom build (ECW required)
In-Reply-To: <4BA906A2.3020601@gmail.com>
References: <4BA8E0FD.6000401@gmail.com> <4BA906A2.3020601@gmail.com>
Message-ID: <4BA90F9C.5020904@pobox.com>

Gilles Bassi?re wrote:
>> with COMPRESS=JPEG:
>>
>>  Creating output file that is 10000P x 10000L.
>>  Processing input file ortho-dept04-2004-la2e.vrt.
>>  0...10...20...30..gdalwarp: tif_jpeg.c:691: JPEGPreDecode: Assertion
>> `sp->cinfo.comm.is_decompressor' failed.
>>  Aborted

Gilles,

The likely solution to this problem is to build GDAL with
the internal copy of libtiff.  I have fixed a variety of
bugs related to random read/write support in libtiff on
compressed images and some of those fixes have not yet made
it out into distributions copy of libtiff.

> The largest image has a black gap in the middle instead of the actual
> data. The smaller image doesn't show this gap and prove that there is
> actually data in the input dataset.

I suspect black gaps would be due to a problem introduced in
GDAL warp for 1.7.x and only recently fixed.  I would suggest you
build GDAL from either a stable or trunk snapshot so you will
have the fix for this problem with will also appear in 1.7.2 when
it is released.

> Could this be due to wrong values read in the ECW input files?

While I've had lots of problems with ecw over the years, I don't
see any obvious sign it relates to the ecw side of things.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Mar 23 15:00:33 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 23 15:00:46 2010
Subject: [gdal-dev] Bug in coordinate system library? unknown elliptical
	parameter for BNG coordinate system
In-Reply-To: <20100323184741.E17B313A960@dd2010.kasserver.com>
References: <20100323184741.E17B313A960@dd2010.kasserver.com>
Message-ID: <4BA90FD1.5070602@pobox.com>

Andreas Joisten wrote:
> Hi Jean-Claude,
> 
> many thanks for your answer.
> 
> As you can see I did not specifiy the ellipsoid parameter:
> 
> gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326 input_geotiff_in_BNG.tiff  output_geotiff.tiff
> 
> 
> the gdal error message was:
> ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.
> 9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs'.
> unknown elliptical parameter name
> 
> 
> Is that a bug in GDAL?

Andreas,

Yes, I would say it is. Could you please file a ticket on this?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jrepetto at free.fr  Tue Mar 23 15:10:01 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Tue Mar 23 15:10:11 2010
Subject: [gdal-dev] Re: Bug in coordinate system library? unknown elliptical
 parameter for BNG coordinate system
In-Reply-To: <20100323184741.E17B313A960@dd2010.kasserver.com>
References: <20100323184741.E17B313A960@dd2010.kasserver.com>
Message-ID: <4BA91209.9010709@free.fr>

Andreas Joisten a ?crit :
> 
> As you can see I did not specifiy the ellipsoid parameter:
> 
> gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326 input_geotiff_in_BNG.tiff  output_geotiff.tiff
> 

Sorry, but you didn't give this command line in your first message.

> 
> the gdal error message was:
> ERROR 6: Failed to initialize PROJ.4 with `+proj=tmerc +lat_0=49 +lon_0=-2 +k=0.
> 9996012717 +x_0=400000 +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs'.
> unknown elliptical parameter name
> 


Your command works for me (GDAL 1.7.1) :

$ gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326 essai.ecw essai.tif
Creating output file that is 42102P x 22239L.
Processing input file essai.ecw.
0...

Jean-Claude



From ahh34 at cam.ac.uk  Tue Mar 23 16:19:33 2010
From: ahh34 at cam.ac.uk (Alex Hagen-Zanker)
Date: Tue Mar 23 16:39:29 2010
Subject: [gdal-dev] Re: Bug in coordinate system library? unknown
	elliptical parameter for BNG coordinate system
In-Reply-To: <4BA91209.9010709@free.fr>
References: <20100323184741.E17B313A960@dd2010.kasserver.com>
	<4BA91209.9010709@free.fr>
Message-ID: <Prayer.1.3.2.1003232019330.18365@hermes-2.csi.cam.ac.uk>

Just to remind you: I reported a similar problem when 1.7 just came out. 
Maybe it helps in identifying the problem.

http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg05605.html

Kind regards, Alex
On Mar 23 2010, Jean-Claude REPETTO wrote:

>Andreas Joisten a ?crit :
>> 
>> As you can see I did not specifiy the ellipsoid parameter:
>> 
>> gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326 input_geotiff_in_BNG.tiff 
>> output_geotiff.tiff
>> 
>
>Sorry, but you didn't give this command line in your first message.
>
>> 
>> the gdal error message was: ERROR 6: Failed to initialize PROJ.4 with 
>> `+proj=tmerc +lat_0=49 +lon_0=-2 +k=0. 9996012717 +x_0=400000 
>> +y_0=-100000 +ellps=airy +datum=OSGB36 +units=m +no_defs'. unknown 
>> elliptical parameter name
>> 
>
>
>Your command works for me (GDAL 1.7.1) :
>
>$ gdalwarp -s_srs EPSG:27700 -t_srs EPSG:4326 essai.ecw essai.tif
>Creating output file that is 42102P x 22239L.
>Processing input file essai.ecw.
>0...
>
>Jean-Claude
>
>
>
>_______________________________________________
>gdal-dev mailing list
>gdal-dev@lists.osgeo.org
>http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Alex Hagen-Zanker 
University of Cambridge - Department of Architecture
1-5 Scroope Terrace
Trumpington Street
Cambridge, CB2 1PX



From jukka.rahkonen at mmmtike.fi  Tue Mar 23 16:43:48 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Mar 23 16:44:03 2010
Subject: [gdal-dev] Re: How can I display the extent of a
	shapefile	when	using	ogrinfo or from another command line tool?
References: <fa2ac0581003221054r5a19b7cdw88be9bb7c26779dd@mail.gmail.com>
	<loom.20100322T203141-427@post.gmane.org>
	<loom.20100323T164004-64@post.gmane.org>
Message-ID: <loom.20100323T213749-476@post.gmane.org>

John Mitchell <mitchelljj98 <at> gmail.com> writes:

> 
> Jukka Rahkonen <jukka.rahkonen <at> mmmtike.fi> writes:
> 
> Thanks,
> 
> That worked great!!!  Anyone know why I did not receive the below response 
to my
> question to my email account?  I had to search via google to find 
this response.

Hi,

One reason may be that I did not sent my answer to you but only to the mailing
list through gmane interface. Perhaps you have the similar mailing list settings
than me - mail delivery disabled?

-Jukka-



From gbassiere at gmail.com  Tue Mar 23 17:21:32 2010
From: gbassiere at gmail.com (=?UTF-8?B?R2lsbGVzIEJhc3Npw6hyZQ==?=)
Date: Tue Mar 23 17:21:47 2010
Subject: [gdal-dev] Re: GDAL custom build (ECW required)
In-Reply-To: <4BA90F9C.5020904@pobox.com>
References: <4BA8E0FD.6000401@gmail.com> <4BA906A2.3020601@gmail.com>
	<4BA90F9C.5020904@pobox.com>
Message-ID: <4BA930DC.7080804@gmail.com>

Frank Warmerdam wrote:
> Gilles Bassi?re wrote:
>>> with COMPRESS=JPEG:
>>>
>>>  Creating output file that is 10000P x 10000L.
>>>  Processing input file ortho-dept04-2004-la2e.vrt.
>>>  0...10...20...30..gdalwarp: tif_jpeg.c:691: JPEGPreDecode: Assertion
>>> `sp->cinfo.comm.is_decompressor' failed.
>>>  Aborted
> 
> Gilles,
> 
> The likely solution to this problem is to build GDAL with
> the internal copy of libtiff.  I have fixed a variety of
> bugs related to random read/write support in libtiff on
> compressed images and some of those fixes have not yet made
> it out into distributions copy of libtiff.
> 
>> The largest image has a black gap in the middle instead of the actual
>> data. The smaller image doesn't show this gap and prove that there is
>> actually data in the input dataset.
> 
> I suspect black gaps would be due to a problem introduced in
> GDAL warp for 1.7.x and only recently fixed.  I would suggest you
> build GDAL from either a stable or trunk snapshot so you will
> have the fix for this problem with will also appear in 1.7.2 when
> it is released.
> 
>> Could this be due to wrong values read in the ECW input files?
> 
> While I've had lots of problems with ecw over the years, I don't
> see any obvious sign it relates to the ecw side of things.
> 
> Best regards,

Frank,

I've compiled the svn-stable daily snapshot and used
--with-libtiff=internal. It seems to solve my problem. I don't see
anymore black area and the Tiff/JPEG driver doesn't throw any error.

Thanks you very much

-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/
From ekkehart at gmx.de  Tue Mar 23 17:23:53 2010
From: ekkehart at gmx.de (NopMap)
Date: Tue Mar 23 17:23:54 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <1268258369264-4712621.post@n2.nabble.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
	<1266965795875-4622435.post@n2.nabble.com>
	<1267040120346-4628026.post@n2.nabble.com>
	<1268258369264-4712621.post@n2.nabble.com>
Message-ID: <1269379433252-4787310.post@n2.nabble.com>



Hi!

Eventually I had some time to look into this again.

First thing I tried is updating python to 2.6.5 - no change, still crashes.

Then I tried running exactly the same files in a 32bit XP virtual machine.
It works there. This is a workaround, but not a solution as I cannot run the
whole workflow there.

It seems that this is a Windows7 64bit specific problem.

What is the proper procedure to file a bug report for GDAL?

bye
          Nop

-- 
View this message in context: http://n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p4787310.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Tue Mar 23 17:55:37 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Tue Mar 23 17:55:46 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <1269379433252-4787310.post@n2.nabble.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov> <1266965795875-4622435.post@n2.nabble.com>
	<1267040120346-4628026.post@n2.nabble.com>
	<1268258369264-4712621.post@n2.nabble.com>
	<1269379433252-4787310.post@n2.nabble.com>
Message-ID: <f3b73b7d1003231455y772feff8o877739b19d740e2c@mail.gmail.com>

Hi,

You didn't mention whether you are running against the x64 version of
python.exe or the x86 version?
I also see a problem when running the x64 version of python with numpy
installed could crash gdal (x64), however without installing numpy it should
work properly.


> It seems that this is a Windows7 64bit specific problem.
>
>
If you could do a test with the binaries provided at
http://vbkto.dyndns.org/sdk/  that would be helpful. It seems the python
auto-tests are working well with these packages on a Win2003 Server x64
platform.

What is the proper procedure to file a bug report for GDAL?
>
>
Obtain an osgeo userid and submit a ticket in the GDAL trac:
http://trac.osgeo.org/gdal/


Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100323/bc105526/attachment-0001.html
From kmichael.aye at gmail.com  Tue Mar 23 18:22:34 2010
From: kmichael.aye at gmail.com (Michael Aye)
Date: Tue Mar 23 18:22:37 2010
Subject: [gdal-dev] VRT creation with Python
Message-ID: <1269382954306-4787592.post@n2.nabble.com>


Dear all,

I have some, as of yet unpublished, PDS data I am reading via a well working
simple vrt definition looking like this:

<VRTDataset rasterXSize="1092" rasterYSize="1056">
 <VRTRasterBand dataType="UInt16" band="1" subClass="VRTRawRasterBand">
   <SourceFilename
relativetoVRT="1">FC1_2005-06-23T21.55.54.000Z_ID10_0000019407_F1.img</SourceFilename>
   <ImageOffset>8704</ImageOffset>
   <PixelOffset>2</PixelOffset>
   <LineOffset>2184</LineOffset>
   <ByteOrder>LSB</ByteOrder>
 </VRTRasterBand>
</VRTDataset>

which is saved as a FC1.vrt file.

How can I programmatically opening many more of these images without
creating another vrt file for each?
Basically, how can I change the SourceFilename programmatically for the
loaded virtual driver? For the dataset I can't see a handle, as the metadata
for a dataset I load in with this vrt is empty.

I appreciate any hints or literature I really should read that I ignored so
far. ;)

Best regards,
Michael
-- 
View this message in context: http://n2.nabble.com/VRT-creation-with-Python-tp4787592p4787592.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From nate-lists at calftrail.com  Tue Mar 23 19:31:22 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Tue Mar 23 19:31:26 2010
Subject: [gdal-dev] gdal2tiles.py "direct warping" issue?
Message-ID: <AAE01C2E-E7C2-493F-940A-20056CD39BA8@calftrail.com>

I'm looking through gdal2tiles.py to get a feel for what it's doing and any potential issues I might encounter. Around line 801 of the script in GDAL 1.7.1 (right after the call to gdal.AutoCreateWarpedVRT) there is a comment that says:

TODO: HIGH PRIORITY: Correction of AutoCreateWarpedVRT according to the max zoomlevel for correct direct warping!!!

What is this about? Is there a problem with the warping done by gdal2tiles.py in some cases?

thanks,
-natevw
http://calftrail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100323/10860d09/attachment.html
From nate-lists at calftrail.com  Tue Mar 23 19:27:26 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Tue Mar 23 19:33:39 2010
Subject: [gdal-dev] gdal2tiles.py "direct warping" issue?
Message-ID: <4443D81E-468D-4D3E-8373-7B624BD4F1AF@calftrail.com>

I'm looking through gdal2tiles.py to get a feel for how it works and any potential issues I might encounter. Around line 801 of the script in GDAL 1.7.1 (right after the call to gdal.AutoCreateWarpedVRT) there is a comment that says:

TODO: HIGH PRIORITY: Correction of AutoCreateWarpedVRT according to the max zoomlevel for correct direct warping!!!

What is this about? Is there a problem with the warping done by gdal2tiles.py in some cases?

thanks,
-natevw
http://calftrail.com
From EAdam at co.lincoln.or.us  Tue Mar 23 20:22:02 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Tue Mar 23 20:42:42 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles
In-Reply-To: <20100323182134.9253BE00BCB@lists.osgeo.org>
References: <20100323182134.9253BE00BCB@lists.osgeo.org>
Message-ID: <4BA8F8B9.4F75.00CE.0@co.lincoln.or.us>

Gilles,
     I do a similar process (build large vrt mosaic, reproject the
mosaic vrt to another vrt, tile the reprojected mosaic vrt in new
projection to tif) although my end tiles are in tif and not compressed. 
My method is the brute force way and not elegant at all.  You may also
want to know that I have been advised
(http://news.gmane.org/gmane.comp.gis.gdal.devel) that this is very
inefficient  and pushing the VRT format.  Steps 1 and 2 are the same as
you describe.

1) create a single GDAL layer from all initial tiles with gdalbuildvrt
2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
3) Tile it with gdal_translate:  gdal_translate -projwin 7288440 446648
7306569 429923 mosaicvrtprj.vrt tile1.tif

The brute force part is between 2 and 3.  Make a vector file (shp or
PostGIS) grid of the new tiles in the desired projection.  Convert the
polygon grid to points, then using SQL in a database, group by the
polygon name (which needs to be retained when converted to points) and
take the min/max of x and y.  Then use SQL to concatenate gdal_translate
commands with the correct parameters.  The end result is a table of
gdal_translate commands that will make the tiles.  Save as text and make
needed minimal modification to fire off all those commands.   Not an
elegant method at all.  It could probably be done all in bash with
gdalinfo, grep, and sed, which would at least not require a database,
even if it still is a brute force method.  

I don't know if using ecw and other formats or compression options may
prevent the reading through of vrt files.  My work has been simpler,
uncompressed tif from AI binary grids.  You may also want to make sure
that each of your vrt files has all the proper projection and other
information from steps 1 and 2.  gdalinfo ortho-dept04-2004-lam93.vrt
might help.  


Bests, Eli


   2. Re: How to divide a raster layer into a set of tiles?
      (Gilles Bassi?re)
   3. Re: Re: How to divide a raster layer into a set of tiles?
      (Gilles Bassi?re)
   4. Re: How to divide a raster layer into a set of tiles?
      (Jukka Rahkonen)

------------------------------

Message: 2
Date: Tue, 23 Mar 2010 16:01:33 +0100
From: Gilles Bassi?re <gbassiere@gmail.com>
Subject: [gdal-dev] Re: How to divide a raster layer into a set of
	tiles?
To: Christian M?ller <christian.mueller@nvoe.at>
Cc: gdal-dev@lists.osgeo.org 
Message-ID: <4BA8D7CD.1050300@gmail.com>
Content-Type: text/plain; charset=ISO-8859-1

Christian M?ller wrote:
> That is a surprise.
> In all my tests I had no memory problems with gdal_retile. Sometimes
I
> had some memory problems with gdal_merge. The biggest input file for
> gdal_retile was a 80 GB Erdas image (not compressed) and it works
fine.
> I have never testet with an ECW File and my tests run on a Linux Box
or
> AIX Box.
> Perhaps the problem is in the ECW gdal driver. You can try to
transform
> your ecw file in another format using gdal_transform.
> 

That's may be caused by something wrong with the ECW driver indeed. I
will test gdal_retile again once I have a clean GDAL+ECW install.

Regards
Gilles

> 
> 
> Gilles Bassi?re writes:
>> Christian M?ller wrote:
>>> gdal_retile.py definitely creates georeferenced tiles, I developed
this
>>> utility.
>>> I did some experiments reprojecting the single tiles while
retiling, but
>>> it simply does not work. As a consequence I canceled the
reprojecting
>>> support.
>>> The solution for your problem is:
>>> 1) Use gdal_merge to create the big image
>>> 2) reproject with gdal_warp
>>> 3) use gdal_retile to create your new tiles
>>> I did a lot of experiments to avoid creating the big picture
without
>>> success.
>>
>> I understand. In my case, gdal_retile.py eventually crashed with a
>> Python MemoryError. I assume it is unsurprising with a 7.5GB input
for a
>> single Python process.
>>>
>>> Even Rouault writes:
>>>> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit
:
>>>>> Hi,
>>>>> The problem with this workflow is that it creates
non-georeferenced
>>>>> tiles (I don't know if this is the intended behaviour of this
>>>>> command).
>>>>
>>>> gdal_retile.py *does* create georeferenced tiles. I've just
verified
>>>> it. What make you think the contrary ?
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org 
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>>  
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org 
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>  
>>
>> -- 
>> Gilles Bassi?re - Web/GIS software engineer
>> http://gbassiere.free.fr/ 
> 
> 


-- 
Gilles Bassi?re - Web/GIS software engineer
http://gbassiere.free.fr/ 


------------------------------

Message: 3
Date: Tue, 23 Mar 2010 16:08:58 +0100
From: Gilles Bassi?re <gbassiere@gmail.com>
Subject: Re: [gdal-dev] Re: How to divide a raster layer into a set of
	tiles?
To: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
Cc: gdal-dev@lists.osgeo.org 
Message-ID: <4BA8D98A.2020905@gmail.com>
Content-Type: text/plain; charset=UTF-8

Jukka Rahkonen wrote:
> Gilles Bassi??re <gbassiere <at> gmail.com> writes:
> 
>> Hi,
>>
>> I'm trying to reproject an aerial imagery dataset with GDAL.
>>
>> The initial dataset is composed of ECW tiles in EPSG:27572 and my
goal
>> is to compute a new set set of ECW tiles projected in EPSG:2154.
> ...
> 
>> My current workflow consists in the following steps:
>> 1) create a single GDAL layer from all initial tiles with
gdalbuildvrt
>> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
> 
> I would perhaps calculate the extents I want the output tiles to have
and run
> gdalwarp for each tile with -te option.
> 
> -Jukka Rahkonen-
> 

Hi Jukka,

Thanks for your suggestion. I've been able to get the extent
automatically computed by a little Bash scripting:

 for x in `seq -w 895 5 1020`; do
     for y in `seq -w 6290 5 6410`; do
         e="$((10#${x}*1000)) $((10#${y}*1000)) $(((10#${x}+5)*1000))
$(((10#${y}+5)*1000))"
         echo "=== Processing tile $x-$y ==="
         gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154"
-te
$e -ts 10000 10000 ortho-dept04-2004-la2e.vrt
ortho-dept04-2004-lam93-tif/04-2004-$x-$y-lam93.tif
     done
 done

Regards

-- 
Gilles Bassi??re - Web/GIS software engineer
http://gbassiere.free.fr/ 


------------------------------

Message: 4
Date: Tue, 23 Mar 2010 11:54:50 +0000 (UTC)
From: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
Subject: [gdal-dev] Re: How to divide a raster layer into a set of
	tiles?
To: gdal-dev@lists.osgeo.org 
Message-ID: <loom.20100323T125053-679@post.gmane.org>
Content-Type: text/plain; charset=utf-8

Gilles Bassi??re <gbassiere <at> gmail.com> writes:

> 
> Hi,
> 
> I'm trying to reproject an aerial imagery dataset with GDAL.
> 
> The initial dataset is composed of ECW tiles in EPSG:27572 and my
goal
> is to compute a new set set of ECW tiles projected in EPSG:2154.

Hi,

May I ask if you are ready with your new tiles? The task is for sure
doable with
a few alternative ways. It would be nice to know which route you
decided to
follow, perhaps with some examples of the commands you have used.

-Jukka Rahkonen-




From ekkehart at gmx.de  Tue Mar 23 21:28:17 2010
From: ekkehart at gmx.de (NopMap)
Date: Tue Mar 23 21:28:19 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <f3b73b7d1003231455y772feff8o877739b19d740e2c@mail.gmail.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
	<1266965795875-4622435.post@n2.nabble.com>
	<1267040120346-4628026.post@n2.nabble.com>
	<1268258369264-4712621.post@n2.nabble.com>
	<1269379433252-4787310.post@n2.nabble.com>
	<f3b73b7d1003231455y772feff8o877739b19d740e2c@mail.gmail.com>
Message-ID: <1269394097252-4788484.post@n2.nabble.com>



I am running the 32bit Versions of python and gdal.

bye
           Nop
-- 
View this message in context: http://n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p4788484.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Mar 23 22:11:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 23 22:11:21 2010
Subject: [gdal-dev] VRT creation with Python
In-Reply-To: <1269382954306-4787592.post@n2.nabble.com>
References: <1269382954306-4787592.post@n2.nabble.com>
Message-ID: <4BA974C1.3040609@pobox.com>

Michael Aye wrote:
> Dear all,
> 
> I have some, as of yet unpublished, PDS data I am reading via a well working
> simple vrt definition looking like this:
> 
> <VRTDataset rasterXSize="1092" rasterYSize="1056">
>  <VRTRasterBand dataType="UInt16" band="1" subClass="VRTRawRasterBand">
>    <SourceFilename
> relativetoVRT="1">FC1_2005-06-23T21.55.54.000Z_ID10_0000019407_F1.img</SourceFilename>
>    <ImageOffset>8704</ImageOffset>
>    <PixelOffset>2</PixelOffset>
>    <LineOffset>2184</LineOffset>
>    <ByteOrder>LSB</ByteOrder>
>  </VRTRasterBand>
> </VRTDataset>
> 
> which is saved as a FC1.vrt file.
> 
> How can I programmatically opening many more of these images without
> creating another vrt file for each?
> Basically, how can I change the SourceFilename programmatically for the
> loaded virtual driver? For the dataset I can't see a handle, as the metadata
> for a dataset I load in with this vrt is empty.

Michael,

There is no public GDAL API for modifying the sourcefilename of a VRT.
Can you not just create the VRT files programmatically by inserting the
filename in a template text file?

I don't understand your point about metadata.  Were you hoping the
metadata for the underlying file would be passed through the VRT to
the application? This does not occur with VRTs even when they reference
a GDAL supported (rather than raw) file.

Is the .img file a PDS file?  Are you aware there is a PDS driver for
GDAL? Are you sure you can't just access the PDS image directly?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Wed Mar 24 01:08:30 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Mar 24 01:08:34 2010
Subject: [gdal-dev] Maintenance report for Feb 24, 2010 to Mar 23, 2010
Message-ID: <eb502d881003232208i7cb60092xde9d339846c29a38@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
GDAL Maintenance Reports by Chaitanya kumar CH.

Duration: Feb 24, 2010 to Mar 23, 2010

#3434: Fixed the shapefile driver related to system specific directory seperator.

#3436: Added the INTERLEAVE value to the IMAGE_STRUCTURE domain for ENVIDataset. Also fixed the overflow check.

#3462: Reviewed  a fix to gdal_contour algorithm. Need to write a test script for further testing.

#3473: Caught a bug in GDALRasterizeLayers() that was revealed by a bug in the script tiff_write.py.

#3467: Applied a patch to fix a bug in OGRPolygon::PointOnSurface() and OGRPolygon::Centroid()

#3385: Applied a patch to fix problems caused by a call to unixODBC in some architectures.

#3480: Fixed the PG driver to differentiate system tables correctly.


--
Chaitanya kumar CH
chaitanyach@gmail.com
-------------- next part --------------
GDAL Maintenance Reports by Chaitanya kumar CH.

Duration: Jan 2, 2010 to Feb 22, 2010

#3354: Fixed some bugs and added multi-band initialization to gdal_merge.py

#3391: Fixed the mitab driver to create an OGRFeatureDefn for a newly created layer.

#3394: Fixed SQLite driver to report correct transaction capability.

#3402: Tested CPLError calls with a static string argument. I had a problem, probably related to linking wrong libraries.

#3335: Transaction support to CopyLayer()

#3396: Fixed a bug in GDALRasterizeLayers

Added some features to gdalbuildvrt and the VRT format to facilitate a user-defined background colour.

--
Chaitanya kumar CH
chaitanyach@gmail.com
From christian.mueller at nvoe.at  Wed Mar 24 01:40:40 2010
From: christian.mueller at nvoe.at (Christian =?iso-8859-1?Q?M=FCller?=)
Date: Wed Mar 24 01:40:46 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles
In-Reply-To: <4BA8F8B9.4F75.00CE.0@co.lincoln.or.us>
References: <20100323182134.9253BE00BCB@lists.osgeo.org>
	<4BA8F8B9.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <20100324054040.5802.qmail@mail.linux4all.at>

A short question 

Why did you not use 

1) gdal_merge
2) gdal_translate
3) gdal_retile 

Btw, if there is no need for reprojection, gdal_retile alone does the job. 

Did you have problems using these utilities ? 

Eli Adam writes: 

> Gilles,
>      I do a similar process (build large vrt mosaic, reproject the
> mosaic vrt to another vrt, tile the reprojected mosaic vrt in new
> projection to tif) although my end tiles are in tif and not compressed. 
> My method is the brute force way and not elegant at all.  You may also
> want to know that I have been advised
> (http://news.gmane.org/gmane.comp.gis.gdal.devel) that this is very
> inefficient  and pushing the VRT format.  Steps 1 and 2 are the same as
> you describe. 
> 
> 1) create a single GDAL layer from all initial tiles with gdalbuildvrt
> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
> 3) Tile it with gdal_translate:  gdal_translate -projwin 7288440 446648
> 7306569 429923 mosaicvrtprj.vrt tile1.tif 
> 
> The brute force part is between 2 and 3.  Make a vector file (shp or
> PostGIS) grid of the new tiles in the desired projection.  Convert the
> polygon grid to points, then using SQL in a database, group by the
> polygon name (which needs to be retained when converted to points) and
> take the min/max of x and y.  Then use SQL to concatenate gdal_translate
> commands with the correct parameters.  The end result is a table of
> gdal_translate commands that will make the tiles.  Save as text and make
> needed minimal modification to fire off all those commands.   Not an
> elegant method at all.  It could probably be done all in bash with
> gdalinfo, grep, and sed, which would at least not require a database,
> even if it still is a brute force method.   
> 
> I don't know if using ecw and other formats or compression options may
> prevent the reading through of vrt files.  My work has been simpler,
> uncompressed tif from AI binary grids.  You may also want to make sure
> that each of your vrt files has all the proper projection and other
> information from steps 1 and 2.  gdalinfo ortho-dept04-2004-lam93.vrt
> might help.   
> 
> 
> Bests, Eli 
> 
> 
>    2. Re: How to divide a raster layer into a set of tiles?
>       (Gilles Bassi?re)
>    3. Re: Re: How to divide a raster layer into a set of tiles?
>       (Gilles Bassi?re)
>    4. Re: How to divide a raster layer into a set of tiles?
>       (Jukka Rahkonen) 
> 
> ------------------------------ 
> 
> Message: 2
> Date: Tue, 23 Mar 2010 16:01:33 +0100
> From: Gilles Bassi?re <gbassiere@gmail.com>
> Subject: [gdal-dev] Re: How to divide a raster layer into a set of
> 	tiles?
> To: Christian M?ller <christian.mueller@nvoe.at>
> Cc: gdal-dev@lists.osgeo.org 
> Message-ID: <4BA8D7CD.1050300@gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1 
> 
> Christian M?ller wrote:
>> That is a surprise.
>> In all my tests I had no memory problems with gdal_retile. Sometimes
> I
>> had some memory problems with gdal_merge. The biggest input file for
>> gdal_retile was a 80 GB Erdas image (not compressed) and it works
> fine.
>> I have never testet with an ECW File and my tests run on a Linux Box
> or
>> AIX Box.
>> Perhaps the problem is in the ECW gdal driver. You can try to
> transform
>> your ecw file in another format using gdal_transform. 
>> 
> 
> That's may be caused by something wrong with the ECW driver indeed. I
> will test gdal_retile again once I have a clean GDAL+ECW install. 
> 
> Regards
> Gilles 
> 
>>  
>> 
>> Gilles Bassi?re writes:
>>> Christian M?ller wrote:
>>>> gdal_retile.py definitely creates georeferenced tiles, I developed
> this
>>>> utility.
>>>> I did some experiments reprojecting the single tiles while
> retiling, but
>>>> it simply does not work. As a consequence I canceled the
> reprojecting
>>>> support.
>>>> The solution for your problem is:
>>>> 1) Use gdal_merge to create the big image
>>>> 2) reproject with gdal_warp
>>>> 3) use gdal_retile to create your new tiles
>>>> I did a lot of experiments to avoid creating the big picture
> without
>>>> success.
>>>
>>> I understand. In my case, gdal_retile.py eventually crashed with a
>>> Python MemoryError. I assume it is unsurprising with a 7.5GB input
> for a
>>> single Python process.
>>>>
>>>> Even Rouault writes:
>>>>> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez ?crit
> :
>>>>>> Hi,
>>>>>> The problem with this workflow is that it creates
> non-georeferenced
>>>>>> tiles (I don't know if this is the intended behaviour of this
>>>>>> command).
>>>>>
>>>>> gdal_retile.py *does* create georeferenced tiles. I've just
> verified
>>>>> it. What make you think the contrary ?
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org 
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>>>   
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org 
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>>   
>>>
>>> -- 
>>> Gilles Bassi?re - Web/GIS software engineer
>>> http://gbassiere.free.fr/ 
>>  
>> 
>  
> 
> -- 
> Gilles Bassi?re - Web/GIS software engineer
> http://gbassiere.free.fr/  
> 
> 
> ------------------------------ 
> 
> Message: 3
> Date: Tue, 23 Mar 2010 16:08:58 +0100
> From: Gilles Bassi?re <gbassiere@gmail.com>
> Subject: Re: [gdal-dev] Re: How to divide a raster layer into a set of
> 	tiles?
> To: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
> Cc: gdal-dev@lists.osgeo.org 
> Message-ID: <4BA8D98A.2020905@gmail.com>
> Content-Type: text/plain; charset=UTF-8 
> 
> Jukka Rahkonen wrote:
>> Gilles Bassi?.re <gbassiere <at> gmail.com> writes: 
>> 
>>> Hi, 
>>>
>>> I'm trying to reproject an aerial imagery dataset with GDAL. 
>>>
>>> The initial dataset is composed of ECW tiles in EPSG:27572 and my
> goal
>>> is to compute a new set set of ECW tiles projected in EPSG:2154.
>> ... 
>> 
>>> My current workflow consists in the following steps:
>>> 1) create a single GDAL layer from all initial tiles with
> gdalbuildvrt
>>> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
>> 
>> I would perhaps calculate the extents I want the output tiles to have
> and run
>> gdalwarp for each tile with -te option. 
>> 
>> -Jukka Rahkonen- 
>> 
> 
> Hi Jukka, 
> 
> Thanks for your suggestion. I've been able to get the extent
> automatically computed by a little Bash scripting: 
> 
>  for x in `seq -w 895 5 1020`; do
>      for y in `seq -w 6290 5 6410`; do
>          e="$((10#${x}*1000)) $((10#${y}*1000)) $(((10#${x}+5)*1000))
> $(((10#${y}+5)*1000))"
>          echo "=== Processing tile $x-$y ==="
>          gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154"
> -te
> $e -ts 10000 10000 ortho-dept04-2004-la2e.vrt
> ortho-dept04-2004-lam93-tif/04-2004-$x-$y-lam93.tif
>      done
>  done 
> 
> Regards 
> 
> -- 
> Gilles Bassi?.re - Web/GIS software engineer
> http://gbassiere.free.fr/  
> 
> 
> ------------------------------ 
> 
> Message: 4
> Date: Tue, 23 Mar 2010 11:54:50 +0000 (UTC)
> From: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
> Subject: [gdal-dev] Re: How to divide a raster layer into a set of
> 	tiles?
> To: gdal-dev@lists.osgeo.org 
> Message-ID: <loom.20100323T125053-679@post.gmane.org>
> Content-Type: text/plain; charset=utf-8 
> 
> Gilles Bassi?.re <gbassiere <at> gmail.com> writes: 
> 
>> 
>> Hi, 
>> 
>> I'm trying to reproject an aerial imagery dataset with GDAL. 
>> 
>> The initial dataset is composed of ECW tiles in EPSG:27572 and my
> goal
>> is to compute a new set set of ECW tiles projected in EPSG:2154.
> 
> Hi, 
> 
> May I ask if you are ready with your new tiles? The task is for sure
> doable with
> a few alternative ways. It would be nice to know which route you
> decided to
> follow, perhaps with some examples of the commands you have used. 
> 
> -Jukka Rahkonen- 
> 
>  
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
 

From alexander.bruy at gmail.com  Wed Mar 24 02:27:45 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Wed Mar 24 02:37:04 2010
Subject: [gdal-dev] Real and "raster" coordinates
Message-ID: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>

Hi,

I have a georeferenced raster and coordinates of some point (lat, lon)
inside raster. Is it possible
to convert this lat/lon coordinates to raster coordinates (column and row)?

I use GDAL 1.6.3 with Python 2.5 (installed with OSGeo4W installer).

-- 
Alexander Bruy
From chaitanya.ch at gmail.com  Wed Mar 24 03:11:01 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Mar 24 03:21:11 2010
Subject: [gdal-dev] Real and "raster" coordinates
In-Reply-To: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
References: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
Message-ID: <eb502d881003240011r359586degd2cc074f91f50a24@mail.gmail.com>

Alexander,

You can use the GDALGetGeoTransform() or GDALDataset::GetGeoTransform() to
get the affine transformation coefficients which can be used to calculate
lat/long to col/row and vice versa. You can see the utility script
gdal_merge.py for an example.

On Wed, Mar 24, 2010 at 11:57 AM, Alexander Bruy
<alexander.bruy@gmail.com>wrote:

> Hi,
>
> I have a georeferenced raster and coordinates of some point (lat, lon)
> inside raster. Is it possible
> to convert this lat/lon coordinates to raster coordinates (column and row)?
>
> I use GDAL 1.6.3 with Python 2.5 (installed with OSGeo4W installer).
>
> --
> Alexander Bruy
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/2ba2e58e/attachment.html
From jukka.rahkonen at mmmtike.fi  Wed Mar 24 05:07:44 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Mar 24 06:14:27 2010
Subject: [gdal-dev] Re: how: dealing with osm data and creating custom
	shape	files
References: <20100323140449.301230@gmx.net>
Message-ID: <loom.20100324T100018-123@post.gmane.org>

Christoph Dohmen <ChDohmen <at> gmx.de> writes:


> Thanks to Ralf and Frederik!
> 
> But now I want to group those data together.
> Well, I want to create a shapefile containing all road-objects.
> This is quite easy using ogr2ogr select everything with a value
> for highway-attribute. Doing the same for rivers is also done
> in no time. BUT, I want to create an attribute containing the
> attribute value like 'object_id'. This should be set to the value
> of highway-atrtibute in case of generating the road-file and it
> should be set to the value of the waterway-attribute in case of
> generating the river-file.
> 
> Can anyone give me a hint?

This is a question of how to make a proper SQL query. I am not good in those but
try something like:

SELECT roads.*, 'road_id' as object_id
FROM your_roads_table roads;

It should select everything from the table "your_roads_table" and add an extra
column titled as "object_id" and feel in value "road_id" for each line.  Is that
what you would like to have?

-Jukka Rahkonen-

> 
> Christoph




From mail at andreas-joisten.de  Wed Mar 24 06:33:24 2010
From: mail at andreas-joisten.de (Andreas Joisten)
Date: Wed Mar 24 08:19:16 2010
Subject: [gdal-dev] unclear pixel resolution in a world file
Message-ID: <20100324103325.02E1A3B77C3@dd2010.kasserver.com>

Hi all,

the pixel resolution within a world file must be set up. The world file is defined below:


Line 1: pixel resolution in the x-direction  * cos (rotation)
Line 2: - pixel resolution * sin (rotation)
Line 3: - pixel resolution * sin (rotation)
Line 4: - pixel resolution size in the y-direction  * cos (rotation)
Line 5: x-coordinate of the center of the upper left pixel
Line 6: y-coordinate of the center of the upper left pixel



I do not know the pixel resolution in line 2 and 3. Is it the pixel resolution in the x-direction or in the y-direction?


Many thanks





From jgomezdans at gmail.com  Wed Mar 24 07:32:15 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed Mar 24 09:08:40 2010
Subject: [gdal-dev] Real and "raster" coordinates
In-Reply-To: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
References: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
Message-ID: <91d218431003240432y359d8bc8oaf591c0626c12275@mail.gmail.com>

Hi

On 24 March 2010 06:27, Alexander Bruy <alexander.bruy@gmail.com> wrote:

> I have a georeferenced raster and coordinates of some point (lat, lon)
> inside raster. Is it possible
> to convert this lat/lon coordinates to raster coordinates (column and row)?
>

Use the geotransform (you may need to reproject your lat/lon into whatever
projection your raster file is).

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/758a6592/attachment.html
From ivan.lucena at pmldnet.com  Wed Mar 24 09:20:20 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Wed Mar 24 09:20:24 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gTWFpbnRlbmFuY2UgcmVwb3J0IGZvciBGZWIgMjQsIDIwMTAgdG8gTWFyIDIzLCAyMDEw?=
Message-ID: <20100324132020.24772.qmail@s466.sureserver.com>

Hi Chaitanya.

The link is broken: http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitany

Regards,

Ivan


>  -------Original Message-------
>  From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
>  To: Frank Warmerdam <warmerdam@pobox.com>, gdal dev <gdal-dev@lists.osgeo.org>
>  Subject: [gdal-dev] Maintenance report for Feb 24, 2010 to Mar 23, 2010
>  Sent: Mar 24 '10 00:08
>  
>  Hi,
>  
>  I updated my GDAL maintenance report at
>  [LINK: http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitanya]
>  http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitany
>  I am also attaching a copy.
>  
>  --
>  Best regards,
>  Chaitanya kumar CH.
>  /tanj/ /kmr/
>  +91-9848167848
>  17.2416N 80.1426E
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From chaitanya.ch at gmail.com  Wed Mar 24 09:28:37 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Mar 24 09:28:39 2010
Subject: [gdal-dev] Maintenance report for Feb 24, 2010 to Mar 23, 2010
In-Reply-To: <20100324132020.24772.qmail@s466.sureserver.com>
References: <20100324132020.24772.qmail@s466.sureserver.com>
Message-ID: <eb502d881003240628o2b06d90fr2a849b74bc1e911d@mail.gmail.com>

Oops!

It's http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitanya
Although, trac.osgeo.org seems to be down now.


On Wed, Mar 24, 2010 at 6:50 PM, Ivan Lucena <ivan.lucena@pmldnet.com>wrote:

> Hi Chaitanya.
>
> The link is broken:
> http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitany
>
> Regards,
>
> Ivan
>
>
> >  -------Original Message-------
> >  From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
> >  To: Frank Warmerdam <warmerdam@pobox.com>, gdal dev <
> gdal-dev@lists.osgeo.org>
> >  Subject: [gdal-dev] Maintenance report for Feb 24, 2010 to Mar 23, 2010
> >  Sent: Mar 24 '10 00:08
> >
> >  Hi,
> >
> >  I updated my GDAL maintenance report at
> >  [LINK: http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitanya]
> >  http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitany
> >  I am also attaching a copy.
> >
> >  --
> >  Best regards,
> >  Chaitanya kumar CH.
> >  /tanj/ /kmr/
> >  +91-9848167848
> >  17.2416N 80.1426E
> >
> >  --------------------
> >  _______________________________________________
> >  gdal-dev mailing list
> >  [LINK: compose.php?to=gdal-dev@lists.osgeo.org]
> gdal-dev@lists.osgeo.org
> >  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
> >  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/85bf3062/attachment.html
From stefan.moebius at actix.com  Wed Mar 24 09:46:37 2010
From: stefan.moebius at actix.com (Stefan Moebius)
Date: Wed Mar 24 09:47:43 2010
Subject: [gdal-dev] Question on OGRwkbGeometryType 
Message-ID: <4BAA17BD.1090009@actix.com>

Hi,

The documentation of OGRwkbGeometryType mentions the following:

> wkbPoint25D 		2.5D extension as per 99-402
> wkbLineString25D 	2.5D extension as per 99-402
> wkbPolygon25D 	2.5D extension as per 99-402
> wkbMultiPoint25D 	2.5D extension as per 99-402
> wkbMultiLineString25D 2.5D extension as per 99-402
> wkbMultiPolygon25D 	2.5D extension as per 99-402
> wkbGeometryCollection25D 	2.5D extension as per 99-402 

What does "99-402" refer to and where can I learn more about this 2.5D 
extension?

Regards,
Stefan
-----------------------------------------------------------------------
Actix is the trading name of Actix Limited, with registered offices at: 200 Hammersmith Road, London, W6 7DL, United Kingdom. Actix Limited is registered in England and Wales with company no. 02660615 and VAT no. GB 858742087. Actix GmbH is registered in (Sitz der Gesellschaft): Dresden, Germany with company no. Handelsregister Amtsgericht Dresden HR B 19204 and VAT no. (Ust-IDNr.) DE 813 115 475. Managing Director of Actix GmbH (Geschaeftsfuehrer): Alex Hawker. Information in this message is confidential and may be legally privileged. If you are not the intended recipient, please notify the sender, and please delete the message from your system immediately. The statements and opinions expressed in this message are those of the author and do not necessarily reflect those of Actix. Whilst Actix takes every effort to ensure this message is virus free it cannot guarantee that this is the case. It is the recipient's responsibility to carry out such virus checks as it deems necessary. Actix company details: www.actix.com.


From sa.cizmeli at usherbrooke.ca  Wed Mar 24 09:55:13 2010
From: sa.cizmeli at usherbrooke.ca (scizmeli)
Date: Wed Mar 24 09:55:25 2010
Subject: [gdal-dev] Re: GDAL with netCDF4 support
In-Reply-To: <482AFB08.4070907@pobox.com>
References: <482AF791.9000003@knmi.nl> <482AFB08.4070907@pobox.com>
Message-ID: <1269438913221-4791098.post@n2.nabble.com>


Parts of this message have been posted in DebianGIS today. Sorry for the
cross-post.

I would strongly encourage the inclusion of netcdf-4 inside GDAL. Not merely
for HDF5, but also for OpenDAP.

I just recently discovered that OpenDAP libraries are now being included
built-in in the new netcdf4 : http://www.unidata.ucar.edu/software/netcdf/.
Did not try it out myself yet, but then maybe we should think of dropping
the OpenDAP support into GDAL but rather go for netcdf4? I am sure OpenDAP
could will be maintained in time much better inside netcdf than in GDAL. 

OpenDAP is a very good and widely used protocol to share data over the
internet. UNIDATA now confirms this by including it into their netcdf-4.
Moreover, the new internal data models of netcdf, hdf and OpenDAP have been
merged into the Common Data Model, CDM,
http://www.unidata.ucar.edu/software/netcdf-java/CDM/. I think it will be
very wise to include OpenDAP/netcdf-4 support in GDAL. By the way,
GDAL/netcdf-4 seems to be my only was of being able to access OpenDAP data
from inside R.

I am ready to be a part of the team and help for this and many other things.
All I need would a little be of help to get me started.

Servet
-- 
View this message in context: http://n2.nabble.com/GDAL-with-netCDF4-support-tp2034490p4791098.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Wed Mar 24 10:18:01 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 24 10:18:45 2010
Subject: [gdal-dev] Question on OGRwkbGeometryType
In-Reply-To: <4BAA17BD.1090009@actix.com>
References: <4BAA17BD.1090009@actix.com>
Message-ID: <4BAA1F19.9070001@pobox.com>

Stefan Moebius wrote:
> Hi,
> 
> The documentation of OGRwkbGeometryType mentions the following:
> 
>> wkbPoint25D         2.5D extension as per 99-402
>> wkbLineString25D     2.5D extension as per 99-402
>> wkbPolygon25D     2.5D extension as per 99-402
>> wkbMultiPoint25D     2.5D extension as per 99-402
>> wkbMultiLineString25D 2.5D extension as per 99-402
>> wkbMultiPolygon25D     2.5D extension as per 99-402
>> wkbGeometryCollection25D     2.5D extension as per 99-402 
> 
> What does "99-402" refer to and where can I learn more about this 2.5D 
> extension?

Stefan,

This is an OGC document number. An html version of this doc
is available at:

   http://home.gdal.org/projects/opengis/twohalfdsf.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From EAdam at co.lincoln.or.us  Wed Mar 24 10:36:55 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Wed Mar 24 10:37:06 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles
In-Reply-To: <20100324054040.5802.qmail@mail.linux4all.at>
References: <20100323182134.9253BE00BCB@lists.osgeo.org>
	<4BA8F8B9.4F75.00CE.0@co.lincoln.or.us>
	<20100324054040.5802.qmail@mail.linux4all.at>
Message-ID: <4BA9C115.4F75.00CE.0@co.lincoln.or.us>

No good reason.  I'm more familiar with the other commands since I use
them often is the main reason. A side benefit is that I can match
existing tiles on other datasets and adopt existing tile names too.  Now
that I've read the utility pages for gdal_merge and gdal_retile I see
that would be an easier method.  I'll try that next time and report if I
have problems.  The reason I recommended it to Gilles was that the
method he was trying was not going smoothly. 

Thanks for contributing these utilities.  

Bests, Eli

>>> "Christian M?ller" <christian.mueller@nvoe.at> 3/23/2010 10:40 PM
>>>
A short question 

Why did you not use 

1) gdal_merge
2) gdal_translate
3) gdal_retile 

Btw, if there is no need for reprojection, gdal_retile alone does the
job. 

Did you have problems using these utilities ? 

Eli Adam writes: 

> Gilles,
>      I do a similar process (build large vrt mosaic, reproject the
> mosaic vrt to another vrt, tile the reprojected mosaic vrt in new
> projection to tif) although my end tiles are in tif and not
compressed. 
> My method is the brute force way and not elegant at all.  You may
also
> want to know that I have been advised
> (http://news.gmane.org/gmane.comp.gis.gdal.devel) that this is very
> inefficient  and pushing the VRT format.  Steps 1 and 2 are the same
as
> you describe. 
> 
> 1) create a single GDAL layer from all initial tiles with
gdalbuildvrt
> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
> 3) Tile it with gdal_translate:  gdal_translate -projwin 7288440
446648
> 7306569 429923 mosaicvrtprj.vrt tile1.tif 
> 
> The brute force part is between 2 and 3.  Make a vector file (shp or
> PostGIS) grid of the new tiles in the desired projection.  Convert
the
> polygon grid to points, then using SQL in a database, group by the
> polygon name (which needs to be retained when converted to points)
and
> take the min/max of x and y.  Then use SQL to concatenate
gdal_translate
> commands with the correct parameters.  The end result is a table of
> gdal_translate commands that will make the tiles.  Save as text and
make
> needed minimal modification to fire off all those commands.   Not an
> elegant method at all.  It could probably be done all in bash with
> gdalinfo, grep, and sed, which would at least not require a
database,
> even if it still is a brute force method.   
> 
> I don't know if using ecw and other formats or compression options
may
> prevent the reading through of vrt files.  My work has been simpler,
> uncompressed tif from AI binary grids.  You may also want to make
sure
> that each of your vrt files has all the proper projection and other
> information from steps 1 and 2.  gdalinfo
ortho-dept04-2004-lam93.vrt
> might help.   
> 
> 
> Bests, Eli 
> 
> 
>    2. Re: How to divide a raster layer into a set of tiles?
>       (Gilles Bassi?re)
>    3. Re: Re: How to divide a raster layer into a set of tiles?
>       (Gilles Bassi?re)
>    4. Re: How to divide a raster layer into a set of tiles?
>       (Jukka Rahkonen) 
> 
> ------------------------------ 
> 
> Message: 2
> Date: Tue, 23 Mar 2010 16:01:33 +0100
> From: Gilles Bassi?re <gbassiere@gmail.com>
> Subject: [gdal-dev] Re: How to divide a raster layer into a set of
> 	tiles?
> To: Christian M?ller <christian.mueller@nvoe.at>
> Cc: gdal-dev@lists.osgeo.org 
> Message-ID: <4BA8D7CD.1050300@gmail.com>
> Content-Type: text/plain; charset=ISO-8859-1 
> 
> Christian M?ller wrote:
>> That is a surprise.
>> In all my tests I had no memory problems with gdal_retile.
Sometimes
> I
>> had some memory problems with gdal_merge. The biggest input file
for
>> gdal_retile was a 80 GB Erdas image (not compressed) and it works
> fine.
>> I have never testet with an ECW File and my tests run on a Linux
Box
> or
>> AIX Box.
>> Perhaps the problem is in the ECW gdal driver. You can try to
> transform
>> your ecw file in another format using gdal_transform. 
>> 
> 
> That's may be caused by something wrong with the ECW driver indeed.
I
> will test gdal_retile again once I have a clean GDAL+ECW install. 
> 
> Regards
> Gilles 
> 
>>  
>> 
>> Gilles Bassi?re writes:
>>> Christian M?ller wrote:
>>>> gdal_retile.py definitely creates georeferenced tiles, I
developed
> this
>>>> utility.
>>>> I did some experiments reprojecting the single tiles while
> retiling, but
>>>> it simply does not work. As a consequence I canceled the
> reprojecting
>>>> support.
>>>> The solution for your problem is:
>>>> 1) Use gdal_merge to create the big image
>>>> 2) reproject with gdal_warp
>>>> 3) use gdal_retile to create your new tiles
>>>> I did a lot of experiments to avoid creating the big picture
> without
>>>> success.
>>>
>>> I understand. In my case, gdal_retile.py eventually crashed with a
>>> Python MemoryError. I assume it is unsurprising with a 7.5GB input
> for a
>>> single Python process.
>>>>
>>>> Even Rouault writes:
>>>>> Le Monday 22 March 2010 19:35:47 Gilles Bassi?re, vous avez
?crit
> :
>>>>>> Hi,
>>>>>> The problem with this workflow is that it creates
> non-georeferenced
>>>>>> tiles (I don't know if this is the intended behaviour of this
>>>>>> command).
>>>>>
>>>>> gdal_retile.py *does* create georeferenced tiles. I've just
> verified
>>>>> it. What make you think the contrary ?
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org 
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>>>   
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org 
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
>>>   
>>>
>>> -- 
>>> Gilles Bassi?re - Web/GIS software engineer
>>> http://gbassiere.free.fr/ 
>>  
>> 
>  
> 
> -- 
> Gilles Bassi?re - Web/GIS software engineer
> http://gbassiere.free.fr/  
> 
> 
> ------------------------------ 
> 
> Message: 3
> Date: Tue, 23 Mar 2010 16:08:58 +0100
> From: Gilles Bassi?re <gbassiere@gmail.com>
> Subject: Re: [gdal-dev] Re: How to divide a raster layer into a set
of
> 	tiles?
> To: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
> Cc: gdal-dev@lists.osgeo.org 
> Message-ID: <4BA8D98A.2020905@gmail.com>
> Content-Type: text/plain; charset=UTF-8 
> 
> Jukka Rahkonen wrote:
>> Gilles Bassi?.re <gbassiere <at> gmail.com> writes: 
>> 
>>> Hi, 
>>>
>>> I'm trying to reproject an aerial imagery dataset with GDAL. 
>>>
>>> The initial dataset is composed of ECW tiles in EPSG:27572 and my
> goal
>>> is to compute a new set set of ECW tiles projected in EPSG:2154.
>> ... 
>> 
>>> My current workflow consists in the following steps:
>>> 1) create a single GDAL layer from all initial tiles with
> gdalbuildvrt
>>> 2) reproject this virtual raster with gdalwarp (outputs a new
.vrt)
>> 
>> I would perhaps calculate the extents I want the output tiles to
have
> and run
>> gdalwarp for each tile with -te option. 
>> 
>> -Jukka Rahkonen- 
>> 
> 
> Hi Jukka, 
> 
> Thanks for your suggestion. I've been able to get the extent
> automatically computed by a little Bash scripting: 
> 
>  for x in `seq -w 895 5 1020`; do
>      for y in `seq -w 6290 5 6410`; do
>          e="$((10#${x}*1000)) $((10#${y}*1000))
$(((10#${x}+5)*1000))
> $(((10#${y}+5)*1000))"
>          echo "=== Processing tile $x-$y ==="
>          gdalwarp -s_srs "+init=epsg:27572" -t_srs "+init=epsg:2154"
> -te
> $e -ts 10000 10000 ortho-dept04-2004-la2e.vrt
> ortho-dept04-2004-lam93-tif/04-2004-$x-$y-lam93.tif
>      done
>  done 
> 
> Regards 
> 
> -- 
> Gilles Bassi?.re - Web/GIS software engineer
> http://gbassiere.free.fr/  
> 
> 
> ------------------------------ 
> 
> Message: 4
> Date: Tue, 23 Mar 2010 11:54:50 +0000 (UTC)
> From: Jukka Rahkonen <jukka.rahkonen@mmmtike.fi>
> Subject: [gdal-dev] Re: How to divide a raster layer into a set of
> 	tiles?
> To: gdal-dev@lists.osgeo.org 
> Message-ID: <loom.20100323T125053-679@post.gmane.org>
> Content-Type: text/plain; charset=utf-8 
> 
> Gilles Bassi?.re <gbassiere <at> gmail.com> writes: 
> 
>> 
>> Hi, 
>> 
>> I'm trying to reproject an aerial imagery dataset with GDAL. 
>> 
>> The initial dataset is composed of ECW tiles in EPSG:27572 and my
> goal
>> is to compute a new set set of ECW tiles projected in EPSG:2154.
> 
> Hi, 
> 
> May I ask if you are ready with your new tiles? The task is for sure
> doable with
> a few alternative ways. It would be nice to know which route you
> decided to
> follow, perhaps with some examples of the commands you have used. 
> 
> -Jukka Rahkonen- 
> 
>  
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org 
> http://lists.osgeo.org/mailman/listinfo/gdal-dev 
 

From stefan.moebius at actix.com  Wed Mar 24 10:38:15 2010
From: stefan.moebius at actix.com (Stefan Moebius)
Date: Wed Mar 24 10:38:21 2010
Subject: [gdal-dev] Question on OGRwkbGeometryType
In-Reply-To: <4BAA1F19.9070001@pobox.com>
References: <4BAA17BD.1090009@actix.com> <4BAA1F19.9070001@pobox.com>
Message-ID: <4BAA23D7.6020405@actix.com>

Thanks a lot.

Frank Warmerdam wrote:
> Stefan Moebius wrote:
>> Hi,
>>
>> The documentation of OGRwkbGeometryType mentions the following:
>>
>>> wkbPoint25D         2.5D extension as per 99-402
>>> wkbLineString25D     2.5D extension as per 99-402
>>> wkbPolygon25D     2.5D extension as per 99-402
>>> wkbMultiPoint25D     2.5D extension as per 99-402
>>> wkbMultiLineString25D 2.5D extension as per 99-402
>>> wkbMultiPolygon25D     2.5D extension as per 99-402
>>> wkbGeometryCollection25D     2.5D extension as per 99-402 
>>
>> What does "99-402" refer to and where can I learn more about this 2.5D 
>> extension?
> 
> Stefan,
> 
> This is an OGC document number. An html version of this doc
> is available at:
> 
>   http://home.gdal.org/projects/opengis/twohalfdsf.html
> 
> Best regards,


-- 
Stefan
-----------------------------------------------------------------------
Actix is the trading name of Actix Limited, with registered offices at: 200 Hammersmith Road, London, W6 7DL, United Kingdom. Actix Limited is registered in England and Wales with company no. 02660615 and VAT no. GB 858742087. Actix GmbH is registered in (Sitz der Gesellschaft): Dresden, Germany with company no. Handelsregister Amtsgericht Dresden HR B 19204 and VAT no. (Ust-IDNr.) DE 813 115 475. Managing Director of Actix GmbH (Geschaeftsfuehrer): Alex Hawker. Information in this message is confidential and may be legally privileged. If you are not the intended recipient, please notify the sender, and please delete the message from your system immediately. The statements and opinions expressed in this message are those of the author and do not necessarily reflect those of Actix. Whilst Actix takes every effort to ensure this message is virus free it cannot guarantee that this is the case. It is the recipient's responsibility to carry out such virus checks as it deems necessary. Actix company details: www.actix.com.


From nahumoz at gmail.com  Wed Mar 24 11:05:57 2010
From: nahumoz at gmail.com (Oz Nahum)
Date: Wed Mar 24 11:06:23 2010
Subject: [gdal-dev] field name in ESRI file
Message-ID: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com>

Hello GDAL Devs,

I encoutered a small problem, where I don't understand why field names in
ESRI Shape files created by gdal, are truncated.
Here is a code snippet:

    field_LUC = ogr.FieldDefn()
    field_LUC.SetName('LAND USE CODE')
    field_LUC.SetType(ogr.OFTInteger)
    field_LUC.SetWidth(15)
    dst_layer.CreateField(field_LUC)


Yet, when I examine the output file the attribute table contains  a field
called "LAND USE C",
so 3 characters are missing.

Would be happy to know what am I doing wrong. Thank you very much,

-- 
Oz Nahum
Graduate Student
Zentrum f?r Angewandte Geologie
Universit?t T?bingen

---

Imagine there's no countries
it isn't hard to do
Nothing to kill or die for
And no religion too
Imagine all the people
Living life in peace
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/69d4fe18/attachment.html
From P.Halls at york.ac.uk  Wed Mar 24 11:15:02 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Mar 24 11:15:08 2010
Subject: [gdal-dev] field name in ESRI file
In-Reply-To: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com>
References: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com>
Message-ID: <4BAA2C76.5090805@york.ac.uk>

Oz,

   shapefiles use the dBase IV format .dbf file for attributes: this defines the 
maximum field name width to be 10 characters - 'LAND USE CODE' has 13.  Also, 
space characters are not permitted - use underscore '_' instead.  Whilst GDAL 
may create the field names as you have specified, other packages may not accept 
them as input.  I believe that the Shapefile rules are still available as a 
White Paper on the ESRI.com website: it is worth reading the document to 
understand what is possible.

Best wishes,

Peter

Oz Nahum wrote:
> Hello GDAL Devs,
> 
> I encoutered a small problem, where I don't understand why field names in
> ESRI Shape files created by gdal, are truncated.
> Here is a code snippet:
> 
>     field_LUC = ogr.FieldDefn()
>     field_LUC.SetName('LAND USE CODE')
>     field_LUC.SetType(ogr.OFTInteger)
>     field_LUC.SetWidth(15)
>     dst_layer.CreateField(field_LUC)
> 
> 
> Yet, when I examine the output file the attribute table contains  a field
> called "LAND USE C",
> so 3 characters are missing.
> 
> Would be happy to know what am I doing wrong. Thank you very much,
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From jason.roberts at duke.edu  Wed Mar 24 11:47:06 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Mar 24 11:47:21 2010
Subject: [gdal-dev] field name in ESRI file
In-Reply-To: <4BAA2C76.5090805@york.ac.uk>
References: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com>
	<4BAA2C76.5090805@york.ac.uk>
Message-ID: <00bd01cacb69$41b33a70$c519af50$@roberts@duke.edu>

Oz,

The specification that Peter refers to is http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf. Also, check out the OGR Shapefile driver's documentation http://www.gdal.org/ogr/drv_shapefile.html. It documents this issue, as well as others that might be of interest. Finally, if you are interested in compatibility with ArcGIS, http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=Geoprocessing%20considerations%20for%20shapefile%20output.

In my experience, it is very important to read the OGR driver documentation carefully for whatever data format you're working with. The driver may exhibit different behavior than the original applications designed to work with that format. For example, the OGR shapefile driver documentation states that the default width for integer fields is 11 characters, which is the width required to fully represent 32-bit signed integers, yet the last link I mentioned above states that ArcGIS limits the width to 9 characters. You may want to carefully investigate issues like that if you are interested in compatibility with ArcGIS.

Finally, the OGR driver documentation may occasionally document something better than the original documentation for the format. For example, the OGR shapefile driver documentation makes mention of storing dates in shapefiles. ArcGIS also supports storing dates in shapefiles yet ESRI's whitepaper makes no mention that shapefiles support dates.

Best,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Peter J Halls
Sent: Wednesday, March 24, 2010 11:15 AM
To: Oz Nahum
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] field name in ESRI file

Oz,

   shapefiles use the dBase IV format .dbf file for attributes: this defines the 
maximum field name width to be 10 characters - 'LAND USE CODE' has 13.  Also, 
space characters are not permitted - use underscore '_' instead.  Whilst GDAL 
may create the field names as you have specified, other packages may not accept 
them as input.  I believe that the Shapefile rules are still available as a 
White Paper on the ESRI.com website: it is worth reading the document to 
understand what is possible.

Best wishes,

Peter

Oz Nahum wrote:
> Hello GDAL Devs,
> 
> I encoutered a small problem, where I don't understand why field names in
> ESRI Shape files created by gdal, are truncated.
> Here is a code snippet:
> 
>     field_LUC = ogr.FieldDefn()
>     field_LUC.SetName('LAND USE CODE')
>     field_LUC.SetType(ogr.OFTInteger)
>     field_LUC.SetWidth(15)
>     dst_layer.CreateField(field_LUC)
> 
> 
> Yet, when I examine the output file the attribute table contains  a field
> called "LAND USE C",
> so 3 characters are missing.
> 
> Would be happy to know what am I doing wrong. Thank you very much,
> 
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

From nahumoz at gmail.com  Wed Mar 24 12:09:09 2010
From: nahumoz at gmail.com (Oz Nahum)
Date: Wed Mar 24 12:09:32 2010
Subject: [gdal-dev] field name in ESRI file
In-Reply-To: <-937740569580261532@unknownmsgid>
References: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com> 
	<4BAA2C76.5090805@york.ac.uk> <-937740569580261532@unknownmsgid>
Message-ID: <6ec71d091003240909o571cb5d5u162e5d1dc3147a77@mail.gmail.com>

Hi Guys,
Thanks for everyone for the answers.
I'm sorry about the haste in sending the email. I've should have read more
carefully.
This issue is even in WIKIPEDIA ...

Oz.

On Wed, Mar 24, 2010 at 4:47 PM, Jason Roberts <jason.roberts@duke.edu>wrote:

> Oz,
>
> The specification that Peter refers to is
> http://www.esri.com/library/whitepapers/pdfs/shapefile.pdf. Also, check
> out the OGR Shapefile driver's documentation
> http://www.gdal.org/ogr/drv_shapefile.html. It documents this issue, as
> well as others that might be of interest. Finally, if you are interested in
> compatibility with ArcGIS,
> http://webhelp.esri.com/arcgisdesktop/9.3/index.cfm?TopicName=Geoprocessing%20considerations%20for%20shapefile%20output
> .
>
> In my experience, it is very important to read the OGR driver documentation
> carefully for whatever data format you're working with. The driver may
> exhibit different behavior than the original applications designed to work
> with that format. For example, the OGR shapefile driver documentation states
> that the default width for integer fields is 11 characters, which is the
> width required to fully represent 32-bit signed integers, yet the last link
> I mentioned above states that ArcGIS limits the width to 9 characters. You
> may want to carefully investigate issues like that if you are interested in
> compatibility with ArcGIS.
>
> Finally, the OGR driver documentation may occasionally document something
> better than the original documentation for the format. For example, the OGR
> shapefile driver documentation makes mention of storing dates in shapefiles.
> ArcGIS also supports storing dates in shapefiles yet ESRI's whitepaper makes
> no mention that shapefiles support dates.
>
> Best,
>
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] On Behalf Of Peter J Halls
> Sent: Wednesday, March 24, 2010 11:15 AM
> To: Oz Nahum
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] field name in ESRI file
>
> Oz,
>
>   shapefiles use the dBase IV format .dbf file for attributes: this defines
> the
> maximum field name width to be 10 characters - 'LAND USE CODE' has 13.
>  Also,
> space characters are not permitted - use underscore '_' instead.  Whilst
> GDAL
> may create the field names as you have specified, other packages may not
> accept
> them as input.  I believe that the Shapefile rules are still available as a
> White Paper on the ESRI.com website: it is worth reading the document to
> understand what is possible.
>
> Best wishes,
>
> Peter
>
> Oz Nahum wrote:
> > Hello GDAL Devs,
> >
> > I encoutered a small problem, where I don't understand why field names in
> > ESRI Shape files created by gdal, are truncated.
> > Here is a code snippet:
> >
> >     field_LUC = ogr.FieldDefn()
> >     field_LUC.SetName('LAND USE CODE')
> >     field_LUC.SetType(ogr.OFTInteger)
> >     field_LUC.SetWidth(15)
> >     dst_layer.CreateField(field_LUC)
> >
> >
> > Yet, when I examine the output file the attribute table contains  a field
> > called "LAND USE C",
> > so 3 characters are missing.
> >
> > Would be happy to know what am I doing wrong. Thank you very much,
> >
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> --
>
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806     Fax: 01904 433740
> Snail mail: Computing Service, University of York, Heslington, York YO10
> 5DD
> This message has the status of a private and personal communication
>
> --------------------------------------------------------------------------------
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/3e815ea2/attachment.html
From danotchki at gmail.com  Wed Mar 24 12:11:42 2010
From: danotchki at gmail.com (danotchki)
Date: Wed Mar 24 12:11:45 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry collection
Message-ID: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>

Hello List,

I hope you will be able to help me. I'm stuck on a problem.
I'm trying to reconstruct within my Python script polygons from a shapefile
that belong together.

So I naturally perfomed:

geom_tmp = ogr.CreateGeometryFromWkb(ftr.GetGeometryRef().ExportToWkb())
geom.AddGeometryDirectly(geom_tmp)

However this works only when the geometry to add is of type POLYGON. This
_doesn't_ work with type MULTIPOLYGON (exit code 3).

My question: is there a way to add MULTIPOLYGONs to an existing Geometry?

What I don't understand is that when CreateGeometryFromWkb returns a
MULTIPOLYGON it actually returns a GEOMETRY instead of a GEOMETRYCOLLECTION,
thus preventing looping on each individual geometry with GetNumGeometries.
Would there be a way to cast the polygon to a multipolygon?

Help very much appreciated.

Many thanks,
Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/07008fe0/attachment.html
From ebwolf at gmail.com  Wed Mar 24 11:15:26 2010
From: ebwolf at gmail.com (Eric Wolf)
Date: Wed Mar 24 12:17:13 2010
Subject: [gdal-dev] field name in ESRI file
In-Reply-To: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com>
References: <6ec71d091003240805n631967c3k3781abf6ef22c9d3@mail.gmail.com>
Message-ID: <18bb6ba01003240815u65c0e0aw1600f01116a3ba40@mail.gmail.com>

ESRI Shapefiles use the ancient DBF format for attribute data. DBFs
restricts the length of field names. When I have to work with Shapefiles, I
try to stick to 8-character field names and avoid spaces and special
characters.

-Eric

-=--=---=----=----=---=--=-=--=---=----=---=--=-=-
Eric B. Wolf                    New! 720-334-7734
USGS Geographer
Center of Excellence in GIScience
PhD Student
CU-Boulder - Geography

GPG Public Key: http://www.h4h.net/ebwolf.public.key.txt


On Wed, Mar 24, 2010 at 9:05 AM, Oz Nahum <nahumoz@gmail.com> wrote:

> Hello GDAL Devs,
>
> I encoutered a small problem, where I don't understand why field names in
> ESRI Shape files created by gdal, are truncated.
> Here is a code snippet:
>
>     field_LUC = ogr.FieldDefn()
>     field_LUC.SetName('LAND USE CODE')
>     field_LUC.SetType(ogr.OFTInteger)
>     field_LUC.SetWidth(15)
>     dst_layer.CreateField(field_LUC)
>
>
> Yet, when I examine the output file the attribute table contains  a field
> called "LAND USE C",
> so 3 characters are missing.
>
> Would be happy to know what am I doing wrong. Thank you very much,
>
> --
> Oz Nahum
> Graduate Student
> Zentrum f?r Angewandte Geologie
> Universit?t T?bingen
>
> ---
>
> Imagine there's no countries
> it isn't hard to do
> Nothing to kill or die for
> And no religion too
> Imagine all the people
> Living life in peace
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100324/4517bb87/attachment.html
From reinaldo at geodesign.com.br  Wed Mar 24 13:01:31 2010
From: reinaldo at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Mar 24 13:01:34 2010
Subject: [gdal-dev] Output MapInfo File with CoordSys Information
Message-ID: <72956635bd373c79a2c481435abe93db.squirrel@webmail.geodesign.com.br>

Hello Frank and List,

We waited for the release of GDAL 1.7.0 to see if we could output MapInfo
Fiels (.tab or .mif/mid) with SRS information.

We still can not output .tab or .mif/mid files with SRS information.

Could you please check the test code below to see what's missing or wrong?

Thanks in advance.

Regards,

Reinaldo

*******************************
#include "gdal.h"
#include "ogr_spatialref.h"
#include "ogrsf_frmts.h"
#include "stdio.h"

double Lat[3], Lon[3];
int n=0; char *pszWKT = NULL;

void main()
{
 OGRSpatialReference oSRS;
// oSRS.SetWellKnownGeogCS( "EPSG:4326" );
 oSRS.importFromMICoordSys( "CoordSys Earth Projection 1, 104" );

 const char *pszDriverName = "MapInfo File" ;

 OGRSFDriver *poDriver;
    OGRRegisterAll();

    poDriver = OGRSFDriverRegistrar::GetRegistrar()->GetDriverByName(
                pszDriverName );
    if( poDriver == NULL )
    {
        printf( "%s driver not available.\n", pszDriverName );
        exit( 1 );
    }

 OGRDataSource *poDS;
 poDS = poDriver->CreateDataSource( "c:/test01.mif", NULL );
// poDS = poDriver->CreateDataSource( "c:/test01.tab", NULL );
    if( poDS == NULL )
    {
        printf( "Creation of output file failed.\n" );
        exit( 1 );
    }

    OGRLayer *poLayer;
    poLayer = poDS->CreateLayer( "test01", NULL, wkbPoint, NULL );
    if( poLayer == NULL )
    {
        printf( "Layer creation failed.\n" );
        exit( 1 );
    }

 OGRFieldDefn oField0( "NAME1", OFTString );
 OGRFieldDefn oField1( "NAME2", OFTString );

 oField0.SetWidth(32);
    oField1.SetWidth(32);

 if( poLayer->CreateField( &oField0 ) != OGRERR_NONE )
    {
        printf( "Creating Name field failed.\n" );
        exit( 1 );
    }

 if( poLayer->CreateField( &oField1 ) != OGRERR_NONE )
    {
        printf( "Creating Name field failed.\n" );
        exit( 1 );
    }

*******************************
.mif output w/ou SRS:

Version 300
Charset "Neutral"
Delimiter ","
Columns 2
  NAME1 Char(32)
  NAME2 Char(32)
Data

Point -45.13975272 -22.69426671
    Symbol (35,0,12)
Point -45.86066928 -23.21117775
    Symbol (35,0,12)
Point -44.33023872 -22.68505859375
    Symbol (35,0,12)

************************************
.mid output:

"TEST01","TEST02"
"TEST01","TEST02"
"TEST01","TEST02"



From gregor at hostgis.com  Wed Mar 24 13:02:05 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Wed Mar 24 13:02:10 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
Message-ID: <4BAA458D.6050906@hostgis.com>

Hey guys. I posted a few days ago about a problem with using ogrinfo to 
read ODBC from a MS SQL server.

$ ogrinfo test.ovf
ERROR 1: No column definitions found for table 
'???o??????y.????????????y', layer not usable.
(... and so on, more binary table names ...)

I can connect to the ODBC/MSSQL using the isql program, but not ogrinfo. 
I can render ODBC layers if their server is PostgreSQL or MySQL. Just 
not ogrinfo and MS SQL.

Any advice on how I can proceed with troubleshooting this?

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From Chris.Barker at noaa.gov  Wed Mar 24 13:27:30 2010
From: Chris.Barker at noaa.gov (Chris Barker)
Date: Wed Mar 24 13:27:36 2010
Subject: [gdal-dev] Re: GDAL with netCDF4 support
In-Reply-To: <1269438913221-4791098.post@n2.nabble.com>
References: <482AF791.9000003@knmi.nl> <482AFB08.4070907@pobox.com>
	<1269438913221-4791098.post@n2.nabble.com>
Message-ID: <4BAA4B82.904@noaa.gov>

scizmeli wrote:
> I would strongly encourage the inclusion of netcdf-4 inside GDAL. Not merely
> for HDF5, but also for OpenDAP.

+1

> I just recently discovered that OpenDAP libraries are now being included
> built-in in the new netcdf4 : http://www.unidata.ucar.edu/software/netcdf/.

yes, but it's an optional component, and when I last checked, no one had 
built it for Windows. However, it's built on libcurl, which is available 
for Windows (and already used by GDAL?), so it may be straightforward.

Having OpenDap support in the netcdf4 lib is really nice. If there are 
problems the folks at opendap.org may well want to help, even if unidata 
doesn't (unidata has gotten pretty Java-centric lately).

>  By the way,
> GDAL/netcdf-4 seems to be my only was of being able to access OpenDAP data
> from inside R.

Which is why you should use Python (and Rpy) ;-)


-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From ekkehart at gmx.de  Wed Mar 24 13:34:37 2010
From: ekkehart at gmx.de (NopMap)
Date: Wed Mar 24 13:34:39 2010
Subject: [gdal-dev] Re: Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <f3b73b7d1003231455y772feff8o877739b19d740e2c@mail.gmail.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
	<1266965795875-4622435.post@n2.nabble.com>
	<1267040120346-4628026.post@n2.nabble.com>
	<1268258369264-4712621.post@n2.nabble.com>
	<1269379433252-4787310.post@n2.nabble.com>
	<f3b73b7d1003231455y772feff8o877739b19d740e2c@mail.gmail.com>
Message-ID: <1269452077517-4792534.post@n2.nabble.com>



Tamas Szekeres wrote:
> 
> If you could do a test with the binaries provided at
> http://vbkto.dyndns.org/sdk/  that would be helpful. It seems the python
> auto-tests are working well with these packages on a Win2003 Server x64
> platform.
> 

I have downloaded a release from there. It looks a bit different from my
existing install but after some wild overwriting of files it is now working.

It appears that the official binaries for gdal 1.6 simply do not work on
Win7 x64 while the problem is already fixed in the cutting edge builds.

Thank you for the hint

          Nop

-- 
View this message in context: http://n2.nabble.com/Gdal-Python-Win7-crash-with-ReadAsArray-tp4398401p4792534.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jrepetto at free.fr  Wed Mar 24 13:13:11 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Wed Mar 24 13:39:48 2010
Subject: [gdal-dev] Re: Bug in coordinate system library?
	unknown	elliptical parameter for BNG coordinate system
In-Reply-To: <Prayer.1.3.2.1003232019330.18365@hermes-2.csi.cam.ac.uk>
References: <20100323184741.E17B313A960@dd2010.kasserver.com>	<4BA91209.9010709@free.fr>
	<Prayer.1.3.2.1003232019330.18365@hermes-2.csi.cam.ac.uk>
Message-ID: <4BAA4827.9060003@free.fr>

Alex Hagen-Zanker a ?crit :
> Just to remind you: I reported a similar problem when 1.7 just came out. 
> Maybe it helps in identifying the problem.
> 
> http://www.mail-archive.com/gdal-dev@lists.osgeo.org/msg05605.html
> 

Hi Alex,

There is probably something wrong in your installation. Check the paths, 
environment variables, etc ...

Jean-Claude

From warmerdam at pobox.com  Wed Mar 24 14:21:04 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 24 14:21:08 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
In-Reply-To: <4BAA458D.6050906@hostgis.com>
References: <4BAA458D.6050906@hostgis.com>
Message-ID: <4BAA5810.60208@pobox.com>

Gregor at HostGIS wrote:
> Hey guys. I posted a few days ago about a problem with using ogrinfo to 
> read ODBC from a MS SQL server.
> 
> $ ogrinfo test.ovf
> ERROR 1: No column definitions found for table 
> '???o??????y.????????????y', layer not usable.
> (... and so on, more binary table names ...)
> 
> I can connect to the ODBC/MSSQL using the isql program, but not ogrinfo. 
> I can render ODBC layers if their server is PostgreSQL or MySQL. Just 
> not ogrinfo and MS SQL.
> 
> Any advice on how I can proceed with troubleshooting this?

Gregor,

I presume this is due to mishandling of a wide character column or
something like that. You could add some debug statements in the
gdal/port/cpl_odbc.cpp code in an attempt to determine what column
type is coming back for the problem columns and see if that suggests
anything.

Debuging MS SQL related bugs isn't really all that convenient for me.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Mar 24 14:23:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 24 14:23:51 2010
Subject: [gdal-dev] Re: Output MapInfo File with CoordSys Information
In-Reply-To: <72956635bd373c79a2c481435abe93db.squirrel@webmail.geodesign.com.br>
References: <72956635bd373c79a2c481435abe93db.squirrel@webmail.geodesign.com.br>
Message-ID: <4BAA58B1.107@pobox.com>

Reinaldo Escada Chohfi wrote:
> Hello Frank and List,
> 
> We waited for the release of GDAL 1.7.0 to see if we could output MapInfo
> Fiels (.tab or .mif/mid) with SRS information.
> 
> We still can not output .tab or .mif/mid files with SRS information.
> 
> Could you please check the test code below to see what's missing or wrong?
...
> void main()
> {
>  OGRSpatialReference oSRS;
> // oSRS.SetWellKnownGeogCS( "EPSG:4326" );
>  oSRS.importFromMICoordSys( "CoordSys Earth Projection 1, 104" );
> 
...
>     OGRLayer *poLayer;
>     poLayer = poDS->CreateLayer( "test01", NULL, wkbPoint, NULL );

Reinaldo,

I don't see any sign that you are doing anything with the spatial
reference.  You need to pass the OGRSpatialReference* into CreateLayer()
as the second argument.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregor at hostgis.com  Wed Mar 24 14:38:43 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Wed Mar 24 14:38:47 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
In-Reply-To: <4BAA5810.60208@pobox.com>
References: <4BAA458D.6050906@hostgis.com> <4BAA5810.60208@pobox.com>
Message-ID: <4BAA5C33.7070203@hostgis.com>

Frank Warmerdam wrote:
 > Debuging MS SQL related bugs isn't really all that convenient for me

Ha ha! I myself rank any dealing with MS SQL on par with cleaning the 
Augean Stables. I understand. :)


> You could add some debug statements in the
> gdal/port/cpl_odbc.cpp code in an attempt to determine what column
> type is coming back for the problem columns

Hmmm. I do know the columns offhand: 1 varchar(20) and 2 floats. I don't 
know C++ but I bet I can copy and paste some debug statements and 
sprintf()s for a start. Thanks for the tip.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From warmerdam at pobox.com  Wed Mar 24 15:07:48 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 24 15:07:59 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry collection
In-Reply-To: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>
References: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>
Message-ID: <4BAA6304.6040502@pobox.com>

danotchki wrote:
> Hello List,
> 
> I hope you will be able to help me. I'm stuck on a problem.
> I'm trying to reconstruct within my Python script polygons from a 
> shapefile that belong together.
> 
> So I naturally perfomed:
> 
> geom_tmp = ogr.CreateGeometryFromWkb(ftr.GetGeometryRef().ExportToWkb())
> geom.AddGeometryDirectly(geom_tmp)
> 
> However this works only when the geometry to add is of type POLYGON. 
> This _doesn't_ work with type MULTIPOLYGON (exit code 3).

Daniel,

What type is "geom"?  If it is a MULTIPOLYGON then it can only
have polygons as children, not multipolygons.

> My question: is there a way to add MULTIPOLYGONs to an existing Geometry?
> 
> What I don't understand is that when CreateGeometryFromWkb returns a 
> MULTIPOLYGON it actually returns a GEOMETRY instead of a 
> GEOMETRYCOLLECTION, thus preventing looping on each individual geometry 
> with GetNumGeometries. Would there be a way to cast the polygon to a 
> multipolygon?

In C/C++ there are methods on OGRGeometryFactory like
forceToPolygon and forceToMultiPolygon that might be helpful
but I see these are not exposed in Python.  Are you willing to
build from SVN trunk source code?  If so, I could add these methods
for you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From reinaldo at geodesign.com.br  Wed Mar 24 15:31:48 2010
From: reinaldo at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Mar 24 15:31:51 2010
Subject: [gdal-dev] Re: Output MapInfo File with CoordSys Information
In-Reply-To: <4BAA58B1.107@pobox.com>
References: <72956635bd373c79a2c481435abe93db.squirrel@webmail.geodesign.com.br>
	<4BAA58B1.107@pobox.com>
Message-ID: <505f5c7b03b0ef612d4767c76509e28e.squirrel@webmail.geodesign.com.br>

Frank,

It worked now.

Thanks a lot.

Regards,

Reinaldo

> Reinaldo Escada Chohfi wrote:
>> Hello Frank and List,
>>
>> We waited for the release of GDAL 1.7.0 to see if we could output
>> MapInfo
>> Fiels (.tab or .mif/mid) with SRS information.
>>
>> We still can not output .tab or .mif/mid files with SRS information.
>>
>> Could you please check the test code below to see what's missing or
>> wrong?
> ...
>> void main()
>> {
>>  OGRSpatialReference oSRS;
>> // oSRS.SetWellKnownGeogCS( "EPSG:4326" );
>>  oSRS.importFromMICoordSys( "CoordSys Earth Projection 1, 104" );
>>
> ...
>>     OGRLayer *poLayer;
>>     poLayer = poDS->CreateLayer( "test01", NULL, wkbPoint, NULL );
>
> Reinaldo,
>
> I don't see any sign that you are doing anything with the spatial
> reference.  You need to pass the OGRSpatialReference* into CreateLayer()
> as the second argument.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


From mdsumner at gmail.com  Wed Mar 24 17:09:44 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed Mar 24 17:09:47 2010
Subject: [gdal-dev] Re: GDAL with netCDF4 support
Message-ID: <522664f81003241409mbd12517td702e8e4b74e1536@mail.gmail.com>

Chris wrote:

>> By the way,
>>GDAL/netcdf-4 seems to be my only was of being able to access OpenDAP data
>>from inside R.

>Which is why you should use Python (and Rpy) ;-)


I didn't know Python was widely used for OpenDAP - is that via GDAL or
native?  Can you point to examples of its use and set up?

Native use of NetCDF and OpenDAP still requires a lot of work to
manage data structures in Matlab and so on - "georeferenced nD arrays"
just don't seem to be supported across the board. Is this improved in
the Python support?

GDAL's OpenDAP (and NetCDF) is incredibly useful, but it  takes  work
to reconstruct the multidimensional structure of the original dataset
- for NetCDF I find it easier to use the native libraries, even with
the overhead of managing the metadata manually.

Building GDAL with OpenDAP binaries on Windows is not difficult, I
don't know about 64-bit OpenDAP though:

http://lists.osgeo.org/pipermail/gdal-dev/2008-October/018482.html

Building rgdal for Windows is more involved, and no one has done this
for 64-bit AFAIK.


Cheers, Mike.
From Luke.Pinner at environment.gov.au  Wed Mar 24 18:34:46 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Mar 24 18:44:57 2010
Subject: [gdal-dev] Real and "raster" coordinates
In-Reply-To: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
References: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
Message-ID: <64102B2FB850C345B04D09C82018F45F0273EC36@ACT01VEXCCL04.internal.govt>

The following module might help, use the mapToPixel() function.

#---Imports
try:
    from osgeo import gdal
except ImportError:
    import gdal

def mapToPixel(mx,my,gt):
    ''' Convert map to pixel coordinates
        @param  mx    Input map x coordinate (double)
        @param  my    Input map y coordinate (double)
        @param  gt    Input geotransform (six doubles)
        @return px,py Output coordinates (two doubles)
    '''
    if gt[2]+gt[4]==0: #Simple calc, no inversion required
        px = (mx - gt[0]) / gt[1]
        py = (my - gt[3]) / gt[5]
    else:
        px,py=ApplyGeoTransform(mx,my,InvGeoTransform(gt))
    return int(px+0.5),int(py+0.5)

def pixelToMap(px,py,gt):
    ''' Convert pixel to map coordinates
        @param  px    Input pixel x coordinate (double)
        @param  py    Input pixel y coordinate (double)
        @param  gt    Input geotransform (six doubles)
        @return mx,my Output coordinates (two doubles)
    '''
    mx,my=ApplyGeoTransform(px,py,gt)
    return mx,my

def ApplyGeoTransform(inx,iny,gt):
    ''' Apply a geotransform
        @param  inx       Input x coordinate (double)
        @param  iny       Input y coordinate (double)
        @param  gt        Input geotransform (six doubles)
        @return outx,outy Output coordinates (two doubles)
    '''
    outx = gt[0] + inx*gt[1] + iny*gt[2]
    outy = gt[3] + inx*gt[4] + iny*gt[5]
    return (outx,outy)

 def InvGeoTransform(gt_in):
    '''
 
************************************************************************
     *                        InvGeoTransform(gt_in)

 
************************************************************************

     **
     * Invert Geotransform.
     *
     * This function will invert a standard 3x2 set of GeoTransform
coefficients.
     *
     * @param  gt_in  Input geotransform (six doubles - unaltered).
     * @return gt_out Output geotransform (six doubles - updated) on
success,
     *                None if the equation is uninvertable. 
    '''
    #
************************************************************************
******
    #    * This code ported from GDALInvGeoTransform() in
gdaltransformer.cpp
    #    * as it isn't exposed in the python SWIG bindings until GDAL
1.7
    #    * copyright & permission notices included below as per
conditions.
    #
    #
************************************************************************
******
    #    * $Id: gdaltransformer.cpp 15024 2008-07-24 19:25:06Z rouault $
    #    *
    #    * Project:  Mapinfo Image Warper
    #    * Purpose:  Implementation of one or more GDALTrasformerFunc
types, including
    #    *           the GenImgProj (general image reprojector)
transformer.
    #    * Author:   Frank Warmerdam, warmerdam@pobox.com
    #    *
    #
************************************************************************
******
    #    * Copyright (c) 2002, i3 - information integration and imaging 
    #    *                          Fort Collin, CO
    #    *
    #    * Permission is hereby granted, free of charge, to any person
obtaining a
    #    * copy of this software and associated documentation files (the
"Software"),
    #    * to deal in the Software without restriction, including
without limitation
    #    * the rights to use, copy, modify, merge, publish, distribute,
sublicense,
    #    * and/or sell copies of the Software, and to permit persons to
whom the
    #    * Software is furnished to do so, subject to the following
conditions:
    #    *
    #    * The above copyright notice and this permission notice shall
be included
    #    * in all copies or substantial portions of the Software.
    #    *
    #    * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY
KIND, EXPRESS
    #    * OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
MERCHANTABILITY,
    #    * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO
EVENT SHALL
    #    * THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,
DAMAGES OR OTHER
    #    * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR
OTHERWISE, ARISING
    #    * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
OTHER
    #    * DEALINGS IN THE SOFTWARE.
    #
************************************************************************
****
        
    # we assume a 3rd row that is [1 0 0]

    # Compute determinate
    det = gt_in[1] * gt_in[5] - gt_in[2] * gt_in[4]

    if( abs(det) < 0.000000000000001 ):
        return

    inv_det = 1.0 / det

    # compute adjoint, and divide by determinate
    gt_out = [0,0,0,0,0,0]
    gt_out[1] =  gt_in[5] * inv_det
    gt_out[4] = -gt_in[4] * inv_det

    gt_out[2] = -gt_in[2] * inv_det
    gt_out[5] =  gt_in[1] * inv_det

    gt_out[0] = ( gt_in[2] * gt_in[3] - gt_in[0] * gt_in[5]) * inv_det
    gt_out[3] = (-gt_in[1] * gt_in[3] + gt_in[0] * gt_in[4]) * inv_det

    return gt_out



------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From gregor at hostgis.com  Wed Mar 24 23:49:16 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Wed Mar 24 23:49:22 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
In-Reply-To: <4BAA5810.60208@pobox.com>
References: <4BAA458D.6050906@hostgis.com> <4BAA5810.60208@pobox.com>
Message-ID: <4BAADD3C.1030302@hostgis.com>

Hey, this is so excellent. I took Frank's advice about just trying to 
hack the C++ code... and discovered as a side effect that FreeTDS has a 
new release. This new release fixed the issue. Ha!

I do have one outstanding issue, though: it is very, very, very, very 
slow because it scans every table instead of the 1 table/layer I 
requested. More on this in a separate email, after I've given some 
things a try...

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From warmerdam at pobox.com  Thu Mar 25 00:12:59 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 25 00:12:57 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
In-Reply-To: <4BAADD3C.1030302@hostgis.com>
References: <4BAA458D.6050906@hostgis.com> <4BAA5810.60208@pobox.com>
	<4BAADD3C.1030302@hostgis.com>
Message-ID: <4BAAE2CB.1050102@pobox.com>

Gregor at HostGIS wrote:
> Hey, this is so excellent. I took Frank's advice about just trying to 
> hack the C++ code... and discovered as a side effect that FreeTDS has a 
> new release. This new release fixed the issue. Ha!
> 
> I do have one outstanding issue, though: it is very, very, very, very 
> slow because it scans every table instead of the 1 table/layer I 
> requested. More on this in a separate email, after I've given some 
> things a try...

Gregor,

You can specify a list of tables of interest in the ODBC connection
string.  This will dramatically reduce startup cost for complex
databases.  From the docs:

"""
ODBC datasources are accessed using a datasource name of the form
<b>ODBC:<i>userid</i>/<i>password</i>@<i>dsn</i>,<i>schema.tablename(geometrycolname),...</i>:<i>srs_tablename(sridcolumn,srtextcolumn)</i></b>.
With optional items dropped the following are also acceptable:

<ul>
<li> <b>ODBC:<i>userid</i>/<i>password</i>@<i>dsn</i></b>
<li> <b>ODBC:<i>userid</i>@<i>dsn</i>,<i>table_list</i></b>
<li> <b>ODBC:<i>dsn</i>,<i>table_list</i></b>
<li> <b>ODBC:<i>dsn</i></b>
<li> <b>ODBC:<i>dsn</i>,<i>table_list</i>:<i>srs_tablename</i></b>
</ul>
...
By default the ODBC searches for GEOMETRY_COLUMNS table.  If found it is
used to identify the set of spatial tables that should be treated as layers
by OGR.  If not found, then all tables in the datasource are returned as
non-spatial layers.  However, if a table list (a list of comma seperated table
names) is provided, then only those tables will be represented as layers
(non-spatial).  Fetching the full definition of all tables in a complicated
database can be quite timeconsuming, so the ability to restrict the set of
tables accessed is primarily a performance issue.<p>
"""

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregor at hostgis.com  Thu Mar 25 00:22:48 2010
From: gregor at hostgis.com (Gregor at HostGIS)
Date: Thu Mar 25 00:22:55 2010
Subject: [gdal-dev] Issue with ogrinfo: unixODBC and MS SQL
In-Reply-To: <4BAAE2CB.1050102@pobox.com>
References: <4BAA458D.6050906@hostgis.com> <4BAA5810.60208@pobox.com>
	<4BAADD3C.1030302@hostgis.com> <4BAAE2CB.1050102@pobox.com>
Message-ID: <4BAAE518.5070704@hostgis.com>

> From the docs:

Hey, how'd you know about that fix I found? Oh right, you invented it. :)

Thanks a million, Frank -- you're worth twice your weight in gold. Even 
just telling me to go hack it myself, actually got the job done, and I 
learned a bit about the internals of OGR+ODBC.

-- 
HostGIS, Open Source solutions for the global GIS community
Greg Allensworth - SysAdmin, Programmer, GIS Person, Security
    Network+   Server+   A+   Security+   Linux+
    PHP   PostgreSQL   MySQL   DHTML/JavaScript/AJAX

"No one cares if you can back up ? only if you can recover."
From alexander.bruy at gmail.com  Thu Mar 25 02:20:29 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Thu Mar 25 02:20:37 2010
Subject: [gdal-dev] Real and "raster" coordinates
In-Reply-To: <64102B2FB850C345B04D09C82018F45F0273EC36@ACT01VEXCCL04.internal.govt>
References: <66a45d6d1003232327h660e321aw55547d50feffab03@mail.gmail.com>
	<64102B2FB850C345B04D09C82018F45F0273EC36@ACT01VEXCCL04.internal.govt>
Message-ID: <66a45d6d1003242320q12cbd5aema82876cf52b035f2@mail.gmail.com>

Thanks! That what I need

2010/3/25 Pinner, Luke <Luke.Pinner@environment.gov.au>:
> The following module might help, use the mapToPixel() function.
>
> #---Imports
> try:
> ? ?from osgeo import gdal
> except ImportError:
> ? ?import gdal
>
> def mapToPixel(mx,my,gt):
> ? ?''' Convert map to pixel coordinates
> ? ? ? ?@param ?mx ? ?Input map x coordinate (double)
> ? ? ? ?@param ?my ? ?Input map y coordinate (double)
> ? ? ? ?@param ?gt ? ?Input geotransform (six doubles)
> ? ? ? ?@return px,py Output coordinates (two doubles)
> ? ?'''
> ? ?if gt[2]+gt[4]==0: #Simple calc, no inversion required
> ? ? ? ?px = (mx - gt[0]) / gt[1]
> ? ? ? ?py = (my - gt[3]) / gt[5]
> ? ?else:
> ? ? ? ?px,py=ApplyGeoTransform(mx,my,InvGeoTransform(gt))
> ? ?return int(px+0.5),int(py+0.5)
>
> def pixelToMap(px,py,gt):
> ? ?''' Convert pixel to map coordinates
> ? ? ? ?@param ?px ? ?Input pixel x coordinate (double)
> ? ? ? ?@param ?py ? ?Input pixel y coordinate (double)
> ? ? ? ?@param ?gt ? ?Input geotransform (six doubles)
> ? ? ? ?@return mx,my Output coordinates (two doubles)
> ? ?'''
> ? ?mx,my=ApplyGeoTransform(px,py,gt)
> ? ?return mx,my
>
> def ApplyGeoTransform(inx,iny,gt):
> ? ?''' Apply a geotransform
> ? ? ? ?@param ?inx ? ? ? Input x coordinate (double)
> ? ? ? ?@param ?iny ? ? ? Input y coordinate (double)
> ? ? ? ?@param ?gt ? ? ? ?Input geotransform (six doubles)
> ? ? ? ?@return outx,outy Output coordinates (two doubles)
> ? ?'''
> ? ?outx = gt[0] + inx*gt[1] + iny*gt[2]
> ? ?outy = gt[3] + inx*gt[4] + iny*gt[5]
> ? ?return (outx,outy)
>
> ?def InvGeoTransform(gt_in):

-- 
Alexander Bruy
From danotchki at gmail.com  Thu Mar 25 06:35:28 2010
From: danotchki at gmail.com (danotchki)
Date: Thu Mar 25 06:35:30 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry 
	collection
In-Reply-To: <4BAA6304.6040502@pobox.com>
References: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>
	<4BAA6304.6040502@pobox.com>
Message-ID: <40c1556a1003250335x19b8ee93u2cfe1b56433a9cc@mail.gmail.com>

That would be awesome, Frank. forceToMultiPolygon was exactly the function I
was looking for (and wondering why it wasn' there).

Just pushing my luck: would there be another way to force the type of
Geometry returned by GetFeatureRef or when getting the layer from the data
source opening the shp?

Thanks again for your help. I'm a big fan of the OGR tools.

Best,
Daniel



On Wed, Mar 24, 2010 at 8:07 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> danotchki wrote:
>
>> Hello List,
>>
>> I hope you will be able to help me. I'm stuck on a problem.
>> I'm trying to reconstruct within my Python script polygons from a
>> shapefile that belong together.
>>
>> So I naturally perfomed:
>>
>> geom_tmp = ogr.CreateGeometryFromWkb(ftr.GetGeometryRef().ExportToWkb())
>> geom.AddGeometryDirectly(geom_tmp)
>>
>> However this works only when the geometry to add is of type POLYGON. This
>> _doesn't_ work with type MULTIPOLYGON (exit code 3).
>>
>
> Daniel,
>
> What type is "geom"?  If it is a MULTIPOLYGON then it can only
> have polygons as children, not multipolygons.
>
>
>  My question: is there a way to add MULTIPOLYGONs to an existing Geometry?
>>
>> What I don't understand is that when CreateGeometryFromWkb returns a
>> MULTIPOLYGON it actually returns a GEOMETRY instead of a GEOMETRYCOLLECTION,
>> thus preventing looping on each individual geometry with GetNumGeometries.
>> Would there be a way to cast the polygon to a multipolygon?
>>
>
> In C/C++ there are methods on OGRGeometryFactory like
> forceToPolygon and forceToMultiPolygon that might be helpful
> but I see these are not exposed in Python.  Are you willing to
> build from SVN trunk source code?  If so, I could add these methods
> for you.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100325/52e2e829/attachment.html
From warmerdam at pobox.com  Thu Mar 25 09:44:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 25 09:44:55 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry 
	collection
In-Reply-To: <40c1556a1003250335x19b8ee93u2cfe1b56433a9cc@mail.gmail.com>
References: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>
	<4BAA6304.6040502@pobox.com>
	<40c1556a1003250335x19b8ee93u2cfe1b56433a9cc@mail.gmail.com>
Message-ID: <4BAB68D9.3040003@pobox.com>

danotchki wrote:
> That would be awesome, Frank. forceToMultiPolygon was exactly the 
> function I was looking for (and wondering why it wasn' there).

Daniel,

OK, I implemented it yesterday.  You can see it in use in Python in:

   http://svn.osgeo.org/gdal/trunk/autotest/ogr/ogr_factory.py

> Just pushing my luck: would there be another way to force the type of 
> Geometry returned by GetFeatureRef or when getting the layer from the 
> data source opening the shp?

This is not normally possible.

> Thanks again for your help. I'm a big fan of the OGR tools.

Thanks!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ari.jolma at gmail.com  Thu Mar 25 11:13:13 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Mar 25 11:20:11 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry collection
In-Reply-To: <4BAB68D9.3040003@pobox.com>
References: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>	<4BAA6304.6040502@pobox.com>	<40c1556a1003250335x19b8ee93u2cfe1b56433a9cc@mail.gmail.com>
	<4BAB68D9.3040003@pobox.com>
Message-ID: <4BAB7D89.8030502@gmail.com>

Frank Warmerdam wrote:
> danotchki wrote:
>> That would be awesome, Frank. forceToMultiPolygon was exactly the 
>> function I was looking for (and wondering why it wasn' there).
>
> Daniel,
>
> OK, I implemented it yesterday.  You can see it in use in Python in:
>
>   http://svn.osgeo.org/gdal/trunk/autotest/ogr/ogr_factory.py

Ah, these could have been made methods of the Geometry class, since 
there is only one Geometry class in the bindings.

What's the "Java dirty trick" that the code talks about?

Ari
From rush at winkey.org  Thu Mar 25 11:39:32 2010
From: rush at winkey.org (brian)
Date: Thu Mar 25 11:39:42 2010
Subject: [gdal-dev] OGR Feature style API changes: StyleTable on datasources
 and layers
Message-ID: <1269531573.25163.74.camel@winkey.org>



I have two issues with the datasource and layer methods to get and set
style tables.

1) The GetStyleTable(), SetStyleTableDirectly(), and SetStyletable()
methods are not virtual therefore only the memory driver can use them.

2) The SetStyleTableDirectly() and SetStyletable() methods both return
void. it is plausable that a datasource or layer could not support them.

The API changes i am proposing are.

1) make the GetStyleTable(), SetStyleTableDirectly(), and
SetStyletable() methods virtual.

2) make the SetStyleTableDirectly() and SetStyletable() methods return
OGRErr.

If a layer or datasource does not have a style table the GetStyleTable()
method would already return NULL.

I am also wondering if it makes any sence to add a couple of constants
for the TestCapability() methods.

Any feedback would be appreciated.

Brian


From sunburned.surveyor at gmail.com  Thu Mar 25 11:39:30 2010
From: sunburned.surveyor at gmail.com (Sunburned Surveyor)
Date: Thu Mar 25 11:45:43 2010
Subject: [gdal-dev] Checking on Goolge Summer of Code GDAL Project
Message-ID: <71097ae21003250839t7321f2a9m30dd0f60c74f7159@mail.gmail.com>

Hey Guys.

I'm trying to help Wolf administer the OSGeo Summer of Code effort
this year. He mentioned GDAL expressed some interest in participating
this year. Does GDAL have any students yet? Are there any GDAL
programmers willing to mentor a student for this summer's program?

I told Wolf I would check in with you guys.

Landon
From jason.roberts at duke.edu  Thu Mar 25 11:48:21 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Mar 25 11:48:24 2010
Subject: [gdal-dev] When should OGRLayer::TestCapability be called?
Message-ID: <013001cacc32$98caa950$ca5ffbf0$@roberts@duke.edu>

Dear OGR devs,

 

OGRLayer::TestCapability allows you to determine if an OGRLayer supports
various things, such as creating new features or updating or deleting
existing features. Can you advise me whether there are any drivers for which
the capabilities differ for a given layer depending on whether it is
instantiated as an OGRLayer via OGRDataSource::GetLayer vs.
OGRDataSource::ExecuteSQL? Also, whether the capabilities will change after
OGRLayer::SetAttributeFilter or OGRLayer::SetSpatialFilter is called on the
resulting OGRLayer instance?

                                                                        

In my scenario, I occasionally need to open layers using the equivalent of a
SQL WHERE and/or ORDER BY clauses. WHERE can be achieved by either including
the expression in a call to OGRDataSource::ExecuteSQL, or by calling
OGRDataSource::GetLayer and then OGRLayer::SetAttributeFilter on the
resulting instance. ORDER BY can be only achieved via
OGRDataSource::ExecuteSQL (please correct me if I'm wrong here). Basically,
I would like to know if the following approach is a robust way of checking
capabilities:

 


1.    Call OGRDataSource::GetLayer and then OGRLayer::TestCapability to
determine what capabilities are supported for that layer.

 

2.    Sometime later, call either OGRDataSource::ExecuteSQL or
OGRDataSource::GetLayer again (possibly followed by
OGRLayer::SetAttributeFilter and/or OGRLayer::SetSpatialFilter), depending
on whether ORDER BY or WHERE are ultimately required for the specific
situation.

 


I would like to know if the capabilities that were tested in step #1 will
remain true in step #2, or if OGRLayer::TestCapability must be called after
the final OGRLayer is instantiated and OGRLayer::SetAttributeFilter and/or
OGRLayer::SetSpatialFilter have been called, just prior to accessing the
features.

 

(As a side issue, I realize that the approach above is imperfect in other
aspects, e.g. it is not optimal, and another thread could conceivably change
the layer between step #1 and #2, but I'm not concerned about those issues
in my scenario and would like to use this approach for various reasons.
Thus, suggestions for how I can moot my question by changing my approach
will not work for me.)

 

Thanks for your help with this esoteric question,

 

Jason

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100325/48c6de82/attachment.html
From warmerdam at pobox.com  Thu Mar 25 12:55:37 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 25 12:55:32 2010
Subject: [gdal-dev] When should OGRLayer::TestCapability be called?
In-Reply-To: <013001cacc32$98caa950$ca5ffbf0$@roberts@duke.edu>
References: <013001cacc32$98caa950$ca5ffbf0$@roberts@duke.edu>
Message-ID: <4BAB9589.6000100@pobox.com>

Jason Roberts wrote:
> Dear OGR devs,
> 
>  
> 
> OGRLayer::TestCapability allows you to determine if an OGRLayer supports 
> various things, such as creating new features or updating or deleting 
> existing features. Can you advise me whether there are any drivers for 
> which the capabilities differ for a given layer depending on whether it 
> is instantiated as an OGRLayer via OGRDataSource::GetLayer vs. 
> OGRDataSource::ExecuteSQL? Also, whether the capabilities will change 
> after OGRLayer::SetAttributeFilter or OGRLayer::SetSpatialFilter is 
> called on the resulting OGRLayer instance?

Jason,

The results of TestCapability() do differ for regular layers vs
ExecuteSQL layers and also vary depending on whether filters are in
place or not.  So, the "answer" to TestCapability() can be quite
dynamic.

> In my scenario, I occasionally need to open layers using the equivalent 
> of a SQL WHERE and/or ORDER BY clauses. WHERE can be achieved by either 
> including the expression in a call to OGRDataSource::ExecuteSQL, or by 
> calling OGRDataSource::GetLayer and then OGRLayer::SetAttributeFilter on 
> the resulting instance. ORDER BY can be only achieved via 
> OGRDataSource::ExecuteSQL (please correct me if I'm wrong here). 
> Basically, I would like to know if the following approach is a robust 
> way of checking capabilities:
> 
> 1.    Call OGRDataSource::GetLayer and then OGRLayer::TestCapability to 
> determine what capabilities are supported for that layer.
> 
>  
> 
> 2.    Sometime later, call either OGRDataSource::ExecuteSQL or 
> OGRDataSource::GetLayer again (possibly followed by 
> OGRLayer::SetAttributeFilter and/or OGRLayer::SetSpatialFilter), 
> depending on whether ORDER BY or WHERE are ultimately required for the 
> specific situation.
> 
>                                                                                                                                                      
> 
> 
> I would like to know if the capabilities that were tested in step #1 
> will remain true in step #2, or if OGRLayer::TestCapability must be 
> called after the final OGRLayer is instantiated and 
> OGRLayer::SetAttributeFilter and/or OGRLayer::SetSpatialFilter have been 
> called, just prior to accessing the features.

No, they will not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Mar 25 12:58:11 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 25 12:58:09 2010
Subject: [gdal-dev] Checking on Goolge Summer of Code GDAL Project
In-Reply-To: <71097ae21003250839t7321f2a9m30dd0f60c74f7159@mail.gmail.com>
References: <71097ae21003250839t7321f2a9m30dd0f60c74f7159@mail.gmail.com>
Message-ID: <4BAB9623.2050300@pobox.com>

Sunburned Surveyor wrote:
> Hey Guys.
> 
> I'm trying to help Wolf administer the OSGeo Summer of Code effort
> this year. He mentioned GDAL expressed some interest in participating
> this year. Does GDAL have any students yet? Are there any GDAL
> programmers willing to mentor a student for this summer's program?
> 
> I told Wolf I would check in with you guys.

Landon,

I have heard expressions of interest from two students about doing
GDAL projects.  Howard Butler and I have expressed willingness to mentor
this year.  I have freshened the information for GDAL below a week ago
or so.

   http://trac.osgeo.org/gdal/wiki/SummerOfCode

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From chaitanya.ch at gmail.com  Thu Mar 25 13:32:39 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Mar 25 13:32:41 2010
Subject: [gdal-dev] OGR Feature style API changes: StyleTable on 
	datasources and layers
In-Reply-To: <1269531573.25163.74.camel@winkey.org>
References: <1269531573.25163.74.camel@winkey.org>
Message-ID: <eb502d881003251032g7cdf170fsb2b9e6c71002cb51@mail.gmail.com>

Brian,

I cannot say much about the style tables. But, I would like to know about
the constants for the TestCapability() methods.

On Thu, Mar 25, 2010 at 9:09 PM, brian <rush@winkey.org> wrote:

>
>
> I have two issues with the datasource and layer methods to get and set
> style tables.
>
> 1) The GetStyleTable(), SetStyleTableDirectly(), and SetStyletable()
> methods are not virtual therefore only the memory driver can use them.
>
> 2) The SetStyleTableDirectly() and SetStyletable() methods both return
> void. it is plausable that a datasource or layer could not support them.
>
> The API changes i am proposing are.
>
> 1) make the GetStyleTable(), SetStyleTableDirectly(), and
> SetStyletable() methods virtual.
>
> 2) make the SetStyleTableDirectly() and SetStyletable() methods return
> OGRErr.
>
> If a layer or datasource does not have a style table the GetStyleTable()
> method would already return NULL.
>
> I am also wondering if it makes any sence to add a couple of constants
> for the TestCapability() methods.
>
> Any feedback would be appreciated.
>
> Brian
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100325/559ce4dc/attachment.html
From Andrew.Nicolaou at bbc.co.uk  Thu Mar 25 13:30:04 2010
From: Andrew.Nicolaou at bbc.co.uk (Andrew Nicolaou)
Date: Thu Mar 25 13:33:55 2010
Subject: [gdal-dev] gdal2tiles - transparent area on base image becomes
	opaque in tiles
Message-ID: <3F5FD0712F5B77409C39BD8C2BB3C8F00614B147@bbcxues12.national.core.bbc.co.uk>

Hi,

I'm using gdal2tiles but I'm having problems with the alpha on some of the tiles output. The base PNG has some transparent areas but the final tiles output have those areas as opaque black.

Here's the base image:
  http://dev.andrewnicolaou.co.uk/m/#base
  
These are the steps I'm doing:

1. Create a VRT from base image:

 gdal_translate -of VRT -a_srs EPSG:4326 -gcp 0 0 -10 65 -gcp 512 0 0 65 -gcp 512 768 0 50 base.png base.vrt

2. Translating the base image into EPSG:900913:

  gdalwarp -of VRT -t_srs EPSG:900913 base.vrt base_mercator.vrt

3. Generate the tiles:
  
  gdal2tiles.py --zoom=0-9 --no-kml --webviewer=openlayers base_mercator.vrt

The problem is that the transparent area in the base image appears as solid black on the tiles:
  http://dev.andrewnicolaou.co.uk/m/#tile

If I don't generate the tiles, but just a single translated image, then the transparency is maintained:
  http://dev.andrewnicolaou.co.uk/m/#mercator

Can anyone see what I'm doing wrong? I'd expect that the base image transparency would carry over to the output tiles.

Many thanks,
Andrew

http://www.bbc.co.uk/
This e-mail (and any attachments) is confidential and may contain personal views which are not the views of the BBC unless specifically stated.
If you have received it in error, please delete it from your system.
Do not use, copy or disclose the information in any way nor act in reliance on it and notify the sender immediately.
Please note that the BBC monitors e-mails sent or received.
Further communication will signify your consent to this.
					
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100325/886889b3/attachment.html
From even.rouault at mines-paris.org  Thu Mar 25 14:16:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Mar 25 14:16:46 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry collection
In-Reply-To: <4BAB7D89.8030502@gmail.com>
References: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>
	<4BAB68D9.3040003@pobox.com> <4BAB7D89.8030502@gmail.com>
Message-ID: <201003251916.33038.even.rouault@mines-paris.org>

> What's the "Java dirty trick" that the code talks about?

Ari,

Do you really want to hear the explanation ;-) ? OK, here it is.

This is related to subtelities of SWIG and Java garbage collection.

Imagine that DISOWN is still used for the input parameter of 
ForceToMultiPolygon

Consider the following code :

geom1 = ogr.CreateGeometryFromWKT(xxxx);
geom2 = ogr.ForceToMultiPolygon(geom1);
geom2 = null;
/* big memory allocation */
foo(geom1)

If nothing special is done, during the big memory allocation, the garbage 
collector will collect the geom2 object. During its finalization, this will 
call the destructor of the underlying C++ object (let's call it geom2_cpp). 
But since the call of ForceToMultiPolygon(), geom1_cpp is owned by geom2_cpp, 
thus deleting geom2_cpp will cause geom1_cpp to become invalid. And 
foo(geom1) would operate on garbage.

This can be fixed (I have already done this for Feature.SetGeometryDirectly()) 
by adding special code in ogr_java.i so that geom1 (the Java object) holds a 
Java reference to geom2 (the Java object). So the 2 objects are bound 
together and garbage collection of one cannot occur if the other one is still 
in scope...

Calling Clone() and separating the lifetime of the 2 objects avoids the above 
complication.

Best regards,

Even

>
> Ari
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From rush at winkey.org  Thu Mar 25 14:47:23 2010
From: rush at winkey.org (brian)
Date: Thu Mar 25 14:47:26 2010
Subject: [gdal-dev] OGR Feature style API changes: StyleTable on 
	datasources and layers
In-Reply-To: <eb502d881003251032g7cdf170fsb2b9e6c71002cb51@mail.gmail.com>
References: <1269531573.25163.74.camel@winkey.org>
	<eb502d881003251032g7cdf170fsb2b9e6c71002cb51@mail.gmail.com>
Message-ID: <1269542843.25163.93.camel@winkey.org>

Chaitanya,

I was thinking possibly something like 
#define OLCStyleTable "StyleTable"
#define ODsCStyleTable "StyleTable"

or similar

Brian


On Thu, 2010-03-25 at 23:02 +0530, Chaitanya kumar CH wrote:
> Brian,
> 
> 
> I cannot say much about the style tables. But, I would like to know
> about the constants for the TestCapability() methods.
> 
> On Thu, Mar 25, 2010 at 9:09 PM, brian <rush@winkey.org> wrote:
>         
>         
>         I have two issues with the datasource and layer methods to get
>         and set
>         style tables.
>         
>         1) The GetStyleTable(), SetStyleTableDirectly(), and
>         SetStyletable()
>         methods are not virtual therefore only the memory driver can
>         use them.
>         
>         2) The SetStyleTableDirectly() and SetStyletable() methods
>         both return
>         void. it is plausable that a datasource or layer could not
>         support them.
>         
>         The API changes i am proposing are.
>         
>         1) make the GetStyleTable(), SetStyleTableDirectly(), and
>         SetStyletable() methods virtual.
>         
>         2) make the SetStyleTableDirectly() and SetStyletable()
>         methods return
>         OGRErr.
>         
>         If a layer or datasource does not have a style table the
>         GetStyleTable()
>         method would already return NULL.
>         
>         I am also wondering if it makes any sence to add a couple of
>         constants
>         for the TestCapability() methods.
>         
>         Any feedback would be appreciated.
>         
>         Brian
>         
>         
>         _______________________________________________
>         gdal-dev mailing list
>         gdal-dev@lists.osgeo.org
>         http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> 
> -- 
> Best regards,
> Chaitanya kumar CH.
> /ta?nj/ /kmr/ 
> +91-9848167848
> 17.2416N 80.1426E
> 

From ivan.lucena at pmldnet.com  Thu Mar 25 16:10:03 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Thu Mar 25 16:10:05 2010
Subject: [gdal-dev] rgdal source code
Message-ID: <20100325201003.8644.qmail@s466.sureserver.com>

Hi there,

I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access the source code [1] and the binaries for Windows depend on some old version of gdal_fw.dll. Does anybody have any clue?

Regards,

Ivan


[1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
From ramirogonzalez at suremptec.com.ar  Thu Mar 25 16:32:47 2010
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Thu Mar 25 16:32:52 2010
Subject: [gdal-dev] Area of hourglass shaped polygon
In-Reply-To: <4BA32423.3040700@york.ac.uk>
References: <38b082f61003180920i5793f212j8699a1664b4a0a2@mail.gmail.com>
	<4BA25423.7070804@alphapixel.com> <4BA32423.3040700@york.ac.uk>
Message-ID: <38b082f61003251332w5d99ab46l12e8e19a2f3b40f0@mail.gmail.com>

I won't calculate the area. I'll show an 'invalid area' message to the user.


Thanks.

2010/3/19 Peter J Halls <P.Halls@york.ac.uk>

> Whilst I agree with Chris that the 'winding' method for calculating polygon
> areas would need tweaking to work with a shape like this, the 'complementary
> areas' method or the triangulation method would.  See Stephen Wise, GIS
> Basics, London: Taylor & Francis (2002) pp61-64 or Joseph O'Rourke,
> Computational Geometry in C, Cambridge (2nd Edn): Cambridge University Press
> (1998) pp18-22.
>
> Best wishes,
>
> Peter
>
>
> Chris 'Xenon' Hanson wrote:
>
>> On 3/18/2010 10:20 AM, Ramiro Gonzalez wrote:
>>
>>> I use gdal to calculate the area of polygons drawn by a user over a map.
>>> The points are added to the polygon in same order the user selects them.
>>> An hourglass shaped polygon can be created adding 4 points like a 'z'.
>>> When the polygon has the shape of an hourglass, the measure returned by
>>> get_Area() is smaller than the sum of the areas of the two independent
>>> triangles.
>>> I'd like to know if there is a way to calculate the area in this
>>> situation?
>>> I tried to intersect the polygon with another that contains it but the
>>> operation fails when the polygon cross itself(return NULL). I could use
>>> this to inform that the area calculated is invalid, but I'd like to know
>>> if there is a better way of knowing this.
>>>
>>
>>  I'm pretty sure this would be considered nonsensical topology. Area
>> calculations usually
>> rely on the points in a polygon winding either consistently clockwise or
>> counter-clockwise, but yours are mixed.
>>
>>  Don't do that. It's bad.
>>
>>  If you want to measure the area of a shape like that, create it out of
>> two normal
>> consistently-wound triangles stacked tip-to-tip.
>>
>> Thanks,
>>> Ramiro
>>>
>>
>>
> --
>
> --------------------------------------------------------------------------------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806     Fax: 01904 433740
> Snail mail: Computing Service, University of York, Heslington, York YO10
> 5DD
> This message has the status of a private and personal communication
>
> --------------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100325/032414f4/attachment.html
From nate-lists at calftrail.com  Thu Mar 25 16:34:20 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Thu Mar 25 16:34:26 2010
Subject: [gdal-dev] Re: How to divide a raster layer into a set of tiles
In-Reply-To: <4BA8F8B9.4F75.00CE.0@co.lincoln.or.us>
References: <20100323182134.9253BE00BCB@lists.osgeo.org>
	<4BA8F8B9.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <6F5CEBEA-5B29-45F1-9D44-AA25B13A629B@calftrail.com>

On Mar 23, 2010, at 5:22 PM, Eli Adam wrote:
> Gilles,
>     I do a similar process (build large vrt mosaic, reproject the
> mosaic vrt to another vrt, tile the reprojected mosaic vrt in new
> projection to tif) although my end tiles are in tif and not compressed. 
> My method is the brute force way and not elegant at all.  You may also
> want to know that I have been advised
> (http://news.gmane.org/gmane.comp.gis.gdal.devel) that this is very
> inefficient  and pushing the VRT format.  Steps 1 and 2 are the same as
> you describe.

For those following along at home, the link to that thread is http://lists.osgeo.org/pipermail/gdal-dev/2010-January/023195.html


> 1) create a single GDAL layer from all initial tiles with gdalbuildvrt
> 2) reproject this virtual raster with gdalwarp (outputs a new .vrt)
> 3) Tile it with gdal_translate:  gdal_translate -projwin 7288440 446648
> 7306569 429923 mosaicvrtprj.vrt tile1.tif


If you need tiles in a typical form (standard web tile map, geographic/ECE, or original projection) you can combine steps 2 and 3 using gdal2tiles.py which works with the VRT source built in step 1. (It uses gdalwarp functions internally to build a similar VRT as step 2, and automatically implements standard tiling instead of the manual calculations in step 3.)

I can't confirm that the process is much slower with a VRT source. A large sample image that took 4m36s as a single file took 4m42s when chopped into 4 tiles and recombined via a VRT. This may scale differently for a larger number of tiles, but considering it took 1m14s for gdal_merge.py to make a new real image (versus 0m2s for gdalbuildvrt), it's a significant GAIN for this small sample.

hope this helps,
-natevw
http://calftrail.com
From Roger.Bivand at nhh.no  Thu Mar 25 16:37:43 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Thu Mar 25 16:37:44 2010
Subject: [gdal-dev] rgdal source code
In-Reply-To: <20100325201003.8644.qmail@s466.sureserver.com>
References: <20100325201003.8644.qmail@s466.sureserver.com>
Message-ID: <1269549463115-4800124.post@n2.nabble.com>


Please, do your homework!

Google on "R rgdal" gives:

http://cran.r-project.org/web/packages/rgdal/index.html

http://rgdal.sourceforge.net/

where the latter says: "The R contributed package rgdal is available from
CRAN", that is the first link. On CRAN you will find both the source tarball
and a Windows 32-bit binary including 1.7.1 with standard drivers and expat
for reading KML etc. 

The sourceforge site is used exclusively as a CVS repository for developers
- it hasn't been used for software distribution since about 2004; the CRAN
distribution mechanism is far more robust and "just works".

Refer to show.file(system.file("README.windows", package="rgdal")) if you
need to build from source for more exotic drivers.

The relevant mailing list is R-sig-geo,
https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the best
point of entrance, the R Spatial task view:
http://cran.r-project.org/web/views/Spatial.html.

Hope this helps,

Roger



Ivan-5 wrote:
> 
> Hi there,
> 
> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access the
> source code [1] and the binaries for Windows depend on some old version of
> gdal_fw.dll. Does anybody have any clue?
> 
> Regards,
> 
> Ivan
> 
> 
> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


-----
Roger Bivand
Economic Geography Section
Department of Economics
Norwegian School of Economics and Business Administration
Helleveien 30
N-5045 Bergen, Norway

-- 
View this message in context: http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4800124.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From nate-lists at calftrail.com  Thu Mar 25 17:00:08 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Thu Mar 25 17:00:16 2010
Subject: [gdal-dev] gdal2tiles.py "direct warping" issue?
In-Reply-To: <4443D81E-468D-4D3E-8373-7B624BD4F1AF@calftrail.com>
References: <4443D81E-468D-4D3E-8373-7B624BD4F1AF@calftrail.com>
Message-ID: <DC25A8CE-5251-4C68-9461-EA6C00B785ED@calftrail.com>

(Sorry about the double post, BTW; wasn't subscribed when I sent the first message but it got through anyway.)
On Mar 23, 2010, at 4:27 PM, Nathan Vander Wilt wrote:
> I'm looking through gdal2tiles.py to get a feel for how it works and any potential issues I might encounter. Around line 801 of the script in GDAL 1.7.1 (right after the call to gdal.AutoCreateWarpedVRT) there is a comment that says:
> 
> TODO: HIGH PRIORITY: Correction of AutoCreateWarpedVRT according to the max zoomlevel for correct direct warping!!!
> 
> What is this about? Is there a problem with the warping done by gdal2tiles.py in some cases?


I wonder if this is related to the "oversized" pixel issues detailed in this bug?
http://code.google.com/p/maptiler/issues/detail?id=13

(And perhaps gdal2tiles development is still happening on another list despite being part of GDAL now?)

thanks,
-natevw
http://calftrail.com
From ari.jolma at gmail.com  Thu Mar 25 17:35:49 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Thu Mar 25 17:36:00 2010
Subject: [gdal-dev] Adding multipolygons to an existing geometry collection
In-Reply-To: <201003251916.33038.even.rouault@mines-paris.org>
References: <40c1556a1003240911i324a4584kfbf5dd930db82fa0@mail.gmail.com>
	<4BAB68D9.3040003@pobox.com> <4BAB7D89.8030502@gmail.com>
	<201003251916.33038.even.rouault@mines-paris.org>
Message-ID: <4BABD735.9030703@gmail.com>

Even Rouault wrote:
>> What's the "Java dirty trick" that the code talks about?
>>     
>
> Ari,
>
> Do you really want to hear the explanation ;-) ? OK, here it is.
>
> This is related to subtelities of SWIG and Java garbage collection.
>
> Imagine that DISOWN is still used for the input parameter of 
> ForceToMultiPolygon
>
> Consider the following code :
>
> geom1 = ogr.CreateGeometryFromWKT(xxxx);
> geom2 = ogr.ForceToMultiPolygon(geom1);
>   

IMHO this shouldn't be allowed in languages that use OGR through swig in 
the first place since forceTo.. really works on its argument geometry 
although it syntactically returns a new pointer. That's why I thought it 
would have been better to be a object method, i.e.,:

geom1 = ogr.CreateGeometryFromWKT(xxxx);
geom1.ForceToMultiPolygon();

There are similar problems elsewhere in the swig bindings, which are 
also fixed with similar tricks in Perl bindings (I'm not sure about the 
other languages), but they are usually due to things like feature 
depending on the existence of its layer.

Regards,

Ari

> geom2 = null;
> /* big memory allocation */
> foo(geom1)
>
> If nothing special is done, during the big memory allocation, the garbage 
> collector will collect the geom2 object. During its finalization, this will 
> call the destructor of the underlying C++ object (let's call it geom2_cpp). 
> But since the call of ForceToMultiPolygon(), geom1_cpp is owned by geom2_cpp, 
> thus deleting geom2_cpp will cause geom1_cpp to become invalid. And 
> foo(geom1) would operate on garbage.
>
> This can be fixed (I have already done this for Feature.SetGeometryDirectly()) 
> by adding special code in ogr_java.i so that geom1 (the Java object) holds a 
> Java reference to geom2 (the Java object). So the 2 objects are bound 
> together and garbage collection of one cannot occur if the other one is still 
> in scope...
>
> Calling Clone() and separating the lifetime of the 2 objects avoids the above 
> complication.
>
> Best regards,
>
> Even
>
>   
>> Ari
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     
>
>
>   

From ivan.lucena at pmldnet.com  Thu Mar 25 17:49:32 2010
From: ivan.lucena at pmldnet.com (Ivan)
Date: Thu Mar 25 17:55:17 2010
Subject: [gdal-dev] rgdal source code
In-Reply-To: <1269549463115-4800124.post@n2.nabble.com>
References: <20100325201003.8644.qmail@s466.sureserver.com>
	<1269549463115-4800124.post@n2.nabble.com>
Message-ID: <4BABDA6C.1060306@pmldnet.com>

Roger,

I in fact did my homework, but I've got a C.

As you can see on my previous message I did find the RGDAL Source Forge page where it shows the CVS 
instructions ===> [1] <===. That would give a B+ at least, no? If it worked.

cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal login
Logging in to :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
CVS password:
cvs [login aborted]: connect to rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection 
refused

That was a dead end.

I download some of those zip packages from rgdal.sourceforge.net but they only have binary that 
requires FWTools installation.

Another dead end.

But you are right I should have search a little more to find the CRAN page. So I am downloading 
rgdal_0.6-2.5.zip now. Let's see how it goes.

Thanks you so very much Roger. Have a nice day.

Ivan

Roger Bivand wrote:
> Please, do your homework!
> 
> Google on "R rgdal" gives:
> 
> http://cran.r-project.org/web/packages/rgdal/index.html
> 
> http://rgdal.sourceforge.net/
> 
> where the latter says: "The R contributed package rgdal is available from
> CRAN", that is the first link. On CRAN you will find both the source tarball
> and a Windows 32-bit binary including 1.7.1 with standard drivers and expat
> for reading KML etc. 
> 
> The sourceforge site is used exclusively as a CVS repository for developers
> - it hasn't been used for software distribution since about 2004; the CRAN
> distribution mechanism is far more robust and "just works".
> 
> Refer to show.file(system.file("README.windows", package="rgdal")) if you
> need to build from source for more exotic drivers.
> 
> The relevant mailing list is R-sig-geo,
> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the best
> point of entrance, the R Spatial task view:
> http://cran.r-project.org/web/views/Spatial.html.
> 
> Hope this helps,
> 
> Roger
> 
> 
> 
> Ivan-5 wrote:
>> Hi there,
>>
>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access the
>> source code [1] and the binaries for Windows depend on some old version of
>> gdal_fw.dll. Does anybody have any clue?
>>
>> Regards,
>>
>> Ivan
>>
>>
>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> 
> 
> -----
> Roger Bivand
> Economic Geography Section
> Department of Economics
> Norwegian School of Economics and Business Administration
> Helleveien 30
> N-5045 Bergen, Norway
> 

From nate-lists at calftrail.com  Thu Mar 25 18:40:33 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Thu Mar 25 18:40:47 2010
Subject: [gdal-dev] gdal_merge GeoTIFF output twice correct size
Message-ID: <8AE20937-55AF-40C7-A794-ECA0BF9F525F@calftrail.com>

I used gdal_merge to combine four tiles into a perfectly square image. However, the resulting file was double the size on disk than I would expect based on its dimensions and bit depth. I opened it in a hex editor, and there is a huge pattern of data that repeats 0x00003075 followed by a ton of zeroes.

Why is gdal_merge writing all this extra data? Does it have something to do with the "sparse" blocks discussed in this thread?
http://lists.osgeo.org/pipermail/gdal-dev/2008-October/018750.html

I found how to perhaps compress these blocks with format options (http://gdal.org/frmt_gtiff.html) and could try that, but that may lead to compatibility issues. Why are these blocks in the file at all? Again, the merged image is square and is completely covered by the source data.

thanks,
-natevw
http://calftrail.com
From warmerdam at pobox.com  Thu Mar 25 18:46:14 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 25 18:46:15 2010
Subject: [gdal-dev] OGR Feature style API changes: StyleTable on
	datasources and layers
In-Reply-To: <1269531573.25163.74.camel@winkey.org>
References: <1269531573.25163.74.camel@winkey.org>
Message-ID: <4BABE7B6.8080600@pobox.com>

brian wrote:
> 
> I have two issues with the datasource and layer methods to get and set
> style tables.
> 
> 1) The GetStyleTable(), SetStyleTableDirectly(), and SetStyletable()
> methods are not virtual therefore only the memory driver can use them.
> 
> 2) The SetStyleTableDirectly() and SetStyletable() methods both return
> void. it is plausable that a datasource or layer could not support them.
> 
> The API changes i am proposing are.
> 
> 1) make the GetStyleTable(), SetStyleTableDirectly(), and
> SetStyletable() methods virtual.
> 
> 2) make the SetStyleTableDirectly() and SetStyletable() methods return
> OGRErr.
> 
> If a layer or datasource does not have a style table the GetStyleTable()
> method would already return NULL.
> 
> I am also wondering if it makes any sence to add a couple of constants
> for the TestCapability() methods.

Brian,

I am supportive of the suggested changes being done in trunk.  I would like
to see this written up as an RFC.  I'd like the RFC to go into a bit more
detail on what does and does not work now and what would and would not work
after the overhaul.  Also, to what extent if any this will alter the C ABI
for which we try to retain a high degree of backward compatability.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Thu Mar 25 18:49:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Mar 25 18:49:06 2010
Subject: [gdal-dev] gdal_merge GeoTIFF output twice correct size
In-Reply-To: <8AE20937-55AF-40C7-A794-ECA0BF9F525F@calftrail.com>
References: <8AE20937-55AF-40C7-A794-ECA0BF9F525F@calftrail.com>
Message-ID: <4BABE861.1040607@pobox.com>

Nathan Vander Wilt wrote:
> I used gdal_merge to combine four tiles into a perfectly square image.
> However, the resulting file was double the size on disk than I would expect
> based on its dimensions and bit depth. I opened it in a hex editor, and
> there is a huge pattern of data that repeats 0x00003075 followed by a ton of
> zeroes.
> 
> Why is gdal_merge writing all this extra data? Does it have something to do
> with the "sparse" blocks discussed in this thread? 
> http://lists.osgeo.org/pipermail/gdal-dev/2008-October/018750.html
> 
> I found how to perhaps compress these blocks with format options
> (http://gdal.org/frmt_gtiff.html) and could try that, but that may lead to
> compatibility issues. Why are these blocks in the file at all? Again, the
> merged image is square and is completely covered by the source data.

NateVW,

There are a variety of reasons the file could be larger than expected.

1) Is the file compressed?  If so, gdal_merge's rewriting of blocks
can result in them being moved to the end of the file if the block is
larger on the second write.

2) Is the file tiled?  Depending on tile and image size partially used
tiles on the right and bottom of an image can result in files being
significantly larger than expected.

A "tiffdump" report on the output file might help deduce what is going on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From nate-lists at calftrail.com  Thu Mar 25 19:09:41 2010
From: nate-lists at calftrail.com (Nathan Vander Wilt)
Date: Thu Mar 25 19:10:23 2010
Subject: [gdal-dev] gdal_merge GeoTIFF output twice correct size
In-Reply-To: <4BABE861.1040607@pobox.com>
References: <8AE20937-55AF-40C7-A794-ECA0BF9F525F@calftrail.com>
	<4BABE861.1040607@pobox.com>
Message-ID: <CD80B4CE-D13F-4904-9B3A-465F12CE4236@calftrail.com>

On Mar 25, 2010, at 3:49 PM, Frank Warmerdam wrote:
> Nathan Vander Wilt wrote:
>> I used gdal_merge to combine four tiles into a perfectly square image.
>> However, the resulting file was double the size on disk than I would expect
>> based on its dimensions and bit depth. I opened it in a hex editor, and
>> there is a huge pattern of data that repeats 0x00003075 followed by a ton of
>> zeroes.
>> Why is gdal_merge writing all this extra data? Does it have something to do
>> with the "sparse" blocks discussed in this thread? http://lists.osgeo.org/pipermail/gdal-dev/2008-October/018750.html
>> I found how to perhaps compress these blocks with format options
>> (http://gdal.org/frmt_gtiff.html) and could try that, but that may lead to
>> compatibility issues. Why are these blocks in the file at all? Again, the
>> merged image is square and is completely covered by the source data.
> 
> NateVW,
> 
> There are a variety of reasons the file could be larger than expected.
> 
> 1) Is the file compressed?  If so, gdal_merge's rewriting of blocks
> can result in them being moved to the end of the file if the block is
> larger on the second write.
> 
> 2) Is the file tiled?  Depending on tile and image size partially used
> tiles on the right and bottom of an image can result in files being
> significantly larger than expected.
> 
> A "tiffdump" report on the output file might help deduce what is going on.



To test something else, I used gdal_retile.py -ps <half_original_width> <half_original_height> to chop a single source GeoTIFF into 4 pieces. I then simply used gdal_merge.py to recombine those four files into a new GeoTIFF. The result looks exactly the same in an image viewer, but the file itself is twice the size it should be. The extra zero cruft doesn't seem to be helping anyone but Seagate.

Here is the information tiffdump reports for the remerged file:

path/to/remerged.tif:
Magic: 0x4949 <little-endian> Version: 0x2a
Directory 0: offset 8 (0x8) next 0 (0)
ImageWidth (256) SHORT (3) 1<10000>
ImageLength (257) SHORT (3) 1<10000>
BitsPerSample (258) SHORT (3) 3<8 8 8>
Compression (259) SHORT (3) 1<1>
Photometric (262) SHORT (3) 1<2>
StripOffsets (273) LONG (4) 10000<281147892 281177892 281207892 281237892 281267892 281297892 281327892 281357892 281387892 281417892 281447892 281477892 281507892 281537892 281567892 281597892 281627892 281657892 281687892 281717892 281747892 281777892 281807892 281837892 ...>
SamplesPerPixel (277) SHORT (3) 1<3>
RowsPerStrip (278) SHORT (3) 1<1>
StripByteCounts (279) LONG (4) 10000<30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 ...>
PlanarConfig (284) SHORT (3) 1<1>
SampleFormat (339) SHORT (3) 3<1 1 1>
33550 (0x830e) DOUBLE (12) 3<0.15 0.15 0>
33922 (0x8482) DOUBLE (12) 6<0 0 0 553500 4.83e+06 0>
34735 (0x87af) SHORT (3) 32<1 1 0 7 1024 0 1 1 1025 0 1 1 1026 34737 22 0 2049 34737 7 22 2054 0 1 9102 ...>
34737 (0x87b1) ASCII (2) 30<WGS 84 / UTM zone 11N|WG ...>

The original file has the following info:

path/to/original.tif:
Magic: 0x4949 <little-endian> Version: 0x2a
Directory 0: offset 300000008 (0x11e1a308) next 0 (0)
ImageWidth (256) SHORT (3) 1<10000>
ImageLength (257) SHORT (3) 1<10000>
BitsPerSample (258) SHORT (3) 3<8 8 8>
Compression (259) SHORT (3) 1<1>
Photometric (262) SHORT (3) 1<2>
StripOffsets (273) LONG (4) 10000<8 30008 60008 90008 120008 150008 180008 210008 240008 270008 300008 330008 360008 390008 420008 450008 480008 510008 540008 570008 600008 630008 660008 690008 ...>
Orientation (274) SHORT (3) 1<1>
SamplesPerPixel (277) SHORT (3) 1<3>
RowsPerStrip (278) SHORT (3) 1<1>
StripByteCounts (279) LONG (4) 10000<30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 30000 ...>
PlanarConfig (284) SHORT (3) 1<1>
33550 (0x830e) DOUBLE (12) 3<0.15 0.15 1>
33922 (0x8482) DOUBLE (12) 6<0 0 0 553500 4.83e+06 0>
34735 (0x87af) SHORT (3) 28<1 1 0 6 1024 0 1 1 1025 0 1 1 2048 0 1 4326 2054 0 1 9102 3072 0 1 32611 ...>

thanks,
-natevw
http://calftrail.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100325/69eaf04c/attachment.html
From Roger.Bivand at nhh.no  Fri Mar 26 04:33:45 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Mar 26 04:36:40 2010
Subject: [gdal-dev] rgdal source code
In-Reply-To: <4BABDA6C.1060306@pmldnet.com>
References: <20100325201003.8644.qmail@s466.sureserver.com>
	<1269549463115-4800124.post@n2.nabble.com>
	<4BABDA6C.1060306@pmldnet.com>
Message-ID: <alpine.LRH.2.00.1003260803540.30361@reclus.nhh.no>

On Thu, 25 Mar 2010, Ivan wrote:

> Roger,
>
> I in fact did my homework, but I've got a C.
>
> As you can see on my previous message I did find the RGDAL Source Forge page 
> where it shows the CVS instructions ===> [1] <===. That would give a B+ at 
> least, no? If it worked.
>
> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal login
> Logging in to :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
> CVS password:
> cvs [login aborted]: connect to 
> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection refused
>
> That was a dead end.

Correct. When I tried, anonymous checkout from sourceforge was also 
blocked - nothing we've done, maybe something sourceforge has done. I have 
changed the main description to:

"WARNING: rgdal is only available for download from CRAN - this repository 
is only used for development and browsing of source code. NEVER use the 
very out of date file bundles for download from this site!!! See 
http://rgdal.sourceforge.net for link."

Short of migrating to R-forge (which I have done for another R package, 
spdep), there isn't much that can be done with sourceforge, I'm afraid 
(sourceforge isn't my favorite place to be).

cc: Tim: Any idea why the anonymous checkout fails? Longer term - is 
migration to SVN on R-Forge worth considering?

Roger

>
> I download some of those zip packages from rgdal.sourceforge.net but they 
> only have binary that requires FWTools installation.
>
> Another dead end.
>
> But you are right I should have search a little more to find the CRAN page. 
> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>

That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for the 
source. Install the Windows binary within R - do *not* treat the zip 
archive as an archive - it is just a frozen binary version of the source 
for Windows.

Roger

> Thanks you so very much Roger. Have a nice day.
>
> Ivan
>
> Roger Bivand wrote:
>> Please, do your homework!
>> 
>> Google on "R rgdal" gives:
>> 
>> http://cran.r-project.org/web/packages/rgdal/index.html
>> 
>> http://rgdal.sourceforge.net/
>> 
>> where the latter says: "The R contributed package rgdal is available from
>> CRAN", that is the first link. On CRAN you will find both the source 
>> tarball
>> and a Windows 32-bit binary including 1.7.1 with standard drivers and expat
>> for reading KML etc. 
>> The sourceforge site is used exclusively as a CVS repository for developers
>> - it hasn't been used for software distribution since about 2004; the CRAN
>> distribution mechanism is far more robust and "just works".
>> 
>> Refer to show.file(system.file("README.windows", package="rgdal")) if you
>> need to build from source for more exotic drivers.
>> 
>> The relevant mailing list is R-sig-geo,
>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the best
>> point of entrance, the R Spatial task view:
>> http://cran.r-project.org/web/views/Spatial.html.
>> 
>> Hope this helps,
>> 
>> Roger
>> 
>> 
>> 
>> Ivan-5 wrote:
>>> Hi there,
>>> 
>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access the
>>> source code [1] and the binaries for Windows depend on some old version of
>>> gdal_fw.dll. Does anybody have any clue?
>>> 
>>> Regards,
>>> 
>>> Ivan
>>> 
>>> 
>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>> 
>>> 
>> 
>> 
>> -----
>> Roger Bivand
>> Economic Geography Section
>> Department of Economics
>> Norwegian School of Economics and Business Administration
>> Helleveien 30
>> N-5045 Bergen, Norway
>> 
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From jorgearevalo at gis4free.org  Fri Mar 26 06:31:02 2010
From: jorgearevalo at gis4free.org (Jorge Arevalo)
Date: Fri Mar 26 06:38:14 2010
Subject: [gdal-dev] Checking on Goolge Summer of Code GDAL Project
In-Reply-To: <4BAB9623.2050300@pobox.com>
References: <71097ae21003250839t7321f2a9m30dd0f60c74f7159@mail.gmail.com> 
	<4BAB9623.2050300@pobox.com>
Message-ID: <d321138e1003260331j18291263i19f64b5b6a2295c6@mail.gmail.com>

On Thu, Mar 25, 2010 at 5:58 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Sunburned Surveyor wrote:
>>
>> Hey Guys.
>>
>> I'm trying to help Wolf administer the OSGeo Summer of Code effort
>> this year. He mentioned GDAL expressed some interest in participating
>> this year. Does GDAL have any students yet? Are there any GDAL
>> programmers willing to mentor a student for this summer's program?
>>
>> I told Wolf I would check in with you guys.
>
> Landon,
>
> I have heard expressions of interest from two students about doing
> GDAL projects. ?Howard Butler and I have expressed willingness to mentor
> this year. ?I have freshened the information for GDAL below a week ago
> or so.
>
> ?http://trac.osgeo.org/gdal/wiki/SummerOfCode
>
> Best regards,
> --

Hello,

I'd like to participate this year, to continue my project. I think I'm
one of the students Frank has mentioned.

Best regards,
Jorge


> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From chaitanya.ch at gmail.com  Fri Mar 26 09:52:36 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Mar 26 09:52:42 2010
Subject: [gdal-dev] Area of hourglass shaped polygon
In-Reply-To: <38b082f61003251332w5d99ab46l12e8e19a2f3b40f0@mail.gmail.com>
References: <38b082f61003180920i5793f212j8699a1664b4a0a2@mail.gmail.com>
	<4BA25423.7070804@alphapixel.com> <4BA32423.3040700@york.ac.uk>
	<38b082f61003251332w5d99ab46l12e8e19a2f3b40f0@mail.gmail.com>
Message-ID: <eb502d881003260652w486c0828tee555bf207e095cf@mail.gmail.com>

Ramiro,

The C API function OGR_R_IsValid( OGRGeometryH ) may help you.

On Fri, Mar 26, 2010 at 2:02 AM, Ramiro Gonzalez <
ramirogonzalez@suremptec.com.ar> wrote:

> I won't calculate the area. I'll show an 'invalid area' message to the
> user.
>
> Thanks.
>
> 2010/3/19 Peter J Halls <P.Halls@york.ac.uk>
>
> Whilst I agree with Chris that the 'winding' method for calculating polygon
>> areas would need tweaking to work with a shape like this, the 'complementary
>> areas' method or the triangulation method would.  See Stephen Wise, GIS
>> Basics, London: Taylor & Francis (2002) pp61-64 or Joseph O'Rourke,
>> Computational Geometry in C, Cambridge (2nd Edn): Cambridge University Press
>> (1998) pp18-22.
>>
>> Best wishes,
>>
>> Peter
>>
>>
>> Chris 'Xenon' Hanson wrote:
>>
>>> On 3/18/2010 10:20 AM, Ramiro Gonzalez wrote:
>>>
>>>> I use gdal to calculate the area of polygons drawn by a user over a map.
>>>> The points are added to the polygon in same order the user selects them.
>>>> An hourglass shaped polygon can be created adding 4 points like a 'z'.
>>>> When the polygon has the shape of an hourglass, the measure returned by
>>>> get_Area() is smaller than the sum of the areas of the two independent
>>>> triangles.
>>>> I'd like to know if there is a way to calculate the area in this
>>>> situation?
>>>> I tried to intersect the polygon with another that contains it but the
>>>> operation fails when the polygon cross itself(return NULL). I could use
>>>> this to inform that the area calculated is invalid, but I'd like to know
>>>> if there is a better way of knowing this.
>>>>
>>>
>>>  I'm pretty sure this would be considered nonsensical topology. Area
>>> calculations usually
>>> rely on the points in a polygon winding either consistently clockwise or
>>> counter-clockwise, but yours are mixed.
>>>
>>>  Don't do that. It's bad.
>>>
>>>  If you want to measure the area of a shape like that, create it out of
>>> two normal
>>> consistently-wound triangles stacked tip-to-tip.
>>>
>>> Thanks,
>>>> Ramiro
>>>>
>>>
>>>
>> --
>>
>> --------------------------------------------------------------------------------
>> Peter J Halls, GIS Advisor, University of York
>> Telephone: 01904 433806     Fax: 01904 433740
>> Snail mail: Computing Service, University of York, Heslington, York YO10
>> 5DD
>> This message has the status of a private and personal communication
>>
>> --------------------------------------------------------------------------------
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.2416N 80.1426E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100326/6ce249b9/attachment-0001.html
From Roger.Bivand at nhh.no  Fri Mar 26 10:31:49 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Mar 26 10:31:51 2010
Subject: [gdal-dev] Re: rgdal source code
In-Reply-To: <alpine.LRH.2.00.1003260803540.30361@reclus.nhh.no>
References: <20100325201003.8644.qmail@s466.sureserver.com>
	<1269549463115-4800124.post@n2.nabble.com>
	<4BABDA6C.1060306@pmldnet.com>
	<alpine.LRH.2.00.1003260803540.30361@reclus.nhh.no>
Message-ID: <1269613909157-4804208.post@n2.nabble.com>


The root cause of the sourceforge issue is in a message posted 2010-03-25
from their admin:

"Update on the current CVS outage that is affecting projects whose UNIX
names start with the letters  a, e, h, i, m, o, r, s, w, z.

The work being done on this server may take up to two days to resolve. We?re
working to resolve this with alacrity and assure maximum stability and
performance."

So access should be back by the end of March.

Roger


Roger Bivand wrote:
> 
> On Thu, 25 Mar 2010, Ivan wrote:
> 
>> Roger,
>>
>> I in fact did my homework, but I've got a C.
>>
>> As you can see on my previous message I did find the RGDAL Source Forge
>> page 
>> where it shows the CVS instructions ===> [1] <===. That would give a B+
>> at 
>> least, no? If it worked.
>>
>> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal login
>> Logging in to
>> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>> CVS password:
>> cvs [login aborted]: connect to 
>> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection refused
>>
>> That was a dead end.
> 
> Correct. When I tried, anonymous checkout from sourceforge was also 
> blocked - nothing we've done, maybe something sourceforge has done. I have 
> changed the main description to:
> 
> "WARNING: rgdal is only available for download from CRAN - this repository 
> is only used for development and browsing of source code. NEVER use the 
> very out of date file bundles for download from this site!!! See 
> http://rgdal.sourceforge.net for link."
> 
> Short of migrating to R-forge (which I have done for another R package, 
> spdep), there isn't much that can be done with sourceforge, I'm afraid 
> (sourceforge isn't my favorite place to be).
> 
> cc: Tim: Any idea why the anonymous checkout fails? Longer term - is 
> migration to SVN on R-Forge worth considering?
> 
> Roger
> 
>>
>> I download some of those zip packages from rgdal.sourceforge.net but they 
>> only have binary that requires FWTools installation.
>>
>> Another dead end.
>>
>> But you are right I should have search a little more to find the CRAN
>> page. 
>> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>>
> 
> That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for the 
> source. Install the Windows binary within R - do *not* treat the zip 
> archive as an archive - it is just a frozen binary version of the source 
> for Windows.
> 
> Roger
> 
>> Thanks you so very much Roger. Have a nice day.
>>
>> Ivan
>>
>> Roger Bivand wrote:
>>> Please, do your homework!
>>> 
>>> Google on "R rgdal" gives:
>>> 
>>> http://cran.r-project.org/web/packages/rgdal/index.html
>>> 
>>> http://rgdal.sourceforge.net/
>>> 
>>> where the latter says: "The R contributed package rgdal is available
>>> from
>>> CRAN", that is the first link. On CRAN you will find both the source 
>>> tarball
>>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>>> expat
>>> for reading KML etc. 
>>> The sourceforge site is used exclusively as a CVS repository for
>>> developers
>>> - it hasn't been used for software distribution since about 2004; the
>>> CRAN
>>> distribution mechanism is far more robust and "just works".
>>> 
>>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>>> you
>>> need to build from source for more exotic drivers.
>>> 
>>> The relevant mailing list is R-sig-geo,
>>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the best
>>> point of entrance, the R Spatial task view:
>>> http://cran.r-project.org/web/views/Spatial.html.
>>> 
>>> Hope this helps,
>>> 
>>> Roger
>>> 
>>> 
>>> 
>>> Ivan-5 wrote:
>>>> Hi there,
>>>> 
>>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>>>> the
>>>> source code [1] and the binaries for Windows depend on some old version
>>>> of
>>>> gdal_fw.dll. Does anybody have any clue?
>>>> 
>>>> Regards,
>>>> 
>>>> Ivan
>>>> 
>>>> 
>>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>> 
>>>> 
>>> 
>>> 
>>> -----
>>> Roger Bivand
>>> Economic Geography Section
>>> Department of Economics
>>> Norwegian School of Economics and Business Administration
>>> Helleveien 30
>>> N-5045 Bergen, Norway
>>> 
>>
>>
> 
> -- 
> Roger Bivand
> Economic Geography Section, Department of Economics, Norwegian School of
> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
> e-mail: Roger.Bivand@nhh.no
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 


-----
Roger Bivand
Economic Geography Section
Department of Economics
Norwegian School of Economics and Business Administration
Helleveien 30
N-5045 Bergen, Norway

-- 
View this message in context: http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ivan.lucena at pmldnet.com  Fri Mar 26 10:56:25 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Fri Mar 26 10:56:28 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gUmU6IHJnZGFsIHNvdXJjZSBjb2Rl?=
Message-ID: <20100326145625.7546.qmail@s466.sureserver.com>

Roger,

Yes, you are right. The source code is on  rgdal_0.6-25.tar.gz, I know, but the instructions to build on Windows are on the rgdal_0.6-25.zip package on README.windows, where it says:

---
The R Windows binary rgdal package is built against an FWTools Windows binary, using VC++.

Notes:

Building rgdal.dll in rgdal/src:

cl /MT /Ox /EHsc /D "WIN32" /c /I E:\rsb\R\R-2.2.1pat\include /I C:\Programfiler\FWTools1.0.0a7\incl
ude *.cpp

link /dll /out:rgdal.dll /def:RGDAL.def gdal-bindings.obj ogr_geom.obj ogr_proj.obj ogrsource.obj E:
\rsb\R\R-2.2.1pat\lib\Rdll.lib /libpath:"C:\Programfiler\FWTools1.0.0a7\lib" gdal_i.lib
---

So I am trying to change it a little bit in order to build against GDAL 1.7.1 (or trunk).

How does that sounds to you? Good idea?

Regards,

Ivan


>  -------Original Message-------
>  From: Roger Bivand <Roger.Bivand@nhh.no>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] Re: rgdal source code
>  Sent: Mar 26 '10 09:31
>  
>  
>  The root cause of the sourceforge issue is in a message posted 2010-03-25
>  from their admin:
>  
>  "Update on the current CVS outage that is affecting projects whose UNIX
>  names start with the letters??a, e, h, i, m, o, r, s, w, z.
>  
>  The work being done on this server may take up to two days to resolve. We?re
>  working to resolve this with alacrity and assure maximum stability and
>  performance."
>  
>  So access should be back by the end of March.
>  
>  Roger
>  
>  
>  Roger Bivand wrote:
>  >
>  > On Thu, 25 Mar 2010, Ivan wrote:
>  >
>  >> Roger,
>  >>
>  >> I in fact did my homework, but I've got a C.
>  >>
>  >> As you can see on my previous message I did find the RGDAL Source Forge
>  >> page
>  >> where it shows the CVS instructions ===> [1] <===. That would give a B+
>  >> at
>  >> least, no? If it worked.
>  >>
>  >> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal login
>  >> Logging in to
>  >> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>  >> CVS password:
>  >> cvs [login aborted]: connect to
>  >> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection refused
>  >>
>  >> That was a dead end.
>  >
>  > Correct. When I tried, anonymous checkout from sourceforge was also
>  > blocked - nothing we've done, maybe something sourceforge has done. I have
>  > changed the main description to:
>  >
>  > "WARNING: rgdal is only available for download from CRAN - this repository
>  > is only used for development and browsing of source code. NEVER use the
>  > very out of date file bundles for download from this site!!! See
>  > http://rgdal.sourceforge.net for link."
>  >
>  > Short of migrating to R-forge (which I have done for another R package,
>  > spdep), there isn't much that can be done with sourceforge, I'm afraid
>  > (sourceforge isn't my favorite place to be).
>  >
>  > cc: Tim: Any idea why the anonymous checkout fails? Longer term - is
>  > migration to SVN on R-Forge worth considering?
>  >
>  > Roger
>  >
>  >>
>  >> I download some of those zip packages from rgdal.sourceforge.net but they
>  >> only have binary that requires FWTools installation.
>  >>
>  >> Another dead end.
>  >>
>  >> But you are right I should have search a little more to find the CRAN
>  >> page.
>  >> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>  >>
>  >
>  > That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for the
>  > source. Install the Windows binary within R - do *not* treat the zip
>  > archive as an archive - it is just a frozen binary version of the source
>  > for Windows.
>  >
>  > Roger
>  >
>  >> Thanks you so very much Roger. Have a nice day.
>  >>
>  >> Ivan
>  >>
>  >> Roger Bivand wrote:
>  >>> Please, do your homework!
>  >>>
>  >>> Google on "R rgdal" gives:
>  >>>
>  >>> http://cran.r-project.org/web/packages/rgdal/index.html
>  >>>
>  >>> http://rgdal.sourceforge.net/
>  >>>
>  >>> where the latter says: "The R contributed package rgdal is available
>  >>> from
>  >>> CRAN", that is the first link. On CRAN you will find both the source
>  >>> tarball
>  >>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>  >>> expat
>  >>> for reading KML etc.
>  >>> The sourceforge site is used exclusively as a CVS repository for
>  >>> developers
>  >>> - it hasn't been used for software distribution since about 2004; the
>  >>> CRAN
>  >>> distribution mechanism is far more robust and "just works".
>  >>>
>  >>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>  >>> you
>  >>> need to build from source for more exotic drivers.
>  >>>
>  >>> The relevant mailing list is R-sig-geo,
>  >>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the best
>  >>> point of entrance, the R Spatial task view:
>  >>> http://cran.r-project.org/web/views/Spatial.html.
>  >>>
>  >>> Hope this helps,
>  >>>
>  >>> Roger
>  >>>
>  >>>
>  >>>
>  >>> Ivan-5 wrote:
>  >>>> Hi there,
>  >>>>
>  >>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>  >>>> the
>  >>>> source code [1] and the binaries for Windows depend on some old version
>  >>>> of
>  >>>> gdal_fw.dll. Does anybody have any clue?
>  >>>>
>  >>>> Regards,
>  >>>>
>  >>>> Ivan
>  >>>>
>  >>>>
>  >>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>  >>>> _______________________________________________
>  >>>> gdal-dev mailing list
>  >>>> gdal-dev@lists.osgeo.org
>  >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >>>>
>  >>>>
>  >>>
>  >>>
>  >>> -----
>  >>> Roger Bivand
>  >>> Economic Geography Section
>  >>> Department of Economics
>  >>> Norwegian School of Economics and Business Administration
>  >>> Helleveien 30
>  >>> N-5045 Bergen, Norway
>  >>>
>  >>
>  >>
>  >
>  > --
>  > Roger Bivand
>  > Economic Geography Section, Department of Economics, Norwegian School of
>  > Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>  > Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>  > e-mail: Roger.Bivand@nhh.no
>  >
>  > _______________________________________________
>  > gdal-dev mailing list
>  > gdal-dev@lists.osgeo.org
>  > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  >
>  >
>  
>  
>  -----
>  Roger Bivand
>  Economic Geography Section
>  Department of Economics
>  Norwegian School of Economics and Business Administration
>  Helleveien 30
>  N-5045 Bergen, Norway
>  
>  --
>  View this message in context: http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>  _______________________________________________
>  gdal-dev mailing list
>  gdal-dev@lists.osgeo.org
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>  
From Roger.Bivand at nhh.no  Fri Mar 26 11:09:22 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Mar 26 11:08:05 2010
Subject: [gdal-dev] Re: rgdal source code
In-Reply-To: <20100326145625.7546.qmail@s466.sureserver.com>
References: <20100326145625.7546.qmail@s466.sureserver.com>
Message-ID: <alpine.LRH.2.00.1003261604050.3438@reclus.nhh.no>

On Fri, 26 Mar 2010, Ivan Lucena wrote:

> Roger,
>
> Yes, you are right. The source code is on  rgdal_0.6-25.tar.gz, I know, but the instructions to build on Windows are on the rgdal_0.6-25.zip package on README.windows, where it says:
>
> ---
> The R Windows binary rgdal package is built against an FWTools Windows binary, using VC++.
>
> Notes:
>
> Building rgdal.dll in rgdal/src:
>
> cl /MT /Ox /EHsc /D "WIN32" /c /I E:\rsb\R\R-2.2.1pat\include /I C:\Programfiler\FWTools1.0.0a7\incl
> ude *.cpp
>
> link /dll /out:rgdal.dll /def:RGDAL.def gdal-bindings.obj ogr_geom.obj ogr_proj.obj ogrsource.obj E:
> \rsb\R\R-2.2.1pat\lib\Rdll.lib /libpath:"C:\Programfiler\FWTools1.0.0a7\lib" gdal_i.lib
> ---
>
> So I am trying to change it a little bit in order to build against GDAL 1.7.1 (or trunk).
>
> How does that sounds to you? Good idea?

Ivan,

No, the README.windows file is of course in the source tarball, in the 
inst directory (as usual for R packages).

If you install the Windows binary, you'll see that it includes GDAL 1.7.1, 
that is the message reporting the GDAL runtime version shown when the 
package is loaded. The only reason for doing anything at all is if you 
need drivers not already provided for your own purposes. Then you might 
need to review the README.windows file and, for example, build against 
current FWTools or OSGEO4W distributions. Please do check the drivers 
first with ogrDrivers() and gdalDrivers() in R after loading the package.

Roger

>
> Regards,
>
> Ivan
>
>
>>  -------Original Message-------
>>  From: Roger Bivand <Roger.Bivand@nhh.no>
>>  To: gdal-dev@lists.osgeo.org
>>  Subject: [gdal-dev] Re: rgdal source code
>>  Sent: Mar 26 '10 09:31
>>
>>
>>  The root cause of the sourceforge issue is in a message posted 2010-03-25
>>  from their admin:
>>
>>  "Update on the current CVS outage that is affecting projects whose UNIX
>>  names start with the letters??a, e, h, i, m, o, r, s, w, z.
>>
>>  The work being done on this server may take up to two days to resolve. We?re
>>  working to resolve this with alacrity and assure maximum stability and
>>  performance."
>>
>>  So access should be back by the end of March.
>>
>>  Roger
>>
>>
>>  Roger Bivand wrote:
>> >
>> > On Thu, 25 Mar 2010, Ivan wrote:
>> >
>> >> Roger,
>> >>
>> >> I in fact did my homework, but I've got a C.
>> >>
>> >> As you can see on my previous message I did find the RGDAL Source Forge
>> >> page
>> >> where it shows the CVS instructions ===> [1] <===. That would give a B+
>> >> at
>> >> least, no? If it worked.
>> >>
>> >> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal login
>> >> Logging in to
>> >> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>> >> CVS password:
>> >> cvs [login aborted]: connect to
>> >> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection refused
>> >>
>> >> That was a dead end.
>> >
>> > Correct. When I tried, anonymous checkout from sourceforge was also
>> > blocked - nothing we've done, maybe something sourceforge has done. I have
>> > changed the main description to:
>> >
>> > "WARNING: rgdal is only available for download from CRAN - this repository
>> > is only used for development and browsing of source code. NEVER use the
>> > very out of date file bundles for download from this site!!! See
>> > http://rgdal.sourceforge.net for link."
>> >
>> > Short of migrating to R-forge (which I have done for another R package,
>> > spdep), there isn't much that can be done with sourceforge, I'm afraid
>> > (sourceforge isn't my favorite place to be).
>> >
>> > cc: Tim: Any idea why the anonymous checkout fails? Longer term - is
>> > migration to SVN on R-Forge worth considering?
>> >
>> > Roger
>> >
>> >>
>> >> I download some of those zip packages from rgdal.sourceforge.net but they
>> >> only have binary that requires FWTools installation.
>> >>
>> >> Another dead end.
>> >>
>> >> But you are right I should have search a little more to find the CRAN
>> >> page.
>> >> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>> >>
>> >
>> > That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for the
>> > source. Install the Windows binary within R - do *not* treat the zip
>> > archive as an archive - it is just a frozen binary version of the source
>> > for Windows.
>> >
>> > Roger
>> >
>> >> Thanks you so very much Roger. Have a nice day.
>> >>
>> >> Ivan
>> >>
>> >> Roger Bivand wrote:
>> >>> Please, do your homework!
>> >>>
>> >>> Google on "R rgdal" gives:
>> >>>
>> >>> http://cran.r-project.org/web/packages/rgdal/index.html
>> >>>
>> >>> http://rgdal.sourceforge.net/
>> >>>
>> >>> where the latter says: "The R contributed package rgdal is available
>> >>> from
>> >>> CRAN", that is the first link. On CRAN you will find both the source
>> >>> tarball
>> >>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>> >>> expat
>> >>> for reading KML etc.
>> >>> The sourceforge site is used exclusively as a CVS repository for
>> >>> developers
>> >>> - it hasn't been used for software distribution since about 2004; the
>> >>> CRAN
>> >>> distribution mechanism is far more robust and "just works".
>> >>>
>> >>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>> >>> you
>> >>> need to build from source for more exotic drivers.
>> >>>
>> >>> The relevant mailing list is R-sig-geo,
>> >>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the best
>> >>> point of entrance, the R Spatial task view:
>> >>> http://cran.r-project.org/web/views/Spatial.html.
>> >>>
>> >>> Hope this helps,
>> >>>
>> >>> Roger
>> >>>
>> >>>
>> >>>
>> >>> Ivan-5 wrote:
>> >>>> Hi there,
>> >>>>
>> >>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>> >>>> the
>> >>>> source code [1] and the binaries for Windows depend on some old version
>> >>>> of
>> >>>> gdal_fw.dll. Does anybody have any clue?
>> >>>>
>> >>>> Regards,
>> >>>>
>> >>>> Ivan
>> >>>>
>> >>>>
>> >>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>> >>>> _______________________________________________
>> >>>> gdal-dev mailing list
>> >>>> gdal-dev@lists.osgeo.org
>> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >>>>
>> >>>>
>> >>>
>> >>>
>> >>> -----
>> >>> Roger Bivand
>> >>> Economic Geography Section
>> >>> Department of Economics
>> >>> Norwegian School of Economics and Business Administration
>> >>> Helleveien 30
>> >>> N-5045 Bergen, Norway
>> >>>
>> >>
>> >>
>> >
>> > --
>> > Roger Bivand
>> > Economic Geography Section, Department of Economics, Norwegian School of
>> > Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> > Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> > e-mail: Roger.Bivand@nhh.no
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>>
>>
>>  -----
>>  Roger Bivand
>>  Economic Geography Section
>>  Department of Economics
>>  Norwegian School of Economics and Business Administration
>>  Helleveien 30
>>  N-5045 Bergen, Norway
>>
>>  --
>>  View this message in context: http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
>>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no
From danotchki at gmail.com  Fri Mar 26 11:54:10 2010
From: danotchki at gmail.com (danotchki)
Date: Fri Mar 26 11:54:14 2010
Subject: [gdal-dev] Cost-efficient way to check if geometry is valid
Message-ID: <40c1556a1003260854p3af22386p297beedd586c5d22@mail.gmail.com>

Good afternoon (at least where I am),

I was wondering if there was a cost-efficient way to find out if a topology
is valid or not. By valid, I basically mean it will not raise a
TopologyException.

I am a geo-noob, sorry if this sounds obvious.

Many thanks,
Daniel
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100326/51191887/attachment.html
From jason.roberts at duke.edu  Fri Mar 26 12:26:39 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Fri Mar 26 12:26:44 2010
Subject: [gdal-dev] Re: rgdal source code
In-Reply-To: <alpine.LRH.2.00.1003261604050.3438@reclus.nhh.no>
References: <20100326145625.7546.qmail@s466.sureserver.com>
	<alpine.LRH.2.00.1003261604050.3438@reclus.nhh.no>
Message-ID: <00d401cacd01$1ce261a0$56a724e0$@roberts@duke.edu>

Roger,

Pardon me for interrupting with a question I've had for a while but not
asked you.

On Windows at least, it appears that rgdal renames the GDAL shared library
(e.g. gdal16.dll) to an rgdal-specific name (e.g. libgdal-1.dll). On
windows, this has the advantage of avoiding DLL name collisions, allowing
rgdal to coexist with other libraries that also load GDAL using its
traditional name (e.g. gdal16.dll). Is that why rgdal renamed the shared
library? Or was it done for another reason?

Thanks,

Jason

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roger Bivand
Sent: Friday, March 26, 2010 11:09 AM
To: Ivan Lucena
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] Re: rgdal source code

On Fri, 26 Mar 2010, Ivan Lucena wrote:

> Roger,
>
> Yes, you are right. The source code is on  rgdal_0.6-25.tar.gz, I know,
but the instructions to build on Windows are on the rgdal_0.6-25.zip package
on README.windows, where it says:
>
> ---
> The R Windows binary rgdal package is built against an FWTools Windows
binary, using VC++.
>
> Notes:
>
> Building rgdal.dll in rgdal/src:
>
> cl /MT /Ox /EHsc /D "WIN32" /c /I E:\rsb\R\R-2.2.1pat\include /I
C:\Programfiler\FWTools1.0.0a7\incl
> ude *.cpp
>
> link /dll /out:rgdal.dll /def:RGDAL.def gdal-bindings.obj ogr_geom.obj
ogr_proj.obj ogrsource.obj E:
> \rsb\R\R-2.2.1pat\lib\Rdll.lib
/libpath:"C:\Programfiler\FWTools1.0.0a7\lib" gdal_i.lib
> ---
>
> So I am trying to change it a little bit in order to build against GDAL
1.7.1 (or trunk).
>
> How does that sounds to you? Good idea?

Ivan,

No, the README.windows file is of course in the source tarball, in the 
inst directory (as usual for R packages).

If you install the Windows binary, you'll see that it includes GDAL 1.7.1, 
that is the message reporting the GDAL runtime version shown when the 
package is loaded. The only reason for doing anything at all is if you 
need drivers not already provided for your own purposes. Then you might 
need to review the README.windows file and, for example, build against 
current FWTools or OSGEO4W distributions. Please do check the drivers 
first with ogrDrivers() and gdalDrivers() in R after loading the package.

Roger

>
> Regards,
>
> Ivan
>
>
>>  -------Original Message-------
>>  From: Roger Bivand <Roger.Bivand@nhh.no>
>>  To: gdal-dev@lists.osgeo.org
>>  Subject: [gdal-dev] Re: rgdal source code
>>  Sent: Mar 26 '10 09:31
>>
>>
>>  The root cause of the sourceforge issue is in a message posted
2010-03-25
>>  from their admin:
>>
>>  "Update on the current CVS outage that is affecting projects whose UNIX
>>  names start with the letters??a, e, h, i, m, o, r, s, w, z.
>>
>>  The work being done on this server may take up to two days to resolve.
We?re
>>  working to resolve this with alacrity and assure maximum stability and
>>  performance."
>>
>>  So access should be back by the end of March.
>>
>>  Roger
>>
>>
>>  Roger Bivand wrote:
>> >
>> > On Thu, 25 Mar 2010, Ivan wrote:
>> >
>> >> Roger,
>> >>
>> >> I in fact did my homework, but I've got a C.
>> >>
>> >> As you can see on my previous message I did find the RGDAL Source
Forge
>> >> page
>> >> where it shows the CVS instructions ===> [1] <===. That would give a
B+
>> >> at
>> >> least, no? If it worked.
>> >>
>> >> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal
login
>> >> Logging in to
>> >> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>> >> CVS password:
>> >> cvs [login aborted]: connect to
>> >> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection
refused
>> >>
>> >> That was a dead end.
>> >
>> > Correct. When I tried, anonymous checkout from sourceforge was also
>> > blocked - nothing we've done, maybe something sourceforge has done. I
have
>> > changed the main description to:
>> >
>> > "WARNING: rgdal is only available for download from CRAN - this
repository
>> > is only used for development and browsing of source code. NEVER use the
>> > very out of date file bundles for download from this site!!! See
>> > http://rgdal.sourceforge.net for link."
>> >
>> > Short of migrating to R-forge (which I have done for another R package,
>> > spdep), there isn't much that can be done with sourceforge, I'm afraid
>> > (sourceforge isn't my favorite place to be).
>> >
>> > cc: Tim: Any idea why the anonymous checkout fails? Longer term - is
>> > migration to SVN on R-Forge worth considering?
>> >
>> > Roger
>> >
>> >>
>> >> I download some of those zip packages from rgdal.sourceforge.net but
they
>> >> only have binary that requires FWTools installation.
>> >>
>> >> Another dead end.
>> >>
>> >> But you are right I should have search a little more to find the CRAN
>> >> page.
>> >> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>> >>
>> >
>> > That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for
the
>> > source. Install the Windows binary within R - do *not* treat the zip
>> > archive as an archive - it is just a frozen binary version of the
source
>> > for Windows.
>> >
>> > Roger
>> >
>> >> Thanks you so very much Roger. Have a nice day.
>> >>
>> >> Ivan
>> >>
>> >> Roger Bivand wrote:
>> >>> Please, do your homework!
>> >>>
>> >>> Google on "R rgdal" gives:
>> >>>
>> >>> http://cran.r-project.org/web/packages/rgdal/index.html
>> >>>
>> >>> http://rgdal.sourceforge.net/
>> >>>
>> >>> where the latter says: "The R contributed package rgdal is available
>> >>> from
>> >>> CRAN", that is the first link. On CRAN you will find both the source
>> >>> tarball
>> >>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>> >>> expat
>> >>> for reading KML etc.
>> >>> The sourceforge site is used exclusively as a CVS repository for
>> >>> developers
>> >>> - it hasn't been used for software distribution since about 2004; the
>> >>> CRAN
>> >>> distribution mechanism is far more robust and "just works".
>> >>>
>> >>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>> >>> you
>> >>> need to build from source for more exotic drivers.
>> >>>
>> >>> The relevant mailing list is R-sig-geo,
>> >>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the
best
>> >>> point of entrance, the R Spatial task view:
>> >>> http://cran.r-project.org/web/views/Spatial.html.
>> >>>
>> >>> Hope this helps,
>> >>>
>> >>> Roger
>> >>>
>> >>>
>> >>>
>> >>> Ivan-5 wrote:
>> >>>> Hi there,
>> >>>>
>> >>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>> >>>> the
>> >>>> source code [1] and the binaries for Windows depend on some old
version
>> >>>> of
>> >>>> gdal_fw.dll. Does anybody have any clue?
>> >>>>
>> >>>> Regards,
>> >>>>
>> >>>> Ivan
>> >>>>
>> >>>>
>> >>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>> >>>> _______________________________________________
>> >>>> gdal-dev mailing list
>> >>>> gdal-dev@lists.osgeo.org
>> >>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >>>>
>> >>>>
>> >>>
>> >>>
>> >>> -----
>> >>> Roger Bivand
>> >>> Economic Geography Section
>> >>> Department of Economics
>> >>> Norwegian School of Economics and Business Administration
>> >>> Helleveien 30
>> >>> N-5045 Bergen, Norway
>> >>>
>> >>
>> >>
>> >
>> > --
>> > Roger Bivand
>> > Economic Geography Section, Department of Economics, Norwegian School
of
>> > Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>> > Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>> > e-mail: Roger.Bivand@nhh.no
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>>
>>
>>  -----
>>  Roger Bivand
>>  Economic Geography Section
>>  Department of Economics
>>  Norwegian School of Economics and Business Administration
>>  Helleveien 30
>>  N-5045 Bergen, Norway
>>
>>  --
>>  View this message in context:
http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
>>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>  _______________________________________________
>>  gdal-dev mailing list
>>  gdal-dev@lists.osgeo.org
>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From jluis at ualg.pt  Fri Mar 26 13:49:35 2010
From: jluis at ualg.pt (Joaquim Luis)
Date: Fri Mar 26 13:49:49 2010
Subject: [gdal-dev] VC10 64-bits compiling
Message-ID: <4BACF3AF.7000909@ualg.pt>

Hi

I just managed to compile a 64-bits GDAL trunk with VC10
There are lots of new warnings but of "inocent" type. However I don't 
know how to judge this one that might be not so innocuous

...
C:\programs\GDALtrunk\gdal\frmts>cd wms && nmake /nologo /f makefile.vc 
&& cd ..   || exit 1
         xcopy /D  /Y *.obj ..\o
0 File(s) copied
         cd ..
         if exist gdal.lib del gdal.lib
         lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj 
frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: This object file does 
not define any previously undefined public symbols, so it will not be 
used by any link operation that consumes this library

Joaquim Luis
From Roger.Bivand at nhh.no  Fri Mar 26 14:50:52 2010
From: Roger.Bivand at nhh.no (Roger Bivand)
Date: Fri Mar 26 14:49:35 2010
Subject: [gdal-dev] Re: rgdal source code
In-Reply-To: <00d401cacd01$1ce261a0$56a724e0$@roberts@duke.edu>
References: <20100326145625.7546.qmail@s466.sureserver.com>
	<alpine.LRH.2.00.1003261604050.3438@reclus.nhh.no>
	<00d401cacd01$1ce261a0$56a724e0$@roberts@duke.edu>
Message-ID: <alpine.LRH.2.00.1003261943570.4275@reclus.nhh.no>

On Fri, 26 Mar 2010, Jason Roberts wrote:

> Roger,
>
> Pardon me for interrupting with a question I've had for a while but not
> asked you.
>
> On Windows at least, it appears that rgdal renames the GDAL shared library
> (e.g. gdal16.dll) to an rgdal-specific name (e.g. libgdal-1.dll). On
> windows, this has the advantage of avoiding DLL name collisions, allowing
> rgdal to coexist with other libraries that also load GDAL using its
> traditional name (e.g. gdal16.dll). Is that why rgdal renamed the shared
> library? Or was it done for another reason?

Jason,

No, it is the name it gets when built under MSYS by default, nothing 
cleverer than that, I'm afraid!

This is a different question entirely, but a heads-up might be worthwhile. 
When R 2.11 arrives in three weeks time, there will be a 64-bit Windows 
version. Because of the external dependencies on expat, proj4, and GDAL, 
rgdal is one of only a very small group of CRAN packages that is not 
available as a 64-bit Windows binary. It would be very useful if 64-bit 
Windows users got together and figured out how to make a bundle of 64-bit 
DLLs that could automate the CRAN Windows build of rgdal also for 64-bit 
Windows. R is built with MinGW, so in the MSYS family. I have no access to 
such a Windows platform, but have some advice from Brian Ripley, and one 
interested helper. The more the merrier!

Roger

>
> Thanks,
>
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roger Bivand
> Sent: Friday, March 26, 2010 11:09 AM
> To: Ivan Lucena
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Re: rgdal source code
>
> On Fri, 26 Mar 2010, Ivan Lucena wrote:
>
>> Roger,
>>
>> Yes, you are right. The source code is on  rgdal_0.6-25.tar.gz, I know,
> but the instructions to build on Windows are on the rgdal_0.6-25.zip package
> on README.windows, where it says:
>>
>> ---
>> The R Windows binary rgdal package is built against an FWTools Windows
> binary, using VC++.
>>
>> Notes:
>>
>> Building rgdal.dll in rgdal/src:
>>
>> cl /MT /Ox /EHsc /D "WIN32" /c /I E:\rsb\R\R-2.2.1pat\include /I
> C:\Programfiler\FWTools1.0.0a7\incl
>> ude *.cpp
>>
>> link /dll /out:rgdal.dll /def:RGDAL.def gdal-bindings.obj ogr_geom.obj
> ogr_proj.obj ogrsource.obj E:
>> \rsb\R\R-2.2.1pat\lib\Rdll.lib
> /libpath:"C:\Programfiler\FWTools1.0.0a7\lib" gdal_i.lib
>> ---
>>
>> So I am trying to change it a little bit in order to build against GDAL
> 1.7.1 (or trunk).
>>
>> How does that sounds to you? Good idea?
>
> Ivan,
>
> No, the README.windows file is of course in the source tarball, in the
> inst directory (as usual for R packages).
>
> If you install the Windows binary, you'll see that it includes GDAL 1.7.1,
> that is the message reporting the GDAL runtime version shown when the
> package is loaded. The only reason for doing anything at all is if you
> need drivers not already provided for your own purposes. Then you might
> need to review the README.windows file and, for example, build against
> current FWTools or OSGEO4W distributions. Please do check the drivers
> first with ogrDrivers() and gdalDrivers() in R after loading the package.
>
> Roger
>
>>
>> Regards,
>>
>> Ivan
>>
>>
>>>  -------Original Message-------
>>>  From: Roger Bivand <Roger.Bivand@nhh.no>
>>>  To: gdal-dev@lists.osgeo.org
>>>  Subject: [gdal-dev] Re: rgdal source code
>>>  Sent: Mar 26 '10 09:31
>>>
>>>
>>>  The root cause of the sourceforge issue is in a message posted
> 2010-03-25
>>>  from their admin:
>>>
>>>  "Update on the current CVS outage that is affecting projects whose UNIX
>>>  names start with the letters??a, e, h, i, m, o, r, s, w, z.
>>>
>>>  The work being done on this server may take up to two days to resolve.
> We?re
>>>  working to resolve this with alacrity and assure maximum stability and
>>>  performance."
>>>
>>>  So access should be back by the end of March.
>>>
>>>  Roger
>>>
>>>
>>>  Roger Bivand wrote:
>>>>
>>>> On Thu, 25 Mar 2010, Ivan wrote:
>>>>
>>>>> Roger,
>>>>>
>>>>> I in fact did my homework, but I've got a C.
>>>>>
>>>>> As you can see on my previous message I did find the RGDAL Source
> Forge
>>>>> page
>>>>> where it shows the CVS instructions ===> [1] <===. That would give a
> B+
>>>>> at
>>>>> least, no? If it worked.
>>>>>
>>>>> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal
> login
>>>>> Logging in to
>>>>> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>>>>> CVS password:
>>>>> cvs [login aborted]: connect to
>>>>> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection
> refused
>>>>>
>>>>> That was a dead end.
>>>>
>>>> Correct. When I tried, anonymous checkout from sourceforge was also
>>>> blocked - nothing we've done, maybe something sourceforge has done. I
> have
>>>> changed the main description to:
>>>>
>>>> "WARNING: rgdal is only available for download from CRAN - this
> repository
>>>> is only used for development and browsing of source code. NEVER use the
>>>> very out of date file bundles for download from this site!!! See
>>>> http://rgdal.sourceforge.net for link."
>>>>
>>>> Short of migrating to R-forge (which I have done for another R package,
>>>> spdep), there isn't much that can be done with sourceforge, I'm afraid
>>>> (sourceforge isn't my favorite place to be).
>>>>
>>>> cc: Tim: Any idea why the anonymous checkout fails? Longer term - is
>>>> migration to SVN on R-Forge worth considering?
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> I download some of those zip packages from rgdal.sourceforge.net but
> they
>>>>> only have binary that requires FWTools installation.
>>>>>
>>>>> Another dead end.
>>>>>
>>>>> But you are right I should have search a little more to find the CRAN
>>>>> page.
>>>>> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>>>>>
>>>>
>>>> That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for
> the
>>>> source. Install the Windows binary within R - do *not* treat the zip
>>>> archive as an archive - it is just a frozen binary version of the
> source
>>>> for Windows.
>>>>
>>>> Roger
>>>>
>>>>> Thanks you so very much Roger. Have a nice day.
>>>>>
>>>>> Ivan
>>>>>
>>>>> Roger Bivand wrote:
>>>>>> Please, do your homework!
>>>>>>
>>>>>> Google on "R rgdal" gives:
>>>>>>
>>>>>> http://cran.r-project.org/web/packages/rgdal/index.html
>>>>>>
>>>>>> http://rgdal.sourceforge.net/
>>>>>>
>>>>>> where the latter says: "The R contributed package rgdal is available
>>>>>> from
>>>>>> CRAN", that is the first link. On CRAN you will find both the source
>>>>>> tarball
>>>>>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>>>>>> expat
>>>>>> for reading KML etc.
>>>>>> The sourceforge site is used exclusively as a CVS repository for
>>>>>> developers
>>>>>> - it hasn't been used for software distribution since about 2004; the
>>>>>> CRAN
>>>>>> distribution mechanism is far more robust and "just works".
>>>>>>
>>>>>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>>>>>> you
>>>>>> need to build from source for more exotic drivers.
>>>>>>
>>>>>> The relevant mailing list is R-sig-geo,
>>>>>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the
> best
>>>>>> point of entrance, the R Spatial task view:
>>>>>> http://cran.r-project.org/web/views/Spatial.html.
>>>>>>
>>>>>> Hope this helps,
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>>
>>>>>>
>>>>>> Ivan-5 wrote:
>>>>>>> Hi there,
>>>>>>>
>>>>>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>>>>>>> the
>>>>>>> source code [1] and the binaries for Windows depend on some old
> version
>>>>>>> of
>>>>>>> gdal_fw.dll. Does anybody have any clue?
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Ivan
>>>>>>>
>>>>>>>
>>>>>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> -----
>>>>>> Roger Bivand
>>>>>> Economic Geography Section
>>>>>> Department of Economics
>>>>>> Norwegian School of Economics and Business Administration
>>>>>> Helleveien 30
>>>>>> N-5045 Bergen, Norway
>>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Economic Geography Section, Department of Economics, Norwegian School
> of
>>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>> e-mail: Roger.Bivand@nhh.no
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>>
>>>  -----
>>>  Roger Bivand
>>>  Economic Geography Section
>>>  Department of Economics
>>>  Norwegian School of Economics and Business Administration
>>>  Helleveien 30
>>>  N-5045 Bergen, Norway
>>>
>>>  --
>>>  View this message in context:
> http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
>>>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>  _______________________________________________
>>>  gdal-dev mailing list
>>>  gdal-dev@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no
From kmichael.aye at gmail.com  Fri Mar 26 15:12:43 2010
From: kmichael.aye at gmail.com (Michael Aye)
Date: Fri Mar 26 15:12:46 2010
Subject: [gdal-dev] Re: VRT creation with Python
In-Reply-To: <4BA974C1.3040609@pobox.com>
References: <1269382954306-4787592.post@n2.nabble.com>
	<4BA974C1.3040609@pobox.com>
Message-ID: <1269630763391-4805793.post@n2.nabble.com>



Frank Warmerdam wrote:
> 
> 
> There is no public GDAL API for modifying the sourcefilename of a VRT.
> Can you not just create the VRT files programmatically by inserting the
> filename in a template text file?
> 
I can, but that's still more coding than with my idea of manipulating
meta-data, basically I was thinking
of something like:
* ds = gdal.Open('some.vrt')
* (maybe a ds2 = ds.Copy() or so here?)
* ds2.SetMetaDataItem('SourceFilename', 'newFileName')
* ds2.Reload() (or ds2.Open() if it's thinkable to have a ds handle while
it's 'closed'?)


Frank Warmerdam wrote:
> 
> I don't understand your point about metadata.  Were you hoping the
> metadata for the underlying file would be passed through the VRT to
> the application? This does not occur with VRTs even when they reference
> a GDAL supported (rather than raw) file.
> 
I understood this sentence from the  http://www.gdal.org/gdal_vrttut.html
VRT description  :


> . A special attribute of VRT datasets is that sources can be added to the
> VRTRasterBand (but not to VRTRawRasterBand) by passing the XML describing
> the source into SetMetadata() on the special domain target
> "new_vrt_sources".
> 
like that there is at least some kind of machinery there to provide sources
to an existing VRT dataset. I read that this is not possible for
RawRasterBands, but was hoping that there are other possibles in GDAL, where
this would be possible. Anyhow, I did it myself know, creating a new VRT for
all images just before I read it.


Frank Warmerdam wrote:
> 
> Is the .img file a PDS file?  Are you aware there is a PDS driver for
> GDAL? Are you sure you can't just access the PDS image directly?
> 
I am aware and tried it, but got the 'unsupported format' message. I am
using PyPDS now to read the header and adapt the settings for the vrt
creation with a self-made mini xml writer.
Our PDS images are, I think, some of the most complex PDS data that there
is, with several binary subframes inside, so I guess, the gdal driver still
has to be improved for that.
I asked our team leader, if I could provide you with an example image (it's
as of yet non-public data), and he agreed. So if you like, I could send you
an FC image by email, so that you could have a look at it, and hopefully
implement it into the PDS driver.

Have a good weekend!
Michael
-- 
View this message in context: http://n2.nabble.com/VRT-creation-with-Python-tp4787592p4805793.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From even.rouault at mines-paris.org  Fri Mar 26 15:19:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Mar 26 15:20:00 2010
Subject: [gdal-dev] Re: VRT creation with Python
In-Reply-To: <1269630763391-4805793.post@n2.nabble.com>
References: <1269382954306-4787592.post@n2.nabble.com>
	<4BA974C1.3040609@pobox.com>
	<1269630763391-4805793.post@n2.nabble.com>
Message-ID: <201003262019.47378.even.rouault@mines-paris.org>

Michael,

In case you're not aware of it, you don't have to write the VRT in a on-disk 
file. You can store it into a Python string instead, like :

vrt_desc = """
<VRTDataset rasterXSize="20" rasterYSize="20">
  <SRS>PROJCS[&quot;NAD27 / UTM zone 
11N&quot;,GEOGCS[&quot;NAD27&quot;,DATUM[&quot;North_American_Datum_1927&quot;,SPHEROID[&quot;Clarke 
1866&quot;,6378206.4,294.9786982139006,AUTHORITY[&quot;EPSG&quot;,&quot;7008&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6267&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&quot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4267&quot;]],PROJECTION[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],PARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northing&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;26711&quot;]]</SRS>
  <GeoTransform>  4.4072000000000000e+05,  6.0000000000000000e+01,  
0.0000000000000000e+00,  3.7513200000000000e+06,  
0.0000000000000000e+00, -6.0000000000000000e+01</GeoTransform>
  <Metadata>
    <MDI key="AREA_OR_POINT">Area</MDI>
  </Metadata>
  <VRTRasterBand dataType="Byte" band="1">
    <Metadata/>
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">byte.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="20" DataType="Byte" 
BlockXSize="20" BlockYSize="20"/>
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="20"/>
      <DstRect xOff="0" yOff="0" xSize="20" ySize="20"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>
"""

ds = gdal.Open(vrt_desc)

"<VRTDataset" must be the first bytes of the "filename".

Le Friday 26 March 2010 20:12:43 Michael Aye, vous avez ?crit?:
> Frank Warmerdam wrote:
> > There is no public GDAL API for modifying the sourcefilename of a VRT.
> > Can you not just create the VRT files programmatically by inserting the
> > filename in a template text file?
>
> I can, but that's still more coding than with my idea of manipulating
> meta-data, basically I was thinking
> of something like:
> * ds = gdal.Open('some.vrt')
> * (maybe a ds2 = ds.Copy() or so here?)
> * ds2.SetMetaDataItem('SourceFilename', 'newFileName')
> * ds2.Reload() (or ds2.Open() if it's thinkable to have a ds handle while
> it's 'closed'?)
>
> Frank Warmerdam wrote:
> > I don't understand your point about metadata.  Were you hoping the
> > metadata for the underlying file would be passed through the VRT to
> > the application? This does not occur with VRTs even when they reference
> > a GDAL supported (rather than raw) file.
>
> I understood this sentence from the  http://www.gdal.org/gdal_vrttut.html
>
> VRT description  :
> > . A special attribute of VRT datasets is that sources can be added to the
> > VRTRasterBand (but not to VRTRawRasterBand) by passing the XML describing
> > the source into SetMetadata() on the special domain target
> > "new_vrt_sources".
>
> like that there is at least some kind of machinery there to provide sources
> to an existing VRT dataset. I read that this is not possible for
> RawRasterBands, but was hoping that there are other possibles in GDAL,
> where this would be possible. Anyhow, I did it myself know, creating a new
> VRT for all images just before I read it.
>
> Frank Warmerdam wrote:
> > Is the .img file a PDS file?  Are you aware there is a PDS driver for
> > GDAL? Are you sure you can't just access the PDS image directly?
>
> I am aware and tried it, but got the 'unsupported format' message. I am
> using PyPDS now to read the header and adapt the settings for the vrt
> creation with a self-made mini xml writer.
> Our PDS images are, I think, some of the most complex PDS data that there
> is, with several binary subframes inside, so I guess, the gdal driver still
> has to be improved for that.
> I asked our team leader, if I could provide you with an example image (it's
> as of yet non-public data), and he agreed. So if you like, I could send you
> an FC image by email, so that you could have a look at it, and hopefully
> implement it into the PDS driver.
>
> Have a good weekend!
> Michael


From sunburned.surveyor at gmail.com  Fri Mar 26 16:05:55 2010
From: sunburned.surveyor at gmail.com (Sunburned Surveyor)
Date: Fri Mar 26 16:05:59 2010
Subject: [gdal-dev] Checking on Goolge Summer of Code GDAL Project
In-Reply-To: <d321138e1003260331j18291263i19f64b5b6a2295c6@mail.gmail.com>
References: <71097ae21003250839t7321f2a9m30dd0f60c74f7159@mail.gmail.com>
	<4BAB9623.2050300@pobox.com>
	<d321138e1003260331j18291263i19f64b5b6a2295c6@mail.gmail.com>
Message-ID: <71097ae21003261305h4baf60c9vb37f355161a2c28@mail.gmail.com>

Thanks Jorge. Don't forget the student application period starts on
March 29 and is only open for a few days.

It looks like we've got until April 21 to get GDAL mentors signed up,
but the sooner we do this the better.

I look forward to working with the GDAL team over the summer. Thank
you for the information.

Landon

On Fri, Mar 26, 2010 at 3:31 AM, Jorge Arevalo
<jorgearevalo@gis4free.org> wrote:
> On Thu, Mar 25, 2010 at 5:58 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
>> Sunburned Surveyor wrote:
>>>
>>> Hey Guys.
>>>
>>> I'm trying to help Wolf administer the OSGeo Summer of Code effort
>>> this year. He mentioned GDAL expressed some interest in participating
>>> this year. Does GDAL have any students yet? Are there any GDAL
>>> programmers willing to mentor a student for this summer's program?
>>>
>>> I told Wolf I would check in with you guys.
>>
>> Landon,
>>
>> I have heard expressions of interest from two students about doing
>> GDAL projects. ?Howard Butler and I have expressed willingness to mentor
>> this year. ?I have freshened the information for GDAL below a week ago
>> or so.
>>
>> ?http://trac.osgeo.org/gdal/wiki/SummerOfCode
>>
>> Best regards,
>> --
>
> Hello,
>
> I'd like to participate this year, to continue my project. I think I'm
> one of the students Frank has mentioned.
>
> Best regards,
> Jorge
>
>
>> ---------------------------------------+--------------------------------------
>> I set the clouds in motion - turn up ? | Frank Warmerdam,
>> warmerdam@pobox.com
>> light and sound - activate the windows | http://pobox.com/~warmerdam
>> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
From jaadfoo at gmail.com  Fri Mar 26 16:22:54 2010
From: jaadfoo at gmail.com (Jamie Adams)
Date: Fri Mar 26 16:22:58 2010
Subject: [gdal-dev] flipping raster in python
Message-ID: <f4339511003261322w42dcbe10qab071f1a36a81880@mail.gmail.com>

I've written some simple Python code to flip a raster in relation to the
y-axis.  The raster is 20000x19459 and has 4 bands of type Byte, and is
written east to west (I have no idea why).  The script proceeds normally for
the first 2 bands, but slows way down after starting band 3.  I let it run
overnight, and it had processed less than 1000 columnsin band 3, whereas the
previous pace for bands 1&2 was around 1000 columns every 10 seconds.  Here
is the relevant code with a few debugging statements followed by the
gdalinfo output.  The only thing I'm noticing is that the input image is
INTERLEAVED=BAND whereas the output is INTERLEAVED=PIXEL.  Any help is
appreciated.

------------------------------------------------------------------------------
for band in range(1, indataset.RasterCount + 1):
  ## Print the current band
  print 'Band %s' % band

  inband = indataset.GetRasterBand(band)
  outband = outdataset.GetRasterBand(band)

  count = 0
  print count

  for i in range(inband.XSize):

    ## print the current interval of 1k lines
    new_count = int(i / 1000)
    if new_count > count:
      print new_count
      count = new_count

    inline = inband.ReadAsArray(i, 0, 1, inband.YSize)

    outband.WriteArray(inline, inband.XSize - i - 1, 0)

    inline = None

  inband = None
  outband = None

------------------------------------------------------------------------------
Driver: GTiff/GeoTIFF
Files: test.tif
Size is 20000, 19459
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-175.536864949200321,33.666235092496755)
Pixel Size = (-0.000062579160220,-0.000054370391310)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=BAND
Corner Coordinates:
Upper Left  (-175.5368649,  33.6662351) (175d32'12.71"W, 33d39'58.45"N)
Lower Left  (-175.5368649,  32.6082416) (175d32'12.71"W, 32d36'29.67"N)
Upper Right (-176.7884482,  33.6662351) (176d47'18.41"W, 33d39'58.45"N)
Lower Right (-176.7884482,  32.6082416) (176d47'18.41"W, 32d36'29.67"N)
Center      (-176.1626566,  33.1372384) (176d 9'45.56"W, 33d 8'14.06"N)
Band 1 Block=20000x1 Type=Byte, ColorInterp=Red
  Mask Flags: PER_DATASET ALPHA
Band 2 Block=20000x1 Type=Byte, ColorInterp=Green
  Mask Flags: PER_DATASET ALPHA
Band 3 Block=20000x1 Type=Byte, ColorInterp=Blue
  Mask Flags: PER_DATASET ALPHA
Band 4 Block=20000x1 Type=Byte, ColorInterp=Alpha
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100326/794329f0/attachment.html
From ekanegae at gmail.com  Fri Mar 26 16:45:26 2010
From: ekanegae at gmail.com (Eduardo Kanegae)
Date: Fri Mar 26 16:45:28 2010
Subject: [gdal-dev] Error trying to merge 3 files for a multi-band ( Windows
	7 PRO, 
Message-ID: <ce13c0ca1003261345i3f9b5825od44b1e83f027b024@mail.gmail.com>

Hi folks,

I'm trying to merge 3 separated tiff files to a single one ( make a
RGB composition with 3 bands) using the command:

$ gdal_merge -of GTiff -o target-RGB432.tif -separate BAND4.tif
BAND3.tif BAND2.tif

I'm running Windows 7 Pro, FWTools 2.4.7 with GDAL 1.7.0b2

and I get the following error:

* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
* * * * * * * * * * * * * *
Traceback (most recent call last):
  File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 463, in ?
    sys.exit(main())
  File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 433, in main
    if quiet == 0 and verbose == 0:
UnboundLocalError: local variable 'quiet' referenced before assignment
* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
* * * * * * * * * * * * * *

Any idea?

-- 
Eduardo Patto Kanegae
http://blogdopatto.webmapit.com.br
From even.rouault at mines-paris.org  Fri Mar 26 17:01:39 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Mar 26 17:01:54 2010
Subject: [gdal-dev] Error trying to merge 3 files for a multi-band (
	Windows 7 PRO, 
In-Reply-To: <ce13c0ca1003261345i3f9b5825od44b1e83f027b024@mail.gmail.com>
References: <ce13c0ca1003261345i3f9b5825od44b1e83f027b024@mail.gmail.com>
Message-ID: <201003262201.42132.even.rouault@mines-paris.org>

Eduardo,

Yes, this is a known regression.  See http://trac.osgeo.org/gdal/ticket/3354

You can workaround this by specifying the -q or -v flags.

Or just download 
http://trac.osgeo.org/gdal/browser/branches/1.7/gdal/swig/python/scripts/gdal_merge.py?format=raw 
and use it as the replacement for the one from FWTools.

Best regards,

Even

Le Friday 26 March 2010 21:45:26 Eduardo Kanegae, vous avez ?crit?:
> Hi folks,
>
> I'm trying to merge 3 separated tiff files to a single one ( make a
> RGB composition with 3 bands) using the command:
>
> $ gdal_merge -of GTiff -o target-RGB432.tif -separate BAND4.tif
> BAND3.tif BAND2.tif
>
> I'm running Windows 7 Pro, FWTools 2.4.7 with GDAL 1.7.0b2
>
> and I get the following error:
>
> * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
> * * * * * * * * * * * * * *
> Traceback (most recent call last):
>   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 463, in ?
>     sys.exit(main())
>   File "C:\PROGRA~2\FWTOOL~1.7\bin\gdal_merge.py", line 433, in main
>     if quiet == 0 and verbose == 0:
> UnboundLocalError: local variable 'quiet' referenced before assignment
> * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
> * * * * * * * * * * * * * *
>
> Any idea?


From even.rouault at mines-paris.org  Fri Mar 26 17:10:46 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Mar 26 17:10:57 2010
Subject: [gdal-dev] flipping raster in python
In-Reply-To: <f4339511003261322w42dcbe10qab071f1a36a81880@mail.gmail.com>
References: <f4339511003261322w42dcbe10qab071f1a36a81880@mail.gmail.com>
Message-ID: <201003262210.46527.even.rouault@mines-paris.org>

Jamie,

I'm not sure why it slowdowns after the first 2 bands, but I can say your way 
of proceeding is very inefficient and you can achieve the same results by 
processing by rows instead of columns. As your input file is scanline 
oriented (block size is 20000x1 - which is pretty standard), reading a column 
will cause the whole file to be read at each time !

Try instead the following version which read line by line and horizontally 
flip the buffer : it should complete in a few minutes.

for band in range(1, indataset.RasterCount + 1):
  ## Print the current band
  print 'Band %s' % band

  inband = indataset.GetRasterBand(band)
  outband = outdataset.GetRasterBand(band)

  count = 0
  print count

  for i in range(inband.YSize):

    ## print the current interval of 1k lines
    new_count = int(i / 1000)
    if new_count > count:
      print new_count
      count = new_count

    inline = inband.ReadAsArray(0, i, inband.XSize, 1)
    flipline = numpy.fliplr(inline)
    outband.WriteArray(flipline, 0, i)

    inline = None

  inband = None
  outband = None

Best regards,

Even

Le Friday 26 March 2010 21:22:54 Jamie Adams, vous avez ?crit?:
> I've written some simple Python code to flip a raster in relation to the
> y-axis.  The raster is 20000x19459 and has 4 bands of type Byte, and is
> written east to west (I have no idea why).  The script proceeds normally
> for the first 2 bands, but slows way down after starting band 3.  I let it
> run overnight, and it had processed less than 1000 columnsin band 3,
> whereas the previous pace for bands 1&2 was around 1000 columns every 10
> seconds.  Here is the relevant code with a few debugging statements
> followed by the gdalinfo output.  The only thing I'm noticing is that the
> input image is INTERLEAVED=BAND whereas the output is INTERLEAVED=PIXEL. 
> Any help is appreciated.
>
> ---------------------------------------------------------------------------
>--- for band in range(1, indataset.RasterCount + 1):
>   ## Print the current band
>   print 'Band %s' % band
>
>   inband = indataset.GetRasterBand(band)
>   outband = outdataset.GetRasterBand(band)
>
>   count = 0
>   print count
>
>   for i in range(inband.XSize):
>
>     ## print the current interval of 1k lines
>     new_count = int(i / 1000)
>     if new_count > count:
>       print new_count
>       count = new_count
>
>     inline = inband.ReadAsArray(i, 0, 1, inband.YSize)
>
>     outband.WriteArray(inline, inband.XSize - i - 1, 0)
>
>     inline = None
>
>   inband = None
>   outband = None
>
> ---------------------------------------------------------------------------
>--- Driver: GTiff/GeoTIFF
> Files: test.tif
> Size is 20000, 19459
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-175.536864949200321,33.666235092496755)
> Pixel Size = (-0.000062579160220,-0.000054370391310)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=BAND
> Corner Coordinates:
> Upper Left  (-175.5368649,  33.6662351) (175d32'12.71"W, 33d39'58.45"N)
> Lower Left  (-175.5368649,  32.6082416) (175d32'12.71"W, 32d36'29.67"N)
> Upper Right (-176.7884482,  33.6662351) (176d47'18.41"W, 33d39'58.45"N)
> Lower Right (-176.7884482,  32.6082416) (176d47'18.41"W, 32d36'29.67"N)
> Center      (-176.1626566,  33.1372384) (176d 9'45.56"W, 33d 8'14.06"N)
> Band 1 Block=20000x1 Type=Byte, ColorInterp=Red
>   Mask Flags: PER_DATASET ALPHA
> Band 2 Block=20000x1 Type=Byte, ColorInterp=Green
>   Mask Flags: PER_DATASET ALPHA
> Band 3 Block=20000x1 Type=Byte, ColorInterp=Blue
>   Mask Flags: PER_DATASET ALPHA
> Band 4 Block=20000x1 Type=Byte, ColorInterp=Alpha


From jaadfoo at gmail.com  Fri Mar 26 17:24:21 2010
From: jaadfoo at gmail.com (Jamie Adams)
Date: Fri Mar 26 17:24:25 2010
Subject: [gdal-dev] flipping raster in python
In-Reply-To: <201003262210.46527.even.rouault@mines-paris.org>
References: <f4339511003261322w42dcbe10qab071f1a36a81880@mail.gmail.com>
	<201003262210.46527.even.rouault@mines-paris.org>
Message-ID: <f4339511003261424o466cf4c4t4ef85de0938df3b1@mail.gmail.com>

Thanks Even,

I had (sort of) come to that conclusion myself, as I started looking into
what blocksize actually meant.  I'll modify to work in row order.

Thanks!

Jamie

On Fri, Mar 26, 2010 at 2:10 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Jamie,
>
> I'm not sure why it slowdowns after the first 2 bands, but I can say your
> way
> of proceeding is very inefficient and you can achieve the same results by
> processing by rows instead of columns. As your input file is scanline
> oriented (block size is 20000x1 - which is pretty standard), reading a
> column
> will cause the whole file to be read at each time !
>
> Try instead the following version which read line by line and horizontally
> flip the buffer : it should complete in a few minutes.
>
> for band in range(1, indataset.RasterCount + 1):
>  ## Print the current band
>  print 'Band %s' % band
>
>  inband = indataset.GetRasterBand(band)
>  outband = outdataset.GetRasterBand(band)
>
>  count = 0
>  print count
>
>   for i in range(inband.YSize):
>
>    ## print the current interval of 1k lines
>    new_count = int(i / 1000)
>    if new_count > count:
>      print new_count
>      count = new_count
>
>     inline = inband.ReadAsArray(0, i, inband.XSize, 1)
>    flipline = numpy.fliplr(inline)
>    outband.WriteArray(flipline, 0, i)
>
>    inline = None
>
>  inband = None
>  outband = None
>
> Best regards,
>
> Even
>
> Le Friday 26 March 2010 21:22:54 Jamie Adams, vous avez ?crit :
> > I've written some simple Python code to flip a raster in relation to the
> > y-axis.  The raster is 20000x19459 and has 4 bands of type Byte, and is
> > written east to west (I have no idea why).  The script proceeds normally
> > for the first 2 bands, but slows way down after starting band 3.  I let
> it
> > run overnight, and it had processed less than 1000 columnsin band 3,
> > whereas the previous pace for bands 1&2 was around 1000 columns every 10
> > seconds.  Here is the relevant code with a few debugging statements
> > followed by the gdalinfo output.  The only thing I'm noticing is that the
> > input image is INTERLEAVED=BAND whereas the output is INTERLEAVED=PIXEL.
> > Any help is appreciated.
> >
> >
> ---------------------------------------------------------------------------
> >--- for band in range(1, indataset.RasterCount + 1):
> >   ## Print the current band
> >   print 'Band %s' % band
> >
> >   inband = indataset.GetRasterBand(band)
> >   outband = outdataset.GetRasterBand(band)
> >
> >   count = 0
> >   print count
> >
> >   for i in range(inband.XSize):
> >
> >     ## print the current interval of 1k lines
> >     new_count = int(i / 1000)
> >     if new_count > count:
> >       print new_count
> >       count = new_count
> >
> >     inline = inband.ReadAsArray(i, 0, 1, inband.YSize)
> >
> >     outband.WriteArray(inline, inband.XSize - i - 1, 0)
> >
> >     inline = None
> >
> >   inband = None
> >   outband = None
> >
> >
> ---------------------------------------------------------------------------
> >--- Driver: GTiff/GeoTIFF
> > Files: test.tif
> > Size is 20000, 19459
> > Coordinate System is:
> > GEOGCS["WGS 84",
> >     DATUM["WGS_1984",
> >         SPHEROID["WGS 84",6378137,298.257223563,
> >             AUTHORITY["EPSG","7030"]],
> >         AUTHORITY["EPSG","6326"]],
> >     PRIMEM["Greenwich",0],
> >     UNIT["degree",0.0174532925199433],
> >     AUTHORITY["EPSG","4326"]]
> > Origin = (-175.536864949200321,33.666235092496755)
> > Pixel Size = (-0.000062579160220,-0.000054370391310)
> > Metadata:
> >   AREA_OR_POINT=Area
> > Image Structure Metadata:
> >   INTERLEAVE=BAND
> > Corner Coordinates:
> > Upper Left  (-175.5368649,  33.6662351) (175d32'12.71"W, 33d39'58.45"N)
> > Lower Left  (-175.5368649,  32.6082416) (175d32'12.71"W, 32d36'29.67"N)
> > Upper Right (-176.7884482,  33.6662351) (176d47'18.41"W, 33d39'58.45"N)
> > Lower Right (-176.7884482,  32.6082416) (176d47'18.41"W, 32d36'29.67"N)
> > Center      (-176.1626566,  33.1372384) (176d 9'45.56"W, 33d 8'14.06"N)
> > Band 1 Block=20000x1 Type=Byte, ColorInterp=Red
> >   Mask Flags: PER_DATASET ALPHA
> > Band 2 Block=20000x1 Type=Byte, ColorInterp=Green
> >   Mask Flags: PER_DATASET ALPHA
> > Band 3 Block=20000x1 Type=Byte, ColorInterp=Blue
> >   Mask Flags: PER_DATASET ALPHA
> > Band 4 Block=20000x1 Type=Byte, ColorInterp=Alpha
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100326/080d3821/attachment-0001.html
From szekerest at gmail.com  Fri Mar 26 17:27:59 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Mar 26 17:28:04 2010
Subject: [gdal-dev] VC10 64-bits compiling
In-Reply-To: <4BACF3AF.7000909@ualg.pt>
References: <4BACF3AF.7000909@ualg.pt>
Message-ID: <f3b73b7d1003261427i5a68d09fs9c1c29492c5dc382@mail.gmail.com>

Hi,

This warning (LNK4221) is not related to VC 2010, it's generated also with
VC 2005 and above.

Best regards,

Tamas



2010/3/26 Joaquim Luis <jluis@ualg.pt>

> Hi
>
> I just managed to compile a 64-bits GDAL trunk with VC10
> There are lots of new warnings but of "inocent" type. However I don't know
> how to judge this one that might be not so innocuous
>
> ...
> C:\programs\GDALtrunk\gdal\frmts>cd wms && nmake /nologo /f makefile.vc &&
> cd ..   || exit 1
>        xcopy /D  /Y *.obj ..\o
> 0 File(s) copied
>        cd ..
>        if exist gdal.lib del gdal.lib
>        lib /nologo /out:gdal.lib port\*.obj gcore\*.obj alg\*.obj
> frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib
> ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: This object file does not
> define any previously undefined public symbols, so it will not be used by
> any link operation that consumes this library
>
> Joaquim Luis
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100326/382acae0/attachment.html
From enigma2006.kishore at gmail.com  Sat Mar 27 14:09:06 2010
From: enigma2006.kishore at gmail.com (Kishore Reddy)
Date: Sat Mar 27 14:09:28 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
Message-ID: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>

Hi everyone,

I am planing to use gdaldem to create relief shaded maps. But the
problem is gdaldem takes only DEM files as input. Unfortunately I have
contour lines (in the form of Shape files). So is there any way
(command line) to convert these shape files into DEM files?

--
Kishore
From even.rouault at mines-paris.org  Sat Mar 27 17:48:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Mar 27 17:49:12 2010
Subject: [gdal-dev] gdal_rasterize: Added capability of creating output file
Message-ID: <201003272249.00672.even.rouault@mines-paris.org>

Folks,

Small note to advertize I've just added in trunk the capability of creating 
the output file of gdal_rasterize from the utility itself. See 
http://trac.osgeo.org/gdal/ticket/3505 for details.

Best regards,

Even
From even.rouault at mines-paris.org  Sat Mar 27 18:07:24 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Mar 27 18:07:33 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
Message-ID: <201003272307.24152.even.rouault@mines-paris.org>

Kishore,

Here is a process you could try:

1) Prepare an output GDAL file for gdal_rasterize.

You can take care inspiration of
http://trac.osgeo.org/gdal/wiki/FAQRaster#HowcanIcreateablankrasterbasedonavectorfilesextentsforusewithgdal_rasterizeGDAL1.8.0

Modify it to create 1 band (instead of 4) and for step 3) to work, you should 
take care of setting a nodata value on the output file and initialize the 
raster with it:

dst_ds.GetRasterBand(1).SetRasterNoDataValue(0)
dst_ds.GetRasterBand(1).Fill(0)

(if you can compile GDAL from source, you can avoid this step by grabbing the 
latest sources that have an enhanced version of gdal_rasterize, directly able 
to create the output file . See http://trac.osgeo.org/gdal/ticket/3505)

2) Use gdal_rasterize to burn the contour lines.

See http://gdal.org/gdal_rasterize.html

3) Fill the holes (the nodata values) with gdal_fillnodata.py.

See http://gdal.org/gdal_fillnodata.html

Now, the result should be usable with gdaldem.

Best regards,

Even

Le Saturday 27 March 2010 19:09:06 Kishore Reddy, vous avez ?crit?:
> Hi everyone,
>
> I am planing to use gdaldem to create relief shaded maps. But the
> problem is gdaldem takes only DEM files as input. Unfortunately I have
> contour lines (in the form of Shape files). So is there any way
> (command line) to convert these shape files into DEM files?
>
> --
> Kishore
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From simon.okeefe at groundtruth.com.au  Sun Mar 28 08:23:14 2010
From: simon.okeefe at groundtruth.com.au (Simon O'Keefe)
Date: Sun Mar 28 08:29:51 2010
Subject: [gdal-dev] Error using ogr2ogr to create SpatiaLite database
Message-ID: <762d0f641003280523m6597cdf6qac7856ff7fbf49c6@mail.gmail.com>

Hi,

(I posted this issue to the FWTools mailing list a week ago, but have
not yet received a response.)

I'm attempting to create a new SQLite database from a SHP file using
FWTools2.4.7 on Windows 7. The following command:

ogr2ogr -f SQLite C:\Data\db.sqlite C:\Data\states.shp -dsco SPATIALITE=yes

generates the following error:

ogr2ogr.exe has stopped working
A problem caused the program to stop working correctly. Windows will
close the program and notify you if a solution is available.

The example uses 'states.shp' from the GeoServer sample data, but the
error occurs with other SHP files as well.

I'm able to create a SQLite file by leaving out SPATIALITE=yes, but
when I open the resulting file in SpatiaLite-GIS, it complains of
"Missing or invalid Spatial Metadata tables: spatial_ref_sys,
geometry_columns".

Is anyone able to create a proper SpatialLite database from a SHP file
using ogr2ogr?

Cheers,

Simon
_______________________________________
Simon O'Keefe
Geospatial Systems Developer
Groundtruth Mapping Systems
Level 2, 140 Queen Street
Melbourne VIC 3000 Australia
phone:  +61 409 413 890
email:  simon.okeefe@groundtruth.com.au
web:    http://www.groundtruth.com.au
_______________________________________
From jukka.rahkonen at mmmtike.fi  Sun Mar 28 09:15:52 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Sun Mar 28 09:16:07 2010
Subject: [gdal-dev] Re: Error using ogr2ogr to create SpatiaLite database
References: <762d0f641003280523m6597cdf6qac7856ff7fbf49c6@mail.gmail.com>
Message-ID: <loom.20100328T150656-907@post.gmane.org>

Simon O'Keefe <simon.okeefe <at> groundtruth.com.au> writes:

> 
> Hi,
> 
> (I posted this issue to the FWTools mailing list a week ago, but have
> not yet received a response.)
> 
> I'm attempting to create a new SQLite database from a SHP file using
> FWTools2.4.7 on Windows 7. The following command:
> 
> ogr2ogr -f SQLite C:\Data\db.sqlite C:\Data\states.shp -dsco SPATIALITE=yes
> 
> generates the following error:


Hi,

I tried the same with states.shp and FWTools2.4.2 on Windows Vista, no problem.
If you can, try to use version 2.4.2 also. If it does not work either it may be
due to Windows 7. Perhaps getting the most fresh sqlite3.dll into fwtools/bin
directory might help in that case. They was some other good reason to use a new
dll but I do not remember right now what it was.

-Jukka Rahkonen-

From even.rouault at mines-paris.org  Sun Mar 28 09:30:37 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Mar 28 09:30:52 2010
Subject: [gdal-dev] Error using ogr2ogr to create SpatiaLite database
In-Reply-To: <762d0f641003280523m6597cdf6qac7856ff7fbf49c6@mail.gmail.com>
References: <762d0f641003280523m6597cdf6qac7856ff7fbf49c6@mail.gmail.com>
Message-ID: <201003281530.39711.even.rouault@mines-paris.org>

Simon,

I also reproduce the problem. It is not platform related. There are various 
problems in the way the spatial_ref_sys is handled, that I'm currently 
fixing. The problem is that the SRS of the shapefile is not properly 
recognized and translated in the spatial_ref_sys table.

You can workaround it by adding -a_srs EPSG:4326 on the command line.

Best regards,

Even

Le Sunday 28 March 2010 14:23:14 Simon O'Keefe, vous avez ?crit?:
> Hi,
>
> (I posted this issue to the FWTools mailing list a week ago, but have
> not yet received a response.)
>
> I'm attempting to create a new SQLite database from a SHP file using
> FWTools2.4.7 on Windows 7. The following command:
>
> ogr2ogr -f SQLite C:\Data\db.sqlite C:\Data\states.shp -dsco SPATIALITE=yes
>
> generates the following error:
>
> ogr2ogr.exe has stopped working
> A problem caused the program to stop working correctly. Windows will
> close the program and notify you if a solution is available.
>
> The example uses 'states.shp' from the GeoServer sample data, but the
> error occurs with other SHP files as well.
>
> I'm able to create a SQLite file by leaving out SPATIALITE=yes, but
> when I open the resulting file in SpatiaLite-GIS, it complains of
> "Missing or invalid Spatial Metadata tables: spatial_ref_sys,
> geometry_columns".
>
> Is anyone able to create a proper SpatialLite database from a SHP file
> using ogr2ogr?
>
> Cheers,
>
> Simon
> _______________________________________
> Simon O'Keefe
> Geospatial Systems Developer
> Groundtruth Mapping Systems
> Level 2, 140 Queen Street
> Melbourne VIC 3000 Australia
> phone:  +61 409 413 890
> email:  simon.okeefe@groundtruth.com.au
> web:    http://www.groundtruth.com.au
> _______________________________________
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From simon.okeefe at groundtruth.com.au  Sun Mar 28 18:35:28 2010
From: simon.okeefe at groundtruth.com.au (Simon O'Keefe)
Date: Sun Mar 28 18:35:50 2010
Subject: [gdal-dev] Error using ogr2ogr to create SpatiaLite database
In-Reply-To: <201003281530.39711.even.rouault@mines-paris.org>
References: <762d0f641003280523m6597cdf6qac7856ff7fbf49c6@mail.gmail.com> 
	<201003281530.39711.even.rouault@mines-paris.org>
Message-ID: <762d0f641003281535w197b3efct5d3118f6bc55885a@mail.gmail.com>

Thanks Even.

By specifying -a_srs EPSG:4326, ogr2ogr no longer crashes, and I can
now view the output SQLite file in SpatiaLite-GIS. Here is my new
command:

ogr2ogr -f SQLite C:\Data\db.sqlite C:\Data\states.shp -a_srs
EPSG:4326 -dsco SPATIALITE=yes

And thanks for creating a ticket and fixing this issue for future
releases so that a fake SRS authority name is automatically inserted
when ogr2ogr cannot identify the SRS of the shapefile:
http://trac.osgeo.org/gdal/ticket/3506

Cheers,

Simon


On 29 March 2010 00:30, Even Rouault <even.rouault@mines-paris.org> wrote:
> Simon,
>
> I also reproduce the problem. It is not platform related. There are various
> problems in the way the spatial_ref_sys is handled, that I'm currently
> fixing. The problem is that the SRS of the shapefile is not properly
> recognized and translated in the spatial_ref_sys table.
>
> You can workaround it by adding -a_srs EPSG:4326 on the command line.
>
> Best regards,
>
> Even
>
> Le Sunday 28 March 2010 14:23:14 Simon O'Keefe, vous avez ?crit?:
>> Hi,
>>
>> (I posted this issue to the FWTools mailing list a week ago, but have
>> not yet received a response.)
>>
>> I'm attempting to create a new SQLite database from a SHP file using
>> FWTools2.4.7 on Windows 7. The following command:
>>
>> ogr2ogr -f SQLite C:\Data\db.sqlite C:\Data\states.shp -dsco SPATIALITE=yes
>>
>> generates the following error:
>>
>> ogr2ogr.exe has stopped working
>> A problem caused the program to stop working correctly. Windows will
>> close the program and notify you if a solution is available.
>>
>> The example uses 'states.shp' from the GeoServer sample data, but the
>> error occurs with other SHP files as well.
>>
>> I'm able to create a SQLite file by leaving out SPATIALITE=yes, but
>> when I open the resulting file in SpatiaLite-GIS, it complains of
>> "Missing or invalid Spatial Metadata tables: spatial_ref_sys,
>> geometry_columns".
>>
>> Is anyone able to create a proper SpatialLite database from a SHP file
>> using ogr2ogr?
>>
>> Cheers,
>>
>> Simon
>> _______________________________________
>> Simon O'Keefe
>> Geospatial Systems Developer
>> Groundtruth Mapping Systems
>> Level 2, 140 Queen Street
>> Melbourne VIC 3000 Australia
>> phone: ?+61 409 413 890
>> email: ?simon.okeefe@groundtruth.com.au
>> web: ? ?http://www.groundtruth.com.au
>> _______________________________________
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From silvietta.rolla at gmail.com  Mon Mar 29 10:21:44 2010
From: silvietta.rolla at gmail.com (Silvia Rolla)
Date: Mon Mar 29 10:27:22 2010
Subject: [gdal-dev] Python 32 crash on Windows Server 2008 64 bit with Gdal
Message-ID: <eb55896c1003290721w45213650t3ead2a29087c4be8@mail.gmail.com>

HI all,

I am using gdal from python on my workstation (Windows Vista Ultimate 32
bit) with the following snip of code:

-------------------------
from osgeo import gdal
from osgeo import gdalconst
dataset = gdal.Open("D:\data\\20100325_12_00.grb", gdal.GA_ReadOnly)
metadata=dataset.GetRasterBand(1)
metadata.ReadRaster(220, 148, 1, 1, 1, 1, metadata.DataType)
-------------------------


When i port the same code on the production server,
python crashes on the metadata.ReadRaster(...) instruction.
A message box show up with the following information:

-------------------------
Problem signature:
  Problem Event Name: APPCRASH
  Application Name: python.exe
  Application Version: 0.0.0.0
  Application Timestamp: 49e4f549
  Fault Module Name: ntdll.dll
  Fault Module Version: 6.1.7600.16385
  Fault Module Timestamp: 4a5bdb3b
  Exception Code: c0000005
  Exception Offset: 00037075
  OS Version: 6.1.7600.2.0.0.272.7
  Locale ID: 1033
  Additional Information 1: 0a9e
  Additional Information 2: 0a9e372d3b4ad19135b953a78882e789
  Additional Information 3: 0a9e
  Additional Information 4: 0a9e372d3b4ad19135b953a78882e789
---------------------------


Configuration of the production server is:

-------------------------
Operating System: Windows Server 2008 R2 64 Bit
Python Win32 2.6.2
Gdal Win32 1.6
numpy-1.3.0-win32-superpack-python2.6
-------------------------

Looks like many people had problem running gdal with python 32bit on 64 bit
machine.
Could you please help on this?
Thanks in advance


Silvia
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100329/b1c83ad7/attachment.html
From jason.roberts at duke.edu  Mon Mar 29 11:12:47 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Mar 29 11:12:56 2010
Subject: [gdal-dev] Re: rgdal source code
In-Reply-To: <alpine.LRH.2.00.1003261943570.4275@reclus.nhh.no>
References: <20100326145625.7546.qmail@s466.sureserver.com>
	<alpine.LRH.2.00.1003261604050.3438@reclus.nhh.no>
	<00d401cacd01$1ce261a0$56a724e0$%roberts@duke.edu>
	<alpine.LRH.2.00.1003261943570.4275@reclus.nhh.no>
Message-ID: <016f01cacf52$4a7e0080$df7a0180$@roberts@duke.edu>

Roger,

Thanks for the info. I have never built GDAL with MSYS before, only with the
various Microsoft compilers. The GDAL team provides pre-configured build
environments for those compilers that produce the library with names
gdal16.dll, gdal17.dll, etc. I assumed that it would work that way for other
compilers as well. In any case, I have some interest in the architecture of
rgdal and may follow up with you about it in the future.

My colleagues and I would like to see rgdal on 64-bit Windows but
unfortunately we cannot contribute any time to porting it. However, we do
have at least one 64-bit server and if you are blocked on access to a
suitable machine, I might be able to arrange for you to use ours via Windows
Remote Desktop. The machine is currently running the 32-bit OS so our IT
guys would have to reinstall it. This would likely take some time to
schedule so I don't know that it could be done soon enough for you to make
the R 2.11 date. But if you are interested, contact me offline and I'll see
what can be done.

Best,

Jason

-----Original Message-----
From: Roger Bivand [mailto:Roger.Bivand@nhh.no] 
Sent: Friday, March 26, 2010 2:51 PM
To: Jason Roberts
Cc: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Re: rgdal source code

On Fri, 26 Mar 2010, Jason Roberts wrote:

> Roger,
>
> Pardon me for interrupting with a question I've had for a while but not
> asked you.
>
> On Windows at least, it appears that rgdal renames the GDAL shared library
> (e.g. gdal16.dll) to an rgdal-specific name (e.g. libgdal-1.dll). On
> windows, this has the advantage of avoiding DLL name collisions, allowing
> rgdal to coexist with other libraries that also load GDAL using its
> traditional name (e.g. gdal16.dll). Is that why rgdal renamed the shared
> library? Or was it done for another reason?

Jason,

No, it is the name it gets when built under MSYS by default, nothing 
cleverer than that, I'm afraid!

This is a different question entirely, but a heads-up might be worthwhile. 
When R 2.11 arrives in three weeks time, there will be a 64-bit Windows 
version. Because of the external dependencies on expat, proj4, and GDAL, 
rgdal is one of only a very small group of CRAN packages that is not 
available as a 64-bit Windows binary. It would be very useful if 64-bit 
Windows users got together and figured out how to make a bundle of 64-bit 
DLLs that could automate the CRAN Windows build of rgdal also for 64-bit 
Windows. R is built with MinGW, so in the MSYS family. I have no access to 
such a Windows platform, but have some advice from Brian Ripley, and one 
interested helper. The more the merrier!

Roger

>
> Thanks,
>
> Jason
>
> -----Original Message-----
> From: gdal-dev-bounces@lists.osgeo.org
> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roger Bivand
> Sent: Friday, March 26, 2010 11:09 AM
> To: Ivan Lucena
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Re: rgdal source code
>
> On Fri, 26 Mar 2010, Ivan Lucena wrote:
>
>> Roger,
>>
>> Yes, you are right. The source code is on  rgdal_0.6-25.tar.gz, I know,
> but the instructions to build on Windows are on the rgdal_0.6-25.zip
package
> on README.windows, where it says:
>>
>> ---
>> The R Windows binary rgdal package is built against an FWTools Windows
> binary, using VC++.
>>
>> Notes:
>>
>> Building rgdal.dll in rgdal/src:
>>
>> cl /MT /Ox /EHsc /D "WIN32" /c /I E:\rsb\R\R-2.2.1pat\include /I
> C:\Programfiler\FWTools1.0.0a7\incl
>> ude *.cpp
>>
>> link /dll /out:rgdal.dll /def:RGDAL.def gdal-bindings.obj ogr_geom.obj
> ogr_proj.obj ogrsource.obj E:
>> \rsb\R\R-2.2.1pat\lib\Rdll.lib
> /libpath:"C:\Programfiler\FWTools1.0.0a7\lib" gdal_i.lib
>> ---
>>
>> So I am trying to change it a little bit in order to build against GDAL
> 1.7.1 (or trunk).
>>
>> How does that sounds to you? Good idea?
>
> Ivan,
>
> No, the README.windows file is of course in the source tarball, in the
> inst directory (as usual for R packages).
>
> If you install the Windows binary, you'll see that it includes GDAL 1.7.1,
> that is the message reporting the GDAL runtime version shown when the
> package is loaded. The only reason for doing anything at all is if you
> need drivers not already provided for your own purposes. Then you might
> need to review the README.windows file and, for example, build against
> current FWTools or OSGEO4W distributions. Please do check the drivers
> first with ogrDrivers() and gdalDrivers() in R after loading the package.
>
> Roger
>
>>
>> Regards,
>>
>> Ivan
>>
>>
>>>  -------Original Message-------
>>>  From: Roger Bivand <Roger.Bivand@nhh.no>
>>>  To: gdal-dev@lists.osgeo.org
>>>  Subject: [gdal-dev] Re: rgdal source code
>>>  Sent: Mar 26 '10 09:31
>>>
>>>
>>>  The root cause of the sourceforge issue is in a message posted
> 2010-03-25
>>>  from their admin:
>>>
>>>  "Update on the current CVS outage that is affecting projects whose UNIX
>>>  names start with the letters??a, e, h, i, m, o, r, s, w, z.
>>>
>>>  The work being done on this server may take up to two days to resolve.
> We?re
>>>  working to resolve this with alacrity and assure maximum stability and
>>>  performance."
>>>
>>>  So access should be back by the end of March.
>>>
>>>  Roger
>>>
>>>
>>>  Roger Bivand wrote:
>>>>
>>>> On Thu, 25 Mar 2010, Ivan wrote:
>>>>
>>>>> Roger,
>>>>>
>>>>> I in fact did my homework, but I've got a C.
>>>>>
>>>>> As you can see on my previous message I did find the RGDAL Source
> Forge
>>>>> page
>>>>> where it shows the CVS instructions ===> [1] <===. That would give a
> B+
>>>>> at
>>>>> least, no? If it worked.
>>>>>
>>>>> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal
> login
>>>>> Logging in to
>>>>> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>>>>> CVS password:
>>>>> cvs [login aborted]: connect to
>>>>> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection
> refused
>>>>>
>>>>> That was a dead end.
>>>>
>>>> Correct. When I tried, anonymous checkout from sourceforge was also
>>>> blocked - nothing we've done, maybe something sourceforge has done. I
> have
>>>> changed the main description to:
>>>>
>>>> "WARNING: rgdal is only available for download from CRAN - this
> repository
>>>> is only used for development and browsing of source code. NEVER use the
>>>> very out of date file bundles for download from this site!!! See
>>>> http://rgdal.sourceforge.net for link."
>>>>
>>>> Short of migrating to R-forge (which I have done for another R package,
>>>> spdep), there isn't much that can be done with sourceforge, I'm afraid
>>>> (sourceforge isn't my favorite place to be).
>>>>
>>>> cc: Tim: Any idea why the anonymous checkout fails? Longer term - is
>>>> migration to SVN on R-Forge worth considering?
>>>>
>>>> Roger
>>>>
>>>>>
>>>>> I download some of those zip packages from rgdal.sourceforge.net but
> they
>>>>> only have binary that requires FWTools installation.
>>>>>
>>>>> Another dead end.
>>>>>
>>>>> But you are right I should have search a little more to find the CRAN
>>>>> page.
>>>>> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>>>>>
>>>>
>>>> That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for
> the
>>>> source. Install the Windows binary within R - do *not* treat the zip
>>>> archive as an archive - it is just a frozen binary version of the
> source
>>>> for Windows.
>>>>
>>>> Roger
>>>>
>>>>> Thanks you so very much Roger. Have a nice day.
>>>>>
>>>>> Ivan
>>>>>
>>>>> Roger Bivand wrote:
>>>>>> Please, do your homework!
>>>>>>
>>>>>> Google on "R rgdal" gives:
>>>>>>
>>>>>> http://cran.r-project.org/web/packages/rgdal/index.html
>>>>>>
>>>>>> http://rgdal.sourceforge.net/
>>>>>>
>>>>>> where the latter says: "The R contributed package rgdal is available
>>>>>> from
>>>>>> CRAN", that is the first link. On CRAN you will find both the source
>>>>>> tarball
>>>>>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>>>>>> expat
>>>>>> for reading KML etc.
>>>>>> The sourceforge site is used exclusively as a CVS repository for
>>>>>> developers
>>>>>> - it hasn't been used for software distribution since about 2004; the
>>>>>> CRAN
>>>>>> distribution mechanism is far more robust and "just works".
>>>>>>
>>>>>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>>>>>> you
>>>>>> need to build from source for more exotic drivers.
>>>>>>
>>>>>> The relevant mailing list is R-sig-geo,
>>>>>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the
> best
>>>>>> point of entrance, the R Spatial task view:
>>>>>> http://cran.r-project.org/web/views/Spatial.html.
>>>>>>
>>>>>> Hope this helps,
>>>>>>
>>>>>> Roger
>>>>>>
>>>>>>
>>>>>>
>>>>>> Ivan-5 wrote:
>>>>>>> Hi there,
>>>>>>>
>>>>>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>>>>>>> the
>>>>>>> source code [1] and the binaries for Windows depend on some old
> version
>>>>>>> of
>>>>>>> gdal_fw.dll. Does anybody have any clue?
>>>>>>>
>>>>>>> Regards,
>>>>>>>
>>>>>>> Ivan
>>>>>>>
>>>>>>>
>>>>>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>>>>>>> _______________________________________________
>>>>>>> gdal-dev mailing list
>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>
>>>>>>>
>>>>>>
>>>>>>
>>>>>> -----
>>>>>> Roger Bivand
>>>>>> Economic Geography Section
>>>>>> Department of Economics
>>>>>> Norwegian School of Economics and Business Administration
>>>>>> Helleveien 30
>>>>>> N-5045 Bergen, Norway
>>>>>>
>>>>>
>>>>>
>>>>
>>>> --
>>>> Roger Bivand
>>>> Economic Geography Section, Department of Economics, Norwegian School
> of
>>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>> e-mail: Roger.Bivand@nhh.no
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>>
>>>
>>>
>>>  -----
>>>  Roger Bivand
>>>  Economic Geography Section
>>>  Department of Economics
>>>  Norwegian School of Economics and Business Administration
>>>  Helleveien 30
>>>  N-5045 Bergen, Norway
>>>
>>>  --
>>>  View this message in context:
> http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
>>>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>  _______________________________________________
>>>  gdal-dev mailing list
>>>  gdal-dev@lists.osgeo.org
>>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>
>

-- 
Roger Bivand
Economic Geography Section, Department of Economics, Norwegian School of
Economics and Business Administration, Helleveien 30, N-5045 Bergen,
Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
e-mail: Roger.Bivand@nhh.no

From Chris.Barker at noaa.gov  Mon Mar 29 12:28:44 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Mar 29 12:28:47 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <201003272307.24152.even.rouault@mines-paris.org>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
Message-ID: <4BB0D53C.4000301@noaa.gov>

Even Rouault wrote:
> 2) Use gdal_rasterize to burn the contour lines.
> 
> See http://gdal.org/gdal_rasterize.html
> 
> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
> 
> See http://gdal.org/gdal_fillnodata.html
> 
> Now, the result should be usable with gdaldem.

well, yes, but it's likely to be pretty ugly -- it will represent the 
elevation as steps -- constant values between contours. If you have 
enough contour lines, and want a low-resolution DEM, that might be OK. 
However, you'll get much prettier results if you interpolate in some way 
to get a smoother result.

Unfortunately, interpolating contour lines well is not trivial -- I'd do 
some googling and see what you can find.

GRASS may have something to help you here, too.

-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Mon Mar 29 12:37:27 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 29 12:37:44 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <4BB0D53C.4000301@noaa.gov>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
	<4BB0D53C.4000301@noaa.gov>
Message-ID: <4BB0D747.2090808@pobox.com>

Christopher Barker wrote:
> Even Rouault wrote:
>> 2) Use gdal_rasterize to burn the contour lines.
>>
>> See http://gdal.org/gdal_rasterize.html
>>
>> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
>>
>> See http://gdal.org/gdal_fillnodata.html
>>
>> Now, the result should be usable with gdaldem.
> 
> well, yes, but it's likely to be pretty ugly -- it will represent the 
> elevation as steps -- constant values between contours. If you have 
> enough contour lines, and want a low-resolution DEM, that might be OK. 
> However, you'll get much prettier results if you interpolate in some way 
> to get a smoother result.
> 
> Unfortunately, interpolating contour lines well is not trivial -- I'd do 
> some googling and see what you can find.
> 
> GRASS may have something to help you here, too.

Chris,

gdal_fillnodata attempts to do interpolation and was designed with the
idea of filling in between contours and holes in elevation products.   It
isn't perfect of course, but isn't the stepwise result you are expecting.

The algorithm effectively involves radial searches out from each pixel
to be interpolated, in 4 (or 8?) directions and then weighted distance
interpolation from the hits.  It also does some user defined number of
iterations of post-interpolation smoothing to minimize artifacts.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From enigma2006.kishore at gmail.com  Mon Mar 29 12:41:15 2010
From: enigma2006.kishore at gmail.com (Kishore Reddy)
Date: Mon Mar 29 12:48:46 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <4BB0D53C.4000301@noaa.gov>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com> 
	<201003272307.24152.even.rouault@mines-paris.org>
	<4BB0D53C.4000301@noaa.gov>
Message-ID: <6e7b1b711003290941q41e0f3b7y4fcd67e210d21f63@mail.gmail.com>

Yeah, GRASS got methods to convert contour lines to DEM formats but I
am not that much literate to compare.

It got some commands like
r.surf.idw = Inverse distance weighted method using the n-closest data points
r.surf.nnbathy = Natural-Neighbor interpolation
r.surf.contour

and some more...

Source: http://grass.osgeo.org/wiki/Contour_lines_to_DEM


--
Kishore



On Mon, Mar 29, 2010 at 9:58 PM, Christopher Barker
<Chris.Barker@noaa.gov> wrote:
> Even Rouault wrote:
>>
>> 2) Use gdal_rasterize to burn the contour lines.
>>
>> See http://gdal.org/gdal_rasterize.html
>>
>> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
>>
>> See http://gdal.org/gdal_fillnodata.html
>>
>> Now, the result should be usable with gdaldem.
>
> well, yes, but it's likely to be pretty ugly -- it will represent the
> elevation as steps -- constant values between contours. If you have enough
> contour lines, and want a low-resolution DEM, that might be OK. However,
> you'll get much prettier results if you interpolate in some way to get a
> smoother result.
>
> Unfortunately, interpolating contour lines well is not trivial -- I'd do
> some googling and see what you can find.
>
> GRASS may have something to help you here, too.
>
> -Chris
>
>
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R ? ? ? ? ? ?(206) 526-6959 ? voice
> 7600 Sand Point Way NE ? (206) 526-6329 ? fax
> Seattle, WA ?98115 ? ? ? (206) 526-6317 ? main reception
>
> Chris.Barker@noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From Chris.Barker at noaa.gov  Mon Mar 29 13:36:49 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Mon Mar 29 13:36:51 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <4BB0D747.2090808@pobox.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>
	<4BB0D53C.4000301@noaa.gov> <4BB0D747.2090808@pobox.com>
Message-ID: <4BB0E531.3020602@noaa.gov>

Frank Warmerdam wrote:
> gdal_fillnodata attempts to do interpolation and was designed with the
> idea of filling in between contours and holes in elevation products.   It
> isn't perfect of course, but isn't the stepwise result you are expecting.

my bad -- I was making assumptions...

> The algorithm effectively involves radial searches out from each pixel
> to be interpolated, in 4 (or 8?) directions and then weighted distance
> interpolation from the hits.

Well worth giving a try, but it sounds like it's using methods for 
interpolation arbitrarily spaced data. contours are a special case, as 
there is lots of data at particular elevations, and there is a known 
relationship between these points. What this means is that a method 
designed specifically for interpolating contours may work better.

gdal_fillnodata is sure worth a try, though.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From even.rouault at mines-paris.org  Mon Mar 29 13:50:11 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Mar 29 13:50:26 2010
Subject: [gdal-dev] Commit r19248
Message-ID: <201003291950.13253.even.rouault@mines-paris.org>

Andrey,

r19248 introduce Python specific code in general .i files. The consequence is 
that it breaks the Perl bindings (see 
http://buildbot.osgeo.org:8500/builders/telascience-quick/builds/312/steps/perl-make/logs/stdio). 

It also breaks Python3 compatibility as PyString_FromStringAndSize and 
PyString_AsString aren't available (though this could be fixed easily by 
using PyBytes_FromStringAndSize and PyBytes_AsString with a #if 
PY_VERSION_HEX >= 0x03000000)

I think the new implementation should be done only inside a #if 
defined(SWIGPYTHON) I guess, and the old implementation preserved for other 
binding languages.

Best regards

Even
From gyetman at ciesin.columbia.edu  Mon Mar 29 14:15:08 2010
From: gyetman at ciesin.columbia.edu (Gregory Yetman)
Date: Mon Mar 29 14:45:38 2010
Subject: [gdal-dev] GDAL 1.7.1 and Python
Message-ID: <4BB0EE2C.3030103@ciesin.columbia.edu>

Hi,

Has anyone managed to configure GDAL 1.7.1 with a stand-alone version of 
Python on Windows? I can do it within FWTools but I want to develop 
scripts for running on our UNIX servers using my windows desktop, so I'd 
rather have it configured to use stand-alone python. I had it set up for 
GDAL 1.6 but upgrading to the newest library seems to have broken the 
Python bindings.

TIA,

Greg

-- 
---------------------------
Greg Yetman
CIESIN, Columbia University
gyetman@ciesin.columbia.edu
+1-845-365-8982

From ari.jolma at gmail.com  Mon Mar 29 15:24:55 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon Mar 29 15:25:02 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <201003291950.13253.even.rouault@mines-paris.org>
References: <201003291950.13253.even.rouault@mines-paris.org>
Message-ID: <4BB0FE87.70106@gmail.com>

Even Rouault wrote:
> Andrey,
>
> r19248 introduce Python specific code in general .i files. The consequence is 
> that it breaks the Perl bindings (see 
> http://buildbot.osgeo.org:8500/builders/telascience-quick/builds/312/steps/perl-make/logs/stdio). 
>
> It also breaks Python3 compatibility as PyString_FromStringAndSize and 
> PyString_AsString aren't available (though this could be fixed easily by 
> using PyBytes_FromStringAndSize and PyBytes_AsString with a #if 
> PY_VERSION_HEX >= 0x03000000)
>
> I think the new implementation should be done only inside a #if 
> defined(SWIGPYTHON) I guess, and the old implementation preserved for other 
> binding languages.
>   


I can't see what's the problem that r19248 attempts to solve - I must 
admit that I don't understand everything that goes on in the read/write 
bindings. Does PyBytes_FromStringAndSize make a copy of the binary data? 
Is that the "unnecessary string copying"? I don't think there is such a 
problem in the Perl bindings. Maybe an enhancement request ticket and a 
bit of discussion would have been a good thing to start with.

Best regards,

Ari


> Best regards
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>   

From John.C.Cartwright at noaa.gov  Mon Mar 29 15:36:07 2010
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Mon Mar 29 15:36:10 2010
Subject: [gdal-dev] GDAL 1.7.1 and Python
In-Reply-To: <4BB0EE2C.3030103@ciesin.columbia.edu>
References: <4BB0EE2C.3030103@ciesin.columbia.edu>
Message-ID: <4BB10127.4060307@noaa.gov>

Hi Greg,

I'm on linux, but I also had trouble using the --with-python switch in
configure.  However, going into ./swig/python and running " python
setup.py build" seemed to work OK.

--john

On 03/29/2010 12:15 PM, Gregory Yetman wrote:
> Hi,
>
> Has anyone managed to configure GDAL 1.7.1 with a stand-alone version
> of Python on Windows? I can do it within FWTools but I want to develop
> scripts for running on our UNIX servers using my windows desktop, so
> I'd rather have it configured to use stand-alone python. I had it set
> up for GDAL 1.6 but upgrading to the newest library seems to have
> broken the Python bindings.
>
> TIA,
>
> Greg
>
From warmerdam at pobox.com  Mon Mar 29 15:39:56 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Mar 29 15:40:05 2010
Subject: [gdal-dev] Motion: Commit access for Ragi Burhum
Message-ID: <4BB1020C.10201@pobox.com>

Motion: Extend GDAL commit access to Ragi Burhum.

---

Folks,

Ragi has developed an OGR driver based on the ArcObjects API and there isn't
really an existing committer setup to test and incorporate it.  I'd like to
give Ragi access so he can do so and maintain the driver.  He also has
broader expertise and might be an asset in other areas.

The new driver is described at:

   http://trac.osgeo.org/gdal/ticket/3332

I'll start with my +1.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From SGONG at mdacorporation.com  Mon Mar 29 15:49:43 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Mon Mar 29 15:51:03 2010
Subject: [gdal-dev] GDAL 1.7.1 and Python
References: <4BB0EE2C.3030103@ciesin.columbia.edu> <4BB10127.4060307@noaa.gov>
Message-ID: <5F76F80A436C1146A7C04C6F844026FB06104753@VMXYVR2.ds.mda.ca>

I am on Windows 32-bit.

I went to ./swig/python and ran "python setup.py build" and "python setup.py install"
It is good.

Thanks,
Shawn



-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org on behalf of John Cartwright
Sent: Mon 3/29/2010 12:36 PM
To: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] GDAL 1.7.1 and Python
 
Hi Greg,

I'm on linux, but I also had trouble using the --with-python switch in
configure.  However, going into ./swig/python and running " python
setup.py build" seemed to work OK.

--john

On 03/29/2010 12:15 PM, Gregory Yetman wrote:
> Hi,
>
> Has anyone managed to configure GDAL 1.7.1 with a stand-alone version
> of Python on Windows? I can do it within FWTools but I want to develop
> scripts for running on our UNIX servers using my windows desktop, so
> I'd rather have it configured to use stand-alone python. I had it set
> up for GDAL 1.6 but upgrading to the newest library seems to have
> broken the Python bindings.
>
> TIA,
>
> Greg
>
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100329/90346305/attachment-0001.html
From ari.jolma at gmail.com  Mon Mar 29 16:23:08 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Mon Mar 29 16:23:13 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <201003291950.13253.even.rouault@mines-paris.org>
References: <201003291950.13253.even.rouault@mines-paris.org>
Message-ID: <4BB10C2C.3040905@gmail.com>

I was wrong in saying that there are no "unnecessary" memory copies in 
Perl. It seems that the raster data is copied to a buffer, from which it 
is copied to another buffer maintained by Perl. I then have an extra 
layer of Perl code to copy from that buffer to Perl scalar arrays for 
ease of use. An optimization to do away one of the copies would be 
useful. That would mean copying from the initial buffer directly into 
Perl arrays within a typemap - I haven't done that because of the 
complication of several datatypes. To change that would mean - not to 
break existing code - defining a new set of read/write methods.

Would that be compatible with what is wished for in the Python bindings?

Ari

Even Rouault wrote:
> Andrey,
>
> r19248 introduce Python specific code in general .i files. The consequence is 
> that it breaks the Perl bindings (see 
> http://buildbot.osgeo.org:8500/builders/telascience-quick/builds/312/steps/perl-make/logs/stdio). 
>
> It also breaks Python3 compatibility as PyString_FromStringAndSize and 
> PyString_AsString aren't available (though this could be fixed easily by 
> using PyBytes_FromStringAndSize and PyBytes_AsString with a #if 
> PY_VERSION_HEX >= 0x03000000)
>
> I think the new implementation should be done only inside a #if 
> defined(SWIGPYTHON) I guess, and the old implementation preserved for other 
> binding languages.
>
> Best regards
>
> Even
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>   

From even.rouault at mines-paris.org  Mon Mar 29 17:26:31 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Mar 29 17:26:43 2010
Subject: [gdal-dev] Motion: Commit access for Ragi Burhum
In-Reply-To: <4BB1020C.10201@pobox.com>
References: <4BB1020C.10201@pobox.com>
Message-ID: <201003292326.32965.even.rouault@mines-paris.org>

+1 

Le Monday 29 March 2010 21:39:56 Frank Warmerdam, vous avez ?crit?:
> Motion: Extend GDAL commit access to Ragi Burhum.
>
> ---
>
> Folks,
>
> Ragi has developed an OGR driver based on the ArcObjects API and there
> isn't really an existing committer setup to test and incorporate it.  I'd
> like to give Ragi access so he can do so and maintain the driver.  He also
> has broader expertise and might be an asset in other areas.
>
> The new driver is described at:
>
>    http://trac.osgeo.org/gdal/ticket/3332
>
> I'll start with my +1.
>
> Best regards,


From szekerest at gmail.com  Mon Mar 29 17:28:24 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Mar 29 17:28:28 2010
Subject: [gdal-dev] Motion: Commit access for Ragi Burhum
In-Reply-To: <4BB1020C.10201@pobox.com>
References: <4BB1020C.10201@pobox.com>
Message-ID: <f3b73b7d1003291428o12c2e60bj1a21630510c2ebe5@mail.gmail.com>

+1

Tamas




2010/3/29 Frank Warmerdam <warmerdam@pobox.com>

> Motion: Extend GDAL commit access to Ragi Burhum.
>
> ---
>
> Folks,
>
> Ragi has developed an OGR driver based on the ArcObjects API and there
> isn't
> really an existing committer setup to test and incorporate it.  I'd like to
> give Ragi access so he can do so and maintain the driver.  He also has
> broader expertise and might be an asset in other areas.
>
> The new driver is described at:
>
>  http://trac.osgeo.org/gdal/ticket/3332
>
> I'll start with my +1.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100329/a4631c5d/attachment.html
From szekerest at gmail.com  Mon Mar 29 17:38:09 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Mar 29 17:38:11 2010
Subject: [gdal-dev] Python 32 crash on Windows Server 2008 64 bit with 
	Gdal
In-Reply-To: <eb55896c1003290721w45213650t3ead2a29087c4be8@mail.gmail.com>
References: <eb55896c1003290721w45213650t3ead2a29087c4be8@mail.gmail.com>
Message-ID: <f3b73b7d1003291438t4fdfa57fpefb4a13ecc4cc828@mail.gmail.com>

2010/3/29 Silvia Rolla <silvietta.rolla@gmail.com>

>
> Looks like many people had problem running gdal with python 32bit on 64 bit
> machine.
> Could you please help on this?
> Thanks in advance
>



Silvia,



You might want to do a test with the packages provided at
http://vbkto.dyndns.org/sdk/ . Both the Win32 and Win64 packages are
suitable to run on a Win64 environment.

These packages are used also in the GDAL buildbot online testing envionment:
http://buildbot.osgeo.org:8500/waterfall

Best regards,

Tamas
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100329/f40b028c/attachment.html
From dmorissette at mapgears.com  Mon Mar 29 20:33:52 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Mar 29 20:41:19 2010
Subject: [gdal-dev] Motion: Commit access for Ragi Burhum
In-Reply-To: <4BB1020C.10201@pobox.com>
References: <4BB1020C.10201@pobox.com>
Message-ID: <4BB146F0.2010400@mapgears.com>

Frank Warmerdam wrote:
> Motion: Extend GDAL commit access to Ragi Burhum.
> 

+1

-- 
Daniel Morissette
http://www.mapgears.com/
From xiaoxxcool at 163.com  Mon Mar 29 22:21:14 2010
From: xiaoxxcool at 163.com (zeng)
Date: Mon Mar 29 22:36:31 2010
Subject: [gdal-dev] gdal ogr with java
Message-ID: <1e3d98d.18bdb.127acdf66e9.Coremail.xiaoxxcool@163.com>

Hi, buddies
      I am using gdal 1.7.1 with java banding, I got a problem when I run the follow code, there is no out put message. And I am sure the file exists, I have tried the relative code in c++, it works well. Any one knows why?
//ShpTest.java
import java.io.IOException;
import org.gdal.gdal.gdal;
import org.gdal.ogr.DataSource;
import org.gdal.ogr.ogr;
public class ShpTest {
    public static void main(String args[]) throws IOException {
        String filename="f:/test/shp/states.shp";
        gdal.AllRegister();        
        DataSource poDS = ogr.Open(filename);
        if(poDS == null)
        {
            System.out.println(gdal.GetLastErrorMsg());
            System.exit( 1 );
        }               
        System.out.println("test ok");
        poDS.delete();
    }        
}
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100330/c60c91c3/attachment.html
From ivan.lucena at pmldnet.com  Mon Mar 29 23:02:14 2010
From: ivan.lucena at pmldnet.com (=?iso-8859-1?Q?Ivan=20Lucena?=)
Date: Mon Mar 29 23:02:17 2010
Subject: =?iso-8859-1?B?UmU6IFtnZGFsLWRldl0gZ2RhbCBvZ3Igd2l0aCBqYXZh?=
Message-ID: <20100330030214.14228.qmail@s466.sureserver.com>

Hi Zeng,

You are trying to load a Shapefile. Right?

That is supported by OGR, so you should call:

ogr.RegisterAll();

Before trying to open the file.

If you are going to open Raster with that same code you should keep your call to:

gdal.RegisterAll();

Regards,

Ivan

>  -------Original Message-------
>  From: zeng <xiaoxxcool@163.com>
>  To: gdal-dev@lists.osgeo.org
>  Subject: [gdal-dev] gdal ogr with java
>  Sent: Mar 29 '10 21:21
>  
>  Hi, buddies
>  I am using gdal 1.7.1 with java banding, I got a problem when I run
>  the follow code, there is no out put message. And I am sure the file
>  exists, I have tried the relative code in c++, it works well. Any one knows
>  why?
>  //ShpTest.java
>  import java.io.IOException;
>  import org.gdal.gdal.gdal;
>  import org.gdal.ogr.DataSource;
>  import org.gdal.ogr.ogr;
>  public class ShpTest {
>  public static void main(String args[]) throws IOException {
>  String filename="f:/test/shp/states.shp";
>  gdal.AllRegister();
>  DataSource poDS = ogr.Open(filename);
>  if(poDS == null)
>  {
>  System.out.println(gdal.GetLastErrorMsg());
>  &n  bsp;           System.exit( 1 );
>  }
>  System.out.println("test ok");
>  poDS.delete();
>  }
>  }
>  
>  
>  --------------------
>  _______________________________________________
>  gdal-dev mailing list
>  [LINK: compose.php?to=gdal-dev@lists.osgeo.org] gdal-dev@lists.osgeo.org
>  [LINK: http://lists.osgeo.org/mailman/listinfo/gdal-dev]
>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
From j.l.h.hartmann at uva.nl  Tue Mar 30 05:13:36 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Tue Mar 30 05:13:45 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <4BB0D747.2090808@pobox.com>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>	<201003272307.24152.even.rouault@mines-paris.org>	<4BB0D53C.4000301@noaa.gov>
	<4BB0D747.2090808@pobox.com>
Message-ID: <4BB1C0C0.4060708@uva.nl>

Frank, is there a description of the way the smoothing is done, or 
should I look it up in the code?

BTW: there is a description of the algorithm used in GRASS to create 
contour lines:

https://trac.osgeo.org/grass/browser/grass/trunk/raster/r.contour/README

This looks much more adapted to the specific case of contour lines than 
the general weighted distance model in GDAL (which is the best one for 
general purposes IMHO). Would it make sense/be possible to adapt the 
GRASS code for GDAL? Doesn't look all too difficult to me.

Jan

On 03/29/10 18:37, Frank Warmerdam wrote:
> Christopher Barker wrote:
>> Even Rouault wrote:
>>> 2) Use gdal_rasterize to burn the contour lines.
>>>
>>> See http://gdal.org/gdal_rasterize.html
>>>
>>> 3) Fill the holes (the nodata values) with gdal_fillnodata.py.
>>>
>>> See http://gdal.org/gdal_fillnodata.html
>>>
>>> Now, the result should be usable with gdaldem.
>>
>> well, yes, but it's likely to be pretty ugly -- it will represent the 
>> elevation as steps -- constant values between contours. If you have 
>> enough contour lines, and want a low-resolution DEM, that might be 
>> OK. However, you'll get much prettier results if you interpolate in 
>> some way to get a smoother result.
>>
>> Unfortunately, interpolating contour lines well is not trivial -- I'd 
>> do some googling and see what you can find.
>>
>> GRASS may have something to help you here, too.
>
> Chris,
>
> gdal_fillnodata attempts to do interpolation and was designed with the
> idea of filling in between contours and holes in elevation products.   It
> isn't perfect of course, but isn't the stepwise result you are expecting.
>
> The algorithm effectively involves radial searches out from each pixel
> to be interpolated, in 4 (or 8?) directions and then weighted distance
> interpolation from the hits.  It also does some user defined number of
> iterations of post-interpolation smoothing to minimize artifacts.
>
> Best regards,
From martin.raspaud at smhi.se  Tue Mar 30 05:25:07 2010
From: martin.raspaud at smhi.se (Martin Raspaud)
Date: Tue Mar 30 05:25:14 2010
Subject: [gdal-dev] Contours from the python interface
Message-ID: <4BB1C373.1040809@smhi.se>

-----BEGIN PGP SIGNED MESSAGE-----
Hash: SHA1

Hi,

I rebound on the previous contour thread to ask if it is possible to burn
contours/borders into raster programatically with python ?

Thanks,
Martin
-----BEGIN PGP SIGNATURE-----
Version: GnuPG v1.4.9 (GNU/Linux)
Comment: Using GnuPG with Fedora - http://enigmail.mozdev.org/

iQEcBAEBAgAGBQJLscNzAAoJEBdvyODiyJI4zdQIANyiZpc9VXI31SAOMHp+r41S
hfkLrOEL3cGejVGBkg23W35erK0pODpTHCThF9tKuCAzWuREYSuqO8gESGPyUbiS
ZOIriEv4EaQkRyULaD8e37bxsM9uRCZK2QcOnu4pM/+tnFhfLPaLtiQhj2yW+Xla
iR3PiTqGVWtHXG7kitNHHKy8RWhoK7/RyQ+Ym5a2UpCrhjjaj572dSAeloM3O2iM
EXLRgk7t8/+1pJYSE2EVH1dM6rcF1TqquuE2tlPEu6x96Uu3CbHqE1adbRSjNNf5
43OqR9h519x21w7FsO32z+4ZXOLjMvDadLbah5HbhNSen59HHbWfXWgKKriCHFk=
=wn2+
-----END PGP SIGNATURE-----
-------------- next part --------------
A non-text attachment was scrubbed...
Name: martin_raspaud.vcf
Type: text/x-vcard
Size: 259 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100330/aeb40c7c/martin_raspaud.vcf
From dron at ak4719.spb.edu  Tue Mar 30 06:27:29 2010
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Tue Mar 30 06:27:34 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <4BB10C2C.3040905@gmail.com>
References: <201003291950.13253.even.rouault@mines-paris.org>
	<4BB10C2C.3040905@gmail.com>
Message-ID: <20100330102729.GB5474@ak4719.spb.edu>

On Mon, Mar 29, 2010 at 11:23:08PM +0300, Ari Jolma wrote:
> I was wrong in saying that there are no "unnecessary" memory copies in  
> Perl. It seems that the raster data is copied to a buffer, from which it  
> is copied to another buffer maintained by Perl. I then have an extra  
> layer of Perl code to copy from that buffer to Perl scalar arrays for  
> ease of use. An optimization to do away one of the copies would be  
> useful. That would mean copying from the initial buffer directly into  
> Perl arrays within a typemap - I haven't done that because of the  
> complication of several datatypes. To change that would mean - not to  
> break existing code - defining a new set of read/write methods.
>
> Would that be compatible with what is wished for in the Python bindings?

Yes, that is what I tried to solve. In Python it looks like that:

%typemap(argout) (int *nLen, char **pBuf )
{
  /* %typemap(argout) (int *nLen, char **pBuf ) */
  Py_XDECREF($result);
%#if PY_VERSION_HEX >= 0x03000000
  $result = PyBytes_FromStringAndSize( *$2, *$1 );
%#else
  $result = PyString_FromStringAndSize( *$2, *$1 );
%#endif
}

PyString_FromStringAndSize() takes the array allocated in ReadRaster_internal()
function (see Band.i) and copies it into the string. The former array is being
deallocated after that. I would like to read directly in the final string
object. I think it could be done using the buffer API in recent Python
branches.

For now I have reverted back the problem commit.

Best regards,
Andrey

-- 
Andrey V. Kiselev
From easy.lin at gmail.com  Tue Mar 30 07:38:46 2010
From: easy.lin at gmail.com (easyl)
Date: Tue Mar 30 07:38:50 2010
Subject: [gdal-dev] gdal2tiles - transparent area on base image becomes
	opaque in tiles
In-Reply-To: <3F5FD0712F5B77409C39BD8C2BB3C8F00614B147@bbcxues12.national.core.bbc.co.uk>
References: <3F5FD0712F5B77409C39BD8C2BB3C8F00614B147@bbcxues12.national.core.bbc.co.uk>
Message-ID: <1269949126069-4823943.post@n2.nabble.com>


open base_mercator.vrt 
it should looks like

<VRTDataset>
  ...
  <VRTRasterBand dataType="Byte" band="1" subClass="VRTWarpedRasterBand"/>
  <VRTRasterBand dataType="Byte" band="2" subClass="VRTWarpedRasterBand"/>
  <VRTRasterBand dataType="Byte" band="3" subClass="VRTWarpedRasterBand"/>
  <VRTRasterBand dataType="Byte" band="4" subClass="VRTWarpedRasterBand"/>
   ...
    <BandList>
      <BandMapping src="1" dst="1"/>
      <BandMapping src="2" dst="2"/>
      <BandMapping src="3" dst="3"/>
    </BandList>
    <SrcAlphaBand>4</SrcAlphaBand>
  </GDALWarpOptions>
</VRTDataset>

Try to manually modify base_mercator.vrt 
<VRTDataset>
  ...
  <VRTRasterBand dataType="Byte" band="1" subClass="VRTWarpedRasterBand">
    <Metadata/>
    <ColorInterp>Red</ColorInterp>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2" subClass="VRTWarpedRasterBand">
    <Metadata/>
    <ColorInterp>Green</ColorInterp>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3" subClass="VRTWarpedRasterBand">
    <Metadata/>
    <ColorInterp>Blue</ColorInterp>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="4" subClass="VRTWarpedRasterBand">
    <Metadata/>
    <ColorInterp>Alpha</ColorInterp>
  </VRTRasterBand>
  ...
  <GDALWarpOptions>
      ...
    <BandList>
      <BandMapping src="1" dst="1"/>
      <BandMapping src="2" dst="2"/>
      <BandMapping src="3" dst="3"/>
      <BandMapping src="4" dst="4"/>
    </BandList>
  </GDALWarpOptions>
</VRTDataset>

and run "gdal2tiles.py --zoom=0-9 --no-kml --webviewer=openlayers
base_mercator.vrt" again

Which options should I pass into gdalwarp to generate correct band list?

btw, MapTiler generates tiles with gray boundary as well...
-- 
View this message in context: http://n2.nabble.com/gdal-dev-gdal2tiles-transparent-area-on-base-image-becomes-opaque-in-tiles-tp4799092p4823943.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Tue Mar 30 08:12:20 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 30 08:12:31 2010
Subject: [gdal-dev] Converting contour lines (Shape files) into DEM
In-Reply-To: <4BB1C0C0.4060708@uva.nl>
References: <6e7b1b711003271109k184e1aeamc86f545e7bc5ef96@mail.gmail.com>
	<201003272307.24152.even.rouault@mines-paris.org>	<4BB0D53C.4000301@noaa.gov>
	<4BB0D747.2090808@pobox.com> <4BB1C0C0.4060708@uva.nl>
Message-ID: <4BB1EAA4.1030108@pobox.com>

Jan Hartmann wrote:
> Frank, is there a description of the way the smoothing is done, or 
> should I look it up in the code?

Jan,

It does a user defined number of iterations of 3x3 average filtering,
only altering the interpolated pixels.   The algorithm discussion,
such as it is, is attached to the API function:

http://gdal.org/gdal__alg_8h.html#0a079afef61968f224b159d48423d1c6

> BTW: there is a description of the algorithm used in GRASS to create 
> contour lines:
> 
> https://trac.osgeo.org/grass/browser/grass/trunk/raster/r.contour/README
> 
> This looks much more adapted to the specific case of contour lines than 
> the general weighted distance model in GDAL (which is the best one for 
> general purposes IMHO). Would it make sense/be possible to adapt the 
> GRASS code for GDAL? Doesn't look all too difficult to me.
st regards,

My reading of r.contour is that it creates contours from a raster, the
process equivelent to what gdal_contour does, not gdal_rasterize + gdal_fillnodata.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Mar 30 08:33:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Mar 30 08:33:12 2010
Subject: [gdal-dev] Contours from the python interface
In-Reply-To: <4BB1C373.1040809@smhi.se>
References: <4BB1C373.1040809@smhi.se>
Message-ID: <4BB1EF81.60804@pobox.com>

Martin Raspaud wrote:
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA1
> 
> Hi,
> 
> I rebound on the previous contour thread to ask if it is possible to burn
> contours/borders into raster programatically with python ?

Martin,

Yes. The gdal_fillnodata.py utility is just a python script,and you can examine
it to see how to call the fillnodata algorithm.  The gdal_rasterize utility
is a program, but the algorithm is also exposed in python (with some loss of
flexibility) and it can be seen in use in the test script at:

   http://svn.osgeo.org/gdal/trunk/autotest/alg/rasterize.py

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From easy.lin at gmail.com  Tue Mar 30 09:40:32 2010
From: easy.lin at gmail.com (easyl)
Date: Tue Mar 30 09:40:34 2010
Subject: [gdal-dev] how to set raster bands with gdalwarp
Message-ID: <1269956432090-4824518.post@n2.nabble.com>


I am making map tiles from a PNG (in RGBA color) with following commands. 

gdal_translate -of VRT -a_srs EPSG:4326 -gcp ... source.png source.vrt
gdalwarp -of VRT -s_srs EPSG:4326 -t_srs EPSG:900913 source.vrt
source_web.vrt
gdal2tiles -p mercator -z 2-11 -w google source_web.vrt 

By the gdalwarp step, the source_web.vrt is generated with undesired raster
bands as following
<VRTDataset> 
  ... 
  <VRTRasterBand dataType="Byte" band="1" subClass="VRTWarpedRasterBand"/> 
  <VRTRasterBand dataType="Byte" band="2" subClass="VRTWarpedRasterBand"/> 
  <VRTRasterBand dataType="Byte" band="3" subClass="VRTWarpedRasterBand"/> 
  <VRTRasterBand dataType="Byte" band="4" subClass="VRTWarpedRasterBand"/> 
   ... 
    <BandList> 
      <BandMapping src="1" dst="1"/> 
      <BandMapping src="2" dst="2"/> 
      <BandMapping src="3" dst="3"/> 
    </BandList> 
    <SrcAlphaBand>4</SrcAlphaBand> 
  </GDALWarpOptions> 
</VRTDataset> 

How can I use gdalwarp or other utilities to let vrt generated with RGBA
bands as following.

<VRTDataset> 
  ... 
  <VRTRasterBand dataType="Byte" band="1" subClass="VRTWarpedRasterBand"> 
    <Metadata/> 
    <ColorInterp>Red</ColorInterp> 
  </VRTRasterBand> 
  <VRTRasterBand dataType="Byte" band="2" subClass="VRTWarpedRasterBand"> 
    <Metadata/> 
    <ColorInterp>Green</ColorInterp> 
  </VRTRasterBand> 
  <VRTRasterBand dataType="Byte" band="3" subClass="VRTWarpedRasterBand"> 
    <Metadata/> 
    <ColorInterp>Blue</ColorInterp> 
  </VRTRasterBand> 
  <VRTRasterBand dataType="Byte" band="4" subClass="VRTWarpedRasterBand"> 
    <Metadata/> 
    <ColorInterp>Alpha</ColorInterp> 
  </VRTRasterBand>
  ... 
  <GDALWarpOptions> 
      ... 
    <BandList> 
      <BandMapping src="1" dst="1"/> 
      <BandMapping src="2" dst="2"/> 
      <BandMapping src="3" dst="3"/> 
      <BandMapping src="4" dst="4"/> 
    </BandList>
  </GDALWarpOptions> 
</VRTDataset> 
-- 
View this message in context: http://n2.nabble.com/how-to-set-raster-bands-with-gdalwarp-tp4824518p4824518.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From ari.jolma at gmail.com  Tue Mar 30 13:25:07 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Mar 30 13:25:16 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <20100330102729.GB5474@ak4719.spb.edu>
References: <201003291950.13253.even.rouault@mines-paris.org>
	<4BB10C2C.3040905@gmail.com> <20100330102729.GB5474@ak4719.spb.edu>
Message-ID: <4BB233F3.2060502@gmail.com>

Andrey Kiselev wrote:
> On Mon, Mar 29, 2010 at 11:23:08PM +0300, Ari Jolma wrote:
>   
>> That would mean copying from the initial buffer directly into  
>> Perl arrays within a typemap - I haven't done that because of the  
>> complication of several datatypes. To change that would mean - not to  
>> break existing code - defining a new set of read/write methods.
>>     
> I would like to read directly in the final string object. I think it could be done using the buffer API in recent Python branches.
>   

But is the string object useful from Python programmer's point of view 
then? (maybe NumPy?) I can let Perl allocate memory for a Perl string 
and then *possibly* give that buffer to the RasterIO, but the Perl 
string still needs to be unpacked by the Perl hacker. There are cases 
when the binary buffer is ok - for example in libral (C), and then in 
Geo::Raster (Perl) I do just that - but for the average Joe Perl Hacker 
it would be good to put it into a Perl 2D array - i.e., each number into 
its own scalar. That I could do in standard typemaps, but as I wrote, 
the interface is different from Band.ReadRaster, which returns the 
string. I have defined a ReadTile/WriteTile interface(*), which do just 
that, but currently the implementation is the read->copy->copy, and the 
2nd one in Perl, which makes it even a bit slower.

(*) see 
http://geoinformatics.tkk.fi/doc/Geo-GDAL/html/class_geo_1_1_g_d_a_l_1_1_band.html

Regards,

Ari



> For now I have reverted back the problem commit.
>
> Best regards,
> Andrey
>
>   

From ari.jolma at gmail.com  Tue Mar 30 15:57:40 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Tue Mar 30 15:57:52 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <4BB246E2.3030109@noaa.gov>
References: <201003291950.13253.even.rouault@mines-paris.org>
	<4BB10C2C.3040905@gmail.com> <20100330102729.GB5474@ak4719.spb.edu>
	<4BB233F3.2060502@gmail.com> <4BB246E2.3030109@noaa.gov>
Message-ID: <4BB257B4.7080509@gmail.com>

Christopher Barker wrote:
> Ari Jolma wrote:
>> But is the string object useful from Python programmer's point of 
>> view then? (maybe NumPy?)
>
> yes, a python string (or, in newer versions, a bytes object) can be 
> used to create various objects with compatible binary represent ions: 
> images, numpy arrays, etc. without copying, thanks to the buffer 
> interface.
>
> Of course, creating a numpy array in the first place is best, but not 
> everyone wants to use numpy.
>
> Not sure what bearing this has on the wrapper, though...

The point is that the byte buffer may contain data basically in any 
GDALDataType (that's an argument to ReadRaster). The receiving end needs 
to know what's the type to understand the bytes object. Perl data buffer 
objects do not carry that information, and it seems that Python bytes 
object do neither (http://www.python.org/dev/peps/pep-3137/).

Ari

>
> -Chris
>
>
>

From Jonathan.Shaw at gdc4s.com  Tue Mar 30 16:59:29 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Tue Mar 30 17:00:17 2010
Subject: [gdal-dev] Preventing .aux.xml output without disabling PAM
Message-ID: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>

I need to override the projection and geotransform for some of the
sources I process, but I want my changes effective in memory only. The
following code should do that (or so I thought), but it causes the file
S:\Maps\aux_test.bmp.aux.xml to be generated, even though I am trying to
prevent that by opening the file read only, setting the GPF_NOSAVE flag,
and even going so far as clearing the GPF_DIRTY flag after making a
change.

I leave GDAL_PAM_ENABLED turned on because, in the same application, I
process other map sources which do supply .aux or .aux.xml files.

I am using FWTools 2.4.7 on Windows.

Any suggestions?


#include <iostream>
#include <ogr_srs_api.h> // for SRS_WKT_WGS84
#include <gdal.h>
#include <gdal_priv.h> // for GDALDataset
#include <gdal_pam.h> // for GDALPamDataset

int main(int argc, char **argv)
{
    GDALAllRegister();

    GDALDataset *ds = (GDALDataset *)GDALOpenShared(
        "S:\\Maps\\test.bmp", GA_ReadOnly);

    GDALPamDataset *pamDs = dynamic_cast<GDALPamDataset *>(ds);
    if (pamDs != NULL)
    {
        std::cout << "Initial flags: "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags |= GPF_NOSAVE;
        pamDs->SetPamFlags(pamFlags);

        std::cout << "GPF_NOSAVE set: "
            << pamDs->GetPamFlags() << std::endl;
    }

    // causes a change to the PAM dataset that makes it "dirty"
    ds->SetProjection(SRS_WKT_WGS84);

    if (pamDs != NULL)
    {
        std::cout << "After SetProjection(): "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags &= ~GPF_DIRTY;
        pamDs->SetPamFlags(pamFlags);

        std::cout << "GPF_DIRTY cleared: "
            << pamDs->GetPamFlags() << std::endl;
        // 16 is output; 16 is value of GPF_NOSAVE
    }

    GDALClose(ds); // causes test.bmp.aux.xml to be written

    GDALDestroyDriverManager();
}


Interestingly, the output is:

Initial flags: 0
GPF_NOSAVE set: 16
After SetProjection(): 16
GPF_DIRTY cleared: 16

I would have expected 0, 16 (nosave), 17 (dirty & nosave), 16.


Thanks,
Jonathan

From Chris.Barker at noaa.gov  Tue Mar 30 17:05:56 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Mar 30 17:05:59 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <4BB257B4.7080509@gmail.com>
References: <201003291950.13253.even.rouault@mines-paris.org>
	<4BB10C2C.3040905@gmail.com> <20100330102729.GB5474@ak4719.spb.edu>
	<4BB233F3.2060502@gmail.com> <4BB246E2.3030109@noaa.gov>
	<4BB257B4.7080509@gmail.com>
Message-ID: <4BB267B4.1090202@noaa.gov>

Ari Jolma wrote:
> The point is that the byte buffer may contain data basically in any 
> GDALDataType (that's an argument to ReadRaster). The receiving end needs 
> to know what's the type to understand the bytes object. Perl data buffer 
> objects do not carry that information, and it seems that Python bytes 
> object do neither (http://www.python.org/dev/peps/pep-3137/).

Correct, it's up the user to make sure that they have what they think 
they have.

However, there is a new buffer object in Python 3 (and back-ported to 
2.6 and 2.7) that does define what the data type is (and, indeed, its 
shape):

http://www.python.org/dev/peps/pep-3118/

That's really what GDAL should use but it may have to wait for when 
support for older Pythons is not needed. I have no idea if anyone has 
written SWIG typemaps for that yet.

-Chris







-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From Luke.Pinner at environment.gov.au  Tue Mar 30 18:32:45 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Tue Mar 30 18:32:52 2010
Subject: [gdal-dev] Preventing .aux.xml output without disabling PAM
In-Reply-To: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>
References: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>
Message-ID: <64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>

Perhaps set the GDAL_PAM_PROXY_DIR environment var to some temp
directory and delete the directory after processing?

Luke

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Shaw,
Jonathan-P29740
Sent: Wednesday, 31 March 2010 7:59 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Preventing .aux.xml output without disabling PAM

I need to override the projection and geotransform for some of the
sources I process, but I want my changes effective in memory only. The
following code should do that (or so I thought), but it causes the file
S:\Maps\aux_test.bmp.aux.xml to be generated, even though I am trying to
prevent that by opening the file read only, setting the GPF_NOSAVE flag,
and even going so far as clearing the GPF_DIRTY flag after making a
change.

I leave GDAL_PAM_ENABLED turned on because, in the same application, I
process other map sources which do supply .aux or .aux.xml files.

I am using FWTools 2.4.7 on Windows.

Any suggestions?


#include <iostream>
#include <ogr_srs_api.h> // for SRS_WKT_WGS84
#include <gdal.h>
#include <gdal_priv.h> // for GDALDataset
#include <gdal_pam.h> // for GDALPamDataset

int main(int argc, char **argv)
{
    GDALAllRegister();

    GDALDataset *ds = (GDALDataset *)GDALOpenShared(
        "S:\\Maps\\test.bmp", GA_ReadOnly);

    GDALPamDataset *pamDs = dynamic_cast<GDALPamDataset *>(ds);
    if (pamDs != NULL)
    {
        std::cout << "Initial flags: "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags |= GPF_NOSAVE;
        pamDs->SetPamFlags(pamFlags);

        std::cout << "GPF_NOSAVE set: "
            << pamDs->GetPamFlags() << std::endl;
    }

    // causes a change to the PAM dataset that makes it "dirty"
    ds->SetProjection(SRS_WKT_WGS84);

    if (pamDs != NULL)
    {
        std::cout << "After SetProjection(): "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags &= ~GPF_DIRTY;
        pamDs->SetPamFlags(pamFlags);

        std::cout << "GPF_DIRTY cleared: "
            << pamDs->GetPamFlags() << std::endl;
        // 16 is output; 16 is value of GPF_NOSAVE
    }

    GDALClose(ds); // causes test.bmp.aux.xml to be written

    GDALDestroyDriverManager();
}


Interestingly, the output is:

Initial flags: 0
GPF_NOSAVE set: 16
After SetProjection(): 16
GPF_DIRTY cleared: 16

I would have expected 0, 16 (nosave), 17 (dirty & nosave), 16.


Thanks,
Jonathan

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev


------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From Jonathan.Shaw at gdc4s.com  Tue Mar 30 18:43:52 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Tue Mar 30 18:44:16 2010
Subject: [gdal-dev] Preventing .aux.xml output without disabling PAM
In-Reply-To: <64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>
References: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>
	<64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF7024486C3@AZ25EXM03.gddsi.com>

Good suggestion... I tried that, also, but the .aux.xml file is still
written to the normal location unless the file system rejects it (due to
being on a read-only directory or device, for instance).

Jonathan


-----Original Message-----
From: Pinner, Luke [mailto:Luke.Pinner@environment.gov.au] 
Sent: Tuesday, March 30, 2010 3:33 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Preventing .aux.xml output without disabling PAM

Perhaps set the GDAL_PAM_PROXY_DIR environment var to some temp
directory and delete the directory after processing?

Luke

-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
Sent: Wednesday, 31 March 2010 7:59 AM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Preventing .aux.xml output without disabling PAM

I need to override the projection and geotransform for some of the
sources I process, but I want my changes effective in memory only. The
following code should do that (or so I thought), but it causes the file
S:\Maps\aux_test.bmp.aux.xml to be generated, even though I am trying to
prevent that by opening the file read only, setting the GPF_NOSAVE flag,
and even going so far as clearing the GPF_DIRTY flag after making a
change.

I leave GDAL_PAM_ENABLED turned on because, in the same application, I
process other map sources which do supply .aux or .aux.xml files.

I am using FWTools 2.4.7 on Windows.

Any suggestions?


#include <iostream>
#include <ogr_srs_api.h> // for SRS_WKT_WGS84
#include <gdal.h>
#include <gdal_priv.h> // for GDALDataset
#include <gdal_pam.h> // for GDALPamDataset

int main(int argc, char **argv)
{
    GDALAllRegister();

    GDALDataset *ds = (GDALDataset *)GDALOpenShared(
        "S:\\Maps\\test.bmp", GA_ReadOnly);

    GDALPamDataset *pamDs = dynamic_cast<GDALPamDataset *>(ds);
    if (pamDs != NULL)
    {
        std::cout << "Initial flags: "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags |= GPF_NOSAVE;
        pamDs->SetPamFlags(pamFlags);

        std::cout << "GPF_NOSAVE set: "
            << pamDs->GetPamFlags() << std::endl;
    }

    // causes a change to the PAM dataset that makes it "dirty"
    ds->SetProjection(SRS_WKT_WGS84);

    if (pamDs != NULL)
    {
        std::cout << "After SetProjection(): "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags &= ~GPF_DIRTY;
        pamDs->SetPamFlags(pamFlags);

        std::cout << "GPF_DIRTY cleared: "
            << pamDs->GetPamFlags() << std::endl;
        // 16 is output; 16 is value of GPF_NOSAVE
    }

    GDALClose(ds); // causes test.bmp.aux.xml to be written

    GDALDestroyDriverManager();
}


Interestingly, the output is:

Initial flags: 0
GPF_NOSAVE set: 16
After SetProjection(): 16
GPF_DIRTY cleared: 16

I would have expected 0, 16 (nosave), 17 (dirty & nosave), 16.


Thanks,
Jonathan


From gongyinghsu at gmail.com  Wed Mar 31 02:25:31 2010
From: gongyinghsu at gmail.com (GongYing Hsu)
Date: Wed Mar 31 02:32:22 2010
Subject: [gdal-dev] GDAL and JAVA
Message-ID: <r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>

Excuse me!
Is there has any tutorial about GDAL for JAVA?
What I use is JDK 1.6 and gdal1.7.1. So how do I set up the GDAL for JAVA??
Thank you very much.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100331/1dce461c/attachment.html
From warmerdam at pobox.com  Wed Mar 31 02:37:18 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 31 02:37:50 2010
Subject: [gdal-dev] GDAL and JAVA
In-Reply-To: <r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>
References: <r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>
Message-ID: <4BB2ED9E.3040600@pobox.com>

GongYing Hsu wrote:
> Excuse me!
> Is there has any tutorial about GDAL for JAVA?
> What I use is JDK 1.6 and gdal1.7.1. So how do I set up the GDAL for JAVA??
> Thank you very much.

GongYing Hsu,

I believe the best information on the Java bindings for GDAL are at:

   http://trac.osgeo.org/gdal/wiki/GdalOgrInJava

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From neteler at osgeo.org  Wed Mar 31 06:48:47 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Wed Mar 31 12:01:43 2010
Subject: [gdal-dev] Re: Slovenia vector data reprojection issue
In-Reply-To: <86782b610907240731i3569b385tf4ec04213124caec@mail.gmail.com>
References: <86782b610907240731i3569b385tf4ec04213124caec@mail.gmail.com>
Message-ID: <n2t86782b611003310348l786a2e82o744cb6d344b7bbbd@mail.gmail.com>

Hi,

(back to an old problem)

On Fri, Jul 24, 2009 at 4:31 PM, Markus Neteler <neteler@osgeo.org> wrote:
> Hi,
>
> I am trying to reproject Slovenian country data from D48 (WKT attached)
> and Italian ISTAT national vector data (UTM32/ED50) into a common
> projection.
>
> While the map "attach" rather well in Latlong/WGS84 using GDAL 1.6.svn,
> they don't in EU LAEA (EPSG 3035). This is a bit suprising for me.
> Any trick to get this done?
>
> The input SHAPE files have each a .prj file (attached), the target SRS
> I request by -t_srs epsg:4326 or -t_srs epsg:3035.
>
> My preferred SRS would be EU LAEA to match the EU CORINE data.

It appears to be a bug in GDAL.
If I do

* SLO -> EU LAEA
  the result is shifted, apparently the TOWGS84 in epsgD48_3787.prj is
not applied.

If I do instead:
* SLO -> LL -> EU LAEA
  the result is "perfect".


Worth a bug report?

Best,
Markus
-------------- next part --------------
A non-text attachment was scrubbed...
Name: epsgD48_3787.prj
Type: application/octet-stream
Size: 680 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100331/d8d6189a/epsgD48_3787.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: eu_etrs89_laea.prj
Type: application/octet-stream
Size: 341 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100331/d8d6189a/eu_etrs89_laea.obj
From dron at ak4719.spb.edu  Wed Mar 31 09:07:48 2010
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Mar 31 12:03:07 2010
Subject: [gdal-dev] Commit r19248
In-Reply-To: <4BB233F3.2060502@gmail.com>
References: <201003291950.13253.even.rouault@mines-paris.org>
	<4BB10C2C.3040905@gmail.com> <20100330102729.GB5474@ak4719.spb.edu>
	<4BB233F3.2060502@gmail.com>
Message-ID: <20100331130748.GA15791@ak4719.spb.edu>

On Tue, Mar 30, 2010 at 08:25:07PM +0300, Ari Jolma wrote:
>> I would like to read directly in the final string object. I think it could
>> be done using the buffer API in recent Python branches.
>
> But is the string object useful from Python programmer's point of view  
> then? (maybe NumPy?)

Yep, NumPy is good for that, but it is a separate API. Here I would like to do
just small optimization for ReadRaster call. Certainly we can save one buffer
allocation/copy/deallocation cycle.

> I can let Perl allocate memory for a Perl string  
> and then *possibly* give that buffer to the RasterIO, but the Perl  
> string still needs to be unpacked by the Perl hacker. There are cases  
> when the binary buffer is ok - for example in libral (C), and then in  
> Geo::Raster (Perl) I do just that - but for the average Joe Perl Hacker  
> it would be good to put it into a Perl 2D array - i.e., each number into  
> its own scalar. That I could do in standard typemaps, but as I wrote,  
> the interface is different from Band.ReadRaster, which returns the  
> string. I have defined a ReadTile/WriteTile interface(*), which do just  
> that, but currently the implementation is the read->copy->copy, and the  
> 2nd one in Perl, which makes it even a bit slower.
>
> (*) see  
> http://geoinformatics.tkk.fi/doc/Geo-GDAL/html/class_geo_1_1_g_d_a_l_1_1_band.html

I will take a look at Perl part in more details and come with some suggestion
later. I think we can arrange something useful for both bindings.

-- 
Andrey V. Kiselev
From warmerdam at pobox.com  Wed Mar 31 12:52:52 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Mar 31 12:52:57 2010
Subject: [gdal-dev] Re: Slovenia vector data reprojection issue
In-Reply-To: <n2t86782b611003310348l786a2e82o744cb6d344b7bbbd@mail.gmail.com>
References: <86782b610907240731i3569b385tf4ec04213124caec@mail.gmail.com>
	<n2t86782b611003310348l786a2e82o744cb6d344b7bbbd@mail.gmail.com>
Message-ID: <4BB37DE4.9050002@pobox.com>

Markus Neteler wrote:
> Hi,
> 
> (back to an old problem)
> 
> On Fri, Jul 24, 2009 at 4:31 PM, Markus Neteler <neteler@osgeo.org> wrote:
>> Hi,
>>
>> I am trying to reproject Slovenian country data from D48 (WKT attached)
>> and Italian ISTAT national vector data (UTM32/ED50) into a common
>> projection.
>>
>> While the map "attach" rather well in Latlong/WGS84 using GDAL 1.6.svn,
>> they don't in EU LAEA (EPSG 3035). This is a bit suprising for me.
>> Any trick to get this done?
>>
>> The input SHAPE files have each a .prj file (attached), the target SRS
>> I request by -t_srs epsg:4326 or -t_srs epsg:3035.
>>
>> My preferred SRS would be EU LAEA to match the EU CORINE data.
> 
> It appears to be a bug in GDAL.
> If I do
> 
> * SLO -> EU LAEA
>   the result is shifted, apparently the TOWGS84 in epsgD48_3787.prj is
> not applied.
> 
> If I do instead:
> * SLO -> LL -> EU LAEA
>   the result is "perfect".

Markus,

The problem is that the eu_etrs89_laea.prj does not have TOWGS84
parameters for the datum, so if you go directly from D48 to laea
no datum shifting will be done (since one end is not datum enabled).

If you go to WGS84 first, then the D48 datum shift is applied to WGS84.
No datum shift is applied from WGS84 to the LAEA projection, but ETRS89
is effectively the same as WGS84 I believe.

So the key is to mark the ETRS89 datum as equal to WGS84 - likely with a
TOWGS84[0,0,0] entry in the coordinate system definition.

I see that after my datum overhaul, GDAL is expanding EPSG:4258 to:

GEOGCS["ETRS89",
     DATUM["European_Terrestrial_Reference_System_1989",
         SPHEROID["GRS 1980",6378137,298.257222101,
             AUTHORITY["EPSG","7019"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6258"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.01745329251994328,
         AUTHORITY["EPSG","9122"]],
     AUTHORITY["EPSG","4258"]]

which has the TOWGS84[] entry, so we can have confidence that this
family of problem will be reduced as the richer set of datum shifts
comes out with GDAL 1.8.

In short, I think this is an understood situation and there is no
need for a ticket.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From neteler at osgeo.org  Wed Mar 31 13:38:19 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Wed Mar 31 13:38:42 2010
Subject: [gdal-dev] Re: Slovenia vector data reprojection issue
In-Reply-To: <4BB37DE4.9050002@pobox.com>
References: <86782b610907240731i3569b385tf4ec04213124caec@mail.gmail.com> 
	<n2t86782b611003310348l786a2e82o744cb6d344b7bbbd@mail.gmail.com> 
	<4BB37DE4.9050002@pobox.com>
Message-ID: <u2h86782b611003311038q3317883dvc27b8200b0fd2bf@mail.gmail.com>

On Wed, Mar 31, 2010 at 6:52 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Markus Neteler wrote:
>>
>> Hi,
>>
>> (back to an old problem)
>>
>> On Fri, Jul 24, 2009 at 4:31 PM, Markus Neteler <neteler@osgeo.org> wrote:
>>>
>>> Hi,
>>>
>>> I am trying to reproject Slovenian country data from D48 (WKT attached)
>>> and Italian ISTAT national vector data (UTM32/ED50) into a common
>>> projection.
>>>
>>> While the map "attach" rather well in Latlong/WGS84 using GDAL 1.6.svn,
>>> they don't in EU LAEA (EPSG 3035). This is a bit suprising for me.
>>> Any trick to get this done?
>>>
>>> The input SHAPE files have each a .prj file (attached), the target SRS
>>> I request by -t_srs epsg:4326 or -t_srs epsg:3035.
>>>
>>> My preferred SRS would be EU LAEA to match the EU CORINE data.
>>
>> It appears to be a bug in GDAL.
>> If I do
>>
>> * SLO -> EU LAEA
>> ?the result is shifted, apparently the TOWGS84 in epsgD48_3787.prj is
>> not applied.
>>
>> If I do instead:
>> * SLO -> LL -> EU LAEA
>> ?the result is "perfect".
>
> Markus,
>
> The problem is that the eu_etrs89_laea.prj does not have TOWGS84
> parameters for the datum, so if you go directly from D48 to laea
> no datum shifting will be done (since one end is not datum enabled).

Ah - I didn't realize this.

> If you go to WGS84 first, then the D48 datum shift is applied to WGS84.
> No datum shift is applied from WGS84 to the LAEA projection, but ETRS89
> is effectively the same as WGS84 I believe.

Yes, I think so.

> So the key is to mark the ETRS89 datum as equal to WGS84 - likely with a
> TOWGS84[0,0,0] entry in the coordinate system definition.

OK, I'll prepare accordingly my ETRS89 .prj template to avoid this
problem in future
with my current GDAL 1.7.svn installation.

[ I wonder if gdal* could say that the datum shift was omitted to
  wake up the user...]

> I see that after my datum overhaul, GDAL is expanding EPSG:4258 to:
>
> GEOGCS["ETRS89",
> ? ?DATUM["European_Terrestrial_Reference_System_1989",
> ? ? ? ?SPHEROID["GRS 1980",6378137,298.257222101,
> ? ? ? ? ? ?AUTHORITY["EPSG","7019"]],
> ? ? ? ?TOWGS84[0,0,0,0,0,0,0],
> ? ? ? ?AUTHORITY["EPSG","6258"]],
> ? ?PRIMEM["Greenwich",0,
> ? ? ? ?AUTHORITY["EPSG","8901"]],
> ? ?UNIT["degree",0.01745329251994328,
> ? ? ? ?AUTHORITY["EPSG","9122"]],
> ? ?AUTHORITY["EPSG","4258"]]
>
> which has the TOWGS84[] entry, so we can have confidence that this
> family of problem will be reduced as the richer set of datum shifts
> comes out with GDAL 1.8.
>
> In short, I think this is an understood situation and there is no
> need for a ticket.

Perfect. Thanks for the explanations,

Markus
From Jonathan.Shaw at gdc4s.com  Wed Mar 31 18:08:03 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Wed Mar 31 18:08:52 2010
Subject: [gdal-dev] Memory corruption in PNG driver with Microsoft Debug
	DLLs?
References: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com>
	<64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF702448945@AZ25EXM03.gddsi.com>

The code below may cause a memory access violation in GDALClose() if the
source dataset is in PNG format. The PNG driver appears to be corrupting
memory by unintentionally writing into parts of GDALPamDataset (its base
class), and perhaps into other areas, too?

This is evidenced if you open a PNG dataset and then view the value of
its GetPamFlags() integer. Whether or not GDALClose() crashes, the PAM
flag is way out of range. Commenting out the NOSAVE bit setting will
apparently clear the issue crash issue, but not the PAM object
corruption. For me, the corruption is only evident if the Microsoft
Debug DLLs are used (Multi-threaded Debug DLL /MDd, or Multi-threaded
Debug /MTd).

I used FWTools 2.4.7 (GDAL 1.7.0b2) on a Windows XP 64-bit system. I
built the test app below using Visual Studio 2008 SP1 (9.0.30729.1 SP).

I tried to create a ticket in trac.osgeo.org/gdal, but it says I do not
have create ticket permission.

Thanks,
Jonathan



#include <iostream>
#include <gdal.h>
#include <gdal_priv.h> // for GDALDataset
#include <gdal_pam.h> // for GDALPamDataset

int main(int argc, char **argv)
{
    GDALAllRegister();
    GDALDataset *ds = (GDALDataset *)GDALOpen(
        "S:\\Maps\\aux_test.png", GA_ReadOnly);

    GDALPamDataset *pamDs = dynamic_cast<GDALPamDataset *>(ds);
    if (pamDs != NULL)
    {
        // with Debug DLLs, this prints number like 18666064,
        // while with release DLLs, this outputs 0.
        std::cout << "Initial flags: "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags |= GPF_NOSAVE;

        // changing flag further corrupts PNG dataset?
        pamDs->SetPamFlags(pamFlags);
    }

    GDALClose(ds); // access violation with MSFT Debug DLLs

    GDALDestroyDriverManager();
}

From Jonathan.Shaw at gdc4s.com  Wed Mar 31 19:20:57 2010
From: Jonathan.Shaw at gdc4s.com (Shaw, Jonathan-P29740)
Date: Wed Mar 31 19:21:08 2010
Subject: [gdal-dev] Memory corruption in PNG driver with Microsoft
	DebugDLLs?
In-Reply-To: <0873B50412231C47AFF7ECE2B4226CF702448945@AZ25EXM03.gddsi.com>
References: <0873B50412231C47AFF7ECE2B4226CF702448657@AZ25EXM03.gddsi.com><64102B2FB850C345B04D09C82018F45F0273EC42@ACT01VEXCCL04.internal.govt>
	<0873B50412231C47AFF7ECE2B4226CF702448945@AZ25EXM03.gddsi.com>
Message-ID: <0873B50412231C47AFF7ECE2B4226CF70244898B@AZ25EXM03.gddsi.com>

Upon further browsing of the open tickets, I'm wondering if I'm
experiencing the crashes, heap corruption, etc. described by
http://trac.osgeo.org/gdal/ticket/3346.

I've also been having issues with closing VRT datasets in some
circumstances where I've chained them, and warping some MrSID sources
where it succeeds at certain output sizes and not others (for
instance)... Now I'm starting to think these may also be related to
issue #3346.

I'll start doing more testing with my app built in release mode instead
of debug. Any other advice?

Thanks,
Jonathan


-----Original Message-----
From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Shaw,
Jonathan-P29740
Sent: Wednesday, March 31, 2010 3:08 PM
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Memory corruption in PNG driver with Microsoft
DebugDLLs?

The code below may cause a memory access violation in GDALClose() if the
source dataset is in PNG format. The PNG driver appears to be corrupting
memory by unintentionally writing into parts of GDALPamDataset (its base
class), and perhaps into other areas, too?

This is evidenced if you open a PNG dataset and then view the value of
its GetPamFlags() integer. Whether or not GDALClose() crashes, the PAM
flag is way out of range. Commenting out the NOSAVE bit setting will
apparently clear the issue crash issue, but not the PAM object
corruption. For me, the corruption is only evident if the Microsoft
Debug DLLs are used (Multi-threaded Debug DLL /MDd, or Multi-threaded
Debug /MTd).

I used FWTools 2.4.7 (GDAL 1.7.0b2) on a Windows XP 64-bit system. I
built the test app below using Visual Studio 2008 SP1 (9.0.30729.1 SP).

I tried to create a ticket in trac.osgeo.org/gdal, but it says I do not
have create ticket permission.

Thanks,
Jonathan



#include <iostream>
#include <gdal.h>
#include <gdal_priv.h> // for GDALDataset
#include <gdal_pam.h> // for GDALPamDataset

int main(int argc, char **argv)
{
    GDALAllRegister();
    GDALDataset *ds = (GDALDataset *)GDALOpen(
        "S:\\Maps\\aux_test.png", GA_ReadOnly);

    GDALPamDataset *pamDs = dynamic_cast<GDALPamDataset *>(ds);
    if (pamDs != NULL)
    {
        // with Debug DLLs, this prints number like 18666064,
        // while with release DLLs, this outputs 0.
        std::cout << "Initial flags: "
            << pamDs->GetPamFlags() << std::endl;

        int pamFlags = pamDs->GetPamFlags();
        pamFlags |= GPF_NOSAVE;

        // changing flag further corrupts PNG dataset?
        pamDs->SetPamFlags(pamFlags);
    }

    GDALClose(ds); // access violation with MSFT Debug DLLs

    GDALDestroyDriverManager();
}

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From ivan.lucena at pmldnet.com  Wed Mar 31 16:34:04 2010
From: ivan.lucena at pmldnet.com (Lucena, Ivan)
Date: Wed Mar 31 20:34:31 2010
Subject: [gdal-dev] Re: rgdal source code
In-Reply-To: <016f01cacf52$4a7e0080$df7a0180$@roberts@duke.edu>
References: <20100326145625.7546.qmail@s466.sureserver.com>	<alpine.LRH.2.00.1003261604050.3438@reclus.nhh.no>	<00d401cacd01$1ce261a0$56a724e0$%roberts@duke.edu>	<alpine.LRH.2.00.1003261943570.4275@reclus.nhh.no>
	<016f01cacf52$4a7e0080$df7a0180$@roberts@duke.edu>
Message-ID: <4BB3B1BC.5060109@pmldnet.com>

Hi Jason/Roger,

I started that thread based on the wrong impression that I would be the one in change of helping
some folks to get up and running with R and the RGDAL library. I thought that I would need to
compile RGDAL against the GDAL just like I usually do for GDAL/Python and GDAL/Java in Windows and
Linux. Turns out that that is not the case. Not anymore. Somebody did a great job updating to GDAL
1.7.1, so now it is pretty simple and convenient to install RGDAL direct from the R GUI from the
closest mirror site. That is great. Well, at least for Win32. So, I rest my thread. I mean, I don't
need the "rgdal source code" anymore.

My best regards,

Ivan

Jason Roberts wrote:
> Roger,
> 
> Thanks for the info. I have never built GDAL with MSYS before, only with the
> various Microsoft compilers. The GDAL team provides pre-configured build
> environments for those compilers that produce the library with names
> gdal16.dll, gdal17.dll, etc. I assumed that it would work that way for other
> compilers as well. In any case, I have some interest in the architecture of
> rgdal and may follow up with you about it in the future.
> 
> My colleagues and I would like to see rgdal on 64-bit Windows but
> unfortunately we cannot contribute any time to porting it. However, we do
> have at least one 64-bit server and if you are blocked on access to a
> suitable machine, I might be able to arrange for you to use ours via Windows
> Remote Desktop. The machine is currently running the 32-bit OS so our IT
> guys would have to reinstall it. This would likely take some time to
> schedule so I don't know that it could be done soon enough for you to make
> the R 2.11 date. But if you are interested, contact me offline and I'll see
> what can be done.
> 
> Best,
> 
> Jason
> 
> -----Original Message-----
> From: Roger Bivand [mailto:Roger.Bivand@nhh.no] 
> Sent: Friday, March 26, 2010 2:51 PM
> To: Jason Roberts
> Cc: gdal-dev@lists.osgeo.org
> Subject: RE: [gdal-dev] Re: rgdal source code
> 
> On Fri, 26 Mar 2010, Jason Roberts wrote:
> 
>> Roger,
>>
>> Pardon me for interrupting with a question I've had for a while but not
>> asked you.
>>
>> On Windows at least, it appears that rgdal renames the GDAL shared library
>> (e.g. gdal16.dll) to an rgdal-specific name (e.g. libgdal-1.dll). On
>> windows, this has the advantage of avoiding DLL name collisions, allowing
>> rgdal to coexist with other libraries that also load GDAL using its
>> traditional name (e.g. gdal16.dll). Is that why rgdal renamed the shared
>> library? Or was it done for another reason?
> 
> Jason,
> 
> No, it is the name it gets when built under MSYS by default, nothing 
> cleverer than that, I'm afraid!
> 
> This is a different question entirely, but a heads-up might be worthwhile. 
> When R 2.11 arrives in three weeks time, there will be a 64-bit Windows 
> version. Because of the external dependencies on expat, proj4, and GDAL, 
> rgdal is one of only a very small group of CRAN packages that is not 
> available as a 64-bit Windows binary. It would be very useful if 64-bit 
> Windows users got together and figured out how to make a bundle of 64-bit 
> DLLs that could automate the CRAN Windows build of rgdal also for 64-bit 
> Windows. R is built with MinGW, so in the MSYS family. I have no access to 
> such a Windows platform, but have some advice from Brian Ripley, and one 
> interested helper. The more the merrier!
> 
> Roger
> 
>> Thanks,
>>
>> Jason
>>
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.osgeo.org
>> [mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Roger Bivand
>> Sent: Friday, March 26, 2010 11:09 AM
>> To: Ivan Lucena
>> Cc: gdal-dev@lists.osgeo.org
>> Subject: Re: [gdal-dev] Re: rgdal source code
>>
>> On Fri, 26 Mar 2010, Ivan Lucena wrote:
>>
>>> Roger,
>>>
>>> Yes, you are right. The source code is on  rgdal_0.6-25.tar.gz, I know,
>> but the instructions to build on Windows are on the rgdal_0.6-25.zip
> package
>> on README.windows, where it says:
>>> ---
>>> The R Windows binary rgdal package is built against an FWTools Windows
>> binary, using VC++.
>>> Notes:
>>>
>>> Building rgdal.dll in rgdal/src:
>>>
>>> cl /MT /Ox /EHsc /D "WIN32" /c /I E:\rsb\R\R-2.2.1pat\include /I
>> C:\Programfiler\FWTools1.0.0a7\incl
>>> ude *.cpp
>>>
>>> link /dll /out:rgdal.dll /def:RGDAL.def gdal-bindings.obj ogr_geom.obj
>> ogr_proj.obj ogrsource.obj E:
>>> \rsb\R\R-2.2.1pat\lib\Rdll.lib
>> /libpath:"C:\Programfiler\FWTools1.0.0a7\lib" gdal_i.lib
>>> ---
>>>
>>> So I am trying to change it a little bit in order to build against GDAL
>> 1.7.1 (or trunk).
>>> How does that sounds to you? Good idea?
>> Ivan,
>>
>> No, the README.windows file is of course in the source tarball, in the
>> inst directory (as usual for R packages).
>>
>> If you install the Windows binary, you'll see that it includes GDAL 1.7.1,
>> that is the message reporting the GDAL runtime version shown when the
>> package is loaded. The only reason for doing anything at all is if you
>> need drivers not already provided for your own purposes. Then you might
>> need to review the README.windows file and, for example, build against
>> current FWTools or OSGEO4W distributions. Please do check the drivers
>> first with ogrDrivers() and gdalDrivers() in R after loading the package.
>>
>> Roger
>>
>>> Regards,
>>>
>>> Ivan
>>>
>>>
>>>>  -------Original Message-------
>>>>  From: Roger Bivand <Roger.Bivand@nhh.no>
>>>>  To: gdal-dev@lists.osgeo.org
>>>>  Subject: [gdal-dev] Re: rgdal source code
>>>>  Sent: Mar 26 '10 09:31
>>>>
>>>>
>>>>  The root cause of the sourceforge issue is in a message posted
>> 2010-03-25
>>>>  from their admin:
>>>>
>>>>  "Update on the current CVS outage that is affecting projects whose UNIX
>>>>  names start with the letters  a, e, h, i, m, o, r, s, w, z.
>>>>
>>>>  The work being done on this server may take up to two days to resolve.
>> We?re
>>>>  working to resolve this with alacrity and assure maximum stability and
>>>>  performance."
>>>>
>>>>  So access should be back by the end of March.
>>>>
>>>>  Roger
>>>>
>>>>
>>>>  Roger Bivand wrote:
>>>>> On Thu, 25 Mar 2010, Ivan wrote:
>>>>>
>>>>>> Roger,
>>>>>>
>>>>>> I in fact did my homework, but I've got a C.
>>>>>>
>>>>>> As you can see on my previous message I did find the RGDAL Source
>> Forge
>>>>>> page
>>>>>> where it shows the CVS instructions ===> [1] <===. That would give a
>> B+
>>>>>> at
>>>>>> least, no? If it worked.
>>>>>>
>>>>>> cvs -d:pserver:anonymous@rgdal.cvs.sourceforge.net:/cvsroot/rgdal
>> login
>>>>>> Logging in to
>>>>>> :pserver:anonymous@rgdal.cvs.sourceforge.net:2401/cvsroot/rgdal
>>>>>> CVS password:
>>>>>> cvs [login aborted]: connect to
>>>>>> rgdal.cvs.sourceforge.net(216.34.181.108):2401 failed: Connection
>> refused
>>>>>> That was a dead end.
>>>>> Correct. When I tried, anonymous checkout from sourceforge was also
>>>>> blocked - nothing we've done, maybe something sourceforge has done. I
>> have
>>>>> changed the main description to:
>>>>>
>>>>> "WARNING: rgdal is only available for download from CRAN - this
>> repository
>>>>> is only used for development and browsing of source code. NEVER use the
>>>>> very out of date file bundles for download from this site!!! See
>>>>> http://rgdal.sourceforge.net for link."
>>>>>
>>>>> Short of migrating to R-forge (which I have done for another R package,
>>>>> spdep), there isn't much that can be done with sourceforge, I'm afraid
>>>>> (sourceforge isn't my favorite place to be).
>>>>>
>>>>> cc: Tim: Any idea why the anonymous checkout fails? Longer term - is
>>>>> migration to SVN on R-Forge worth considering?
>>>>>
>>>>> Roger
>>>>>
>>>>>> I download some of those zip packages from rgdal.sourceforge.net but
>> they
>>>>>> only have binary that requires FWTools installation.
>>>>>>
>>>>>> Another dead end.
>>>>>>
>>>>>> But you are right I should have search a little more to find the CRAN
>>>>>> page.
>>>>>> So I am downloading rgdal_0.6-2.5.zip now. Let's see how it goes.
>>>>>>
>>>>> That is the current Windows CRAN binary, get rgdal_0.6-25.tar.gz for
>> the
>>>>> source. Install the Windows binary within R - do *not* treat the zip
>>>>> archive as an archive - it is just a frozen binary version of the
>> source
>>>>> for Windows.
>>>>>
>>>>> Roger
>>>>>
>>>>>> Thanks you so very much Roger. Have a nice day.
>>>>>>
>>>>>> Ivan
>>>>>>
>>>>>> Roger Bivand wrote:
>>>>>>> Please, do your homework!
>>>>>>>
>>>>>>> Google on "R rgdal" gives:
>>>>>>>
>>>>>>> http://cran.r-project.org/web/packages/rgdal/index.html
>>>>>>>
>>>>>>> http://rgdal.sourceforge.net/
>>>>>>>
>>>>>>> where the latter says: "The R contributed package rgdal is available
>>>>>>> from
>>>>>>> CRAN", that is the first link. On CRAN you will find both the source
>>>>>>> tarball
>>>>>>> and a Windows 32-bit binary including 1.7.1 with standard drivers and
>>>>>>> expat
>>>>>>> for reading KML etc.
>>>>>>> The sourceforge site is used exclusively as a CVS repository for
>>>>>>> developers
>>>>>>> - it hasn't been used for software distribution since about 2004; the
>>>>>>> CRAN
>>>>>>> distribution mechanism is far more robust and "just works".
>>>>>>>
>>>>>>> Refer to show.file(system.file("README.windows", package="rgdal")) if
>>>>>>> you
>>>>>>> need to build from source for more exotic drivers.
>>>>>>>
>>>>>>> The relevant mailing list is R-sig-geo,
>>>>>>> https://www.stat.math.ethz.ch/mailman/listinfo/R-SIG-Geo/, and the
>> best
>>>>>>> point of entrance, the R Spatial task view:
>>>>>>> http://cran.r-project.org/web/views/Spatial.html.
>>>>>>>
>>>>>>> Hope this helps,
>>>>>>>
>>>>>>> Roger
>>>>>>>
>>>>>>>
>>>>>>>
>>>>>>> Ivan-5 wrote:
>>>>>>>> Hi there,
>>>>>>>>
>>>>>>>> I am trying to get RGDAL to work with GDAL 1.7.1 but I cannot access
>>>>>>>> the
>>>>>>>> source code [1] and the binaries for Windows depend on some old
>> version
>>>>>>>> of
>>>>>>>> gdal_fw.dll. Does anybody have any clue?
>>>>>>>>
>>>>>>>> Regards,
>>>>>>>>
>>>>>>>> Ivan
>>>>>>>>
>>>>>>>>
>>>>>>>> [1] - http://sourceforge.net/scm/?type=cvs&group_id=84716
>>>>>>>> _______________________________________________
>>>>>>>> gdal-dev mailing list
>>>>>>>> gdal-dev@lists.osgeo.org
>>>>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>>>>
>>>>>>>>
>>>>>>>
>>>>>>> -----
>>>>>>> Roger Bivand
>>>>>>> Economic Geography Section
>>>>>>> Department of Economics
>>>>>>> Norwegian School of Economics and Business Administration
>>>>>>> Helleveien 30
>>>>>>> N-5045 Bergen, Norway
>>>>>>>
>>>>>>
>>>>> --
>>>>> Roger Bivand
>>>>> Economic Geography Section, Department of Economics, Norwegian School
>> of
>>>>> Economics and Business Administration, Helleveien 30, N-5045 Bergen,
>>>>> Norway. voice: +47 55 95 93 55; fax +47 55 95 95 43
>>>>> e-mail: Roger.Bivand@nhh.no
>>>>>
>>>>> _______________________________________________
>>>>> gdal-dev mailing list
>>>>> gdal-dev@lists.osgeo.org
>>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>>
>>>>>
>>>>
>>>>  -----
>>>>  Roger Bivand
>>>>  Economic Geography Section
>>>>  Department of Economics
>>>>  Norwegian School of Economics and Business Administration
>>>>  Helleveien 30
>>>>  N-5045 Bergen, Norway
>>>>
>>>>  --
>>>>  View this message in context:
>> http://n2.nabble.com/gdal-dev-rgdal-source-code-tp4799954p4804208.html
>>>>  Sent from the GDAL - Dev mailing list archive at Nabble.com.
>>>>  _______________________________________________
>>>>  gdal-dev mailing list
>>>>  gdal-dev@lists.osgeo.org
>>>>  http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>
> 

From gongyinghsu at gmail.com  Wed Mar 31 21:31:59 2010
From: gongyinghsu at gmail.com (GongYing Hsu)
Date: Wed Mar 31 21:39:32 2010
Subject: Fwd: [gdal-dev] GDAL and JAVA
In-Reply-To: <g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
References: <r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>
	<a3d365.bf30.127b4c2d1a6.Coremail.xiaoxxcool@163.com>
	<g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
Message-ID: <u2w3804b9911003311831x3223d348n61f580a07e9929a4@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: error2.jpg
Type: image/jpeg
Size: 18058 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100401/7dda5de8/error2-0001.jpg
From gongyinghsu at gmail.com  Wed Mar 31 21:32:47 2010
From: gongyinghsu at gmail.com (GongYing Hsu)
Date: Wed Mar 31 21:40:47 2010
Subject: Fwd: [gdal-dev] GDAL and JAVA
In-Reply-To: <g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
References: <r2i3804b9911003302325z8d9f8b37ie144ead93df4bea6@mail.gmail.com>
	<a3d365.bf30.127b4c2d1a6.Coremail.xiaoxxcool@163.com>
	<g2j3804b9911003310828ta652d16cr92a37e3214a2609a@mail.gmail.com>
Message-ID: <s2p3804b9911003311832t73881d31n94294f4208c6ab32@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: error2.jpg
Type: image/jpeg
Size: 18058 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100401/ba7051ed/error2.jpg
From benjamin.r.welton at wmich.edu  Wed Mar 31 23:12:45 2010
From: benjamin.r.welton at wmich.edu (Benjamin Welton)
Date: Wed Mar 31 23:17:54 2010
Subject: [gdal-dev] Setting ENVI .hdr band names
Message-ID: <4BB40F2D.1070605@wmich.edu>

Hey all,

    Im wondering if its possible to set the band names that appear in 
the ENVI header file instead of having the default band 1, band 2,.... 
(which looks kinda messy)

Thanks
Ben
