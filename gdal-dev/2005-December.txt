From warmerdam at pobox.com  Thu Dec  1 10:54:02 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
Message-ID: <931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>

On 11/29/05, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
>
> Hi list,
>
>
>
> I am writing function in C++ witch on input get large raster and return
> small sub window of the input raster in BitMap (*.BMP file). The sub window
> is never larger then 1000*1000px.

Ivan,

I think you should read over:

  http://www.gdal.org/cpl__vsi_8h.html#de6f5d790c7eabeae5b25f8ad4540503

I don't think the appropriate functions are currently exported via SWIG,
so currently you may not be able to do this.  But it shouldn't bee to
hard to add the VSIGetMemFileBuffer() and VSIFileFromMemBuffer()
functions to the swig lists.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From archer at eskimo.com  Thu Dec  1 11:17:18 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0512010814590.621@eskimo.com>


One of my users wrote this:

> I'm trying to build xastir with darwinports on Mac OS X Tiger.
> When i try to run it I get the following error:
>
> Built-in map types:
>       gnis   USGS GNIS Datapoints
>        map   APRSdos Maps
>        map   WinAPRS/MacAPRS/X-APRS Maps
>        pdb   PocketAPRS Maps
>
> Support for these additional map types has been compiled in:
>        geo   URL (Internet maps via libcurl library)
>        shp   ESRI Shapefile Maps (Shapelib library)
>        tif   USGS DRG Geotiff Topographic Maps (libgeotiff/libproj)
>        xpm   X Pixmap Maps (XPM library)
> ERROR 1: CPLVerifyConfiguration(): byte order set wrong.
>
> Abort trap
>
> Any Ideas on this problem ?

It looks like it could be libgeotiff or libgdal/ogr that is bringing
the CPL stuff in.  Are there any known problems with MacOSX and the
CPL code?

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From archer at eskimo.com  Thu Dec  1 11:26:11 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] MacOSX Tiger and CPLVerifyConfiguration() problem
In-Reply-To: <Pine.SUN.4.58.0512010814590.621@eskimo.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>
	<Pine.SUN.4.58.0512010814590.621@eskimo.com>
Message-ID: <Pine.SUN.4.58.0512010825300.621@eskimo.com>

On Thu, 1 Dec 2005, Curt, WE7U wrote:
>
> One of my users wrote this:
>
> > I'm trying to build xastir with darwinports on Mac OS X Tiger.
> > When i try to run it I get the following error:
> >
> > Built-in map types:
> >       gnis   USGS GNIS Datapoints
> >        map   APRSdos Maps
> >        map   WinAPRS/MacAPRS/X-APRS Maps
> >        pdb   PocketAPRS Maps
> >
> > Support for these additional map types has been compiled in:
> >        geo   URL (Internet maps via libcurl library)
> >        shp   ESRI Shapefile Maps (Shapelib library)
> >        tif   USGS DRG Geotiff Topographic Maps (libgeotiff/libproj)
> >        xpm   X Pixmap Maps (XPM library)
> > ERROR 1: CPLVerifyConfiguration(): byte order set wrong.
> >
> > Abort trap
> >
> > Any Ideas on this problem ?
>
> It looks like it could be libgeotiff or libgdal/ogr that is bringing
> the CPL stuff in.  Are there any known problems with MacOSX and the
> CPL code?

Sorry, forgot to change the Subject: line first time around.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From warmerdam at pobox.com  Thu Dec  1 11:37:08 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Geodatabase Driver: Layer type vs layer content
In-Reply-To: <000501c5f48e$57c922e0$8a01a8c0@vaio>
References: <000501c5f48e$57c922e0$8a01a8c0@vaio>
Message-ID: <931f8ea90512010837q270d075i15ff4a44d186fbef@mail.gmail.com>

On 11/28/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> I'm using the Geodatabase driver to import data into PostGIS.  I've only
> done a few tests, but it appears that the underlying driver always reports a
> layer as being a point/line/poly layer even if it also contains multipoint,
> multiline, multipoly data.  I haven't tried with 2.5D data yet.
>
> Has anyone else seen this?

Craig,

Looking in the PGEO driver code, it selects the ShapeType
from the GDB_GeomColumns table, and tries to set the
layer geometry type based on that.  It maps POINT
to wkbPoint, ARC to wkbLineString, MULTIPOINT to
wkbMultiPoint but POLYGON is just mapped to
wkbGeometry since I can't know if it includes polygons
and multipolygons.

Could you supply me with a personal geodatabase with mixed
types?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Dec  1 11:58:49 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <Pine.SUN.4.58.0512010814590.621@eskimo.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>
	<Pine.SUN.4.58.0512010814590.621@eskimo.com>
Message-ID: <931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com>

On 12/1/05, Curt, WE7U <archer@eskimo.com> wrote:
>
> > ERROR 1: CPLVerifyConfiguration(): byte order set wrong.
> >
> > Abort trap
> >
> > Any Ideas on this problem ?
>
> It looks like it could be libgeotiff or libgdal/ogr that is bringing
> the CPL stuff in.  Are there any known problems with MacOSX and the
> CPL code?

Curt,

I haven't run into this before.  Basically it indicates
that the CPL_LSB / CPL_MSB macros were set wrong
in cpl_config.h by configure.  Is there any possibility
that a cpl_config.h got copied with the source from
a little endian system?

Looking at the code, I see that CPLVerifyConfiguration()
is called for every CPLMalloc() call.  Yikes!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From archer at eskimo.com  Thu Dec  1 12:04:34 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24> 
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com> 
	<Pine.SUN.4.58.0512010814590.621@eskimo.com>
	<931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0512010902210.621@eskimo.com>

On Thu, 1 Dec 2005, Frank Warmerdam wrote:

> On 12/1/05, Curt, WE7U <archer@eskimo.com> wrote:
> >
> > > ERROR 1: CPLVerifyConfiguration(): byte order set wrong.
>
> I haven't run into this before.  Basically it indicates
> that the CPL_LSB / CPL_MSB macros were set wrong
> in cpl_config.h by configure.  Is there any possibility
> that a cpl_config.h got copied with the source from
> a little endian system?

If so, it came along with one of libproj, libshp, libgeotiff, or
libgdal, not with our application's source.  Nothing like that in
our releases or in CVS.


> Looking at the code, I see that CPLVerifyConfiguration()
> is called for every CPLMalloc() call.  Yikes!

Must be in one of the libraries, 'cuz again it's not in our sources.
We don't appear to call any CPL stuff directly.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From andreas.fischer at kreis-unna.de  Thu Dec  1 12:19:36 2005
From: andreas.fischer at kreis-unna.de (Fischer, Andreas)
Date: Wed Nov 21 11:49:53 2007
Subject: AW: [SPAM] Re: [Gdal-dev] ogr2ogr and MapInfo
Message-ID: <A45C4BB6E895D711BD5A002035847D4D6D52F4@ntku4.kru.int>

Hi Frank,
a couple of days ago we had a discussion about the MapInfo-Driver in
ogr2ogr. As you suggested I reported the "bug" to bugzilla and Daniel
commented it later on. Can you tell me about the state of that issue? Will
you provide a layer creation option to disable the bounds, as you suggested?
It would be nice to here from you.
Thanks, so far.
Best regards
Andreas Fischer

Andreas,

OK, I am waiting for feedback from Daniel.  I am wondering
if we shouldn't just always drop the bounds in MIF files.  They
are mostly there for "completeness", and are required for the
TAB files (because they are used internally to convert to integer).

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From archer at eskimo.com  Thu Dec  1 12:20:52 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <Pine.SUN.4.58.0512010902210.621@eskimo.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24> 
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com> 
	<Pine.SUN.4.58.0512010814590.621@eskimo.com>
	<931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com>
	<Pine.SUN.4.58.0512010902210.621@eskimo.com>
Message-ID: <Pine.SUN.4.58.0512010917480.621@eskimo.com>

On Thu, 1 Dec 2005, Curt, WE7U wrote:

> On Thu, 1 Dec 2005, Frank Warmerdam wrote:
>
> > On 12/1/05, Curt, WE7U <archer@eskimo.com> wrote:
> > >
> > > > ERROR 1: CPLVerifyConfiguration(): byte order set wrong.
> >
> > I haven't run into this before.  Basically it indicates
> > that the CPL_LSB / CPL_MSB macros were set wrong
> > in cpl_config.h by configure.  Is there any possibility
> > that a cpl_config.h got copied with the source from
> > a little endian system?
>
> If so, it came along with one of libproj, libshp, libgeotiff, or
> libgdal, not with our application's source.  Nothing like that in
> our releases or in CVS.

Looks like we still include "cpl_string.h" in our sources even
though we don't need it currently.  I can suggest that the user try
commenting that line out to see if the problem goes away for him.
We still don't call CPLVerifyConfiguration() directly so I suspect
this won't fix his particular problem.  It must be getting called
indirectly via one of the libraries.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From charles.wivell at dnr.state.mn.us  Thu Dec  1 12:28:53 2005
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
Message-ID: <s38ede91.096@co5.dnr.state.mn.us>

Hi Ivan;

The .bmp format is a very simple format. It has a simple header and the image is stored as BIP. If I remember right each pixel is stored as (BGR) and depending on version of .bmp, the last line of the image in the BIP buffer is the first line of the image displayed or the first line of the BIP buffer is the first line of the image.

Anyway, once the large image is in the memory buffers, you can use "for" loops to copy from the large image buffers into the windowed image buffers and then create the bitmap file (write out the header and create a BIP buffer and write it out) or if you are using MS VC++ you can use the GDI+ libraries to create a bitmap directly from the windowed buffers and save the image.

Chuck Wivell



>>> Frank Warmerdam <warmerdam@pobox.com> 12/01/05 9:54 AM >>>
On 11/29/05, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
>
> Hi list,
>
>
>
> I am writing function in C++ witch on input get large raster and return
> small sub window of the input raster in BitMap (*.BMP file). The sub window
> is never larger then 1000*1000px.

Ivan,

I think you should read over:

  http://www.gdal.org/cpl__vsi_8h.html#de6f5d790c7eabeae5b25f8ad4540503 

I don't think the appropriate functions are currently exported via SWIG,
so currently you may not be able to do this.  But it shouldn't bee to
hard to add the VSIGetMemFileBuffer() and VSIFileFromMemBuffer()
functions to the swig lists.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Thu Dec  1 12:33:08 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <Pine.SUN.4.58.0512010902210.621@eskimo.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>
	<Pine.SUN.4.58.0512010814590.621@eskimo.com>
	<931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com>
	<Pine.SUN.4.58.0512010902210.621@eskimo.com>
Message-ID: <931f8ea90512010933u79d159cbo7922486de24e5f3f@mail.gmail.com>

On 12/1/05, Curt, WE7U <archer@eskimo.com> wrote:
> If so, it came along with one of libproj, libshp, libgeotiff, or
> libgdal, not with our application's source.  Nothing like that in
> our releases or in CVS.
>
>
> > Looking at the code, I see that CPLVerifyConfiguration()
> > is called for every CPLMalloc() call.  Yikes!
>
> Must be in one of the libraries, 'cuz again it's not in our sources.
> We don't appear to call any CPL stuff directly.

Curt,

Yes, it would be part of GDAL.  The cpl_config.h file is
generated by GDAL's configure (in port/cpl_config.h).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From archer at eskimo.com  Thu Dec  1 12:36:23 2005
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <931f8ea90512010933u79d159cbo7922486de24e5f3f@mail.gmail.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24> 
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com> 
	<Pine.SUN.4.58.0512010814590.621@eskimo.com> 
	<931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com> 
	<Pine.SUN.4.58.0512010902210.621@eskimo.com>
	<931f8ea90512010933u79d159cbo7922486de24e5f3f@mail.gmail.com>
Message-ID: <Pine.SUN.4.58.0512010935380.621@eskimo.com>

On Thu, 1 Dec 2005, Frank Warmerdam wrote:

> Yes, it would be part of GDAL.  The cpl_config.h file is
> generated by GDAL's configure (in port/cpl_config.h).

What would help figure this out?  GDAL's config.log file from the
affected system?  config.h?

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From warmerdam at pobox.com  Thu Dec  1 14:44:09 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] missing function to destroy properly OGRStyleTool ?
In-Reply-To: <030501c5f435$86463800$3301a8c0@ANKARA>
References: <s38aeafb.062@SRV-POSTIX-DFT>
	<030501c5f435$86463800$3301a8c0@ANKARA>
Message-ID: <931f8ea90512011144q362a6329q396762c7f450042a@mail.gmail.com>

On 11/28/05, Fabien Dachicourt <support@geoimage.fr> wrote:
> I know that many problems appear when the "new" is done inside gdal/ogr
> library, whereas the "delete" is done outside (the best example is
> OGRGeometry for which we have to use OGRGeometryFactory to create and
> destroy geometries).
>
> My question is : how can i delete properly these OGRStyleTools ?

Fabien,

Good question.  The answer is that doing the delete
yourself is ok if you are using the same heap as the GDAL DLL.
This is always the case on Unix/Linux.

If not, they need to be deleted in the GDAL DLL,
but no appropriate destroy method has been provided.

I would appreciate your filing a bug report on this issue.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ugeni79 at gmail.com  Thu Dec  1 16:02:35 2005
From: ugeni79 at gmail.com (Eugene Polishchuk)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] PGeo and ODBC support in OGR
Message-ID: <7b3af6610512011302o211251c9p623683c7c6142dd8@mail.gmail.com>

Hi all,

I am currently trying to use OGR for reading and writing spatial data in
different formats.  I have a couple of questions about OGR support for the
following formats:

ODBC:
I've noticed that a new way to create an ODBC datasource:
*tablename(geometrycolname)
*has been added recently which is great since it resolves some of the
performance issues that we have been experiencing, but when creating a
datasource in this way and then subsequently calling ExecuteSQL on it, the
layer that ExecuteSQL() returns does not appear to retain the
geometrycolname and therefore its features do not have any geometry info.
Since I am new to OGR I wasn't sure whether this behavior is by design or is
it still in development or a bug?

PGeo:
With OCI and Shapefile datasources the FID's of the layer returned from
ExecuteSQL() are from 0 to GetFeatureCount()-1, but with PGeo they appear to
correspond to the OBJECTID of the feature.  Is this the intended behavior?

Also do you have any plans on adding spatial reference support to OCI and
ODBC?
And if we decide to make any changes to OGR what would be the appropriate
process to roll our changes into the main source?

Thanks in advance!

Eugene
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051201/1c55e514/attachment.html
From woklist at kyngchaos.com  Thu Dec  1 16:49:17 2005
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL changes affecting GRASS?
In-Reply-To: <931f8ea90511291655td8a29e7r43651a4cabfff13c@mail.gmail.com>
References: <22131C87-6676-4925-B1F2-DD4423EB11D3@kyngchaos.com>
	<931f8ea90511291655td8a29e7r43651a4cabfff13c@mail.gmail.com>
Message-ID: <977C3905-3058-4E33-A8B0-CE4EBAC8C638@kyngchaos.com>

Whew!

It's Postgres.  When I leave out Postgres support in GDAL, GRASS  
behaves.  It doesn't matter whether I build Postgres support into  
GRASS or not, as long as it is in GDAL, parts of GRASS don't like  
GDAL (r.in.gdal works, btw).

I'm using Postgres 8.0.4 + PostGIS 1.0.4 right now, but at the time I  
noticed the problem it was Postgres 8.0.3 + PostGIS 1.0.3, and I  
think I was at Postgres 8.0.3 at a time when it did work, but PostGIS  
went thru a few versions (1.0.x).  The only big change I see in there  
is adding readline support to Postgres.


(I'll drop this into my bug report also and see if anyone has an idea  
now)


On Nov 29, 2005, at 6:55 PM, Frank Warmerdam wrote:

> On 11/29/05, William Kyngesburye <woklist@kyngchaos.com> wrote:
>> I've been having a problem with GRASS lately, and it seems to be
>> related to GDAL.  I have a GRASS bug open for it: #3585.  Noone has
>> provided any help so far.
>>
>> The key trigger combination is: GDAL 1.3.1 (and 1.3.0, possibly the
>> beta), GRASS 6.0/6.1, and built with GCC 3.3 on Mac OS 10.3.  There
>> is no problem building with GCC 4 on Mac OS 10.4, or with GCC 3.3 and
>> GDAL 1.2.6.  Or if I build GRASS without GDAL.  Yes, the GCC 3.3 and
>> GCC 4 builds each have their dependencies built with the
>> corresponding GCC version.
>>
>> The problem is that I get bus errors in a few module - specifically,
>> simple general commands such as g.remove, g.rename and g.copy (but
>> not others, like g.list).
>>
>>
>> So, the question for GDAL - what changed from 1.2.6 to 1.3.x that
>> might affect GRASS this way and only for GCC 3.3-built.
>
> William,
>
> I can't think of any obvious reason for this.  I think you will need
> to dig deeper before we can do anything about this.
>
> Best regards,
> --

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"This is a question about the past, is it? ... How can I tell that  
the past isn't a fiction designed to account for the discrepancy  
between my immediate physical sensations and my state of mind?"

- The Ruler of the Universe


From warmerdam at pobox.com  Thu Dec  1 16:56:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] PGeo and ODBC support in OGR
In-Reply-To: <7b3af6610512011302o211251c9p623683c7c6142dd8@mail.gmail.com>
References: <7b3af6610512011302o211251c9p623683c7c6142dd8@mail.gmail.com>
Message-ID: <931f8ea90512011356h30e164a3ocb5f83aa0d0dafbb@mail.gmail.com>

On 12/1/05, Eugene Polishchuk <ugeni79@gmail.com> wrote:
> Hi all,
>
>  I am currently trying to use OGR for reading and writing spatial data in
> different formats.  I have a couple of questions about OGR support for the
> following formats:
>
>  ODBC:
>  I've noticed that a new way to create an ODBC datasource:
> tablename(geometrycolname) has been added recently which is great since it
> resolves some of the performance issues that we have been experiencing, but
> when creating a datasource in this way and then subsequently calling
> ExecuteSQL on it, the layer that ExecuteSQL() returns does not appear to
> retain the geometrycolname and therefore its features do not have any
> geometry info.  Since I am new to OGR I wasn't sure whether this behavior is
> by design or is it still in development or a bug?

Eugene,

This is the expected behavior, though not really the desired
behavior.  The problem is that OGR doesn't "understand" the SQL
passed through it to ODBC and it has to examine the resultset
produced blindly which means it is very hard to work out what
is a geometry column (or what should be used as the FID).

>  PGeo:
>  With OCI and Shapefile datasources the FID's of the layer returned from
> ExecuteSQL() are from 0 to GetFeatureCount()-1, but with PGeo they appear to
> correspond to the OBJECTID of the feature.  Is this the intended behavior?

The OCI driver now includes a backdoor mechanism to pick a column
to use as the FID (via the OCI_FID config variable).  Otherwise fids
are assigned sequentially which means the fids aren't really persistant.
If the query changes (new spatial extents for instance) then the fids change.

Shapefile uses the index in the file as the fid which is persistant.

Overall, it is better for RDBMS based drivers to be able to select
a column to use as FID but when that can't be done, dummy fids
are auto-assigned.  In general you should not depend on any
particular order or continuity in fids for apps that should work on
different drivers.

>  Also do you have any plans on adding spatial reference support to OCI and
> ODBC?

I thought spatial reference support was already there (mostly) for OCI.
I have no plans to add it for ODBC.

>  And if we decide to make any changes to OGR what would be the appropriate
> process to roll our changes into the main source?

For modest changes submit the changes as patches through bugzilla
with an explanation.  If you plan to do alot of work, we can discuss
providing CVS commit access.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Thu Dec  1 17:25:25 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateCopy into buffer
In-Reply-To: <Pine.SUN.4.58.0512010935380.621@eskimo.com>
References: <000a01c5f4f0$aae12f60$1a01a8c0@PC24>
	<931f8ea90512010754i2849976eg6749623acf79692f@mail.gmail.com>
	<Pine.SUN.4.58.0512010814590.621@eskimo.com>
	<931f8ea90512010858q4275d8acv5024e768f40eb429@mail.gmail.com>
	<Pine.SUN.4.58.0512010902210.621@eskimo.com>
	<931f8ea90512010933u79d159cbo7922486de24e5f3f@mail.gmail.com>
	<Pine.SUN.4.58.0512010935380.621@eskimo.com>
Message-ID: <931f8ea90512011425jfe57b13xe50c8f86090173f2@mail.gmail.com>

On 12/1/05, Curt, WE7U <archer@eskimo.com> wrote:
>
> What would help figure this out?  GDAL's config.log file from the
> affected system?  config.h?

Curt,

Well, start by looking at the cpl_config.h and check for
WORDS_BIGENDIAN.  On a bigendian system like a
MacOS X one, the cpl_config.h file should #define
WORDS_BIGENDIAN.

If instead it look like this:
/* Define if your processor stores words with the most significant byte
   first (like Motorola and SPARC, unlike Intel and VAX). */
/* #undef WORDS_BIGENDIAN */

then either something went wrong with configure, or something
was copied around inappropriately.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From craig.miller at spatialminds.com  Thu Dec  1 19:28:15 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <931f8ea90511251259k5216680cj25eebcabcf65e27a@mail.gmail.com>
Message-ID: <000801c5f6d7$499091e0$0401a8c0@vaio>

I looked at this a little closer.  You are right, gdal was built with /MD
and my app was in debug mode using /MDd.  I actually have 2 builds of gdal
Release/Debug and forgot to set the /MD flag to /MDd when I did my debug
build.

Good catch.

--Craig
 

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: Friday, November 25, 2005 1:00 PM
To: Craig Miller
Subject: Re: [Gdal-dev] Free OGRGeometry?

On 11/25/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> I should have mentioned that using delete (under windows) is causing 
> an unhandled exception.  I thought that there might be a special CPL* 
> routine that has to be used to prevent this from happening.
>
> I'm using a rect now, but in the future I hope to allow other 
> geometric elements to be used to filter the geometry (like an 
> ecological region, county, etc).

Craig,

I imagine your mainline is not build with /MD, but GDAL13.DLL is.
In that case GDAL uses the MSVCRT heap but your application uses its own
private heap. This can result in all sorts of problems.

Since you did the "new OGRPolygon" in your own code, I would have thought
doing the delete there would also be ok, but perhaps not.

There is also an OGRGeometryFactory::destroyGeometry( OGRGeometry *) method
you can use to destroy a geometry within the GDAL DLL.  This is often useful
if you need to destroy a geometry created by GDAL.

Of course, your exception could be due to some other heap corruption issue.
It is hard to know.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rec at geodesign.com.br  Thu Dec  1 20:39:23 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL_MERGE Memory Error
Message-ID: <6.2.1.2.0.20051201233102.04264a88@mailhost.geodesign.com.br>

Hello everyone,

I'm running gdal_merge.py and get the following memory allocation error 
when using the -n 0 flag:

Traceback (most recent call last):
   File "gdal_merge.py", line 478, in ?
     fi.copy_into( t_fh, band, band, nodata )
   File "gdal_merge.py", line 288, in copy_into
     nodata_arg )
   File "gdal_merge.py", line 110, in raster_copy
     nodata )
   File "gdal_merge.py", line 147, in raster_copy_with_nodata
     nodata_test = Numeric.equal(data_src,nodata)
MemoryError: can't allocate memory for array

I run the program twice using the same input datasets when making a mosaic 
to extract two images with the -n 0 flag.  I get one image out. However, I 
get the above error when trying to get the second image out.  I get the 
same error when trying to do the same operation on other inputs.  The 
output images are all the same size about 500 MB.

I'm running gdal_merge.py on a AMD 64-bit machine with 4 GB of RAM and lots 
of disk space.

Please let me know how to fix this problem.

Thanks in advance.

Reinaldo


From rec at geodesign.com.br  Thu Dec  1 20:41:59 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Planar Configuration Type 2
Message-ID: <6.2.1.2.0.20051201233941.04264bd0@mailhost.geodesign.com.br>

Hello everyone,

Is there any way to make gdal_translate not set planar configuration type 2 
on a rgb geotif image.  I am running a program that does not like this type 
of input.

Thanks in advance.

Reinaldo


From craig.miller at spatialminds.com  Thu Dec  1 20:51:39 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <000801c5f6d7$499091e0$0401a8c0@vaio>
Message-ID: <001401c5f6e2$f04199c0$0401a8c0@vaio>

I thought I'd have a conversation with myself here...   :-)

After defining /MDd for GDAL I am getting assertions about improper use of
the heap.  These problems appear with both my application, and with the gdal
utilities (gdalinfo).  Is there a workaround that will allow me to create a
debug build of gdal that is compatible with my application's debug build?
The reason the asserts don't occur when /MD is used is because they are only
present with the debug builds of the system libraries.  I am not positive,
but believe the ASSERTS are triggering valid heap allocation problems inside
GDAL though.


I'd like to build with the following options in order to be compatible with
my application debug settings.
OPTFLAGS=	/nologo /MDd /GX /Zi /Fd$(GDAL_ROOT)\gdal.pdb

Thanks,
Craig

Fore quick reference, here is the definition of the /MDd flag and the /MD
flag

/MDd Defines _DEBUG, _MT, and _DLL so that debug multithread- and
DLL-specific versions of the run-time routines are selected from the
standard .h files. It also causes the compiler to place the library name
MSVCRTD.lib into the .obj file.  

/MD Defines _MT and _DLL so that both multithread- and DLL-specific versions
of the run-time routines are selected from the standard .h files. This
option also causes the compiler to place the library name MSVCRT.lib into
the .obj file. 
Applications compiled with this option are statically linked to MSVCRT.lib.
This library provides a layer of code that allows the linker to resolve
external references. The actual working code is contained in MSVCR71.DLL,
which must be available at run time to applications linked with MSVCRT.lib.

When /MD is used with _STATIC_CPPLIB defined (/D_STATIC_CPPLIB) it will
cause the application to link with the static multithread Standard C++
Library (libcpmt.lib) instead of the dynamic version (msvcprt.lib) while
still dynamically linking to the main CRT via msvcrt.lib.
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Craig Miller
Sent: Thursday, December 01, 2005 4:28 PM
To: 'Gdal-Dev'
Subject: RE: [Gdal-dev] Free OGRGeometry?

I looked at this a little closer.  You are right, gdal was built with /MD
and my app was in debug mode using /MDd.  I actually have 2 builds of gdal
Release/Debug and forgot to set the /MD flag to /MDd when I did my debug
build.

Good catch.

--Craig
 

-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: Friday, November 25, 2005 1:00 PM
To: Craig Miller
Subject: Re: [Gdal-dev] Free OGRGeometry?

On 11/25/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> I should have mentioned that using delete (under windows) is causing 
> an unhandled exception.  I thought that there might be a special CPL* 
> routine that has to be used to prevent this from happening.
>
> I'm using a rect now, but in the future I hope to allow other 
> geometric elements to be used to filter the geometry (like an 
> ecological region, county, etc).

Craig,

I imagine your mainline is not build with /MD, but GDAL13.DLL is.
In that case GDAL uses the MSVCRT heap but your application uses its own
private heap. This can result in all sorts of problems.

Since you did the "new OGRPolygon" in your own code, I would have thought
doing the delete there would also be ok, but perhaps not.

There is also an OGRGeometryFactory::destroyGeometry( OGRGeometry *) method
you can use to destroy a geometry within the GDAL DLL.  This is often useful
if you need to destroy a geometry created by GDAL.

Of course, your exception could be due to some other heap corruption issue.
It is hard to know.

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From nekewong at yahoo.com  Thu Dec  1 23:10:24 2005
From: nekewong at yahoo.com (Jimmy Wang)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] osgdem
Message-ID: <20051202041024.744.qmail@web36410.mail.mud.yahoo.com>

  Hi,list,
   
    I am using gdal_translate convert USGS DEM data to geotiff ,and generate ive file with a geotiff texture via osgdem.But I see a flat terrain with the texture not a real terrain.
   
  Neke


		
---------------------------------
 Yahoo! Personals
 Skip the bars and set-ups and start using Yahoo! Personals for free
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051201/f4d4c809/attachment.html
From dem at acri-st.fr  Fri Dec  2 03:26:18 2005
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Planar Configuration Type 2
In-Reply-To: <6.2.1.2.0.20051201233941.04264bd0@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051201233941.04264bd0@mailhost.geodesign.com.br>
Message-ID: <4390052A.6090405@acri-st.fr>

Reinaldo,

You have to use the -co "INTERLEAVE=PIXEL" option of the GTiff gdiver.
GDAL uses "INTERLEAVE=BAND" by default.

See here: http://www.gdal.org/frmt_gtiff.html


Best Regards,

Julien

Reinaldo Escada Chohfi a ?crit :
> Hello everyone,
> 
> Is there any way to make gdal_translate not set planar configuration 
> type 2 on a rgb geotif image.  I am running a program that does not like 
> this type of input.
> 
> Thanks in advance.
> 
> Reinaldo
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From brodin_ign at gva.es  Fri Dec  2 06:31:05 2005
From: brodin_ign at gva.es (Nacho Brodin)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDALCreate with JPEG
Message-ID: <200512021231.05700.brodin_ign@gva.es>

Hello,
I'm having problems with the function GDALCreate using the JPEG driver however 
GDALCreateCopy works correctly, I can create jpg images with this function. 
With GTiff driver GDALCreate works well.
The error message that GDALCreate show is
ERROR 6: GDALDriver::Create() ... no create method implemented for this 
format.
If I execute "gdal_translate --help" it shows the driver list with output 
support and this list includes JPEG format.

I think that this is a JPEG driver normal behavior but I am not just exporting 
an existing file to a new jpg file. Any suggestion?

Thanks.

Nacho Brodin


From rec at geodesign.com.br  Fri Dec  2 08:21:13 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Planar Configuration Type 2
In-Reply-To: <4390052A.6090405@acri-st.fr>
References: <6.2.1.2.0.20051201233941.04264bd0@mailhost.geodesign.com.br>
	<4390052A.6090405@acri-st.fr>
Message-ID: <6.2.1.2.0.20051202112044.0290cc70@mailhost.geodesign.com.br>

Julien,

Thanks for the help.  It worked.

Reinaldo

At 06:26 AM 12/2/2005, Julien Demaria wrote:
>Reinaldo,
>
>You have to use the -co "INTERLEAVE=PIXEL" option of the GTiff gdiver.
>GDAL uses "INTERLEAVE=BAND" by default.
>
>See here: http://www.gdal.org/frmt_gtiff.html
>
>
>Best Regards,
>
>Julien
>
>Reinaldo Escada Chohfi a ?crit :
>>Hello everyone,
>>Is there any way to make gdal_translate not set planar configuration type 
>>2 on a rgb geotif image.  I am running a program that does not like this 
>>type of input.
>>Thanks in advance.
>>Reinaldo
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@lists.maptools.org
>>http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051202/8c618e24/attachment.html
From rec at geodesign.com.br  Fri Dec  2 15:38:31 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL_MERGE Memory Error
Message-ID: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>

Hello everyone,

I'm running gdal_merge.py and get the following memory allocation error 
when using the -n 0 flag:

Traceback (most recent call last):
   File "gdal_merge.py", line 478, in ?
     fi.copy_into( t_fh, band, band, nodata )
   File "gdal_merge.py", line 288, in copy_into
     nodata_arg )
   File "gdal_merge.py", line 110, in raster_copy
     nodata )
   File "gdal_merge.py", line 147, in raster_copy_with_nodata
     nodata_test = Numeric.equal(data_src,nodata)
MemoryError: can't allocate memory for array

I run the program twice using the same input datasets when making a mosaic 
to extract two images with the -n 0 flag.  I get one image out. However, I 
get the above error when trying to get the second image out.  I get the 
same error when trying to do the same operation on other inputs.  The 
output images are all the same size about 500 MB.

I'm running gdal_merge.py on a AMD 64-bit machine with 4 GB of RAM and lots 
of disk space.

Please let me know how to fix this problem.

Thanks in advance.

Reinaldo  
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051202/e0f759ff/attachment.html
From szekerest at gmail.com  Fri Dec  2 16:01:19 2005
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] PGeo and ODBC support in OGR
In-Reply-To: <931f8ea90512011356h30e164a3ocb5f83aa0d0dafbb@mail.gmail.com>
Message-ID: <4390b623.249ece44.3225.ffffb4d6@mx.gmail.com>

Folks,


If the data source could provide the bounding box of the shape adding a
spatial filter support is not a difficult challenge.

The only problem is how to inform the driver about the columns of the
bounding box. Is applies to the reporting of the fid column as well.

Due to the significant benefits of these issues it would be considerable to
maintain default column names (eg. ogc_fid, minx, miny, maxx, maxy) since
one can apply the proper aliases to support them without any problem.


Tamas Szekeres 



-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Thursday, December 01, 2005 10:56 PM
To: Eugene Polishchuk
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] PGeo and ODBC support in OGR

On 12/1/05, Eugene Polishchuk <ugeni79@gmail.com> wrote:
> Hi all,
>
>  I am currently trying to use OGR for reading and writing spatial data in
> different formats.  I have a couple of questions about OGR support for the
> following formats:
>
>  ODBC:
>  I've noticed that a new way to create an ODBC datasource:
> tablename(geometrycolname) has been added recently which is great since it
> resolves some of the performance issues that we have been experiencing,
but
> when creating a datasource in this way and then subsequently calling
> ExecuteSQL on it, the layer that ExecuteSQL() returns does not appear to
> retain the geometrycolname and therefore its features do not have any
> geometry info.  Since I am new to OGR I wasn't sure whether this behavior
is
> by design or is it still in development or a bug?

Eugene,

This is the expected behavior, though not really the desired
behavior.  The problem is that OGR doesn't "understand" the SQL
passed through it to ODBC and it has to examine the resultset
produced blindly which means it is very hard to work out what
is a geometry column (or what should be used as the FID).

>  PGeo:
>  With OCI and Shapefile datasources the FID's of the layer returned from
> ExecuteSQL() are from 0 to GetFeatureCount()-1, but with PGeo they appear
to
> correspond to the OBJECTID of the feature.  Is this the intended behavior?

The OCI driver now includes a backdoor mechanism to pick a column
to use as the FID (via the OCI_FID config variable).  Otherwise fids
are assigned sequentially which means the fids aren't really persistant.
If the query changes (new spatial extents for instance) then the fids
change.

Shapefile uses the index in the file as the fid which is persistant.

Overall, it is better for RDBMS based drivers to be able to select
a column to use as FID but when that can't be done, dummy fids
are auto-assigned.  In general you should not depend on any
particular order or continuity in fids for apps that should work on
different drivers.

>  Also do you have any plans on adding spatial reference support to OCI and
> ODBC?

I thought spatial reference support was already there (mostly) for OCI.
I have no plans to add it for ODBC.

>  And if we decide to make any changes to OGR what would be the appropriate
> process to roll our changes into the main source?

For modest changes submit the changes as patches through bugzilla
with an explanation.  If you plan to do alot of work, we can discuss
providing CVS commit access.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.362 / Virus Database: 267.13.10/189 - Release Date: 2005.11.30.
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.362 / Virus Database: 267.13.11/191 - Release Date: 2005.12.02.
 


From warmerdam at pobox.com  Fri Dec  2 16:25:34 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] PGeo and ODBC support in OGR
In-Reply-To: <4390b623.249ece44.3225.ffffb4d6@mx.gmail.com>
References: <931f8ea90512011356h30e164a3ocb5f83aa0d0dafbb@mail.gmail.com>
	<4390b623.249ece44.3225.ffffb4d6@mx.gmail.com>
Message-ID: <931f8ea90512021325g556dd13al91ea1ee1b9b50c80@mail.gmail.com>

On 12/2/05, Tamas Szekeres <szekerest@gmail.com> wrote:
> Folks,
>
>
> If the data source could provide the bounding box of the shape adding a
> spatial filter support is not a difficult challenge.
>
> The only problem is how to inform the driver about the columns of the
> bounding box. Is applies to the reporting of the fid column as well.
>
> Due to the significant benefits of these issues it would be considerable to
> maintain default column names (eg. ogc_fid, minx, miny, maxx, maxy) since
> one can apply the proper aliases to support them without any problem.

Tamas,

The ODBC driver will currently recognise tables with an xmin,
ymin, xmax, and ymax column and treat them specially as a
shape spatial extent for purposes of spatial queries.  This is a
fairly recent addition (2-3 weeks ago).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Dec  2 16:27:55 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL_MERGE Memory Error
In-Reply-To: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>

On 12/2/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
>  Hello everyone,
>
>  I'm running gdal_merge.py and get the following memory allocation error
> when using the -n 0 flag:
>
>  Traceback (most recent call last):
>    File "gdal_merge.py", line 478, in ?
>      fi.copy_into( t_fh, band, band, nodata )
>    File "gdal_merge.py", line 288, in copy_into
>      nodata_arg )
>    File "gdal_merge.py", line 110, in raster_copy
>      nodata )
>    File "gdal_merge.py", line 147, in raster_copy_with_nodata
>      nodata_test = Numeric.equal(data_src,nodata)
>  MemoryError: can't allocate memory for array
>
>  I run the program twice using the same input datasets when making a mosaic
> to extract two images with the -n 0 flag.  I get one image out. However, I
> get the above error when trying to get the second image out.  I get the same
> error when trying to do the same operation on other inputs.  The output
> images are all the same size about 500 MB.
>
>  I'm running gdal_merge.py on a AMD 64-bit machine with 4 GB of RAM and lots
> of disk space.

Reinaldo,

I suspect that the 32bit FWTools binaries are not able
to utiltize your RAM effectively.  I suspect a 1 or 2GB
limit per process.  I would suggest instead that you
use gdal_merge.py to create the mosaic file, and then
use gdalwarp to merge in each file to the mosaic.   It
does not attempt to load whole images into RAM.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From szekerest at gmail.com  Fri Dec  2 16:55:19 2005
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] PGeo and ODBC support in OGR
In-Reply-To: <931f8ea90512021325g556dd13al91ea1ee1b9b50c80@mail.gmail.com>
Message-ID: <4390c2c9.7bc5d383.43c4.ffff8be4@mx.gmail.com>

Frank,

After implementing such an enhancement in the ODBC driver I have
experienced, that the random feature access (using GetFeature) have not been
working without sustaining a fid column (It may be assigned to the Mapserver
line as well). Without using fid the feature had been returned from the
entire result set with the same record number as the provided id.

Does this change dissolve this problem.

Tamas Szekeres



-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: Friday, December 02, 2005 10:26 PM
To: Tamas Szekeres
Cc: Eugene Polishchuk; gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] PGeo and ODBC support in OGR

On 12/2/05, Tamas Szekeres <szekerest@gmail.com> wrote:
> Folks,
>
>
> If the data source could provide the bounding box of the shape adding a
> spatial filter support is not a difficult challenge.
>
> The only problem is how to inform the driver about the columns of the
> bounding box. Is applies to the reporting of the fid column as well.
>
> Due to the significant benefits of these issues it would be considerable
to
> maintain default column names (eg. ogc_fid, minx, miny, maxx, maxy) since
> one can apply the proper aliases to support them without any problem.

Tamas,

The ODBC driver will currently recognise tables with an xmin,
ymin, xmax, and ymax column and treat them specially as a
shape spatial extent for purposes of spatial queries.  This is a
fairly recent addition (2-3 weeks ago).

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.1.362 / Virus Database: 267.13.11/191 - Release Date: 2005.12.02.
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.362 / Virus Database: 267.13.11/191 - Release Date: 2005.12.02.
 


From warmerdam at pobox.com  Fri Dec  2 17:29:42 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] PGeo and ODBC support in OGR
In-Reply-To: <4390c2c9.7bc5d383.43c4.ffff8be4@mx.gmail.com>
References: <931f8ea90512021325g556dd13al91ea1ee1b9b50c80@mail.gmail.com>
	<4390c2c9.7bc5d383.43c4.ffff8be4@mx.gmail.com>
Message-ID: <931f8ea90512021429o5290478dgc3b6c3d9f1efc88d@mail.gmail.com>

On 12/2/05, Tamas Szekeres <szekerest@gmail.com> wrote:
> Frank,
>
> After implementing such an enhancement in the ODBC driver I have
> experienced, that the random feature access (using GetFeature) have not been
> working without sustaining a fid column (It may be assigned to the Mapserver
> line as well).

Tamas,

The spatial query support (using xmin, ymin, xmax, ymax) will
no doubt have made it more important to actually select a column
to be the FID.  Otherwise the resultset changes each time the spatial
query is applied (or cleared) and the fids all become meaningless.

The ODBC_OGR_FID configuration option (via MapServer CONFIG
line or environment) can be used to pick the name of the column
to use for FIDs.   It defaults to OGR_FID.


>  Without using fid the feature had been returned from the
> entire result set with the same record number as the provided id.
>
> Does this change dissolve this problem.

The ODBC_OGR_FID should make it possible to avoid this problem.
I would add that Steve's planned "one pass query" support in mapserver
will also solve this problem in the mapserver context (I think) as
persistent FIDs are not longer so important.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From MChapman at sanz.com  Fri Dec  2 18:08:45 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] OGR Memory leak
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C202@mailman.san.com>

I did some tests with OGR executing queries on a layer with ExecuteSQL()
and found that there is a memory leak occurring when you re-run that
query many times.  I am calling ReleaseResultSet() between each
iteration, and I'm deleting the features objects after I use them.  I
also ran a test that only does the query and doesn't ask for any
features and there was still a leak.  My test consisted of 100
concurrent users (synchronized) over 10000 iterations.  Watching the
private bytes of my process shows a slow but steady growth of memory
allocation with no de-allocation.  When I comment out the call to
ExecuteSQL() the problem goes away.  I also tried to use the GetLayer()
function to retrieve the table followed by calls to SetAttributeFilter()
and the result was less leakage but it still has a leak.  Has anyone
else ran into this problem?  I'm running the test on Windows XP and the
data source is an ESRI shape file with a few hundred records.

 

The code is like this:

 

 

m_pLayer = m_pDataSource->ExecuteSQL(m_sStatement.c_str(), NULL, "");

if (m_pLayer == NULL) 

      throw CPLGetLastErrorMsg();

 

m_pDataSource->ReleaseResultSet(m_pLayer);

m_pLayer = NULL;

 

 

// also leaks, but not as much

 

 

m_pLayer = m_pDataSource->GetLayer(0);

if (m_pLayer == NULL) 

      throw CPLGetLastErrorMsg();

 

OGRErr err = m_pLayer->SetAttributeFilter(m_sStatement.c_str());

if (err != OGRERR_NONE) throw CPLGetLastErrorMsg(); 

 

err = m_pLayer->SetAttributeFilter(NULL);

if (err != OGRERR_NONE) throw CPLGetLastErrorMsg(); 

 

 

Can someone else do a test to confirm that there is truly a leak? ...
Frank? ... anyone? ... Ferris Bueller?

 

Thanks,

Martin

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051202/b864ea05/attachment.html
From craig.miller at spatialminds.com  Fri Dec  2 20:44:33 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateLayer:  PostGIS primary key?
Message-ID: <002b01c5f7ab$1cd5f760$0401a8c0@vaio>

Is there a way to specify that the FID column should be the primary key when
creating a PostGIS layer with 
OGRDatasource::CreateLayer?

Is there any reason why I wouldn't want to use the FID column as the primary
key?

--Craig



From warmerdam at pobox.com  Fri Dec  2 21:17:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateLayer: PostGIS primary key?
In-Reply-To: <002b01c5f7ab$1cd5f760$0401a8c0@vaio>
References: <002b01c5f7ab$1cd5f760$0401a8c0@vaio>
Message-ID: <931f8ea90512021817k704b7391mdb5d239679246f79@mail.gmail.com>

On 12/2/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> Is there a way to specify that the FID column should be the primary key when
> creating a PostGIS layer with
> OGRDatasource::CreateLayer?
>
> Is there any reason why I wouldn't want to use the FID column as the primary
> key?

Craig,

In normal situations I can't see any reason the FID column should not
be the primary key.   There is currently no way to make CreateLayer()
make the OGC_FID column the primary key as part of it's operation.
I can't see any harm in adding that though.

What would I change the following to, in order to make OGC_FID
the primary key?

                 "CREATE TABLE \"%s\" ( "
                 "   OGC_FID SERIAL, "
                 "   WKB_GEOMETRY %s )",

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From craig.miller at spatialminds.com  Fri Dec  2 21:37:29 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] CreateLayer: PostGIS primary key?
In-Reply-To: <931f8ea90512021817k704b7391mdb5d239679246f79@mail.gmail.com>
Message-ID: <002c01c5f7b2$817efe30$0401a8c0@vaio>

>From what I've read, it's best to name all constraints. So, I think the
following will create a named primary key constraint called %s_pk:


                 "CREATE TABLE \"%s\" ( "
                 "   OGC_FID SERIAL, "
                 "   WKB_GEOMETRY %s, "
                 "   CONSTRAINT \"%s_pk\" PRIMARY KEY (OGC_FID) )",

--Craig


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of Frank
Warmerdam
Sent: Friday, December 02, 2005 6:17 PM
To: Craig Miller
Cc: Gdal-Dev
Subject: Re: [Gdal-dev] CreateLayer: PostGIS primary key?

On 12/2/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> Is there a way to specify that the FID column should be the primary 
> key when creating a PostGIS layer with OGRDatasource::CreateLayer?
>
> Is there any reason why I wouldn't want to use the FID column as the 
> primary key?

Craig,

In normal situations I can't see any reason the FID column should not
be the primary key.   There is currently no way to make CreateLayer()
make the OGC_FID column the primary key as part of it's operation.
I can't see any harm in adding that though.

What would I change the following to, in order to make OGC_FID the primary
key?

                 "CREATE TABLE \"%s\" ( "
                 "   OGC_FID SERIAL, "
                 "   WKB_GEOMETRY %s )",

Best regards,
--
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Dec  2 23:25:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDALCreate with JPEG
In-Reply-To: <200512021231.05700.brodin_ign@gva.es>
References: <200512021231.05700.brodin_ign@gva.es>
Message-ID: <931f8ea90512022025t4d5cfed9w9cbcbcc08650f036@mail.gmail.com>

On 12/2/05, Nacho Brodin <brodin_ign@gva.es> wrote:
> Hello,
> I'm having problems with the function GDALCreate using the JPEG driver however
> GDALCreateCopy works correctly, I can create jpg images with this function.
> With GTiff driver GDALCreate works well.
> The error message that GDALCreate show is
> ERROR 6: GDALDriver::Create() ... no create method implemented for this
> format.
> If I execute "gdal_translate --help" it shows the driver list with output
> support and this list includes JPEG format.
>
> I think that this is a JPEG driver normal behavior but I am not just exporting
> an existing file to a new jpg file. Any suggestion?

Nacho,

Unfortunately for many formats it is difficult to support the
Create() method because the formats have pretty strict
rules about the order things are written and it is hard to
enforce that when the Create() method is used.

Those formats are sometimes referred to as CreateCopy()
only formats, and they include JPEG.  For these formats, you
can only create them with GDALCreateCopy(), meaning you need
some sort of input image even if it is a memory data, or a
virtual file.  For modest sized images, I would suggest you
just go through the Create() process using the MEM driver
(all in memory), and then do a CreateCopy() to JPEG from
that.

For big images either create a temporary file (in TIFF or
.img format for instance) or look into creating a virtual file
allowing you to provide the image data as it is requested by
the driver.  The virtual method is the most complex option.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Dec  2 23:40:12 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <001401c5f6e2$f04199c0$0401a8c0@vaio>
References: <000801c5f6d7$499091e0$0401a8c0@vaio>
	<001401c5f6e2$f04199c0$0401a8c0@vaio>
Message-ID: <931f8ea90512022040h210cff09xa1e9922e5c6098a9@mail.gmail.com>

On 12/1/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> I thought I'd have a conversation with myself here...   :-)
>
> After defining /MDd for GDAL I am getting assertions about improper use of
> the heap.  These problems appear with both my application, and with the gdal
> utilities (gdalinfo).  Is there a workaround that will allow me to create a
> debug build of gdal that is compatible with my application's debug build?
> The reason the asserts don't occur when /MD is used is because they are only
> present with the debug builds of the system libraries.  I am not positive,
> but believe the ASSERTS are triggering valid heap allocation problems inside
> GDAL though.

Craig,

I can't say that I have actually built with /MDd on win32, though
if it provides a bunch of runtime heap debugging support it might
be a very good idea.  Do the error messages give any context
as to where the problem is?  What do you think I should try to
reprodue the problem?  Do you get errors with an operation with
the standard utilities that I could easily reproduce?

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ben at vterrain.org  Sat Dec  3 01:35:38 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <931f8ea90512022040h210cff09xa1e9922e5c6098a9@mail.gmail.com>
Message-ID: <043201c5f7d3$c6b5f1e0$9b02a8c0@DellWork>

Craig,

In case it helps, i have always built both my application and GDAL with /MDd
for Debug, and they are harmonious.

For release, i build all with /MD.  Again, since they are the same, they get
along.

ASSERT failures generally result when the Runtime Library is mismatched.

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Friday, December 02, 2005 6:40 PM
> To: Craig Miller
> Cc: Gdal-Dev
> 
> On 12/1/05, Craig Miller wrote:
> > After defining /MDd for GDAL I am getting assertions about improper 
> > use of the heap. [..]
> 
> I can't say that I have actually built with /MDd on win32, 
> though if it provides a bunch of runtime heap debugging 
> support it might be a very good idea.


From sevilla_lui at gva.es  Sat Dec  3 04:15:35 2005
From: sevilla_lui at gva.es (Luis W. Sevilla)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDALCreate with JPEG
In-Reply-To: <931f8ea90512022025t4d5cfed9w9cbcbcc08650f036@mail.gmail.com>
References: <200512021231.05700.brodin_ign@gva.es>
	<931f8ea90512022025t4d5cfed9w9cbcbcc08650f036@mail.gmail.com>
Message-ID: <43916237.2040007@gva.es>

Hi Frank,
as you maybe know allready I'm working with Nacho on this,
Frank Warmerdam wrote:

>On 12/2/05, Nacho Brodin <brodin_ign@gva.es> wrote:
>  
>
>>Hello,
>>I'm having problems with the function GDALCreate using the JPEG driver however
>>GDALCreateCopy works correctly, I can create jpg images with this function.
>>With GTiff driver GDALCreate works well.
>>The error message that GDALCreate show is
>>ERROR 6: GDALDriver::Create() ... no create method implemented for this
>>format.
>>If I execute "gdal_translate --help" it shows the driver list with output
>>support and this list includes JPEG format.
>>
>>I think that this is a JPEG driver normal behavior but I am not just exporting
>>an existing file to a new jpg file. Any suggestion?
>>    
>>
>
>Nacho,
>
>Unfortunately for many formats it is difficult to support the
>Create() method because the formats have pretty strict
>rules about the order things are written and it is hard to
>enforce that when the Create() method is used.
>  
>
We gessed that it works on that way,

>Those formats are sometimes referred to as CreateCopy()
>only formats, and they include JPEG.  For these formats, you
>can only create them with GDALCreateCopy(), meaning you need
>some sort of input image even if it is a memory data, or a
>virtual file.  For modest sized images, I would suggest you
>just go through the Create() process using the MEM driver
>(all in memory), and then do a CreateCopy() to JPEG from
>that.
>
>For big images either create a temporary file (in TIFF or
>.img format for instance) or look into creating a virtual file
>allowing you to provide the image data as it is requested by
>the driver.  The virtual method is the most complex option.
>  
>
As this will be on the bottom of gvSIG 'save to raster' tool, by 
definition we've
no limit about the size of the raster. Someone may want to save an image of
30000x20000 px if it makes sense for him. Seing that jpeg seemed to work 
only
with CreateCopy() (as you've confirmed right now) we thinked on write a
indirect saver, using a temporary files (raw). If img it's best suited 
for this will
use this format.

Thanks for your always valuable support

-- 
  Luis W. Sevilla
  Responsable de desarrollo gvSIG en la / gvSIG development Chief at
  Conselleria de Infraestructuras y Transporte
  Generalitat Valenciana
  Valencia - Spain
  http://www.gvsig.gva.es


From craig.miller at spatialminds.com  Sat Dec  3 14:03:35 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <043201c5f7d3$c6b5f1e0$9b02a8c0@DellWork>
Message-ID: <001901c5f83c$436cb0d0$0401a8c0@vaio>

The application was ogrinfo, and the library was ogr.  Does ogrinfo work in
your setup?  If not, perhaps the problem is that ogrinfo is not honoring the
nmake.opt options and is being built w/o the /MDd flag?

--Craig
 

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ben Discoe
Sent: Friday, December 02, 2005 10:36 PM
To: 'Gdal-Dev'
Subject: RE: [Gdal-dev] Free OGRGeometry?

Craig,

In case it helps, i have always built both my application and GDAL with /MDd
for Debug, and they are harmonious.

For release, i build all with /MD.  Again, since they are the same, they get
along.

ASSERT failures generally result when the Runtime Library is mismatched.

-Ben

> -----Original Message-----
> From: Frank Warmerdam
> Sent: Friday, December 02, 2005 6:40 PM
> To: Craig Miller
> Cc: Gdal-Dev
> 
> On 12/1/05, Craig Miller wrote:
> > After defining /MDd for GDAL I am getting assertions about improper 
> > use of the heap. [..]
> 
> I can't say that I have actually built with /MDd on win32, though if 
> it provides a bunch of runtime heap debugging support it might be a 
> very good idea.

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From cb at delta-h.de  Fri Dec  2 10:39:30 2005
From: cb at delta-h.de (Chris)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] colortable: unwanted increase of colors
Message-ID: <43906AB2.2@delta-h.de>

Hello!

When I use gdal to copy an existing .tif file, which has two colors in 
it's colortable, the copy gets 256 colors, which has the nasty 
side-effect of larger files and slower performance (while displaying the 
file in my app).

How can I save a copy with exactly the same colortable as my original file?

Attached you find the method I use, stripped to the minimum.

Thanks in advance!

Chris

---8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<-------8<----

void SaveAs(const std::string& origFile, const std::string& fname)
{
    GDALAllRegister();
    GDALDataset  *poDataset = (GDALDataset *) GDALOpen( 
origFile.c_str(), GA_ReadOnly );

    GDALDataset* poDstDS =
        poDataset->GetDriver()->CreateCopy(
                fname.c_str(),
                poDataset,
                FALSE,
                NULL,
                GDALTermProgress,
                NULL);
    delete poDstDS;
}



From antonin.orlik.hgf at vsb.cz  Fri Dec  2 17:13:23 2005
From: antonin.orlik.hgf at vsb.cz (Antonin Orlik)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Coordinates transformation - Proj4, GDAL, OGR, PostGIS,
	MapServer
Message-ID: <4390C703.3030105@vsb.cz>

Dear developers,

I'm not sure who is responsible for the problem that I'm going to 
describe. This problem is very serious for me and for a lot of other 
people who are trying to use Open Source GIS software (especially in the 
Czech republic).

1.
Library PROJ.4 has (next to the "*proj*" program) also program "*cs2cs*" 
("/The new *cs2cs* program performs a similar function to the *proj* 
program, but transforming from any one coordinate system to another. The 
new *pj_transform()* is used to access the extended coordinate system to 
coordinate system transformation with datum shifting/."). This program 
is a great thing, but unfortunately it looks like just a few GIS 
programs are using *cs2cs* instead of the *proj* program. For example, 
there is no problem with the coordinate transformation used in the 
PostGIS (which probably uses *cs2cs*). However,  the utilities of the 
*GDAL* and the *OGR* library, which are a base for a lot of other 
applications (MapServer, QGIS and so on), are probably using the *proj* 
program for coordinate transformations. This fact makes quite a big 
position shift after the coordinate transformation between coordinate 
systems based on diferent ellipsoids (*proj* program cannot make datum 
shifting). Finally, it is not possible to transform data correctly or to 
display more datasets based on different ellipsoids in a detailed view 
by the way of on-the-fly projection (the shift between elipsoids is 
often bigger than 100 meters).

Does somebody have any ideas? Is possible to make changes in the GDAL 
and OGR source codes and use the *cs2cs* instead of the *proj* program?


2.
(probably to Frank Warmerdam)
In the Czech Republic we are using a strange coordinate system known as 
"krovak" (S-JTSK). This system has a strange axis orientation that is 
very hard to apply in the computer world, so nobody is using this axis 
orientation in GIS. Instead everybody is using switched axis ( X = -y, Y 
= -x ). If somebody would like to use proj.4 library, they have to use a 
patch for proj.4 library ( 
http://mpa.itc.it/radim/jtsk/PJ_krovak.c.patch ). For a lot of people it 
is very hard to apply this patch because they are just users who want to 
use an open source GIS software that uses proj.4 library. I can remember 
that this problem was discused by Radim Blazek and Frank Warmerdam but 
no successfull result were found... I think.

Is there any possibility to include this patch into an official version 
of proj.4 library? Or in the case that you want to keep this a 
"well-defined" krovak system, is possible to make a new definition of 
krovak with a different EPSG code (and keep the old one (esri:102065) in 
case there is an individual person who is using this definition)?


These two problems are major for a lot of people that I know and these 
are two of the main reasons why they are not going to use open source 
GIS software (and that is pity of course)...


Thank you for feedback.

Best regards,
Antonin Orlik

-- 
Ing. Antonin Orlik
Institute of Geoinformatics
VSB-Technical University of Ostrava
17.listopadu 15/2172
708 33 Ostrava-Poruba

E-mail: antonin.orlik.hgf@vsb.cz
Office: J 327
Tel: +420 59 732 3337
Mobile: +420 604 333 744
ICQ: 54928537

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051202/03ae966d/attachment.html
From rec at geodesign.com.br  Sat Dec  3 18:09:50 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL_MERGE Memory Error
In-Reply-To: <931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.co
 m>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
Message-ID: <6.2.1.2.0.20051203210627.0429ec30@mailhost.geodesign.com.br>

Frank,

Thanks.  It worked.

Also, I would like to ask if you have benchmarks on gdal/FWTools when 
compiled on 64-bit machines vs. the 32-bit.  What about when compiled and 
running on Windows XP 64-bit vs. Fecora Core 4 X64?

Thanks again.

Reinaldo

At 07:27 PM 12/2/2005, Frank Warmerdam wrote:
>On 12/2/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> >  Hello everyone,
> >
> >  I'm running gdal_merge.py and get the following memory allocation error
> > when using the -n 0 flag:
> >
> >  Traceback (most recent call last):
> >    File "gdal_merge.py", line 478, in ?
> >      fi.copy_into( t_fh, band, band, nodata )
> >    File "gdal_merge.py", line 288, in copy_into
> >      nodata_arg )
> >    File "gdal_merge.py", line 110, in raster_copy
> >      nodata )
> >    File "gdal_merge.py", line 147, in raster_copy_with_nodata
> >      nodata_test = Numeric.equal(data_src,nodata)
> >  MemoryError: can't allocate memory for array
> >
> >  I run the program twice using the same input datasets when making a mosaic
> > to extract two images with the -n 0 flag.  I get one image out. However, I
> > get the above error when trying to get the second image out.  I get the 
> same
> > error when trying to do the same operation on other inputs.  The output
> > images are all the same size about 500 MB.
> >
> >  I'm running gdal_merge.py on a AMD 64-bit machine with 4 GB of RAM and 
> lots
> > of disk space.
>
>Reinaldo,
>
>I suspect that the 32bit FWTools binaries are not able
>to utiltize your RAM effectively.  I suspect a 1 or 2GB
>limit per process.  I would suggest instead that you
>use gdal_merge.py to create the mosaic file, and then
>use gdalwarp to merge in each file to the mosaic.   It
>does not attempt to load whole images into RAM.
>
>Best regards,
>
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent

Reinaldo Escada Chohfi, Ph.D.
Diretor
GeoDesign Internacional

www.geodesign.com.br

E-mail: rec@geodesign.com.br

Tel./Fax: 0-XX-12-3153-5115 (Local)
       55-12-3153-5115 (Intl.)

Intelig?ncia e Tecnologia Espacial de Ponta

Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
Sensoriamento Remoto: Imagens de Sat?lites

Compress?o de Imagens e Documentos Escanerizados
Servidor de Conte?do - Integra??o de Sistemas

Revendedor Autorizado da LizardTech no Brasil

Vila Peralta, 42
12607-040 - Lorena - SP - Brasil

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2005 GeoDesign Internacional
Todos os direitos reservados.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051203/2f5bb9fb/attachment.html
From warmerdam at pobox.com  Sat Dec  3 18:16:48 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL_MERGE Memory Error
In-Reply-To: <6.2.1.2.0.20051203210627.0429ec30@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
	<6.2.1.2.0.20051203210627.0429ec30@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512031516r7101c91eo639948dff9df116c@mail.gmail.com>

On 12/3/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
>  Frank,
>
>  Thanks.  It worked.
>
>  Also, I would like to ask if you have benchmarks on gdal/FWTools when
> compiled on 64-bit machines vs. the 32-bit.  What about when compiled and
> running on Windows XP 64-bit vs. Fecora Core 4 X64?

Reinaldo,

No, I don't have any such benchmarks.  In fact, I have
no GDAL/FWTools benchmarks at all!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Dec  3 18:47:07 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] colortable: unwanted increase of colors
In-Reply-To: <43906AB2.2@delta-h.de>
References: <43906AB2.2@delta-h.de>
Message-ID: <931f8ea90512031547s4270af44j27ade6d05619d0d@mail.gmail.com>

On 12/2/05, Chris <cb@delta-h.de> wrote:
> Hello!
>
> When I use gdal to copy an existing .tif file, which has two colors in
> it's colortable, the copy gets 256 colors, which has the nasty
> side-effect of larger files and slower performance (while displaying the
> file in my app).
>
> How can I save a copy with exactly the same colortable as my original file?
>
> Attached you find the method I use, stripped to the minimum.

Chris,

I suspect the problem is that the GDAL data model does not
support a "1bit" band type.  So 1 bit TIFF files are expanded
to 8bit during reading - and thus appear that way in the output
file.   I deliberately avoided supporting partial byte datatypes
in GDAL because of how much they complicate alot of data
manipulation.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From martinbrook at ntlworld.com  Sat Dec  3 19:48:39 2005
From: martinbrook at ntlworld.com (martin brook)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Unknown Format
Message-ID: <000001c5f86c$7b462c40$6401a8c0@vgscomputer>

Hi Guys,,

 

I have been playing with Openscenegraph over the last couple of weeks which
builds on gdal in the area of terrain generation.  I have had good success
so far with geotiffs and .dt1 dted files.  I have some more accurate .dtm
elevation files but cannot get gdalinfo to recognise.  Does anyone on the
list recognise the following ascii format?

 

F1 : d:/379000n223000e.img

 

                                               F1

              X               Y                B1

     223000.000      380000.000   30.1399993896484

     223005.000      380000.000   30.1119995117188

     223010.000      380000.000   30.1110000610352

     223015.000      380000.000   30.1350002288818

     223020.000      380000.000   30.1609992980957

     223025.000      380000.000   30.1380004882813

          etc                            etc                     etc

 

 

TTFN Martin

 

 


-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.1.362 / Virus Database: 267.13.11/191 - Release Date: 02/12/2005
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051204/794b5143/attachment.html
From ben at vterrain.org  Sun Dec  4 03:43:16 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <001901c5f83c$436cb0d0$0401a8c0@vaio>
Message-ID: <001701c5f8ae$c5b68bc0$9b02a8c0@DellWork>

> From: Craig Miller [mailto:craig.miller@spatialminds.com] 
> Sent: Saturday, December 03, 2005 9:04 AM
> 
> The application was ogrinfo, and the library was ogr.  Does 
> ogrinfo work in your setup?  If not, perhaps the problem is 
> that ogrinfo is not honoring the nmake.opt options and is 
> being built w/o the /MDd flag?

Craig,

Ogrinfo works great in both Debug and Release.  I don't use nmake.opt; like
many people, i consider command-line development to be a primitive relic of
the 1970s.  As soon each GDAL version is released, you'll find that i post
the MSVC solution/projects for GDAL/OGR to this mailing list.  Those are
harmoniously synchronized by Configuration.

Reminder: http://vterrain.org/dist/gdal131_vc71.zip

You could try to hack the "nmake" stuff to support both Debug and Release,
but it would be terribly complex and error-prone.  I did this myself for the
first couple years, it was always a struggle.

Each release, i have encouraged adoption of the MSVC files as an alternative
to the "nmake" stuff, but to date i don't see any mention of them on
http://www.gdal.org/download.html or http://www.gdal.org/gdal_building.html

Hope that helps,
Ben


From warmerdam at pobox.com  Sun Dec  4 10:06:05 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Free OGRGeometry?
In-Reply-To: <001701c5f8ae$c5b68bc0$9b02a8c0@DellWork>
References: <001901c5f83c$436cb0d0$0401a8c0@vaio>
	<001701c5f8ae$c5b68bc0$9b02a8c0@DellWork>
Message-ID: <931f8ea90512040706u671d8af8mfd04bef46e6a0245@mail.gmail.com>

On 12/4/05, Ben Discoe <ben@vterrain.org> wrote:
> Craig,
>
> Ogrinfo works great in both Debug and Release.  I don't use nmake.opt; like
> many people, i consider command-line development to be a primitive relic of
> the 1970s.  As soon each GDAL version is released, you'll find that i post
> the MSVC solution/projects for GDAL/OGR to this mailing list.  Those are
> harmoniously synchronized by Configuration.
>
> Reminder: http://vterrain.org/dist/gdal131_vc71.zip
>
> You could try to hack the "nmake" stuff to support both Debug and Release,
> but it would be terribly complex and error-prone.  I did this myself for the
> first couple years, it was always a struggle.
>
> Each release, i have encouraged adoption of the MSVC files as an alternative
> to the "nmake" stuff, but to date i don't see any mention of them on
> http://www.gdal.org/download.html or http://www.gdal.org/gdal_building.html

Ben,

If you would be willing to make up an explanation web page
at a constant address with links to the solution zip files for
each version, I would be thrilled to put a link on the download,
and build pages for GDAL.

But from my end, it is error prone to need to update things
for each release.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From awaxman at speakeasy.net  Mon Dec  5 00:33:37 2005
From: awaxman at speakeasy.net (awaxman@speakeasy.net)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] GDAL with perl on Win32
Message-ID: <W6046723479207531133760817@webmail2>

Hi all,
Does anyone have experience with the SWIG binding for perl on a Win32 system.  I am unable to get the makefile_gdal makefile to compile using Visual Studio 6. Am I missing a switch when I run Makefile.pl?  Do I need cygwin?
Thanks,
Andy 




From potts at cfl.rr.com  Mon Dec  5 09:41:28 2005
From: potts at cfl.rr.com (Garrett Potts)
Date: Wed Nov 21 11:49:53 2007
Subject: [Gdal-dev] Setting Min/Max/Null raster values on output
In-Reply-To: <W6046723479207531133760817@webmail2>
References: <W6046723479207531133760817@webmail2>
Message-ID: <3E8F27EC-7E5A-441E-8D12-2709EC1BDF61@cfl.rr.com>

Hello All:

I see on the writing side I can specify no data values (or NULL)  for  
each band but is there a way to specify the min max value for each  
band as well?  I use the GetRasterMinimum and Maximum when reading  
but I don't see a corresponding Set function.


Take care all and thank you for any insight


Garrett

From tech_dev at wildintellect.com  Mon Dec  5 14:26:56 2005
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
Message-ID: <43949480.2000900@wildintellect.com>

Goal: Append two shapefiles together. One of the shapefiles has 2 
additional fields(shp2).

Current attempt to get ogr2ogr to work on the commandline as an interem 
solution fails. I can't seem to get the syntax right;
ogr2ogr -update -append -f "ESRI Shapefile" 
"C:\Boxes\sandbox\one\shp1.shp" "C:\Boxes\sandbox\two\shp2.shp"
Fails to create file
Fails to open Shapefile

ogr2ogr -update -append "C:\Boxes\sandbox\three\rapix3.shp" 
"C:\Boxes\sandbox\two\rapix2.shp" -nln "C:\Boxes\sandbox\three\rapix3" 
"C:\Boxes\sandbox\two\rapix2"
Exits with no error, but doesn't do anything either.

Preferable solution is to hook into a python module in the FWtools or 
GDAL but I haven't figured out how to import ogr.py yet it since import 
gdal returns an error Numeric not found and I havne't quite fiqured out 
how to import from the FWtools, I tried copying the pymod folder to my 
sites-packages but I guess that doesn't work because there's no 
__init__.py, maybe I should just make one?

Thanks,
Alex

PS: Everything must work on a windows machine, the only compilers I have 
access to are Cygwin & MinGW not that I know how work them right.

From ed at topozone.com  Mon Dec  5 15:19:12 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD63C@ptolemy.topozone.com>

Alex -

The "2 additional fields" means that the DBF file (attributes) has two
columns in one file that aren't in the other.  The DBF file can be
edited by itself using any DBF editor (Microsoft Excel will work on
Windows).  Add two columns to the "short" DBF file and save the edited
version.  You should then have two matching shapefiles that you can
concatenate.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Alex Mandel
Sent: Monday, December 05, 2005 2:27 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Append two shapefiles

Goal: Append two shapefiles together. One of the shapefiles has 2
additional fields(shp2).

Current attempt to get ogr2ogr to work on the commandline as an interem
solution fails. I can't seem to get the syntax right; ogr2ogr -update
-append -f "ESRI Shapefile" 
"C:\Boxes\sandbox\one\shp1.shp" "C:\Boxes\sandbox\two\shp2.shp"
Fails to create file
Fails to open Shapefile

ogr2ogr -update -append "C:\Boxes\sandbox\three\rapix3.shp" 
"C:\Boxes\sandbox\two\rapix2.shp" -nln "C:\Boxes\sandbox\three\rapix3" 
"C:\Boxes\sandbox\two\rapix2"
Exits with no error, but doesn't do anything either.

Preferable solution is to hook into a python module in the FWtools or
GDAL but I haven't figured out how to import ogr.py yet it since import
gdal returns an error Numeric not found and I havne't quite fiqured out
how to import from the FWtools, I tried copying the pymod folder to my
sites-packages but I guess that doesn't work because there's no
__init__.py, maybe I should just make one?

Thanks,
Alex

PS: Everything must work on a windows machine, the only compilers I have
access to are Cygwin & MinGW not that I know how work them right.
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From tech_dev at wildintellect.com  Mon Dec  5 15:29:13 2005
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
In-Reply-To: <4BF377919225F449BB097CB76FFE9BC83DD63C@ptolemy.topozone.com>
References: <4BF377919225F449BB097CB76FFE9BC83DD63C@ptolemy.topozone.com>
Message-ID: <4394A319.7030604@wildintellect.com>

Ed McNierney wrote:
> Alex -
> 
> The "2 additional fields" means that the DBF file (attributes) has two
> columns in one file that aren't in the other.  The DBF file can be
> edited by itself using any DBF editor (Microsoft Excel will work on
> Windows).  Add two columns to the "short" DBF file and save the edited
> version.  You should then have two matching shapefiles that you can
> concatenate.
> 
> 	- Ed
> 
> Ed McNierney
> President and Chief Mapmaker
> TopoZone.com / Maps a la carte, Inc.
> 73 Princeton Street, Suite 305
> North Chelmsford, MA  01863
> ed@topozone.com
> (978) 251-4242  
> 

> Goal: Append two shapefiles together. One of the shapefiles has 2
> additional fields(shp2).
> 
 > Preferable solution is to hook into a python module in the FWtools or
 > GDAL but I haven't figured out how to import ogr.py yet it since import
 > gdal returns an error Numeric not found and I havne't quite fiqured out
 > how to import from the FWtools, I tried copying the pymod folder to my
 > sites-packages but I guess that doesn't work because there's no
 > __init__.py, maybe I should just make one?

Well yes, that works for one file. But I'm trying to write a program 
that does this for the user automatically. I was under the impression 
that the append could work and it would by default only copy fields that 
are the same.

But copying the aspatial data isn't really the issue, I've manually done 
this with dbflib from shapelib. I just can't figure out how to copy my 
points so that it's a valid shapefile.

On that note I just tried to append two shapefiles that have identical 
fields and ogr2ogr.exe after looking like it was working crashed and 
produced a windows error log.
 >ogr2ogr -update -append -f "ESRI Shapefile" two.shp one.shp -nln two one

The program exits with a windows error ModName: gdal_fw.dll 
ModVer:1.3.1.0 Offset:005656d0

If anyone wants the log, I can send it direct.

Thanks - Alex

From dylan.beaudette at gmail.com  Mon Dec  5 20:10:24 2005
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
In-Reply-To: <43949480.2000900@wildintellect.com>
References: <43949480.2000900@wildintellect.com>
Message-ID: <200512051710.24986.dylan.beaudette@gmail.com>

hi Alex!

didn't know you were lurking here!

welcome the GDAL land --

lots of good stuff here.


here is how i do it:

ogr2ogr -update -append $merge_file $this_file_to_append -nln $merge_layer 
$this_file_to_append_layer

where the 2nd set of 'layers' are missing the '.shp' suffix.

cheers,

Dylan

On Monday 05 December 2005 11:26 am, Alex Mandel wrote:
> Goal: Append two shapefiles together. One of the shapefiles has 2
> additional fields(shp2).
>
> Current attempt to get ogr2ogr to work on the commandline as an interem
> solution fails. I can't seem to get the syntax right;
> ogr2ogr -update -append -f "ESRI Shapefile"
> "C:\Boxes\sandbox\one\shp1.shp" "C:\Boxes\sandbox\two\shp2.shp"
> Fails to create file
> Fails to open Shapefile
>
> ogr2ogr -update -append "C:\Boxes\sandbox\three\rapix3.shp"
> "C:\Boxes\sandbox\two\rapix2.shp" -nln "C:\Boxes\sandbox\three\rapix3"
> "C:\Boxes\sandbox\two\rapix2"
> Exits with no error, but doesn't do anything either.
>
> Preferable solution is to hook into a python module in the FWtools or
> GDAL but I haven't figured out how to import ogr.py yet it since import
> gdal returns an error Numeric not found and I havne't quite fiqured out
> how to import from the FWtools, I tried copying the pymod folder to my
> sites-packages but I guess that doesn't work because there's no
> __init__.py, maybe I should just make one?
>
> Thanks,
> Alex
>
> PS: Everything must work on a windows machine, the only compilers I have
> access to are Cygwin & MinGW not that I know how work them right.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From tech_dev at wildintellect.com  Mon Dec  5 20:49:30 2005
From: tech_dev at wildintellect.com (Alex Mandel)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
In-Reply-To: <200512051710.24986.dylan.beaudette@gmail.com>
References: <43949480.2000900@wildintellect.com>
	<200512051710.24986.dylan.beaudette@gmail.com>
Message-ID: <4394EE2A.1000307@wildintellect.com>

Thanks Dylan -
I was putting full paths for the layers and using the -f, and for this 
time I also switched my slashes \ to / and it works great now.

The next questions is how can I get just the ogr2ogr component into my 
program. I need to distribute a very thin and lite python program and 
can't expect my users to have FWtools.

Ironically I think I'm one error away from writing a python module with 
gdal to do what I want, which would save me a ton of MB and give me 
control to copy only certain points.

There's something wrong with the geometry line though. boa says that 
feat2.SetGeometry(pnt) has invalid syntax
Anyone see my mistake right away, I figure it's something obvious that I 
just haven't learned yet. Keep in mind I'm only dealing with points, and 
will never need to handle any other geometry type.

Thanks Everyone - Alex
---------------------------------------

import gdal
import gdal.ogr as ogr

#Set ESRI Shapefile driver just in case
driver = ogr.GetDriverByName('ESRI Shapefile')
#Bring in 1st Shapefile, src
ds1 = driver.Open("C:/Boxes/sandbox/one/one.shp")
pLayer1 = ds1.GetLayer(0)
#initialize first feature read
feat = pLayer1.GetNextFeature()

#Bring in 2nd Shapefile, dest
ds2 = driver.Open("C:/Boxes/sandbox/two/two.shp")
pLayer2 = ds2.GetLayer(0)

#Count the numnber of fields
layerDef2 = pLayer2.GetLayerDefn()
field_count = layerDef.GetFieldCount()

#Create index of fields to copy
fld_list = {}

for i in range(layerDef2.GetFieldCount()):
     field = layerDef.GetFieldDefn(i)
     fld_list[field.GetName()] = i

while feat is not None:

     multi_geom = feat.GetGeometryRef()

     for i in range(multi_geom.GetGeometryCount()):
         pnt = multi_geom.GetGeometryRef(i)

         feat2 = ogr.Feature(feature_def=layerDef2)
#Copy Feature table data
         for fld_index in range(field_count):
             fld_name = layerDef.GetFieldDefn(fld_index)
             #if fld_list.has_key(fld_name.GetName()):
             feat2.SetField(fld_index, \
feat.GetField(fld_list.get(fld_name))

#Paste into destination
         feat2.SetGeometry(pnt)
         pLayer2.CreateFeature(feat2)
         feat2.Destroy()

#Clean up and iterate 	
	feat.Destroy()
	feat = pLayer1.GetNextFeature()


----------------------------------------

Dylan Beaudette wrote:
 > hi Alex!
 >
 > didn't know you were lurking here!
 >
 > welcome the GDAL land --
 >
 > lots of good stuff here.
 >
 >
 > here is how i do it:
 >
 > ogr2ogr -update -append $merge_file $this_file_to_append -nln 
$merge_layer
 > $this_file_to_append_layer
 >
 > where the 2nd set of 'layers' are missing the '.shp' suffix.
 >
 > cheers,
 >
 > Dylan
 >



From starged at videotron.ca  Tue Dec  6 00:37:20 2005
From: starged at videotron.ca (Mario Beauchamp)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
In-Reply-To: <4394EE2A.1000307@wildintellect.com>
References: <43949480.2000900@wildintellect.com>
	<200512051710.24986.dylan.beaudette@gmail.com>
	<4394EE2A.1000307@wildintellect.com>
Message-ID: <43952390.9020103@videotron.ca>

Hi Alex,

Alex Mandel wrote:
> 
> There's something wrong with the geometry line though. boa says that
> feat2.SetGeometry(pnt) has invalid syntax
> #Copy Feature table data
>         for fld_index in range(field_count):
>             fld_name = layerDef.GetFieldDefn(fld_index)
>             #if fld_list.has_key(fld_name.GetName()):
>             feat2.SetField(fld_index, \
> feat.GetField(fld_list.get(fld_name))

You're missing a ")" here             ^ :)

Bye
--
Mario B.


From luca.casagrande at gmail.com  Tue Dec  6 05:22:55 2005
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem with Gdal-grass driver...
Message-ID: <200512061022.55779.luca.casagrande@gmail.com>

Hi guys!

I am installing gdal-grass-1.3.1 compiling them from scratch; i used this 
lines:

./configure --with-gdal=/usr/bin/gdal-config --with-grass=/usr/grass60
make
make install (root)

The configuring and making are fine,but during the install, got this error:

[...]
install -d /usr/lib/gdalplugins
cp gdal_GRASS.so /usr/lib/gdalplugins
cp: cannot stat `gdal_GRASS.so': No such file or directory
make: *** [install] Error 1


I am using grass 6.0 and gdal-1.3.1

Thx for all

Luca

From nekewong at yahoo.com  Tue Dec  6 04:26:47 2005
From: nekewong at yahoo.com (Jimmy Wang)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem using gdal_translate
Message-ID: <20051206092647.97577.qmail@web36407.mail.mud.yahoo.com>

  Hi all,
  I use global mapper to generate a 24bit RGB .tif file from a USGS DEM demdata.dem, but I found that the .tif file has a odd coordinate.
   
  gdalinfo  demdata.dem:
  Driver: USGSDEM/USGS Optional ASCII DEM (and CDED)
Size is 1201, 1201
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.257223563,
            AUTHORITY["EPSG","7030"]],
        TOWGS84[0,0,0,0,0,0,0],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0,
        AUTHORITY["EPSG","8901"]],
    UNIT["degree",0.0174532925199433,
        AUTHORITY["EPSG","9108"]],
    AXIS["Lat",NORTH],
    AXIS["Long",EAST],
    AUTHORITY["EPSG","4326"]]
Origin = (110.999583,31.000417)
Pixel Size = (0.00083333,-0.00083333)
Metadata:
  AREA_OR_POINT=Point
Corner Coordinates:
Upper Left  ( 110.9995833,  31.0004167) (110d59'58.50"E, 31d 0'1.50"N)
Lower Left  ( 110.9995833,  29.9995833) (110d59'58.50"E, 29d59'58.50"N)
Upper Right ( 112.0004167,  31.0004167) (112d 0'1.50"E, 31d 0'1.50"N)
Lower Right ( 112.0004167,  29.9995833) (112d 0'1.50"E, 29d59'58.50"N)
Center      ( 111.5000000,  30.5000000) (111d30'0.00"E, 30d30'0.00"N)
Band 1 Block=1201x1201 Type=Int16, ColorInterp=Undefined
  NoData Value=-32767
  Unit Type: m
  
gdalinfo tiffile.tif:
  
Driver: GTiff/GeoTIFF
Size is 1201, 1201
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["arc-second",4.848136811095357e-006],
    AUTHORITY["EPSG","4326"]]
Origin = (399598.500000,111601.500000)
Pixel Size = (3.00000000,-3.00000000)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  399598.500,  111601.500) (399598d30'0.00"E,111601d30'0.00"N)
Lower Left  (  399598.500,  107998.500) (399598d30'0.00"E,107998d30'0.00"N)
Upper Right (  403201.500,  111601.500) (403201d30'0.00"E,111601d30'0.00"N)
Lower Right (  403201.500,  107998.500) (403201d30'0.00"E,107998d30'0.00"N)
Center      (  401400.000,  109800.000) (401400d 0'0.00"E,109800d 0'0.00"N)
Band 1 Block=1201x1 Type=Byte, ColorInterp=Red
Band 2 Block=1201x1 Type=Byte, ColorInterp=Green
Band 3 Block=1201x1 Type=Byte, ColorInterp=Blue

   
  My question is that how can I use gdal_translate to generate a 24bit RGB .tif file from the DEM in the same area.
   
  Thanks for your help!
   
  Jimmy



		
---------------------------------
 Yahoo! Personals
 Let fate take it's course directly to your email.
 See who's waiting for you Yahoo! Personals
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051206/8cef1be0/attachment.html
From skotea at gmail.com  Tue Dec  6 08:50:41 2005
From: skotea at gmail.com (skotea@gmail.com)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compiling gdal-1.3.1 with Visual C++ 2005 Express
	Edition ?
Message-ID: <12ba1a4a0512060550t45ce78fbr@mail.gmail.com>

Hi people !

I've tried to build gdal-1.3.1 under Visual C++ 2005 Express Edition
and it failed.
Someone can help me please (newbie inside) ?
Is there any other way to compil gdal-1.3.1 without using MS VC++ 6.x
and MS Visual Studio .NET (C++) as specified here
http://gdal.maptools.org/gdal_building.htmlWindows (I prefer not to
buy these software for only one use) ?
Thanks in advance, people.
skotea


PS : here are the errors written on the commande prompt :
.../...
ogrsf_frmts.lib(parsexsd.obj) : warning LNK4221: no public symbols found; archiv
e member will be inaccessible
        link /dll /debug /INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate
 /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:_OGR_G_GetPointCount  /INCLUDE:_OGR
RegisterAll /INCLUDE:_GDALSimpleImageWarp@36  /INCLUDE:_GDALReprojectImage@48  /
INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  /INCLUDE:_v
bSafeArrayToPtr@16  /INCLUDE:_OCTNewCoordinateTransformation@8 port\*.obj gcore\
*.obj alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib ogr\ogr.lib vb6\vb
6_support.obj      odbc32.lib                       gcore\Version.res  /out:gdal
13.dll /implib:gdal_i.lib
Microsoft (R) Incremental Linker Version 8.00.50727.42
Copyright (C) Microsoft Corporation.  All rights reserved.


LINK : fatal error LNK1104: cannot open file 'odbc32.lib'
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 8\VC\BIN\l
ink.EXE"' : return code '0x450'
Stop.


From dylan.beaudette at gmail.com  Tue Dec  6 13:20:22 2005
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Append two shapefiles
In-Reply-To: <4394EE2A.1000307@wildintellect.com>
References: <43949480.2000900@wildintellect.com>
	<200512051710.24986.dylan.beaudette@gmail.com>
	<4394EE2A.1000307@wildintellect.com>
Message-ID: <200512061020.22232.dylan.beaudette@gmail.com>

Hi Alex,

You might want to talk to Howard Butler about that- he seems to be doing a lot 
of work on Python-GDAL stuff in windows.

Good luck,

Dylan

On Monday 05 December 2005 05:49 pm, Alex Mandel wrote:
> Thanks Dylan -
> I was putting full paths for the layers and using the -f, and for this
> time I also switched my slashes \ to / and it works great now.
>
> The next questions is how can I get just the ogr2ogr component into my
> program. I need to distribute a very thin and lite python program and
> can't expect my users to have FWtools.
>
> Ironically I think I'm one error away from writing a python module with
> gdal to do what I want, which would save me a ton of MB and give me
> control to copy only certain points.
>
> There's something wrong with the geometry line though. boa says that
> feat2.SetGeometry(pnt) has invalid syntax
> Anyone see my mistake right away, I figure it's something obvious that I
> just haven't learned yet. Keep in mind I'm only dealing with points, and
> will never need to handle any other geometry type.
>
> Thanks Everyone - Alex
> ---------------------------------------
>
> import gdal
> import gdal.ogr as ogr
>
> #Set ESRI Shapefile driver just in case
> driver = ogr.GetDriverByName('ESRI Shapefile')
> #Bring in 1st Shapefile, src
> ds1 = driver.Open("C:/Boxes/sandbox/one/one.shp")
> pLayer1 = ds1.GetLayer(0)
> #initialize first feature read
> feat = pLayer1.GetNextFeature()
>
> #Bring in 2nd Shapefile, dest
> ds2 = driver.Open("C:/Boxes/sandbox/two/two.shp")
> pLayer2 = ds2.GetLayer(0)
>
> #Count the numnber of fields
> layerDef2 = pLayer2.GetLayerDefn()
> field_count = layerDef.GetFieldCount()
>
> #Create index of fields to copy
> fld_list = {}
>
> for i in range(layerDef2.GetFieldCount()):
>      field = layerDef.GetFieldDefn(i)
>      fld_list[field.GetName()] = i
>
> while feat is not None:
>
>      multi_geom = feat.GetGeometryRef()
>
>      for i in range(multi_geom.GetGeometryCount()):
>          pnt = multi_geom.GetGeometryRef(i)
>
>          feat2 = ogr.Feature(feature_def=layerDef2)
> #Copy Feature table data
>          for fld_index in range(field_count):
>              fld_name = layerDef.GetFieldDefn(fld_index)
>              #if fld_list.has_key(fld_name.GetName()):
>              feat2.SetField(fld_index, \
> feat.GetField(fld_list.get(fld_name))
>
> #Paste into destination
>          feat2.SetGeometry(pnt)
>          pLayer2.CreateFeature(feat2)
>          feat2.Destroy()
>
> #Clean up and iterate
> 	feat.Destroy()
> 	feat = pLayer1.GetNextFeature()
>
>
> ----------------------------------------
>
> Dylan Beaudette wrote:
>  > hi Alex!
>  >
>  > didn't know you were lurking here!
>  >
>  > welcome the GDAL land --
>  >
>  > lots of good stuff here.
>  >
>  >
>  > here is how i do it:
>  >
>  > ogr2ogr -update -append $merge_file $this_file_to_append -nln
>
> $merge_layer
>
>  > $this_file_to_append_layer
>  >
>  > where the 2nd set of 'layers' are missing the '.shp' suffix.
>  >
>  > cheers,
>  >
>  > Dylan

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From warmerdam at pobox.com  Tue Dec  6 13:50:07 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compiling gdal-1.3.1 with Visual C++ 2005 Express
	Edition ?
In-Reply-To: <12ba1a4a0512060550t45ce78fbr@mail.gmail.com>
References: <12ba1a4a0512060550t45ce78fbr@mail.gmail.com>
Message-ID: <931f8ea90512061050x7d8a09e8uc0885bd0f7d193fc@mail.gmail.com>

On 12/6/05, skotea@gmail.com <skotea@gmail.com> wrote:
> Hi people !
>
> I've tried to build gdal-1.3.1 under Visual C++ 2005 Express Edition
> and it failed.
...
> LINK : fatal error LNK1104: cannot open file 'odbc32.lib'
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 8\VC\BIN\l
> ink.EXE"' : return code '0x450'

Well, the problem appears to be that you don't have ODBC
support.  You might either look into whether you can add this
somehow or to disable the requirement in the GDAL build.

I'm surprised that that the include files were available (allowing
things to get this far), but the library isn't.  Perhaps you should
dig around for "odbc*.lib" in the compiler tree.  Alternatively,
perhaps you can download the PlatformSDK or something like
that from Microsoft to get the ODBC component.

If none of that works, you can disable the requirement for ODBC.
It might be sufficient to comment out the ODBC_SUPPORTED=1
line in the nmake.opt file.  I haven't tried this in recent memory
though, so there may be other makefiles and stuff you need to
fiddle with.  It has been a working assumption of mine that odbc
is always available on win32.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Tue Dec  6 17:13:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Setting Min/Max/Null raster values on output
In-Reply-To: <3E8F27EC-7E5A-441E-8D12-2709EC1BDF61@cfl.rr.com>
References: <W6046723479207531133760817@webmail2>
	<3E8F27EC-7E5A-441E-8D12-2709EC1BDF61@cfl.rr.com>
Message-ID: <931f8ea90512061413i4ce7197er86a628442b4b7c9b@mail.gmail.com>

On 12/5/05, Garrett Potts <potts@cfl.rr.com> wrote:
> Hello All:
>
> I see on the writing side I can specify no data values (or NULL)  for
> each band but is there a way to specify the min max value for each
> band as well?  I use the GetRasterMinimum and Maximum when reading
> but I don't see a corresponding Set function.

Garrett,

You are right, there is no way of setting the min/max on destination
raster bands.  In some cases a CreateCopy() might copy it from
the source but generally speaking there is not way to accomplish
what you want.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rec at geodesign.com.br  Wed Dec  7 12:06:21 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Polyconic Projection GeoTiff Keyed Information
Message-ID: <6.2.1.2.0.20051207150147.0294dc38@mailhost.geodesign.com.br>

Hi everyone,

Does anyone know the GeoTiff Keyed Information for Polyconic Projection?
I can only find CT Code (CT_Polyconic = 22) in the Geotiff spec v. 
1.0.  There isn?t a PCS type code or Projection code for it.

Thanks for your help.

Reinaldo



From matt.wilkie at gov.yk.ca  Wed Dec  7 12:37:06 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] using canadian CorMat
Message-ID: <43971DC2.6090302@gov.yk.ca>

Hi Folks,

This is a little bit offtopic for gdal, but maybe someone here can point 
me in the right direction: Natural Resources Canada has a dataset named 
"CorMat", Correctional Matrices, which can be used to correct the shape 
and position of data built against older 1:50k NTDB. What software, if 
any, do you know of which can utilise these correction matrices? Arcinfo 
and Arcmap do not (or I and the ESRI-L mailing list and ESRI Canada 
customer support are missing something :).

The specification says programs exist but is silent on just what the 
names of those programs might be "Some commercial software applications 
can use planimetric correction matrices. A correction algorithm, 
however, is described in Appendix A for users who do not have this type 
of software." -- http://tinyurl.com/avplu

thank you for your thoughts,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Wed Dec  7 13:30:35 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Polyconic Projection GeoTiff Keyed Information
In-Reply-To: <6.2.1.2.0.20051207150147.0294dc38@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051207150147.0294dc38@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512071030w58904ed7x4b606aa0747b7091@mail.gmail.com>

On 12/7/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> Hi everyone,
>
> Does anyone know the GeoTiff Keyed Information for Polyconic Projection?
> I can only find CT Code (CT_Polyconic = 22) in the Geotiff spec v.
> 1.0.  There isn?t a PCS type code or Projection code for it.

Reinaldo,

I have been assuming the polyconic parameters listed at:

  http://geotiff.maptools.org/proj_list/polyconic.html

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sylvain_duclos at yahoo.com  Thu Dec  8 14:16:21 2005
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Ruby/cygwin fix + request for demo :/
Message-ID: <20051208191621.17413.qmail@web30702.mail.mud.yahoo.com>

Hi,

I compiled/link/run gdal on cygwin .. work fine.

Loading gdal.so within 'irb' (w/ require 'gdal/gdal')
failed because it cant find cyggdal-1.dll 

But the error msg is a bit confusing :/

irb(main):001:0> require 'gdal/gdal'
LoadError: No such file or directory -
/usr/lib/ruby/site_ruby/1.8/i386-cygwin/gdal/gdal.so
        from
/usr/lib/ruby/site_ruby/1.8/i386-cygwin/gdal/gdal.so
        from (irb):1
irb(main):002:0>

Putting gdal/.libs/cyggdal-1.dll somewhere in the PATH
or
put /usr/local/bin in PATH fix the problem.



Next,

$ irb
irb(main):001:0> require 'gdal/gdal'
=> true
irb(main):002:0> ???


Then what ! 

I tried various call but I'm getting nowhere ..

I'm basicaly 'cluless at the prompt'.

So, could someone post anything in Ruby that does 
something/anything with gdal/ogr.


Thanks,

Sylvain.

 








__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From matt.wilkie at gov.yk.ca  Thu Dec  8 14:55:29 2005
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Request for CorMat development proposal
In-Reply-To: <43971DC2.6090302@gov.yk.ca>
References: <43971DC2.6090302@gov.yk.ca>
Message-ID: <43988FB1.7090105@gov.yk.ca>

((please forward as appropriate))
Hi Folks,

With regards to "Using canadian CorMat" 
http://lists.maptools.org/pipermail/gdal-dev/2005-December/007348.html
and http://yukongis.ca/bin/view/Main/CorMat

I contacted NRCAN about the commercial programs which were said to work 
with CorMat and was told the documentation is in error, there are no 
known programs which can do the displacement out of the box, though 
"...I'm told FME software can be adapted with the algorithm for 
planimetric correction, but it requires bench mark application and fine 
tuning to obtain identical results."

I invite anyone interested in developing a program to apply the CorMat 
displacement to existing ArcGIS data to contact me with a proposal to do 
so with a time & price estimate.

thank you,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From jgreenberg at arc.nasa.gov  Thu Dec  8 15:28:51 2005
From: jgreenberg at arc.nasa.gov (Jonathan Greenberg)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: [Fwd: Getting large file support on cygwin with
	fseeko/ftello]
In-Reply-To: <4395E071.5040202@ucdavis.edu>
Message-ID: <200512082029.jB8KTI6o008485@duke.maptools.org>

I just want to confirm this works and affirm the need for this: Carlos's mod
does appear to work under cygwin (I was able to compile GDAL successfully
using the small mod) -- Frank, maybe a quick fix is to add a
--with-cygwin-lfs flag or something along those lines to the compilation
options.  All Carlos had to do was change the fseek and ftell calls in the
port/cpl_vsil_unix_stdio_64.cpp to fseeko and ftello.  

Thoughts?

--j

P.S. Anyone at AGU this week?

--

Jonathan A. Greenberg, PhD
NRC Research Associate
NASA Ames Research Center
MS 242-4
Moffett Field, CA 94035-1000
Office: 650-604-5896
Cell: 415-794-5043
AIM: jgrn307
MSN: jgrn307@hotmail.com

-----Original Message-----
From: Carlos A. Rueda [mailto:carueda@ucdavis.edu] 
Sent: Tuesday, December 06, 2005 11:03 AM
To: Jonathan Greenberg
Subject: [Fwd: Getting large file support on cygwin with fseeko/ftello]



-------- Original Message --------
Subject: Getting large file support on cygwin with fseeko/ftello
Date: Mon, 05 Dec 2005 21:53:48 -0800
From: Carlos A. Rueda <carueda@ucdavis.edu>
CC: Frank Warmerdam <warmerdam@pobox.com>
Newsgroups: gmane.comp.gis.gdal.devel

Frank and all,

Today I verified that if you just make GDAL to call fseeko and ftello
instead of the default fseek and ftell functions in
port/cpl_vsil_unix_stdio_64.cpp, then you will get effective large
file support (LFS) under cygwin.

I'm not sure about how portable are the ftello/fseeko calls, but I was
wondering if you guys can *please* update the build process so LFS
gets appropriately enabled when installing GDAL under cygwin. So far
the trick above is the only way we have been able to get LFS under
cygwin, but certainly we (all) would prefer a cleaner way to
accomplish it!

Many thanks.

Carlos



From mgleahy at golden.net  Thu Dec  8 18:07:32 2005
From: mgleahy at golden.net (Mike Leahy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
Message-ID: <4398BCB4.9030504@golden.net>

Hello list,

I'm hoping some of the other users out there that have has success with
this might be able to give me some advice.  I've been trying to compile
GDAL with MinGW/MSYS, and I'm currently running into trouble when the
make process hits tif_jpeg.c.  I've configured GDAL with the following
options:


./configure --prefix=/usr/local --with-jpeg=internal --with-png=internal
--with-tiff=internal --with-libz=internal --with-sqlite=/c/mingw
--without-unix-stdio-64


And I get the following errors when I compile:


In file included from ../../jpeg/libjpeg/jpeglib.h:24,
                 from tif_jpeg.c:75:
../../jpeg/libjpeg/jconfig.h:12:1: warning: "HAVE_STDLIB_H" redefined
In file included from tif_config.h:2,
                 from tiffconf.h:3,
                 from tiff.h:30,
                 from tiffio.h:33,
                 from tiffiop.h:60,
                 from tif_jpeg.c:27:
../../../port/cpl_config.h:75:1: warning: this is the location of the
previous definition
In file included from tif_jpeg.c:75:
../../jpeg/libjpeg/jpeglib.h:94: error: syntax error before "boolean"
../../jpeg/libjpeg/jpeglib.h:94: warning: no semicolon at end of struct
or union
../../jpeg/libjpeg/jpeglib.h:95: warning: type defaults to `int' in
declaration of `JQUANT_TBL'
../../jpeg/libjpeg/jpeglib.h:95: warning: data definition has no type or
storage class
../../jpeg/libjpeg/jpeglib.h:110: error: syntax error before "boolean"
../../jpeg/libjpeg/jpeglib.h:110: warning: no semicolon at end of struct
or union
../../jpeg/libjpeg/jpeglib.h:111: warning: type defaults to `int' in
declaration of `JHUFF_TBL'
../../jpeg/libjpeg/jpeglib.h:111: warning: data definition has no type
or storage class
../../jpeg/libjpeg/jpeglib.h:160: error: syntax error before "boolean"
../../jpeg/libjpeg/jpeglib.h:160: warning: no semicolon at end of struct
or union
../../jpeg/libjpeg/jpeglib.h:175: error: syntax error before '*' token
../../jpeg/libjpeg/jpeglib.h:175: warning: type defaults to `int' in
declaration of `quant_table'
../../jpeg/libjpeg/jpeglib.h:175: warning: data definition has no type
or storage class
../../jpeg/libjpeg/jpeglib.h:179: error: syntax error before '}' token
../../jpeg/libjpeg/jpeglib.h:179: warning: type defaults to `int' in
declaration of `jpeg_component_info'
../../jpeg/libjpeg/jpeglib.h:179: warning: data definition has no type
or storage class
../../jpeg/libjpeg/jpeglib.h:254: error: syntax error before "boolean"
../../jpeg/libjpeg/jpeglib.h:254: warning: no semicolon at end of struct
or union
../../jpeg/libjpeg/jpeglib.h:259: error: syntax error before '}' token
../../jpeg/libjpeg/jpeglib.h:269: error: syntax error before "boolean"
../../jpeg/libjpeg/jpeglib.h:269: warning: no semicolon at end of struct
or union

etc...

I've been digging around, and found some stuff about different ways of
declaring booleans when compiling GDAL with MinGW (e.g., int vs.
unsigned char), but from what I can tell after looking at the code this
seems to have been taken care of already (at least in GDAL-1.3.1).  Is
there be anything else I should try?

Regards,
Mike

From daniel.wallner at bredband.net  Thu Dec  8 19:29:34 2005
From: daniel.wallner at bredband.net (Daniel Wallner)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
Message-ID: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>

Hi,
I just stumbled into this myself a few hours ago :)

The problem is in this file:
frmts/gtiff/libtiff/tif_jpeg.c
Comment out line 69 and 71
(Don't know a clean solution though.)

And unfortunately here too:
(eeek, my bad, I wrote that driver :)
frmts/rik/GNUmakefile
you need to add -I../zlib to the compile options
(Don't know how this is best done either.)

Then you need to add cpl_vsil_win32.o to
port/GNUmakefile too.

That should do it.

And I think you need these options:
./configure --without-unix-stdio-64 --with-sqlite=/c/mingw

Regards,
Daniel

> 
> From: Mike Leahy <mgleahy@golden.net>
> Date: 2005/12/09 fr AM 12:07:32 CET
> To: gdal-dev@lists.maptools.org
> ?mne: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
> 
> Hello list,
> 
> I'm hoping some of the other users out there that have has success with
> this might be able to give me some advice.  I've been trying to compile
> GDAL with MinGW/MSYS, and I'm currently running into trouble when the
> make process hits tif_jpeg.c.  I've configured GDAL with the following
> options:
> 
> 
> ./configure --prefix=/usr/local --with-jpeg=internal --with-png=internal
> --with-tiff=internal --with-libz=internal --with-sqlite=/c/mingw
> --without-unix-stdio-64
> 
> 
> And I get the following errors when I compile:
> 
> 
> In file included from ../../jpeg/libjpeg/jpeglib.h:24,
>                  from tif_jpeg.c:75:
> ../../jpeg/libjpeg/jconfig.h:12:1: warning: "HAVE_STDLIB_H" redefined
> In file included from tif_config.h:2,
>                  from tiffconf.h:3,
>                  from tiff.h:30,
>                  from tiffio.h:33,
>                  from tiffiop.h:60,
>                  from tif_jpeg.c:27:
> ../../../port/cpl_config.h:75:1: warning: this is the location of the
> previous definition
> In file included from tif_jpeg.c:75:
> ../../jpeg/libjpeg/jpeglib.h:94: error: syntax error before "boolean"
> ../../jpeg/libjpeg/jpeglib.h:94: warning: no semicolon at end of struct
> or union
> ../../jpeg/libjpeg/jpeglib.h:95: warning: type defaults to `int' in
> declaration of `JQUANT_TBL'
> ../../jpeg/libjpeg/jpeglib.h:95: warning: data definition has no type or
> storage class
> ../../jpeg/libjpeg/jpeglib.h:110: error: syntax error before "boolean"
> ../../jpeg/libjpeg/jpeglib.h:110: warning: no semicolon at end of struct
> or union
> ../../jpeg/libjpeg/jpeglib.h:111: warning: type defaults to `int' in
> declaration of `JHUFF_TBL'
> ../../jpeg/libjpeg/jpeglib.h:111: warning: data definition has no type
> or storage class
> ../../jpeg/libjpeg/jpeglib.h:160: error: syntax error before "boolean"
> ../../jpeg/libjpeg/jpeglib.h:160: warning: no semicolon at end of struct
> or union
> ../../jpeg/libjpeg/jpeglib.h:175: error: syntax error before '*' token
> ../../jpeg/libjpeg/jpeglib.h:175: warning: type defaults to `int' in
> declaration of `quant_table'
> ../../jpeg/libjpeg/jpeglib.h:175: warning: data definition has no type
> or storage class
> ../../jpeg/libjpeg/jpeglib.h:179: error: syntax error before '}' token
> ../../jpeg/libjpeg/jpeglib.h:179: warning: type defaults to `int' in
> declaration of `jpeg_component_info'
> ../../jpeg/libjpeg/jpeglib.h:179: warning: data definition has no type
> or storage class
> ../../jpeg/libjpeg/jpeglib.h:254: error: syntax error before "boolean"
> ../../jpeg/libjpeg/jpeglib.h:254: warning: no semicolon at end of struct
> or union
> ../../jpeg/libjpeg/jpeglib.h:259: error: syntax error before '}' token
> ../../jpeg/libjpeg/jpeglib.h:269: error: syntax error before "boolean"
> ../../jpeg/libjpeg/jpeglib.h:269: warning: no semicolon at end of struct
> or union
> 
> etc...
> 
> I've been digging around, and found some stuff about different ways of
> declaring booleans when compiling GDAL with MinGW (e.g., int vs.
> unsigned char), but from what I can tell after looking at the code this
> seems to have been taken care of already (at least in GDAL-1.3.1).  Is
> there be anything else I should try?
> 
> Regards,
> Mike
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From mgleahy at golden.net  Thu Dec  8 21:43:38 2005
From: mgleahy at golden.net (Mike Leahy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>
Message-ID: <4398EF5A.8070406@golden.net>

Daniel,

All of your suggestions seem to have worked fine so far.  Thanks for the
help.

However, I now I'm having issues with sqlite:

.libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x1068c3): undefined
reference to `sqlite3_close'
.libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106a63): undefined
reference to `sqlite3_close'
.libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106c03): undefined
reference to `sqlite3_close'
.libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106e1b): undefined
reference to `sqlite3_open'
.libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106e2a): undefined
reference to `sqlite3_errmsg'

<snip>

.libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10a280): undefined
reference to `sqlite3_exec'
.libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10a3c5): undefined
reference to `sqlite3_exec'
.libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10a7ae): more
undefined references to `sqlite3_exec' follow
.libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10aba2): undefined
reference to `sqlite3_free'
collect2: ld returned 1 exit status
make[1]: *** [libgdal.la] Error 1
make[1]: Leaving directory `/Downloads/gdal-1.3.1'
make: *** [check-lib] Error 2

I'll give it another run, and see if it works without sqlite support.

Mike

Daniel Wallner wrote:
> Hi,
> I just stumbled into this myself a few hours ago :)
> 
> The problem is in this file:
> frmts/gtiff/libtiff/tif_jpeg.c
> Comment out line 69 and 71
> (Don't know a clean solution though.)
> 
> And unfortunately here too:
> (eeek, my bad, I wrote that driver :)
> frmts/rik/GNUmakefile
> you need to add -I../zlib to the compile options
> (Don't know how this is best done either.)
> 
> Then you need to add cpl_vsil_win32.o to
> port/GNUmakefile too.
> 
> That should do it.
> 
> And I think you need these options:
> ./configure --without-unix-stdio-64 --with-sqlite=/c/mingw
> 
> Regards,
> Daniel
> 
>> From: Mike Leahy <mgleahy@golden.net>
>> Date: 2005/12/09 fr AM 12:07:32 CET
>> To: gdal-dev@lists.maptools.org
>> ?mne: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
>>
>> Hello list,
>>
>> I'm hoping some of the other users out there that have has success with
>> this might be able to give me some advice.  I've been trying to compile
>> GDAL with MinGW/MSYS, and I'm currently running into trouble when the
>> make process hits tif_jpeg.c.  I've configured GDAL with the following
>> options:
>>
>>
>> ./configure --prefix=/usr/local --with-jpeg=internal --with-png=internal
>> --with-tiff=internal --with-libz=internal --with-sqlite=/c/mingw
>> --without-unix-stdio-64
>>
>>
>> And I get the following errors when I compile:
>>
>>
>> In file included from ../../jpeg/libjpeg/jpeglib.h:24,
>>                  from tif_jpeg.c:75:
>> ../../jpeg/libjpeg/jconfig.h:12:1: warning: "HAVE_STDLIB_H" redefined
>> In file included from tif_config.h:2,
>>                  from tiffconf.h:3,
>>                  from tiff.h:30,
>>                  from tiffio.h:33,
>>                  from tiffiop.h:60,
>>                  from tif_jpeg.c:27:
>> ../../../port/cpl_config.h:75:1: warning: this is the location of the
>> previous definition
>> In file included from tif_jpeg.c:75:
>> ../../jpeg/libjpeg/jpeglib.h:94: error: syntax error before "boolean"
>> ../../jpeg/libjpeg/jpeglib.h:94: warning: no semicolon at end of struct
>> or union
>> ../../jpeg/libjpeg/jpeglib.h:95: warning: type defaults to `int' in
>> declaration of `JQUANT_TBL'
>> ../../jpeg/libjpeg/jpeglib.h:95: warning: data definition has no type or
>> storage class
>> ../../jpeg/libjpeg/jpeglib.h:110: error: syntax error before "boolean"
>> ../../jpeg/libjpeg/jpeglib.h:110: warning: no semicolon at end of struct
>> or union
>> ../../jpeg/libjpeg/jpeglib.h:111: warning: type defaults to `int' in
>> declaration of `JHUFF_TBL'
>> ../../jpeg/libjpeg/jpeglib.h:111: warning: data definition has no type
>> or storage class
>> ../../jpeg/libjpeg/jpeglib.h:160: error: syntax error before "boolean"
>> ../../jpeg/libjpeg/jpeglib.h:160: warning: no semicolon at end of struct
>> or union
>> ../../jpeg/libjpeg/jpeglib.h:175: error: syntax error before '*' token
>> ../../jpeg/libjpeg/jpeglib.h:175: warning: type defaults to `int' in
>> declaration of `quant_table'
>> ../../jpeg/libjpeg/jpeglib.h:175: warning: data definition has no type
>> or storage class
>> ../../jpeg/libjpeg/jpeglib.h:179: error: syntax error before '}' token
>> ../../jpeg/libjpeg/jpeglib.h:179: warning: type defaults to `int' in
>> declaration of `jpeg_component_info'
>> ../../jpeg/libjpeg/jpeglib.h:179: warning: data definition has no type
>> or storage class
>> ../../jpeg/libjpeg/jpeglib.h:254: error: syntax error before "boolean"
>> ../../jpeg/libjpeg/jpeglib.h:254: warning: no semicolon at end of struct
>> or union
>> ../../jpeg/libjpeg/jpeglib.h:259: error: syntax error before '}' token
>> ../../jpeg/libjpeg/jpeglib.h:269: error: syntax error before "boolean"
>> ../../jpeg/libjpeg/jpeglib.h:269: warning: no semicolon at end of struct
>> or union
>>
>> etc...
>>
>> I've been digging around, and found some stuff about different ways of
>> declaring booleans when compiling GDAL with MinGW (e.g., int vs.
>> unsigned char), but from what I can tell after looking at the code this
>> seems to have been taken care of already (at least in GDAL-1.3.1).  Is
>> there be anything else I should try?
>>
>> Regards,
>> Mike
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From mgleahy at golden.net  Thu Dec  8 22:18:10 2005
From: mgleahy at golden.net (Mike Leahy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <4398EF5A.8070406@golden.net>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>
	<4398EF5A.8070406@golden.net>
Message-ID: <4398F772.6070806@golden.net>

Ok, without sqlite, I get a new error:

(cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
make[1]: Leaving directory `/Downloads/gdal-1.3.1'
(cd swig; make build)
make[1]: Entering directory `/Downloads/gdal-1.3.1/swig'
for dir in ; do (cd $dir; make build ); done
/bin/sh.exe: -c: line 1: syntax error near unexpected token `;'
/bin/sh.exe: -c: line 1: `for dir in ; do (cd $dir; make build ); done'
make[1]: *** [build] Error 2
make[1]: Leaving directory `/Downloads/gdal-1.3.1/swig'
make: *** [swig-target] Error 2

Is there something else I've missed?

Mike

Mike Leahy wrote:
> Daniel,
> 
> All of your suggestions seem to have worked fine so far.  Thanks for the
> help.
> 
> However, I now I'm having issues with sqlite:
> 
> .libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x1068c3): undefined
> reference to `sqlite3_close'
> .libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106a63): undefined
> reference to `sqlite3_close'
> .libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106c03): undefined
> reference to `sqlite3_close'
> .libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106e1b): undefined
> reference to `sqlite3_open'
> .libs/libgdal.la-3.o:ogrsqlitedatasource.cpp:(.text+0x106e2a): undefined
> reference to `sqlite3_errmsg'
> 
> <snip>
> 
> .libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10a280): undefined
> reference to `sqlite3_exec'
> .libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10a3c5): undefined
> reference to `sqlite3_exec'
> .libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10a7ae): more
> undefined references to `sqlite3_exec' follow
> .libs/libgdal.la-3.o:ogrsqlitetablelayer.cpp:(.text+0x10aba2): undefined
> reference to `sqlite3_free'
> collect2: ld returned 1 exit status
> make[1]: *** [libgdal.la] Error 1
> make[1]: Leaving directory `/Downloads/gdal-1.3.1'
> make: *** [check-lib] Error 2
> 
> I'll give it another run, and see if it works without sqlite support.
> 
> Mike
> 
> Daniel Wallner wrote:
>> Hi,
>> I just stumbled into this myself a few hours ago :)
>>
>> The problem is in this file:
>> frmts/gtiff/libtiff/tif_jpeg.c
>> Comment out line 69 and 71
>> (Don't know a clean solution though.)
>>
>> And unfortunately here too:
>> (eeek, my bad, I wrote that driver :)
>> frmts/rik/GNUmakefile
>> you need to add -I../zlib to the compile options
>> (Don't know how this is best done either.)
>>
>> Then you need to add cpl_vsil_win32.o to
>> port/GNUmakefile too.
>>
>> That should do it.
>>
>> And I think you need these options:
>> ./configure --without-unix-stdio-64 --with-sqlite=/c/mingw
>>
>> Regards,
>> Daniel
>>
>>> From: Mike Leahy <mgleahy@golden.net>
>>> Date: 2005/12/09 fr AM 12:07:32 CET
>>> To: gdal-dev@lists.maptools.org
>>> ?mne: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
>>>
>>> Hello list,
>>>
>>> I'm hoping some of the other users out there that have has success with
>>> this might be able to give me some advice.  I've been trying to compile
>>> GDAL with MinGW/MSYS, and I'm currently running into trouble when the
>>> make process hits tif_jpeg.c.  I've configured GDAL with the following
>>> options:
>>>
>>>
>>> ./configure --prefix=/usr/local --with-jpeg=internal --with-png=internal
>>> --with-tiff=internal --with-libz=internal --with-sqlite=/c/mingw
>>> --without-unix-stdio-64
>>>
>>>
>>> And I get the following errors when I compile:
>>>
>>>
>>> In file included from ../../jpeg/libjpeg/jpeglib.h:24,
>>>                  from tif_jpeg.c:75:
>>> ../../jpeg/libjpeg/jconfig.h:12:1: warning: "HAVE_STDLIB_H" redefined
>>> In file included from tif_config.h:2,
>>>                  from tiffconf.h:3,
>>>                  from tiff.h:30,
>>>                  from tiffio.h:33,
>>>                  from tiffiop.h:60,
>>>                  from tif_jpeg.c:27:
>>> ../../../port/cpl_config.h:75:1: warning: this is the location of the
>>> previous definition
>>> In file included from tif_jpeg.c:75:
>>> ../../jpeg/libjpeg/jpeglib.h:94: error: syntax error before "boolean"
>>> ../../jpeg/libjpeg/jpeglib.h:94: warning: no semicolon at end of struct
>>> or union
>>> ../../jpeg/libjpeg/jpeglib.h:95: warning: type defaults to `int' in
>>> declaration of `JQUANT_TBL'
>>> ../../jpeg/libjpeg/jpeglib.h:95: warning: data definition has no type or
>>> storage class
>>> ../../jpeg/libjpeg/jpeglib.h:110: error: syntax error before "boolean"
>>> ../../jpeg/libjpeg/jpeglib.h:110: warning: no semicolon at end of struct
>>> or union
>>> ../../jpeg/libjpeg/jpeglib.h:111: warning: type defaults to `int' in
>>> declaration of `JHUFF_TBL'
>>> ../../jpeg/libjpeg/jpeglib.h:111: warning: data definition has no type
>>> or storage class
>>> ../../jpeg/libjpeg/jpeglib.h:160: error: syntax error before "boolean"
>>> ../../jpeg/libjpeg/jpeglib.h:160: warning: no semicolon at end of struct
>>> or union
>>> ../../jpeg/libjpeg/jpeglib.h:175: error: syntax error before '*' token
>>> ../../jpeg/libjpeg/jpeglib.h:175: warning: type defaults to `int' in
>>> declaration of `quant_table'
>>> ../../jpeg/libjpeg/jpeglib.h:175: warning: data definition has no type
>>> or storage class
>>> ../../jpeg/libjpeg/jpeglib.h:179: error: syntax error before '}' token
>>> ../../jpeg/libjpeg/jpeglib.h:179: warning: type defaults to `int' in
>>> declaration of `jpeg_component_info'
>>> ../../jpeg/libjpeg/jpeglib.h:179: warning: data definition has no type
>>> or storage class
>>> ../../jpeg/libjpeg/jpeglib.h:254: error: syntax error before "boolean"
>>> ../../jpeg/libjpeg/jpeglib.h:254: warning: no semicolon at end of struct
>>> or union
>>> ../../jpeg/libjpeg/jpeglib.h:259: error: syntax error before '}' token
>>> ../../jpeg/libjpeg/jpeglib.h:269: error: syntax error before "boolean"
>>> ../../jpeg/libjpeg/jpeglib.h:269: warning: no semicolon at end of struct
>>> or union
>>>
>>> etc...
>>>
>>> I've been digging around, and found some stuff about different ways of
>>> declaring booleans when compiling GDAL with MinGW (e.g., int vs.
>>> unsigned char), but from what I can tell after looking at the code this
>>> seems to have been taken care of already (at least in GDAL-1.3.1).  Is
>>> there be anything else I should try?
>>>
>>> Regards,
>>> Mike
>>> _______________________________________________
>>> Gdal-dev mailing list
>>> Gdal-dev@lists.maptools.org
>>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 

From warmerdam at pobox.com  Fri Dec  9 00:29:44 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <4398F772.6070806@golden.net>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>
	<4398EF5A.8070406@golden.net> <4398F772.6070806@golden.net>
Message-ID: <931f8ea90512082129g5fb7d3c6y32eda276e3171528@mail.gmail.com>

On 12/8/05, Mike Leahy <mgleahy@golden.net> wrote:
> Ok, without sqlite, I get a new error:
>
> (cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
> make[1]: Leaving directory `/Downloads/gdal-1.3.1'
> (cd swig; make build)
> make[1]: Entering directory `/Downloads/gdal-1.3.1/swig'
> for dir in ; do (cd $dir; make build ); done
> /bin/sh.exe: -c: line 1: syntax error near unexpected token `;'
> /bin/sh.exe: -c: line 1: `for dir in ; do (cd $dir; make build ); done'
> make[1]: *** [build] Error 2
> make[1]: Leaving directory `/Downloads/gdal-1.3.1/swig'
> make: *** [swig-target] Error 2

Mike,

This is a known problem with GDAL 1.3.1 on non-bash
based systems.  You will need to comment out the swig
related stuff in the GDAL GNUmakefile.  It will be fixed
in 1.3.2.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ivan.mjartan at geovap.cz  Fri Dec  9 03:16:20 2005
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: CreateCopy into buffer 
Message-ID: <001601c5fc98$d5f8ad40$1a01a8c0@PC24>

Hi All,

 

At first thanks a lot for yours replies. It helps a lot. I have been finished my C++ library  and I would show you my code that createcopy sub window of image into memory. I know it is simple, but for GDAL beginners like I am it is very useful see some example. 



this part of unmanage c++ dll code

BASICGDAL_API GByte* createSubImageMemory(char *pszSrcFilename,int x, int y,int xsize,int ysize,int *Length){
    vsi_l_offset nBigLength; 
    int t;
    GByte* pabyOUTData;
    char **papszCreateOptions = NULL;
    GDALDatasetH hDataset,hOutDS;
    GDALDriverH hDriver;
    VRTDataset *poVDS;
    int nBandCount = 0;
    int i;

    GDALAllRegister();
    
    hDriver = GetGDALDriverManager()->GetDriverByName("BMP");
    hDataset = GDALOpenShared( pszSrcFilename, GA_ReadOnly );

    poVDS = new VRTDataset(xsize, ysize);

    nBandCount = GDALGetRasterCount( hDataset );

    for( i = 0; i < nBandCount; i++ )
    {
        VRTSourcedRasterBand *poVRTBand;
        GDALRasterBand *poSrcBand;
        GDALDataType eBandType;
        poSrcBand = ((GDALDataset *)hDataset)->GetRasterBand(i+1);
        eBandType = poSrcBand->GetRasterDataType();
        poVDS->AddBand( eBandType, NULL );
        poVRTBand = (VRTSourcedRasterBand *) poVDS->GetRasterBand( i+1 );
        poVRTBand->AddSimpleSource( poSrcBand,x, y, xsize, ysize,0, 0, xsize, ysize );
        poVRTBand->CopyCommonInfoFrom( poSrcBand );
    }

    VSIInstallMemFileHandler();
    hOutDS = GDALCreateCopy( hDriver,"/vsimem/out.bmp", (GDALDatasetH) poVDS,
    FALSE, NULL, 
    NULL, NULL );
    
    if( hOutDS != NULL )
    {
        GDALClose( hOutDS );
    }
    
    GDALClose( (GDALDatasetH) poVDS );
    GDALClose( hDataset );
    
    pabyOUTData=VSIGetMemFileBuffer( "/vsimem/out.bmp",&nBigLength, TRUE );
    VSIUnlink("/vsimem/out.bmp"); 
    VSICleanupFileManager ();
    *Length=(int)nBigLength;
    return pabyOUTData; 
}

and this is part of C# mange code 

[DllImport("BasicGdal.dll")]
internal static extern IntPtr createSubImageMemory(string pszSrcFilename,int x, int y,int xsize,int ysize,ref int size);

int size=0;

IntPtr zacatek; 
zacatek = BasicGdal.createSubImageMemory2(this.testFile,5000,5000,3000,3000,ref size);

byte[] buf=new byte[size];


Marshal.Copy(zacatek,buf,0,size);

System.IO.FileStream fs;
fs = new System.IO.FileStream("c:\\Projects\\GDAL\\CsharpTest\\CsharpTest\\bin\\Debug\\test.bmp",System.IO.FileMode.Create);
fs.Write(buf,0,buf.Length);
fs.Close();
Marshal.FreeCoTaskMem(zacatek);

Ivan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051209/652226f0/attachment.html
From cfis at interserv.com  Fri Dec  9 04:18:10 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: Ruby/cygwin fix + request for demo :/
In-Reply-To: <20051208191621.17413.qmail@web30702.mail.mud.yahoo.com>
References: <20051208191621.17413.qmail@web30702.mail.mud.yahoo.com>
Message-ID: <43994BD2.4030502@interserv.com>

Check out the gdal autotest module from CVS - you'll see a whole set of 
Ruby unit tests for ogr.  That should give you the idea.  Or for GDAL 
itself, take a look at the Python unit tests - Ruby code is fairly similar.

Note that the SWIG Ruby bindings have never been tested for gdal itself 
(versus ogr or osr) so undoubtedly you'll run into some problems.  If 
you have time to port some of the python gdal unit tests to Ruby, then 
I'll see if I can find some time to fix any problems you run into 
(basically requires playing around with the SWIG bindings a bit).

FYI - you can build gdal using MingW or VC++ and therefore avoid the 
dependency on cygwin dll.  Alternatively, put the cygwin dll on your 
path someplace (as you discovered).  The reasoning behind the gda/gdal 
bit is because there are several modules which include gdal/gdal, 
gdal/ogr and gdal/osr.

Charlie

s duclos wrote:
> Hi,
> 
> I compiled/link/run gdal on cygwin .. work fine.
> 
> Loading gdal.so within 'irb' (w/ require 'gdal/gdal')
> failed because it cant find cyggdal-1.dll 
> 
> But the error msg is a bit confusing :/
> 
> irb(main):001:0> require 'gdal/gdal'
> LoadError: No such file or directory -
> /usr/lib/ruby/site_ruby/1.8/i386-cygwin/gdal/gdal.so
>         from
> /usr/lib/ruby/site_ruby/1.8/i386-cygwin/gdal/gdal.so
>         from (irb):1
> irb(main):002:0>
> 
> Putting gdal/.libs/cyggdal-1.dll somewhere in the PATH
> or
> put /usr/local/bin in PATH fix the problem.
> 
> 
> 
> Next,
> 
> $ irb
> irb(main):001:0> require 'gdal/gdal'
> => true
> irb(main):002:0> ???
> 
> 
> Then what ! 
> 
> I tried various call but I'm getting nowhere ..
> 
> I'm basicaly 'cluless at the prompt'.
> 
> So, could someone post anything in Ruby that does 
> something/anything with gdal/ogr.
> 
> 
> Thanks,
> 
> Sylvain.
> 
>  
> 
> 
> 
> 
> 
> 
> 
> 
> __________________________________________________
> Do You Yahoo!?
> Tired of spam?  Yahoo! Mail has the best spam protection around 
> http://mail.yahoo.com 



From maik.troemel at maitro.net  Fri Dec  9 05:44:29 2005
From: maik.troemel at maitro.net (=?ISO-8859-1?Q?Maik_Tr=F6mel?=)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problems installing gdal-grass-1.3.1
Message-ID: <4399600D.5010905@maitro.net>

Hello ,

I've got a problem installing gdal-grass-1.3.1 from binarys. Up till now 
nobody was able to help me.

I have installed: 
proj-4.4.9
geos-2.1.4
gdal-1.3.1
grass: 6.0.1
and now i want to install gdal-grass-1.3.1. But when I run "./configure 
--with-grass='/.../grass-6.0.1/lib/' " I get as result:

checking for gcc... gcc
checking for C compiler default output file name... a.out
checking whether the C compiler works... yes
checking whether we are cross compiling... no
checking for suffix of executables...
checking for suffix of object files... o
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ANSI C... none needed
checking for g++... g++
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for ranlib... ranlib
/usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/../../../../x86_64-suse-linux/bin/ld:
 conftest2.o: relocation R_X86_64_32 can not be used when making a 
shared object
; recompile with -fPIC
conftest2.o: could not read symbols: Bad value
collect2: ld returned 1 exit status
checking for g++ -shared ... no(1)
checking for ld -shared ... no
checking for gdal-config... /usr/local/bin/gdal-config
using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
checking for G_asprintf in -lgrass_gis... no
configure: error: --with-grass=/usr/local/grass-6.0.1/lib/ requested, 
but librar
ies not found!

What's going wrong?
Thanks a lot for your help!

Greetings Maik

From sebastien.grignard at archivideo.com  Fri Dec  9 06:46:29 2005
From: sebastien.grignard at archivideo.com (Sebastien Grignard)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Bug correction in GML reader
Message-ID: <43996E95.5050701@archivideo.com>

Hello.
I've corrected 2 bugs in the OGR GML driver :
 - FIDs written by the GML driver are now read and not ignored like before
 - the 'ogr:' prefix added to the feature field names is now ignored by 
the reader.
Included are the 2 diff files (against ogrgmldatasource.cpp and 
ogrgmllayer.cpp, current CVS, command 'cvs diff -C 3').

Greetings.

-- 
Sebastien Grignard
R&D Developer
Archivideo
40, rue des Veyettes - 35000 Rennes FRANCE
Phone: +033 2 99 86 30 20

-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogrgmldatasource.diff
Type: text/x-patch
Size: 684 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051209/7134f989/ogrgmldatasource.bin
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ogrgmllayer.diff
Type: text/x-patch
Size: 1733 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051209/7134f989/ogrgmllayer.bin
From sylvain_duclos at yahoo.com  Fri Dec  9 08:44:23 2005
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: Ruby/cygwin fix + request for demo :/
In-Reply-To: <43994BD2.4030502@interserv.com>
Message-ID: <20051209134423.59037.qmail@web30704.mail.mud.yahoo.com>

Charlie,

Thanks for the tip!

I was using gdal-1.3.1.tar.gz .. I didn`t
know about this module gdalautotest .. ho well

WOW there is tons of stuff in there !

Sorry for clogging the list but I couldn't
find your e-mail in the code for 'cfis'.

I'll be working on GeoTIFF but I usually work
on the vector part of GDAL (OGR). I'll let
you know directly if there there is anything.


Thanks again,


Sylvain.




--- Charlie Savage <cfis@interserv.com> wrote:

> Check out the gdal autotest module from CVS - you'll
> see a whole set of 
> Ruby unit tests for ogr.  That should give you the
> idea.  Or for GDAL 
> itself, take a look at the Python unit tests - Ruby
> code is fairly similar.
> 
> Note that the SWIG Ruby bindings have never been
> tested for gdal itself 
> (versus ogr or osr) so undoubtedly you'll run into
> some problems.  If 
> you have time to port some of the python gdal unit
> tests to Ruby, then 
> I'll see if I can find some time to fix any problems
> you run into 
> (basically requires playing around with the SWIG
> bindings a bit).
> 
> FYI - you can build gdal using MingW or VC++ and
> therefore avoid the 
> dependency on cygwin dll.  Alternatively, put the
> cygwin dll on your 
> path someplace (as you discovered).  The reasoning
> behind the gda/gdal 
> bit is because there are several modules which
> include gdal/gdal, 
> gdal/ogr and gdal/osr.
> 
> Charlie
> 
> s duclos wrote:
> > Hi,
> > 
> > I compiled/link/run gdal on cygwin .. work fine.
> > 
> > Loading gdal.so within 'irb' (w/ require
> 'gdal/gdal')
> > failed because it cant find cyggdal-1.dll 
> > 
> > But the error msg is a bit confusing :/
> > 
> > irb(main):001:0> require 'gdal/gdal'
> > LoadError: No such file or directory -
> >
> /usr/lib/ruby/site_ruby/1.8/i386-cygwin/gdal/gdal.so
> >         from
> >
> /usr/lib/ruby/site_ruby/1.8/i386-cygwin/gdal/gdal.so
> >         from (irb):1
> > irb(main):002:0>
> > 
> > Putting gdal/.libs/cyggdal-1.dll somewhere in the
> PATH
> > or
> > put /usr/local/bin in PATH fix the problem.
> > 
> > 
> > 
> > Next,
> > 
> > $ irb
> > irb(main):001:0> require 'gdal/gdal'
> > => true
> > irb(main):002:0> ???
> > 
> > 
> > Then what ! 
> > 
> > I tried various call but I'm getting nowhere ..
> > 
> > I'm basicaly 'cluless at the prompt'.
> > 
> > So, could someone post anything in Ruby that does 
> > something/anything with gdal/ogr.
> > 
> > 
> > Thanks,
> > 
> > Sylvain.
> > 
> >  
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > 
> > __________________________________________________
> > Do You Yahoo!?
> > Tired of spam?  Yahoo! Mail has the best spam
> protection around 
> > http://mail.yahoo.com 
> 
> 
> 


__________________________________________________
Do You Yahoo!?
Tired of spam?  Yahoo! Mail has the best spam protection around 
http://mail.yahoo.com 

From Todd.Southen at bentley.com  Fri Dec  9 11:48:02 2005
From: Todd.Southen at bentley.com (Todd.Southen@bentley.com)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Ogrinfo with ESRI personal database
Message-ID: <EE8C2D034A022444B87B1332B3978105041A54B5@extonpo1.bentley.com>

I'm trying to use ogrinfo on an ESRI personal database mdb file but it
just fails:

ogrinfo -summary c:\temp\MnDOT\P-069_Database.mdb
FAILURE:
Unable to open datasource `c:\temp\MnDOT\P-069_Database.mdb' with the
following drivers.
  -> ESRI Shapefile
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> MapInfo File
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> ODBC
  -> OCI

I'm running this on Windows.  Which driver does it use?  The docs say it
uses the ODBC driver, but when I look at the ogrodbcdriver.cpp it
requires that the datasource name start with "ODBC:":

OGRDataSource *OGRODBCDriver::Open( const char * pszFilename,
                                     int bUpdate )

{
    OGRODBCDataSource     *poDS;

    if( !EQUALN(pszFilename,"ODBC:",5) )
        return NULL;

I've tried prefixing with ODBC: but this fails too.

Can anyone shed some light on this please?

Thanks,
Todd.


From warmerdam at pobox.com  Fri Dec  9 12:35:29 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Ogrinfo with ESRI personal database
In-Reply-To: <EE8C2D034A022444B87B1332B3978105041A54B5@extonpo1.bentley.com>
References: <EE8C2D034A022444B87B1332B3978105041A54B5@extonpo1.bentley.com>
Message-ID: <931f8ea90512090935g7fc5b57aw84b815571dd9c60d@mail.gmail.com>

On 12/9/05, Todd.Southen@bentley.com <Todd.Southen@bentley.com> wrote:
> I'm trying to use ogrinfo on an ESRI personal database mdb file but it
> just fails:
>
> ogrinfo -summary c:\temp\MnDOT\P-069_Database.mdb
> FAILURE:
> Unable to open datasource `c:\temp\MnDOT\P-069_Database.mdb' with the
> following drivers.
>   -> ESRI Shapefile
>   -> UK .NTF
>   -> SDTS
>   -> TIGER
>   -> S57
>   -> MapInfo File
>   -> DGN
>   -> VRT
>   -> AVCBin
>   -> REC
>   -> Memory
>   -> CSV
>   -> GML
>   -> ODBC
>   -> OCI
>
> I'm running this on Windows.  Which driver does it use?  The docs say it
> uses the ODBC driver, but when I look at the ogrodbcdriver.cpp it
> requires that the datasource name start with "ODBC:":

Todd,

It would appear you do not have a recent enough build of
GDAL/OGR.  If it were, it would include a PGeo driver in
the driver list.

The Personal Geodatabase driver does use ODBC, but is
distinct from the "plain" ODBC driver.   If you download
a very recent FWTools for win32 it should include the personal
geodatabase support (ie. 1.0.0a7):

  http://fwtools.maptools.org/

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Dec  9 12:54:17 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Bug correction in GML reader
In-Reply-To: <43996E95.5050701@archivideo.com>
References: <43996E95.5050701@archivideo.com>
Message-ID: <931f8ea90512090954k7e78230br1588c16c48a42172@mail.gmail.com>

On 12/9/05, Sebastien Grignard <sebastien.grignard@archivideo.com> wrote:
> Hello.
> I've corrected 2 bugs in the OGR GML driver :
>  - FIDs written by the GML driver are now read and not ignored like before
>  - the 'ogr:' prefix added to the feature field names is now ignored by
> the reader.
> Included are the 2 diff files (against ogrgmldatasource.cpp and
> ogrgmllayer.cpp, current CVS, command 'cvs diff -C 3').

Sebastien,

The patches look promising, but I can't look into them today.
Could you submit them via bugzilla so I won't lose track of them?

I am a bit nervous about the FID change because GML FIDs
can be alphanumeric.  However, OGR FIDs are just 32bit integers.
We need to be very careful not to use built-in FIDs that can't be
properly represented in OGR or we may end up with features
with non-unique fids.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Fri Dec  9 12:56:30 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problems installing gdal-grass-1.3.1
In-Reply-To: <4399600D.5010905@maitro.net>
References: <4399600D.5010905@maitro.net>
Message-ID: <931f8ea90512090956u279c12dbk9f8f358f9ff41c22@mail.gmail.com>

On 12/9/05, Maik Tr?mel <maik.troemel@maitro.net> wrote:
> Hello ,
>
> I've got a problem installing gdal-grass-1.3.1 from binarys. Up till now
> nobody was able to help me.

Maik,

I did a few patches after 1.3.1 release for AMD64
systems, which included more agressive use of -fPIC.
I don't know if that might be an issue for your case or
not, but you might want to try a nightly snapshot of GDAL
and see if you have any better luck.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at epf.pl  Fri Dec  9 13:33:39 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] gdal_merge: output colors reverted
In-Reply-To: <931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
Message-ID: <1134153219.8622.33.camel@localhost.localdomain>

Frank,

I have 2 tif+tfw B/W (black on white) sheets of topo map. Both are
something like this (they only differ very slighlty in pixel size and
size):

maciek@sorbus:~/tmp/kor$ gdalinfo 442_132_kor_trim.tif
Driver: GTiff/GeoTIFF
Size is 7999, 5000
Coordinate System is `'
Origin = (3655999.644128,5630000.159623)
Pixel Size = (1.00019000,-1.00019000)
Metadata:
  AREA_OR_POINT=Area
  TIFFTAG_DOCUMENTNAME=NONE
  TIFFTAG_SOFTWARE=TSL Raster Converters, Version 4.0
  TIFFTAG_DATETIME=2005:12:07 17:38:53
  TIFFTAG_XRESOLUTION=300
  TIFFTAG_YRESOLUTION=300
  TIFFTAG_RESOLUTIONUNIT=2 (pixels/inch)
Corner Coordinates:
Upper Left  ( 3655999.644, 5630000.160)
Lower Left  ( 3655999.644, 5624999.210)
Upper Right ( 3664000.164, 5630000.160)
Lower Right ( 3664000.164, 5624999.210)
Center      ( 3659999.904, 5627499.685)
Band 1 Block=7999x5000 Type=Byte, ColorInterp=Palette
  Color Table (RGB with 2 entries)
    0: 255,255,255,255
    1: 0,0,0,255



When I gdal_merge them, the resulting file is not visible at all in
OpenEV and visible as white-on-black in QGIS, instead of original
black-on-white. Why do these happen?



Here's the gdalinfo of my problematic gdal_merge output:

maciek@sorbus:~$ gdalinfo topo_mosaick_subset.tif
Driver: GTiff/GeoTIFF
Size is 15997, 5000
Coordinate System is `'
Origin = (3655999.644128,5630000.310932)
Pixel Size = (1.00019000,-1.00019000)
Corner Coordinates:
Upper Left  ( 3655999.644, 5630000.311)
Lower Left  ( 3655999.644, 5624999.361)
Upper Right ( 3671999.684, 5630000.311)
Lower Right ( 3671999.684, 5624999.361)
Center      ( 3663999.664, 5627499.836)
Band 1 Block=15997x1 Type=Byte, ColorInterp=Gray



gdal_translate and gdalwarp preserve colors properly. Could gdal_merge
too?

GDAL 1.3.1 CVS 15.11.2005, Linux.

Maciek


--------------------
W polskim Internecie s setki milionw stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/


From warmerdam at pobox.com  Fri Dec  9 14:05:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] gdal_merge: output colors reverted
In-Reply-To: <1134153219.8622.33.camel@localhost.localdomain>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
	<1134153219.8622.33.camel@localhost.localdomain>
Message-ID: <931f8ea90512091105w38a38e22r2dffa8a9be8c5d42@mail.gmail.com>

On 12/9/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> Frank,
>
> I have 2 tif+tfw B/W (black on white) sheets of topo map. Both are
> something like this (they only differ very slighlty in pixel size and
> size):

Maciek,

Could you try adding the -pct switch when you run
gdal_merge.py?   This should copy the colortable
from the first image to the result image.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at epf.pl  Fri Dec  9 14:15:43 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] gdal_merge: output colors reverted
In-Reply-To: <931f8ea90512091105w38a38e22r2dffa8a9be8c5d42@mail.gmail.com>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
	<1134153219.8622.33.camel@localhost.localdomain>
	<931f8ea90512091105w38a38e22r2dffa8a9be8c5d42@mail.gmail.com>
Message-ID: <1134155743.8622.36.camel@localhost.localdomain>

On pi?, 2005-12-09 at 14:05 -0500, Frank Warmerdam wrote:
> On 12/9/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> > Frank,
> >
> > I have 2 tif+tfw B/W (black on white) sheets of topo map. Both are
> > something like this (they only differ very slighlty in pixel size and
> > size):
> 
> Maciek,
> 
> Could you try adding the -pct switch when you run
> gdal_merge.py?   This should copy the colortable
> from the first image to the result image.

It helped, thanks!

Since gdalwarp and gdal_translate handle this automatically, could
gdal_merge too?

Best,
Maciek


--------------------
W polskim Internecie s? setki milion?w stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/


From warmerdam at pobox.com  Fri Dec  9 14:55:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] gdal_merge: output colors reverted
In-Reply-To: <1134155743.8622.36.camel@localhost.localdomain>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
	<1134153219.8622.33.camel@localhost.localdomain>
	<931f8ea90512091105w38a38e22r2dffa8a9be8c5d42@mail.gmail.com>
	<1134155743.8622.36.camel@localhost.localdomain>
Message-ID: <931f8ea90512091155u4e10c7a2wa427a43c8fae86bb@mail.gmail.com>

On 12/9/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> It helped, thanks!
>
> Since gdalwarp and gdal_translate handle this automatically, could
> gdal_merge too?

Maciek,

If you file a bug on it, I'll try and do that at some point.
The fundamental issue though is that gdal_merge was
intended to be a quick hack, not an industrial strength
tool.  However, as the years go by it has been so useful
that folks are always pushing me to improve it's rought
edges.  What I think I really need is to extend gdalwarp
to also provide the "quick mosaic" capabilities of gdal_merge.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at epf.pl  Fri Dec  9 15:05:20 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] gdal_merge: output colors reverted
In-Reply-To: <931f8ea90512091155u4e10c7a2wa427a43c8fae86bb@mail.gmail.com>
References: <6.2.1.2.0.20051202183825.0429ec30@mailhost.geodesign.com.br>
	<931f8ea90512021327u6797b788m84b9f5f0a20e3dd1@mail.gmail.com>
	<1134153219.8622.33.camel@localhost.localdomain>
	<931f8ea90512091105w38a38e22r2dffa8a9be8c5d42@mail.gmail.com>
	<1134155743.8622.36.camel@localhost.localdomain>
	<931f8ea90512091155u4e10c7a2wa427a43c8fae86bb@mail.gmail.com>
Message-ID: <1134158720.8622.39.camel@localhost.localdomain>

On pi?, 2005-12-09 at 14:55 -0500, Frank Warmerdam wrote:
> On 12/9/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> > It helped, thanks!
> >
> > Since gdalwarp and gdal_translate handle this automatically, could
> > gdal_merge too?
> 
> Maciek,
> 
> If you file a bug on it, I'll try and do that at some point.
> The fundamental issue though is that gdal_merge was
> intended to be a quick hack, not an industrial strength
> tool.  However, as the years go by it has been so useful
> that folks are always pushing me to improve it's rought
> edges.


> What I think I really need is to extend gdalwarp
> to also provide the "quick mosaic" capabilities of gdal_merge.

This would be best I think too. Thus I won't ask you to fix gdal_merge.
I wish you a good hack for quick mosaicking with gdalwarp!

Best,
Maciek


--------------------
W polskim Internecie s? setki milion?w stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/


From mgleahy at golden.net  Fri Dec  9 15:20:29 2005
From: mgleahy at golden.net (Mike Leahy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <931f8ea90512082129g5fb7d3c6y32eda276e3171528@mail.gmail.com>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>	
	<4398EF5A.8070406@golden.net> <4398F772.6070806@golden.net>
	<931f8ea90512082129g5fb7d3c6y32eda276e3171528@mail.gmail.com>
Message-ID: <4399E70D.6050903@golden.net>

Frank,

Thanks - that did the trick.

This leads me to a more general question: would I be better off if I 
were to use Cygwin instead of MinGW/MSYS for compiling code on Win32? 
It's been a while for me, but I seem to recall that Cygwin uses bash...

Thanks again,
Mike

Frank Warmerdam wrote:
> On 12/8/05, Mike Leahy <mgleahy@golden.net> wrote:
>> Ok, without sqlite, I get a new error:
>>
>> (cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
>> make[1]: Leaving directory `/Downloads/gdal-1.3.1'
>> (cd swig; make build)
>> make[1]: Entering directory `/Downloads/gdal-1.3.1/swig'
>> for dir in ; do (cd $dir; make build ); done
>> /bin/sh.exe: -c: line 1: syntax error near unexpected token `;'
>> /bin/sh.exe: -c: line 1: `for dir in ; do (cd $dir; make build ); done'
>> make[1]: *** [build] Error 2
>> make[1]: Leaving directory `/Downloads/gdal-1.3.1/swig'
>> make: *** [swig-target] Error 2
> 
> Mike,
> 
> This is a known problem with GDAL 1.3.1 on non-bash
> based systems.  You will need to comment out the swig
> related stuff in the GDAL GNUmakefile.  It will be fixed
> in 1.3.2.
> 
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> 

From sorokina at ornl.gov  Fri Dec  9 16:16:07 2005
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] UTF-8 problem with ogr2ogr
Message-ID: <428543BBA8AC7443BA10B0F491C6B056177970@ORNLEXCHANGE.ornl.gov>

Hello!
 
I was trying to convert an ESRI .mdb into PostgreSQL/PostGIS with
ogr2ogr (from FWTools 1.0.0a7 on Windows).  However, I've got the
following error:
 
ERROR: Invalid UTF-8 byte sequence detected near byte 0xb0
 
As far as I understand this problem is related to character encoding.  I
wonder if anybody knows what can be done about that?
 
--
Alex Sorokine, Ph.D. <sorokina@ornl.gov>
Oak Ridge National Laboratory
tel. (865) 576-7597 fax. (865) 241-6261
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051209/c9392270/attachment.html
From Peter.Nagy at vexcel.com  Fri Dec  9 16:41:44 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <4399E70D.6050903@golden.net>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03> 
	<4398EF5A.8070406@golden.net> <4398F772.6070806@golden.net>
	<931f8ea90512082129g5fb7d3c6y32eda276e3171528@mail.gmail.com>
	<4399E70D.6050903@golden.net>
Message-ID: <Pine.CYG.4.58.0512091428230.1280@Thwack>


I was able to build gdal c libs with mingw using cygwin bash shells with a
few tweaks.  But, if you're planning on using python, you may encounter
problems with your mingw-built gdal, if you're using the precompiled
windows binaries for python.  This is because the python wants to link
with the newer MSVCR71.dll instead of the older MSVCRT.dll that mingw
uses.  I believe you would need to try the version of python built with
mingw (which I didn't do, I went ahead and built gdal with MSVC6 instead,
since the rest of my mingw project works fine with the MSVC6-built gdal).

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


On Fri, 9 Dec 2005, Mike Leahy wrote:

> Frank,
>
> Thanks - that did the trick.
>
> This leads me to a more general question: would I be better off if I
> were to use Cygwin instead of MinGW/MSYS for compiling code on Win32?
> It's been a while for me, but I seem to recall that Cygwin uses bash...
>
> Thanks again,
> Mike
>
> Frank Warmerdam wrote:
> > On 12/8/05, Mike Leahy <mgleahy@golden.net> wrote:
> >> Ok, without sqlite, I get a new error:
> >>
> >> (cd .libs && rm -f libgdal.la && ln -s ../libgdal.la libgdal.la)
> >> make[1]: Leaving directory `/Downloads/gdal-1.3.1'
> >> (cd swig; make build)
> >> make[1]: Entering directory `/Downloads/gdal-1.3.1/swig'
> >> for dir in ; do (cd $dir; make build ); done
> >> /bin/sh.exe: -c: line 1: syntax error near unexpected token `;'
> >> /bin/sh.exe: -c: line 1: `for dir in ; do (cd $dir; make build ); done'
> >> make[1]: *** [build] Error 2
> >> make[1]: Leaving directory `/Downloads/gdal-1.3.1/swig'
> >> make: *** [swig-target] Error 2
> >
> > Mike,
> >
> > This is a known problem with GDAL 1.3.1 on non-bash
> > based systems.  You will need to comment out the swig
> > related stuff in the GDAL GNUmakefile.  It will be fixed
> > in 1.3.2.
> >
> > Best regards,
> > --
> > ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam
> > and watch the world go round - Rush    | Geospatial Programmer for Rent
> >
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From warmerdam at pobox.com  Fri Dec  9 16:59:08 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <4399E70D.6050903@golden.net>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>
	<4398EF5A.8070406@golden.net> <4398F772.6070806@golden.net>
	<931f8ea90512082129g5fb7d3c6y32eda276e3171528@mail.gmail.com>
	<4399E70D.6050903@golden.net>
Message-ID: <931f8ea90512091359v73ea33a7j2eaa5ac353de659a@mail.gmail.com>

On 12/9/05, Mike Leahy <mgleahy@golden.net> wrote:
> Frank,
>
> Thanks - that did the trick.
>
> This leads me to a more general question: would I be better off if I
> were to use Cygwin instead of MinGW/MSYS for compiling code on Win32?
> It's been a while for me, but I seem to recall that Cygwin uses bash...

Mike,

The cygwin build case has some quirks as well, but at least
it should work out of the box for simple configurations.  One
of the messy things (I think) about the cygwin builds is that
it is very hard to add close source external libraries.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Peter.Nagy at vexcel.com  Fri Dec  9 17:23:11 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Compling GDAL 1.3.1 in MinGW
In-Reply-To: <931f8ea90512091359v73ea33a7j2eaa5ac353de659a@mail.gmail.com>
References: <20051209002934.FAMZ4242.mxfep03.bredband.com@mxfep03>
	<4398EF5A.8070406@golden.net> <4398F772.6070806@golden.net>
	<931f8ea90512082129g5fb7d3c6y32eda276e3171528@mail.gmail.com>
	<4399E70D.6050903@golden.net>
	<931f8ea90512091359v73ea33a7j2eaa5ac353de659a@mail.gmail.com>
Message-ID: <Pine.CYG.4.58.0512091518390.1280@Thwack>


What I should have said is that I did a MinGW build using cygwin bash
shells, instead of the MSYS shell, by following the recommendations to
simply put the mingw compiler first in the path.

-> Pete


> On 12/9/05, Mike Leahy <mgleahy@golden.net> wrote:
> > Frank,
> >
> > Thanks - that did the trick.
> >
> > This leads me to a more general question: would I be better off if I
> > were to use Cygwin instead of MinGW/MSYS for compiling code on Win32?
> > It's been a while for me, but I seem to recall that Cygwin uses bash...
>
> Mike,
>
> The cygwin build case has some quirks as well, but at least
> it should work out of the box for simple configurations.  One
> of the messy things (I think) about the cygwin builds is that
> it is very hard to add close source external libraries.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From cmichaelis at happysquirrel.com  Fri Dec  9 22:25:07 2005
From: cmichaelis at happysquirrel.com (Christopher Michaelis)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] "Old-Style" ESRI .PRJ files -- Access Violation on
	ImportFromESRI
Message-ID: <439A4A93.3040405@happysquirrel.com>

Hello everyone,

I've got a question more related to OGR than to GDAL itself... but as 
I'm using OGR through GDAL I figured the question may be appropriate 
here. Apologies if it's not!

I've been reading the previous list messages on the various ESRI .prj 
file formats, and I think I've just run into my first "old-style" 
projection file. I have up until now been using .ImportFromWkt() to load 
projections, and it works perfectly for the WKT-style projection files.

Based on previous posts, I think that .ImportFromESRI() should be able 
to read these old-style PRJ files as well as the WKT. Am I correct in 
this assumption?

Now... to test it, I simply changed "ImportFromWkt" to "ImportFromESRI" 
in my code. No matter whether I try to read a new or old-style .prj 
file, this function call results in an access violation in GDAL13.dll.

Does anyone out there have a similar experience with this? I'd be 
eternally grateful for any advice. I put together a simple C++ test 
program to try to figure out what I was doing wrong; code follows below.

Thanks in advance for any help, and thanks in advance for reading my 
ramblings.

--Chris Michaelis of MapWindow.org

My troublesome PRJ file:
Projection    ALBERS
Datum         NAD83
Spheroid      GRS80
Units         METERS
Zunits        NO
Xshift        0.0
Yshift        0.0
Parameters
   29 30  0.0 /* 1st standard parallel
   45 30  0.0 /* 2nd standard parallel
  -96  0  0.0 /* central meridian
   23  0  0.0 /* latitude of projection's origin
0.0 /* false easting (meters)
0.0 /* false northing (meters)

The source code I'm trying to read this with: (takes the .prj file as a 
command-line argument -- this is on Windows, if "_tmain" and the 
reference to the gdal DLL above doesn't give that away)

int _tmain(int argc, _TCHAR* argv[])
{
	OGRSpatialReference oSRS, rSRS;
     	char *pszProj4 = NULL;

	FILE * prjFile;
	char * pszWKT = NULL;

	prjFile = fopen(argv[1], "rb");
	if (!prjFile)
	{
		printf("Couldn't open file.\n");
		exit(1);
	}

	fseek (prjFile, 0, SEEK_END);
	long lSize = ftell (prjFile);
	rewind (prjFile);

	pszWKT = (char*) malloc (lSize);
	if (pszWKT == NULL)
	{
		printf("Couldn't allocate mem.\n");
		exit (2);
	}

	fread (pszWKT,1,lSize,prjFile);
	fclose(prjFile);

	printf("INPUT = %s\n", pszWKT);

	oSRS.importFromESRI( &pszWKT );  // Crashes Here. ImportFromWkt works 
fine (for WKT, but not old-style of course)

     	oSRS.exportToProj4( &pszProj4 );

	printf( "OUTPUT Proj4 = %s\n", pszProj4 );

	// Clean up the allocated strings here...

	return 0;
}

Thanks again,
--Chris


From ben at vterrain.org  Sat Dec 10 05:03:58 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] "Old-Style" ESRI .PRJ files -- Access Violation
	onImportFromESRI
In-Reply-To: <439A4A93.3040405@happysquirrel.com>
Message-ID: <00c601c5fd71$0a576a80$9b02a8c0@DellWork>

Chris,

Don't know if this helps, but we also moved our project from using
"importFromWkt" to "importFromESRI" and the transition was painless, no
crashes or unexpected behavior.

You could check for the usual things: GDAL is latest release, GDAL data
files are being found, etc. - next step would probably be to step into
importFromESRI and see where it's failing.

BTW, i think you could reduce your test example below to:

	OGRSpatialReference oSRS;
	char **papszPrj = CSLLoad(argv[1]);
	OGRErr eErr = oSRS.importFromESRI(papszPrj);
	CSLDestroy( papszPrj );

Good luck,
Ben

> -----Original Message-----
> From: Christopher Michaelis
> Sent: Friday, December 09, 2005 5:25 PM
> To: gdal-dev@lists.maptools.org
> 
> [...]
> Now... to test it, I simply changed "ImportFromWkt" to 
> "ImportFromESRI" 
> in my code. No matter whether I try to read a new or 
> old-style .prj file, this function call results in an access 
> violation in GDAL13.dll.


From alucas at srtec.com  Sat Dec 10 10:59:25 2005
From: alucas at srtec.com (alucas@srtec.com)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] show raster with gdi
Message-ID: <1527.81.202.152.223.1134230365.squirrel@www.srtec.com>

Hello,

I'm writing a simple application that show an image raster. I'm writting
this for Windowsation with vc++ 6.0 with MFC, and in my application I've
the raster into a buffer (GByte array i.e). So, now I want to show the
raster in my MFC Appication, for this, I was readed that the best choice
is to use DIB Sections, but, I don't have any experience with GDI...
Anybody can show to me any sample code (vc++ with mfc) for painting the
content of buffer into a dib section?

Thanks.



From MChapman at sanz.com  Sat Dec 10 12:57:44 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] show raster with gdi
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C21B@mailman.san.com>

See my simple example at
http://lists.maptools.org/pipermail/gdal-dev/2004-March/002149.html

You will need the attached helper class called cdibsection that is with
the posting.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
alucas@srtec.com
Sent: Saturday, December 10, 2005 8:59 AM
To: Gdal-dev@lists.maptools.org
Subject: [Gdal-dev] show raster with gdi

Hello,

I'm writing a simple application that show an image raster. I'm writting
this for Windowsation with vc++ 6.0 with MFC, and in my application I've
the raster into a buffer (GByte array i.e). So, now I want to show the
raster in my MFC Appication, for this, I was readed that the best choice
is to use DIB Sections, but, I don't have any experience with GDI...
Anybody can show to me any sample code (vc++ with mfc) for painting the
content of buffer into a dib section?

Thanks.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Sat Dec 10 13:05:31 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] show raster with gdi
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C21E@mailman.san.com>

With GDI+:  Note the use of the 3 point DrawImage() function that allows
drawing of a rotated parallelgram.

vector< int> vBands = spRasterLayer->GetBandSelection();
			int nBandCount = (int) vBands.size();

			void* pDest = NULL;
			void* pSrc = NULL;
			CVPPtr< IVPRaster> spRaster;
	
spRaster.Attach(spRasterSet->GetRaster(nOverview, &sourceRect,
&destRect, &vBands, true, (void*) &ProgressFunc));
			int nDestWidth =
spRaster->GetBand(0)->GetWidth();
			int nDestHeight =
spRaster->GetBand(0)->GetHeight();
			if (nDestWidth < 1 || nDestHeight < 1) return;

			PixelFormat pixelFormat = PixelFormat24bppRGB;
			CDIBSection* m_pDIBSection = new CDIBSection();
			void* pBytes = spRaster->GetBytes(NULL, &vBands,
RASTER_RGB);
			m_pDIBSection->Create(nDestWidth, nDestHeight,
24);
			unsigned int dibwidth =
m_pDIBSection->GetTotalWidth();
			void* dest = (void*) m_pDIBSection->GetBits();
			void* src = (void*) pBytes;
			for (int row = 0; row < nDestHeight; row++)
			{
				pDest = ((unsigned char*)dest) + row *
dibwidth * 3;
				pSrc = ((unsigned char*)src) + row *
nDestWidth * 3;
				memcpy(pDest, pSrc, nDestWidth * 3);
			}

			#ifdef _DEBUG
			#undef new
			Bitmap* pBitmap = new
Bitmap(m_pDIBSection->Width(), 
	
m_pDIBSection->Height(), 
	
dibwidth * 3, 
	
pixelFormat, 
	
(BYTE*) m_pDIBSection->GetBits());
			#define new DEBUG_NEW
			#else
			Bitmap* pBitmap = new
Bitmap(m_pDIBSection->Width(), 
	
m_pDIBSection->Height(), 
	
dibwidth * 3, 
	
pixelFormat, 
	
(BYTE*) m_pDIBSection->GetBits());
			#endif

PointF parallelogram[3] = {PointF((REAL)nULXP, (REAL)-nULYP), 
	
PointF((REAL)nURXP, (REAL)-nURYP), 
	
PointF((REAL)nLLXP, (REAL)-nLLYP)};

			Status status = pMemGraphics->DrawImage(pBitmap,
parallelogram, 3);

			if (pBitmap) delete pBitmap;
			if (m_pDIBSection) delete m_pDIBSection;
			if (pBytes) delete [] pBytes;
			if (spRaster.p) spRaster.Release();

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of
alucas@srtec.com
Sent: Saturday, December 10, 2005 8:59 AM
To: Gdal-dev@lists.maptools.org
Subject: [Gdal-dev] show raster with gdi

Hello,

I'm writing a simple application that show an image raster. I'm writting
this for Windowsation with vc++ 6.0 with MFC, and in my application I've
the raster into a buffer (GByte array i.e). So, now I want to show the
raster in my MFC Appication, for this, I was readed that the best choice
is to use DIB Sections, but, I don't have any experience with GDI...
Anybody can show to me any sample code (vc++ with mfc) for painting the
content of buffer into a dib section?

Thanks.


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Sat Dec 10 13:21:54 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] OGRLayerAttrIndex
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C21F@mailman.san.com>

Frank,

 

I have a class that allows me to insert new geometries into a shape
file.  I'm also using a spatial index on each file.  I noticed the
method GetIndex() on the OGRLayer and the fact that the class
OGRLayerAttrIndex has methods like AddToIndex() and RemoveFromIndex().
What I would like to do is incrementally add or delete one geometry to
the index at a time as I add/remove geometries, rather than dropping the
whole index and rebuilding it when I modify the file.  I tried to use
the AddToIndex() function but it didn't add anything to the index file.
Could you explain to me how to use the OGRLayerAttrIndex class?

 

Thanks in advance,

Martin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051210/617a6dd1/attachment.html
From cmichaelis at happysquirrel.com  Sat Dec 10 14:11:01 2005
From: cmichaelis at happysquirrel.com (Christopher Michaelis)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] "Old-Style" ESRI .PRJ files -- Access Violation on
	ImportFromESRI
In-Reply-To: <200512101702.jBAH1w2b022907@duke.maptools.org>
References: <200512101702.jBAH1w2b022907@duke.maptools.org>
Message-ID: <439B2845.7000405@happysquirrel.com>

Ben,

Thanks very much for the "CSLLoad" trick! That seemed to make all the 
difference in the world. Using your code excerpt makes it work 
beautifully... apparently my fread approach was flawed. Problem solved!

Thanks again,
--Chris

----
gdal-dev-request@lists.maptools.org wrote:
From: "Ben Discoe" <ben@vterrain.org>
Subject: RE: [Gdal-dev] "Old-Style" ESRI .PRJ files -- Access
	Violation	onImportFromESRI
To: <gdal-dev@lists.maptools.org>
Message-ID: <00c601c5fd71$0a576a80$9b02a8c0@DellWork>
Content-Type: text/plain;	charset="us-ascii"

Chris,

Don't know if this helps, but we also moved our project from using
"importFromWkt" to "importFromESRI" and the transition was painless, no
crashes or unexpected behavior.

You could check for the usual things: GDAL is latest release, GDAL data
files are being found, etc. - next step would probably be to step into
importFromESRI and see where it's failing.

BTW, i think you could reduce your test example below to:

	OGRSpatialReference oSRS;
	char **papszPrj = CSLLoad(argv[1]);
	OGRErr eErr = oSRS.importFromESRI(papszPrj);
	CSLDestroy( papszPrj );

Good luck,
Ben


From cfis at interserv.com  Sat Dec 10 17:51:30 2005
From: cfis at interserv.com (Charlie Savage)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: UTF-8 problem with ogr2ogr
In-Reply-To: <428543BBA8AC7443BA10B0F491C6B056177970@ORNLEXCHANGE.ornl.gov>
References: <428543BBA8AC7443BA10B0F491C6B056177970@ORNLEXCHANGE.ornl.gov>
Message-ID: <439B5BF2.6010609@interserv.com>

What most likely is happening:

* Your postgresql database is in UTF8
* You are loading data from some other encoding, lets say Latin1, where 
the character is greater than 155.  For example, something like a tilde (~)
* OGR loads up the postgresql client libraries it is linked against
* The library code assumes utf8 and is not told otherwise by ogr2ogr
* The ~ character is not valid in utf8 because in utf8 it occupies more 
than one btye
* You get an error message.

Unfortunately, ogr2ogr does not support encodings at all and thus there 
isn't much you can do.  I think you may be able to influence the 
encoding the postgresql client library assumes by fiddling with 
environmental variables or the locale settings on Linux.  You'll have to 
check the postgresql documenation to see.   Alternatively, recompile 
ogr2ogr and add in a call to the postgresql client library telling it 
the encoding of the source dataset.

For ogr2ogr support for encodings you'll have to lobby Frank.

Charlie


Sorokine, Alexandre wrote:
> Hello!
>  
> I was trying to convert an ESRI .mdb into PostgreSQL/PostGIS with 
> ogr2ogr (from FWTools 1.0.0a7 on Windows).  However, I've got the 
> following error:
>  
> ERROR: Invalid UTF-8 byte sequence detected near byte 0xb0
>  
> As far as I understand this problem is related to character encoding.  I 
> wonder if anybody knows what can be done about that?
>  
> --
> Alex Sorokine, Ph.D. <sorokina@ornl.gov <mailto:sorokina@ornl.gov>>
> Oak Ridge National Laboratory
> tel. (865) 576-7597 fax. (865) 241-6261
>  
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From hernan.deangelis at glocalnet.net  Sat Dec 10 18:03:50 2005
From: hernan.deangelis at glocalnet.net (=?iso-8859-1?q?Hern=E1n_De_Angelis?=)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problems installing gdal-grass-1.3.1
In-Reply-To: <4399600D.5010905@maitro.net>
References: <4399600D.5010905@maitro.net>
Message-ID: <200512110003.50857.hernan.deangelis@glocalnet.net>

Hi,

You have to give the basic path:

--with-grass=/usr/local/grass-6.0.1/

hope this helps


El Viernes 09 Diciembre 2005 11.44, Maik Tr?mel escribi?:
> Hello ,
>
> I've got a problem installing gdal-grass-1.3.1 from binarys. Up till now
> nobody was able to help me.
>
> I have installed:
> proj-4.4.9
> geos-2.1.4
> gdal-1.3.1
> grass: 6.0.1
> and now i want to install gdal-grass-1.3.1. But when I run "./configure
> --with-grass='/.../grass-6.0.1/lib/' " I get as result:
>
> checking for gcc... gcc
> checking for C compiler default output file name... a.out
> checking whether the C compiler works... yes
> checking whether we are cross compiling... no
> checking for suffix of executables...
> checking for suffix of object files... o
> checking whether we are using the GNU C compiler... yes
> checking whether gcc accepts -g... yes
> checking for gcc option to accept ANSI C... none needed
> checking for g++... g++
> checking whether we are using the GNU C++ compiler... yes
> checking whether g++ accepts -g... yes
> checking for ranlib... ranlib
> /usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/../../../../x86_64-suse-linux/bi
>n/ld: conftest2.o: relocation R_X86_64_32 can not be used when making a
> shared object
> ; recompile with -fPIC
> conftest2.o: could not read symbols: Bad value
> collect2: ld returned 1 exit status
> checking for g++ -shared ... no(1)
> checking for ld -shared ... no
> checking for gdal-config... /usr/local/bin/gdal-config
> using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
> checking for G_asprintf in -lgrass_gis... no
> configure: error: --with-grass=/usr/local/grass-6.0.1/lib/ requested,
> but librar
> ies not found!
>
> What's going wrong?
> Thanks a lot for your help!
>
> Greetings Maik
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

-- 

Hern?n De Angelis
hernan.deangelis@glocalnet.net


From warmerdam at pobox.com  Sat Dec 10 23:34:28 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] "Old-Style" ESRI .PRJ files -- Access Violation on
	ImportFromESRI
In-Reply-To: <439B2845.7000405@happysquirrel.com>
References: <200512101702.jBAH1w2b022907@duke.maptools.org>
	<439B2845.7000405@happysquirrel.com>
Message-ID: <931f8ea90512102034pbfca121qb217fcae8e6db9aa@mail.gmail.com>

On 12/10/05, Christopher Michaelis <cmichaelis@happysquirrel.com> wrote:
> Ben,
>
> Thanks very much for the "CSLLoad" trick! That seemed to make all the
> difference in the world. Using your code excerpt makes it work
> beautifully... apparently my fread approach was flawed. Problem solved!

Chris,

The problem is that importFromESRI() expects a "string
list" which should be an array of "char *" with a NULL as the
last entry in the array.  Because you just passed in &pszWKT
there was no proper NULL terminator for the list.

I presume that was the cause of the crash.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From etdube at globetrotter.net  Sun Dec 11 12:55:35 2005
From: etdube at globetrotter.net (Etienne Dube)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: UTF-8 problem with ogr2ogr
In-Reply-To: <439B5BF2.6010609@interserv.com>
References: <428543BBA8AC7443BA10B0F491C6B056177970@ORNLEXCHANGE.ornl.gov>
	<439B5BF2.6010609@interserv.com>
Message-ID: <439C6817.5050401@globetrotter.net>

This is correct. I've managed to insert latin1 characters in a 
UTF8-encoded DB with ogr2ogr, by setting the PGCLIENTENCODING 
environment variable to LATIN1 (prior to running ogr). In Windows, that 
would be:

SET PGCLIENTENCODING=LATIN1

Good luck,

Etienne


Charlie Savage wrote:
> What most likely is happening:
>
> * Your postgresql database is in UTF8
> * You are loading data from some other encoding, lets say Latin1, 
> where the character is greater than 155.  For example, something like 
> a tilde (~)
> * OGR loads up the postgresql client libraries it is linked against
> * The library code assumes utf8 and is not told otherwise by ogr2ogr
> * The ~ character is not valid in utf8 because in utf8 it occupies 
> more than one btye
> * You get an error message.
>
> Unfortunately, ogr2ogr does not support encodings at all and thus 
> there isn't much you can do.  I think you may be able to influence the 
> encoding the postgresql client library assumes by fiddling with 
> environmental variables or the locale settings on Linux.  You'll have 
> to check the postgresql documenation to see.   Alternatively, 
> recompile ogr2ogr and add in a call to the postgresql client library 
> telling it the encoding of the source dataset.
>
> For ogr2ogr support for encodings you'll have to lobby Frank.
>
> Charlie
>
>
> Sorokine, Alexandre wrote:
>> Hello!
>>  
>> I was trying to convert an ESRI .mdb into PostgreSQL/PostGIS with 
>> ogr2ogr (from FWTools 1.0.0a7 on Windows).  However, I've got the 
>> following error:
>>  
>> ERROR: Invalid UTF-8 byte sequence detected near byte 0xb0
>>  
>> As far as I understand this problem is related to character 
>> encoding.  I wonder if anybody knows what can be done about that?
>>  
>> -- 
>> Alex Sorokine, Ph.D. <sorokina@ornl.gov <mailto:sorokina@ornl.gov>>
>> Oak Ridge National Laboratory
>> tel. (865) 576-7597 fax. (865) 241-6261
>>  
>>
>>
>> ------------------------------------------------------------------------
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From warmerdam at pobox.com  Sun Dec 11 13:45:58 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: UTF-8 problem with ogr2ogr
In-Reply-To: <439C6817.5050401@globetrotter.net>
References: <428543BBA8AC7443BA10B0F491C6B056177970@ORNLEXCHANGE.ornl.gov>
	<439B5BF2.6010609@interserv.com> <439C6817.5050401@globetrotter.net>
Message-ID: <931f8ea90512111045l3f134a26m1949fadded1f5ef1@mail.gmail.com>

On 12/11/05, Etienne Dube <etdube@globetrotter.net> wrote:
> This is correct. I've managed to insert latin1 characters in a
> UTF8-encoded DB with ogr2ogr, by setting the PGCLIENTENCODING
> environment variable to LATIN1 (prior to running ogr). In Windows, that
> would be:
>
> SET PGCLIENTENCODING=LATIN1

Etienne / Charlie,

I have added a note on PGCLIENTENCODING in the postgres/postgis
driver details.  BTW, I am also getting "encouragement" from Andrey
to deal with encodings in OGR.  Perhaps something will need to be
done, as loath as I am to deal with it.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sun Dec 11 14:09:41 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: World Wind
In-Reply-To: <000001c5fe0d$b18c9ea0$14a5dbe0$@nasa.gov>
References: <000001c5fe0d$b18c9ea0$14a5dbe0$@nasa.gov>
Message-ID: <931f8ea90512111109m50b66f98pd44b777791ca16a@mail.gmail.com>

On 12/10/05, Chris Maxwell <cmaxwell@arc.nasa.gov> wrote:
> My name is Chris Maxwell, and I'm the lead software developer on the NASA
> World Wind project.  I was told you were the guy to speak to when it comes
> to Proj and GDAL.  Let me first say that our group readily uses the GDAL
> suite of utility programs for much of our data process flow, and are eager
> to try to use it inside of the actual World Wind client software (in our
> next version).  I've very impressed with the performance of the GDAL
> programs, and they easily compete with quite a few high-end commercial
> packages we've used.

Chris,

Thanks.

> I've been trying to figure out how to reproject the NASA Blue Marble from
> it's native Plate Carree projection into Polar Stereographic projection (for
> just the upper latitudes for the north and south pole).  I'm running into
> problems with this, and I'm wondering if you have some experience that you
> could pass my way.  Is this something that GDAL cannot handle, or is it more
> of a user-error?

There are some tricky aspects to warping around the polar point.

I have an old blue marble with georeferencing that looks like this:

warmerda@gdal2200[100]% gdalinfo world.tif
Driver: GTiff/GeoTIFF
Size is 2048, 1024
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.000000,90.000000)
Pixel Size = (0.17578125,-0.17578125)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-180.0000000,  90.0000000) (180d 0'0.00"W, 90d 0'0.00"N)
Lower Left  (-180.0000000, -90.0000000) (180d 0'0.00"W, 90d 0'0.00"S)
Upper Right ( 180.0000000,  90.0000000) (180d 0'0.00"E, 90d 0'0.00"N)
Lower Right ( 180.0000000, -90.0000000) (180d 0'0.00"E, 90d 0'0.00"S)
Center      (   0.0000000,   0.0000000) (  0d 0'0.01"E,  0d 0'0.01"N)
Band 1 Block=2048x4 Type=Byte, ColorInterp=Red
Band 2 Block=2048x4 Type=Byte, ColorInterp=Green
Band 3 Block=2048x4 Type=Byte, ColorInterp=Blue

I tried reprojecting a north pole region out of this, and found I needed
the following to be successful:

gdalwarp -t_srs EPSG:32661 -te 0 0 4000000 4000000 world.tif
northpole.tif -ts 500 500 -wo SAMPLE_GRID=YES -wo SOURCE_EXTRA=50

The "-t_srs EPSG:32661" sets the projection to Universal Polar Stereographic
North (which has a false easting and northing of 2000000m).

The -te establishes a default extents, and the -ts says it should be
generated with an output size of 500 pixels by 500 lines.    I found
that gdalwarp gets confused about pixel sizes in the polar regions so
I set the extents and size explicitly.  You could also use the -tr
instead of -ts to set a target pixel resolution instead of target file
size.   The 0 0 4000000 4000000 box gives a 4000km by 4000km
region centered on the pole.

The -wo SAMPLE_GRID=YES forces gdalwarp to determine the source
region based on a sampling of locations through the output square, not
just around the edges.  If you just walk the edges of a box centered on
the pole, you won't realize you need the data that is very near the pole.

The -wo SOURCE_EXTRA adds 50 pixels to any source rectangle
computed to make up for the inperfectness of the sampling scheme.

With that I was able to get a nice result out.

  http://home.gdal.org/~warmerda/northpole.png

I have taken the liberty of cc:ing this response to gdal-dev, since
other folks also run into problems with these sorts of warps.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cermak at sfos.uaf.edu  Mon Dec 12 03:30:27 2005
From: cermak at sfos.uaf.edu (Rob Cermak)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] missing_value dods/opendap implemnetation (fix/patch) /
	Colormap
Message-ID: <Pine.LNX.4.44.0512112317290.733-100000@topcat.sfos.uaf.edu>

Hiya,

I spent a lot of time scratching my head wondering why missing_value 
wasn't working as described for dods/opendap.   
http://www.gdal.org/frmt_dods.html

Browsing through the code... it wasn't there.  Probably legacy from the
netcdf/hdf drivers if you open a file locally :)  Anyways, I'm not a C++
hacker, but I think I managed to add the support for missing_value.  
Makes the statistics and rasters via Mapserver/Mapscript much more usable
:)

gdalinfo -mm -stats 
"http://ak.aoos.org/opendap/nph-dods/data/NCEP_WAVES/test.nc?wdirsfc[0][y][x]"
Driver: DODS/DAP 3.x servers
Size is 155, 123
Coordinate System is `'
Origin = (-200.750000,44.625000)
Pixel Size = (0.50000000,0.25000000)
Corner Coordinates:
Upper Left  (    -200.750,      44.625) 
Lower Left  (    -200.750,      75.375) 
Upper Right (-123.2500000,  44.6250000) 
Lower Right (-123.2500000,  75.3750000) 
Center      (-162.0000000,  60.0000000) 
Band 1 Block=155x123 Type=Float64, ColorInterp=Undefined
    Computed Min/Max=0.000,359.990
  Minimum=0.000, Maximum=359.990, Mean=210.012, StdDev=112.840
  NoData Value=-999
Metadata:
  STATISTICS_MINIMUM=0
  STATISTICS_MAXIMUM=359.98999023438
  STATISTICS_MEAN=210.01167189722
  STATISTICS_STDDEV=112.83990256545

Patch for 1.3.1 (should be good for 1.3.0):

http://ak.aoos.org/data/patch/dods_miss.patch

An unpatched version 1.3.0 gives you:

Driver: DODS/DAP 3.x servers
Size is 155, 123
Coordinate System is `'
Origin = (-200.750000,44.625000)
Pixel Size = (0.50000000,0.25000000)
Corner Coordinates:
Upper Left  (    -200.750,      44.625) 
Lower Left  (    -200.750,      75.375) 
Upper Right (-123.2500000,  44.6250000) 
Lower Right (-123.2500000,  75.3750000) 
Center      (-162.0000000,  60.0000000) 
Band 1 Block=155x123 Type=Float64, ColorInterp=Undefined
    Computed Min/Max=-999.000,359.990
  Minimum=-999.000, Maximum=359.990, Mean=-212.334, StdDev=583.549
Metadata:
  STATISTICS_MINIMUM=-999
  STATISTICS_MAXIMUM=359.98999023438
  STATISTICS_MEAN=-212.33386887569
  STATISTICS_STDDEV=583.54930912611

Its going to take much longer how to figure out the Colormap...

Enjoy!

Rob
-- 
Rob Cermak : 907-474-7948 : FAX 907-474-7204 : PGP = 0x75869A6E
Alaska Ocean Observing System : Data Management 
School of Fisheries and Ocean Sciences : University of Alaska Fairbanks
cermak@sfos.uaf.edu : fnjrc1@uaf.edu
ED9U1M7P01@alaska.edu : cermak@alaska.edu


From perrygeo at gmail.com  Mon Dec 12 04:15:49 2005
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>

Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind
enough to let me keep the rights to all of my code ;-) So I'll release
it to the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal
1.3.1 on linux and I'd like to see if anyone else has any luck on
different platforms. Of course suggestions and changes are very
appreciated as my C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net
-------------- next part --------------
A non-text attachment was scrubbed...
Name: hillshade.cpp
Type: text/x-c++src
Size: 6100 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051212/9722d930/hillshade.bin
From maik.troemel at maitro.net  Mon Dec 12 05:00:28 2005
From: maik.troemel at maitro.net (=?ISO-8859-1?Q?Maik_Tr=F6mel?=)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problems installing gdal-grass-1.3.1
In-Reply-To: <200512091451.08040.rnuske@gwdg.de>
References: <4399600D.5010905@maitro.net> <200512091451.08040.rnuske@gwdg.de>
Message-ID: <439D4A3C.3090107@maitro.net>

Ok,

it works!

But now I get another error running make install:

[...]
install -d /usr/lib/gdalplugins
cp gdal_GRASS.so /usr/lib/gdalplugins
cp: cannot stat `gdal_GRASS.so': No such file or directory
make: *** [install] Error 1

Maik




Robert Nuske wrote:

>Hi Maik,
>
>I am not sure but it looks like something I experienced when i first tried to 
>compile gdal-grass.
>
>gdal-grass is not finding the libraries, because it doesn't know where to look 
>for them.
>
>Eventually i found an old mail on one of the mail-list stating that one should 
>run ldconfig.
>
>at the first glance i thought that doesn't help., since ldconfig run with 
>standard settings updates only the libraries in places known by the system.
>
>On my system (Debian testing) I had to add the paths to the libraries in 
>question (/usr/local/lib & /usr/local/grass/lib) to /etc/ld.so.conf . And run 
>ldconfig again.
>
>After that gdal-grass compiled fine.
>
>hope that helps,
>  robert
>
>Maik Tr?mel wrote:
>  
>
>>Hello ,
>>
>>I've got a problem installing gdal-grass-1.3.1 from binarys. Up till now
>>nobody was able to help me.
>>
>>I have installed:
>>proj-4.4.9
>>geos-2.1.4
>>gdal-1.3.1
>>grass: 6.0.1
>>and now i want to install gdal-grass-1.3.1. But when I run "./configure
>>--with-grass='/.../grass-6.0.1/lib/' " I get as result:
>>
>>checking for gcc... gcc
>>checking for C compiler default output file name... a.out
>>checking whether the C compiler works... yes
>>checking whether we are cross compiling... no
>>checking for suffix of executables...
>>checking for suffix of object files... o
>>checking whether we are using the GNU C compiler... yes
>>checking whether gcc accepts -g... yes
>>checking for gcc option to accept ANSI C... none needed
>>checking for g++... g++
>>checking whether we are using the GNU C++ compiler... yes
>>checking whether g++ accepts -g... yes
>>checking for ranlib... ranlib
>>/usr/lib64/gcc-lib/x86_64-suse-linux/3.3.3/../../../../x86_64-suse-linux/bi
>>n/ld: conftest2.o: relocation R_X86_64_32 can not be used when making a
>>shared object
>>; recompile with -fPIC
>>conftest2.o: could not read symbols: Bad value
>>collect2: ld returned 1 exit status
>>checking for g++ -shared ... no(1)
>>checking for ld -shared ... no
>>checking for gdal-config... /usr/local/bin/gdal-config
>>using /usr/local/lib/gdalplugins as GDAL shared library autoload directory
>>checking for G_asprintf in -lgrass_gis... no
>>configure: error: --with-grass=/usr/local/grass-6.0.1/lib/ requested,
>>but librar
>>ies not found!
>>
>>What's going wrong?
>>Thanks a lot for your help!
>>
>>Greetings Maik
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@lists.maptools.org
>>http://lists.maptools.org/mailman/listinfo/gdal-dev
>>    
>>
>
>  
>


From bfraser at geoanalytic.com  Mon Dec 12 10:07:08 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
References: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>
Message-ID: <00ad01c5ff2d$b86c6590$160002c0@shark>

Matt,

  I'm interested.  I'd be willing to compile it on Windows...

Brent Fraser

----- Original Message ----- 
From: "Matthew Perry" <perrygeo@gmail.com>
To: "Gdal-Dev" <gdal-dev@lists.maptools.org>
Sent: Monday, December 12, 2005 2:15 AM
Subject: [Gdal-dev] shaded relief utility


Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind
enough to let me keep the rights to all of my code ;-) So I'll release
it to the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal
1.3.1 on linux and I'd like to see if anyone else has any luck on
different platforms. Of course suggestions and changes are very
appreciated as my C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net



----------------------------------------------------------------------------
----


> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Dec 12 10:20:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] missing_value dods/opendap implemnetation (fix/patch)
	/ Colormap
In-Reply-To: <Pine.LNX.4.44.0512112317290.733-100000@topcat.sfos.uaf.edu>
References: <Pine.LNX.4.44.0512112317290.733-100000@topcat.sfos.uaf.edu>
Message-ID: <931f8ea90512120720q1c1d76dm69a9cfd4c1051adb@mail.gmail.com>

On 12/12/05, Rob Cermak <cermak@sfos.uaf.edu> wrote:
> Hiya,
>
> I spent a lot of time scratching my head wondering why missing_value
> wasn't working as described for dods/opendap.
> http://www.gdal.org/frmt_dods.html
>
> Browsing through the code... it wasn't there.  Probably legacy from the
> netcdf/hdf drivers if you open a file locally :)  Anyways, I'm not a C++
> hacker, but I think I managed to add the support for missing_value.
> Makes the statistics and rasters via Mapserver/Mapscript much more usable
> :)

Rob,

I have applied your patch as provided.  I wouldn't normally
implement the SetNoData() method for a read-only format
like DODS, but it is harmless enough.

I have also taken the liberty of removing some of the old
code, READMEs and so forth from the gdal/frmts/dods
directory that applied to the earlier generation implementation
by James.  It has apparently been confusing to some folks.

Thank for your contribution!

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From sorokina at ornl.gov  Mon Dec 12 10:27:00 2005
From: sorokina at ornl.gov (Sorokine, Alexandre)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: UTF-8 problem with ogr2ogr
Message-ID: <428543BBA8AC7443BA10B0F491C6B056177973@ORNLEXCHANGE.ornl.gov>

Charlie and Etienne,

Charlie was right and there was an offending symbol in the database but
Etienne's method fixed it.  Thanks for your help!

> -----Original Message-----
> From: Etienne Dube [mailto:etdube@globetrotter.net] 
> Sent: Sunday, December 11, 2005 12:56 PM
> To: gdal-dev@lists.maptools.org
> Cc: Charlie Savage; Sorokine, Alexandre
> Subject: Re: [Gdal-dev] Re: UTF-8 problem with ogr2ogr
> 
> This is correct. I've managed to insert latin1 characters in 
> a UTF8-encoded DB with ogr2ogr, by setting the 
> PGCLIENTENCODING environment variable to LATIN1 (prior to 
> running ogr). In Windows, that would be:
> 
> SET PGCLIENTENCODING=LATIN1
> 
> Good luck,
> 
> Etienne
> 
> 
> Charlie Savage wrote:
> > What most likely is happening:
> >
> > * Your postgresql database is in UTF8
> > * You are loading data from some other encoding, lets say Latin1, 
> > where the character is greater than 155.  For example, 
> something like 
> > a tilde (~)
> > * OGR loads up the postgresql client libraries it is linked against
> > * The library code assumes utf8 and is not told otherwise by ogr2ogr
> > * The ~ character is not valid in utf8 because in utf8 it occupies 
> > more than one btye
> > * You get an error message.
> >
> > Unfortunately, ogr2ogr does not support encodings at all and thus 
> > there isn't much you can do.  I think you may be able to 
> influence the 
> > encoding the postgresql client library assumes by fiddling with 
> > environmental variables or the locale settings on Linux.  
> You'll have
> > to check the postgresql documenation to see.   Alternatively, 
> > recompile ogr2ogr and add in a call to the postgresql 
> client library 
> > telling it the encoding of the source dataset.
> >
> > For ogr2ogr support for encodings you'll have to lobby Frank.
> >
> > Charlie
> >
> >
> > Sorokine, Alexandre wrote:
> >> Hello!
> >>  
> >> I was trying to convert an ESRI .mdb into PostgreSQL/PostGIS with 
> >> ogr2ogr (from FWTools 1.0.0a7 on Windows).  However, I've got the 
> >> following error:
> >>  
> >> ERROR: Invalid UTF-8 byte sequence detected near byte 0xb0
> >>  
> >> As far as I understand this problem is related to 
> character encoding.  
> >> I wonder if anybody knows what can be done about that?
> >>  
> >> --
> >> Alex Sorokine, Ph.D. <sorokina@ornl.gov 
> <mailto:sorokina@ornl.gov>> 
> >> Oak Ridge National Laboratory tel. (865) 576-7597 fax. 
> (865) 241-6261
> >>  
> >>
> >>
> >> 
> --------------------------------------------------------------
> ----------
> >>
> >> _______________________________________________
> >> Gdal-dev mailing list
> >> Gdal-dev@lists.maptools.org
> >> http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
> >
> 
> 


From MChapman at sanz.com  Mon Dec 12 11:59:16 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C220@mailman.san.com>

Matt,

Can you send it to me too?

Thanks,
Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Brent Fraser
Sent: Monday, December 12, 2005 8:07 AM
To: Matthew Perry; Gdal-Dev
Subject: Re: [Gdal-dev] shaded relief utility

Matt,

  I'm interested.  I'd be willing to compile it on Windows...

Brent Fraser

----- Original Message ----- 
From: "Matthew Perry" <perrygeo@gmail.com>
To: "Gdal-Dev" <gdal-dev@lists.maptools.org>
Sent: Monday, December 12, 2005 2:15 AM
Subject: [Gdal-dev] shaded relief utility


Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind
enough to let me keep the rights to all of my code ;-) So I'll release
it to the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal
1.3.1 on linux and I'd like to see if anyone else has any luck on
different platforms. Of course suggestions and changes are very
appreciated as my C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net



------------------------------------------------------------------------
----
----


> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From MChapman at sanz.com  Mon Dec 12 11:59:57 2005
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <ED3A48B9840E594890A2BC172D11946502F9C221@mailman.san.com>

Forget that, I see the attachment in the last posting.

Martin

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Brent Fraser
Sent: Monday, December 12, 2005 8:07 AM
To: Matthew Perry; Gdal-Dev
Subject: Re: [Gdal-dev] shaded relief utility

Matt,

  I'm interested.  I'd be willing to compile it on Windows...

Brent Fraser

----- Original Message ----- 
From: "Matthew Perry" <perrygeo@gmail.com>
To: "Gdal-Dev" <gdal-dev@lists.maptools.org>
Sent: Monday, December 12, 2005 2:15 AM
Subject: [Gdal-dev] shaded relief utility


Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind
enough to let me keep the rights to all of my code ;-) So I'll release
it to the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal
1.3.1 on linux and I'd like to see if anyone else has any luck on
different platforms. Of course suggestions and changes are very
appreciated as my C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net



------------------------------------------------------------------------
----
----


> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From t.r.decarlo at larc.nasa.gov  Mon Dec 12 13:23:32 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem with gdal+postgresql on RHEL3
Message-ID: <02c201c5ff49$28ca28c0$959877c6@cts1149>

I've got a Red Hat Enterprise Linux v3 box that I inherited and I want to
set up as a geospatial data server and GIS workstation. I've successfully
compiled and installed PostgreSQL v8.1.0 and PostGIS v1.0.6 into the
/usr/local directory. I've run the gdal configure using "./configure
--with-grass=/usr/local/grass-6.0.1
--with-pg=/usr/local/pgsql/bin/pg_config". 

However, when I try to compile gdal the linker picks up the wrong version of
PostgreSQL. (The computer came with an older version of PostgreSQL installed
and I'm not sure what will break if I just delete it.) The linker warnings
look like this:

/usr/bin/ld: warning: libpq.so.3, needed by ../.libs/libgdal.so, may
conflict with libpq.so.4

Do you have any tips on how to get gdal configured properly in this
environment?

Thanks,
Thom

--
Thom DeCarlo
-------------------------------------------------------
     Is it a bad sign if you spend the day wondering
why there are no laws against what you do for a living?
                                - Dilbert




From warmerdam at pobox.com  Mon Dec 12 13:52:34 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem with gdal+postgresql on RHEL3
In-Reply-To: <02c201c5ff49$28ca28c0$959877c6@cts1149>
References: <02c201c5ff49$28ca28c0$959877c6@cts1149>
Message-ID: <931f8ea90512121052i24189939r1f4154330402e155@mail.gmail.com>

On 12/12/05, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> I've got a Red Hat Enterprise Linux v3 box that I inherited and I want to
> set up as a geospatial data server and GIS workstation. I've successfully
> compiled and installed PostgreSQL v8.1.0 and PostGIS v1.0.6 into the
> /usr/local directory. I've run the gdal configure using "./configure
> --with-grass=/usr/local/grass-6.0.1
> --with-pg=/usr/local/pgsql/bin/pg_config".
>
> However, when I try to compile gdal the linker picks up the wrong version of
> PostgreSQL. (The computer came with an older version of PostgreSQL installed
> and I'm not sure what will break if I just delete it.) The linker warnings
> look like this:

Thom,

If you look in GDALmake.opt after configuring you should
have -lpq appearing in your LIBS variable.  Change the
part that says "-lpq" to "-L/usr/local/pgsql/lib -lpq" to force
it to link against a particular library.

When configure fails you, don't hesitate to doctor up
the GDALmake.opt.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From Martin.Spott at mgras.net  Mon Dec 12 14:20:02 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem with gdal+postgresql on RHEL3
References: <02c201c5ff49$28ca28c0$959877c6@cts1149>
Message-ID: <dnkih2$1ani$1@osprey.mgras.de>

"Thom DeCarlo" wrote:

> However, when I try to compile gdal the linker picks up the wrong version of
> PostgreSQL. (The computer came with an older version of PostgreSQL installed
> and I'm not sure what will break if I just delete it.)

Simply try do "rpm -e" the old PostgreSQL installation. If other
packages depend on it, RPM will tell you. Having incompatible versions
of a library is almost always a bad idea (TM  ;-)

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From surgpub at telkomsa.net  Mon Dec 12 15:39:45 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>
References: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>
Message-ID: <200512122239.45525.surgpub@telkomsa.net>

On Monday 12 December 2005 11:15, Matthew Perry wrote:
> Hey folks,
>
>   If anyone's interested, I created a GDAL-based utility for creating
> shaded relief maps from a DEM. This was for a client who was kind
> enough to let me keep the rights to all of my code ;-) So I'll release
> it to the public domain in case anyone can find a use for it.
>
>   Basically it's a simple GDAL/C++  port of the GRASS algorithm from
> r.shaded.relief. Of course this has the advantage of being able to use
> any GDAL DEM not just a GRASS map.  I've compiled it against gdal
> 1.3.1 on linux and I'd like to see if anyone else has any luck on
> different platforms. Of course suggestions and changes are very
> appreciated as my C++ experience is a bit weak.


Hi Matt

Compiled easily enough on my Kubuntu Breezy system with "g++ hillshade.cpp 
-lgdal -o hillshade" and works perfectly.

If you would like to add an easy to learn and manage cross platform build 
environment take a look at scons.

Now I'm just in need of a tool to make color relief maps. Maybe I can hack 
yours.  :)

Thanks
Paul

From t.r.decarlo at larc.nasa.gov  Mon Dec 12 15:41:50 2005
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem with gdal+postgresql on RHEL3
In-Reply-To: <931f8ea90512121052i24189939r1f4154330402e155@mail.gmail.com>
Message-ID: <02d001c5ff5c$7a454000$959877c6@cts1149>

> -----Original Message-----
> From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
> Frank Warmerdam
> Sent: Monday, December 12, 2005 1:53 PM
> To: Thom DeCarlo
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] Problem with gdal+postgresql on RHEL3
> 
> On 12/12/05, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> > I've got a Red Hat Enterprise Linux v3 box that I inherited and I want
> to
> > set up as a geospatial data server and GIS workstation. I've
> successfully
> > compiled and installed PostgreSQL v8.1.0 and PostGIS v1.0.6 into the
> > /usr/local directory. I've run the gdal configure using "./configure
> > --with-grass=/usr/local/grass-6.0.1
> > --with-pg=/usr/local/pgsql/bin/pg_config".
> >
> > However, when I try to compile gdal the linker picks up the wrong
> version of
> > PostgreSQL. (The computer came with an older version of PostgreSQL
> installed
> > and I'm not sure what will break if I just delete it.) The linker
> warnings
> > look like this:
> 
> Thom,
> 
> If you look in GDALmake.opt after configuring you should
> have -lpq appearing in your LIBS variable.  Change the
> part that says "-lpq" to "-L/usr/local/pgsql/lib -lpq" to force
> it to link against a particular library.
> 

Hmmm... that's odd. The LIBS variable included the substring
 "-lpq -L/usr/local/pgsql/lib -lpq". (For some reason, "-lpq" was included
twice.) I removed the one before the "-L" and it seems to be recompiling
properly.

I'm still trying to figure out rpm's. (complete Linux newbie here) The only
postgresql rpms that I've found (/var/spool/repackage/rh-postgresql-*)
respond with "not installed" to the "rpm -e" command.

Thanks for the off-topic help. I really appreciate it.

Thom


> When configure fails you, don't hesitate to doctor up
> the GDALmake.opt.
> 
> Best regards,
> --
> ---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent



From bfraser at geoanalytic.com  Mon Dec 12 16:32:44 2005
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
References: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>
	<200512122239.45525.surgpub@telkomsa.net>
Message-ID: <278701c5ff63$97050160$160002c0@shark>

Paul, Matt,

  And it compiled ok on Windows.  I justed editted the makefile.vc file to
include hillshade.exe.  I haven't actually tried it yet.

  Like Paul,  I'm actually interested in shading an image file based on a
DEM (if that's what you meant, Paul)

Brent


----- Original Message ----- 
From: "Paul Surgeon" <surgpub@telkomsa.net>
To: <gdal-dev@lists.maptools.org>
Sent: Monday, December 12, 2005 1:39 PM
Subject: Re: [Gdal-dev] shaded relief utility


> On Monday 12 December 2005 11:15, Matthew Perry wrote:
> > Hey folks,
> >
> >   If anyone's interested, I created a GDAL-based utility for creating
> > shaded relief maps from a DEM. This was for a client who was kind
> > enough to let me keep the rights to all of my code ;-) So I'll release
> > it to the public domain in case anyone can find a use for it.
> >
> >   Basically it's a simple GDAL/C++  port of the GRASS algorithm from
> > r.shaded.relief. Of course this has the advantage of being able to use
> > any GDAL DEM not just a GRASS map.  I've compiled it against gdal
> > 1.3.1 on linux and I'd like to see if anyone else has any luck on
> > different platforms. Of course suggestions and changes are very
> > appreciated as my C++ experience is a bit weak.
>
>
> Hi Matt
>
> Compiled easily enough on my Kubuntu Breezy system with "g++ hillshade.cpp
> -lgdal -o hillshade" and works perfectly.
>
> If you would like to add an easy to learn and manage cross platform build
> environment take a look at scons.
>
> Now I'm just in need of a tool to make color relief maps. Maybe I can hack
> yours.  :)
>
> Thanks
> Paul
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From Doug_Newcomb at fws.gov  Mon Dec 12 16:32:45 2005
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Problem with gdal+postgresql on RHEL3
In-Reply-To: <02d001c5ff5c$7a454000$959877c6@cts1149>
Message-ID: <OF118B7D28.23BB01E7-ON852570D5.00763400-852570D5.00765AE7@fws.gov>

Thom,
      rpm -qa |grep post
should list all rpms with post in their name, and should get all of the
postgresql rpms you need to kill.
Doug

Doug Newcomb
USFWS
Raleigh, NC
919-856-4520 ext. 14 doug_newcomb@fws.gov
---------------------------------------------------------------------------------------------------------

The opinions I express are my own and are not representative of the
official policy of the U.S.Fish and Wildlife Service or Dept. of Interior.
I left my signature file in /dev/null


                                                                           
             "Thom DeCarlo"                                                
             <t.r.decarlo@larc                                             
             .nasa.gov>                                                 To 
             Sent by:                  <gdal-dev@lists.maptools.org>       
             gdal-dev-bounces@                                          cc 
             lists.maptools.or                                             
             g                                                     Subject 
                                       RE: [Gdal-dev] Problem with         
                                       gdal+postgresql on RHEL3            
             12/12/2005 03:41                                              
             PM                                                            
                                                                           
                                                                           
                                                                           
                                                                           




> -----Original Message-----
> From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
> Frank Warmerdam
> Sent: Monday, December 12, 2005 1:53 PM
> To: Thom DeCarlo
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] Problem with gdal+postgresql on RHEL3
>
> On 12/12/05, Thom DeCarlo <t.r.decarlo@larc.nasa.gov> wrote:
> > I've got a Red Hat Enterprise Linux v3 box that I inherited and I want
> to
> > set up as a geospatial data server and GIS workstation. I've
> successfully
> > compiled and installed PostgreSQL v8.1.0 and PostGIS v1.0.6 into the
> > /usr/local directory. I've run the gdal configure using "./configure
> > --with-grass=/usr/local/grass-6.0.1
> > --with-pg=/usr/local/pgsql/bin/pg_config".
> >
> > However, when I try to compile gdal the linker picks up the wrong
> version of
> > PostgreSQL. (The computer came with an older version of PostgreSQL
> installed
> > and I'm not sure what will break if I just delete it.) The linker
> warnings
> > look like this:
>
> Thom,
>
> If you look in GDALmake.opt after configuring you should
> have -lpq appearing in your LIBS variable.  Change the
> part that says "-lpq" to "-L/usr/local/pgsql/lib -lpq" to force
> it to link against a particular library.
>

Hmmm... that's odd. The LIBS variable included the substring
 "-lpq -L/usr/local/pgsql/lib -lpq". (For some reason, "-lpq" was included
twice.) I removed the one before the "-L" and it seems to be recompiling
properly.

I'm still trying to figure out rpm's. (complete Linux newbie here) The only
postgresql rpms that I've found (/var/spool/repackage/rh-postgresql-*)
respond with "not installed" to the "rpm -e" command.

Thanks for the off-topic help. I really appreciate it.

Thom


> When configure fails you, don't hesitate to doctor up
> the GDALmake.opt.
>
> Best regards,
> --
>
---------------------------------------+----------------------------------
> ----
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From ealpert at digitalglobe.com  Mon Dec 12 18:04:09 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BBC9@COMAIL01.digitalglobe.com>



Thanks a lot! Works great!

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matthew Perry
Sent: Monday, December 12, 2005 2:16 AM
To: Gdal-Dev
Subject: [Gdal-dev] shaded relief utility


Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind enough
to let me keep the rights to all of my code ;-) So I'll release it to
the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal 1.3.1
on linux and I'd like to see if anyone else has any luck on different
platforms. Of course suggestions and changes are very appreciated as my
C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com
http://www.perrygeo.net


From craig.miller at spatialminds.com  Mon Dec 12 18:20:07 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Postgis DeleteLayer(int iLayer) method
Message-ID: <002601c5ff72$991741c0$0401a8c0@vaio>

The existing PostGIS driver didn't have support for deleting a layer via the
datasource (OGRDatasource::DeleteLayer(int iLayer).  It did have a method
for deleting a layer via a name, but this isn't exposed via the C++ API.  I
quickly adapted that function to the DeleteLayer(int iLayer) method, so
there would be an implementation in the driver available.  I've done very
little testing of the method, and I didn't make very good use of the
OGRErr/CPLError mechanism.  I only implemented enough error handling to get
it to work.

Here is the code (Just add it to ogrpgdatasource.cpp and delcare the method
in ogr_pg.h):

/************************************************************************/
/*                            DeleteLayer()                             */
/************************************************************************/
OGRErr OGRPGDataSource::DeleteLayer(int iLayer)
{
	if (iLayer >= nLayers)
	{
		CPLDebug( "OGR_PG", "Layer index is out of range.");
        return OGRERR_FAILURE;  // Index out of range error.
	}
	
	if (papoLayers[iLayer] == NULL)
	{
		CPLDebug( "OGR_PG", "In memory datasource model is
corrupt.");
		return OGRERR_FAILURE;  // Corrupt layer
	}

/* -------------------------------------------------------------------- */
/*      Blow away our OGR structures related to the layer.  This is     */
/*      pretty dangerous if anything has a reference to this layer!     */
/* -------------------------------------------------------------------- */
    CPLDebug( "OGR_PG", "DeleteLayer()" );
	
	char* pszLayerName =
strdup(papoLayers[iLayer]->GetLayerDefn()->GetName());


    delete papoLayers[iLayer];
    memmove( papoLayers + iLayer, papoLayers + iLayer + 1,
             sizeof(void *) * (nLayers - iLayer - 1) );
    nLayers--;

/* -------------------------------------------------------------------- */
/*      Remove from the database.                                       */
/* -------------------------------------------------------------------- */
    PGresult            *hResult;
    char                szCommand[1024];

    hResult = PQexec(hPGConn, "BEGIN");
    PQclear( hResult );

    if( bHavePostGIS )
    {
        sprintf( szCommand,
                 "SELECT DropGeometryColumn('%s','%s','wkb_geometry')",
                 pszDBName, pszLayerName );

        CPLDebug( "OGR_PG", "PGexec(%s)", szCommand );

        hResult = PQexec( hPGConn, szCommand );
        PQclear( hResult );
    }

    sprintf( szCommand, "DROP TABLE %s", pszLayerName );
    CPLDebug( "OGR_PG", "PGexec(%s)", szCommand );
    hResult = PQexec( hPGConn, szCommand );
    PQclear( hResult );

    hResult = PQexec(hPGConn, "COMMIT");
    PQclear( hResult );

    hResult = PQexec(hPGConn, "BEGIN");
    PQclear( hResult );

    sprintf( szCommand, "DROP SEQUENCE %s_ogc_fid_seq", pszLayerName );
    CPLDebug( "OGR_PG", "PGexec(%s)", szCommand );
    hResult = PQexec( hPGConn, szCommand );
    PQclear( hResult );

    hResult = PQexec(hPGConn, "COMMIT");
    PQclear( hResult );

	delete pszLayerName;
}



From karin_we at hotmail.com  Tue Dec 13 09:51:56 2005
From: karin_we at hotmail.com (Karin Weixler)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] install gdal library
Message-ID: <BAY104-F3888D0ECD1607D264DDF4CFD390@phx.gbl>

hi,

i am new to gdal and mapserver.

i would like to use mapserver and therefore i have to install gdal
on my linux server (suse 9.1). when i try this i get the following
error when i say make:

(cd port; make)
make[1]: Entering directory `/usr/share/librarydownload/gdal-1.1.9/port'
g++ -c   cpl_conv.cpp -o cpl_conv.o
make[1]: g++: Command not found
make[1]: *** [cpl_conv.o] Error 127
make[1]: Leaving directory `/usr/share/librarydownload/gdal-1.1.9/port'
make: *** [port-target] Error 2

dose someone know help?

thanks in advance...

karin



From charles.wivell at dnr.state.mn.us  Tue Dec 13 09:54:42 2005
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
Message-ID: <s39e8c69.090@co5.dnr.state.mn.us>


Hi all;

If you want to have some fun coding. Creating a simple shaded relief image from a DEM is pretty simple to do. I'll outline it below:

Once you have the DEM read in... Create an output space buffer the same size (line,sample, bytes). Step through the postings starting at posting p(0,0). p(line,sample)

Create a 3D vector from posting p(0,0) to p(1,0) = (vecA) and another one from p(0,0) to p(0,1) = (vecB), Taking the cross product of these two vectors vecA x vecB = normal to the plane created by these three points. Now place the sun where ever you want (lat,lon). The brightness of that plane is proportional to the cosine of the zenith angle (cos(Z)), so a quick way to find cos(Z) is to use a form of the law of cosines in spherical trig (which is really just the Great Circle Angle between the sun's nadir and the point p(0,0)). or:

cos(Z) = sin(Latp) * sin(Lats) + cos(Latp) * cos(Lats) * cos(Lonp - Lons);

where Latp = latitude of the p(0,0) and Lonp = longitude of p(0,0) and
Lats = latitude of the sun's nadir and Lons = longitude of the sun's Nadir;

>From there you just have to scale cos(Z) from 0 to 255 or B = 255 * cos(Z)... Or just play with the scaling to get what you like. Place the brightness value in the output space buffer at (0,0). And continue to step through the postings.

If you want to include shadow, it becomes a little more complex.

If you want to get more complex, you can use the points around the point in question to fit a surface and then find the normal of that surface at the point in question... Anyway, I've found that the difference between the fitted surface and using the cross product is small (in most cases) and the cross product gives good qualitative results.


Chuck Wivell
MN DNR Grand Rapids, MN



>>> "Ethan Alpert" <ealpert@digitalglobe.com> 12/12/05 5:04 PM >>>


Thanks a lot! Works great!

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org 
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matthew Perry
Sent: Monday, December 12, 2005 2:16 AM
To: Gdal-Dev
Subject: [Gdal-dev] shaded relief utility


Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind enough
to let me keep the rights to all of my code ;-) So I'll release it to
the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal 1.3.1
on linux and I'd like to see if anyone else has any luck on different
platforms. Of course suggestions and changes are very appreciated as my
C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com 
http://www.perrygeo.net 

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From charles.wivell at dnr.state.mn.us  Tue Dec 13 10:03:23 2005
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
Message-ID: <s39e8e6d.053@co5.dnr.state.mn.us>

Oops;

You can't use the the GCA, in this case, that was for a point on the surface of the Earth... You'll have to use the dot product between the normal and a unit vector from the point to the sun's location.

cos(Z) = N dot Vs / |N|

Sorry, its early in the morning here...

Chuck



>>> "Charles Wivell" <charles.wivell@dnr.state.mn.us> 12/13/05 8:54 AM >>>

Hi all;

If you want to have some fun coding. Creating a simple shaded relief image from a DEM is pretty simple to do. I'll outline it below:

Once you have the DEM read in... Create an output space buffer the same size (line,sample, bytes). Step through the postings starting at posting p(0,0). p(line,sample)

Create a 3D vector from posting p(0,0) to p(1,0) = (vecA) and another one from p(0,0) to p(0,1) = (vecB), Taking the cross product of these two vectors vecA x vecB = normal to the plane created by these three points. Now place the sun where ever you want (lat,lon). The brightness of that plane is proportional to the cosine of the zenith angle (cos(Z)), so a quick way to find cos(Z) is to use a form of the law of cosines in spherical trig (which is really just the Great Circle Angle between the sun's nadir and the point p(0,0)). or:

cos(Z) = sin(Latp) * sin(Lats) + cos(Latp) * cos(Lats) * cos(Lonp - Lons);

where Latp = latitude of the p(0,0) and Lonp = longitude of p(0,0) and
Lats = latitude of the sun's nadir and Lons = longitude of the sun's Nadir;

>From there you just have to scale cos(Z) from 0 to 255 or B = 255 * cos(Z)... Or just play with the scaling to get what you like. Place the brightness value in the output space buffer at (0,0). And continue to step through the postings.

If you want to include shadow, it becomes a little more complex.

If you want to get more complex, you can use the points around the point in question to fit a surface and then find the normal of that surface at the point in question... Anyway, I've found that the difference between the fitted surface and using the cross product is small (in most cases) and the cross product gives good qualitative results.


Chuck Wivell
MN DNR Grand Rapids, MN



>>> "Ethan Alpert" <ealpert@digitalglobe.com> 12/12/05 5:04 PM >>>


Thanks a lot! Works great!

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org 
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Matthew Perry
Sent: Monday, December 12, 2005 2:16 AM
To: Gdal-Dev
Subject: [Gdal-dev] shaded relief utility


Hey folks,

  If anyone's interested, I created a GDAL-based utility for creating
shaded relief maps from a DEM. This was for a client who was kind enough
to let me keep the rights to all of my code ;-) So I'll release it to
the public domain in case anyone can find a use for it.

  Basically it's a simple GDAL/C++  port of the GRASS algorithm from
r.shaded.relief. Of course this has the advantage of being able to use
any GDAL DEM not just a GRASS map.  I've compiled it against gdal 1.3.1
on linux and I'd like to see if anyone else has any luck on different
platforms. Of course suggestions and changes are very appreciated as my
C++ experience is a bit weak.

--
Matt Perry
perrygeo@gmail.com 
http://www.perrygeo.net 

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev 


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org 
http://lists.maptools.org/mailman/listinfo/gdal-dev



From luca.casagrande at gmail.com  Tue Dec 13 11:54:23 2005
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Re: [GRASSLIST:9427] Re: Problem installing
	gdal-grass-1.3.1
In-Reply-To: <20051213095559.46ef0c52.hamish_nospam@yahoo.com>
References: <439D4D4D.1010109@maitro.net>
	<20051213095559.46ef0c52.hamish_nospam@yahoo.com>
Message-ID: <200512131654.23415.luca.casagrande@gmail.com>

Alle 20:55, luned? 12 dicembre 2005, Hamish ha scritto:
> > installing GRASS-6.0.1 from tar.gz I got a problem with
> > gdal-grass-1.3.1.
>
> To begin with, try the gdal-grass-1.3.1.1 version. (there was a bug in
> 1.3.1 release)
>
> http://www.gdal.org/dl/gdal-grass-1.3.1.1.tar.gz
>
>
>
> Hamish

Hi guys,
i am trying to build an ebuild for GENTOO portage, but using the file Hamish 
talk, got this error during the make install:
[..]
cp gdal_GRASS.so /usr/local/lib/gdalplugins
cp: cannot stat `gdal_GRASS.so': No such file or directory
make: *** [install] Error 1
[..]

Any idea about?
Thx
Luca
-- 
"Esperienza ? il nome che ciascuno da ai suoi errori. (O. Wilde) "

GENTOO-GIS Development Team
jabber: casagrande@jabber.linux.it

 


From jluis at ualg.pt  Tue Dec 13 12:06:36 2005
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
In-Reply-To: <s39e8c69.090@co5.dnr.state.mn.us>
References: <s39e8c69.090@co5.dnr.state.mn.us>
Message-ID: <439EFF9C.4000600@ualg.pt>

Charles Wivell wrote:
> Hi all;
> 

> If you want to include shadow, it becomes a little more complex.
> 

Charles,
Do you know any reference where I could study the more complex
"include shadow" method?

I have implemented 4 or 5 different algorithms of shading relief but
none of them does shadows.
To my knowledge, the best shading with shadows is the one used by a
software called flerdermaus.

J. Luis

From charles.wivell at dnr.state.mn.us  Tue Dec 13 12:27:27 2005
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
Message-ID: <s39eb035.067@co5.dnr.state.mn.us>

Hi;

Maybe check out the MODIS Level 1A Geolocation ATBD. They developed an algorithm to find if the line of sight vector intercepted the Earth before intercepting the point in question for their geolocation algorithm. It would be the same idea, just the line of sight vector is from the sun, instead of from the MODIS sensor.

http://modis.gsfc.nasa.gov/data/atbd/atbd_mod28_v3.pdf


Chuck Wivell

>>> jluis <jluis@ualg.pt> 12/13/05 11:06 AM >>>
Charles Wivell wrote:
> Hi all;
> 

> If you want to include shadow, it becomes a little more complex.
> 

Charles,
Do you know any reference where I could study the more complex
"include shadow" method?

I have implemented 4 or 5 different algorithms of shading relief but
none of them does shadows.
To my knowledge, the best shading with shadows is the one used by a
software called flerdermaus.

J. Luis



From rec at geodesign.com.br  Tue Dec 13 12:17:46 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
Message-ID: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>

Hi,

Does anyone know where one could get information on the ERDAS .aux file format?

Thanks in advance.

Reinaldo


From Peter.Nagy at vexcel.com  Tue Dec 13 12:57:23 2005
From: Peter.Nagy at vexcel.com (Pete Nagy)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] vrt chaining
Message-ID: <Pine.CYG.4.58.0512131034190.2468@Thwack>


I'm having a problem with vrt chaining, where the image displayed shows
the lowest res block pixels permanently and never refreshes with the
higher res data.  I have a vrt which references a vrt which references a
raw file.  Does anyone have any ideas on anything to try?

-> Pete

--------------------------------------------------------------------

====================================================================
Pete Nagy                                        tel: (303) 583-0248
Vexcel Corporation                               fax: (303) 583-0246
http://www.vexcel.com                           home: (303) 823-2336
====================================================================


From ealpert at digitalglobe.com  Tue Dec 13 13:59:59 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BBCD@COMAIL01.digitalglobe.com>




Now the question of how to make closed vector contours from the shaded
relief output. The reason I ask this is how I think demis.nl does it.

http://www.demis.nl/home/pages/wms/demiswms.htm

Converting to a vector contour set and overlaying partially transparent
layers on top creates quite an aesthetic look with the added advantage
when you zoom in it doesn't get grainy.

I've use NCAR Graphics to contour the output of the shaded relief cpp
sent out yesterday (using gdal_translate to convert to netCDF) and it
looks great the problem is it's not a shapefile and can only be viewed
in NCARG graphics. Anyone know of any filled contour utilities that
return polygons which I might be able to translate back into the proper
projection?

-e


From surgpub at telkomsa.net  Tue Dec 13 15:03:38 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <278701c5ff63$97050160$160002c0@shark>
References: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>
	<200512122239.45525.surgpub@telkomsa.net>
	<278701c5ff63$97050160$160002c0@shark>
Message-ID: <200512132203.39087.surgpub@telkomsa.net>

On Monday 12 December 2005 23:32, Brent Fraser wrote:
> Paul, Matt,
>
>   And it compiled ok on Windows.  I justed editted the makefile.vc file to
> include hillshade.exe.  I haven't actually tried it yet.
>
>   Like Paul,  I'm actually interested in shading an image file based on a
> DEM (if that's what you meant, Paul)
>
> Brent

No, I meant I need a way to make "color scaled relief maps" (or whatever they 
are called in GIS lingo) from DEMs. The type that has a color gradient based 
on the altitude.

It's pretty simple so I find it hard to believe no one has written an open 
source utility to do it. It's just a matter of trying to find out what's 
available.

I take it what you're after is a way to modulate an existing base image with a 
hillshade image generated from a DEM.

Paul

From ealpert at digitalglobe.com  Tue Dec 13 15:20:46 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BBD1@COMAIL01.digitalglobe.com>



One way to accomplish this is to color a vector topo set and overlay it
with partial transparency over a grey scale hill shade relief.

I believe this is how demis does it. Check out the map server below.
Turn off all layers except hillshading and topography. Zoom in to an
area and toggle one of those two layers. You'll see what I'm talking
about.

http://www.demis.nl/home/pages/wms/demiswms.htm

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Paul Surgeon
Sent: Tuesday, December 13, 2005 1:04 PM
To: Brent Fraser
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] shaded relief utility


On Monday 12 December 2005 23:32, Brent Fraser wrote:
> Paul, Matt,
>
>   And it compiled ok on Windows.  I justed editted the makefile.vc 
> file to include hillshade.exe.  I haven't actually tried it yet.
>
>   Like Paul,  I'm actually interested in shading an image file based 
> on a DEM (if that's what you meant, Paul)
>
> Brent

No, I meant I need a way to make "color scaled relief maps" (or whatever
they 
are called in GIS lingo) from DEMs. The type that has a color gradient
based 
on the altitude.

It's pretty simple so I find it hard to believe no one has written an
open 
source utility to do it. It's just a matter of trying to find out what's

available.

I take it what you're after is a way to modulate an existing base image
with a 
hillshade image generated from a DEM.

Paul
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From bryan at geomega.com  Tue Dec 13 15:46:46 2005
From: bryan at geomega.com (Bryan Keith)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23306BBD1@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23306BBD1@COMAIL01.digitalglobe.com>
Message-ID: <439F3336.9040001@geomega.com>

Ethan Alpert wrote:

>One way to accomplish this is to color a vector topo set and overlay it
>with partial transparency over a grey scale hill shade relief.
>
>  
>
Ethan,

How do you create the vector topo set from the DEM?

That's essentially the question I asked to a couple gis lists (though 
not this one) a few weeks ago, and I didn't get any answers.  The output 
must be closed polygons attributed with the data range of the DEM that 
the polygon encloses, and the polygons must look like the results of a 
contouring algorithm, not along the jagged cell edges of the input data, 
just like the dataset on the demis website.

Bryan

>I believe this is how demis does it. Check out the map server below.
>Turn off all layers except hillshading and topography. Zoom in to an
>area and toggle one of those two layers. You'll see what I'm talking
>about.
>
>http://www.demis.nl/home/pages/wms/demiswms.htm
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Paul Surgeon
>Sent: Tuesday, December 13, 2005 1:04 PM
>To: Brent Fraser
>Cc: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] shaded relief utility
>
>
>On Monday 12 December 2005 23:32, Brent Fraser wrote:
>  
>
>>Paul, Matt,
>>
>>  And it compiled ok on Windows.  I justed editted the makefile.vc 
>>file to include hillshade.exe.  I haven't actually tried it yet.
>>
>>  Like Paul,  I'm actually interested in shading an image file based 
>>on a DEM (if that's what you meant, Paul)
>>
>>Brent
>>    
>>
>
>No, I meant I need a way to make "color scaled relief maps" (or whatever
>they 
>are called in GIS lingo) from DEMs. The type that has a color gradient
>based 
>on the altitude.
>
>It's pretty simple so I find it hard to believe no one has written an
>open 
>source utility to do it. It's just a matter of trying to find out what's
>
>available.
>
>I take it what you're after is a way to modulate an existing base image
>with a 
>hillshade image generated from a DEM.
>
>Paul
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>  
>

From ealpert at digitalglobe.com  Tue Dec 13 15:53:44 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BBD3@COMAIL01.digitalglobe.com>



Well I used NCAR Graphics, however there's no way to get the contours
out of NCAR Graphics. Hence my earlier email asking if anyone has seen
utilities for closed vector contours. Nearly every contouring
application I've found does not produce closed polygons but just iso
lines except NCAR Graphics. Unfortunately NCAR Graphics output is a CGM
metafile.

They do have a way of dumping text from the CGM file which I've written
a perl script to parse and create a shapefile but the shapefile is still
in the CGM's integer coordinate system. Even so this is all more steps
than there should be.

-e



-----Original Message-----
From: Bryan Keith [mailto:bryan@geomega.com] 
Sent: Tuesday, December 13, 2005 1:47 PM
To: Ethan Alpert
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] shaded relief utility


Ethan Alpert wrote:

>One way to accomplish this is to color a vector topo set and overlay it

>with partial transparency over a grey scale hill shade relief.
>
>  
>
Ethan,

How do you create the vector topo set from the DEM?

That's essentially the question I asked to a couple gis lists (though 
not this one) a few weeks ago, and I didn't get any answers.  The output

must be closed polygons attributed with the data range of the DEM that 
the polygon encloses, and the polygons must look like the results of a 
contouring algorithm, not along the jagged cell edges of the input data,

just like the dataset on the demis website.

Bryan

>I believe this is how demis does it. Check out the map server below. 
>Turn off all layers except hillshading and topography. Zoom in to an 
>area and toggle one of those two layers. You'll see what I'm talking 
>about.
>
>http://www.demis.nl/home/pages/wms/demiswms.htm
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Paul Surgeon
>Sent: Tuesday, December 13, 2005 1:04 PM
>To: Brent Fraser
>Cc: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] shaded relief utility
>
>
>On Monday 12 December 2005 23:32, Brent Fraser wrote:
>  
>
>>Paul, Matt,
>>
>>  And it compiled ok on Windows.  I justed editted the makefile.vc
>>file to include hillshade.exe.  I haven't actually tried it yet.
>>
>>  Like Paul,  I'm actually interested in shading an image file based
>>on a DEM (if that's what you meant, Paul)
>>
>>Brent
>>    
>>
>
>No, I meant I need a way to make "color scaled relief maps" (or 
>whatever they are called in GIS lingo) from DEMs. The type that has a 
>color gradient based
>on the altitude.
>
>It's pretty simple so I find it hard to believe no one has written an 
>open source utility to do it. It's just a matter of trying to find out 
>what's
>
>available.
>
>I take it what you're after is a way to modulate an existing base image

>with a hillshade image generated from a DEM.
>
>Paul
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org 
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org 
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>  
>


From charles.wivell at dnr.state.mn.us  Tue Dec 13 15:59:42 2005
From: charles.wivell at dnr.state.mn.us (Charles Wivell)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] SAR and shaded relief
Message-ID: <s39ee1f6.050@co5.dnr.state.mn.us>

Back in 1992 (yes, I'm that old...) when there were plans for an EOS SAR mission, my office mate and I put together an automated EOS-1/JERS-1 SAR ortho-correction system using a SAR shaded relief map as the reference.

Using the supplied position and Doppler information, we flew a math model of the SAR (solving the Doppler equation) over the DEM/Earth model and created a shaded relief map of what the SAR should have seen. Like always, SAR is the opposite of optical, meaning the brightness of the SAR return is proportional to sin(Z).  This image was then correlated to the actual SAR image and the differences were used to correct the position and attitude of the satellite. Using the corrected SAR model and the DEM/Earth model, the SAR image can then be ortho-corrected. It worked pretty good (see the April 1993 issue of PE&RS). But unfortunately, the EOS SAR idea was scrapped, so nothing ever came of our efforts. But it was a fun exercise.

Chuck

>>> "Ethan Alpert" <ealpert@digitalglobe.com> 12/13/05 12:59 PM >>>



Now the question of how to make closed vector contours from the shaded
relief output. The reason I ask this is how I think demis.nl does it.

http://www.demis.nl/home/pages/wms/demiswms.htm 

Converting to a vector contour set and overlaying partially transparent
layers on top creates quite an aesthetic look with the added advantage
when you zoom in it doesn't get grainy.

I've use NCAR Graphics to contour the output of the shaded relief cpp
sent out yesterday (using gdal_translate to convert to netCDF) and it
looks great the problem is it's not a shapefile and can only be viewed
in NCARG graphics. Anyone know of any filled contour utilities that
return polygons which I might be able to translate back into the proper
projection?

-e



From lxnyce at gmail.com  Tue Dec 13 16:26:36 2005
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
In-Reply-To: <439EFF9C.4000600@ualg.pt>
References: <s39e8c69.090@co5.dnr.state.mn.us> <439EFF9C.4000600@ualg.pt>
Message-ID: <82c245aa0512131326g1605fb2eu628db3014dce7737@mail.gmail.com>

How about the regular gaming approach of generating shadows by shooting
light rays.

http://www.vterrain.org/Performance/lighting.html
http://www.gamedev.net/reference/articles/article1817.asp

Of course you would have to modify it not to store the entire thing in
memory, but what I would suggest is downsampling your dem to about 2Kx2K,
doing the line of sight generation in memory and then interpolating the
shadow value when applying to the raster. I did this once using quadtrees to
speed up the calculation. I had it working almost realtime (for realtime
shadows), but never followed it up. Unfortunately it was almost 4 years ago
so the code is lost by now. Theory is still the same though. Calculate a one
time quadtree for your heightfield which you can do in almost linear time,
then use that to speed up the ray bounding box attemts.

-Lennox

On 12/13/05, jluis <jluis@ualg.pt> wrote:
>
> Charles Wivell wrote:
> > Hi all;
> >
>
> > If you want to include shadow, it becomes a little more complex.
> >
>
> Charles,
> Do you know any reference where I could study the more complex
> "include shadow" method?
>
> I have implemented 4 or 5 different algorithms of shading relief but
> none of them does shadows.
> To my knowledge, the best shading with shadows is the one used by a
> software called flerdermaus.
>
> J. Luis
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051213/6b9dfdd9/attachment.html
From jluis at ualg.pt  Tue Dec 13 16:43:22 2005
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB23306BBD3@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB23306BBD3@COMAIL01.digitalglobe.com>
Message-ID: <439F407A.4030301@ualg.pt>

Ethan Alpert wrote:
> 
> Well I used NCAR Graphics, however there's no way to get the contours
> out of NCAR Graphics. Hence my earlier email asking if anyone has seen
> utilities for closed vector contours. Nearly every contouring
> application I've found does not produce closed polygons but just iso
> lines except NCAR Graphics. Unfortunately NCAR Graphics output is a CGM
> metafile.
> 
> They do have a way of dumping text from the CGM file which I've written
> a perl script to parse and create a shapefile but the shapefile is still
> in the CGM's integer coordinate system. Even so this is all more steps
> than there should be.
> 

Hi,
That can be accomplished with Matlab.
My application has all its needs to implement it (and it reads all GDAL recognized DEMs),
including the possibility of giving transparency to polygons.

However, there are some issues you must be aware of.
- Matlab is not known by its performance.
- It consumes a LOT of memory.
- I have not yet implemented coordinate projections

The application I'm referring is at
w3.ualg.pt/~jluis/mirone

Give it a look and tell me if you would be interested that I do this improvement

Joaquim Luis

From jluis at ualg.pt  Tue Dec 13 16:54:32 2005
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
In-Reply-To: <82c245aa0512131326g1605fb2eu628db3014dce7737@mail.gmail.com>
References: <s39e8c69.090@co5.dnr.state.mn.us> <439EFF9C.4000600@ualg.pt>
	<82c245aa0512131326g1605fb2eu628db3014dce7737@mail.gmail.com>
Message-ID: <439F4318.2020709@ualg.pt>

Thanks Lennox,
Looks very promising

Joaquim Luis

Lennox Antoine wrote:
> How about the regular gaming approach of generating shadows by shooting 
> light rays.
> 
> http://www.vterrain.org/Performance/lighting.html
> http://www.gamedev.net/reference/articles/article1817.asp
> 
> Of course you would have to modify it not to store the entire thing in 
> memory, but what I would suggest is downsampling your dem to about 
> 2Kx2K, doing the line of sight generation in memory and then 
> interpolating the shadow value when applying to the raster. I did this 
> once using quadtrees to speed up the calculation. I had it working 
> almost realtime (for realtime shadows), but never followed it up. 
> Unfortunately it was almost 4 years ago so the code is lost by now. 
> Theory is still the same though. Calculate a one time quadtree for your 
> heightfield which you can do in almost linear time, then use that to 
> speed up the ray bounding box attemts.

From warmerdam at pobox.com  Tue Dec 13 17:07:25 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] install gdal library
In-Reply-To: <BAY104-F3888D0ECD1607D264DDF4CFD390@phx.gbl>
References: <BAY104-F3888D0ECD1607D264DDF4CFD390@phx.gbl>
Message-ID: <931f8ea90512131407n6b317c7r24915d3983df22b9@mail.gmail.com>

On 12/13/05, Karin Weixler <karin_we@hotmail.com> wrote:
> hi,
>
> i am new to gdal and mapserver.
>
> i would like to use mapserver and therefore i have to install gdal
> on my linux server (suse 9.1). when i try this i get the following
> error when i say make:
>
> (cd port; make)
> make[1]: Entering directory `/usr/share/librarydownload/gdal-1.1.9/port'
> g++ -c   cpl_conv.cpp -o cpl_conv.o
> make[1]: g++: Command not found
> make[1]: *** [cpl_conv.o] Error 127
> make[1]: Leaving directory `/usr/share/librarydownload/gdal-1.1.9/port'
> make: *** [port-target] Error 2
>
> dose someone know help?

Karin,

It would appear you don't have a complete developer kit on
your computer.  "g++" is the c++ compiler form of GCC.  It
is installed by default on most linux system with the developer
option.  Perhaps you can review the packages available for
your system, and install anything that seems like a GNU C++
compiler package.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jean.ponchon at acterna.com  Tue Dec 13 02:48:32 2005
From: jean.ponchon at acterna.com (Jean Ponchon)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Impossible to find _gdal
Message-ID: <OF86FBA04F.2DF4BF6A-ONC12570D6.002AC289-C12570D6.002ADF3A@acterna.com>

Hello,

I am trying to use gdal.py but a file _gdal is not found. Would I have 
missed anaything?

Regards
Jean Ponchon
ONMS product marketing

Tel: +33 (0) 477 47 89 31
Mobile : +33 (0) 688 23 36 98

e-mail: Jean.ponchon@acterna.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051213/245beae3/attachment.html
From warmerdam at pobox.com  Tue Dec 13 17:20:12 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>

On 12/13/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> Hi,
>
> Does anyone know where one could get information on the ERDAS .aux file format?

Reinaldo,

Erdas .aux files are in Hierarchical File Architecture format,
the same as .img files.  You can read the specification
documents from Erdas (err, Leica).

  http://home.gdal.org/projects/imagine/iau_docu1.pdf

You can also dump .aux files with the "hfatest" utility
that can be built in gdal/frmts/hfa.   You would use it like:

hfatest -dt  ungeo_bmp.aux

  DependentFile(Eimg_DependentFile) @ 210 + 22 @ 338
  + dependent =
  +     string = `ungeo_bmp.bmp'

  Band_1(Eimg_Layer) @ 360 + 20 @ 488
  + width = 1119
  + height = 1122
  + layerType = athematic
  + pixelType = u8
  + blockWidth = 1119
  + blockHeight = 1

    Projection(Eprj_ProParameters) @ 2013 + 223 @ 2141
    + proType = EPRJ_INTERNAL
    + proNumber = 2
    + proExeName = (no values)
...

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From neteler at itc.it  Tue Dec 13 18:09:08 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <200512132203.39087.surgpub@telkomsa.net>
References: <5383fa5e0512120115t134531es2f17cd8ef48d9c09@mail.gmail.com>
	<200512122239.45525.surgpub@telkomsa.net>
	<278701c5ff63$97050160$160002c0@shark>
	<200512132203.39087.surgpub@telkomsa.net>
Message-ID: <20051213230907.GA22695@thuille.itc.it>

On Tue, Dec 13, 2005 at 10:03:38PM +0200, Paul Surgeon wrote:
> On Monday 12 December 2005 23:32, Brent Fraser wrote:
> > Paul, Matt,
> >
> >   And it compiled ok on Windows.  I justed editted the makefile.vc file to
> > include hillshade.exe.  I haven't actually tried it yet.
> >
> >   Like Paul,  I'm actually interested in shading an image file based on a
> > DEM (if that's what you meant, Paul)
> >
> > Brent
> 
> No, I meant I need a way to make "color scaled relief maps" (or whatever they 
> are called in GIS lingo) from DEMs. The type that has a color gradient based 
> on the altitude.
> 
> It's pretty simple so I find it hard to believe no one has written an open 
> source utility to do it. It's just a matter of trying to find out what's 
> available.

Maybe this one helps

 http://grass.itc.it/gdp/html_grass5/html/shade.clr.sh.html

But it's only a script.

Markus
 

From warmerdam at pobox.com  Tue Dec 13 21:04:36 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Impossible to find _gdal
In-Reply-To: <OF86FBA04F.2DF4BF6A-ONC12570D6.002AC289-C12570D6.002ADF3A@acterna.com>
References: <OF86FBA04F.2DF4BF6A-ONC12570D6.002AC289-C12570D6.002ADF3A@acterna.com>
Message-ID: <931f8ea90512131804t3c53dfeev602b1f1e43566c65@mail.gmail.com>

On 12/13/05, Jean Ponchon <jean.ponchon@acterna.com> wrote:
>
> Hello,
>
> I am trying to use gdal.py but a file _gdal is not found. Would I have
> missed anaything?

Jean,

Do you know if the Python support was configured, and built
successfully?   Do you have an _gdal.so in gdal/pymod?
Perhaps things failed in the install or the _gdal.so was installed
in the wrong place?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ealpert at digitalglobe.com  Tue Dec 13 22:21:46 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Building multipolygons from single polygons with OGR?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233073026@COMAIL01.digitalglobe.com>

 
I have a query that returns single polygon geometries and I'd like to loop through the features and create a single multipolygon from the result set. How is this done with the OGR API?
 
Thanks,
 
-ethan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051213/f0832032/attachment.html
From warmerdam at pobox.com  Tue Dec 13 22:52:49 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Building multipolygons from single polygons with OGR?
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233073026@COMAIL01.digitalglobe.com>
References: <8B319E5A30FF4A48BE7EEAAF609DB233073026@COMAIL01.digitalglobe.com>
Message-ID: <931f8ea90512131952m549d455alceb0f9e19ad12f30@mail.gmail.com>

On 12/13/05, Ethan Alpert <ealpert@digitalglobe.com> wrote:
> I have a query that returns single polygon geometries and I'd like to loop
> through the features and create a single multipolygon from the result set.
> How is this done with the OGR API?

Ethan,

You could need to create a multipolygon object, and then
call addGeometry() for each polygon.  You can pass in
the original polygons, as the method will clone them internally.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ealpert at digitalglobe.com  Wed Dec 14 09:25:30 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Building multipolygons from single polygons with OGR?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23307302C@COMAIL01.digitalglobe.com>

Thanks Frank! That did the trick!
 
-e

________________________________

From: fwarmerdam@gmail.com on behalf of Frank Warmerdam
Sent: Tue 12/13/2005 8:52 PM
To: Ethan Alpert
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Building multipolygons from single polygons with OGR?



On 12/13/05, Ethan Alpert <ealpert@digitalglobe.com> wrote:
> I have a query that returns single polygon geometries and I'd like to loop
> through the features and create a single multipolygon from the result set.
> How is this done with the OGR API?

Ethan,

You could need to create a multipolygon object, and then
call addGeometry() for each polygon.  You can pass in
the original polygons, as the method will clone them internally.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/a927e570/attachment.html
From rec at geodesign.com.br  Wed Dec 14 12:54:22 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.co
 m>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
Message-ID: <6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>

Hello Frank,

Thanks for the info.  So far I've been using the fwtools.  Now, I tried 
building gdal for the first time but I got the following error message at 
the end of the process

C:\Arquivos de programas\Microsoft Visual Studio\VC98\lib\MSVCRT.lib : 
fatal error LNK1106: invalid file or disk full: cannot seek to 
0x35894cc8NMAKE : fatal error U1077: 'link' : return code '0xc'
Stop.

The HD am building on has 42 GB of free space.  Any suggestions on what's 
going on?

Thanks in advance.

Reinaldo

At 08:20 PM 12/13/2005, Frank Warmerdam wrote:
>On 12/13/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> > Hi,
> >
> > Does anyone know where one could get information on the ERDAS .aux file 
> format?
>
>Reinaldo,
>
>Erdas .aux files are in Hierarchical File Architecture format,
>the same as .img files.  You can read the specification
>documents from Erdas (err, Leica).
>
>   http://home.gdal.org/projects/imagine/iau_docu1.pdf
>
>You can also dump .aux files with the "hfatest" utility
>that can be built in gdal/frmts/hfa.   You would use it like:
>
>hfatest -dt  ungeo_bmp.aux
>
>   DependentFile(Eimg_DependentFile) @ 210 + 22 @ 338
>   + dependent =
>   +     string = `ungeo_bmp.bmp'
>
>   Band_1(Eimg_Layer) @ 360 + 20 @ 488
>   + width = 1119
>   + height = 1122
>   + layerType = athematic
>   + pixelType = u8
>   + blockWidth = 1119
>   + blockHeight = 1
>
>     Projection(Eprj_ProParameters) @ 2013 + 223 @ 2141
>     + proType = EPRJ_INTERNAL
>     + proNumber = 2
>     + proExeName = (no values)
>...
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent

Reinaldo Escada Chohfi, Ph.D.
Diretor
GeoDesign Internacional

www.geodesign.com.br

E-mail: rec@geodesign.com.br

Tel./Fax: 0-XX-12-3153-5115 (Local)
       55-12-3153-5115 (Intl.)

Intelig?ncia e Tecnologia Espacial de Ponta

Urbanismo, Estudos Ambientais, Monitoriamento Ambiental,
Geoprocessamento, GIS, Processamento de Imagens Geogr?ficas,
Sensoriamento Remoto: Imagens de Sat?lites

Compress?o de Imagens e Documentos Escanerizados
Servidor de Conte?do - Integra??o de Sistemas

Revendedor Autorizado da LizardTech no Brasil

Vila Peralta, 42
12607-040 - Lorena - SP - Brasil

Informa??o confidencial. N?o retransmitir sem autoriza??o.
Copyright (c) 2005 GeoDesign Internacional
Todos os direitos reservados.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/b808ada0/attachment.html
From RMcCulley at county24.com  Wed Dec 14 13:42:14 2005
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Loop through Microstation and project
Message-ID: <1E095D48112D90428817CB417AECDB62082993@vermilion.county24.local>

Hello All,

I'm fairly new to GDAL/OGR, and Python, so forgive my ignorance.

I'm trying to loop through a bunch of microstation files, and copy the features into a single shapefile.  Everything works fine at first, but at the end of the first microstation file I get the following error:

Traceback (most recent call last):
  File "S:\Rob\Python_Scripts\ProcessAltalis.py", line 26, in ?
    oldGeom = feature.GetGeometryRef()
AttributeError: 'NoneType' object has no attribute 'GetGeometryRef'

I assume it is a result of how I iterate through the microstation features.  Here is my code:

import os
import glob
from gdal import ogr
list = glob.glob('C:/GIS/Altalis/20051121/Cadastral/*.dgn')
driver = ogr.GetDriverByName('ESRI Shapefile')
cadastral_shp = driver.CreateDataSource('C:/GIS/Altalis/20051121/Cadastral/Cadastral.shp')
cadastral = cadastral_shp.CreateLayer('Cadastral',geom_type=ogr.wkbLineString)
field = ogr.FieldDefn('Level',ogr.OFTInteger)
field.SetWidth(8)
cadastral.CreateField(field)
field = ogr.FieldDefn('File',ogr.OFTString)
field.SetPrecision(8)
cadastral.CreateField(field)
for file in list:
    microstation = ogr.Open(file)
    layer = microstation.GetLayer(0)
    layer.ResetReading()
    i = 0
    j = layer.GetFeatureCount()
    while i < j:
        feature = layer.GetNextFeature()
        oldGeom = feature.GetGeometryRef()
        geomType = oldGeom.GetGeometryType()
        if geomType == ogr.wkbLineString:
            newFeature = ogr.Feature(cadastral.GetLayerDefn())
            gml = oldGeom.ExportToGML()
            newGeom = ogr.CreateGeometryFromGML(gml)
            newFeature.SetGeometryDirectly(newGeom)
            level = feature.GetFieldAsInteger(1)
            newFeature.SetField(0, level)
            newFeature.SetField(1, os.path.basename(file))
            cadastral.CreateFeature(newFeature)
        feature.Destroy()
    microstation.Destroy()
cadastral_shp.Destroy()

The second question I have is, how do I go about converting the features from one projection to another during this process.  I know what my projections are.  The source data is in a 10TM projection (proj: +proj=tmerc +lon_0=-115 +k_0=0.9992 +x_0=500000 +datum=NAD27) and the target projection is EPSG:2152 (NAD83 CSRS98 12N).  I looked through the Projection Tutorial, but I can't figure out how to do that using python.

Thank You,
Rob McCulley
GIS Coordinator
County of Vermilion River No. 24
(780) 846-2244
rmcculley@county24.com



From warmerdam at pobox.com  Wed Dec 14 14:07:34 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.com>

On 12/14/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
>  Hello Frank,
>
>  Thanks for the info.  So far I've been using the fwtools.  Now, I tried
> building gdal for the first time but I got the following error message at
> the end of the process
>
>  C:\Arquivos de programas\Microsoft Visual Studio\VC98\lib\MSVCRT.lib :
> fatal error LNK1106: invalid file or disk full: cannot seek to
> 0x35894cc8NMAKE : fatal error U1077: 'link' : return code '0xc'
>  Stop.
>
>  The HD am building on has 42 GB of free space.  Any suggestions on what's
> going on?

Reinaldo,

Does the indicated file exist?

If you would like, I could prepare a hfatest.exe for you.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rec at geodesign.com.br  Wed Dec 14 14:24:28 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.co
 m>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.com>
Message-ID: <6.2.1.2.0.20051214171927.02951f10@mailhost.geodesign.com.br>

Frank,

The MSVCRT.lib file exists. In the mean time, I would appreciate if you 
could build hfatest.exe.  However, I would like to be able to build gdal 
due to the fact that am using the gdal utilities more  often and foresee 
working with gdal in programming in the near future.

Thanks again,

Reinaldo

At 05:07 PM 12/14/2005, Frank Warmerdam wrote:
>On 12/14/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> >  Hello Frank,
> >
> >  Thanks for the info.  So far I've been using the fwtools.  Now, I tried
> > building gdal for the first time but I got the following error message at
> > the end of the process
> >
> >  C:\Arquivos de programas\Microsoft Visual Studio\VC98\lib\MSVCRT.lib :
> > fatal error LNK1106: invalid file or disk full: cannot seek to
> > 0x35894cc8NMAKE : fatal error U1077: 'link' : return code '0xc'
> >  Stop.
> >
> >  The HD am building on has 42 GB of free space.  Any suggestions on what's
> > going on?
>
>Reinaldo,
>
>Does the indicated file exist?
>
>If you would like, I could prepare a hfatest.exe for you.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/f70cd79f/attachment.html
From warmerdam at pobox.com  Wed Dec 14 14:46:20 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] Loop through Microstation and project
In-Reply-To: <1E095D48112D90428817CB417AECDB62082993@vermilion.county24.local>
References: <1E095D48112D90428817CB417AECDB62082993@vermilion.county24.local>
Message-ID: <931f8ea90512141146m72d8dfa0q5a3d2ce9bad71e17@mail.gmail.com>

On 12/14/05, Rob McCulley <RMcCulley@county24.com> wrote:
> Hello All,
>
> I'm fairly new to GDAL/OGR, and Python, so forgive my ignorance.
>
> I'm trying to loop through a bunch of microstation files, and copy the features into a single shapefile.  Everything works fine at first, but at the end of the first microstation file I get the following error:
>
> Traceback (most recent call last):
>   File "S:\Rob\Python_Scripts\ProcessAltalis.py", line 26, in ?
>     oldGeom = feature.GetGeometryRef()
> AttributeError: 'NoneType' object has no attribute 'GetGeometryRef'
>
> I assume it is a result of how I iterate through the microstation features.  Here is my code:

Rob,

Hmm, it would seem to indicate that you got less features from
GetNextFeature() than indicated by GetFeatureCount().  It might be
because you haven't called ResetRead() before doing your first
GetNextFeature() call, or it might be a counting error in the driver.

I would suggest calling ResetReading() before callin the first
GetNextFeature() (before the feature loop).

If that doesn't help, then restructure you code to keep calling
GetNextFeature() till it returns None.

> The second question I have is, how do I go about converting the features from one projection to another during this process.  I know what my projections are.  The source data is in a 10TM projection (proj: +proj=tmerc +lon_0=-115 +k_0=0.9992 +x_0=500000 +datum=NAD27) and the target projection is EPSG:2152 (NAD83 CSRS98 12N).  I looked through the Projection Tutorial, but I can't figure out how to do that using python.

This will be a bit involved.

I think you need to do something like the following
to setup a transformation object before looping through features.

    src_cs = osr.SpatialReference()
    src_cs.ImportFromProj4( 'proj=tmerc +lon_0=-115 +k_0=0.9992
+x_0=500000 +datum=NAD27' )

    dst_cs = osr.SpatialReference()
    dst_cs.ImportFromEPSG( 2152 )

    ct = osr.CoordinateTransformation( src_cs, dst_cs )

Then use the "ct" to transform the geometries.

    newGeom.transform( ct )

Note that PROJ.4 (and OGR) don't know anything spectial
about the NAD83(CSR98) datum.  They will treat EPSG:2152
effectively as a simple UTM 12 WGS84 coordinate system.
So, the source coordinate system should go through NAD27
to NAD83 grid shifting, and then the lat/long just reprojected
back into UTM 12 on that ellipsoid.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Dec 14 15:13:15 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:54 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <6.2.1.2.0.20051214171927.02951f10@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.com>
	<6.2.1.2.0.20051214171927.02951f10@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512141213x15f1f59eo190e6fc0b0b9acec@mail.gmail.com>

On 12/14/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
>  Frank,
>
>  The MSVCRT.lib file exists. In the mean time, I would appreciate if you
> could build hfatest.exe.

Reinaldo,

You can grab:

  http://home.gdal.org/~warmerda/hfatest.zip

The -dt switch means dump a tree view of the file in
question.  The -dd switch will dump a  "data dictionary"
of types defined in the file dictionary.

> However, I would like to be able to build gdal due
> to the fact that am using the gdal utilities more  often and foresee working
> with gdal in programming in the near future.

Sorry ... I'm not sure why things aren't working.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From rec at geodesign.com.br  Wed Dec 14 15:37:11 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <931f8ea90512141213x15f1f59eo190e6fc0b0b9acec@mail.gmail.co
 m>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.com>
	<6.2.1.2.0.20051214171927.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141213x15f1f59eo190e6fc0b0b9acec@mail.gmail.com>
Message-ID: <6.2.1.2.0.20051214183605.04268440@mailhost.geodesign.com.br>

Thanks Frank. I'll look into the gdal build problem later on.
Reinaldo

At 06:13 PM 12/14/2005, Frank Warmerdam wrote:
>On 12/14/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> >  Frank,
> >
> >  The MSVCRT.lib file exists. In the mean time, I would appreciate if you
> > could build hfatest.exe.
>
>Reinaldo,
>
>You can grab:
>
>   http://home.gdal.org/~warmerda/hfatest.zip
>
>The -dt switch means dump a tree view of the file in
>question.  The -dd switch will dump a  "data dictionary"
>of types defined in the file dictionary.
>
> > However, I would like to be able to build gdal due
> > to the fact that am using the gdal utilities more  often and foresee 
> working
> > with gdal in programming in the near future.
>
>Sorry ... I'm not sure why things aren't working.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/456b350c/attachment.html
From rec at geodesign.com.br  Wed Dec 14 15:52:57 2005
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <931f8ea90512141213x15f1f59eo190e6fc0b0b9acec@mail.gmail.co
 m>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.com>
	<6.2.1.2.0.20051214171927.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141213x15f1f59eo190e6fc0b0b9acec@mail.gmail.com>
Message-ID: <6.2.1.2.0.20051214185149.0431e3f8@mailhost.geodesign.com.br>

Frank,

One last question.  Is there available a program to create Erdas .aux files?

Thanks,

Reinaldo

At 06:13 PM 12/14/2005, Frank Warmerdam wrote:
>On 12/14/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
> >  Frank,
> >
> >  The MSVCRT.lib file exists. In the mean time, I would appreciate if you
> > could build hfatest.exe.
>
>Reinaldo,
>
>You can grab:
>
>   http://home.gdal.org/~warmerda/hfatest.zip
>
>The -dt switch means dump a tree view of the file in
>question.  The -dd switch will dump a  "data dictionary"
>of types defined in the file dictionary.
>
> > However, I would like to be able to build gdal due
> > to the fact that am using the gdal utilities more  often and foresee 
> working
> > with gdal in programming in the near future.
>
>Sorry ... I'm not sure why things aren't working.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/a55db0d9/attachment.html
From warmerdam at pobox.com  Wed Dec 14 16:01:26 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <6.2.1.2.0.20051214185149.0431e3f8@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>
	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141107l7273b5faje31410970099b5ce@mail.gmail.com>
	<6.2.1.2.0.20051214171927.02951f10@mailhost.geodesign.com.br>
	<931f8ea90512141213x15f1f59eo190e6fc0b0b9acec@mail.gmail.com>
	<6.2.1.2.0.20051214185149.0431e3f8@mailhost.geodesign.com.br>
Message-ID: <931f8ea90512141301h3fc65eccqed8a301a866b7631@mail.gmail.com>

On 12/14/05, Reinaldo Escada Chohfi <rec@geodesign.com.br> wrote:
>  Frank,
>
>  One last question.  Is there available a program to create Erdas .aux
> files?

Reinaldo,

I assume you mean other than Erdas Imagine?  GDAL utilities
will create them under some circumstances.  For instance, to
hold references to erdas style overviews.  But there is no
generalized support for writing .aux files in GDAL.   At the
API level it can be accomplished with the HFA API in
gdal/frmts/hfa.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From RMcCulley at county24.com  Wed Dec 14 16:25:01 2005
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Loop through Microstation and project
Message-ID: <1E095D48112D90428817CB417AECDB62082994@vermilion.county24.local>

Thanks Frank!

I added in the ResetReading() call before the loop, and then added an 'if not feature: break' check line after the call to GetNextFeature().  That solved the looping problem.

Your instructions for the coordinate transformation were perfect.  I had some trouble getting the proj declaration for 10TM to work, and then discovered that ArcView has a nice Wkt declaration of 10TM, which worked fine using ImportFromWkt().  If anyone else is stuck with some 10TM data, the Wkt for it is:

PROJCS["N83_10TM",
    GEOGCS["GCS_North_American_1983",
        DATUM["D_North_American_1983",
            SPHEROID["GRS_1980",6378137.0,298.257222101]],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",0.0],
    PARAMETER["False_Northing",0.0],
    PARAMETER["Central_Meridian",-115.0],
    PARAMETER["Scale_Factor",0.9992],
    PARAMETER["Latitude_Of_Origin",0.0],
    UNIT["Meter",1.0]]

About six monthes ago I had written python script using ESRI's geoprocessing module.  This OGR script runs in about 20 minutes (I have 75 microstation files with ~2500 features per file).  The same script using the ESRI functions takes nearly 2 hours to run.  The best part is, OGR is much more flexible, I will be able to add a few more steps to the script that I can't add using ESRI's functions.

Kudo's to an amazing library!

Thanks,
Rob McCulley
GIS Coordinator
County of Vermilion River No. 24
(780) 846-2244
rmcculley@county24.com


-----Original Message-----
From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com]On Behalf Of
Frank Warmerdam
Sent: Wednesday, December 14, 2005 12:46 PM
To: Rob McCulley
Cc: GDAL (E-mail)
Subject: Re: [Gdal-dev] Loop through Microstation and project


On 12/14/05, Rob McCulley <RMcCulley@county24.com> wrote:
> Hello All,
>
> I'm fairly new to GDAL/OGR, and Python, so forgive my ignorance.
>
> I'm trying to loop through a bunch of microstation files, and copy the features into a single shapefile.  Everything works fine at first, but at the end of the first microstation file I get the following error:
>
> Traceback (most recent call last):
>   File "S:\Rob\Python_Scripts\ProcessAltalis.py", line 26, in ?
>     oldGeom = feature.GetGeometryRef()
> AttributeError: 'NoneType' object has no attribute 'GetGeometryRef'
>
> I assume it is a result of how I iterate through the microstation features.  Here is my code:

Rob,

Hmm, it would seem to indicate that you got less features from
GetNextFeature() than indicated by GetFeatureCount().  It might be
because you haven't called ResetRead() before doing your first
GetNextFeature() call, or it might be a counting error in the driver.

I would suggest calling ResetReading() before callin the first
GetNextFeature() (before the feature loop).

If that doesn't help, then restructure you code to keep calling
GetNextFeature() till it returns None.

> The second question I have is, how do I go about converting the features from one projection to another during this process.  I know what my projections are.  The source data is in a 10TM projection (proj: +proj=tmerc +lon_0=-115 +k_0=0.9992 +x_0=500000 +datum=NAD27) and the target projection is EPSG:2152 (NAD83 CSRS98 12N).  I looked through the Projection Tutorial, but I can't figure out how to do that using python.

This will be a bit involved.

I think you need to do something like the following
to setup a transformation object before looping through features.

    src_cs = osr.SpatialReference()
    src_cs.ImportFromProj4( 'proj=tmerc +lon_0=-115 +k_0=0.9992
+x_0=500000 +datum=NAD27' )

    dst_cs = osr.SpatialReference()
    dst_cs.ImportFromEPSG( 2152 )

    ct = osr.CoordinateTransformation( src_cs, dst_cs )

Then use the "ct" to transform the geometries.

    newGeom.transform( ct )

Note that PROJ.4 (and OGR) don't know anything spectial
about the NAD83(CSR98) datum.  They will treat EPSG:2152
effectively as a simple UTM 12 WGS84 coordinate system.
So, the source coordinate system should go through NAD27
to NAD83 grid shifting, and then the lat/long just reprojected
back into UTM 12 on that ellipsoid.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From jluis at ualg.pt  Wed Dec 14 16:37:37 2005
From: jluis at ualg.pt (jluis)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ERDAS IMG .aux file
In-Reply-To: <6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
References: <6.2.1.2.0.20051213151602.04277608@mailhost.geodesign.com.br>	<931f8ea90512131420i59ad9c14m7799b7c2f6c7cdb9@mail.gmail.com>
	<6.2.1.2.0.20051214155058.02951f10@mailhost.geodesign.com.br>
Message-ID: <43A090A1.6020901@ualg.pt>

Reinaldo,

I don't know if that is the cause but installing VC under a directory
with blanks in the name (e.g. your "Arquivos de programas\Microsoft Visual Studio")
is a very risky choice. We know that it 'wants' to be installed in similar
directories but it's good practice to not allow it to do so.

Joaquim Luis

> Hello Frank,
> 
> Thanks for the info.  So far I've been using the fwtools.  Now, I tried 
> building gdal for the first time but I got the following error message 
> at the end of the process
> 
> C:\Arquivos de programas\Microsoft Visual Studio\VC98\lib\MSVCRT.lib : 
> fatal error LNK1106: invalid file or disk full: cannot seek to 
> 0x35894cc8NMAKE : fatal error U1077: 'link' : return code '0xc'
> Stop.
> 
> The HD am building on has 42 GB of free space.  Any suggestions on 
> what's going on?
> 
> Thanks in advance.
> 
> Reinaldo
> 

From jean.ponchon at acterna.com  Wed Dec 14 02:50:04 2005
From: jean.ponchon at acterna.com (Jean Ponchon)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Impossible to find _gdal
In-Reply-To: <931f8ea90512131804t3c53dfeev602b1f1e43566c65@mail.gmail.com>
Message-ID: <OF0F1A55AB.30424472-ONC12570D7.002ACBA5-C12570D7.002B0197@acterna.com>

I have only a file called _gdal.def.

What do you mean by configured and built successfully. I think that I 
missed this operation. How can I do that?

Thanks for your help
Jean Ponchon
ONMS product marketing

Tel: +33 (0) 477 47 89 31
Mobile : +33 (0) 688 23 36 98

e-mail: Jean.ponchon@acterna.com



Frank Warmerdam <warmerdam@pobox.com> 
Sent by: fwarmerdam@gmail.com
14/12/2005 03:04

To
Jean Ponchon <jean.ponchon@acterna.com>
cc
gdal-dev@lists.maptools.org
Subject
Re: [Gdal-dev] Impossible to find _gdal






On 12/13/05, Jean Ponchon <jean.ponchon@acterna.com> wrote:
>
> Hello,
>
> I am trying to use gdal.py but a file _gdal is not found. Would I have
> missed anaything?

Jean,

Do you know if the Python support was configured, and built
successfully?   Do you have an _gdal.so in gdal/pymod?
Perhaps things failed in the install or the _gdal.so was installed
in the wrong place?

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/bdc0728e/attachment.html
From mihai.fagadar at alcatel.ro  Wed Dec 14 08:50:06 2005
From: mihai.fagadar at alcatel.ro (Mihai Fagadar-Cosma)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Error in gcore\gdalrasterband.cpp
Message-ID: <002c01c600b5$4d48b910$4daf849b@rotimn0c0035>

Hello,

There seems to be an error in the GDAL 1.3.1 release, in the
gcore\gdalrasterband.cpp file:
the GDALSetDefaultRAT function has been wrongly named GDALGetDefaultRAT.

Best regards,
Mihai Fagadar 


From mihai.fagadar at alcatel.ro  Wed Dec 14 11:13:17 2005
From: mihai.fagadar at alcatel.ro (Mihai Fagadar-Cosma)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Problems in the gdal.h file (GDAL 1.3.1 Windows).
Message-ID: <003201c600c9$4db19cf0$4daf849b@rotimn0c0035>

Hello,

While compiling GDAL 1.3.1, I noticed that there are some more errors in
the gdal.h file which prevent acces to the RAT data:

The GDALRATGetColOfUsage function is defined with the 2nd parameter as
GDALRATFieldType instead of GDALRATFieldUsage.

The GDALRATGetValueAsXXX functions are missing an int parameter.

The GDALRATSetValueAsXXX functions are missing two int parameters, on
the 2nd and 3rd position respectively.

After correcting them manually I can access the functions.

Thank you and best regards,
Mihai 



From warmerdam at pobox.com  Wed Dec 14 18:44:21 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Error in gcore\gdalrasterband.cpp
In-Reply-To: <002c01c600b5$4d48b910$4daf849b@rotimn0c0035>
References: <002c01c600b5$4d48b910$4daf849b@rotimn0c0035>
Message-ID: <931f8ea90512141544p7bd54945y2cf75b617a7ab599@mail.gmail.com>

On 12/14/05, Mihai Fagadar-Cosma <mihai.fagadar@alcatel.ro> wrote:
> Hello,
>
> There seems to be an error in the GDAL 1.3.1 release, in the
> gcore\gdalrasterband.cpp file:
> the GDALSetDefaultRAT function has been wrongly named GDALGetDefaultRAT.

Mihai,

It seems that this problem has been corrected in CVS.  You
might want to check over the file to verify that the correct
issue was fixed.

  http://www.gdal.org/srctree/gcore/gdalrasterband.cpp

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Wed Dec 14 18:45:41 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Problems in the gdal.h file (GDAL 1.3.1 Windows).
In-Reply-To: <003201c600c9$4db19cf0$4daf849b@rotimn0c0035>
References: <003201c600c9$4db19cf0$4daf849b@rotimn0c0035>
Message-ID: <931f8ea90512141545y3ad8668y1226408356e4c2dc@mail.gmail.com>

On 12/14/05, Mihai Fagadar-Cosma <mihai.fagadar@alcatel.ro> wrote:
> Hello,
>
> While compiling GDAL 1.3.1, I noticed that there are some more errors in
> the gdal.h file which prevent acces to the RAT data:
>
> The GDALRATGetColOfUsage function is defined with the 2nd parameter as
> GDALRATFieldType instead of GDALRATFieldUsage.
>
> The GDALRATGetValueAsXXX functions are missing an int parameter.
>
> The GDALRATSetValueAsXXX functions are missing two int parameters, on
> the 2nd and 3rd position respectively.
>
> After correcting them manually I can access the functions.

Mihai,

I believe these problems are fixed up, but I think you
might want to update to the latest nightly snapshot.  If
problems persist let me know.   There have been a
few other RAT related fixes since the 1.3.1 release.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From carl.anderson at vadose.org  Wed Dec 14 20:28:05 2005
From: carl.anderson at vadose.org (Carl Anderson)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Aster L1A images
Message-ID: <43A0C6A5.1040208@vadose.org>


Anybody out there having problems working with Aster L1A data?

with GDAL-1.3.1 / FWTools1.0.0a4

during a gdalwarp of VNIR_Band[123]:ImageData
I am getting
    Band1      W    H
    Band2      W+1 H-1
    Band3N   W   H

where W is the band width and H is the band height.

visually there does appear to be pixel shift in band 2 relative to bands 
1 and 3N

I checked the sensor telemetry bands by exporting with gdal_translate 
and they all 'diff' the same.

I am seeing this with scenes that I acquired directly from EROS and from 
scenes in the LP DAAC pool.
I checked L1A images from 2003, 2004, and 2005 and all have the same issue.

Aster scenes are about 118Mb and I can provide a link to a HDF if it 
will help anyone.

C.

From mjiesu at gmail.com  Wed Dec 14 21:20:37 2005
From: mjiesu at gmail.com (Ming Su)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Support for JPEG2000
Message-ID: <382863cc0512141820p3c0cdaeemc3360ac1e329dab4@mail.gmail.com>

Hello all,

I tired to use gdal to create Jasper JPEG2000 from GeoTiff file. The Jasper
libraries has already been built into the gdal. The following is my code:

        const char *pszFormatOut = "JPEG2000";
        GDALDriver* poDriverOut;
        poDriverOut = GetGDALDriverManager()->GetDriverByName(pszFormatOut);
         GDALDataset* poDstDS = poDriverOut->CreateCopy("Assessment.jp2",
poSrcDS, FALSE, papszOptions, NULL, NULL);

  Note: poSrcDS is the data source from a valid Geotiff file.

The following is the error message I got:

       ERROR 4: `Assessment.jp2' not recognised as a supported file format.

I stepped into the code and found it happed when tried to re-open dataset
and copy pam information. Inside this GDALOpen function( in
jpeg2000dataset.cpp ), I got the msg that is "Unable to read JP2 header
boxes", so the funtion return NULL.

Should I make the header box before copying the data? or shoud I use other
funtions instead of createcopy() to do it?

Thanks,

Mingjie
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051214/16713259/attachment.html
From gislf at 126.com  Thu Dec 15 02:01:29 2005
From: gislf at 126.com (gislif)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] same code,    different result?
References: <200512142345.jBENjqtm006274@duke.maptools.org>
Message-ID: <200512151501294146154@126.com>

Hello,

             Why the same code has diferent result? I have the following code in two deferent seperate program  to generate dataset, one program (which has only these  codes )is ok ,the other(which has other program writen by    qt  )  failed.   why?  seting mistake?


int main( int argc, char **argv )
{
//
 GDALDataset  *poDataset;
 GDALRasterBand  *poBand;

 GDALAllRegister();

 poDataset = (GDALDataset *) GDALOpen( "c:\output.jpg", GA_ReadOnly );

 // one program (which has only these  codes )is ok ,
//the other(which has other program writen by    qt  )  failed.   

if( poDataset == NULL ) 
 {
  cout<<"fail to  read file!"<<endl;
  return 1;
 }






gislif
2005-12-15
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051215/fccb6070/attachment.html
From warmerdam at pobox.com  Thu Dec 15 09:49:53 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] same code, different result?
In-Reply-To: <200512151501294146154@126.com>
References: <200512142345.jBENjqtm006274@duke.maptools.org>
	<200512151501294146154@126.com>
Message-ID: <931f8ea90512150649v22af00dauba452b741b9c05f6@mail.gmail.com>

On 12/15/05, gislif <gislf@126.com> wrote:
>
> Hello,
>
>              Why the same code has diferent result? I have the following
> code in two deferent seperate program  to generate dataset, one program
> (which has only these  codes )is ok ,the other(which has other program
> writen by    qt  )  failed.   why?  seting mistake?
>
>
> int main( int argc, char **argv )
> {
> //
>  GDALDataset  *poDataset;
>  GDALRasterBand  *poBand;
>
>  GDALAllRegister();
>
>  poDataset = (GDALDataset *) GDALOpen( "c:\output.jpg", GA_ReadOnly );

"gislif",

Does the above really work?  My understanding is that the backslash
would always get interpreted as an escape character on the "o"
so you would end up trying to open the file "c:output.jpg" which would
depend on your current directory.   In C/C++ I always double backslashes
in paths.

eg.
GDALOpen( "C:\\output.jpg", GA_ReadOnly );

I am not aware of any reason GDAL should work differently in a Qt
app than not in a Qt app.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From gislf at 126.com  Thu Dec 15 10:19:17 2005
From: gislf at 126.com (gislif)
Date: Wed Nov 21 11:49:55 2007
Subject: =?gb2312?B?u9i4tDogUmU6IFtHZGFsLWRldl0gc2FtZSBjb2RlLCBkaWZmZXJlbnQgcmVzdWx0Pw==?=
References: <200512142345.jBENjqtm006274@duke.maptools.org>
	<200512151501294146154@126.com>
	<931f8ea90512150649v22af00dauba452b741b9c05f6@mail.gmail.com>
Message-ID: <200512152319174920167@126.com>

Dear Frank  Warmerdam

            Thank you for your advise.I though the backslash is one possible reason.
           When I put the above code in pure console ,it works well. But when I put them in a qt project ,it can't get the dataset . I put these code in the begining of qt  project  after  main() .It should run first .I think if I include file #include "gdal_priv.h" and link gdal lib file ,it should work .




gislif
2005-12-15



 Frank Warmerdam
 2005-12-15 22:50:09
 gislif
 gdal-dev@lists.maptools.org
 Re: [Gdal-dev] same code, different result?

On  12/15/05,  gislif   <gislf@126.com >  wrote:
>
>  Hello,
>
>                            Why  the  same  code  has  diferent  result?  I  have  the  following
>  code  in  two  deferent  seperate  program    to  generate  dataset,  one  program
>  (which  has  only  these    codes  )is  ok  ,the  other(which  has  other  program
>  writen  by        qt    )    failed.      why?    seting  mistake?
>
>
>  int  main(  int  argc,  char  **argv  )
>  {
>  //
>    GDALDataset    *poDataset;
>    GDALRasterBand    *poBand;
>
>    GDALAllRegister();
>
>    poDataset  =  (GDALDataset  *)  GDALOpen(  "c:\output.jpg",  GA_ReadOnly  );

"gislif",

Does  the  above  really  work?    My  understanding  is  that  the  backslash
would  always  get  interpreted  as  an  escape  character  on  the  "o"
so  you  would  end  up  trying  to  open  the  file  "c:output.jpg"  which  would
depend  on  your  current  directory.      In  C/C++  I  always  double  backslashes
in  paths.

eg.
GDALOpen(  "C:\\output.jpg",  GA_ReadOnly  );

I  am  not  aware  of  any  reason  GDAL  should  work  differently  in  a  Qt
app  than  not  in  a  Qt  app.

Best  regards,
--
---------------------------------------+--------------------------------------
I  set  the  clouds  in  motion  -  turn  up      |  Frank  Warmerdam,  warmerdam@pobox.com
light  and  sound  -  activate  the  windows  |  http://pobox.com/~warmerdam
and  watch  the  world  go  round  -  Rush        |  Geospatial  Programmer  for  Rent

.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051215/549f72a3/attachment.html
From werchowyna at epf.pl  Thu Dec 15 17:07:39 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Re: Erdas 7.4 *.gis - wrong values
In-Reply-To: <931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
References: <1134585748.11397.0.camel@localhost.localdomain>
	<931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
Message-ID: <1134684460.22451.7.camel@localhost.localdomain>

On ?ro, 2005-12-14 at 15:07 -0500, Frank Warmerdam wrote:
> On 12/14/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> > Frank,
> >
> > I got some ERDAS 7.4 *.gis files which where created by LANDIS
> > http://landis.forest.wisc.edu/ and I was asked to import them into
> > Grass.
> >
> > They are supposed to be 16 or 8 bit integer. The value range should be
> > within 0-300. However gdalinfo reports wrong Computed
> > Min/Max=-32256.000,30720.000.

<snip>

> Maciek,
> 
> I have confirmed that GDAL was not making the right decision about
> byte swapping for 16bit LAN/GIS files.  I have committed a fix for
> this, and your file now seems to work OK.
> 
> I appologise for not responding to this sooner.  I was at a client
> site last week, and I lost track of this issue.

No problem! Thanks for fixing this. I'll test soon with GDAL from CVS.
Thank you for you help.

> > P.S.
> > There is also an issue with the georeference handling. The planar
> > coordinates reported by gdalinfo are correct, but a latlong WGS84 CS is
> > forced and latlong cooridnates are printed too. I can override it when
> > importing into Grass, no problem, but looks strange, might be worthy of
> > taking look at too.
> 
> The file has vlaue "0" for the coordinate system field, which is
> apparently Lat/long.  I don't know if my long ago reverse engineering
> of this field is wrong, or if there is some auxilary override I should
> be looking for.  But I don't really have any way to figure out what
> the coordinate system of the file is.

I see. It is weird that for coordinates expressed in millions of units
latlong is assumed. Maybe LANDISII plays lose with CS handling and
assigns "0" while it should be some other value indicating an "unknown
x,y CS".

Cheers,
Maciek


--------------------
W polskim Internecie s? setki milion?w stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/


From craig.miller at spatialminds.com  Thu Dec 15 18:16:48 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] PostGIS primary key in CreateLayer
Message-ID: <008501c601cd$9fa37150$0701a8c0@vaio>

I'm not sure if the primary key definition was ever added in CVS for the
PostGIS drivers CreateLayer method.  If not, here is the snippet to add it.

    if( !bHavePostGIS )
	{
        sprintf( szCommand,
                 "CREATE TABLE \"%s\" ( "
                 "   OGC_FID SERIAL, "
                 "   WKB_GEOMETRY %s, "
                 "   CONSTRAINT \"%s_pk\" PRIMARY KEY (OGC_FID) )",
                 pszLayerName, pszGeomType, pszLayerName );
	}
    else
	{
        sprintf( szCommand,
                 "CREATE TABLE \"%s\" ( OGC_FID SERIAL, CONSTRAINT \"%s_pk\"
PRIMARY KEY (OGC_FID) )",
                 pszLayerName, pszLayerName );
	}

--Craig



From paul at warriner.us  Thu Dec 15 19:48:28 2005
From: paul at warriner.us (paul@warriner.us)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Gdal 1.3.1 on FreeBSD
Message-ID: <040001c601da$6dd6cd90$0100a8c0@WARRINER>

Hello,

 

Wondering if anyone has ported GDAL to FreeBSD < 5. 

 

Regards,

Paul

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051215/6d162aeb/attachment.html
From ben at vterrain.org  Thu Dec 15 21:26:50 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <200512122239.45525.surgpub@telkomsa.net>
Message-ID: <011301c601e8$2c34dc20$9b02a8c0@DellWork>

Paul et al.,

The free VTP software (built on top of GDAL) does all this already.  It does
hillshading of existing imagery from a DEM, produces 'color relief maps' by
letting you assign colors to elevations then shading the result.  It also
supports optional shadow casting, from any sun direction.  In fact, in its
3D runtime environment, you can even cast shadows from the terrain onto
terrain, and from culture onto terrain, using accurate sun direction taking
geographic location, time and date into account.
Or you can use it simply in 2D.

http://vterrain.org/

-Ben

> -----Original Message-----
> From: Paul Surgeon
> Sent: Monday, December 12, 2005 10:40 AM
> 
> Compiled easily enough on my Kubuntu Breezy system with "g++ 
> hillshade.cpp -lgdal -o hillshade" and works perfectly.
> 
> [...]
> 
> Now I'm just in need of a tool to make color relief maps. 
> Maybe I can hack yours.  :)
> 
> Thanks
> Paul


From ben at vterrain.org  Thu Dec 15 21:37:09 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] RE: shaded relief utility (DIY)
In-Reply-To: <439EFF9C.4000600@ualg.pt>
Message-ID: <011a01c601e9$9ced1a30$9b02a8c0@DellWork>

Joaquim,

As Lennox pointed out, http://vterrain.org/Performance/lighting.html is a
good starting point for learning about shadow methods.

However, you already have the VTP software, which can do this all for you
now, either with VTBuilder for off-line 2D processing, or Enviro for shading
on the fly at 3D runtime.

If it's the code you're interested in, you'll find it in
TerrainSDK/vtdata/HeightField.cpp, methods ColorDibFromElevation(),
ShadeDibFromElevation(), ShadeQuick(), ShadowCastDib().  The shadow casting
is an optimized implementation of Mircea Marghidanu's article on the page
above.  If you know some ways it could be improved, please let me know.

-Ben

> -----Original Message-----
> From: jluis
> Sent: Tuesday, December 13, 2005 7:07 AM
> 
> Charles Wivell wrote:
> > If you want to include shadow, it becomes a little more complex.
> 
> Charles,
> Do you know any reference where I could study the more 
> complex "include shadow" method?
> 
> I have implemented 4 or 5 different algorithms of shading 
> relief but none of them does shadows.
> To my knowledge, the best shading with shadows is the one 
> used by a software called flerdermaus.
> 
> J. Luis


From craig.miller at spatialminds.com  Thu Dec 15 22:46:39 2005
From: craig.miller at spatialminds.com (Craig Miller)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Determine Geometry Field name?
Message-ID: <000101c601f3$52c80a00$0501a8c0@vaio>

I've been looking throught C++ API, trying to determine if there is some way
to determine what the name is of the field in the feature that contains the
geometry.  I need it to pass a custom query via ExecuteSQL.  I only need to
do this for the PG driver so I could query the geometry_columns table
directly, but it would be better if I could get it via the API.

Thanks for the help,
Craig



From ealpert at digitalglobe.com  Fri Dec 16 10:36:36 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB233073034@COMAIL01.digitalglobe.com>

Does it export closed polygons or pixels or both?
 
-e

________________________________

From: gdal-dev-bounces@lists.maptools.org on behalf of Ben Discoe
Sent: Thu 12/15/2005 7:26 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] shaded relief utility



Paul et al.,

The free VTP software (built on top of GDAL) does all this already.  It does
hillshading of existing imagery from a DEM, produces 'color relief maps' by
letting you assign colors to elevations then shading the result.  It also
supports optional shadow casting, from any sun direction.  In fact, in its
3D runtime environment, you can even cast shadows from the terrain onto
terrain, and from culture onto terrain, using accurate sun direction taking
geographic location, time and date into account.
Or you can use it simply in 2D.

http://vterrain.org/

-Ben

> -----Original Message-----
> From: Paul Surgeon
> Sent: Monday, December 12, 2005 10:40 AM
>
> Compiled easily enough on my Kubuntu Breezy system with "g++
> hillshade.cpp -lgdal -o hillshade" and works perfectly.
>
> [...]
>
> Now I'm just in need of a tool to make color relief maps.
> Maybe I can hack yours.  :)
>
> Thanks
> Paul

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051216/0307b4f4/attachment.html
From packalen at cs.joensuu.fi  Fri Dec 16 12:10:51 2005
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] SRS not properly defined
Message-ID: <Pine.GSO.4.61.0512161906440.21206@cs.joensuu.fi>

Hi,

I define some projections as follows:

static char kkj3_prj[] = "PROJCS[\"Finland_Zone_3\",GEOGCS ...
static char euref_fin_prj[] = "PROJCS[\"EUREF_FIN_TM35FIN\",GEOGCS[ ...

Then I set projection :

                 /*  Imports above wkt string   */
    char *prj =  GetWktProjectionString( prProj );

    if ( pDS->SetProjection( prj ) == CE_Failure )
    {
       printf( "\nERROR: SetProjection failed.\n" );
       exit( 1 );
    }

Then I print:

    printf( "\n%s\n", pDS->GetProjectionRef() );

Projection WKT is *always* printed properly. However, projection is saved 
into file only in the case of euref_fin-projection. Other projection 
deinitions are not saved into the output file. The wkt which succeeds is 
the only one that is not (yet) widely used - therefore it does not exists 
e.g. in the EPSG library (not at least last time I checked). I'm rather 
sure my wkt strings are correct. I have used these already some years 
such a manner that I save a string into prj file without any problem. 
Wkt strings are copied from ESRI prj files.

I have also tested 'oSRS.Validate()' and it succeeds. Any hints?

Regards,
Petteri

=========================================================================
Petteri Packal?n                   "There are two major products that
University of Joensuu               came out of Berkeley: LSD and UNIX.
Faculty of Forestry                 We don't believe this to be a
P.O. Box 111                        coincidence."  -- J.S. Anderson
80101 Joensuu
Finland                            "There still remains a question: Which
e-mail: packalen@cs.joensuu.fi      caused the other?"
=========================================================================
From ben at vterrain.org  Fri Dec 16 16:40:49 2005
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] shaded relief utility
In-Reply-To: <8B319E5A30FF4A48BE7EEAAF609DB233073034@COMAIL01.digitalglobe.com>
Message-ID: <003d01c60289$62124f20$9b02a8c0@DellWork>

> -----
> From: Ben Discoe
> Sent: Thu 12/15/2005 7:26 PM
> 
> The free VTP software (built on top of GDAL) does all this 
> already.  It does hillshading of existing imagery from a DEM, 
> produces 'color relief maps' [...]

> -----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com] 
> Sent: Friday, December 16, 2005 5:37 AM
> 
> Does it export closed polygons or pixels or both?

Everything is rasters, so i suppose the answer is "pixels".  I'm not certain
where polygons would play a role in hillshading, unless the source data was
only available in contour form, or the output needs to be at a higher pixel
resolution than the input heixel resolution.  In that case, using extracted
contours seems like it would suffer from similar artifacts as supersampling
the input grid, so i'm not sure if there's an advantage there.

-Ben




From ealpert at digitalglobe.com  Fri Dec 16 17:34:58 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] shaded relief utility
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BBF9@COMAIL01.digitalglobe.com>


As I mentioned previously go to:

http://www.demis.nl/home/pages/wms/demiswms.htm

Turn off all the layers but hillshading and topography.

Zoom in...see how nice and aesthetic it appears. There's no graininess
as you zoom in. This is done by overlaying a partially transparent
topography layer over a *vector* contoured hillshade grid. Toggle the
two remaining layers and you'll see what I'm getting at.

-e

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ben Discoe
Sent: Friday, December 16, 2005 2:41 PM
To: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] shaded relief utility


> -----
> From: Ben Discoe
> Sent: Thu 12/15/2005 7:26 PM
> 
> The free VTP software (built on top of GDAL) does all this
> already.  It does hillshading of existing imagery from a DEM, 
> produces 'color relief maps' [...]

> -----
> From: Ethan Alpert [mailto:ealpert@digitalglobe.com]
> Sent: Friday, December 16, 2005 5:37 AM
> 
> Does it export closed polygons or pixels or both?

Everything is rasters, so i suppose the answer is "pixels".  I'm not
certain where polygons would play a role in hillshading, unless the
source data was only available in contour form, or the output needs to
be at a higher pixel resolution than the input heixel resolution.  In
that case, using extracted contours seems like it would suffer from
similar artifacts as supersampling the input grid, so i'm not sure if
there's an advantage there.

-Ben



_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From dsankaran at sanz.com  Fri Dec 16 18:26:41 2005
From: dsankaran at sanz.com (Sankaran, Deepak)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Proj4j >> Projection WKT
Message-ID: <ED3A48B9840E594890A2BC172D11946504AB1D38@mailman.san.com>

I would just like to confirm whether "Equidistant_Cylindrical"
projection needs to be translated to "Equirectangular" in the WKT before
GDAL-Proj4j is able to process it?
 
Thanks,
Deepak
303-495-6354
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051216/a14b30e7/attachment.html
From geowiz at shaw.ca  Thu Dec 15 22:31:14 2005
From: geowiz at shaw.ca (GeoWiz)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] LiDAR processing
Message-ID: <003601c601f1$2c074d60$6501a8c0@STEVE>

I was wondering if there are any good open source projects going on that 
involve processing lidar data.

Thanks,
Steve 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051215/adfa3a36/attachment.html
From packalen at cs.joensuu.fi  Sat Dec 17 12:18:40 2005
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] SRS not properly defined
In-Reply-To: <931f8ea90512170711lb18ff7bv2f21890eaf3f42d6@mail.gmail.com>
References: <Pine.GSO.4.61.0512161906440.21206@cs.joensuu.fi>
	<931f8ea90512170711lb18ff7bv2f21890eaf3f42d6@mail.gmail.com>
Message-ID: <Pine.GSO.4.61.0512171905530.18927@cs.joensuu.fi>

Frank,

> On 12/16/05, Petteri Packalen <packalen@cs.joensuu.fi> wrote:
>> Projection WKT is *always* printed properly. However, projection is saved
>> into file only in the case of euref_fin-projection. Other projection
>> deinitions are not saved into the output file. The wkt which succeeds is
>> the only one that is not (yet) widely used - therefore it does not exists
>> e.g. in the EPSG library (not at least last time I checked). I'm rather
>> sure my wkt strings are correct. I have used these already some years
>> such a manner that I save a string into prj file without any problem.
>> Wkt strings are copied from ESRI prj files.
>
> You haven't specified what format you are working with, nor
> given the details of the problem coordinate systems, so
> it is hard to say much.

I tested it with HFA and GTiff - both fails. CSs which fails are EPSG 
2391, 2392, 2393 and 2394.

> I will say that you code looks fine, so it is likely an
> issue with whether the format in question supports
> the particular projection(s) you are using. The other
> thing is that if the projection definitions are coming
> from an ESRI source they likely ought to be normalized
> into OGR WKT format by doing a morphFromESRI()
> on an ORSpatialReference.

I tested morphFromESRI but it didn't correct the problem. I solved the 
issue using OGRSpatialReference::importFromEPSG and 
OGRSpatialReference::exportToWkt methods. First I imported valid WKTs 
using EPSG codes, then I printed valid WKTs and pasted these into my code. 
I want to avoid additional dependencies in this particular program and 
therefore I don't want to include GDAL data directory into this project. 
That's the reason why I don't want to use importFromEPSG() in the final 
version.

Anyway, WKTs copied from the esri prj fails. Let me know if I can help in 
this issue somehow.

Regards,
Petteri



From packalen at cs.joensuu.fi  Sat Dec 17 12:27:23 2005
From: packalen at cs.joensuu.fi (Petteri Packalen)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] LiDAR processing
In-Reply-To: <003601c601f1$2c074d60$6501a8c0@STEVE>
References: <003601c601f1$2c074d60$6501a8c0@STEVE>
Message-ID: <Pine.GSO.4.61.0512171920570.18927@cs.joensuu.fi>

Hi

> I was wondering if there are any good open source projects going on that
> involve processing lidar data.

I would be very interested in as well. Most of my codes are related to 
lidar nowadays. I do not know any stricly lidar related open source 
project. There are a lot of action around lidar these days but 
not so many tools, formats, etc.

Regards,
Petteri



From warmerdam at pobox.com  Sat Dec 17 10:11:57 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] SRS not properly defined
In-Reply-To: <Pine.GSO.4.61.0512161906440.21206@cs.joensuu.fi>
References: <Pine.GSO.4.61.0512161906440.21206@cs.joensuu.fi>
Message-ID: <931f8ea90512170711lb18ff7bv2f21890eaf3f42d6@mail.gmail.com>

On 12/16/05, Petteri Packalen <packalen@cs.joensuu.fi> wrote:
> Projection WKT is *always* printed properly. However, projection is saved
> into file only in the case of euref_fin-projection. Other projection
> deinitions are not saved into the output file. The wkt which succeeds is
> the only one that is not (yet) widely used - therefore it does not exists
> e.g. in the EPSG library (not at least last time I checked). I'm rather
> sure my wkt strings are correct. I have used these already some years
> such a manner that I save a string into prj file without any problem.
> Wkt strings are copied from ESRI prj files.
>

Petteri,

You haven't specified what format you are working with, nor
given the details of the problem coordinate systems, so
it is hard to say much.

I will say that you code looks fine, so it is likely an
issue with whether the format in question supports
the particular projection(s) you are using. The other
thing is that if the projection definitions are coming
from an ESRI source they likely ought to be normalized
into OGR WKT format by doing a morphFromESRI()
on an ORSpatialReference.

Best regards,
Frank


From neteler at itc.it  Sat Dec 17 13:54:38 2005
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] LiDAR processing
In-Reply-To: <003601c601f1$2c074d60$6501a8c0@STEVE>
References: <003601c601f1$2c074d60$6501a8c0@STEVE>
Message-ID: <20051217185438.GC24719@thuille.itc.it>

On Thu, Dec 15, 2005 at 08:31:14PM -0700, GeoWiz wrote:
> I was wondering if there are any good open source projects going on that 
> involve processing lidar data.
> 
> Thanks,
> Steve 

Steve,

you may check GRASS 5.4, it contains the software from Prof Maria Brovelli,
Italy. See the src.contrib/POLIMICO/ directory.

Here the README details:

LIDAR data filtering
--------------------

Command execution order:

1. s.bspline.reg
2. s.edgedetection
3. s.growing

s.bspline.reg/  : bilinear or bicubic spline interpolation Least quares approach
s.correction/   : DTM correction: error removal (building remainder, vegetation etc)
s.edgedetection/: detection of building edges, vegetation edges, etc.
s.growing/      : filling of previously computed edges

Additional software
s.to.qrast/     : fast sites to raster conversion (replaces s.to.rast)

Related Publications:
- GRASS Users conference 2002, Trento, Italy
  http://www.ing.unitn.it/~grass/proceedings/proceedings/pdfs/Brovelli_Maria_Antonia.pdf

- Brovelli, Maria A, Cannata, Massimiliano & Longoni, Ulisse M (2004)
  LIDAR Data Filtering and DTM Interpolation Within GRASS.
  Transactions in GIS 8 (2), 155-174.
  Online: http://www.blackwell-synergy.com/servlet/useragent?func=synergy&synergyAction=
showTOC&journalCode=tgis&volume=8&issue=2&year=2004&part=null

Note that 5.4-CVS contains some updates which will appear in the
next 5.4.x release of GRASS.

Hope this helps

 Markus

-- 
Markus Neteler     <neteler itc it>       http://mpa.itc.it
ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
MPBA - Predictive Models for Biol. & Environ. Data Analysis
Via Sommarive, 18        -       38050 Povo (Trento), Italy

From warmerdam at pobox.com  Sat Dec 17 15:01:30 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] SRS not properly defined
In-Reply-To: <Pine.GSO.4.61.0512171905530.18927@cs.joensuu.fi>
References: <Pine.GSO.4.61.0512161906440.21206@cs.joensuu.fi>
	<931f8ea90512170711lb18ff7bv2f21890eaf3f42d6@mail.gmail.com>
	<Pine.GSO.4.61.0512171905530.18927@cs.joensuu.fi>
Message-ID: <931f8ea90512171201s7dbd4936y26999e507a06d8a3@mail.gmail.com>

On 12/17/05, Petteri Packalen <packalen@cs.joensuu.fi> wrote:
> I tested morphFromESRI but it didn't correct the problem. I solved the
> issue using OGRSpatialReference::importFromEPSG and
> OGRSpatialReference::exportToWkt methods. First I imported valid WKTs
> using EPSG codes, then I printed valid WKTs and pasted these into my code.

Petteri,

Ah, no need for morphToESRI() if the source of the WKT is the
importFromEPSG() method.

> I want to avoid additional dependencies in this particular program and
> therefore I don't want to include GDAL data directory into this project.
> That's the reason why I don't want to use importFromEPSG() in the final
> version.

I tried assigning EPSG:2391  to a .tif and a .img file with gdal_translate
and it worked fine for me.  But then, the gdal/data files were findable.
I see in the case of TIFF, the actual EPSG authority code gets stored in
the TIFF file, and this can only be expanded again on reading if the
epsg support csv files are available.

I am not sure how it did work for you for the one coordinate system.

I also tried it for Erdas Imagine (.img) format and that too seemed to
work OK.  In that case there *should* be no dependence on the .csv
files.   I looked at EPSG:2391 and it is a pretty vanilla transverse mercator
projection, so there isn't anything "hard" about storing it.

If I get a chance, I'll try and reproduce the problem with your code.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sat Dec 17 15:20:13 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Proj4j >> Projection WKT
In-Reply-To: <ED3A48B9840E594890A2BC172D11946504AB1D38@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946504AB1D38@mailman.san.com>
Message-ID: <931f8ea90512171220k38df3182p312948719b68bc26@mail.gmail.com>

On 12/16/05, Sankaran, Deepak <dsankaran@sanz.com> wrote:
>
> I would just like to confirm whether "Equidistant_Cylindrical" projection
> needs to be translated to "Equirectangular" in the WKT before GDAL-Proj4j is
> able to process it?

Deepak,

My catalog of projections treats these as equivelent,
but lists Equirectangular as the proper name for WKT.

  http://geotiff.maptools.org/proj_list/equirectangular.html

But looking in the morphFromESRI/morphToESRI code
i see that ESRI uses the name Equidistant_Cylindrical.
If you now the WKT is ESRI compatible, you can
import it into an OGRSpatialReference and then call
morphFromESRI() to normalize it.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sun Dec 18 11:51:48 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Determine Geometry Field name?
In-Reply-To: <000101c601f3$52c80a00$0501a8c0@vaio>
References: <000101c601f3$52c80a00$0501a8c0@vaio>
Message-ID: <931f8ea90512180851g1d46e68fw49238a423592c170@mail.gmail.com>

On 12/15/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> I've been looking throught C++ API, trying to determine if there is some way
> to determine what the name is of the field in the feature that contains the
> geometry.  I need it to pass a custom query via ExecuteSQL.  I only need to
> do this for the PG driver so I could query the geometry_columns table
> directly, but it would be better if I could get it via the API.

Craig,

I'm afraid there is currently no such mechanism.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sun Dec 18 11:57:41 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] PostGIS primary key in CreateLayer
In-Reply-To: <008501c601cd$9fa37150$0701a8c0@vaio>
References: <008501c601cd$9fa37150$0701a8c0@vaio>
Message-ID: <931f8ea90512180857k59354883n5a19551e29f40168@mail.gmail.com>

On 12/15/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> I'm not sure if the primary key definition was ever added in CVS for the
> PostGIS drivers CreateLayer method.  If not, here is the snippet to add it.
>
>     if( !bHavePostGIS )
>         {
>         sprintf( szCommand,
>                  "CREATE TABLE \"%s\" ( "
>                  "   OGC_FID SERIAL, "
>                  "   WKB_GEOMETRY %s, "
>                  "   CONSTRAINT \"%s_pk\" PRIMARY KEY (OGC_FID) )",
>                  pszLayerName, pszGeomType, pszLayerName );
>         }
>     else
>         {
>         sprintf( szCommand,
>                  "CREATE TABLE \"%s\" ( OGC_FID SERIAL, CONSTRAINT \"%s_pk\"
> PRIMARY KEY (OGC_FID) )",
>                  pszLayerName, pszLayerName );
>         }

Craig,

I have applied your patch.

Thanks!
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Sun Dec 18 12:09:33 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Postgis DeleteLayer(int iLayer) method
In-Reply-To: <002601c5ff72$991741c0$0401a8c0@vaio>
References: <002601c5ff72$991741c0$0401a8c0@vaio>
Message-ID: <931f8ea90512180909u60866e42i1270ac8a738f3cb4@mail.gmail.com>

On 12/12/05, Craig Miller <craig.miller@spatialminds.com> wrote:
> The existing PostGIS driver didn't have support for deleting a layer via the
> datasource (OGRDatasource::DeleteLayer(int iLayer).  It did have a method
> for deleting a layer via a name, but this isn't exposed via the C++ API.  I
> quickly adapted that function to the DeleteLayer(int iLayer) method, so
> there would be an implementation in the driver available.  I've done very
> little testing of the method, and I didn't make very good use of the
> OGRErr/CPLError mechanism.  I only implemented enough error handling to get
> it to work.
>
> Here is the code (Just add it to ogrpgdatasource.cpp and delcare the method
> in ogr_pg.h):

Craig,

I have submitted this as a bug report for now.  I would like
to do some testing before I commit it, but I dont' want to
lose it completely in the meantime.

  http://bugzilla.remotesensing.org/show_bug.cgi?id=1020

Best regards,

---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From dr.sampson at sympatico.ca  Sun Dec 18 13:58:27 2005
From: dr.sampson at sympatico.ca (Dave Sampson)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] GDAL / PYTHON / Plone / Prima GIS
Message-ID: <43A5B153.7070409@sympatico.ca>

Hey folks.

Just incase I posted this message before I was approved on the list, I 
am resending as I didn't see it archived. Sorry if it repeats.

I seem to be having some troubles with GDAL and Python and can't 
pinpoint it. Its for use in the PrimaGIS application for the Plone CMS 
based on Zope infrastructure.

Particulars:
Python 2.3.5
gdal 1.3.1
zco 0.6
PCL-0.9

Errors.

I found similar errors in two places. I first found the trouble when
runnning a ./runzope session wihtin my plone instance. The trying to
narrow things down was able to repeat it through Python interp.

Python 2.3.5 (#1, Jul 22 2005, 18:50:51)
[GCC 3.3.5-20050130 (Gentoo 3.3.5.20050130-r1, ssp-3.3.5.20050130-1,
pie-8.7.7. on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "/usr/lib/python2.3/site-packages/gdal.py", line 191, in ?
    import _gdal
ImportError: /usr/lib/python2.3/site-packages/_gdalmodule.so: undefined
symbol: OGR_G_AddPoint_2D

It apears similar to a post is 2000
http://lists.maptools.org/pipermail/gdal-dev/2000-October/002986.html on
an earlier version of python.

Migrating to python 2.4 is not an option yet as PrimaGIS dependends on 2.3.x

Any sugestions would be great.


Cheers

From warmerdam at pobox.com  Sun Dec 18 14:54:43 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] GDAL / PYTHON / Plone / Prima GIS
In-Reply-To: <43A5B153.7070409@sympatico.ca>
References: <43A5B153.7070409@sympatico.ca>
Message-ID: <931f8ea90512181154m2abb62b1m96375f687015b9bb@mail.gmail.com>

On 12/18/05, Dave Sampson <dr.sampson@sympatico.ca> wrote:
> Hey folks.
>
> Just incase I posted this message before I was approved on the list, I
> am resending as I didn't see it archived. Sorry if it repeats.
>
> I seem to be having some troubles with GDAL and Python and can't
> pinpoint it. Its for use in the PrimaGIS application for the Plone CMS
> based on Zope infrastructure.
>
> Particulars:
> Python 2.3.5
> gdal 1.3.1
> zco 0.6
> PCL-0.9
>
> Errors.
>
> I found similar errors in two places. I first found the trouble when
> runnning a ./runzope session wihtin my plone instance. The trying to
> narrow things down was able to repeat it through Python interp.
>
> Python 2.3.5 (#1, Jul 22 2005, 18:50:51)
> [GCC 3.3.5-20050130 (Gentoo 3.3.5.20050130-r1, ssp-3.3.5.20050130-1,
> pie-8.7.7. on linux2
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import gdal
> Traceback (most recent call last):
>   File "<stdin>", line 1, in ?
>   File "/usr/lib/python2.3/site-packages/gdal.py", line 191, in ?
>     import _gdal
> ImportError: /usr/lib/python2.3/site-packages/_gdalmodule.so: undefined
> symbol: OGR_G_AddPoint_2D
>
> It apears similar to a post is 2000
> http://lists.maptools.org/pipermail/gdal-dev/2000-October/002986.html on
> an earlier version of python.
>
> Migrating to python 2.4 is not an option yet as PrimaGIS dependends on 2.3.x
>
> Any sugestions would be great.

Dave,

OGR_G_AddPoint_2D() is a pretty recent.  I suspect you are using
a GDAL 1.3.1 set of python scripts with a GDAL 1.3.0 or earlier
GDAL DLL.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From tpl at hgl.com  Sun Dec 18 17:22:42 2005
From: tpl at hgl.com (Lillys, Theodore, P.E.)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] VS.NET C++ & GDAL
Message-ID: <CA202492F79A2543917161E3D2E23D2201479A0F@mercury.hgl.com>


Anyone have an example project, brief or otherwise, of implementing GDAL
in a C++ app using .NET 2003?
Thanks in advance

Ted Lillys, PE
tpl@hgl.com



From iotc at 3i.co.za  Mon Dec 19 07:36:31 2005
From: iotc at 3i.co.za (Rob Cairns)
Date: Wed Nov 21 11:49:55 2007
Subject: [gdal-dev] shaded relief utility
Message-ID: <01C60498.D7814070.iotc@3i.co.za>

Hi Matt

This is a very nice utility - you may be interested to know that we have 
swiped your code - with credits to you - for the open source MapWindow 
project see: 
http://mapwindow.org/wiki/index.php/MapWinGIS:Utils_GenerateHillShade

Regards Rob

From werchowyna at epf.pl  Mon Dec 19 06:37:05 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal cvs 2005.12.19 fails to build
In-Reply-To: <1134684460.22451.7.camel@localhost.localdomain>
References: <1134585748.11397.0.camel@localhost.localdomain>
	<931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
	<1134684460.22451.7.camel@localhost.localdomain>
Message-ID: <1134992225.17855.6.camel@localhost.localdomain>

Building latest GDAL cvs to try fixes for Erdas *.gis driver I get
following errors:

ogrpgdatasource.cpp:706:18: missing terminating " character
ogrpgdatasource.cpp: In member function `virtual OGRLayer*
   OGRPGDataSource::CreateLayer(const char*, OGRSpatialReference*,
   OGRwkbGeometryType, char**)':
ogrpgdatasource.cpp:707: error: parse error before `KEY'
ogrpgdatasource.cpp:707:24: missing terminating " character
make[3]: *** [../o/ogrpgdatasource.o] Error 1
make[3]: Leaving directory
`/home/maciek/src/straight/gdal/ogr/ogrsf_frmts/pg'
make[2]: *** [pg-target] Error 2
make[2]: Leaving directory
`/home/maciek/src/straight/gdal/ogr/ogrsf_frmts'
make[1]: *** [sublibs] Error 2
make[1]: Leaving directory `/home/maciek/src/straight/gdal/ogr'
make: *** [ogr-target] Error 2

Full make.log attached.

GDAL was configured as follows:

./configure --with-hdf4=/usr/local/lib --with-libz=internal
--with-png=internal --with-libtiff=internal --with-geotiff=internal
--with-jpeg=internal --with-gif=internal --with-geos=yes
--with-pg=/usr/bin/pg_config --with-sqlite=/usr/local/lib
--with-xerces=yes

<snip>

GDAL is now configured for i686-pc-linux-gnu

  Installation directory:    /usr/local
  C compiler:                gcc -O2
  C++ compiler:              g++ -O2

  LIBTOOL support:           yes

  LIBZ support:              internal
  GRASS support:             no
  CFITSIO support:           no
  PCRaster support:          internal
  NETCDF support:            no
  LIBPNG support:            internal
  LIBTIFF support:           internal
  LIBGEOTIFF support:        internal
  LIBJPEG support:           internal
  LIBGIF support:            internal
  OGDI support:              no
  HDF4 support:              yes
  HDF5 support:              no
  KAKADU support:            no
  JASPER support:            no
  ECW support:               no
  MrSID support:             no
  POSTGRESQL support:        yes
  MySQL support:             no
  XERCES support:            yes
  ODBC support:              no
  OCI support:               no
  SDE support:               no
  DODS support:              no
  SQLite support:            yes
  DWGdirect support          no
  PANORAMA GIS support:      no
  GEOS support:              yes

  Statically link PROJ.4:    no

  Traditional Python:        yes
  NG SWIG Bindings:

  enable OGR building:       yes

Cheers,
Maciek


--------------------
Masz kopot ze znalezieniem czego na mapie? My te!
Dlatego stawiamy na nawigacj! To nowoczesny, najszybszy i najskuteczniejszy sposb!
Zajrzyj i przekonaj si sam ...  http://www.gps.paragraf.pl/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: make.log.bz2
Type: application/x-bzip
Size: 13586 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051219/017c4556/make.log.bin
From bt at ccgis.de  Mon Dec 19 07:42:04 2005
From: bt at ccgis.de (Benjamin Thelen)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
Message-ID: <43A6AA9C.9090101@ccgis.de>

(cc to FreeBSD gdal port maintainer)


Hello list,

building gdal 1.3.1 on FreeBSD 4.11 (and higher) fails with the 
following error:

--------------------------------------------------------------------
.
.
.
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr 
-I../../ogr/ogrsf_frmts -I../../port -c geotiff.cpp  -fPIC -DPIC -o 
../o/.libs/geotiff.o
geotiff.cpp:161: tiffio.h: No such file or directory
geotiff.cpp:162: xtiffio.h: No such file or directory
geotiff.cpp:163: geotiff.h: No such file or directory
geotiff.cpp:164: geo_normalize.h: No such file or directory
geotiff.cpp:165: geovalues.h: No such file or directory
In file included from geotiff.cpp:166:
tif_ovrcache.h:38: tiffio.h: No such file or directory
gmake[2]: *** [../o/geotiff.o] Fehler 1
gmake[2]: Leaving directory `/data/src/gdal-1.3.1/frmts/gtiff'
gmake[1]: *** [gtiff-install-obj] Fehler 2
gmake[1]: Leaving directory `/data/src/gdal-1.3.1/frmts'
gmake: *** [frmts-target] Fehler 2
--------------------------------------------------------------------




This could be solved by using "./configure --with-local=/usr/local" - a 
hint I got from Tom Russo and Frank Warmerdam in August. On FreeBSD 5.4 
and higher, gdal-1.3.1 builds successfully this way, but on FreeBSD 4.11 
building fails repeatable on two 4.11 boxes with the following error:

--------------------------------------------------------------------
  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr
-I../../ogr/ogrsf_frmts -I/usr/local/include -I../../port -DUSE_IN_GDAL
-Ilibcsf -c pcrasterutil.cpp  -fPIC -DPIC -o ../o/.libs/pcrasterutil.o
pcrasterutil.cpp:17: limits: No such file or directory
gmake[2]: *** [../o/pcrasterutil.o] Error 1
gmake[2]: Leaving directory `/data/src/gdal-1.3.1/frmts/pcraster'
gmake[1]: *** [pcraster-install-obj] Error 2
gmake[1]: Leaving directory `/data/src/gdal-1.3.1/frmts'
gmake: *** [frmts-target] Error 2
--------------------------------------------------------------------



The FreeBSD port is officially marked as broken: "Mark broken on 4.x due 
to C++-related build failure." I also saw that geos is marked broken, 
thus I still have geos-1.0 - a possible source of errors for gdal building?



I'd appreciate any sugestions!

Thanks,
Ben





From dr.sampson at sympatico.ca  Sun Dec 18 03:10:22 2005
From: dr.sampson at sympatico.ca (Dave Sampson)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] GDAL / PYTHON / Plone / Prima GIS
Message-ID: <43A5196E.5040301@sympatico.ca>

Hey folks.

I seem to be having some troubles and can't pinpoint it.

Particulars:
Python 2.3.5
gdal 1.3.1
zco 0.6
PCL-0.9

Errors. I similar errors in two places. I first found the trouble when 
runnning a ./runzope session wihtin my plone instance. The trying to 
narrow things down was able to repeat it through Python interp.

Python 2.3.5 (#1, Jul 22 2005, 18:50:51)
[GCC 3.3.5-20050130 (Gentoo 3.3.5.20050130-r1, ssp-3.3.5.20050130-1, 
pie-8.7.7. on linux2
Type "help", "copyright", "credits" or "license" for more information.
 >>> import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "/usr/lib/python2.3/site-packages/gdal.py", line 191, in ?
    import _gdal
ImportError: /usr/lib/python2.3/site-packages/_gdalmodule.so: undefined 
symbol: OGR_G_AddPoint_2D

It apears similar to a post is 2000 
http://lists.maptools.org/pipermail/gdal-dev/2000-October/002986.html on 
an earlier version of python.

Migrating to python 2.4 is not an option yet as PrimaGIS dependends on 2.3.x

Any sugestions would be great.



From lawrance at FreeBSD.org  Mon Dec 19 08:32:53 2005
From: lawrance at FreeBSD.org (Sam Lawrance)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Re: gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <43A6AA9C.9090101@ccgis.de>
References: <43A6AA9C.9090101@ccgis.de>
Message-ID: <C4C71C9E-B333-40DB-8AC6-F7E2A3B9F461@FreeBSD.org>


On 19/12/2005, at 11:42 PM, Benjamin Thelen wrote:

> (cc to FreeBSD gdal port maintainer)
>
>
> Hello list,
>
> building gdal 1.3.1 on FreeBSD 4.11 (and higher) fails with the  
> following error:
>
> --------------------------------------------------------------------
> .
> .
> .
>  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr - 
> I../../ogr/ogrsf_frmts -I../../port -c geotiff.cpp  -fPIC -DPIC - 
> o ../o/.libs/geotiff.o
> geotiff.cpp:161: tiffio.h: No such file or directory
> geotiff.cpp:162: xtiffio.h: No such file or directory
> geotiff.cpp:163: geotiff.h: No such file or directory
> geotiff.cpp:164: geo_normalize.h: No such file or directory
> geotiff.cpp:165: geovalues.h: No such file or directory
> In file included from geotiff.cpp:166:
> tif_ovrcache.h:38: tiffio.h: No such file or directory
> gmake[2]: *** [../o/geotiff.o] Fehler 1
> gmake[2]: Leaving directory `/data/src/gdal-1.3.1/frmts/gtiff'
> gmake[1]: *** [gtiff-install-obj] Fehler 2
> gmake[1]: Leaving directory `/data/src/gdal-1.3.1/frmts'
> gmake: *** [frmts-target] Fehler 2
> --------------------------------------------------------------------
>
> This could be solved by using "./configure --with-local=/usr/local"  
> - a hint I got from Tom Russo and Frank Warmerdam in August. On  
> FreeBSD 5.4 and higher, gdal-1.3.1 builds successfully this way,  
> but on FreeBSD 4.11 building fails repeatable on two 4.11 boxes  
> with the following error:

There was a REINPLACE_CMD to handle the tiffio error in the last  
version of the port; you can see the change here: http:// 
www.freebsd.org/cgi/cvsweb.cgi/ports/graphics/gdal/Makefile.diff? 
r1=1.14&r2=1.15&f=h

> --------------------------------------------------------------------
>  g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr
> -I../../ogr/ogrsf_frmts -I/usr/local/include -I../../port - 
> DUSE_IN_GDAL
> -Ilibcsf -c pcrasterutil.cpp  -fPIC -DPIC -o ../o/.libs/pcrasterutil.o
> pcrasterutil.cpp:17: limits: No such file or directory
> gmake[2]: *** [../o/pcrasterutil.o] Error 1
> gmake[2]: Leaving directory `/data/src/gdal-1.3.1/frmts/pcraster'
> gmake[1]: *** [pcraster-install-obj] Error 2
> gmake[1]: Leaving directory `/data/src/gdal-1.3.1/frmts'
> gmake: *** [frmts-target] Error 2
> --------------------------------------------------------------------
>
> The FreeBSD port is officially marked as broken: "Mark broken on  
> 4.x due to C++-related build failure." I also saw that geos is  
> marked broken, thus I still have geos-1.0 - a possible source of  
> errors for gdal building?
>

Shouldn't be a problem, gdal does not depend on geos.

>
> I'd appreciate any sugestions!

I came across the same errors.  "limits" is a c++ header that doesn't  
exist on stock FreeBSD 4.11 because the system compiler is gcc 2.95  
and the C++ library is old and crusty.  You can get a little further  
by adding USE_GCC=3.4+ to the port makefile, but then there are link  
problems further on.

You can see a test run I did with USE_GCC=3.4+ here: http:// 
people.freebsd.org/~lawrance/gdal-1.3.1.log

I haven't got time to work on fixing the port for 4.x at the moment,  
but I'll gladly accept help :-)  If you need gdal 1.3.1 it might be  
worth giving FreeBSD 6 a try.

Cheers
Sam



From anil.dhiman at nucleusgis.com  Mon Dec 19 08:46:18 2005
From: anil.dhiman at nucleusgis.com (Anil Kumar Dhiman)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Installing Issues
Message-ID: <000801c604a2$9806bfb0$561114ac@ngis9>

Skipped content of type multipart/alternative
From warmerdam at pobox.com  Mon Dec 19 09:37:35 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <43A6AA9C.9090101@ccgis.de>
References: <43A6AA9C.9090101@ccgis.de>
Message-ID: <931f8ea90512190637t3447dfbemba21cf0c0eac9e7@mail.gmail.com>

On 12/19/05, Benjamin Thelen <bt@ccgis.de> wrote:
>
> This could be solved by using "./configure --with-local=/usr/local" - a
> hint I got from Tom Russo and Frank Warmerdam in August. On FreeBSD 5.4
> and higher, gdal-1.3.1 builds successfully this way, but on FreeBSD 4.11
> building fails repeatable on two 4.11 boxes with the following error:
>
> --------------------------------------------------------------------
>   g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr
> -I../../ogr/ogrsf_frmts -I/usr/local/include -I../../port -DUSE_IN_GDAL
> -Ilibcsf -c pcrasterutil.cpp  -fPIC -DPIC -o ../o/.libs/pcrasterutil.o
> pcrasterutil.cpp:17: limits: No such file or directory
> gmake[2]: *** [../o/pcrasterutil.o] Error 1
> gmake[2]: Leaving directory `/data/src/gdal-1.3.1/frmts/pcraster'
> gmake[1]: *** [pcraster-install-obj] Error 2
> gmake[1]: Leaving directory `/data/src/gdal-1.3.1/frmts'
> gmake: *** [frmts-target] Error 2
> --------------------------------------------------------------------
>
>
>
> The FreeBSD port is officially marked as broken: "Mark broken on 4.x due
> to C++-related build failure." I also saw that geos is marked broken,
> thus I still have geos-1.0 - a possible source of errors for gdal building?

Ben,

My understanding is that FreeBSD 4.x is still using gcc 2.95, is
that right?  If so, I would encourage you to add --without-pcraster
to the configure and things will hopefully work.

In general I think you will find it difficult to build newer versions
with gcc 2.95 as time passes.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From warmerdam at pobox.com  Mon Dec 19 10:20:15 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Re: gdal cvs 2005.12.19 fails to build
In-Reply-To: <1134992225.17855.6.camel@localhost.localdomain>
References: <1134585748.11397.0.camel@localhost.localdomain>
	<931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
	<1134684460.22451.7.camel@localhost.localdomain>
	<1134992225.17855.6.camel@localhost.localdomain>
Message-ID: <931f8ea90512190720j30143b9dv5aeea00e8dc2a3dd@mail.gmail.com>

On 12/19/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> Building latest GDAL cvs to try fixes for Erdas *.gis driver I get
> following errors:
>
> ogrpgdatasource.cpp:706:18: missing terminating " character
>
Maciek,

Andrey has corrected this in CVS.  Shame on me for committing
code I wasn't in a position to at least build-test.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From nhv at cape.com  Mon Dec 19 10:42:34 2005
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] RE: [osg-users] Next gen blue marble imagery
In-Reply-To: <5560D96B18F2264A9ADE7EECC39BB43D1BFFF5@XCH-NE-1V1.ne.nos.boeing.com>
Message-ID: <EKEJIKAILPONGGENMBGAOEABOGAA.nhv@cape.com>

Burns, Christopher K writes:
> 
> I have downloaded the full image: world.200410.3x86400x43200.bin, and
> although it is simply a raw image gdal_translate does not seem to be
> accepting it.  Could someone suggest the proper command line to enter to
> convert this to a GeoTIFF?

attached find a python script that will build geotiffs from your file

note this is hardwired to "world.200410.3x86400x43200.bin" 
but this is easily modified 

see doc string in script for details

Norman

-------------- next part --------------
#!/usr/bin/env python

"""
Create tiled geotiff with overviews from the Next Gen Blue Marble datasets
we work with the full image and break it up into 8 tiles using the original
NASA Tiling and Naming scheme

requires the GDAL utilities gdaltranslate and gdaladdo
GDAL available from http://www.gdal.org
for .vrt format info see http://www.gdal.org/gdal_vrttut.html

data files available from  http://bmng.telascience.org/world_big/
note the files on above site are gzipped
this script expects the file to be decompressed

author  Norman Vine nhv@cape.com
19-Dec-2005 10:03:09 am
"""

import os

def do_cmd(cmd):    
    print cmd
    os.system(cmd)
    
def make_vrt(name):
    vrtStr =  '<VRTDataset rasterXSize=\"86400\" rasterYSize=\"43200\">\n'
    vrtStr += ' <SRS>WGS84</SRS>\n'
    vrtStr += ' <GeoTransform>-180.0,0.004166666666666,0,90.0,0,-0.004166666666666</GeoTransform>\n'

    for i in range(3):
        vrtStr += ' <VRTRasterBand dataType=\"Byte\" band=\"%d\" subClass="VRTRawRasterBand">\n'%(i+1)
        vrtStr += '  <SourceFilename relativetoVRT=\"1\">%s</SourceFilename>\n'%(name)
        vrtStr += '  <ImageOffset>%d</ImageOffset>\n'%(i)
        vrtStr += '  <PixelOffset>3</PixelOffset>\n'
        vrtStr += '  <LineOffset>259200</LineOffset>\n'
        vrtStr += ' </VRTRasterBand>\n'
    vrtStr += '</VRTDataset>\n'
    #print vrtStr
    #return

    base = name[:-4]
    vrtName = base+".vrt"

    vrtFile = open(vrtName,"w")
    vrtFile.write(vrtStr)
    vrtFile.close()

def make_tiffs(name):
    trans_extent = [ "-180.0 90.0 -90.0 0.0",
                     " -90.0 90.0   0.0 0.0",
                     "   0.0 90.0  90.0 0.0",
                     "  90.0 90.0 180.0 0.0",
                     "-180.0  0.0 -90.0 -90.0",
                     " -90.0  0.0   0.0 -90.0",
                     "   0.0  0.0  90.0 -90.0",
                     "  90.0  0.0 180.0 -90.0" ]
                    
    section = ["A1","B1","C1","D1","A2","B2","C2","D2"]

    base = name[:-4]
    vrtName = base+".vrt"
    
    trans_cmd = 'gdal_translate -of GTiff -co \"TILED=YES\" -co \"BLOCKXSIZE=128\" -co \"BLOCKYSIZE=128\" -projwin'
    oview_cmd = 'gdaladdo'
    for i in range(8):
        outfile = "%s.%s.tif"%(base,section[i]);
        do_cmd( '%s %s %s %s'%(trans_cmd,trans_extent[i],vrtName,outfile) )
        do_cmd( '%s %s 2 4 8 16 32 64 128 256'%(oview_cmd,outfile) )


def process(name):
    make_vrt(name)
    make_tiffs(name)

# hardwired test    
if __name__ == "__main__":
    process("world.200410.3x86400x43200.bin")
From halset at pvv.ntnu.no  Mon Dec 19 15:12:12 2005
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
Message-ID: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>

Hello.

I want to extract the large lakes from vmap0 as shape files. This was  
ok for v0eur, v0sas and v0soa, but not for v0noa. No error message,  
but the feature count is 0. Is that correct or should I "fix" the  
dataset in any way?

Regards,
  - Tore.

$ ogrinfo 'gltp:/vrf/tmp/vmap0/v0noa/vmaplv0/noamer' 'inwatera@hydro 
(*)_area'
ERROR 4: OGDI Driver doesn't support update.
Had to open data source read-only.
INFO: Open of `gltp:/vrf/tmp/vmap0/v0noa/vmaplv0/noamer'
using driver `OGDI' successful.

Layer name: inwatera@hydro(*)_area
Geometry: Polygon
Feature Count: 0
Layer SRS WKT:
GEOGCS["NAD83",
     DATUM["North_American_Datum_1983",
         SPHEROID["GRS 1980",6378137,298.257222101,
             AUTHORITY["EPSG","7019"]],
         TOWGS84[0,0,0,0,0,0,0],
         AUTHORITY["EPSG","6269"]],
     PRIMEM["Greenwich",0,
         AUTHORITY["EPSG","8901"]],
     UNIT["degree",0.0174532925199433,
         AUTHORITY["EPSG","9108"]],
     AXIS["Lat",NORTH],
     AXIS["Long",EAST],
     AUTHORITY["EPSG","4269"]]
id: Integer (10.0)
f_code: String (5.0)
hyc: Integer (5.0)
nam: String (64.0)
tile_id: Integer (5.0)
fac_id: Integer (10.0)


From warmerdam at pobox.com  Mon Dec 19 15:56:58 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
In-Reply-To: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
Message-ID: <931f8ea90512191256x3027a49cr9a48e7c91228e5aa@mail.gmail.com>

On 12/19/05, Tore Halset <halset@pvv.ntnu.no> wrote:
> Hello.
>
> I want to extract the large lakes from vmap0 as shape files. This was
> ok for v0eur, v0sas and v0soa, but not for v0noa. No error message,
> but the feature count is 0. Is that correct or should I "fix" the
> dataset in any way?

Tore,

I am seeing 152686 polyons in the north american
VMAP0 dataset.   There was a problem at one time
with one of the VMAP0 collections that the north american
VMAP0 CD dump was done with the wrong naming
conventions.  Perhaps you have this too?

My copy looks something like:

warmerda@gdal2200[161]% ls -l
total 80
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 bnd
lrwxrwxrwx   1 warmerda users    4 Feb  4  2003 cat -> cat.
-r-xr-xr-x   1 warmerda users  643 Aug  8  2000 cat.
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 dq
lrwxrwxrwx   1 warmerda users    4 Feb  4  2003 dqt -> dqt.
-r-xr-xr-x   1 warmerda users 2840 Aug  8  2000 dqt.
lrwxrwxrwx   1 warmerda users    4 Feb  4  2003 dqx -> dqx.
-r-xr-xr-x   1 warmerda users   16 Aug  8  2000 dqx.
drwxr-xr-x  11 warmerda users 4096 Jan  9  2003 elev
lrwxrwxrwx   1 warmerda users    4 Feb  4  2003 grt -> grt.
-r-xr-xr-x   1 warmerda users  736 Sep 13  2000 grt.
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 hydro
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 ind
lrwxrwxrwx   1 warmerda users    4 Feb  4  2003 lht -> lht.
-r-xr-xr-x   1 warmerda users 1044 Sep 13  2000 lht.
drwxr-xr-x   2 warmerda users 4096 Jan  9  2003 libref
-r-xr-xr-x   1 warmerda users 9859 Sep 25  2000 lineage.doc
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 phys
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 pop
drwxr-xr-x   2 warmerda users 4096 Jan  9  2003 tileref
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 trans
drwxr-xr-x  11 warmerda users 4096 Jan  9  2003 util
drwxr-xr-x  12 warmerda users 4096 Jan  9  2003 veg

As you can see, I had to create soft links so that stuff
like "lht." would appear as "lht".

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From paul at warriner.us  Mon Dec 19 18:35:44 2005
From: paul at warriner.us (paul@warriner.us)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <931f8ea90512190637t3447dfbemba21cf0c0eac9e7@mail.gmail.com>
Message-ID: <006e01c604f4$eea8a980$0100a8c0@WARRINER>

All,

The following compiles 1.3.1 on FreeBSD 4.11:
./configure --without-pcraster --with-local=/usr/local

I haven't tried GEOS, yet.

Yes, Frank, it's my fault for all this, but I sure you guessed that. :)

Paul

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank Warmerdam
Sent: Monday, December 19, 2005 9:38 AM
To: Benjamin Thelen
Cc: gdal-dev@lists.maptools.org; lawrance@freebsd.org
Subject: Re: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build

On 12/19/05, Benjamin Thelen <bt@ccgis.de> wrote:
>
> This could be solved by using "./configure --with-local=/usr/local" - a
> hint I got from Tom Russo and Frank Warmerdam in August. On FreeBSD 5.4
> and higher, gdal-1.3.1 builds successfully this way, but on FreeBSD 4.11
> building fails repeatable on two 4.11 boxes with the following error:
>
> --------------------------------------------------------------------
>   g++ -Wall -O2 -I../../port -I../../gcore -I../../alg -I../../ogr
> -I../../ogr/ogrsf_frmts -I/usr/local/include -I../../port -DUSE_IN_GDAL
> -Ilibcsf -c pcrasterutil.cpp  -fPIC -DPIC -o ../o/.libs/pcrasterutil.o
> pcrasterutil.cpp:17: limits: No such file or directory
> gmake[2]: *** [../o/pcrasterutil.o] Error 1
> gmake[2]: Leaving directory `/data/src/gdal-1.3.1/frmts/pcraster'
> gmake[1]: *** [pcraster-install-obj] Error 2
> gmake[1]: Leaving directory `/data/src/gdal-1.3.1/frmts'
> gmake: *** [frmts-target] Error 2
> --------------------------------------------------------------------
>
>
>
> The FreeBSD port is officially marked as broken: "Mark broken on 4.x due
> to C++-related build failure." I also saw that geos is marked broken,
> thus I still have geos-1.0 - a possible source of errors for gdal
building?

Ben,

My understanding is that FreeBSD 4.x is still using gcc 2.95, is
that right?  If so, I would encourage you to add --without-pcraster
to the configure and things will hopefully work.

In general I think you will find it difficult to build newer versions
with gcc 2.95 as time passes.

Best regards,
--
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From lawrance at freebsd.org  Mon Dec 19 20:37:46 2005
From: lawrance at freebsd.org (Sam Lawrance)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <006e01c604f4$eea8a980$0100a8c0@WARRINER>
References: <006e01c604f4$eea8a980$0100a8c0@WARRINER>
Message-ID: <D5A5C252-5843-4249-A646-F6A39092B283@freebsd.org>


On 20/12/2005, at 10:35 AM, paul@warriner.us wrote:

> All,
>
> The following compiles 1.3.1 on FreeBSD 4.11:
> ./configure --without-pcraster --with-local=/usr/local
>
> I haven't tried GEOS, yet.
>
> Yes, Frank, it's my fault for all this, but I sure you guessed  
> that. :)

Unfortunately the same errors occur:
http://people.freebsd.org/~lawrance/gdal-1.3.1-without-raster.log


From halset at pvv.ntnu.no  Tue Dec 20 03:27:08 2005
From: halset at pvv.ntnu.no (Tore Halset)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
In-Reply-To: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
Message-ID: <F05D0465-48A3-498B-9DDE-BD27EDB66AC6@pvv.ntnu.no>

On Dec 19, 2005, at 21:12, Tore Halset wrote:

> I want to extract the large lakes from vmap0 as shape files. This  
> was ok for v0eur, v0sas and v0soa, but not for v0noa. No error  
> message, but the feature count is 0. Is that correct or should I  
> "fix" the dataset in any way?

Analyzed the execution with strace and found that the problem was  
that my directory has a mix of upper and lower letters in the path:

./v0noa/vmaplv0/noamer/dq/a/E/

I solved this problem by creating lots of symlinks:

find . -type d > list
grep [A-Z] list > list.upper
for i in `cat list.upper ` ; do l=`echo $i|sed 's/^.*\///g'` ; (cd  
$i/../  ; ln -s $l `echo $l | tr '[A-Z]' '[a-z]'` ) ; done

After this fix ogrinfo found 152686 inwatera@hydro(*)_area polygons :)

Regards,
  - Tore.

From luca.casagrande at gmail.com  Tue Dec 20 05:50:42 2005
From: luca.casagrande at gmail.com (Luca Casagrande)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Re: gdal-grass-1.3.1
In-Reply-To: <43A7D084.2010808@maitro.net>
References: <439EDF92.6040209@maitro.net>
	<200512131940.57332.luca.casagrande@gmail.com>
	<43A7D084.2010808@maitro.net>
Message-ID: <200512201050.42714.luca.casagrande@gmail.com>

Alle 09:36, marted? 20 dicembre 2005, Maik Tr?mel ha scritto:
> Hi Luca,
>
> have you fixed to problem installing gdal-grass?
>
> Greetings Maik
>
> Luca Casagrande wrote:
> >Alle 17:34, marted? 13 dicembre 2005, Hern?n De Angelis ha scritto:
> >>Maik,
> >>
> >>I did my installation last weekend. I did the following configure:
> >>
> >>./configure --prefix=/usr/local/gdal-grass-1.3.1
> >>--with-gdal=/usr/local/gdal/bin/gdal-config
> >>--with-grass=/usr/local/grass-6.1.0/grass-6.1.cvs
> >>
> >>and everything went smoothly. In my box, these two files were installed
> >> in:
> >>
> >>/usr/local/gdal-1.3.1/lib/gdalplugins
> >>
> >>I am not an expert but I guess that in your case something was left from
> >> a previous failed attempt to install. I think it would be a good idea to
> >> do a "make distclean" on the source directory of gdal-grass and start a
> >> new build.
> >>
> >>Good luck!
> >>
> >>Hern?n
> >>
> >>El Martes 13 Diciembre 2005 15.49, Maik Tr?mel escribi?:
> >>>I had a look on the "Makefile"
> >>>
> >>>Line 49:
> >>>GLIBNAME =      gdal_GRASS.so
> >>>OLIBNAME =      ogr_GRASS.so
> >>>
> >>>default:        $(GLIBNAME) $(OLIBNAME)
> >>>
> >>>install:        default
> >>>       install -d $(AUTOLOAD_DIR)
> >>>       cp $(GLIBNAME) $(AUTOLOAD_DIR)
> >>>       cp $(OLIBNAME) $(AUTOLOAD_DIR)
> >>>
> >>>The error occures when trying to copy gdal_GRASS.so to $(AUTOLOAD_DIR).
> >>>I can't find gdal_GRASS.so . But why isn't it where it should be. Where
> >>>should I find this file? Is it from gdal_grass-package or from another
> >>>package? Where is it initialised?
> >>>
> >>>Anybody an idea?
> >>>
> >>>Greetings
> >>>Maik
> >>>
> >>>Maik Tr?mel wrote:
> >>>>Thanks for your support,
> >>>>I had a look on the "Makefile"
> >>>>
> >>>>Line 49:
> >>>>GLIBNAME =      gdal_GRASS.so
> >>>>OLIBNAME =      ogr_GRASS.so
> >>>>
> >>>>default:        $(GLIBNAME) $(OLIBNAME)
> >>>>
> >>>>install:        default
> >>>>       install -d $(AUTOLOAD_DIR)
> >>>>       cp $(GLIBNAME) $(AUTOLOAD_DIR)
> >>>>       cp $(OLIBNAME) $(AUTOLOAD_DIR)
> >>>>
> >>>>The error occures when trying to copy gdal_GRASS.so to $(AUTOLOAD_DIR).
> >>>>I can't find gdal_GRASS.so . But why isn't it where it should be.
> >>>>Where should I find this file? Is it from gdal_grass-package or from
> >>>>another package? Where is it initialised?
> >>>>
> >>>>Anybody an idea?
> >>>>
> >>>>Greetings
> >>>>Maik
> >>>>
> >>>>Maik Tr?mel wrote:
> >>>>>Thanks for your support,
> >>>>>
> >>>>>Hamish wrote:
> >>>>>>>installing GRASS-6.0.1 from tar.gz I got a problem with
> >>>>>>>gdal-grass-1.3.1.
> >>>>>>
> >>>>>>To begin with, try the gdal-grass-1.3.1.1 version. (there was a bug
> >>>>>>in 1.3.1 release)
> >>>>>>
> >>>>>>http://www.gdal.org/dl/gdal-grass-1.3.1.1.tar.gz
> >>>>>
> >>>>>I tried it: Same problem.
> >>>>>
> >>>>>>Hamish
> >>>>>
> >>>>>Hern?n De Angelis wrote:
> >>>>>>Maik,
> >>>>>>
> >>>>>>Are your GRASS and GDAL in standard directories? If not, if you only
> >>>>>>did
> >>>>>>./configure
> >>>>>>without specifying
> >>>>>>--with-grass=/your/path/to/grass/
> >>>>>>
> >>>>>>and
> >>>>>>
> >>>>>>--with-gdal=/your/path/to/gdal/bin/gdal-config
> >>>>>
> >>>>>I ran it this way. I think thats not the problem.
> >>>>>
> >>>>>>it will never work. In that case you might also need to make the
> >>>>>>libraries accesible in /etc/ld.so.conf (and run "ldconfig" as root
> >>>>>>after that)
> >>>>>
> >>>>>I have updated /etc/ld.so.conf and run ldconfig. It has no influence
> >>>>>on the problem.
> >>>>>
> >>>>>>Hope this helps
> >>>>>>
> >>>>>>Hern?n
> >>>>>>
> >>>>>>El Lunes 12 Diciembre 2005 11.13, Maik Tr?mel escribi?:
> >>>>>>>Hello GRASS-Users,
> >>>>>>>
> >>>>>>>
> >>>>>>>installing GRASS-6.0.1 from tar.gz I got a problem with
> >>>>>>>gdal-grass-1.3.1.
> >>>>>>>I run:
> >>>>>>>./configure  -> no problem
> >>>>>>>make -> no problem
> >>>>>>>make install (as root):
> >>>>>>>
> >>>>>>>[...]
> >>>>>>>
> >>>>>>>>install -d /usr/lib/gdalplugins
> >>>>>>>>cp gdal_GRASS.so /usr/lib/gdalplugins
> >>>>>>>>cp: cannot stat `gdal_GRASS.so': No such file or directory
> >>>>>>>>make: *** [install] Error 1
> >>>>>>>
> >>>>>>>Anybody an idea what the problem could be?
> >>>>>>>
> >>>>>>>Thanks for help!
> >>>>>>>
> >>>>>>>Maik
> >>>>
> >>>>Hamish wrote:
> >>>>>>installing GRASS-6.0.1 from tar.gz I got a problem with
> >>>>>>gdal-grass-1.3.1.
> >>>>>
> >>>>>To begin with, try the gdal-grass-1.3.1.1 version. (there was a bug in
> >>>>>1.3.1 release)
> >>>>>
> >>>>>http://www.gdal.org/dl/gdal-grass-1.3.1.1.tar.gz
> >>>>
> >>>>I tried it: Same problem.
> >>>>
> >>>>>Hamish
> >>>>
> >>>>Hern?n De Angelis wrote:
> >>>>>Maik,
> >>>>>
> >>>>>Are your GRASS and GDAL in standard directories? If not, if you only
> >>>>>did ./configure
> >>>>>without specifying
> >>>>>--with-grass=/your/path/to/grass/
> >>>>>
> >>>>>and
> >>>>>
> >>>>>--with-gdal=/your/path/to/gdal/bin/gdal-config
> >>>>
> >>>>I ran it this way. I think thats not the problem.
> >>>>
> >>>>>it will never work. In that case you might also need to make the
> >>>>>libraries accesible in /etc/ld.so.conf (and run "ldconfig" as root
> >>>>>after that)
> >>>>
> >>>>I have updated /etc/ld.so.conf and run ldconfig. It has no influence
> >>>>on the problem.
> >>>>
> >>>>>Hope this helps
> >>>>>
> >>>>>Hern?n
> >>>>>
> >>>>>El Lunes 12 Diciembre 2005 11.13, Maik Tr?mel escribi?:
> >>>>>>Hello GRASS-Users,
> >>>>>>
> >>>>>>
> >>>>>>installing GRASS-6.0.1 from tar.gz I got a problem with
> >>>>>>gdal-grass-1.3.1.
> >>>>>>I run:
> >>>>>>./configure  -> no problem
> >>>>>>make -> no problem
> >>>>>>make install (as root):
> >>>>>>
> >>>>>>[...]
> >>>>>>
> >>>>>>>install -d /usr/lib/gdalplugins
> >>>>>>>cp gdal_GRASS.so /usr/lib/gdalplugins
> >>>>>>>cp: cannot stat `gdal_GRASS.so': No such file or directory
> >>>>>>>make: *** [install] Error 1
> >>>>>>
> >>>>>>Anybody an idea what the problem could be?
> >>>>>>
> >>>>>>Thanks for help!
> >>>>>>
> >>>>>>Maik
> >
> >I tryed with your same configure and after a DEEP clean, but the error
> > it's the same...
> >
> >Thx
> >Luca

Solved with manual operation...I think someone had to fix the install part of 
gdal-grass-1.3.1.1

Thx for the help
Luca
-- 
"Esperienza ? il nome che ciascuno da ai suoi errori. (O. Wilde) "

GENTOO-GIS Development Team
jabber: casagrande@jabber.linux.it

 


From paul at warriner.us  Tue Dec 20 05:03:47 2005
From: paul at warriner.us (paul@warriner.us)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <26BDF662-B0A8-4AAE-BD0E-7C6154B95D8E@brooknet.com.au>
Message-ID: <00f301c6054c$b0571bf0$0100a8c0@WARRINER>

Hope this helps someone, as I have little FreeBSD, C, or C++ background.

It was run on hub.org using FreeBSD 4.11.

I used:
./configure --without-pcraster --with-local=/usr/local
gmake

http://www.warriner.us/gdal-1.3.1-without-pcraster.log

1) gmake warnings
2) results of ./configure --without-pcraster --with-local=/usr/local
3) results of gmake

Results:
# ./gdalinfo --version
GDAL 1.3.1.0, released 2005/10/04

# ./gdalinfo --formats
Supported Formats:
  VRT (rw+): Virtual Raster
  GTiff (rw+): GeoTIFF
  NITF (rw+): National Imagery Transmission Format
  HFA (rw+): Erdas Imagine Images (.img)
  SAR_CEOS (ro): CEOS SAR Image
  CEOS (ro): CEOS Image
  ELAS (rw+): ELAS
  AIG (ro): Arc/Info Binary Grid
  AAIGrid (rw): Arc/Info ASCII Grid
  SDTS (ro): SDTS Raster
  DTED (rw): DTED Elevation Raster
  PNG (rw): Portable Network Graphics
  JPEG (rw): JPEG JFIF
  MEM (rw+): In Memory Raster
  JDEM (ro): Japanese DEM (.mem)
  GIF (rw): Graphics Interchange Format (.gif)
  ESAT (ro): Envisat Image Format
  BSB (ro): Maptech BSB Nautical Charts
  XPM (rw): X11 PixMap Format
  BMP (rw+): MS Windows Device Independent Bitmap
  AirSAR (ro): AirSAR Polarimetric Image
  RS2 (ro): RadarSat 2 XML Product
  PCIDSK (rw+): PCIDSK Database File
  ILWIS (rw+): ILWIS Raster Map
  RIK (ro): Swedish Grid RIK (.rik)
  PNM (rw+): Portable Pixmap Format (netpbm)
  DOQ1 (ro): USGS DOQ (Old Style)
  DOQ2 (ro): USGS DOQ (New Style)
  ENVI (rw+): ENVI .hdr Labelled
  EHdr (rw+): ESRI .hdr Labelled
  PAux (rw+): PCI .aux Labelled
  MFF (rw+): Atlantis MFF Raster
  MFF2 (rw+): Atlantis MFF2 (HKV) Raster
  FujiBAS (ro): Fuji BAS Scanner Image
  GSC (ro): GSC Geogrid
  FAST (ro): EOSAT FAST Format
  BT (rw+): VTP .bt (Binary Terrain) 1.3 Format
  LAN (ro): Erdas .LAN/.GIS
  CPG (ro): Convair PolGASP
  IDA (rw+): Image Data and Analysis
  NDF (ro): NLAPS Data Format
  JPEG2000 (rw): JPEG-2000 part 1 (ISO/IEC 15444-1)
  L1B (ro): NOAA Polar Orbiter Level 1b Data Set
  FIT (rw): FIT Image
  RMF (rw+): Raster Matrix Format
  USGSDEM (rw): USGS Optional ASCII DEM (and CDED)
  GXF (ro): GeoSoft Grid Exchange Format

Regards,
Paul

-----Original Message-----
From: Sam Lawrance [mailto:boris@brooknet.com.au] 
Sent: Monday, December 19, 2005 8:50 PM
To: Sam Lawrance
Cc: paul@warriner.us; 'Frank Warmerdam'; 'Benjamin Thelen';
gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build


On 20/12/2005, at 12:37 PM, Sam Lawrance wrote:

>
> On 20/12/2005, at 10:35 AM, paul@warriner.us wrote:
>
>> All,
>>
>> The following compiles 1.3.1 on FreeBSD 4.11:
>> ./configure --without-pcraster --with-local=/usr/local
>>
>> I haven't tried GEOS, yet.
>>
>> Yes, Frank, it's my fault for all this, but I sure you guessed  
>> that. :)
>
> Unfortunately the same errors occur:
> http://people.freebsd.org/~lawrance/gdal-1.3.1-without-raster.log
>

Ooops, correct URL
http://people.freebsd.org/~lawrance/gdal-1.3.1-without-pcraster.log


From lawrance at freebsd.org  Tue Dec 20 08:21:32 2005
From: lawrance at freebsd.org (Sam Lawrance)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <00f301c6054c$b0571bf0$0100a8c0@WARRINER>
References: <00f301c6054c$b0571bf0$0100a8c0@WARRINER>
Message-ID: <3E62243C-0DCB-4084-8C15-D0C61CA763C6@freebsd.org>


On 20/12/2005, at 9:03 PM, paul@warriner.us wrote:

> Hope this helps someone, as I have little FreeBSD, C, or C++  
> background.
>
> It was run on hub.org using FreeBSD 4.11.
>
> I used:
> ./configure --without-pcraster --with-local=/usr/local
> gmake
>
> http://www.warriner.us/gdal-1.3.1-without-pcraster.log
>

The build log was very useful!  When I set --without-pcraster, I  
accidentally left USE_GCC=3.4+.  I've since removed it and GDAL now  
compiles.

Thanks everyone!  I have just updated the port.



From bt at ccgis.de  Tue Dec 20 08:52:47 2005
From: bt at ccgis.de (Benjamin Thelen)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <D5A5C252-5843-4249-A646-F6A39092B283@freebsd.org>
References: <006e01c604f4$eea8a980$0100a8c0@WARRINER>
	<D5A5C252-5843-4249-A646-F6A39092B283@freebsd.org>
Message-ID: <43A80CAF.3050208@ccgis.de>

Sam Lawrance schrieb:
> 
> On 20/12/2005, at 10:35 AM, paul@warriner.us wrote:
> 
>> All,
>>
>> The following compiles 1.3.1 on FreeBSD 4.11:
>> ./configure --without-pcraster --with-local=/usr/local
>>
>> I haven't tried GEOS, yet.
>>
>> Yes, Frank, it's my fault for all this, but I sure you guessed  that. :)
> 
> 
> Unfortunately the same errors occur:
> http://people.freebsd.org/~lawrance/gdal-1.3.1-without-raster.log
> 

Sam, Frank and Paul,

Having added --without-geos --without-pcraster to the gdal ports 
Makefile (and of course commenting out the "BROKEN" paragraph), I 
acknowledge a successfully built and installed gdal-1.3.1 using FreeBSD 
4 standard gcc-2.95.


-----------------------------------------------------------------------
root@wms1# uname -a
FreeBSD wms1.ccgis.de 4.11-RELEASE-p13 FreeBSD 4.11-RELEASE-p13 #1: Thu 
Nov 24 16:17:09 CET 2005 
root@wms1.ccgis.de:/usr/obj/usr/src/sys/WMS1  i386
-----------------------------------------------------------------------

-----------------------------------------------------------------------
root@wms1# pkg_info |grep gdal
gdal-1.3.1          A translator library for raster geospatial data formats
-----------------------------------------------------------------------


and UMN-MapServer 4.8beta3. Very nice!

-----------------------------------------------------------------------
root@wms1# ./mapserv -v
MapServer version 4.8.0-beta3 OUTPUT=GIF OUTPUT=PNG OUTPUT=JPEG 
OUTPUT=WBMP OUTPUT=SVG SUPPORTS=PROJ SUPPORTS=FREETYPE 
SUPPORTS=WMS_SERVER SUPPORTS=WMS_CLIENT SUPPORTS=WFS_SERVER 
SUPPORTS=WFS_CLIENT SUPPORTS=WCS_SERVER INPUT=POSTGIS INPUT=OGR 
INPUT=GDAL INPUT=SHAPEFILE
-----------------------------------------------------------------------


But, and this is definitely a major disadvantage, building gdal-1.3.1 
not using "--without-geos" fails (./configure --without-pcraster 
--with-local=/usr/local) - I suppose geos-1.0 is simply too old, but as 
we know, newer (at least, the latest) geos-versions don't build on 
FreeBSD 4.




-----------------------------------------------------------------------
g++ -Wall -O2 -Iogrsf_frmts -I. -I../port -I../gcore -I../alg -I../ogr 
-I../ogr/ogrsf_frmts -DHAVE_GEOS=1 -I-O -pipe -march=pentiumpro 
-I/usr/local/include -I/usr/local/include -I../port -c ogrgeometry.cpp 
-fPIC -DPIC -o .libs/ogrgeometry.o
In file included from /usr/local/include/geos/graphindex.h:46,
                  from /usr/local/include/geos/graph.h:35,
                  from /usr/local/include/geos/operation.h:35,
                  from /usr/local/include/geos/opDistance.h:29,
                  from ogrgeometry.cpp:140:
/usr/local/include/geos/geosAlgorithm.h:214: warning: `class 
geos::RobustCGAlgorithms' has virtual functions but non-virtual destructor
/usr/local/include/geos/geosAlgorithm.h:226: warning: `class 
geos::NonRobustCGAlgorithms' has virtual functions but non-virtual 
destructor
In file included from /usr/local/include/geos/operation.h:35,
                  from /usr/local/include/geos/opDistance.h:29,
                  from ogrgeometry.cpp:140:
/usr/local/include/geos/graph.h:186: warning: `class 
geos::GraphComponent' has virtual functions but non-virtual destructor
ogrgeometry.cpp: In method `class OGRGeometry * 
OGRGeometry::ConvexHull() const':
ogrgeometry.cpp:1465: no matching function for call to 
`geos::ConvexHull::ConvexHull (geos::Geometry *&)'
/usr/local/include/geos/geosAlgorithm.h:458: candidates are: 
geos::ConvexHull::ConvexHull(geos::CGAlgorithms *)
/usr/local/include/geos/geosAlgorithm.h:461: 
geos::ConvexHull::ConvexHull(const geos::ConvexHull &)
ogrgeometry.cpp:1468: no matching function for call to 
`geos::ConvexHull::getConvexHull ()'
/usr/local/include/geos/geosAlgorithm.h:460: candidates are: class 
geos::Geometry * geos::ConvexHull::getConvexHull(const geos::Geometry *)
ogrgeometry.cpp:1466: warning: `class geos::Geometry * poHullGeosGeom' 
might be used uninitialized in this function
gmake[1]: *** [ogrgeometry.o] Fehler 1
gmake[1]: Leaving directory `/data/src/gdal-1.3.1/ogr'
gmake: *** [ogr-target] Fehler 2
-----------------------------------------------------------------------




I acknowledge the same error Sam has been faced with, building 
gdal-1.3.1 using gcc-3.4 (--without-geos!!)


-----------------------------------------------------------------------
.
.
.
collect2: ld returned 1 exit status
gmake[1]: *** [ogrinfo] Error 1
gmake[1]: Leaving directory 
`/work/a/ports/graphics/gdal/work/gdal-1.3.1/ogr'
gmake: *** [ogr-apps] Error 2
*** Error code 2
-----------------------------------------------------------------------


As geos-2 is also broken for FreeBSD 4 and for various other reasons, 
we've decided to move to FreeBSD 6.




Nevertheless I would like to offer my help for testing purposes or 
something like that - I don't have any knowledge regarding c++ coding, 
thus I can't support you as much as I'd like to, I'm afraid.

Thanks,
Ben


From warmerdam at pobox.com  Tue Dec 20 12:12:57 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] SGI Image File Format
Message-ID: <931f8ea90512200912k12dbf763x491b0c86dc5bf41a@mail.gmail.com>

Folks,

Mike Mazzella has implemented support in GDAL-CVS for
the SGI Image File Format.  Anyone interested in this format
might want to grab the nightly snapshot tomorrow (it isn't
in tonights).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From werchowyna at epf.pl  Tue Dec 20 12:16:39 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Re: gdal cvs 2005.12.19 fails to build
In-Reply-To: <931f8ea90512190720j30143b9dv5aeea00e8dc2a3dd@mail.gmail.com>
References: <1134585748.11397.0.camel@localhost.localdomain>
	<931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
	<1134684460.22451.7.camel@localhost.localdomain>
	<1134992225.17855.6.camel@localhost.localdomain>
	<931f8ea90512190720j30143b9dv5aeea00e8dc2a3dd@mail.gmail.com>
Message-ID: <1135098999.8307.9.camel@localhost.localdomain>

On pon, 2005-12-19 at 10:20 -0500, Frank Warmerdam wrote:
> On 12/19/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> > Building latest GDAL cvs to try fixes for Erdas *.gis driver I get
> > following errors:
> >
> > ogrpgdatasource.cpp:706:18: missing terminating " character
> >
> Maciek,
> 
> Andrey has corrected this in CVS.  Shame on me for committing
> code I wasn't in a position to at least build-test.

Thanks Frank and Andrey! Builds ok now. Also the ERDAS *.gis files are
read correctly now, great.

Maciek


--------------------
W polskim Internecie s setki milionw stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/


From werchowyna at epf.pl  Tue Dec 20 12:48:58 2005
From: werchowyna at epf.pl (Maciek Sieczka)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ERDAS LAN/GIS writing
In-Reply-To: <1134684460.22451.7.camel@localhost.localdomain>
References: <1134585748.11397.0.camel@localhost.localdomain>
	<931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
	<1134684460.22451.7.camel@localhost.localdomain>
Message-ID: <1135100938.8307.18.camel@localhost.localdomain>

Frank,

Are you planning to add write support for ERDAS LAN/GIS? Read works fine
now, but it is impossible to feed data from GRASS 6.1 into LANDIS II,
which accepts only ERDAS LAN/GIS as input. There is no i.out.erdas in
GRASS >= 5.7 anymore, and r.out.gdal doesn't provide LAN/GIS for
writing...

Best,
Maciek


--------------------
W polskim Internecie s setki milionw stron. My przekazujemy Tobie tylko najlepsze z nich!
http://katalog.epf.pl/


From warmerdam at pobox.com  Tue Dec 20 13:09:19 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ERDAS LAN/GIS writing
In-Reply-To: <1135100938.8307.18.camel@localhost.localdomain>
References: <1134585748.11397.0.camel@localhost.localdomain>
	<931f8ea90512141207q2a8747at26946be39e5f7d69@mail.gmail.com>
	<1134684460.22451.7.camel@localhost.localdomain>
	<1135100938.8307.18.camel@localhost.localdomain>
Message-ID: <931f8ea90512201009x38a1e3f2y2493978615d76e9f@mail.gmail.com>

On 12/20/05, Maciek Sieczka <werchowyna@epf.pl> wrote:
> Frank,
>
> Are you planning to add write support for ERDAS LAN/GIS? Read works fine
> now, but it is impossible to feed data from GRASS 6.1 into LANDIS II,
> which accepts only ERDAS LAN/GIS as input. There is no i.out.erdas in
> GRASS >= 5.7 anymore, and r.out.gdal doesn't provide LAN/GIS for
> writing...

Maciek,

I wasn't planning on this.  I don't think it would be too hard
to implement though, if you wanted to do so.  I would be
willing to answer questions as needed.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From cees at pcraster.nl  Tue Dec 20 14:54:46 2005
From: cees at pcraster.nl (Cees Wesseling)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] pcraster fix, was: gdal-1.3.1 on FreeBSD 4 fails to
	build
In-Reply-To: <3E62243C-0DCB-4084-8C15-D0C61CA763C6@freebsd.org>
References: <00f301c6054c$b0571bf0$0100a8c0@WARRINER>
	<3E62243C-0DCB-4084-8C15-D0C61CA763C6@freebsd.org>
Message-ID: <43A86186.8070102@pcraster.nl>

Hi all,

I have dumbed down pcrasterutil.cpp so it should compile now for gcc 
2.95. It is checked in gdal CVS.
If anyone is experiencing problems with our driver please tell and we 
will repair ASAP at our best.

Sam Lawrance wrote:
> 
> On 20/12/2005, at 9:03 PM, paul@warriner.us wrote:
> 
>> Hope this helps someone, as I have little FreeBSD, C, or C++  background.
>>
>> It was run on hub.org using FreeBSD 4.11.
>>
>> I used:
>> ./configure --without-pcraster --with-local=/usr/local
>> gmake
>>
>> http://www.warriner.us/gdal-1.3.1-without-pcraster.log
>>
> 
> The build log was very useful!  When I set --without-pcraster, I  
> accidentally left USE_GCC=3.4+.  I've since removed it and GDAL now  
> compiles.
> 


-- 
Cees Wesseling
PCRaster Environmental Software
van Swindenstraat 97
3514 XP Utrecht
The Netherlands
Tel. 0031-(0)30-238012-4 (-5 Fax)

From boris at brooknet.com.au  Mon Dec 19 20:50:18 2005
From: boris at brooknet.com.au (Sam Lawrance)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] gdal-1.3.1 on FreeBSD 4 fails to build
In-Reply-To: <D5A5C252-5843-4249-A646-F6A39092B283@freebsd.org>
References: <006e01c604f4$eea8a980$0100a8c0@WARRINER>
	<D5A5C252-5843-4249-A646-F6A39092B283@freebsd.org>
Message-ID: <26BDF662-B0A8-4AAE-BD0E-7C6154B95D8E@brooknet.com.au>


On 20/12/2005, at 12:37 PM, Sam Lawrance wrote:

>
> On 20/12/2005, at 10:35 AM, paul@warriner.us wrote:
>
>> All,
>>
>> The following compiles 1.3.1 on FreeBSD 4.11:
>> ./configure --without-pcraster --with-local=/usr/local
>>
>> I haven't tried GEOS, yet.
>>
>> Yes, Frank, it's my fault for all this, but I sure you guessed  
>> that. :)
>
> Unfortunately the same errors occur:
> http://people.freebsd.org/~lawrance/gdal-1.3.1-without-raster.log
>

Ooops, correct URL
http://people.freebsd.org/~lawrance/gdal-1.3.1-without-pcraster.log

From geowiz at shaw.ca  Tue Dec 20 17:04:06 2005
From: geowiz at shaw.ca (GeoWiz)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Re: LiDAR processing
References: <003601c601f1$2c074d60$6501a8c0@STEVE>
	<20051217185438.GC24719@thuille.itc.it>
Message-ID: <002a01c605b1$4cc83fa0$6501a8c0@STEVE>

Thanks, I'll have a look.

Steve
  ----- Original Message ----- 
  From: Markus Neteler 
  Newsgroups: gmane.comp.gis.gdal.devel
  Cc: Gdal-dev@lists.maptools.org 
  Sent: Saturday, December 17, 2005 11:54 AM
  Subject: Re: LiDAR processing


  On Thu, Dec 15, 2005 at 08:31:14PM -0700, GeoWiz wrote:
  > I was wondering if there are any good open source projects going on that 
  > involve processing lidar data.
  > 
  > Thanks,
  > Steve 

  Steve,

  you may check GRASS 5.4, it contains the software from Prof Maria Brovelli,
  Italy. See the src.contrib/POLIMICO/ directory.

  Here the README details:

  LIDAR data filtering
  --------------------

  Command execution order:

  1. s.bspline.reg
  2. s.edgedetection
  3. s.growing

  s.bspline.reg/  : bilinear or bicubic spline interpolation Least quares approach
  s.correction/   : DTM correction: error removal (building remainder, vegetation etc)
  s.edgedetection/: detection of building edges, vegetation edges, etc.
  s.growing/      : filling of previously computed edges

  Additional software
  s.to.qrast/     : fast sites to raster conversion (replaces s.to.rast)

  Related Publications:
  - GRASS Users conference 2002, Trento, Italy
    http://www.ing.unitn.it/~grass/proceedings/proceedings/pdfs/Brovelli_Maria_Antonia.pdf

  - Brovelli, Maria A, Cannata, Massimiliano & Longoni, Ulisse M (2004)
    LIDAR Data Filtering and DTM Interpolation Within GRASS.
    Transactions in GIS 8 (2), 155-174.
    Online: http://www.blackwell-synergy.com/servlet/useragent?func=synergy&synergyAction=
  showTOC&journalCode=tgis&volume=8&issue=2&year=2004&part=null

  Note that 5.4-CVS contains some updates which will appear in the
  next 5.4.x release of GRASS.

  Hope this helps

   Markus

  -- 
  Markus Neteler     <neteler itc it>       http://mpa.itc.it
  ITC-irst -  Centro per la Ricerca Scientifica e Tecnologica
  MPBA - Predictive Models for Biol. & Environ. Data Analysis
  Via Sommarive, 18        -       38050 Povo (Trento), Italy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051220/ef47f1e2/attachment.html
From ivan.mjartan at geovap.cz  Wed Dec 21 08:06:29 2005
From: ivan.mjartan at geovap.cz (Ivan Mjartan)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ECW and gdal-1.3.1 problem ?
Message-ID: <000a01c6062f$5bf9b980$1a01a8c0@PC24>

Hi list
I tried to build gdal-1.3.1 library with ECW support.
And I was not successful,
At first I tried build gdal-1.3.1 with ECW SDK 2.46 but I was also not success.  So I download last version of  ECW SDK (3.3). 

Then start my C++ horror. 

I am not able compile ECW SDK with Visual Studio .Net 2003, a don't know why, I followed Build.txt, I downloaded latest Microsoft Platform SDK. And when I try build this library a get error 

midl : command line error MIDL1004 : cannot execute C preprocessor cl.exe

in the build log is:

NCSEcw : warning PRJ0041 : Cannot find missing dependency 'NCSEcw.tlb' for file 'NCSEcw.rc'.  Your project may still build, but may continue to appear out of date until this file is found.
Creating temporary file "c:\Projects\Gdal\gdal130\ecw\libecwj2-3.3\Source\C\NCSEcw\NCSEcw\Release\RSP000001.rsp" with contents
[
/I "..\..\..\include" /I "c:\Program Files\Microsoft Visual Studio .NET 2003\Vc7\bin" /env win32 /Oicf  /tlb ".\NCSEcw.tlb" /h "NCSEcwCom.h" /iid "NCSEcw_i.c"
".\NCSEcw.idl"]Creating command line "midl.exe @"c:\Projects\Gdal\gdal130\ecw\libecwj2-3.3\Source\C\NCSEcw\NCSEcw\Release\RSP000001.rsp" /nologo"Creating Type Library...Processing .\NCSEcw.idlmidl : command line error MIDL1004 : cannot execute C preprocessor cl.exe
 
What I am doing wrong?
And another questions Is last ECW SDK and GDAL -1.3.1 compatible? 
Can I get somewhere ECW binary? (I tried new ones from emapper.com) but there was not some headers.
Or have I wrong Microsoft Platform SDK installed (I tried this PSD-x86.exe from http://www.microsoft.com/msdownload/platformsdk/sdkupdate) 

Or If someone is successful in building last GDAL and Last ECW Could you tell me pleas step by step instruction how it is possible ?
 

Thanks a lot 

 

Ivan mjartan 

 

 

 

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051221/a4e1e6b2/attachment.html
From warmerdam at pobox.com  Wed Dec 21 10:15:15 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] ECW and gdal-1.3.1 problem ?
In-Reply-To: <000a01c6062f$5bf9b980$1a01a8c0@PC24>
References: <000a01c6062f$5bf9b980$1a01a8c0@PC24>
Message-ID: <931f8ea90512210715p56063dd3t692fbbb4b52e58e2@mail.gmail.com>

On 12/21/05, Ivan Mjartan <ivan.mjartan@geovap.cz> wrote:
>
> Hi list
> I tried to build gdal-1.3.1 library with ECW support.
> And I was not successful,
> At first I tried build gdal-1.3.1 with ECW SDK 2.46 but I was also not
> success.  So I download last version of  ECW SDK (3.3).
>
> Then start my C++ horror.
>
> I am not able compile ECW SDK with Visual Studio .Net 2003, a don't know
> why, I followed Build.txt, I downloaded latest Microsoft Platform SDK. And
> when I try build this library a get error
>
> midl : command line error MIDL1004 : cannot execute C preprocessor cl.exe

Ivan,

I haven't run into problems with midl before.

> in the build log is:
>
> NCSEcw : warning PRJ0041 : Cannot find missing dependency 'NCSEcw.tlb' for
> file 'NCSEcw.rc'.  Your project may still build, but may continue to appear
> out of date until this file is found.
> Creating temporary file
> "c:\Projects\Gdal\gdal130\ecw\libecwj2-3.3\Source\C\NCSEcw\NCSEcw\Release\RSP000001.rsp"
> with contents
> [
> /I "..\..\..\include" /I "c:\Program Files\Microsoft Visual Studio .NET
> 2003\Vc7\bin" /env win32 /Oicf  /tlb ".\NCSEcw.tlb" /h "NCSEcwCom.h" /iid
> "NCSEcw_i.c"
> ".\NCSEcw.idl"]Creating command line "midl.exe
> @"c:\Projects\Gdal\gdal130\ecw\libecwj2-3.3\Source\C\NCSEcw\NCSEcw\Release\RSP000001.rsp"
> /nologo"Creating Type Library...Processing .\NCSEcw.idlmidl : command line
> error MIDL1004 : cannot execute C preprocessor cl.exe
>
> What I am doing wrong?
> And another questions Is last ECW SDK and GDAL -1.3.1 compatible?
> Can I get somewhere ECW binary? (I tried new ones from emapper.com) but
> there was not some headers.

To the best of my knowledge ERMapper has not released binaries corresponding
to ECW SDK 3.3RC. GDAL 1.3.1 is ECW SDK 3.3 compatible though you will
need to adjust the build stuff for windows somewhat.

> Or have I wrong Microsoft Platform SDK installed (I tried this PSD-x86.exe
> from
> http://www.microsoft.com/msdownload/platformsdk/sdkupdate)
>
> Or If someone is successful in building last GDAL and Last ECW Could you
> tell me pleas step by step instruction how it is possible ?

I was recently successful in building the ECW SDK 3.3 with
Visual Studio 2002, but I had to convert the 2003 solution back
to do this.  With 2003 it should be more straight forward.

In the particular build, we used /MT instead of /MD for
compatability with the end application in question.  I doubt
this is necessary and in fact it likely complicates things.

For me, aftering installing the latest x86 platform SDK, the build
of the ECW SDK was problem free.   I don't know why you are
running into problems.

But for GDAL there were a number of changes required.  I had to
change the nmake.opt to link against the libecwj2.lib instead of
the old libraries.

eg.
ECWDIR  = 	C:\warmerda\libecwj2-3.3
ECWLIB  = 	$(ECWDIR)\Source\NCSBuildQmake\Debug\libecwj2.lib

And in gdal/frmts/ecw/makefile.vc I had to make changes to get all
the same defines as the ECW SDK is built with.  Otherwise you will
suffer "vtable hell".  The makefile now looks like:

EXTRAFLAGS = 	-I$(ECWDIR)\include -I$(ECWDIR)/Source/include \
		/D_MBCS /D_UNICODE /DUNICODE /D_WINDOWS \
		/DLIBECWJ2 /DWIN32 /D_WINDLL -DFRMT_ecw -DNO_X86_MMI

OBJ	=	ecwdataset.obj ecwcreatecopy.obj jp2userbox.obj

GDAL_ROOT	=	..\..

!INCLUDE $(GDAL_ROOT)\nmake.opt

default:	$(OBJ)
	copy *.obj ..\o

all:	default testecw.exe

clean:
	-del *.obj
	-del *.exe


Once these changes were in place, I didn't have any
more problems with the build.

I did recently changes the ecwcreatecopy.cpp code so that it
creates the GeoTIFF for GeoJP2 support myself.  The translation
through the ERMapper "GDT" coordinate system representation
wasn't working too well for me in some cases.

Based on that, I would encourage you to upgrade to the nightly
snapshot of GDAL.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From ealpert at digitalglobe.com  Wed Dec 21 12:21:02 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Burning text into GeoTiffs?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BC14@COMAIL01.digitalglobe.com>


Anyone have any suggestions for writing text into GeoTiffs? 

I'm considering using imagemagik to create a image with just the text
and transparent everywhere else then gdal_translate translate to add
gcps and gdalwarp to overlay the text on the output GeoTiff. 

Are there any other approaches? 

-e


From ed at topozone.com  Wed Dec 21 12:44:41 2005
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Burning text into GeoTiffs?
Message-ID: <4BF377919225F449BB097CB76FFE9BC83DD6F9@ptolemy.topozone.com>

Ethan -

Depending on how complex you need things to be, that would work fine -
you could also use MapServer to do all kinds of "annotations" and then
create GeoTIFF output.  You could do that through the mapserv CGI or
using shp2img.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Wednesday, December 21, 2005 12:21 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Burning text into GeoTiffs?


Anyone have any suggestions for writing text into GeoTiffs? 

I'm considering using imagemagik to create a image with just the text
and transparent everywhere else then gdal_translate translate to add
gcps and gdalwarp to overlay the text on the output GeoTiff. 

Are there any other approaches? 

-e

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From tylermitchell at shaw.ca  Wed Dec 21 12:43:34 2005
From: tylermitchell at shaw.ca (Tyler Mitchell)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Burning text into GeoTiffs?
Message-ID: <efdeb2ef9684.ef9684efdeb2@shaw.ca>

> Anyone have any suggestions for writing text into GeoTiffs? 

Imagmagick came to mind immediately for me too, but you could also use MapServer.  

Tyler


From ealpert at digitalglobe.com  Wed Dec 21 12:47:56 2005
From: ealpert at digitalglobe.com (Ethan Alpert)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Burning text into GeoTiffs?
Message-ID: <8B319E5A30FF4A48BE7EEAAF609DB23306BC15@COMAIL01.digitalglobe.com>


I'm actually now considering mapscript with the gdal api for an
all-in-one solution. I'll post any solution I come up with.

-e

-----Original Message-----
From: Ed McNierney [mailto:ed@topozone.com] 
Sent: Wednesday, December 21, 2005 10:45 AM
To: Ethan Alpert; gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] Burning text into GeoTiffs?


Ethan -

Depending on how complex you need things to be, that would work fine -
you could also use MapServer to do all kinds of "annotations" and then
create GeoTIFF output.  You could do that through the mapserv CGI or
using shp2img.

	- Ed

Ed McNierney
President and Chief Mapmaker
TopoZone.com / Maps a la carte, Inc.
73 Princeton Street, Suite 305
North Chelmsford, MA  01863
ed@topozone.com
(978) 251-4242  

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Ethan Alpert
Sent: Wednesday, December 21, 2005 12:21 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Burning text into GeoTiffs?


Anyone have any suggestions for writing text into GeoTiffs? 

I'm considering using imagemagik to create a image with just the text
and transparent everywhere else then gdal_translate translate to add
gcps and gdalwarp to overlay the text on the output GeoTiff. 

Are there any other approaches? 

-e

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From surgpub at telkomsa.net  Wed Dec 21 16:18:22 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
In-Reply-To: <931f8ea90512191256x3027a49cr9a48e7c91228e5aa@mail.gmail.com>
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
	<931f8ea90512191256x3027a49cr9a48e7c91228e5aa@mail.gmail.com>
Message-ID: <200512212318.22751.surgpub@telkomsa.net>

On Monday 19 December 2005 22:56, Frank Warmerdam wrote:
> As you can see, I had to create soft links so that stuff
> like "lht." would appear as "lht".
>
> Best regards,

I symlinked all the *. files in the eurnasia dataset but I still get 0 feature 
counts.
orginfo lists all the feature types though.

Any ideas?

Thanks
Paul

From michael.paul at tao.es  Thu Dec 22 06:21:24 2005
From: michael.paul at tao.es (Paul, Michael)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] RE: GDAL, and C# Access
Message-ID: <F351B61A81F4F54F92740EA8B510C2B103103106@ESGDASMA5VX0014.ib.gedas.vwg>

Hi Frank,

referring to your mail below, effectively there is a way to use GDAL from
within C# without having to use SWIG. I have changed the code you posted to
this list so that it works absolutely stable, both on Windows and Linux with
Mono. You may find it below.

Two rules of thumb in order to make this code working:
1) never define a DLLImport statement with return type string, instead let
it return an IntPtr. Later, you can use the Marshal class to obtain the
string value. 
2) always pass a HandleRef to native code, not an IntPtr.

Some notes: 
at  http://cvs.sourceforge.net/viewcvs.py/mgis/driver/ogr.MGIS.Data.OGR/OGR/
you may see a more sophisticated wrapper that already permits read-only
access to the OGR C API. They are based upon the classes generated by the
SWIG interfaces of GDAL, but the DllImport statements (ogr_api.cs) have been
changed so that the GDAL library can be used directly. 

Last not least: a Managed C++ DLL that exposes the GDAL classes to .Net may
be another approach to solve the problem. An example may be seen in the
following article:
http://www.codeproject.com/csharp/GisMap.asp 


Any comments are welcome.

Have fun.

Changed code:
_____________________________
using System;
using System.Runtime.InteropServices;
using System.Windows.Forms;
namespace GoodleWrapper
{
        public class GoodleWrapper: Form
        {
            private Button button1;
        /// <summary>
		/// The main entry point for the application.
		/// </summary>
		[STAThread]
		static void Main()
		{
            Application.Run(new GoodleWrapper());
		}

		public enum GA_Access
		{			
            /// <summary>
            /// Read only (no update access
            /// </summary>
            GA_ReadOnly = 0,
            ///<summary>
            ///Read/write access. */
            ///</summary>
            GA_Update = 1
		}

		[DllImport("gdal13.dll")]
		public static extern IntPtr GDALOpen( [MarshalAs
(UnmanagedType.LPStr)]
                                                string pszFilename, 
                                                GA_Access eAccess );

		[DllImport("gdal13.dll")]
		public static extern IntPtr GDALGetDatasetDriver( HandleRef
GDALDatasetH );


		[DllImport("gdal13.dll")]
		public static extern void GDALAllRegister();

	
[DllImport("gdal13.dll",CharSet=CharSet.Ansi,EntryPoint="GDALGetDriverShortN
ame")]
		private static extern IntPtr GDALGetDriverShortName_api(
HandleRef GDALDriverH );

        public string GDALGetDriverShortName(HandleRef GDALDriverH)
        {
            return
Marshal.PtrToStringAnsi(GDALGetDriverShortName_api(GDALDriverH));
        }

		[DllImport("gdal13.dll",CharSet=CharSet.Ansi,
EntryPoint="GDALGetDriverLongName")]
        private static extern IntPtr GDALGetDriverLongName_api(HandleRef
GDALDriverH);

        public string GDALGetDriverLongName(HandleRef GDALDriverH)
        {
            return
Marshal.PtrToStringAnsi(GDALGetDriverLongName_api(GDALDriverH));
        }
		[DllImport("gdal13.dll")]
		public static extern int GDALGetRasterXSize( HandleRef
GDALDatasetH );

		[DllImport("gdal13.dll")]
            public static extern int GDALGetRasterYSize(HandleRef
GDALDatasetH);
		
		[DllImport("gdal13.dll")]
            public static extern int GDALGetRasterCount(HandleRef
GDALDatasetH);

		[DllImport("gdal13.dll",CharSet=CharSet.Ansi,
EntryPoint="GDALGetProjectionRef")]
            private static extern IntPtr GDALGetProjectionRef_api(HandleRef
GDALDatasetH);
            public string GDALGetProjectionRef(HandleRef GDALDatasetH)
            {
                return
Marshal.PtrToStringAnsi(GDALGetProjectionRef_api(GDALDatasetH));
            }

		public enum CPLErr
		{
			CE_None = 0,
			CE_Debug = 1,
			CE_Warning = 2,
			CE_Failure = 3,
			CE_Fatal = 4

		}

		[DllImport("gdal13.dll")]
		public static extern CPLErr GDALGetGeoTransform( HandleRef
GDALDatasetH, [In,Out] double [] Transform );

		[DllImport("gdal13.dll")]
		public static extern IntPtr GDALGetDriverByName(
[MarshalAs(UnmanagedType.LPStr)]string s );

		[DllImport("gdal13.dll")]
		public static extern IntPtr
        GDALCreateCopy(HandleRef GDALDriverH,
[MarshalAs(UnmanagedType.LPStr)] string s, HandleRef GDALDatasetH, int i,
HandleRef j, HandleRef k, HandleRef l);


		[DllImport("gdal13.dll")]
		public static extern void GDALClose(HandleRef GDALDriverH);


		[DllImport("gdal13.dll")]
		public static extern void GDALDestroyDriverManager();

		private void button1_Click(object sender, System.EventArgs
e)
		{
			GDALAllRegister();
			
            	//first rule of thumb: pass a HandleRef to native code, not
an IntPtr.
            	//1. wrap dataset handle return by GDAL into a HandleRef
			HandleRef hDataset = new HandleRef (this, GDALOpen(
"C:\\myimage.tif", GA_Access.GA_ReadOnly));
			if( hDataset.Handle == IntPtr.Zero )
			{
				MessageBox.Show("Could not open Raster
File.");
			}

            	//1. wrap dataset handle return by GDAL into a HandleRef
			HandleRef   hDriver;
			hDriver = new HandleRef (this, GDALGetDatasetDriver(
hDataset ));

			//FW:This seems to wig out .NET...Looks to me GDAL
has become unstable due to this call.
            	
			//second rule of thumb: use Marshal.PtrToStringAnsi
in order to handle strings returned by native code           
			MessageBox.Show("Driver: " + GDALGetDriverShortName(
hDriver ) + " " + GDALGetDriverLongName( hDriver ) );

			MessageBox.Show("Size is " + GDALGetRasterXSize(
hDataset ) + " " + GDALGetRasterYSize( hDataset ) + " " + 
            GDALGetRasterCount( hDataset ) );

			string ProjectionRef = null;

			//FW:Also this call destabilized the stack. Looks to
me like strings are not handled
			//the way they should be by .NET.
            
			//Note: applied the rule stated above and code
works:
			ProjectionRef = GDALGetProjectionRef( hDataset );

			if( ProjectionRef != null )
				MessageBox.Show("Projection is " +
ProjectionRef );

			double [] adfGeoTransform = new double[6];
			if( GDALGetGeoTransform( hDataset, adfGeoTransform )
== CPLErr.CE_None )
			{
				MessageBox.Show( "Origin = " +
adfGeoTransform[0] + " " + adfGeoTransform[3] );

				MessageBox.Show( "Pixel Size = " +
adfGeoTransform[1] + " " + adfGeoTransform[5] );
			}


			//Convert to some other format (JPG for example)
			hDriver = new HandleRef (this, GDALGetDriverByName(
"JPEG" ));

			//Do a straight copy.
			HandleRef  hOutDS = new HandleRef (this,
GDALCreateCopy( hDriver, "C:\\myimage.jpg", hDataset,
				0, new HandleRef (null, IntPtr.Zero), new
HandleRef(null, IntPtr.Zero), new HandleRef (null, IntPtr.Zero)));

			if(hOutDS.Handle != IntPtr.Zero)
                GDALClose( hOutDS );

			//Shut everything down.
			GDALClose( hDataset );
			GDALDestroyDriverManager();

			MessageBox.Show("Export to JPEG complete.");
		}
            public GoodleWrapper()
            {
                InitializeComponent();
            }

            private void InitializeComponent()
            {
                this.button1 = new System.Windows.Forms.Button();
                this.SuspendLayout();
                // 
                // button1
                // 
                this.button1.Location = new System.Drawing.Point(113, 99);
                this.button1.Name = "button1";
                this.button1.Size = new System.Drawing.Size(75, 23);
                this.button1.TabIndex = 0;
                this.button1.Text = "I love &.Net";
                this.button1.UseVisualStyleBackColor = true;
                this.button1.Click += new
System.EventHandler(this.button1_Click);
                // 
                // GoodleWrapper
                // 
                this.ClientSize = new System.Drawing.Size(292, 266);
                this.Controls.Add(this.button1);
                this.Name = "GoodleWrapper";
                this.ResumeLayout(false);

            }
	}
}



 
Regards,
 
Michael

_____________________________________________ 

From: Frank Warmerdam 
Sent: Thu Nov 4 11:55:45 EST 2004
To: [Gdal-dev]
Subject: GDAL, and C# Access

Folks,

There has been talk from time to time about using GDAL from C# or as a .NET
assemblage.  I can't say I grok all the issues in this area, but I thought
I should pass on something Roger Bedell sent me over a year ago.  He sent
a whole project showing how GDAL could be called from C#, which I am finally
looking at briefly.  I couldn't actually run the project, but I did dig
through the code, and found the following was the core of the GDAL
interaction.

The point is that it is fairly easy to call out to C entry points from C#.
At some point I might well try and maintain an appropriate set of C#
declarations for the GDAL C API though I am not ready to do that just yet.


		/// <summary>
		/// The main entry point for the application.
		/// </summary>
		[STAThread]
		static void Main()
		{
			Application.Run(new Form1());
		}

		public enum GA_Access
		{
			/*! Read only (no update) access */ GA_ReadOnly = 0,
			/*! Read/write access. */           GA_Update = 1
		}

		[DllImport("gdal11.dll")]
		public static extern IntPtr
			GDALOpen( string pszFilename, GA_Access eAccess );

		[DllImport("gdal11.dll")]
		public static extern IntPtr
			GDALGetDatasetDriver( IntPtr GDALDatasetH );


		[DllImport("gdal11.dll")]
		public static extern void
			GDALAllRegister();

		[DllImport("gdal11.dll",CharSet=CharSet.Ansi)]
		public static extern string
			GDALGetDriverShortName( IntPtr GDALDriverH );

		[DllImport("gdal11.dll",CharSet=CharSet.Ansi)]
		public static extern string
			GDALGetDriverLongName( IntPtr GDALDriverH );

		[DllImport("gdal11.dll")]
		public static extern int GDALGetRasterXSize( IntPtr
GDALDatasetH );

		[DllImport("gdal11.dll")]
		public static extern int GDALGetRasterYSize( IntPtr
GDALDatasetH );
		
		[DllImport("gdal11.dll")]
		public static extern int GDALGetRasterCount( IntPtr
GDALDatasetH );

		[DllImport("gdal11.dll",CharSet=CharSet.Ansi)]
		public static extern string GDALGetProjectionRef( IntPtr
GDALDatasetH );


		public enum CPLErr
		{
			CE_None = 0,
			CE_Debug = 1,
			CE_Warning = 2,
			CE_Failure = 3,
			CE_Fatal = 4

		}

		[DllImport("gdal11.dll")]
		public static extern CPLErr GDALGetGeoTransform( IntPtr
GDALDatasetH, [In,Out] double [] Transform );

		[DllImport("gdal11.dll")]
		public static extern IntPtr
		GDALGetDriverByName( string s );

		[DllImport("gdal11.dll")]
		public static extern IntPtr
		GDALCreateCopy( IntPtr GDALDriverH, string s, IntPtr
GDALDatasetH,
						int i, IntPtr j, IntPtr k,
IntPtr l);


		[DllImport("gdal11.dll")]
		public static extern void
			GDALClose( IntPtr GDALDriverH );


		[DllImport("gdal11.dll")]
		public static extern void
			GDALDestroyDriverManager();

		private void button1_Click(object sender, System.EventArgs
e)
		{
			GDALAllRegister();
			
			IntPtr hDataset = GDALOpen( Application.StartupPath
+ "\\..\\..\\SampleData\\SARA_IRS.TIF", GA_Access.GA_ReadOnly);
			if( hDataset == (IntPtr)null )
			{
				MessageBox.Show("Could not open Raster
File.");
			}

			IntPtr   hDriver;
	
			hDriver = GDALGetDatasetDriver( hDataset );

			//This seems to wig out .NET...Looks to me GDAL has
become unstable due to this call.
//			MessageBox.Show("Driver: " + GDALGetDriverShortName(
hDriver ) + " " + GDALGetDriverLongName( hDriver ) );

			MessageBox.Show("Size is " + GDALGetRasterXSize(
hDataset ) + " " + GDALGetRasterYSize( hDataset ) + " " + 
GDALGetRasterCount( hDataset ) );

//			string ProjectionRef = null;

			//Also this call destabilized the stack. Looks to me
like strings are not handled
			//the way they should be by .NET.
//			ProjectionRef = GDALGetProjectionRef( hDataset );

//			if( ProjectionRef != null )
//				MessageBox.Show("Projection is " +
ProjectionRef );

			double [] adfGeoTransform = new double[6];
			if( GDALGetGeoTransform( hDataset, adfGeoTransform )
== CPLErr.CE_None )
			{
				MessageBox.Show( "Origin = " +
adfGeoTransform[0] + " " + adfGeoTransform[3] );

				MessageBox.Show( "Pixel Size = " +
adfGeoTransform[1] + " " + adfGeoTransform[5] );
			}


			//Convert to some other format (JPG for example)
			hDriver = GDALGetDriverByName( "JPEG" );

			//Do a straight copy.
			IntPtr hOutDS = GDALCreateCopy( hDriver,
Application.StartupPath + "\\..\\..\\SampleData\\SARA_IRS.JPG", hDataset,
				0, (IntPtr)null,
				(IntPtr)null, (IntPtr)null);

			if(hOutDS != (IntPtr)null)
				GDALClose( hOutDS );

			//Shut everything down.
			GDALClose( hDataset );
			GDALDestroyDriverManager();

			MessageBox.Show("Export to JPEG complete.");
		}
	}

Best regards,

-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam at
pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From surgpub at telkomsa.net  Thu Dec 22 13:44:42 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
In-Reply-To: <200512212318.22751.surgpub@telkomsa.net>
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
	<931f8ea90512191256x3027a49cr9a48e7c91228e5aa@mail.gmail.com>
	<200512212318.22751.surgpub@telkomsa.net>
Message-ID: <200512222044.42434.surgpub@telkomsa.net>

On Wednesday 21 December 2005 23:18, Paul Surgeon wrote:
> On Monday 19 December 2005 22:56, Frank Warmerdam wrote:
> > As you can see, I had to create soft links so that stuff
> > like "lht." would appear as "lht".
> >
> > Best regards,
>
> I symlinked all the *. files in the eurnasia dataset but I still get 0
> feature counts.
> orginfo lists all the feature types though.
>
> Any ideas?
>
> Thanks
> Paul

Nevermind, I got it to work.

It appears that ogr2ogr tries to use some upper case names (*/hydro/L/L/FAC) 
and then it tries lowercase but in the process changes the entire path to 
lower case and then goes through a whole list of combinations and fails.

I removed some upper case letters from the path and it worked but I think it's 
rather silly that it didn't try */hydro/L/L/FAC and then */hydro/l/l/fac 
before messing around with the rest of the path outside of the vmap0 data 
directory.

Regards
Paul

From rsheykhet at sanz.com  Thu Dec 22 15:55:04 2005
From: rsheykhet at sanz.com (Sheykhet, Rostic)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Threading and CSV files
Message-ID: <ED3A48B9840E594890A2BC172D11946504B27E81@mailman.san.com>

Hi All/Frank,

I am trying to debug a SEGFAULT in gdal 1.3.1 on Linux with multiple
threads accessing the same tiff file. Each thread creates its own
DataSource.  Looks like what's happening is that multiple threads are
trying to access the same data structure (CSV file table defined in
cpl_csv.cpp) concurrently and are corrupting it.   The table variable is
declared as CPL_THREADLOCAL, but CPL_THREADLOCAL is currently a blank
#define statement.  Is there a way to bypass/mitigate this issue?


Thanks a lot

Rostic



From Martin.Spott at mgras.net  Thu Dec 22 17:14:43 2005
From: Martin.Spott at mgras.net (Martin Spott)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
	<200512222044.42434.surgpub@telkomsa.net>
Message-ID: <dof8gj$1g18$2@osprey.mgras.de>

Paul Surgeon wrote:

> It appears that ogr2ogr tries to use some upper case names (*/hydro/L/L/FAC) 
> and then it tries lowercase but in the process changes the entire path to 
> lower case and then goes through a whole list of combinations and fails.

Oh man, fellow, I'm sorry I didn't notice your posting before because I
went through the whole issue before. Indeed, ogr2ogr/ogdi doesn't take
upper case characters, some people even suggest to remove the trailing
dots. I did that but as far as I notice this didn't make any
difference.

Cheers,
	Martin.
-- 
 Unix _IS_ user friendly - it's just selective about who its friends are !
--------------------------------------------------------------------------

From warmerdam at pobox.com  Thu Dec 22 17:33:56 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
In-Reply-To: <200512222044.42434.surgpub@telkomsa.net>
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
	<931f8ea90512191256x3027a49cr9a48e7c91228e5aa@mail.gmail.com>
	<200512212318.22751.surgpub@telkomsa.net>
	<200512222044.42434.surgpub@telkomsa.net>
Message-ID: <931f8ea90512221433i46516287x9fcda9901e7b11ec@mail.gmail.com>

On 12/22/05, Paul Surgeon <surgpub@telkomsa.net> wrote:
> Nevermind, I got it to work.
>
> It appears that ogr2ogr tries to use some upper case names (*/hydro/L/L/FAC)
> and then it tries lowercase but in the process changes the entire path to
> lower case and then goes through a whole list of combinations and fails.
>
> I removed some upper case letters from the path and it worked but I think it's
> rather silly that it didn't try */hydro/L/L/FAC and then */hydro/l/l/fac
> before messing around with the rest of the path outside of the vmap0 data
> directory.

Paul,

At the risk of sounding defensive, it is the OGDI code that is
doing all this, not OGR itself.  The logic comes from problems
in the past where different unix systems used different "case"
for mounted CDs.  The logic apparently assumes the CD
is mounted directly under the root ... or perhaps the logic
was just broken in the first place.

When I once wrote something similar for PCI, we actually
had logic to determine what part of the path was "on the cd"
so we could just adjust the case of that part.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From surgpub at telkomsa.net  Thu Dec 22 17:55:53 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] extracing inwatera from vmap0
In-Reply-To: <931f8ea90512221433i46516287x9fcda9901e7b11ec@mail.gmail.com>
References: <8D90096E-2007-4CF3-93BC-652AF4DA4212@pvv.ntnu.no>
	<200512222044.42434.surgpub@telkomsa.net>
	<931f8ea90512221433i46516287x9fcda9901e7b11ec@mail.gmail.com>
Message-ID: <200512230055.54269.surgpub@telkomsa.net>

On Friday 23 December 2005 00:33, Frank Warmerdam wrote:
> Paul,
>
> At the risk of sounding defensive, it is the OGDI code that is
> doing all this, not OGR itself.  The logic comes from problems
> in the past where different unix systems used different "case"
> for mounted CDs.  The logic apparently assumes the CD
> is mounted directly under the root ... or perhaps the logic
> was just broken in the first place.

Thanks Frank, I now see the difficulty in figuring out which part of the path 
is part of the vmap0 data set and which part isn't.

It would be nice if OGDI falls over properly instead of failing silently in 
the background.

Paul

From warmerdam at pobox.com  Thu Dec 22 23:47:29 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Threading and CSV files
In-Reply-To: <ED3A48B9840E594890A2BC172D11946504B27E81@mailman.san.com>
References: <ED3A48B9840E594890A2BC172D11946504B27E81@mailman.san.com>
Message-ID: <931f8ea90512222047g728b7558y85ca5b225dd329a4@mail.gmail.com>

On 12/22/05, Sheykhet, Rostic <rsheykhet@sanz.com> wrote:
> Hi All/Frank,
>
> I am trying to debug a SEGFAULT in gdal 1.3.1 on Linux with multiple
> threads accessing the same tiff file. Each thread creates its own
> DataSource.  Looks like what's happening is that multiple threads are
> trying to access the same data structure (CSV file table defined in
> cpl_csv.cpp) concurrently and are corrupting it.   The table variable is
> declared as CPL_THREADLOCAL, but CPL_THREADLOCAL is currently a blank
> #define statement.  Is there a way to bypass/mitigate this issue?

Rostic,

Good point.  I have commited changes to protect the
open csv file list in cpl_csv.c with a mutex.   Could
you try again with those changes in place?   I have
tried some fairly intensive multiple thread TIFF access
before, but didn't encounter this particular problem.

Best regards,

--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From mn at blominfo.dk  Fri Dec 23 08:14:32 2005
From: mn at blominfo.dk (Morten Nielsen)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] RE:  GDAL, and C# Access
Message-ID: <D0B3429CEB2C4A4C82F2E412CD5DB9C66E860B@kernen.blomkbh.dk>

Hi Paul

Great work on the .NET wrappers. I decided to take it a step further and
putting it all in some nice classes, so you won't have to worry about
pointers, disposing objects etc. I think a lot of .NET developers would
like that approach. I put the code example for download here:
     http://www.iter.dk/dotnet/gdal/gdal_test.zip

I added some code-comments copied from the gdal website as well, so you
will have intellisence on most of the methods.

Best regards
/Morten



From roger at beardandsandals.co.uk  Fri Dec 23 14:32:34 2005
From: roger at beardandsandals.co.uk (Roger James)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] A small mod for ntffilereader.cpp
Message-ID: <20051223193240.B352C32C03E@smtpauth01.csee.siteprotect.com>

I recently came across some "Nextmap Britain" digital elevation data
distributed in OSGB NTF format. I anyone else comes across it the following
small mod to NTFFileReader::Open in ntffilereader.cpp allows GDAL to process
it.


    else if( EQUALN(pszProduct,"L-F_PROFILE_DTM",15) )
        nProduct = NPC_LANDFORM_PROFILE_DTM;
	else if( EQUALN(pszProduct,"NEXTMap Britain DSM",19) )
		nProduct = NPC_LANDFORM_PROFILE_DTM; // Treat as landform
profile DTM
	else if( EQUALN(pszProduct,"NEXTMap Britain DTM",19) )
		nProduct = NPC_LANDFORM_PROFILE_DTM; // Treat as landform
profile DTM

Enjoy,

Roger



From surgpub at telkomsa.net  Fri Dec 23 15:09:21 2005
From: surgpub at telkomsa.net (Paul Surgeon)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] color relief utility
Message-ID: <200512232209.21835.surgpub@telkomsa.net>

Hi folks

Here is a simple little tool that I created (with my limited programming 
ability) that creates "color relief" maps from a GDAL supported DEM.
It was inspired my Matt Perry's hillshade app (thanks Matt!).

I should actually merge the two apps so we can get "color shaded relief" maps 
in a single pass but I'll leave that for another day.

I included a really simple scons build environment for those who are too lazy 
to type more than 5 words to compile an app.  ;-)

Regards
Paul
-------------- next part --------------
A non-text attachment was scrubbed...
Name: color-relief.zip
Type: application/x-zip
Size: 4182 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051223/5145371c/color-relief.bin
From warmerdam at pobox.com  Fri Dec 23 15:28:42 2005
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] A small mod for ntffilereader.cpp
In-Reply-To: <20051223193240.B352C32C03E@smtpauth01.csee.siteprotect.com>
References: <20051223193240.B352C32C03E@smtpauth01.csee.siteprotect.com>
Message-ID: <931f8ea90512231228m6269198ufbb385f31af0c7f8@mail.gmail.com>

On 12/23/05, Roger James <roger@beardandsandals.co.uk> wrote:
> I recently came across some "Nextmap Britain" digital elevation data
> distributed in OSGB NTF format. I anyone else comes across it the following
> small mod to NTFFileReader::Open in ntffilereader.cpp allows GDAL to process
> it.

Roger,

Thanks, I have applied the patch.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From lumiousy at yahoo.com.cn  Sun Dec 25 08:33:50 2005
From: lumiousy at yahoo.com.cn (=?gb2312?q?=C2=B3=C3=F4?=)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] g++ links with GDAL in linux OS
Message-ID: <20051225133350.42673.qmail@web15108.mail.cnb.yahoo.com>

Hello,everyone!
  I used to run programes with GDAL in widows OS, but now I have to deal with it in linux OS. They are different, and I have some problems.
  There is no supported release in slackware linux OS, is there?
  And I download the FWTools(with GDAL in it) and set up it in a Fedoral core system.
  I can compile my gdal demo programme, but i just cannot link and run it?
  Are there any other operations that i have to do?
  Thanks!
   

__________________________________________________
?
http://cn.mail.yahoo.com
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051225/15ad9105/attachment.html
From peter.kingsbury at gmail.com  Mon Dec 26 10:16:25 2005
From: peter.kingsbury at gmail.com (Peter Kingsbury)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] (no subject)
Message-ID: <8babef250512260716i75e51bbeldd4be4c3629d73dc@mail.gmail.com>

SIGNOFF gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051226/0e63e0cf/attachment.html
From hydromap at gmail.com  Tue Dec 27 07:28:42 2005
From: hydromap at gmail.com (Shoaib Burq)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] g++ links with GDAL in linux OS
In-Reply-To: <20051225133350.42673.qmail@web15108.mail.cnb.yahoo.com>
References: <20051225133350.42673.qmail@web15108.mail.cnb.yahoo.com>
Message-ID: <60c6835d0512270428p6a646c8dqbf16a97296c70518@mail.gmail.com>

I'm not sure if FWtools install the gdal shared objects and the header
files to link ur code. Just curious if you have found them where u
installed FWtools?

On 12/26/05,  <lumiousy@yahoo.com.cn> wrote:
> Hello,everyone!
> I used to run programes with GDAL in widows OS, but now I have to deal with
> it in linux OS. They are different, and I have some problems.
> There is no supported release in slackware linux OS, is there?
> And I download the FWTools(with GDAL in it) and set up it in a Fedoral core
> system.
> I can compile my gdal demo programme, but i just cannot link and run it?
> Are there any other operations that i have to do?
> Thanks!
>
>
> __________________________________________________
> ?
> http://cn.mail.yahoo.com
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>


From JRAWLINSON at ngms.eu.com  Thu Dec 29 12:51:25 2005
From: JRAWLINSON at ngms.eu.com (Rawlinson, John (UK))
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] I need some help on using the SetMercator method
Message-ID: <4F8F47809A5813479AF74E3082FC0E4B13F0AF@apollo.ng.local>

I'm having some problems with the SetMercator method of OGRSpatialReference when using the GDAL Warp API. I'm writing an app the reads GeoTiff files and warps them into a memory raster. Things are ok without setting the target raster to be projected i.e.  

	oSRS.SetWellKnownGeogCS( "WGS84" );
	oSRS.exportToWkt( &pszSRS_WKT );
	poDstDS->SetGeoTransform( adfGeoTransform );
	poDstDS->SetProjection( pszSRS_WKT );

Source data is transferred to target raster correctly by the warp operation.

Note: I have previously calculated the GeoTransform array as follows:

	adfGeoTransform[0] = tl_lon;

	if (br_lon > tl_lon)
	{
		adfGeoTransform[1] = (br_lon - tl_lon) / iwidth;
	}
	else
	{
		adfGeoTransform[1] = (br_lon + 360.0 - tl_lon) / iwidth;
	}
	adfGeoTransform[2] = 0;
	
	adfGeoTransform[3] = tl_lat;
	adfGeoTransform[4] = 0;
	adfGeoTransform[5] = ((br_lat - tl_lat) / iheight);

Where tl_lat, tl_lon, br_lat, br_lon are the geographic extents of my target raster and iwidth and iheight are the raster sizes.

As soon as I set the target raster to be projected i.e.

	oSRS.SetProjCS("Mercator Projection");
	oSRS.SetWellKnownGeogCS( "WGS84" );
        oSRS.SetMercator (0, 0, 1.0, 0, 0);
	oSRS.exportToWkt( &pszSRS_WKT );
	poDstDS->SetGeoTransform( adfGeoTransform );
	poDstDS->SetProjection( pszSRS_WKT );

Now the target raster is not filled (all black). I've experimented a little with the parameters to the SetMercator method. Setting the scale factor to 0 caused one of my tiff files (large map of europe) to warp ok, however, a small map ~300km wide in Afghanistan didn't warp (all black in the target again).

Can anyone advise on what the parameters passed to SetMercator should be? Also, what does scale factor mean in this context? Is there anything else I should be doing?

Many thanks for any help anyone can give.

Best regards,

John Rawlinson
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051229/1cb92db1/attachment.html
From cplist at earthlink.net  Thu Dec 29 16:42:05 2005
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] command line stdin/stdout
Message-ID: <013d01c60cc0$b6631a00$0200a8c1@latitude>

Hi, folks:

For the LIFE of me I can't recollect the command or the syntax that would
allow me to enter in a coordinate pair in lon,lat (e.g.) and have it spit
out the same point in my target projection.  I know it can be done because
I've done it before, but both my memory and Internet searches betray me.

Something like:

gdal_command src_proj_info_here target_proj_information_here <enter>
-98 32 <enter>
[gdal spits out a pair here]

Many thanks!

Charlton





From cplist at earthlink.net  Thu Dec 29 16:54:00 2005
From: cplist at earthlink.net (Charlton Purvis)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] command line stdin/stdout
In-Reply-To: <013d01c60cc0$b6631a00$0200a8c1@latitude>
Message-ID: <013f01c60cc2$607c5eb0$0200a8c1@latitude>

cs2cs

(You helped stoke an ember there, Norman.)

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-
> bounces@lists.maptools.org] On Behalf Of Charlton Purvis
> Sent: Thursday, December 29, 2005 4:42 PM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] command line stdin/stdout
> 
> Hi, folks:
> 
> For the LIFE of me I can't recollect the command or the syntax that would
> allow me to enter in a coordinate pair in lon,lat (e.g.) and have it spit
> out the same point in my target projection.  I know it can be done because
> I've done it before, but both my memory and Internet searches betray me.
> 
> Something like:
> 
> gdal_command src_proj_info_here target_proj_information_here <enter>
> -98 32 <enter>
> [gdal spits out a pair here]
> 
> Many thanks!
> 
> Charlton
> 
> 
> 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From cgnicholas at alamedanet.net  Thu Dec 29 14:04:07 2005
From: cgnicholas at alamedanet.net (Chris Nicholas)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] libstdc problems...
Message-ID: <43B43327.3040709@alamedanet.net>

what is the deal with libstdc++ ?  To get things to compile, seems I have to link in both versions 5 and 6. But even doing the most basic operations are crashing. 

I'm running mandrake 10.4, with gcc 3.4.1

(gdb) run
Starting program: /home/cgn/src/gdal-1.3.1/apps/gdalinfo 
[Thread debugging using libthread_db enabled]
[New Thread 1091274656 (LWP 7799)]

Program received signal SIGSEGV, Segmentation fault.
[Switching to Thread 1091274656 (LWP 7799)]
0x40d70ebb in std::__default_alloc_template<true, 0>::allocate () from /usr/lib/libstdc++.so.5
(gdb) where
#0  0x40d70ebb in std::__default_alloc_template<true, 0>::allocate () from /usr/lib/libstdc++.so.5
#1  0x40d70f59 in std::allocator<char>::allocate () from /usr/lib/libstdc++.so.5
#2  0x40d7708e in std::string::_Rep::_S_create () from /usr/lib/libstdc++.so.5
#3  0x40d7807f in std::string::_S_construct<char const*> () from /usr/lib/libstdc++.so.5
#4  0x40d743bf in std::basic_string<char, std::char_traits<char>, std::allocator<char> >::basic_string
    () from /usr/lib/libstdc++.so.5
#5  0x402732af in GDALMajorObject::SetDescription () from /usr/local/lib/libgdal.so
#6  0x40141b63 in GDALRegister_BMP () from /usr/local/lib/libgdal.so
#7  0x4016b484 in GDALAllRegister () from /usr/local/lib/libgdal.so
#8  0x08049c0f in main ()
(gdb) 

thanks in advance
Chris


From cermak at sfos.uaf.edu  Thu Dec 29 18:40:13 2005
From: cermak at sfos.uaf.edu (Rob Cermak)
Date: Wed Nov 21 11:49:55 2007
Subject: extent calculator / RE: [Gdal-dev] command line stdin/stdout
In-Reply-To: <013f01c60cc2$607c5eb0$0200a8c1@latitude>
Message-ID: <Pine.LNX.4.44.0512291435070.26735-100000@topcat.sfos.uaf.edu>

If you need a quick calculation and can't get to a command line...
    http://ak.aoos.org/dev/tools/map_extents.php

-- 
Rob Cermak : 907-474-7948 : FAX 907-474-7204 : PGP = 0x75869A6E
Alaska Ocean Observing System : Data Management 
School of Fisheries and Ocean Sciences : University of Alaska Fairbanks
cermak@sfos.uaf.edu : fnjrc1@uaf.edu
ED9U1M7P01@alaska.edu : cermak@alaska.edu


From cermak at sfos.uaf.edu  Thu Dec 29 19:47:37 2005
From: cermak at sfos.uaf.edu (Rob Cermak)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] dods driver: base, scale, offset (RasterIO)
In-Reply-To: <43B43327.3040709@alamedanet.net>
Message-ID: <Pine.LNX.4.44.0512291521250.28853-100000@topcat.sfos.uaf.edu>

Hi,

I'm fairly close, but I've now hit a critical area that I need some expert
help or suggestions on where to place implementation code.

>From an OPeNDAP server, once we come up with a standard, we should be able
to apply various attributes given in the DAS to the data so it can be 
pushed into mapserver and a color pallete as defined by a SLD.

Here is the portion of the DAS that is important:

Attributes {
    HDF_GLOBAL {
[snip]
        String Scaling%20Equation "Base**((Slope*l3m_data) + Intercept) = Parameter value\\000";
        Float32 Base 10;
        Float32 Slope 0.015;
        Float32 Intercept -2;
[snip]
    }
}

No problem, the dods driver needs to get updated with a followup patch
(once we complete the task described below) to allow it to look for
"GLOBAL", "HDF_GLOBAL", "NC_GLOBAL"... that is trivial.

We can definitely standardize on the formula.  
  Base ** ((Slope * pixel) + Intercept)

I've been working with the 'using_dods' to test all the small changes.  
This is where I am now:

Opening the dataset.
Using HDF DAS
Setting missing value : 255
Base : 10
Slope : 0.015
Intercept : -2
Band Number: 1
Block = 1024x256
Type = Byte
NODATA value = 255
SCALE = 0.015
OFFSET = -2
BASE = 10
Min = 0, Max = 255

I've implemented:
  Get/Set:
    Scale <= Slope
    Offset <= Intercept

Added Get/Set(Base) to the GDALRasterData class.

using_dods.cpp uses RasterIO to pull the data in, but I'm not sure
how mapserver uses the GDAL library to pull things in via OPeNDAP.

Does Mapserver use RasterIO?

What I would like to see happen is after or duing the RasterIO call, it
applies the above formula to the data.  Then, all we need is to apply a
SLD color table and viola -- HDF satellite data in Mapscript.

Formula can be applied with one, two or three parts depeding if
the appropriate bOffsetSet, bScaleSet, bBaseSet and/or bNoDataSet is
set.  We would not want to apply the formula to missing data.

Hints to where to insert a hack into the code to convert pixel data to
real data would be great.

Alternative would be to convert the data from our source, but that would 
ballon the storage from basic integers to floats.  Trying to work from 
data natively from the source would be prefereable.

Then, socially, attempt to get all our sources use the same standard 
'terms' for base, slope, intercept...  good luck!

Rob
-- 
Rob Cermak : 907-474-7948 : FAX 907-474-7204 : PGP = 0x75869A6E
Alaska Ocean Observing System : Data Management 
School of Fisheries and Ocean Sciences : University of Alaska Fairbanks
cermak@sfos.uaf.edu : fnjrc1@uaf.edu
ED9U1M7P01@alaska.edu : cermak@alaska.edu


From sy at perkins.net  Fri Dec 30 16:03:40 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
Message-ID: <43B5A0AC.6070501@perkins.net>

I'm having some problems building GDAL (latest CVS version) on windows 
using Visual C++ 2005 Express Edition. I've downloaded and installed the 
Platform SDK as suggested by the Microsoft install intructions, but am 
running into a missing ATL library problem:

--

...
 link /dll /debug /INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate
 /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:_OGR_G_GetPointCount  
/INCLUDE:_OGR
RegisterAll /INCLUDE:_GDALSimpleImageWarp@36  
/INCLUDE:_GDALReprojectImage@48  /
INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  
/INCLUDE:_v
bSafeArrayToPtr@16  /INCLUDE:_OCTNewCoordinateTransformation@8 
port\*.obj gcore\
*.obj alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib 
ogr\ogr.lib vb6\vb
6_support.obj      odbc32.lib                        gcore\Version.res  
/out:gda
l13.dll /implib:gdal_i.lib
Microsoft (R) Incremental Linker Version 8.00.50727.42
Copyright (C) Microsoft Corporation.  All rights reserved.

LINK : fatal error LNK1104: cannot open file 'atlthunk.lib'
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
8\VC\BIN\l
ink.EXE"' : return code '0x450'
Stop.

--

The library atlthunk.lib doesn't appear to exist anywhere on my machine. 
Doing a google search reveals some articles which suggest that the ATL 
libraries are not included in visual c++ 2005 express, and that I should 
install a full version instead. Discussion at:

http://forums.microsoft.com/msdn/showpost.aspx?postid=64509&siteid=1

(you'll need to log on to the MSDN forum to read this).


Has anyone else had any luck building GDAL with Visual C++ 2005 Express? 
The ATL library seems to be only required for some VB6 backwards 
compatibility, so is there some easy way of disabling that requirement? 
Or am I going to have to shell out for Visual Studio 2005 Standard? 
(assuming that includes ATL?) I do also have VS 2003 .NET available, but 
I'm also using C# 2.0 (which requires Visual C# 2005) and so I'd rather 
not reinstall 2003 unless I really have to.

Cheers,

Simon



From mateusz at loskot.net  Fri Dec 30 16:32:42 2005
From: mateusz at loskot.net (Mateusz ?oskot)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5A0AC.6070501@perkins.net>
References: <43B5A0AC.6070501@perkins.net>
Message-ID: <20051230223242.q4aqo3n581pw80oo@loskot.net>

Quoting Simon Perkins <sy@perkins.net>:
>
> The library atlthunk.lib doesn't appear to exist anywhere on my 
> machine. Doing a google search reveals some articles which suggest 
> that the ATL libraries are not included in visual c++ 2005 express, 
> and that I should install a full version instead. Discussion at:
>
> http://forums.microsoft.com/msdn/showpost.aspx?postid=64509&siteid=1

I'm not sure but I suppose that GDAL stuff related to ODBC/OLE DB etc.
requires ATL.

Express edition does not include ATL library.
But there is the light in the tunnel.

Windows Template Library by Microsoft (http://sf.net/projects/wtl) is strongly
based on the ATL and WTL hackers managed to use WTL with VC++ Express :-)

Here is thread posted to WTL group on Yahoo!:
http://groups.yahoo.com/group/wtl/message/12850

Simply, you need to downlaod and install Platform SDK + you need to do some
small hacks. There is a step by step instrcuction in the post above included.
I hope it will help you.

Cheers
--
Mateusz ?oskot
http://mateusz.loskot.net



From sy at perkins.net  Fri Dec 30 17:02:13 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5A0AC.6070501@perkins.net>
References: <43B5A0AC.6070501@perkins.net>
Message-ID: <43B5AE65.5070506@perkins.net>

Some updates. I found a suggestion on the web to simply comment out the 
line #pragma comment(lib, "atlthunk.lib") from the atlbase.h file (found 
in C:\Program Files\Microsoft Platform SDK\include\atl after you install 
the platform SDK). This allowed the compile to complete (after a make 
clean), but when I try to e.g. start gdal_translate from the command 
line, I'm getting the error messsage:

"The application failed to start because MSVCR80.dll was not found. 
Re-installing the application may fix this problem."

Presumably MSVCR80.dll is the Visual Studio 2005 C runtime library, so 
it's a little alarming to say the least if this isn't being found. There 
are several DLLSs with the same name on my machine, so I picked one from 
the WinSxS directory and copied it into the directory containing my 
compiled GDAL executables and libraries, along with MSVCP80.dll. This 
results in a new error message:

"Runtime Error! ... An application has made an attempt to load the C 
runtime library incorrectly..."

Anybody seen this before and know how to fix it?

I'm tempted to bite the bullet and upgrade to Visual Studio 2005 
Standard Edition. Has anyone done this and managed to successfully build 
GDAL?

Has anyone managed to build GDAL using the express edition of Visual C++ 
2005?

Cheers,

Sy




Simon Perkins wrote:

> I'm having some problems building GDAL (latest CVS version) on windows 
> using Visual C++ 2005 Express Edition. I've downloaded and installed 
> the Platform SDK as suggested by the Microsoft install intructions, 
> but am running into a missing ATL library problem:
>
> -- 
>
> ...
> link /dll /debug /INCLUDE:_OGRFeatureStylePuller  /INCLUDE:_OSRValidate
> /INCLUDE:_OPTGetProjectionMethods  /INCLUDE:_OGR_G_GetPointCount  
> /INCLUDE:_OGR
> RegisterAll /INCLUDE:_GDALSimpleImageWarp@36  
> /INCLUDE:_GDALReprojectImage@48  /
> INCLUDE:_GDALComputeMedianCutPCT@32  /INCLUDE:_GDALDitherRGB2PCT@28  
> /INCLUDE:_v
> bSafeArrayToPtr@16  /INCLUDE:_OCTNewCoordinateTransformation@8 
> port\*.obj gcore\
> *.obj alg\*.obj frmts\o\*.obj ogr\ogrsf_frmts\ogrsf_frmts.lib 
> ogr\ogr.lib vb6\vb
> 6_support.obj      odbc32.lib                        
> gcore\Version.res  /out:gda
> l13.dll /implib:gdal_i.lib
> Microsoft (R) Incremental Linker Version 8.00.50727.42
> Copyright (C) Microsoft Corporation.  All rights reserved.
>
> LINK : fatal error LNK1104: cannot open file 'atlthunk.lib'
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
> 8\VC\BIN\l
> ink.EXE"' : return code '0x450'
> Stop.
>
> -- 
>
> The library atlthunk.lib doesn't appear to exist anywhere on my 
> machine. Doing a google search reveals some articles which suggest 
> that the ATL libraries are not included in visual c++ 2005 express, 
> and that I should install a full version instead. Discussion at:
>
> http://forums.microsoft.com/msdn/showpost.aspx?postid=64509&siteid=1
>
> (you'll need to log on to the MSDN forum to read this).
>
>
> Has anyone else had any luck building GDAL with Visual C++ 2005 
> Express? The ATL library seems to be only required for some VB6 
> backwards compatibility, so is there some easy way of disabling that 
> requirement? Or am I going to have to shell out for Visual Studio 2005 
> Standard? (assuming that includes ATL?) I do also have VS 2003 .NET 
> available, but I'm also using C# 2.0 (which requires Visual C# 2005) 
> and so I'd rather not reinstall 2003 unless I really have to.
>
> Cheers,
>
> Simon
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev



From mateusz at loskot.net  Fri Dec 30 17:16:07 2005
From: mateusz at loskot.net (Mateusz =?iso-8859-2?Q?=A3oskot?=)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5AE65.5070506@perkins.net>
References: <43B5A0AC.6070501@perkins.net> <43B5AE65.5070506@perkins.net>
Message-ID: <54627.127.0.0.1.1135980967.squirrel@loskot.net>

On Fri, Dec 30, 2005 11:02 pm, Simon Perkins wrote:
> Some updates. I found a suggestion on the web to simply comment out the
> line #pragma comment(lib, "atlthunk.lib") from the atlbase.h file (found
> in C:\Program Files\Microsoft Platform SDK\include\atl after you install
> the platform SDK).
> [...]>
> Has anyone managed to build GDAL using the express edition of Visual C++
> 2005?
>

Have you read my last response?
Have you tried solution from WTL group I included in my post?

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From sy at perkins.net  Fri Dec 30 18:04:57 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <54627.127.0.0.1.1135980967.squirrel@loskot.net>
References: <43B5A0AC.6070501@perkins.net> <43B5AE65.5070506@perkins.net>
	<54627.127.0.0.1.1135980967.squirrel@loskot.net>
Message-ID: <43B5BD19.50809@perkins.net>

Hi Mateusz,

Thanks for the suggestions. I've followed the instructions on that page 
and made the required changes to atlbase.h and atlwin.h, and installed 
WTL. I then did a complete clean and rebuild of GDAL. However, I get the 
same result as with the simple fix I reported earlier: the build no 
longer complains about not finding atlthunk.lib, but I get a strange 
failure to find MSVCR80.dll when trying to run any of the GDAL utilities 
from the command line. Anybody else seen this? I wonder if it is a 
"feature" of building win32 applications with visual studio 2005 express?

Cheers,

Sy


Mateusz ?oskot wrote:

>On Fri, Dec 30, 2005 11:02 pm, Simon Perkins wrote:
>  
>
>>Some updates. I found a suggestion on the web to simply comment out the
>>line #pragma comment(lib, "atlthunk.lib") from the atlbase.h file (found
>>in C:\Program Files\Microsoft Platform SDK\include\atl after you install
>>the platform SDK).
>>[...]>
>>Has anyone managed to build GDAL using the express edition of Visual C++
>>2005?
>>
>>    
>>
>
>Have you read my last response?
>Have you tried solution from WTL group I included in my post?
>
>Cheers
>  
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051230/d18d9443/attachment.html
From mateusz at loskot.net  Fri Dec 30 18:26:40 2005
From: mateusz at loskot.net (Mateusz =?iso-8859-2?Q?=A3oskot?=)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5BD19.50809@perkins.net>
References: <43B5A0AC.6070501@perkins.net> <43B5AE65.5070506@perkins.net>
	<54627.127.0.0.1.1135980967.squirrel@loskot.net>
	<43B5BD19.50809@perkins.net>
Message-ID: <56925.127.0.0.1.1135985200.squirrel@loskot.net>

On Sat, Grudzie? 31, 2005 12:04 am, Simon Perkins napisa?(a):

> Thanks for the suggestions. I've followed the instructions on that page
> and made the required changes to atlbase.h and atlwin.h, and installed
> WTL.

I think WTL is not required but it won't hurt to have it. May be you will
like it :-)))

> I then did a complete clean and rebuild of GDAL.


Good news.

> However, I get the
> same result as with the simple fix I reported earlier: the build no
> longer complains about not finding atlthunk.lib, but I get a strange
> failure to find MSVCR80.dll when trying to run any of the GDAL utilities
> from the command line. Anybody else seen this? I wonder if it is a
> "feature" of building win32 applications with visual studio 2005 express?

Simply, C run-time library (latest version) can not be found.
There may small issues occur related to installation and including
.manifest  files. Try to follow instructions in this thread:

http://forums.microsoft.com/MSDN/ShowPost.aspx?PostID=15218

In example, find this missing library in
C:\WINDOWS\WinSxS\x86_Microsoft.VC80.CRT_1fc8b3b9a1e18e3b_8.0.50727.42_x-ww_0de06acd
and copy it to the the directory where you have exe'cs.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From sy at perkins.net  Fri Dec 30 18:44:39 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5BD19.50809@perkins.net>
References: <43B5A0AC.6070501@perkins.net>
	<43B5AE65.5070506@perkins.net>	<54627.127.0.0.1.1135980967.squirrel@loskot.net>
	<43B5BD19.50809@perkins.net>
Message-ID: <43B5C667.7090805@perkins.net>

OK, got it all to work...

The issue is explained here:

http://forums.microsoft.com/msdn/showpost.aspx?postid=15218&siteid=1

Basically, VS 2005 applications now require a manifest which basically 
specifies which version of the runtime library an executable should link 
against. This makes executables much more tightly bound to the DLL 
versions that they load. When you build the application with the visual 
C++ IDE, the manifest gets embedded inside the executable and you don't 
have to worry about it. However, for some reason, when you build using 
nmake, the manifest is produced as an additional file, with the 
extension .manifest. In order to run the executable, you have to have 
that manifest in the same directory as the executable. The problem I was 
seeing is that the GDAL makefile.vc install target doesn't copy these 
manifest files. I updated apps/makefile.vc to install the .exe.manifest 
files alongside the .exe files, and now everything works great! Ditto 
for the gdal13.dll.manifest file. I'll commit a fix to CVS shortly.

Apparently, it is possible to embed the manifest into the executable 
with a certain amount of jiggery pokery, as described here:

http://msdn2.microsoft.com/en-us/library/ms235591.aspx

Seems like a lot of work to me, so I haven't bothered implementing that. 
If anyone else feels up to it, please go ahead!

Cheers,

Sy

P.S. As I finish this, I see that Mateusz has posted something 
suggesting basically the same solution, but I'll send this anyway...

Simon Perkins wrote:

> Hi Mateusz,
>
> Thanks for the suggestions. I've followed the instructions on that 
> page and made the required changes to atlbase.h and atlwin.h, and 
> installed WTL. I then did a complete clean and rebuild of GDAL. 
> However, I get the same result as with the simple fix I reported 
> earlier: the build no longer complains about not finding atlthunk.lib, 
> but I get a strange failure to find MSVCR80.dll when trying to run any 
> of the GDAL utilities from the command line. Anybody else seen this? I 
> wonder if it is a "feature" of building win32 applications with visual 
> studio 2005 express?
>
> Cheers,
>
> Sy
>
>
> Mateusz ?oskot wrote:
>
>>On Fri, Dec 30, 2005 11:02 pm, Simon Perkins wrote:
>>  
>>
>>>Some updates. I found a suggestion on the web to simply comment out the
>>>line #pragma comment(lib, "atlthunk.lib") from the atlbase.h file (found
>>>in C:\Program Files\Microsoft Platform SDK\include\atl after you install
>>>the platform SDK).
>>>[...]>
>>>Has anyone managed to build GDAL using the express edition of Visual C++
>>>2005?
>>>
>>>    
>>>
>>
>>Have you read my last response?
>>Have you tried solution from WTL group I included in my post?
>>
>>Cheers
>>  
>>
>------------------------------------------------------------------------
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051230/f7b426cb/attachment.html
From mateusz at loskot.net  Fri Dec 30 18:55:20 2005
From: mateusz at loskot.net (Mateusz =?iso-8859-2?Q?=A3oskot?=)
Date: Wed Nov 21 11:49:55 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5C667.7090805@perkins.net>
References: <43B5A0AC.6070501@perkins.net>
	<43B5AE65.5070506@perkins.net>	<54627.127.0.0.1.1135980967.squirrel@loskot.net>
	<43B5BD19.50809@perkins.net> <43B5C667.7090805@perkins.net>
Message-ID: <41094.127.0.0.1.1135986920.squirrel@loskot.net>


On Sat, Grudzie? 31, 2005 12:44 am, Simon Perkins napisa?(a):
> OK, got it all to work...
>
> The issue is explained here:
>
> http://forums.microsoft.com/msdn/showpost.aspx?postid=15218&siteid=1

Great news!
Nice you managed to make it working.
Also new users will be encourage to try free*** VC++ Express with GDAL :-)

*** Free for one year only, as Microsoft explains in VC++ Express FAQ.

Cheers
-- 
Mateusz ?oskot
http://mateusz.loskot.net

From sy at perkins.net  Fri Dec 30 19:14:18 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] Building with Visual C++ 2005 Express
In-Reply-To: <43B5C667.7090805@perkins.net>
References: <43B5A0AC.6070501@perkins.net>
	<43B5AE65.5070506@perkins.net>	<54627.127.0.0.1.1135980967.squirrel@loskot.net>
	<43B5BD19.50809@perkins.net> <43B5C667.7090805@perkins.net>
Message-ID: <43B5CD5A.40106@perkins.net>

For the benefit of other Visual C++ 2005 Express people, here's a 
summary of what I needed to do:

1) Download and install VC++ 2005 Express.

2) Download the Platform SDK, as described at:

http://msdn.microsoft.com/vstudio/express/visualc/usingpsdk/

3) Set up paths in the IDE as described there. But also add the 
following two include paths:

C:\Program Files\Microsoft Platform SDK\Include\atl
C:\Program Files\Microsoft Platform SDK\Include\mfc

4) Since we build GDAL from the command line using nmake, I found I had 
to independently set up my LIB, INCLUDE and PATH environment variables 
to include the Visual C++ library, include and executable paths. The 
command shell that comes with VC++ does not unfortunately set these from 
the IDE options, so doesn't include the extra paths you add in the 
IDE... But that shell provides a good start - open it up and then copy 
the relevant bits of the above three variables to your system 
environment variables. Then add on the Platform SDK paths as above.

5) Modify the platform SDK atlbase.h file as described at:

http://groups.yahoo.com/group/wtl/message/12850

You don't actually need to install WTL for GDAL.

6) Everything should now compile using "nmake /f makefile.vc". If you do 
a nmake install or devinstall, then make sure the manifest files get 
copied along with the DLLs and EXEs. This should happen automatically 
with the latest CVS code.


Next task, to check out those C# bindings so I never have to program in 
C++ again... :)

Cheers,

Sy



Simon Perkins wrote:

> OK, got it all to work...
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051230/59f0d3ed/attachment.html
From sy at perkins.net  Fri Dec 30 19:59:11 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] C# Bindings
Message-ID: <43B5D7DF.9020000@perkins.net>

I'm using visual c#/c++ 2005 express editions and having some trouble 
cuilding the c# bindings for GDAL.

After having built the GDAL library, I cd to the swig directory and type:

 > nmake /f makefile.vc csharp

The build fails with the message:

        cd ..
        csc /debug:full /target:library /out:gdal_ogr_csharp.dll ogr\*.cs
Microsoft (R) Visual C# 2005 Compiler version 8.00.50727.42
for Microsoft (R) Windows (R) 2005 Framework version 2.0.50727
Copyright (C) Microsoft Corporation 2001-2005. All rights reserved.

ogr\DataSource.cs(78,41): error CS0246: The type or namespace name
        'SpatialReference' could not be found (are you missing a using 
directive
        or an assembly reference?)
ogr\Geometry.cs(219,26): error CS0246: The type or namespace name
        'SpatialReference' could not be found (are you missing a using 
directive
        or an assembly reference?)
ogr\Geometry.cs(224,24): error CS0246: The type or namespace name
        'CoordinateTransformation' could not be found (are you missing a 
using
        directive or an assembly reference?)
ogr\Geometry.cs(229,10): error CS0246: The type or namespace name
        'SpatialReference' could not be found (are you missing a using 
directive
        or an assembly reference?)
ogr\Geometry.cs(235,38): error CS0246: The type or namespace name
        'SpatialReference' could not be found (are you missing a using 
directive
        or an assembly reference?)
ogr\Layer.cs(147,10): error CS0246: The type or namespace name
        'SpatialReference' could not be found (are you missing a using 
directive
        or an assembly reference?)
ogr\ogr.cs(15,57): error CS0246: The type or namespace name 
'SpatialReference'
        could not be found (are you missing a using directive or an assembly
        reference?)
ogr\ogr.cs(21,71): error CS0246: The type or namespace name 
'SpatialReference'
        could not be found (are you missing a using directive or an assembly
        reference?)
NMAKE : fatal error U1077: 
'C:\WINDOWS\Microsoft.NET\Framework\v2.0.50727\csc.EX
E' : return code '0x1'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
8\VC\BIN\n
make.EXE"' : return code '0x2'
Stop.


Anybody know what's happening here?

Cheers,

Simon



From sy at perkins.net  Fri Dec 30 20:40:53 2005
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] RE: GDAL, and C# Access
Message-ID: <43B5E1A5.7010207@perkins.net>

This stuff looks great! I wonder if anyone working on the SWIG C# 
bindings could comment on the relative difficulty of getting those up 
and running, compared to maintaining this kind of hand-rolled interface? 
>From my own point of view, SWIG is a bit of a mystery, and having just 
failed to get them to compile, I'm somewhat inclined to hack something 
together using this approach for the time being, at least until someone 
with greater Swig/C# knowledge fixes things...

Paul and Morten's work is a great start, though if we're really going to 
put something together that is of general use to other developers, I 
might suggest a few naming changes. For instance, FWTools is just one 
particular distribution of GDAL, so it doesn't quite make sense to me to 
use that as the primary namespace - I'd prefer "Gdal". Similarly, using 
a class called Gdal to map to the GDALDataset class doesn't feel quite 
right to me either. Why not Gdal.Dataset? Similarly, for 
Gdal.RasterBand, Gdal.Driver and so on for the other main GDAL object 
classes. In general, I think it would make sense to stick to the 
existing C++ organization of GDAL when mapping to C# classes. Morten - 
what do you think? The core GDAL C++ classes are listed at:

http://www.remotesensing.org/gdal/annotated.html

I'd like to help out on this if I can - obviously there's a lot of 
critical functionality missing right now, such as all the RasterBand and 
RasterIO stuff. I've been using GDAL and C++ for many years though I'm 
relatively new to C#.

Cheers,

Sy



--

From: Morten Nielsen <mn <at> blominfo.dk>
Subject: RE: GDAL, and C# Access 
<http://news.gmane.org/find-root.php?message_id=%3cD0B3429CEB2C4A4C82F2E412CD5DB9C66E860B%40kernen.blomkbh.dk%3e>
Newsgroups: gmane.comp.gis.gdal.devel 
<http://news.gmane.org/gmane.comp.gis.gdal.devel>
Date: 2005-12-23 13:14:32 GMT (1 week, 12 hours and 10 minutes ago)

Hi Paul

Great work on the .NET wrappers. I decided to take it a step further and
putting it all in some nice classes, so you won't have to worry about
pointers, disposing objects etc. I think a lot of .NET developers would
like that approach. I put the code example for download here:
     http://www.iter.dk/dotnet/gdal/gdal_test.zip

I added some code-comments copied from the gdal website as well, so you
will have intellisence on most of the methods.

Best regards
/Morten

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20051230/9e2666e7/attachment.html
From cgnicholas at alamedanet.net  Fri Dec 30 18:03:57 2005
From: cgnicholas at alamedanet.net (Chris Nicholas)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] libstdc problems...
In-Reply-To: <43B43327.3040709@alamedanet.net>
References: <43B43327.3040709@alamedanet.net>
Message-ID: <43B5BCDD.6030001@alamedanet.net>

after rebuilding *everything* from scratch (including python, swig, gd, 
etc), and being certain to have libstdc++.so.6 link in first,  the 
problem appears to
have "gone away", but there be gremlins lurking... am still interested 
why both 5 and 6 are required...

Things are working fine now; combined GDAL/OGR support is totally 
awesome in GRASS and MMS; many thanks to Frank and all...

Chris

-------------------------------------------------------------

[cgn@nicholas_home ~]$ ldd /usr/local/bin/gdalinfo
        linux-gate.so.1 =>  (0xffffe000)
        libgdal.so => /usr/local/lib/libgdal.so (0x40016000)
        libgeos.so.2 => /usr/local/lib/libgeos.so.2 (0x4060a000)
        libpthread.so.0 => /lib/tls/libpthread.so.0 (0x4070d000)
        libNCSEcw.so.0 => /usr/local/lib/libNCSEcw.so.0 (0x4071e000)
        libNCSCnet.so.0 => /usr/local/lib/libNCSCnet.so.0 (0x40846000)
        libNCSUtil.so.0 => /usr/local/lib/libNCSUtil.so.0 (0x4085f000)
        libhdf5.so.0 => /usr/local/lib/libhdf5.so.0 (0x40880000)
        libgif.so.4 => /usr/local/lib/libgif.so.4 (0x409a9000)
        libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x409b1000)
        libtiff.so.3 => /usr/local/lib/libtiff.so.3 (0x409d0000)
        libpng.so.3 => /usr/lib/libpng.so.3 (0x40a13000)
        libgrass_vect.so => /usr/local/grass/lib/libgrass_vect.so 
(0x40a3a000)
        libgrass_dig2.so => /usr/local/grass/lib/libgrass_dig2.so 
(0x40a66000)
        libgrass_dgl.so => /usr/local/grass/lib/libgrass_dgl.so (0x40a77000)
        libgrass_rtree.so => /usr/local/grass/lib/libgrass_rtree.so 
(0x40a8c000)
        libgrass_linkm.so => /usr/local/grass/lib/libgrass_linkm.so 
(0x40a91000)
        libgrass_dbmiclient.so => 
/usr/local/grass/lib/libgrass_dbmiclient.so (0
x40a93000)
        libgrass_dbmibase.so => 
/usr/local/grass/lib/libgrass_dbmibase.so (0x40a
9c000)
        libgrass_I.so => /usr/local/grass/lib/libgrass_I.so (0x40aaa000)
        libgrass_gproj.so => /usr/local/grass/lib/libgrass_gproj.so 
(0x40aba000)
        libgrass_vask.so => /usr/local/grass/lib/libgrass_vask.so 
(0x40ac2000)
        libgrass_gmath.so => /usr/local/grass/lib/libgrass_gmath.so 
(0x40ac8000)
        libgrass_gis.so => /usr/local/grass/lib/libgrass_gis.so (0x40acd000)
        libgrass_datetime.so => 
/usr/local/grass/lib/libgrass_datetime.so (0x40b4e000)
        libpq.so.4 => /usr/local/pgsql/lib/libpq.so.4 (0x40b56000)
        libz.so.1 => /lib/libz.so.1 (0x40b6d000)
        librt.so.1 => /lib/tls/librt.so.1 (0x40b7e000)
        libdl.so.2 => /lib/libdl.so.2 (0x40b92000)
        libkdu.so => /usr/local/lib/libkdu.so (0x40b95000)
        libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x40c1d000)
        libstdc++.so.5 => /usr/lib/libstdc++.so.5 (0x40cef000)
        libm.so.6 => /lib/tls/libm.so.6 (0x40daf000)
        libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x40dd2000)
        libc.so.6 => /lib/tls/libc.so.6 (0x40ddb000)
        /lib/ld-linux.so.2 => /lib/ld-linux.so.2 (0x40000000)
        libSM.so.6 => /usr/X11R6/lib/libSM.so.6 (0x40efb000)
        libICE.so.6 => /usr/X11R6/lib/libICE.so.6 (0x40f04000)
        libX11.so.6 => /usr/X11R6/lib/libX11.so.6 (0x40f1c000)
        libproj.so.0 => /usr/local/lib/libproj.so.0 (0x40fe7000)
        libncurses.so.5 => /lib/libncurses.so.5 (0x4101c000)
        libcrypt.so.1 => /lib/libcrypt.so.1 (0x41060000)
        libresolv.so.2 => /lib/libresolv.so.2 (0x4108d000)
        libnsl.so.1 => /lib/libnsl.so.1 (0x4109e000)
        libgpm.so.1 => /lib/libgpm.so.1 (0x410b1000)
[cgn@nicholas_home ~]$



Chris Nicholas wrote:

> what is the deal with libstdc++ ?  To get things to compile, seems I 
> have to link in both versions 5 and 6. But even doing the most basic 
> operations are crashing.
> I'm running mandrake 10.4, with gcc 3.4.1
>
> (gdb) run
> Starting program: /home/cgn/src/gdal-1.3.1/apps/gdalinfo [Thread 
> debugging using libthread_db enabled]
> [New Thread 1091274656 (LWP 7799)]
>
> Program received signal SIGSEGV, Segmentation fault.
> [Switching to Thread 1091274656 (LWP 7799)]
> 0x40d70ebb in std::__default_alloc_template<true, 0>::allocate () from 
> /usr/lib/libstdc++.so.5
> (gdb) where
> #0  0x40d70ebb in std::__default_alloc_template<true, 0>::allocate () 
> from /usr/lib/libstdc++.so.5
> #1  0x40d70f59 in std::allocator<char>::allocate () from 
> /usr/lib/libstdc++.so.5
> #2  0x40d7708e in std::string::_Rep::_S_create () from 
> /usr/lib/libstdc++.so.5
> #3  0x40d7807f in std::string::_S_construct<char const*> () from 
> /usr/lib/libstdc++.so.5
> #4  0x40d743bf in std::basic_string<char, std::char_traits<char>, 
> std::allocator<char> >::basic_string
>    () from /usr/lib/libstdc++.so.5
> #5  0x402732af in GDALMajorObject::SetDescription () from 
> /usr/local/lib/libgdal.so
> #6  0x40141b63 in GDALRegister_BMP () from /usr/local/lib/libgdal.so
> #7  0x4016b484 in GDALAllRegister () from /usr/local/lib/libgdal.so
> #8  0x08049c0f in main ()
> (gdb)
> thanks in advance
> Chris
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> .
>


From ppp5150 at hotmail.com  Sat Dec 31 19:17:07 2005
From: ppp5150 at hotmail.com (Paul Parisi)
Date: Wed Nov 21 11:49:56 2007
Subject: [Gdal-dev] gdal_translate Question
Message-ID: <BAY105-F2846F55960F64B48B59610BE2A0@phx.gbl>

I'm a new user and am running into a problem with the gdal_translate 
utility. I'm trying to crop a Landsat GTIFF image to fit a smaller SRTM 
elevation map. The documentation does not say what format the "ulx" 
coordinates must be, so I tried the following:

gdal_translate -of GTiff -projwin -116.000168 38.000331 -114.999256 
36.999143 Groom_1.tif Groom_1_Crop.tif

The program responded with:

Input file size is 8703, 7778
Computed -srcwin -16403 149400 0 0 from projected window.
Computed -srcwin falls outside raster size of 8703x7778

Are the coordinates in the correct form? I ran the gdal_translate program 
from a win32 FWtools shell. I'm not a sophisticated user, so I apologize for 
any dumb mistakes. I'm just trying to develop terrain for an open source 
flight sim! :) Thanks!



