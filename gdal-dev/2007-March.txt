From guillaume.huby.lists at gmail.com  Thu Mar  1 05:00:10 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Warping MODIS
In-Reply-To: <91d218430702270420r30d178bn8fa72672f96010d9@mail.gmail.com>
References: <91d218430702270420r30d178bn8fa72672f96010d9@mail.gmail.com>
Message-ID: <ddc797c30703010200v578c471r910684b09ba08a64@mail.gmail.com>

On 2/27/07, Jose Gomez-Dans <jgomezdans@gmail.com> wrote:
>
> Hi Guillaume,
> I just now realised your messages in the GDAL mailing list regarding
> the reprojection of MODIS, and the 21km offset problem. I work in
> UTM30N/European Datum 50, and have found the same problem. Using
> Markus' scripts, the problem is still there (in fact, the problem
> arises in the first warp, from MODIS sinusoidal into WGS84/LatLong).
> Have you found a way around this?
>

For me the problem is solved using Markus' trick. Here is a simplified
version :
1. warp to sphere :
gdalwarp -t_srs "+proj=latlong +ellps=sphere" src_dataset dst_dataset1
2. force projection to WGS84 :
gdal_translate -a_srs "EPSG:4326" dst_dataset1 dst_dataset2
3. warp to the expected final projection :
gdalwarp -t_srs EPSG:NNNNN dst_dataset2 dst_dataset3

A+,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/5cb54bae/attachment.html
From josegomez at gmx.net  Thu Mar  1 07:40:45 2007
From: josegomez at gmx.net (Jose Luis Gomez Dans)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Warping MODIS
In-Reply-To: <ddc797c30703010200v578c471r910684b09ba08a64@mail.gmail.com>
References: <91d218430702270420r30d178bn8fa72672f96010d9@mail.gmail.com>
	<ddc797c30703010200v578c471r910684b09ba08a64@mail.gmail.com>
Message-ID: <20070301124045.125010@gmx.net>

Hi Guillaume,

-------- Original-Nachricht --------
> On 2/27/07, Jose Gomez-Dans <jgomezdans@.com> wrote:
> >
> > Hi Guillaume,
> > I just now realised your messages in the GDAL mailing list regarding
> > the reprojection of MODIS, and the 21km offset problem.

> For me the problem is solved using Markus' trick.

I have added a repot to bug#1239 <http://bugzilla.remotesensing.org/show_bug.cgi?id=1239> that Markus' trick doesn't work with GDAL 1.4.0. I had to revert to 1.3.2 to do this. In fact, I implemented this in python, and could not use VRTs to do the double reprojection. Still looking into it, though! 

Cheers,
J
-- 
"Feel free" - 10 GB Mailbox, 100 FreeSMS/Monat ...
Jetzt GMX TopMail testen: www.gmx.net/de/go/mailfooter/topmail-out

From jmpmcmanus at yahoo.com  Thu Mar  1 07:52:58 2007
From: jmpmcmanus at yahoo.com (James McManus)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GRASS files and OGRINFO
Message-ID: <45E6CCAA.8090005@yahoo.com>

I have not been able to use ogrinfo on grass vector files. When I issue 
the following command:

ogrinfo -al -so vector/WQPondS/head

ogrinfo informs me the it is Unable to open datasource 
`vector/WQPondS/head' with the following drivers, and provides a list 
which includes GRASS. I have also tried running orginfo on other files 
in WQPondS with out success.

Jim


From nbarker at ittvis.com  Thu Mar  1 09:17:11 2007
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] NetCDF changes between 1.4 and 1.3.2
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131E15@bath.uk.rsinc.com>

Hi,

I am using gdal 1.3.2 on one machine, and upgraded to 1.4.0 on a
different machine (linux).  

However, running gdalinfo on the same netCDF files reports different
results, in that 1.3.2 is picking up the geo-info and 1.4.0 is not!! 
 
However I don't think this is a gdal version issue as I notice the same
thing with FWTools 1.1.0 on windows which is 1.3.2 of gdal - so it must
be a link with the netCDF library.

I have run ncdump on both netCDF files to confirm that the netCDF
library is reading the right lat/lons (it is).  Any thoughts
appreciated.  

I am going to parse the output of ncdump as work around in my script,
but I imagine this affects a few others.

(output below) 

Thanks,

Norman

1.3.2
Driver: netCDF/Network Common Data Format
Size is 320, 160
Coordinate System is `'
Origin = (0.000000,89.141518)
Pixel Size = (1.12148438,-1.11426897)
Metadata:
  NC_GLOBAL#history=Fri Sep  8 12:49:26 2006: ncks -v T
ggap1982012318.nc /tmp/t_ERA40_1982012318.nc
XCONV V1.05 10-October-2001
  ta#source=GRIB data
  ta#name=T
  ta#title=Temperature
  ta#date=23/01/82
  ta#time=18:00
  ta#long_name=Temperature
  ta#units=K
  ta#missing_value=2.000000e+20
  ta#_FillValue=2.000000e+20
  ta#valid_min=1.868241e+02
  ta#valid_max=3.150072e+02
  Time#units=days_since_19820123.18
  Time#time_origin=23-JAN-1982:18:00:00
  Pressure#units=hPa
  Pressure#positive=down
  Latitude#units=degrees_north
  Longitude#units=degrees_east
  Longitude#point_spacing=even
  Longitude#modulo=
Corner Coordinates:
Upper Left  (   0.0000000,  89.1415176)
Lower Left  (   0.0000000, -89.1415176)
Upper Right (     358.875,      89.142)
Lower Right (     358.875,     -89.142)
Center      ( 179.4375000,   0.0000000)

1.4.0
Driver: netCDF/Network Common Data Format
Size is 320, 160
Coordinate System is `'
Metadata:
  NC_GLOBAL#history=Fri Sep  8 12:49:26 2006: ncks -v T
ggap1982012318.nc /tmp/t_ERA40_1982012318.nc
XCONV V1.05 10-October-2001
  ta#source=GRIB data
  ta#name=T
  ta#title=Temperature
  ta#date=23/01/82
  ta#time=18:00
  ta#long_name=Temperature
  ta#units=K
  ta#missing_value=2.000000e+20
  ta#_FillValue=2.000000e+20
  ta#valid_min=1.868241e+02
  ta#valid_max=3.150072e+02
  Time#units=days_since_19820123.18
  Time#time_origin=23-JAN-1982:18:00:00
  Pressure#units=hPa
  Pressure#positive=down
  Latitude#units=degrees_north
  Longitude#units=degrees_east
  Longitude#point_spacing=even
  Longitude#modulo=
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  160.0)
Upper Right (  320.0,    0.0)
Lower Right (  320.0,  160.0)
Center      (  160.0,   80.0)
Band 1 Block=320x1 Type=Float32, ColorInterp=Undefined




From guillaume.huby.lists at gmail.com  Thu Mar  1 09:42:18 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Warping MODIS
In-Reply-To: <20070301124045.125010@gmx.net>
References: <91d218430702270420r30d178bn8fa72672f96010d9@mail.gmail.com>
	<ddc797c30703010200v578c471r910684b09ba08a64@mail.gmail.com>
	<20070301124045.125010@gmx.net>
Message-ID: <ddc797c30703010642g2f0d1623if28ed18d8882d650@mail.gmail.com>

On 3/1/07, Jose Luis Gomez Dans <josegomez@gmx.net> wrote:
>
> I have added a repot to bug#1239 <
> http://bugzilla.remotesensing.org/show_bug.cgi?id=1239> that Markus' trick
> doesn't work with GDAL 1.4.0. I had to revert to 1.3.2 to do this. In
> fact, I implemented this in python, and could not use VRTs to do the double
> reprojection. Still looking into it, though!


I'm using FWTools 1.2.1 with gdal 1.4.0 and did not have any problem using
the trick with the utilities.

Regards,
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/4b519ec1/attachment.html
From marchesini at unipg.it  Thu Mar  1 10:38:22 2007
From: marchesini at unipg.it (ivan marchesini)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp color management
Message-ID: <1172763502.4460.7.camel@ivangeo>

Dear users..
I'm reprojecting with gdalwarp a tif raster image of 2.4 MB and with a
RGB color table with only two entries: 0,0,0,255 and 255,255,255,255
(gdalinfo output)

after the reprojection I obtain a 220 MB image with RGB color table and
256 entries...

the image is too much large...
how can I solve this problem???

many thanks...

Ivan 








-- 
Ti prego di cercare di non inviarmi files .doc, .xls, .ppt, .dwg.
Preferisco formati liberi.
Please try to avoid to send me  .doc, .xls, .ppt, .dwg files.
I prefer free formats.
http://it.wikipedia.org/wiki/Formato_aperto
http://en.wikipedia.org/wiki/Open_format

Ivan Marchesini
Department of Civil and Environmental Engineering
University of Perugia
Via G. Duranti 93/a 
06125
Perugia (Italy)
e-mail: marchesini@unipg.it
        ivan.marchesini@gmail.com
tel: +39(0)755853760
fax: +39(0)755853756
jabber: geoivan73@jabber.org


From neteler at itc.it  Thu Mar  1 10:43:28 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GRASS files and OGRINFO
In-Reply-To: <45E6CCAA.8090005@yahoo.com>
References: <45E6CCAA.8090005@yahoo.com>
Message-ID: <20070301154328.GE9811@bartok.itc.it>

On Thu, Mar 01, 2007 at 07:52:58AM -0500, James McManus wrote:
> I have not been able to use ogrinfo on grass vector files. When I issue 
> the following command:
> 
> ogrinfo -al -so vector/WQPondS/head
> 
> ogrinfo informs me the it is Unable to open datasource 
> `vector/WQPondS/head' with the following drivers, and provides a list 
> which includes GRASS. I have also tried running orginfo on other files 
> in WQPondS with out success.

Jim,

I think that you have to use an absolute path, to a relative one.

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From stephan.holl at intevation.de  Thu Mar  1 11:00:01 2007
From: stephan.holl at intevation.de (Stephan Holl)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GRASS files and OGRINFO
In-Reply-To: <45E6CCAA.8090005@yahoo.com>
References: <45E6CCAA.8090005@yahoo.com>
Message-ID: <20070301170001.739012fb@thoe.hq.intevation.de>

Hello James,

James McManus <jmpmcmanus@yahoo.com>, [20070301 - 07:52:58]

> I have not been able to use ogrinfo on grass vector files. When I
> issue the following command:
> 
> ogrinfo -al -so vector/WQPondS/head
> 
> ogrinfo informs me the it is Unable to open datasource 
> `vector/WQPondS/head' with the following drivers, and provides a list 
> which includes GRASS. I have also tried running orginfo on other
> files in WQPondS with out success.

have you tried with absolut pathnames? I think there might be an issue
with that.

e.g. ogrinfo -al -so /path/to/loc/mapset/vector/name/head

HTH

	Stephan


-- 
Stephan Holl <stephan.holl@intevation.de>, http://intevation.de/~stephan
Tel: +49 (0)541-33 50 8 32 | Intevation GmbH | AG Osnabr?ck - HR B 18998
Gesch?ftsf?hrer:  Frank Koormann, Bernhard Reiter, Dr. Jan-Oliver Wagner


From warmerdam at pobox.com  Thu Mar  1 11:03:31 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp color management
In-Reply-To: <1172763502.4460.7.camel@ivangeo>
References: <1172763502.4460.7.camel@ivangeo>
Message-ID: <45E6F953.6080908@pobox.com>

ivan marchesini wrote:
> Dear users..
> I'm reprojecting with gdalwarp a tif raster image of 2.4 MB and with a
> RGB color table with only two entries: 0,0,0,255 and 255,255,255,255
> (gdalinfo output)
> 
> after the reprojection I obtain a 220 MB image with RGB color table and
> 256 entries...
> 
> the image is too much large...
> how can I solve this problem???

Ivan,

It would appear your input file is really a 1bit file, and likely is
compressed.  You can try adding "-co COMPRESS=DEFLATE" to your gdalwarp
commandline to compress your output file.  It should compress very well.

If that fails in some weird way, then use gdalwarp normally, and then
do the compression as an extra step.

eg.
gdal_translate -co COMPRESS=DEFLATE in.tif out.tif

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From simboss1 at gmail.com  Thu Mar  1 11:08:20 2007
From: simboss1 at gmail.com (Simone)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] gdalwarp color management
References: <1172763502.4460.7.camel@ivangeo>
Message-ID: <028101c75c1b$d770ba30$9700a8c0@LAPTOP>

Much probably your image is internally compressed
and doing a simple warp on it is decompressing it.

I guess if you copy and paste here a gdalinfo on the original image as well 
the gdalwarp comman line you used we could be of more help.


Ciao,
Simone.
-------------------------------------------------------
Eng. Simone Giannecchini

President/CEO GeoSolutions
http://www.geo-solutions.it
Via Carignoni 51
550141 Camaiore (LU)
Italy
Mobile: +39 333 81 28928
-------------------------------------------------------
----- Original Message ----- 
From: "ivan marchesini" <marchesini@unipg.it>
To: <gdal-dev@lists.maptools.org>
Sent: Thursday, March 01, 2007 4:38 PM
Subject: [Gdal-dev] gdalwarp color management


> Dear users..
> I'm reprojecting with gdalwarp a tif raster image of 2.4 MB and with a
> RGB color table with only two entries: 0,0,0,255 and 255,255,255,255
> (gdalinfo output)
>
> after the reprojection I obtain a 220 MB image with RGB color table and
> 256 entries...
>
> the image is too much large...
> how can I solve this problem???
>
> many thanks...
>
> Ivan
>
>
>
>
>
>
>
>
> -- 
> Ti prego di cercare di non inviarmi files .doc, .xls, .ppt, .dwg.
> Preferisco formati liberi.
> Please try to avoid to send me  .doc, .xls, .ppt, .dwg files.
> I prefer free formats.
> http://it.wikipedia.org/wiki/Formato_aperto
> http://en.wikipedia.org/wiki/Open_format
>
> Ivan Marchesini
> Department of Civil and Environmental Engineering
> University of Perugia
> Via G. Duranti 93/a
> 06125
> Perugia (Italy)
> e-mail: marchesini@unipg.it
>        ivan.marchesini@gmail.com
> tel: +39(0)755853760
> fax: +39(0)755853756
> jabber: geoivan73@jabber.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev 


From jmpmcmanus at yahoo.com  Thu Mar  1 12:03:11 2007
From: jmpmcmanus at yahoo.com (James McManus)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] GRASS files and OGRINFO
In-Reply-To: <20070301170001.739012fb@thoe.hq.intevation.de>
References: <45E6CCAA.8090005@yahoo.com>
	<20070301170001.739012fb@thoe.hq.intevation.de>
Message-ID: <45E7074F.60300@yahoo.com>

Ahhh that's it. Thanks!
Stephan Holl wrote:
> Hello James,
>
> James McManus <jmpmcmanus@yahoo.com>, [20070301 - 07:52:58]
>
>   
>> I have not been able to use ogrinfo on grass vector files. When I
>> issue the following command:
>>
>> ogrinfo -al -so vector/WQPondS/head
>>
>> ogrinfo informs me the it is Unable to open datasource 
>> `vector/WQPondS/head' with the following drivers, and provides a list 
>> which includes GRASS. I have also tried running orginfo on other
>> files in WQPondS with out success.
>>     
>
> have you tried with absolut pathnames? I think there might be an issue
> with that.
>
> e.g. ogrinfo -al -so /path/to/loc/mapset/vector/name/head
>
> HTH
>
> 	Stephan
>
>
>   


From singh01 at gmail.com  Thu Mar  1 12:53:22 2007
From: singh01 at gmail.com (Nagendra Singh)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Import Gdal Error in Python 2.4
Message-ID: <cd2d0ceb0703010953v55f275f0y71417526815d0264@mail.gmail.com>

Hi All,

I am running python on Cygwin and I have also installed gdal 1.4.0 (build
from source). When I run the command import gdal, Python gives me an error.
Any suggestions? I have double checked all the paths and everything seems
ok.

Python 2.4.3 (#1, May 18 2006, 07:40:45)
[GCC 3.3.3 (cygwin special)] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
Traceback (most recent call last):
  File "<stdin>", line 1, in ?
  File "/usr/lib/python2.4/site-packages/gdal.py", line 191, in ?
    import _gdal
ImportError: No module named _gdal

thanks in advance.

Nagendra
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/89cc2926/attachment.html
From dmorissette at mapgears.com  Thu Mar  1 13:58:15 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Patch to build libecwj2-3.3.tar.gz with GCC 4.1
Message-ID: <45E72247.3010504@mapgears.com>

libecwj2-3.3.tar.gz doesn't build with GCC 4.1, the compilation fails 
because of four class method declarations (located in 3 header files) 
that are prefixed with the class name. Here is an example of the 
compiler error that we get:

./Source/include/NCSJPCBuffer.h:178: error: extra qualification 
?CNCSJPCBuffer::? on member ?CNCSJPCBuffer?
./Source/include/NCSJPCBuffer.h:191: error: extra qualification 
?CNCSJPCBuffer::? on member ?operator=?

I have attached a patch to this email that solves this. Applying the 
patch in the libecwj2-3.3/Source/include directory allows the build to 
complete.

Hopefully this fix can be included in the next release of the ECW SDK.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/
-------------- next part --------------
A non-text attachment was scrubbed...
Name: libecw.patch
Type: text/x-patch
Size: 1618 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/3dd3270b/libecw.bin
From mateusz at loskot.net  Thu Mar  1 14:27:31 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Patch to build libecwj2-3.3.tar.gz with GCC 4.1
In-Reply-To: <45E72247.3010504@mapgears.com>
References: <45E72247.3010504@mapgears.com>
Message-ID: <45E72923.8090904@loskot.net>

Daniel Morissette wrote:
> libecwj2-3.3.tar.gz doesn't build with GCC 4.1, the compilation fails
> because of four class method declarations (located in 3 header files)
> that are prefixed with the class name. 

Daniel,

FYI, ~1-2 months ago, I reported this bug to contact I got from Frank,
in ER Mapper.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jean-claude.repetto at worldonline.fr  Thu Mar  1 16:54:19 2007
From: jean-claude.repetto at worldonline.fr (Jean-Claude Repetto)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Patch to build libecwj2-3.3.tar.gz with GCC 4.1
In-Reply-To: <45E72247.3010504@mapgears.com>
References: <45E72247.3010504@mapgears.com>
Message-ID: <45E74B8B.201@worldonline.fr>

Daniel Morissette a ?crit :
> libecwj2-3.3.tar.gz doesn't build with GCC 4.1, the compilation fails 
> because of four class method declarations (located in 3 header files) 
> that are prefixed with the class name. Here is an example of the 
> compiler error that we get:
> 
> ./Source/include/NCSJPCBuffer.h:178: error: extra qualification 
> ?CNCSJPCBuffer::? on member ?CNCSJPCBuffer?
> ./Source/include/NCSJPCBuffer.h:191: error: extra qualification 
> ?CNCSJPCBuffer::? on member ?operator=?
> 
> I have attached a patch to this email that solves this. Applying the 
> patch in the libecwj2-3.3/Source/include directory allows the build to 
> complete.
> 
> Hopefully this fix can be included in the next release of the ECW SDK.
> 
> Daniel

Hi Daniel,

Where did you get libecwj2-3.3.tar.gz ? On the ERMapper site you can 
download libecwj2-3.3-2006-09-06.zip, that I could compile without 
problems with GCC 4.1.1.

Jean-Claude



From dmorissette at mapgears.com  Thu Mar  1 17:36:02 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Patch to build libecwj2-3.3.tar.gz with GCC 4.1
In-Reply-To: <45E74B8B.201@worldonline.fr>
References: <45E72247.3010504@mapgears.com> <45E74B8B.201@worldonline.fr>
Message-ID: <45E75552.6070903@mapgears.com>

Jean-Claude Repetto wrote:
> 
> Where did you get libecwj2-3.3.tar.gz ? On the ERMapper site you can 
> download libecwj2-3.3-2006-09-06.zip, that I could compile without 
> problems with GCC 4.1.1.
> 

Doh! libecwj2-3.3.tar.gz is an old archive that we had here and that we 
use with FGS. I went to the ER Mapper site to look for a newer release 
earlier today but the website said that the latest was version 3.3 
(http://www.ermapper.com/Downloads.aspx?v=315) so I didn't bother 
downloading it since I thought I already had 3.3.

Why did they not issue a 3.3.1 and advertize it on their site instead of 
silently putting a date-stamped zip file like this?

Looking at this page again, I see at the bottom of the page that it's 
version 3.3. *released Feb 2nd, 2007* ... it seems that there have been 
several releases of 3.3... and I had not noticed that the first time I 
went there.  :(

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From yisaksultan at yahoo.com  Thu Mar  1 17:50:36 2007
From: yisaksultan at yahoo.com (YISAK SULTAN)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Converting HDF5 to GeoTiff
Message-ID: <208647.35521.qm@web38214.mail.mud.yahoo.com>

Hello,

I am trying to convert a file in HDF5 format to GeoTiff format. But I am having a problem in using gdal_translate and gdalinfo in accessing the subdataset in the HDF5 file. After running the command on my HDF5 file ( gdalinfo HDFTese.h5), the name of the subdataset I want to access is written out as 

SUBDATASET_0_NAME=HDF:"HDFTest.h5"://image1/data
SUBDATASET_0_DESC=[480x480] //image/data (8-bit integer)

So I tried to access this dataset by typing HDF5:"HDFTest.h5"://image1/data as in

gdalinfo  HDF5:"HDFTest.h5"://image1/data 
gdal_translate  -of  GTiff  HDF5:"HDFTest.h5"://image1/data  HDFTest.tif

Unfortunately I get this error message for both commands and the program crashes

szFilenname HDFTest.h5
Open!!

Can anyone please help me out with this problem. I desperately need this to work.

Thanks,
Yisak


 
____________________________________________________________________________________
Finding fabulous fares is fun.  
Let Yahoo! FareChase search your favorite travel sites to find flight and hotel bargains.
http://farechase.yahoo.com/promo-generic-14795097
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/eb67f6e9/attachment.html
From lijian.shi at und.nodak.edu  Thu Mar  1 21:59:47 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] About ogrinfo
Message-ID: <0JE90001T9NNWN00@mailmx1.und.nodak.edu>

Hi, 

 

I am a new guy of OGR. Today I use the followed command to browse the
information of a shp file:

 

ogrinfo -al polygon.shp

 

The result is the below. But when I read the code of ogrinfo, I did not find
the code used to print the information in red color(see below). Dose anyone
know which part of the code to do that job?

 

Best regards,

 

Lijian

 

INFO: Open of `polygon.shp'

      using driver `ESRI Shapefile' successful.

 

Layer name: polygon

Geometry: Polygon

Feature Count: 34

Extent: (-100.098424, 44.963097) - (-100.083363, 44.966678)

Layer SRS WKT:

(unknown)

SHAPEAREA: Real (10.2)

RATE: Real (10.2)

OGRFeature(polygon):0

  SHAPEAREA (Real) =       4.15

  RATE (Real) =     170.00

  POLYGON ((-100.098188735462756 44.966701411517263,-100.083332738651549
44.966617726539234,-100.083331471183172
44.96649894786075,-100.087000792125792
44.966571834777092,-100.085369560328502
44.965557716817564,-100.0851654979203
44.964606587551181,-100.084887922346397
44.964480610164905,-100.085194649692895
44.964606587551181,-100.085383502480624
44.965557716817564,-100.08730751947229
44.966344175643322,-100.087292309851804
44.966333377581641,-100.089114929373565
44.966364871928207,-100.089114929373565
44.966364871928207,-100.087263158079196
44.966344175643322,-100.087263158079196
44.966551138492207,-100.094440831480952
44.966581733000297,-100.094463645911674
44.966602429285189,-100.096729879364318
44.966552038330676,-100.096722274554082
44.966571834777092,-100.096757763668549
44.966552038330676,-100.096780578099285
44.966551138492207,-100.096783113036025
44.966537640915099,-100.097290100385607
44.966250592442087,-100.097756528747226
44.966033731369997,-100.097944114066578
44.965689993073156,-100.097771738367712
44.966033731369997,-100.096794520251393
44.966561036715412,-100.098195072804614
44.966561036715412,-100.098188735462756 44.966701411517263))

 

OGRFeature(polygon):1

  SHAPEAREA (Real) =       0.08

  RATE (Real) =     170.00

  POLYGON ((-100.096823672023987 44.966305482588965,-100.096868033417081
44.966054427654882,-100.097086037977405
44.965578413102456,-100.097173493295202
44.965133892896596,-100.097257146207895
44.964906233762825,-100.097260948613012
44.964906233762825,-100.097101247597891
44.965578413102456,-100.096823672023987 44.966305482588965))

 

OGRFeature(polygon):2

  SHAPEAREA (Real) =       0.11

  RATE (Real) =     170.00

  POLYGON ((-100.094140441476313 44.964948526171071,-100.09396806577746
44.965268868667607,-100.09396806577746
44.965713388873468,-100.093952856156974
44.965971642515335,-100.094186070337784
44.966250592442087,-100.09419367514802
44.966259590826823,-100.093923704384366
44.965982440577015,-100.093909762232258
44.965268868667607,-100.094140441476313 44.964948526171071))

...

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/5373e8ca/attachment.html
From mdsumner at utas.edu.au  Thu Mar  1 22:11:02 2007
From: mdsumner at utas.edu.au (Michael Sumner)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Gdal-dev Digest, Vol 34, Issue 3
In-Reply-To: <200703020301.l2231kHp018165@duke.maptools.org>
References: <200703020301.l2231kHp018165@duke.maptools.org>
Message-ID: <45E795C6.2060506@utas.edu.au>

Hello, I don't recognize the template of your subdataset:  perhaps you 
are referencing it incorrectly?

I don't have access to any HDF5 files, but one HDF4 file I have with 
several datasets like this:

 SUBDATASET_1_NAME=HDF4_SDS:UNKNOWN:"200201h18ea-gdm.hdf":0
 SUBDATASET_1_DESC=[2048x1024] Sea Surface Temperature (8-bit integer)
 SUBDATASET_2_NAME=HDF4_SDS:UNKNOWN:"200201h18ea-gdm.hdf":1
 SUBDATASET_2_DESC=[2048x1024] Number of Observations per Bin (8-bit 
integer)
 SUBDATASET_3_NAME=HDF4_GR:UNKNOWN:"200201h18ea-gdm.hdf":0
 SUBDATASET_3_DESC=[2048x1024x1] Raster Image #0 (8-bit unsigned character)
 SUBDATASET_4_NAME=HDF4_GR:UNKNOWN:"200201h18ea-gdm.hdf":1
 SUBDATASET_4_DESC=[2048x1024x1] Raster Image #1 (8-bit unsigned character)

I can access one of these by using

gdalinfo HDF4_GR:UNKNOWN:"200201h18ea-gdm.hdf":1

gdal_translate HDF4_GR:UNKNOWN:"200201h18ea-gdm.hdf":1 out.tif

Cheers, Mike.


> ------------------------------------------------------------------------
>
> Subject:
> [Gdal-dev] Converting HDF5 to GeoTiff
> From:
> YISAK SULTAN <yisaksultan@yahoo.com>
> Date:
> Thu, 1 Mar 2007 14:50:36 -0800 (PST)
> To:
> gdal-dev@lists.maptools.org
>
> To:
> gdal-dev@lists.maptools.org
>
>
> Hello,
>  
> I am trying to convert a file in HDF5 format to GeoTiff format. But I 
> am having a problem in using gdal_translate and gdalinfo in accessing 
> the subdataset in the HDF5 file. After running the command on my HDF5 
> file ( gdalinfo HDFTese.h5), the name of the subdataset I want to 
> access is written out as
>  
> SUBDATASET_0_NAME=HDF:"HDFTest.h5"://image1/data
> SUBDATASET_0_DESC=[480x480] //image/data (8-bit integer)
>  
> So I tried to access this dataset by typing 
> HDF5:"HDFTest.h5"://image1/data as in
>  
> gdalinfo  HDF5:"HDFTest.h5"://image1/data
> gdal_translate  -of  GTiff  HDF5:"HDFTest.h5"://image1/data  HDFTest.tif
>  
> Unfortunately I get this error message for both commands and the 
> program crashes
>  
> szFilenname HDFTest.h5
> Open!!
>  
> Can anyone please help me out with this problem. I desperately need 
> this to work.
>  
> Thanks,
> Yisak
>  
>  
>  
>
>  


From mateusz at loskot.net  Thu Mar  1 22:34:43 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] About ogrinfo
In-Reply-To: <0JE90001T9NNWN00@mailmx1.und.nodak.edu>
References: <0JE90001T9NNWN00@mailmx1.und.nodak.edu>
Message-ID: <45E79B53.4050905@loskot.net>

Lijian Shi wrote:
> 
> I am a new guy of OGR. Today I use the followed command to browse the
> information of a shp file:
> 
> ogrinfo -al polygon.shp
> 
> The result is the below. But when I read the code of ogrinfo, I did not find
> the code used to print the information in red color(see below).

What you mean as red color?
Does ogrinfo prints anything in red for you?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From lijian.shi at und.nodak.edu  Thu Mar  1 22:59:57 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] about ogrinfo
Message-ID: <0JE9000D4CFYWO00@mailmx1.und.nodak.edu>

Hi, 

 

I am a new guy of OGR. Today I use the followed command to browse the
information of a shp file:

 

ogrinfo -al polygon.shp

 

The result is the below. But when I read the code of ogrinfo, I did not find
the code used to print the information after "RATE: Real (10.2)"(see below).
Dose anyone know which part of the code to do that job?

 

Best regards,

 

Lijian

 

INFO: Open of `polygon.shp'

      using driver `ESRI Shapefile' successful.

 

Layer name: polygon

Geometry: Polygon

Feature Count: 34

Extent: (-100.098424, 44.963097) - (-100.083363, 44.966678)

Layer SRS WKT:

(unknown)

SHAPEAREA: Real (10.2)

RATE: Real (10.2)

// I did not find the code used to print the followed information

OGRFeature(polygon):0

  SHAPEAREA (Real) =       4.15

  RATE (Real) =     170.00

  POLYGON ((-100.098188735462756 44.966701411517263,-100.083332738651549
44.966617726539234,-100.083331471183172
44.96649894786075,-100.087000792125792
44.966571834777092,-100.085369560328502
44.965557716817564,-100.0851654979203
44.964606587551181,-100.084887922346397
44.964480610164905,-100.085194649692895
44.964606587551181,-100.085383502480624
44.965557716817564,-100.08730751947229
44.966344175643322,-100.087292309851804
44.966333377581641,-100.089114929373565
44.966364871928207,-100.089114929373565
44.966364871928207,-100.087263158079196
44.966344175643322,-100.087263158079196
44.966551138492207,-100.094440831480952
44.966581733000297,-100.094463645911674
44.966602429285189,-100.096729879364318
44.966552038330676,-100.096722274554082
44.966571834777092,-100.096757763668549
44.966552038330676,-100.096780578099285
44.966551138492207,-100.096783113036025
44.966537640915099,-100.097290100385607
44.966250592442087,-100.097756528747226
44.966033731369997,-100.097944114066578
44.965689993073156,-100.097771738367712
44.966033731369997,-100.096794520251393
44.966561036715412,-100.098195072804614
44.966561036715412,-100.098188735462756 44.966701411517263))

 

OGRFeature(polygon):1

  SHAPEAREA (Real) =       0.08

  RATE (Real) =     170.00

  POLYGON ((-100.096823672023987 44.966305482588965,-100.096868033417081
44.966054427654882,-100.097086037977405
44.965578413102456,-100.097173493295202
44.965133892896596,-100.097257146207895
44.964906233762825,-100.097260948613012
44.964906233762825,-100.097101247597891
44.965578413102456,-100.096823672023987 44.966305482588965))

 

OGRFeature(polygon):2

  SHAPEAREA (Real) =       0.11

  RATE (Real) =     170.00

  POLYGON ((-100.094140441476313 44.964948526171071,-100.09396806577746
44.965268868667607,-100.09396806577746
44.965713388873468,-100.093952856156974
44.965971642515335,-100.094186070337784
44.966250592442087,-100.09419367514802
44.966259590826823,-100.093923704384366
44.965982440577015,-100.093909762232258
44.965268868667607,-100.094140441476313 44.964948526171071))

...

 

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070301/c22a5d54/attachment.html
From mateusz at loskot.net  Thu Mar  1 23:06:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: about ogrinfo
In-Reply-To: <0JE9000D4CFYWO00@mailmx1.und.nodak.edu>
References: <0JE9000D4CFYWO00@mailmx1.und.nodak.edu>
Message-ID: <45E7A2B1.8000109@loskot.net>

Lijian Shi wrote:
> The result is the below. But when I read the code of ogrinfo, I did not find
> the code used to print the information after "RATE: Real (10.2)"(see below).
> Dose anyone know which part of the code to do that job?

After line 379:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrinfo.cpp

and next, in function defined in 2334:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrfeature.cpp

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Fri Mar  2 00:04:00 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] about ogrinfo
In-Reply-To: <0JE9000D4CFYWO00@mailmx1.und.nodak.edu>
References: <0JE9000D4CFYWO00@mailmx1.und.nodak.edu>
Message-ID: <45E7B040.3050705@pobox.com>

Lijian Shi wrote:
> Hi,
> 
>  
> 
> I am a new guy of OGR. Today I use the followed command to browse the 
> information of a shp file:
> 
> ogrinfo ?al polygon.shp
> 
> The result is the below. But when I read the code of ogrinfo, I did not 
> find the code used to print the information after ?RATE: Real 
> (10.2)?(see below). Dose anyone know which part of the code to do that job?

Lijian,

The geometries are printed by calling dumpReadable() on the OGRGeometry
object (in OGRFeature::DumpReadable()).

The dumpReadable() method just converts the geometry to WKT (well known
text) format and prints that.

Each geometry class has it's own exportToWkt() method.  In this case
you are seeing the output of OGRPolygon::exportToWkt() which you can
find in gdal/ogr/ogrpolygon.cpp.

It can be a little tricky to trace these things through the code.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From stephane.colzy at magellium.fr  Fri Mar  2 06:47:04 2007
From: stephane.colzy at magellium.fr (=?iso-8859-1?Q?St=E9phane_COLZY?=)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Import Gdal Error in Python 2.4
In-Reply-To: <cd2d0ceb0703010953v55f275f0y71417526815d0264@mail.gmail.com>
References: <cd2d0ceb0703010953v55f275f0y71417526815d0264@mail.gmail.com>
Message-ID: <000001c75cc0$7fd10730$8001a8c0@PC128>

Hello,

 

I just ran into the same problem a few days ago.

Python is just looking for a binary library called ?_gdal? that comes along
with the python wrappers (in the gdal/pymod dir)

 

Stephane

 

  _____  

De : gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] De la part de Nagendra Singh
Envoy? : jeudi 1 mars 2007 18:53
? : gdal-dev@lists.maptools.org
Objet : [Gdal-dev] Import Gdal Error in Python 2.4

 

Hi All,

I am running python on Cygwin and I have also installed gdal 1.4.0 (build
from source). When I run the command import gdal, Python gives me an error.
Any suggestions? I have double checked all the paths and everything seems
ok.

Python 2.4.3 (#1, May 18 2006, 07:40:45) 
[GCC 3.3.3 (cygwin special)] on cygwin
Type "help", "copyright", "credits" or "license" for more information.
>>> import gdal
Traceback (most recent call last): 
  File "<stdin>", line 1, in ?
  File "/usr/lib/python2.4/site-packages/gdal.py", line 191, in ?
    import _gdal
ImportError: No module named _gdal

thanks in advance. 

Nagendra 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/796f249e/attachment.html
From singh01 at gmail.com  Fri Mar  2 10:13:38 2007
From: singh01 at gmail.com (Nagendra Singh)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Import Gdal Error in Python 2.4
In-Reply-To: <cd2d0ceb0703010953v55f275f0y71417526815d0264@mail.gmail.com>
References: <cd2d0ceb0703010953v55f275f0y71417526815d0264@mail.gmail.com>
Message-ID: <cd2d0ceb0703020713g520a855m99f66a5392cf7dd1@mail.gmail.com>

I tried adding the gdal-1.4.0/Pymod path but still it did not work. How did
you get it working?

Nagendra

On 3/1/07, Nagendra Singh <singh01@gmail.com> wrote:
>
> Hi All,
>
> I am running python on Cygwin and I have also installed gdal 1.4.0 (build
> from source). When I run the command import gdal, Python gives me an error.
> Any suggestions? I have double checked all the paths and everything seems
> ok.
>
> Python 2.4.3 (#1, May 18 2006, 07:40:45)
> [GCC 3.3.3 (cygwin special)] on cygwin
> Type "help", "copyright", "credits" or "license" for more information.
> >>> import gdal
> Traceback (most recent call last):
>   File "<stdin>", line 1, in ?
>   File "/usr/lib/python2.4/site-packages/gdal.py", line 191, in ?
>     import _gdal
> ImportError: No module named _gdal
>
> thanks in advance.
>
> Nagendra
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/e22f8390/attachment.html
From mateusz at loskot.net  Fri Mar  2 14:43:38 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: Import Gdal Error in Python 2.4
In-Reply-To: <cd2d0ceb0703020713g520a855m99f66a5392cf7dd1@mail.gmail.com>
References: <cd2d0ceb0703010953v55f275f0y71417526815d0264@mail.gmail.com>
	<cd2d0ceb0703020713g520a855m99f66a5392cf7dd1@mail.gmail.com>
Message-ID: <45E87E6A.7030802@loskot.net>

Nagendra Singh wrote:
> I tried adding the gdal-1.4.0/Pymod path but still it did not work. How did
> you get it working?

What path do you have in mind?
You need to add this location to PYTHONPATH but not to PATH.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Fri Mar  2 14:45:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:40 2007
Subject: [Gdal-dev] Re: [FWTools] Out of Memory error CPLCalloc()
In-Reply-To: <DEEHJBDCBOMHFDHIBBCCEEJJDEAA.tkirstine@jdbarnes.com>
References: <DEEHJBDCBOMHFDHIBBCCEEJJDEAA.tkirstine@jdbarnes.com>
Message-ID: <45E87EF2.1090908@loskot.net>

Travis Kirstine wrote:
> I've been having problems with reading of .dem and .flt raster with FWTools
> 1.2 with both linux and windows (see below).  To see if the problem was at
> my end I unistalled FWTools and reinstalled a older version that was working
> before and things seemed to work fine  (FWTools 1.0.04a).

Travis,

May be Frank will be able to response in details, but I think we would
need to get the data set that raises the error while you're
processing it. Would it be possible?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From richard.matsunaga at waypointinfo.com  Fri Mar  2 15:13:07 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
Message-ID: <000501c75d07$332d75c0$b8012b0a@Richard>

Hi all,
 
I've just started using the SWIG-generated C# wrapper and can't get it to
work. The build seems to run fine, as do the tests, but when actually trying
to use the resulting library, I get the following:
 
System.TypeInitializationException : The type initializer for
'GDAL.gdalconst' threw an exception.
  ----> System.TypeInitializationException : The type initializer for
'GDAL.gdalconstPINVOKE' threw an exception.
  ----> System.TypeInitializationException : The type initializer for
'SWIGExceptionHelper' threw an exception.
  ----> System.DllNotFoundException : Unable to load DLL
'gdal_gdalconst_wrap': The specified module could not be found. (Exception
from HRESULT: 0x8007007E)
 
I get the same error (without the extended info) when I try to run the
GDALColorTable.exe that gets created with the build.
 
Is there some config that I must have missed? I think there is a need for a
single wiki page for documenting the setup for using the C# wrappers along
with common pitfalls.
 
Thanks,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/defbe4bc/attachment.html
From warmerdam at pobox.com  Fri Mar  2 15:56:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] SVN Update
Message-ID: <45E88F77.5030300@pobox.com>

Folks,

This evening and this weekend there will be some updates applied to the
GDAL Subversion server, so it will be unavailable during much of this
period.

Another email will be sent when the work is complete.  It should remain
available for at least another seven hours or so though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From richard.matsunaga at waypointinfo.com  Fri Mar  2 16:33:17 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
Message-ID: <001b01c75d12$650d8d90$b8012b0a@Richard>

I've just started using the C# bindings and have some questions.
 
1. Is the casing used in the bindings a by-product of SWIG, or can this be
changed to follow the usual conventions? e.g. the 'gdal' class, the 'GDAL'
namespace, the use of underscores
 
2. Is it possible to make enums out of the constants (since the values are
dynamically generated, even separate classes would be better), so they have
some useful context? It makes it much harder for non GDAL/OGR experts to
find the correct values.
 
3. Might be worth running the assemblies through FxCop to find egregious
violations of standards.
 
Cheers,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/2e3c5c2a/attachment.html
From mateusz at loskot.net  Fri Mar  2 16:43:34 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <000501c75d07$332d75c0$b8012b0a@Richard>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
Message-ID: <45E89A86.5040308@loskot.net>

Richard Matsunaga wrote:
> [...]
> I get the same error (without the extended info) when I try to run the
> GDALColorTable.exe that gets created with the build.

Richard,

Do you run it on Linux or Windows?

> Is there some config that I must have missed?

I'll try to test it on my workstations today.

> I think there is a need for a single wiki page for documenting the setup
> for using the C# wrappers along with common pitfalls.

Good point.
I'm sure we will set up one on the Trac.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Fri Mar  2 16:50:17 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
In-Reply-To: <001b01c75d12$650d8d90$b8012b0a@Richard>
References: <001b01c75d12$650d8d90$b8012b0a@Richard>
Message-ID: <45E89C19.6080808@perkins.net>

Richard Matsunaga wrote:
> I've just started using the C# bindings and have some questions.
>  
> 1. Is the casing used in the bindings a by-product of SWIG, or can 
> this be changed to follow the usual conventions? e.g. the 'gdal' 
> class, the 'GDAL' namespace, the use of underscores

This would be nice, but I suspect that there are a number of people out 
there using the existing bindings who might object to having to change 
their code. Standard usage would have called the GDAL namespace "Gdal", 
and the gdal class "Gdal" as well (I think this would work), but I can 
live with this quirk.

>  
> 2. Is it possible to make enums out of the constants (since the values 
> are dynamically generated, even separate classes would be better), so 
> they have some useful context? It makes it much harder for non 
> GDAL/OGR experts to find the correct values.

This would also be nice, but again we have the backwards compatibility 
issue. We could keep the GDAL.gdalconst class, but add the enums into 
the GDAL namespace, but then the GDAL functions that currently expect 
ints would either have to be duplicated for enum versions, or we'd break 
code.

One option would be to fake the enums with classes like:

namespace GDAL
{
    public class DataType
    {
       public static const int Byte = 0;
       public static const int Int16 = 1;
       ...
    }
}

We could add these classes in addition to GDAL.gdalconst and allow 
people to use them interchangeably.

Tamas: what do you think?

Cheers,

Sy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/f026727c/attachment.html
From szekerest at gmail.com  Fri Mar  2 16:50:33 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <000501c75d07$332d75c0$b8012b0a@Richard>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
Message-ID: <f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>

Would you make the tests with the latest SVN or the nightly build?

Apparently some of the dll-s might not be available to load for your
application. You might want use Sysinternals filemon to check which
files could not actually be loaded.
'make test' invokes the application in the same directory as the
dependent dll-s reside.

Best regards,

Tamas



2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
>
> Hi all,
>
> I've just started using the SWIG-generated C# wrapper and can't get it to
> work. The build seems to run fine, as do the tests, but when actually trying
> to use the resulting library, I get the following:
>
> System.TypeInitializationException : The type initializer
> for 'GDAL.gdalconst' threw an exception.
>   ----> System.TypeInitializationException : The type
> initializer for 'GDAL.gdalconstPINVOKE' threw an exception.
>   ----> System.TypeInitializationException : The type
> initializer for 'SWIGExceptionHelper' threw an exception.
>   ----> System.DllNotFoundException : Unable to load DLL
> 'gdal_gdalconst_wrap': The specified module could not be found. (Exception
> from HRESULT: 0x8007007E)
>
> I get the same error (without the extended info) when I try to run the
> GDALColorTable.exe that gets created with the build.
>
> Is there some config that I must have missed? I think there is a need for a
> single wiki page for documenting the setup for using the C# wrappers along
> with common pitfalls.
>
> Thanks,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From richard.matsunaga at waypointinfo.com  Fri Mar  2 16:58:15 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <45E89A86.5040308@loskot.net>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
	<45E89A86.5040308@loskot.net>
Message-ID: <002901c75d15$e2597b80$b8012b0a@Richard>

Mateusz,

I am running on Windows. I grabbed the latest release version of GDAL, so
will try with the nightly build to see if anything different happens.

Cheers,
Richard

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: March 2, 2007 4:44 PM
To: gdal
Subject: Re: [Gdal-dev] problem with C# SWIG wrapper

Richard Matsunaga wrote:
> [...]
> I get the same error (without the extended info) when I try to run the 
> GDALColorTable.exe that gets created with the build.

Richard,

Do you run it on Linux or Windows?

> Is there some config that I must have missed?

I'll try to test it on my workstations today.

> I think there is a need for a single wiki page for documenting the 
> setup for using the C# wrappers along with common pitfalls.

Good point.
I'm sure we will set up one on the Trac.

Cheers
--
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From richard.matsunaga at waypointinfo.com  Fri Mar  2 17:05:50 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
In-Reply-To: <45E89C19.6080808@perkins.net>
References: <001b01c75d12$650d8d90$b8012b0a@Richard>
	<45E89C19.6080808@perkins.net>
Message-ID: <002a01c75d16$f102ba60$b8012b0a@Richard>

Given that the bindings are still in an early state of development, there is
no time like the present to make breaking changes! It amounts to minor
changes to existing code in most cases.
 
Along the same lines, the usual namespace convention is
CompanyName.Whatever. It would be much cleaner if the Gdal and Ogr
namespaces were under a common parent, such as Osgf or something
appropriate.
 
The fake enums you describe is what I had in mind and would make things
easier to manage. The only danger with using constants like that is if the
original value changes, the maintenance becomes a nightmare.
 
Richard

  _____  

From: Simon Perkins [mailto:sy@perkins.net] 
Sent: March 2, 2007 4:50 PM
To: Richard Matsunaga
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Some thoughts on C# SWIG wrapper


Richard Matsunaga wrote: 

I've just started using the C# bindings and have some questions.
 
1. Is the casing used in the bindings a by-product of SWIG, or can this be
changed to follow the usual conventions? e.g. the 'gdal' class, the 'GDAL'
namespace, the use of underscores


This would be nice, but I suspect that there are a number of people out
there using the existing bindings who might object to having to change their
code. Standard usage would have called the GDAL namespace "Gdal", and the
gdal class "Gdal" as well (I think this would work), but I can live with
this quirk.



 
2. Is it possible to make enums out of the constants (since the values are
dynamically generated, even separate classes would be better), so they have
some useful context? It makes it much harder for non GDAL/OGR experts to
find the correct values.


This would also be nice, but again we have the backwards compatibility
issue. We could keep the GDAL.gdalconst class, but add the enums into the
GDAL namespace, but then the GDAL functions that currently expect ints would
either have to be duplicated for enum versions, or we'd break code.

One option would be to fake the enums with classes like:

namespace GDAL
{
    public class DataType
    {
       public static const int Byte = 0;
       public static const int Int16 = 1;
       ...
    }
}

We could add these classes in addition to GDAL.gdalconst and allow people to
use them interchangeably.

Tamas: what do you think?

Cheers,

Sy


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/2e0081a6/attachment.html
From richard.matsunaga at waypointinfo.com  Fri Mar  2 17:31:55 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
	<f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>
Message-ID: <004301c75d1a$963929d0$b8012b0a@Richard>

 
Another oddity that I just rediscovered when building the latest nightly, is
that there are some extraneous brackets that make my build fail. Removing
them manually allows me to progress.

These can be found in Geometry.cs and Band.cs.

Richard

-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: March 2, 2007 4:51 PM
To: Richard Matsunaga
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] problem with C# SWIG wrapper

Would you make the tests with the latest SVN or the nightly build?

Apparently some of the dll-s might not be available to load for your
application. You might want use Sysinternals filemon to check which files
could not actually be loaded.
'make test' invokes the application in the same directory as the dependent
dll-s reside.

Best regards,

Tamas



2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
>
> Hi all,
>
> I've just started using the SWIG-generated C# wrapper and can't get it 
> to work. The build seems to run fine, as do the tests, but when 
> actually trying to use the resulting library, I get the following:
>
> System.TypeInitializationException : The type initializer for 
> 'GDAL.gdalconst' threw an exception.
>   ----> System.TypeInitializationException : The type initializer for 
> 'GDAL.gdalconstPINVOKE' threw an exception.
>   ----> System.TypeInitializationException : The type initializer for 
> 'SWIGExceptionHelper' threw an exception.
>   ----> System.DllNotFoundException : Unable to load DLL
> 'gdal_gdalconst_wrap': The specified module could not be found. 
> (Exception from HRESULT: 0x8007007E)
>
> I get the same error (without the extended info) when I try to run the 
> GDALColorTable.exe that gets created with the build.
>
> Is there some config that I must have missed? I think there is a need 
> for a single wiki page for documenting the setup for using the C# 
> wrappers along with common pitfalls.
>
> Thanks,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From richard.matsunaga at waypointinfo.com  Fri Mar  2 17:37:56 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
	<f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>
Message-ID: <004401c75d1b$6d717240$b8012b0a@Richard>

 
Tamas,

The reference problem is gone with the nightly snapshot version of GDAL.

For reference, I originally tried the latest GDAL release version. I noticed
that the assembly names have also changed since then, so I guess there has
been significant work since the last GDAL release.

Cheers,
Richard

-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: March 2, 2007 4:51 PM
To: Richard Matsunaga
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] problem with C# SWIG wrapper

Would you make the tests with the latest SVN or the nightly build?

Apparently some of the dll-s might not be available to load for your
application. You might want use Sysinternals filemon to check which files
could not actually be loaded.
'make test' invokes the application in the same directory as the dependent
dll-s reside.

Best regards,

Tamas



2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
>
> Hi all,
>
> I've just started using the SWIG-generated C# wrapper and can't get it 
> to work. The build seems to run fine, as do the tests, but when 
> actually trying to use the resulting library, I get the following:
>
> System.TypeInitializationException : The type initializer for 
> 'GDAL.gdalconst' threw an exception.
>   ----> System.TypeInitializationException : The type initializer for 
> 'GDAL.gdalconstPINVOKE' threw an exception.
>   ----> System.TypeInitializationException : The type initializer for 
> 'SWIGExceptionHelper' threw an exception.
>   ----> System.DllNotFoundException : Unable to load DLL
> 'gdal_gdalconst_wrap': The specified module could not be found. 
> (Exception from HRESULT: 0x8007007E)
>
> I get the same error (without the extended info) when I try to run the 
> GDALColorTable.exe that gets created with the build.
>
> Is there some config that I must have missed? I think there is a need 
> for a single wiki page for documenting the setup for using the C# 
> wrappers along with common pitfalls.
>
> Thanks,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From sy at perkins.net  Fri Mar  2 17:40:21 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
In-Reply-To: <002a01c75d16$f102ba60$b8012b0a@Richard>
References: <001b01c75d12$650d8d90$b8012b0a@Richard>
	<45E89C19.6080808@perkins.net>
	<002a01c75d16$f102ba60$b8012b0a@Richard>
Message-ID: <45E8A7D5.4080502@perkins.net>

Richard Matsunaga wrote:
> Given that the bindings are still in an early state of development, 
> there is no time like the present to make breaking changes! It amounts 
> to minor changes to existing code in most cases.

It's a reasonable bet that most people using the SWIG C# bindings are on 
this list, so let's ask them! Anyone out there object to changing the C# 
API in a majorly breaking way?


> Along the same lines, the usual namespace convention is 
> CompanyName.Whatever. It would be much cleaner if the Gdal and Ogr 
> namespaces were under a common parent, such as Osgf or something 
> appropriate.

Personally I think GDAL (or Gdal) is a sufficiently unique namespace 
that there's not much to be gained by adding extra prefixes. But I don't 
have a strong preference.
 
> The fake enums you describe is what I had in mind and would make 
> things easier to manage. The only danger with using constants like 
> that is if the original value changes, the maintenance becomes a 
> nightmare.

Wouldn't newly compiled code just pick up the new values of the 
constants from the headers? Assuming people are not using numeric 
literals in their code. In any case I see zero chance of these values 
changing...

Cheers,

Sy

>  
> Richard
>
> ------------------------------------------------------------------------
> *From:* Simon Perkins [mailto:sy@perkins.net]
> *Sent:* March 2, 2007 4:50 PM
> *To:* Richard Matsunaga
> *Cc:* gdal-dev@lists.maptools.org
> *Subject:* Re: [Gdal-dev] Some thoughts on C# SWIG wrapper
>
> Richard Matsunaga wrote:
>> I've just started using the C# bindings and have some questions.
>>  
>> 1. Is the casing used in the bindings a by-product of SWIG, or can 
>> this be changed to follow the usual conventions? e.g. the 'gdal' 
>> class, the 'GDAL' namespace, the use of underscores
>
> This would be nice, but I suspect that there are a number of people 
> out there using the existing bindings who might object to having to 
> change their code. Standard usage would have called the GDAL namespace 
> "Gdal", and the gdal class "Gdal" as well (I think this would work), 
> but I can live with this quirk.
>
>>  
>> 2. Is it possible to make enums out of the constants (since the 
>> values are dynamically generated, even separate classes would be 
>> better), so they have some useful context? It makes it much harder 
>> for non GDAL/OGR experts to find the correct values.
>
> This would also be nice, but again we have the backwards compatibility 
> issue. We could keep the GDAL.gdalconst class, but add the enums into 
> the GDAL namespace, but then the GDAL functions that currently expect 
> ints would either have to be duplicated for enum versions, or we'd 
> break code.
>
> One option would be to fake the enums with classes like:
>
> namespace GDAL
> {
>     public class DataType
>     {
>        public static const int Byte = 0;
>        public static const int Int16 = 1;
>        ...
>     }
> }
>
> We could add these classes in addition to GDAL.gdalconst and allow 
> people to use them interchangeably.
>
> Tamas: what do you think?
>
> Cheers,
>
> Sy
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/1863106b/attachment.html
From sy at perkins.net  Fri Mar  2 17:55:52 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
In-Reply-To: <45E8A7D5.4080502@perkins.net>
References: <001b01c75d12$650d8d90$b8012b0a@Richard>	<45E89C19.6080808@perkins.net>	<002a01c75d16$f102ba60$b8012b0a@Richard>
	<45E8A7D5.4080502@perkins.net>
Message-ID: <45E8AB78.4060100@perkins.net>

Simon Perkins wrote:
> Richard Matsunaga wrote:
>> Given that the bindings are still in an early state of development, 
>> there is no time like the present to make breaking changes! It 
>> amounts to minor changes to existing code in most cases.
>
> It's a reasonable bet that most people using the SWIG C# bindings are 
> on this list, so let's ask them! Anyone out there object to changing 
> the C# API in a majorly breaking way?

I put that poorly, not to say ingrammatically...

By "majorly breaking", I mean that all code using the C# bindings would 
need to be changed, but the changes would be very simple name substitutions.

Sy

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070302/74054421/attachment.html
From szekerest at gmail.com  Fri Mar  2 18:16:05 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
In-Reply-To: <001b01c75d12$650d8d90$b8012b0a@Richard>
References: <001b01c75d12$650d8d90$b8012b0a@Richard>
Message-ID: <f3b73b7d0703021516t5079349ej47a61cb7825e32b5@mail.gmail.com>

2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:

>
> 1. Is the casing used in the bindings a by-product of SWIG, or can this be
> changed to follow the usual conventions? e.g. the 'gdal' class, the 'GDAL'
> namespace, the use of underscores
>

Richard,

Renaming the namespaces would not be a problem, it's controlled by the
makefile.vc as a SWIG commandline option. Altering the module name is
also possible. It would bring in some divergence from the other
bindings but this kind of renaming has already been done by PERL for
example. In gdal.i we already have

#ifdef PERL_CPAN_NAMESPACE
%module "Geo::GDAL"
#else
%module gdal
#endif

However altering the names derived from the gdal core (like function
or parameter names) would not easily be supportable.

At this point I cannot see a real benefit altering the names from the
point of view of the proper operation of the interface. However I have
no objection changing the namespace and module names if most of the
folks cannot really tolerate as it stands. I consider adding the same
name for the namespace and the module would be confusing. Any ideas?


> 2. Is it possible to make enums out of the constants (since the values are
> dynamically generated, even separate classes would be better), so they have
> some useful context? It makes it much harder for non GDAL/OGR experts to
> find the correct values.
>

No problem about wrapping the various enums for the C# API. Following
the current implementations some kind of C# specific additions should
be done and the backward compatibility cannot be retained. I consider
the object members using these types should also be altered to the
corresponding C# enum type, like 'public int DataType'  would be
changed to 'public GDALDataType DataType' for the Band class for
example.
I will make an attempt to do something usable this weekend or so.

> 3. Might be worth running the assemblies through FxCop to find egregious
> violations of standards.
>

Indeed. But many of the complaints cannot be handled easily.


Best regards,

Tamas

From szekerest at gmail.com  Fri Mar  2 18:21:30 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <004401c75d1b$6d717240$b8012b0a@Richard>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
	<f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>
	<004401c75d1b$6d717240$b8012b0a@Richard>
Message-ID: <f3b73b7d0703021521n2a95e49fua80ff3f68ea1004c@mail.gmail.com>

The primary objection of those changes were solely to harmonize the
interfaces created by the Windows and the Linux/OSX builds.

Best regards,

Tamas


2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
> Tamas,
>
> The reference problem is gone with the nightly snapshot version of GDAL.
>
> For reference, I originally tried the latest GDAL release version. I noticed
> that the assembly names have also changed since then, so I guess there has
> been significant work since the last GDAL release.
>
> Cheers,
> Richard
>
> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: March 2, 2007 4:51 PM
> To: Richard Matsunaga
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] problem with C# SWIG wrapper
>
> Would you make the tests with the latest SVN or the nightly build?
>
> Apparently some of the dll-s might not be available to load for your
> application. You might want use Sysinternals filemon to check which files
> could not actually be loaded.
> 'make test' invokes the application in the same directory as the dependent
> dll-s reside.
>
> Best regards,
>
> Tamas
>
>
>
> 2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
> >
> >
> >
> > Hi all,
> >
> > I've just started using the SWIG-generated C# wrapper and can't get it
> > to work. The build seems to run fine, as do the tests, but when
> > actually trying to use the resulting library, I get the following:
> >
> > System.TypeInitializationException : The type initializer for
> > 'GDAL.gdalconst' threw an exception.
> >   ----> System.TypeInitializationException : The type initializer for
> > 'GDAL.gdalconstPINVOKE' threw an exception.
> >   ----> System.TypeInitializationException : The type initializer for
> > 'SWIGExceptionHelper' threw an exception.
> >   ----> System.DllNotFoundException : Unable to load DLL
> > 'gdal_gdalconst_wrap': The specified module could not be found.
> > (Exception from HRESULT: 0x8007007E)
> >
> > I get the same error (without the extended info) when I try to run the
> > GDALColorTable.exe that gets created with the build.
> >
> > Is there some config that I must have missed? I think there is a need
> > for a single wiki page for documenting the setup for using the C#
> > wrappers along with common pitfalls.
> >
> > Thanks,
> > Richard
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
>

From szekerest at gmail.com  Fri Mar  2 18:26:12 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <004301c75d1a$963929d0$b8012b0a@Richard>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
	<f3b73b7d0703021350r4978ba84q27778a658a3e4206@mail.gmail.com>
	<004301c75d1a$963929d0$b8012b0a@Richard>
Message-ID: <f3b73b7d0703021526y5a8ead17p86b154988924c87c@mail.gmail.com>

Richard,

Which version of SWIG are you using? Some of the older versions (like
before 1.3.27) do not support %typemap(cscode, noblock="1").

I suggest to use 1.3.29 or later.

Best regards,

Tamas


2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
> Another oddity that I just rediscovered when building the latest nightly, is
> that there are some extraneous brackets that make my build fail. Removing
> them manually allows me to progress.
>
> These can be found in Geometry.cs and Band.cs.
>
> Richard
>
> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: March 2, 2007 4:51 PM
> To: Richard Matsunaga
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] problem with C# SWIG wrapper
>
> Would you make the tests with the latest SVN or the nightly build?
>
> Apparently some of the dll-s might not be available to load for your
> application. You might want use Sysinternals filemon to check which files
> could not actually be loaded.
> 'make test' invokes the application in the same directory as the dependent
> dll-s reside.
>
> Best regards,
>
> Tamas
>
>
>
> 2007/3/2, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
> >
> >
> >
> > Hi all,
> >
> > I've just started using the SWIG-generated C# wrapper and can't get it
> > to work. The build seems to run fine, as do the tests, but when
> > actually trying to use the resulting library, I get the following:
> >
> > System.TypeInitializationException : The type initializer for
> > 'GDAL.gdalconst' threw an exception.
> >   ----> System.TypeInitializationException : The type initializer for
> > 'GDAL.gdalconstPINVOKE' threw an exception.
> >   ----> System.TypeInitializationException : The type initializer for
> > 'SWIGExceptionHelper' threw an exception.
> >   ----> System.DllNotFoundException : Unable to load DLL
> > 'gdal_gdalconst_wrap': The specified module could not be found.
> > (Exception from HRESULT: 0x8007007E)
> >
> > I get the same error (without the extended info) when I try to run the
> > GDALColorTable.exe that gets created with the build.
> >
> > Is there some config that I must have missed? I think there is a need
> > for a single wiki page for documenting the setup for using the C#
> > wrappers along with common pitfalls.
> >
> > Thanks,
> > Richard
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> >
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From sy at perkins.net  Fri Mar  2 18:47:55 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Some thoughts on C# SWIG wrapper
In-Reply-To: <f3b73b7d0703021516t5079349ej47a61cb7825e32b5@mail.gmail.com>
References: <001b01c75d12$650d8d90$b8012b0a@Richard>
	<f3b73b7d0703021516t5079349ej47a61cb7825e32b5@mail.gmail.com>
Message-ID: <45E8B7AB.10700@perkins.net>

Tamas Szekeres wrote:
> At this point I cannot see a real benefit altering the names from the
> point of view of the proper operation of the interface. However I have
> no objection changing the namespace and module names if most of the
> folks cannot really tolerate as it stands. I consider adding the same
> name for the namespace and the module would be confusing. Any ideas?

I don't have any real objections to changing things, and if other people 
don't mind changing their code, then now is probably the time to do it. 
So maybe we should go the whole way and put everything in the Osgf.Gdal 
namespace, and implement the enums as proper enums. Note that the 
standard .NET way of rendering acronyms in Studly Caps is to only 
capitalize the first letter.

I don't personally object to keeping the static methods in a Gdal class 
within that namespace either - there's precedent for it. But if we don't 
want that, how about calling the class Util, or Core, or Misc or 
something, so you'd write:

using Osgf;

Gdal.Dataset dataset = Gdal.Util.Open("foo.tiff");

Any of those names is fine with me. Let's keep it short though!

Sy


>
>
>> 2. Is it possible to make enums out of the constants (since the 
>> values are
>> dynamically generated, even separate classes would be better), so 
>> they have
>> some useful context? It makes it much harder for non GDAL/OGR experts to
>> find the correct values.
>>
>
> No problem about wrapping the various enums for the C# API. Following
> the current implementations some kind of C# specific additions should
> be done and the backward compatibility cannot be retained. I consider
> the object members using these types should also be altered to the
> corresponding C# enum type, like 'public int DataType'  would be
> changed to 'public GDALDataType DataType' for the Band class for
> example.
> I will make an attempt to do something usable this weekend or so.
>
>> 3. Might be worth running the assemblies through FxCop to find egregious
>> violations of standards.
>>
>
> Indeed. But many of the complaints cannot be handled easily.
>
>
> Best regards,
>
> Tamas
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From gok at aerometric-ak.com  Fri Mar  2 23:35:22 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] what is supplement to CreateLayer command?
Message-ID: <3054411AF4728548AD6D7137190D56B302B5799A@admin1.aeromap.com>

Hello, all.

I'm creating output data using OGRDataSource::CreateLayer(fileName, ...)
and need to drop "empty" data set (no features in shp for example).
What is a supplement to this creation command? Is there some command
to drop file in OGR/GDAL style?

Thanks.
Gennady


From warmerdam at pobox.com  Sat Mar  3 00:55:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] what is supplement to CreateLayer command?
In-Reply-To: <3054411AF4728548AD6D7137190D56B302B5799A@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B302B5799A@admin1.aeromap.com>
Message-ID: <45E90DC2.6000000@pobox.com>

Gennady Khokhorin wrote:
> Hello, all.
> 
> I'm creating output data using OGRDataSource::CreateLayer(fileName, ...)
> and need to drop "empty" data set (no features in shp for example).
> What is a supplement to this creation command? Is there some command
> to drop file in OGR/GDAL style?

Gennady,

There is a DeleteLayer() method on the OGRDataSource class, but it is
only implemented for a small number of driver, and I don't think the
shapefile driver is one of those.   Luckily shapefiles are pretty
easy to do yourself, so you can always delete them yourself using
unlink() after closing the datasource.

If you would like DeleteLayer() implemented for the shapefile please
file an enhancement request.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Sat Mar  3 06:25:46 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <002901c75d15$e2597b80$b8012b0a@Richard>
References: <000501c75d07$332d75c0$b8012b0a@Richard>	<45E89A86.5040308@loskot.net>
	<002901c75d15$e2597b80$b8012b0a@Richard>
Message-ID: <45E95B3A.2030007@loskot.net>

Richard Matsunaga wrote:
> Mateusz,
> 
> I am running on Windows. I grabbed the latest release version of GDAL, so
> will try with the nightly build to see if anything different happens.

Richard,

I just rebuild SVN version of GDAL with C# bindings and it seems
there is a bug indeed:

http://mateusz.loskot.net/tmp/gdal-csharp-ex.png

I use latest version of SWIG, Visual C++/C# 2005.

Tamas,

Do you have any idea what's going wrong here?
As I see, your builders work with latest version:

http://buildbot.osgeo.org:8500/
http://buildbot.osgeo.org:8500/szekerest-vc71-full/builds/165/step-csharp-test/0

Here Visual C++ 7.1 but not Visual C++ 8.0, although I would not
suppose this is the problem.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar  3 06:36:23 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem with C# SWIG wrapper
In-Reply-To: <000501c75d07$332d75c0$b8012b0a@Richard>
References: <000501c75d07$332d75c0$b8012b0a@Richard>
Message-ID: <45E95DB7.7030108@loskot.net>

Richard Matsunaga wrote:
> Hi all,
> 
> I've just started using the SWIG-generated C# wrapper and can't get
> it to work. The build seems to run fine, as do the tests, but when
> actually trying to use the resulting library, I get the following:
> 
> System.TypeInitializationException : The type initializer for 
> 'GDAL.gdalconst' threw an exception. ---->
> System.TypeInitializationException : The type initializer for 
> 'GDAL.gdalconstPINVOKE' threw an exception. ---->
> System.TypeInitializationException : The type initializer for 
> 'SWIGExceptionHelper' threw an exception. ---->
> System.DllNotFoundException : Unable to load DLL 
> 'gdal_gdalconst_wrap': The specified module could not be found.
> (Exception from HRESULT: 0x8007007E)
> 
> I get the same error (without the extended info) when I try to run
> the GDALColorTable.exe that gets created with the build.
> 
> Is there some config that I must have missed? I think there is a need
> for a single wiki page for documenting the setup for using the C#
> wrappers along with common pitfalls.

Richard,

I've managed to make GDAL with C# bindings working:

http://mateusz.loskot.net/tmp/gdal-csharp-works.png

So, I can confirm current version of GDAL from SVN and C# interfaces
does work.

In my case, the problem was that some of DLL dependencies were not in
PATH while I was executing C# version of ogrinfo.exe or createdata.exe.

What Tamas already suggested, please could you check if all libraries
used by your compilation of GDAL are available in PATH?
In my case, I didn't have GEOS DLL in PATH, so please walk through
dependencies like MySQL, PostgreSQL, GEOS, etc. (if built in to your
GDAL) and see if they are reachable.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar  3 11:38:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
Message-ID: <45E9A49B.80201@loskot.net>

Hi,

I'm looking for a big set of vector data, ideally available as public
geodata. I mean big as including >= 100 000 number of features
with geometries, preferable of type of polygon or linestring.

If anyone does have such data and could share with me, I'd be very thankful!

I'm going to use it *only* for testing and benchmarking GDAL/OGR,
no other purpose (like commercial) is considered.

Thank you in advance.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From lxnyce at gmail.com  Sat Mar  3 12:00:17 2007
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9A49B.80201@loskot.net>
References: <45E9A49B.80201@loskot.net>
Message-ID: <82c245aa0703030900w3253c89ar7b2b93b8a04943de@mail.gmail.com>

300K+ Building Footprints
http://www.mass.gov/mgis/lidarbuildingfp2d.htm

-Lennox

On 3/3/07, Mateusz Loskot <mateusz@loskot.net> wrote:
> Hi,
>
> I'm looking for a big set of vector data, ideally available as public
> geodata. I mean big as including >= 100 000 number of features
> with geometries, preferable of type of polygon or linestring.
>
> If anyone does have such data and could share with me, I'd be very thankful!
>
> I'm going to use it *only* for testing and benchmarking GDAL/OGR,
> no other purpose (like commercial) is considered.
>
> Thank you in advance.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From neteler at itc.it  Sat Mar  3 12:20:46 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9A49B.80201@loskot.net>
References: <45E9A49B.80201@loskot.net>
Message-ID: <20070303172046.GB5142@bartok.itc.it>

Hi Mateusz,

just get VMAP0 or GSHHS - enough to blow up the machine :-)

Markus

PS: it's on geodata.telascience.org (you should have ssh access)

On Sat, Mar 03, 2007 at 05:38:51PM +0100, Mateusz Loskot wrote:
> Hi,
> 
> I'm looking for a big set of vector data, ideally available as public
> geodata. I mean big as including >= 100 000 number of features
> with geometries, preferable of type of polygon or linestring.
> 
> If anyone does have such data and could share with me, I'd be very thankful!
> 
> I'm going to use it *only* for testing and benchmarking GDAL/OGR,
> no other purpose (like commercial) is considered.
> 
> Thank you in advance.
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net
> 

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From tutey at o2.pl  Sat Mar  3 12:24:26 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9A49B.80201@loskot.net>
References: <45E9A49B.80201@loskot.net>
Message-ID: <45E9AF4A.9040301@o2.pl>

Mateusz Loskot wrote:
> Hi,
> 
> I'm looking for a big set of vector data, ideally available as public
> geodata. I mean big as including >= 100 000 number of features
> with geometries, preferable of type of polygon or linestring.
> 
> If anyone does have such data and could share with me, I'd be very thankful!

Andreas Fabian has convereted the public domain VMAP0 into sheapfile 2
years ago:
http://frederic.cs.dal.ca/pub/STDW/VMAP0/.

In the Europe - North Asia dataset there are few line string datasets
bigger than 100000 features: WATRCRSL.shp, CONTOURL.shp, ROADL.shp. The
biggest polygon dataset is consisted of 96833 features - INWATERA.shp.

Maybe the other parts of the world are fatter. Haven't used them.

Hope this helps.

Cheers,
Maciek

From mateusz at loskot.net  Sat Mar  3 12:31:17 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <82c245aa0703030900w3253c89ar7b2b93b8a04943de@mail.gmail.com>
References: <45E9A49B.80201@loskot.net>
	<82c245aa0703030900w3253c89ar7b2b93b8a04943de@mail.gmail.com>
Message-ID: <45E9B0E5.80008@loskot.net>

Lennox Antoine wrote:
> 300K+ Building Footprints
> http://www.mass.gov/mgis/lidarbuildingfp2d.htm

Thanks, the MassGIS datasets look promising ;-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar  3 12:34:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <20070303172046.GB5142@bartok.itc.it>
References: <45E9A49B.80201@loskot.net> <20070303172046.GB5142@bartok.itc.it>
Message-ID: <45E9B18D.4070408@loskot.net>

Markus Neteler wrote:
> Hi Mateusz,
> 
> just get VMAP0 or GSHHS - enough to blow up the machine :-)
> 
> Markus
> 
> PS: it's on geodata.telascience.org (you should have ssh access)

Markus,

I'll check this one, thanks.

I wonder how big PostGIS database will be generated from this data.
AFAIK, Martin or John was importing it. Anyway, I'll try it as well.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar  3 12:42:22 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9AF4A.9040301@o2.pl>
References: <45E9A49B.80201@loskot.net> <45E9AF4A.9040301@o2.pl>
Message-ID: <45E9B37E.90702@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
>> Hi,
>>
>> I'm looking for a big set of vector data, ideally available as public
>> geodata. I mean big as including >= 100 000 number of features
>> with geometries, preferable of type of polygon or linestring.
>>
>> If anyone does have such data and could share with me, I'd be very thankful!
> 
> Andreas Fabian has convereted the public domain VMAP0 into sheapfile 2
> years ago:
> http://frederic.cs.dal.ca/pub/STDW/VMAP0/.
> 
> In the Europe - North Asia dataset there are few line string datasets
> bigger than 100000 features: WATRCRSL.shp, CONTOURL.shp, ROADL.shp. The
> biggest polygon dataset is consisted of 96833 features - INWATERA.shp.

Cool! Yes, that's definitely a nice set.

BTW, Maciej, do we have anything like Public Geo Data for Poland?
May be we could make a list or something?

I only know about geoportal.gov.pl but data available there
are only browsable through ArcIMS viewer, no downloads.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From lxnyce at gmail.com  Sat Mar  3 13:04:36 2007
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9B37E.90702@loskot.net>
References: <45E9A49B.80201@loskot.net> <45E9AF4A.9040301@o2.pl>
	<45E9B37E.90702@loskot.net>
Message-ID: <82c245aa0703031004q2a2fc4afgcf42f9825af8a066@mail.gmail.com>

I have an even better one. ~1.25M linestrings containing all the major
roads in the US. I couldn't find the original URL, but I Googled it
and found a copy here :

http://streamer.utm.edu:8080/psmartt/USA%20Data/mjrrds/

This one has always caused problems for me...best of luck to you.

-Lennox

On 3/3/07, Mateusz Loskot <mateusz@loskot.net> wrote:
> Maciej Sieczka wrote:
> > Mateusz Loskot wrote:
> >> Hi,
> >>
> >> I'm looking for a big set of vector data, ideally available as public
> >> geodata. I mean big as including >= 100 000 number of features
> >> with geometries, preferable of type of polygon or linestring.
> >>
> >> If anyone does have such data and could share with me, I'd be very thankful!
> >
> > Andreas Fabian has convereted the public domain VMAP0 into sheapfile 2
> > years ago:
> > http://frederic.cs.dal.ca/pub/STDW/VMAP0/.
> >
> > In the Europe - North Asia dataset there are few line string datasets
> > bigger than 100000 features: WATRCRSL.shp, CONTOURL.shp, ROADL.shp. The
> > biggest polygon dataset is consisted of 96833 features - INWATERA.shp.
>
> Cool! Yes, that's definitely a nice set.
>
> BTW, Maciej, do we have anything like Public Geo Data for Poland?
> May be we could make a list or something?
>
> I only know about geoportal.gov.pl but data available there
> are only browsable through ArcIMS viewer, no downloads.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From MChapman at sanz.com  Sat Mar  3 13:17:11 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9B18D.4070408@loskot.net>
Message-ID: <ED3A48B9840E594890A2BC172D1194650AB8F3E8@mailman.san.com>

FYI,

I've imported a million rows plus into PostgreSQL before and it works
fine.

Martin Chapman
SANZ Inc.
Software Developer
http://www.earthwhere.com
W - 303.495.6326
C  - 303.898.0397

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Saturday, March 03, 2007 10:34 AM
To: gdal
Subject: Re: [Gdal-dev] Looking for huge vector dataset

Markus Neteler wrote:
> Hi Mateusz,
> 
> just get VMAP0 or GSHHS - enough to blow up the machine :-)
> 
> Markus
> 
> PS: it's on geodata.telascience.org (you should have ssh access)

Markus,

I'll check this one, thanks.

I wonder how big PostGIS database will be generated from this data.
AFAIK, Martin or John was importing it. Anyway, I'll try it as well.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From tutey at o2.pl  Sat Mar  3 14:25:05 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:41 2007
Subject: Polish free geodata [was: [Gdal-dev] Looking for huge vector dataset]
In-Reply-To: <45E9B37E.90702@loskot.net>
References: <45E9A49B.80201@loskot.net> <45E9AF4A.9040301@o2.pl>
	<45E9B37E.90702@loskot.net>
Message-ID: <45E9CB91.8060104@o2.pl>

Mateusz Loskot wrote:

> BTW, Maciej, do we have anything like Public Geo Data for Poland?
> May be we could make a list or something?

I have a link or two. New pop in from time to time. Do you know of any
WIKI site we could use? Drop me a line offlist.

> I only know about geoportal.gov.pl but data available there
> are only browsable through ArcIMS viewer, no downloads.

Yes, you can only order them in WODGiKs. And they are not cheap. Eg.
the 25m photogrametricaly derived DEM is 50 PLN/~25km2 sheet (circa 17
USD). Isn't it a robbery, that I have to pay again for the data that
were collected for the money from my taxes? Rethoric quetion, right. We
all know the answer. Just wanted to share my frustration :).

Maciek

From mateusz at loskot.net  Sat Mar  3 14:57:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: Polish free geodata [was: [Gdal-dev] Looking for huge vector
	dataset]
In-Reply-To: <45E9CB91.8060104@o2.pl>
References: <45E9A49B.80201@loskot.net> <45E9AF4A.9040301@o2.pl>
	<45E9B37E.90702@loskot.net> <45E9CB91.8060104@o2.pl>
Message-ID: <45E9D30C.80802@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
> 
>> BTW, Maciej, do we have anything like Public Geo Data for Poland?
>> May be we could make a list or something?
> 
> I have a link or two. New pop in from time to time. Do you know of any
> WIKI site we could use? Drop me a line offlist.

Perhaps the Public Geodata Repository is the right place:

http://wiki.osgeo.org/index.php/Geodata_Repository

or

http://wiki.osgeo.org/index.php/Geodata_Discovery_Working_Group#Public_Datasets_for_Possible_Mirroring_or_Distribution

but I think it's a good idea to ask someone. I'll do it.

>> I only know about geoportal.gov.pl but data available there
>> are only browsable through ArcIMS viewer, no downloads.
> 
> Yes, you can only order them in WODGiKs. And they are not cheap. Eg.
> the 25m photogrametricaly derived DEM is 50 PLN/~25km2 sheet (circa 17
> USD). Isn't it a robbery, that I have to pay again for the data that
> were collected for the money from my taxes? Rethoric quetion, right. We
> all know the answer. Just wanted to share my frustration :).

Yes, I have similar feelings.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Sat Mar  3 18:36:58 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Upcoming enhancements for the SWIG C# interface
Message-ID: <f3b73b7d0703031536m65cc3ea2q9cc76f3e4081e534@mail.gmail.com>

Folks,

I'm preparing some changes according to the recent requests with the
following features:

1. Enumerated types will be propagated to the SWIG C# interface
instead of int-s.
2. The following namespace names will be applied: OSGeo.GDAL,
OSGeo.OGR, OSGeo.OSR
according to the guidelines of:
http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpgenref/html/cpconnamespacenamingguidelines.asp

3. Pascal casing will be applied to module names (Gdal, Ogr, Osr, GdalConst)
4. The gdalconst assembly is considered as deprecated and will be
removed in some future releases. Currently, every assembly will
contain their own constants and enums.

5. Dataset ReadRaster/WriteRaster implementation will be added.

Since most of the modifications are reasonable, but backward
incompatible changes, I will wait for 2 days before submitting the
files. These changes will apply solely to the C# binding, however  the
enum related stuff will reside in common places controlled by #ifdef
(SWIGCSHARP) and can be taken over to the other languages easily if
needed.


Best regards,

Tamas

From ari.jolma at tkk.fi  Sun Mar  4 10:27:23 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45E9A49B.80201@loskot.net>
References: <45E9A49B.80201@loskot.net>
Message-ID: <45EAE55B.3030708@tkk.fi>

Mateusz Loskot kirjoitti:
> Hi,
>
> I'm looking for a big set of vector data, ideally available as public
> geodata. I mean big as including >= 100 000 number of features
> with geometries, preferable of type of polygon or linestring.
>
> If anyone does have such data and could share with me, I'd be very thankful!
>
> I'm going to use it *only* for testing and benchmarking GDAL/OGR,
> no other purpose (like commercial) is considered.
>   

What I would be interested in having in OGR is a fast on-the-fly 
overviewing. Right now it takes quite a lot of time to go through large 
datasets like this for rendering. The only optimization I have 
implemented in my visual code on top of OGR is to first check if the 
whole feature is smaller than one pixel in the current viewport and then 
avoid invoking line or polygon draw. I think there was some discussion a 
while back on implementing Douglas-Peucker, but is anybody doing that? 
Something like RaveGeo (idevio.com) would be cool.

Ari

> Thank you in advance.
>
> Cheers
>   


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From mateusz at loskot.net  Sun Mar  4 10:54:52 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45EAE55B.3030708@tkk.fi>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
Message-ID: <45EAEBCC.5000500@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot kirjoitti:
>> Hi,
>> 
>> I'm looking for a big set of vector data, ideally available as
>> public geodata. I mean big as including >= 100 000 number of
>> features with geometries, preferable of type of polygon or
>> linestring.
>> 
>> If anyone does have such data and could share with me, I'd be very 
>> thankful!
>> 
>> I'm going to use it *only* for testing and benchmarking GDAL/OGR, 
>> no other purpose (like commercial) is considered.
>> 
> 
> What I would be interested in having in OGR is a fast on-the-fly 
> overviewing. Right now it takes quite a lot of time to go through
> large datasets like this for rendering. The only optimization I have 
> implemented in my visual code on top of OGR is to first check if the 
> whole feature is smaller than one pixel in the current viewport and
> then avoid invoking line or polygon draw. I think there was some
> discussion a while back on implementing Douglas-Peucker, but is
> anybody doing that? Something like RaveGeo (idevio.com) would be
> cool.

Ari,

Personally, I'm not sure if a data access layer is the right place to do
such optimization, quite rendering-specific.
I agree it would be worth to include this kind of functionality to the
OGR geometry model, but as an option.

GEOS does offer Doublas-Peucker algorithm implementation, so may be we
could try to incorporate it into OGR similarly to other GEOS stuff,
optional.

The only potential problem I see is that transforming OGR geometry to
GEOS geometry is/might be quite expansive in most cases.

What do you think?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From lewis.milehi at gmail.com  Sun Mar  4 11:31:58 2007
From: lewis.milehi at gmail.com (keith lewis)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] ogr2ogr - delete features from a shapefile
Message-ID: <c07aa7ad0703040831v258cd0bfw81c11732388dfcb9@mail.gmail.com>

How can I delete features from a shapefile using the ogr2ogr utility? The
shapefile driver documentation indicates I should first delete the
appropriate records from the DBF file and then repack the file. Can ogr2ogr
do this or does it need to be done in code?

Keith
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070304/31dfa10e/attachment.html
From ari.jolma at tkk.fi  Sun Mar  4 12:44:11 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45EAEBCC.5000500@loskot.net>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net>
Message-ID: <45EB056B.7090105@tkk.fi>

Mateusz Loskot kirjoitti:
> Personally, I'm not sure if a data access layer is the right place to do
> such optimization, quite rendering-specific.
>   

Yes, rendering specific, but rendering, or geovisualization or mapping, 
is a (or the) major application area for geodata. Also, to be efficient, 
such optimization would probably need to be implemented near to the 
actual data access procedure.

This is the biggest headache I have in my geospatial GUI, I think. Has 
anybody seen rendering big vector data sets been satisfactorily solved 
in any desktop GIS? Often implementers show the incremental rendering so 
that users don't get bored while waiting, but it still is slow.

> I agree it would be worth to include this kind of functionality to the
> OGR geometry model, but as an option.
>   

A natural place for it would be a method, for example 
OGRLayer::SetSpatialApproximationFilter that would be similar as the 
method OGRLayer::SetSpatialFilter, i.e., it would be used in 
ResetReading, GetNextFeature loop. I haven't thought much about what 
kind of class a SpatialApproximationFilter would be, though.

Hm, this could be a very nice project for a student...

> GEOS does offer Doublas-Peucker algorithm implementation, so may be we
> could try to incorporate it into OGR similarly to other GEOS stuff,
> optional.
>
> The only potential problem I see is that transforming OGR geometry to
> GEOS geometry is/might be quite expansive in most cases.
>
> What do you think?
>   

I think, rewrite the algorithm into OGR :)

Cheers,

Ari

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Sun Mar  4 23:34:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Subversion changes
Message-ID: <45EB9DDE.2010701@pobox.com>

Folks,

Howard has made the changes to GDAL's subversion and for somewhat esoteric
reasons, the old subversion url no longer works.  So a small change should
be made in your root "gdal" directory if you want an existing tree to continue
to work.

Do:

svn info

And look for the URL line.  Something like:

URL: https://svn.osgeo.org/svn/gdal/trunk/gdal

If this line has https: then do the following in the same directory:

svn switch --relocate https://svn.osgeo.org/svn/gdal https://svn.osgeo.org/gdal

If the URL line is using http: then do this:

svn switch --relocate http://svn.osgeo.org/svn/gdal http://svn.osgeo.org/gdal

By the way, I'd strongly discourage using http: for anyone doing commits.
Please only use http: for anonymous checkouts, and use https for any
tree where you plan to make changes back to the master.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sun Mar  4 23:47:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] ogr2ogr - delete features from a shapefile
In-Reply-To: <c07aa7ad0703040831v258cd0bfw81c11732388dfcb9@mail.gmail.com>
References: <c07aa7ad0703040831v258cd0bfw81c11732388dfcb9@mail.gmail.com>
Message-ID: <45EBA0CB.6010909@pobox.com>

keith lewis wrote:
> How can I delete features from a shapefile using the ogr2ogr utility? 
> The shapefile driver documentation indicates I should first delete the 
> appropriate records from the DBF file and then repack the file. Can 
> ogr2ogr do this or does it need to be done in code?

Keith,

I don't believe that ogr2ogr or any of the commandline utilities offer
a mechanism to delete layers.  You need at least a small script to be
able to invoke the DeleteLayer() method on the OGRDataSource.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From beaudele at yahoo.fr  Mon Mar  5 06:02:41 2007
From: beaudele at yahoo.fr (Arnaud)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Linking the GDAL lib to a Visual C++ 6 project
Message-ID: <loom.20070305T115637-407@post.gmane.org>

Hello,

I imported the GDAL lib to a vc6 project. I just want to import many DEM files 
in order to be able to get the altitude of any point on the earth.
But whenever I try to include the gdal_priv.h file, I get several errors:

<<my project directory>>\gdal\include\cpl_string.h(218) : error C2220: warning 
treated as error - no object file generated
<<my project directory>>\gdal\include\cpl_string.h(218) : warning C4097: 
typedef-name 'string' used as synonym for class-name 'basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >'
<<my project directory>>\gdal\include\cpl_string.h(219) : warning C4097: 
typedef-name 'string' used as synonym for class-name 'basic_string<char,struct 
std::char_traits<char>,class std::allocator<char> >'
c:\program files\microsoft visual studio\vc98\include\memory(16) : error 
C2059: syntax error : 'string'
c:\program files\microsoft visual studio\vc98\include\memory(17) : error 
C2091: function returns function
c:\program files\microsoft visual studio\vc98\include\memory(17) : error 
C2809: 'operator new' has no formal parameters
c:\program files\microsoft visual studio\vc98\include\memory(20) : error 
C2954: template definitions cannot nest
c:\program files\microsoft visual studio\vc98\include\vector(249) : warning 
C4663: C++ language change: to explicitly specialize class template 'vector' 
use the following syntax:
        template<> class vector<bool,class std::allocator<unsigned int> > ...

In fact the warning level is set to the highest. This cannot be change.
Do you have any clue what I can do to solve this?

Thanks in advance.

Arnaud


From Peter.Rushforth at statcan.ca  Mon Mar  5 09:26:28 2007
From: Peter.Rushforth at statcan.ca (Peter.Rushforth@statcan.ca)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
Message-ID: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>

Mateuz,

You've probably got all you need at this point, but just in case you don't
Statistics Canada has published it's street network data as gml, shp and tab
files.  There are some smaller boundary polygon data sets available at no cost, but 
not as large as what you are seeking, I think.

An index to the data can be found here:

http://www12.statcan.ca/english/census06/geo/index.cfm


Cheers,

Peter Rushforth
Geography Division
Statistics Canada
Ottawa Ontario
K1A 0T6


> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Mateusz Loskot
> Sent: March 3, 2007 11:39 AM
> To: gdal
> Subject: [Gdal-dev] Looking for huge vector dataset
> 
> 
> Hi,
> 
> I'm looking for a big set of vector data, ideally available 
> as public geodata. I mean big as including >= 100 000 number 
> of features with geometries, preferable of type of polygon or 
> linestring.
> 
> If anyone does have such data and could share with me, I'd be 
> very thankful!
> 
> I'm going to use it *only* for testing and benchmarking 
> GDAL/OGR, no other purpose (like commercial) is considered.
> 
> Thank you in advance.
> 
> Cheers
> -- 
> Mateusz Loskot
> http://mateusz.loskot.net 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org 
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From RMcCulley at county24.com  Mon Mar  5 09:50:21 2007
From: RMcCulley at county24.com (Rob McCulley)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
References: <45E9A49B.80201@loskot.net>
Message-ID: <8563B9D6767C904A912272A2D56548E41009D1@vermilion.County24.local>

Hi Mateusz,

I've got a polygon shapefile of quarter sections for the province of
Alberta with 1,495,208 features.  Somewhere on a CD, I've also got a
polygon shapefile of LSD's for the province of Alberta, which is
somewhere around 5,000,000 features.  Let me know if you are interested
in either of them.

Rob McCulley
GIS Coordinator
County of Vermilion River
(780) 846-2244
www.vermilion-river.ab.ca


-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Mateusz Loskot
Sent: Saturday, March 03, 2007 9:39 AM
To: gdal
Subject: [Gdal-dev] Looking for huge vector dataset

Hi,

I'm looking for a big set of vector data, ideally available as public
geodata. I mean big as including >= 100 000 number of features
with geometries, preferable of type of polygon or linestring.

If anyone does have such data and could share with me, I'd be very
thankful!

I'm going to use it *only* for testing and benchmarking GDAL/OGR,
no other purpose (like commercial) is considered.

Thank you in advance.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net
_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From richard.matsunaga at waypointinfo.com  Mon Mar  5 14:42:07 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Exception class(es) in SWIG C# wrapper
Message-ID: <001501c75f5e$5c4c7e70$c2012b0a@Richard>

Would it be appropriate or possible to insert a GDAL-specific exception
class into the SWIG wrapper?
 
This exception would fetch the extended error information from GDAL and
automatically include this information in the exception message.
 
I did this in the old hand-rolled GDAL/OGR wrapper. Other than the many
constructors, it only needs to override the Message property.
 
 
/// <summary>
/// Gets the exception message. Includes the GDAL extended error message if
available.
/// </summary>
public override string Message
{
    get
    {
        return base.Message + "\n" + gdal.GetLastErrorMsg();
    }
}
 
 
Richard
 
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070305/089b6778/attachment.html
From Christian.Martel at drdc-rddc.gc.ca  Mon Mar  5 15:33:49 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] remove colinear points from polygon
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D103847@valcartierex01.valcartier.drdc-rddc.gc.ca>

Hi,

After merging several polygons with union, I get a big polygon with many
colinear points.
Example : with line (0 0,1 0,2 0), 1 0 is colinear with the others.
How can I remove these middle colinear points on the polygon border ?

Thanks,
Christian


From szekerest at gmail.com  Mon Mar  5 16:29:13 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Exception class(es) in SWIG C# wrapper
In-Reply-To: <001501c75f5e$5c4c7e70$c2012b0a@Richard>
References: <001501c75f5e$5c4c7e70$c2012b0a@Richard>
Message-ID: <f3b73b7d0703051329k742fc592q2f11d24d41606f60@mail.gmail.com>

Richard,

Currently the exception class you get should contain the same message
string as gdal.GetLastErrorMsg() retrieves. Is this the expected
behaviour?


Best regards,

Tamas


2007/3/5, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> Would it be appropriate or possible to insert a GDAL-specific exception
> class into the SWIG wrapper?
>
> This exception would fetch the extended error information from GDAL and
> automatically include this information in the exception message.
>
> I did this in the old hand-rolled GDAL/OGR wrapper. Other than the many
> constructors, it only needs to override the Message property.
>
>
> /// <summary>
> /// Gets the exception message. Includes the GDAL extended error message if
> available.
> /// </summary>
> public override string Message
> {
>     get
>     {
>         return base.Message + "\n" + gdal.GetLastErrorMsg();
>     }
> }
>
>
> Richard
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From richard.matsunaga at waypointinfo.com  Mon Mar  5 17:06:51 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Exception class(es) in SWIG C# wrapper
In-Reply-To: <f3b73b7d0703051329k742fc592q2f11d24d41606f60@mail.gmail.com>
References: <001501c75f5e$5c4c7e70$c2012b0a@Richard>
	<f3b73b7d0703051329k742fc592q2f11d24d41606f60@mail.gmail.com>
Message-ID: <003901c75f72$9494aaf0$c2012b0a@Richard>


If I remember correctly, many times in GDAL, a (C API) method will return
null when something could not happen, like opening a dataset.

In these cases, I would like to check for null and throw a GdalException or
OgrException, which contains the extended error message, up my call stack.

I could retrieve the error information and send that in any exception, like
an InvalidOperationException, but it's a little cleaner if we can
encapsulate the message details in new exception type.

It's something I would do in my own libraries, but it would be nice if
supported directly from the GDAL wrappers.

Cheers,
Richard

-----Original Message-----
From: Tamas Szekeres [mailto:szekerest@gmail.com] 
Sent: March 5, 2007 4:29 PM
To: Richard Matsunaga
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] Exception class(es) in SWIG C# wrapper

Richard,

Currently the exception class you get should contain the same message string
as gdal.GetLastErrorMsg() retrieves. Is this the expected behaviour?


Best regards,

Tamas


2007/3/5, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> Would it be appropriate or possible to insert a GDAL-specific 
> exception class into the SWIG wrapper?
>
> This exception would fetch the extended error information from GDAL 
> and automatically include this information in the exception message.
>
> I did this in the old hand-rolled GDAL/OGR wrapper. Other than the 
> many constructors, it only needs to override the Message property.
>
>
> /// <summary>
> /// Gets the exception message. Includes the GDAL extended error 
> message if available.
> /// </summary>
> public override string Message
> {
>     get
>     {
>         return base.Message + "\n" + gdal.GetLastErrorMsg();
>     }
> }
>
>
> Richard
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From szekerest at gmail.com  Mon Mar  5 17:28:37 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Exception class(es) in SWIG C# wrapper
In-Reply-To: <003901c75f72$9494aaf0$c2012b0a@Richard>
References: <001501c75f5e$5c4c7e70$c2012b0a@Richard>
	<f3b73b7d0703051329k742fc592q2f11d24d41606f60@mail.gmail.com>
	<003901c75f72$9494aaf0$c2012b0a@Richard>
Message-ID: <f3b73b7d0703051428n68f4f790n37f7ade596837f9a@mail.gmail.com>

2007/3/5, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
> If I remember correctly, many times in GDAL, a (C API) method will return
> null when something could not happen, like opening a dataset.
>
> In these cases, I would like to check for null and throw a GdalException or
> OgrException, which contains the extended error message, up my call stack.
>
> I could retrieve the error information and send that in any exception, like
> an InvalidOperationException, but it's a little cleaner if we can
> encapsulate the message details in new exception type.
>

Here's the typical SWIG generated error handling code that follows a
method invocation.

result = (GDALDatasetShadow *)Open((char const *)arg1,arg2);
    CPLErr eclass = CPLGetLastErrorType();
    if ( eclass == CE_Failure || eclass == CE_Fatal ) {
      {
        SWIG_CSharpException(SWIG_RuntimeError, CPLGetLastErrorMsg());
return 0;
      };
    }

SWIG_CSharpException will create a new ApplicationException that will
include the string returned by CPLGetLastErrorMsg().  The exception is
thrown when the C# function returns.
Apparently this is a similar operation you have described above. In my
understanding the main difference is that you would want to get a
different exception type for the different modules.


Best regards,

Tamas

From John.C.Cartwright at noaa.gov  Mon Mar  5 17:43:56 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem compiling 1.4.0 on mac os x 10.4
Message-ID: <45EC9D2C.1080104@noaa.gov>

Hello All,

I'm having a little trouble compiling 1.4.0 on my mac.  The 1.3.x series 
compiled just fine on the same machine.  Lots of messages like:

/usr/bin/ld: warning multiple definitions of symbol _get_crc_table
/usr/local/src/gdal-1.4.0/.libs/libgdal.dylib(single module) definition 
of _get_crc_table
/usr/lib/libz.dylib(crc32.o) definition of _get_crc_table

Any ideas?

Thanks!

-- john


From mateusz at loskot.net  Tue Mar  6 02:51:53 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Linking the GDAL lib to a Visual C++ 6 project
In-Reply-To: <loom.20070305T115637-407@post.gmane.org>
References: <loom.20070305T115637-407@post.gmane.org>
Message-ID: <45ED1D99.5090302@loskot.net>

Arnaud wrote:
> Hello,
> 
> I imported the GDAL lib to a vc6 project. I just want to import many DEM files 
> in order to be able to get the altitude of any point on the earth.
> But whenever I try to include the gdal_priv.h file, I get several errors:
> 
> <<my project directory>>\gdal\include\cpl_string.h(218) : error C2220: warning 
> treated as error - no object file generated
> <<my project directory>>\gdal\include\cpl_string.h(218) : warning C4097: 
> typedef-name 'string' used as synonym for class-name 'basic_string<char,struct 
> std::char_traits<char>,class std::allocator<char> >'
> <<my project directory>>\gdal\include\cpl_string.h(219) : warning C4097: 
> typedef-name 'string' used as synonym for class-name 'basic_string<char,struct 
> std::char_traits<char>,class std::allocator<char> >'
> c:\program files\microsoft visual studio\vc98\include\memory(16) : error 
> C2059: syntax error : 'string'
> c:\program files\microsoft visual studio\vc98\include\memory(17) : error 
> C2091: function returns function
> c:\program files\microsoft visual studio\vc98\include\memory(17) : error 
> C2809: 'operator new' has no formal parameters
> c:\program files\microsoft visual studio\vc98\include\memory(20) : error 
> C2954: template definitions cannot nest
> c:\program files\microsoft visual studio\vc98\include\vector(249) : warning 
> C4663: C++ language change: to explicitly specialize class template 'vector' 
> use the following syntax:
>         template<> class vector<bool,class std::allocator<unsigned int> > ...
> 
> In fact the warning level is set to the highest. This cannot be change.
> Do you have any clue what I can do to solve this?


Are you using GDAL in MFC-based application?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Mar  6 03:14:06 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] remove colinear points from polygon
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D103847@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D103847@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <45ED22CE.6040907@loskot.net>

Martel, Christian wrote:
> Hi,
> 
> After merging several polygons with union, I get a big polygon with
> many colinear points. Example : with line (0 0,1 0,2 0), 1 0 is
> colinear with the others. How can I remove these middle colinear
> points on the polygon border ?

The most universal method is to use use Douglas-Peucker algorithm for
polyline simplification (implemented in GEOS).
Another possible solution is to calculate and compare slopes
between adjacent points.

There is also an option based on distance formula and ordering points of
line, but this one is usually slower than these two above.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From beaudele at yahoo.fr  Tue Mar  6 03:30:43 2007
From: beaudele at yahoo.fr (Arnaud)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Linking the GDAL lib to a Visual C++ 6 project
References: <loom.20070305T115637-407@post.gmane.org>
	<45ED1D99.5090302@loskot.net>
Message-ID: <loom.20070306T092822-397@post.gmane.org>

Mateusz Loskot <mateusz <at> loskot.net> writes:

> 
> Arnaud wrote:
> > Hello,
> > 
> > I imported the GDAL lib to a vc6 project. I just want to import many DEM 
files 
> > in order to be able to get the altitude of any point on the earth.
> > But whenever I try to include the gdal_priv.h file, I get several errors:
> > 
> > <<my project directory>>\gdal\include\cpl_string.h(218) : error C2220: 
warning 
> > treated as error - no object file generated
> > <<my project directory>>\gdal\include\cpl_string.h(218) : warning C4097: 
> > typedef-name 'string' used as synonym for class-
name 'basic_string<char,struct 
> > std::char_traits<char>,class std::allocator<char> >'
> > <<my project directory>>\gdal\include\cpl_string.h(219) : warning C4097: 
> > typedef-name 'string' used as synonym for class-
name 'basic_string<char,struct 
> > std::char_traits<char>,class std::allocator<char> >'
> > c:\program files\microsoft visual studio\vc98\include\memory(16) : error 
> > C2059: syntax error : 'string'
> > c:\program files\microsoft visual studio\vc98\include\memory(17) : error 
> > C2091: function returns function
> > c:\program files\microsoft visual studio\vc98\include\memory(17) : error 
> > C2809: 'operator new' has no formal parameters
> > c:\program files\microsoft visual studio\vc98\include\memory(20) : error 
> > C2954: template definitions cannot nest
> > c:\program files\microsoft visual studio\vc98\include\vector(249) : 
warning 
> > C4663: C++ language change: to explicitly specialize class 
template 'vector' 
> > use the following syntax:
> >         template<> class vector<bool,class std::allocator<unsigned int> 
> ...
> > 
> > In fact the warning level is set to the highest. This cannot be change.
> > Do you have any clue what I can do to solve this?
> 
> Are you using GDAL in MFC-based application?
> 
> Cheers

Yes, I am.

However, I found that there is a problem when I try to include libraries from 
the STL. The trick was to include them like this:

// Include for use of stl
#pragma warning( push, 3)       // Avoid some messages
#include <string>               // STL strings
#include <iostream>             // STL io
#include <vector>
#pragma warning( pop )          // Restore warnings
using namespace std;            // Allows std namespace

And problem solved...
Thanks anyway. Cheers.




From mateusz at loskot.net  Tue Mar  6 04:16:44 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Linking the GDAL lib to a Visual C++ 6 project
In-Reply-To: <loom.20070306T092822-397@post.gmane.org>
References: <loom.20070305T115637-407@post.gmane.org>	<45ED1D99.5090302@loskot.net>
	<loom.20070306T092822-397@post.gmane.org>
Message-ID: <45ED317C.9050407@loskot.net>

Arnaud wrote:
> Mateusz Loskot <mateusz <at> loskot.net> writes:
>> Arnaud wrote:
>>> ...
>>> In fact the warning level is set to the highest. This cannot be change.
>>> Do you have any clue what I can do to solve this?
>>
>> Are you using GDAL in MFC-based application?
>>
>
> Yes, I am.
> 
> However, I found that there is a problem when I try to include libraries from 
> the STL. The trick was to include them like this:
> 
> // Include for use of stl
> #pragma warning( push, 3)       // Avoid some messages
> #include <string>               // STL strings
> #include <iostream>             // STL io
> #include <vector>
> #pragma warning( pop )          // Restore warnings
> using namespace std;            // Allows std namespace

The problem is that MFC defines 'new' as a preprocessor definition,
when building in debug mode:

#ifdef _DEBUG
#define new DEBUG_NEW
#undef THIS_FILE
static char THIS_FILE[] = __FILE__;
#endif

So, all C++/STL headers should be included *before* any MFC header.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Mar  6 04:29:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45EB056B.7090105@tkk.fi>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
Message-ID: <45ED347D.4080604@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot kirjoitti:
>> Personally, I'm not sure if a data access layer is the right place
>> to do such optimization, quite rendering-specific.
> 
> Yes, rendering specific, but rendering, or geovisualization or
> mapping, is a (or the) major application area for geodata. Also, to
> be efficient, such optimization would probably need to be implemented
> near to the actual data access procedure.

Ari,

There are many applications and situations required exact data.
So, if we would want to have rendering optimization included in OGR,
we would need to provide doubled interface:
- non-optimized, for all those who need to analyse exact data
- optimized, using various simplification methods, etc.

I'm not sure there is any room for that.

> This is the biggest headache I have in my geospatial GUI, I think.
> Has anybody seen rendering big vector data sets been satisfactorily
> solved in any desktop GIS?

It is a complex task, indeed.
I've seen two approaches and the very base idea is not directly
related to rendering, but to data management:

1. load the whole geometry data into memory, into simple structures
(arrays) - this is similar to how Manifold works

2. suck data from the disk (datasource like file/database) on every read
(draw) - this is memory efficient but limited by speed of data medium
access. This approach is used by GDAL, as well as old ArcView 3.x.

BTW, have you tried to implement simplifications out of OGR?

> Often implementers show the incremental rendering so that users don't
> get bored while waiting, but it still is slow.

Yes, that's another possible improvement, also multi-threaded rendering
if workstations have more than 1 CPU is a good idea.

>> I agree it would be worth to include this kind of functionality to
>> the OGR geometry model, but as an option.
>> 
> 
> A natural place for it would be a method, for example 
> OGRLayer::SetSpatialApproximationFilter that would be similar as the 
> method OGRLayer::SetSpatialFilter, i.e., it would be used in 
> ResetReading, GetNextFeature loop. I haven't thought much about what 
> kind of class a SpatialApproximationFilter would be, though.

Ari, I believe there is a room for such experiments,
and we have the 'spike' in GDAL repository.
Although, I can only be a tester or help in conceptual work, but I won't
be able to do any serious coding for this during coming months.

Anyway, I'm not very convinced to the idea, but I'd be happy to see it
working and get some measurements ;-)

> Hm, this could be a very nice project for a student...

Great idea.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Mar  6 04:31:46 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>
Message-ID: <45ED3502.3050505@loskot.net>

Peter.Rushforth@statcan.ca wrote:
> Mateuz,
> 
> You've probably got all you need at this point, but just in case you don't
> Statistics Canada has published it's street network data as gml, shp and tab
> files.  There are some smaller boundary polygon data sets available at no cost, but 
> not as large as what you are seeking, I think.
> 
> An index to the data can be found here:
> 
> http://www12.statcan.ca/english/census06/geo/index.cfm

Peter,

I'm downloading it.
I'm happy there is a GML format available. It will be helpful.

Thanks!
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Martin.Daly at cadcorp.com  Tue Mar  6 06:44:42 2007
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>
References: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>
Message-ID: <AA31868BC8CE1B4DB132141A6556A20A0E61E4@dev010_ex.Dev.cadcorp.net>

Peter,

> You've probably got all you need at this point, but just in 
> case you don't Statistics Canada has published it's street 
> network data as gml, shp and tab files.  There are some 
> smaller boundary polygon data sets available at no cost, but 
> not as large as what you are seeking, I think.
> 
> An index to the data can be found here:
> 
> http://www12.statcan.ca/english/census06/geo/index.cfm

I just re-checked having looked at the data when it first became
available, and there are still no GML Application Schemas in the
downloads.

Are they available?  Without these, GML parsers cannot find out how the
GML/XML is structured, e.g. which element is actually the Geometry.
That makes the data unusable except in GML parsers that have an
additional - arguably redundant - configuration file.

M


From ari.jolma at tkk.fi  Tue Mar  6 07:41:09 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45ED347D.4080604@loskot.net>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
	<45ED347D.4080604@loskot.net>
Message-ID: <45ED6165.7090507@tkk.fi>

Mateusz Loskot kirjoitti:
>> Has anybody seen rendering big vector data sets been satisfactorily
>> solved in any desktop GIS?
> 
> It is a complex task, indeed.
> I've seen two approaches and the very base idea is not directly
> related to rendering, but to data management:
> 
> 1. load the whole geometry data into memory, into simple structures
> (arrays) - this is similar to how Manifold works

This is doomed to lead into problems once you try to open a theme with 5
million polygons...

> 
> 2. suck data from the disk (datasource like file/database) on every read
> (draw) - this is memory efficient but limited by speed of data medium
> access. This approach is used by GDAL, as well as old ArcView 3.x.
> 
> BTW, have you tried to implement simplifications out of OGR?

I'm currently using this approach. The code is in libral. It in fact
gets the data from OGR and converts it into another structure before
rendering (laziness on my part, it was easier that way to implement the
polygon rendering). I have not profiled the code extensively, it could
indeed be worth while to put a simplification algorithm just on top of OGR.

> 
>> Often implementers show the incremental rendering so that users don't
>> get bored while waiting, but it still is slow.
> 
> Yes, that's another possible improvement, also multi-threaded rendering

That would be a good idea, but I'm not that familiar with
multi-threading and AFAIK OGR might not support multi-threading?

Cheers,

-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka / Geoinformation and positioning
Teknillinen Korkeakoulu / Helsinki University of Technology
tel: +358 9 451 3886 address: POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma

From Christian.Martel at drdc-rddc.gc.ca  Tue Mar  6 08:20:17 2007
From: Christian.Martel at drdc-rddc.gc.ca (Martel, Christian)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] remove colinear points from polygon
In-Reply-To: <45ED22CE.6040907@loskot.net>
References: <D8AD814B3EB3A945B7F149E41240DB6D103847@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<45ED22CE.6040907@loskot.net>
Message-ID: <D8AD814B3EB3A945B7F149E41240DB6D103848@valcartierex01.valcartier.drdc-rddc.gc.ca>

Mateusz,
I know many solutions to remove colinear point but I want to use the
available tools in OGR and get a quick and simple function. So here is
what I did in python. Don't know about performance againt another
method.

def simplifyPolygon(polygon):
    "remove colinear points from polygon boundary"
    gUnion = polygon				#geometry resulting of
Union of several polygons
    gHull = gUnion.ConvexHull()		#create a geometry without
colinear point
    gOver = gHull.Difference(gUnion)	#exceding part of the convexHull
    gFinal = gHull.Difference(gOver)	#get back the original geometry
without colinear point
    return gFinal

C,

> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net] 
> Sent: 6 mars 2007 03:14
> To: Martel, Christian
> Cc: gdal-dev@lists.maptools.org
> Subject: Re: [Gdal-dev] remove colinear points from polygon
> 
> Martel, Christian wrote:
> > Hi,
> > 
> > After merging several polygons with union, I get a big polygon with 
> > many colinear points. Example : with line (0 0,1 0,2 0), 1 0 is 
> > colinear with the others. How can I remove these middle colinear 
> > points on the polygon border ?
> 
> The most universal method is to use use Douglas-Peucker 
> algorithm for polyline simplification (implemented in GEOS).
> Another possible solution is to calculate and compare slopes 
> between adjacent points.
> 
> There is also an option based on distance formula and 
> ordering points of line, but this one is usually slower than 
> these two above.
> 
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> 


From mateusz at loskot.net  Tue Mar  6 08:48:31 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] remove colinear points from polygon
In-Reply-To: <45ED22CE.6040907@loskot.net>
References: <D8AD814B3EB3A945B7F149E41240DB6D103847@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<45ED22CE.6040907@loskot.net>
Message-ID: <45ED712F.9070503@loskot.net>

Mateusz Loskot wrote:
> Another possible solution is to calculate and compare slopes between
> adjacent points.

Hi,

I wrote a small C++ sample using the solution above:

http://mateusz.loskot.net/tmp/ogr_collinear_simplify.cpp.txt

The idea is to present "how things work" and for a real production code,
some optimization would be needed.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Mar  6 09:20:26 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] remove colinear points from polygon
In-Reply-To: <D8AD814B3EB3A945B7F149E41240DB6D103848@valcartierex01.valcartier.drdc-rddc.gc.ca>
References: <D8AD814B3EB3A945B7F149E41240DB6D103847@valcartierex01.valcartier.drdc-rddc.gc.ca>
	<45ED22CE.6040907@loskot.net>
	<D8AD814B3EB3A945B7F149E41240DB6D103848@valcartierex01.valcartier.drdc-rddc.gc.ca>
Message-ID: <45ED78AA.3010100@loskot.net>

Martel, Christian wrote:
> Mateusz, I know many solutions to remove colinear point but I want to
> use the available tools in OGR and get a quick and simple function.
> So here is what I did in python. Don't know about performance againt
> another method.

Martel,

I've not run your script but it looks OK.
About performance, everything depends on your requirements.
Observable relation here is:
- simple code - less efficient
- more complex code - efficiency tunning is possible

Although, the script combines a few quite complex algorithms
and I'm inclined to say that it will probably perform slower than
slope-comparison or DP algorithm.
The complexity of only Convex Hull computation is O(n) for simple and
sorted polygons, but - certainly depending on algorithm - it usually is
more complex O(nlogn). I'm not sure which one algorithm is used in GEOS
(OGR uses GEOS for this operation), but it's still slower than
linear only simplification.

Anyway, everything depends on how fast do you want to run it.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From richard.matsunaga at waypointinfo.com  Tue Mar  6 09:25:37 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Exception class(es) in SWIG C# wrapper
In-Reply-To: <f3b73b7d0703051428n68f4f790n37f7ade596837f9a@mail.gmail.com>
References: <001501c75f5e$5c4c7e70$c2012b0a@Richard>
	<f3b73b7d0703051329k742fc592q2f11d24d41606f60@mail.gmail.com>
	<003901c75f72$9494aaf0$c2012b0a@Richard>
	<f3b73b7d0703051428n68f4f790n37f7ade596837f9a@mail.gmail.com>
Message-ID: <000901c75ffb$50167eb0$c2012b0a@Richard>

 

> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com] 
> 
> 2007/3/5, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
> >
> > If I remember correctly, many times in GDAL, a (C API) method will 
> > return null when something could not happen, like opening a dataset.
> >
> > In these cases, I would like to check for null and throw a 
> > GdalException or OgrException, which contains the extended 
> error message, up my call stack.
> >
> > I could retrieve the error information and send that in any 
> exception, 
> > like an InvalidOperationException, but it's a little 
> cleaner if we can 
> > encapsulate the message details in new exception type.
> >
> 
> Here's the typical SWIG generated error handling code that 
> follows a method invocation.
> 
> result = (GDALDatasetShadow *)Open((char const *)arg1,arg2);
>     CPLErr eclass = CPLGetLastErrorType();
>     if ( eclass == CE_Failure || eclass == CE_Fatal ) {
>       {
>         SWIG_CSharpException(SWIG_RuntimeError, 
> CPLGetLastErrorMsg()); return 0;
>       };
>     }
> 
> SWIG_CSharpException will create a new ApplicationException 
> that will include the string returned by 
> CPLGetLastErrorMsg().  The exception is thrown when the C# 
> function returns.

That's interesting. Are you saying that any time there is an error, an
exception will be thrown? I obviously haven't done enough testing yet to
have tried a failure case.

Also worth noting is that Microsoft (and others) recommend against using
ApplicationException, and especially deriving from it. A search will find
many resources, but here is one:

http://blogs.msdn.com/kcwalina/archive/2006/06/23/644822.aspx


> Apparently this is a similar operation you have described 
> above. In my understanding the main difference is that you 
> would want to get a different exception type for the 
> different modules.

That's not really what I meant. It wouldn't really matter if there is a
single exception type for both GDAL and OGR or separate ones, although since
they are in different namespaces, the exception would need to be at the root
OSGeo or one would have to reference the other.

My main point is rather than throwing a generic exception type
(System.Exception or System.ApplicationException), having a GDAL/OGR
exception type would enable the exception handlers to intelligently process
errors from GDAL/OGR differently than all other exceptions of type
System.Exception. This is not always necessary, but very powerful if
available.

Cheers,
Richard


From beaudele at yahoo.fr  Tue Mar  6 09:35:21 2007
From: beaudele at yahoo.fr (Arnaud)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Linking the GDAL lib to a Visual C++ 6 project
References: <loom.20070305T115637-407@post.gmane.org>	<45ED1D99.5090302@loskot.net>
	<loom.20070306T092822-397@post.gmane.org>
	<45ED317C.9050407@loskot.net>
Message-ID: <loom.20070306T153404-978@post.gmane.org>

Mateusz Loskot <mateusz <at> loskot.net> writes:
> The problem is that MFC defines 'new' as a preprocessor definition,
> when building in debug mode:
> 
> #ifdef _DEBUG
> #define new DEBUG_NEW
> #undef THIS_FILE
> static char THIS_FILE[] = __FILE__;
> #endif
> 
> So, all C++/STL headers should be included *before* any MFC header.
> 
> Cheers

I forgot that part. that's what I did also to solve the compilation problem.
Thanks a lot, Mateusz.

Cheers,
Arnaud





From huajun_zhang at usgs.gov  Tue Mar  6 10:13:50 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] How to flat multiple bands image into single band image?
Message-ID: <OF944EE053.9AB0B661-ON85257296.00539714-05257296.0053AA8D@usgs.gov>

Hi folks,

I want to flat a multiple band image with geotiff format into a single 
band image, do you have any idea how to do it with GDAL or other FWTools?

Thanks

Huajun Zhang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070306/fe272357/attachment.html
From jbeverage at prologic-inc.com  Tue Mar  6 11:23:46 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] DTED Performance on Windows
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D0349F100@vader.prologic-inc.com>

Hi all,

I'm having some issues with the DTED driver, especially on Windows.  I'm
attempting to read an entire DTED 2 into memory using a single RasterIO
call, and I found that performance is horrible.  I read in a mailing
list post that setting the cache size to be about 30 MB would increase
the speed, and it does, but performance is still pretty bad on Windows.

I ran a simple test loading the DTED with a single RasterIO call on my
3.0 Gz P4 windows machine and it takes about 2 minutes to load the file
with a cache size of 30 MB.  On my 1.2 gz Mac Mini G4, it only takes
about 6 seconds to load the file with a 30 mb cache.

Does anyone have any suggestions on how to speed up performance on
Windows or have a more efficient way to load up DTED data? 

Thanks,

Jason


From lijian.shi at und.nodak.edu  Tue Mar  6 11:25:44 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] projection with ogr2ogr
Message-ID: <0JEH004SKPMW0730@mailmx1.und.nodak.edu>

Hi,

 

I have a shp file of point with longitude, latitude and other attribution.
And I have a geotiff file with the followed information:

 

Driver: GTiff/GeoTIFF

Size is 256, 256

Coordinate System is:

PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",

    GEOGCS["WGS 84",

        DATUM["WGS_1984",

            SPHEROID["WGS 84",6378137,298.2572235629972,

                AUTHORITY["EPSG","7030"]],

            AUTHORITY["EPSG","6326"]],

        PRIMEM["Greenwich",0],

        UNIT["degree",0.0174532925199433],

        AUTHORITY["EPSG","4326"]],

    PROJECTION["Lambert_Azimuthal_Equal_Area"],

    PARAMETER["latitude_of_center",45],

    PARAMETER["longitude_of_center",-100],

    PARAMETER["false_easting",0],

    PARAMETER["false_northing",0],

    UNIT["metre",1,

        AUTHORITY["EPSG","9001"]]]

 

Now I want to use ogr2ogr to project the shp file in order that the shp file
has the same geoinformation(same projection, same datum) with the geotiff
file. I use the command like: 

ogr2ogr -s_srs WGS84 -t_srs EPSG:code utm2.shp point.shp

 

Am I right? If right, how can I get the code? If wrong, how should I use the
"ogr2ogr"?

 

Thank you very much!

 

Lijian

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070306/158ffc19/attachment.html
From warmerdam at pobox.com  Tue Mar  6 11:41:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] How to flat multiple bands image into single band
	image?
In-Reply-To: <OF944EE053.9AB0B661-ON85257296.00539714-05257296.0053AA8D@usgs.gov>
References: <OF944EE053.9AB0B661-ON85257296.00539714-05257296.0053AA8D@usgs.gov>
Message-ID: <45ED99CD.9070904@pobox.com>

Huajun Zhang wrote:
> 
> Hi folks,
> 
> I want to flat a multiple band image with geotiff format into a single 
> band image, do you have any idea how to do it with GDAL or other FWTools?

Huajun,

What sort of merging do you want to do?  Do you want to average all the bands?
Or perhaps you just want to extract a single band?  You can extract single
bands with something like:

  gdal_translate -b 1 in.tif out.tif

But there is no ready mechanism to average bands into one result band.  The
easiest way to do this would be to write a python script using numeric to
do the averaging.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From huajun_zhang at usgs.gov  Tue Mar  6 11:44:30 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] How to flat multiple bands image into single band
	image?
In-Reply-To: <45ED99CD.9070904@pobox.com>
Message-ID: <OF1902A58C.9600347D-ON85257296.005BA178-05257296.005BF783@usgs.gov>

Thanks, Frank.  I want to merge all bands into one band image, something 
like Photoshop's flat layers function. Of course, another solution is to 
use open source image library to do it.

Best regards,

Huajun Zhang




Frank Warmerdam <warmerdam@pobox.com> 
03/06/2007 11:41 AM

To
Huajun Zhang <huajun_zhang@usgs.gov>
cc
gdal-dev@lists.maptools.org
Subject
Re: [Gdal-dev] How to flat multiple bands image into single band image?






Huajun Zhang wrote:
> 
> Hi folks,
> 
> I want to flat a multiple band image with geotiff format into a single 
> band image, do you have any idea how to do it with GDAL or other 
FWTools?

Huajun,

What sort of merging do you want to do?  Do you want to average all the 
bands?
Or perhaps you just want to extract a single band?  You can extract single
bands with something like:

  gdal_translate -b 1 in.tif out.tif

But there is no ready mechanism to average bands into one result band. The
easiest way to do this would be to write a python script using numeric to
do the averaging.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070306/30e8a034/attachment.html
From warmerdam at pobox.com  Tue Mar  6 11:47:50 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] DTED Performance on Windows
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D0349F100@vader.prologic-inc.com>
References: <2DBB9F887DAA394FA75D98474EA5730D0349F100@vader.prologic-inc.com>
Message-ID: <45ED9B36.2020702@pobox.com>

Jason Beverage wrote:
> Hi all,
> 
> I'm having some issues with the DTED driver, especially on Windows.  I'm
> attempting to read an entire DTED 2 into memory using a single RasterIO
> call, and I found that performance is horrible.  I read in a mailing
> list post that setting the cache size to be about 30 MB would increase
> the speed, and it does, but performance is still pretty bad on Windows.
> 
> I ran a simple test loading the DTED with a single RasterIO call on my
> 3.0 Gz P4 windows machine and it takes about 2 minutes to load the file
> with a cache size of 30 MB.  On my 1.2 gz Mac Mini G4, it only takes
> about 6 seconds to load the file with a 30 mb cache.
> 
> Does anyone have any suggestions on how to speed up performance on
> Windows or have a more efficient way to load up DTED data? 

Jason,

If you can file a bug report on this, I'll have Mateusz look into what is
happening.   Other than cache thrashing, I can't think of any reason this
should be noticably slower on windows than anywhere else.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Mar  6 11:55:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] projection with ogr2ogr
In-Reply-To: <0JEH004SKPMW0730@mailmx1.und.nodak.edu>
References: <0JEH004SKPMW0730@mailmx1.und.nodak.edu>
Message-ID: <45ED9CF6.8090608@loskot.net>

Lijian Shi wrote:
> Now I want to use ogr2ogr to project the shp file in order that the
> shp file has the same geoinformation(same projection, same datum)
> with the geotiff file. I use the command like:
> 
> ogr2ogr -s_srs WGS84 -t_srs EPSG:code utm2.shp point.shp

Lijian,

If I understand you correctly, you have georeferenced GeoTIFF and
you have a Shapefile *without* any referencing.
Now, you have read SRS details from GeoTIFF - it is WGS84 with
EPSG code 4326 - and you want to *assign* the same
one to your Shapefile.

If that's what you want to do, then the command should look as follows:

ogr2ogr -a_srs EPSG:4326 out.shp point.shp

where -a_srs means you want to *assign* SRS to output Shapefile (out.shp).


> Am I right? If right, how can I get the code?

Here is the code, in the GeoTIFF details:

AUTHORITY["EPSG","4326"]],

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From eric.doenges at gmx.net  Tue Mar  6 01:48:51 2007
From: eric.doenges at gmx.net (=?ISO-8859-1?Q?Eric_D=F6nges?=)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem compiling 1.4.0 on mac os x 10.4
In-Reply-To: <45EC9D2C.1080104@noaa.gov>
References: <45EC9D2C.1080104@noaa.gov>
Message-ID: <8C7DB339-8FD5-4360-8961-C5D127EB5FFE@gmx.net>


Am 05.03.2007 um 23:43 schrieb John Cartwright:

> Hello All,
>
> I'm having a little trouble compiling 1.4.0 on my mac.  The 1.3.x  
> series compiled just fine on the same machine.  Lots of messages like:
>
> /usr/bin/ld: warning multiple definitions of symbol _get_crc_table
> /usr/local/src/gdal-1.4.0/.libs/libgdal.dylib(single module)  
> definition of _get_crc_table
> /usr/lib/libz.dylib(crc32.o) definition of _get_crc_table
>
> Any ideas?

You are having a linker conflict between the libz internal to GDAL  
and the system's
libz. To resolve this, you need to either not link against the  
system's libz in any
files linking against libgdal, or configure gdal to not use the  
internal libz
(try configuring with --without-libz or --with-libz=external - I  
haven't tried this
myself, but one of the above should work). Since doing the former  
might be rather
difficult in practice, and MacOS includes libz by default anyway, I  
would recommend
trying the later.

With kind regards,
Eric

From matt.wilkie at gov.yk.ca  Tue Mar  6 13:23:54 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45ED6165.7090507@tkk.fi>
References: <45E9A49B.80201@loskot.net>
	<45EAE55B.3030708@tkk.fi>	<45EAEBCC.5000500@loskot.net>
	<45EB056B.7090105@tkk.fi>	<45ED347D.4080604@loskot.net>
	<45ED6165.7090507@tkk.fi>
Message-ID: <45EDB1BA.1050400@gov.yk.ca>

>> 2. suck data from the disk (datasource like file/database) on every read
>> (draw) - this is memory efficient but limited by speed of data medium
>> access. This approach is used by GDAL, as well as old ArcView 3.x.

For what it's worth, AV3 is many times faster than ArcMap when it comes 
to simply browsing data. This is true for both raster and vector.

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From woklist at kyngchaos.com  Tue Mar  6 15:44:37 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] problem compiling 1.4.0 on mac os x 10.4
In-Reply-To: <8C7DB339-8FD5-4360-8961-C5D127EB5FFE@gmx.net>
References: <45EC9D2C.1080104@noaa.gov>
	<8C7DB339-8FD5-4360-8961-C5D127EB5FFE@gmx.net>
Message-ID: <5680DFC9-E505-49E8-9F38-6B3EFC771856@kyngchaos.com>

On Mar 6, 2007, at 12:48 AM, Eric D?nges wrote:

>
> Am 05.03.2007 um 23:43 schrieb John Cartwright:
>
>> Hello All,
>>
>> I'm having a little trouble compiling 1.4.0 on my mac.  The 1.3.x  
>> series compiled just fine on the same machine.  Lots of messages  
>> like:
>>
>> /usr/bin/ld: warning multiple definitions of symbol _get_crc_table
>> /usr/local/src/gdal-1.4.0/.libs/libgdal.dylib(single module)  
>> definition of _get_crc_table
>> /usr/lib/libz.dylib(crc32.o) definition of _get_crc_table
>>
>> Any ideas?
>
> You are having a linker conflict between the libz internal to GDAL  
> and the system's
> libz. To resolve this, you need to either not link against the  
> system's libz in any
> files linking against libgdal, or configure gdal to not use the  
> internal libz
> (try configuring with --without-libz or --with-libz=external - I  
> haven't tried this
> myself, but one of the above should work). Since doing the former  
> might be rather
> difficult in practice, and MacOS includes libz by default anyway, I  
> would recommend
> trying the later.

That's odd.  I've never specified any libz options in configure, and  
it finds the system libz by default.  FWIW, I think the only thing  
that needs libz is the HDF formats with SZ compression enabled in the  
HDF libraries.


PS. have you tried using my GDAL framework?  Or do you need the unix  
library build for OSX?

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy




From szekerest at gmail.com  Tue Mar  6 16:33:32 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Exception class(es) in SWIG C# wrapper
In-Reply-To: <000901c75ffb$50167eb0$c2012b0a@Richard>
References: <001501c75f5e$5c4c7e70$c2012b0a@Richard>
	<f3b73b7d0703051329k742fc592q2f11d24d41606f60@mail.gmail.com>
	<003901c75f72$9494aaf0$c2012b0a@Richard>
	<f3b73b7d0703051428n68f4f790n37f7ade596837f9a@mail.gmail.com>
	<000901c75ffb$50167eb0$c2012b0a@Richard>
Message-ID: <f3b73b7d0703061333m62b2a417k4cbfbc6b862c1797@mail.gmail.com>

>
> That's interesting. Are you saying that any time there is an error, an
> exception will be thrown? I obviously haven't done enough testing yet to
> have tried a failure case.
>
> Also worth noting is that Microsoft (and others) recommend against using
> ApplicationException, and especially deriving from it. A search will find
> many resources, but here is one:
>
> http://blogs.msdn.com/kcwalina/archive/2006/06/23/644822.aspx
>

It seems to me that this is yet another place where Microsoft could
not give an obvious guideline that's not to be sneezed at. In the
beginnings the usage of ApplicationException was recommended to be
used for the non CLR originated errors, but in some point it have been
misused (by Microsoft) and therefore the original intents have been
deprecated.
This gives me the impression that many of the proposals should not be
taken so seriously or we should wait for at least 2 years before
utilizing such suggestions.

>
> > Apparently this is a similar operation you have described
> > above. In my understanding the main difference is that you
> > would want to get a different exception type for the
> > different modules.
>
> That's not really what I meant. It wouldn't really matter if there is a
> single exception type for both GDAL and OGR or separate ones, although since
> they are in different namespaces, the exception would need to be at the root
> OSGeo or one would have to reference the other.
>
> My main point is rather than throwing a generic exception type
> (System.Exception or System.ApplicationException), having a GDAL/OGR
> exception type would enable the exception handlers to intelligently process
> errors from GDAL/OGR differently than all other exceptions of type
> System.Exception. This is not always necessary, but very powerful if
> available.
>

The current implementation is the default behaviour how the interface
handles the exceptions. In exchange for some divergence from the other
bindings is could be customized in many ways, but at this time I
cannot see the smashing benefit to do so.

Best regards,

Tamas

From lijian.shi at und.nodak.edu  Tue Mar  6 16:36:20 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] projection with ogr2ogr
In-Reply-To: <45ED9CF6.8090608@loskot.net>
Message-ID: <0JEI004U840L0870@mailmx1.und.nodak.edu>

Mateusz,

Thank you for your response! 

Except WGS84 with epsg 4326, I also want to add the projection information:

PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",
......
PROJECTION["Lambert_Azimuthal_Equal_Area"],
PARAMETER["latitude_of_center",45],
PARAMETER["longitude_of_center",-100],
PARAMETER["false_easting",0],
PARAMETER["false_northing",0],
UNIT["metre",1,
AUTHORITY["EPSG","9001"]]]

So I tried the command: ogr2ogr -a_srs EPSG:4326 -t_srs "+proj=laea" out.shp
point.shp

And then I get the "header" of shp file as followed:
PROJCS["Lambert_Azimuthal_Equal_Area",
    GEOGCS["GCS_WGS_1984",
        DATUM["unknown",
            SPHEROID["WGS84",6378137,298.257223563]],
        PRIMEM["Greenwich",0],
        UNIT["Degree",0.017453292519943295]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["latitude_of_center",0],
    PARAMETER["longitude_of_center",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["Meter",1]]

But there are still some difference between the "header" of shp file and
geotiff file. I don't know whether my result is right. So look forward to
your suggestion.

Lijian



-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Tuesday, March 06, 2007 10:55 AM
To: Lijian Shi
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] projection with ogr2ogr

Lijian Shi wrote:
> Now I want to use ogr2ogr to project the shp file in order that the
> shp file has the same geoinformation(same projection, same datum)
> with the geotiff file. I use the command like:
> 
> ogr2ogr -s_srs WGS84 -t_srs EPSG:code utm2.shp point.shp

Lijian,

If I understand you correctly, you have georeferenced GeoTIFF and
you have a Shapefile *without* any referencing.
Now, you have read SRS details from GeoTIFF - it is WGS84 with
EPSG code 4326 - and you want to *assign* the same
one to your Shapefile.

If that's what you want to do, then the command should look as follows:

ogr2ogr -a_srs EPSG:4326 out.shp point.shp

where -a_srs means you want to *assign* SRS to output Shapefile (out.shp).


> Am I right? If right, how can I get the code?

Here is the code, in the GeoTIFF details:

AUTHORITY["EPSG","4326"]],

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From MChapman at sanz.com  Tue Mar  6 17:21:18 2007
From: MChapman at sanz.com (Chapman, Martin)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] DTED Performance on Windows
In-Reply-To: <45ED9B36.2020702@pobox.com>
Message-ID: <ED3A48B9840E594890A2BC172D1194650ACB6460@mailman.san.com>

Jason,

If you can send me the dted or tell me which one it is (I have the NGA
DTED Library) I will test it on windows for you and let you know How
fast I can load it for a comparison.

Martin Chapman
SANZ Inc.
Software Developer
http://www.earthwhere.com
W - 303.495.6326
C  - 303.898.0397

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Tuesday, March 06, 2007 9:48 AM
To: Jason Beverage
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] DTED Performance on Windows

Jason Beverage wrote:
> Hi all,
> 
> I'm having some issues with the DTED driver, especially on Windows.
I'm
> attempting to read an entire DTED 2 into memory using a single
RasterIO
> call, and I found that performance is horrible.  I read in a mailing
> list post that setting the cache size to be about 30 MB would increase
> the speed, and it does, but performance is still pretty bad on
Windows.
> 
> I ran a simple test loading the DTED with a single RasterIO call on my
> 3.0 Gz P4 windows machine and it takes about 2 minutes to load the
file
> with a cache size of 30 MB.  On my 1.2 gz Mac Mini G4, it only takes
> about 6 seconds to load the file with a 30 mb cache.
> 
> Does anyone have any suggestions on how to speed up performance on
> Windows or have a more efficient way to load up DTED data? 

Jason,

If you can file a bug report on this, I'll have Mateusz look into what
is
happening.   Other than cache thrashing, I can't think of any reason
this
should be noticably slower on windows than anywhere else.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


From jbeverage at prologic-inc.com  Tue Mar  6 18:56:43 2007
From: jbeverage at prologic-inc.com (Jason Beverage)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] DTED Performance on Windows
References: <ED3A48B9840E594890A2BC172D1194650ACB6460@mailman.san.com>
Message-ID: <2DBB9F887DAA394FA75D98474EA5730D527F1D@vader.prologic-inc.com>

Hi Martin,

The performance is basically the same for all the DTED 2 files that I've
tried.  If I convert the file to a geotiff using gdal_translate it only
takes about 2 seconds to load the file.

Thanks,

Jason


-----Original Message-----
From: Chapman, Martin [mailto:MChapman@sanz.com]
Sent: Tue 3/6/2007 5:21 PM
To: Frank Warmerdam; Jason Beverage
Cc: gdal-dev@lists.maptools.org
Subject: RE: [Gdal-dev] DTED Performance on Windows
 
Jason,

If you can send me the dted or tell me which one it is (I have the NGA
DTED Library) I will test it on windows for you and let you know How
fast I can load it for a comparison.

Martin Chapman
SANZ Inc.
Software Developer
http://www.earthwhere.com
W - 303.495.6326
C  - 303.898.0397

-----Original Message-----
From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
Warmerdam
Sent: Tuesday, March 06, 2007 9:48 AM
To: Jason Beverage
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] DTED Performance on Windows

Jason Beverage wrote:
> Hi all,
> 
> I'm having some issues with the DTED driver, especially on Windows.
I'm
> attempting to read an entire DTED 2 into memory using a single
RasterIO
> call, and I found that performance is horrible.  I read in a mailing
> list post that setting the cache size to be about 30 MB would increase
> the speed, and it does, but performance is still pretty bad on
Windows.
> 
> I ran a simple test loading the DTED with a single RasterIO call on my
> 3.0 Gz P4 windows machine and it takes about 2 minutes to load the
file
> with a cache size of 30 MB.  On my 1.2 gz Mac Mini G4, it only takes
> about 6 seconds to load the file with a 30 mb cache.
> 
> Does anyone have any suggestions on how to speed up performance on
> Windows or have a more efficient way to load up DTED data? 

Jason,

If you can file a bug report on this, I'll have Mateusz look into what
is
happening.   Other than cache thrashing, I can't think of any reason
this
should be noticably slower on windows than anywhere else.

Best regards,
-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo,
http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From mateusz at loskot.net  Wed Mar  7 02:30:02 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] projection with ogr2ogr
In-Reply-To: <0JEI004U840L0870@mailmx1.und.nodak.edu>
References: <0JEI004U840L0870@mailmx1.und.nodak.edu>
Message-ID: <45EE69FA.2050508@loskot.net>

Lijian Shi wrote:
> 
> Except WGS84 with epsg 4326, I also want to add the projection information:
> 
> PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",
> ......
> PROJECTION["Lambert_Azimuthal_Equal_Area"],
> PARAMETER["latitude_of_center",45],
> PARAMETER["longitude_of_center",-100],
> PARAMETER["false_easting",0],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
> AUTHORITY["EPSG","9001"]]]
> 
> So I tried the command: ogr2ogr -a_srs EPSG:4326 -t_srs "+proj=laea" out.shp
> point.shp
> 
> And then I get the "header" of shp file as followed:
> PROJCS["Lambert_Azimuthal_Equal_Area",
>     GEOGCS["GCS_WGS_1984",
>         DATUM["unknown",
>             SPHEROID["WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["latitude_of_center",0],
>     PARAMETER["longitude_of_center",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1]]
> 
> But there are still some difference between the "header" of shp file and
> geotiff file. I don't know whether my result is right. So look forward to
> your suggestion.

Lijian,

I see I've misunderstood you previously.
Let's summarize the problem:

1. You have a projected GeoTIFF
2. You have also a Shapefile that fits spatially the GeoTIFF,
   but without any projection assigned
3. You want to use OGR to assign the Shapefile with the same
   projection as in GeoTIFF.

Here is the procedure:

1. You can use gdalinfo to dump PROJECTION details in WKT format.
Actually, you have already done it.

2. Copy and paste the WKT string dumped from GeoTIFF into a text file,
for example mytiff.prj. Note, you don't need to format it in
a single line.

PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["latitude_of_center",45],
    PARAMETER["longitude_of_center",-100],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]

3. Use ogr2ogr to "translate" your unreferenced Shapefile with
assigning the projection from WKT you've already saved in mytiff.prj file:


ogr2ogr -a_srs mytiff.prj out.shp yourinputfile.shp

where yourinputfile.shp is the unreferenced Shapefile.

After these steps, you will get following files:
out.dbf
out.shp
out.shx
out.prj - here is the info about newly assigned projection


I hope it helps.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Mar  7 02:36:04 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <AA31868BC8CE1B4DB132141A6556A20A0E61E4@dev010_ex.Dev.cadcorp.net>
References: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>
	<AA31868BC8CE1B4DB132141A6556A20A0E61E4@dev010_ex.Dev.cadcorp.net>
Message-ID: <45EE6B64.6060107@loskot.net>

Martin Daly wrote:
> Peter,
> 
>> You've probably got all you need at this point, but just in case
>> you don't Statistics Canada has published it's street network data
>> as gml, shp and tab files.  There are some smaller boundary polygon
>> data sets available at no cost, but not as large as what you are
>> seeking, I think.
>> 
>> An index to the data can be found here:
>> 
>> http://www12.statcan.ca/english/census06/geo/index.cfm
> 
> I just re-checked having looked at the data when it first became 
> available, and there are still no GML Application Schemas in the 
> downloads.
> 
> Are they available?  Without these, GML parsers cannot find out how
> the GML/XML is structured, e.g. which element is actually the
> Geometry. That makes the data unusable except in GML parsers that
> have an additional - arguably redundant - configuration file.

Martin,

GML driver in OGR does not utilise any XML Schemas for GML:

"In contrast to most GML readers, the OGR GML reader makes no effort to
read the format XML Schema definition of the feature classes in a GML
file. Instead it attempts to automatically discover them and their
associated properties by scanning the file and looking for "known" gml
objects in the gml namespace to determine the organization. While this
approach is error prone, it has the advantage of working for GML files
even if the associated schema (.xsd) file has been lost."

http://www.gdal.org/ogr/drv_gml.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Wed Mar  7 02:49:56 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45ED6165.7090507@tkk.fi>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
	<45ED347D.4080604@loskot.net> <45ED6165.7090507@tkk.fi>
Message-ID: <45EE6EA4.4070007@loskot.net>

Ari Jolma wrote:
> Mateusz Loskot kirjoitti:
>>> Has anybody seen rendering big vector data sets been
>>> satisfactorily solved in any desktop GIS?
>> It is a complex task, indeed. I've seen two approaches and the very
>> base idea is not directly related to rendering, but to data
>> management:
>> 
>> 1. load the whole geometry data into memory, into simple structures
>>  (arrays) - this is similar to how Manifold works
> 
> This is doomed to lead into problems once you try to open a theme
> with 5 million polygons...

Yup, in many cases it is.
However, both approaches introduce some problems.
In all-in-memory approach, the obvious assumption is a user
has a *lot* of RAM space, 4-8 GB.
But in turn, it provides the fastest access to features (accessing RAM
is faster than disk or network).

So, I'd conclude that everything depends on a particular application
and design (requirements).

>> 2. suck data from the disk (datasource like file/database) on every
>> read (draw) - this is memory efficient but limited by speed of data
>> medium access. This approach is used by GDAL, as well as old
>> ArcView 3.x.
>> 
>> BTW, have you tried to implement simplifications out of OGR?
> 
> I'm currently using this approach. The code is in libral. It in fact 
> gets the data from OGR and converts it into another structure before 
> rendering (laziness on my part, it was easier that way to implement
> the polygon rendering). I have not profiled the code extensively, it
> could indeed be worth while to put a simplification algorithm just on
> top of OGR.

Hmm, first I'd try to optimize by drawing directly from OGR structures.
I suppose that will boost it significantly.

>>> Often implementers show the incremental rendering so that users
>>> don't get bored while waiting, but it still is slow.
>> Yes, that's another possible improvement, also multi-threaded
>> rendering
> 
> That would be a good idea, but I'm not that familiar with 
> multi-threading and AFAIK OGR might not support multi-threading?

Yes, though the situation perhaps is not black or white here.
Generally, GDAL/OGR is not thread-safe, but drawing is a read-only
operation and some/many of GDAL/OGR drivers might behave correctly when
accessed from multiple threads.
However, some deeper analysis of thread-safety is required to judge.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Tue Mar  6 09:10:29 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] JasPer library updated to 1.900.1 version
Message-ID: <20070306141029.GA977@ak4719.spb.edu>

Folks,

Those of you who use JasPer based JPEG2000 codec may consider updating
to latest version 1.900.1 available at

 ftp://ftp.remotesensing.org/gdal/jasper-1.900.1.uuid.tar.gz

This is modification of JasPer library required to read/write
georeferenced JPEG2000 images.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From jdgonon at gi-lemans.com  Wed Mar  7 04:45:16 2007
From: jdgonon at gi-lemans.com (Jean-Daniel Gonon)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Reading DGNv8 file from MAPSERVER with DGNDirect
Message-ID: <45EE89AC.9080202@gi-lemans.com>


Hi

I compile GDAL/OGR_1.3.2 under Visual C++ 2005 and I integrate 
DGNdirect09964 in GDAL/OGR_1.3.2.

Now, with "ogrinfo fileV8.dgn -al" command, I can read attributs of 
line, text and shape elements.

But when I replace "gdal.lib" in MAPSERVER with the new file version, 
MAPSERVER fail to open and read DGNv8 file.
MAPSERVER still open and read successful DGNv7 file.

What is the problem ?

Thanck you in advance
Jean-Daniel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070307/6e4eee9f/attachment.html
From mateusz at loskot.net  Wed Mar  7 06:04:54 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Reading DGNv8 file from MAPSERVER with DGNDirect
In-Reply-To: <45EE89AC.9080202@gi-lemans.com>
References: <45EE89AC.9080202@gi-lemans.com>
Message-ID: <45EE9C56.7000104@loskot.net>

Jean-Daniel Gonon wrote:
> 
> Hi
> 
> I compile GDAL/OGR_1.3.2 under Visual C++ 2005 and I integrate 
> DGNdirect09964 in GDAL/OGR_1.3.2.
> 
> Now, with "ogrinfo fileV8.dgn -al" command, I can read attributs of 
> line, text and shape elements.
> 
> But when I replace "gdal.lib" in MAPSERVER with the new file version,
>  MAPSERVER fail to open and read DGNv8 file. MAPSERVER still open and
> read successful DGNv7 file.
> 
> What is the problem ?

gdal.lib is a static library, but I suppose you are going to replace the
original GDAL DLL from MapServer with the new one you built on your own.

Or do you mean you use gdal.lib to rebuild MapServer?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Martin.Daly at cadcorp.com  Wed Mar  7 08:00:23 2007
From: Martin.Daly at cadcorp.com (Martin Daly)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Looking for huge vector dataset
In-Reply-To: <45EE6B64.6060107@loskot.net>
References: <AB38021D12570A4AB907F442AE54880701076381@stcem04.statcan.ca>
	<AA31868BC8CE1B4DB132141A6556A20A0E61E4@dev010_ex.Dev.cadcorp.net>
	<45EE6B64.6060107@loskot.net>
Message-ID: <AA31868BC8CE1B4DB132141A6556A20A0E61EF@dev010_ex.Dev.cadcorp.net>

> GML driver in OGR does not utilise any XML Schemas for GML:
> 
> "In contrast to most GML readers, the OGR GML reader makes no 
> effort to read the format XML Schema definition of the 
> feature classes in a GML file. Instead it attempts to 
> automatically discover them and their associated properties 
> by scanning the file and looking for "known" gml objects in 
> the gml namespace to determine the organization. While this 
> approach is error prone, it has the advantage of working for 
> GML files even if the associated schema (.xsd) file has been lost."

I was aware of that thanks, and of the limitations of that approach: as
I know Frank is too.

I was more (selfishly) concerned for those of use who have implemented
schema-aware parsers.

M


From collinsb at mitre.org  Wed Mar  7 09:01:40 2007
From: collinsb at mitre.org (Collins, Benjamin)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] DTED Performance on Windows
In-Reply-To: <2DBB9F887DAA394FA75D98474EA5730D527F1D@vader.prologic-inc.com>
Message-ID: <8D27E2CDAF11D34F97E7445BCCCDB92C0199D35B@IMCSRV1.MITRE.ORG>

All,

I'm not sure that this is the same issue, but I have seen some pretty
terrible performance generally on non-byte datasets loaded under
Windows with the NITF driver.  DTED 2 is such a file.  For me, the
gdaladdo command took 10x longer for an int16 NITF than for the same
GeoTIFF reduced to byte depth.

I can get exact numbers were it necessary,
--
Ben

>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org 
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
>Jason Beverage
>Sent: Tuesday, March 06, 2007 6:57 PM
>To: Chapman, Martin; Frank Warmerdam
>Cc: gdal-dev@lists.maptools.org
>Subject: RE: [Gdal-dev] DTED Performance on Windows
>
>Hi Martin,
>
>The performance is basically the same for all the DTED 2 files 
>that I've
>tried.  If I convert the file to a geotiff using gdal_translate it
only
>takes about 2 seconds to load the file.
>
>Thanks,
>
>Jason
>
>
>-----Original Message-----
>From: Chapman, Martin [mailto:MChapman@sanz.com]
>Sent: Tue 3/6/2007 5:21 PM
>To: Frank Warmerdam; Jason Beverage
>Cc: gdal-dev@lists.maptools.org
>Subject: RE: [Gdal-dev] DTED Performance on Windows
> 
>Jason,
>
>If you can send me the dted or tell me which one it is (I have the NGA
>DTED Library) I will test it on windows for you and let you know How
>fast I can load it for a comparison.
>
>Martin Chapman
>SANZ Inc.
>Software Developer
>http://www.earthwhere.com
>W - 303.495.6326
>C  - 303.898.0397
>
>-----Original Message-----
>From: gdal-dev-bounces@lists.maptools.org
>[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Frank
>Warmerdam
>Sent: Tuesday, March 06, 2007 9:48 AM
>To: Jason Beverage
>Cc: gdal-dev@lists.maptools.org
>Subject: Re: [Gdal-dev] DTED Performance on Windows
>
>Jason Beverage wrote:
>> Hi all,
>> 
>> I'm having some issues with the DTED driver, especially on Windows.
>I'm
>> attempting to read an entire DTED 2 into memory using a single
>RasterIO
>> call, and I found that performance is horrible.  I read in a mailing
>> list post that setting the cache size to be about 30 MB 
>would increase
>> the speed, and it does, but performance is still pretty bad on
>Windows.
>> 
>> I ran a simple test loading the DTED with a single RasterIO 
>call on my
>> 3.0 Gz P4 windows machine and it takes about 2 minutes to load the
>file
>> with a cache size of 30 MB.  On my 1.2 gz Mac Mini G4, it only takes
>> about 6 seconds to load the file with a 30 mb cache.
>> 
>> Does anyone have any suggestions on how to speed up performance on
>> Windows or have a more efficient way to load up DTED data? 
>
>Jason,
>
>If you can file a bug report on this, I'll have Mateusz look into what
>is
>happening.   Other than cache thrashing, I can't think of any reason
>this
>should be noticably slower on windows than anywhere else.
>
>Best regards,
>-- 
>---------------------------------------+-----------------------
>---------
>------
>I set the clouds in motion - turn up   | Frank Warmerdam,
>warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | President OSGeo,
>http://osgeo.org
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From bclay at ball.com  Wed Mar  7 10:36:56 2007
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] ogrinfo problem
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFB04@daytonmsg2k3.AERO.BALL.COM>

I am having trouble opening an KNL file with OGR version 1.2.2 from the
FWTool set.  I have tried both compressed and uncompressed versions an
neither one works

 

The KML driver is built in based on the error messages shown below.  Is
this a known issue?  I saw one post that said the tool was "write only"
yetsomewhere I thought I saw a different message saying it was read only
unless we had Xerces built in.

 

 

H:\SupportLibraries\FWTools1.2.2\bin>ogrinfo
H:\bclay\Download3\GoogleEarth\earthquake_public.kml

FAILURE:

Unable to open datasource
`H:\bclay\Download3\GoogleEarth\geALLFLIGHTS.kmz' with

 the following drivers.

  -> ESRI Shapefile

  -> MapInfo File

  -> UK .NTF

  -> SDTS

  -> TIGER

  -> S57

  -> DGN

  -> VRT

  -> AVCBin

  -> REC

  -> Memory

  -> CSV

  -> GML

  -> KML

  -> Interlis 1

  -> Interlis 2

  -> SQLite

  -> ODBC

  -> PGeo

  -> OGDI

  -> PostgreSQL

  -> MySQL

 

 

H:\SupportLibraries\FWTools1.2.2\bin>ogrinfo
H:\bclay\Download3\GoogleEarth\geALLFLIGHTS.kmz

FAILURE:

Unable to open datasource
`H:\bclay\Download3\GoogleEarth\geALLFLIGHTS.kmz' with

 the following drivers.

  -> ESRI Shapefile

  -> MapInfo File

  -> UK .NTF

  -> SDTS

  -> TIGER

  -> S57

  -> DGN

  -> VRT

  -> AVCBin

  -> REC

  -> Memory

  -> CSV

  -> GML

  -> KML

  -> Interlis 1

  -> Interlis 2

  -> SQLite

  -> ODBC

  -> PGeo

  -> OGDI

  -> PostgreSQL

  -> MySQL

 


This message and any enclosures are intended only for the addressee. 
Please notify the sender by email if you are not the intended recipient. If you are 
not the intended recipient, you may not use, copy, disclose, or distribute this 
message or its contents or enclosures to any other person and any such actions 
may be unlawful. Ball reserves the right to monitor and review all messages 
and enclosures sent to or from this email address."
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070307/a24afaee/attachment.html
From zhonghaiw at gmail.com  Wed Mar  7 10:39:00 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] OGR Driver with MapInfo raster seamless table
Message-ID: <2534c4120703070739o2995f971vb389854381e3f18c@mail.gmail.com>

Hi guys,

I know that the OGR driver can be used to read MapInfo vector tables and
ESRI TILEINDEX files (raster and vector), I am just wondering if it can also
read MapInfo raster seamless layer, I've tried, but I didn't get it run.
Does anyone ever do something like what I said?

thanks for any information

Regards

Zhonghai
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070307/0e6757a0/attachment.html
From sjahputerao at missouri.edu  Wed Mar  7 10:51:28 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] I/O Performance issues with ENVI data format
Message-ID: <45EEDF80.5010208@missouri.edu>

I have a C++ program that conducts UTM reprojection and resampling of 
large images before creating the pansharpened multispectral images.  
Initially, I was using GTiff format for the pansharpened image.  For 
16Kx16K panchromatic image (and its corresponding multispectral), it 
took me about 50 minutes to finish the process.  Then I tried using ENVI 
format as a solution to the 4 GB limit of GTiff.  The whole process 
(using the same input images) now take more than 3 hours to complete.  
Both programs were built using the release mode with the same 
optimization options in VC.Net.

Both trials were run on the same machine with XP-SP2.  Any idea why the 
disk I/O with the ENVI format is much slower compared to the disk I/O 
with the GTiff format?

Thanks

Ozy


From mateusz at loskot.net  Wed Mar  7 10:55:00 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] ogrinfo problem
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFB04@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFB04@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <45EEE054.3050302@loskot.net>

Clay, Bruce wrote:
> The KML driver is built in based on the error messages shown below.
> Is this a known issue?

Clay,

Yes, it is known issue - KML driver does not support reading.

> I saw one post that said the tool was "write only" yetsomewhere I
> thought I saw a different message saying it was read only unless we
> had Xerces built in.

Here is doc about KML driver:

http://www.gdal.org/ogr/drv_kml.html

where you can read:

"OGR has limited support for KML writing and no support for
reading KML."

This document is up to date.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From guillaume.huby.lists at gmail.com  Wed Mar  7 11:13:48 2007
From: guillaume.huby.lists at gmail.com (guillaume huby)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: ogrinfo problem
Message-ID: <ddc797c30703070813q349056b2wd12478b949ce10b3@mail.gmail.com>

>
>  I am having trouble opening an KNL file with OGR version 1.2.2 from the
> FWTool set.  I have tried both compressed and uncompressed versions an
> neither one works
>
>
>
> The KML driver is built in based on the error messages shown below.  Is
> this a known issue?  I saw one post that said the tool was "write only"
> yetsomewhere I thought I saw a different message saying it was read only
> unless we had Xerces built in.
>

Hi Bruce,

As far as I know, KML is write only.

You can find a turnaround to read KML on this web page :
http://www.perrygeo.net/wordpress/?p=3

The trick is to convert KML to GML via an XML parser, then to read the GML
using ogr tools.
Be careful, the KML must be quite simple (polygons only or points only).

Good luck !
Guillaume.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070307/6d997f2f/attachment.html
From warmerdam at pobox.com  Wed Mar  7 12:55:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] I/O Performance issues with ENVI data format
In-Reply-To: <45EEDF80.5010208@missouri.edu>
References: <45EEDF80.5010208@missouri.edu>
Message-ID: <45EEFC96.50900@pobox.com>

Ozy Sjahputera wrote:
> I have a C++ program that conducts UTM reprojection and resampling of 
> large images before creating the pansharpened multispectral images.  
> Initially, I was using GTiff format for the pansharpened image.  For 
> 16Kx16K panchromatic image (and its corresponding multispectral), it 
> took me about 50 minutes to finish the process.  Then I tried using ENVI 
> format as a solution to the 4 GB limit of GTiff.  The whole process 
> (using the same input images) now take more than 3 hours to complete.  
> Both programs were built using the release mode with the same 
> optimization options in VC.Net.
> 
> Both trials were run on the same machine with XP-SP2.  Any idea why the 
> disk I/O with the ENVI format is much slower compared to the disk I/O 
> with the GTiff format?

Ozy,

What sort of access pattern are you using for the data?  Perhaps you
are doing a RasterIO() for each pixel you want?

Was your geotiff file tiled or striped?

I see two likely issues:

1) The "rawrasterband" family of formats, including ENVI, has optimized
    logic for reading small bits of data.  But the downside to this
    optimization is that it skips the block cache, and could substantially
    degrade performance if you do many many very small requests.

2) Possibly you are seeing cache thrashing with the ENVI driver which has
    scanline sized blocks where as you *might* have being used tiled geotiffs
    which would be less subject to cache thrashing if you are doing local
    windowed reads.

Of course, as you can see, much depends on subtle issues of data organization
and the pattern of your reads.

One very quick thing to tweak is to increase the cache size.  For instance
setting the GDAL_CACHEMAX environment variable to 200 (for 200MB).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jdgonon at gi-lemans.com  Wed Mar  7 12:14:44 2007
From: jdgonon at gi-lemans.com (Jean-Daniel Gonon)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Reading DGNv8 file from MAPSERVER with DGNDirect
Message-ID: <45EEF304.8000603@gi-lemans.com>

Hi

Yes, I replace original OGR DLL/Lib in MapServer with the DLL I build in 
VC++.
But I don't modify other setting in MAPSERVER, I don't rebuild MAPSERVER

I see, witth spys in my source code, that MAPSERVER open DGNv8 file, 
MAPSERVER can read unit of resoution, geometry of file (2d/3d).
But geographics elements are not display in MAPSERVER interface, I have 
just a message about "CGI error".

I don't know that it means

Jean-Daniel

Jean-Daniel Gonon wrote:

> > 
> > Hi
> > 
> > I compile GDAL/OGR_1.3.2 under Visual C++ 2005 and I integrate 
> > DGNdirect09964 in GDAL/OGR_1.3.2.
> > 
> > Now, with "ogrinfo fileV8.dgn -al" command, I can read attributs of 
> > line, text and shape elements.
> > 
> > But when I replace "gdal.lib" in MAPSERVER with the new file version,
> >  MAPSERVER fail to open and read DGNv8 file. MAPSERVER still open and
> > read successful DGNv7 file.
> > 
> > What is the problem ?
>   
gdal.lib is a static library, but I suppose you are going to replace the
original GDAL DLL from MapServer with the new one you built on your own.

Or do you mean you use gdal.lib to rebuild MapServer?

Cheers

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070307/903a4fac/attachment.html
From mateusz at loskot.net  Wed Mar  7 12:27:01 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Reading DGNv8 file from MAPSERVER with DGNDirect
In-Reply-To: <45EEF304.8000603@gi-lemans.com>
References: <45EEF304.8000603@gi-lemans.com>
Message-ID: <45EEF5E5.3030209@loskot.net>

Jean-Daniel Gonon wrote:
> Hi
> 
> Yes, I replace original OGR DLL/Lib in MapServer with the DLL I build
> in VC++. But I don't modify other setting in MAPSERVER, I don't
> rebuild MAPSERVER
> 
> I see, witth spys in my source code, that MAPSERVER open DGNv8 file, 
> MAPSERVER can read unit of resoution, geometry of file (2d/3d). But
> geographics elements are not display in MAPSERVER interface, I have 
> just a message about "CGI error".
> 
> I don't know that it means

Jean-Daniel,

I am not sure, but I suppose you need to re-build MapServer using new
GDAL DLL.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sjahputerao at missouri.edu  Wed Mar  7 12:41:50 2007
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] I/O Performance issues with ENVI data format
In-Reply-To: <45EEFC96.50900@pobox.com>
References: <45EEDF80.5010208@missouri.edu> <45EEFC96.50900@pobox.com>
Message-ID: <45EEF95E.4050508@missouri.edu>

Hi Frank,

I have to use RasterIO since we try to capture only certain parts of the 
image.  But the buffer size I use is simply the block size prescribed by 
GDAL (if the block size is too large for the area we try to capture, I 
use the smaller size of the two). 

I think the GeoTiff is striped (each block is simply a row of image).

Forgive my ignorance, but where and how do you set the GDAL_CACHEMAX 
parameter?

Thanks.

Oz



Frank Warmerdam wrote:
> Ozy Sjahputera wrote:
>> I have a C++ program that conducts UTM reprojection and resampling of 
>> large images before creating the pansharpened multispectral images.  
>> Initially, I was using GTiff format for the pansharpened image.  For 
>> 16Kx16K panchromatic image (and its corresponding multispectral), it 
>> took me about 50 minutes to finish the process.  Then I tried using 
>> ENVI format as a solution to the 4 GB limit of GTiff.  The whole 
>> process (using the same input images) now take more than 3 hours to 
>> complete.  Both programs were built using the release mode with the 
>> same optimization options in VC.Net.
>>
>> Both trials were run on the same machine with XP-SP2.  Any idea why 
>> the disk I/O with the ENVI format is much slower compared to the disk 
>> I/O with the GTiff format?
>
> Ozy,
>
> What sort of access pattern are you using for the data?  Perhaps you
> are doing a RasterIO() for each pixel you want?
>
> Was your geotiff file tiled or striped?
>
> I see two likely issues:
>
> 1) The "rawrasterband" family of formats, including ENVI, has optimized
>    logic for reading small bits of data.  But the downside to this
>    optimization is that it skips the block cache, and could substantially
>    degrade performance if you do many many very small requests.
>
> 2) Possibly you are seeing cache thrashing with the ENVI driver which has
>    scanline sized blocks where as you *might* have being used tiled 
> geotiffs
>    which would be less subject to cache thrashing if you are doing local
>    windowed reads.
>
> Of course, as you can see, much depends on subtle issues of data 
> organization
> and the pattern of your reads.
>
> One very quick thing to tweak is to increase the cache size.  For 
> instance
> setting the GDAL_CACHEMAX environment variable to 200 (for 200MB).
>
> Best regards,


From elko1 at llnl.gov  Wed Mar  7 13:32:46 2007
From: elko1 at llnl.gov (Scott D. Elko)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] gdal_translate and Dynamic Range
Message-ID: <6.2.1.2.2.20070307103105.03338d08@mail.llnl.gov>

I?ve several 16-bit NITF images. In using OpenEV 1.2.2, I?m able to utilize 
the ?Export? function, select ?Advanced Options?, use ?Draw ROI Mode?, 
select ?Window Input File? and ?Scale to View Settings? to produce a 
beautiful 8-bit geoTiff chipped out image who?s dynamic range is spot on.

However, no matter what I do, I can?t seem to reproduce the same results 
using gdal_translate. In short, the dynamic range of the gdla_translate 
produced image is not even close (ie., much, much darker) than that of the 
OpenEV image. In addition to specifying ?srcwin, the gdal_translate 
parameters, I?m using are:

-scale (w/o any scale factors since it?s suppose to calculate the proper 
min and max for src and dst)
-ot Byte

The only way I?ve been able to get halfway decent results is to specify 
??scale 0 600? but this seems to be a hack. I?ve even experiment with other 
gdal_tranlsate options to produce exactly the same informational results 
yielded by gdla_info on the OpenEV produced image but have come up empty 
handed.

The funny thing is that if I use gdla_translate to produce a geoTiff image 
then apply gdal_translate on that resultant image, as expected, the second 
image is somewhat better but not even close to that of the OpenEV produced.

Can anybody share any ideas in how to get gdla_translate to produce the 
same result as that of OpenEV? Or is it an impossible feat that I?m trying 
to accomplish?

Thanks,
-Scott


From warmerdam at pobox.com  Wed Mar  7 14:36:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] I/O Performance issues with ENVI data format
In-Reply-To: <45EEF95E.4050508@missouri.edu>
References: <45EEDF80.5010208@missouri.edu> <45EEFC96.50900@pobox.com>
	<45EEF95E.4050508@missouri.edu>
Message-ID: <45EF1459.8020600@pobox.com>

Ozy Sjahputera wrote:
> Hi Frank,
> 
> I have to use RasterIO since we try to capture only certain parts of the 
> image.  But the buffer size I use is simply the block size prescribed by 
> GDAL (if the block size is too large for the area we try to capture, I 
> use the smaller size of the two).
> I think the GeoTiff is striped (each block is simply a row of image).

Ozy,

OK, nothing dangerous sounding in how you are doing this.

> Forgive my ignorance, but where and how do you set the GDAL_CACHEMAX 
> parameter?

It can be an environment variable, set via the commandline --config
switch or set with the API call GDALSetConfigOption().  For quick
testing the easiest way is to set it in the environment.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Mar  7 14:54:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Reading DGNv8 file from MAPSERVER with DGNDirect
In-Reply-To: <45EEF304.8000603@gi-lemans.com>
References: <45EEF304.8000603@gi-lemans.com>
Message-ID: <45EF188F.5060103@pobox.com>

Jean-Daniel Gonon wrote:
> Hi
> 
> Yes, I replace original OGR DLL/Lib in MapServer with the DLL I build in 
> VC++.
> But I don't modify other setting in MAPSERVER, I don't rebuild MAPSERVER
> 
> I see, witth spys in my source code, that MAPSERVER open DGNv8 file, 
> MAPSERVER can read unit of resoution, geometry of file (2d/3d).
> But geographics elements are not display in MAPSERVER interface, I have 
> just a message about "CGI error".

Jean-Daniel,

One thing that mapserver always does when rendering is set the spatial
filter for the region of the map.  Is it possible this is not working
properly with your driver?  You can use the -spat commandline switch to
ogrinfo to test the same thing.

However, since you mention there was a cgi error, perhaps this is not
the issue. Exactly what cgi error did you get?  I think it might be
prudent for you to do some testing using "shp2img" which also comes
with most mapserver distributions, and makes it easy to test things at
the commandline.

Something like:

   shp2img -all_debug 1 -m your.map -o out.png -l your_layer

One nice thing about shp2img is that it is more practical to debug than
mapserv run under apache.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Mar  7 15:00:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] gdal_translate and Dynamic Range
In-Reply-To: <6.2.1.2.2.20070307103105.03338d08@mail.llnl.gov>
References: <6.2.1.2.2.20070307103105.03338d08@mail.llnl.gov>
Message-ID: <45EF19E1.7030509@pobox.com>

Scott D. Elko wrote:
> I?ve several 16-bit NITF images. In using OpenEV 1.2.2, I?m able to 
> utilize the ?Export? function, select ?Advanced Options?, use ?Draw ROI 
> Mode?, select ?Window Input File? and ?Scale to View Settings? to 
> produce a beautiful 8-bit geoTiff chipped out image who?s dynamic range 
> is spot on.
> 
> However, no matter what I do, I can?t seem to reproduce the same results 
> using gdal_translate. In short, the dynamic range of the gdla_translate 
> produced image is not even close (ie., much, much darker) than that of 
> the OpenEV image. In addition to specifying ?srcwin, the gdal_translate 
> parameters, I?m using are:
> 
> -scale (w/o any scale factors since it?s suppose to calculate the proper 
> min and max for src and dst)
> -ot Byte
> 
> The only way I?ve been able to get halfway decent results is to specify 
> ??scale 0 600? but this seems to be a hack. I?ve even experiment with 
> other gdal_tranlsate options to produce exactly the same informational 
> results yielded by gdla_info on the OpenEV produced image but have come 
> up empty handed.

Scott,

OpenEV has a substantially smarter set of scaling logic than the
gdal_translate -scale defaults.  In particular I believe OpenEV
computes a histogram and then does tail trimming to pick end scaling
points.  You can open the layer dialog (right click on the layer in
the layers list), and then select the "Raster Source" tab to see what
scaling min/max was selected by OpenEV.  If you use those values with
gdal_translate -scale you should get similar results.

> The funny thing is that if I use gdla_translate to produce a geoTiff 
> image then apply gdal_translate on that resultant image, as expected, 
> the second image is somewhat better but not even close to that of the 
> OpenEV produced.

This is presumably because gdal_translate will scale based on the
computed min/max of the whole image, not the area you are chipping out
with the -srcwin flags.  By cutting it down first, you correct for this
issue.

> Can anybody share any ideas in how to get gdla_translate to produce the 
> same result as that of OpenEV? Or is it an impossible feat that I?m 
> trying to accomplish?

gdal_translate isn't going to have the same logic as OpenEV.  So you
either have to compute the scaling min/max by some other means (perhaps
inspecting it in OpenEV or a script) and use those with gdal_translate,
or you are going to have to emulate the logic of OpenEV in a script of
some sort.  In fact, depending on the circumstances you might be able
to write a Python script that imports the OpenEV core, and use it to
do the operation, but does not actually create any user interface
components.  This could be tricky though.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Wed Mar  7 15:52:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] DTED Performance on Windows
In-Reply-To: <8D27E2CDAF11D34F97E7445BCCCDB92C0199D35B@IMCSRV1.MITRE.ORG>
References: <8D27E2CDAF11D34F97E7445BCCCDB92C0199D35B@IMCSRV1.MITRE.ORG>
Message-ID: <45EF2610.3010907@pobox.com>

Collins, Benjamin wrote:
> All,
> 
> I'm not sure that this is the same issue, but I have seen some pretty
> terrible performance generally on non-byte datasets loaded under
> Windows with the NITF driver.  DTED 2 is such a file.  For me, the
> gdaladdo command took 10x longer for an int16 NITF than for the same
> GeoTIFF reduced to byte depth.

Ben,

gdaladdo goes into a much more generic double precision case for
non-eight data, so that might be part of the issue, but I'm surprised
the difference is so dramatic.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From richard.matsunaga at waypointinfo.com  Wed Mar  7 16:30:33 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] SWIG C# dependencies on Windows
Message-ID: <002c01c760ff$d718c440$c2012b0a@Richard>

 
I struggled with a dependency problem with the SWIG C# wrappers on our build
server. Unit tests would fail due to a TypeInitializationException in
gdal_wrap.dll.
 
After playing with Filemon and Dependency Walker without limited success, it
turns out that I needed to install the Visual C++ redistributable package on
the server. The server does not have Visual Studio installed.
 
Since we already had the hand-rolled GDAL C# wrapper running successfully on
the server, what extra dependencies have been introduced with the SWIG
wrapper to make the redist necessary?
 
Thanks,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070307/b1ba68dc/attachment.html
From Shawn.Gong at drdc-rddc.gc.ca  Wed Mar  7 16:55:12 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] gdal_translate and Dynamic Range
In-Reply-To: <45EF19E1.7030509@pobox.com>
References: <6.2.1.2.2.20070307103105.03338d08@mail.llnl.gov>
	<45EF19E1.7030509@pobox.com>
Message-ID: <2E58C246F17003499C141D334794D049D58895@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Frank,

I have similar question: is there a way to save the OpenEV enhanced
(after scaling) image onto a file, i.e. to capture
what-I-see-is-what-I-get ?

I have two images that loaded into OpenEV. I enhance them then fuse the
two.
However after fusion all the enhancement is lost.

Thanks,
Shawn


--------------------------------
Scott,

OpenEV has a substantially smarter set of scaling logic than the
gdal_translate -scale defaults.  In particular I believe OpenEV
computes a histogram and then does tail trimming to pick end scaling
points.  You can open the layer dialog (right click on the layer in
the layers list), and then select the "Raster Source" tab to see what
scaling min/max was selected by OpenEV.  If you use those values with
gdal_translate -scale you should get similar results.

> The funny thing is that if I use gdla_translate to produce a geoTiff 
> image then apply gdal_translate on that resultant image, as expected, 
> the second image is somewhat better but not even close to that of the 
> OpenEV produced.

This is presumably because gdal_translate will scale based on the
computed min/max of the whole image, not the area you are chipping out
with the -srcwin flags.  By cutting it down first, you correct for this
issue.

> Can anybody share any ideas in how to get gdla_translate to produce
the 
> same result as that of OpenEV? Or is it an impossible feat that I'm 
> trying to accomplish?

gdal_translate isn't going to have the same logic as OpenEV.  So you
either have to compute the scaling min/max by some other means (perhaps
inspecting it in OpenEV or a script) and use those with gdal_translate,
or you are going to have to emulate the logic of OpenEV in a script of
some sort.  In fact, depending on the circumstances you might be able
to write a Python script that imports the OpenEV core, and use it to
do the operation, but does not actually create any user interface
components.  This could be tricky though.

Best regards,


From gok at aerometric-ak.com  Wed Mar  7 16:54:49 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] ogr2ogr: merging multi shp data in one output
Message-ID: <3054411AF4728548AD6D7137190D56B30C45E1@admin1.aeromap.com>

Hello, List!
I want to merge multiple shp files (blue.shp, red.shp) in one (ex. blue.shp) and got an error message:

ogr2ogr -update -append "blue.shp" "red.shp"

ERROR 1: Failed to create file blue.shp
ERROR 4: Failed to open Shapefile 'blue.shp'
ERROR 1: Terminating translation prematurely after failed translation of layer blue

Is it a bug or just shp driver can not append data?
What would be a work around?

Thanks,
Gennady


From szekerest at gmail.com  Wed Mar  7 17:05:01 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] SWIG C# dependencies on Windows
In-Reply-To: <002c01c760ff$d718c440$c2012b0a@Richard>
References: <002c01c760ff$d718c440$c2012b0a@Richard>
Message-ID: <f3b73b7d0703071405x59c27996o8a2aa2fde9a7cfb8@mail.gmail.com>

Richard,

I consider this problem might require the need of removing the /debug
options when compiling the gdal core and the SWIG C# libraries (in
gdal/makefile.vc and csharp/makefile.vc). In addition /Zi should be
replaced with /Ox in nmake.opt for an optimized build.

Currently we have no sophisticated support to switch between the debug
and opimized configurations easily, so these modifications should be
done one by one.

Best regards,

Tamas



2007/3/7, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
>
> I struggled with a dependency problem with the SWIG C# wrappers on our build
> server. Unit tests would fail due to a TypeInitializationException in
> gdal_wrap.dll.
>
> After playing with Filemon and Dependency Walker without limited success, it
> turns out that I needed to install the Visual C++ redistributable package on
> the server. The server does not have Visual Studio installed.
>
> Since we already had the hand-rolled GDAL C# wrapper running successfully on
> the server, what extra dependencies have been introduced with the SWIG
> wrapper to make the redist necessary?
>
> Thanks,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From matt.gregory at oregonstate.edu  Wed Mar  7 17:05:04 2007
From: matt.gregory at oregonstate.edu (Gregory, Matthew)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] gdal_translate and Dynamic Range
In-Reply-To: <45EF19E1.7030509@pobox.com>
References: <6.2.1.2.2.20070307103105.03338d08@mail.llnl.gov>
	<45EF19E1.7030509@pobox.com>
Message-ID: <EA53646512D0ED48AC1673034B861EE0017EA85E@thuja>

Frank Warmerdam wrote:
> Scott Elko wrote:
> > Can anybody share any ideas in how to get gdla_translate to produce 
> > the same result as that of OpenEV? Or is it an impossible feat that 
> > I'm trying to accomplish?
> 
> gdal_translate isn't going to have the same logic as OpenEV.  
> So you either have to compute the scaling min/max by some 
> other means (perhaps inspecting it in OpenEV or a script) and 
> use those with gdal_translate, or you are going to have to 
> emulate the logic of OpenEV in a script of some sort.  In 
> fact, depending on the circumstances you might be able to 
> write a Python script that imports the OpenEV core, and use 
> it to do the operation, but does not actually create any user 
> interface components.  This could be tricky though.

Scott,

I think I was addressing a similar desire to get a stretched image on a
subwindow in my recent post
(http://lists.maptools.org/pipermail/gdal-dev/2007-February/011872.html)
.  Frank made the excellent suggestion to write a Python script to
calculate the min/max on that subwindow in code and then stretch using
that remapping.  Here are the steps that my Python script performs:

1. Read in the subwindow's coordinates and calculate its offsets and
size from the source image.

2. Create a VRT XML string which stores the specification of your
subwindow.

3. Open this string with gdal.Open() and calculate the "local" min/max,
e.g. 

  vrt_ds = gdal.Open(vrtXmlStr)
  vrtBand = vrt_ds.GetRasterBand(band)
  (zMinLocal, zMaxLocal) = vrtBand.ComputeRasterMinMax()

4. Create the subsetted image using this local min/max.  Using the
raster_copy function from gdal_merge.py as a template and importing
numpy, I modified the code to this:

  srcBand = srcFile.GetRasterBand( srcBandNum )
  dstBand = dstFile.GetRasterBand( dstBandNum )

  max = zMaxLocal
  min = zMinLocal
  nodata = noDataValue
  x = srcBand.ReadAsArray(src_xoff, src_yoff, src_xsize, src_ysize,
                            dst_xsize, dst_ysize, dstBand.DataType)
  m = (255.0 - 1.0) / (max - min)
  b = 255.0 - m * max
  y = numpy.select([x == nodata], [0], default = numpy.round(m * x + b))
  z = y.astype(numpy.uint8)
  dstBand.WriteArray(z[0])

This creates an unsigned 8-bit image with nodata mapped to 0 and a
linear scaling of your source local min/max to the range 1-255.  Of
course, with no error checking! 

I confess that I haven't looked at what OpenEV gives you, but I think
this gets at the functionality for which you are looking.

Hope this helps,

Matt Gregory
Faculty Research Assistant
Department of Forest Science
Oregon State University
Phone : (541) 758-7778
Email : matt.gregory@oregonstate.edu
    

  
 


From warmerdam at pobox.com  Wed Mar  7 19:16:56 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] gdal_translate and Dynamic Range
In-Reply-To: <2E58C246F17003499C141D334794D049D58895@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <6.2.1.2.2.20070307103105.03338d08@mail.llnl.gov>
	<45EF19E1.7030509@pobox.com>
	<2E58C246F17003499C141D334794D049D58895@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45EF55F8.9070707@pobox.com>

Gong, Shawn wrote:
> Frank,
> 
> I have similar question: is there a way to save the OpenEV enhanced
> (after scaling) image onto a file, i.e. to capture
> what-I-see-is-what-I-get ?
> 
> I have two images that loaded into OpenEV. I enhance them then fuse the
> two.
> However after fusion all the enhancement is lost.

Shawn,

I'm not sure what method you are using to fuse the images.  Generally
speaking if you can see the image you want, you can "print" it to a file
capturing all the enhancements you see.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From schuyler at nocat.net  Thu Mar  8 00:01:34 2007
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge
	vector dataset]
In-Reply-To: <45EE6EA4.4070007@loskot.net>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
	<45ED347D.4080604@loskot.net> <45ED6165.7090507@tkk.fi>
	<45EE6EA4.4070007@loskot.net>
Message-ID: <20070308050134.GL15173@vishnu.tridity.org>

* On  6-Mar-2007 at 11:55PM PST, Mateusz Loskot said:
> >> 
> >> 1. load the whole geometry data into memory, into simple
> >> structures  (arrays) - this is similar to how Manifold works
> > 
> > This is doomed to lead into problems once you try to open a theme
> > with 5 million polygons...
> 
> Yup, in many cases it is.  However, both approaches introduce some
> problems.  In all-in-memory approach, the obvious assumption is a
> user has a *lot* of RAM space, 4-8 GB.  But in turn, it provides the
> fastest access to features (accessing RAM is faster than disk or
> network).

This is sort of a blue sky idea, but we build overviews of rasters for
exactly this sort of purpose. I can easily imagine designing some kind
of OGR-based tool that constructs a directory of progressively
generalized versions of a master vector dataset according to a
hierarchy of scales, and then offers an access API that selects the
generalization for a scale appropriate to the task at hand. I can't
speculate whether this sort of tool would belong in GDAL/OGR the same
way that gdaladdo etc. does.

SDE

From warmerdam at pobox.com  Thu Mar  8 00:57:25 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <20070308050134.GL15173@vishnu.tridity.org>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
	<45ED347D.4080604@loskot.net> <45ED6165.7090507@tkk.fi>
	<45EE6EA4.4070007@loskot.net>
	<20070308050134.GL15173@vishnu.tridity.org>
Message-ID: <45EFA5C5.4080305@pobox.com>

Schuyler Erle wrote:
> * On  6-Mar-2007 at 11:55PM PST, Mateusz Loskot said:
>>>> 1. load the whole geometry data into memory, into simple
>>>> structures  (arrays) - this is similar to how Manifold works
>>> This is doomed to lead into problems once you try to open a theme
>>> with 5 million polygons...
>> Yup, in many cases it is.  However, both approaches introduce some
>> problems.  In all-in-memory approach, the obvious assumption is a
>> user has a *lot* of RAM space, 4-8 GB.  But in turn, it provides the
>> fastest access to features (accessing RAM is faster than disk or
>> network).
> 
> This is sort of a blue sky idea, but we build overviews of rasters for
> exactly this sort of purpose. I can easily imagine designing some kind
> of OGR-based tool that constructs a directory of progressively
> generalized versions of a master vector dataset according to a
> hierarchy of scales, and then offers an access API that selects the
> generalization for a scale appropriate to the task at hand. I can't
> speculate whether this sort of tool would belong in GDAL/OGR the same
> way that gdaladdo etc. does.

Schuyler,

Traditionally I have left this to higher level configuration.  For
instance distinct layers in mapserver for different map scales.  With
raster data it is obvious from a given RasterIO request what overview
level to read from. For vector data it requires more information than is
currently available to OGR to know what level of generalization to read at.

But I could imagine us having something like a SetScale() method on the layer
that could be used internally to pick the appropriate generalization.
Nevertheless, I'm still most comfortable leaving this to higher level logic
on top of OGR.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Mar  8 04:07:30 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Buildbot status report
Message-ID: <45EFD252.5030600@loskot.net>

Hi,

I cleaned up the buildbot instance and all builders should work
well now. Here is list of issues left to solve:

1. telascience and smokey
- WCS tests (wcs_4) fail

2. epimetheus

a) - run_all.py throws following error:

File
"/Data/buildbot/osgeo/slaves/gdal/epimetheus-full/build/gdal/pymod/gdal.py",
line 193, in ?
    from _gdal import ptrcreate, ptrfree, ptrvalue, ptrset, ptrcast,
ptradd, ptrmap, ptrptrcreate, ptrptrvalue, ptrptrset
ImportError: cannot import name ptrcreate

http://buildbot.osgeo.org:8500/epimetheus-full/builds/151/step-test/0

b) make in swig/csharp throws following error:

make: execvp:
/Volumes/Data/buildbot/osgeo/slaves/gdal/epimetheus-full/build/gdal/libgdal.la:
Permission denied

http://buildbot.osgeo.org:8500/epimetheus-full/builds/151/step-csharp-make/0


Frank is going to fix the 1st issue.

Hobu, do you have an idea what is the problem in 2.a) ?

Tamas, would you have any suggestion about how to fix 3.b) ?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Thu Mar  8 05:54:22 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:41 2007
Subject: [Gdal-dev] Buildbot status report
In-Reply-To: <45EFD252.5030600@loskot.net>
References: <45EFD252.5030600@loskot.net>
Message-ID: <f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>

2007/3/8, Mateusz Loskot <mateusz@loskot.net>:
>
> b) make in swig/csharp throws following error:
>
> make: execvp:
> /Volumes/Data/buildbot/osgeo/slaves/gdal/epimetheus-full/build/gdal/libgdal.la:
> Permission denied
>
> http://buildbot.osgeo.org:8500/epimetheus-full/builds/151/step-csharp-make/0
>
>
> Tamas, would you have any suggestion about how to fix 3.b) ?
>

This problem is related to the libtool builds that I'm not too
familiar with. I'll have to look after someone who can tell me how to
support building of shared libraries using libtool. Currently  when
using the libtool option, -shared or -dynamiclib is not assigned to
$(LD_SHARED) so the compilation fails.


Mateusz, are you planning to include the other languages to the
builds? It would be helpful for anyone who changes the SWIG related
stuff to see whether the modifications  affect the other bindings or
not.

Best regards,

Tamas

From mateusz at loskot.net  Thu Mar  8 06:26:52 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Buildbot status report
In-Reply-To: <f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>
References: <45EFD252.5030600@loskot.net>
	<f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>
Message-ID: <45EFF2FC.5040904@loskot.net>

Tamas Szekeres wrote:
> 2007/3/8, Mateusz Loskot <mateusz@loskot.net>:
>>
>> b) make in swig/csharp throws following error:
>>
>> make: execvp:
>> /Volumes/Data/buildbot/osgeo/slaves/gdal/epimetheus-full/build/gdal/libgdal.la:
>>
>> Permission denied
>>
>> http://buildbot.osgeo.org:8500/epimetheus-full/builds/151/step-csharp-make/0
>>
>>
>>
>> Tamas, would you have any suggestion about how to fix 3.b) ?
>>
> 
> This problem is related to the libtool builds that I'm not too
> familiar with. I'll have to look after someone who can tell me how to
> support building of shared libraries using libtool. Currently  when
> using the libtool option, -shared or -dynamiclib is not assigned to
> $(LD_SHARED) so the compilation fails.

Tamas,

Yes, I understand it. I'm not sure why GDAL does not use any of
these flags.

Frank, may be we could add it if it helps?

> Mateusz, are you planning to include the other languages to the
> builds? It would be helpful for anyone who changes the SWIG related
> stuff to see whether the modifications  affect the other bindings or
> not.

Yes, I have it in my plan.
I suppose I'd need some assistance in the environment configuration for
every bindings. I have no idea what's required for Java or Ruby...

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Mar  8 06:29:36 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] ogr2ogr: merging multi shp data in one output
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45E1@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45E1@admin1.aeromap.com>
Message-ID: <45EFF3A0.9010701@loskot.net>

Gennady Khokhorin wrote:
> Hello, List!
> I want to merge multiple shp files (blue.shp, red.shp) in one (ex. blue.shp) and got an error message:
> 
> ogr2ogr -update -append "blue.shp" "red.shp"
> 
> ERROR 1: Failed to create file blue.shp
> ERROR 4: Failed to open Shapefile 'blue.shp'
> ERROR 1: Terminating translation prematurely after failed translation of layer blue
> 
> Is it a bug or just shp driver can not append data?

Gennady,

Please, refer to the doc page about OGR driver for Shapefile:

http://www.gdal.org/ogr/drv_shapefile.html

At the bottom of the page, you can find "A merge of two shapefiles..."
example.

Hope that helps.
-- 
Mateusz Loskot
http://mateusz.loskot.net

From aaime at openplans.org  Thu Mar  8 08:09:43 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Buildbot status report
In-Reply-To: <45EFF2FC.5040904@loskot.net>
References: <45EFD252.5030600@loskot.net>	<f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>
	<45EFF2FC.5040904@loskot.net>
Message-ID: <45F00B17.9040002@openplans.org>

Mateusz Loskot ha scritto:

> Yes, I have it in my plan.
> I suppose I'd need some assistance in the environment configuration for
> every bindings. I have no idea what's required for Java or Ruby...

For java, you need a Sun JDK 1.5.0 (the one that comes with the
distribution you're using for the build, assuming that's a Linux box,
that is) and Ant 1.6.0 or later.

Avoid other jdks, such as the blackdown one, or the gcj one. They
may work for the specific case of swig bindings, since they are
relatively simple, but our geotools experience is that the
latter does not work at all, the former has a tendency to crash
unexpectedly.

Oh, I also noticed that make clean does not really clean stuff
as it should (generated sources are left on the disk). I will
try to fix the make a little next weekend.

Cheers
Andrea

From mateusz at loskot.net  Thu Mar  8 08:58:57 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Buildbot status report
In-Reply-To: <45F00B17.9040002@openplans.org>
References: <45EFD252.5030600@loskot.net>	<f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>
	<45EFF2FC.5040904@loskot.net> <45F00B17.9040002@openplans.org>
Message-ID: <45F016A1.3020303@loskot.net>

Andrea Aime wrote:
> Mateusz Loskot ha scritto:
> 
>> Yes, I have it in my plan.
>> I suppose I'd need some assistance in the environment configuration for
>> every bindings. I have no idea what's required for Java or Ruby...
> 
> For java, you need a Sun JDK 1.5.0 (the one that comes with the
> distribution you're using for the build, assuming that's a Linux box,
> that is) and Ant 1.6.0 or later.

Andrea,

Thank you very much for these notes.
I'll try to configure it that way ASAP.
I'll let you know when it's ready.

BTW, do you want to build on Linux only or on both platforms Linux and
Windows?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From aaime at openplans.org  Thu Mar  8 11:00:44 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Buildbot status report
In-Reply-To: <45F016A1.3020303@loskot.net>
References: <45EFD252.5030600@loskot.net>	<f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>	<45EFF2FC.5040904@loskot.net>
	<45F00B17.9040002@openplans.org> <45F016A1.3020303@loskot.net>
Message-ID: <45F0332C.3040005@openplans.org>

Mateusz Loskot ha scritto:
> Andrea Aime wrote:
>> Mateusz Loskot ha scritto:
>>
>>> Yes, I have it in my plan.
>>> I suppose I'd need some assistance in the environment configuration for
>>> every bindings. I have no idea what's required for Java or Ruby...
>> For java, you need a Sun JDK 1.5.0 (the one that comes with the
>> distribution you're using for the build, assuming that's a Linux box,
>> that is) and Ant 1.6.0 or later.
> 
> Andrea,
> 
> Thank you very much for these notes.
> I'll try to configure it that way ASAP.
> I'll let you know when it's ready.
> 
> BTW, do you want to build on Linux only or on both platforms Linux and
> Windows?

Well, if you can build on windows too, that would be nice, since I
can't build on Windows myself (I don't have a Visual C++ license
and the express edition generates dll's that JNI won't load).
Having the possibility to download the resulting dll's and jars would be 
really great :-)

I'm not very familiar with the buildbot, is there any way to interact 
with it? Any docs around?

The requirements for Windows are the same, JDK 1.5 and Ant 1.6 (make 
sure the bin directory of Ant gets in the path)
Cheers
Andrea


From poz at rocketmail.com  Thu Mar  8 15:23:27 2007
From: poz at rocketmail.com (chris pozsgai)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Thin plate splines and GCPs - C++
Message-ID: <20070308202327.13622.qmail@web50210.mail.re2.yahoo.com>

Hello..
   
  I am trying to find a more accurate geo transform than the least squares used
  in the GDALGCPsToGeoTransform API.
   
  I would like to use the thin plate splines, but am having trouble getting good results.
   
  I am trying to use a reference image with 8 GCPs, and the image transformer with
  the nOrder = -1 argument.  Is this a feasible approach?
   
  I continually get a resulting geo transform with values on the order of 1e+70 (someone
  may have seen this?).
   
  Here's the procedure I used:
   
  1)  Load a JPEG raster (it will be the hSrcDS).
  2)  Set the dataset's projection (as generic WGS-84).
  3)  Set the dataset's GCPs.
  4)  Create the img transform object, using NULLs in the destination parameters.  (I wanted to go from pixel/line to georef).
  5)  Get the dest geo transform and warped image size with the GDALGetSuggestedWarpOutput API.
  6). Create the new vrt warped dataset with the image size and geo transform in 5) and
       the warp options object required to do the warping.
  7). Warp the image.
  8).  Cleanup/render.
   
  I am getting a strange image that contains the correct color data + black filler pixels but is curved in a semicircular pattern.  I assume that this is not the intent of the warper or
  I have not set it up correctly.  Can anyone help?
   
  Thanks,
   
  Chris Pozsgai



 
---------------------------------
 Get your own web address.
 Have a HUGE year through Yahoo! Small Business.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070308/613ea262/attachment.html
From maphew at gmail.com  Thu Mar  8 16:33:31 2007
From: maphew at gmail.com (Matt Wilkie)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] extract images from "ExeComp Binary @EX File v2"?
Message-ID: <c61d98af0703081333v1e63c5f4j25ffb9cbfc21441c@mail.gmail.com>

Hi All,

My wife bought me 100 years of National Geographic maps on an 8 CDROM
set. The maps are great, but the image viewer it comes with is
horrible. If anyone can help me extract the images I would be
*incredibly* grateful. This is a personal project, so I don't have a
lot of money for it, but would be willing to trade  services in kind
in addition to a small honorarium.

The files have the extension ".@EX", begin with "ExeComp Binary @EX
File v2" and appear to have embedded JFIF pyramids in them[0]. I can
send a sample to anyone interested in helping me but not to the
general list as they are copyrighted.

[0] http://groups.google.com/group/comp.graphics.misc/msg/adb838fb8eee2045?dmode=source

thanks,

-- 
-matt

From szekerest at gmail.com  Thu Mar  8 16:46:35 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Re: Upcoming enhancements for the SWIG C# interface
In-Reply-To: <f3b73b7d0703031536m65cc3ea2q9cc76f3e4081e534@mail.gmail.com>
References: <f3b73b7d0703031536m65cc3ea2q9cc76f3e4081e534@mail.gmail.com>
Message-ID: <f3b73b7d0703081346pfb27450w10ca27efe7d829d5@mail.gmail.com>

The enhancements described previously have been added to the SVN
trunk. I would be happy to  know how it works for you.

Best regards,

Tamas


2007/3/4, Tamas Szekeres <szekerest@gmail.com>:
> Folks,
>
> I'm preparing some changes according to the recent requests with the
> following features:
>
> 1. Enumerated types will be propagated to the SWIG C# interface
> instead of int-s.
> 2. The following namespace names will be applied: OSGeo.GDAL,
> OSGeo.OGR, OSGeo.OSR
> according to the guidelines of:
> http://msdn.microsoft.com/library/default.asp?url=/library/en-us/cpgenref/html/cpconnamespacenamingguidelines.asp
>
> 3. Pascal casing will be applied to module names (Gdal, Ogr, Osr, GdalConst)
> 4. The gdalconst assembly is considered as deprecated and will be
> removed in some future releases. Currently, every assembly will
> contain their own constants and enums.
>
> 5. Dataset ReadRaster/WriteRaster implementation will be added.
>
> Since most of the modifications are reasonable, but backward
> incompatible changes, I will wait for 2 days before submitting the
> files. These changes will apply solely to the C# binding, however  the
> enum related stuff will reside in common places controlled by #ifdef
> (SWIGCSHARP) and can be taken over to the other languages easily if
> needed.
>
>
> Best regards,
>
> Tamas
>

From warmerdam at pobox.com  Thu Mar  8 18:20:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Buildbot status report
In-Reply-To: <45EFF2FC.5040904@loskot.net>
References: <45EFD252.5030600@loskot.net>
	<f3b73b7d0703080254u696756bfl951e1f7177f260b3@mail.gmail.com>
	<45EFF2FC.5040904@loskot.net>
Message-ID: <45F09A38.8090202@pobox.com>

Mateusz Loskot wrote:
>> This problem is related to the libtool builds that I'm not too
>> familiar with. I'll have to look after someone who can tell me how to
>> support building of shared libraries using libtool. Currently  when
>> using the libtool option, -shared or -dynamiclib is not assigned to
>> $(LD_SHARED) so the compilation fails.
> 
> Tamas,
> 
> Yes, I understand it. I'm not sure why GDAL does not use any of
> these flags.
> 
> Frank, may be we could add it if it helps?

Mateusz,

My (vague) understanding was that the Java bindings are not using
libtool in the conventional fashion and that this causes some problems.
Perhaps I am wrong.

Earlier I suggested that support for Java on buildbot was low priority,
which I still consider to be the case.  But I would like you to help
to ensure that Java building works smoothly on Linux and win32 platforms
if you can.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Thu Mar  8 18:05:21 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] LANDSAT7 format question: GLCF
Message-ID: <20070308230520.GB7627@bartok.itc.it>

Hi,

for the upcoming OSGeo educational data set I would like
to process
ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat
(LANDSAT7)
Apparently the format isn't recognized or I am doing something
wrong.

Any hint would be appreciated.
Thanks,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------


From warmerdam at pobox.com  Thu Mar  8 19:06:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RDBMSes with multiple geometry columns
Message-ID: <45F0A50E.2000505@pobox.com>

Folks,

Mateusz has been looking into bug 1476 related to postgis tables with
multiple geometry columns:

   http://bugzilla.remotesensing.org/show_bug.cgi?id=1476

Mateusz raised the question of whether we should refactor the OGR API
to support multiple geometry columns.  As usual, I am very leery of
API breakage, and responded as follows.  I thought the issues are broad
enough that I should bring them to the attention of the group for additional
comment.

"""
Mateusz,

In the short to medium term we can't practically reengineer OGR to support
multiple geometry columns properly.  What we might consider are special ways
of selecting the geometry column to use.

I can quickly imagine 3 scenarios that might apply.

1) We actually offer distinct appearing layers for each geometry column.  So
if the table roads has two geometry columns, one called centerline, and one
called boundaries we might show the application a layer called
roads_centerline, and roads_boundaries.

2) We could provide a mechanism in the datasource connection string where
a particular geometry column could be selected for a given table.  For
instance I think we already support listing the tables to be represented
as layers in the PG driver connection string.  We could allow adding a
geometry column in brackets after the table name as a way of selecting the
geometry column to use.  If unspecified, the first geometry column would
be used.

3) We could extend the OGR API with a way of listing the geometry columns
available for a layer, and a method for selecting a particular one.  Note,
we already have the informative GetGeometryColumn() method which for some
RDBMS providers returns the name of the currently used geometry column.

I'm inclined to pursue option (1) in the postgis driver for the time being
as it requires no changes to public apis and applications.  I think option
(3) should be a longer term goal.
"""

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From starged at gmail.com  Thu Mar  8 22:24:24 2007
From: starged at gmail.com (Mario Beauchamp)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] LANDSAT7 format question: GLCF
In-Reply-To: <20070308230520.GB7627@bartok.itc.it>
References: <20070308230520.GB7627@bartok.itc.it>
Message-ID: <f5a8aca50703081924g5513cd94od5dce106244e3358@mail.gmail.com>

Hi Markus,

On 3/8/07, Markus Neteler <neteler@itc.it> wrote:
> Hi,
>
> for the upcoming OSGeo educational data set I would like
> to process
> ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat
> (LANDSAT7)
> Apparently the format isn't recognized or I am doing something
> wrong.

You might want to take a look at
http://glcf.umiacs.umd.edu/data/guide/fileformat/
and http://glcf.umiacs.umd.edu/data/guide/namingconvention/

And I remember I had to do a bit of hacking to get GDAL to read those
files but for the life of me, I cannot remember what!! Try gdalinfo on
each .b0x, .hdr, .ip3, etc until it recognizes something...

cheers
-- 
Mario B.

From woodbri at swoodbridge.com  Thu Mar  8 23:59:28 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Need a sanity check on processing imagery
Message-ID: <45F0E9B0.2010700@swoodbridge.com>

Hi all,

I'm building a process to extract 3.75 x 3.75 min GTif tile images from 
HUGE CCM MrSID files and I am hoping I can prevail on you to review this 
and let me know if I'm doing some horridly wrong.

The MrSID files are in UTM and we want to project all the tiles into 
geographic (latlong) projection.

$ gdalinfo -nomd naip_1-1_1n_s_ut057_2006_1.sid
Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Size is 95310, 41990
Coordinate System is `'
Origin = (373650.000000,4588120.000000)
Pixel Size = (1.00000000,-1.00000000)
Corner Coordinates:
Upper Left  (  373650.000, 4588120.000)
Lower Left  (  373650.000, 4546130.000)
Upper Right (  468960.000, 4588120.000)
Lower Right (  468960.000, 4546130.000)
Center      (  421305.000, 4567125.000)
Band 1 Block=1024x128 Type=Byte, ColorInterp=Red
   Overviews: 47655x20995, 23828x10498, 11914x5249, 5957x2625, 
2979x1313, 1490x657, 745x329, 373x165, 187x83, 94x42, 47x21, 24x11, 
12x6, 6x3
Band 2 Block=1024x128 Type=Byte, ColorInterp=Green
   Overviews: 47655x20995, 23828x10498, 11914x5249, 5957x2625, 
2979x1313, 1490x657, 745x329, 373x165, 187x83, 94x42, 47x21, 24x11, 
12x6, 6x3
Band 3 Block=1024x128 Type=Byte, ColorInterp=Blue
   Overviews: 47655x20995, 23828x10498, 11914x5249, 5957x2625, 
2979x1313, 1490x657, 745x329, 373x165, 187x83, 94x42, 47x21, 24x11, 
12x6, 6x3

I'm getting the utm zone from here and it just dawned on me that I can 
do something like:  -s_srs naip_1-1_1n_s_ut057_2006_1.prj instead of 
reading the file myself. Right?

$ cat naip_1-1_1n_s_ut057_2006_1.prj
PROJCS["NAD_1983_UTM_Zone_12N",
GEOGCS["GCS_North_American_1983",
DATUM["D_North_American_1983",
SPHEROID["GRS_1980",6378137.0,298.257222101]],
PRIMEM["Greenwich",0.0],
UNIT["Degree",0.0174532925199433]],
PROJECTION["Transverse_Mercator"],
PARAMETER["False_Easting",500000.0],
PARAMETER["False_Northing",0.0],
PARAMETER["Central_Meridian",-111.0],
PARAMETER["Scale_Factor",0.9996],
PARAMETER["Latitude_Of_Origin",0.0],
UNIT["Meter",1.0]]

I have a perl script that inverse projects the corners of the sid back 
to lat, lon then iterates over the file generating commands like this 
for each to the 3.75x3.75 min tiles:

$ gdalwarp -s_srs +init=epsg:26912 -t_srs EPSG:4326 -te -111.9375 
41.4375 -111.875 41.5 -rc -wm 250  -co "TILED=YES" 
naip_1-1_1n_s_ut057_2006_1.sid B-111_41_129.tif

Some of the tiles will have to be mosaiced into a common tile from 
multiple CCM files along their edges. Some of the options above imply 
that I want a new file and NOT a mosaic. Would that be the -t_srs 
EPSG:4326 and -co "TILED=YES" options?

$ gdalinfo B-111_41_129.tif
Driver: GTiff/GeoTIFF
Size is 5420, 5420
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-111.937500,41.500000)
Pixel Size = (0.00001153,-0.00001153)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-111.9375000,  41.5000000) (111d56'15.00"W, 41d30'0.00"N)
Lower Left  (-111.9375000,  41.4375034) (111d56'15.00"W, 41d26'15.01"N)
Upper Right (-111.8750034,  41.5000000) (111d52'30.01"W, 41d30'0.00"N)
Lower Right (-111.8750034,  41.4375034) (111d52'30.01"W, 41d26'15.01"N)
Center      (-111.9062517,  41.4687517) (111d54'22.51"W, 41d28'7.51"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

Does this look like a reasonable process? Or is it flawed?
Can I do anything to speed this up? make -wm larger?
Can I extract multiple file tiles without having to open the file each 
time? Can that be done in Perl with the Geo::GDAL module?

I would appreciate and help and advice before a loose this monster on a 
few TB of files.

Many thanks in advance,
   -Steve

From lijian.shi at und.nodak.edu  Fri Mar  9 00:13:50 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] projection with ogr2ogr
In-Reply-To: <45EE69FA.2050508@loskot.net>
Message-ID: <0JEM0002GEJ2MX10@mailmx1.und.nodak.edu>

Hi, Mateusz,

Thank you for your help. Now I have resolved the problem according your
suggestion. But I met a new problem: after reprojecting the shp file with
the command: ogr2ogr -t_srs WGS84 -s_srs NAD27 out.shp point.shp,
I overlay the out.shp and point.shp in ArcGIS. But there are some shift
between tow files. Is there any problem with my command? 

Best regards,

Lijian

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Wednesday, March 07, 2007 1:30 AM
To: Lijian Shi
Cc: gdal-dev@lists.maptools.org
Subject: Re: [Gdal-dev] projection with ogr2ogr

Lijian Shi wrote:
> 
> Except WGS84 with epsg 4326, I also want to add the projection
information:
> 
> PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",
> ......
> PROJECTION["Lambert_Azimuthal_Equal_Area"],
> PARAMETER["latitude_of_center",45],
> PARAMETER["longitude_of_center",-100],
> PARAMETER["false_easting",0],
> PARAMETER["false_northing",0],
> UNIT["metre",1,
> AUTHORITY["EPSG","9001"]]]
> 
> So I tried the command: ogr2ogr -a_srs EPSG:4326 -t_srs "+proj=laea"
out.shp
> point.shp
> 
> And then I get the "header" of shp file as followed:
> PROJCS["Lambert_Azimuthal_Equal_Area",
>     GEOGCS["GCS_WGS_1984",
>         DATUM["unknown",
>             SPHEROID["WGS84",6378137,298.257223563]],
>         PRIMEM["Greenwich",0],
>         UNIT["Degree",0.017453292519943295]],
>     PROJECTION["Lambert_Azimuthal_Equal_Area"],
>     PARAMETER["latitude_of_center",0],
>     PARAMETER["longitude_of_center",0],
>     PARAMETER["false_easting",0],
>     PARAMETER["false_northing",0],
>     UNIT["Meter",1]]
> 
> But there are still some difference between the "header" of shp file and
> geotiff file. I don't know whether my result is right. So look forward to
> your suggestion.

Lijian,

I see I've misunderstood you previously.
Let's summarize the problem:

1. You have a projected GeoTIFF
2. You have also a Shapefile that fits spatially the GeoTIFF,
   but without any projection assigned
3. You want to use OGR to assign the Shapefile with the same
   projection as in GeoTIFF.

Here is the procedure:

1. You can use gdalinfo to dump PROJECTION details in WKT format.
Actually, you have already done it.

2. Copy and paste the WKT string dumped from GeoTIFF into a text file,
for example mytiff.prj. Note, you don't need to format it in
a single line.

PROJCS[" Projection Name = Lambert Azimuthal Equal-ar",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235629972,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Lambert_Azimuthal_Equal_Area"],
    PARAMETER["latitude_of_center",45],
    PARAMETER["longitude_of_center",-100],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]

3. Use ogr2ogr to "translate" your unreferenced Shapefile with
assigning the projection from WKT you've already saved in mytiff.prj file:


ogr2ogr -a_srs mytiff.prj out.shp yourinputfile.shp

where yourinputfile.shp is the unreferenced Shapefile.

After these steps, you will get following files:
out.dbf
out.shp
out.shx
out.prj - here is the info about newly assigned projection


I hope it helps.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From warmerdam at pobox.com  Fri Mar  9 02:18:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Need a sanity check on processing imagery
In-Reply-To: <45F0E9B0.2010700@swoodbridge.com>
References: <45F0E9B0.2010700@swoodbridge.com>
Message-ID: <45F10A5B.60208@pobox.com>

Stephen Woodbridge wrote:
> Hi all,
...
> I'm getting the utm zone from here and it just dawned on me that I can 
> do something like:  -s_srs naip_1-1_1n_s_ut057_2006_1.prj instead of 
> reading the file myself. Right?

Steve,

Yes, you can if it is an OGR compatible WKT.  If it is ESRI WKT
then it could possibly fail since these differ in some cases, but
likely it will be fine.

> $ gdalwarp -s_srs +init=epsg:26912 -t_srs EPSG:4326 -te -111.9375 
> 41.4375 -111.875 41.5 -rc -wm 250  -co "TILED=YES" 
> naip_1-1_1n_s_ut057_2006_1.sid B-111_41_129.tif
> 
> Some of the tiles will have to be mosaiced into a common tile from 
> multiple CCM files along their edges. Some of the options above imply 
> that I want a new file and NOT a mosaic. Would that be the -t_srs 
> EPSG:4326 and -co "TILED=YES" options?

I suspect just the -co creation option.

> Does this look like a reasonable process? Or is it flawed?

You are generating files for which the top left corner of the
top left pixel is at the lat/long location -11.9375,41.4375.
Is that want you want?  Sometimes people really want the center
of the top left pixel to be at that point.  If that is what you
want, you will need to manually adjust the extents "out" by a
half pixel.

> Can I do anything to speed this up? make -wm larger?

You could try setting the GDAL_ONE_BIG_READ configuration option
on so that each chunk the warper wants from the mrsid file will
be read in a single gulp, instead of potentially in many small
reads which are quite expensive with MrSID.

eg add "--config GDAL_ONE_BIG_READ ON" to your commandline.

Also, avoiding cubic convolution as the resampling kernel would
also save substantial time, but likely at some cost in degredation
of the resulting image.

> Can I extract multiple file tiles without having to open the file each 
> time? Can that be done in Perl with the Geo::GDAL module?

It could be done by creating a modified form of gdalwarp, but the
warp api isn't well exposed in the various script languages so it
is unlikely that you could do this effectively in perl.  In any
event avoiding the reopening of the mrsid file is unlikely to
save much time in this process since each output tile is a substantial
chunk of work on it's own (5K x 5K).

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Mar  9 01:27:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <20070308050134.GL15173@vishnu.tridity.org>
References: <45E9A49B.80201@loskot.net> <45EAE55B.3030708@tkk.fi>
	<45EAEBCC.5000500@loskot.net> <45EB056B.7090105@tkk.fi>
	<45ED347D.4080604@loskot.net> <45ED6165.7090507@tkk.fi>
	<45EE6EA4.4070007@loskot.net>
	<20070308050134.GL15173@vishnu.tridity.org>
Message-ID: <45F0FE59.8000908@loskot.net>

Schuyler Erle wrote:
> * On  6-Mar-2007 at 11:55PM PST, Mateusz Loskot said:
>>>> 1. load the whole geometry data into memory, into simple
>>>> structures  (arrays) - this is similar to how Manifold works
>>> This is doomed to lead into problems once you try to open a theme
>>> with 5 million polygons...
>> Yup, in many cases it is.  However, both approaches introduce some
>> problems.  In all-in-memory approach, the obvious assumption is a
>> user has a *lot* of RAM space, 4-8 GB.  But in turn, it provides the
>> fastest access to features (accessing RAM is faster than disk or
>> network).
> 
> This is sort of a blue sky idea, but we build overviews of rasters for
> exactly this sort of purpose. I can easily imagine designing some kind
> of OGR-based tool that constructs a directory of progressively
> generalized versions of a master vector dataset according to a
> hierarchy of scales, and then offers an access API that selects the
> generalization for a scale appropriate to the task at hand. I can't
> speculate whether this sort of tool would belong in GDAL/OGR the same
> way that gdaladdo etc. does.

Schuyler,

The idea is very interesting, but I'm pretty sure this kind of
strategies are application specific, so better they are implemented
outside OGR. Just my opinion.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From neteler at itc.it  Fri Mar  9 03:33:39 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] LANDSAT7 format question: GLCF
In-Reply-To: <f5a8aca50703081924g5513cd94od5dce106244e3358@mail.gmail.com>
References: <20070308230520.GB7627@bartok.itc.it>
	<f5a8aca50703081924g5513cd94od5dce106244e3358@mail.gmail.com>
Message-ID: <20070309083339.GB502@bartok.itc.it>

On Thu, Mar 08, 2007 at 10:24:24PM -0500, Mario Beauchamp wrote:
> Hi Markus,
> 
> On 3/8/07, Markus Neteler <neteler@itc.it> wrote:
> >Hi,
> >
> >for the upcoming OSGeo educational data set I would like
> >to process
> >ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat
> >(LANDSAT7)
> >Apparently the format isn't recognized or I am doing something
> >wrong.
> 
> You might want to take a look at
> http://glcf.umiacs.umd.edu/data/guide/fileformat/
> and http://glcf.umiacs.umd.edu/data/guide/namingconvention/
> 
> And I remember I had to do a bit of hacking to get GDAL to read those
> files but for the life of me, I cannot remember what!! Try gdalinfo on
> each .b0x, .hdr, .ip3, etc until it recognizes something...

This one-line shows that no file is recognized (despite
the .jpg previews):

for i in p* ; do echo "###################" ; echo $i ; gdalinfo $i ; done

/me sends positive energy to Mario to make him remember

thanks,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------


From aaime at openplans.org  Fri Mar  9 04:28:37 2007
From: aaime at openplans.org (aaime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Re: Rendering optimization [Re: Looking for huge vector
	dataset]
In-Reply-To: <45F0FE59.8000908@loskot.net>
References: <45E9A49B.80201@loskot.net>
	<45EAE55B.3030708@tkk.fi>	<45EAEBCC.5000500@loskot.net>
	<45EB056B.7090105@tkk.fi>	<45ED347D.4080604@loskot.net>
	<45ED6165.7090507@tkk.fi>	<45EE6EA4.4070007@loskot.net>	<20070308050134.GL15173@vishnu.tridity.org>
	<45F0FE59.8000908@loskot.net>
Message-ID: <45F128C5.5080507@openplans.org>

* On  6-Mar-2007 at 11:55PM PST, Mateusz Loskot said:
>>> >>>> 1. load the whole geometry data into memory, into simple
>>> >>>> structures  (arrays) - this is similar to how Manifold works
>> >>> This is doomed to lead into problems once you try to open a theme
>> >>> with 5 million polygons...
> >> Yup, in many cases it is.  However, both approaches introduce some
> >> problems.  In all-in-memory approach, the obvious assumption is a
> >> user has a *lot* of RAM space, 4-8 GB.  But in turn, it provides the
> >> fastest access to features (accessing RAM is faster than disk or
> >> network).
> 
> This is sort of a blue sky idea, but we build overviews of rasters for
> exactly this sort of purpose. I can easily imagine designing some kind
> of OGR-based tool that constructs a directory of progressively
> generalized versions of a master vector dataset according to a
> hierarchy of scales, and then offers an access API that selects the
> generalization for a scale appropriate to the task at hand. I can't
> speculate whether this sort of tool would belong in GDAL/OGR the same
> way that gdaladdo etc. does.


My 2 cents from Geotools/Geoserver land. We are using both tecniques in
fact, that is:
* our renderer subsystem gathers data from the datastores (the equivalent
   of OGR data sources) and do generalize them on the fly using a simple
   distance based algorithm before passing them to the rendering pipeline.
   This buys us some 30%-50% speedup, more if data needs to be reprojected
   because we try to generalize before reprojecting
* in Geoserver we have a demo site that uses TIGER and GNIS data sets for
   USA. Roads are stored in a postgis table where the original geometry
   is complemented by three other geometric columns, progressively more
   generalized. We use an SLD to decide which geometry to pick depending
   on the scale.
   The generalization process has been performed ad hoc, but in fact
   nothing prevents to write a tool that does it for every kind of data
   (and maybe that adds a marker column stating on which zoom level the
   features becomes visible).

Hope this helps
Cheers
Andrea

From jhhal at wmdata.com  Fri Mar  9 04:35:19 2007
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Read one band image to a bitmap in csharp
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89C027CF6DC@WMRI000166.corp.wmdata.net>

Good morning

 

I have tried to read a one banded tiff file (as seen below) and convert it to a bitmap, but I fail. My environment is CSharp and I use the swig interface. I have compiled and use version 1.4 of GDAL. 

 

Question:

 

1.

I have found a sample that describe how to use GDAL to convert a tree band image to a (DOTNET-) bitmap, but my image only have one band. How should I do in that case?

 

2.

I tried to find the extent information and as I understood I should use the dataset.getMetadata but I had no such a function available. I had getMetadata_List and getMetadata_Dict, but no one gave me the extent information. What are missing?

 

3.

Is it possible to create a bitmap based on a smaller rectangle of the input dataset?

 

 

Gdalinfo:

+++++++++++++++++++++++++++

Driver: GTiff/GeoTIFF

Size is 2000, 2000

Coordinate System is `'

Origin = (1250000.000000000000000,6150000.000000000000000)

Pixel Size = (25.000000000000000,-25.000000000000000)

Metadata:

  TIFFTAG_SOFTWARE=Handmade Software, Inc. Image Alchemy v1.11 Corner Coordinates:

Upper Left  ( 1250000.000, 6150000.000)

Lower Left  ( 1250000.000, 6100000.000)

Upper Right ( 1300000.000, 6150000.000)

Lower Right ( 1300000.000, 6100000.000)

Center      ( 1275000.000, 6125000.000)

Band 1 Block=2000x4 Type=Byte, ColorInterp=Palette

+++++++++++++++++++++++++++

 

Best Regards

Johan


 ___________________________________


Johan Hallgren


 

WM-data a LogicaCMG company 

Pelle Bergs backe 3

Box 1938, 791 19 Falun

Tel: 023-547 46 (int: +46-2354746)

Mobil: 070-588 44 28 (int: +46-705884428)

johan.e.hallgren@wmdata.com <BLOCKED::mailto:johan.e.hallgren@wmdata.com> 

http://www.wmdata.se <BLOCKED::/exchweb/bin/redir.asp?URL=http://www.wmdata.se/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/af34cb8c/attachment.html
From neteler at itc.it  Fri Mar  9 04:54:40 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] LANDSAT7 format question: GLCF
In-Reply-To: <20070309083339.GB502@bartok.itc.it>
References: <20070308230520.GB7627@bartok.itc.it>
	<f5a8aca50703081924g5513cd94od5dce106244e3358@mail.gmail.com>
	<20070309083339.GB502@bartok.itc.it>
Message-ID: <20070309095440.GC502@bartok.itc.it>

On Fri, Mar 09, 2007 at 09:33:39AM +0100, Markus Neteler wrote:
> On Thu, Mar 08, 2007 at 10:24:24PM -0500, Mario Beauchamp wrote:
> > On 3/8/07, Markus Neteler <neteler@itc.it> wrote:
> > >Hi,
> > >
> > >for the upcoming OSGeo educational data set I would like
> > >to process
> > >ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat
> > >(LANDSAT7)
> > >Apparently the format isn't recognized or I am doing something
> > >wrong.
> > 
> > You might want to take a look at
> > http://glcf.umiacs.umd.edu/data/guide/fileformat/
> > and http://glcf.umiacs.umd.edu/data/guide/namingconvention/
> > 
> > And I remember I had to do a bit of hacking to get GDAL to read those
> > files but for the life of me, I cannot remember what!! Try gdalinfo on
> > each .b0x, .hdr, .ip3, etc until it recognizes something...

I have hacked the .hdr file to get the correctly FILENAME extracted):

diff -u p016r035_7p20000331.hdr.org p016r035_7p20000331.hdr
--- p016r035_7p20000331.hdr.org 2007-03-09 10:26:53.000000000 +0100
+++ p016r035_7p20000331.hdr     2007-03-09 10:27:21.000000000 +0100
@@ -12,7 +12,7 @@
 START LINE # =      BLOCKING FACTOR =   REC SIZE  =200832593 PIXEL SIZE =14.25
 OUTPUT BITS PER PIXEL =8  ACQUIRED BITS PER PIXEL =8
 BANDS PRESENT =8
-FILENAME =L72016035_03520000331_B80.FSTFILENAME =
+FILENAMEL72016035_03520000331_B80.FST  FILENAME =
 FILENAME =                             FILENAME =
 FILENAME =                             FILENAME =

Then set a link (since the FILENAME is different):
ln -s p016r035_7p20000331.b01 L72016035_03520000331_B80.FST

Now it reports at least:
gdalinfo p016r035_7p20000331.hdr
Driver: FAST/EOSAT FAST Format
Size is 15352, 13081
Coordinate System is `'
Origin = (0.000000000000000,0.000000000000000)
Pixel Size = (1.000000000000000,1.000000000000000)
Metadata:
  ACQUISITION_DATE=20000331
  SATELLITE=LANDSAT7
  SENSOR=ETM+
  BIAS1=-5.675590383724904
  GAIN1=0.975590574459767
Corner Coordinates:
Upper Left  (   0.0000000,   0.0000000)
Lower Left  (       0.000,   13081.000)
Upper Right (   15352.000,       0.000)
Lower Right (   15352.000,   13081.000)
Center      (    7676.000,    6540.500)
Band 1 Block=15352x1 Type=Byte, ColorInterp=Undefined

The next trick would be to make it read UL, UR, LL, LR...
I assume that it is also shifted a bit (white space or such) in
ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat/p016r035_7p20000331.hdr

Maybe everything is there, but just the positions a bit messed
up in the hdr file. Unfortunately my C++ knowledge doesn't suffice to
modify 
frmts/raw/fastdataset.cpp
accordingly.

best,
Markus


------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------


From mateusz at loskot.net  Fri Mar  9 04:55:55 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] projection with ogr2ogr
In-Reply-To: <0JEM0002GEJ2MX10@mailmx1.und.nodak.edu>
References: <0JEM0002GEJ2MX10@mailmx1.und.nodak.edu>
Message-ID: <45F12F2B.6070700@loskot.net>

Lijian Shi wrote:
> Hi, Mateusz,
> 
> Thank you for your help. Now I have resolved the problem according 
> your suggestion.

Lijian.

Great!

> But I met a new problem: after reprojecting the shp file with the 
> command: ogr2ogr -t_srs WGS84 -s_srs NAD27 out.shp point.shp, I 
> overlay the out.shp and point.shp in ArcGIS. But there are some shift
>  between tow files. Is there any problem with my command?

I'm not a very experienced user of NAD27 (I live in Poland) but
AFAIK WGS84 =/= NAD27, so there are some differences (shifts)
like NAD27 has higher latitude and WGS84 higher longitude value
(counting in tens of feets).

If anyone could correct me here, I'd be thankful.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From szekerest at gmail.com  Fri Mar  9 05:11:54 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] C# fix for supporting the libtool builds
Message-ID: <f3b73b7d0703090211m1291ede2pfedc4a7b88a35575@mail.gmail.com>

Hi,

I've just submitted a fix to the C# GNUmakefile for supporting the
libtool builds. Currently the GDAL builbot at:

http://buildbot.osgeo.org:8500/

shows that the C# related stuff builds successfully. The only tests
we've done is the C# 'make test' functionality. In the future any
feedback will be appreciated if anyone discover unconvenient things
related to this issue.

FYI, for supporting the libtool builds the following modifications
have to be done:

1. Should rely on $(CXX) $(CC) and including GDALmake.opt for building
the .cpp .c .cxx files
2. $(LD) should be used instead of $(LD_SHARED) when linking the
shared libraries with libtool.
3. Should use $(SO_EXT) as the shared object extension (in every case)
4. When building with libtool .lo should be used instead of .o as the
object file extension.
5. Might specify some optional extra parameters for the libtool
command line as for example:
-rpath $(INST_LIB) -no-undefined -version-info
$(LIBGDAL_CURRENT):$(LIBGDAL_REVISION):$(LIBGDAL_AGE)

The csharp/GNUmakefile shows the implementation of these requirements.


Best regards,

Tamas

From poz at rocketmail.com  Fri Mar  9 06:52:54 2007
From: poz at rocketmail.com (chris pozsgai)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RE:  GCPs and Thin Plate Splines - C++
Message-ID: <20070309115254.86811.qmail@web50208.mail.re2.yahoo.com>

Hello again..
   
  I would like to repost my query to the mailing list regarding the thin plate
  splines... (I now have access to my code and the internet at the same time.)
   
  I was able to get reasonable results using the 
  GDALGCPsToGeoTransform function to generate a geo transform, but I would
  like to have an exact fit at the GCPs.  That drove me to delve further into the
  GDAL functionality where I ran across the warping functions.
   
  I tried to first use the gdal warper to be able to reproduce the results I got
  using the GDALGCPstoGeoTransform function with the warper.  I was
  not able to do that, but here is the code that I wrote.  My intention was to
  look at the TPS transform's ability to preserve the GCP values, but I could not
  get that to work, or even to reproduce the results from GDALGCPsToGeoTransform
  using regular GCP warping.
   
  I apologize for putting this much code on the mailing but I guess it's the best way....
   
  NOTE:  m_pRasterDataset is the dataset that will be used for rendering and is initially        
                 loaded as a JPEG dataset with a set of GCPs.  (The gcpCount and gcp list
                 are passed in the parameter list for clarity.)
   
   
  // This method transforms gcps and saves in the raster dataset.
// 0 = use GDALGCPsToGeoTrans, 1 = use GCP warp, 2 = use TPS GCP warp
bool CGDALGCPImageFile::transformGCPs(int gcpCount, const GDAL_GCP *pGCPList, int iMethod)
{
    // Ensure we have a good dataset and it hasn't already been loaded.
    bool bOK = m_pRasterDataset != NULL && !hasBeenLoaded();
      if(bOK)
    {
        // Get the regular transform.
       double adfGeoTransform[6];
       bOK = GDALGCPsToGeoTransform(gcpCount, pGCPList, adfGeoTransform, TRUE);
       if(iMethod == 0)
       {
           // Set it and return.
           m_pRasterDataset->SetGeoTransform(adfGeoTransform);
       }
       else
       {
           // Set up the warping.
          char *pszSrcWKT = NULL, *pszDstWKT = NULL;
          OGRSpatialReference oSRS;
          oSRS.SetWellKnownGeogCS("WGS84");
          oSRS.exportToWkt(&pszSrcWKT);
          oSRS.exportToWkt(&pszDstWKT);
        
           double defGeoTrans[6] = {0., 1., 0., 0., 0., 1.};
        //   Ensure we have set the geo transform as the default. 
          CPLErr err = m_pRasterDataset->SetGeoTransform(defGeoTrans);
           int i = 0;
        GDALWarpOptions *psWO = GDALCreateWarpOptions();
          psWO->eResampleAlg = GRA_NearestNeighbour;
        psWO->pfnProgress = GDALTProgressGCP;
         // Create the dest dataset.
      double adfDstGeoTransform[6] = {0., 1., 0., 0., 0., 1.};
        // Copy off the raster metadata into a new dataset.
     GDALDatasetH hSrcDS = CopyRasterWindow(m_pRasterDataset, 0, 0, 
     m_pRasterDataset->GetRasterXSize(), m_pRasterDataset->GetRasterYSize());
       int nBands = GDALGetRasterCount(hSrcDS);
     vector<GDALColorInterp> srcColors;
     for(int i = 1; i <= nBands; i++)
     {
        GDALRasterBand *poSrcBand = m_pRasterDataset->GetRasterBand(i);
        srcColors.push_back(poSrcBand->GetColorInterpretation());
     }
       if(bOK)
     {
       psWO->hSrcDS = m_pRasterDataset;
       psWO->hDstDS = NULL;
         psWO->nBandCount = GDALGetRasterCount(m_pRasterDataset);
       psWO->panSrcBands = (int *) CPLMalloc(sizeof(int) * psWO->nBandCount);
       psWO->panDstBands = (int *) CPLMalloc(sizeof(int) * psWO->nBandCount);
         for(int i = 0; i < psWO->nBandCount; i++)
       {
          psWO->panSrcBands[i] = i+1;
          psWO->panDstBands[i] = i+1;
       }
         // Use 0 for GCP regular warp and -1 for TPS warp.
       int iGCPWarp = (iMethod == 1) ? 0 : -1;
       psWO->pfnTransformer = GDALGenImgProjTransform;
   
         //   Use NULLs as parameters to get from pixel/line to geocoordinates
       psWO->pTransformerArg = GDALCreateGenImgProjTransformer(psWO->hSrcDS,      
             NULL, NULL, NULL,  TRUE, -1.0, iMethod);
        
         // Figure out the desired output bounds and the geo transform.
       int nPixels = 0, nLines = 0;
       CPLErr eErr = GDALSuggestedWarpOutput(m_pRasterDataset, psWO-  
               >pfnTransformer, psWO->pTransformerArg, adfDstGeoTransform, &nPixels,  
                &nLines);
         //  Update the transformer to include the output geotransform.                    
      GDALSetGenImgProjTransformerDstGeoTransform(psWO->pTransformerArg,  
           adfDstGeoTransform);
        if(bOK)
      {
         int nBands = GDALGetRasterCount(m_pRasterDataset);
         psWO->dfWarpMemoryLimit = nPixels*nLines*4*8*nBands; 
         psWO->nBandCount = nBands;
         psWO->panSrcBands = (int *) CPLMalloc(psWO->nBandCount*sizeof(int));
         psWO->panDstBands = (int *) CPLMalloc(psWO->nBandCount*sizeof(int));
           for(int  i = 0; i < psWO->nBandCount; i++)
         {
             psWO->panSrcBands[i] = i+1;
             psWO->panDstBands[i] = i+1;
         }
           psWO->nDstAlphaBand = 0;
           // Create a warped VRT dataset.
       GDALDatasetH hDstDS = GDALCreateWarpedVRT(m_pRasterDataset, nPixels,  
                 nLines, adfDstGeoTransform, psWO);
       bOK = (hDstDS != NULL);
         if(bOK)
       {
          // Write out the projection definition. 
         GDALSetProjection(hDstDS, pszDstWKT);
               
          // Copy the color table, if required.
         GDALColorTableH hCT = GDALGetRasterColorTable(GDALGetRasterBand
                   (m_pRasterDataset, 1));
      
            if(hCT != NULL)
          {
             GDALSetRasterColorTable(GDALGetRasterBand(hDstDS,1), hCT);
          }
            // Initialize and execute the warp operation. 
          GDALWarpOperation *oOperation = new GDALWarpOperation;
          psWO->hSrcDS = m_pRasterDataset;
          psWO->hDstDS = hDstDS;              
          for(int  i = 0; i < nBands; i++)
          {
                ((GDALRasterBand *) GDALGetRasterBand(hDstDS,i+1))->SetAccess
                  (GA_Update); 
          }
      
          eErr = oOperation->Initialize(psWO);
          if (eErr == CE_None)
          {
              eErr = oOperation->ChunkAndWarpMulti(0, 0, GDALGetRasterXSize(hDstDS), 
                      GDALGetRasterYSize(hDstDS));
          }          
          if(eErr == CE_None)
          {
               //  Set the colors in the dest.
              GDALRasterBand *pBand = NULL;
              GDALDataset *pDstDS = (GDALDataset *)hDstDS;
                for(int i = 1; i <= nBands; i++)
              {
                  pBand = pDstDS->GetRasterBand(i);
                  GDALColorInterp gColor = srcColors[i - 1];
                  pBand->SetColorInterpretation(gColor);
              }
                // We can overwrite the destination as the source dataset.
              delete m_pRasterDataset;
              m_pRasterDataset = (GDALDataset *)hDstDS;
              m_pRasterDataset->SetGeoTransform(adfDstGeoTransform);
             }
         }
    }                                        
   }
        // Clean up.
       GDALDestroyGenImgProjTransformer(psWO->pTransformerArg);
       GDALDestroyWarpOptions(psWO);
  }
 }
 return bOK;
}

   
  I appreciate any guidance that can be provided!!
   
  Thanks,
   
  Chris Pozsgai



 
---------------------------------
We won't tell. Get more on shows you hate to love
(and love to hate): Yahoo! TV's Guilty Pleasures list.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/9281aa54/attachment.html
From dany.geotools at gmail.com  Fri Mar  9 07:01:49 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
In-Reply-To: <7221db410703090158p5412f759h3f330126255ac179@mail.gmail.com>
References: <7221db410703090158p5412f759h3f330126255ac179@mail.gmail.com>
Message-ID: <7221db410703090401k72ff33f0ne6eaa529bf550ffa@mail.gmail.com>

Hi list,I'm trying to build GDAL with kakadu (5.2.2) support under windows
XP.

I have all the required source files (.h, .cpp) and I already built the .obj
files, using the "ready to use" Visual C++ solutions files contained within
the kakadu source tree (apps, coresys).

By analyzing the makefile.vc contained within gdal/frmts/jp2kak, several
.obj files are required to build GDAL.
I tried copying "some" .OBJ files to a folder and set this folder in
NMAKE.OPT.  (With "some" I means .obj files coming from coresys/debug,
kdu_aux/debug  and something else).

However, I cant successfully build.

Can someone help me please, listing the required .obj files?

Thank you very much.

-- 
Best Regards,
Daniele
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/650227e2/attachment.html
From nbarker at ittvis.com  Fri Mar  9 07:17:50 2007
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131E65@bath.uk.rsinc.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: makefile.vc
Type: application/octet-stream
Size: 1103 bytes
Desc: makefile.vc
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/d605de20/makefile.obj
From dany.geotools at gmail.com  Fri Mar  9 09:07:49 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E8131E65@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131E65@bath.uk.rsinc.com>
Message-ID: <7221db410703090607x4dc9bdbeqd688a83418330f57@mail.gmail.com>

Norman,

Thanks a lot for your help.

I tweaked a bit your makefile since my .obj files (coming from "Visual C++
solution" Build) are located in several different folders instead of
"\make".
(Furthermore, searching in main kakadu folder, I found 11 "jp2.obj" files, 6
"jpx.obj" files, ... However,  90% of obj. files having the same name (as an
instance, 10 jp2.obj files of 11) have the same size. Thus, I deduced to use
one of them, which are mainly contained in "compress\debug" or
"expand\debug" folder).

However, GDAL building process throws many "unresolved external" linking
errors.

For almost any external format, NMAKE.OPT defines a couple of variables
FORMATXX_DIR and a FORMATXX_LIB (Like, as an instance, HDF4_DIR/HDF4_LIB,
ECWDIR/ECWLIB, and much more...).
I tried to define a KAKLIB variable linking to kakadu/lib (containing
kdu_v52D.lib and kdu_a52D lib) but errors still exist.

Surely, I'm missing something to do or failing some step. :-(
Can you help me again?

Thank you very much.

Best Regards,
Daniele Romagnoli


On 3/9/07, Norman Barker <nbarker@ittvis.com> wrote:
>
>  Daniele,
>
>
>
> The attached make file worked for me, but you may have to tweak it.
>
>
>
> Norman
>
>
>  ------------------------------
>
> *From:* gdal-dev-bounces@lists.maptools.org [mailto:
> gdal-dev-bounces@lists.maptools.org] *On Behalf Of *Daniele Romagnoli
> *Sent:* 09 March 2007 12:02
> *To:* gdal-dev@lists.maptools.org; Simone
> *Subject:* [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
>
>
>
> Hi list,
>
> I'm trying to build GDAL with kakadu (5.2.2) support under windows XP.
>
>
>
> I have all the required source files (.h, .cpp) and I already built the
> .obj files, using the "ready to use" Visual C++ solutions files
> contained within the kakadu source tree (apps, coresys).
>
>
>
> By analyzing the makefile.vc contained within gdal/frmts/jp2kak, several
> .obj files are required to build GDAL.
>
> I tried copying "some" .OBJ files to a folder and set this folder in
> NMAKE.OPT.  (With "some" I means .obj files coming from coresys/debug,
> kdu_aux/debug  and something else).
>
>
>
> However, I cant successfully build.
>
>
>
> Can someone help me please, listing the required .obj files?
>
>
>
> Thank you very much.
>
>
> --
> Best Regards,
> Daniele
>
>


-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/092527c1/attachment.html
From nbarker at ittvis.com  Fri Mar  9 09:27:39 2007
From: nbarker at ittvis.com (Norman Barker)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
Message-ID: <B67A5FB7A8114B47A70517C9C0D102E8131E67@bath.uk.rsinc.com>

Daniele,

 

Sorry you got me on a Friday afternoon :-) , if you add (change the
path)

 

# Any extra libraries needed on this platform?

ADD_LIBS = C:\Kakadu\lib\kdu_v51R.lib

 

to nmake.opt

 

I think everything should be ok

 

Norman

 

________________________________

From: Daniele Romagnoli [mailto:dany.geotools@gmail.com] 
Sent: 09 March 2007 14:08
To: Norman Barker; gdal-dev@lists.maptools.org; Simone
Subject: Re: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.

 

Norman,

Thanks a lot for your help.

I tweaked a bit your makefile since my .obj files (coming from "Visual
C++ solution" Build) are located in several different folders instead of
"\make". 
(Furthermore, searching in main kakadu folder, I found 11 "jp2.obj"
files, 6 "jpx.obj" files, ... However,  90% of obj. files having the
same name (as an instance, 10 jp2.obj files of 11) have the same size.
Thus, I deduced to use one of them, which are mainly contained in
"compress\debug" or "expand\debug" folder). 

However, GDAL building process throws many "unresolved external" linking
errors.

For almost any external format, NMAKE.OPT defines a couple of variables
FORMATXX_DIR and a FORMATXX_LIB (Like, as an instance,
HDF4_DIR/HDF4_LIB, ECWDIR/ECWLIB, and much more...). 
I tried to define a KAKLIB variable linking to kakadu/lib (containing
kdu_v52D.lib and kdu_a52D lib) but errors still exist.

Surely, I'm missing something to do or failing some step. :-(
Can you help me again? 

Thank you very much.

Best Regards,
Daniele Romagnoli



On 3/9/07, Norman Barker <nbarker@ittvis.com > wrote:

Daniele,

 

The attached make file worked for me, but you may have to tweak it.

 

Norman

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Daniele
Romagnoli
Sent: 09 March 2007 12:02
To: gdal-dev@lists.maptools.org; Simone
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.

 

Hi list,

I'm trying to build GDAL with kakadu (5.2.2) support under windows XP.

 

I have all the required source files (.h, .cpp) and I already built the
.obj files, using the "ready to use" Visual C++ solutions files
contained within the kakadu source tree (apps, coresys).

 

By analyzing the makefile.vc contained within gdal/frmts/jp2kak, several
.obj files are required to build GDAL. 

I tried copying "some" .OBJ files to a folder and set this folder in
NMAKE.OPT.  (With "some" I means .obj files coming from coresys/debug,
kdu_aux/debug  and something else).

 

However, I cant successfully build. 

 

Can someone help me please, listing the required .obj files?

 

Thank you very much.


-- 
Best Regards,
Daniele 







-- 
Best Regards,
Daniele Romagnoli 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/3dc7b8ac/attachment.html
From howard.urmenyi at geospatialvision.com  Fri Mar  9 09:34:20 2007
From: howard.urmenyi at geospatialvision.com (Howard Urmenyi)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Storing 2.5D elevations in Mapinfo .tab files
Message-ID: <6BF44CD613458D479057BDB27207F2E0016791C5@omgsvr02.omg.local>

Hi,

 

I've been using OGR to read/write MapInfo .tab files with 2D lines and
string fields successfully (thanks!) but I can't figure out how to save
out per-vertex elevation data.

 

 I've tried setting OGRLineString coordinate dimensions to "3" and
saving out the .tab, but on reading it back it's always been flattened
to 2D

 

Do you know of any way to store 3D or 2.5D lines in a MapInfo .tab file?

 

Thanks and regards,

Howard

 

 


________________________________________________________________________
This e-mail, and any attachment, is confidential. If you have received it in error, do not use or disclose the information in any way, notify me immediately, and please delete it from your system.
________________________________________________________________________
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/5dd02778/attachment.html
From szekerest at gmail.com  Fri Mar  9 09:38:10 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Read one band image to a bitmap in csharp
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89C027CF6DC@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89C027CF6DC@WMRI000166.corp.wmdata.net>
Message-ID: <f3b73b7d0703090638n75e5d6e8od2aab76ea06d40ef@mail.gmail.com>

2007/3/9, Hallgren Johan E <jhhal@wmdata.com>:

>
> I have found a sample that describe how to use GDAL to convert a tree band
> image to a (DOTNET-) bitmap, but my image only have one band. How should I
> do in that case?
>

I've just updated the GDALRead.cs sample with a support for reading
images with GCI_GrayIndex and GCI_PaletteIndex bands.
When reading the images with indexed color interpretation you should
retrieve the color by using
band.GetRasterColorTable().GetColorEntry(). See the referred sample
for more details.

>
> I tried to find the extent information and as I understood I should use the
> dataset.getMetadata but I had no such a function available. I had
> getMetadata_List and getMetadata_Dict, but no one gave me the extent
> information. What are missing?
>
>

The GDALInfo.cs sample shows how to read the metadata information.
Checkout and use the current SVN HEAD when using this feature.

>
> Is it possible to create a bitmap based on a smaller rectangle of the input
> dataset?
>
>

You can use  xOff,  yOff,  xSize,  ySize parameters of ReadRaster to
specify the desired offset and image size.

Best regards,

Tamas

From dany.geotools at gmail.com  Fri Mar  9 09:40:47 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
In-Reply-To: <B67A5FB7A8114B47A70517C9C0D102E8131E67@bath.uk.rsinc.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131E67@bath.uk.rsinc.com>
Message-ID: <7221db410703090640y7aa24ce7qc9ad390ee22ab541@mail.gmail.com>

On 3/9/07, Norman Barker <nbarker@ittvis.com> wrote:
>
>  Daniele,
>
>
>
> Sorry you got me on a Friday afternoon J , if you add (change the path)
>
>
>
> # Any extra libraries needed on this platform?
>
> ADD_LIBS = C:\Kakadu\lib\kdu_v51R.lib
>
>
>
> to nmake.opt
>

I already tried this solution, prior to write my previous email :-(   (After
attempting the "KDULIB" solution :D )
Without success...

Just another question:
Do you used command line NMAKE instead of Visual C++ solution in order to
build your *.obj files?
In such a case, can you show me your kakadu makefile?

I tried editing "Makefile-generic" from "apps/make" and building kakadu
using NMAKE without results...


I think everything should be ok
>
>
>
> Norman
>
Thanks again.

Best regards,
Daniele Romagnoli



------------------------------
>
> *From:* Daniele Romagnoli [mailto:dany.geotools@gmail.com]
> *Sent:* 09 March 2007 14:08
> *To:* Norman Barker; gdal-dev@lists.maptools.org; Simone
> *Subject:* Re: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
>
>
>
> Norman,
>
> Thanks a lot for your help.
>
> I tweaked a bit your makefile since my .obj files (coming from "Visual C++
> solution" Build) are located in several different folders instead of
> "\make".
> (Furthermore, searching in main kakadu folder, I found 11 "jp2.obj" files,
> 6 "jpx.obj" files, ... However,  90% of obj. files having the same name
> (as an instance, 10 jp2.obj files of 11) have the same size. Thus, I
> deduced to use one of them, which are mainly contained in "compress\debug"
> or "expand\debug" folder).
>
> However, GDAL building process throws many "unresolved external" linking
> errors.
>
> For almost any external format, NMAKE.OPT defines a couple of variables
> FORMATXX_DIR and a FORMATXX_LIB (Like, as an instance, HDF4_DIR/HDF4_LIB,
> ECWDIR/ECWLIB, and much more...).
> I tried to define a KAKLIB variable linking to kakadu/lib (containing
> kdu_v52D.lib and kdu_a52D lib) but errors still exist.
>
> Surely, I'm missing something to do or failing some step. :-(
> Can you help me again?
>
> Thank you very much.
>
> Best Regards,
> Daniele Romagnoli
>
>  On 3/9/07, *Norman Barker* <nbarker@ittvis.com > wrote:
>
> Daniele,
>
>
>
> The attached make file worked for me, but you may have to tweak it.
>
>
>
> Norman
>
>
>  ------------------------------
>
> *From:* gdal-dev-bounces@lists.maptools.org [mailto:
> gdal-dev-bounces@lists.maptools.org] *On Behalf Of *Daniele Romagnoli
> *Sent:* 09 March 2007 12:02
> *To:* gdal-dev@lists.maptools.org; Simone
> *Subject:* [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
>
>
>
> Hi list,
>
> I'm trying to build GDAL with kakadu (5.2.2) support under windows XP.
>
>
>
> I have all the required source files (.h, .cpp) and I already built the
> .obj files, using the "ready to use" Visual C++ solutions files
> contained within the kakadu source tree (apps, coresys).
>
>
>
> By analyzing the makefile.vc contained within gdal/frmts/jp2kak, several
> .obj files are required to build GDAL.
>
> I tried copying "some" .OBJ files to a folder and set this folder in
> NMAKE.OPT.  (With "some" I means .obj files coming from coresys/debug,
> kdu_aux/debug  and something else).
>
>
>
> However, I cant successfully build.
>
>
>
> Can someone help me please, listing the required .obj files?
>
>
>
> Thank you very much.
>
>
> --
> Best Regards,
> Daniele
>
>
>
>
>
> --
> Best Regards,
> Daniele Romagnoli
>



-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/9ede27ad/attachment.html
From alexandre.leroux at ec.gc.ca  Fri Mar  9 10:07:25 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] WMS support in GDAL?
In-Reply-To: <45CCD46D.5090907@pobox.com>
References: <45CCC962.3030306@ec.gc.ca> <45CCD46D.5090907@pobox.com>
Message-ID: <45F1782D.5010601@ec.gc.ca>


Hi Frank et al,


 > I think there has been someone who has implemented a WMS driver
 > for GDAL for their internal use, but I gather it would have been
 > substantial work to clean it up for general use.

Do you know who was that person? It's probable we'll divert some 
resources to implement such a WMS driver here (if we do, we'll share it 
with the GDAL community, of course) and if there's already some work 
done, we may benefit from the code or their experience!

Thanks,

Alex


Frank Warmerdam wrote:
> Alexandre Leroux wrote:
>>
>> Hi list,
>>
>> Tried to google the answer but wasn't able to find clues (even if this 
>> was doubtlessly previously discussed). Will there eventually be WMS 
>> support within GDAL itself? Would developing such a driver make sense 
>> (considering a WMS layer is static and not much can be done with it 
>> other than displaying it)?
> 
> Alexander,
> 
> I think there has been someone who has implemented a WMS driver for GDAL
> for their internal use, but I gather it would have been substantial work
> to clean it up for general use.
> 
> I think it would be pretty easy to implement, given the WCS driver as a
> guide.  But I don't have any client interest in it at this time, so I am
> not actively pursuing it.
> 
> The main challenge with WMS compared to WCS is that it is very hard to
> establish the nominal bounds and pixel resolution of a WMS service which
> we need to represent it as a GDAL dataset.
> 
> Best regards,

-- 
Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca

From neteler at itc.it  Fri Mar  9 10:03:45 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] LANDSAT7 format question: GLCF
In-Reply-To: <20070309095440.GC502@bartok.itc.it>
References: <20070308230520.GB7627@bartok.itc.it>
	<f5a8aca50703081924g5513cd94od5dce106244e3358@mail.gmail.com>
	<20070309083339.GB502@bartok.itc.it>
	<20070309095440.GC502@bartok.itc.it>
Message-ID: <20070309150345.GA25991@bartok.itc.it>

On Fri, Mar 09, 2007 at 10:54:40AM +0100, Markus Neteler wrote:
> On Fri, Mar 09, 2007 at 09:33:39AM +0100, Markus Neteler wrote:
> > On Thu, Mar 08, 2007 at 10:24:24PM -0500, Mario Beauchamp wrote:
> > > On 3/8/07, Markus Neteler <neteler@itc.it> wrote:
> > > >Hi,
> > > >
> > > >for the upcoming OSGeo educational data set I would like
> > > >to process
> > > >ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat
> > > >(LANDSAT7)
> > > >Apparently the format isn't recognized or I am doing something
> > > >wrong.
> > > 
> > > You might want to take a look at
> > > http://glcf.umiacs.umd.edu/data/guide/fileformat/
> > > and http://glcf.umiacs.umd.edu/data/guide/namingconvention/
> > > 
> > > And I remember I had to do a bit of hacking to get GDAL to read those
> > > files but for the life of me, I cannot remember what!! Try gdalinfo on
> > > each .b0x, .hdr, .ip3, etc until it recognizes something...
> 
> I have hacked the .hdr file to get the correctly FILENAME extracted):
> 
> diff -u p016r035_7p20000331.hdr.org p016r035_7p20000331.hdr
> --- p016r035_7p20000331.hdr.org 2007-03-09 10:26:53.000000000 +0100
> +++ p016r035_7p20000331.hdr     2007-03-09 10:27:21.000000000 +0100
> @@ -12,7 +12,7 @@
>  START LINE # =      BLOCKING FACTOR =   REC SIZE  =200832593 PIXEL SIZE =14.25
>  OUTPUT BITS PER PIXEL =8  ACQUIRED BITS PER PIXEL =8
>  BANDS PRESENT =8
> -FILENAME =L72016035_03520000331_B80.FSTFILENAME =
> +FILENAMEL72016035_03520000331_B80.FST  FILENAME =
>  FILENAME =                             FILENAME =
>  FILENAME =                             FILENAME =
> 
> Then set a link (since the FILENAME is different):
> ln -s p016r035_7p20000331.b01 L72016035_03520000331_B80.FST
> 
> Now it reports at least:
> gdalinfo p016r035_7p20000331.hdr
> Driver: FAST/EOSAT FAST Format
> Size is 15352, 13081
> Coordinate System is `'
> Origin = (0.000000000000000,0.000000000000000)
> Pixel Size = (1.000000000000000,1.000000000000000)
> Metadata:
>   ACQUISITION_DATE=20000331
>   SATELLITE=LANDSAT7
>   SENSOR=ETM+
>   BIAS1=-5.675590383724904
>   GAIN1=0.975590574459767
> Corner Coordinates:
> Upper Left  (   0.0000000,   0.0000000)
> Lower Left  (       0.000,   13081.000)
> Upper Right (   15352.000,       0.000)
> Lower Right (   15352.000,   13081.000)
> Center      (    7676.000,    6540.500)
> Band 1 Block=15352x1 Type=Byte, ColorInterp=Undefined
> 
> The next trick would be to make it read UL, UR, LL, LR...
> I assume that it is also shifted a bit (white space or such) in
> ftp://ftp.glcf.umiacs.umd.edu/glcf/Landsat/WRS2/p016/r035/p016r035_7x20000331.ETM-EarthSat/p016r035_7p20000331.hdr
> 
> Maybe everything is there, but just the positions a bit messed
> up in the hdr file. Unfortunately my C++ knowledge doesn't suffice to
> modify 
> frmts/raw/fastdataset.cpp
> accordingly.

We made a test with GDAL 1.3.2. It works.
This indicates that the FAST LANDSAT header file parser
may be broken in SVN HEAD.

Regards,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------


From mateusz at loskot.net  Fri Mar  9 10:21:09 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RDBMSes with multiple geometry columns
In-Reply-To: <45F0A50E.2000505@pobox.com>
References: <45F0A50E.2000505@pobox.com>
Message-ID: <45F17B65.2070509@loskot.net>

Frank Warmerdam wrote:
> Folks,
> 
> Mateusz has been looking into bug 1476 related to postgis tables with
>  multiple geometry columns:
> 
> http://bugzilla.remotesensing.org/show_bug.cgi?id=1476
> 
> Mateusz raised the question of whether we should refactor the OGR API
>  to support multiple geometry columns.  As usual, I am very leery of 
> API breakage, and responded as follows.

Frank,

Generally, I see two "directions" of possible solutions:
1) Refactor or extend current OGR interface

2) Handle it with current interface but introducing some new logic and
semantic of some PostGIS operations.

The latter is what you've included in reply on my analysis.

> """ Mateusz,
> 
> In the short to medium term we can't practically reengineer OGR to
> support multiple geometry columns properly.  What we might consider
> are special ways of selecting the geometry column to use.

Right, that's what I consider as direction 2).

> I can quickly imagine 3 scenarios that might apply.
> 
> 1) We actually offer distinct appearing layers for each geometry 
> column.  So if the table roads has two geometry columns, one called
> centerline, and one called boundaries we might show the application a
> layer called roads_centerline, and roads_boundaries.

I like this option very much.
I think it's pretty logical and doesn't cause any
earthquake in OGR user's world.
Hopefully, existing client applications may handle this extension
transparently - just a few new layers will be added to a listing
or legend.

> 2) We could provide a mechanism in the datasource connection string
> where a particular geometry column could be selected for a given
> table.  For instance I think we already support listing the tables to
> be represented as layers in the PG driver connection string.  We
> could allow adding a geometry column in brackets after the table name
> as a way of selecting the geometry column to use.  If unspecified,
> the first geometry column would be used.

This one is harder to handle by users, I suppose.

> 3) We could extend the OGR API with a way of listing the geometry
> columns available for a layer, and a method for selecting a
> particular one.  Note, we already have the informative
> GetGeometryColumn() method which for some RDBMS providers returns the
> name of the currently used geometry column.
> 
> I'm inclined to pursue option (1) in the postgis driver for the time
> being as it requires no changes to public apis and applications.  I
> think option (3) should be a longer term goal. """

I agree with your opinion.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From daniel112b at gmail.com  Fri Mar  9 10:28:12 2007
From: daniel112b at gmail.com (Daniel)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Re: Creating overviews for a HFA file opened as read-only
In-Reply-To: <962626470703090716p74b028e9x203f73bf421e81f2@mail.gmail.com>
References: <962626470703090716p74b028e9x203f73bf421e81f2@mail.gmail.com>
Message-ID: <962626470703090728h4d394c94kfadfd378e39ddfdd@mail.gmail.com>

Hi,

If i open an Erdas .img file in read-only mode i can't create any
overviews. The .ovr overview support was removed from the HFA driver a
while ago and before that a .ovr file was created when a .img files
was opened as read-only but no i just get "BuildOverviews() not
supported for this dataset"

HFADataset::IBuildOverviews calls GDALDataset::IBuildOverviews if
opened as read-only but that does not work anymore since the
initialization of the ovrManager was removed (Changeset 8358)

if( GetAccess() == GA_ReadOnly )
        return GDALDataset::IBuildOverviews(

Is this the desired behavior?

Regards,
   Daniel B?ck


From mateusz at loskot.net  Fri Mar  9 10:45:47 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] WMS support in GDAL?
In-Reply-To: <45F1782D.5010601@ec.gc.ca>
References: <45CCC962.3030306@ec.gc.ca> <45CCD46D.5090907@pobox.com>
	<45F1782D.5010601@ec.gc.ca>
Message-ID: <45F1812B.3040404@loskot.net>

Alexandre Leroux wrote:
> 
> Hi Frank et al,
> 
> 
>> I think there has been someone who has implemented a WMS driver for
>> GDAL for their internal use, but I gather it would have been 
>> substantial work to clean it up for general use.
> 
> Do you know who was that person? It's probable we'll divert some 
> resources to implement such a WMS driver here (if we do, we'll share
> it with the GDAL community, of course) and if there's already some
> work done, we may benefit from the code or their experience!

Alexandre,

I will likely face this subject in a few months (June) because I need
WMS driver for MOSS4G project.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Tom.Kralidis at ec.gc.ca  Fri Mar  9 13:16:35 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
Message-ID: <2576812186CDD411BF1500508B6DCE9511B30C84@ecnwri1.ontario.int.ec.gc.ca>


Hi,

I've been thinking of this for awhile now (since I bought my GPS a few
months ago :) ) 

Does OGR have any GPX (http://www.topografix.com/gpx.asp) support at
all?

A couple of scenarios:

- user would like to upload / visualize their GPX formatted waypoints on
a web mapping application

- user would like to export their geospatial data into GPX format to
load onto their GPS unit

I know one can hack this via mapscript and / or OGRs API, but does
anyone think there's value in making this a generic functionality?

Also, I initially thought this would be neat MapServer (mapgpx.c)
addition, but maybe it's better fitted elsewhere for broader leverage
potential?  Hence my email here.

Comments?

..Tom





From warmerdam at pobox.com  Fri Mar  9 14:30:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RE:  GCPs and Thin Plate Splines - C++
In-Reply-To: <20070309115254.86811.qmail@web50208.mail.re2.yahoo.com>
References: <20070309115254.86811.qmail@web50208.mail.re2.yahoo.com>
Message-ID: <45F1B5E2.1010309@pobox.com>

chris pozsgai wrote:
> Hello again..
>  
> I would like to repost my query to the mailing list regarding the thin plate
> splines... (I now have access to my code and the internet at the same time.)
>  
> I was able to get reasonable results using the
> GDALGCPsToGeoTransform function to generate a geo transform, but I would
> like to have an exact fit at the GCPs.  That drove me to delve further 
> into the
> GDAL functionality where I ran across the warping functions.
>  
> I tried to first use the gdal warper to be able to reproduce the results 
> I got
> using the GDALGCPstoGeoTransform function with the warper.  I was
> not able to do that, but here is the code that I wrote.  My intention was to
> look at the TPS transform's ability to preserve the GCP values, but I 
> could not
> get that to work, or even to reproduce the results from 
> GDALGCPsToGeoTransform
> using regular GCP warping.
>  
> I apologize for putting this much code on the mailing but I guess it's 
> the best way....

Chris,

I'm sorry for being dense, but I've lost track of what you are asking us to
look for in the following code.  Are you having trouble getting the warp
api to work with the GCP transformer (using polynomials)?  Or is it just
the TPS that wasn't working for you?  Is it that you get a poor warp or
that nothing works?

I hesitate to try and grok a substantial amount of code in the hopes of
then realizing what it is you wanted me to look for.  This is very time
and frustration intensive.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Fri Mar  9 14:25:56 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
In-Reply-To: <2576812186CDD411BF1500508B6DCE9511B30C84@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE9511B30C84@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <45F1B4C4.5030709@loskot.net>

Kralidis,Tom [Burlington] wrote:
> 
> Does OGR have any GPX (http://www.topografix.com/gpx.asp) support at
> all?

No, it does not.

However, you can try GPSBabel -> CSV -> OGR

> A couple of scenarios:
> 
> - user would like to upload / visualize their GPX formatted waypoints on
> a web mapping application
>
> - user would like to export their geospatial data into GPX format to
> load onto their GPS unit

Good ideas.

> I know one can hack this via mapscript and / or OGRs API, but does
> anyone think there's value in making this a generic functionality?

Personally, I'd say: why not.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Tom.Kralidis at ec.gc.ca  Fri Mar  9 14:27:41 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
Message-ID: <2576812186CDD411BF1500508B6DCE95103E31EA@ecnwri1.ontario.int.ec.gc.ca>

 

> -----Original Message-----
> From: Mateusz Loskot [mailto:mateusz@loskot.net] 
> Sent: 09 March, 2007 2:26 PM
> To: Kralidis,Tom [Burlington]
> Cc: gdal-dev
> Subject: Re: [Gdal-dev] GPX format support
> 
> Kralidis,Tom [Burlington] wrote:
> > 
> > Does OGR have any GPX (http://www.topografix.com/gpx.asp) 
> support at 
> > all?
> 
> No, it does not.
> 
> However, you can try GPSBabel -> CSV -> OGR
> 
> > A couple of scenarios:
> > 
> > - user would like to upload / visualize their GPX formatted 
> waypoints 
> > on a web mapping application
> >
> > - user would like to export their geospatial data into GPX 
> format to 
> > load onto their GPS unit
> 
> Good ideas.
> 
> > I know one can hack this via mapscript and / or OGRs API, but does 
> > anyone think there's value in making this a generic functionality?
> 
> Personally, I'd say: why not.
>

Glad you agree :)  What do others think?  Additionally, would OGR be the
best home for this?

 
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
> 


From warmerdam at pobox.com  Fri Mar  9 16:51:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
In-Reply-To: <2576812186CDD411BF1500508B6DCE95103E31EA@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE95103E31EA@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <45F1D6F4.5000206@pobox.com>

Kralidis,Tom [Burlington] wrote:
> Glad you agree :)  What do others think?  Additionally, would OGR be the
> best home for this?

Tom,

I think it is desirable to add a GPX driver to OGR for reading and writing.
However, as far as I know MapServer currently has no mechanism to return
feature data using OGR to write it.  This might be a desirable addition to
mapserver - perhaps as part of the WFS server protocol?

In any event, getting GPX into OGR for read and write would have a variety
of applications right away.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From archer at eskimo.com  Fri Mar  9 16:17:57 2007
From: archer at eskimo.com (Curt, WE7U)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
In-Reply-To: <45F1D6F4.5000206@pobox.com>
References: <2576812186CDD411BF1500508B6DCE95103E31EA@ecnwri1.ontario.int.ec.gc.ca>
	<45F1D6F4.5000206@pobox.com>
Message-ID: <Pine.SUN.4.58.0703091316030.15670@eskimo.com>

On Fri, 9 Mar 2007, Frank Warmerdam wrote:

> I think it is desirable to add a GPX driver to OGR for reading and writing.
> However, as far as I know MapServer currently has no mechanism to return
> feature data using OGR to write it.  This might be a desirable addition to
> mapserver - perhaps as part of the WFS server protocol?
>
> In any event, getting GPX into OGR for read and write would have a variety
> of applications right away.

I don't know if this is of interest, but I've personally used
"gpsbabel" to snag user-drawn data out of National Geographic Topo
save-files, saving them to GPX format.  I then used "gpx2shape.pl"
to convert them to Shapefiles, at which point I could suck them into
any GIS app.  Worked well.

--
Curt, WE7U.   APRS Client Comparisons: http://www.eskimo.com/~archer
"Lotto:    A tax on people who are bad at math." -- unknown
"Windows:  Microsoft's tax on computer illiterates." -- WE7U
"The world DOES revolve around me:  I picked the coordinate system!"

From perrygeo at gmail.com  Fri Mar  9 16:28:42 2007
From: perrygeo at gmail.com (Matthew Perry)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
In-Reply-To: <Pine.SUN.4.58.0703091316030.15670@eskimo.com>
References: <2576812186CDD411BF1500508B6DCE95103E31EA@ecnwri1.ontario.int.ec.gc.ca>
	<45F1D6F4.5000206@pobox.com>
	<Pine.SUN.4.58.0703091316030.15670@eskimo.com>
Message-ID: <5383fa5e0703091328y5c50cde9s517fb7c316f4abbe@mail.gmail.com>

On 3/9/07, Curt, WE7U <archer@eskimo.com> wrote:
>
> I don't know if this is of interest, but I've personally used
> "gpsbabel" to snag user-drawn data out of National Geographic Topo
> save-files, saving them to GPX format.  I then used "gpx2shape.pl"
> to convert them to Shapefiles, at which point I could suck them into
> any GIS app.  Worked well.



gpx2shp, though written in C not C++, might provide some good code/ideas
related to translating gpx constructs into a GIS data structure.

http://gpx2shp.sourceforge.jp/

-- 
Matthew T. Perry
http://www.perrygeo.net
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070309/f236a966/attachment.html
From starged at gmail.com  Fri Mar  9 22:13:29 2007
From: starged at gmail.com (Mario Beauchamp)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] LANDSAT7 format question: GLCF
In-Reply-To: <20070309150345.GA25991@bartok.itc.it>
References: <20070308230520.GB7627@bartok.itc.it>
	<f5a8aca50703081924g5513cd94od5dce106244e3358@mail.gmail.com>
	<20070309083339.GB502@bartok.itc.it>
	<20070309095440.GC502@bartok.itc.it>
	<20070309150345.GA25991@bartok.itc.it>
Message-ID: <f5a8aca50703091913h68567a1dk907fde5f49f85876@mail.gmail.com>

Hi Markus,

On 3/9/07, Markus Neteler <neteler@itc.it> wrote:
>
> >
> > The next trick would be to make it read UL, UR, LL, LR...

I kinda remember now that I used vrt files to combine the 321 bands into RGB and
georeference them at the same time and converted to tiff with gdal_translate.

> We made a test with GDAL 1.3.2. It works.
> This indicates that the FAST LANDSAT header file parser
> may be broken in SVN HEAD.

I have to mention that I was using a much older GDAL at the time and
the FAST format
for L7 was not fully implemented. I haven't tried recently...

And historically, GDAL has had probs with some of the GLCF stuff.

cheers
-- 
Mario B.

From dany.geotools at gmail.com  Sat Mar 10 04:37:22 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
In-Reply-To: <7221db410703090640y7aa24ce7qc9ad390ee22ab541@mail.gmail.com>
References: <B67A5FB7A8114B47A70517C9C0D102E8131E67@bath.uk.rsinc.com>
	<7221db410703090640y7aa24ce7qc9ad390ee22ab541@mail.gmail.com>
Message-ID: <7221db410703100137w79a575f3g596e0bfc8833d3eb@mail.gmail.com>

Eureka! :D

Norman,
using your helpful makefile, after adding to it some dependencies and moving
some files from a folder to another one,
I finally Built GDAL with kakadu support :D

Thank you very much.

Best regards,
Daniele



On 3/9/07, Daniele Romagnoli <dany.geotools@gmail.com> wrote:
>
>
>
> On 3/9/07, Norman Barker <nbarker@ittvis.com> wrote:
> >
> >  Daniele,
> >
> >
> >
> > Sorry you got me on a Friday afternoon J , if you add (change the path)
> >
> >
> >
> > # Any extra libraries needed on this platform?
> >
> > ADD_LIBS = C:\Kakadu\lib\kdu_v51R.lib
> >
> >
> >
> > to nmake.opt
> >
>
> I already tried this solution, prior to write my previous email :-(
> (After attempting the "KDULIB" solution :D )
> Without success...
>
> Just another question:
> Do you used command line NMAKE instead of Visual C++ solution in order to
> build your *.obj files?
> In such a case, can you show me your kakadu makefile?
>
> I tried editing "Makefile-generic" from "apps/make" and building kakadu
> using NMAKE without results...
>
>
> I think everything should be ok
> >
> >
> >
> > Norman
> >
> Thanks again.
>
> Best regards,
> Daniele Romagnoli
>
>
>
> ------------------------------
> >
> > *From:* Daniele Romagnoli [mailto:dany.geotools@gmail.com]
> > *Sent:* 09 March 2007 14:08
> > *To:* Norman Barker; gdal-dev@lists.maptools.org; Simone
> > *Subject:* Re: [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
> >
> >
> >
> > Norman,
> >
> > Thanks a lot for your help.
> >
> > I tweaked a bit your makefile since my .obj files (coming from "Visual
> > C++ solution" Build) are located in several different folders instead of
> > "\make".
> > (Furthermore, searching in main kakadu folder, I found 11 "jp2.obj"
> > files, 6 "jpx.obj" files, ... However,  90% of obj. files having the
> > same name (as an instance, 10 jp2.obj files of 11) have the same size.
> > Thus, I deduced to use one of them, which are mainly contained in
> > "compress\debug" or "expand\debug" folder).
> >
> > However, GDAL building process throws many "unresolved external" linking
> > errors.
> >
> > For almost any external format, NMAKE.OPT defines a couple of variables
> > FORMATXX_DIR and a FORMATXX_LIB (Like, as an instance, HDF4_DIR/HDF4_LIB,
> > ECWDIR/ECWLIB, and much more...).
> > I tried to define a KAKLIB variable linking to kakadu/lib (containing
> > kdu_v52D.lib and kdu_a52D lib) but errors still exist.
> >
> > Surely, I'm missing something to do or failing some step. :-(
> > Can you help me again?
> >
> > Thank you very much.
> >
> > Best Regards,
> > Daniele Romagnoli
> >
> >  On 3/9/07, *Norman Barker* <nbarker@ittvis.com > wrote:
> >
> > Daniele,
> >
> >
> >
> > The attached make file worked for me, but you may have to tweak it.
> >
> >
> >
> > Norman
> >
> >
> >  ------------------------------
> >
> > *From:* gdal-dev-bounces@lists.maptools.org [mailto:
> > gdal-dev-bounces@lists.maptools.org] *On Behalf Of *Daniele Romagnoli
> > *Sent:* 09 March 2007 12:02
> > *To:* gdal-dev@lists.maptools.org; Simone
> > *Subject:* [Gdal-dev] Kakadu-GDAL building problems on WINDOWS.
> >
> >
> >
> > Hi list,
> >
> > I'm trying to build GDAL with kakadu (5.2.2) support under windows XP.
> >
> >
> >
> > I have all the required source files (.h, .cpp) and I already built the
> > .obj files, using the "ready to use" Visual C++ solutions files
> > contained within the kakadu source tree (apps, coresys).
> >
> >
> >
> > By analyzing the makefile.vc contained within gdal/frmts/jp2kak, several
> > .obj files are required to build GDAL.
> >
> > I tried copying "some" .OBJ files to a folder and set this folder in
> > NMAKE.OPT.  (With "some" I means .obj files coming from coresys/debug,
> > kdu_aux/debug  and something else).
> >
> >
> >
> > However, I cant successfully build.
> >
> >
> >
> > Can someone help me please, listing the required .obj files?
> >
> >
> >
> > Thank you very much.
> >
> >
> > --
> > Best Regards,
> > Daniele
> >
> >
> >
> >
> >
> > --
> > Best Regards,
> > Daniele Romagnoli
> >
>
>
>
> --
> Best Regards,
> Daniele Romagnoli




-- 
Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070310/b968785d/attachment.html
From poz at rocketmail.com  Sat Mar 10 07:41:04 2007
From: poz at rocketmail.com (chris pozsgai)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RE:  GCPs and Thin Plate Splines - C++
In-Reply-To: <45F1B5E2.1010309@pobox.com>
Message-ID: <20070310124105.4823.qmail@web50212.mail.re2.yahoo.com>

Frank,
   
  I have been successful in using GDALGCPsToGeoTransform, but
  I would like to have zero error at the GCPs.  I was hoping to use
  TPS transformer for this purpose.  My thought was to first get
  the GDAL GCP transformer working, then to get brave and try
  the TPS transformer.  I was unfortunately not able to get good results
  with the GCP transformer, and got nothing when I used the TPS transform
  method.  (My geotransform had parameters on the order of 10e67 in it.)

  I guess my main question would be if this is the correct approach to the
  problem.  If it is, I'll keep working at it.  If not, I can live with using the 
  least squares transform used in GDALGCPsToGeoTransform.
   
  Thanks again,
   
  Chris Pozsgai
  
Frank Warmerdam <warmerdam@pobox.com> wrote:
  chris pozsgai wrote:
> Hello again..
> 
> I would like to repost my query to the mailing list regarding the thin plate
> splines... (I now have access to my code and the internet at the same time.)
> 
> I was able to get reasonable results using the
> GDALGCPsToGeoTransform function to generate a geo transform, but I would
> like to have an exact fit at the GCPs. That drove me to delve further 
> into the
> GDAL functionality where I ran across the warping functions.
> 
> I tried to first use the gdal warper to be able to reproduce the results 
> I got
> using the GDALGCPstoGeoTransform function with the warper. I was
> not able to do that, but here is the code that I wrote. My intention was to
> look at the TPS transform's ability to preserve the GCP values, but I 
> could not
> get that to work, or even to reproduce the results from 
> GDALGCPsToGeoTransform
> using regular GCP warping.
> 
> I apologize for putting this much code on the mailing but I guess it's 
> the best way....

Chris,

I'm sorry for being dense, but I've lost track of what you are asking us to
look for in the following code. Are you having trouble getting the warp
api to work with the GCP transformer (using polynomials)? Or is it just
the TPS that wasn't working for you? Is it that you get a poor warp or
that nothing works?

I hesitate to try and grok a substantial amount of code in the hopes of
then realizing what it is you wanted me to look for. This is very time
and frustration intensive.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush | President OSGeo, http://osgeo.org



 
---------------------------------
Don't pick lemons.
See all the new 2007 cars at Yahoo! Autos.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070310/30b572f8/attachment.html
From aaime at openplans.org  Sat Mar 10 09:33:24 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
Message-ID: <45F2C1B4.5020100@openplans.org>

Hi,
today I was trying to figure out an issue in my Geotools OGR
based data store and I tracked it down to a OGR strange behaviour.

I use layer.featureDelete on a shapefile, and it seems the following
happens:
* the feature does not seem to be physically removed from the shapefile,
   but is being marked as deleted instead?
* the result of layer.GetFeatureCount(1) does not change, even if the
   number of "alive" features goes down. Repeating the trick, you may
   end up with a file where feature count is x but no feature can
   be read out of it.

Is this a bug or a feature? The method documentation says:
"Returns the number of features in the layer. For dynamic databases the 
count may not be exact".

Not sure what you mean by dynamic database, re-opening the file read
only keeps on reporting the wrong number of features. That is, once
delete has been used once, the feature count is screwed up, and the
only way to really count features is to read them all?
If so, is there any way to tell an inconsistency is there, or may be
there, so that I can give up relying on the count?

Cheers
Andrea




From mateusz at loskot.net  Sat Mar 10 10:07:20 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
In-Reply-To: <45F2C1B4.5020100@openplans.org>
References: <45F2C1B4.5020100@openplans.org>
Message-ID: <45F2C9A8.3030304@loskot.net>

Andrea Aime wrote:
> Hi,
> today I was trying to figure out an issue in my Geotools OGR
> based data store and I tracked it down to a OGR strange behaviour.
> 
> I use layer.featureDelete on a shapefile, and it seems the following
> happens:
> * the feature does not seem to be physically removed from the shapefile,
>   but is being marked as deleted instead?

Andrea,

Yes, a feature is marked as deleted.
Implementation of this logic is based on Shapelib API:
DBFIsRecordDeleted()
DBFMarkRecordDeleted()

http://shapelib.maptools.org/dbf_api.html

It is also described in the manual of ESRI Shapefile format:

"The OGR shapefile driver supports rewriting existing shapes in a
shapefile as well as deleting shapes. Deleted shapes are marked for
deletion in the .dbf file, and then ignored by OGR. To actually remove
them permanently (resulting in renumbering of FIDs)
invoke the SQL 'REPACK ' via the datasource ExecuteSQL() method."

http://www.gdal.org/ogr/drv_shapefile.html

> * the result of layer.GetFeatureCount(1) does not change, even if the
>   number of "alive" features goes down. Repeating the trick, you may
>   end up with a file where feature count is x but no feature can
>   be read out of it.

You need to REPACK a shapefile after deleting features.
Simply call following pseudo-SQL supported by ESRI Shapefile driver:

OGRLayer::ExecuteSQL("REPACK myshapefile", NULL, NULL);

Also, all features marked as deleted are omitted while
reading a layer (NULL is returned).

> Is this a bug or a feature? The method documentation says:
> "Returns the number of features in the layer. For dynamic databases the
> count may not be exact".

I don't think it's a bug.
Though, may be it would be reasonable to re-calculate number of features
on fly, omitting number of features marked-as-deleted.

> Not sure what you mean by dynamic database, re-opening the file read
> only keeps on reporting the wrong number of features. That is, once
> delete has been used once, the feature count is screwed up, and the
> only way to really count features is to read them all?
> If so, is there any way to tell an inconsistency is there, or may be
> there, so that I can give up relying on the count?

Try to REPACK after delete action.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From aaime at openplans.org  Sat Mar 10 11:24:24 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
In-Reply-To: <45F2C9A8.3030304@loskot.net>
References: <45F2C1B4.5020100@openplans.org> <45F2C9A8.3030304@loskot.net>
Message-ID: <45F2DBB8.4020709@openplans.org>

Mateusz Loskot ha scritto:
> Andrea Aime wrote:
> It is also described in the manual of ESRI Shapefile format:
> 
> "The OGR shapefile driver supports rewriting existing shapes in a
> shapefile as well as deleting shapes. Deleted shapes are marked for
> deletion in the .dbf file, and then ignored by OGR. To actually remove
> them permanently (resulting in renumbering of FIDs)
> invoke the SQL 'REPACK ' via the datasource ExecuteSQL() method."
> 
> http://www.gdal.org/ogr/drv_shapefile.html

Ah, thank you :-)
Hmm... I'm wondering, is it really possible to use OGR without knowing
what kind of datasource you're dealing with? What I'm doing, is writing
a bridge between Geotools Datastore API and OGR, which should work for
any format supported by OGR, trying to cope with OGR driver differences
using only capabilities checks.

I'm using shapefile at the moment, but it's really one of the formats
I don't need to support, we already have a good shapefile reader/writer
in Geotools, I'm only using it because I can compare the OGR behaviour
with the gt2 one.

So far it seems I'll have to write a generic base infrastructure, and
then provide variant behavior with helper classes/subclasses to handle
the difference between various drivers. For example, Geotools
API requires me either not writing at all, or support all writing
features. To cope with this, I'll have to create classes that allow
me to move and rename layers for each different format I want to 
support, since most of the OGR data sources I'm interested with
do not support delete/update (Geotools is lacking on file based
data sources). That is, the idea is that if I want to mimic in place
update/delete, I'll really have to rewrite the file with a different
name/location, delete the original one, and finally move/rename the
new one.

Am I taking the right direction? OGR and Geotools API do not
have big differences on the surface, but quite a bit of significant
details are making me go from one blind spot to another :)

Cheers
Andrea

From warmerdam at pobox.com  Sat Mar 10 13:59:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
In-Reply-To: <45F2DBB8.4020709@openplans.org>
References: <45F2C1B4.5020100@openplans.org> <45F2C9A8.3030304@loskot.net>
	<45F2DBB8.4020709@openplans.org>
Message-ID: <45F30018.1070501@pobox.com>

Andrea Aime wrote:
> So far it seems I'll have to write a generic base infrastructure, and
> then provide variant behavior with helper classes/subclasses to handle
> the difference between various drivers. For example, Geotools
> API requires me either not writing at all, or support all writing
> features. To cope with this, I'll have to create classes that allow
> me to move and rename layers for each different format I want to 
> support, since most of the OGR data sources I'm interested with
> do not support delete/update (Geotools is lacking on file based
> data sources). That is, the idea is that if I want to mimic in place
> update/delete, I'll really have to rewrite the file with a different
> name/location, delete the original one, and finally move/rename the
> new one.

Andrea,

Perhaps the GeoTools API should try being more fine grained with regard
to writing features.  Assuming that is impractical, I would suggest a
generic approach to read access, and then using some "working" format
for all update access, and on close copying back to the original format.
This approach would minimize the amount of driver specific work.

Overall, as long as geotools takes such a strict view of datastore
responsibilities for writing, you are pretty much stuck implementing
update in place via a working format.  For the time being you could
likely use MEM format as the working format though of course this
makes working with large datasets impractical.

Shapefile is not a good working format since it imposes so many
extra restrictions (short field names, no mixing geometry types,
no variable length fields).

Ultimately the question arises about how important it is to provide
write access through OGR for GeoTools.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Mar 10 14:27:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RE:  GCPs and Thin Plate Splines - C++
In-Reply-To: <20070310124105.4823.qmail@web50212.mail.re2.yahoo.com>
References: <20070310124105.4823.qmail@web50212.mail.re2.yahoo.com>
Message-ID: <45F3069A.7030601@pobox.com>

chris pozsgai wrote:
> Frank,
>  
> I have been successful in using GDALGCPsToGeoTransform, but
> I would like to have zero error at the GCPs.  I was hoping to use
> TPS transformer for this purpose.  My thought was to first get
> the GDAL GCP transformer working, then to get brave and try
> the TPS transformer.  I was unfortunately not able to get good results
> with the GCP transformer, and got nothing when I used the TPS transform
> method.  (My geotransform had parameters on the order of 10e67 in it.)
> I guess my main question would be if this is the correct approach to the
> problem.  If it is, I'll keep working at it.  If not, I can live with 
> using the
> least squares transform used in GDALGCPsToGeoTransform.

Chris,

Ok, to isolate a point that might be investigatable, you report that
you do not get good results with the GCP transformer.  Could you elaborate
on that?

Note that the thin plate spline transformer is quite unstable mathematically
(in my opinion).  If you don't have good gcp coverage, or for various other
hard to predict reasons, the TPS results can go extremely screwy.  I use it
with caution.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Sat Mar 10 15:48:18 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
In-Reply-To: <45F30018.1070501@pobox.com>
References: <45F2C1B4.5020100@openplans.org> <45F2C9A8.3030304@loskot.net>
	<45F2DBB8.4020709@openplans.org> <45F30018.1070501@pobox.com>
Message-ID: <45F31992.6060904@openplans.org>

Frank Warmerdam ha scritto:
> Andrea,
> 
> Perhaps the GeoTools API should try being more fine grained with regard
> to writing features.  

Geotools is basically there to serve Geoserver and uDig. In both
applications, you either are a good read only data source, or a fully
transactional one that allows to support WFS-T and interactive editing.
There's no useful middle ground...

> Assuming that is impractical, I would suggest a
> generic approach to read access, and then using some "working" format
> for all update access, and on close copying back to the original format.
> This approach would minimize the amount of driver specific work.
> 
> Overall, as long as geotools takes such a strict view of datastore
> responsibilities for writing, you are pretty much stuck implementing
> update in place via a working format.  For the time being you could
> likely use MEM format as the working format though of course this
> makes working with large datasets impractical.

Hum, that approach I suggested (rewrite on a separate data set, then
copy back) is the approach we're using for shapefiles in order
to provide transactional support. It's not fast, but works.

To copy back data I guess I need the original format to support
layer deletion, otherwise I'm stuck
going right to the filesystem with a detailed knowledge of how
the files are organized. Can I assume all file based formats do
support it?

> Shapefile is not a good working format since it imposes so many
> extra restrictions (short field names, no mixing geometry types,
> no variable length fields).

Yup, understand that.

> Ultimately the question arises about how important it is to provide
> write access through OGR for GeoTools.

Yeah, good question. Well, my initial interest was provide read access,
that has been a success, so far (I still have to try out
geometry and attribute filters).
I then went to write side because that would have made the datastore
more useful for both WFS-T and interactive editing in uDig.
A partial write support, that provides only appending, would be
good enough to make OGR be used for WFS basic too, so that we can
return features not only in GML2/3 and shapefile, but also in a slew
of other formats as well. I was hesitant to limit myself to it, because
there is basically no way to specify this "middle ground" capability
to users.

Well, thank you for you insights. I think with some more work I'll
be able to release an OGR based data store that can be used
for WFS basic/WMS serving :-)

Cheers
Andrea

From warmerdam at pobox.com  Sat Mar 10 20:13:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
In-Reply-To: <45F31992.6060904@openplans.org>
References: <45F2C1B4.5020100@openplans.org> <45F2C9A8.3030304@loskot.net>
	<45F2DBB8.4020709@openplans.org> <45F30018.1070501@pobox.com>
	<45F31992.6060904@openplans.org>
Message-ID: <45F357C9.3040803@pobox.com>

Andrea Aime wrote:
> Frank Warmerdam ha scritto:
>> Andrea,
>>
>> Perhaps the GeoTools API should try being more fine grained with regard
>> to writing features.  
> 
> Geotools is basically there to serve Geoserver and uDig. In both
> applications, you either are a good read only data source, or a fully
> transactional one that allows to support WFS-T and interactive editing.
> There's no useful middle ground...

Andrea,

No offence, but I hope that there aren't other potentially uses of
GeoTools reading that it is there to serve Geoserver and uDig - they
may feel that other use cases are not taken seriously.

That said, there are very few drivers that are "fully interactive
editing ready".

> Hum, that approach I suggested (rewrite on a separate data set, then
> copy back) is the approach we're using for shapefiles in order
> to provide transactional support. It's not fast, but works.
> 
> To copy back data I guess I need the original format to support
> layer deletion, otherwise I'm stuck
> going right to the filesystem with a detailed knowledge of how
> the files are organized. Can I assume all file based formats do
> support it?

No, many (most?) do not.

>> Ultimately the question arises about how important it is to provide
>> write access through OGR for GeoTools.
> 
> Yeah, good question. Well, my initial interest was provide read access,
> that has been a success, so far (I still have to try out
> geometry and attribute filters).
> I then went to write side because that would have made the datastore
> more useful for both WFS-T and interactive editing in uDig.
> A partial write support, that provides only appending, would be
> good enough to make OGR be used for WFS basic too, so that we can
> return features not only in GML2/3 and shapefile, but also in a slew
> of other formats as well. I was hesitant to limit myself to it, because
> there is basically no way to specify this "middle ground" capability
> to users.
> 
> Well, thank you for you insights. I think with some more work I'll
> be able to release an OGR based data store that can be used
> for WFS basic/WMS serving :-)

Well, barring a pressing need, I'd suggest focusing on the read-only
approach.  I also would strongly suggest a "write only" use case for
GeoTools datastores.  There are many format drivers for which it is
very difficult to support full interactive editing, but for which a
"writer" is quite practical.  This observation is fundamental to how
OGR is implemented and most OGR uses only use read-through and
write-through mechanisms.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woodbri at swoodbridge.com  Sat Mar 10 21:16:37 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Need a sanity check on processing imagery
In-Reply-To: <45F10A5B.60208@pobox.com>
References: <45F0E9B0.2010700@swoodbridge.com> <45F10A5B.60208@pobox.com>
Message-ID: <45F36685.5040801@swoodbridge.com>

Frank,

Thank you! for the feedback. I have one question one this part:

Frank Warmerdam wrote:
>> Does this look like a reasonable process? Or is it flawed?
> 
> You are generating files for which the top left corner of the
> top left pixel is at the lat/long location -11.9375,41.4375.
> Is that want you want?  Sometimes people really want the center
> of the top left pixel to be at that point.  If that is what you
> want, you will need to manually adjust the extents "out" by a
> half pixel.

What is the easiest way to do this. Is it as simple as offsetting the 
corners below by 0.5 before doing my projection to latlong?

$ gdalinfo -nomd naip_1-1_1n_s_ut057_2006_1.sid
Driver: MrSID/Multi-resolution Seamless Image Database (MrSID)
Size is 95310, 41990
Coordinate System is `'
Origin = (373650.000000,4588120.000000)
Pixel Size = (1.00000000,-1.00000000)
Corner Coordinates:
Upper Left  (  373650.000, 4588120.000)
Lower Left  (  373650.000, 4546130.000)
Upper Right (  468960.000, 4588120.000)
Lower Right (  468960.000, 4546130.000)
Center      (  421305.000, 4567125.000)


Or do I need to project these first and then offset the results. If this 
is the case, how does one calculate the cellsize of a pixel before doing 
the gdal_warp?

-Steve

From warmerdam at pobox.com  Sun Mar 11 01:15:42 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Need a sanity check on processing imagery
In-Reply-To: <45F36685.5040801@swoodbridge.com>
References: <45F0E9B0.2010700@swoodbridge.com> <45F10A5B.60208@pobox.com>
	<45F36685.5040801@swoodbridge.com>
Message-ID: <45F39E8E.5000402@pobox.com>

Stephen Woodbridge wrote:
> Frank,
> 
> Thank you! for the feedback. I have one question one this part:
> 
> Frank Warmerdam wrote:
>>> Does this look like a reasonable process? Or is it flawed?
>>
>> You are generating files for which the top left corner of the
>> top left pixel is at the lat/long location -11.9375,41.4375.
>> Is that want you want?  Sometimes people really want the center
>> of the top left pixel to be at that point.  If that is what you
>> want, you will need to manually adjust the extents "out" by a
>> half pixel.
> 
> What is the easiest way to do this. Is it as simple as offsetting the 
> corners below by 0.5 before doing my projection to latlong?

Steve,

No, I don't believe that would help.  The pixel size of the output
file is being computed by gdalwarp to roughly match that of the input
file in the new coordinate system.  I see in your earlier message the
output file had this pixel size:

Pixel Size = (0.00001153,-0.00001153)

This will tend to vary a little based on where the image is - but you
could pick an arbirary pixel size around this size - perhaps 0.00001 degrees.
If you do this, you would then offset your extents by half this amount
(0.000005) and specify the pixel size in the gdalwarp ("-tr 0.00001 0.00001").

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Sun Mar 11 05:11:19 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Shapefile feature deletion and feature count
In-Reply-To: <45F357C9.3040803@pobox.com>
References: <45F2C1B4.5020100@openplans.org> <45F2C9A8.3030304@loskot.net>
	<45F2DBB8.4020709@openplans.org> <45F30018.1070501@pobox.com>
	<45F31992.6060904@openplans.org> <45F357C9.3040803@pobox.com>
Message-ID: <45F3C7B7.1010307@openplans.org>

Frank Warmerdam ha scritto:
> Andrea Aime wrote:
>> Frank Warmerdam ha scritto:
>>> Andrea,
>>>
>>> Perhaps the GeoTools API should try being more fine grained with regard
>>> to writing features.  
>>
>> Geotools is basically there to serve Geoserver and uDig. In both
>> applications, you either are a good read only data source, or a fully
>> transactional one that allows to support WFS-T and interactive editing.
>> There's no useful middle ground...
> 
> Andrea,
> 
> No offence, but I hope that there aren't other potentially uses of
> GeoTools reading that it is there to serve Geoserver and uDig - they
> may feel that other use cases are not taken seriously.
> 

Ha ha, no offense taken :-) Mine was not an absolute statement, but just
a pragmatic assessment of how things are going on today. If you look
at hackers working on geotools, you'll notice that they are either 
involved in uDig, or in Geoserver. In the end, there are end users
that do sponsor some development time on Geoserver and uDig, which
in turn try to put the most significant bits of what they
do in Geotools, to make them useful for a larger audience.
That's basically how Geotools grows and evolves.

So in the end, that's why the write thru and read thru approaches
are not taken care of seriously. Well, in fact OGR is the very
reason we don't need to really support that use case, and the
reason why I'm working on the OGR in my spare time instead of
paid time: if you really need to serve a fancy format thru Geoserver,
install GDAL/OGR, do the conversion in a format we do support,
and happily serve your data.

I just feel it's nice to leverage your work more directly, and
avoid people who are just trying out Geoserver the hassle of
data conversion. But once they do decide to go the WMS/WFS/WFS-T
route, be it mapserver, geoserver or whatever, they will need
to switch to a format designed for that job (a spatial dbms,
in my opinion).

Cheers
Andrea

From nick at nickbower.com  Mon Mar 12 04:41:23 2007
From: nick at nickbower.com (Nick Bower)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GDALOpenInfo->fp == NULL for large files?
Message-ID: <45F51233.3080806@nickbower.com>

I'm trying to debug the L1B driver - it's failing because poOpenInfo->fp 
is NULL (starting a driver with this test is also in the driver 
tutorial, and a raw driver also):

GDALDataset *L1BDataset::Open( GDALOpenInfo * poOpenInfo )

{
    int i = 0;
    if( poOpenInfo->fp == NULL )
        return NULL; // Returns for no reason
etc...

So I tried to figure out why fp is NULL.  The reason may be below?  I'm 
not a C/C++ programmer to full understand this, so I can only get as far 
as suspecting the problem has something to do with VSIFOpen/VSIFOpenL 
conventions (let me know if I'm off).  With the latter, it is set to 
NULL after reading for some reason, thus meaning (as far as i can tell) 
the L1B, HDF4, raw etc drivers return in the first couple of lines of 
initialization.  The file itself is only 85 Meg, so is not actually that 
large.


GDALOpenInfo

            fp = VSIFOpen( pszFilename, "rb" );

            if( fp != NULL )
            {
                nHeaderBytes = (int) VSIFRead( pabyHeader, 1, 1024, fp );

                VSIRewind( fp );
            }
            else if( errno == 27 /* "File to large" */
                     || errno == ENOENT
                     || errno == 79 /* EOVERFLOW - value too large */ )
            {
                fp = VSIFOpenL( pszFilename, "rb" );
                if( fp != NULL )
                {
                    nHeaderBytes = (int) VSIFReadL( pabyHeader, 1, 1024, 
fp );
                    VSIFCloseL( fp );
                    fp = NULL;
                }
            }




From jmckenna at dmsolutions.ca  Mon Mar 12 09:47:10 2007
From: jmckenna at dmsolutions.ca (Jeff McKenna)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
In-Reply-To: <2576812186CDD411BF1500508B6DCE9511B30C84@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE9511B30C84@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <45F559DE.3060701@dmsolutions.ca>

Kralidis,Tom [Burlington] wrote:
> Hi,
> 
> - user would like to upload / visualize their GPX formatted waypoints on
> a web mapping application
> 


Off topic, but GRASS does have gpx support through GPSBabel 
(http://grass.itc.it/grass62/manuals/html62_user/v.in.gpsbabel.html)...so 
it would be possible to display that grass/gpx layer in mapserver.

jeff



-- 
Jeff McKenna
DM Solutions Group Inc.
http://www.dmsolutions.ca

From lxnyce at gmail.com  Mon Mar 12 10:28:21 2007
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] ECW "ecwp protocol updated" error
Message-ID: <82c245aa0703120728i174adc01i36a47eac25745a43@mail.gmail.com>

Hi All,

I am field testing a product currently, and a user came across the
following error :

"I am trying to view this ecw server file
ecwp://mapserver.lib.uconn.edu/magic/images/adimg.37800.0000.1934.s12.Fairchild.1.ecw"

"when I press the "catalog" button, I keep getting this notice " Your
settings have been updated to support ecwp protocol and you need to
restart the application for settings to
take affect." I get this notice like 10 times, it just keeps popping up.

Is this an ECW integration problem, or more of an ECW SDK problem (in
which case I will have to try contacting them)?

I  looked into it and found similar issues here :

>From GlobalMappers webpage, I found this quote :
"If you get an error message indicating that your settings have been
updated to support the ECWP protocol whenever you try to load an ECW
layer from the web you need to download and install the latest ECW
ActiveX plugin from
http://demo.ermapper.com/ecwplugins/DownloadIEPlugin.htm."

I also found an Italian site which had the same problem using FWTools :
http://translate.google.com/translate?u=http%3A%2F%2Fwww.bike-board.net%2Fcommunity%2Fforum%2Fshowthread.php%3Ft%3D35134%26page%3D27&langpair=it%7Cen&hl=en&ie=UTF8

Interestingly enough, GDAL command line tools from fwtools work fine
with the ecwp protocol. I grabbed the lib, header and dll's from there
and made a thumbnail of the image above and it worked. I copied
gdal_translate into a new command line application and used the same
command, but I got the warning message.

The user also mentions that installing the ActiveX control gets rid of
the warning message, but the image still doesn't load.

-Lennox

From Tom.Kralidis at ec.gc.ca  Mon Mar 12 10:32:50 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GPX format support
Message-ID: <2576812186CDD411BF1500508B6DCE9511B30C93@ecnwri1.ontario.int.ec.gc.ca>


> 
> Kralidis,Tom [Burlington] wrote:
> > Hi,
> > 
> > - user would like to upload / visualize their GPX formatted 
> waypoints 
> > on a web mapping application
> > 
> 
> 
> Off topic, but GRASS does have gpx support through GPSBabel 
> (http://grass.itc.it/grass62/manuals/html62_user/v.in.gpsbabel
> .html)...so
> it would be possible to display that grass/gpx layer in mapserver.

Thx.  Note that I've filed this as an enhancement at:

http://bugzilla.remotesensing.org/show_bug.cgi?id=1515

...which includes a brief analysis of the GPX schema, as well as
recommendations for processing the information model (for both
read/write).

Cheers

..Tom



From lijian.shi at und.nodak.edu  Mon Mar 12 11:33:45 2007
From: lijian.shi at und.nodak.edu (Lijian Shi)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] about shift after reprojection
Message-ID: <0JES00LTFR86HS50@mailmx1.und.nodak.edu>

Hi,

 

I use the followed command to reproject a shp file:

 

ogr2ogr -t_srs WGS84 -s_srs NAD27 out.shp point.shp

 

Then I overlay the out.shp and point.shp in ArcGIS. But there is some shift
between tow files. Is there any problem with my command?  Thank you very
much for your response.

 

Best regards,

 

Lijian

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070312/ab69fffd/attachment.html
From szekerest at gmail.com  Mon Mar 12 11:52:24 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Read one band image to a bitmap in csharp
In-Reply-To: <f3b73b7d0703120850h3c2a139ci63689f9a7893e244@mail.gmail.com>
References: <D93CFEAA72FA764885CC1FDA94A1D89C027CF6DC@WMRI000166.corp.wmdata.net>
	<f3b73b7d0703090638n75e5d6e8od2aab76ea06d40ef@mail.gmail.com>
	<D93CFEAA72FA764885CC1FDA94A1D89C027CFC26@WMRI000166.corp.wmdata.net>
	<f3b73b7d0703120850h3c2a139ci63689f9a7893e244@mail.gmail.com>
Message-ID: <f3b73b7d0703120852r531dd534w4ac49aa75f7c142e@mail.gmail.com>

2007/3/12, Hallgren Johan E <jhhal@wmdata.com>:
> Thanks Tamas,
>
> Now things working! The code below is from the GDALRead.cs sample and it
> seams to be a bit slow. Is it possible to use the BitmapData/LockBitmap
> instead and would it be faster?
>

Hopefully, creating a .net image with PixelFormat = 8bppIndexed would
be faster, I haven't tested it though. It is possible to use
BitmapData/LockBitmap directly, GDALReadDirect.cs uses this approach.
In this case the palette should also be copied into the .net image.

>
> Regaring the Metadata and image extent.
>
> Does GDal provide any support for coordinate information stored in a
> world file? Or does I have to read the file myself. I hoped that GDal
> provided me with a uniform way of reading geographic information
> wherever it's stored.
>

I think DataSet.GetGeoTransform could retrieve the transormation
parameters as an array of floats (array length is 6)


Best regards,

Tamas

From dylan.beaudette at gmail.com  Mon Mar 12 12:55:00 2007
From: dylan.beaudette at gmail.com (Dylan Beaudette)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Re: OGR/GDAL and datum transformations
In-Reply-To: <91d218430703090212k290eee06ued972b02417d2acc@mail.gmail.com>
References: <91d218430703090212k290eee06ued972b02417d2acc@mail.gmail.com>
Message-ID: <200703120955.00820.dylan.beaudette@gmail.com>

On Friday 09 March 2007 02:12, Jose Gomez-Dans wrote:
> Hi Dylan,
> A few months ago, you mentioned a number of tests on the accuracy of
> GDAL/OGR coordinate transforms on the GRASS mailing list, and you
> blogged about it
> <http://casoilresource.lawr.ucdavis.edu/drupal/node/259>.
>
> In the past, I have written a small GUI app that reprojects shapefiles
> in the three or four geographic references we use at work here, and
> while so far no one has complained, I am aware that there are
> significant changes due to different datums (we shift from European
> Datum 1950 to WGS84 and viceversa). My program just uses "EPSG:XXXX"
> and gdal_translate/ogr2ogr, but I am now a thinking that I need to
> provide the parameters for the transfomration. For example, GRASS
> offers me different options for EPSG:23030, but I don't know how to
> add these to the GDAL command line or WKT. Do you know  how to specify
> which datum transform to use in GDAL/OGR?
>
> Many thanks!
> Jose

Hi Jose. Please note that I am not an expert in specifying datum 
transformation parameters to GDAL. I think that it has to be done with the 
7-parameter transform used in the 'to_wgs80'  (?) option. Perhaps someone 
else on the list can help.

cheers,

-- 
Dylan Beaudette
Soils and Biogeochemistry Graduate Group
University of California at Davis
530.754.7341

From warmerdam at pobox.com  Mon Mar 12 14:10:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GDALOpenInfo->fp == NULL for large files?
In-Reply-To: <45F51233.3080806@nickbower.com>
References: <45F51233.3080806@nickbower.com>
Message-ID: <45F597A1.3020905@pobox.com>

Nick Bower wrote:
> I'm trying to debug the L1B driver - it's failing because poOpenInfo->fp 
> is NULL (starting a driver with this test is also in the driver 
> tutorial, and a raw driver also):
> 
> GDALDataset *L1BDataset::Open( GDALOpenInfo * poOpenInfo )
> 
> {
>    int i = 0;
>    if( poOpenInfo->fp == NULL )
>        return NULL; // Returns for no reason
> etc...
> 
> So I tried to figure out why fp is NULL.  The reason may be below?  I'm 
> not a C/C++ programmer to full understand this, so I can only get as far 
> as suspecting the problem has something to do with VSIFOpen/VSIFOpenL 
> conventions (let me know if I'm off).  With the latter, it is set to 
> NULL after reading for some reason, thus meaning (as far as i can tell) 
> the L1B, HDF4, raw etc drivers return in the first couple of lines of 
> initialization.  The file itself is only 85 Meg, so is not actually that 
> large.

Nick,

It is expected for poOpenInfo->fp to be NULL on some platforms when
the file is larger than 2GB (or possibly 4GB).  I see the L1B driver
is using the old technique of "adopting" the file pointer.  Formats
wishing to support larger than 2GB should not do this and ought to be
using the VSI*L API instead of the VSI* API.

Basically, the L1B driver is not "ready" for large files.

If you feel this should be rectified you could try updating the driver
yourself, or filing a bug report.  Since we don't have L1B files larger than
2GB, it would likely be necessary to have to check any fixes made.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From simboss1 at gmail.com  Mon Mar 12 18:23:05 2007
From: simboss1 at gmail.com (Simone)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RasterPixelIsArea vs RasterPixelIsPoint
Message-ID: <022e01c764f5$03b50ab0$9700a8c0@LAPTOP>

Hi all,
I am doing a sanity check with some geotiff files I have got.

There is this one in particular which is kind of suggesting me that I should 
go back and revise the geotiff spec.

Here is the dump of gdalinfo:

Driver: GTiff/GeoTIFF
Size is 254, 254
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-74.096804075962808,37.037980546550187)
Pixel Size = (0.041685965724872,-0.041685965724872)
Metadata:
  AREA_OR_POINT=Point
  TIFFTAG_XRESOLUTION=1
  TIFFTAG_YRESOLUTION=1
  TIFFTAG_RESOLUTIONUNIT=1 (unitless)
Corner Coordinates:
Upper Left  ( -74.0968041,  37.0379805) ( 74d 5'48.49"W, 37d 2'16.73"N)
Lower Left  ( -74.0968041,  26.4497453) ( 74d 5'48.49"W, 26d26'59.08"N)
Upper Right ( -63.5085688,  37.0379805) ( 63d30'30.85"W, 37d 2'16.73"N)
Lower Right ( -63.5085688,  26.4497453) ( 63d30'30.85"W, 26d26'59.08"N)
Center      ( -68.8026864,  31.7438629) ( 68d48'9.67"W, 31d44'37.91"N)
Band 1 Block=254x1 Type=Byte, ColorInterp=Red
Band 2 Block=254x1 Type=Byte, ColorInterp=Green
Band 3 Block=254x1 Type=Byte, ColorInterp=Blue


As pointed out here:

http://lists.maptools.org/pipermail/geotiff/2006-January/000212.html
or here
http://www.remotesensing.org/geotiff/spec/geotiff2.5.html#2.5.2

the RasterPixelIsPoint tag should suggest to map TiePoints coordinates to 
the center
of the cells. Hence there is a half of a pixel shift between the an 
hypothetical TiePoint
of the form (0,0,0,lon,lat,0) and the ULC.

I manually inspected the tiff tags of this image (yeah what a fun!!!) .
The provided TiePoint is as follows:
[0.0, 0.0, 0.0, -74.09680407596281, 37.03798054655019, 0.0]
and PixScale is
 (0.041685965724872,-0.041685965724872).
The RasterType is PixelIsPoint.

Taking this into account, why GDAL is reporting me  ULC coordinate at the 
same position of this tie point?
Is the half-a-pixel translation missing? Is it just me that is making a big 
confusions?

Thx for any feedback.

Simone.

BTW, I know this question might be good for the GeoTiff ml but since I am 
playing with GDAL right now
I thought it would have been great to post it here, at least initially.


-------------------------------------------------------
Eng. Simone Giannecchini

President/CEO GeoSolutions
http://www.geo-solutions.it
Via Carignoni 51
550141 Camaiore (LU)
Italy
Mobile: +39 333 81 28928
------------------------------------------------------- 


From lxnyce at gmail.com  Mon Mar 12 17:59:50 2007
From: lxnyce at gmail.com (Lennox Antoine)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Re: ECW "ecwp protocol updated" error
In-Reply-To: <82c245aa0703120728i174adc01i36a47eac25745a43@mail.gmail.com>
References: <82c245aa0703120728i174adc01i36a47eac25745a43@mail.gmail.com>
Message-ID: <82c245aa0703121459w115d383cp6164bb22bdd905a4@mail.gmail.com>

I believe the problem was that I was using a simplified name. The
simplified name changed "ecwp://" into "ecwp:/" which causes an error
when trying to load the ecwp protocol.

Thanks for your time guys.

-Lennox

On 3/12/07, Lennox Antoine <lxnyce@gmail.com> wrote:
> Hi All,
>
> I am field testing a product currently, and a user came across the
> following error :
>
> "I am trying to view this ecw server file
> ecwp://mapserver.lib.uconn.edu/magic/images/adimg.37800.0000.1934.s12.Fairchild.1.ecw"
>
> "when I press the "catalog" button, I keep getting this notice " Your
> settings have been updated to support ecwp protocol and you need to
> restart the application for settings to
> take affect." I get this notice like 10 times, it just keeps popping up.
>
> Is this an ECW integration problem, or more of an ECW SDK problem (in
> which case I will have to try contacting them)?
>
> I  looked into it and found similar issues here :
>
> From GlobalMappers webpage, I found this quote :
> "If you get an error message indicating that your settings have been
> updated to support the ECWP protocol whenever you try to load an ECW
> layer from the web you need to download and install the latest ECW
> ActiveX plugin from
> http://demo.ermapper.com/ecwplugins/DownloadIEPlugin.htm."
>
> I also found an Italian site which had the same problem using FWTools :
> http://translate.google.com/translate?u=http%3A%2F%2Fwww.bike-board.net%2Fcommunity%2Fforum%2Fshowthread.php%3Ft%3D35134%26page%3D27&langpair=it%7Cen&hl=en&ie=UTF8
>
> Interestingly enough, GDAL command line tools from fwtools work fine
> with the ecwp protocol. I grabbed the lib, header and dll's from there
> and made a thumbnail of the image above and it worked. I copied
> gdal_translate into a new command line application and used the same
> command, but I got the warning message.
>
> The user also mentions that installing the ActiveX control gets rid of
> the warning message, but the image still doesn't load.
>
> -Lennox
>

From szekerest at gmail.com  Mon Mar 12 19:33:10 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Read one band image to a bitmap in csharp
In-Reply-To: <D93CFEAA72FA764885CC1FDA94A1D89C027CFD23@WMRI000166.corp.wmdata.net>
References: <D93CFEAA72FA764885CC1FDA94A1D89C027CF6DC@WMRI000166.corp.wmdata.net>
	<f3b73b7d0703090638n75e5d6e8od2aab76ea06d40ef@mail.gmail.com>
	<D93CFEAA72FA764885CC1FDA94A1D89C027CFC26@WMRI000166.corp.wmdata.net>
	<f3b73b7d0703120850h3c2a139ci63689f9a7893e244@mail.gmail.com>
	<D93CFEAA72FA764885CC1FDA94A1D89C027CFD23@WMRI000166.corp.wmdata.net>
Message-ID: <f3b73b7d0703121633p57c723afs61ee6db3e2788ee3@mail.gmail.com>

Johan,

I seems that  bitmap.Palette retrieves the array by value not by
reference, so you should copy the palette as the following code:

            int iCol = ct.GetCount();
            ColorPalette pal = bitmap.Palette;
            for (int i = 0; i < iCol; i++)
            {
                ColorEntry ce = ct.GetColorEntry(i);
                pal.Entries[i] = Color.FromArgb(ce.c4, ce.c1, ce.c2, ce.c3);
            }
            bitmap.Palette = pal;

I've updated GDALReadDirect.cs to support this kind of images.


Best regards,

Tamas


2007/3/12, Hallgren Johan E <jhhal@wmdata.com>:
> Hello again
>
> I tried some palette examination but it was not so successful.
>
> I used the following code, but the colors were wrong. Everything was
> more or less blue.
> **********************
> Band band = ds.GetRasterBand(1);
>
> ColorTable ct = band.GetRasterColorTable();
> if (ct == null)
> {
>         Console.WriteLine("   Band has no color table!");
>         return null;
> }
>
> if (ct.GetPaletteInterpretation() != PaletteInterp.GPI_RGB)
> {
>         Console.WriteLine("   Only RGB palette interp is supported by
> this sample!");
>         return null;
> }
>
> // Get the width and height of the Dataset
> int width = ds.RasterXSize;
> int height = ds.RasterYSize;
>
> // Create a Bitmap to store the GDAL image in
> Bitmap bitmap = new Bitmap(width, height,
> PixelFormat.Format8bppIndexed);
>
> // Use GDAL raster reading methods to read the image data directly into
> the Bitmap
> BitmapData bitmapData = bitmap.LockBits(new Rectangle(0, 0, width,
> height), ImageLockMode.ReadWrite, PixelFormat.Format8bppIndexed);
>
> try
> {
>         int iCol = ct.GetCount();
>         ColorEntry ce = new ColorEntry();
>         for (int i = 0; i < iCol; i++)
>         {
>                 int a = ct.GetColorEntryAsRGB(i, ce);
>                 bitmap.Palette.Entries[i] = Color.FromArgb(ce.c4, ce.c1,
> ce.c2, ce.c3);
>         }
>
>         int stride = bitmapData.Stride;
>         IntPtr buf = bitmapData.Scan0;
>
>         band.ReadRaster(0, 0, width, height, buf, width, height,
> DataType.GDT_Byte, 1, stride);
>
> }
> finally
> {
>         bitmap.UnlockBits(bitmapData);
> }
>
> **********************
> I hope you have time to have a look at the code.
>
> :)
> Johan
> ___________________________________
>
>
> Johan Hallgren
>
>
> WM-data a LogicaCMG company
> Pelle Bergs backe 3
> Box 1938, 791 19 Falun
> Tel: 023-547 46 (int: +46-2354746)
>
> Mobil: 070-588 44 28 (int: +46-705884428)
>
> johan.e.hallgren@wmdata.com
> http://www.wmdata.se
>
> -----Original Message-----
> From: Tamas Szekeres [mailto:szekerest@gmail.com]
> Sent: den 12 mars 2007 16:50
> To: Hallgren Johan E
> Subject: Re: [Gdal-dev] Read one band image to a bitmap in csharp
>
> 2007/3/12, Hallgren Johan E <jhhal@wmdata.com>:
> > Thanks Tamas,
> >
> > Now things working! The code below is from the GDALRead.cs sample and
> it
> > seams to be a bit slow. Is it possible to use the
> BitmapData/LockBitmap
> > instead and would it be faster?
> >
>
> Hopefully, creating a .net image with PixelFormat = 8bppIndexed would
> be faster, I haven't tested it though. It is possible to use
> BitmapData/LockBitmap directly, GDALReadDirect.cs uses this approach.
> In this case the palette should also be copied into the .net image.
>
> >
> > Regaring the Metadata and image extent.
> >
> > Does GDal provide any support for coordinate information stored in a
> > world file? Or does I have to read the file myself. I hoped that GDal
> > provided me with a uniform way of reading geographic information
> > wherever it's stored.
> >
>
> I think DataSet.GetGeoTransform could retrieve the transormation
> parameters as an array of floats (array length is 6)
>
>
> Best regards,
>
> Tamas
>

From nick at nickbower.com  Mon Mar 12 21:08:18 2007
From: nick at nickbower.com (Nick Bower)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GDALOpenInfo->fp == NULL for large files?
In-Reply-To: <45F597A1.3020905@pobox.com>
References: <45F51233.3080806@nickbower.com> <45F597A1.3020905@pobox.com>
Message-ID: <1173748098.6827.1179113217@webmail.messagingengine.com>

Hi - thanks Frank, but I did mention in my original post that the file
is just 85 megabytes big.  The platform is a HPC style Itanium cluster
running SuSe by the way.  Commenting out the fp = NULL in the block in
which VSIFOpenL happens makes things work, including the L1B driver's
use of VSIFOpen.  But the real issue would seem to be why is errno being
set by VSIFOpen?  I may be a Python coder, but what guarantees that
fp!=NULL && errno != (27, ENOENT, 79) simultaneously?  Convention
(whatever I'm doing, I seem to be breaking it)?  Perhaps the logic here
needs to be better.

            fp = VSIFOpen( pszFilename, "rb" );
            if( fp != NULL )
            {
                nHeaderBytes = (int) VSIFRead( pabyHeader, 1, 1024, fp
                );
                VSIRewind( fp );
            }
            else if( errno == 27 /* "File to large" */
                     || errno == ENOENT
                     || errno == 79 /* EOVERFLOW - value too large */ )
            {
                // Why are we in here if VSIFOpen works elsewhere???
                ....





On Mon, 12 Mar 2007 14:10:41 -0400, "Frank Warmerdam"
<warmerdam@pobox.com> said:
> Nick Bower wrote:
> > I'm trying to debug the L1B driver - it's failing because poOpenInfo->fp 
> > is NULL (starting a driver with this test is also in the driver 
> > tutorial, and a raw driver also):
> > 
> > GDALDataset *L1BDataset::Open( GDALOpenInfo * poOpenInfo )
> > 
> > {
> >    int i = 0;
> >    if( poOpenInfo->fp == NULL )
> >        return NULL; // Returns for no reason
> > etc...
> > 
> > So I tried to figure out why fp is NULL.  The reason may be below?  I'm 
> > not a C/C++ programmer to full understand this, so I can only get as far 
> > as suspecting the problem has something to do with VSIFOpen/VSIFOpenL 
> > conventions (let me know if I'm off).  With the latter, it is set to 
> > NULL after reading for some reason, thus meaning (as far as i can tell) 
> > the L1B, HDF4, raw etc drivers return in the first couple of lines of 
> > initialization.  The file itself is only 85 Meg, so is not actually that 
> > large.
> 
> Nick,
> 
> It is expected for poOpenInfo->fp to be NULL on some platforms when
> the file is larger than 2GB (or possibly 4GB).  I see the L1B driver
> is using the old technique of "adopting" the file pointer.  Formats
> wishing to support larger than 2GB should not do this and ought to be
> using the VSI*L API instead of the VSI* API.
> 
> Basically, the L1B driver is not "ready" for large files.
> 
> If you feel this should be rectified you could try updating the driver
> yourself, or filing a bug report.  Since we don't have L1B files larger
> than
> 2GB, it would likely be necessary to have to check any fixes made.
> 
> Best regards,
> -- 
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo,
> http://osgeo.org
> 
-- 
  Nick Bower
  nick@nickbower.com


From warmerdam at pobox.com  Tue Mar 13 01:05:49 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] GDALOpenInfo->fp == NULL for large files?
In-Reply-To: <1173748098.6827.1179113217@webmail.messagingengine.com>
References: <45F51233.3080806@nickbower.com> <45F597A1.3020905@pobox.com>
	<1173748098.6827.1179113217@webmail.messagingengine.com>
Message-ID: <45F6312D.2000001@pobox.com>

Nick Bower wrote:
> Hi - thanks Frank, but I did mention in my original post that the file
> is just 85 megabytes big.  The platform is a HPC style Itanium cluster
> running SuSe by the way.  Commenting out the fp = NULL in the block in
> which VSIFOpenL happens makes things work, including the L1B driver's
> use of VSIFOpen.  But the real issue would seem to be why is errno being
> set by VSIFOpen?  I may be a Python coder, but what guarantees that
> fp!=NULL && errno != (27, ENOENT, 79) simultaneously?  Convention
> (whatever I'm doing, I seem to be breaking it)?  Perhaps the logic here
> needs to be better.
> 
>             fp = VSIFOpen( pszFilename, "rb" );
>             if( fp != NULL )
>             {
>                 nHeaderBytes = (int) VSIFRead( pabyHeader, 1, 1024, fp
>                 );
>                 VSIRewind( fp );
>             }
>             else if( errno == 27 /* "File to large" */
>                      || errno == ENOENT
>                      || errno == 79 /* EOVERFLOW - value too large */ )
>             {
>                 // Why are we in here if VSIFOpen works elsewhere???
>                 ....
> 

Nick,

Sorry, that is what I get for reading quickly and leaping to assumptions.

I'm left quite confused.  Are you suggesting that in the above context
fp is return as non-NULL by VSIFOpen(), but we end up in the errno==27
logic anyways?  That doesn't seem to make sense.

I'm at a loss.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jdgonon at gi-lemans.com  Tue Mar 13 06:55:06 2007
From: jdgonon at gi-lemans.com (Jean-Daniel Gonon)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Compatibility between DGNDirect and php_Mapscript
Message-ID: <45F6830A.4000507@gi-lemans.com>

Hi

I am compiling DGNdirect-09964 (for DGN v8 file) (under Visual Studio 
2005 and Windows XP pro SP2) in GDAL/OGR-132.
I don't have any errors during the compilation GDAL13.dll (GDAL13.dll 
contains DGN v7 and v8 formats).

I want to test the GDAL13.dll under MAPSERVER, first to display a DGN v7 
file (this file contains only a line).

During MAPSERVER loading, I have errors about php_MAPSCRIPT_48.dll loading.

Is it possible to exist problems of compatibility between GDAL13.dll and 
php_MAPSCRIPT_48.dll ?

Thank you in advance
JD
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070313/d6105ace/attachment.html
From dron at ak4719.spb.edu  Tue Mar 13 07:40:39 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
Message-ID: <20070313114039.GB12071@ak4719.spb.edu>

Folks,

I have prepared new proposal regarding changes in OGR Open() functions.
Please, add your comments and criticism:

 http://www.gdal.org/rfc10_ogropen.html

Approach suggested in RFC is already implemented and waits to be
checked in.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dmorissette at mapgears.com  Tue Mar 13 10:03:44 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070313114039.GB12071@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>
Message-ID: <45F6AF40.9030503@mapgears.com>

Andrey Kiselev wrote:
> 
> I have prepared new proposal regarding changes in OGR Open() functions.
> Please, add your comments and criticism:
> 
>  http://www.gdal.org/rfc10_ogropen.html
> 

Do we have an idea of how many third party OGR drivers exist that would 
be impacted by that change? (i.e. not counting the drivers that are in 
the GDAL SVN repository).

Actually, could we not avoid any backwards compatibility issue by 
playing with the fact that the three Open() methods are virtual?

The base classes could define a default implementation for the new 
method that just maps the call to the old method without the 
papszOptions, e.g.

OGRDataSource *
OGRSFDriverRegistrar::Open( const char * pszName, int bUpdate,
                             OGRSFDriver ** ppoDriver,
			    char **papszOptions /*= NULL*/ )
{
     /* Map this call to the old/deprecated GDAL 1.4.0 Open() method
      * for drivers that do not implement the new Open() method added
      * in GDAL 1.5.0+
      */
     return Open( pszName, bUpdate, ppoDriver );
}


If I'm not mistaken, this way old drivers would continue to work even if 
they do not define the new Open() method... and upgraded drivers that 
override the new Open() method could take advantage of the new 
papszOptions feature.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Tue Mar 13 10:37:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070313114039.GB12071@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>
Message-ID: <45F6B713.5050101@pobox.com>

Andrey Kiselev wrote:
> Folks,
> 
> I have prepared new proposal regarding changes in OGR Open() functions.
> Please, add your comments and criticism:
> 
>  http://www.gdal.org/rfc10_ogropen.html
> 
> Approach suggested in RFC is already implemented and waits to be
> checked in.

Andrey,

Like Daniel I am wondering if we could avoid the backward incompatibility.

I am also wondering if we ought to take this opportunity to put the "shared"
flag into the regular open call, rather that offering it via a distinct
method/function.

I also think that the proposal should address updates to the OGR utilities
- ogrinfo and ogr2ogr - to support open options.

I also wonder if we should have a way of describing the available open
options to the application - something similar to what we do with
creation options.

Ultimately, I am not entirely keen on the approach because it will add
a substantial amount of complexity for applications wanting to allow
a user to open a dataset with full generality.

I wonder if an alternative to the auxilary options list would be a more
standardized way of encoding auxilary options into the dataset name.
Standard quoting rules, delimeters and so forth.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jmpmcmanus at yahoo.com  Tue Mar 13 16:43:26 2007
From: jmpmcmanus at yahoo.com (James McManus)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] grass vector files
Message-ID: <45F70CEE.9010901@yahoo.com>

I am trying to open a GRASS vector file, using OGR, with mapserver. I am 
using the following sequence in my .map file:

NAME "roads"
     TYPE line
     STATUS on
     CONNECTIONTYPE OGR
     CONNECTION
"/var/www/html/mapserver/grassdata/MDI/PERMANENT/vector/roads/head"
     DATA "1" # Layer number
     CLASS
         NAME "roads"
         COLOR 250 100 0
     END

When I try to initialize nothing appears in my web browser. I get a slew
of error messages in my httpd erro_log file, beginning with the line:

No such file or directory: Cannot open drivers directory, referer:
http://www.aratasystems.com/mapserver/MDI_i.html

This sounds a problem with accessing the file through my server.
However, I am able to open a GRASS raster file in, with directory and
files settings that are the same as the GRASS vector file. The next line
in the error_log has the following statement:

*** glibc detected *** /var/www/cgi-bin/mapserv: free(): invalid
pointer: 0x00000000007fc540 ***

This lead me (probably incorrectly) to think it may have to do with how
I am compiling mapserver. I have tried recompiling mapserver in a
variety of ways without success. Has anybody out there run into this
problem before? Any hints would help!

Jim


From tutey at o2.pl  Tue Mar 13 17:37:17 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
Message-ID: <45F7198D.10307@o2.pl>

Hi,

I'm having issues trying to merge 7 bands of Landsat scene into a
multiband image. Please could somebody help me out with this? I have
put a problematic sample (183 KB) on http://kufaya.googlepages.com/tm.zip.

I'd prefer a VRT output, but the following command fails:

$ gdal_merge.py -of VRT -separate -o merge.vrt nn*.tif

ERROR 1: Writing through VRTSourcedRasterBand is not supported.
Traceback (most recent call last):
  File "/usr/local/bin/gdal_merge.py", line 505, in ?
    fi.copy_into( t_fh, 1, t_band, nodata )
  File "/usr/local/bin/gdal_merge.py", line 303, in copy_into
    nodata_arg )
  File "/usr/local/bin/gdal_merge.py", line 138, in raster_copy
    data, t_xsize, t_ysize, t_band.DataType )
  File "/usr/lib/python2.4/site-packages/gdal.py", line 863, in WriteRaster
    buf_string, buf_xsize, buf_ysize,buf_type)
TypeError: Writing through VRTSourcedRasterBand is not supported.

Does that mean VRT output is not possible?

So I tried GeoTIFF:

$ gdal_merge.py -of GTIFF -separate -o merge.tif nn*.tif

which went ok, BUT colortables of bands 2-6 are "Undefined" instead of
"Gray":

$ gdalinfo merge.tif | grep ColorInterp
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 2 Block=254x32 Type=Byte, ColorInterp=Undefined
Band 3 Block=254x32 Type=Byte, ColorInterp=Undefined
Band 4 Block=254x32 Type=Byte, ColorInterp=Undefined
Band 5 Block=254x32 Type=Byte, ColorInterp=Undefined
Band 6 Block=254x32 Type=Byte, ColorInterp=Undefined
Band 7 Block=254x32 Type=Byte, ColorInterp=Undefined

while the for each input image the ColorInterp is "Gray":

$ for i in `ls | grep nn.\.tif`; do gdalinfo $i | grep ColorInterp; done
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
Band 1 Block=254x32 Type=Byte, ColorInterp=Gray

In that case I tried the -pct switch, but it makes gdal_merge.py crash:

$ gdal_merge.py -pct -of GTIFF -separate -o merge_pct.tif nn*.tif
Traceback (most recent call last):
  File "/usr/local/bin/gdal_merge.py", line 479, in ?
    t_fh.GetRasterBand(1).SetRasterColorTable(file_infos[0].ct)
  File "/usr/lib/python2.4/site-packages/gdal.py", line 892, in
SetRasterColorTable
    return _gdal.GDALSetRasterColorTable( self._o, ct._o )
AttributeError: 'NoneType' object has no attribute '_o



After some browsing I found this nice script:
http://www.vso.cape.com/~nhv/files/gdal/gdal_vrtmerge.py, but to my bad
luck, it fails as well:

$ gdal_vrtmerge.py -separate -o merge_2nd.vrt nn*.tif
Traceback (most recent call last):
  File "/home/shoofi/bin/gdal_vrtmerge.py", line 268, in ?
    t_fh.write('\t\t<ColorInterp>%s</ColorInterp>\n' %
IndexError: list index out of range

I will be very gratefull for hints on how to output a VRT multiband
image, or a GeoTIFF as a last resource, from such seven 8bit bands,
having ColorInterp set to "Gray" for each.

Best,
Maciek


From tutey at o2.pl  Tue Mar 13 18:00:20 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45F7198D.10307@o2.pl>
References: <45F7198D.10307@o2.pl>
Message-ID: <45F71EF4.1040806@o2.pl>

Maciej Sieczka wrote:
> Hi,
> 
> I'm having issues trying to merge 7 bands of Landsat scene into a
> multiband image.

I forgot to add it applies to GDAL 1.4.0 and GDAL SVN 2007-01-14.

Is there a stable GDAL SVN trunk including only bugfixes and no new
features? I'm hesistant to using unstable GDAL version.

Maciek

From woodbri at swoodbridge.com  Tue Mar 13 20:01:07 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] build help with threads
Message-ID: <45F73B43.2030606@swoodbridge.com>

Hi all,

I am have trouble running gdalwarp with threads.

It is build like this:

./configure
--with-mrsid=/usr/local/mrsid
--with-pg=/usr/bin/pg_config
--enable-threads=posix

It builds without a problem, and it runs fine without -multi, but 
running with the -multi option I get:

[swoodbridge@booboo compliance_fsa]$ gdalwarp -multi -s_srs 
+init=epsg:26912 -t_srs EPSG:4326 -te -112.5625 41 -112.5 41.0625 -rb 
-wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" 
./naip_1-1_1n_s_ut057_2006_1.sid tiffs/B-112_41/B-112_41_247.tif
Creating output file that is 5420P x 5420L.
Processing input file ./naip_1-1_1n_s_ut057_2006_1.sid.
ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()

[swoodbridge@booboo compliance_fsa]$ gdalwarp --version
GDAL 1.3.2.0, released 2006/05/02

Any idea what I'm doing wrong???

Thanks,
   -Steve

From mateusz at loskot.net  Tue Mar 13 20:49:01 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] build help with threads
In-Reply-To: <45F73B43.2030606@swoodbridge.com>
References: <45F73B43.2030606@swoodbridge.com>
Message-ID: <45F7467D.7080603@loskot.net>

Stephen Woodbridge wrote:
> Hi all,
> 
> I am have trouble running gdalwarp with threads.
> 
> It is build like this:
> 
> ./configure
> --with-mrsid=/usr/local/mrsid
> --with-pg=/usr/bin/pg_config
> --enable-threads=posix

The pthread support can be enabled using --with-threads flag but not
--enable-threads.

Anyway, I added pthread support info to the end of ./configure result
summary, and can be seen as, just below the OGR support info.

enable pthread support yes

or

enable pthread support no


Frank,
I updated ./configure.in, so could you rebuild the ./configure script?

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From yunjm2005 at gmail.com  Tue Mar 13 21:28:03 2007
From: yunjm2005 at gmail.com (=?gb2312?B?2k+9qMP3?=)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] How to custom my "Projected Coordinate Systems" in OGR
Message-ID: <200703140928005629836@gmail.com>


I use the class in ogr_spatialref.h to build a system with graphic UI to fulfill corrdinate system transformtion,
But i find the *.csv files in $GDAL_DATA$ is hard to extend or to add a new customed coordinate system to it.
I know that i can call statements like following to  complete this task,but how do i store this configuration to these csv files?then next time user can only call it by ImportFromXXX() function.

-------------
 oTargetSRS.SetProjCS( "XIAN80 Albers" );
 oTargetSRS.SetWellKnownGeogCS("EPSG:4610");
 oTargetSRS.SetACEA(27,45,0,105,0,0);
-------------


How these *csv construct?And if there hava a tools make my custom work easily?



O
2007-03-14
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070314/61c61714/attachment.html
From woodbri at swoodbridge.com  Tue Mar 13 22:58:28 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] build help with threads- SOLVED
In-Reply-To: <45F73B43.2030606@swoodbridge.com>
References: <45F73B43.2030606@swoodbridge.com>
Message-ID: <45F764D4.4020807@swoodbridge.com>

We upgraded to gdal 1.4.0 and that seemed to fix the problem.
Many thanks to mloskot on IRC for his help and guidance and for pointing 
out that I should be using --with-threads and not --enable-threads=posix

We are running! I had hoped we would see a big performance boost on a 
multi processor box with this option, but we get the same performance 
with and without the -multi option.

I have noticed that I can run two separate processes in about the same 
time as running one. I have a batchfile that does 164 gdalwarp commands 
and take 94 mins for one process, and 99 mins when 2 processes are 
running in parallel. The system has 8 virutal CPUs and the two processes 
run at nearly 100% cpu. So assuming the disk can keep up (not likely), I 
in theory should be able to run 8 processes. I think it would be easier 
to manage a fewer number of processes that run faster if that were 
possible, but we will deal with it.

-Steve

Stephen Woodbridge wrote:
> Hi all,
> 
> I am have trouble running gdalwarp with threads.
> 
> It is build like this:
> 
> ./configure
> --with-mrsid=/usr/local/mrsid
> --with-pg=/usr/bin/pg_config
> --enable-threads=posix
> 
> It builds without a problem, and it runs fine without -multi, but 
> running with the -multi option I get:
> 
> [swoodbridge@booboo compliance_fsa]$ gdalwarp -multi -s_srs 
> +init=epsg:26912 -t_srs EPSG:4326 -te -112.5625 41 -112.5 41.0625 -rb 
> -wm 250 --config GDAL_ONE_BIG_READ ON -co "TILED=YES" 
> ./naip_1-1_1n_s_ut057_2006_1.sid tiffs/B-112_41/B-112_41_247.tif
> Creating output file that is 5420P x 5420L.
> Processing input file ./naip_1-1_1n_s_ut057_2006_1.sid.
> ERROR 1: CPLCreateThread() failed in ChunkAndWarpMulti()
> 
> [swoodbridge@booboo compliance_fsa]$ gdalwarp --version
> GDAL 1.3.2.0, released 2006/05/02
> 
> Any idea what I'm doing wrong???
> 
> Thanks,
>   -Steve
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From vdharan2001 at gmail.com  Wed Mar 14 02:50:57 2007
From: vdharan2001 at gmail.com (vdharan nadra)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] .dbf file getting deleted
Message-ID: <d29760880703132350t4eb29ba2ya48a5f06d55a0047@mail.gmail.com>

HI,

I want to delete features from a shape file. When i try repack after
deleting the features, the .dbf file it self is getting deleted.

When i trace down the repack function, i could find that in
ogrshapelayer.cpp VSIRename(.....) returns OGRERR_FAILURE.

/* -------------------------------------------------------------------- */
/*      Cleanup the old .dbf and rename the new one.                    */
/* -------------------------------------------------------------------- */

    DBFClose( hDBF );
    hDBF = hNewDBF;

    VSIUnlink( CPLResetExtension( pszFullName, "dbf" ) );
    if( VSIRename( oTempFile, CPLResetExtension( pszFullName, "dbf" ) ) != 0
)
        return OGRERR_FAILURE;
        ^^^^^^^^^^^^^^^^^^^^^^^^^^^


Iam calling the delete feature and repack as follows
.....
poLayer->DeleteFeature(iField)
poDS->ExecuteSQL("REPACK myshapefile", NULL, NULL);
......

Please suggest me some solution.

Best Regards,
N.Vidhiyadharan
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070314/9ad72a4f/attachment.html
From bartvde at osgis.nl  Wed Mar 14 04:00:40 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] DATE fields in OCI driver
Message-ID: <5d7da95d75cf1457b59185a86a0190f1@145.50.39.11>

Hi list,

I have a view which contains DATE fields. Ogrinfo does not report them in
the summary.

If I add a TO_CHAR to my view SQL, ogrinfo reports the column.

Are DATE fields not supported?

Using GDAL 1.3.2.

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl






From nicky666 at gmail.com  Wed Mar 14 07:13:14 2007
From: nicky666 at gmail.com (Nicolas Ribot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] Warping from GTiff to JPG2000
Message-ID: <28de5e310703140413x798f9e90h38c4c85a39efaede@mail.gmail.com>

Hello,

I'm trying to warp a geotiff image into a JPG2000, using the JP2ECW driver.
my command line is:

gdalwarp -of JP2ECW -s_srs "EPSG:4326" -t_srs "EPSG:4230"
dalle21.geo.tif dalle21.j2k

I get an error:
ERROR 5: Destination band 1 appears to be read-only.

I succceed in using gdal_translate to convert from geotiff to JP2ECW.

Is it possible to warp from geotiff to JP2 directly, or should I chain
gdalwarp and gdal_translate ?

Thanx
nicolas

From mateusz at loskot.net  Wed Mar 14 08:24:50 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] .dbf file getting deleted
In-Reply-To: <d29760880703132350t4eb29ba2ya48a5f06d55a0047@mail.gmail.com>
References: <d29760880703132350t4eb29ba2ya48a5f06d55a0047@mail.gmail.com>
Message-ID: <45F7E992.9030405@loskot.net>

vdharan nadra wrote:
>    VSIUnlink( CPLResetExtension( pszFullName, "dbf" ) );
>    if( VSIRename( oTempFile, CPLResetExtension( pszFullName, "dbf" ) ) != 0
> )
>        return OGRERR_FAILURE;
>        ^^^^^^^^^^^^^^^^^^^^^^^^^^^

I've did a fast check and there seems to be a bug
in the REPACK'ing logic.
Please, could you file a bug including just the same details as you
posted here on the list?

Here is the bug reporting form:
http://bugzilla.remotesensing.org/enter_bug.cgi?product=GDAL

and assign it to me puting my e-mail: mateusz@loskot.net

Thanks!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Wed Mar 14 08:44:38 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <45F6AF40.9030503@mapgears.com>
References: <20070313114039.GB12071@ak4719.spb.edu>
	<45F6AF40.9030503@mapgears.com>
Message-ID: <20070314124438.GD20271@ak4719.spb.edu>

Daniel,

On Tue, Mar 13, 2007 at 10:03:44AM -0400, Daniel Morissette wrote:
> Do we have an idea of how many third party OGR drivers exist that
> would be impacted by that change? (i.e. not counting the drivers that
> are in the GDAL SVN repository).

This change is unavoidable, because OGRSFDriver::Open() is pure virtual
method. Fortunately it is pretty trivial to fix the driver, so I do not
see any serious problem for third-party drivers, if such exist.

> Actually, could we not avoid any backwards compatibility issue by 
> playing with the fact that the three Open() methods are virtual?
> 
> The base classes could define a default implementation for the new 
> method that just maps the call to the old method without the 
> papszOptions, e.g.
> 
> OGRDataSource *
> OGRSFDriverRegistrar::Open( const char * pszName, int bUpdate,
>                             OGRSFDriver ** ppoDriver,
> 			    char **papszOptions /*= NULL*/ )
> {
>     /* Map this call to the old/deprecated GDAL 1.4.0 Open() method
>      * for drivers that do not implement the new Open() method added
>      * in GDAL 1.5.0+
>      */
>     return Open( pszName, bUpdate, ppoDriver );
> }
> 
> 
> If I'm not mistaken, this way old drivers would continue to work even if 
> they do not define the new Open() method... and upgraded drivers that 
> override the new Open() method could take advantage of the new 
> papszOptions feature.

Sorry, but I do not understand the point here. OGRSFDriver::Open() is
the method that should be fixed in drivers because it is pure virtual.
How new OGRSFDriver::Open() should be declared? Should it be pure
virtual as the old method? Then drivers will need to implement both old
and new ones. If it will not be a pure virtual, then drivers still need
to implement the old Open() method, even if they want to go with new
style Open() call only. Please, correct me if I wrong.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Wed Mar 14 09:01:27 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <45F6B713.5050101@pobox.com>
References: <20070313114039.GB12071@ak4719.spb.edu>
	<45F6B713.5050101@pobox.com>
Message-ID: <20070314130127.GE20271@ak4719.spb.edu>

Frank,

On Tue, Mar 13, 2007 at 10:37:07AM -0400, Frank Warmerdam wrote:
> I am also wondering if we ought to take this opportunity to put the
> "shared" flag into the regular open call, rather that offering it via
> a distinct method/function.

Good point, I have updated the RFC. Now OGROpenSharedEx() function has
gone, because it functionality moved to OGROpenEx().

> I also think that the proposal should address updates to the OGR
> utilities - ogrinfo and ogr2ogr - to support open options.

Ok, let it be '-dsco' parameter: "Dataset Open Option".

> I also wonder if we should have a way of describing the available open
> options to the application - something similar to what we do with
> creation options.

You mean similar to how it is done in GDAL? I think we can describe both
creation and open options that way, but in first of all the format of
option description should be specified somewhere. Do we have a
specification for CREATIONOPTIONLIST metadata format?

> Ultimately, I am not entirely keen on the approach because it will add
> a substantial amount of complexity for applications wanting to allow a
> user to open a dataset with full generality.
> 
> I wonder if an alternative to the auxilary options list would be a
> more standardized way of encoding auxilary options into the dataset
> name.  Standard quoting rules, delimeters and so forth.

I do not like this approach because it is inconvinient and complex as
well. Also sometimes it may be needed to pass significant amount of
additional data along with datasource URL. I think that open option
approach actually is more simple and more flexible.

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Wed Mar 14 09:39:02 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070314130127.GE20271@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>
	<45F6B713.5050101@pobox.com>
	<20070314130127.GE20271@ak4719.spb.edu>
Message-ID: <20070314133902.GA20909@ak4719.spb.edu>

On Wed, Mar 14, 2007 at 04:01:27PM +0300, Andrey Kiselev wrote:
> > I also think that the proposal should address updates to the OGR
> > utilities - ogrinfo and ogr2ogr - to support open options.
> 
> Ok, let it be '-dsco' parameter: "Dataset Open Option".

I meant that it should be called '-dsoo'.

-- 
Andrey V. Kiselev
ICQ# 26871517

From jdgonon at gi-lemans.com  Wed Mar 14 10:13:46 2007
From: jdgonon at gi-lemans.com (Jean-Daniel Gonon)
Date: Wed Nov 21 11:50:42 2007
Subject: [Gdal-dev] compilation of GDAL/OGR-132 with DGNDirect09964
Message-ID: <45F8031A.3000408@gi-lemans.com>

Hi

I have a new question about compilation of GDAL/OGR-132 with 
DGNDirect09964 :

When I compile in debug mode, I have much warnings like this :
"dgntkMD8d.lib(CFontMgr.obj) : warning LNK4204: 
'd:\DGN_V8\GDAL-OGR\gdal132_vc8\VisualStudio8\gdal\Debug_DLL\vc80.pdb' 
is missing debugging information for referencing module; linking object 
as if no debug info"

In debug mode, I use debug DLL (libpng13d-vc8.lib libjpegd.lib 
zlib1d-vc8.lib xerces-c_2D.lib dgntkMD8d.lib olessMD8d.lib zlibMD8d.lib) 
and parameter "C/C++ => Code generation => Runtime Library" is 
"Multi-threaded Debug DLL (/MDd)" (see gdal_debug.vcproj project file in 
attached file).


Also, when I compile in release mode, i have errors like this :
"tif_aux.obj : error LNK2001: unresolved external symbol __RTC_Shutdown"

In release mode, I use release DLL (libpng13-vc8.lib libjpeg.lib 
zlib1-vc8.lib xerces-c_2.lib dgntkMD8.lib olessMD8.lib zlibMD8.lib) and 
parameter "C/C++ => Code generation => Runtime Library" at 
"Multi-threaded DLL (/MD)" (see gdal_release.vcproj project file in 
attached file).

I don't know what I must to do to correct these problems...

I don't know if my question is comprehensible, but I need your help... 
Thanck you in advance.
Jean-Daniel

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070314/58ad1074/attachment.html
From jdgonon at gi-lemans.com  Wed Mar 14 10:18:45 2007
From: jdgonon at gi-lemans.com (Jean-Daniel Gonon)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Fwd: compilation of GDAL/OGR-132 with DGNDirect09964
Message-ID: <45F80445.4030903@gi-lemans.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: gdal_vcproj.zip
Type: application/octet-stream
Size: 13464 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070314/924db3bc/gdal_vcproj.obj
From mateusz at loskot.net  Wed Mar 14 11:13:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] compilation of GDAL/OGR-132 with DGNDirect09964
In-Reply-To: <45F8031A.3000408@gi-lemans.com>
References: <45F8031A.3000408@gi-lemans.com>
Message-ID: <45F81106.7060809@loskot.net>

Jean-Daniel Gonon wrote:
> Also, when I compile in release mode, i have errors like this :
> "tif_aux.obj : error LNK2001: unresolved external symbol __RTC_Shutdown"

Jean-Daniel,

This kind of error in most cases mean you are mixing debug and release
libraries and/or linking with debug libs in release mode.

I'd suggest you to review your project very carefully again.

> In release mode, I use release DLL (libpng13-vc8.lib libjpeg.lib
> zlib1-vc8.lib xerces-c_2.lib dgntkMD8.lib olessMD8.lib zlibMD8.lib) and
> parameter "C/C++ => Code generation => Runtime Library" at
> "Multi-threaded DLL (/MD)" (see gdal_release.vcproj project file in
> attached file).

I've taken a short look at your projects and I can say I'm pretty sure
the configuration is messed.
In the configuration block of Release_DLL, you are defining _DEBUG
symbol for preprocessor.
Also, in the Release_DLL mode, you are linking with following libs:
dgntkMD8d.lib olessMD8d.lib zlibMD8d.lib
These are libraries built in debug mode and that's why you get errors!
There are more issues hidding inside your projects.

I believe your problem is mostly related to proper
configuration of Visual C++ project but not to GDAL,
so that's all I can help you in this matter.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Wed Mar 14 11:21:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Fwd: compilation of GDAL/OGR-132 with DGNDirect09964
In-Reply-To: <45F80445.4030903@gi-lemans.com>
References: <45F80445.4030903@gi-lemans.com>
Message-ID: <45F812F2.7060908@pobox.com>

Jean-Daniel Gonon wrote:
...
> Also, when I compile in release mode, i have errors like this :
> "tif_aux.obj : error LNK2001: unresolved external symbol __RTC_Shutdown"
> 
> In release mode, I use release DLL (libpng13-vc8.lib libjpeg.lib 
> zlib1-vc8.lib xerces-c_2.lib dgntkMD8.lib olessMD8.lib zlibMD8.lib) and 
> parameter "C/C++ => Code generation => Runtime Library" at 
> "Multi-threaded DLL (/MD)" (see gdal_release.vcproj project file in 
> attached file).
> 
> I don't know what I must to do to correct these problems...
> 
> I don't know if my question is comprehensible, but I need your help... 

Jean-Daniel,

I'm sorry for not responding to these questions, but I just have no
idea what is going wrong.  It seems to be something particular to your
mix of compiler version, build options, and use of dgndirect.  Under the
circumstances it is very hard for anyone else to help.  Ideally you would
find a windows "build guru" who could sit down with you and try to ferret
through the problems.  I don't see anything in the messages you are getting
that seem GDAL specific at all.  I presume they relate in some way to a mix
of different compile, link and runtime options.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Wed Mar 14 11:36:11 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070314124438.GD20271@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>	<45F6AF40.9030503@mapgears.com>
	<20070314124438.GD20271@ak4719.spb.edu>
Message-ID: <45F8166B.5010703@mapgears.com>

Andrey Kiselev wrote:
> Daniel,
> 
> On Tue, Mar 13, 2007 at 10:03:44AM -0400, Daniel Morissette wrote:
>> Do we have an idea of how many third party OGR drivers exist that
>> would be impacted by that change? (i.e. not counting the drivers that
>> are in the GDAL SVN repository).
> 
> This change is unavoidable, because OGRSFDriver::Open() is pure virtual
> method. Fortunately it is pretty trivial to fix the driver, so I do not
> see any serious problem for third-party drivers, if such exist.
> 

If no third party drivers exist then perhaps backwards compatibility is 
a non-issue, but your RFC refers to third party drivers, so I assume 
that you meant by that that some do exist. That's why I asked for a 
number... to estimate the impact of breaking backwards compatibility.


>> Actually, could we not avoid any backwards compatibility issue by 
>> playing with the fact that the three Open() methods are virtual?
>>
>> The base classes could define a default implementation for the new 
>> method that just maps the call to the old method without the 
>> papszOptions, e.g.
>>
>> OGRDataSource *
>> OGRSFDriverRegistrar::Open( const char * pszName, int bUpdate,
>>                             OGRSFDriver ** ppoDriver,
>> 			    char **papszOptions /*= NULL*/ )
>> {
>>     /* Map this call to the old/deprecated GDAL 1.4.0 Open() method
>>      * for drivers that do not implement the new Open() method added
>>      * in GDAL 1.5.0+
>>      */
>>     return Open( pszName, bUpdate, ppoDriver );
>> }
>>
>>
>> If I'm not mistaken, this way old drivers would continue to work even if 
>> they do not define the new Open() method... and upgraded drivers that 
>> override the new Open() method could take advantage of the new 
>> papszOptions feature.
> 
> Sorry, but I do not understand the point here. OGRSFDriver::Open() is
> the method that should be fixed in drivers because it is pure virtual.

Sorry, I used the wrong class for my example. The approach that I 
suggested should be applied to OGRSFDriver::Open() then.


> How new OGRSFDriver::Open() should be declared? Should it be pure
> virtual as the old method? Then drivers will need to implement both old
> and new ones. If it will not be a pure virtual, then drivers still need
> to implement the old Open() method, even if they want to go with new
> style Open() call only. Please, correct me if I wrong.
> 

I just realized the problem you may be referring to. I think the 
solution is that both versions of OGRSFDriver::Open() should be virtual 
methods (but NOT pure virtual) and the default implementations would be:

OGRDataSource
OGRSFDriver::*Open( const char *pszName, int bUpdate=FALSE,
                     char **papszOptions /*= NULL*/ )
{
     /* Map this call to the old/deprecated GDAL 1.4.0 Open() method
      * for drivers that do not implement the new Open() method added
      * in GDAL 1.5.0+
      */
     return Open( pszName, bUpdate );
}

OGRDataSource
OGRSFDriver::*Open( const char *pszName, int bUpdate=FALSE )
{
     /* This method is deprecated. Return NULL by default.
      * If a driver implements this virtual method then the driver's
      * implementation will be called instead
      */
     return NULL;
}


Then OGR drivers are required to implement only one of the two methods. 
Leading to two possible scenarios:

1- Driver implements old Open() method. Calls to the new method are 
automatically rerouted to the driver's implementation of the old Open() 
by the OGRSFDriver::*Open( const char *pszName, int bUpdate=FALSE, char 
**papszOptions /*= NULL*/ ) implementation above.

2- Driver implements the new Open() method. Since the method is virtual, 
the driver's implementation takes precedence over the default 
implementation and the driver's own Open() is called.

Of course for this to work it is assumed that OGR will never attempt to 
call the old Open()... i.e. that it will always pass the papszOptions 
argument to Open() calls.  Um... perhaps that's where my proposal 
breaks.  :(

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Wed Mar 14 11:51:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] DATE fields in OCI driver
In-Reply-To: <5d7da95d75cf1457b59185a86a0190f1@145.50.39.11>
References: <5d7da95d75cf1457b59185a86a0190f1@145.50.39.11>
Message-ID: <45F81A05.7040806@pobox.com>

Bart van den Eijnden (OSGIS) wrote:
> Hi list,
> 
> I have a view which contains DATE fields. Ogrinfo does not report them in
> the summary.
> 
> If I add a TO_CHAR to my view SQL, ogrinfo reports the column.
> 
> Are DATE fields not supported?
> 
> Using GDAL 1.3.2.

Bart,

The OCI driver includes specific DATE support, but I think this came after
GDAL 1.3.2. If you can verify the problem still exists in 1.4.0 then please
submit a bug report and we will look into it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yolan at mlug.missouri.edu  Wed Mar 14 12:01:41 2007
From: yolan at mlug.missouri.edu (Yolan)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] ogrinfo *.mdb (Unable to initialize ODBC connection to
	DSN...)
Message-ID: <45F81C65.6020804@mlug.missouri.edu>

Hi, I'm trying to read/convert an ESRI mdb to a set of shape files and 
later GML. The problem I'm having is that ogrinfo and ogr2ogr cannot 
read the mdb. The exact error can be found below. I've done quite a bit 
of digging and found that the current version of mdbtools may not work 
properly. I ended up trying several versions of mdbtools including the 
latest from cvs. With the latest version from cvs, I can export all of 
the mdb out to a set of csv files and a schema sql file, but still no 
luck with ogr2ogr or ogrinfo.

The messages I've referenced:
http://lists.maptools.org/pipermail/gdal-dev/2006-May/009075.html
http://www.arcknowledge.com/gmane.comp.gis.qgis.devel/2006-10/msg00043.html
http://lists.maptools.org/pipermail/gdal-dev/2006-May/009075.html

The exact errors/commands entered:
user@host $ ogrinfo ImpactMap.mdb
ERROR 1: Unable to initialize ODBC connection to DSN for 
DRIVER=Microsoft Access Driver (*.mdb);DBQ=ImpactMap.mdb,
[unixODBC]Could not find DSN in connect string
ERROR 1: Unable to initialize ODBC connection to DSN for 
DRIVER=Microsoft Access Driver (*.mdb);DBQ=ImpactMap.mdb,
[unixODBC]Could not find DSN in connect string
FAILURE:
Unable to open datasource `ImpactMap.mdb' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> KML
  -> Interlis 1
  -> Interlis 2
  -> ODBC
  -> PGeo
  -> PostgreSQL

user@host $ ogr2ogr -f "ESRI Shapefile" ~/maps/ ImpactMap.mdb
ERROR 1: Unable to initialize ODBC connection to DSN for 
DRIVER=Microsoft Access Driver (*.mdb);DBQ=ImpactMap.mdb,
[unixODBC]Could not find DSN in connect string
FAILURE:
Unable to open datasource `ImpactMap.mdb' with the following drivers.
  -> ESRI Shapefile
  -> MapInfo File
  -> UK .NTF
  -> SDTS
  -> TIGER
  -> S57
  -> DGN
  -> VRT
  -> AVCBin
  -> REC
  -> Memory
  -> CSV
  -> GML
  -> KML
  -> Interlis 1
  -> Interlis 2
  -> ODBC
  -> PGeo
  -> PostgreSQL




Thanks,
Yolan

From John.C.Cartwright at noaa.gov  Wed Mar 14 12:04:23 2007
From: John.C.Cartwright at noaa.gov (John Cartwright)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] problem compiling 1.4.0 on mac os x 10.4
In-Reply-To: <8C7DB339-8FD5-4360-8961-C5D127EB5FFE@gmx.net>
References: <45EC9D2C.1080104@noaa.gov>
	<8C7DB339-8FD5-4360-8961-C5D127EB5FFE@gmx.net>
Message-ID: <45F81D07.4080805@noaa.gov>

Hi Eric,

The "--with-libz=external" option worked perfectly.  Thanks for your help!

-- john


Eric D?nges wrote:
>
> Am 05.03.2007 um 23:43 schrieb John Cartwright:
>
>> Hello All,
>>
>> I'm having a little trouble compiling 1.4.0 on my mac.  The 1.3.x 
>> series compiled just fine on the same machine.  Lots of messages like:
>>
>> /usr/bin/ld: warning multiple definitions of symbol _get_crc_table
>> /usr/local/src/gdal-1.4.0/.libs/libgdal.dylib(single module) 
>> definition of _get_crc_table
>> /usr/lib/libz.dylib(crc32.o) definition of _get_crc_table
>>
>> Any ideas?
>
> You are having a linker conflict between the libz internal to GDAL and 
> the system's
> libz. To resolve this, you need to either not link against the 
> system's libz in any
> files linking against libgdal, or configure gdal to not use the 
> internal libz
> (try configuring with --without-libz or --with-libz=external - I 
> haven't tried this
> myself, but one of the above should work). Since doing the former 
> might be rather
> difficult in practice, and MacOS includes libz by default anyway, I 
> would recommend
> trying the later.
>
> With kind regards,
> Eric
>

From mateusz at loskot.net  Wed Mar 14 12:14:35 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] ogrinfo *.mdb (Unable to initialize ODBC connection
	to	DSN...)
In-Reply-To: <45F81C65.6020804@mlug.missouri.edu>
References: <45F81C65.6020804@mlug.missouri.edu>
Message-ID: <45F81F6B.8010803@loskot.net>

Yolan wrote:
> Hi, I'm trying to read/convert an ESRI mdb to a set of shape files
> and later GML. The problem I'm having is that ogrinfo and ogr2ogr
> cannot read the mdb. The exact error can be found below. I've done
> quite a bit of digging and found that the current version of mdbtools
> may not work properly. I ended up trying several versions of mdbtools
> including the latest from cvs. With the latest version from cvs, I
> can export all of the mdb out to a set of csv files and a schema sql
> file, but still no luck with ogr2ogr or ogrinfo.
> 
> The messages I've referenced: 
> http://lists.maptools.org/pipermail/gdal-dev/2006-May/009075.html 
> http://www.arcknowledge.com/gmane.comp.gis.qgis.devel/2006-10/msg00043.html
>  http://lists.maptools.org/pipermail/gdal-dev/2006-May/009075.html
> 
> The exact errors/commands entered: user@host $ ogrinfo ImpactMap.mdb

Generally,

mdbtools do not support DSN-less connection (what you can also read in
referenced threads above). So, the best way is to create a regular DSN
(see below).

I've hacked it for a while and it seems like a bug in mdbtools.
And ~9 months ago I tried to contact the mdbtools team a few times
but without any response, so I have another impression that mdbtools are
(or were) orphaned a little.


Have you tried the recipe from the PGeo manual?

"How to use PGeo driver with unixODBC and MDB Tools"

http://www.gdal.org/ogr/drv_pgeo.html

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Wed Mar 14 13:12:02 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <45F8166B.5010703@mapgears.com>
References: <20070313114039.GB12071@ak4719.spb.edu>
	<45F6AF40.9030503@mapgears.com>
	<20070314124438.GD20271@ak4719.spb.edu>
	<45F8166B.5010703@mapgears.com>
Message-ID: <20070314171202.GA22084@ak4719.spb.edu>

Daniel,

On Wed, Mar 14, 2007 at 11:36:11AM -0400, Daniel Morissette wrote:
> If no third party drivers exist then perhaps backwards compatibility
> is a non-issue, but your RFC refers to third party drivers, so I
> assume that you meant by that that some do exist. That's why I asked
> for a number... to estimate the impact of breaking backwards
> compatibility.

Compatibility issues should be mentioned because we need to be informed
of the number of issues introduced by the proposed changes. Independent
driver authors may express their opinions on the subject, otherwisse we
may consider that there are no objections against proposed breakage.

> I just realized the problem you may be referring to. I think the
> solution is that both versions of OGRSFDriver::Open() should be
> virtual methods (but NOT pure virtual) and the default implementations
> would be:
> 
> OGRDataSource
> OGRSFDriver::*Open( const char *pszName, int bUpdate=FALSE,
>                     char **papszOptions /*= NULL*/ )
> {
>     /* Map this call to the old/deprecated GDAL 1.4.0 Open() method
>      * for drivers that do not implement the new Open() method added
>      * in GDAL 1.5.0+
>      */
>     return Open( pszName, bUpdate );
> }
> 
> OGRDataSource
> OGRSFDriver::*Open( const char *pszName, int bUpdate=FALSE )
> {
>     /* This method is deprecated. Return NULL by default.
>      * If a driver implements this virtual method then the driver's
>      * implementation will be called instead
>      */
>     return NULL;
> }
> 
> 
> Then OGR drivers are required to implement only one of the two
> methods.  Leading to two possible scenarios:
> 
> 1- Driver implements old Open() method. Calls to the new method are
> automatically rerouted to the driver's implementation of the old
> Open() by the OGRSFDriver::*Open( const char *pszName, int
> bUpdate=FALSE, char **papszOptions /*= NULL*/ ) implementation above.
> 
> 2- Driver implements the new Open() method. Since the method is
> virtual, the driver's implementation takes precedence over the default
> implementation and the driver's own Open() is called.
> 
> Of course for this to work it is assumed that OGR will never attempt
> to call the old Open()... i.e. that it will always pass the
> papszOptions argument to Open() calls.  Um... perhaps that's where my
> proposal breaks.  :(

Actually my idea is to keep number of methods as small as possible.
Personally I do not like duplication of methods without real necessety.

So I am calling for feedback on above problem: is there anyone, who is
interested in keeping the OGRSFDriver::*Open() interface untouched?
Note, that binary interface will be broken in any case.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From Tom.Kralidis at ec.gc.ca  Wed Mar 14 14:08:50 2007
From: Tom.Kralidis at ec.gc.ca (Kralidis,Tom [Burlington])
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] testing of CDATA support in GDAL/OGR
References: <2576812186CDD411BF1500508B6DCE9511B30CAD@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <2576812186CDD411BF1500508B6DCE9511B30CAE@ecnwri1.ontario.int.ec.gc.ca>

 
Hi,
 
Using GDAL/OGR 1.4.0 (02 January 2007) on an FC4 box, we're testing CDATA block support within XML documents which are processed by GDAL/OGR (our target need is WMC docs in MapServer).
 
I've tested using a GML document with a CDATA block to an attribute element:

	<![CDATA[iGEORGIAN BAY <tom>]]>
	 
	when doing a:
	 
	$ ogrinfo -al foo.gml
	 
	The attribute is shown as:
	 
	iGEORGIAN BAY
	 
	When I test a special char:
	 
	<![CDATA[iGEORGIAN BAY & <tom>]]>
	 
	the result of the output shapefile attribute is:
	 
	iGEORGIAN BAY
	 
	From what I can see, this code is in port/cpl_minixml.cpp.
	 
	Is this the intended behaviour?
	 
	..Tom
	 
	 
	 



From beyhan at deprem.gov.tr  Thu Mar 15 04:25:25 2007
From: beyhan at deprem.gov.tr (Murat Beyhan)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] How to plot mercator projection map using ogr or proj
In-Reply-To: <200703140928005629836@gmail.com>
References: <200703140928005629836@gmail.com>
Message-ID: <45F902F5.5040309@deprem.gov.tr>

Hi friends,

I used to drawing map by mapserver.
I have some ESRI shape file. I would like to draw a map which its'
projection is mercator.
I'm asking you is it possible to draw a map by using EsRI file and how
can I draw this map by using mercator projection.
In map file I tried following commands but there is no diferences on the
map.

PROJECTION
proj=merc
END


I'm sorry for my question I'm not good at GIS applications
Regards...
Murat

-- 
This message has been scanned for viruses and
dangerous content by MailScanner, and is
believed to be clean.


From warmerdam at pobox.com  Thu Mar 15 11:17:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] How to plot mercator projection map using ogr or proj
In-Reply-To: <45F902F5.5040309@deprem.gov.tr>
References: <200703140928005629836@gmail.com> <45F902F5.5040309@deprem.gov.tr>
Message-ID: <45F9637A.3060608@pobox.com>

Murat Beyhan wrote:
> Hi friends,
> 
> I used to drawing map by mapserver.
> I have some ESRI shape file. I would like to draw a map which its'
> projection is mercator.
> I'm asking you is it possible to draw a map by using EsRI file and how
> can I draw this map by using mercator projection.
> In map file I tried following commands but there is no diferences on the
> map.
> 
> PROJECTION
> proj=merc
> END

Murat,

This seems like a question more appropriate to the mapserver-users
mailing list.

I thought you needed to quote strings for .map files.

eg.
PROJECTION
  "proj=merc"
END

Furthermore, I'd encourage you to use the "all in one plus format"
and to include an explicit ellipse.

PROJECTION
  "+proj=merc +datum=WGS84"
END

Don't forget that in addition to placing the above in your MAP
section of your .map file, you also need appropriate projection
declarations for your layers.  For instance, if the layers are
actually geographic WGS84 you would put:

PROJECTION
  "+proj=latlong +datum=WGS84"
END

on your layers.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ata.burak at gmail.com  Thu Mar 15 07:47:56 2007
From: ata.burak at gmail.com (burak ata)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] help about using GDAL in a Visual C++ 6
Message-ID: <ce0e423a0703150447p660c93c6o926eae793341b811@mail.gmail.com>

Hi everybody,
I'm a beginner in GIS staff, my aim is to read some geotiff files and get
the RGB data in them. I was recommended to use gdal for that. Unfortunately
I can not managed to use the gdal in my Visual C++ 6 project. Could you
please guide me about linking/including staffs? Please don't forget that I'm
a rookie :)
NOTE: Any sample code, Visual C++ 6 project files are welcomed :)

-- 
Burak Ata
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070315/dfffa8d0/attachment.html
From warmerdam at pobox.com  Thu Mar 15 12:35:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] testing of CDATA support in GDAL/OGR
In-Reply-To: <2576812186CDD411BF1500508B6DCE9511B30CAE@ecnwri1.ontario.int.ec.gc.ca>
References: <2576812186CDD411BF1500508B6DCE9511B30CAD@ecnwri1.ontario.int.ec.gc.ca>
	<2576812186CDD411BF1500508B6DCE9511B30CAE@ecnwri1.ontario.int.ec.gc.ca>
Message-ID: <45F975BB.1070008@pobox.com>

Kralidis,Tom [Burlington] wrote:
> 
> Hi,
> 
> Using GDAL/OGR 1.4.0 (02 January 2007) on an FC4 box, we're testing CDATA
> block support within XML documents which are processed by GDAL/OGR (our
> target need is WMC docs in MapServer).
> 
> I've tested using a GML document with a CDATA block to an attribute element:
> 
> 
> <![CDATA[iGEORGIAN BAY <tom>]]>  when doing a:  $ ogrinfo -al foo.gml  The
> attribute is shown as:  iGEORGIAN BAY  When I test a special char:  
> <![CDATA[iGEORGIAN BAY & <tom>]]>  the result of the output shapefile
> attribute is:  iGEORGIAN BAY  From what I can see, this code is in
> port/cpl_minixml.cpp.  Is this the intended behaviour?

Tom,

I tried this and it seems to work fine for me.  I embedded your CDATA
block in an existing GML as an attribute and got:

   ISLAND_F (String) = iGEORGIAN BAY & <tom>

Could you submit a specific (modestly sized) GML document via a GDAL
bug in bugzilla for us to try and reproduce this problem?

Note that the OGR GML driver actually uses Xerces, not cpl_minixml for
the bulk of it's processing, so this should be unrelated to cpl_minixml.
If you want to test the minixml code, you can build xmlreformat in
gdal/port and use that.  I have also verified that it is handling
CDATA properly, though it was added only a few weeks before the GDAL/OGR
1.4.0 release.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Mar 15 12:41:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070314171202.GA22084@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>
	<45F6AF40.9030503@mapgears.com>
	<20070314124438.GD20271@ak4719.spb.edu>
	<45F8166B.5010703@mapgears.com>
	<20070314171202.GA22084@ak4719.spb.edu>
Message-ID: <45F9773D.7000501@pobox.com>

Andrey Kiselev wrote:
> Daniel,
> 
> On Wed, Mar 14, 2007 at 11:36:11AM -0400, Daniel Morissette wrote:
>> If no third party drivers exist then perhaps backwards compatibility
>> is a non-issue, but your RFC refers to third party drivers, so I
>> assume that you meant by that that some do exist. That's why I asked
>> for a number... to estimate the impact of breaking backwards
>> compatibility.
> 
> Compatibility issues should be mentioned because we need to be informed
> of the number of issues introduced by the proposed changes. Independent
> driver authors may express their opinions on the subject, otherwisse we
> may consider that there are no objections against proposed breakage.

Guys,

I am aware of at least 2-3 private OGR drivers.

 > So I am calling for feedback on above problem: is there anyone, who is
 > interested in keeping the OGRSFDriver::*Open() interface untouched?
 > Note, that binary interface will be broken in any case.

I am interested in the backward compatibility approach, but I am not sure
my interest is justified.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From dmorissette at mapgears.com  Thu Mar 15 08:59:32 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <45F9773D.7000501@pobox.com>
References: <20070313114039.GB12071@ak4719.spb.edu>	<45F6AF40.9030503@mapgears.com>	<20070314124438.GD20271@ak4719.spb.edu>	<45F8166B.5010703@mapgears.com>	<20070314171202.GA22084@ak4719.spb.edu>
	<45F9773D.7000501@pobox.com>
Message-ID: <45F94334.7040101@mapgears.com>

Frank Warmerdam wrote:
> 
> I am aware of at least 2-3 private OGR drivers.
> 
>  > So I am calling for feedback on above problem: is there anyone, who is
>  > interested in keeping the OGRSFDriver::*Open() interface untouched?
>  > Note, that binary interface will be broken in any case.
> 
> I am interested in the backward compatibility approach, but I am not sure
> my interest is justified.
> 

If the impact of breaking backwards compatibility is relatively small 
(only 2-3 private drivers) then I won't make that a show stopper either.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From warmerdam at pobox.com  Thu Mar 15 11:46:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] How to custom my "Projected Coordinate Systems" in OGR
In-Reply-To: <200703140928005629836@gmail.com>
References: <200703140928005629836@gmail.com>
Message-ID: <45F96A6D.3060509@pobox.com>

O wrote:
>  
> I use the class in ogr_spatialref.h to build a system with graphic UI to 
> fulfill corrdinate system transformtion,
> But i find the *.csv files in $GDAL_DATA$ is hard to extend or to add a 
> new customed coordinate system to it.
> I know that i can call statements like following to  complete this 
> task,but how do i store this configuration to these csv files?then next 
> time user can only call it by ImportFromXXX() function.
>  
> -------------
>  oTargetSRS.SetProjCS( "XIAN80 Albers" );
>  oTargetSRS.SetWellKnownGeogCS("EPSG:4610");
>  oTargetSRS.SetACEA(27,45,0,105,0,0);
> -------------

Hi,

The .csv files are primarily intended for EPSG coordinate systems,
so it isn't really appropriate to extend them manually.

But you can add your own custom dictionaries in a manner similar
to gdal/data/cubewerx_extra.wkt.  These dictionary files consist
of lines with a short name, a comma and then the WKT definition of
the coordinate system.

You can reference such a definition from SetFromUserInput() and
programs that use that function (such as s_srs, a_srs, t_srs
for gdal_translate, ogr2ogr and gdalwarp) using the form:

  gdal_translate  -a_srs DICT:cubewerx_extra.wkt,41001

Programmatically you can use the importFromDict() method on
the OGRSpatialReference.

To get the WKT from an OGRSpatialReference, for appending to the
dictionary file, you can use the exportToWkt() method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Thu Mar 15 15:36:14 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] help about using GDAL in a Visual C++ 6
In-Reply-To: <ce0e423a0703150447p660c93c6o926eae793341b811@mail.gmail.com>
References: <ce0e423a0703150447p660c93c6o926eae793341b811@mail.gmail.com>
Message-ID: <45F9A02E.5000504@loskot.net>

burak ata wrote:
> Hi everybody,
> I'm a beginner in GIS staff, my aim is to read some geotiff files and get
> the RGB data in them. I was recommended to use gdal for that. Unfortunately
> I can not managed to use the gdal in my Visual C++ 6 project.

You can build/use GDAL with Microsoft Visual C++ 6.0.

> Could you please guide me about linking/including staffs?

First you need to get GDAL binaries for Windows.
You can build it yourself, in this case please refer the manual here:

http://www.gdal.org/gdal_building.html

or get GDAL binaries from FWTools Kit:

http://fwtools.maptools.org/

Next step is to create a client application project and configure it
using Visual C++ project properties dialog box.
You have to tell the compiler where it should look for GDAL headers.
For this, add INCDIR path (see the manual URL above).
Next, you need to tell where to find GDAL libraries, adding LIBDIR to
linker paths.
Finally, you need to tell the linker what to link with by adding
gdal_i.lib to linker input files.

> Please don't forget that
> I'm a rookie :)

If you do not know Visual C++ well, how to create and configure
projects, please refer Visual C++ manual, MSDN, etc.

> NOTE: Any sample code, Visual C++ 6 project files are welcomed :)

The best place to start are GDAL and OGR tutorials available
on the Web page:

http://www.gdal.org/gdal_tutorial.html
http://www.gdal.org/warptut.html
http://www.gdal.org/ogr/ogr_apitut.html
http://www.gdal.org/ogr/osr_tutorial.html

Best regards
-- 
Mateusz Loskot
http://mateusz.loskot.net

From fabio at synapsisbrasil.com.br  Thu Mar 15 16:47:29 2007
From: fabio at synapsisbrasil.com.br (=?iso-8859-1?Q?Kaminski=2C_F=E1bio_-_PROVIDER?=)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Fdo or Geos + gdal
Message-ID: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>

Hi,

 

            Im making some decisions about the framework i could use to build a geospatial aplication, and I would apreciate you expertise

            About this topic

            

            Im am looking for a geometry (and possibly gis Databases wrapers included), and I?ve found geos, wich look?s good for working with geometry

            But then i?ve found Fdo, wich looks very complete and well OO designed.

            

            It looks Fdo has a wrapper to gdal and its functionalities.

 

            So , my question is about, wich one could be better for me... geos more simpler..and fdo more complete(or it miss something??)

            

            I would apreciate your comments, cause I know that once I have done this decision, its very painfull to get back, if I miss some functionality needed.

 

            

            Thanks,            

 

            

 

F?bio Kaminski

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070315/999a9973/attachment.html
From ILucena at clarku.edu  Thu Mar 15 17:21:54 2007
From: ILucena at clarku.edu (Ivan Lucena)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Fdo or Geos + gdal
In-Reply-To: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>
References: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>
Message-ID: <6FD7C9DB26540B42A1207C69BF92D45502B0E874@Iris.ad.clarku.edu>

F?bio,

 

I don't know if I am going to help in your decision by suggesting to take a look at one more option:

 

http://terralib.org/html/v314/modules.html.  

 

It is an open source project and they use the same shapelib, ligjpeg, libgeotiff, zlib, gctp as GDAL, but they are not using GDAL. Yet! :-)

 

Good luck,

 

Ivan

 

 

________________________________

From: gdal-dev-bounces@lists.maptools.org [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Kaminski, F?bio - PROVIDER
Sent: Thursday, March 15, 2007 4:47 PM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] Fdo or Geos + gdal

 

Hi,

 

            Im making some decisions about the framework i could use to build a geospatial aplication, and I would apreciate you expertise

            About this topic

            

            Im am looking for a geometry (and possibly gis Databases wrapers included), and I?ve found geos, wich look?s good for working with geometry

            But then i?ve found Fdo, wich looks very complete and well OO designed.

            

            It looks Fdo has a wrapper to gdal and its functionalities.

 

            So , my question is about, wich one could be better for me... geos more simpler..and fdo more complete(or it miss something??)

            

            I would apreciate your comments, cause I know that once I have done this decision, its very painfull to get back, if I miss some functionality needed.

 

            

            Thanks,            

 

            

 

F?bio Kaminski

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070315/3ac8376a/attachment.html
From tutey at o2.pl  Thu Mar 15 17:47:42 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45F7198D.10307@o2.pl>
References: <45F7198D.10307@o2.pl>
Message-ID: <45F9BEFE.8070904@o2.pl>

Maciej Sieczka wrote:

> I'm having issues trying to merge 7 bands of Landsat scene into a
> multiband image. Please could somebody help me out with this? I have
> put a problematic sample (183 KB) on http://kufaya.googlepages.com/tm.zip.

<snip>

> I will be very gratefull for hints on how to output a VRT multiband
> image, or a GeoTIFF as a last resource, from such seven 8bit bands,
> having ColorInterp set to "Gray" for each.

Since no comments, should I assume that the task is impossible to
achieve with GDAL? At least without programming?

Thanks.

Maciek

From warmerdam at pobox.com  Thu Mar 15 18:36:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Fdo or Geos + gdal
In-Reply-To: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>
References: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>
Message-ID: <45F9CA51.4030103@pobox.com>

Kaminski wrote:
>             Im making some decisions about the framework i could use to 
> build a geospatial aplication, and I would apreciate you expertise
> 
>             About this topic
>
>             Im am looking for a geometry (and possibly gis Databases 
> wrapers included), and I?ve found geos, wich look?s good for working 
> with geometry
> 
>             But then i?ve found Fdo, wich looks very complete and well 
> OO designed.
> 
>             It looks Fdo has a wrapper to gdal and its functionalities.
> 
>             So , my question is about, wich one could be better for me? 
> geos more simpler..and fdo more complete(or it miss something??)
> 
>             I would apreciate your comments, cause I know that once I 
> have done this decision, its very painfull to get back, if I miss some 
> functionality needed.

Fabio,

I think you need to provide more detail on your requirements if you want
good advice.

GEOS is just a geometry engine, and it does this job well.  But it does
not provide data access at all.

FDO provides a comprehensive model for data access and if your target
is an RDBMS covered by FDO then it may well be a good choice, though
in some regards I find it a bit complex.

Similar to FDO, OGR provides a data access mechanism that supports a
variety of formats, including a few RDBMS oriented ones.

FDO is takes a more DBMS-oriented approach than OGR, and is good at
stuff like handling transactions, and some other sophisticated operations.

I'd claim OGR is somewhat easier than FDO.

The FDO wrappers do not provide all the capabilities of GDAL/OGR.  For
instance the GDAL and OGR Providers for FDO are read-only.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yunjm2005 at gmail.com  Thu Mar 15 20:38:13 2007
From: yunjm2005 at gmail.com (=?gb2312?B?2k+9qMP3?=)
Date: Wed Nov 21 11:50:43 2007
Subject: Thanks for Answer: [Gdal-dev] How to custom my "Projected Coordinate
	Systems" inOGR
References: <200703140928005629836@gmail.com> <45F96A6D.3060509@pobox.com>
Message-ID: <200703160838070622758@gmail.com>

Hi,Frank:

Thanks for your reply.I will modify my code follow your advice.
And i have another question:
Is under the $GDAL_DATA$ directory have a file to describe which projection hava how many parameter as well as their name,function. I want give a common custome projection UI,if have the file i mention above it can make me dynamicly control the Form style. If don't have this file,should i control the UI according the projection various by enumerate their parameter ? 
hope your next reply.

Best regards,





yunjm
2007-03-16



 Frank Warmerdam
 2007-03-15 23:48:13
 O
 gdal-dev
 Re: [Gdal-dev] How to custom my "Projected Coordinate Systems" inOGR

O wrote:
>  
> I use the class in ogr_spatialref.h to build a system with graphic UI to 
> fulfill corrdinate system transformtion,
> But i find the *.csv files in $GDAL_DATA$ is hard to extend or to add a 
> new customed coordinate system to it.
> I know that i can call statements like following to  complete this 
> task,but how do i store this configuration to these csv files?then next 
> time user can only call it by ImportFromXXX() function.
>  
> -------------
>  oTargetSRS.SetProjCS( "XIAN80 Albers" );
>  oTargetSRS.SetWellKnownGeogCS("EPSG:4610");
>  oTargetSRS.SetACEA(27,45,0,105,0,0);
> -------------

Hi,

The .csv files are primarily intended for EPSG coordinate systems,
so it isn't really appropriate to extend them manually.

But you can add your own custom dictionaries in a manner similar
to gdal/data/cubewerx_extra.wkt.  These dictionary files consist
of lines with a short name, a comma and then the WKT definition of
the coordinate system.

You can reference such a definition from SetFromUserInput() and
programs that use that function (such as s_srs, a_srs, t_srs
for gdal_translate, ogr2ogr and gdalwarp) using the form:

  gdal_translate  -a_srs DICT:cubewerx_extra.wkt,41001

Programmatically you can use the importFromDict() method on
the OGRSpatialReference.

To get the WKT from an OGRSpatialReference, for appending to the
dictionary file, you can use the exportToWkt() method.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070316/25e9de2a/attachment.html
From warmerdam at pobox.com  Thu Mar 15 21:20:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: Thanks for Answer: [Gdal-dev] How to custom my "Projected
	Coordinate Systems" inOGR
In-Reply-To: <200703160838070622758@gmail.com>
References: <200703140928005629836@gmail.com> <45F96A6D.3060509@pobox.com>
	<200703160838070622758@gmail.com>
Message-ID: <45F9F0EC.70708@pobox.com>

O wrote:
> Hi,Frank:
>  
> Thanks for your reply.I will modify my code follow your advice.
> And i have another question:
> Is under the $GDAL_DATA$ directory have a file to describe which 
> projection hava how many parameter as well as their name,function. I 
> want give a common custome projection UI,if have the file i mention 
> above it can make me dynamicly control the Form style. If don't have 
> this file,should i control the UI according the projection various by 
> enumerate their parameter ?
> hope your next reply.

O,

There is no file in $GDAL_DATA$ for this, but at the API
level we do have the following functions to fetch a list of
projection methods, and the corresponding parameter list.

I don't think I have been maintaining it very well, so there
may be a few omissions, but it is intended to make it possible
to build a GUI that "automatically" supports all the projection
methods of the current GDAL/OGR.

/* -------------------------------------------------------------------- */
/*      Projection transform dictionary query.                */
/* -------------------------------------------------------------------- */

char CPL_DLL ** OPTGetProjectionMethods();
char CPL_DLL ** OPTGetParameterList( const char * pszProjectionMethod,
                             char ** ppszUserName );
int CPL_DLL OPTGetParameterInfo( const char * pszProjectionMethod,
                                 const char * pszParameterName,
                                 char ** ppszUserName,
                                 char ** ppszType,
                                 double *pdfDefaultValue );

There appears to be some documentation on this page:

http://www.gdal.org/ogr/ogr__srs__api_8h.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Thu Mar 15 23:28:12 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
Message-ID: <45FA0ECC.4020008@perkins.net>

Can someone remind me how error reporting works with the GDAL and OGR C# 
bindings? Do errors typically throw exceptions, or return status codes, 
or nulls, or both? There seems to be code to throw exceptions in most of 
the method definitions, but the code in swig/csharp/apps often appears 
to be checking for return null values instead. Which is correct?

For instance, if OGR.DataSource.GetLayerByIndex() is invoked with an 
invalid index, or if something else goes wrong, do we always/sometimes 
get an exception or do we just get a null back? Is there a general policy?

Cheers,

Simon


From hipoxi at gmail.com  Fri Mar 16 02:10:22 2007
From: hipoxi at gmail.com (ibrahim Z. HIDIR)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Layer Coordinate Transformation
Message-ID: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAAO9pqp6bV1UOUQOaR08xOucKAAAAQAAAATbdNJVGimkaZSfltULr2SwEAAAAA@gmail.com>

Hi

 

When i connect a data source ( with ogr ) i am getting the a layer  first,
then i am putting the layer in a loop and transforming  coordinates all the
features one bye one,

 

(i am using python )

 

 

import ogr

import osr

dss = ogr.Open('OCI:user/pass@db_name')

sqls = 'select * from schema.table'

layer = dss.ExecuteSQL( sqls )

 

feature = graphics.GetNextFeature()

 

while feature is not None:

            geom = feature.GetGeometryRef()

 

            ref       = osr.SpatialReference()

            out_ref = osr.SpatialReference()

            ref.ImportFromWkt( source_coor )      #source coordinate
definition wkt format

            out_ref.ImportFromWkt( base_coor )  # the coordinate system whic
i want to transfom the features in wkt format

            geom.AssignSpatialReference( ref )

            geom.TransformTo(out_ref)

 

feature = graphics.GetNextFeature()

 

it's working fine, but takes long time when i got a huge data, i couldn't
find a way to transform all layer on one time without a python loop. is
there a way to do it?

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070316/1608e6bf/attachment.html
From mateusz at loskot.net  Fri Mar 16 04:21:25 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Layer Coordinate Transformation
In-Reply-To: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAAO9pqp6bV1UOUQOaR08xOucKAAAAQAAAATbdNJVGimkaZSfltULr2SwEAAAAA@gmail.com>
References: <!~!UENERkVCMDkAAQACAAAAAAAAAAAAAAAAABgAAAAAAAAAO9pqp6bV1UOUQOaR08xOucKAAAAQAAAATbdNJVGimkaZSfltULr2SwEAAAAA@gmail.com>
Message-ID: <45FA5385.1080205@loskot.net>

ibrahim Z. HIDIR wrote:
> 
> it's working fine, but takes long time when i got a huge data, i couldn't
> find a way to transform all layer on one time without a python loop. is
> there a way to do it?

Yes, you need to iterate through features and transform SRS one by one.
You can also see how it's implemented in the ogr2ogr.cpp, near line 755.

However, I see a few places to optimize in you code:

> while feature is not None:
>   geom = feature.GetGeometryRef()
>   ref = osr.SpatialReference()
>   out_ref = osr.SpatialReference()
>   ref.ImportFromWkt( source_coor )
>   out_ref.ImportFromWkt( base_coor )

It's a better idea to not need to instantiate SpatialReference objects
and import SRS from WKT in each and every iteration.
It does decrease performance pretty much.
The 4 lines above should be put just before the loop, so ref and out_ref
is created once.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From fabio at synapsisbrasil.com.br  Fri Mar 16 08:01:24 2007
From: fabio at synapsisbrasil.com.br (=?iso-8859-1?Q?Kaminski=2C_F=E1bio_-_PROVIDER?=)
Date: Wed Nov 21 11:50:43 2007
Subject: RES: [Gdal-dev] Fdo or Geos + gdal
In-Reply-To: <45F9CA51.4030103@pobox.com>
References: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>
	<45F9CA51.4030103@pobox.com>
Message-ID: <0501AE5E961A4D42899FBCC1755CCE15011FF8CA@forsyn01ex01.for.e-corpnet.org>

Thanks for your advice,

	Thinking last night, and reading the fdo api, (I also read terralib api, thanks for sugestion), i?ve made my decision considering some important issues.
	
	* portability for small devices (wince(gdal/ogr already ports)/ palm)
	* port for postgis(fdo does not)
	* simplicity(build own framework gluing specialized?s apis with a eye in portability) 
	* gdal/ogr is a must and geos is suitable for my needs.

So I guess gdal/ogr + geos will make a good work thogeter :)

Thanks for your advice, and congratulations for gdal api. The (geo)revolution is only starting ;)

Fabio Kaminski

-----Mensagem original-----
De: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Enviada em: quinta-feira, 15 de mar?o de 2007 19:36
Para: Kaminski, F?bio - PROVIDER
Cc: gdal-dev@lists.maptools.org
Assunto: Re: [Gdal-dev] Fdo or Geos + gdal

Kaminski wrote:
>             Im making some decisions about the framework i could use to 
> build a geospatial aplication, and I would apreciate you expertise
> 
>             About this topic
>
>             Im am looking for a geometry (and possibly gis Databases 
> wrapers included), and I?ve found geos, wich look?s good for working 
> with geometry
> 
>             But then i?ve found Fdo, wich looks very complete and well 
> OO designed.
> 
>             It looks Fdo has a wrapper to gdal and its functionalities.
> 
>             So , my question is about, wich one could be better for me... 
> geos more simpler..and fdo more complete(or it miss something??)
> 
>             I would apreciate your comments, cause I know that once I 
> have done this decision, its very painfull to get back, if I miss some 
> functionality needed.

Fabio,

I think you need to provide more detail on your requirements if you want
good advice.

GEOS is just a geometry engine, and it does this job well.  But it does
not provide data access at all.

FDO provides a comprehensive model for data access and if your target
is an RDBMS covered by FDO then it may well be a good choice, though
in some regards I find it a bit complex.

Similar to FDO, OGR provides a data access mechanism that supports a
variety of formats, including a few RDBMS oriented ones.

FDO is takes a more DBMS-oriented approach than OGR, and is good at
stuff like handling transactions, and some other sophisticated operations.

I'd claim OGR is somewhat easier than FDO.

The FDO wrappers do not provide all the capabilities of GDAL/OGR.  For
instance the GDAL and OGR Providers for FDO are read-only.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org



From mateusz at loskot.net  Fri Mar 16 08:26:29 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: RES: [Gdal-dev] Fdo or Geos + gdal
In-Reply-To: <0501AE5E961A4D42899FBCC1755CCE15011FF8CA@forsyn01ex01.for.e-corpnet.org>
References: <0501AE5E961A4D42899FBCC1755CCE15011FF621@forsyn01ex01.for.e-corpnet.org>	<45F9CA51.4030103@pobox.com>
	<0501AE5E961A4D42899FBCC1755CCE15011FF8CA@forsyn01ex01.for.e-corpnet.org>
Message-ID: <45FA8CF5.4070703@loskot.net>

Kaminski wrote:
> 	
> 	* portability for small devices (wince(gdal/ogr already ports)/ palm)

Yes, GDAL is portend and I'm going to add support of new drivers.

> 	* port for postgis(fdo does not)

FYI, I'm working on FDI provider for PostGIS.
First release should be ready in a few days.
Here you can find some factoids:
http://www.ohloh.net/projects/4670

> 	* simplicity(build own framework gluing specialized?s apis with a eye in portability) 

Right.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From dron at ak4719.spb.edu  Fri Mar 16 08:46:53 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070313114039.GB12071@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>
Message-ID: <20070316124653.GA1944@ak4719.spb.edu>

>  http://www.gdal.org/rfc10_ogropen.html

Folks,

What will be the final resolution on above proposal?

Best regards,
Andrey


-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Fri Mar 16 09:01:12 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45F71EF4.1040806@o2.pl>
References: <45F7198D.10307@o2.pl> <45F71EF4.1040806@o2.pl>
Message-ID: <20070316130112.GA2011@ak4719.spb.edu>

Maciek,

On Tue, Mar 13, 2007 at 11:00:20PM +0100, Maciej Sieczka wrote:
> Is there a stable GDAL SVN trunk including only bugfixes and no new
> features? I'm hesistant to using unstable GDAL version.

You can check out the stable branch:

 https://svn.osgeo.org/gdal/branches/1.4/gdal

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Fri Mar 16 09:09:28 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45F7198D.10307@o2.pl>
References: <45F7198D.10307@o2.pl>
Message-ID: <20070316130928.GB2011@ak4719.spb.edu>

Maciej,

On Tue, Mar 13, 2007 at 10:37:17PM +0100, Maciej Sieczka wrote:
> So I tried GeoTIFF:
> 
> $ gdal_merge.py -of GTIFF -separate -o merge.tif nn*.tif
> 
> which went ok, BUT colortables of bands 2-6 are "Undefined" instead of
> "Gray":
> 
> $ gdalinfo merge.tif | grep ColorInterp
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 2 Block=254x32 Type=Byte, ColorInterp=Undefined
> Band 3 Block=254x32 Type=Byte, ColorInterp=Undefined
> Band 4 Block=254x32 Type=Byte, ColorInterp=Undefined
> Band 5 Block=254x32 Type=Byte, ColorInterp=Undefined
> Band 6 Block=254x32 Type=Byte, ColorInterp=Undefined
> Band 7 Block=254x32 Type=Byte, ColorInterp=Undefined
> 
> while the for each input image the ColorInterp is "Gray":
> 
> $ for i in `ls | grep nn.\.tif`; do gdalinfo $i | grep ColorInterp; done
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray

And that is no problem. GDAL marks extra bands as being alpha-channels,
they will be read back well by the GDAL and other RS software.

> In that case I tried the -pct switch, but it makes gdal_merge.py crash:
> 
> $ gdal_merge.py -pct -of GTIFF -separate -o merge_pct.tif nn*.tif
> Traceback (most recent call last):
>   File "/usr/local/bin/gdal_merge.py", line 479, in ?
>     t_fh.GetRasterBand(1).SetRasterColorTable(file_infos[0].ct)
>   File "/usr/lib/python2.4/site-packages/gdal.py", line 892, in
> SetRasterColorTable
>     return _gdal.GDALSetRasterColorTable( self._o, ct._o )
> AttributeError: 'NoneType' object has no attribute '_o

That should be related to old style Python bindings your GDAL built
with. Try to rebuild with options '--without-python --with-ngpython'.
And you do not need color table here, really.

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From alexandre.leroux at ec.gc.ca  Fri Mar 16 09:35:44 2007
From: alexandre.leroux at ec.gc.ca (Alexandre Leroux)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Problem reading shapefiles with upper and lowercase
	extensions, bug?
Message-ID: <45FA9D30.5030104@ec.gc.ca>


Hi list,

A colleague stumbled on the following problem: OGR failed to read the 
shapefile.PRJ associated to a shapefile.shp file. The workaround is 
simply renaming the ".PRJ" to lowercase. Shouldn't OGR read it whatever 
the case? Could this be considered a bug?

Have a nice Friday,

Alex :-)
-- 
Alexandre Leroux, M.Sc., Ing.
Environnement Canada / Environment Canada
Centre m?t?orologique canadien / Canadian Meteorological Centre
Division de la r?ponse aux urgences environnementales /
Environmental Emergency Response Division
alexandre.leroux@ec.gc.ca

From szekerest at gmail.com  Fri Mar 16 10:34:12 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
In-Reply-To: <45FA0ECC.4020008@perkins.net>
References: <45FA0ECC.4020008@perkins.net>
Message-ID: <f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>

It depends on the implementation in the gdal core whether the CPLError
is invoked or not. Generally if we can retrieve the error by calling
CPLGetLastErrorType() the error will be propagated to C# as an
exception.
As far as I can see the various providers are not calling CPLError in
DataSource.GetLayerByIndex. Here is a common example of it:

OGRLayer *OGRPGDataSource::GetLayer( int iLayer )
{
    if( iLayer < 0 || iLayer >= nLayers )
        return NULL;
    else
        return papoLayers[iLayer];
}

Therefore you should always check the return value in this case.

Best regards,

Tamas


2007/3/16, Simon Perkins <sy@perkins.net>:
> Can someone remind me how error reporting works with the GDAL and OGR C#
> bindings? Do errors typically throw exceptions, or return status codes,
> or nulls, or both? There seems to be code to throw exceptions in most of
> the method definitions, but the code in swig/csharp/apps often appears
> to be checking for return null values instead. Which is correct?
>
> For instance, if OGR.DataSource.GetLayerByIndex() is invoked with an
> invalid index, or if something else goes wrong, do we always/sometimes
> get an exception or do we just get a null back? Is there a general policy?
>
> Cheers,
>
> Simon
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From mateusz at loskot.net  Fri Mar 16 11:21:58 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Problem reading shapefiles with upper and lowercase
	extensions, bug?
In-Reply-To: <45FA9D30.5030104@ec.gc.ca>
References: <45FA9D30.5030104@ec.gc.ca>
Message-ID: <45FAB616.1080207@loskot.net>

Alexandre Leroux wrote:
> 
> Hi list,
> 
> A colleague stumbled on the following problem: OGR failed to read the
>  shapefile.PRJ associated to a shapefile.shp file. The workaround is
>  simply renaming the ".PRJ" to lowercase. Shouldn't OGR read it 
> whatever the case? Could this be considered a bug?

Alexandre,

Yes, it seems the small bug occure on case sensitive file systems.
Could you please submit a bug report and assign it to me
with my e-mail mateusz (at) loskot (dot) net? Thanks!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From t.r.decarlo at larc.nasa.gov  Fri Mar 16 11:29:15 2007
From: t.r.decarlo at larc.nasa.gov (Thom DeCarlo)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] current svn fails to compile, ersdataset.cpp
Message-ID: <005201c767df$db705ad0$959877c6@larc.nasa.gov>

(I'm sorry if you get this twice. I'm not sure about the first address I
sent it to.)

I'm getting an error when compiling ersdataset.cpp in the current svn.

ersdataset.cpp: In static member function 'static GDALDataset*
ERSDataset::Open(GDALOpenInfo*)':
ersdataset.cpp:527: error: 'class ERSHdrNode' has no member named 'FindElem'
ersdataset.cpp:533: error: 'class ERSHdrNode' has no member named 'FindElem'
ersdataset.cpp:539: error: 'class ERSHdrNode' has no member named 'FindElem'
ersdataset.cpp:545: error: 'class ERSHdrNode' has no member named 'FindElem'

And, sure enough, it doesn't exist in the ershdrnode.* files. Is there a
check-in missing for this change?

Thom
--
this sig intentionally left blank




From hobu at iastate.edu  Fri Mar 16 11:42:05 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] current svn fails to compile, ersdataset.cpp
In-Reply-To: <005201c767df$db705ad0$959877c6@larc.nasa.gov>
References: <005201c767df$db705ad0$959877c6@larc.nasa.gov>
Message-ID: <6EA05F62-130E-49C1-9F4E-ADA0662A16E3@iastate.edu>

Fixed.

http://lists.osgeo.org/pipermail/gdal-commits/2007-March/000359.html


On Mar 16, 2007, at 10:29 AM, Thom DeCarlo wrote:

> (I'm sorry if you get this twice. I'm not sure about the first  
> address I
> sent it to.)
>
> I'm getting an error when compiling ersdataset.cpp in the current svn.
>
> ersdataset.cpp: In static member function 'static GDALDataset*
> ERSDataset::Open(GDALOpenInfo*)':
> ersdataset.cpp:527: error: 'class ERSHdrNode' has no member named  
> 'FindElem'
> ersdataset.cpp:533: error: 'class ERSHdrNode' has no member named  
> 'FindElem'
> ersdataset.cpp:539: error: 'class ERSHdrNode' has no member named  
> 'FindElem'
> ersdataset.cpp:545: error: 'class ERSHdrNode' has no member named  
> 'FindElem'
>
> And, sure enough, it doesn't exist in the ershdrnode.* files. Is  
> there a
> check-in missing for this change?
>
> Thom
> --
> this sig intentionally left blank
>
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>


From warmerdam at pobox.com  Fri Mar 16 16:03:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] RFC 10: OGR Open Parameters
In-Reply-To: <20070316124653.GA1944@ak4719.spb.edu>
References: <20070313114039.GB12071@ak4719.spb.edu>
	<20070316124653.GA1944@ak4719.spb.edu>
Message-ID: <45FAF81A.10201@pobox.com>

Andrey Kiselev wrote:
>>  http://www.gdal.org/rfc10_ogropen.html
> 
> Folks,
> 
> What will be the final resolution on above proposal?

Andrey,

I find myself at "-0" on the proposal.  As we discussed in IRC my
main concern is that the approach of an extra options list
substantially complicates opening datasets with required open options
for all the applications.

For instance OpenEV will now need some sort of gui dialogs for open
options.

MapServer has no current mechanism for passing extra open options.  It
is assumed that for OGR datasets the whole dataset name is in the
CONNECTION string.

And this extends to lots of other applications.

Currently we do support creation options when creating files with GDAL
and OGR, but generally these are really optional things and you can produce
a sort of default file without them.  More importantly, I would claim that
the complexity of creation with GDAL and OGR is part of the reason that
there are a lot more applications that can read with GDAL and OGR than there
are applications that can write with them.

On the other hand, the current ad-hoc approach to handling parameters in
the various driver open methods is problematic.  I would like to suggest
that instead we have a "standard" way of packing the filename and open
options into the dataset name, possibly also defining some conventions for
some open options.

For instance we might say that dataset names with embedded options should
always take the form:

OPT:filename[,parm=value]*

And furthermore that normal C quoting and escaping rules be applied as is
done by CPLSEscapeString() with the format type CPLES_BackslashQuotable
described as:

  * CPLES_BackslashQuotable(0): This scheme turns a binary string into
  * a form suitable to be placed within double quotes as a string constant.
  * The backslash, quote, '\0' and newline characters are all escaped in
  * the usual C style.

Actually, as I think about it, we could actually proceed with your
proposal, but extend it to require OGROpen() to know how to "unwrap"
dataset names that appear like the above into a set of name=value pairs
for the options list.  This would give an escape valve for passing
the filename and other open options in applications with no explicit
way of doing this, but it would also allow a fairly clean option list
approach within the drivers, and for application code that can deal
with it easily.

Would you mind if I amended RFC 10 to include this approach?  I'd be
happy to implement the unwrapping aspect.

I'd also suggest then that we should extend this change to GDAL since
similar issues do come up with GDAL drivers.  If this is beyond what
you are prepared to implement for your requirements, I'd be willing to
do the GDAL side.

What do you think?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Mar 16 16:47:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] ERMapper .ers - samples requested
Message-ID: <45FB026F.3070106@pobox.com>

Folks,

I'm implementing a GDAL driver for ERMapper .ers files.  I am seeking
sample files I can use for testing and fleshing out the driver.  If you
have files with small associated rasters that would be great, otherwise just
sending me the .ers header is also very helpful.

Please provide them to me off the gdal-dev list.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Sat Mar 17 04:18:06 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
In-Reply-To: <f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>
References: <45FA0ECC.4020008@perkins.net>
	<f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>
Message-ID: <45FBA43E.2030208@tkk.fi>


I'd say we should add checks and calls for CPLError for null values like 
this into the bindings layer.

I did this for a number of methods in ogr.i, for example into 
OGRFeature::GetFieldDefnRef. The simple reason is that if the null gets 
into the scripting language layer, it will create a core dump, which is 
not acceptable behavior, and this is the last place where it can be done 
(at least in the case of Perl). I know there are still many cases in 
which this happens since I get core dumps if I'm careless in coding with 
the Perl bindings.

Could we adopt the policy of always throwing an exception in a case of 
errors in the bindings?

Regards,

Ari

Tamas Szekeres kirjoitti:
> It depends on the implementation in the gdal core whether the CPLError
> is invoked or not. Generally if we can retrieve the error by calling
> CPLGetLastErrorType() the error will be propagated to C# as an
> exception.
> As far as I can see the various providers are not calling CPLError in
> DataSource.GetLayerByIndex. Here is a common example of it:
>
> OGRLayer *OGRPGDataSource::GetLayer( int iLayer )
> {
>    if( iLayer < 0 || iLayer >= nLayers )
>        return NULL;
>    else
>        return papoLayers[iLayer];
> }
>
> Therefore you should always check the return value in this case.
>
> Best regards,
>
> Tamas
>
>
> 2007/3/16, Simon Perkins <sy@perkins.net>:
>> Can someone remind me how error reporting works with the GDAL and OGR C#
>> bindings? Do errors typically throw exceptions, or return status codes,
>> or nulls, or both? There seems to be code to throw exceptions in most of
>> the method definitions, but the code in swig/csharp/apps often appears
>> to be checking for return null values instead. Which is correct?
>>
>> For instance, if OGR.DataSource.GetLayerByIndex() is invoked with an
>> invalid index, or if something else goes wrong, do we always/sometimes
>> get an exception or do we just get a null back? Is there a general 
>> policy?
>>
>> Cheers,
>>
>> Simon
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From hobu at iastate.edu  Sat Mar 17 11:02:34 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
In-Reply-To: <45FBA43E.2030208@tkk.fi>
References: <45FA0ECC.4020008@perkins.net>
	<f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>
	<45FBA43E.2030208@tkk.fi>
Message-ID: <DD79513E-D20D-4C6E-A661-2C33ADA9615F@iastate.edu>

On Mar 17, 2007, at 3:18 AM, Ari Jolma wrote:
> Could we adopt the policy of always throwing an exception in a case  
> of errors in the bindings?

I think we should always throw for every language except Python.  If  
we can special case Python to no do so by default with some defines,  
that would be great. Python unfortunately has a lot of legacy, so  
having exceptions on by default will cause a lot of trouble for  
existing code.  When we were developing the ng bindings, Python was  
the only fleshed out binding, so having them off by default made  
sense, but now that all of the other languages have come together,  
Python's special case is causing trouble for the rest.

Howard

From szekerest at gmail.com  Sat Mar 17 11:43:20 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
In-Reply-To: <45FBA43E.2030208@tkk.fi>
References: <45FA0ECC.4020008@perkins.net>
	<f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>
	<45FBA43E.2030208@tkk.fi>
Message-ID: <f3b73b7d0703170843u87add5bk6b75ae36c057aa02@mail.gmail.com>

2007/3/17, Ari Jolma <ari.jolma@tkk.fi>:
>
> I'd say we should add checks and calls for CPLError for null values like
> this into the bindings layer.
>
> I did this for a number of methods in ogr.i, for example into
> OGRFeature::GetFieldDefnRef. The simple reason is that if the null gets
> into the scripting language layer, it will create a core dump, which is
> not acceptable behavior, and this is the last place where it can be done
> (at least in the case of Perl). I know there are still many cases in
> which this happens since I get core dumps if I'm careless in coding with
> the Perl bindings.
>
> Could we adopt the policy of always throwing an exception in a case of
> errors in the bindings?
>

Generally I have no objection. But why don't we generate the error at
the original place?

Like:

OGRLayer *OGRPGDataSource::GetLayer( int iLayer )
{
   if( iLayer < 0 || iLayer >= nLayers ) {
       CPLError(CE_Failure, 1, "Invalid argument iLayer in GetLayer");
       return NULL;
   }
   else
       return papoLayers[iLayer];
}

Best regards,

Tamas

From warmerdam at pobox.com  Sat Mar 17 14:49:09 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
In-Reply-To: <f3b73b7d0703170843u87add5bk6b75ae36c057aa02@mail.gmail.com>
References: <45FA0ECC.4020008@perkins.net>
	<f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>
	<45FBA43E.2030208@tkk.fi>
	<f3b73b7d0703170843u87add5bk6b75ae36c057aa02@mail.gmail.com>
Message-ID: <45FC3825.2080305@pobox.com>

Tamas Szekeres wrote:
> 2007/3/17, Ari Jolma <ari.jolma@tkk.fi>:
>>
>> I'd say we should add checks and calls for CPLError for null values like
>> this into the bindings layer.
>>
>> I did this for a number of methods in ogr.i, for example into
>> OGRFeature::GetFieldDefnRef. The simple reason is that if the null gets
>> into the scripting language layer, it will create a core dump, which is
>> not acceptable behavior, and this is the last place where it can be done
>> (at least in the case of Perl). I know there are still many cases in
>> which this happens since I get core dumps if I'm careless in coding with
>> the Perl bindings.
>>
>> Could we adopt the policy of always throwing an exception in a case of
>> errors in the bindings?
>>
> 
> Generally I have no objection. But why don't we generate the error at
> the original place?
> 
> Like:
> 
> OGRLayer *OGRPGDataSource::GetLayer( int iLayer )
> {
>   if( iLayer < 0 || iLayer >= nLayers ) {
>       CPLError(CE_Failure, 1, "Invalid argument iLayer in GetLayer");
>       return NULL;
>   }
>   else
>       return papoLayers[iLayer];
> }

Tamas / Ari,

Once upon a time OGR was essentially error return code oriented and avoided
using CPLError().  However, this proved to be a liability and so I've since
been using CPLError freely, but it is certainly not consistent.  I would
agree 100% with issuing CPLError()'s in OGR pretty much anywhere that errors
occur which would improve the exception generation in the wrappers.

Feel free to commit the above change - but please use symbolic constants
for CPL errors - normally CPLE_AppDefined if you aren't sure what to use.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From john.cole at uai.com  Sat Mar 17 15:35:11 2007
From: john.cole at uai.com (John Cole)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] OGR VRT performance through ODBC...
Message-ID: <76758090F8686C47A44B6FF52514A1D307909B5B@hermes.uai.int>

Hello,
  I have a OGR VRT layer defined through ODBC to a MsSqlSpatial database:

<OGRVRTDataSource>
    <OGRVRTLayer name='HUDPLS'>
		<SrcDataSource>ODBC:mapserver@HUDPLS</SrcDataSource>
		<SrcSQL>SELECT t.oid, t.casenumber, t.casestepnu, t.the_geom
FROM ST.FilterQuery('properties', 'the_geom', ST.MakeEnvelope(%BBOX%, -1))
AS q
INNER JOIN properties AS t ON q.oid = t.oid
where t.casestepnu='06' and t.inaca=0</SrcSQL>
		<GeometryType>wkbPoint</GeometryType>
		<GeometryField encoding='WKB' field='the_geom'/>
    </OGRVRTLayer>
</OGRVRTDataSource>

This works, but performance is a little disappointing.  MapServer renders
this layer in ~3.5 seconds, while a postgis layer with the same data is
rendered in ~0.35 seconds.  Running the query in SQL Server Management
Studio has all 23 rows returned in 0.00 seconds, so I'm fairly sure that the
issue is not MsSqlSpatial.  There are 260K points in the table, but only 23
are returned in my test query.

Is there anything I can do to configure either the ODBC driver (SQL Native
Driver) or the VRT layer itself to improve performance?

Thanks,

John Cole

PS. Sorry about sending this to the wrong list.

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.446 / Virus Database: 268.18.12/724 - Release Date: 3/16/2007
12:12 PM
 
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.

From warmerdam at pobox.com  Sat Mar 17 15:53:48 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] OGR VRT performance through ODBC...
In-Reply-To: <76758090F8686C47A44B6FF52514A1D307909B5B@hermes.uai.int>
References: <76758090F8686C47A44B6FF52514A1D307909B5B@hermes.uai.int>
Message-ID: <45FC474C.2010604@pobox.com>

John Cole wrote:
> Hello,
>   I have a OGR VRT layer defined through ODBC to a MsSqlSpatial database:
> 
> <OGRVRTDataSource>
>     <OGRVRTLayer name='HUDPLS'>
> 		<SrcDataSource>ODBC:mapserver@HUDPLS</SrcDataSource>
> 		<SrcSQL>SELECT t.oid, t.casenumber, t.casestepnu, t.the_geom
> FROM ST.FilterQuery('properties', 'the_geom', ST.MakeEnvelope(%BBOX%, -1))
> AS q
> INNER JOIN properties AS t ON q.oid = t.oid
> where t.casestepnu='06' and t.inaca=0</SrcSQL>
> 		<GeometryType>wkbPoint</GeometryType>
> 		<GeometryField encoding='WKB' field='the_geom'/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> This works, but performance is a little disappointing.  MapServer renders
> this layer in ~3.5 seconds, while a postgis layer with the same data is
> rendered in ~0.35 seconds.  Running the query in SQL Server Management
> Studio has all 23 rows returned in 0.00 seconds, so I'm fairly sure that the
> issue is not MsSqlSpatial.  There are 260K points in the table, but only 23
> are returned in my test query.
> 
> Is there anything I can do to configure either the ODBC driver (SQL Native
> Driver) or the VRT layer itself to improve performance?

John,

Does it take 2-3 seconds for ogrinfo to run against the above .vrt file,
dumping the result features?  I'm wondering if the issue relates to
the simplest of OGR feature reading or if it might be something that
mapserver is doing (like the two pass read done for query rather than
simple draw operations).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From john.cole at uai.com  Sat Mar 17 16:36:38 2007
From: john.cole at uai.com (John Cole)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] OGR VRT performance through ODBC...
Message-ID: <76758090F8686C47A44B6FF52514A1D307909B5C@hermes.uai.int>

Frank,
  Running ogrinfo takes more than 2 seconds to return a few rows (<10),
though I'm not doing any precise timing.  I didn't see an option to print
out any performance statistics.

I was hoping there might be some tuning I could do on the ODBC driver to
improve the speed.

Thanks,

John

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Saturday, March 17, 2007 1:54 PM
To: John Cole
Cc: 'gdal-dev@lists.maptools.org'
Subject: Re: [Gdal-dev] OGR VRT performance through ODBC...

John Cole wrote:
> Hello,
>   I have a OGR VRT layer defined through ODBC to a MsSqlSpatial database:
> 
> <OGRVRTDataSource>
>     <OGRVRTLayer name='HUDPLS'>
> 		<SrcDataSource>ODBC:mapserver@HUDPLS</SrcDataSource>
> 		<SrcSQL>SELECT t.oid, t.casenumber, t.casestepnu, t.the_geom
> FROM ST.FilterQuery('properties', 'the_geom', ST.MakeEnvelope(%BBOX%, -1))
> AS q
> INNER JOIN properties AS t ON q.oid = t.oid
> where t.casestepnu='06' and t.inaca=0</SrcSQL>
> 		<GeometryType>wkbPoint</GeometryType>
> 		<GeometryField encoding='WKB' field='the_geom'/>
>     </OGRVRTLayer>
> </OGRVRTDataSource>
> 
> This works, but performance is a little disappointing.  MapServer renders
> this layer in ~3.5 seconds, while a postgis layer with the same data is
> rendered in ~0.35 seconds.  Running the query in SQL Server Management
> Studio has all 23 rows returned in 0.00 seconds, so I'm fairly sure that
the
> issue is not MsSqlSpatial.  There are 260K points in the table, but only
23
> are returned in my test query.
> 
> Is there anything I can do to configure either the ODBC driver (SQL Native
> Driver) or the VRT layer itself to improve performance?

John,

Does it take 2-3 seconds for ogrinfo to run against the above .vrt file,
dumping the result features?  I'm wondering if the issue relates to
the simplest of OGR feature reading or if it might be something that
mapserver is doing (like the two pass read done for query rather than
simple draw operations).

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.446 / Virus Database: 268.18.12/724 - Release Date: 3/16/2007
12:12 PM
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.446 / Virus Database: 268.18.12/724 - Release Date: 3/16/2007
12:12 PM
 
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.

From warmerdam at pobox.com  Sat Mar 17 19:43:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] OGR VRT performance through ODBC...
In-Reply-To: <76758090F8686C47A44B6FF52514A1D307909B5C@hermes.uai.int>
References: <76758090F8686C47A44B6FF52514A1D307909B5C@hermes.uai.int>
Message-ID: <45FC7D2D.5050104@pobox.com>

John Cole wrote:
> Frank,
>   Running ogrinfo takes more than 2 seconds to return a few rows (<10),
> though I'm not doing any precise timing.  I didn't see an option to print
> out any performance statistics.
> 
> I was hoping there might be some tuning I could do on the ODBC driver to
> improve the speed.

John,

OK, so we know it isn't something about MapServer.  The next thing I wonder
is how much is "connection cost".  You can likely establish this by just
doing ogrinfo on your .vrt without any request for specific layers and their
features.  If that is also slow, then the ODBC connection cost is high.  This
isn't something you would see from the mssql sql shell since it is "paid"
once at connection time.

We should also ensure the issue isn't the VRT driver.  You can verify this
by doing something like:

  ogrinfo -ro ODBC:mapserver@HUDPLS -sql 'all your sql'

Hmm, thinking about it a bit, I suspect the problem is that when OGR connects
to an ODBC provider it tries to create layer information about all the layers
on that database.  If you have lots of tables, potentially even system tables,
that could be quite substantial.  The way around this is to list the specific
tables you wanted enumerated.  Since you are using an sql statement you don't
need any, but I think you need at least one.

Try using an ODBC connection string like:
   ODBC:mapserver@HUDPLS,<sometablename>

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ari.jolma at tkk.fi  Sun Mar 18 05:34:29 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] SWIG Exceptions for C# Bindings
In-Reply-To: <DD79513E-D20D-4C6E-A661-2C33ADA9615F@iastate.edu>
References: <45FA0ECC.4020008@perkins.net>
	<f3b73b7d0703160734q6face7fxb43cd53866bf65e8@mail.gmail.com>
	<45FBA43E.2030208@tkk.fi>
	<DD79513E-D20D-4C6E-A661-2C33ADA9615F@iastate.edu>
Message-ID: <45FD07A5.9090507@tkk.fi>

Howard Butler wrote:
> On Mar 17, 2007, at 3:18 AM, Ari Jolma wrote:
>> Could we adopt the policy of always throwing an exception in a case 
>> of errors in the bindings?
>
> I think we should always throw for every language except Python.  If 
> we can special case Python to no do so by default with some defines, 
> that would be great. Python unfortunately has a lot of legacy, so 
> having exceptions on by default will cause a lot of trouble for 
> existing code.  When we were developing the ng bindings, Python was 
> the only fleshed out binding, so having them off by default made 
> sense, but now that all of the other languages have come together, 
> Python's special case is causing trouble for the rest.

I'm not proposing any changes into the current state of thing. I'd just 
want us to be consistent with having an error status set in a case of an 
error (any error), so that the system we have in place (%exception in 
cpl_exceptions.i) can catch error situations. I don't know Python's 
system enough to know what you are talking about, sorry :)

Cheers,

Ari

>
> Howard


From tutey at o2.pl  Sun Mar 18 06:43:50 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <20070316130928.GB2011@ak4719.spb.edu>
References: <45F7198D.10307@o2.pl> <20070316130928.GB2011@ak4719.spb.edu>
Message-ID: <45FD17E6.5000406@o2.pl>

Andrey,

Thanks for your reply. Please read below. CCing Mateusz who offered his
help on this issue off-list.

Andrey Kiselev wrote:

> On Tue, Mar 13, 2007 at 10:37:17PM +0100, Maciej Sieczka wrote:
>> So I tried GeoTIFF:
>>
>> $ gdal_merge.py -of GTIFF -separate -o merge.tif nn*.tif
>>
>> which went ok, BUT colortables of bands 2-6 are "Undefined" instead of
>> "Gray":
>>
>> $ gdalinfo merge.tif | grep ColorInterp
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 2 Block=254x32 Type=Byte, ColorInterp=Undefined
>> Band 3 Block=254x32 Type=Byte, ColorInterp=Undefined
>> Band 4 Block=254x32 Type=Byte, ColorInterp=Undefined
>> Band 5 Block=254x32 Type=Byte, ColorInterp=Undefined
>> Band 6 Block=254x32 Type=Byte, ColorInterp=Undefined
>> Band 7 Block=254x32 Type=Byte, ColorInterp=Undefined
>>
>> while the for each input image the ColorInterp is "Gray":
>>
>> $ for i in `ls | grep nn.\.tif`; do gdalinfo $i | grep ColorInterp; done
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
>> Band 1 Block=254x32 Type=Byte, ColorInterp=Gray
> 
> And that is no problem. GDAL marks extra bands as being alpha-channels,

So does the ColorInterp=Undefined mean the same as ColorInterp=Alpha?

> they will be read back well by the GDAL and other RS software.

Can I somehow set arbitrary names for bands? Eg. call band 1 "Landsat
blue", band 2 "Landsat green" etc.? If so, could that brake anything?

>> In that case I tried the -pct switch, but it makes gdal_merge.py crash:
>>
>> $ gdal_merge.py -pct -of GTIFF -separate -o merge_pct.tif nn*.tif
>> Traceback (most recent call last):
>>   File "/usr/local/bin/gdal_merge.py", line 479, in ?
>>     t_fh.GetRasterBand(1).SetRasterColorTable(file_infos[0].ct)
>>   File "/usr/lib/python2.4/site-packages/gdal.py", line 892, in
>> SetRasterColorTable
>>     return _gdal.GDALSetRasterColorTable( self._o, ct._o )
>> AttributeError: 'NoneType' object has no attribute '_o
> 
> That should be related to old style Python bindings your GDAL built
> with. Try to rebuild with options '--without-python --with-ngpython'.

I have problems :(.

I fetched the stable 1.4.0 trunk (thanks for the hint in your other
email, Andrey).

GDAL --without-python --with-ngpython (full config syntax and other
details below) configures and builds without errors, but after the make
install, no python scripts get installed, including gdal_merge.py. How
do I build GDAL --with-ngpython and install it properly?

I have python2.4-numeric 24.2 and python2.4-numarray 1.5.1 installed
into /usr. site-packages dir is /usr/lib/python2.4/site-packages/

Note: there is a warning in config.log: "checking for NumPy include
files... missing"; does that matter?



DETAILS:

Fetched GDAL like this:
$ svn checkout https://svn.osgeo.org/gdal/branches/1.4/gdal gdal140_svn

Build steps:
$ export CPPFLAGS="-I/usr/include/python2.4/Numeric
-I/usr/include/python2.4/numarray"

$ ./configure --with-hdf4=/usr/local/lib --with-libz=internal
--with-png=internal --with-libtiff=internal --with-geotiff=internal
--with-jpeg=internal --with-gif=internal --with-geos=yes
--with-pg=/usr/bin/pg_config --with-sqlite=/usr/lib --with-xerces=yes
--without-python --with-ngpython

$ make

$ sudo make install

Logs for configure, make and make install are attached.

Maciek

-------------- next part --------------
A non-text attachment was scrubbed...
Name: logs.tar.bz2
Type: application/x-bzip
Size: 25380 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070318/6b4e53cc/logs.tar.bin
From john.cole at uai.com  Sun Mar 18 09:47:33 2007
From: john.cole at uai.com (John Cole)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] OGR VRT performance through ODBC...
Message-ID: <76758090F8686C47A44B6FF52514A1D307909B61@hermes.uai.int>

Frank,

  Adding the table name to the connection string did the trick!  A postgres
layer is now just over twice as fast as mssql spatial:

msDrawMap(): Layer 2 (properties_aca), 0.046s 
msDrawMap(): Layer 4 (mssql), 0.110s

Thanks!!

John

-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Saturday, March 17, 2007 5:44 PM
To: John Cole
Cc: 'gdal-dev@lists.maptools.org'
Subject: Re: [Gdal-dev] OGR VRT performance through ODBC...

John Cole wrote:
> Frank,
>   Running ogrinfo takes more than 2 seconds to return a few rows (<10),
> though I'm not doing any precise timing.  I didn't see an option to print
> out any performance statistics.
> 
> I was hoping there might be some tuning I could do on the ODBC driver to
> improve the speed.

John,

OK, so we know it isn't something about MapServer.  The next thing I wonder
is how much is "connection cost".  You can likely establish this by just
doing ogrinfo on your .vrt without any request for specific layers and their
features.  If that is also slow, then the ODBC connection cost is high.
This
isn't something you would see from the mssql sql shell since it is "paid"
once at connection time.

We should also ensure the issue isn't the VRT driver.  You can verify this
by doing something like:

  ogrinfo -ro ODBC:mapserver@HUDPLS -sql 'all your sql'

Hmm, thinking about it a bit, I suspect the problem is that when OGR
connects
to an ODBC provider it tries to create layer information about all the
layers
on that database.  If you have lots of tables, potentially even system
tables,
that could be quite substantial.  The way around this is to list the
specific
tables you wanted enumerated.  Since you are using an sql statement you
don't
need any, but I think you need at least one.

Try using an ODBC connection string like:
   ODBC:mapserver@HUDPLS,<sometablename>

Best regards,
-- 
---------------------------------------+------------------------------------
--
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-- 
No virus found in this incoming message.
Checked by AVG Free Edition.
Version: 7.5.446 / Virus Database: 268.18.12/724 - Release Date: 3/16/2007
12:12 PM
 

-- 
No virus found in this outgoing message.
Checked by AVG Free Edition.
Version: 7.5.446 / Virus Database: 268.18.13/725 - Release Date: 3/17/2007
12:33 PM
 
This email and any files transmitted with it are confidential and intended solely for the use of the individual or entity to whom they are addressed. If you have received this email in error please notify the sender. This message contains confidential information and is intended only for the individual named. If you are not the named addressee you should not disseminate, distribute or copy this e-mail.

From mateusz at loskot.net  Sun Mar 18 10:43:37 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FD17E6.5000406@o2.pl>
References: <45F7198D.10307@o2.pl> <20070316130928.GB2011@ak4719.spb.edu>
	<45FD17E6.5000406@o2.pl>
Message-ID: <45FD5019.6040208@loskot.net>

Maciej Sieczka wrote:
> GDAL --without-python --with-ngpython (full config syntax and other
> details below) configures and builds without errors, but after the make
> install, no python scripts get installed, including gdal_merge.py. How
> do I build GDAL --with-ngpython and install it properly?
> 
> I have python2.4-numeric 24.2 and python2.4-numarray 1.5.1 installed
> into /usr. site-packages dir is /usr/lib/python2.4/site-packages/
> 
> Note: there is a warning in config.log: "checking for NumPy include
> files... missing"; does that matter?

Maciej,

Yes, it does.
You need to install dev package for NumPy package.
I may be wrong how the new NG Python bindings work now,
but it seems nothing is compiled in the swig/python, by make.

Try to install the NumPy dev package and it should help.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From yjacolin at free.fr  Sun Mar 18 11:00:28 2007
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Segmentation fault
Message-ID: <200703181600.28297.yjacolin@free.fr>

Hi,

I built gdal-ogr from source (test 1.3.2 and 1.4.0). I already succeed to 
built it. But this time,  I always get this error:
$ gdalinfo --formats
Supported Formats:
Erreur de segmentation (which means Segmentation fault ;-)

I get no error message with configure, make, and make install. I have no idea 
where it can come from. My configure command is:
./configure --without-python --with-sqlite=/usr/include/ 
--with-mysql=/usr/bin/mysql_config --with-pg=/usr/bin/pg_config 
--without-grass --with-ecw=/usr/local/ --with-xerces --without-ogdi

I built gdal-ogr with python and OGDI the last time I succeed, so this time I 
tried without, but no change.

Each time I tried to remove by hand all gdal-ogr files with:
rm -f /usr/local/bin/ogr*
rm -f /usr/local/bin/gdal*
rm -f /usr/local/lib/libgdal*
rm -Rf /usr/local/share/gdal/
rm -f /usr/local/man/man1/gdal*
rm -f /usr/lib/python2.4/site-packages/gdal*
rm -f /usr/lib/python2.4/site-packages/_gdalmodule*
rm -f /usr/local/include/gdal*

Any idea?

Thanks for any help, tips, ...

Y.
-- 
Yves Jacolin
-------------
http://yjacolin.gloobe.org
http://softlibre.gloobe.org

From warmerdam at pobox.com  Sun Mar 18 11:19:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Segmentation fault
In-Reply-To: <200703181600.28297.yjacolin@free.fr>
References: <200703181600.28297.yjacolin@free.fr>
Message-ID: <45FD587E.7070408@pobox.com>

Yves Jacolin wrote:
> Hi,
> 
> I built gdal-ogr from source (test 1.3.2 and 1.4.0). I already succeed to 
> built it. But this time,  I always get this error:
> $ gdalinfo --formats
> Supported Formats:
> Erreur de segmentation (which means Segmentation fault ;-)
> 
> I get no error message with configure, make, and make install. I have no idea 
> where it can come from. My configure command is:
> ./configure --without-python --with-sqlite=/usr/include/ 
> --with-mysql=/usr/bin/mysql_config --with-pg=/usr/bin/pg_config 
> --without-grass --with-ecw=/usr/local/ --with-xerces --without-ogdi
> 
> I built gdal-ogr with python and OGDI the last time I succeed, so this time I 
> tried without, but no change.

Yves,

One possibility is that you are still building with the old old PROJ.4 code
in OGDI.  This often causes an othewise unexplainable seg fault with linked
into something that also has the modern PROJ.4.  Could you verify that your
OGDI is built without the internal PROJ?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From aaime at openplans.org  Sun Mar 18 11:33:20 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
Message-ID: <45FD5BC0.1010003@openplans.org>

Hi,
as you may know, I've been working on making WKB useful as
a transfer format to cross the JNI barrier.
When I started, things weren't working as expected (JVM crash)
because of different interpretation of what a char is on
either side (8 bit on the C side, 16 bits character on the java side).

I had to perform a bit of changes in both the functions returning wkb, 
and the geometry construction ones that do take wkb as an input.
The outcome is not a fully clean extension as I hoped, because
the geometry constructor calls a static function that should
be defined before it. Anyways, the patch is attached for anyone
to review. I do believe a similar patch would be needed for c#
to handle geometry creation from wkb, too.

Do you have any kind of procedure I have to follow
before committing? In Geoserver I would open a jira issue to
record the change, so that the jira changelog contained that change
too.

Cheers
Andrea


-------------- next part --------------
A non-text attachment was scrubbed...
Name: wkb.patch
Type: text/x-diff
Size: 6005 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070318/ea1703ff/wkb.bin
From aaime at openplans.org  Sun Mar 18 11:38:38 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
Message-ID: <45FD5CFE.8040609@openplans.org>

Hi,
playing with java and OGR I had quite a bit of JVM
breakages due to inconsistent/conflicting memory
handling on either side of the JNI fence.

One that has been tricky to identify is Feature.setGeometryDirectly.
This issue is there because every SWIG wrapper
does deallocate its C++ counterpart when garbage collected,
and thus the OGR Feature that got is geometry thru setGeometryDirectly
is left with a dangling reference. (since garbage collection is not
predictable, the error may occur a few seconds later, leaving
you wondering what went wrong).

That function has no special handling... as is, it should
be removed from the bindings of any language that has
garbage collection and finalization to avoid memory
handling issues.

The following chapters in the Swig guide:
http://www.swig.org/Doc1.3/CSharp.html#csharp_memory_management_objects
http://www.swig.org/Doc1.3/Java.html#java_memory_management_objects
seem to provide a solution for that issue, other than removing
the method.

Did anyone every used those typemaps?
Cheers
Andrea

From warmerdam at pobox.com  Sun Mar 18 11:48:45 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
In-Reply-To: <45FD5BC0.1010003@openplans.org>
References: <45FD5BC0.1010003@openplans.org>
Message-ID: <45FD5F5D.8060306@pobox.com>

Andrea Aime wrote:
> Do you have any kind of procedure I have to follow
> before committing? In Geoserver I would open a jira issue to
> record the change, so that the jira changelog contained that change
> too.

Andrea,

If the change is going into a stable branch (ie. 1.4) then I would like
there to be a corresponding bug report.  But for improvements in trunk
it isn't required, though you can create one if you feel it is justified.

An email to gdal-dev, such as you have provided, is also desirable if the
change is likely to affect others.

So feel free to proceed.

At some point I would love to get a small test suite in place for the Java
interface, and have it tests under buildbot.  If you were to prepare a bit
of testing Java, Mateusz could help get it working with buildbot.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From yjacolin at free.fr  Sun Mar 18 12:03:44 2007
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Segmentation fault
In-Reply-To: <45FD587E.7070408@pobox.com>
References: <200703181600.28297.yjacolin@free.fr> <45FD587E.7070408@pobox.com>
Message-ID: <200703181703.44378.yjacolin@free.fr>

Le Dimanche 18 Mars 2007 16:19, Frank Warmerdam a ?crit?:
> Yves Jacolin wrote:
> > Hi,
> >
> > I built gdal-ogr from source (test 1.3.2 and 1.4.0). I already succeed to
> > built it. But this time,  I always get this error:
> > $ gdalinfo --formats
> > Supported Formats:
> > Erreur de segmentation (which means Segmentation fault ;-)
> >
> > I get no error message with configure, make, and make install. I have no
> > idea where it can come from. My configure command is:
> > ./configure --without-python --with-sqlite=/usr/include/
> > --with-mysql=/usr/bin/mysql_config --with-pg=/usr/bin/pg_config
> > --without-grass --with-ecw=/usr/local/ --with-xerces --without-ogdi
> >
> > I built gdal-ogr with python and OGDI the last time I succeed, so this
> > time I tried without, but no change.
>
> Yves,
>
> One possibility is that you are still building with the old old PROJ.4 code
> in OGDI.  This often causes an othewise unexplainable seg fault with linked
> into something that also has the modern PROJ.4.  Could you verify that your
> OGDI is built without the internal PROJ?
>
> Best regards,
Hi Frank,

Here the ./configure command:
./configure --with-proj --with-zlib --with-expat

so I try to build ogdi with:
./configure --with-proj=/usr/local/ --with-zlib --with-expat

I come back as soon as I finish to test this way.

Thanks again.

Y.
-- 
Yves Jacolin
-------------
http://yjacolin.gloobe.org
http://softlibre.gloobe.org


From yjacolin at free.fr  Sun Mar 18 12:20:15 2007
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Segmentation fault
In-Reply-To: <200703181703.44378.yjacolin@free.fr>
References: <200703181600.28297.yjacolin@free.fr> <45FD587E.7070408@pobox.com>
	<200703181703.44378.yjacolin@free.fr>
Message-ID: <200703181720.15243.yjacolin@free.fr>

Le Dimanche 18 Mars 2007 17:03, Yves Jacolin a ?crit?:
> Le Dimanche 18 Mars 2007 16:19, Frank Warmerdam a ?crit?:
> > Yves Jacolin wrote:
> > > Hi,
> > >
> > > I built gdal-ogr from source (test 1.3.2 and 1.4.0). I already succeed
> > > to built it. But this time,  I always get this error:
> > > $ gdalinfo --formats
> > > Supported Formats:
> > > Erreur de segmentation (which means Segmentation fault ;-)
> > >
> > > I get no error message with configure, make, and make install. I have
> > > no idea where it can come from. My configure command is:
> > > ./configure --without-python --with-sqlite=/usr/include/
> > > --with-mysql=/usr/bin/mysql_config --with-pg=/usr/bin/pg_config
> > > --without-grass --with-ecw=/usr/local/ --with-xerces --without-ogdi
> > >
> > > I built gdal-ogr with python and OGDI the last time I succeed, so this
> > > time I tried without, but no change.
> >
> > Yves,
> >
> > One possibility is that you are still building with the old old PROJ.4
> > code in OGDI.  This often causes an othewise unexplainable seg fault with
> > linked into something that also has the modern PROJ.4.  Could you verify
> > that your OGDI is built without the internal PROJ?
> >
> > Best regards,
>
> Hi Frank,
>
> Here the ./configure command:
> ./configure --with-proj --with-zlib --with-expat
>
> so I try to build ogdi with:
> ./configure --with-proj=/usr/local/ --with-zlib --with-expat
>
> I come back as soon as I finish to test this way.
>
> Thanks again.
>
> Y.
Hi,

I always got this error. The last time I built gdal, I try without-ogdi and 
without-python options. I am goint to try to install glda with the minimal 
options.

Y.
-- 
Yves Jacolin
-------------
http://yjacolin.gloobe.org
http://softlibre.gloobe.org


From szekerest at gmail.com  Sun Mar 18 12:42:43 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
In-Reply-To: <45FD5CFE.8040609@openplans.org>
References: <45FD5CFE.8040609@openplans.org>
Message-ID: <f3b73b7d0703180942g6aa07c73p66383b57de5c8adb@mail.gmail.com>

2007/3/18, Andrea Aime <aaime@openplans.org>:
> Hi,
> playing with java and OGR I had quite a bit of JVM
> breakages due to inconsistent/conflicting memory
> handling on either side of the JNI fence.
>
> One that has been tricky to identify is Feature.setGeometryDirectly.
> This issue is there because every SWIG wrapper
> does deallocate its C++ counterpart when garbage collected,
> and thus the OGR Feature that got is geometry thru setGeometryDirectly
> is left with a dangling reference. (since garbage collection is not
> predictable, the error may occur a few seconds later, leaving
> you wondering what went wrong).
>

You should implement %typemap() SWIGTYPE *DISOWN for the java binding.
Every wrapper has an internal flag to denote whether the wrapper owns
the underlying memory and it's responsible to destroy it.

Since the SWIG java and C# implementation is somewhat similar, you can
look into swig_csharp_extensions.i for a possible implementation. It
must be noted that there are some other issues to be handled related
to the memory management and garbage collection. Most of the problems
were handled for C# in the file mentioned before.
I'm a bit disappointed that these issues are not handled officially by
the SWIG implementation.

> That function has no special handling... as is, it should
> be removed from the bindings of any language that has
> garbage collection and finalization to avoid memory
> handling issues.
>

This is not the only function to be handled this way. It would be
unwise to remove them all.


> The following chapters in the Swig guide:
> http://www.swig.org/Doc1.3/CSharp.html#csharp_memory_management_objects
> http://www.swig.org/Doc1.3/Java.html#java_memory_management_objects
> seem to provide a solution for that issue, other than removing
> the method.
>

That proposal is not general (implementation specific) so it would
require large amount of coding when applying it for the various
gdal/ogr classes.

Best regards,

Tamas

From ari.jolma at tkk.fi  Sun Mar 18 12:50:56 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
In-Reply-To: <45FD5CFE.8040609@openplans.org>
References: <45FD5CFE.8040609@openplans.org>
Message-ID: <45FD6DF0.1060302@tkk.fi>

Andrea Aime kirjoitti:
>
> One that has been tricky to identify is Feature.setGeometryDirectly.
> This issue is there because every SWIG wrapper
> does deallocate its C++ counterpart when garbage collected,
> and thus the OGR Feature that got is geometry thru setGeometryDirectly
> is left with a dangling reference.

AFAI understand the SWIGTYPE *DISOWN that is used with that method 
should take care of the issue. The garbage collection system of the 
bound language should not deallocate the C++ object if it does not own it.

On the other hand, one method which seems to be missing DISOWN, is the 
constructor of Feature. Since it assumes the ownership of the 
FeatureDefinition (which however is not usually owned by the bound 
language to begin with) it should be disowned.

Ari


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From szekerest at gmail.com  Sun Mar 18 13:51:06 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
In-Reply-To: <45FD6DF0.1060302@tkk.fi>
References: <45FD5CFE.8040609@openplans.org> <45FD6DF0.1060302@tkk.fi>
Message-ID: <f3b73b7d0703181051g2237417cp7711a77136b77b13@mail.gmail.com>

2007/3/18, Ari Jolma <ari.jolma@tkk.fi>:
> Andrea Aime kirjoitti:
> >
> > One that has been tricky to identify is Feature.setGeometryDirectly.
> > This issue is there because every SWIG wrapper
> > does deallocate its C++ counterpart when garbage collected,
> > and thus the OGR Feature that got is geometry thru setGeometryDirectly
> > is left with a dangling reference.
>
> AFAI understand the SWIGTYPE *DISOWN that is used with that method
> should take care of the issue. The garbage collection system of the
> bound language should not deallocate the C++ object if it does not own it.
>
> On the other hand, one method which seems to be missing DISOWN, is the
> constructor of Feature. Since it assumes the ownership of the
> FeatureDefinition (which however is not usually owned by the bound
> language to begin with) it should be disowned.
>

The current implementation of OGRFeatureDefnShadow is confusing and I
doubt if it's working correctly as it stands. We can see some kind of
reference counting implemented inside OGRFeatureDefn, however the
destructor of OGRFeatureDefnShadow calls OGR_FD_Destroy regardless of
the actual reference count value. It would be better to call
OGR_FD_Release instead.

Apparently we should not mix the disown and refcount philosophy
because it may lead to various unpredictable problems in the future.

Best regards,

Tamas

From hobu at iastate.edu  Sun Mar 18 14:41:31 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
Message-ID: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>

All,

Frank, Mateusz, and I have been working on a Trac instance to go  
along with our Subversion repository.  It currently lives at http:// 
trac.osgeo.org/gdal .  The bugzilla dump of this incarnation is about  
two weeks old, so don't get too comfortable with it yet, as there  
will be at least one more iteration once we decide to make the move.

I have been tweaking the migration scripts to attempt to get things  
behaving how we'd like.  I think I have things about as far as we can  
go in any sort of automated way.  I would like folks to look over the  
Ticket migration and compare to some equivalents in Bugzilla and  
confirm that things are behaving as they should.  If you find  
something, please email the ticket id(s) to me, and I will collate  
them and see what we might be able to do as part of the automated  
migration.

I propose that we let the example stand for a week, and if the PSC is  
in agreement and there aren't too many awful artifacts from the  
automated migration, we complete the migration next weekend (Mar 23-24).

Here's some ticket listings:
<http://trac.osgeo.org/gdal/report/9>
<http://trac.osgeo.org/gdal/report/1>

Howard


From szekerest at gmail.com  Sun Mar 18 14:59:43 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
In-Reply-To: <45FD5BC0.1010003@openplans.org>
References: <45FD5BC0.1010003@openplans.org>
Message-ID: <f3b73b7d0703181159j3c6792bfs51473a7e25f41d62@mail.gmail.com>

2007/3/18, Andrea Aime <aaime@openplans.org>:
> Hi,
> as you may know, I've been working on making WKB useful as
> a transfer format to cross the JNI barrier.
> When I started, things weren't working as expected (JVM crash)
> because of different interpretation of what a char is on
> either side (8 bit on the C side, 16 bits character on the java side).
>

Just an idea. Can't it be handled by using %typemap(jni) char *wkb_buf
... for mapping the original type to the java expected type. As far as
I can see only the mapping of the type is the problem but the
implementation of that method is the same.

> I had to perform a bit of changes in both the functions returning wkb,
> and the geometry construction ones that do take wkb as an input.
> The outcome is not a fully clean extension as I hoped, because
> the geometry constructor calls a static function that should
> be defined before it. Anyways, the patch is attached for anyone
> to review. I do believe a similar patch would be needed for c#
> to handle geometry creation from wkb, too.
>

Would you describe this issue in more detail? I think those static
functions have already been declared in ogr_api.h.

> Do you have any kind of procedure I have to follow
> before committing? In Geoserver I would open a jira issue to
> record the change, so that the jira changelog contained that change
> too.
>

Those changes doesn't affect the other languages so you can commit the
changes freely. None of us can be attentive to the java related issues
as much as you can  :-)

If you described the java related build steps and the required
softwares in the various platforms we could surely add them to the
buildbot.


Best regards,

Tamas

From aaime at openplans.org  Sun Mar 18 16:23:51 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
In-Reply-To: <f3b73b7d0703180942g6aa07c73p66383b57de5c8adb@mail.gmail.com>
References: <45FD5CFE.8040609@openplans.org>
	<f3b73b7d0703180942g6aa07c73p66383b57de5c8adb@mail.gmail.com>
Message-ID: <45FD9FD7.2030206@openplans.org>

Tamas Szekeres ha scritto:
> 2007/3/18, Andrea Aime <aaime@openplans.org>:
>> Hi,
>> playing with java and OGR I had quite a bit of JVM
>> breakages due to inconsistent/conflicting memory
>> handling on either side of the JNI fence.
>>
>> One that has been tricky to identify is Feature.setGeometryDirectly.
>> This issue is there because every SWIG wrapper
>> does deallocate its C++ counterpart when garbage collected,
>> and thus the OGR Feature that got is geometry thru setGeometryDirectly
>> is left with a dangling reference. (since garbage collection is not
>> predictable, the error may occur a few seconds later, leaving
>> you wondering what went wrong).
>>
> 
> You should implement %typemap() SWIGTYPE *DISOWN for the java binding.
> Every wrapper has an internal flag to denote whether the wrapper owns
> the underlying memory and it's responsible to destroy it.

setGeometryDirectly has that typemap afaik, but it's not working as far
as I can see:

%apply SWIGTYPE *DISOWN {OGRGeometryShadow *geom};
   OGRErr SetGeometryDirectly(OGRGeometryShadow* geom) {
     return OGR_F_SetGeometryDirectly(self, geom);
   }
%clear OGRGeometryShadow *geom;

As soon as I try to use setGeometryDirectly my virtual machine goes
bye bye. Using setGeometry works fine instead.

Both java and c# bindings do have a delete() method that allows
to deallocate the native pointer, and the object finalizers
do call delete() always. I don't see that typemap making any difference
there...

Cheers
Andrea

From aaime at openplans.org  Sun Mar 18 16:31:03 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
In-Reply-To: <f3b73b7d0703181159j3c6792bfs51473a7e25f41d62@mail.gmail.com>
References: <45FD5BC0.1010003@openplans.org>
	<f3b73b7d0703181159j3c6792bfs51473a7e25f41d62@mail.gmail.com>
Message-ID: <45FDA187.7060406@openplans.org>

Tamas Szekeres ha scritto:
> 2007/3/18, Andrea Aime <aaime@openplans.org>:
>> Hi,
>> as you may know, I've been working on making WKB useful as
>> a transfer format to cross the JNI barrier.
>> When I started, things weren't working as expected (JVM crash)
>> because of different interpretation of what a char is on
>> either side (8 bit on the C side, 16 bits character on the java side).
>>
> 
> Just an idea. Can't it be handled by using %typemap(jni) char *wkb_buf
> ... for mapping the original type to the java expected type. As far as
> I can see only the mapping of the type is the problem but the
> implementation of that method is the same.

Hum... I've been using SWIG for 3-4 days total now, so I was happy to 
have something working. Next weekend I'll have a look at your proposal 
thought :-)

>> I had to perform a bit of changes in both the functions returning wkb,
>> and the geometry construction ones that do take wkb as an input.
>> The outcome is not a fully clean extension as I hoped, because
>> the geometry constructor calls a static function that should
>> be defined before it. Anyways, the patch is attached for anyone
>> to review. I do believe a similar patch would be needed for c#
>> to handle geometry creation from wkb, too.
>>
> 
> Would you describe this issue in more detail? I think those static
> functions have already been declared in ogr_api.h.

Sure. The Geometry construction from WKB uses a static function,
CreateGeometryFromWkt( char **val, 
OSRSpatialReferenceShadow *reference=NULL ), and I have to redefine
both. Now, I would have liked to put both in an ogr_java_extend.i much 
like the c# extensions.
Unfortunately, doing so does not work, because SWIG reorders the
declarations, and puts the ogr geometry shadow constructor among
the other geometry shadow methods, leaving the static function
I added after it. The c++ compiler at that point complains that
I cannot call the static one, because it's declared after.

As a result, I had to mix the java specific code in ogr.i, so that
I can preserve the right order.

>> Do you have any kind of procedure I have to follow
>> before committing? In Geoserver I would open a jira issue to
>> record the change, so that the jira changelog contained that change
>> too.
>>
> 
> Those changes doesn't affect the other languages so you can commit the
> changes freely. None of us can be attentive to the java related issues
> as much as you can  :-)

May be, but at the same time you know SWIG a lot more than I do :-)

Many thanks for the feedback
Cheers
Andrea

From szekerest at gmail.com  Sun Mar 18 17:55:57 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] On Feature.setGeometryDirectly SWIG bindings
In-Reply-To: <45FD9FD7.2030206@openplans.org>
References: <45FD5CFE.8040609@openplans.org>
	<f3b73b7d0703180942g6aa07c73p66383b57de5c8adb@mail.gmail.com>
	<45FD9FD7.2030206@openplans.org>
Message-ID: <f3b73b7d0703181455w15a00495pc7b3ce1d669a5dda@mail.gmail.com>

2007/3/18, Andrea Aime <aaime@openplans.org>:
>
> Both java and c# bindings do have a delete() method that allows
> to deallocate the native pointer, and the object finalizers
> do call delete() always. I don't see that typemap making any difference
> there...
>

I've just generated the gdal java wrappers and I can see the following
implementation of the delete method for Geometry class:

public void delete() {
    if(swigCPtr != 0 && swigCMemOwn) {
      swigCMemOwn = false;
      ogrJNI.delete_Geometry(swigCPtr);
    }
    swigCPtr = 0;
  }

So if you can set swigCMemOwn to false the native pointer referenced
memory wil not be deallocated by this wrapper.

To achieve this operation you might want to implement the
SetGeometryDirectly function this way:

public int SetGeometryDirectly(Geometry geom) {
    return ogrJNI.Feature_SetGeometryDirectly(swigCPtr,
Geometry.getCPtrAndDisown(geom));
  }

And for the Geometry class getCPtrAndDisown should be implemented as:

protected static long getCPtrAndDisown(Geometry obj) {
    if (obj != null) obj.swigCMemOwn= false;
    return getCPtr(obj);
  }


Hopefully, this implementation can be achieved as:

%typemap(javacode) SWIGTYPE %{
  protected static long getCPtrAndDisown($javaclassname obj) {
    if (obj != null) obj.swigCMemOwn= false;
    return getCPtr(obj);
  }
%}

%typemap(javain) SWIGTYPE *DISOWN "$javaclassname.getCPtrAndDisown($javainput)"

This code haven't been tested though.

If you implement these changes you will also eliminate the following
warnings when creating the java interface:

.\swig_lib\..\..\..\include\ogr.i(672): Warning(453): Can't apply
(SWIGTYPE *DISOWN). No typemaps are defined.
.\swig_lib\..\..\..\include\ogr.i(837): Warning(453): Can't apply
(SWIGTYPE *DISOWN). No typemaps are defined.
.\swig_lib\..\..\..\include\ogr.i(1305): Warning(453): Can't apply
(SWIGTYPE *DISOWN). No typemaps are defined.


Best regards,

Tamas

From warmerdam at pobox.com  Sun Mar 18 18:47:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
Message-ID: <45FDC181.1030501@pobox.com>

Howard Butler wrote:
> All,
> 
> Frank, Mateusz, and I have been working on a Trac instance to go along 
> with our Subversion repository.  It currently lives at 
> http://trac.osgeo.org/gdal .  The bugzilla dump of this incarnation is 
> about two weeks old, so don't get too comfortable with it yet, as there 
> will be at least one more iteration once we decide to make the move.
> 
> I have been tweaking the migration scripts to attempt to get things 
> behaving how we'd like.  I think I have things about as far as we can go 
> in any sort of automated way.  I would like folks to look over the 
> Ticket migration and compare to some equivalents in Bugzilla and confirm 
> that things are behaving as they should.  If you find something, please 
> email the ticket id(s) to me, and I will collate them and see what we 
> might be able to do as part of the automated migration.
> 
> I propose that we let the example stand for a week, and if the PSC is in 
> agreement and there aren't too many awful artifacts from the automated 
> migration, we complete the migration next weekend (Mar 23-24).
> 
> Here's some ticket listings:
> <http://trac.osgeo.org/gdal/report/9>
> <http://trac.osgeo.org/gdal/report/1>

Folks,

If I may take the liberty, I'd like to make it clear there is a motion.

Motion: To migrate the GDAL project from bugzilla hosted at remotesensing.org
to Trac hosted at trac.osgeo.org/gdal, with Howard Butler performing the
translation.

---

As Howard notes, the current example translation is not the final one.  Before
Howard starts a final translation the gdal-dev mailing list will be notified
and the we will make some effort to disable GDAL bug handling in the bugzilla
as well as updating all the project pointers to the new trac.  The exact
timing will be up to Howard.

We are also doing some experiments of integrating the Doxygen generated
web site with Trac.  An rough example of this can be found at:

   http://trac.osgeo.org/gdal/doxygen

However, this motion only addresses migration of the bug database to trac,
and implicitly the use of the Trac wiki as a GDAL wiki.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Sun Mar 18 18:36:57 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
In-Reply-To: <45FDA187.7060406@openplans.org>
References: <45FD5BC0.1010003@openplans.org>
	<f3b73b7d0703181159j3c6792bfs51473a7e25f41d62@mail.gmail.com>
	<45FDA187.7060406@openplans.org>
Message-ID: <f3b73b7d0703181536h5bf3adfcwfb243933339db277@mail.gmail.com>

2007/3/18, Andrea Aime <aaime@openplans.org>:
> >> I had to perform a bit of changes in both the functions returning wkb,
> >> and the geometry construction ones that do take wkb as an input.
> >> The outcome is not a fully clean extension as I hoped, because
> >> the geometry constructor calls a static function that should
> >> be defined before it. Anyways, the patch is attached for anyone
> >> to review. I do believe a similar patch would be needed for c#
> >> to handle geometry creation from wkb, too.
> >>
> >
> > Would you describe this issue in more detail? I think those static
> > functions have already been declared in ogr_api.h.
>
> Sure. The Geometry construction from WKB uses a static function,
> CreateGeometryFromWkt( char **val,
> OSRSpatialReferenceShadow *reference=NULL ), and I have to redefine
> both. Now, I would have liked to put both in an ogr_java_extend.i much
> like the c# extensions.
> Unfortunately, doing so does not work, because SWIG reorders the
> declarations, and puts the ogr geometry shadow constructor among
> the other geometry shadow methods, leaving the static function
> I added after it. The c++ compiler at that point complains that
> I cannot call the static one, because it's declared after.
>
> As a result, I had to mix the java specific code in ogr.i, so that
> I can preserve the right order.
>

I have no problem about this approach. You can commit these changes
and you may refine the solution if needed in the future. I suspect
there's no need to reimplement those functions since the
implementation is the same and only some of the types at the formal
parameter list have been changed. I guess these parameter types can
surely be altered by java specific typemaps.

I'll see what to do for the C# binding to make these functions work.
Do you have some test samples for checking these functions in action?

Best regards,

Tamas

From thekla.wirkus at wheregroup.com  Mon Mar 19 04:58:03 2007
From: thekla.wirkus at wheregroup.com (Thekla Wirkus)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] problems with average
Message-ID: <45FE509B.5020801@wheregroup.com>

Hi,

I have problems with creating a multipage-TIF with:
gdaladdo -r average bild_8bit.tif 2 4 8 16
the result-TIF has mistakes at page 2-5, page 1 is OK. The hatches are 
normally single colors but after using gdaladdo -r average ...
they are shown with multicolors and they are blurred.

See the result at:
http://wms1.ccgis.de/mapbender_dev/tmp/ergebnis_bild_8bit.tif

Best regards,
Thekla Wirkus




---------------------------------------
WhereGroup GmbH & Co. KG
Siemensstra?e 8
53121 Bonn
Germany
-------------------------------
Fon: +49 (0)228 / 90 90 38 - 16
Fax: +49 (0)228 / 90 90 38 - 11
-------------------------------
mailto:info@wheregroup.com
http://www.wheregroup.com
-------------------------------
Komplement?rin:
WhereGroup Verwaltungs GmbH
vertreten durch:
Arnulf Christl, Olaf Knopp, Peter Stamm
Amtsgericht Bonn, HRB 9885
---------------------------------------

From Shawn.Gong at drdc-rddc.gc.ca  Mon Mar 19 11:02:25 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] ReadAsArray()
Message-ID: <2E58C246F17003499C141D334794D049D588C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>

Hi list,

I have questions regarding ReadAsArray()

Here is the code:
    msi_array = gdal_dataset.ReadAsArray().astype(Numeric.Float32)

Q1: what is msi_array?  Is it a Numeric array?

Q2: printing out "print msi_array" generates a three-dimensional array
(or list?)
[ [ [0 1 2 up to col] ... ... up to row] ... up to bands]
What function to call if I want to get a number of subarrays like:
	R = #1 band and 100x50 pixels
	G = #2 band and 100x50 pixels

I have used
    r = msi_array[0:row][0:col][int(r_band)-1]
    g = msi_array[0:row][0:col][int(g_band)-1]
b = msi_array[0:row][0:col][int(b_band)-1]
but it did not for the cases when row > col, what I got is 
r = msi_array[0:col][0:col], etc.

Thanks,
Shawn


                 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070319/f47804bd/attachment.html
From dmorissette at mapgears.com  Mon Mar 19 11:09:57 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
Message-ID: <45FEA7C5.1020600@mapgears.com>

Could someone summarize the benefits of Trac over Bugzilla that justify 
this migration? Or are we migrating only because that's what OSGeo uses?

Daniel

Howard Butler wrote:
> All,
> 
> Frank, Mateusz, and I have been working on a Trac instance to go along 
> with our Subversion repository.  It currently lives at 
> http://trac.osgeo.org/gdal .  The bugzilla dump of this incarnation is 
> about two weeks old, so don't get too comfortable with it yet, as there 
> will be at least one more iteration once we decide to make the move.
> 
> I have been tweaking the migration scripts to attempt to get things 
> behaving how we'd like.  I think I have things about as far as we can go 
> in any sort of automated way.  I would like folks to look over the 
> Ticket migration and compare to some equivalents in Bugzilla and confirm 
> that things are behaving as they should.  If you find something, please 
> email the ticket id(s) to me, and I will collate them and see what we 
> might be able to do as part of the automated migration.
> 
> I propose that we let the example stand for a week, and if the PSC is in 
> agreement and there aren't too many awful artifacts from the automated 
> migration, we complete the migration next weekend (Mar 23-24).
> 
> Here's some ticket listings:
> <http://trac.osgeo.org/gdal/report/9>
> <http://trac.osgeo.org/gdal/report/1>
> 
> Howard
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From hobu at iastate.edu  Mon Mar 19 11:51:35 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <45FEA7C5.1020600@mapgears.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<45FEA7C5.1020600@mapgears.com>
Message-ID: <6.2.3.4.2.20070319103250.03d30528@hobu.mail.iastate.edu>


After some discussion about it in IRC, here's a list of advantages to 
Trac that we could come up with over bugzilla:
- Integration of source code, wiki, and bugs.  You can refer to 
changesets/bugs/etc in wiki, commits, etc and the linkages happen 
automatically.  For example, it a bug report you could say "in 
r10000, hobu made a bonehead mistake" and r10000 would be a link to 
that changeset in the source where it happened.  Everything is more 
accessible by having it all in the same place.
- Trac brings the source code more front-and-center to the project. 
Instead of being "that weird cvs thing that only the developers use," 
trac allows us to use the code to demonstrate in the wiki, commit 
messages, and changesets.
- We get a wiki.  Low impedance, user-contributed content, here we come :)
- RSS feeds of activity
- Sane milestone and roadmap stuff (if we were to decide to use it)
- OSGeo SAC already maintains a number of Trac instances.  One less 
separate thing on a separate server to maintain.
- The opportunity for writing or using existing plugins for things 
like buildbot, doxygen, etc is greater.

There may be others, and I hope some Trac users will come forward 
with the things I've missed.

Howard

At 10:09 AM 3/19/2007, Daniel Morissette wrote:
>Could someone summarize the benefits of Trac over Bugzilla that 
>justify this migration? Or are we migrating only because that's what 
>OSGeo uses?
>
>Daniel
>
>Howard Butler wrote:
>>All,
>>Frank, Mateusz, and I have been working on a Trac instance to go 
>>along with our Subversion repository.  It currently lives at 
>>http://trac.osgeo.org/gdal .  The bugzilla dump of this incarnation 
>>is about two weeks old, so don't get too comfortable with it yet, 
>>as there will be at least one more iteration once we decide to make the move.
>>I have been tweaking the migration scripts to attempt to get things 
>>behaving how we'd like.  I think I have things about as far as we 
>>can go in any sort of automated way.  I would like folks to look 
>>over the Ticket migration and compare to some equivalents in 
>>Bugzilla and confirm that things are behaving as they should.  If 
>>you find something, please email the ticket id(s) to me, and I will 
>>collate them and see what we might be able to do as part of the 
>>automated migration.
>>I propose that we let the example stand for a week, and if the PSC 
>>is in agreement and there aren't too many awful artifacts from the 
>>automated migration, we complete the migration next weekend (Mar 23-24).
>>Here's some ticket listings:
>><http://trac.osgeo.org/gdal/report/9>
>><http://trac.osgeo.org/gdal/report/1>
>>Howard
>>_______________________________________________
>>Gdal-dev mailing list
>>Gdal-dev@lists.maptools.org
>>http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>
>--
>Daniel Morissette
>http://www.mapgears.com/
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From Shawn.Gong at drdc-rddc.gc.ca  Mon Mar 19 11:51:39 2007
From: Shawn.Gong at drdc-rddc.gc.ca (Gong, Shawn (Contractor))
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] ReadAsArray()
In-Reply-To: <2E58C246F17003499C141D334794D049D588C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049D588C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <2E58C246F17003499C141D334794D049D588C3@ottawaex02.Ottawa.drdc-rddc.gc.ca>

I got it.

Thanks

 

Shawn

 

________________________________

From: gdal-dev-bounces@lists.maptools.org
[mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Gong, Shawn
(Contractor)
Sent: Monday, March 19, 2007 11:02 AM
To: gdal-dev@lists.maptools.org
Subject: [Gdal-dev] ReadAsArray()

 

Hi list,

I have questions regarding ReadAsArray()

Here is the code:

    msi_array = gdal_dataset.ReadAsArray().astype(Numeric.Float32)

Q1: what is msi_array?  Is it a Numeric array?

Q2: printing out "print msi_array" generates a three-dimensional array
(or list?)

[ [ [0 1 2 up to col] ... ... up to row] ... up to bands]

What function to call if I want to get a number of subarrays like:

        R = #1 band and 100x50 pixels

        G = #2 band and 100x50 pixels

I have used

    r = msi_array[0:row][0:col][int(r_band)-1]

    g = msi_array[0:row][0:col][int(g_band)-1]

b = msi_array[0:row][0:col][int(b_band)-1]

but it did not for the cases when row > col, what I got is 

r = msi_array[0:col][0:col], etc.

Thanks,

Shawn

                 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070319/5bbe6af4/attachment.html
From warmerdam at pobox.com  Mon Mar 19 12:11:55 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] problems with average
In-Reply-To: <45FE509B.5020801@wheregroup.com>
References: <45FE509B.5020801@wheregroup.com>
Message-ID: <45FEB64B.5000002@pobox.com>

Thekla Wirkus wrote:
> Hi,
> 
> I have problems with creating a multipage-TIF with:
> gdaladdo -r average bild_8bit.tif 2 4 8 16
> the result-TIF has mistakes at page 2-5, page 1 is OK. The hatches are 
> normally single colors but after using gdaladdo -r average ...
> they are shown with multicolors and they are blurred.
> 
> See the result at:
> http://wms1.ccgis.de/mapbender_dev/tmp/ergebnis_bild_8bit.tif

Thekla,

Average downsampling is inappropriate for discontinuous images.  That
is images where nearby pixel values are not necessarily nearby colors.
Your image has a colormap (and not just a continuous color ramp) and so
fall into this category.

You should use the default nearest neighbour downsampling instead of
using "-r average".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Mar 19 12:27:47 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] ReadAsArray()
In-Reply-To: <2E58C246F17003499C141D334794D049D588C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
References: <2E58C246F17003499C141D334794D049D588C2@ottawaex02.Ottawa.drdc-rddc.gc.ca>
Message-ID: <45FEBA03.5040008@pobox.com>

Gong, Shawn (Contractor) wrote:
> Hi list,
> 
> I have questions regarding ReadAsArray()
> 
> Here is the code:
> 
>     msi_array = gdal_dataset.ReadAsArray().astype(Numeric.Float32)
> 
> Q1: what is msi_array?  Is it a Numeric array?

Shawn,

Yes

> Q2: printing out ?print msi_array? generates a three-dimensional array 
> (or list?)
> 
> [ [ [0 1 2 up to col] ... ... up to row] ... up to bands]
> 
> What function to call if I want to get a number of subarrays like:
> 
>         R = #1 band and 100x50 pixels
> 
>         G = #2 band and 100x50 pixels
> 
> I have used
> 
>     r = msi_array[0:row][0:col][int(r_band)-1]
> 
>     g = msi_array[0:row][0:col][int(g_band)-1]
> 
> b = msi_array[0:row][0:col][int(b_band)-1]

I believe you can just do:

  r = msi_array[r_band-1]
  g = msi_array[g_band-1]
  b = msi_array[b_band-1]

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Mar 19 13:32:41 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <6.2.3.4.2.20070319103250.03d30528@hobu.mail.iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<45FEA7C5.1020600@mapgears.com>
	<6.2.3.4.2.20070319103250.03d30528@hobu.mail.iastate.edu>
Message-ID: <45FEC939.6050500@pobox.com>

Howard Butler wrote:
> 
> After some discussion about it in IRC, here's a list of advantages to 
> Trac that we could come up with over bugzilla:
> - Integration of source code, wiki, and bugs.  You can refer to 
> changesets/bugs/etc in wiki, commits, etc and the linkages happen 
> automatically.  For example, it a bug report you could say "in r10000, 
> hobu made a bonehead mistake" and r10000 would be a link to that 
> changeset in the source where it happened.  Everything is more 
> accessible by having it all in the same place.
> - Trac brings the source code more front-and-center to the project. 
> Instead of being "that weird cvs thing that only the developers use," 
> trac allows us to use the code to demonstrate in the wiki, commit 
> messages, and changesets.
> - We get a wiki.  Low impedance, user-contributed content, here we come :)
> - RSS feeds of activity
> - Sane milestone and roadmap stuff (if we were to decide to use it)
> - OSGeo SAC already maintains a number of Trac instances.  One less 
> separate thing on a separate server to maintain.
> - The opportunity for writing or using existing plugins for things like 
> buildbot, doxygen, etc is greater.
> 
> There may be others, and I hope some Trac users will come forward with 
> the things I've missed.

Daniel,

 From my point of view, using Trac for FDO and general OSGeo stuff for
several weeks now, I'm quite partial to the integration of Trac tickets
with subversion as Howard has noted above, as well as the fact that Trac
is now integrated with the OSGeo LDAP so that we can use the same userid
database for subversion and Trac (and other things).

Technical benefits aside the main value is that it is the modern, OSGeo
support technology.  I was a skeptic last summer and fall when Howard was
promoting the idea.  But having used Trac a bunch this winter I'm very
happy with it as a bug database.  I'm excited about finally having a light
weight wiki.  And I'm confident that I can maintain the database (something
I never had personally with bugzilla).

It is my intention to use the milestones extensively once we are migrated.
I never really got much out of the bugzilla milestone support.

I will say that one core issue for me was always preservation of our bug
history.  This migration would likely have been a non-starter if Howard
didn't have this script to carry out bug history over, including preserving
the original bug id's.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Mon Mar 19 13:56:53 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] GDAL maintenance biweekly report - No. 1
Message-ID: <45FECEE5.1080208@loskot.net>

Hi,

This is first biweekly report from GDAL maintenance


Resolved issues:
----------------

[Bug 1429] VSI*L and "errno" setting.
http://bugzilla.remotesensing.org/show_bug.cgi?id=1429

[Bug 1430] New: [GDAL] ODBC postgresql information schema problems
http://bugzilla.remotesensing.org/show_bug.cgi?id=1430

[Bug 1431] Bug, PostgreSQL driver  -lco LAUNDER=YES
http://bugzilla.remotesensing.org/show_bug.cgi?id=1431

[Bug 1472] Disabling SEQSCAN is now a *bad* idea.
http://bugzilla.remotesensing.org/show_bug.cgi?id=1472

[Bug 1474] PostGIS fetches 1 at a time
http://bugzilla.remotesensing.org/show_bug.cgi?id=1474

[Bug 1508] configure should check for Python.h before enabling Python
http://bugzilla.remotesensing.org/show_bug.cgi?id=1508

[Bug 1514] Query results not cleaned in Soft Transactions of PG
http://bugzilla.remotesensing.org/show_bug.cgi?id=1514

[Bug 1516] LANDSAT 7 FAST read problems (finally fixed by Andrey)
http://bugzilla.remotesensing.org/show_bug.cgi?id=1516

[Bug 1521] New: Delete feature - .dbf file getting deleted
http://bugzilla.remotesensing.org/show_bug.cgi?id=1521

[Bug 1524] New: Fail to read case-sensitive shapefile names
http://bugzilla.remotesensing.org/show_bug.cgi?id=1524

There were also a few minor issues resolved and some submissions not
reported on the Bugzilla. Detailed changesets are available on the Trac:
http://trac.osgeo.org/gdal/timeline


Analysed and under discussion issues (not yet resolved):
--------------------------------------------------------

[Bug 543] OCI driver: getExtent should use USER_SDO_GEOM_METADATA
http://bugzilla.remotesensing.org/show_bug.cgi?id=543

[Bug 1248] Please add transaction support to ogr2ogr for the postgres driver
http://bugzilla.remotesensing.org/show_bug.cgi?id=1248

[Bug 1445] GetFeature() not implemented efficiently for server based drivers
http://bugzilla.remotesensing.org/show_bug.cgi?id=1445

[Bug 1476] Improper handling of Postgis tables with multiple geometry
columns
http://bugzilla.remotesensing.org/show_bug.cgi?id=1476


Other activities:
-----------------

1. Updated documentation for drivers: ODBC, PGeo, PG

2. Added new tests to the GDAL autotest package:
- FAST

3. Added new test cases to:
- Shape
- AAIGrid

3. Started analysis of GDAL tests coverage:
http://mateusz.loskot.net/tmp/gdal/autotest-coverage.txt

4. Improved GDAL Buildbot configuration

5. Support on the gdal-dev list (~50 posts) and #gdal channel

6. TracWiki subjects proposal:
http://mateusz.loskot.net/tmp/gdal/gdal-tracwiki-proposal.txt

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


From tutey at o2.pl  Mon Mar 19 14:09:48 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FD5019.6040208@loskot.net>
References: <45F7198D.10307@o2.pl> <20070316130928.GB2011@ak4719.spb.edu>
	<45FD17E6.5000406@o2.pl> <45FD5019.6040208@loskot.net>
Message-ID: <45FED1EC.5040305@o2.pl>

Mateusz Loskot wrote:
> Maciej Sieczka wrote:
>> GDAL --without-python --with-ngpython (full config syntax and other
>> details below) configures and builds without errors, but after the make
>> install, no python scripts get installed, including gdal_merge.py. How
>> do I build GDAL --with-ngpython and install it properly?
>>
>> I have python2.4-numeric 24.2 and python2.4-numarray 1.5.1 installed
>> into /usr. site-packages dir is /usr/lib/python2.4/site-packages/
>>
>> Note: there is a warning in config.log: "checking for NumPy include
>> files... missing"; does that matter?
> 
> Maciej,
> 
> Yes, it does.
> You need to install dev package for NumPy package.

I don't have such available. Never heard of... I have the following
installed (links are for lists of files installed):

python2.4
http://packages.ubuntu.com/cgi-bin/search_contents.pl?searchmode=filelist&word=python2.4&version=dapper&arch=i386

python2.4-dev
http://packages.ubuntu.com/cgi-bin/search_contents.pl?searchmode=filelist&word=python2.4-dev&version=dapper&arch=i386

python2.4-numeric
http://packages.ubuntu.com/cgi-bin/search_contents.pl?searchmode=filelist&word=python2.4-numeric&version=dapper&arch=i386

python2.4-numarray
http://packages.ubuntu.com/cgi-bin/search_contents.pl?searchmode=filelist&word=python2.4-numarray&version=dapper&arch=i386

> I may be wrong how the new NG Python bindings work now,
> but it seems nothing is compiled in the swig/python, by make.

I have swig 1.3.27 installed, if that matters:
http://packages.ubuntu.com/cgi-bin/search_contents.pl?searchmode=filelist&word=swig&version=dapper&arch=i386&page=1&number=all

> Try to install the NumPy dev package and it should help.

What is that missing include file exactly? Maybe some other package
provides it? I inspected config.log and found no hints.

Is there anybody on the list who knows how to build --without-python
--with-ngpython on Ubuntu Dapper? I will be grateful for your hints.

Thanks for help Mateusz!

Maciek

P.S.

I'm attaching an English version of logs for configure, make and make
install this time. The previous one was in Polish, sorry.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: logs_en.tar.bz2
Type: application/x-bzip
Size: 25382 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070319/0ce055a2/logs_en.tar.bin
From epk.lists at gmail.com  Mon Mar 19 15:31:43 2007
From: epk.lists at gmail.com (Eduardo Patto Kanegae)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] PHP wrappers for GDAL(not OGR)
Message-ID: <2d1782780703191231q2d2767b4ma42cb51d476f9a96@mail.gmail.com>

Hi,

MS4W has a PHP/OGR module ready to work.

Does anybody has PHP bindings for GDAL/raster functions to work under MS4W?

best

-- 
Eduardo Patto Kanegae

From warmerdam at pobox.com  Mon Mar 19 15:36:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <45FDC181.1030501@pobox.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<45FDC181.1030501@pobox.com>
Message-ID: <45FEE630.3070108@pobox.com>

Frank Warmerdam wrote:
> Motion: To migrate the GDAL project from bugzilla hosted at 
> remotesensing.org
> to Trac hosted at trac.osgeo.org/gdal, with Howard Butler performing the
> translation.

+1

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From meldavey at sonalysts.com  Mon Mar 19 16:08:00 2007
From: meldavey at sonalysts.com (Mel Davey)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Support for other image formats
Message-ID: <20070319200800.0a553b9e@mail.sonalysts.com>

Hi,  
   
     New user here.  Is there a proper forum for entering requests for support for new image formats.  I have a desire to directly read ONC/TPC data files.  I currently read them with Global Mapper, export to GeoTIFF, then use them in my app, trying to remove the reliance on Glbal Mapper.  
   
Thanks.  
   
- UnderDog  
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070319/be9af7d7/attachment.html
From mateusz at loskot.net  Mon Mar 19 16:37:59 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FED1EC.5040305@o2.pl>
References: <45F7198D.10307@o2.pl> <20070316130928.GB2011@ak4719.spb.edu>
	<45FD17E6.5000406@o2.pl> <45FD5019.6040208@loskot.net>
	<45FED1EC.5040305@o2.pl>
Message-ID: <45FEF4A7.8000502@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
>> Maciej Sieczka wrote:
>>> GDAL --without-python --with-ngpython (full config syntax and other
>>> details below) configures and builds without errors, but after the make
>>> install, no python scripts get installed, including gdal_merge.py. How
>>> do I build GDAL --with-ngpython and install it properly?
>>>
>>> I have python2.4-numeric 24.2 and python2.4-numarray 1.5.1 installed
>>> into /usr. site-packages dir is /usr/lib/python2.4/site-packages/
>>>
>>> Note: there is a warning in config.log: "checking for NumPy include
>>> files... missing"; does that matter?
>> Maciej,
>>
>> Yes, it does.
>> You need to install dev package for NumPy package.
> 
> I don't have such available. Never heard of...

I have installed python-numpy-dev

>> Try to install the NumPy dev package and it should help.
> 
> What is that missing include file exactly? Maybe some other package
> provides it? I inspected config.log and found no hints.

Just try to install python-numpy-dev.

> Is there anybody on the list who knows how to build --without-python
> --with-ngpython on Ubuntu Dapper? I will be grateful for your hints.

I just tested and it works for me.

./configure --prefix=$HOME/usr --without-python --with-ngpython
make
make install

Here is listing of installed modules:

//////////////////////////////////////////////////////////////////
mloskot:~/dev/gdal/_svn/trunk/gdal/pymod$ ls -l
~/usr/lib/python2.4/site-packages/
total 1352
-rw-r--r-- 1 mloskot mloskot   4276 2007-03-05 05:00 gdalconst.py
-rw-r--r-- 1 mloskot mloskot   4290 2007-03-19 21:23 gdalconst.pyc
-rwxr-xr-x 1 mloskot mloskot  57079 2007-03-19 21:22 _gdalconst.so
-rw-r--r-- 1 mloskot mloskot  28381 2007-03-05 05:00 gdal.py
-rw-r--r-- 1 mloskot mloskot  36881 2007-03-19 21:23 gdal.pyc
-rwxr-xr-x 1 mloskot mloskot 383528 2007-03-19 21:22 _gdal.so
-rw-r--r-- 1 mloskot mloskot  32974 2007-03-05 05:00 ogr.py
-rw-r--r-- 1 mloskot mloskot  44717 2007-03-19 21:23 ogr.pyc
-rwxr-xr-x 1 mloskot mloskot 361476 2007-03-19 21:22 _ogr.so
-rw-r--r-- 1 mloskot mloskot  25161 2007-03-11 10:32 osr.py
-rw-r--r-- 1 mloskot mloskot  31040 2007-03-19 21:23 osr.pyc
-rwxr-xr-x 1 mloskot mloskot 329742 2007-03-19 21:22 _osr.so
mloskot:~/dev/gdal/_svn/trunk/gdal/pymod$
//////////////////////////////////////////////////////////////////


Note, that currently none of python utils from gdal/pymod are installed,
so you won't see gdal_merge.py in the $PREFIX/bin directory.
You need to manually copy all tools you need, from gdal/pymod
to $PREFIX/bin.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Mon Mar 19 17:01:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Support for other image formats
In-Reply-To: <20070319200800.0a553b9e@mail.sonalysts.com>
References: <20070319200800.0a553b9e@mail.sonalysts.com>
Message-ID: <45FEFA16.4030505@loskot.net>

Mel Davey wrote:
> Hi,
> 
> New user here.  Is there a proper forum for entering requests for
> support for new image formats.

The best place is to discuss it here and/or submit a feature
request to Bugzilla:

http://bugzilla.remotesensing.org/enter_bug.cgi?product=GDAL

There is no Web forum if you'are asking for anything like that.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From warmerdam at pobox.com  Mon Mar 19 17:06:59 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Support for other image formats
In-Reply-To: <20070319200800.0a553b9e@mail.sonalysts.com>
References: <20070319200800.0a553b9e@mail.sonalysts.com>
Message-ID: <45FEFB73.1020306@pobox.com>

Mel Davey wrote:
> Hi,
>  
>      New user here.  Is there a proper forum for entering requests for 
> support for new image formats.  I have a desire to directly read ONC/TPC 
> data files.  I currently read them with Global Mapper, export to 
> GeoTIFF, then use them in my app, trying to remove the reliance on Glbal 
> Mapper.

Mel / UnderDog,

You can submit feature requests via bugzilla, but generally speaking a
substantial feature request like a whole new format driver from someone
not prepared to implement or fund it is not likely to accomplish much.

I believe that ONC/TPC datasets are already readable.  Are the tiles not
NITF files?  GDAL directly supports reading NITF files.  Via the OGDI
connector it is even possible to treat RPF products as a dataset.

Based on a quick check, I can't seem to find any ONC/TPC dataset in my
data stash.  If you provide a *direct* pointer to where I can download
a test dataset I can do a quick verification that it is already supported.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From huajun_zhang at usgs.gov  Mon Mar 19 17:03:37 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Assign projection to a tif image
In-Reply-To: <20070319200800.0a553b9e@mail.sonalysts.com>
Message-ID: <OF51B41C75.EFCE6649-ON852572A3.0073717D-852572A3.0073B01B@usgs.gov>

Hi,

Is there any method to define a projection to a image rather than 
reproject the image with gdalwarp?

Thanks

Huajun Zhang
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070319/604393df/attachment.html
From bfraser at geoanalytic.com  Mon Mar 19 17:10:50 2007
From: bfraser at geoanalytic.com (Brent Fraser)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Support for other image formats
References: <20070319200800.0a553b9e@mail.sonalysts.com>
Message-ID: <069f01c76a6b$123b4e70$160002c0@shark>

Mel,

  GDAL will read ONC, TPC, etc maps in NITF format.  What format are your ONC/TPCs in?  Did you try reading them with "gdalinfo"?

Brent Fraser
GeoAnalytic Inc.
Calgary, Alberta
  ----- Original Message ----- 
  From: Mel Davey 
  To: gdal-dev@lists.maptools.org 
  Sent: Monday, March 19, 2007 2:08 PM
  Subject: [Gdal-dev] Support for other image formats


  Hi,

       New user here.  Is there a proper forum for entering requests for support for new image formats.  I have a desire to directly read ONC/TPC data files.  I currently read them with Global Mapper, export to GeoTIFF, then use them in my app, trying to remove the reliance on Glbal Mapper.

  Thanks.

  - UnderDog



------------------------------------------------------------------------------


  _______________________________________________
  Gdal-dev mailing list
  Gdal-dev@lists.maptools.org
  http://lists.maptools.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070319/9f00dd15/attachment.html
From tutey at o2.pl  Mon Mar 19 17:53:02 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FEF4A7.8000502@loskot.net>
References: <45F7198D.10307@o2.pl> <20070316130928.GB2011@ak4719.spb.edu>
	<45FD17E6.5000406@o2.pl> <45FD5019.6040208@loskot.net>
	<45FED1EC.5040305@o2.pl> <45FEF4A7.8000502@loskot.net>
Message-ID: <45FF063E.4030701@o2.pl>

Mateusz Loskot wrote:
> Maciej Sieczka wrote:
>> Mateusz Loskot wrote:
>>> Maciej Sieczka wrote:
>>>> GDAL --without-python --with-ngpython (full config syntax and other
>>>> details below) configures and builds without errors, but after the make
>>>> install, no python scripts get installed, including gdal_merge.py. How
>>>> do I build GDAL --with-ngpython and install it properly?
>>>>
>>>> I have python2.4-numeric 24.2 and python2.4-numarray 1.5.1 installed
>>>> into /usr. site-packages dir is /usr/lib/python2.4/site-packages/
>>>>
>>>> Note: there is a warning in config.log: "checking for NumPy include
>>>> files... missing"; does that matter?
>>> Maciej,
>>>
>>> Yes, it does.
>>> You need to install dev package for NumPy package.
>> I don't have such available. Never heard of...
> 
> I have installed python-numpy-dev

What distro are you using? I don't have any package with 'numpy' in
it's name, available.

>>> Try to install the NumPy dev package and it should help.
>> What is that missing include file exactly? Maybe some other package
>> provides it? I inspected config.log and found no hints.
> 
> Just try to install python-numpy-dev.
> 
>> Is there anybody on the list who knows how to build --without-python
>> --with-ngpython on Ubuntu Dapper? I will be grateful for your hints.
> 
> I just tested and it works for me.
> 
> ./configure --prefix=$HOME/usr --without-python --with-ngpython
> make
> make install
> 
> Here is listing of installed modules:
> 
> //////////////////////////////////////////////////////////////////
> mloskot:~/dev/gdal/_svn/trunk/gdal/pymod$ ls -l
> ~/usr/lib/python2.4/site-packages/
> total 1352
> -rw-r--r-- 1 mloskot mloskot   4276 2007-03-05 05:00 gdalconst.py
> -rw-r--r-- 1 mloskot mloskot   4290 2007-03-19 21:23 gdalconst.pyc
> -rwxr-xr-x 1 mloskot mloskot  57079 2007-03-19 21:22 _gdalconst.so
> -rw-r--r-- 1 mloskot mloskot  28381 2007-03-05 05:00 gdal.py
> -rw-r--r-- 1 mloskot mloskot  36881 2007-03-19 21:23 gdal.pyc
> -rwxr-xr-x 1 mloskot mloskot 383528 2007-03-19 21:22 _gdal.so
> -rw-r--r-- 1 mloskot mloskot  32974 2007-03-05 05:00 ogr.py
> -rw-r--r-- 1 mloskot mloskot  44717 2007-03-19 21:23 ogr.pyc
> -rwxr-xr-x 1 mloskot mloskot 361476 2007-03-19 21:22 _ogr.so
> -rw-r--r-- 1 mloskot mloskot  25161 2007-03-11 10:32 osr.py
> -rw-r--r-- 1 mloskot mloskot  31040 2007-03-19 21:23 osr.pyc
> -rwxr-xr-x 1 mloskot mloskot 329742 2007-03-19 21:22 _osr.so
> mloskot:~/dev/gdal/_svn/trunk/gdal/pymod$
> //////////////////////////////////////////////////////////////////

Allright, so I have these installed too, just where I would expect them
to be according to my --prefix=/usr/local:

$ ls -l /usr/local/lib/python2.4/site-packages
-rw-r--r-- 1 root root   4276 2007-03-17 22:38 gdalconst.py
-rw-r--r-- 1 root root   4283 2007-03-19 18:50 gdalconst.pyc
-rwxr-xr-x 1 root root  61724 2007-03-18 11:18 _gdalconst.so
-rw-r--r-- 1 root root  28381 2007-03-17 22:38 gdal.py
-rw-r--r-- 1 root root  36874 2007-03-19 18:50 gdal.pyc
-rwxr-xr-x 1 root root 559042 2007-03-18 11:18 _gdal.so
-rw-r--r-- 1 root root  32974 2007-03-17 22:38 ogr.py
-rw-r--r-- 1 root root  44710 2007-03-19 18:50 ogr.pyc
-rwxr-xr-x 1 root root 548130 2007-03-18 11:18 _ogr.so
-rw-r--r-- 1 root root  17556 2007-03-17 22:38 osr.py
-rw-r--r-- 1 root root  21565 2007-03-19 18:50 osr.pyc
-rwxr-xr-x 1 root root 382335 2007-03-18 11:18 _osr.so

> Note, that currently none of python utils from gdal/pymod are installed,
> so you won't see gdal_merge.py in the $PREFIX/bin directory.
> You need to manually copy all tools you need, from gdal/pymod
> to $PREFIX/bin.

This I would never guess. I thought they would be installed just as in
case of the old --with-python. And since they were not installed, I
assumed they were not built. But look, they are all there in my source
GDAL directory:

$ ls -l ~/src/straight/gdal140_svn/pymod | grep \.py

-rwxr-xr-x 1 shoofi ubunciu   6630 2007-03-17 22:38 epsg_tr.py
-rwxr-xr-x 1 shoofi ubunciu   2184 2007-03-17 22:38 esri2wkt.py
-rwxr-xr-x 1 shoofi ubunciu   4663 2007-03-17 22:38 gcps2vec.py
-rwxr-xr-x 1 shoofi ubunciu   2568 2007-03-17 22:38 gcps2wld.py
-rwxr-xr-x 1 shoofi ubunciu   4206 2007-03-17 22:38 gdal2xyz.py
-rwxr-xr-x 1 shoofi ubunciu   3184 2007-03-17 22:38 gdalchksum.py
-rw-r--r-- 1 shoofi ubunciu   4058 2007-03-17 22:38 gdalconst.py
-rwxr-xr-x 1 shoofi ubunciu   3330 2007-03-17 22:38 gdalimport.py
-rwxr-xr-x 1 shoofi ubunciu  16445 2007-03-17 22:38 gdal_merge.py
-rw-r--r-- 1 shoofi ubunciu  10285 2007-03-17 22:38 gdalnumeric.py
-rw-r--r-- 1 shoofi ubunciu  38712 2007-03-17 22:38 gdal.py
-rw-r--r-- 1 shoofi ubunciu   3325 2007-03-17 22:38 gdal_py.h
-rwxr-xr-x 1 shoofi ubunciu   7377 2007-03-17 22:38 mkgraticule.py
-rw-r--r-- 1 shoofi ubunciu  13023 2007-03-17 22:38 numpydataset.cpp
-rw-r--r-- 1 shoofi ubunciu  41453 2007-03-17 22:38 ogr.py
-rw-r--r-- 1 shoofi ubunciu  25472 2007-03-17 22:38 osr.py
-rwxr-xr-x 1 shoofi ubunciu   5297 2007-03-17 22:38 pct2rgb.py
-rwxr-xr-x 1 shoofi ubunciu   5181 2007-03-17 22:38 rgb2pct.py

Summarising:

1. I don't need any "numpy-dev" package; apparently python2.4-numeric
or python2.4-numarray provide all the headers needed (dont't know which
one exactly).

2. The warning in config.log: "checking for NumPy include files...
missing" is bogus and does not affect building --with-ngpython at all.
However confusing it is.

3. I don't understand why the python scripts from /pymod directory are
not installed when using --with-ngpython, while they are installed when
I build with the old-fashioned --with-python. Confusing as well.

Thanks for helping me. Now I can get back to playing with VRT and
gdal_merge.py.

Best,
Maciek

From mateusz at loskot.net  Mon Mar 19 18:06:51 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FF063E.4030701@o2.pl>
References: <45F7198D.10307@o2.pl> <20070316130928.GB2011@ak4719.spb.edu>
	<45FD17E6.5000406@o2.pl> <45FD5019.6040208@loskot.net>
	<45FED1EC.5040305@o2.pl> <45FEF4A7.8000502@loskot.net>
	<45FF063E.4030701@o2.pl>
Message-ID: <45FF097B.5070607@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
>> Maciej Sieczka wrote:
>>> Mateusz Loskot wrote:
>>>> Maciej Sieczka wrote:
>>>>> GDAL --without-python --with-ngpython (full config syntax and
>>>>>  other details below) configures and builds without errors, 
>>>>> but after the make install, no python scripts get installed, 
>>>>> including gdal_merge.py. How do I build GDAL --with-ngpython 
>>>>> and install it properly?
>>>>> 
>>>>> I have python2.4-numeric 24.2 and python2.4-numarray 1.5.1 
>>>>> installed into /usr. site-packages dir is 
>>>>> /usr/lib/python2.4/site-packages/
>>>>> 
>>>>> Note: there is a warning in config.log: "checking for NumPy 
>>>>> include files... missing"; does that matter?
>>>> Maciej,
>>>> 
>>>> Yes, it does. You need to install dev package for NumPy 
>>>> package.
>>> I don't have such available. Never heard of...
>> I have installed python-numpy-dev
> 
> What distro are you using? I don't have any package with 'numpy' in 
> it's name, available.


Maciej,

I use Ubuntu 6.10 (Edgy Eft)
Here is the package:
http://packages.ubuntu.com/edgy/python/python-numpy-dev

>> Note, that currently none of python utils from gdal/pymod are 
>> installed, so you won't see gdal_merge.py in the $PREFIX/bin 
>> directory. You need to manually copy all tools you need, from 
>> gdal/pymod to $PREFIX/bin.
> 
> This I would never guess. I thought they would be installed just as 
> in case of the old --with-python. And since they were not installed, 
> I assumed they were not built. But look, they are all there in my 
> source GDAL directory: [...]

These runnable utilities like gdal_merge.py are not installed
because the NG Python support is not finally finished, there are some
tasks left.
One of them is to add installation of these tools to building system
configuration.


> -rw-r--r-- 1 shoofi ubunciu  10285 2007-03-17 22:38 gdalnumeric.py 
> -rw-r--r-- 1 shoofi ubunciu  38712 2007-03-17 22:38 gdal.py 
> -rw-r--r-- 1 shoofi ubunciu  41453 2007-03-17 22:38 ogr.py -rw-r--r--
>  1 shoofi ubunciu  25472 2007-03-17 22:38 osr.py

Note, that not all *.py scripts in gdal/pymod directory are end-user
tools. These listed above are old Traditional Python modules.
In your case, you need to copy tools only, scripts listed here:
http://www.gdal.org/gdal_utilities.html

> Summarising:
> 
> 1. I don't need any "numpy-dev" package; apparently python2.4-numeric
>  or python2.4-numarray provide all the headers needed (dont't know 
> which one exactly).

NumPy is a next generation of numeric/numarray packages.

> 2. The warning in config.log: "checking for NumPy include files... 
> missing" is bogus and does not affect building --with-ngpython at 
> all. However confusing it is.

Yes, that's interesting.
Obviously, it needs to be checked.

> 3. I don't understand why the python scripts from /pymod directory 
> are not installed when using --with-ngpython, while they are 
> installed when I build with the old-fashioned --with-python. 
> Confusing as well.

The gdal/pymod includes two types of scripts:
1. Old Traditional Python bindings
2. GDAL utilities, like those listed here:
http://www.gdal.org/gdal_utilities.html)

Now, if you build NG Python - Next Generation Python bindings,
you do not need anything from gdal/pymod that applies to point 1.
(so to not copy anything  like gdal.py, ogr.py, osr.py,...)
You only need to manually copy end-user tools (point 2.)

And you are right, these tools should be installed from make install,
but they are not, because lack of configuration - this subject is under
construction, so you need to manually install it (copy).

I hope it explains the current situation.
If you'll have any question, don't hesitate to ask here.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From tutey at o2.pl  Mon Mar 19 18:32:37 2007
From: tutey at o2.pl (Maciej Sieczka)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FF097B.5070607@loskot.net>
References: <45F7198D.10307@o2.pl>
	<20070316130928.GB2011@ak4719.spb.edu>	<45FD17E6.5000406@o2.pl>
	<45FD5019.6040208@loskot.net>	<45FED1EC.5040305@o2.pl>
	<45FEF4A7.8000502@loskot.net>	<45FF063E.4030701@o2.pl>
	<45FF097B.5070607@loskot.net>
Message-ID: <45FF0F85.5090008@o2.pl>

Mateusz Loskot wrote:

> I hope it explains the current situation.
> If you'll have any question, don't hesitate to ask here.

I think I have all sorted out for now. Thanks. One last question: will
the automatic installation of user python scripts be fixed for stable
1.4 branch, or is it planned to be fixed in the main developement
branch only?

Maciek

From mateusz at loskot.net  Mon Mar 19 19:48:50 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] issues merging 7 bands of Landsat scene into 1 image
In-Reply-To: <45FF0F85.5090008@o2.pl>
References: <45F7198D.10307@o2.pl>
	<20070316130928.GB2011@ak4719.spb.edu>	<45FD17E6.5000406@o2.pl>
	<45FD5019.6040208@loskot.net>	<45FED1EC.5040305@o2.pl>
	<45FEF4A7.8000502@loskot.net>	<45FF063E.4030701@o2.pl>
	<45FF097B.5070607@loskot.net> <45FF0F85.5090008@o2.pl>
Message-ID: <45FF2162.4070400@loskot.net>

Maciej Sieczka wrote:
> Mateusz Loskot wrote:
> 
>> I hope it explains the current situation. If you'll have any
>> question, don't hesitate to ask here.
> 
> I think I have all sorted out for now. Thanks. One last question:
> will the automatic installation of user python scripts be fixed for
> stable 1.4 branch, or is it planned to be fixed in the main
> developement branch only?

Maciej,

Probably, we are not going to backport any new changes made in
NG Python to the 1.4 branch.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Mon Mar 19 23:14:06 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
Message-ID: <45FF517E.5010801@perkins.net>

Quick question: is it fair to say that most if not all georeferenced 
raster images that one typically comes across use a projected (rather 
than geographic) coordinate system?

Do typical GIS packages handle rasters with geographic (latitude / 
longitude) coordinate systems? And what do they do when displaying 
rasters in a projected coordinate system together with, say, vector 
layers in a geographic coordinate system? Is it usual to convert the 
vector layer to the projected coordinates or vice versa?

Just wondering if I can get away with avoiding having to handle 
geographic coordinate systems in my (mostly raster focused) application 
for the time being... Any advice much appreciated!

Cheers,

Simon


From warmerdam at pobox.com  Mon Mar 19 23:57:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF517E.5010801@perkins.net>
References: <45FF517E.5010801@perkins.net>
Message-ID: <45FF5BB8.2020101@pobox.com>

Simon Perkins wrote:
> Quick question: is it fair to say that most if not all georeferenced 
> raster images that one typically comes across use a projected (rather 
> than geographic) coordinate system?

Simon,

I would agree that most geospatial image data is in a projected
rather than geographic coordinate system.  I'm not sure just how
overwhelming I'd claim this preponderance is.

> Do typical GIS packages handle rasters with geographic (latitude / 
> longitude) coordinate systems? And what do they do when displaying 
> rasters in a projected coordinate system together with, say, vector 
> layers in a geographic coordinate system? Is it usual to convert the 
> vector layer to the projected coordinates or vice versa?

It is more common to reproject the vector data to match the raster
data than to reproject the raster data to fit the vectors.

> Just wondering if I can get away with avoiding having to handle 
> geographic coordinate systems in my (mostly raster focused) application 
> for the time being... Any advice much appreciated!

I don't know your constraints or detailed objectives, but I'd be nervous
about making this simplication.  You could likely get away with treating
geographic coordinate systems similarly to projected coordinate systems.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Mon Mar 19 23:58:08 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF5BB8.2020101@pobox.com>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
Message-ID: <45FF5BD0.5070700@perkins.net>

Frank Warmerdam wrote:
>> Just wondering if I can get away with avoiding having to handle 
>> geographic coordinate systems in my (mostly raster focused) 
>> application for the time being... Any advice much appreciated!
>
> I don't know your constraints or detailed objectives, but I'd be nervous
> about making this simplication.  You could likely get away with treating
> geographic coordinate systems similarly to projected coordinate systems.

Hi Frank,

Thanks for the advice. My main motivation for considering ignoring 
geographic coordinate systems was to avoid dealing with the pesky issue 
of angular units not being isotropic, i.e. a degree in the north-south 
direction might represent a very different distance to a degree in the 
east-west direction. If I have a bunch of objects stored in a geographic 
reference system, then when I display them I have to scale x and y 
coordinates differently. Similarly, when I'm computing the minimum 
visible dimension for rendering optimizations, I have to deal with 
different numbers in the x and y directions.

I haven't looked at the source code for a long time, but what does 
OpenEV do here? Do you convert geo-coordinates into some more isotropic 
coordinate system before rendering, or do you just deal with the funky 
anisotropy at all stages?


Cheers,

Simon


From sy at perkins.net  Tue Mar 20 00:06:50 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF5BD0.5070700@perkins.net>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
	<45FF5BD0.5070700@perkins.net>
Message-ID: <45FF5DDA.4040703@perkins.net>

Simon Perkins wrote:
> I haven't looked at the source code for a long time, but what does 
> OpenEV do here? Do you convert geo-coordinates into some more 
> isotropic coordinate system before rendering, or do you just deal with 
> the funky anisotropy at all stages?

In a related question, if I have a vector layer in a geographic 
coordinate system, does OGR provide some convenient way to compute the 
relative scaling of degrees in the east-west and north-south directions? 
I guess it comes down to some simple geometry (the size of latitude 
degrees is uniform, the size of longitude degrees go like square of 
cosine of latitude, I think) , but just wondered if there was some more 
sophisticated procedure for what must be a common task.

Cheers,

Sy


From warmerdam at pobox.com  Tue Mar 20 01:10:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF5DDA.4040703@perkins.net>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
	<45FF5BD0.5070700@perkins.net> <45FF5DDA.4040703@perkins.net>
Message-ID: <45FF6CB6.3040204@pobox.com>

Simon Perkins wrote:
> Simon Perkins wrote:
>> I haven't looked at the source code for a long time, but what does 
>> OpenEV do here? Do you convert geo-coordinates into some more 
>> isotropic coordinate system before rendering, or do you just deal with 
>> the funky anisotropy at all stages?
> 
> In a related question, if I have a vector layer in a geographic 
> coordinate system, does OGR provide some convenient way to compute the 
> relative scaling of degrees in the east-west and north-south directions? 
> I guess it comes down to some simple geometry (the size of latitude 
> degrees is uniform, the size of longitude degrees go like square of 
> cosine of latitude, I think) , but just wondered if there was some more 
> sophisticated procedure for what must be a common task.

Sy,

OGR and it's SRS operations do not have anything specific for this.

I suppose there is some fairly straight forward math on the ellipse that
would transform the length of a degree of latitude at different latitudes
though I don't know it off hand.

Generally speaking though I assume if people want to work in a geographic
coordinate system it is because they don't care about the distortion.

If you were wanting to do mensuration (why do we need such a fancy term
for measuring?) you would do it in some locally reasonable projected
coordinate system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Tue Mar 20 00:43:31 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF6D3C.3040205@pobox.com>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
	<45FF5BD0.5070700@perkins.net> <45FF6D3C.3040205@pobox.com>
Message-ID: <45FF6673.1070303@perkins.net>


> Here I go responding out of order.

I'm just grateful anyone's responding at all at this time of the night!


> I just assume if folks are displaying things in a geographic coordinate
> system that they don't care about the distortion.  Likewise, if they
> display things in a projected coordinate system I don't try to analyse
> whether it is locally appropriate or not.   Projections are all distorted
> too after all, just presumably not in harmful ways locally.

So, just to clarify, if OpenEV is displaying a vector layer, it displays 
the coordinates isotropically? i.e. horizontal screen distances relate 
to longitude in the same ratio as vertical screen pixels relate to 
latitude? Is this pretty common practice in the GIS world?

I guess I've just been spoiled by playing with Google Earth too much... :)

Sy




From sy at perkins.net  Tue Mar 20 00:48:09 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF5DDA.4040703@perkins.net>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
	<45FF5BD0.5070700@perkins.net> <45FF5DDA.4040703@perkins.net>
Message-ID: <45FF6789.3000904@perkins.net>

Simon Perkins wrote:
> In a related question, if I have a vector layer in a geographic 
> coordinate system, does OGR provide some convenient way to compute the 
> relative scaling of degrees in the east-west and north-south 
> directions? I guess it comes down to some simple geometry (the size of 
> latitude degrees is uniform, the size of longitude degrees go like 
> square of cosine of latitude, I think) , but just wondered if there 
> was some more sophisticated procedure for what must be a common task.

Er, I mean, longitude degrees go like the cosine of the latitude. Not 
sure where the square came from...

This is assuming a sphere of course, but as Frank says, all projections 
are lies, so this is probably good enough.

Cheers,

Sy


From warmerdam at pobox.com  Tue Mar 20 01:40:05 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Assign projection to a tif image
In-Reply-To: <OF51B41C75.EFCE6649-ON852572A3.0073717D-852572A3.0073B01B@usgs.gov>
References: <OF51B41C75.EFCE6649-ON852572A3.0073717D-852572A3.0073B01B@usgs.gov>
Message-ID: <45FF73B5.2060907@pobox.com>

Huajun Zhang wrote:
> 
> Hi,
> 
> Is there any method to define a projection to a image rather than 
> reproject the image with gdalwarp?

Huajun Zhang,

A projection can be attached to an image in the process of translating
it if the existing projection is wrong or if the input image lacks one
entirely.

For instance,

gdal_translate -a_srs '+proj=utm +zone=11 +datum=WGS84' in.tif out.tif

Is this the sort of operation you had in mind?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From schuyler at nocat.net  Tue Mar 20 01:04:12 2007
From: schuyler at nocat.net (Schuyler Erle)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <6.2.3.4.2.20070319103250.03d30528@hobu.mail.iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<45FEA7C5.1020600@mapgears.com>
	<6.2.3.4.2.20070319103250.03d30528@hobu.mail.iastate.edu>
Message-ID: <20070320050411.GB6242@vishnu.tridity.org>

* On 19-Mar-2007 at  8:02AM PST, Howard Butler said:
> 
> - Integration of source code, wiki, and bugs.  You can refer to
> changesets/bugs/etc in wiki, commits, etc and the linkages happen
> automatically.  For example, it a bug report you could say "in
> r10000, hobu made a bonehead mistake" and r10000 would be a link to
> that changeset in the source where it happened.  Everything is more
> accessible by having it all in the same place.

Actually, it's tough to overstate the value of this feature. In
OpenLayers, as a matter of project policy, each commit message
references the bug number it addresses (if applicable), and then each
bug references the commit(s) that fixes it when the bug is closed.
Trac's ability to then auto-linkify these references in the Trac web
interface has immeasurably enhanced our ability to document and track
changes to the code, and be able to sift through when and why a
particular change was made. These things are all possible with CVS and
Bugzilla, but Trac and SVN make it totally painless.

SDE

From warmerdam at pobox.com  Tue Mar 20 01:30:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF6673.1070303@perkins.net>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
	<45FF5BD0.5070700@perkins.net> <45FF6D3C.3040205@pobox.com>
	<45FF6673.1070303@perkins.net>
Message-ID: <45FF718E.2050601@pobox.com>

Simon Perkins wrote:
> So, just to clarify, if OpenEV is displaying a vector layer, it displays 
> the coordinates isotropically? i.e. horizontal screen distances relate 
> to longitude in the same ratio as vertical screen pixels relate to 
> latitude?

Yes

 >  Is this pretty common practice in the GIS world?

Yes, nearly universal I think.

> I guess I've just been spoiled by playing with Google Earth too much... :)

To the best of my knowledge Google Earth has one display project
(some sort of Mercator) and it reprojects everything to that.  That
approach is fine too if you are willing to reproject everything - either
in advance or on the fly.  Many apps will allow you to do this too if you
want.

Oddly, OpenEV can reproject rasters on the fly but not vectors.  But that
is just an unfortunate omission, not really a design decision.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From meldavey at sonalysts.com  Tue Mar 20 09:29:26 2007
From: meldavey at sonalysts.com (Mel Davey)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Support for other image formats
In-Reply-To: 069f01c76a6b$123b4e70$160002c0@shark
Message-ID: <20070320132926.c859fdda@mail.sonalysts.com>

Thanks All!  GDAL rocks!  Turns out it can read ONC & TPC files, just didn't see the extension supported in the GDAL list so I never tried, but like I said, I'm a new user.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070320/1da694dd/attachment.html
From dmorissette at mapgears.com  Tue Mar 20 09:39:36 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <45FEE630.3070108@pobox.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>	<45FDC181.1030501@pobox.com>
	<45FEE630.3070108@pobox.com>
Message-ID: <45FFE418.9090907@mapgears.com>

+0 since I was very happy and comfortable with Bugzilla... but still 
looking forward to the additional benefits of Trac that you guys mentioned.

I especially like Schuyler's point about Trac / SVN integration to help 
projects that require a ticket number for every commit. I hope that this 
requirement to refer to a ticket in every commit will become a policy of 
all our projects someday, including GDAL.

Daniel

Frank Warmerdam wrote:
> Frank Warmerdam wrote:
>> Motion: To migrate the GDAL project from bugzilla hosted at 
>> remotesensing.org
>> to Trac hosted at trac.osgeo.org/gdal, with Howard Butler performing the
>> translation.
> 
> +1
> 


-- 
Daniel Morissette
http://www.mapgears.com/

From mateusz at loskot.net  Tue Mar 20 11:44:05 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <45FFE418.9090907@mapgears.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>	<45FDC181.1030501@pobox.com>	<45FEE630.3070108@pobox.com>
	<45FFE418.9090907@mapgears.com>
Message-ID: <46000145.1030904@loskot.net>

Daniel Morissette wrote:
> I especially like Schuyler's point about Trac / SVN integration to
> help projects that require a ticket number for every commit. I hope
> that this requirement to refer to a ticket in every commit will
> become a policy of all our projects someday, including GDAL.

Daniel,

I believe, we already use this policy.
All commits related to bug/enhancement that was reported on Bugzilla
get a report number in log,like

"Fixed transactions support (Bug 1234)"

With Trac, this feature will get new dimension, as the number
becomes clickable. IMO, Trac is a very good materialization of
hyper-text in this case.


Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Tue Mar 20 11:55:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:43 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <20070320050411.GB6242@vishnu.tridity.org>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>	<45FEA7C5.1020600@mapgears.com>	<6.2.3.4.2.20070319103250.03d30528@hobu.mail.iastate.edu>
	<20070320050411.GB6242@vishnu.tridity.org>
Message-ID: <460003E6.5000405@loskot.net>

Schuyler Erle wrote:
> * On 19-Mar-2007 at  8:02AM PST, Howard Butler said:
>> - Integration of source code, wiki, and bugs.  You can refer to 
>> changesets/bugs/etc in wiki, commits, etc and the linkages happen 
>> automatically.  For example, it a bug report you could say "in 
>> r10000, hobu made a bonehead mistake" and r10000 would be a link to
>>  that changeset in the source where it happened.  Everything is 
>> more accessible by having it all in the same place.
> 
> Actually, it's tough to overstate the value of this feature. In 
> OpenLayers, as a matter of project policy, each commit message 
> references the bug number it addresses (if applicable), and then each
>  bug references the commit(s) that fixes it when the bug is closed. 
> Trac's ability to then auto-linkify these references in the Trac web
>  interface has immeasurably enhanced our ability to document and
> track changes to the code, and be able to sift through when and why a
>  particular change was made. These things are all possible with CVS 
> and Bugzilla, but Trac and SVN make it totally painless.

Schuyler,

Yes, that's a very good point.
I already use this feature and link my fixes on Bugzilla to
appropriate changesets on the Trac.

This way, anyone (including me) can easily check what changes exactly
have been submitted in a bug fix.
Sometimes, a bug fix introduces...new bugs :-) and next after a fix for
fix is applied, it's very helpful to see the history of bug fix changes
in readable form.


For example, I fixed a bug 1521:
http://trac.osgeo.org/gdal/changeset/10969

and in next few minutes, I found my fix was buggy, so I re-fixed it:
http://trac.osgeo.org/gdal/changeset/10975

I included both URLs in Bugzilla report for bug 1521.

In trac, when I can include r10969 in a comment and it will
automatically link.

Simply, the bug history is easily observable together with changes in
sources.

Certainly, the same can be achieved with Bugzilla and CVS diff, but Trac
makes it far easier and faster.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Tue Mar 20 13:44:11 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <45FF718E.2050601@pobox.com>
References: <45FF517E.5010801@perkins.net> <45FF5BB8.2020101@pobox.com>
	<45FF5BD0.5070700@perkins.net> <45FF6D3C.3040205@pobox.com>
	<45FF6673.1070303@perkins.net> <45FF718E.2050601@pobox.com>
Message-ID: <46001D6B.9080109@perkins.net>

Frank Warmerdam wrote:
>> I guess I've just been spoiled by playing with Google Earth too 
>> much... :)
>
> To the best of my knowledge Google Earth has one display project
> (some sort of Mercator) and it reprojects everything to that.  That
> approach is fine too if you are willing to reproject everything - either
> in advance or on the fly.  Many apps will allow you to do this too if you
> want.

I think that google maps does everything in Mercator, but google earth
allows you to view the entire globe, spin it around and view the poles,
so my feeling is it must be doing something more cunning.

According to wikipedia, GE uses a geographic coordinate system
internally, and projects everything to a general perspective projection
for display. I would guess though that it just texture maps
(non-rectangular) geographic tiles onto a 3D sphere and then lets OpenGL
take care of displaying things. Although it is possible to view the
poles in GE, there is definitely weird stuff happening there - there
appear to be very narrow triangular tiles. Anyway, it's all pretty cool...

http://en.wikipedia.org/wiki/Google_earth


Cheers,

Sy



From jluis at ualg.pt  Tue Mar 20 14:28:08 2007
From: jluis at ualg.pt (Joaquim Luis)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <46001D6B.9080109@perkins.net>
References: <45FF517E.5010801@perkins.net>
	<45FF5BB8.2020101@pobox.com>	<45FF5BD0.5070700@perkins.net>
	<45FF6D3C.3040205@pobox.com>	<45FF6673.1070303@perkins.net>
	<45FF718E.2050601@pobox.com> <46001D6B.9080109@perkins.net>
Message-ID: <460027B8.3020202@ualg.pt>

Simon Perkins wrote:
> I think that google maps does everything in Mercator, but google earth
> allows you to view the entire globe, spin it around and view the poles,
> so my feeling is it must be doing something more cunning.
Simon,
Google Earth could also have been named "Google Land" because only
over continents (but except Antarctica) we have satellite imagery draped
on DEMs (of variable resolution). The ocean areas are represented by an
image constructed from the Smith & Sandwell predicted bethymetry grid.
That is why you see those kind of tiles over the north pole.

Note that it is also possible to have it display the pointer coordinates 
in UTM.

Joaquim Luis

From matt.wilkie at gov.yk.ca  Tue Mar 20 15:34:55 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
Message-ID: <4600375F.8010209@gov.yk.ca>

Hi All,

Is it planned that end user[*] documentation be part of what is in svn 
and/or trac? If not would an enhancement reqeust to do so, even if as a 
branch rather than mainline, be entertained?

Many times I've wanted to add to or clarify an example in the 
documentation and not been able to or wanted to distract the developers 
from the "real" work of improving and extending gdal/ogr.

[*] My own interest is in utility docs rather than developer docs. E.g. 
"how do I maintain nodata and pixel size in gdalwarp?"  more than "how 
do I add driver X to my app?"

cheers,

-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue Mar 20 17:12:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <4600375F.8010209@gov.yk.ca>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<4600375F.8010209@gov.yk.ca>
Message-ID: <46004E3A.8020602@pobox.com>

Matt Wilkie wrote:
> Hi All,
> 
> Is it planned that end user[*] documentation be part of what is in svn 
> and/or trac? If not would an enhancement reqeust to do so, even if as a 
> branch rather than mainline, be entertained?

Matt,

The end user documentation is in subversion now.  The format driver
documents are plain html, and the utility docs are processed through
doxygen.

I imagine quite a bit of auxilary documentation for end users growing
in the wiki as well.

> Many times I've wanted to add to or clarify an example in the 
> documentation and not been able to or wanted to distract the developers 
> from the "real" work of improving and extending gdal/ogr.
> 
> [*] My own interest is in utility docs rather than developer docs. E.g. 
> "how do I maintain nodata and pixel size in gdalwarp?"  more than "how 
> do I add driver X to my app?"

I am interested in providing commit access to those interested in working
on the documentation.  In the meantime, you can send improvements through
bugzilla/trac to be applied.  When that gets annoying someone will propose
you for commit access. :-)

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Tue Mar 20 16:32:33 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <46004E3A.8020602@pobox.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>	<4600375F.8010209@gov.yk.ca>
	<46004E3A.8020602@pobox.com>
Message-ID: <460044E1.7000508@loskot.net>

Frank Warmerdam wrote:
> Matt Wilkie wrote:
>> [*] My own interest is in utility docs rather than developer docs.
>> E.g. "how do I maintain nodata and pixel size in gdalwarp?"  more than
>> "how do I add driver X to my app?"
> 
> I am interested in providing commit access to those interested in working
> on the documentation.  In the meantime, you can send improvements through
> bugzilla/trac to be applied.  When that gets annoying someone will propose
> you for commit access. :-)

Don't we plan to put such examples/howtos to the Wiki?

BTW, here is my TOC proposal for the Wiki:
http://mateusz.loskot.net/tmp/gdal/gdal-tracwiki-proposal.txt

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From klokan at klokan.cz  Tue Mar 20 17:17:10 2007
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Google SoC Project: Tile Structure Driver
Message-ID: <6e41d95b0703201417r1d0fa267w25eb2448af13ae8b@mail.gmail.com>

Hello GDAL developers,

I am a student from Czech Republic and I would like to subscribe
Google Summer of Code for
GDAL (under OSGeo Organization).

I have created a page in OSGeo Wiki about this project:
http://wiki.osgeo.org/index.php/GDAL2Tiles_SoC_2007

I am insterested in Tile Structure Driver for GDAL, so this library
could directly export JPEG/PNG raster tile structure and necessary
metadata for displaying map in Google Earth, Google Maps, OpenLayers
and WorldKit.

Tile structure and metadata format from OSGEO Tile Map Specification
(http://wiki.osgeo.org/index.php/Tile_Map_Service_Specification) will
be used as main dataformat.

The idea of this project was mentioned by FrankW at
http://wiki.osgeo.org/index.php/GDAL_SoC_Ideas as point 3. I have been
talking about this project on IRC with some of you alredy.

I wrote something about myself in the end of project wiki page.

Any suggestions are welcome, feel free to write me...

Looking forward to cooperate with you

Klokan

From petermorgan at grapevine.net.au  Tue Mar 20 17:43:36 2007
From: petermorgan at grapevine.net.au (Peter Morgan)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Projected vs Geographic Coordinate Systems
In-Reply-To: <46001D6B.9080109@perkins.net>
References: <45FF517E.5010801@perkins.net>
	<45FF5BB8.2020101@pobox.com>	<45FF5BD0.5070700@perkins.net>
	<45FF6D3C.3040205@pobox.com>	<45FF6673.1070303@perkins.net>
	<45FF718E.2050601@pobox.com> <46001D6B.9080109@perkins.net>
Message-ID: <46005588.1080103@grapevine.net.au>

Hi everyone
I would like to add some additional information to the discussion.

In normal mapping/cartography as implied with a cylindrical or conic 
section the center of projection, COP, is the center of the Earth. The 
aim was to project the Earth onto a surface that could be "laid flat". 
When we use raw longitudes and latitudes we imply a special form of 
these projections and we normally don't care about the distortions. 
These  projections have many useful characteristics. Some have equal 
area, useful for comparative studies especially density or yields. 
Others are conformal where angular relationships are maintained. Yes we 
can compute distances and perform a host of geo-statical functions from 
a longitude and latitude tuple on the ellipsoid but it is much simpler 
in say a UTM projection especially if the area is of limited extent. 
There are lots of Cartographic references available for this 
information. Two highly recommended references are:
*Richardus*, P. & *Adler*, R K. (1972). Map Projections for Geodesists, 
Cartographers & Geographers. London. North-Holland Publishing Company  
(Old but good introductory text. Details all the basic cartographic theory.)
*Snyder*, J.P. (1987). Map Projections - A Working Manual. U.S. 
Geological Survey Professional Paper 1395, United States Government 
Printing Office, Washington D.C..  (Very good, very detailed with examples.)
The references in Snyder will provide you with more detail should you 
want this info.

The  GMT package, like most GIS suites, implements most of the common 
projections. One of the features of the GMT package is the ease of 
generating a projection . The documentation is especially useful here 
and it gives visual examples of the projections without the need to go 
in the projection mathematics. See
 http://gmt.soest.hawaii.edu/

Computer Graphics is all about projections. In this case it is from a 
three dimensional (usually Cartesian) space to a flat image space, our 
screens. The COP in most of these cases is external to the body being 
projected. It is the COP that moves around the body or in the case of 
fly throughs that moves on a trajectory that simulates travel. A very 
good coverage of projection theory is given in
*Foley*, J.D., *van Dam*, A.*,  Feiner*, S.K., and* Hughes*, J.F. 
(1990), Computer Graphics, Principles and Practice, 2nd Ed, Addison Wesley.
This is quite old as well. Apologies for not knowing the current crop of 
texts.

The azimuthal class of cartographic projections are consistent with 
computer graphics perspective projections. The often used perspective 
projection is consistent with both vision and the camera.

It is often more convenient to transform geographic 
coordinates(longitude, latitude and height) to plane coordinates such as 
UTM coordinates  or a simple Mercator and then to employ computer 
graphics principles of projection on these transformed values. There are 
many reasons for this with speed and complexity issues dominating.

Hope this might provide a starting point for continued enjoyment and 
understanding.
cheers peter


Simon Perkins wrote:
> Frank Warmerdam wrote:
>>> I guess I've just been spoiled by playing with Google Earth too 
>>> much... :)
>>
>> To the best of my knowledge Google Earth has one display project
>> (some sort of Mercator) and it reprojects everything to that.  That
>> approach is fine too if you are willing to reproject everything - either
>> in advance or on the fly.  Many apps will allow you to do this too if 
>> you
>> want.
>
> I think that google maps does everything in Mercator, but google earth
> allows you to view the entire globe, spin it around and view the poles,
> so my feeling is it must be doing something more cunning.
>
> According to wikipedia, GE uses a geographic coordinate system
> internally, and projects everything to a general perspective projection
> for display. I would guess though that it just texture maps
> (non-rectangular) geographic tiles onto a 3D sphere and then lets OpenGL
> take care of displaying things. Although it is possible to view the
> poles in GE, there is definitely weird stuff happening there - there
> appear to be very narrow triangular tiles. Anyway, it's all pretty 
> cool...
>
> http://en.wikipedia.org/wiki/Google_earth
>
>
> Cheers,
>
> Sy
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
>



From mateusz at loskot.net  Tue Mar 20 23:16:03 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] makegdal.vcproj renamed
Message-ID: <4600A373.5060701@loskot.net>

Hi,

I renamed makegdal.sln|.vcproj to makegdal71.sln|.vcproj to explicitly
indicate the solution is for Visual C++ 7.1 (2003).

Also, I added makegdal80.sln|.vcproj files - solution for
Visual C++ 8.0 (2005).

So, now we have:

makegdal71.sln
makegdal71.vcproj
makegdal80.sln
makegdal80.vcproj

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From yjacolin at free.fr  Wed Mar 21 05:21:28 2007
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Segmentation fault
In-Reply-To: <200703181720.15243.yjacolin@free.fr>
References: <200703181600.28297.yjacolin@free.fr>
	<200703181703.44378.yjacolin@free.fr>
	<200703181720.15243.yjacolin@free.fr>
Message-ID: <200703211021.28376.yjacolin@free.fr>

Le Dimanche 18 Mars 2007 17:20, Yves Jacolin a ?crit?:
> Le Dimanche 18 Mars 2007 17:03, Yves Jacolin a ?crit?:
> > Le Dimanche 18 Mars 2007 16:19, Frank Warmerdam a ?crit?:
> > > Yves Jacolin wrote:
> > > > Hi,
> > > >
> > > > I built gdal-ogr from source (test 1.3.2 and 1.4.0). I already
> > > > succeed to built it. But this time,  I always get this error:
> > > > $ gdalinfo --formats
> > > > Supported Formats:
> > > > Erreur de segmentation (which means Segmentation fault ;-)
> > > >
> > > > I get no error message with configure, make, and make install. I have
> > > > no idea where it can come from. My configure command is:
> > > > ./configure --without-python --with-sqlite=/usr/include/
> > > > --with-mysql=/usr/bin/mysql_config --with-pg=/usr/bin/pg_config
> > > > --without-grass --with-ecw=/usr/local/ --with-xerces --without-ogdi
> > > >
> > > > I built gdal-ogr with python and OGDI the last time I succeed, so
> > > > this time I tried without, but no change.
> > >
> > > Yves,
> > >
> > > One possibility is that you are still building with the old old PROJ.4
> > > code in OGDI.  This often causes an othewise unexplainable seg fault
> > > with linked into something that also has the modern PROJ.4.  Could you
> > > verify that your OGDI is built without the internal PROJ?
> > >
> > > Best regards,
> >
> > Hi Frank,
> >
> > Here the ./configure command:
> > ./configure --with-proj --with-zlib --with-expat
> >
> > so I try to build ogdi with:
> > ./configure --with-proj=/usr/local/ --with-zlib --with-expat
> >
> > I come back as soon as I finish to test this way.
> >
> > Thanks again.
> >
> > Y.
>
> Hi,
>
> I always got this error. The last time I built gdal, I try without-ogdi and
> without-python options. I am goint to try to install glda with the minimal
> options.
>
> Y.
Hi,

My problem doesn't disappear, but do you think that this problem could be due 
to the gdal-grass link which have not been updated ?

Thanks,

Y.
-- 
Yves Jacolin
---
http://yjacolin.gloobe.org


From neteler at itc.it  Wed Mar 21 05:53:03 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Segmentation fault
In-Reply-To: <200703211021.28376.yjacolin@free.fr>
References: <200703181600.28297.yjacolin@free.fr>
	<200703181703.44378.yjacolin@free.fr>
	<200703181720.15243.yjacolin@free.fr>
	<200703211021.28376.yjacolin@free.fr>
Message-ID: <20070321095303.GA9516@bartok.itc.it>

On Wed, Mar 21, 2007 at 10:21:28AM +0100, Yves Jacolin wrote:
...
> My problem doesn't disappear, but do you think that this problem could be due 
> to the gdal-grass link which have not been updated ?

That's very likely. Please also recompile the plugin.

Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From andrey.kiselev at gmail.com  Wed Mar 21 10:51:51 2007
From: andrey.kiselev at gmail.com (Andrey Kiselev)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <45FDC181.1030501@pobox.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<45FDC181.1030501@pobox.com>
Message-ID: <29bcc0df0703210751p54624e5cybb85f41c4834cf8@mail.gmail.com>

> Motion: To migrate the GDAL project from bugzilla hosted at remotesensing.org
> to Trac hosted at trac.osgeo.org/gdal, with Howard Butler performing the
> translation.

I am +1 on this. I would like to try that new system, because of such
great advertisement.

-- 
Andrey V. Kiselev
ICQ# 26871517

From dany.geotools at gmail.com  Wed Mar 21 11:20:48 2007
From: dany.geotools at gmail.com (Daniele Romagnoli)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Maven repository for gdal.jar
In-Reply-To: <7221db410703210818p3c767978o613cd3e898ce0994@mail.gmail.com>
References: <7221db410703210818p3c767978o613cd3e898ce0994@mail.gmail.com>
Message-ID: <7221db410703210820k77ee1185la172342a6c076dec@mail.gmail.com>

Hi list,
I'm improving my GDAL-ImageIO integration proposal.

Actually, I'm building a maven project containing the GDAL-ImageIO Framework
as well as any developed plugins (like, as an instance,
GdalGeoTiffImageReader plugin, GdalEcwImageReader plugin and similar...).

Now, I need to set the POM.xml with the project dependencies.
The GDAL-imageIO Framework project depends on gdal.jar as well as any
developed plugin.
(gdal.jar is the jar containing the java classes generated by SWIG)

Can someone add gdal.jar to remote repositories like, as an instance,
http://www.biblio.org/maven2, so I can set the dependency in the POM.xml and
let mvn to download the required jars when needed?

Please,
let me know...

Thanks a lot.

Best Regards,
Daniele Romagnoli
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070321/a611246d/attachment.html
From warmerdam at pobox.com  Wed Mar 21 11:48:23 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Student Application Deadline Extended
Message-ID: <460153C7.3060101@pobox.com>

Folks,

I'm not sure if you have received notice directly from Google, but the
student application deadline has been extended till sometime on Tuesday.
So at the very least students will have all weekend to apply.

I would encourage doing anything reasonable to raise interest from students
in our projects.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mateusz at loskot.net  Wed Mar 21 11:55:27 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] makegdal.vcproj renamed
Message-ID: <4601556F.8050504@loskot.net>

Hi Ivan,

I'm replying to the list, because all messages I send to your e-mail
return back to me with following error:

-------------------------------------------------------------------------
A message that you sent could not be delivered to one or more of its
recipients. This is a permanent error. The following address(es) failed:

  ivan@ilucena.net
    SMTP error from remote mail server after RCPT TO:<ivan@ilucena.net>:
    host rcom-outblaze-com.mr.outblaze.com [205.158.62.206]:
    554 EMail from mailserver at 209.85.32.86 is refused. See
http://spamblock.outblaze.com/209.85.32.86
-------------------------------------------------------------------------


Ivan Lucena wrote:
> Hi Mateusz,
> 
> Visual Studio 2005 can read 2003s projects, that is why I save as
> 7.1. But the way you did is more organized and obvious in a good
> sense.


I've taken the liberty to rename it to be able to open makegdal without
messing the working copy, so I can run svn status and svn update without
problems ;-)

Also, if there is anyone who will want to create makegdal60.vcproj,
that will be more consistent.

> BTW. Did you receive any feedback from people that actually used
> those Makefile Projects?

No, I've not.
I just started to use it myself and it's cool ;-)
I've had no idea I can run make targets, nice work!

BTW, what do you think about replacing devinstal target in Rebuild All
with regular rebuild ?

Or may be we could put devinstall as a post-build event?

> I am using it a lot to develop the INGR driver and it is pretty hand
> but it is also a little cranky. I set the Build Command Line, "F7",
> to go to the driver folder and compile only that code and the Rebuild
> All Command Line, "Crtl-F7", to do makefile install. By doing this
> way I can find compilation errors or start the debugger faster by
> alternating from F7, Crtl-F7 and F5.

I see.
I attach makegdal80.vcproj to another solution I use for test
application, so I can debug test application and jump into GDAL code as
well.

> I hope it is been useful to someone other than me, otherwise there is
> no reason to keep it on SVN.

Yes, I believe it is.
I'm sure it's useful for me ;-)

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net


-- 
Mateusz Loskot
http://mateusz.loskot.net

From yjacolin at free.fr  Wed Mar 21 14:25:39 2007
From: yjacolin at free.fr (Yves Jacolin)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Segmentation fault
In-Reply-To: <20070321095303.GA9516@bartok.itc.it>
References: <200703181600.28297.yjacolin@free.fr>
	<200703211021.28376.yjacolin@free.fr>
	<20070321095303.GA9516@bartok.itc.it>
Message-ID: <200703211925.40040.yjacolin@free.fr>

Le Mercredi 21 Mars 2007 10:53, Markus Neteler a ?crit?:
> On Wed, Mar 21, 2007 at 10:21:28AM +0100, Yves Jacolin wrote:
> ...
>
> > My problem doesn't disappear, but do you think that this problem could be
> > due to the gdal-grass link which have not been updated ?
>
> That's very likely. Please also recompile the plugin.
>
> Markus

Thanks markus,

My problem now disappeared. Great!

Y.

-- 
Yves Jacolin
-------------
http://yjacolin.gloobe.org
http://softlibre.gloobe.org


From huajun_zhang at usgs.gov  Wed Mar 21 14:59:21 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdalwarp error
In-Reply-To: <45FF73B5.2060907@pobox.com>
Message-ID: <OF2BE99234.E369E3DA-ON852572A5.006780CF-852572A5.006850EC@usgs.gov>

Thank you very much, Frank. I met another problem when I use gdalwarp:

gdalwarp -t_srs '+proj=aea +lat_1=29.50 +lat_2=45.50 +lat_0=23.00 
+lon_0=-96.00 +x_0=0.000 +y_0=0.000 +ellps=GRS80 +units=m +datum=NAD83' 
abl.sid abl.img

I got the error message:

ERROR 1: Translating source or target SRS failed: '+proj=aea

I tried to use C API, I followed the gdalwarp API tutorial, the 
reprojection does not get the correct result either:

 OGRSpatialReference oSRS;

 oSRS.SetProjCS( "Albers Conical Equal Area" );
 oSRS.SetACEA( 29.5, 45.5, 23.0, -96.0, 0.0, 0.0);
 oSRS.SetWellKnownGeogCS( "NAD83" );
 oSRS.exportToWkt( &pszDstWKT );

Do you have any idea?

Thanks

Huajun Zhang




Frank Warmerdam <warmerdam@pobox.com> 
03/20/2007 01:40 AM

To
Huajun Zhang <huajun_zhang@usgs.gov>
cc
gdal-dev@lists.maptools.org
Subject
Re: [Gdal-dev] Assign projection to a tif image






Huajun Zhang wrote:
> 
> Hi,
> 
> Is there any method to define a projection to a image rather than 
> reproject the image with gdalwarp?

Huajun Zhang,

A projection can be attached to an image in the process of translating
it if the existing projection is wrong or if the input image lacks one
entirely.

For instance,

gdal_translate -a_srs '+proj=utm +zone=11 +datum=WGS84' in.tif out.tif

Is this the sort of operation you had in mind?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070321/d5ede028/attachment.html
From warmerdam at pobox.com  Wed Mar 21 15:57:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: gdalwarp error
In-Reply-To: <OF2BE99234.E369E3DA-ON852572A5.006780CF-852572A5.006850EC@usgs.gov>
References: <OF2BE99234.E369E3DA-ON852572A5.006780CF-852572A5.006850EC@usgs.gov>
Message-ID: <46018E1C.9050405@pobox.com>

Huajun Zhang wrote:
> 
> Thank you very much, Frank. I met another problem when I use gdalwarp:
> 
> gdalwarp -t_srs '+proj=aea +lat_1=29.50 +lat_2=45.50 +lat_0=23.00 
> +lon_0=-96.00 +x_0=0.000 +y_0=0.000 +ellps=GRS80 +units=m +datum=NAD83' 
> abl.sid abl.img
> 
> I got the error message:
> 
> ERROR 1: Translating source or target SRS failed: '+proj=aea
> 
> I tried to use C API, I followed the gdalwarp API tutorial, the 
> reprojection does not get the correct result either:
> 
>  OGRSpatialReference oSRS;
> 
>  oSRS.SetProjCS( "Albers Conical Equal Area" );
>  oSRS.SetACEA( 29.5, 45.5, 23.0, -96.0, 0.0, 0.0);
>  oSRS.SetWellKnownGeogCS( "NAD83" );
>  oSRS.exportToWkt( &pszDstWKT );
> 
> Do you have any idea?

Huajun,

The error message looks like the issue has to do with quoting.  Are you by
any chance on windows?  If so, you will need to use double quotes to hold
an argument to -t_srs together.

I'm not clear in what way the C API code failed for you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From seanasy at gmail.com  Wed Mar 21 16:20:44 2007
From: seanasy at gmail.com (Sean Fulton)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Python bindings issue on OS X
Message-ID: <ets42s$1e1$1@sea.gmane.org>

Hello,

I'm trying to compile gdal 1.4.0 on Mac OS X 10.4.9 with the ngpython?
bindings enabled. Compilation and installation go fine. However, when?
trying to import the gdal module into the python interpreter I get the?
following error:

http://dpaste.com/7192/

If I copy _gdal.so, _gdalconst.so, ? _ogr.so and _osr.so to?
/opt/local/lib/python2.4/lib-dynload/ , I get this error instead:

http://dpaste.com/7193/

That's about as far as I've gotten. All of the gdal python libraries?
seem to get installed in /opt/local/lib/python2.4/site-packages/

Any help or tips appreciated.

Thanks,

	Sean



From jack.l.riley at gmail.com  Wed Mar 21 16:56:59 2007
From: jack.l.riley at gmail.com (Jack Riley)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] ogr geometry intersection
Message-ID: <4e9061690703211356s507c3523xaf34cd1c9ce8c46d@mail.gmail.com>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: test_inter.zip
Type: application/zip
Size: 17073 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070321/7cd3af6e/test_inter.zip
From sy at perkins.net  Wed Mar 21 17:30:02 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] C# Geometry Classes?
Message-ID: <4601A3DA.4050409@perkins.net>

Hi,

Do the latest C# bindings include the concrete OGR geometry classes? I 
just realized that my current version doesn't have things like 
OGR.Polygon, so I can't actually access the points in a Feature via OGR 
(if I'm not missing something).

I know - I should just upgrade my GDAL and see for myself, but I'm not 
going to get to that for a couple of days (since I'd have to fix my code 
to use the new namespaces, etc) and wondered if anyone was working on 
this...

Cheers,

Simon




From sy at perkins.net  Wed Mar 21 17:44:32 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <4601A3DA.4050409@perkins.net>
References: <4601A3DA.4050409@perkins.net>
Message-ID: <4601A740.6090201@perkins.net>

Simon Perkins wrote:
> Do the latest C# bindings include the concrete OGR geometry classes? I 
> just realized that my current version doesn't have things like 
> OGR.Polygon, so I can't actually access the points in a Feature via 
> OGR (if I'm not missing something).

OK, just looked in a bit more detail - so, it appears that the C# 
bindings follow the C API more than the C++ one, with methods like 
Geometry.GetPoint() and so on. So, if the geometry is a polygon, how do 
we access the inner and outer rings?

Are we likely to see OGR.Polygon, OGR.LineString and so forth at any point?

Cheers,

Simon


From szekerest at gmail.com  Wed Mar 21 18:33:01 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <4601A740.6090201@perkins.net>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>
Message-ID: <f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>

Simon,

Currently - for all of the SWIG bindings - you can access the various
geometry types through the Geometry base class therefore you cannot do
much derived class specific operations. However, indeed, it would be a
nice addition to support separate classes for the geometry types like
Polygon, LineString, MultiPoligon etc.

This kind of implementation requires a widespead decision of the
developers since a C# only implementation would bring in a great
degree of divergence between the languages that should be highly
avoided.


Best regards,


Tamas


2007/3/21, Simon Perkins <sy@perkins.net>:
> Simon Perkins wrote:
> > Do the latest C# bindings include the concrete OGR geometry classes? I
> > just realized that my current version doesn't have things like
> > OGR.Polygon, so I can't actually access the points in a Feature via
> > OGR (if I'm not missing something).
>
> OK, just looked in a bit more detail - so, it appears that the C#
> bindings follow the C API more than the C++ one, with methods like
> Geometry.GetPoint() and so on. So, if the geometry is a polygon, how do
> we access the inner and outer rings?
>
> Are we likely to see OGR.Polygon, OGR.LineString and so forth at any point?
>
> Cheers,
>
> Simon
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From sy at perkins.net  Wed Mar 21 18:37:13 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>
Message-ID: <4601B399.8050606@perkins.net>

Is there a reason why we wrap the C interface rather than the C++ 
interface? The C++ interface seems closer to the C# model. Does SWIG not 
support that?

Cheers,

Sy

P.S. Still trying to work out how to read a polygon geometry via the C 
API. Does it appear as a collection of LinearRings? Is the outer ring 
specified in some way?



Tamas Szekeres wrote:
> Simon,
>
> Currently - for all of the SWIG bindings - you can access the various
> geometry types through the Geometry base class therefore you cannot do
> much derived class specific operations. However, indeed, it would be a
> nice addition to support separate classes for the geometry types like
> Polygon, LineString, MultiPoligon etc.
>
> This kind of implementation requires a widespead decision of the
> developers since a C# only implementation would bring in a great
> degree of divergence between the languages that should be highly
> avoided.
>
>
> Best regards,
>
>
> Tamas
>
>
> 2007/3/21, Simon Perkins <sy@perkins.net>:
>> Simon Perkins wrote:
>> > Do the latest C# bindings include the concrete OGR geometry classes? I
>> > just realized that my current version doesn't have things like
>> > OGR.Polygon, so I can't actually access the points in a Feature via
>> > OGR (if I'm not missing something).
>>
>> OK, just looked in a bit more detail - so, it appears that the C#
>> bindings follow the C API more than the C++ one, with methods like
>> Geometry.GetPoint() and so on. So, if the geometry is a polygon, how do
>> we access the inner and outer rings?
>>
>> Are we likely to see OGR.Polygon, OGR.LineString and so forth at any 
>> point?
>>
>> Cheers,
>>
>> Simon
>>
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>


From hobu at iastate.edu  Wed Mar 21 18:54:28 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <4601B399.8050606@perkins.net>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>
	<4601B399.8050606@perkins.net>
Message-ID: <6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>

At 05:37 PM 3/21/2007, Simon Perkins wrote:
>Is there a reason why we wrap the C interface rather than the C++ 
>interface? The C++ interface seems closer to the C# model. Does SWIG 
>not support that?

We wrap the C interface because it has been blessed as the 'stable' 
one (almost to a fault sometimes, IMO).  SWIG happily supports C++ 
(except for certain template'y stuff, which we don't have much worry 
with in GDAL), so that isn't the problem. The GDAL/OGR C++ API can be 
changed at any time, and these changes would have automatically been 
reflected in the language bindings.  GDAL's C++ hasn't historically 
worked under the constraint of changes being reflected, and some 
implementation freedom needs to be available somewhere.  This 
tradeoff complicates the interfaces, but it also insulates 
them.  Kevin and I's first cut actually wrapped the C++ API, but we 
were persuaded otherwise ;)


>P.S. Still trying to work out how to read a polygon geometry via the 
>C API. Does it appear as a collection of LinearRings? Is the outer 
>ring specified in some way?

Searching for existing Python OGR code out there should provide 
instructive examples.  It is my understanding (and expectation) that 
the language bindings present things a similarly as possible.  My 
opinion is that the various bindings can add their own spices, but 
that the basic dish starts out the same.

/me runs home to go eat.

Howard 


From sy at perkins.net  Wed Mar 21 19:37:20 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>
	<4601B399.8050606@perkins.net>
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>
Message-ID: <4601C1B0.2000802@perkins.net>

Howard Butler wrote:
>   Kevin and I's first cut actually wrapped the C++ API, but we were 
> persuaded otherwise ;)

Yes, I remember the discussion... And the C API seemed to make sense for 
GDAL, but now that I've started to use OGR as well, the C API seems a 
little limited compared to the C++ one. The Geometry hierarchy in OGR 
really cries out for an object oriented API, while GDAL doesn't seem to 
have quite the same needs.

I wonder then, whether the OGR C API could do with some enhancements to 
provide functions that are more focused on specific geometry types?

Cheers,

Sy


From szekerest at gmail.com  Wed Mar 21 19:57:20 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <4601C1B0.2000802@perkins.net>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>
	<4601B399.8050606@perkins.net>
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>
	<4601C1B0.2000802@perkins.net>
Message-ID: <f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>

Simon,

I could imagine a similar implementation like some of the gdal classes
use MajorObject as a base class. For example we could add:

%rename (Point) OGRPointShadow ;
class OGRPointShadow : public OGRGeometryShadow {

However we should still avoid exposing virtual methods, those might
not be equally supported by the various SWIG language implementations.

Best regards,

Tamas



2007/3/22, Simon Perkins <sy@perkins.net>:
> Howard Butler wrote:
> >   Kevin and I's first cut actually wrapped the C++ API, but we were
> > persuaded otherwise ;)
>
> Yes, I remember the discussion... And the C API seemed to make sense for
> GDAL, but now that I've started to use OGR as well, the C API seems a
> little limited compared to the C++ one. The Geometry hierarchy in OGR
> really cries out for an object oriented API, while GDAL doesn't seem to
> have quite the same needs.
>
> I wonder then, whether the OGR C API could do with some enhancements to
> provide functions that are more focused on specific geometry types?
>
> Cheers,
>
> Sy
>
>

From woodbri at swoodbridge.com  Wed Mar 21 20:25:29 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Mosaicing with gdalwarp
Message-ID: <4601CCF9.6040909@swoodbridge.com>

Quick question. I have been generating tiles with a fixed global 
gridding from CCM files. Obviously along the seams between two adjacent 
CCM files I will generate tiles that have the same spatial extents and 
projection.

What is the best way to mosaic these tiles?

gdalwarp --config GDAL_ONE_BIG_READ on infile.tif outfile.tif

I know that infile.tif and outfile.tif have the same coverage based on 
the file names. All I want to do is mosaic the infile.tif onto 
outfile.tif which exists. Both of these files will have no-data areas 
and data areas.

Thanks,
   -Steve

From warmerdam at pobox.com  Wed Mar 21 21:10:26 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Mosaicing with gdalwarp
In-Reply-To: <4601CCF9.6040909@swoodbridge.com>
References: <4601CCF9.6040909@swoodbridge.com>
Message-ID: <4601D782.5090509@pobox.com>

Stephen Woodbridge wrote:
> Quick question. I have been generating tiles with a fixed global 
> gridding from CCM files. Obviously along the seams between two adjacent 
> CCM files I will generate tiles that have the same spatial extents and 
> projection.
> 
> What is the best way to mosaic these tiles?
> 
> gdalwarp --config GDAL_ONE_BIG_READ on infile.tif outfile.tif
> 
> I know that infile.tif and outfile.tif have the same coverage based on 
> the file names. All I want to do is mosaic the infile.tif onto 
> outfile.tif which exists. Both of these files will have no-data areas 
> and data areas.

Steve,

This should work for what you want.  You may need to use -srcnodata and/or
-dstnodata if these values aren't set properly in the file metadata.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From woodbri at swoodbridge.com  Wed Mar 21 21:26:46 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Mosaicing with gdalwarp
In-Reply-To: <4601D782.5090509@pobox.com>
References: <4601CCF9.6040909@swoodbridge.com> <4601D782.5090509@pobox.com>
Message-ID: <4601DB56.4050505@swoodbridge.com>

Frank Warmerdam wrote:
> Stephen Woodbridge wrote:
>> Quick question. I have been generating tiles with a fixed global 
>> gridding from CCM files. Obviously along the seams between two 
>> adjacent CCM files I will generate tiles that have the same spatial 
>> extents and projection.
>>
>> What is the best way to mosaic these tiles?
>>
>> gdalwarp --config GDAL_ONE_BIG_READ on infile.tif outfile.tif
>>
>> I know that infile.tif and outfile.tif have the same coverage based on 
>> the file names. All I want to do is mosaic the infile.tif onto 
>> outfile.tif which exists. Both of these files will have no-data areas 
>> and data areas.
> 
> Steve,
> 
> This should work for what you want.  You may need to use -srcnodata and/or
> -dstnodata if these values aren't set properly in the file metadata.
> 
> Best regards,

OK, seems the nothing is as simple as it should be. I grabbed two tiles 
to give it a try.

1) I does not look like the nodata value is set in the metadata
2) these files should be the same spatial extents, but aren't *mutter* 
*mutter*

I'm not sure what the nodata value is and these were tiled out of CCM 
mrsid files. I seem to remember that there is some option like nearblack 
that can be used to set the nodata values. Is there a gdal tool that 
will help me with this?

[swoodbridge@booboo test]$ gdalinfo a.tif
Driver: GTiff/GeoTIFF
Size is 6235, 6235
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-117.750000000000000,34.000000000000000)
Pixel Size = (0.000010024716912,-0.000010024716912)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-117.7500000,  34.0000000) (117d45'0.00"W, 34d 0'0.00"N)
Lower Left  (-117.7500000,  33.9374959) (117d45'0.00"W, 33d56'14.99"N)
Upper Right (-117.6874959,  34.0000000) (117d41'14.99"W, 34d 0'0.00"N)
Lower Right (-117.6874959,  33.9374959) (117d41'14.99"W, 33d56'14.99"N)
Center      (-117.7187479,  33.9687479) (117d43'7.49"W, 33d58'7.49"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

[swoodbridge@booboo test]$ gdalinfo b.tif
Driver: GTiff/GeoTIFF
Size is 2925, 2925
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-117.750000000000000,34.000000000000000)
Pixel Size = (0.000021365901645,-0.000021365901645)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-117.7500000,  34.0000000) (117d45'0.00"W, 34d 0'0.00"N)
Lower Left  (-117.7500000,  33.9375047) (117d45'0.00"W, 33d56'15.02"N)
Upper Right (-117.6875047,  34.0000000) (117d41'15.02"W, 34d 0'0.00"N)
Lower Right (-117.6875047,  33.9375047) (117d41'15.02"W, 33d56'15.02"N)
Center      (-117.7187524,  33.9687524) (117d43'7.51"W, 33d58'7.51"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

[swoodbridge@booboo test]$ gdalinfo c.tif
Driver: GTiff/GeoTIFF
Size is 2925, 2925
Coordinate System is:
GEOGCS["WGS 84",
     DATUM["WGS_1984",
         SPHEROID["WGS 84",6378137,298.2572235629972,
             AUTHORITY["EPSG","7030"]],
         AUTHORITY["EPSG","6326"]],
     PRIMEM["Greenwich",0],
     UNIT["degree",0.0174532925199433],
     AUTHORITY["EPSG","4326"]]
Origin = (-117.750000000000000,34.000000000000000)
Pixel Size = (0.000021365901645,-0.000021365901645)
Metadata:
   AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (-117.7500000,  34.0000000) (117d45'0.00"W, 34d 0'0.00"N)
Lower Left  (-117.7500000,  33.9375047) (117d45'0.00"W, 33d56'15.02"N)
Upper Right (-117.6875047,  34.0000000) (117d41'15.02"W, 34d 0'0.00"N)
Lower Right (-117.6875047,  33.9375047) (117d41'15.02"W, 33d56'15.02"N)
Center      (-117.7187524,  33.9687524) (117d43'7.51"W, 33d58'7.51"N)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

cp b.tif c.tif
gdalwarp --config GDAL_ONE_BIG_READ ON a.tif c.tif

[swoodbridge@booboo test]$ ls -l
total 175596
-rw-r--r--  1 swoodbridge users 122910508 Mar 22 00:50 a.tif
-rw-r--r--  1 swoodbridge users  28318972 Mar 22 00:50 b.tif
-rw-r--r--  1 swoodbridge users  28384508 Mar 22 00:54 c.tif


From warmerdam at pobox.com  Wed Mar 21 22:13:37 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Mosaicing with gdalwarp
In-Reply-To: <4601DB56.4050505@swoodbridge.com>
References: <4601CCF9.6040909@swoodbridge.com> <4601D782.5090509@pobox.com>
	<4601DB56.4050505@swoodbridge.com>
Message-ID: <4601E651.6090405@pobox.com>

Stephen Woodbridge wrote:
> I'm not sure what the nodata value is and these were tiled out of CCM 
> mrsid files. I seem to remember that there is some option like nearblack 
> that can be used to set the nodata values. Is there a gdal tool that 
> will help me with this?

Steve,

You should be able to inspect the files with something like OpenEV to
inspect the exact pixel values in nodata areas.

If the files have suffered some "nodata damage" due to lossy compression
in mrsid format, you can use the nearblack program (in gdal/apps) to
convert values near black to exactly black (or near white to exactly white).
The utility is described on the web site, but is not in GDAL 1.4.0, so you
might want to grab source from subversion or use FWTools.

If the nodata values aren't set in the files you can just indicate the
values on the gdalwarp commandline.  If you want to embed the nodata values
in the files, use the -a_nodata flag to gdal_translate.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Wed Mar 21 22:49:46 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>	
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>	
	<4601B399.8050606@perkins.net>	
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>	
	<4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
Message-ID: <4601EECA.8000907@perkins.net>

I'm entirely new to SWIG, but if this follows a reasonably 
straightforward pattern I'd be happy to add this stuff.

So

- What files are going to need editing? Just swig/include/ogr.i?

- Is there a good template for what needs to be done? (or could you 
check in the start of one?)


Cheers,

Sy




Tamas Szekeres wrote:
> Simon,
>
> I could imagine a similar implementation like some of the gdal classes
> use MajorObject as a base class. For example we could add:
>
> %rename (Point) OGRPointShadow ;
> class OGRPointShadow : public OGRGeometryShadow {
>
> However we should still avoid exposing virtual methods, those might
> not be equally supported by the various SWIG language implementations.
>
> Best regards,
>
> Tamas
>
>
>
> 2007/3/22, Simon Perkins <sy@perkins.net>:
>> Howard Butler wrote:
>> >   Kevin and I's first cut actually wrapped the C++ API, but we were
>> > persuaded otherwise ;)
>>
>> Yes, I remember the discussion... And the C API seemed to make sense for
>> GDAL, but now that I've started to use OGR as well, the C API seems a
>> little limited compared to the C++ one. The Geometry hierarchy in OGR
>> really cries out for an object oriented API, while GDAL doesn't seem to
>> have quite the same needs.
>>
>> I wonder then, whether the OGR C API could do with some enhancements to
>> provide functions that are more focused on specific geometry types?
>>
>> Cheers,
>>
>> Sy
>>
>>


From warmerdam at pobox.com  Thu Mar 22 01:03:02 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <4601EECA.8000907@perkins.net>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>	
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>	
	<4601B399.8050606@perkins.net>	
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>	
	<4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
	<4601EECA.8000907@perkins.net>
Message-ID: <46020E06.2020809@pobox.com>

Simon Perkins wrote:
> I'm entirely new to SWIG, but if this follows a reasonably 
> straightforward pattern I'd be happy to add this stuff.
> 
> So
> 
> - What files are going to need editing? Just swig/include/ogr.i?
> 
> - Is there a good template for what needs to be done? (or could you 
> check in the start of one?)

Sy,

I feel an RFC would need to be drafted and approved by the PSC before we
add the full set of concrete geometry classes to the swig interfaces.  This
is a fairly substantial change.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Thu Mar 22 02:00:39 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <46020E06.2020809@pobox.com>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>	
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>	
	<4601B399.8050606@perkins.net>	
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>	
	<4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
	<4601EECA.8000907@perkins.net> <46020E06.2020809@pobox.com>
Message-ID: <46021B87.1040808@perkins.net>

Frank Warmerdam wrote:
>
> I feel an RFC would need to be drafted and approved by the PSC before we
> add the full set of concrete geometry classes to the swig interfaces.  
> This
> is a fairly substantial change.

Fair enough. Only trouble is that I'm not really qualified to assess the 
impact of the approach, and whether Tamas' suggestion is the right way 
to go about it. Or even at this stage how to describe Tamas' approach... 
Tamas?

This seems to me like a big chunk that's missing from the OGR C 
interface, but maybe I'm just missing some aspect of how the C API can 
be used. For my money, I'm thinking that this functionality should be 
added into the basic C API (and thence picked up from there by SWIG et 
al). Don't people using the C API to OGR want more geometry specific 
functionality? I still haven't worked out how one can deal with all but 
the simplest geometries through the C interface - for instance 
identifying inner and outer rings of a polygon.

Cheers,

Sy


From warmerdam at pobox.com  Thu Mar 22 02:04:53 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <46021B87.1040808@perkins.net>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>	
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>	
	<4601B399.8050606@perkins.net>	
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>	
	<4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
	<4601EECA.8000907@perkins.net> <46020E06.2020809@pobox.com>
	<46021B87.1040808@perkins.net>
Message-ID: <46021C85.1050502@pobox.com>

Simon Perkins wrote:
> This seems to me like a big chunk that's missing from the OGR C 
> interface, but maybe I'm just missing some aspect of how the C API can 
> be used. For my money, I'm thinking that this functionality should be 
> added into the basic C API (and thence picked up from there by SWIG et 
> al). Don't people using the C API to OGR want more geometry specific 
> functionality? I still haven't worked out how one can deal with all but 
> the simplest geometries through the C interface - for instance 
> identifying inner and outer rings of a polygon.

Simon,

Can you be more specific about what you think is missing?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From sy at perkins.net  Thu Mar 22 02:13:19 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <46021C85.1050502@pobox.com>
References: <4601A3DA.4050409@perkins.net> <4601A740.6090201@perkins.net>	
	<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>	
	<4601B399.8050606@perkins.net>	
	<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>	
	<4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
	<4601EECA.8000907@perkins.net> <46020E06.2020809@pobox.com>
	<46021B87.1040808@perkins.net> <46021C85.1050502@pobox.com>
Message-ID: <46021E7F.9080109@perkins.net>

Frank Warmerdam wrote:
> Simon Perkins wrote:
>> This seems to me like a big chunk that's missing from the OGR C 
>> interface, but maybe I'm just missing some aspect of how the C API 
>> can be used. For my money, I'm thinking that this functionality 
>> should be added into the basic C API (and thence picked up from there 
>> by SWIG et al). Don't people using the C API to OGR want more 
>> geometry specific functionality? I still haven't worked out how one 
>> can deal with all but the simplest geometries through the C interface 
>> - for instance identifying inner and outer rings of a polygon.
>
> Can you be more specific about what you think is missing?

Well if it's not obvious to you then probably the only thing that's 
missing is my knowledge of OGR... But here's an example of where I'm 
confused.

Suppose I've just read a feature from a layer.

I call OGR_G_GetGeometryType() to get the geometry type and get back 
wkbPolygon.

Presumably I can then call OGR_G_ GetPointCount() to get the number of 
points, and then OGR_G_GetPoint() to get the polygon points. But if the 
polygon contains multiple rings, how do I know which points belong to 
which ring?

Or can I invoke OGR_G_GetGeometryRef() on the polygon to get access to 
the rings? If this is the case, is the first ring defined to be the 
outer ring?

Just struggling with lack of documentation or examples using the C OGR 
API...

Cheers,

Sy



From mateusz at loskot.net  Thu Mar 22 02:45:56 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <46021E7F.9080109@perkins.net>
References: <4601A3DA.4050409@perkins.net>
	<4601A740.6090201@perkins.net>		<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>		<4601B399.8050606@perkins.net>		<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>		<4601C1B0.2000802@perkins.net>	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>	<4601EECA.8000907@perkins.net>
	<46020E06.2020809@pobox.com>	<46021B87.1040808@perkins.net>
	<46021C85.1050502@pobox.com> <46021E7F.9080109@perkins.net>
Message-ID: <46022624.5000500@loskot.net>

Simon Perkins wrote:
> Frank Warmerdam wrote:
>> Simon Perkins wrote:
>>> This seems to me like a big chunk that's missing from the OGR C 
>>> interface, but maybe I'm just missing some aspect of how the C
>>> API can be used. For my money, I'm thinking that this
>>> functionality should be added into the basic C API (and thence
>>> picked up from there by SWIG et al). Don't people using the C API
>>> to OGR want more geometry specific functionality? I still haven't
>>> worked out how one can deal with all but the simplest geometries
>>> through the C interface - for instance identifying inner and
>>> outer rings of a polygon.
>> 
>> Can you be more specific about what you think is missing?
> 
> Well if it's not obvious to you then probably the only thing that's 
> missing is my knowledge of OGR... But here's an example of where I'm 
> confused.
> 
> Suppose I've just read a feature from a layer.
> 
> I call OGR_G_GetGeometryType() to get the geometry type and get back 
> wkbPolygon.
> 
> Presumably I can then call OGR_G_ GetPointCount() to get the number
> of points, and then OGR_G_GetPoint() to get the polygon points. But
> if the polygon contains multiple rings, how do I know which points
> belong to which ring?

First, you need to get handle to a ring as a subgeometry (see below).

> Or can I invoke OGR_G_GetGeometryRef() on the polygon to get access
> to the rings? If this is the case, is the first ring defined to be
> the outer ring?

Yes.

> Just struggling with lack of documentation or examples using the C
> OGR API...

I hope following example will help you:


///////////////////////////////////////////////////////////////
#include <iostream>
#include <ogr_api.h>
#include <cpl_port.h>

int main()
{
    using std::cout;
    using std::endl;

    // Polygon with 2 rings
    char* wkt = "POLYGON ((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0), (1 1 0, 2 1
0, 2 2 0, 1 1 0))";

    OGRGeometryH g = NULL;
    OGRErr err = OGR_G_CreateFromWkt(&wkt, NULL, &g);
    cout << "Rings count: " << OGR_G_GetGeometryCount(g) << endl;

    // Ring 1
    OGRGeometryH ring1 = NULL;
    ring1 = OGR_G_GetGeometryRef(g, 0);
    cout << "Ring 1: " << OGR_G_GetPointCount(ring1) << endl;

    // Ring 2
    OGRGeometryH ring2 = NULL;
    ring2 = OGR_G_GetGeometryRef(g, 1);
    cout << "Ring 2: " << OGR_G_GetPointCount(ring2) << endl;

    OGR_G_DestroyGeometry(g);
    return 0;
}
///////////////////////////////////////////////////////////////

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From sy at perkins.net  Thu Mar 22 03:06:20 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <46022624.5000500@loskot.net>
References: <4601A3DA.4050409@perkins.net>
	<4601A740.6090201@perkins.net>		<f3b73b7d0703211533o4e4c9608l8e187009fcf026df@mail.gmail.com>		<4601B399.8050606@perkins.net>		<6.2.3.4.2.20070321173951.021ab1c0@hobu.mail.iastate.edu>		<4601C1B0.2000802@perkins.net>	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>	<4601EECA.8000907@perkins.net>
	<46020E06.2020809@pobox.com>	<46021B87.1040808@perkins.net>
	<46021C85.1050502@pobox.com> <46021E7F.9080109@perkins.net>
	<46022624.5000500@loskot.net>
Message-ID: <46022AEC.4000809@perkins.net>

Hi Mateusz,

Thanks for the example - that helps a lot. I wasn't sure whether a 
Polygon could be treated as a geometry collection like this...

Cheers,

Sy


Mateusz Loskot wrote:
>
> I hope following example will help you:
>
>
> ///////////////////////////////////////////////////////////////
> #include <iostream>
> #include <ogr_api.h>
> #include <cpl_port.h>
>
> int main()
> {
>     using std::cout;
>     using std::endl;
>
>     // Polygon with 2 rings
>     char* wkt = "POLYGON ((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0), (1 1 0, 2 1
> 0, 2 2 0, 1 1 0))";
>
>     OGRGeometryH g = NULL;
>     OGRErr err = OGR_G_CreateFromWkt(&wkt, NULL, &g);
>     cout << "Rings count: " << OGR_G_GetGeometryCount(g) << endl;
>
>     // Ring 1
>     OGRGeometryH ring1 = NULL;
>     ring1 = OGR_G_GetGeometryRef(g, 0);
>     cout << "Ring 1: " << OGR_G_GetPointCount(ring1) << endl;
>
>     // Ring 2
>     OGRGeometryH ring2 = NULL;
>     ring2 = OGR_G_GetGeometryRef(g, 1);
>     cout << "Ring 2: " << OGR_G_GetPointCount(ring2) << endl;
>
>     OGR_G_DestroyGeometry(g);
>     return 0;
> }
> ///////////////////////////////////////////////////////////////
>
> Cheers
>   


From szekerest at gmail.com  Thu Mar 22 06:46:33 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <46022AEC.4000809@perkins.net>
References: <4601A3DA.4050409@perkins.net> <4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
	<4601EECA.8000907@perkins.net> <46020E06.2020809@pobox.com>
	<46021B87.1040808@perkins.net> <46021C85.1050502@pobox.com>
	<46021E7F.9080109@perkins.net> <46022624.5000500@loskot.net>
	<46022AEC.4000809@perkins.net>
Message-ID: <f3b73b7d0703220346r20734eb4r8f210b5bcb51f5@mail.gmail.com>

Hi Folks,

It would be a significant effort to discover which functionality
cannot be treated this way. For example it doesn't make too much sense
to support IsPointOnSurface on a Geometry class.
Sooner or later we should harmonize the C++ and the SWIG API or
support a separate documentation for the SWIG interface. Otherwise the
user will always search for specific methods described at the C++
documentation but missing from the SWIG interface.


Best regards,

Tamas




2007/3/22, Simon Perkins <sy@perkins.net>:
> Hi Mateusz,
>
> Thanks for the example - that helps a lot. I wasn't sure whether a
> Polygon could be treated as a geometry collection like this...
>
> Cheers,
>
> Sy
>
>
> Mateusz Loskot wrote:
> >
> > I hope following example will help you:
> >
> >
> > ///////////////////////////////////////////////////////////////
> > #include <iostream>
> > #include <ogr_api.h>
> > #include <cpl_port.h>
> >
> > int main()
> > {
> >     using std::cout;
> >     using std::endl;
> >
> >     // Polygon with 2 rings
> >     char* wkt = "POLYGON ((0 0 0,4 0 0,4 4 0,0 4 0,0 0 0), (1 1 0, 2 1
> > 0, 2 2 0, 1 1 0))";
> >
> >     OGRGeometryH g = NULL;
> >     OGRErr err = OGR_G_CreateFromWkt(&wkt, NULL, &g);
> >     cout << "Rings count: " << OGR_G_GetGeometryCount(g) << endl;
> >
> >     // Ring 1
> >     OGRGeometryH ring1 = NULL;
> >     ring1 = OGR_G_GetGeometryRef(g, 0);
> >     cout << "Ring 1: " << OGR_G_GetPointCount(ring1) << endl;
> >
> >     // Ring 2
> >     OGRGeometryH ring2 = NULL;
> >     ring2 = OGR_G_GetGeometryRef(g, 1);
> >     cout << "Ring 2: " << OGR_G_GetPointCount(ring2) << endl;
> >
> >     OGR_G_DestroyGeometry(g);
> >     return 0;
> > }
> > ///////////////////////////////////////////////////////////////
> >
> > Cheers
> >
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From jschwerdt at swbb.de  Thu Mar 22 08:17:38 2007
From: jschwerdt at swbb.de (Joerg Schwerdt)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] No CoordSys line in exported Mif file
Message-ID: <9611829.post@talk.nabble.com>


Hi,

my name is Joerg and I have no experience using GDAL/OGR.

I wrote a program that creates mif/mid files using the ogr_api.h functions.
Everything is working fine
except that there is no CoordSys line in the header of the mif file. 
Unfortunately the MapInfo program
can't read that mif-file.

What can I do to tell OGR to create this line?  (I'm using the C interface -
ogr_api.h)

Thanks a lot,

Joerg
-- 
View this message in context: http://www.nabble.com/No-CoordSys-line-in-exported-Mif-file-tf3446641.html#a9611829
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From hobu at iastate.edu  Thu Mar 22 09:33:25 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <46004E3A.8020602@pobox.com>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<4600375F.8010209@gov.yk.ca> <46004E3A.8020602@pobox.com>
Message-ID: <0933B632-2726-4573-90EB-7191E7907C6D@iastate.edu>

I think we have heard from all members of the PSC now in positive  
support of this proposal.  I reiterate my call for folks to take a  
look at the Trac instance and compare it to our Bugzilla one for any  
import anomalies.

http://trac.osgeo.org/gdal

Unless something major is found that cannot be dealt with in the  
migration scripts, I propose that the actual migration take place  
Saturday morning from 0000 UTC to 0500 UTC.

Howard

From hobu at iastate.edu  Thu Mar 22 09:38:13 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <0933B632-2726-4573-90EB-7191E7907C6D@iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
	<4600375F.8010209@gov.yk.ca> <46004E3A.8020602@pobox.com>
	<0933B632-2726-4573-90EB-7191E7907C6D@iastate.edu>
Message-ID: <3CDA404C-F374-42ED-9921-942F49413810@iastate.edu>

On Mar 22, 2007, at 8:33 AM, Howard Butler wrote:
>
> Unless something major is found that cannot be dealt with in the  
> migration scripts, I propose that the actual migration take place  
> Saturday morning from 0000 UTC to 0500 UTC.

Sorry, *Sunday* morning from 0000 UTC to 0500 UTC.

Howard

From bclay at ball.com  Thu Mar 22 11:01:11 2007
From: bclay at ball.com (Clay, Bruce)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] can not read WMS image
Message-ID: <C482FF98AE985A47B8C982FD429C9E34FEFB47@daytonmsg2k3.AERO.BALL.COM>

I am not sure the right forum to post this problem to since I have not
connected my current code any of the libraries yet.

 

I am writing WMS and WFS classes to retrieve geospatial data and images.
I get the feature data ok and I can receive images ok but I can't open
any of the images after I retrieve them.  I have tried both gif and
jpeg,  both files appear ok in the sense that I can see the GIF87 or
JFIF markers where I expect them to be but neither Paint nor MS image
viewer can read them.

 

Has anyone been successful connecting to a WMS server and pulling images
to save to disk?

 

Do I have to byte swap the data even though the markers appear correct?

 

Does anyone know of a WMS server that supports geotiff images so I can
test against that?

 

If this is not the correct forum could you please suggest a more
appropriate forum.

 

Thanks

 

Bruce

 

 




This message and any enclosures are intended only for the addressee.  Please  
notify the sender by email if you are not the intended recipient.  If you are  
not the intended recipient, you may not use, copy, disclose, or distribute this  
message or its contents or enclosures to any other person and any such actions  
may be unlawful.  Ball reserves the right to monitor and review all messages  
and enclosures sent to or from this email address.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070322/2c4d6205/attachment.html
From bartvde at osgis.nl  Thu Mar 22 11:16:48 2007
From: bartvde at osgis.nl (Bart van den Eijnden (OSGIS))
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] MrSID georeferencing (sdw files)
Message-ID: <35f4b7ddf3deeff6795bb519df505079@145.50.39.11>

Hi list,

did anything ever happen in the GDAL codebase in response to this post about
MrSID georeferencing?

http://lists.maptools.org/pipermail/gdal-dev/2004-November/004547.html

I've got a .sid, .aux and .sdw file, but gdalinfo won't see the right
georeferencing. What to do?

Corner Coordinates:
Upper Left  (      -0.007,     138.882)
Lower Left  (  -0.0069444,  -0.0069444)
Upper Right (     138.882,     138.882)
Lower Right ( 138.8819444,  -0.0069444)
Center      (  69.4375000,  69.4375000)

Best regards,
Bart

--
Bart van den Eijnden
OSGIS, Open Source GIS
http://www.osgis.nl




From warmerdam at pobox.com  Thu Mar 22 11:54:10 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] can not read WMS image
In-Reply-To: <C482FF98AE985A47B8C982FD429C9E34FEFB47@daytonmsg2k3.AERO.BALL.COM>
References: <C482FF98AE985A47B8C982FD429C9E34FEFB47@daytonmsg2k3.AERO.BALL.COM>
Message-ID: <4602A6A2.2090707@pobox.com>

Clay, Bruce wrote:
> I am writing WMS and WFS classes to retrieve geospatial data and 
> images.  I get the feature data ok and I can receive images ok but I 
> can?t open any of the images after I retrieve them.  I have tried both 
> gif and jpeg,  both files appear ok in the sense that I can see the 
> GIF87 or JFIF markers where I expect them to be but neither Paint nor MS 
> image viewer can read them.
> 
> Has anyone been successful connecting to a WMS server and pulling images 
> to save to disk?

Bruce,

Yes, I do this fairly routinely.

> Do I have to byte swap the data even though the markers appear correct?

No.

> Does anyone know of a WMS server that supports geotiff images so I can 
> test against that?

The server with this capabilities url supports returning image/tiff (GeoTIFF).

http://maps.gdal.org/cgi-bin/mapserv_landsat?SERVICE=WMS&VERSION=1.1.1&REQUEST=GetCapabilities

> If this is not the correct forum could you please suggest a more 
> appropriate forum.

For general WMS developer type questions, you might consider this mailing
list:

   http://lists.eogeo.org/mailman/listinfo/wms-dev

But I think your problems may relate to the specific technology and
techniques you are using.  You likely won't get much help without more
details, and perhaps attaching a smallishish example of a file you get
back that seems to be corrupt.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Mar 22 12:04:19 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] No CoordSys line in exported Mif file
In-Reply-To: <9611829.post@talk.nabble.com>
References: <9611829.post@talk.nabble.com>
Message-ID: <4602A903.1040100@pobox.com>

Joerg Schwerdt wrote:
> Hi,
> 
> my name is Joerg and I have no experience using GDAL/OGR.
> 
> I wrote a program that creates mif/mid files using the ogr_api.h functions.
> Everything is working fine
> except that there is no CoordSys line in the header of the mif file. 
> Unfortunately the MapInfo program
> can't read that mif-file.
> 
> What can I do to tell OGR to create this line?  (I'm using the C interface -
> ogr_api.h)

Joerg,

You should be able to pass an OGRSpatialReferenceH to OGR_DS_CreateLayer()
containing your coordinate system, and then OGR/MITAB will write out a
corresponding CoordSys line in the file.

You could create a WGS84 coordinate system object like this:

     OGRSpatialReferenceH hSRS;

     hSRS = OSRNewSpatialReference(NULL);
     OSRSetFromUserInput( hSRS, "WGS84" );
     ... create layer ...
     OSRDestroySpatialReference( hSRS );

Note that you will need to include ogr_srs_api.h.  You might also find the
following tutorial instructive, though it is focused on the C++ version of
the API:

   http://www.gdal.org/ogr/osr_tutorial.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Mar 22 12:11:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <f3b73b7d0703220346r20734eb4r8f210b5bcb51f5@mail.gmail.com>
References: <4601A3DA.4050409@perkins.net> <4601C1B0.2000802@perkins.net>
	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>
	<4601EECA.8000907@perkins.net> <46020E06.2020809@pobox.com>
	<46021B87.1040808@perkins.net> <46021C85.1050502@pobox.com>
	<46021E7F.9080109@perkins.net> <46022624.5000500@loskot.net>
	<46022AEC.4000809@perkins.net>
	<f3b73b7d0703220346r20734eb4r8f210b5bcb51f5@mail.gmail.com>
Message-ID: <4602AABA.7070604@pobox.com>

Tamas Szekeres wrote:
> Hi Folks,
> 
> It would be a significant effort to discover which functionality
> cannot be treated this way. For example it doesn't make too much sense
> to support IsPointOnSurface on a Geometry class.
> Sooner or later we should harmonize the C++ and the SWIG API or
> support a separate documentation for the SWIG interface. Otherwise the
> user will always search for specific methods described at the C++
> documentation but missing from the SWIG interface.

Tamas,

I would agree that at the least we need to document the C API in an
accessable manner.  Mateusz, please add this to your TODO list, and chat
with me when you are ready to start so we can ensure it is findable.

Believe it or not, for many purposes I prefer the OGR C API for geometry
due to the more generalized model for accessing points and children.  For
the GMT vector format driver I have recently committed in trunk I use the
C API internally for decomposing geometries for writing to the file since
I don't have to fool around with a lot of casting to specific types.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From jschwerdt at swbb.de  Thu Mar 22 13:07:50 2007
From: jschwerdt at swbb.de (Joerg Schwerdt)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] No CoordSys line in exported Mif file
In-Reply-To: <4602A903.1040100@pobox.com>
References: <9611829.post@talk.nabble.com> <4602A903.1040100@pobox.com>
Message-ID: <9619548.post@talk.nabble.com>


Frank,

thanks a lot for your answer.  

Now I have the problem that the functions OSRNewSpatialReference and
OSRDestroySpatialReference
are not included in my gdal_fw.dll.  A call to those functions results in an
error.

The dependency walker shows the functions as _OSRNewSpatialReference@4 and 
_OSRDestroySpatialReference@4 and I don't know what this means.
Some other OSR functions are without "_" and without "@..." like
OSRSetWellKnownGeogCS.

I'm using FWTools122.

Best regards,

Joerg
-- 
View this message in context: http://www.nabble.com/No-CoordSys-line-in-exported-Mif-file-tf3446641.html#a9619548
Sent from the GDAL - Dev mailing list archive at Nabble.com.


From mateusz at loskot.net  Thu Mar 22 14:21:13 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <f3b73b7d0703220346r20734eb4r8f210b5bcb51f5@mail.gmail.com>
References: <4601A3DA.4050409@perkins.net>
	<4601C1B0.2000802@perkins.net>	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>	<4601EECA.8000907@perkins.net>
	<46020E06.2020809@pobox.com>	<46021B87.1040808@perkins.net>
	<46021C85.1050502@pobox.com>	<46021E7F.9080109@perkins.net>
	<46022624.5000500@loskot.net>	<46022AEC.4000809@perkins.net>
	<f3b73b7d0703220346r20734eb4r8f210b5bcb51f5@mail.gmail.com>
Message-ID: <4602C919.80203@loskot.net>

Tamas Szekeres wrote:
> Sooner or later we should harmonize the C++ and the SWIG API or 
> support a separate documentation for the SWIG interface. Otherwise
> the user will always search for specific methods described at the C++
>  documentation but missing from the SWIG interface.

Tamas,

IMO, we should extend the existing documentation.
I believe it's time to document GDAL/OGR API in more generic way,
and for every C API function, there should be a reference or note about
equivalent of that function in SWIG bingings.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Thu Mar 22 14:22:18 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: C# Geometry Classes?
In-Reply-To: <4602AABA.7070604@pobox.com>
References: <4601A3DA.4050409@perkins.net>
	<4601C1B0.2000802@perkins.net>	<f3b73b7d0703211657y4e621a6bsc08100510aca2add@mail.gmail.com>	<4601EECA.8000907@perkins.net>
	<46020E06.2020809@pobox.com>	<46021B87.1040808@perkins.net>
	<46021C85.1050502@pobox.com>	<46021E7F.9080109@perkins.net>
	<46022624.5000500@loskot.net>	<46022AEC.4000809@perkins.net>	<f3b73b7d0703220346r20734eb4r8f210b5bcb51f5@mail.gmail.com>
	<4602AABA.7070604@pobox.com>
Message-ID: <4602C95A.4000500@loskot.net>

Frank Warmerdam wrote:
> Tamas Szekeres wrote:
>> Hi Folks,
>>
>> It would be a significant effort to discover which functionality
>> cannot be treated this way. For example it doesn't make too much sense
>> to support IsPointOnSurface on a Geometry class.
>> Sooner or later we should harmonize the C++ and the SWIG API or
>> support a separate documentation for the SWIG interface. Otherwise the
>> user will always search for specific methods described at the C++
>> documentation but missing from the SWIG interface.
> 
> Tamas,
> 
> I would agree that at the least we need to document the C API in an
> accessable manner.

Yes, I also think it's a good idea.

> Mateusz, please add this to your TODO list, and chat
> with me when you are ready to start so we can ensure it is findable.

OK.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From jack.l.riley at gmail.com  Thu Mar 22 16:00:19 2007
From: jack.l.riley at gmail.com (Jack Riley)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: ogr geometry intersection
In-Reply-To: <4e9061690703211356s507c3523xaf34cd1c9ce8c46d@mail.gmail.com>
References: <4e9061690703211356s507c3523xaf34cd1c9ce8c46d@mail.gmail.com>
Message-ID: <4e9061690703221300h40a915fvefe1e5b4487c4f15@mail.gmail.com>

It appears that the FWTools v1.0.9-and-earlier TopologyException is limited
to situations where one of the two polynomials being tested for
Intersection() is completely within the other.  In other words, the
Intersection() test in "old" versions of FWTools/GDAL works--and works
"fast"--if the two polynomials actually intersect.  So, my workaround is to
use FWTools v1.0.9 (or earlier) and condition any call to Intersection()
with Disjoint() or Contains() test(s).  The question remaining is:  can
FWTools v1.1.0+/GDAL revert back to the use of the "old" and "fast"
Intersection() code, adding in a test of Disjoint()/Contains() to circumvent
the TopologyException?

On 3/21/07, Jack Riley <jack.l.riley@gmail.com> wrote:
>
> Hello,
>
> I recently upgraded my FWTools (Win32) installation from v1.0.5 to v1.2.2.
> Using v1.0.5, ogr geometry intersections would occasionally raise a
> TopologyException in my Python application; e.g.:
>
> Original exception: TopologyException: Area of intersection result is
> bigger then minimum area between input geometries
> Trying with Common bits remover.
> CBR: TopologyException: Area of intersection result is bigger then minimum
> area between input geometries
> Trying with precision 25
> Reduced with precision (25): TopologyException: no outgoing dirEdge found
> - 71.6 40.88 40.8829
> Trying with precision 24
> Reduced with precision (24): TopologyException: no outgoing dirEdge found
> -71.5833 40.875 40.8829
> Trying with precision 23
>
> After updating to FWTools v1.2.2 (gdal 1.4.0+svn to Feb. 22, 2007), I no
> longer see TopologyExceptions from polygyon intersections in my Python
> application -- but the performance has gone way down.  Evaluation of FWTools
> versions between 1.0.5 and 1.2.2 reveals that the TopologyException fix +
> slow-down was introduced in v1.1.0:
>
> P1.Intersection(P2), where P1=rectangle and P2=1860-point polygon
> v1.0.9:  ~0.01 seconds
> v1.1.0:  ~10.00 seconds (1000x slower)
>
> See attached sample program.
>
> Is this a bug in GDAL, FWTools (Python wrapper), or an underlying library
> (GEOS)?
> Any ideas re: the slow-down and possible fix are appreciated.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070322/80970338/attachment.html
From woodbri at swoodbridge.com  Thu Mar 22 22:05:02 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Geo::GDAL Question
Message-ID: <460335CE.4000309@swoodbridge.com>

I just found Geo::GDAL, this is very cool.
Does anyone know if it is possible to get these valuse returned via this 
package?

Origin = (-117.750000000000000,34.000000000000000)
Pixel Size = (0.000010024716912,-0.000010024716912)
Corner Coordinates:
Upper Left  (-117.7500000,  34.0000000) (117d45'0.00"W, 34d 0'0.00"N)
Lower Left  (-117.7500000,  33.9374959) (117d45'0.00"W, 33d56'14.99"N)
Upper Right (-117.6874959,  34.0000000) (117d41'14.99"W, 34d 0'0.00"N)
Lower Right (-117.6874959,  33.9374959) (117d41'14.99"W, 33d56'14.99"N)
Center      (-117.7187479,  33.9687479) (117d43'7.49"W, 33d58'7.49"N)

This would be very useful for writing automation scripts, and would much 
easier than parsing gdalinfo output via perl :)

Thanks,
   -Steve

From woodbri at swoodbridge.com  Thu Mar 22 22:25:56 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Geo::GDAL how to close a file?
Message-ID: <46033AB4.20905@swoodbridge.com>

Another question is How should I close a file opened like:

$dataset = Geo::GDAL::Open('filename');

Anything I need to do to dispose of objects I have accessed?

Here is a little example of doing something like gdalinfo:

#!/usr/bin/perl -w
use strict;
use Geo::GDAL;

my $f = shift @ARGV || die "gdal-test file\n";

my $dataset = Geo::GDAL::Open($f);

print "RasterXSize=".$dataset->{RasterXSize}."\n";
print "RasterYSize=".$dataset->{RasterYSize}."\n";
print "RasterCount=".$dataset->{RasterCount}."\n";
print "GetProjection=".$dataset->GetProjection."\n";
my $driver = $dataset->GetDriver;
print "driver->ShortName=".$driver->{ShortName}."\n";
for my $i (1..$dataset->{RasterCount}) {
     my $band = $dataset->GetRasterBand($i);
     print "  band[$i]->XSize=".$band->{XSize}."\n";
     print "  band[$i]->YSize=".$band->{YSize}."\n";
     print "  band[$i]->DataType=".$band->{DataType}."\n";
     print " 
GetRasterColorInterpretation=".$band->GetRasterColorInterpretation."\n";
     print "  GetNoDataValue=".$band->GetNoDataValue."\n";
     print "  GetMinimum=".$band->GetMinimum."\n";
     print "  GetMaximum=".$band->GetMaximum."\n";
     print "  GetOffset=".$band->GetOffset."\n";
     print "  GetScale=".$band->GetScale."\n";
     print "  GetOverviewCount=".$band->GetOverviewCount."\n";
     print "  Checksum=".$band->Checksum."\n";
     print " 
ComputeRasterMinMax=".join(",",@{$band->ComputeRasterMinMax})."\n";
}

From e.pebesma at geo.uu.nl  Fri Mar 23 05:21:36 2007
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] OGR PostGIS driver problems on x86_64
Message-ID: <46039C20.4000005@geo.uu.nl>

Hi,

I'm running debian testing ("etch") on a x86_64 architecture; when I run

ogr2ogr -overwrite -f "PostgreSQL" "PG:dbname=postgis" meuse.shp

it gives me a segmentation fault. A stack trace is

0x00002aaacf4b25b0 in strlen () from /lib/libc.so.6
(gdb) bt
#0  0x00002aaacf4b25b0 in strlen () from /lib/libc.so.6
#1  0x00002aaacf4844bc in vfprintf () from /lib/libc.so.6
#2  0x00002aaacf4a472a in vsnprintf () from /lib/libc.so.6
#3  0x00002aaacd6af5e5 in CPLString::vPrintf () from
/usr/lib/libgdal1.3.2.so.1
#4  0x00002aaacd6af80c in CPLString::Printf () from
/usr/lib/libgdal1.3.2.so.1
#5  0x00002aaacd7565d7 in OGRPGTableLayer::CreateFeatureViaInsert ()
from /usr/lib/libgdal1.3.2.so.1
#6  0x0000000000401b83 in ?? ()
#7  0x00000000004023f5 in ?? ()
#8  0x00002aaacf45c4ca in __libc_start_main () from /lib/libc.so.6
#9  0x00000000004017aa in ?? ()
#10 0x00007fffdd741158 in ?? ()
#11 0x0000000000000000 in ?? ()

when I repeat this on an otherwise identical i686 (32 bits)
architecture, no problems. I found this out when trying to write PostGIS 
data directly from R, using the rgdal interface.

Is this a known problem? How can I (help to) resolve this?

A related but less serious issue is that the layer name is ignored: on 
the 32 bits architecture

ogr2ogr -overwrite -f "PostgreSQL" "PG:dbname=postgis" meuse.shp mmm

will not add a table; after removing mmm table meuse will be written,
after renaming the shapefile into mmm.shp (etc) mmm will be written. A
layer name different from the shapefile name causes it not to be
written; no layer name will result in the shapefile name being written. 
Is this documented behaviour?
--
Edzer



From mateusz at loskot.net  Fri Mar 23 05:55:19 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] OGR PostGIS driver problems on x86_64
In-Reply-To: <46039C20.4000005@geo.uu.nl>
References: <46039C20.4000005@geo.uu.nl>
Message-ID: <4603A407.80803@loskot.net>

Edzer J. Pebesma wrote:
> 
> I'm running debian testing ("etch") on a x86_64 architecture; when I
> run
> 
> ogr2ogr -overwrite -f "PostgreSQL" "PG:dbname=postgis" meuse.shp
> 
> it gives me a segmentation fault. [...] Is this a known problem? How
> can I (help to) resolve this?

Edzer,

I don't suppose it's a known problem.

Please, could you submit a bug report about this problem:

http://bugzilla.remotesensing.org/enter_bug.cgi?product=GDAL&component=OGR_SF

> A related but less serious issue is that the layer name is ignored:
> on the 32 bits architecture
> 
> ogr2ogr -overwrite -f "PostgreSQL" "PG:dbname=postgis" meuse.shp mmm
> 
> will not add a table; after removing mmm table meuse will be written,
>  after renaming the shapefile into mmm.shp (etc) mmm will be written.
> A layer name different from the shapefile name causes it not to be 
> written; no layer name will result in the shapefile name being
> written. Is this documented behaviour?

Are you trying to overwrite layer name from "meuse" to "mmm"
and you expect to achieve this by specifying layer name after
meuse.shp file ?

If my diagnosis is correct, then you are misusing the ogr2ogr utility.
Please, refer to the manual:

http://gdal.org/ogr/ogr2ogr.html

and read about -nln option.

Also, in the PostgreSQL driver manual:

http://gdal.org/ogr/drv_pg.html

you can find example showing how to import data with custom layer name
specified, still using -nln option.

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From e.pebesma at geo.uu.nl  Fri Mar 23 08:22:37 2007
From: e.pebesma at geo.uu.nl (Edzer J. Pebesma)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] OGR PostGIS driver problems on x86_64
In-Reply-To: <4603A407.80803@loskot.net>
References: <46039C20.4000005@geo.uu.nl> <4603A407.80803@loskot.net>
Message-ID: <4603C68D.3000306@geo.uu.nl>

Mateusz,

I tried to reproduce the bug with a fresh rgdal/ogr install from 
subversion/trunc, and couldn't. Apparently it has been resolved since 
1.3.2, which debian etch uses.

thanks for the explanation about my misuse of ogr2ogr; I will read 
harder next time!
--
Edzer

Mateusz Loskot wrote:
> Edzer J. Pebesma wrote:
>   
>> I'm running debian testing ("etch") on a x86_64 architecture; when I
>> run
>>
>> ogr2ogr -overwrite -f "PostgreSQL" "PG:dbname=postgis" meuse.shp
>>
>> it gives me a segmentation fault. [...] Is this a known problem? How
>> can I (help to) resolve this?
>>     
>
> Edzer,
>
> I don't suppose it's a known problem.
>
> Please, could you submit a bug report about this problem:
>
> http://bugzilla.remotesensing.org/enter_bug.cgi?product=GDAL&component=OGR_SF
>
>   
>> A related but less serious issue is that the layer name is ignored:
>> on the 32 bits architecture
>>
>> ogr2ogr -overwrite -f "PostgreSQL" "PG:dbname=postgis" meuse.shp mmm
>>
>> will not add a table; after removing mmm table meuse will be written,
>>  after renaming the shapefile into mmm.shp (etc) mmm will be written.
>> A layer name different from the shapefile name causes it not to be 
>> written; no layer name will result in the shapefile name being
>> written. Is this documented behaviour?
>>     
>
> Are you trying to overwrite layer name from "meuse" to "mmm"
> and you expect to achieve this by specifying layer name after
> meuse.shp file ?
>
> If my diagnosis is correct, then you are misusing the ogr2ogr utility.
> Please, refer to the manual:
>
> http://gdal.org/ogr/ogr2ogr.html
>
> and read about -nln option.
>
> Also, in the PostgreSQL driver manual:
>
> http://gdal.org/ogr/drv_pg.html
>
> you can find example showing how to import data with custom layer name
> specified, still using -nln option.
>
> Cheers
>   


From todd.jellett at caris.com  Fri Mar 23 08:25:22 2007
From: todd.jellett at caris.com (Todd Jellett)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: ogr geometry intersection
In-Reply-To: <4e9061690703221300h40a915fvefe1e5b4487c4f15@mail.gmail.com>
References: <4e9061690703211356s507c3523xaf34cd1c9ce8c46d@mail.gmail.com>
	<4e9061690703221300h40a915fvefe1e5b4487c4f15@mail.gmail.com>
Message-ID: <4603C732.4090307@caris.com>

Hi Jack,

You have to be very careful when mixing "tests" (ie the binary 
predicates disjoint, contains, ...) with "constructions" (the set 
theoreticals intersection, union, ...). This will work most of the time 
but not always. This is because gdal's geometry backend is geos and geos 
uses infinite precision for the tests and a finite precision for 
constructions. This means that there will be cases where disjoint() and 
friends returns true but if you go ahead and do the intersection, you 
will find that the intersection is finite (non-NULL) and valid.

This discontinuity between the tests and constructions makes it very 
difficult to implement mission critical GIS software (you can read 
engineering for $$$ from this) with geos. This is because whenever you 
have a construct like:

if ( g1.disjoint( g2 ) == false )  // or any of the other tests
{
   g3 = g1.intersection( g2 );
    ...
}

there is a possibility that the program flow will fail the test (the if 
clause) and not do an intersection when one should be done and anytime 
the program flow fails to execute a block of code because the the test 
in the if clause fails, this is a bug (IMHO).

The cases that generate this kind of failure come up in (our) GIS 
software more frequently than you would think. We had to re-write our 
own (inhouse) geometries (with tests equal to constructions) several 
years ago (2000).

Todd

Jack Riley wrote:
> It appears that the FWTools v1.0.9-and-earlier TopologyException is 
> limited to situations where one of the two polynomials being tested 
> for Intersection() is completely within the other.  In other words, 
> the Intersection() test in "old" versions of FWTools/GDAL works--and 
> works "fast"--if the two polynomials actually intersect.  So, my 
> workaround is to use FWTools v1.0.9 (or earlier) and condition any 
> call to Intersection() with Disjoint() or Contains() test(s).  The 
> question remaining is:  can FWTools v1.1.0+/GDAL revert back to the 
> use of the "old" and "fast" Intersection() code, adding in a test of 
> Disjoint()/Contains() to circumvent the TopologyException?
>
> On 3/21/07, *Jack Riley* <jack.l.riley@gmail.com 
> <mailto:jack.l.riley@gmail.com>> wrote:
>
>     Hello,
>
>     I recently upgraded my FWTools (Win32) installation from v1.0.5 to
>     v1.2.2.  Using v1.0.5, ogr geometry intersections would
>     occasionally raise a TopologyException in my Python application; e.g.:
>
>     Original exception: TopologyException: Area of intersection result
>     is bigger then minimum area between input geometries
>     Trying with Common bits remover.
>     CBR: TopologyException: Area of intersection result is bigger then
>     minimum area between input geometries
>     Trying with precision 25
>     Reduced with precision (25): TopologyException: no outgoing
>     dirEdge found - 71.6 40.88 40.8829
>     Trying with precision 24
>     Reduced with precision (24): TopologyException: no outgoing
>     dirEdge found -71.5833 40.875 40.8829
>     Trying with precision 23
>
>     After updating to FWTools v1.2.2 (gdal 1.4.0+svn to Feb. 22,
>     2007), I no longer see TopologyExceptions from polygyon
>     intersections in my Python application -- but the performance has
>     gone way down.  Evaluation of FWTools versions between 1.0.5 and
>     1.2.2 reveals that the TopologyException fix + slow-down was
>     introduced in v1.1.0:
>
>     P1.Intersection(P2), where P1=rectangle and P2=1860-point polygon
>     v1.0.9:  ~0.01 seconds
>     v1.1.0:  ~10.00 seconds (1000x slower)
>
>     See attached sample program.
>
>     Is this a bug in GDAL, FWTools (Python wrapper), or an underlying
>     library (GEOS)?
>     Any ideas re: the slow-down and possible fix are appreciated.
>
>
> ------------------------------------------------------------------------
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From huajun_zhang at usgs.gov  Fri Mar 23 12:05:57 2007
From: huajun_zhang at usgs.gov (Huajun Zhang)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: gdalwarp error
In-Reply-To: <46018E1C.9050405@pobox.com>
Message-ID: <OF1C05688A.DBF12E5B-ON852572A7.005835AC-852572A7.005870C6@usgs.gov>

Thanks, Frank. It works now. But the cellsize of the image was changed a 
little bit (e.g. cellsize of the original image is 14.25, the cellsize is 
changed to 14.33 after gdalwarp). Do you have any idea what the problem 
is?

Thanks

Huajun 




Frank Warmerdam <warmerdam@pobox.com> 
03/21/2007 03:57 PM

To
Huajun Zhang <huajun_zhang@usgs.gov>
cc
gdal-dev@lists.maptools.org
Subject
Re: gdalwarp error






Huajun Zhang wrote:
> 
> Thank you very much, Frank. I met another problem when I use gdalwarp:
> 
> gdalwarp -t_srs '+proj=aea +lat_1=29.50 +lat_2=45.50 +lat_0=23.00 
> +lon_0=-96.00 +x_0=0.000 +y_0=0.000 +ellps=GRS80 +units=m +datum=NAD83' 
> abl.sid abl.img
> 
> I got the error message:
> 
> ERROR 1: Translating source or target SRS failed: '+proj=aea
> 
> I tried to use C API, I followed the gdalwarp API tutorial, the 
> reprojection does not get the correct result either:
> 
>  OGRSpatialReference oSRS;
> 
>  oSRS.SetProjCS( "Albers Conical Equal Area" );
>  oSRS.SetACEA( 29.5, 45.5, 23.0, -96.0, 0.0, 0.0);
>  oSRS.SetWellKnownGeogCS( "NAD83" );
>  oSRS.exportToWkt( &pszDstWKT );
> 
> Do you have any idea?

Huajun,

The error message looks like the issue has to do with quoting.  Are you by
any chance on windows?  If so, you will need to use double quotes to hold
an argument to -t_srs together.

I'm not clear in what way the C API code failed for you.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, 
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070323/ddd05b44/attachment.html
From warmerdam at pobox.com  Fri Mar 23 12:54:29 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: gdalwarp error
In-Reply-To: <OF1C05688A.DBF12E5B-ON852572A7.005835AC-852572A7.005870C6@usgs.gov>
References: <OF1C05688A.DBF12E5B-ON852572A7.005835AC-852572A7.005870C6@usgs.gov>
Message-ID: <46040645.1020604@pobox.com>

Huajun Zhang wrote:
> 
> Thanks, Frank. It works now. But the cellsize of the image was changed a 
> little bit (e.g. cellsize of the original image is 14.25, the cellsize 
> is  changed to 14.33 after gdalwarp). Do you have any idea what the 
> problem is?

Huajun,

When reprojecting an image, gdalwarp needs to try and pick an apparent
appropriate pixel size in the new image which can vary a bit from the old
one.

If you want to stay with the same pixel size you can specify it explicitly
when running gdalwarp by adding "-tr 14.25 14.25" to the commandline.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From neteler at itc.it  Fri Mar 23 13:19:27 2007
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: gdalwarp error
In-Reply-To: <46040645.1020604@pobox.com>
References: <OF1C05688A.DBF12E5B-ON852572A7.005835AC-852572A7.005870C6@usgs.gov>
	<46040645.1020604@pobox.com>
Message-ID: <20070323171926.GB5928@bartok.itc.it>

On Fri, Mar 23, 2007 at 12:54:29PM -0400, Frank Warmerdam wrote:
> Huajun Zhang wrote:
> >
> >Thanks, Frank. It works now. But the cellsize of the image was changed a 
> >little bit (e.g. cellsize of the original image is 14.25, the cellsize 
> >is  changed to 14.33 after gdalwarp). Do you have any idea what the 
> >problem is?
> 
> Huajun,
> 
> When reprojecting an image, gdalwarp needs to try and pick an apparent
> appropriate pixel size in the new image which can vary a bit from the old
> one.
> 
> If you want to stay with the same pixel size you can specify it explicitly
> when running gdalwarp by adding "-tr 14.25 14.25" to the commandline.

Hi,

there is a related wish
http://bugzilla.remotesensing.org/show_bug.cgi?id=511
http://trac.osgeo.org/gdal/ticket/511

Best,
Markus

------------------
ITC -> dall'1 marzo 2007 Fondazione Bruno Kessler
ITC -> since 1 March 2007 Fondazione Bruno Kessler
------------------

From warmerdam at pobox.com  Fri Mar 23 14:10:51 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Seeking Sample ENVI and ERMapper Datasets
Message-ID: <4604182B.90309@pobox.com>

Folks,

As part of ongoing improvements to GDAL I am seeking sample datasets for
ENVI format files (.hdr files starting with the keyword ENVI), and
ERMapper format files (files with the extension .ers).

Generally speaking it should be sufficient to supply the ascii header
files (the .hdr and .ers files).

In particular, I am interested in files with a diversity of coordinate
systems, and pixel data types.

Please email me back directly, and indicate if provided samples may be
publically redistributed or not.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Fri Mar 23 16:38:43 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] SWIG Additions: OGRFeature.SetField overloads
Message-ID: <f3b73b7d0703231338v2b6d1199t6e4924203fd6739@mail.gmail.com>

Hi All,

I've just added some overloads for the various field types to
eliminate need of the string conversion when setting the non string
field value types. This requirement might be crucial not only for
performance reasons, but for eliminating the conversion discrepancies
like the issue of the locale dependent different floating point
representations.
I suppose all of the bindings have some kind of support to handle
multiple overloads since SetField had already 2 variations before.

If someone will find any kind of strange issues according to this
addition please let me know.
Later on we could add support for the other funky types like settings
IntegerList and Binary values as well.

Best regards,

Tamas

From ari.jolma at tkk.fi  Fri Mar 23 17:11:16 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Geo::GDAL Question
In-Reply-To: <460335CE.4000309@swoodbridge.com>
References: <460335CE.4000309@swoodbridge.com>
Message-ID: <46044274.2090000@tkk.fi>

Stephen Woodbridge kirjoitti:
> I just found Geo::GDAL, this is very cool.
> Does anyone know if it is possible to get these valuse returned via 
> this package?
>
> Origin = (-117.750000000000000,34.000000000000000)
> Pixel Size = (0.000010024716912,-0.000010024716912)
> Corner Coordinates:
> Upper Left  (-117.7500000,  34.0000000) (117d45'0.00"W, 34d 0'0.00"N)
> Lower Left  (-117.7500000,  33.9374959) (117d45'0.00"W, 33d56'14.99"N)
> Upper Right (-117.6874959,  34.0000000) (117d41'14.99"W, 34d 0'0.00"N)
> Lower Right (-117.6874959,  33.9374959) (117d41'14.99"W, 33d56'14.99"N)
> Center      (-117.7187479,  33.9687479) (117d43'7.49"W, 33d58'7.49"N)

You get these from the Geo::GDAL::Dataset: object 
(http://map.hut.fi/doc/Geo-GDAL/html/class_geo_1_1_g_d_a_l_1_1_dataset.html), 
which is the same as GDALDataset class in the C++ API 
(http://www.gdal.org/annotated.html). Check especially the 
GetGeoTransform method.

Regards,

Ari

>
> This would be very useful for writing automation scripts, and would 
> much easier than parsing gdalinfo output via perl :)
>
> Thanks,
>   -Steve
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From ari.jolma at tkk.fi  Fri Mar 23 17:15:42 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Geo::GDAL how to close a file?
In-Reply-To: <46033AB4.20905@swoodbridge.com>
References: <46033AB4.20905@swoodbridge.com>
Message-ID: <4604437E.7030907@tkk.fi>

Stephen Woodbridge kirjoitti:
> Another question is How should I close a file opened like:
>
> $dataset = Geo::GDAL::Open('filename');
>
> Anything I need to do to dispose of objects I have accessed?

They're disposed of automatically as Perl disposes them. Only if you 
create a new dataset you need to be more careful in flushing and closing 
the opened datasets or data sources (in OGR) or layers.

There are some more examples like the one below in the docs (written in 
doxygen and visible at http://map.hut.fi/doc/Geo-GDAL/html/pages.html)

Cheers,

Ari

>
> Here is a little example of doing something like gdalinfo:
>
> #!/usr/bin/perl -w
> use strict;
> use Geo::GDAL;
>
> my $f = shift @ARGV || die "gdal-test file\n";
>
> my $dataset = Geo::GDAL::Open($f);
>
> print "RasterXSize=".$dataset->{RasterXSize}."\n";
> print "RasterYSize=".$dataset->{RasterYSize}."\n";
> print "RasterCount=".$dataset->{RasterCount}."\n";
> print "GetProjection=".$dataset->GetProjection."\n";
> my $driver = $dataset->GetDriver;
> print "driver->ShortName=".$driver->{ShortName}."\n";
> for my $i (1..$dataset->{RasterCount}) {
>     my $band = $dataset->GetRasterBand($i);
>     print "  band[$i]->XSize=".$band->{XSize}."\n";
>     print "  band[$i]->YSize=".$band->{YSize}."\n";
>     print "  band[$i]->DataType=".$band->{DataType}."\n";
>     print " 
> GetRasterColorInterpretation=".$band->GetRasterColorInterpretation."\n";
>     print "  GetNoDataValue=".$band->GetNoDataValue."\n";
>     print "  GetMinimum=".$band->GetMinimum."\n";
>     print "  GetMaximum=".$band->GetMaximum."\n";
>     print "  GetOffset=".$band->GetOffset."\n";
>     print "  GetScale=".$band->GetScale."\n";
>     print "  GetOverviewCount=".$band->GetOverviewCount."\n";
>     print "  Checksum=".$band->Checksum."\n";
>     print " 
> ComputeRasterMinMax=".join(",",@{$band->ComputeRasterMinMax})."\n";
> }
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From dmorissette at mapgears.com  Fri Mar 23 17:27:30 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <0933B632-2726-4573-90EB-7191E7907C6D@iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>	<4600375F.8010209@gov.yk.ca>
	<46004E3A.8020602@pobox.com>
	<0933B632-2726-4573-90EB-7191E7907C6D@iastate.edu>
Message-ID: <46044642.6060303@mapgears.com>

I did a few spot checks on some of my bugs and didn't see any major 
issue. Thanks a lot for taking time to migrate the bug history!

Daniel

Howard Butler wrote:
> I think we have heard from all members of the PSC now in positive 
> support of this proposal.  I reiterate my call for folks to take a look 
> at the Trac instance and compare it to our Bugzilla one for any import 
> anomalies.
> 
> http://trac.osgeo.org/gdal
> 
> Unless something major is found that cannot be dealt with in the 
> migration scripts, I propose that the actual migration take place 
> Saturday morning from 0000 UTC to 0500 UTC.
> 
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Daniel Morissette
http://www.mapgears.com/

From szekerest at gmail.com  Fri Mar 23 19:04:33 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] 
	Support for transforming between pixel/line raster space,
	and projection coordinates space
Message-ID: <f3b73b7d0703231604m41d9b506o44d6f476e1920795@mail.gmail.com>

Hi All,

Would it be acceptable to support a separate class for the
transformation between the pixel/line raster space, and projection
coordinates space? Currently - at the SWIG API - the Dataset
GetGeoTransform / SetGeoTransform operates on a double array with 6
elements containing the affine transformation coefficients. Having an
own GeoTransform quits a lot of
headaches and helps centralizing the code of calculating the xy coordinates
in pixel and in projected space. In general, the interface should be
obvious, clear and self describing.

Having a substantial support on this idea it would be quite an easy to
proceed with and RFC describing the necessary changes to implement
this feature.


Best regards,

Tamas

From sy at perkins.net  Fri Mar 23 19:55:56 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] 	Support for transforming between pixel/line raster
	space,	and projection coordinates space
In-Reply-To: <f3b73b7d0703231604m41d9b506o44d6f476e1920795@mail.gmail.com>
References: <f3b73b7d0703231604m41d9b506o44d6f476e1920795@mail.gmail.com>
Message-ID: <4604690C.2090709@perkins.net>

If I understand, you're proposing elevating the GeoTransform to the 
status of a full class instead of just an array of doubles? And then 
adding methods to do useful things like convert from pixel/line to 
geocoords?

I wouldn't have any personal objections to that, though it's not too 
hard to create your own class that wraps the array and adds the 
functionality you need.

Is this something that would be added at the SWIG interface level? i.e. 
the C interface would be unchanged? For all SWIG languages or just C++? 
I imagine there's quite a lot of SWIG code out there that expects an 
array of numbers, so one would have to come up with a new method name, I 
would think.

Cheers,

Sy


Tamas Szekeres wrote:
> Hi All,
>
> Would it be acceptable to support a separate class for the
> transformation between the pixel/line raster space, and projection
> coordinates space? Currently - at the SWIG API - the Dataset
> GetGeoTransform / SetGeoTransform operates on a double array with 6
> elements containing the affine transformation coefficients. Having an
> own GeoTransform quits a lot of
> headaches and helps centralizing the code of calculating the xy 
> coordinates
> in pixel and in projected space. In general, the interface should be
> obvious, clear and self describing.
>
> Having a substantial support on this idea it would be quite an easy to
> proceed with and RFC describing the necessary changes to implement
> this feature.
>
>
> Best regards,
>
> Tamas
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


From mateusz at loskot.net  Sat Mar 24 01:18:32 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Motion: Migrate from Bugzilla to Trac
In-Reply-To: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
References: <4C20A171-AECF-447A-8FA3-3ECB288B709B@iastate.edu>
Message-ID: <4604B4A8.9070008@loskot.net>

Howard Butler wrote:
> I have been tweaking the migration scripts to attempt to get things 
> behaving how we'd like.  I think I have things about as far as we can
> go in any sort of automated way.

Hobu,

Everything looks great to me and there are no messed
reports or comments.
Big thanks for your effort on this !!!

> I would like folks to look over the Ticket migration and compare to
> some equivalents in Bugzilla and confirm that things are behaving as
> they should.  If you find something, please email the ticket id(s) to
> me, and I will collate them and see what we might be able to do as
> part of the automated migration.

I reviewed ~25 of my bugs and did Trac/Bugzilla comparison.
Everything is OK.
There are some recent comments missing, but as you
said the Trac is 2 weeks old, so I'm not going to report it as a
problem.

Thank you!

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From mateusz at loskot.net  Sat Mar 24 20:45:10 2007
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Building SWIG Java with Visual C++ 8.0
Message-ID: <4605C616.6060009@loskot.net>

Hi,

I tried to build SWIG Java bindings using Visual C++ 8.0 compiler
and I got errors from javac about missing symbols.

Here is detailed log of all my steps I took in the gdal\swig directory:

http://mateusz.loskot.net/tmp/gdal-java-build.txt

Am I doing anything wrong or the SWIG Java is incomplete in any way?

I use following tools:

SWIG 1.3.31
Sun JDK 1.6.0
Ant 1.7.0

Cheers
-- 
Mateusz Loskot
http://mateusz.loskot.net

From seth at pricepages.org  Sat Mar 24 23:37:44 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdaladdo throwing errors
Message-ID: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>

I'm having a problem with gdaladdo, I'm afraid we don't seem to be  
getting along. It's very sensitive about the levels specified. For  
example, if I specify "2 4 6 12 24 48 96" for a 21600x21600px image  
it works, but if I specify "2 4 8 16 32" it throws many errors.

I can normally find a set of levels that works via guessing, but that  
isn't going to work any longer. Does anyone have any idea how I can  
work around these errors? I haven't been able to find a pattern.  
Fixing the problem would be better.

You can download the file that I've been using for a test here:
http://pricepages.org/temp/N048W123_x1_GLC.tif.gz  (19MB)

I think you can ignore the "StripByteCounts" warnings. I'm fairly  
sure that they are related to this bug. (It would be nice if someone  
could have a look at that also, but it's not urgent.):
http://bugzilla.remotesensing.org/show_bug.cgi?id=1483

Here are some examples of the behavior that I'm talking about:

$ /usr/local/bin/gdal_translate test.tif test.2.tif
Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,  
ignoring and calculating from imagelength
Input file size is 21600, 21600
0...10...20...30...40...50...60...70...80...90...100 - done.
Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,  
ignoring and calculating from imagelength

$ /usr/local/bin/gdaladdo -r nearest test.2.tif  2 4 8 16 32
0.Warning 1: TIFFReadDirectory:test.2.tif: Wrong "StripByteCounts"  
field, ignoring and calculating from imagelength
Warning 1: TIFFReadDirectory:test.2.tif: Wrong "StripByteCounts"  
field, ignoring and calculating from imagelength
ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 2
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 2
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.
[....]
$ ./gdaladdo -r nearest test.tif 2 4 6 12 24 48 96
Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,  
ignoring and calculating from imagelength
0...10...20...30...40...50...60...70...80...90...100 - done.

Any ideas on where to proceed next with this?

Thanks for any help,
Seth

PS.
Again, fresh image with --debug on:
$ /usr/local/bin/gdaladdo --debug on -r nearest test.tif  2 4 8 16 32
GTiff: Opened 10800x10800 overview.

GTiff: Opened 5400x5400 overview.

GTiff: Opened 3600x3600 overview.

GTiff: Opened 1800x1800 overview.

GTiff: Opened 900x900 overview.

GTiff: Opened 450x450 overview.

GTiff: Opened 225x225 overview.

GDAL: GDALOpen(test.tif) succeeds as GTiff.

0Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
field, ignoring and calculating from imagelength
GDAL: Potential thrashing on band 1 of test.tif.
Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,  
ignoring and calculating from imagelength
ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,  
ignoring and calculating from imagelength
ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.

ERROR 1: IReadBlock failed at X offset 0, Y offset 0
ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 0
Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts" field,  
ignoring and calculating from imagelength
ERROR 1: test.tif:DumpModeDecode: Not enough data for scanline 0
ERROR 1: TIFFReadEncodedTile() failed.
[...]

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070324/699a0714/attachment.html
From woklist at kyngchaos.com  Sun Mar 25 02:24:58 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdaladdo throwing errors
In-Reply-To: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
References: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
Message-ID: <78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>

I have a very similar bug for this, which was fixed - the problem is  
actually in libtiff (your errors are slightly different):

http://bugzilla.remotesensing.org/show_bug.cgi?id=1204

You need to build libtiff from CVS to get this fix.

I see that you are on OSX (from your bug report) - have you tried my  
framework builds?  I ran my gdal_translate, tiffcp and gdaladdo on  
your huge test tiff with no errors.

On Mar 24, 2007, at 10:37 PM, Seth Price wrote:

> I'm having a problem with gdaladdo, I'm afraid we don't seem to be  
> getting along. It's very sensitive about the levels specified. For  
> example, if I specify "2 4 6 12 24 48 96" for a 21600x21600px image  
> it works, but if I specify "2 4 8 16 32" it throws many errors.
>
> I can normally find a set of levels that works via guessing, but  
> that isn't going to work any longer. Does anyone have any idea how  
> I can work around these errors? I haven't been able to find a  
> pattern. Fixing the problem would be better.
>
> You can download the file that I've been using for a test here:
> http://pricepages.org/temp/N048W123_x1_GLC.tif.gz  (19MB)
>
> I think you can ignore the "StripByteCounts" warnings. I'm fairly  
> sure that they are related to this bug. (It would be nice if  
> someone could have a look at that also, but it's not urgent.):
> http://bugzilla.remotesensing.org/show_bug.cgi?id=1483
>
> Here are some examples of the behavior that I'm talking about:
>
> $ /usr/local/bin/gdal_translate test.tif test.2.tif
> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
> field, ignoring and calculating from imagelength
> Input file size is 21600, 21600
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
> field, ignoring and calculating from imagelength
>
> $ /usr/local/bin/gdaladdo -r nearest test.2.tif  2 4 8 16 32
> 0.Warning 1: TIFFReadDirectory:test.2.tif: Wrong "StripByteCounts"  
> field, ignoring and calculating from imagelength
> Warning 1: TIFFReadDirectory:test.2.tif: Wrong "StripByteCounts"  
> field, ignoring and calculating from imagelength
> ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
> ERROR 1: TIFFReadEncodedTile() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 2
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
> ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
> ERROR 1: TIFFReadEncodedTile() failed.
>
> ERROR 1: IReadBlock failed at X offset 0, Y offset 2
> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
> ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
> ERROR 1: TIFFReadEncodedTile() failed.
> [....]
> $ ./gdaladdo -r nearest test.tif 2 4 6 12 24 48 96
> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
> field, ignoring and calculating from imagelength
> 0...10...20...30...40...50...60...70...80...90...100 - done.
>
> Any ideas on where to proceed next with this?
>
> Thanks for any help,
> Seth
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"Those people who most want to rule people are, ipso-facto, those  
least suited to do it."

- A rule of the universe, from the HitchHiker's Guide to the Galaxy



From aaime at openplans.org  Sun Mar 25 06:03:14 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Building SWIG Java with Visual C++ 8.0
In-Reply-To: <4605C616.6060009@loskot.net>
References: <4605C616.6060009@loskot.net>
Message-ID: <460648E2.5060605@openplans.org>

Mateusz Loskot ha scritto:
> Hi,
> 
> I tried to build SWIG Java bindings using Visual C++ 8.0 compiler
> and I got errors from javac about missing symbols.
> 
> Here is detailed log of all my steps I took in the gdal\swig directory:
> 
> http://mateusz.loskot.net/tmp/gdal-java-build.txt
> 
> Am I doing anything wrong or the SWIG Java is incomplete in any way?
> 
> I use following tools:
> 
> SWIG 1.3.31

Hmmm... yeah, I already seen that issue when I tried to build gdal
java bindings under Windows, which unfortunately failed later because
java would not load the generated binding libraries.

Anyways, the following patch fixed the issue:

--- include/java/ogr_java.i     (revisione 11066)
+++ include/java/ogr_java.i     (copia locale)
@@ -46,6 +46,11 @@
  /*
   *
   */
+%pragma(java) jniclassimports=%{
+import org.gdal.osr.SpatialReference;
+import org.gdal.osr.CoordinateTransformation;
+%}
+
  %pragma(java) moduleimports=%{
  import org.gdal.osr.SpatialReference;
  %}

What's funny is that under Linux the patch was not needed.
Under Linux I'm using swig 1.3.28 whilst on Windows the same
as you, 1.3.31.

I hope you manage making the libraries load too... just try
out one of the programs in the java bindings /apps directory...
no matter where I did put the libraries, it complained
that it could not load the libraries. This usually is caused
by failing to load a required library (transitively, that is,
it's not that it's not finding the gdal libs, but something
these depend onto).

Cheers
Andrea

From seth at pricepages.org  Sun Mar 25 12:13:04 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] libtiff cvs HEAD compile faliure (was: gdaladdo throwing
	errors)
In-Reply-To: <78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>
References: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
	<78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>
Message-ID: <EC8AE426-8BBD-4BA0-9FA4-687C69E75495@pricepages.org>

I haven't tried your frameworks, but I may look into them. If I'm  
only using UNIXy utilities, are there any advantages?

libtiff CVS HEAD isn't compiling for me. This file is the output  
from ./configure && make:
http://www.pricepages.org/temp/libtiff_cvs_err.txt

I'll copy the libtiff list because it is, in fact, a libtiff compile  
error.
~Seth

On Mar 25, 2007, at 1:24 AM, William Kyngesburye wrote:

> I have a very similar bug for this, which was fixed - the problem  
> is actually in libtiff (your errors are slightly different):
>
> http://bugzilla.remotesensing.org/show_bug.cgi?id=1204
>
> You need to build libtiff from CVS to get this fix.
>
> I see that you are on OSX (from your bug report) - have you tried  
> my framework builds?  I ran my gdal_translate, tiffcp and gdaladdo  
> on your huge test tiff with no errors.
>
> On Mar 24, 2007, at 10:37 PM, Seth Price wrote:
>
>> I'm having a problem with gdaladdo, I'm afraid we don't seem to be  
>> getting along. It's very sensitive about the levels specified. For  
>> example, if I specify "2 4 6 12 24 48 96" for a 21600x21600px  
>> image it works, but if I specify "2 4 8 16 32" it throws many errors.
>>
>> I can normally find a set of levels that works via guessing, but  
>> that isn't going to work any longer. Does anyone have any idea how  
>> I can work around these errors? I haven't been able to find a  
>> pattern. Fixing the problem would be better.
>>
>> You can download the file that I've been using for a test here:
>> http://pricepages.org/temp/N048W123_x1_GLC.tif.gz  (19MB)
>>
>> I think you can ignore the "StripByteCounts" warnings. I'm fairly  
>> sure that they are related to this bug. (It would be nice if  
>> someone could have a look at that also, but it's not urgent.):
>> http://bugzilla.remotesensing.org/show_bug.cgi?id=1483
>>
>> Here are some examples of the behavior that I'm talking about:
>>
>> $ /usr/local/bin/gdal_translate test.tif test.2.tif
>> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
>> field, ignoring and calculating from imagelength
>> Input file size is 21600, 21600
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
>> field, ignoring and calculating from imagelength
>>
>> $ /usr/local/bin/gdaladdo -r nearest test.2.tif  2 4 8 16 32
>> 0.Warning 1: TIFFReadDirectory:test.2.tif: Wrong "StripByteCounts"  
>> field, ignoring and calculating from imagelength
>> Warning 1: TIFFReadDirectory:test.2.tif: Wrong "StripByteCounts"  
>> field, ignoring and calculating from imagelength
>> ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
>> ERROR 1: TIFFReadEncodedTile() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 2
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
>> ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
>> ERROR 1: TIFFReadEncodedTile() failed.
>>
>> ERROR 1: IReadBlock failed at X offset 0, Y offset 2
>> ERROR 1: GetBlockRef failed at X block offset 0, Y block offset 2
>> ERROR 1: test.2.tif:DumpModeDecode: Not enough data for scanline 0
>> ERROR 1: TIFFReadEncodedTile() failed.
>> [....]
>> $ ./gdaladdo -r nearest test.tif 2 4 6 12 24 48 96
>> Warning 1: TIFFReadDirectory:test.tif: Wrong "StripByteCounts"  
>> field, ignoring and calculating from imagelength
>> 0...10...20...30...40...50...60...70...80...90...100 - done.
>>
>> Any ideas on where to proceed next with this?
>>
>> Thanks for any help,
>> Seth
>>
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "Those people who most want to rule people are, ipso-facto, those  
> least suited to do it."
>
> - A rule of the universe, from the HitchHiker's Guide to the Galaxy
>
>
>
>


From woklist at kyngchaos.com  Sun Mar 25 12:24:40 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdaladdo throwing errors
In-Reply-To: <F0917F61-FB4F-4F1A-A26A-4EC1E541ECA4@pricepages.org>
References: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
	<78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>
	<F0917F61-FB4F-4F1A-A26A-4EC1E541ECA4@pricepages.org>
Message-ID: <9DCDC0EE-DD65-4992-B6C6-25DA8ADA9F73@kyngchaos.com>

I just updated my tiff cvs - the last entry in the change log says  
it: as of Mar 17, CVS libtiff is unstable due to massive changes.

On Mar 25, 2007, at 10:57 AM, Seth Price wrote:

> I haven't tried your frameworks, but I may look into them. If I'm  
> only using UNIXy utilities, are there any advantages?
>
> CVS HEAD isn't compiling for me. What follows is a massive dump  
> from ./configure && make:
> (maybe I should post this on the libtiff list?)


-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"History is an illusion caused by the passage of time, and time is an  
illusion caused by the passage of history."

- Hitchhiker's Guide to the Galaxy



From seth at pricepages.org  Sun Mar 25 13:21:16 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdaladdo throwing errors
In-Reply-To: <259A8A64-4F1C-4A0C-ADFA-50EA06E61980@kyngchaos.com>
References: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
	<78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>
	<F0917F61-FB4F-4F1A-A26A-4EC1E541ECA4@pricepages.org>
	<259A8A64-4F1C-4A0C-ADFA-50EA06E61980@kyngchaos.com>
Message-ID: <CC6161E2-6CAA-43A2-AB6A-F085EFF5EEC4@pricepages.org>

Great! It looks like this update to libtiff solved the most problems.  
It's complaining about thrashing now, but I don't know if I need to  
worry about that bit.

$ /usr/local/bin/gdaladdo --debug on -r nearest test.tif  2 4 8 16 32
GTiff: Opened 10800x10800 overview.

GTiff: Opened 5400x5400 overview.

GTiff: Opened 3600x3600 overview.

GTiff: Opened 1800x1800 overview.

GTiff: Opened 900x900 overview.

GTiff: Opened 450x450 overview.

GTiff: Opened 225x225 overview.

GDAL: GDALOpen(test.tif) succeeds as GTiff.

0GDAL: Potential thrashing on band 1 of test.tif.
GDAL: Potential thrashing on band 1 of .
GDAL: Potential thrashing on band 1 of .
.GDAL: Potential thrashing on band 1 of .
.GDAL: Potential thrashing on band 1 of .
.10.GDAL: Potential thrashing on band 1 of .
[...]

Thanks,
Seth

On Mar 25, 2007, at 11:28 AM, William Kyngesburye wrote:

> (sorry, once more)
>
> I looked at the libtiff page, a note was added rectly, to get a  
> stable cvs, checkout a certain branch:
>
> cvs checkout -r branch-3-9 libtiff
>
> On Mar 25, 2007, at 10:57 AM, Seth Price wrote:
>
>> I haven't tried your frameworks, but I may look into them. If I'm  
>> only using UNIXy utilities, are there any advantages?
>>
>> CVS HEAD isn't compiling for me. What follows is a massive dump  
>> from ./configure && make:
>> (maybe I should post this on the libtiff list?)
>>
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "Time is an illusion - lunchtime doubly so."
>
> - Ford Prefect
>
>
>
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070325/e57cdc5b/attachment.html
From woklist at kyngchaos.com  Sun Mar 25 13:40:03 2007
From: woklist at kyngchaos.com (William Kyngesburye)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdaladdo throwing errors
In-Reply-To: <CC6161E2-6CAA-43A2-AB6A-F085EFF5EEC4@pricepages.org>
References: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
	<78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>
	<F0917F61-FB4F-4F1A-A26A-4EC1E541ECA4@pricepages.org>
	<259A8A64-4F1C-4A0C-ADFA-50EA06E61980@kyngchaos.com>
	<CC6161E2-6CAA-43A2-AB6A-F085EFF5EEC4@pricepages.org>
Message-ID: <F56CAF4C-1375-4B77-A8D9-E35DBC63B870@kyngchaos.com>

Is this "test.tif" the same as the tiff you posted earlier  
(N048W123_x1_GLC.tif)?  I didn't get thrashing warnings, though I  
didn't use the debug option.

On Mar 25, 2007, at 12:21 PM, Seth Price wrote:

> Great! It looks like this update to libtiff solved the most  
> problems. It's complaining about thrashing now, but I don't know if  
> I need to worry about that bit.
>
> $ /usr/local/bin/gdaladdo --debug on -r nearest test.tif  2 4 8 16 32
> GTiff: Opened 10800x10800 overview.
>
> GTiff: Opened 5400x5400 overview.
>
> GTiff: Opened 3600x3600 overview.
>
> GTiff: Opened 1800x1800 overview.
>
> GTiff: Opened 900x900 overview.
>
> GTiff: Opened 450x450 overview.
>
> GTiff: Opened 225x225 overview.
>
> GDAL: GDALOpen(test.tif) succeeds as GTiff.
>
> 0GDAL: Potential thrashing on band 1 of test.tif.
> GDAL: Potential thrashing on band 1 of .
> GDAL: Potential thrashing on band 1 of .
> .GDAL: Potential thrashing on band 1 of .
> .GDAL: Potential thrashing on band 1 of .
> .10.GDAL: Potential thrashing on band 1 of .
> [...]
>
> Thanks,
> Seth
>

-----
William Kyngesburye <kyngchaos@kyngchaos.com>
http://www.kyngchaos.com/

"We are at war with them. Neither in hatred nor revenge and with no  
particular pleasure I shall kill every ___ I can until the war is  
over. That is my duty."

"Don't you even hate 'em?"

"What good would it do if I did? If all the many millions of people  
of the allied nations devoted an entire year exclusively to hating  
the ____ it wouldn't kill one ___ nor shorten the war one day."

<Ha, ha> "And it might give 'em all stomach ulcers."

- Tarzan, on war


From seth at pricepages.org  Sun Mar 25 13:44:19 2007
From: seth at pricepages.org (Seth Price)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] gdaladdo throwing errors
In-Reply-To: <F56CAF4C-1375-4B77-A8D9-E35DBC63B870@kyngchaos.com>
References: <DA5BB66B-CCC4-45DB-BBE5-8781F07F6C83@pricepages.org>
	<78C8FDD8-64F6-4E0A-A550-0AD5E960EBFA@kyngchaos.com>
	<F0917F61-FB4F-4F1A-A26A-4EC1E541ECA4@pricepages.org>
	<259A8A64-4F1C-4A0C-ADFA-50EA06E61980@kyngchaos.com>
	<CC6161E2-6CAA-43A2-AB6A-F085EFF5EEC4@pricepages.org>
	<F56CAF4C-1375-4B77-A8D9-E35DBC63B870@kyngchaos.com>
Message-ID: <C5F51F3D-CFCB-4125-BC07-CCC47C94D00F@pricepages.org>

Yep, same image. They only showed up with the debug on.
~Seth

On Mar 25, 2007, at 12:40 PM, William Kyngesburye wrote:

> Is this "test.tif" the same as the tiff you posted earlier  
> (N048W123_x1_GLC.tif)?  I didn't get thrashing warnings, though I  
> didn't use the debug option.
>
> On Mar 25, 2007, at 12:21 PM, Seth Price wrote:
>
>> Great! It looks like this update to libtiff solved the most  
>> problems. It's complaining about thrashing now, but I don't know  
>> if I need to worry about that bit.
>>
>> $ /usr/local/bin/gdaladdo --debug on -r nearest test.tif  2 4 8 16 32
>> GTiff: Opened 10800x10800 overview.
>>
>> GTiff: Opened 5400x5400 overview.
>>
>> GTiff: Opened 3600x3600 overview.
>>
>> GTiff: Opened 1800x1800 overview.
>>
>> GTiff: Opened 900x900 overview.
>>
>> GTiff: Opened 450x450 overview.
>>
>> GTiff: Opened 225x225 overview.
>>
>> GDAL: GDALOpen(test.tif) succeeds as GTiff.
>>
>> 0GDAL: Potential thrashing on band 1 of test.tif.
>> GDAL: Potential thrashing on band 1 of .
>> GDAL: Potential thrashing on band 1 of .
>> .GDAL: Potential thrashing on band 1 of .
>> .GDAL: Potential thrashing on band 1 of .
>> .10.GDAL: Potential thrashing on band 1 of .
>> [...]
>>
>> Thanks,
>> Seth
>>
>
> -----
> William Kyngesburye <kyngchaos@kyngchaos.com>
> http://www.kyngchaos.com/
>
> "We are at war with them. Neither in hatred nor revenge and with no  
> particular pleasure I shall kill every ___ I can until the war is  
> over. That is my duty."
>
> "Don't you even hate 'em?"
>
> "What good would it do if I did? If all the many millions of people  
> of the allied nations devoted an entire year exclusively to hating  
> the ____ it wouldn't kill one ___ nor shorten the war one day."
>
> <Ha, ha> "And it might give 'em all stomach ulcers."
>
> - Tarzan, on war
>
>
>


From aaime at openplans.org  Sun Mar 25 15:38:53 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
In-Reply-To: <f3b73b7d0703181536h5bf3adfcwfb243933339db277@mail.gmail.com>
References: <45FD5BC0.1010003@openplans.org>	
	<f3b73b7d0703181159j3c6792bfs51473a7e25f41d62@mail.gmail.com>	
	<45FDA187.7060406@openplans.org>
	<f3b73b7d0703181536h5bf3adfcwfb243933339db277@mail.gmail.com>
Message-ID: <4606CFCD.20700@openplans.org>

Tamas Szekeres ha scritto:
> 2007/3/18, Andrea Aime <aaime@openplans.org>:

>> As a result, I had to mix the java specific code in ogr.i, so that
>> I can preserve the right order.
>>
> 
> I have no problem about this approach. You can commit these changes
> and you may refine the solution if needed in the future. I suspect
> there's no need to reimplement those functions since the
> implementation is the same and only some of the types at the formal
> parameter list have been changed. I guess these parameter types can
> surely be altered by java specific typemaps.

Tamas, I've committed my changes as of revision 11607.
I did not change them thought. The rationale is, I'm not sure changing
the typemaps would be side effect free.
The typemap for wkb functions involves handling "int nLen, char *pBuf"
as a byte[] in Java, because chars in java are a 16bit data type.
Now, changing the typemap directly in typemaps_java.i may impact other 
functions in the gdal bindings and I'm not sure this would be good (it 
may be the right thing to do, but I did not have the time to check).
Doing it locally would mean temporary overriding the general one,
but in fact, once you've overridden a general typemap, how do you 
reistall the old one?
I accept suggestions :-)

Cheers
Andrea

From aaime at openplans.org  Sun Mar 25 16:10:19 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Building SWIG Java with Visual C++ 8.0
In-Reply-To: <460648E2.5060605@openplans.org>
References: <4605C616.6060009@loskot.net> <460648E2.5060605@openplans.org>
Message-ID: <4606D72B.80700@openplans.org>

Andrea Aime ha scritto:
> Mateusz Loskot ha scritto:
>> Hi,
>>
>> I tried to build SWIG Java bindings using Visual C++ 8.0 compiler
>> and I got errors from javac about missing symbols.
>>
>> Here is detailed log of all my steps I took in the gdal\swig directory:
>>
>> http://mateusz.loskot.net/tmp/gdal-java-build.txt
>>
>> Am I doing anything wrong or the SWIG Java is incomplete in any way?
>>
>> I use following tools:
>>
>> SWIG 1.3.31
> 
> Hmmm... yeah, I already seen that issue when I tried to build gdal
> java bindings under Windows, which unfortunately failed later because
> java would not load the generated binding libraries.
> 
> Anyways, the following patch fixed the issue:
> 
> --- include/java/ogr_java.i     (revisione 11066)
> +++ include/java/ogr_java.i     (copia locale)
> @@ -46,6 +46,11 @@
>  /*
>   *
>   */
> +%pragma(java) jniclassimports=%{
> +import org.gdal.osr.SpatialReference;
> +import org.gdal.osr.CoordinateTransformation;
> +%}
> +
>  %pragma(java) moduleimports=%{
>  import org.gdal.osr.SpatialReference;
>  %}

Well, I went ahead and committed this patch, along with one
in Driver.i to make things compile for good (a void function,
deregister, was returning), and another small patch to makefiles
to make sure clean does not break if some bindings were not built
(it was breaking because of missing directories, rmdir exits with an
error code if the directory to be deleted is not there).

Cheers
Andrea

From szekerest at gmail.com  Sun Mar 25 16:48:41 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Ready to commit first batch of swig-java changes
In-Reply-To: <4606CFCD.20700@openplans.org>
References: <45FD5BC0.1010003@openplans.org>
	<f3b73b7d0703181159j3c6792bfs51473a7e25f41d62@mail.gmail.com>
	<45FDA187.7060406@openplans.org>
	<f3b73b7d0703181536h5bf3adfcwfb243933339db277@mail.gmail.com>
	<4606CFCD.20700@openplans.org>
Message-ID: <f3b73b7d0703251348g4d653498ufd06f2dc69443c48@mail.gmail.com>

2007/3/25, Andrea Aime <aaime@openplans.org>:
> Tamas, I've committed my changes as of revision 11607.
> I did not change them thought. The rationale is, I'm not sure changing
> the typemaps would be side effect free.
> The typemap for wkb functions involves handling "int nLen, char *pBuf"
> as a byte[] in Java, because chars in java are a 16bit data type.
> Now, changing the typemap directly in typemaps_java.i may impact other
> functions in the gdal bindings and I'm not sure this would be good (it
> may be the right thing to do, but I did not have the time to check).
> Doing it locally would mean temporary overriding the general one,
> but in fact, once you've overridden a general typemap, how do you
> reistall the old one?
> I accept suggestions :-)

Andrea,

Typemaps in SWIG has a global scope so redefining a particular typemap
will implicitly %clear the previous definition. So if you don't want
to accidentally impact the existing code you might want to create a
specific typemap for this case and use the %apply %clear statements
for the corresponding code.
The C# interface works this way in many areas. For the generic buffer
pointers I'm using the 'void* buffer_ptr' typemap as:

%typemap(imtype, out="IntPtr") void *buffer_ptr "IntPtr"
%typemap(cstype) void *buffer_ptr %{IntPtr%}
%typemap(in) void *buffer_ptr %{ $1 = ($1_ltype)$input; %}
%typemap(out) void *buffer_ptr %{ $result = $1; %}
%typemap(csin) void *buffer_ptr "$csinput"
%typemap(csout, excode=SWIGEXCODE) void *buffer_ptr {
      IntPtr ret = $imcall;$excode
      return ret;
}

Whenever I want to use it I can apply the typemap as:

#ifdef SWIGCSHARP
%apply (void *buffer_ptr) {char *wkb_buf};
#endif
  %feature("kwargs") OGRGeometryShadow;
  OGRGeometryShadow( OGRwkbGeometryType type = wkbUnknown, char *wkt =
0, int wkb= 0, char *wkb_buf = 0, char *gml = 0 ) {
    if (type != wkbUnknown ) {
      return (OGRGeometryShadow*) OGR_G_CreateGeometry( type );
    }
    else if ( wkt != 0 ) {
      return CreateGeometryFromWkt( &wkt );
    }
    else if ( wkb != 0 ) {
      return CreateGeometryFromWkb( wkb, wkb_buf );
    }
    else if ( gml != 0 ) {
      return CreateGeometryFromGML( gml );
    }
    // throw?
    else return 0;
  }
#ifdef SWIGCSHARP
%clear char *wkb_buf;
#endif

For the C# interface it's not enough to create a typemap for mapping
the buffer pointer, some kind of marshalling code should also be
created between the managed and unmanaged code. Therefore I'm often
following the policy to map the buffer pointer to IntPtr natively, and
create some overloads including the marsalling code using the cscode
typemap. At some point these overloads are eventually calling the
generic (mapped) version. This solution gives the free hand for the
user to decide whether she want to implement her own marshaler or rely
on the code provided by this interface.

Geneally I couldn't really alter the number of the parameters using
multi argument typemaps. I seems that the type of the first parameter
can only be controlled and for the C# language it was not implemented
completely.

I've recently implemented the wkb based geometry creation in some way,
but it might differ from your implementation regarding to the language
specifics mentioned before.

I hope I could help, anyway.
You can also contact me (szekerest) on #gdal if you have further issues.


Best regards,

Tamas

From warmerdam at pobox.com  Mon Mar 26 03:23:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL/OGR Bugzilla Migrated to Trac
Message-ID: <460774F5.5080704@pobox.com>

Folks,

As discussed on gdal-dev, the GDAL bug database has been migrated from
Bugzilla at http://bugzilla.remotesensing.org to Trac at:

   http://trac.osgeo.org/gdal

All bug history has been carried over, and bug id's have been preserved.

The new Trac instance uses OSGeo userids for authentication.  The main
page at http://trac.osgeo.org/gdal contains pointers for how to get
an OSGeo userid (the same as we use for subversion).

Work has also started to port some of the less reference oriented material
from the GDAL web site to the Trac wiki component, starting with the
"how to build GDAL" document.  Users and developers can contribute to
the GDAL/OGR trac wiki also found at the same url as the trac bug database.

   http://trac.osgeo.org/gdal

I would like to thank Howard Butler for a great deal of work porting over
the bugzilla database.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Mon Mar 26 08:12:26 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] when are overviews displayed for a 6 inch geotiff that
	has gdaladdo -r average file.tif 2 4 8 16 32 64 128
Message-ID: <fa2ac0580703260512s58806ef3p1f69a740c4bb1df9@mail.gmail.com>

Hi,

When are overviews displayed (i.e. at what scale range will a 1/2 resolution
overview be displayed) for a 6 inch geotiff that has gdaladdo -r average
file.tif 2 4 8 16 32 64 128
run against.

Thanks,

-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070326/47b95f8a/attachment.html
From jack.l.riley at gmail.com  Mon Mar 26 09:04:44 2007
From: jack.l.riley at gmail.com (Jack Riley)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] Re: ogr geometry intersection
In-Reply-To: <4604167B.5090603@loskot.net>
References: <4e9061690703211356s507c3523xaf34cd1c9ce8c46d@mail.gmail.com>
	<4e9061690703221300h40a915fvefe1e5b4487c4f15@mail.gmail.com>
	<4602E964.3050900@pobox.com> <4604167B.5090603@loskot.net>
Message-ID: <4e9061690703260604p280f1ecbk9aad4390a3200e9f@mail.gmail.com>

Hello Todd:  Thanks for the information re: the disparity between the
geometry constructions and tests in ogr (geos).  In terms of visible-extents
clipping (draw / do-not-draw decisions), I suppose a small expansion of the
clipping rectangle will bridge the gap in precision.  For more stringent
topology requirements (e.g., strict point-in-polygon tests that guarantee
mutual exclusivity between adjacent polygons) the disparity should not be
ignored.

Frank & Mateusz:  Thanks for looking into the ogr performance issue.

Jack


On 3/23/07, Mateusz Loskot <mateusz@loskot.net> wrote:
>
> Frank Warmerdam wrote:
> > Jack Riley wrote:
> >> It appears that the FWTools v1.0.9-and-earlier TopologyException is
> >> limited to situations where one of the two polynomials being tested
> >> for Intersection() is completely within the other.  In other words,
> >> the Intersection() test in "old" versions of FWTools/GDAL works--and
> >> works "fast"--if the two polynomials actually intersect.  So, my
> >> workaround is to use FWTools v1.0.9 (or earlier) and condition any
> >> call to Intersection() with Disjoint() or Contains() test(s).  The
> >> question remaining is:  can FWTools v1.1.0+/GDAL revert back to the
> >> use of the "old" and "fast" Intersection() code, adding in a test of
> >> Disjoint()/Contains() to circumvent the TopologyException?
> >
> > Jack,
> >
> > I've asked Mateusz who is a GEOS guru too to look into this issue.
>
> Jack,
>
> I'm going to try to reproduce your results and tests today and tomorrow.
> I will report about results.
>
> Cheers
> --
> Mateusz Loskot
> http://mateusz.loskot.net
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070326/1edd455e/attachment.html
From gok at aerometric-ak.com  Mon Mar 26 13:09:05 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] sid G3 data
Message-ID: <3054411AF4728548AD6D7137190D56B30C45F5@admin1.aeromap.com>

Hello, all.
I'm wonder if there are any plans to extend GDAL to cover .sid data generation 3 (G3).
Thanks,
gok


From Paul_VanDeusen at uml.edu  Mon Mar 26 14:52:02 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] compiling with mrsid support
Message-ID: <46081652.8080903@uml.edu>

Has anyone made notes recently on compiling gdal with mrsid support.

Here is what I did so far, but it failed.
1) download the DSDK from LizardTech
2) ./configure --with-mrsid=pathToDSDK
3)edited MRSID lines in nmake.opt to point to the DSDK directory
4)gmake

I got this error:
/home/pvandeus/downloads/gdal/Geo_DSDK-6.0.7.1407/include/base/lti_sceneBuffer.h:356:
error: extra qualification 'LizardTech::LTISceneBuffer::' on member
'inWindow'
gmake[2]: *** [../o/mrsiddataset.o] Error 1
gmake[2]: Leaving directory
`/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts/mrsid'
gmake[1]: *** [mrsid-install-obj] Error 2
gmake[1]: Leaving directory `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts'
gmake: *** [frmts-target] Error 2


This is on a system running Fedora Core 6.

From kmckelvey at lizardtech.com  Mon Mar 26 15:17:02 2007
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] compiling with mrsid support
In-Reply-To: <46081652.8080903@uml.edu>
References: <46081652.8080903@uml.edu>
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD1201427C60@sea-srv-ms3.lizardtech.com>

Paul,

This is an incompatibility of our header file with gcc 3.4+; it was not
considered an error in previous versions of gcc. (Thanks to Mateusz
Loskot for pointing it out to us originally.)

To fix the issue in the header (lti_sceneBuffer.h), simply remove the
extra qualification from the inWindow declaration.  Line 356 should look
like this:

bool inWindow(lt_uint32 x, lt_uint32 y) const;

Kirk.
 

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Paul Van Deusen
> Sent: Monday, March 26, 2007 11:52 AM
> To: gdal-dev@lists.maptools.org
> Subject: [Gdal-dev] compiling with mrsid support
> 
> Has anyone made notes recently on compiling gdal with mrsid support.
> 
> Here is what I did so far, but it failed.
> 1) download the DSDK from LizardTech
> 2) ./configure --with-mrsid=pathToDSDK
> 3)edited MRSID lines in nmake.opt to point to the DSDK 
> directory 4)gmake
> 
> I got this error:
> /home/pvandeus/downloads/gdal/Geo_DSDK-6.0.7.1407/include/base
> /lti_sceneBuffer.h:356:
> error: extra qualification 'LizardTech::LTISceneBuffer::' on 
> member 'inWindow'
> gmake[2]: *** [../o/mrsiddataset.o] Error 1
> gmake[2]: Leaving directory
> `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts/mrsid'
> gmake[1]: *** [mrsid-install-obj] Error 2
> gmake[1]: Leaving directory 
> `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts'
> gmake: *** [frmts-target] Error 2
> 
> 
> This is on a system running Fedora Core 6.
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From Paul_VanDeusen at uml.edu  Mon Mar 26 15:27:38 2007
From: Paul_VanDeusen at uml.edu (Paul Van Deusen)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] compiling with mrsid support
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD1201427C60@sea-srv-ms3.lizardtech.com>
References: <46081652.8080903@uml.edu>
	<DBEC881B4E22D1449F5FAC530E1ADD1201427C60@sea-srv-ms3.lizardtech.com>
Message-ID: <46081EAA.4050101@uml.edu>

Kirk,

Thanks. That fixed it.

Paul.

Kirk McKelvey wrote:
> Paul,
>
> This is an incompatibility of our header file with gcc 3.4+; it was not
> considered an error in previous versions of gcc. (Thanks to Mateusz
> Loskot for pointing it out to us originally.)
>
> To fix the issue in the header (lti_sceneBuffer.h), simply remove the
> extra qualification from the inWindow declaration.  Line 356 should look
> like this:
>
> bool inWindow(lt_uint32 x, lt_uint32 y) const;
>
> Kirk.
>  
>
>   
>> -----Original Message-----
>> From: gdal-dev-bounces@lists.maptools.org 
>> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
>> Paul Van Deusen
>> Sent: Monday, March 26, 2007 11:52 AM
>> To: gdal-dev@lists.maptools.org
>> Subject: [Gdal-dev] compiling with mrsid support
>>
>> Has anyone made notes recently on compiling gdal with mrsid support.
>>
>> Here is what I did so far, but it failed.
>> 1) download the DSDK from LizardTech
>> 2) ./configure --with-mrsid=pathToDSDK
>> 3)edited MRSID lines in nmake.opt to point to the DSDK 
>> directory 4)gmake
>>
>> I got this error:
>> /home/pvandeus/downloads/gdal/Geo_DSDK-6.0.7.1407/include/base
>> /lti_sceneBuffer.h:356:
>> error: extra qualification 'LizardTech::LTISceneBuffer::' on 
>> member 'inWindow'
>> gmake[2]: *** [../o/mrsiddataset.o] Error 1
>> gmake[2]: Leaving directory
>> `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts/mrsid'
>> gmake[1]: *** [mrsid-install-obj] Error 2
>> gmake[1]: Leaving directory 
>> `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts'
>> gmake: *** [frmts-target] Error 2
>>
>>
>> This is on a system running Fedora Core 6.
>> _______________________________________________
>> Gdal-dev mailing list
>> Gdal-dev@lists.maptools.org
>> http://lists.maptools.org/mailman/listinfo/gdal-dev
>>
>>     
>
>   


-- 
Paul Van Deusen
NCASI
600 Suffolk St. Fifth Floor
Lowell, MA 01854
978-934-1948


From kmckelvey at lizardtech.com  Mon Mar 26 15:36:08 2007
From: kmckelvey at lizardtech.com (Kirk McKelvey)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] compiling with mrsid support
In-Reply-To: <DBEC881B4E22D1449F5FAC530E1ADD1201427C60@sea-srv-ms3.lizardtech.com>
References: <46081652.8080903@uml.edu>
	<DBEC881B4E22D1449F5FAC530E1ADD1201427C60@sea-srv-ms3.lizardtech.com>
Message-ID: <DBEC881B4E22D1449F5FAC530E1ADD1201427C67@sea-srv-ms3.lizardtech.com>

Whoops, I meant it is an incompatibility with gcc 4.1+, not 3.4+.

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Kirk McKelvey
> Sent: Monday, March 26, 2007 12:17 PM
> To: Paul_VanDeusen@uml.edu; gdal-dev@lists.maptools.org
> Subject: RE: [Gdal-dev] compiling with mrsid support
> 
> Paul,
> 
> This is an incompatibility of our header file with gcc 3.4+; 
> it was not considered an error in previous versions of gcc. 
> (Thanks to Mateusz Loskot for pointing it out to us originally.)
> 
> To fix the issue in the header (lti_sceneBuffer.h), simply 
> remove the extra qualification from the inWindow declaration. 
>  Line 356 should look like this:
> 
> bool inWindow(lt_uint32 x, lt_uint32 y) const;
> 
> Kirk.
>  
> 
> > -----Original Message-----
> > From: gdal-dev-bounces@lists.maptools.org
> > [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of Paul Van 
> > Deusen
> > Sent: Monday, March 26, 2007 11:52 AM
> > To: gdal-dev@lists.maptools.org
> > Subject: [Gdal-dev] compiling with mrsid support
> > 
> > Has anyone made notes recently on compiling gdal with mrsid support.
> > 
> > Here is what I did so far, but it failed.
> > 1) download the DSDK from LizardTech
> > 2) ./configure --with-mrsid=pathToDSDK 3)edited MRSID lines in 
> > nmake.opt to point to the DSDK directory 4)gmake
> > 
> > I got this error:
> > /home/pvandeus/downloads/gdal/Geo_DSDK-6.0.7.1407/include/base
> > /lti_sceneBuffer.h:356:
> > error: extra qualification 'LizardTech::LTISceneBuffer::' on member 
> > 'inWindow'
> > gmake[2]: *** [../o/mrsiddataset.o] Error 1
> > gmake[2]: Leaving directory
> > `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts/mrsid'
> > gmake[1]: *** [mrsid-install-obj] Error 2
> > gmake[1]: Leaving directory
> > `/home/pvandeus/downloads/gdal/gdal-1.4.0/frmts'
> > gmake: *** [frmts-target] Error 2
> > 
> > 
> > This is on a system running Fedora Core 6.
> > _______________________________________________
> > Gdal-dev mailing list
> > Gdal-dev@lists.maptools.org
> > http://lists.maptools.org/mailman/listinfo/gdal-dev
> > 
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
> 


From warmerdam at pobox.com  Mon Mar 26 16:35:24 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] compiling with mrsid support
In-Reply-To: <46081EAA.4050101@uml.edu>
References: <46081652.8080903@uml.edu>
	<DBEC881B4E22D1449F5FAC530E1ADD1201427C60@sea-srv-ms3.lizardtech.com>
	<46081EAA.4050101@uml.edu>
Message-ID: <46082E8C.8090401@pobox.com>


Folks,

This is an excellent candidate for inclusion in the new wiki area on building
GDAL and problems with builds.  I have added it in the subtopic about MrSID:

   http://trac.osgeo.org/gdal/wiki/MrSID

I hope we will build up a body of build hints, and faq answers under:

   http://trac.osgeo.org/gdal/wiki/BuildHints

> Kirk McKelvey wrote:
>> Paul,
>>
>> This is an incompatibility of our header file with gcc 3.4+; it was not
>> considered an error in previous versions of gcc. (Thanks to Mateusz
>> Loskot for pointing it out to us originally.)
>>
>> To fix the issue in the header (lti_sceneBuffer.h), simply remove the
>> extra qualification from the inWindow declaration.  Line 356 should look
>> like this:
>>
>> bool inWindow(lt_uint32 x, lt_uint32 y) const;
>>
>> Kirk.
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Mar 26 17:10:43 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] sid G3 data
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45F5@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45F5@admin1.aeromap.com>
Message-ID: <460836D3.4060500@pobox.com>

Gennady Khokhorin wrote:
> Hello, all.
> I'm wonder if there are any plans to extend GDAL to cover .sid data generation 3 (G3).
> Thanks,

Gok,

I believe this is already supported if you have the right ESDK version.
Set the creation option VERSION to either 2 or 3 to select a particular
version.

This seems to be addressed in the documentation.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Mon Mar 26 17:48:01 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] when are overviews displayed for a 6 inch geotiff
	that has gdaladdo -r average file.tif 2 4 8 16 32 64 128
In-Reply-To: <fa2ac0580703260512s58806ef3p1f69a740c4bb1df9@mail.gmail.com>
References: <fa2ac0580703260512s58806ef3p1f69a740c4bb1df9@mail.gmail.com>
Message-ID: <46083F91.5080009@pobox.com>

John Mitchell wrote:
> Hi,
> 
> When are overviews displayed (i.e. at what scale range will a 1/2 
> resolution overview be displayed) for a 6 inch geotiff that has gdaladdo 
> -r average file.tif 2 4 8 16 32 64 128
> run against.

John,

Based on my re-reading of GDALRasterBand::OverviewRasterIO() in
gdal/gcore/rasterio.cpp an overview level will be used if the overviews
resolution is no more than 1.2 times the requested resolution of a
RasterIO() request.

So if you had a base layer of 30m x 30m pixels, and an overview of 60m x 60m
pixels, and you made a request at 49m resolution the full resolution imagery
would be used, while at 51m resolution the 60m overview would be used.

Does this help?

Rules may vary for format drivers that implement their own overview
support - but this rule of thumb should apply to the generic GDAL overview
support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From ben at vterrain.org  Mon Mar 26 20:52:58 2007
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL MSVC files updated for 1.4.0
Message-ID: <003e01c7700a$44174cb0$6401a8c0@DellWork>

For those using GDAL on Windows, you may know that the GDAL build
documentation:
  http://gdal.org/gdal_building.html

points to this page which provides binaries, as well as solution/project
files for MSVC 7.1 and 8.0:
  http://vterrain.org/Distrib/gdal.html

I have today updated that page with binaries/build files for GDAL's current
version 1.4.0.

-Ben


From warmerdam at pobox.com  Mon Mar 26 22:19:38 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL MSVC files updated for 1.4.0
In-Reply-To: <003e01c7700a$44174cb0$6401a8c0@DellWork>
References: <003e01c7700a$44174cb0$6401a8c0@DellWork>
Message-ID: <46087F3A.7040103@pobox.com>

Ben Discoe wrote:
> For those using GDAL on Windows, you may know that the GDAL build
> documentation:
>   http://gdal.org/gdal_building.html

Ben and others,

This page actually moved to the wiki today, though your pointer was enough
for me to realize my www.gdal.org web site update script was broken.

See:

   http://trac.osgeo.org/gdal/wiki/BuildingOnWindows

Users, developers, etc are encouraged to improve this as needed.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rob.mcmullen at gmail.com  Mon Mar 26 21:48:10 2007
From: rob.mcmullen at gmail.com (Rob McMullen)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] patch for ngpython on windows using mingw
Message-ID: <a40be0e10703261848j16bf1522g8ce5250984670bb@mail.gmail.com>

I was able to build gdal on windows for the windows native Python 2.5
using the MinGW compiler toolchain.  It seems that Python 2.5 has the
necessary .lib files to be linked with the MinGW gcc right out of the
box, so you don't have to do the pexports or dlltool tricks to
generate the libpython25.a file.

I'm actually doing this from cygwin, but a mingw bash shell should be
similar.  You need to pass compiler options to configure from cygwin:

CXX='g++ -mno-cygwin' CC='gcc -mno-cygwin' ./configure
--with-libz=internal --without-python --with-ngpython

and then the swig/python setup.py needs a small patch to force the
mingw compiler to use the regular unix build process instead of msvc.
I couldn't figure out how to get distutils to report which compiler it
was using, so I had to assume that if you're on windows and the
GDALmake.opt file exists, then you're really using the mingw compiler.

Rob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: setup.py.patch
Type: application/octet-stream
Size: 782 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070326/3bf717c3/setup.py.obj
From hobu at iastate.edu  Mon Mar 26 21:57:11 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] patch for ngpython on windows using mingw
In-Reply-To: <a40be0e10703261848j16bf1522g8ce5250984670bb@mail.gmail.com>
References: <a40be0e10703261848j16bf1522g8ce5250984670bb@mail.gmail.com>
Message-ID: <400CDD0D-3F0E-497B-809C-3CBDA4A3B4B3@iastate.edu>

On Mar 26, 2007, at 8:48 PM, Rob McMullen wrote:
> I couldn't figure out how to get distutils to report which compiler it
> was using, so I had to assume that if you're on windows and the
> GDALmake.opt file exists, then you're really using the mingw compiler.
>

Seems like as reasonable way as any to discriminate.  Patch applied  
to head.

Thanks,

Howard

From warmerdam at pobox.com  Mon Mar 26 23:17:12 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] patch for ngpython on windows using mingw
In-Reply-To: <400CDD0D-3F0E-497B-809C-3CBDA4A3B4B3@iastate.edu>
References: <a40be0e10703261848j16bf1522g8ce5250984670bb@mail.gmail.com>
	<400CDD0D-3F0E-497B-809C-3CBDA4A3B4B3@iastate.edu>
Message-ID: <46088CB8.2060502@pobox.com>

Howard Butler wrote:
> On Mar 26, 2007, at 8:48 PM, Rob McMullen wrote:
>> I couldn't figure out how to get distutils to report which compiler it
>> was using, so I had to assume that if you're on windows and the
>> GDALmake.opt file exists, then you're really using the mingw compiler.
>>
> 
> Seems like as reasonable way as any to discriminate.  Patch applied to 
> head.

Rob / Howard,

How does it distinguish this case from the case of a Cygwin build? Or
for these purposes is a pure cygwin build similar to a mingw build?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From mitchelljj98 at gmail.com  Mon Mar 26 22:24:01 2007
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] when are overviews displayed for a 6 inch geotiff that
	has gdaladdo -r average file.tif 2 4 8 16 32 64 128
In-Reply-To: <46083F91.5080009@pobox.com>
References: <fa2ac0580703260512s58806ef3p1f69a740c4bb1df9@mail.gmail.com>
	<46083F91.5080009@pobox.com>
Message-ID: <fa2ac0580703261924t32a5ea8dgcd166f6b6ee54744@mail.gmail.com>

Frank,

Thanks for the information.  I am creating external overviews and would like
to use the same algorithm that you described below for internal overviews.
If I would like an overview to display if the overviews resolution is no
more than 1.2 times the requested resolution, then how can I convert from
resolution to scale so that my minimum scale within mapserver for an
overview matches the correct resolution?

Thanks,

John Mitchell

On 3/26/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> John Mitchell wrote:
> > Hi,
> >
> > When are overviews displayed (i.e. at what scale range will a 1/2
> > resolution overview be displayed) for a 6 inch geotiff that has gdaladdo
> > -r average file.tif 2 4 8 16 32 64 128
> > run against.
>
> John,
>
> Based on my re-reading of GDALRasterBand::OverviewRasterIO() in
> gdal/gcore/rasterio.cpp an overview level will be used if the overviews
> resolution is no more than 1.2 times the requested resolution of a
> RasterIO() request.
>
> So if you had a base layer of 30m x 30m pixels, and an overview of 60m x
> 60m
> pixels, and you made a request at 49m resolution the full resolution
> imagery
> would be used, while at 51m resolution the 60m overview would be used.
>
> Does this help?
>
> Rules may vary for format drivers that implement their own overview
> support - but this rule of thumb should apply to the generic GDAL overview
> support.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
>


-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070326/9fe171c6/attachment.html
From hobu at iastate.edu  Mon Mar 26 22:34:46 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] patch for ngpython on windows using mingw
In-Reply-To: <46088CB8.2060502@pobox.com>
References: <a40be0e10703261848j16bf1522g8ce5250984670bb@mail.gmail.com>
	<400CDD0D-3F0E-497B-809C-3CBDA4A3B4B3@iastate.edu>
	<46088CB8.2060502@pobox.com>
Message-ID: <9CA998A4-9E17-410D-97C9-BAE091C75AF5@iastate.edu>

On Mar 26, 2007, at 10:17 PM, Frank Warmerdam wrote:

> Howard Butler wrote:
>> On Mar 26, 2007, at 8:48 PM, Rob McMullen wrote:
>>> I couldn't figure out how to get distutils to report which  
>>> compiler it
>>> was using, so I had to assume that if you're on windows and the
>>> GDALmake.opt file exists, then you're really using the mingw  
>>> compiler.
>>>
>> Seems like as reasonable way as any to discriminate.  Patch  
>> applied to head.
>
> Rob / Howard,
>
> How does it distinguish this case from the case of a Cygwin build? Or
> for these purposes is a pure cygwin build similar to a mingw build?

Cygwin is already handled in a special case, and it's sys.platform  
comes back as 'cygwin,' so there shouldn't be any clashing.
<http://trac.osgeo.org/gdal/browser/trunk/gdal/swig/python/setup.py#L97>

Howard


From zhonghaiw at gmail.com  Tue Mar 27 03:58:41 2007
From: zhonghaiw at gmail.com (Zhonghai Wang)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL MSVC files updated for 1.4.0
In-Reply-To: <46087F3A.7040103@pobox.com>
References: <003e01c7700a$44174cb0$6401a8c0@DellWork>
	<46087F3A.7040103@pobox.com>
Message-ID: <2534c4120703270058l2e4505c4jba60f8f96c043773@mail.gmail.com>

Hi Ben,

thanks for the efforts to make a solution for VS2005. Maybe you forget to
set the Additional Include Directories for the project gdal_rasterrize, it
should be set like "..\..\alg;..\..\frmts;..\..\gcore;..\..\ogr;..\..\port".


I build it successfully after setting the include paths.

Zhonghai


On 3/27/07, Frank Warmerdam <warmerdam@pobox.com> wrote:
>
> Ben Discoe wrote:
> > For those using GDAL on Windows, you may know that the GDAL build
> > documentation:
> >   http://gdal.org/gdal_building.html
>
> Ben and others,
>
> This page actually moved to the wiki today, though your pointer was enough
> for me to realize my www.gdal.org web site update script was broken.
>
> See:
>
>   http://trac.osgeo.org/gdal/wiki/BuildingOnWindows
>
> Users, developers, etc are encouraged to improve this as needed.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | President OSGeo, http://osgeo.org
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070327/ab1773d1/attachment.html
From ben at vterrain.org  Tue Mar 27 07:26:28 2007
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL MSVC files updated for 1.4.0
In-Reply-To: <46087F3A.7040103@pobox.com>
Message-ID: <00fc01c77062$c3870460$6401a8c0@DellWork>

> -----
> From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
> 
> This page actually moved to the wiki today, though your 
> pointer was enough for me to realize my www.gdal.org web site 
> update script was broken.
> 
> See:
>    http://trac.osgeo.org/gdal/wiki/BuildingOnWindows
> Users, developers, etc are encouraged to improve this as needed.

The trac wiki is great.  However, i see a link to login, but no link to
register.  I recall seeing an announcement that the 'osgeo id' could be
used, so i went over to the OSGeo main site and found the wiki
(http://wiki.osgeo.org/) then found the 'create account' link, registered,
then returned to trac.  I tried using the same user/pass, but it did not
accept me.

Is there something more to signing up for the trac wiki?  Could we have a
link from the trac wiki telling us how/where to register?

-Ben


From milo at 3dsite.nl  Tue Mar 27 08:04:41 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
Message-ID: <46090859.6020107@3dsite.nl>

Hello list,

I am pretty new to GDAL development and no hardcore C++ developer. What 
I want is to compile GDAL to use it in a VB.net application. I have the 
same wish for PROJ, but I understand this is not the list to discuss 
that topic on.

What I am looking for is getting a GDAL dll that opens all the GDAL 
functions, properties and methods to my Visual Basic application. Right 
now I do the trick partially by using MapWinGIS, but I find their GDAL 
implementation lacking functions that I need.

Are there any good wrappers, assemblies or project files for Visual 
Studio Express around for the latest (from source) version of GDAL?

Has anyone got good experience with implementing these in Visual Basic 
.net on Visual Studio 2005 Express?

Kind regards,

Milo van der Linden



From szekerest at gmail.com  Tue Mar 27 08:35:11 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <46090859.6020107@3dsite.nl>
References: <46090859.6020107@3dsite.nl>
Message-ID: <f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>

Hi,

You can use the GDAL C# API for this purpose. If you don't want to
bother with the complilation the required dll-s can be obtained from
the latest FWTools package.

If you would like to compile the binaries, you should checkout the
source from the SVN or use the nightly snapshot. The latter contains
all of the pregenerated interface files ready to compile with VS2005.
The gdal/swig/csharp/apps directory contains some examples how to use
the various features of the GDAL/OGR API.

Best regards,

Tamas Szekeres


2007/3/27, Milo van der Linden <milo@3dsite.nl>:
> Hello list,
>
> I am pretty new to GDAL development and no hardcore C++ developer. What
> I want is to compile GDAL to use it in a VB.net application. I have the
> same wish for PROJ, but I understand this is not the list to discuss
> that topic on.
>
> What I am looking for is getting a GDAL dll that opens all the GDAL
> functions, properties and methods to my Visual Basic application. Right
> now I do the trick partially by using MapWinGIS, but I find their GDAL
> implementation lacking functions that I need.
>
> Are there any good wrappers, assemblies or project files for Visual
> Studio Express around for the latest (from source) version of GDAL?
>
> Has anyone got good experience with implementing these in Visual Basic
> .net on Visual Studio 2005 Express?
>
> Kind regards,
>
> Milo van der Linden
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From milo at 3dsite.nl  Tue Mar 27 10:25:51 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>
References: <46090859.6020107@3dsite.nl>
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>
Message-ID: <4609296F.8060101@3dsite.nl>

Dear Tamas,

Thank you for the response! I did as you described. Downloaded FWtools 
and added a reference to ogr_csharp to my project.

I then copied a small piece of code from one of the csharp samples and 
translated it to VB.net

In the start of my module I added the line:
Imports OGR

And then in my test-routine, I created the following:

'/* -------------------------------------------------------------------- */
'/*      Initialize srs                                                  */
'/* -------------------------------------------------------------------- */
                        Dim src As SpatialReference
                        src = New SpatialReference("")
                        src.ImportFromProj4("+proj=latlong +datum=WGS84 
+no_defs")
                        Debug.Print("SOURCE IsGeographic:" + 
src.IsGeographic() + " IsProjected:" + src.IsProjected())
                        Dim dst As SpatialReference
                        dst = New SpatialReference("")
                        dst.ImportFromProj4("+proj=somerc 
+lat_0=47.14439372222222 +lon_0=19.04857177777778 +x_0=650000 
+y_0=200000 +ellps=GRS67 +units=m +no_defs")
                        Debug.Print("DEST IsGeographic:" + 
dst.IsGeographic() + " IsProjected:" + dst.IsProjected())
'/* -------------------------------------------------------------------- */
'/*      making the transform                                            */
'/* -------------------------------------------------------------------- */
                        Dim ct As CoordinateTransformation = New 
CoordinateTransformation(src, dst)
                        Dim p(3) As Double
                        p(0) = 19
                        p(1) = 47
                        p(2) = 0
                        ct.TransformPoint(p)
                        Debug.Print("x:" + p(0) + " y:" + p(1) + " z:" + 
p(2))
                        ct.TransformPoint(p, 19.2, 47.5, 0)
                        Console.WriteLine("x:" + p(0) + " y:" + p(1) + " 
z:" + p(2))

At design time, VB.net has no errors or warnings, but when I run the 
application in Debug mode it halts on the line stating:

                        src = New SpatialReference("")

The message I get is:
                        The type initializer for 'OGR.osrPINVOKE' threw 
an exception.


Anyone had this before? Can It be that the OGR_csharp cannot find my 
proj files or something?

Kind regards,

Milo van der Linden
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070327/af9c596f/attachment.html
From ivan at ilucena.net  Tue Mar 27 10:41:53 2007
From: ivan at ilucena.net (Ivan Lucena)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL MSVC files updated for 1.4.0
Message-ID: <20070327144153.9306A2F958@ws6-3.us4.outblaze.com>

Ben,

I also whould like to thank you for the VC project. I used your <File> tree in the "Makefile Project" (gdal\makegdalNN.vcproj). 

There are obvious advantages of using the Ben's VC2005 project but it is a little harder to maintain compatibility with the current makefile.vc. 

In the "Makefile Project" the absence of a source file will not affect the compilation because it runs "make -f makefile.vc" anyway. Some of the code completing works, some doesn't; Clicling in the sintax error not always "Go to location".

Zhonghai,

I suggest you try to use the makegdal80.vcproj to see if attends you needs:

http://trac.osgeo.org/gdal/browser/trunk/gdal/makegdal80.vcproj

Frank,

Since Mateusz has approved the use of the VC "Makefile Project" can I add a line in the wiki page about it?

Thanks,

Ivan

----- Original Message -----
From: "Zhonghai Wang" 
To: "Frank Warmerdam" 
Subject: Re: [Gdal-dev] GDAL MSVC files updated for 1.4.0
Date: Tue, 27 Mar 2007 09:58:41 +0200


Hi Ben,

thanks for the efforts to make a solution for VS2005. Maybe you forget to set the Additional Include Directories for the project gdal_rasterrize, it should be set like "..\..\alg;..\..\frmts;..\..\gcore;..\..\ogr;..\..\port". 

I build it successfully after setting the include paths.

Zhonghai

?
On 3/27/07, Frank Warmerdam <warmerdam@pobox.com> wrote: Ben Discoe wrote:
> For those using GDAL on Windows, you may know that the GDAL build
> documentation: 
>?? http://gdal.org/gdal_building.html

Ben and others,

This page actually moved to the wiki today, though your pointer was enough
for me to realize my www.gdal.org web site update script was broken.

See:

??http://trac.osgeo.org/gdal/wiki/BuildingOnWindows

Users, developers, etc are encouraged to improve this as needed.

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up?? | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush????| President OSGeo, http://osgeo.org

_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev


_______________________________________________
Gdal-dev mailing list
Gdal-dev@lists.maptools.org
http://lists.maptools.org/mailman/listinfo/gdal-dev



From szekerest at gmail.com  Tue Mar 27 11:09:41 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <4609296F.8060101@3dsite.nl>
References: <46090859.6020107@3dsite.nl>
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>
	<4609296F.8060101@3dsite.nl>
Message-ID: <f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>

Milo,

You should also have [FWTools dir]\bin available in your PATH. Or
alternatively copy *.dll from this directory into your application
directory.

It should also be noted that there were some changes in the namespace
names since the latest FWTools release so you will have to take care
of it when upgrading to the next release.

Best regards,

Tamas



2007/3/27, Milo van der Linden <milo@3dsite.nl>:
>
>  Dear Tamas,
>
>  Thank you for the response! I did as you described. Downloaded FWtools and
> added a reference to ogr_csharp to my project.
>
>  I then copied a small piece of code from one of the csharp samples and
> translated it to VB.net
>
>  In the start of my module I added the line:
>  Imports OGR
>
>  And then in my test-routine, I created the following:
>
>  '/*
> --------------------------------------------------------------------
> */
>  '/*      Initialize srs
>               */
>  '/*
> --------------------------------------------------------------------
> */
>                          Dim src As SpatialReference
>                          src = New SpatialReference("")
>                          src.ImportFromProj4("+proj=latlong +datum=WGS84
> +no_defs")
>                          Debug.Print("SOURCE IsGeographic:" +
> src.IsGeographic() + " IsProjected:" + src.IsProjected())
>                          Dim dst As SpatialReference
>                          dst = New SpatialReference("")
>                          dst.ImportFromProj4("+proj=somerc
> +lat_0=47.14439372222222 +lon_0=19.04857177777778 +x_0=650000 +y_0=200000
> +ellps=GRS67 +units=m +no_defs")
>                          Debug.Print("DEST IsGeographic:" +
> dst.IsGeographic() + " IsProjected:" + dst.IsProjected())
>  '/*
> --------------------------------------------------------------------
> */
>  '/*      making the transform
>               */
>  '/*
> --------------------------------------------------------------------
> */
>                          Dim ct As CoordinateTransformation = New
> CoordinateTransformation(src, dst)
>                          Dim p(3) As Double
>                          p(0) = 19
>                          p(1) = 47
>                          p(2) = 0
>                          ct.TransformPoint(p)
>                          Debug.Print("x:" + p(0) + " y:" + p(1) + " z:" +
> p(2))
>                          ct.TransformPoint(p, 19.2, 47.5, 0)
>                          Console.WriteLine("x:" + p(0) + " y:" + p(1) + "
> z:" + p(2))
>
>  At design time, VB.net has no errors or warnings, but when I run the
> application in Debug mode it halts on the line stating:
>
>                          src = New SpatialReference("")
>
>  The message I get is:
>                          The type initializer for 'OGR.osrPINVOKE' threw an
> exception.
>
>
>  Anyone had this before? Can It be that the OGR_csharp cannot find my proj
> files or something?
>
>  Kind regards,
>
>  Milo van der Linden
>

From warmerdam at pobox.com  Tue Mar 27 11:10:07 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL MSVC files updated for 1.4.0
In-Reply-To: <00fc01c77062$c3870460$6401a8c0@DellWork>
References: <00fc01c77062$c3870460$6401a8c0@DellWork>
Message-ID: <460933CF.9050201@pobox.com>

Ben Discoe wrote:
> The trac wiki is great.  However, i see a link to login, but no link to
> register.  I recall seeing an announcement that the 'osgeo id' could be
> used, so i went over to the OSGeo main site and found the wiki
> (http://wiki.osgeo.org/) then found the 'create account' link, registered,
> then returned to trac.  I tried using the same user/pass, but it did not
> accept me.
> 
> Is there something more to signing up for the trac wiki?  Could we have a
> link from the trac wiki telling us how/where to register?

Ben,

The first paragraph on the GDAL trac/wiki includes likes to search for an
existing userid (if you have one, but aren't sure what the userid was) or
to create an osgeo account.

OSGeo is working towards a single-signon, but has had only partial success.
So the wiki.osgeo.org is actually a completely distinct service living in
Germany and not hooked into our LDAP.  Currently the drupal site at
www.gdal.org, the various subversions hosted at svn.osgeo.org, and the various
trac's hosted at trac.osgeo.org all use a common userid database.

   https://www.osgeo.org/cgi-bin/ldap_create_user.py

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From matt.wilkie at gov.yk.ca  Tue Mar 27 12:28:22 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:44 2007
Subject: [Gdal-dev] GDAL/OGR Bugzilla Migrated to Trac
In-Reply-To: <460774F5.5080704@pobox.com>
References: <460774F5.5080704@pobox.com>
Message-ID: <46094626.1050903@gov.yk.ca>

> As discussed on gdal-dev, the GDAL bug database has been migrated from
> Bugzilla at http://bugzilla.remotesensing.org to Trac at:
> 
>   http://trac.osgeo.org/gdal

thank you everyone who worked to bring this together!


> The new Trac instance uses OSGeo userids for authentication.  The main
> page at http://trac.osgeo.org/gdal contains pointers for how to get
> an OSGeo userid (the same as we use for subversion).

At the moment that page does not have any info for acquring OSGeo id's, 
it just says you need one. How do non-developers submit and give 
feedback to bugs?


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From sy at perkins.net  Tue Mar 27 15:43:34 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
Message-ID: <460973E6.3040106@perkins.net>

Can someone clarify for me the purpose of the "local" coordinate system 
which appears in the OGR API docs? I'm guessing this is for user-defined 
special purpose projections?

In dealing with layers that don't have any georeferencing, I'm looking 
for a convenient place to put a tag saying whether the coordinates in 
the layer have the y-axis running up vs. down the screen. One 
possibility I'm considering is to define a local coordinate system for 
these layers and store the tag there.

Using the C# bindings, I thought I could just do something like:

OGR.SpatialReference ref = new OGR.SpatialReference("LOCALCS[\"MAP\"]") 


and then call things like

ref.IsLocalCS()


However, that doesn't seem to work - the latter still returns false (or 
rather 0 - but shouldn't we have bools here?).

I then turned to the SetLocalCS() method, but the bindings for that 
don't seem to exist. Is adding them just a question of adding the 
appropriate line to the SWIG ogr.i file, using the SetProjCS() entry as 
a template? How do I then retrieve the name of the local coordinate 
system? Using GetAttrValue("LOCALCS")?

While I'm here, what's the difference between OGR.SpatialReference and 
OSR.SpatialReference? Why are there two such similar namespaces?

Cheers!

Simon



From warmerdam at pobox.com  Tue Mar 27 16:23:34 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL/OGR Bugzilla Migrated to Trac
In-Reply-To: <46094626.1050903@gov.yk.ca>
References: <460774F5.5080704@pobox.com> <46094626.1050903@gov.yk.ca>
Message-ID: <46097D46.8040107@pobox.com>

Matt Wilkie wrote:
>> As discussed on gdal-dev, the GDAL bug database has been migrated from
>> Bugzilla at http://bugzilla.remotesensing.org to Trac at:
>>
>>   http://trac.osgeo.org/gdal
> 
> thank you everyone who worked to bring this together!
> 
> 
>> The new Trac instance uses OSGeo userids for authentication.  The main
>> page at http://trac.osgeo.org/gdal contains pointers for how to get
>> an OSGeo userid (the same as we use for subversion).
> 
> At the moment that page does not have any info for acquring OSGeo id's, 
> it just says you need one. How do non-developers submit and give 
> feedback to bugs?

Matt,

The first paragraph reads:

Wiki editing, and and some bug modification options require "logging in" (link)
first using an OSGeo userid. You can also "search" (link) for your existing
userid, or "create" (link) an OSGeo userid.

Follow the "create" link to create an osgeo userid.

Obviously this isn't clear since lots of people are having problems with it.
Luckily it's a wiki so better communicators than I can improve it.

I don't know how to add a "Register" link up by the login link near the top.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From richard.matsunaga at waypointinfo.com  Tue Mar 27 16:19:16 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
In-Reply-To: <460973E6.3040106@perkins.net>
References: <460973E6.3040106@perkins.net>
Message-ID: <004401c770ad$326bd7d0$c6012b0a@Richard>

 
Coincidentally, I had the same question myself today. In my case, it came up
because I am taking the spatial reference from a GDAL datasource and setting
it in an OGR datasource.

To do so is a little funky - get a wkt string from GetProjectionRef() from
the GDAL Dataset, then create a OSGeo.OGR.SpatialReference from the wkt
string. I guess this has always been the case with GDAL and OGR?

Also, why is there a GetProjection() and GetProjectionRef() on the Dataset
class, both returning strings? There seems to be only one such method in the
C API (GDALGetProjectionRef).

Richard

> -----Original Message-----
> From: gdal-dev-bounces@lists.maptools.org 
> [mailto:gdal-dev-bounces@lists.maptools.org] On Behalf Of 
> Simon Perkins
> 
> While I'm here, what's the difference between 
> OGR.SpatialReference and OSR.SpatialReference? Why are there 
> two such similar namespaces?
> 
> Cheers!
> 
> Simon


From richard.matsunaga at waypointinfo.com  Tue Mar 27 16:24:15 2007
From: richard.matsunaga at waypointinfo.com (Richard Matsunaga)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] ReadBlock in C#
Message-ID: <004501c770ad$e497b870$c6012b0a@Richard>

Why is the ReadBlock (and WriteBlock for that matter) method not included in
the SWIG wrapper?
 
Equivalent functionality is possible with ReadRaster, but this is not as
elegant as using ReadBlock, especially since there is such a nice example in
the ReadBlock documentation. Is there a list of methods that are not
supported by SWIG (and why they are not supported)?
 
Regards,
Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070327/297d50f0/attachment.html
From Shaun.Kolomeitz at epa.qld.gov.au  Tue Mar 27 16:55:44 2007
From: Shaun.Kolomeitz at epa.qld.gov.au (Shaun Kolomeitz)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL - Condor/HPC - Image Libraries
Message-ID: <4F51CF02179D2247B9ED6AFA54E2DF6E01CBFC51@BNEXVS02.prod.ad.internal>

Dear GDal-Dev,

My apologies that this isn't strictly a development issue.
I am investigating the option for using Condor (or another High
Performance / Distributed Computing application) for processing
thousands of images using GDAL into larger merged tiles.
Our OS environment is Windows XP, and I was wondering if anyone has had
any success in doing this.
Once I've got these together I'd like to setup an image library for
people to be able to find the imagery that we have (even if we don't
strictly manage that imagery). Is this perhaps a WFS application of
could I get by with something a bit more basic ?

Thanks in advance.
Regards,
Shaun

___________________________
Disclaimer

WARNING: This e-mail (including any attachments) has originated from a Queensland Government department and may contain information that is confidential, private, or covered by legal professional privilege, and may be protected by copyright.  

You may use this e-mail only if you are the person(s) it was intended to be sent to and if you use it in an authorised way.  No one is allowed to use, review, alter, transmit, disclose, distribute, print or copy this e-mail without appropriate authority.  If you have received this e-mail in error, please inform the sender immediately by phone or e-mail and delete this e-mail, including any copies, from your computer system network and destroy any hardcopies.

Unless otherwise stated, this e-mail represents the views of the sender and not the views of the Environmental Protection Agency.

Although this e-mail has been checked for the presence of computer viruses, the Environmental Protection Agency provides no warranty that all viruses have been detected and cleaned. Any use of this e-mail could harm your computer system.  It is your responsibility to ensure that this e-mail does not contain and is not affected by computer viruses, defects or interference by third parties or replication problems (including incompatibility with your computer system).

E-mails sent to and from the Environmental Protection Agency will be electronically stored, managed and may be audited, in accordance with the law and Queensland Government Information Standards (IS31, IS38, IS40, IS41 and IS42) to the extent they are consistent with the law.

___________________________



From matt.wilkie at gov.yk.ca  Tue Mar 27 17:12:08 2007
From: matt.wilkie at gov.yk.ca (Matt Wilkie)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL/OGR Bugzilla Migrated to Trac
In-Reply-To: <46097D46.8040107@pobox.com>
References: <460774F5.5080704@pobox.com> <46094626.1050903@gov.yk.ca>
	<46097D46.8040107@pobox.com>
Message-ID: <460988A8.5040508@gov.yk.ca>

> The first paragraph reads:
...
> Follow the "create" link to create an osgeo userid.
> 
> Obviously this isn't clear since lots of people are having problems
> with it. Luckily it's a wiki so better communicators than I can
> improve it.

urkh! I don't know how I missed that. I did read the paragraph a couple 
of times. Anyhow, I took a crack at rewording to clear up the confusion.

cheers,


-- 
matt wilkie
--------------------------------------------
Geographic Information,
Information Management and Technology,
Yukon Department of Environment
10 Burns Road * Whitehorse, Yukon * Y1A 4Y9
867-667-8133 Tel * 867-393-7003 Fax
http://environmentyukon.gov.yk.ca/geomatics/
--------------------------------------------


From warmerdam at pobox.com  Tue Mar 27 17:24:16 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] ReadBlock in C#
In-Reply-To: <004501c770ad$e497b870$c6012b0a@Richard>
References: <004501c770ad$e497b870$c6012b0a@Richard>
Message-ID: <46098B80.4020500@pobox.com>

Richard Matsunaga wrote:
> Why is the ReadBlock (and WriteBlock for that matter) method not 
> included in the SWIG wrapper?
>  
> Equivalent functionality is possible with ReadRaster, but this is not as 
> elegant as using ReadBlock, especially since there is such a nice 
> example in the ReadBlock documentation. Is there a list of methods that 
> are not supported by SWIG (and why they are not supported)?

Richard,

I believe that ReadBlock() is not available from the SWIG interface because
it would mean a need for a batch of GDALRasterBlock interfaces.  Direct
access to raster blocks is mostly for internal use within drivers and I
now try to discourage even C/C++ applications from using it.

This could be reconsidered if there was a compelling need, but I'd rather
have applications use RasterIO() and it's SWIG equivelents.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Tue Mar 27 18:12:36 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] ReadBlock in C#
In-Reply-To: <004501c770ad$e497b870$c6012b0a@Richard>
References: <004501c770ad$e497b870$c6012b0a@Richard>
Message-ID: <f3b73b7d0703271512y71456043jc27c1b662005eb11@mail.gmail.com>

Richard,

>From the C#'s perspective it would not be so difficult to implement
this feature. The 'void * pData' should probably be mapped to various
types of arrays or the generic IntPtr type.

However I have some doubts why would it be more efficient than calling
the ReadRaster/WriteRaster functions in exchange for the additional
problems may occur due to the possible errors when passing incorrect
parameters.
In addition I cannot see how to avoid the extra array copy when
marsaling the code between the C and the C# memory. Or would you
possibly use the native pointer with the fixed statement inside an
unsafe block?

Generally I have no objection implementing this functionality if you
guys could explain some use cases when it was really useful, and
submit a ticket with a brief description of the the desired operation.
This applies also to the other kind of the requested features as well.
I think we would not want to intentionally restrict the fuctionality
of the API and the user who really uses the interface could eventually
denote functionality that is missing but should exist.


Best regards,

Tamas




2007/3/27, Richard Matsunaga <richard.matsunaga@waypointinfo.com>:
>
>
> Why is the ReadBlock (and WriteBlock for that matter) method not included in
> the SWIG wrapper?
>
> Equivalent functionality is possible with ReadRaster, but this is not as
> elegant as using ReadBlock, especially since there is such a nice example in
> the ReadBlock documentation. Is there a list of methods that are not
> supported by SWIG (and why they are not supported)?
>
> Regards,
> Richard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From sy at perkins.net  Tue Mar 27 18:59:22 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] ReadBlock in C#
In-Reply-To: <f3b73b7d0703271512y71456043jc27c1b662005eb11@mail.gmail.com>
References: <004501c770ad$e497b870$c6012b0a@Richard>
	<f3b73b7d0703271512y71456043jc27c1b662005eb11@mail.gmail.com>
Message-ID: <4609A1CA.9000406@perkins.net>

Tamas Szekeres wrote:
>
> However I have some doubts why would it be more efficient than calling
> the ReadRaster/WriteRaster functions in exchange for the additional
> problems may occur due to the possible errors when passing incorrect
> parameters.
> In addition I cannot see how to avoid the extra array copy when
> marsaling the code between the C and the C# memory. Or would you
> possibly use the native pointer with the fixed statement inside an
> unsafe block?

We talked about having an unsafe version of Read/WriteRaster that 
avoided the array copy a while back. Did it make it in there?

Cheers,

Sy


From szekerest at gmail.com  Tue Mar 27 19:04:32 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
In-Reply-To: <460973E6.3040106@perkins.net>
References: <460973E6.3040106@perkins.net>
Message-ID: <f3b73b7d0703271604w1f4309e0w71835ca83dcd3507@mail.gmail.com>

2007/3/27, Simon Perkins <sy@perkins.net>:
>
> While I'm here, what's the difference between OGR.SpatialReference and
> OSR.SpatialReference? Why are there two such similar namespaces?
>

Simon,

Some of the OGR classes like DataSource, Geometry, Layer internally
use the SpatialReference class which requires the internal reference
to the unmanaged memory to be passed between the classes. In this
regard it was not really reasonable to put these classes into
different assemblies and make these accessors public instead of
internal. In addition placing these classes into different namespaces
(within the same assembly) would require using fully qualified names
or 'using' directives inside the generated wrappers.

When the user would like to use the SpatialReference class along with
the OGR classes the OSGeo.OGR.SpatialReference should be used. If
someone would like to use solely the osr functionality it would be
enough to use the osr_csharp.dll and the classes within the OSGeo.OSR
namespace. However, I consider that the latter is rarely used.

Best regards,

Tamas

From sy at perkins.net  Tue Mar 27 19:05:06 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] ReadBlock in C#
In-Reply-To: <4609A1CA.9000406@perkins.net>
References: <004501c770ad$e497b870$c6012b0a@Richard>
	<f3b73b7d0703271512y71456043jc27c1b662005eb11@mail.gmail.com>
	<4609A1CA.9000406@perkins.net>
Message-ID: <4609A322.1040501@perkins.net>

Simon Perkins wrote:
> Tamas Szekeres wrote:
>>
>> However I have some doubts why would it be more efficient than calling
>> the ReadRaster/WriteRaster functions in exchange for the additional
>> problems may occur due to the possible errors when passing incorrect
>> parameters.
>> In addition I cannot see how to avoid the extra array copy when
>> marsaling the code between the C and the C# memory. Or would you
>> possibly use the native pointer with the fixed statement inside an
>> unsafe block?
>
> We talked about having an unsafe version of Read/WriteRaster that 
> avoided the array copy a while back. Did it make it in there?

Yes, there does seem to be a Band.ReadRaster() that takes an IntPtr to a 
buffer. You can either use the fixed statement to get pointer to an 
array, which you then pass as an IntPtr, or you can get an IntPtr 
directly from structures like Bitmap using the BitmapData methods.

These avoid a copy. Note that if you invoke ReadRaster with buffers that 
are the same size as the data block and you're not doing any type 
conversion or rescaling, then ReadRaster will pretty much call the 
underlying ReadBlock() directly anyway, so there's not really much 
reason to expose it.

Cheers,

Sy


From sy at perkins.net  Tue Mar 27 19:10:21 2007
From: sy at perkins.net (Simon Perkins)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
In-Reply-To: <f3b73b7d0703271604w1f4309e0w71835ca83dcd3507@mail.gmail.com>
References: <460973E6.3040106@perkins.net>
	<f3b73b7d0703271604w1f4309e0w71835ca83dcd3507@mail.gmail.com>
Message-ID: <4609A45D.7000608@perkins.net>

Tamas Szekeres wrote:
>
> When the user would like to use the SpatialReference class along with
> the OGR classes the OSGeo.OGR.SpatialReference should be used. If
> someone would like to use solely the osr functionality it would be
> enough to use the osr_csharp.dll and the classes within the OSGeo.OSR
> namespace. However, I consider that the latter is rarely used.

Hmmm....

Does anyone else ever get the feeling that we (well, OK, Tamas, mainly) 
put so much effort into tweaking SWIG to produce a decent C# interface 
that it would have been easier just to maintain a manually created set 
of C# bindings?

Just kidding. Maybe... :)

Thanks!

Sy


From szekerest at gmail.com  Tue Mar 27 19:51:49 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
In-Reply-To: <4609A45D.7000608@perkins.net>
References: <460973E6.3040106@perkins.net>
	<f3b73b7d0703271604w1f4309e0w71835ca83dcd3507@mail.gmail.com>
	<4609A45D.7000608@perkins.net>
Message-ID: <f3b73b7d0703271651t35ba6516t6180856e7f5823f6@mail.gmail.com>

2007/3/28, Simon Perkins <sy@perkins.net>:

> Does anyone else ever get the feeling that we (well, OK, Tamas, mainly)
> put so much effort into tweaking SWIG to produce a decent C# interface
> that it would have been easier just to maintain a manually created set
> of C# bindings?
>

lol.

Actually it takes 1-2% of extra work customizing the created interface
as compared to creating it from scratch. Having proper typemaps and
methodology dramatically shortens the task of adding new interface
elements at a later phase. Doing the same with the hand made C# api
would require to bother with reimplementing similar functionality
repeatedly.

In the aforementioned particular case it was not a big deal to
slightly alter the compilation process when compiling the OGR related
stuff. Moreover this approach is much more logical since the
spatialreference is part of the ogr project and we have no separate
osr project to be handled separately.

I can always see a significant benefit in applying a well constructed
source code generator in a particular project. I provides a feasible
way for the implementor having to deal with only the application
specific parts of the implementation.

In the future - possibly - this appspecific part of the implementation
will also be created by softwares results in a number of unemployed
programmers on the ground.  ;-)


Best regards,

Tamas

From woodbri at swoodbridge.com  Tue Mar 27 20:55:28 2007
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] gdal/mapserver debug output, What does it mean?
Message-ID: <4609BD00.5070808@swoodbridge.com>

Hi Frank,

I am looking into tuning GDAL/mapserver for a bunch of raster data and I 
remember you saying that you output additional GDAL info when DEBUG is 
on. What does it mean? and is it helpful in tuning mapserver or 
determining what overviews I need to generate.


[Tue Mar 27 23:31:37 2007] [error] [client 129.44.191.48] [Tue Mar 27 
23:31:37 2007].930822 msDrawRasterLayerLow(test): entering., referer: 
http://localhost/sw/
[Tue Mar 27 23:31:37 2007] [error] [client 129.44.191.48] [Tue Mar 27 
23:31:37 2007].999147 msDrawGDAL(): src=3980,3648,232,185, 
dst=0,0,500,400, referer: http://localhost/sw/
[Tue Mar 27 23:31:37 2007] [error] [client 129.44.191.48] [Tue Mar 27 
23:31:37 2007].999196 msDrawGDAL(): red,green,blue,alpha bands = 
1,2,3,0, referer: http://localhost/sw/
[Tue Mar 27 23:31:38 2007] [error] [client 129.44.191.48] [Tue Mar 27 
23:31:38 2007].122412 msDrawMap(): Layer 0 (test), 0.192s, referer: 
http://localhost/sw/

I assume the interesting part is the src= and dst= is there other output 
that I should be looking at? how would I turn that on?

As I zoom out I get lots of records like the above. I assume one for 
every tif file that gets opened. I currently do not have any overviews 
built into the image files. I am also wondering at what point does it 
make sense to create an external overview and if there are any scripts 
that would generate these.

All the data is in 3.75x3.75 minute squares in geographic projection and 
is a mix of one and two meter per pixel resolution imagery.

Thanks,
   -Steve

From warmerdam at pobox.com  Tue Mar 27 21:41:22 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] gdal/mapserver debug output, What does it mean?
In-Reply-To: <4609BD00.5070808@swoodbridge.com>
References: <4609BD00.5070808@swoodbridge.com>
Message-ID: <4609C7C2.8040005@pobox.com>

Stephen Woodbridge wrote:
> Hi Frank,
> 
> I am looking into tuning GDAL/mapserver for a bunch of raster data and I 
> remember you saying that you output additional GDAL info when DEBUG is 
> on. What does it mean? and is it helpful in tuning mapserver or 
> determining what overviews I need to generate.
> 
> 
> [Tue Mar 27 23:31:37 2007] [error] [client 129.44.191.48] [Tue Mar 27 
> 23:31:37 2007].930822 msDrawRasterLayerLow(test): entering., referer: 
> http://localhost/sw/
> [Tue Mar 27 23:31:37 2007] [error] [client 129.44.191.48] [Tue Mar 27 
> 23:31:37 2007].999147 msDrawGDAL(): src=3980,3648,232,185, 
> dst=0,0,500,400, referer: http://localhost/sw/
> [Tue Mar 27 23:31:37 2007] [error] [client 129.44.191.48] [Tue Mar 27 
> 23:31:37 2007].999196 msDrawGDAL(): red,green,blue,alpha bands = 
> 1,2,3,0, referer: http://localhost/sw/
> [Tue Mar 27 23:31:38 2007] [error] [client 129.44.191.48] [Tue Mar 27 
> 23:31:38 2007].122412 msDrawMap(): Layer 0 (test), 0.192s, referer: 
> http://localhost/sw/

Steve,

The src= is the pixel window being read from the file on disk, and
the dst= is the pixel window in the map buffer.  So in the above
example src=3980,3648,232,185, dst=0,0,500,400 means that a small
window out of the source file is being replicated a bit and apparently
covers the whole destination bitmap (assuming that is 500x400).

> I assume the interesting part is the src= and dst= is there other output 
> that I should be looking at? how would I turn that on?

You should watch for an msResample message, which I see you don't get.
If you see that, it means the general resampling engine is being used
(the same as is used for reprojection) and performance will be degraded.

> As I zoom out I get lots of records like the above. I assume one for 
> every tif file that gets opened. I currently do not have any overviews 
> built into the image files. I am also wondering at what point does it 
> make sense to create an external overview and if there are any scripts 
> that would generate these.

If the src window is much larger than the destination window, then you
are in a situation where in-file overviews would be helpful. If you see
many of the src=/dst= lines for a single map request, then you know lots
of files on disk are getting touched.

My general rule of thumb is that at the scale where a single map requests
touches more than 16 tiff files, you should likely be trying to build a
new overview layer in your map file.

I don't have any handy scripts for generating such things, but you can use
Mapserver itself.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From rob.mcmullen at gmail.com  Tue Mar 27 21:18:20 2007
From: rob.mcmullen at gmail.com (Rob McMullen)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] patch for mingw bug in strdup
Message-ID: <a40be0e10703271818of756ec3mb229b55ec394e128@mail.gmail.com>

Using MinGW, there's a really strange bug that I can't yet isolate
completely, but occurs within msvcrt's strdup implementation.
Enclosed is a patch to duplicate the functionality of strdup but using
VSIMalloc, avoiding the problematic strdup.

If you didn't want to use this to replace strdup entirely, you could
wrap the new code with ifdefs:

#if defined(WIN32) && defined(__GCC__)

which should isolate this to MinGW only.

Rob
-------------- next part --------------
A non-text attachment was scrubbed...
Name: strdup-mingw-bug.patch
Type: application/octet-stream
Size: 611 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070327/5a2cde3d/strdup-mingw-bug.obj
From warmerdam at pobox.com  Tue Mar 27 22:02:06 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
In-Reply-To: <460973E6.3040106@perkins.net>
References: <460973E6.3040106@perkins.net>
Message-ID: <4609CC9E.8020707@pobox.com>

Simon Perkins wrote:
> Can someone clarify for me the purpose of the "local" coordinate system 
> which appears in the OGR API docs? I'm guessing this is for user-defined 
> special purpose projections?
> 
> In dealing with layers that don't have any georeferencing, I'm looking 
> for a convenient place to put a tag saying whether the coordinates in 
> the layer have the y-axis running up vs. down the screen. One 
> possibility I'm considering is to define a local coordinate system for 
> these layers and store the tag there.
> 
> Using the C# bindings, I thought I could just do something like:
> 
> OGR.SpatialReference ref = new OGR.SpatialReference("LOCALCS[\"MAP\"]")

Simon,

Your core problem is that you are using the keyword LOCALCS instead of
the required LOCAL_CS.

> and then call things like
> 
> ref.IsLocalCS()

BTW, I think the call is ref.IsLocal()

> However, that doesn't seem to work - the latter still returns false (or 
> rather 0 - but shouldn't we have bools here?).
> 
> I then turned to the SetLocalCS() method, but the bindings for that 
> don't seem to exist. Is adding them just a question of adding the 
> appropriate line to the SWIG ogr.i file, using the SetProjCS() entry as 
> a template? 

Yes.  In fact I have added this myself in trunk this evening.

 > How do I then retrieve the name of the local coordinate
> system? Using GetAttrValue("LOCALCS")?

Yes, but using "LOCAL_CS".

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Tue Mar 27 22:06:54 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] SetLocalCS() binding?
In-Reply-To: <004401c770ad$326bd7d0$c6012b0a@Richard>
References: <460973E6.3040106@perkins.net>
	<004401c770ad$326bd7d0$c6012b0a@Richard>
Message-ID: <4609CDBE.6000803@pobox.com>

Richard Matsunaga wrote:
>  
> Coincidentally, I had the same question myself today. In my case, it came up
> because I am taking the spatial reference from a GDAL datasource and setting
> it in an OGR datasource.
> 
> To do so is a little funky - get a wkt string from GetProjectionRef() from
> the GDAL Dataset, then create a OSGeo.OGR.SpatialReference from the wkt
> string. I guess this has always been the case with GDAL and OGR?

Richard,

Yes, this has always been different.  Originally GDAL returned PROJ.4 strings
from GetProjectionRef(), but then fairly early on I changed to using WKT.
But with the API already set to return strings I just left it that way.

OGR came on the scene a bit later, and used OGRSpatialReference from the start.

> Also, why is there a GetProjection() and GetProjectionRef() on the Dataset
> class, both returning strings? There seems to be only one such method in the
> C API (GDALGetProjectionRef).

I'd guess that originally GetProjectionRef() was wrapped directly, and
then later GetProjection() was introduced because the Ref concept doesn't
apply to most languages with built in string types.

I *think* that GetProjectionRef() ought to be considered deprecated.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From zhenchen17 at gmail.com  Wed Mar 28 02:28:28 2007
From: zhenchen17 at gmail.com (chen zhen)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Problems when compling OGR_SDE.dll
Message-ID: <ab9685bc0703272328n5e89f26cr9401d430e6ef35ce@mail.gmail.com>

I am a newer to OGR, There is an error occus when i complie ORG_SDE.dll.
My enviroment is Windows 2003 and VS 2005.
  what i done as follow:
 1- Uncomment section "SDE_ENABLED = YES
                                         SDE_VERSION=91
                                         SDE_PLUGIN = YES
                                        SDE_SDK = c:\arcgis\arcsde
                                        SDE_INC = $(SDE_SDK)\include
                                         SDE_LIB =
$(SDE_SDK)\lib\pe$(SDE_VERSION).lib \

 $(SDE_SDK)\lib\sde$(SDE_VERSION).lib
 $(SDE_SDK)\lib\sg$(SDE_VERSION).lib   " in nmake.opt
  2-install arcsde develop kit in "c:\arcgis\arcsde"
  3-use nmake commad to compile the gdal project.
when i cd the sde directory run the command "nmake /f makefile.vc
ogr_SDE.dll" ,there is an error occured "

Microsoft (R) Program Maintenance Utility   Version 6.00.8168.0
Copyright (C) Microsoft Corp 1988-1998. All rights reserved.

        link /dll /out:ogr_SDE.dll ogrsdedatasource.obj ogrsdedriver.objogrsdel
ayer.obj  ..\..\..\ c:\arcgis\arcsde\lib\pe91.lib
c:\arcgis\arcsde\lib\sde91.li
b c:\arcgis\arcsde\lib\sg91.lib
Microsoft (R) Incremental Linker Version 6.00.8168
Copyright (C) Microsoft Corp 1992-1998. All rights reserved.
LINK :   fatal error LNK1181: cannot open input file "..\..\..\.obj"
NMAKE : fatal error U1077: 'link' : return code '0x49d'
Stop."

I have no idea what is wrong with it!

I will be appreciate if anyone give me some instructions!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070328/485d51fd/attachment.html
From milo at 3dsite.nl  Wed Mar 28 04:44:53 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
References: <46090859.6020107@3dsite.nl>	
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>	
	<4609296F.8060101@3dsite.nl>
	<f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
Message-ID: <460A2B05.9030903@3dsite.nl>

Right Tamas!

That did the trick. I added the FWtools Bin dir to my path.

My question goes further. I use Transformpoint to transform a point like 
(123.01, 234.02,0) where Z is 0.

My source projection is Dutch: "Rijksdriehoekstelsel" a stereographic 
projection based upon the Bessel Ellipsoide
My target projection is lat/lon WGS84, the projection used by Google Earth.

Because of the difference in ellipsoids, my Z value changes too. the 
original 0 becomes a negative value in my case because the bessel 
ellipsoide is "flatter" then the WGS84 ellipsoid. However, my original Z 
value is relative to the terrain which is ok. It doesn't need to be 
transformed. Is there a parameter I can use to prevent it from transforming?

Kind regards,

Milo van der Linden

From milo at 3dsite.nl  Wed Mar 28 04:54:22 2007
From: milo at 3dsite.nl (Milo van der Linden)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
References: <46090859.6020107@3dsite.nl>	
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>	
	<4609296F.8060101@3dsite.nl>
	<f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
Message-ID: <460A2D3E.8070305@3dsite.nl>

Another thing:

The Transformpoint function takes an array of doubles. I input an array 
of 3 values (x,y,z) and it returns 4 values. What do the four return 
values mean?



From rob.mcmullen at gmail.com  Wed Mar 28 07:21:22 2007
From: rob.mcmullen at gmail.com (Rob McMullen)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Re: patch for mingw bug in strdup
In-Reply-To: <a40be0e10703271818of756ec3mb229b55ec394e128@mail.gmail.com>
References: <a40be0e10703271818of756ec3mb229b55ec394e128@mail.gmail.com>
Message-ID: <a40be0e10703280421x405e939fnf97160a7cc4d78a8@mail.gmail.com>

Following up on my own post...

> Using MinGW, there's a really strange bug that I can't yet isolate
> completely, but occurs within msvcrt's strdup implementation.

Actually, having slept on it, what I suspect is going on in that the
memory returned by msvnrt's strdup is not from the same pool as the
memory returned by malloc, so performing a realloc on a string
initially allocated by strdup is causing problems.

It seems that the single unix specification is ambiguous about strdup
and realloc:

http://www.opengroup.org/onlinepubs/009695399/functions/strdup.html

although given that it does say that the pointer returned by strdup
can be passed to free one would assume it would work to realloc...
unless the platform's implementation of free were smart enough to know
it was dealing with different pools of heap storage.

So, maybe it's worth it to use the strdup written using VSIMalloc
since it seems that the standard is ambiguous.

Rob

From warmerdam at pobox.com  Wed Mar 28 16:22:11 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <460A2B05.9030903@3dsite.nl>
References: <46090859.6020107@3dsite.nl>	
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>	
	<4609296F.8060101@3dsite.nl>
	<f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
	<460A2B05.9030903@3dsite.nl>
Message-ID: <460ACE73.8000001@pobox.com>

Milo van der Linden wrote:
> My question goes further. I use Transformpoint to transform a point like 
> (123.01, 234.02,0) where Z is 0.
> 
> My source projection is Dutch: "Rijksdriehoekstelsel" a stereographic 
> projection based upon the Bessel Ellipsoide
> My target projection is lat/lon WGS84, the projection used by Google Earth.
> 
> Because of the difference in ellipsoids, my Z value changes too. the 
> original 0 becomes a negative value in my case because the bessel 
> ellipsoide is "flatter" then the WGS84 ellipsoid. However, my original Z 
> value is relative to the terrain which is ok. It doesn't need to be 
> transformed. Is there a parameter I can use to prevent it from 
> transforming?

Milo,

In an earlier message you used:

   +proj=latlong +datum=WGS84 +no_defs

and

   +proj=somerc +lat_0=47.14439372222222 +lon_0=19.04857177777778 \
         +x_0=650000 +y_0=200000 +ellps=GRS67 +units=m +no_defs

you don't include any information in your somerc projection indicating
how you want to transform to wgs84.  So by default PROJ.4 will convert
your location to geocentric coordinates on the GRS67 ellipse, and
then back to lat/long/elev on WGS84.

If you know proper datum shift parameters, add them to your somerc
declaration (eg . +towgs84=10,434,9)

If you don't know them, and you want to avoid a change of ellipsoid
calculation internally just use "+proj=latlong +ellps=GRS67" for
your geographic coordinate system.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From szekerest at gmail.com  Wed Mar 28 17:11:28 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <460A2D3E.8070305@3dsite.nl>
References: <46090859.6020107@3dsite.nl>
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>
	<4609296F.8060101@3dsite.nl>
	<f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
	<460A2D3E.8070305@3dsite.nl>
Message-ID: <f3b73b7d0703281411o811e837g7694d42e4dba3992@mail.gmail.com>

Milo,

I wonder why you have run into this issue. TransformPoint will not
alter the length of that array.
Would you post a sample to reproduce this problem?

Best regards,

Tamas


2007/3/28, Milo van der Linden <milo@3dsite.nl>:
> Another thing:
>
> The Transformpoint function takes an array of doubles. I input an array
> of 3 values (x,y,z) and it returns 4 values. What do the four return
> values mean?
>
>
>

From szekerest at gmail.com  Wed Mar 28 19:19:57 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL with VB.net (VS 2005 Express)
In-Reply-To: <460AE436.2040902@3dsite.nl>
References: <46090859.6020107@3dsite.nl>
	<f3b73b7d0703270535j105cb971m76e12dc46189e2b2@mail.gmail.com>
	<4609296F.8060101@3dsite.nl>
	<f3b73b7d0703270809i6547eee4r139d6ccde979e736@mail.gmail.com>
	<460A2D3E.8070305@3dsite.nl>
	<f3b73b7d0703281411o811e837g7694d42e4dba3992@mail.gmail.com>
	<460AE436.2040902@3dsite.nl>
Message-ID: <f3b73b7d0703281619o258428l42da79174e45b16@mail.gmail.com>

Milo,

I guess it might be a visual basic related issue since when doing the
same in C# the array size is not altered. AFAIK, VB uses 1 based
arrays so it might allocate the array with size+1 by default. However
I will try this if I have time.


Best regards,

Tamas


2007/3/28, Milo van der Linden <milo@3dsite.nl>:
>
>  Hello Tamas and Frank,
>
>  Again thank you for the responses! I pretty much figured things out,  but I
> still don't know why I get an array of 4 doubles returned from the
> TransformPoint function, can it be that the return values are:
>  X, Y, relative-height between fromEllipsoide - toEllipsoide, absolute
> height?
>
>  I also found out that the way the developers at MapWindow implemented this
> is not correct, they do not take action on the towgs84 when the source
> ellipsoid is different from the target ellipsoid. They also work only with
> shape files, which I think is a missed change with the wonderful generic
> options that ogr offers!
>
>  Right now I use the fourth value in the array as my Z-value, because it
> seems to represent absolute height, since I drape my layer on the terrain in
> GoogleEarth, this is appropriate enough. Attached you will find a small
> sample file in kml format. If you load it in Google Earth, you will see the
> shift.
>
>  Here is a (VB.net) code snippet (put a reference in your project to
> ogr_csharp, no other references are needed):
>
>  'Add the next lines in the top of the module:
>  Imports OGR
>  Imports OGR.ogr
>
>  'In the calling subroutine, I open a GIS layer with Ogr.ogr.open:
>
>                      ds = OGR.ogr.Open(sFile, 0)
>                      Dim drv As OGR.Driver = ds.GetDriver()
>                      For j = 0 To ds.GetLayerCount - 1
>                      Dim lyr As Layer = ds.GetLayerByIndex(j)
>
>                      Dim RDproj4 = "+proj=stere +lat_0=52.156160556
> +lon_0=5.387638889 +k=0.999908 +x_0=155000 +y_0=463000 +ellps=bessel
> +towgs84=593,26,478,0,0,0,0 +units=m +no_defs"
>                      Dim WGS84proj4 As String = "+proj=longlat +ellps=WGS84
> +datum=WGS84 +no_defs"
>
>  'Get the source SpatialReference from the layer
>              Dim sr1 As SpatialReference = lyr.GetSpatialRef
>
>   'Create the destination Spatialreference for GoogleEarth
>              Dim sr2 As New SpatialReference("")
>              sr2.ImportFromProj4(WGS84proj4)
>
>  'I can call my TransFormPoint Function in 2 ways:
>
>  result = TransFormPoint(sr1, sr2, myPnt)
>  'or
>  result = TransFormPoint(RDproj4, WGS84proj4, myPnt)
>
>  'the Point is in an internal Geometry class, not the ogr geometry class.
>
>  'both methods give the exact same result, and it seems to be the right
> result! There is still a shift when presenting the results in Google Earth,
> but this can also be because the imagery is shifted, I am in contact with
> Aerodata in order to get the answer whether the image-shift is there on
> purpose.
>
>  'I use two constructors for the TransformPoint:
>
>  Public Function TransformPoint(ByVal srcSR As SpatialReference, ByVal dstSR
> As SpatialReference, ByVal pnt As Geometry.Point) As Geometry.Point
>  'Reads the SpatialReference from the source GIS file
>
>          Dim tPnt As New Geometry.Point
>          Dim ct As CoordinateTransformation
>          '/*
> --------------------------------------------------------------------
> */
>          '/*      making the transform
>                       */
>          '/*
> --------------------------------------------------------------------
> */
>
>          ct = New CoordinateTransformation(srcSR, dstSR)
>          Dim p(3) As Double
>          p(0) = pnt.x
>          p(1) = pnt.y
>          p(2) = pnt.z
>          ct.TransformPoint(p)
>          Debug.Print("x:" & p(0) & " y:" & p(1) & " z:" & p(3))
>          'The Z value has to remain relative to the terrain
>          tPnt.x = p(0)
>          tPnt.y = p(1)
>          tPnt.z = p(3)
>          'tPnt.z = pnt.z
>          Return tPnt
>  End Function
>
>  Public Function TransformPoint(ByVal src As String, ByVal dst As String,
> ByVal pnt As Geometry.Point) As Geometry.Point
>          Dim tPnt As New Geometry.Point
>          Dim dstSR As SpatialReference
>          Dim srcSR As SpatialReference
>          Dim ct As CoordinateTransformation
>          '/*
> --------------------------------------------------------------------
> */
>          '/*      Initialize srs
>                       */
>          '/*
> --------------------------------------------------------------------
> */
>
>          srcSR = New SpatialReference("")
>          srcSR.ImportFromProj4(src)
>          Debug.Print("SOURCE IsGeographic:" & srcSR.IsGeographic().ToString
> & " IsProjected:" & srcSR.IsProjected().ToString)
>
>          dstSR = New SpatialReference("")
>          dstSR.ImportFromProj4(dst)
>          Debug.Print("DEST IsGeographic:" & dstSR.IsGeographic().ToString &
> " IsProjected:" & dstSR.IsProjected().ToString)
>
>          '/*
> --------------------------------------------------------------------
> */
>          '/*      making the transform
>                       */
>          '/*
> --------------------------------------------------------------------
> */
>
>          ct = New CoordinateTransformation(srcSR, dstSR)
>          Dim p(3) As Double
>          p(0) = pnt.x
>          p(1) = pnt.y
>          p(2) = pnt.z
>          ct.TransformPoint(p)
>          Debug.Print("x:" & p(0) & " y:" & p(1) & " z:" & p(3))
>          'The Z value has to remain relative to the terrain
>          tPnt.x = p(0)
>          tPnt.y = p(1)
>          tPnt.z = p(3)
>          'tPnt.z = pnt.z
>          Return tPnt
>      End Function
>
>  Tamas Szekeres schreef:
> Milo,
>
>  I wonder why you have run into this issue. TransformPoint will not
>  alter the length of that array.
>  Would you post a sample to reproduce this problem?
>
>  Best regards,
>
>  Tamas
>
>
>  2007/3/28, Milo van der Linden <milo@3dsite.nl>:
>
> Another thing:
>
>  The Transformpoint function takes an array of doubles. I input an array
>  of 3 values (x,y,z) and it returns 4 values. What do the four return
>  values mean?
>
>
>
>
>
>
>

From aki.suvanto at joensuu.fi  Thu Mar 29 08:30:11 2007
From: aki.suvanto at joensuu.fi (Aki Suvanto)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] gdal_translate -co "PHOTOMETRIC=MINISBLACK" problem.
Message-ID: <1175171411.460bb153d74c3@wwwmail.joensuu.fi>

Hello,

I have a problem which relates to the gdal_translate and -co
"PHOTOMETRIC=MINISBLACK"

I'm trying to do mosaic with gdalwarp and I'm using 4 band 8 byte Geotiff aerial
images. Gdalwarp use the last band as Alpha so the mosaic image is not correct.


Therefore I have to change the last band something different than the alpha. If
I'm understand right the gdal_translate -co "PHOTOMETRIC=MINISBLACK" should
change the band ColorInterpretation from alpha to something else. This mosaic
process works fine with img-format, but it would be faster to use Geotiff
images.

So here are my commands:

gdal_translate -of Gtiff -co "PHOTOMETRIC=MINISBLACK" 1076.tif 1076_co.tif 

Input file size is 7563, 3462
0...10...20...30...40...50...60...70...80...90...100 - done.

gdalinfo 1076_co.tif

Driver: GTiff/GeoTIFF
Size is 7563, 3462
Coordinate System is `'
Origin = (306961.500000000000000,6961278.500000000000000)
Pixel Size = (0.500000000000000,-0.500000000000000)
Corner Coordinates:
Upper Left  (  306961.500, 6961278.500)
Lower Left  (  306961.500, 6959547.500)
Upper Right (  310743.000, 6961278.500)
Lower Right (  310743.000, 6959547.500)
Center      (  308852.250, 6960413.000)
Band 1 Block=7563x1 Type=Byte, ColorInterp=Red
Band 2 Block=7563x1 Type=Byte, ColorInterp=Green
Band 3 Block=7563x1 Type=Byte, ColorInterp=Blue
Band 4 Block=7563x1 Type=Byte, ColorInterp=Alpha
   
So if there is something wrong, please tell me.


Best regards,

Aki


From warmerdam at pobox.com  Thu Mar 29 17:27:33 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] GDAL Web Site Migration
Message-ID: <460C2F45.1050805@pobox.com>

Folks,

One objective of GDAL participation in OSGeo has been to share server
infrastructure with other Open Source projects.  As part of that effort
I am now decommissioning my personal co-located server, and moving the
GDAL web site to an OSGeo operated server provided by Telascience.

Over the next several days you may experience some problems in service.
If so, feel free to let me know.  In a pinch the GDAL web site is also
available as:

   http://gdal.osgeo.org/

and downloads are available at:

   http://download.osgeo.org/gdal

Things being migrated include:

   www.gdal.org
   ftp.remotesensing.org
   home.gdal.org

Currently it looks like I will be de-commissioning the maps.gdal.org domain,
so anyone using the WMS or WCS services on this domain should expect an end
of service.  I may eventually re-setup these services at:

    http://geodata.telascience.org,

but that is not certain.

Thank you for your patience during this transition.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From gok at aerometric-ak.com  Thu Mar 29 19:50:53 2007
From: gok at aerometric-ak.com (Gennady Khokhorin)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] gdal_rasterize(): line + tif = no output
Message-ID: <3054411AF4728548AD6D7137190D56B30C45FA@admin1.aeromap.com>

Hello, All.
Was trying to burn lines in tif image using gdal_rasterize() and got no changes on output.
"Vector polygons" as docs said are burning fine.
Is there a way to "draw" line/point in image?

Test data set:
ftp://aerometric-ak:amak2014@ftp.aerometric-ak.com go to gdal folder.

Thanks in advance,

Gennady


From warmerdam at pobox.com  Thu Mar 29 20:54:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] gdal_rasterize(): line + tif = no output
In-Reply-To: <3054411AF4728548AD6D7137190D56B30C45FA@admin1.aeromap.com>
References: <3054411AF4728548AD6D7137190D56B30C45FA@admin1.aeromap.com>
Message-ID: <460C5FB6.4020709@pobox.com>

Gennady Khokhorin wrote:
> Hello, All.
> Was trying to burn lines in tif image using gdal_rasterize() and got no changes on output.
> "Vector polygons" as docs said are burning fine.
> Is there a way to "draw" line/point in image?
> 
> Test data set:
> ftp://aerometric-ak:amak2014@ftp.aerometric-ak.com go to gdal folder.

Gennady,

At this time gdal_rasterize supports only polygons.  Not lines and points.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Mar 29 21:53:32 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: SoC Project Ranking
Message-ID: <460C6D9C.8080806@pobox.com>

Motion: The GDAL PSC ranks it's selection of Google Summer of Code projects
as follows, with the indicated mentors.

#1) GDAL Raster Driver for PNG/JPG Tile Structure + gdal2tiles utility
     Student: Petr Prindal
     Mentor: Howard Butler

#2) GDAL: KML read support for the existing driver
     Student: Jens Oberender
     Mentor: Mateusz Loskot

#3) A Synthetic Aperture RADAR Processor using GDAL
     Student: Philippe Vachon
     Mentor: Frank Warmerdam

#4) OGC WMS GDAL Driver
     Student: Adam Nowaki
     Mentor: Daniel Morissette

----

As part of the application to the Google Summer of Code we need to
rank our projects, and assign mentors.  Since Jens is already being ranked
for the KML reading project, the GeoRSS driver project he also proposed is
being ignored.  The PSC feels that all the above projects are of interest,
and that the mentors are capable of supporting the students.

The rankings need to be provided to the OSGeo Google Summer of Code admin
(aka me) by Monday so voting should start on this now.

+1 from Frank

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Thu Mar 29 22:21:27 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: GDAL/OGR 1.4.1 Release Timing
Message-ID: <460C7427.7030705@pobox.com>

Folks,

I have been meaning to have a 1.4.1 release for a month and a half or so.
A review of bug reports post transition to Trac shows lots of stuff that
*could* still be fixed in the stable branch, but there isn't too much that
is terrible critical to my mind.

So I'd like to suggest that we aim for a GDAL/OGR 1.4.1 beta Thursday
April 5th with the intent to produce a 1.4.1 release on Monday April 9th.

The open bugs logged against the 1.4.1 milestone can be found at:

http://trac.osgeo.org/gdal/query?status=new&status=assigned&status=reopened&milestone=1.4.1http://trac.osgeo.org/gdal/query?status=new&status=assigned&status=reopened&milestone=1.4.1

My intent is that we would fix whatever we can by Thursday, at which point
the remaining bugs would be reassigned to the 1.4.2 milestone, and we would
just go ahead.

We haven't really had much in the way of official release process in the past.
For this stable release I'll try this motion:

----

Motion: Frank Warmerdam will lead a GDAL/OGR 1.4.1 stable release with a beta
released on Thursday April 5th, and a final release on Monday April 9th
barring an objection from a PSC member at any point before for the final
release.

----

+1 Frank

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From Paavo.Jumppanen at csiro.au  Fri Mar 30 02:04:54 2007
From: Paavo.Jumppanen at csiro.au (Paavo.Jumppanen@csiro.au)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Possible enhanced NetCDF support in GDAL.
Message-ID: <C8085FAD5A0F274187122B8E2550DA1D03D4FB@extas4-hba.tas.csiro.au>

Hello,

I've been using the gdal-1.2.6 distribtion as part of a MapServer build
and have had need to access netCDF files. I found the netCDF driver too
inflexible to read the files I needed to access and have customised the
driver code to be more flexible. The implementation I have currently
works very well and I'm happy to make it available for adapatation /
inclusion into future releases of gdal. I don't know the correct
protocol for this nor whether the gdal team are interested so I'm asking
you now. What should I do. 

To illustrate the changes I have made to the gdal netCDF driver and to
possibly gain your interest in it I'll now attempt to describe it. The
original driver assumes a particular netCDF file structure and variable
names. For my modified driver I have chosen to explicitely specify how
the driver should read the file in a generic fashion. I have achieved
this by having a xml file that specifies which nc file and how to
interpret it that you construct for every nc file that you wish to read.
Then when the driver opens a file it accepts either the properly
constructed xml file or the traditional nc file as a valid format. If an
nc file then it interprets it in identical fashion to the original
driver for backward compatibility. The xml file format required is as
follows and is taken directly from a comment block within my modified
code:

// This is a more advanced means of opening netCDF files that allows
raster 
// information to be extracted from files whose data is not held in the 
// structure assumed by the original netCDF driver code. The XML file
referenced 
// by poOpenInfo contains meta data instructing this driver on which cdf
file to 
// open and how it should interpret the data within.
// 
// XML file format for specification as follows:
//
//  <CDF>
//    <FileName>{name}</FileName>
//    <DimNameLon>{name}</DimNameLon>
//    <DimNameLat>{name}</DimNameLat>
//    <Variable>{name}</Variable>
//    <Units>{name}</Units>
//    <NumberOfBands>{value}</NumberOfBands>
//    <NoDataValue>{value}</NoDataValue>
//
//    <Extent>
//      <Top>{value}</Top>
//      <Left>{value}</Left>
//      <Bottom>{value}</Bottom>
//      <Right>{value}</Right>
//    </Extent>
//
//    <Range>
//      <Minimum>{value}</Minimum>
//      <Maximum>{value}</Maximum>
//
//      <ColorTable>
//        <NumberOfEntries>{value}</NumberOfEntries>
//
//        <Scheme>
//          <Hue>{Start value} {End value}</Hue>
//          <Lightness>{Start value} {End value}</Lightness>
//          <Saturation>{Start value} {End value}</Saturation>
//        </Scheme>
//
//        <Type>{name}</Type>
//        <Entry1>{Value 1} {Value 2} {Value3} {Value4}<Entry1>
//        <Entry2>{Value 1} {Value 2} {Value3} {Value4}<Entry2>
//        <Entry3>{Value 1} {Value 2} {Value3} {Value4}<Entry3>
//          .
//          .
//          .
//        <EntryX>{Value 1} {Value 2} {Value3} {Value4}<EntryX>
//      </ColorTable>
//    </Range> 
//
//    <Scaling>
//      <Scale>{value}</Scale>
//      <Offset>{value}</Offset>
//    </Scaling>
//
//    <Band1>
//      <{ExtraDimName1}>{value}</{ExtraDimName1}>
//      <{ExtraDimName2}>{value}</{ExtraDimName2}>
//        .
//        .
//        .
//      <{ExtraDimNameM}>{value}</{ExtraDimNameM}>
//    </Band1>
//
//    <Band2>
//      <{ExtraDimName1}>{value}</{ExtraDimName1}>
//      <{ExtraDimName2}>{value}</{ExtraDimName2}>
//        .
//        .
//        .
//      <{ExtraDimNameM}>{value}</{ExtraDimNameM}>
//    </Band2>
//      .
//      .
//      .
//    <BandN>
//      <{ExtraDimName1}>{value}</{ExtraDimName1}>
//      <{ExtraDimName2}>{value}</{ExtraDimName2}>
//        .
//        .
//        .
//      <{ExtraDimNameM}>{value}</{ExtraDimNameM}>
//    </BandN>
//  </CDF>
//
// FileName is the fully qualified name and path of the netCDF file you
are
// processing. DimNameLon and DimNameLat name the dimensions in the CDF
variable
// that correspond to longitudes and latitudes. If variable is a 2
dimension 
// array then NumberOfBands is implicitely 1. In such case NumberOfBands
is 
// irrelevent and so too are the <BandN> sections. 
//
// <Extent> is optional and specifies the co-ordinate extent of the
data. If 
// specified this is used to create the mapping for this raster data. 
//
// <Range> is optional and specifies the maximum and minimum data values
in 
// variable to consider to be usable data. 
//
// <Scaling> is optional and specifies the scale and offset parameters
to 
// apply to the variable data using simple linear scaling. 
//
// <ColourTable> is optional and if specified along with <Range> will
result in
// the driver colourising the image over the specified range using the
specified
// colour table. The colour entries are ordered from lowest to highest.
The 
// number of values required in each colour entry depends on the <Type>
which 
// may be one of Gray, RGB, CMYK or HLS. For Gray {Value1} is only
required. For
// RGB {Value1} is the red value, {Value2} is the green value, {Value3}
is the blue 
// value and {Value4}, which is optional, is the alpha value (alpha
blending?). 
// For CMYK {Value1} is the cyan value, {Value2} is the magenta value,
{Value3} 
// is the yellow value and {Value4} is the black value. For HLS {Value1}
is the 
// hue value, {Value2} is the lightness value and {Value3} is the
saturation value.
// The last index in the colour table is used to represent transparent
by setting
// the no data value to that index.  
//
// If <Scheme> is defined then the colour table colour entries and
<type> field
// are ignored and the colour table entries synthesised according to the
<Scheme>.
// The HLS colour type is used and the colour table entries are
generated by a 
// linear interpolation between the start and end HLS parameters. If
only one 
// value is given then the component is assumed constant with that
value.
//
// In the cases where the number of dimensions in Variable exceeds 2 you
must 
// specify the number of bands explicitely. Furthermore, each band must
have 
// a number of dimension definitions to specify the fixed dimension
values to
// use in accessing the Variable data. The entry names correspond to the

// dimension names in Variable and the values user specified. For an N
dimension 
// Variable you must have N-2 ExtraDimName entries whose names are
unique and 
// not duplicated in DimNameLon and DimNameLat. 

Modifications to the code were only made in the netcdfdataset.cpp and
gdalcolortable.cpp files and the changes are only ansi C/C++ without
reliance on other libraries. The changes I made to gdalcolortable.cpp
were ones to implement the HLS and CMYK colour models which had
skeletons but no implementations. 

Our typical application of this enhanced driver is to access and map
oceanographic data such as SST contained in annual or six monthly
aggregate files. These files typically have the data stored in 3d arrays
(lat, lon, time) and sometimes 4d arrays (lat, lon, time, depth). With
this modified driver it is simple to access a particular time slice for
viewing as map data. The ability to colourise the data with a
customisable colour table is a nice bonus. 

If you are interested in including it or a modified version of it into
new releases of gdal I'll gladly offer the code to you and bring it up
to date to the latest development version, though I can't promise much
commitment for furture maintenance. It would seem that this approach to
generalisation would possbily work well with other file formats such as
HDF.

Regards,


Paavo.


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070330/00ec0be1/attachment.html
From dron at ak4719.spb.edu  Fri Mar 30 05:52:12 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: SoC Project Ranking
In-Reply-To: <460C6D9C.8080806@pobox.com>
References: <460C6D9C.8080806@pobox.com>
Message-ID: <20070330095212.GA27403@ak4719.spb.edu>

On Thu, Mar 29, 2007 at 09:53:32PM -0400, Frank Warmerdam wrote:
> Motion: The GDAL PSC ranks it's selection of Google Summer of Code
> projects as follows, with the indicated mentors.
> 
> #1) GDAL Raster Driver for PNG/JPG Tile Structure + gdal2tiles utility
>     Student: Petr Prindal
>     Mentor: Howard Butler
> 
> #2) GDAL: KML read support for the existing driver
>     Student: Jens Oberender
>     Mentor: Mateusz Loskot
> 
> #3) A Synthetic Aperture RADAR Processor using GDAL
>     Student: Philippe Vachon
>     Mentor: Frank Warmerdam
> 
> #4) OGC WMS GDAL Driver
>     Student: Adam Nowaki
>     Mentor: Daniel Morissette

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dron at ak4719.spb.edu  Fri Mar 30 05:56:04 2007
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: GDAL/OGR 1.4.1 Release Timing
In-Reply-To: <460C7427.7030705@pobox.com>
References: <460C7427.7030705@pobox.com>
Message-ID: <20070330095604.GB27403@ak4719.spb.edu>

On Thu, Mar 29, 2007 at 10:21:27PM -0400, Frank Warmerdam wrote:
> Motion: Frank Warmerdam will lead a GDAL/OGR 1.4.1 stable release with
> a beta released on Thursday April 5th, and a final release on Monday
> April 9th barring an objection from a PSC member at any point before
> for the final release.

+1

Best regards,
Andrey

-- 
Andrey V. Kiselev
ICQ# 26871517

From dem at acri-st.fr  Fri Mar 30 06:16:22 2007
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] netCDF driver GeoTransform bug
Message-ID: <460CE376.9020500@acri-st.fr>

Hi,

I have found a bug in the computing of the GeoTransform in the function 
netCDFDataset::SetProjection of the netcdfdataset.cpp file (last version): the 
resolution was wrong and the origin was the center and not the upper-left corner:

	poDS->adfGeoTransform[0] = pdfXCoord[0];
	poDS->adfGeoTransform[3] = pdfYCoord[0];
	poDS->adfGeoTransform[2] = 0;
  	poDS->adfGeoTransform[4] = 0;
  	poDS->adfGeoTransform[1] = (( pdfXCoord[xdim-1] -
  	                              pdfXCoord[0] ) /
  	                            poDS->nRasterXSize);
  	
  	poDS->adfGeoTransform[5] = (( pdfYCoord[ydim-1] -
  	                              pdfYCoord[0] ) /
  	                            poDS->nRasterYSize);

should be corrected with:

	poDS->adfGeoTransform[0] = pdfXCoord[0];
	poDS->adfGeoTransform[3] = pdfYCoord[0];
	poDS->adfGeoTransform[2] = 0;
  	poDS->adfGeoTransform[4] = 0;
  	poDS->adfGeoTransform[1] = (( pdfXCoord[xdim-1] -
  	                              pdfXCoord[0] ) /
  	                            ( poDS->nRasterXSize - 1 ));
  	
  	poDS->adfGeoTransform[5] = (( pdfYCoord[ydim-1] -
  	                              pdfYCoord[0] ) /
  	                            ( poDS->nRasterYSize - 1 ));
	poDS->adfGeoTransform[0] = pdfXCoord[0]
	      - (poDS->adfGeoTransform[1] / 2);
	poDS->adfGeoTransform[3] = pdfYCoord[0]
	      - (poDS->adfGeoTransform[5] / 2);

Maybe there is also the same problem just after this code when trying to 
retrieve the geolocation from the attributes like "Northernmost_Northing", 
depending if these attributes define border or center pixel:
	adfGeoTransform[0] = dfWE;
	adfGeoTransform[1] = (dfEE - dfWE) / poDS->GetRasterXSize();
	adfGeoTransform[2] = 0.0;
	adfGeoTransform[3] = dfNN;
	adfGeoTransform[4] = 0.0;
	adfGeoTransform[5] = (dfSN - dfNN) / poDS->GetRasterYSize();


Regards,

Julien

From dmorissette at mapgears.com  Fri Mar 30 07:55:36 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: SoC Project Ranking
In-Reply-To: <460C6D9C.8080806@pobox.com>
References: <460C6D9C.8080806@pobox.com>
Message-ID: <460CFAB8.3090106@mapgears.com>

+1 from Daniel


Frank Warmerdam wrote:
> Motion: The GDAL PSC ranks it's selection of Google Summer of Code projects
> as follows, with the indicated mentors.
> 
> #1) GDAL Raster Driver for PNG/JPG Tile Structure + gdal2tiles utility
>     Student: Petr Prindal
>     Mentor: Howard Butler
> 
> #2) GDAL: KML read support for the existing driver
>     Student: Jens Oberender
>     Mentor: Mateusz Loskot
> 
> #3) A Synthetic Aperture RADAR Processor using GDAL
>     Student: Philippe Vachon
>     Mentor: Frank Warmerdam
> 
> #4) OGC WMS GDAL Driver
>     Student: Adam Nowaki
>     Mentor: Daniel Morissette
> 
> ----
> 
> As part of the application to the Google Summer of Code we need to
> rank our projects, and assign mentors.  Since Jens is already being ranked
> for the KML reading project, the GeoRSS driver project he also proposed is
> being ignored.  The PSC feels that all the above projects are of interest,
> and that the mentors are capable of supporting the students.
> 
> The rankings need to be provided to the OSGeo Google Summer of Code admin
> (aka me) by Monday so voting should start on this now.
> 
> +1 from Frank
> 
> Best regards,


-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Fri Mar 30 08:08:58 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] MITAB driver update (was: Motion: GDAL/OGR 1.4.1 Release
	Timing)
In-Reply-To: <460C7427.7030705@pobox.com>
References: <460C7427.7030705@pobox.com>
Message-ID: <460CFDDA.8030103@mapgears.com>

Frank Warmerdam wrote:
> 
> So I'd like to suggest that we aim for a GDAL/OGR 1.4.1 beta Thursday
> April 5th with the intent to produce a 1.4.1 release on Monday April 9th.
> 

Talking of release timing, I have made several changes in the MITAB 
library since the last update of the OGR copy of MITAB (currently MITAB 
1.5.1) and was wondering when would be the best time to sync the OGR 
copy. Is a stable release of GDAL/OGR a good time to upgrade the MITAB 
driver to a new version that includes new features or should that be 
done only in trunk?

I'm about to release MITAB 1.6.1 and the changes since 1.5.1 are more 
than bug fixes, one of the changes is a complete rework of the way the 
spatial index is generated. There are also a few important fixes to the 
collection code that was introduced in MITAB 1.5.1, i.e. the current 
OGR-MITAB based on 1.5.1 may produce corrupt files when writing collections.

I think it is relatively safe and would be beneficial to update the 
MITAB driver in the stable branch for this release of GDAL, but before 
upgrading the driver I wanted to find out what was the PSC's opinion 
about making non-trivial changes inside drivers in the stable branch.

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From JAMES.E.HOPPER at saic.com  Fri Mar 30 09:52:28 2007
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Re: Motion: SoC Project Ranking
In-Reply-To: <200703300607.l2U67HTA005869@duke.maptools.org>
Message-ID: <C2328E5C.3B55%james.e.hopper@saic.com>

Frank,

I work in SAR we use visual imagery to create hi quality radar simulation. I
was curious what this project was supposed to do.

Thanks jim



On 3/30/07 2:07 AM, "gdal-dev-request@lists.maptools.org"
<gdal-dev-request@lists.maptools.org> wrote:

> #3) A Synthetic Aperture RADAR Processor using GDAL
>      Student: Philippe Vachon
>      Mentor: Frank Warmerdam


From warmerdam at pobox.com  Fri Mar 30 12:01:36 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Re: Motion: SoC Project Ranking
In-Reply-To: <C2328E5C.3B55%james.e.hopper@saic.com>
References: <C2328E5C.3B55%james.e.hopper@saic.com>
Message-ID: <460D3460.8050909@pobox.com>

jim hopper wrote:
> Frank,
> 
> I work in SAR we use visual imagery to create hi quality radar simulation. I
> was curious what this project was supposed to do.

 > #3) A Synthetic Aperture RADAR Processor using GDAL
 > >      Student: Philippe Vachon
 > >      Mentor: Frank Warmerdam

Jim,

It is a level 0 signal to image processor.  A more complete description is
available at:

   http://wiki.osgeo.org/index.php/GDAL_SoC_Ideas/SAR_Processor

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Fri Mar 30 12:12:44 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] MITAB driver update
In-Reply-To: <460CFDDA.8030103@mapgears.com>
References: <460C7427.7030705@pobox.com> <460CFDDA.8030103@mapgears.com>
Message-ID: <460D36FC.5000009@pobox.com>

Daniel Morissette wrote:
> Talking of release timing, I have made several changes in the MITAB 
> library since the last update of the OGR copy of MITAB (currently MITAB 
> 1.5.1) and was wondering when would be the best time to sync the OGR 
> copy. Is a stable release of GDAL/OGR a good time to upgrade the MITAB 
> driver to a new version that includes new features or should that be 
> done only in trunk?
> 
> I'm about to release MITAB 1.6.1 and the changes since 1.5.1 are more 
> than bug fixes, one of the changes is a complete rework of the way the 
> spatial index is generated. There are also a few important fixes to the 
> collection code that was introduced in MITAB 1.5.1, i.e. the current 
> OGR-MITAB based on 1.5.1 may produce corrupt files when writing 
> collections.
> 
> I think it is relatively safe and would be beneficial to update the 
> MITAB driver in the stable branch for this release of GDAL, but before 
> upgrading the driver I wanted to find out what was the PSC's opinion 
> about making non-trivial changes inside drivers in the stable branch.

Daniel,

Generally speaking I'd be hesitant to pull in substantially altered
supporting libraries in the stable branch.  But the exception I think would
be when that is the only practical way to get important bug fixes.  So, yes
I think the 1.6.1 code ought to pulled into the stable branch (as well as
trunk).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From epatton at nrcan.gc.ca  Fri Mar 30 11:54:04 2007
From: epatton at nrcan.gc.ca (Patton, Eric)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
Message-ID: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>

Hi,

I just upgraded my Ubuntu to 7.04 Beta, and I'm re-compiling gdal-1.4.0. configure progresses cleanly with no obvious errors. At the very beginning of make, however, I encounter this error:

$ sudo make
(cd port; make)
make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
/bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++   -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp
libtool: compile: unable to infer tagged configuration
libtool: compile: specify a tag with `--tag'
make[1]: *** [cpl_conv.o] Error 1
make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
make: *** [port-target] Error 2

Any ideas on what this error means and how to correct it?

Thanks,

~ Eric.


From dmorissette at mapgears.com  Fri Mar 30 15:33:17 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] MITAB driver update
In-Reply-To: <460D36FC.5000009@pobox.com>
References: <460C7427.7030705@pobox.com> <460CFDDA.8030103@mapgears.com>
	<460D36FC.5000009@pobox.com>
Message-ID: <460D65FD.4070701@mapgears.com>

Frank Warmerdam wrote:
> 
> Generally speaking I'd be hesitant to pull in substantially altered
> supporting libraries in the stable branch.  But the exception I think would
> be when that is the only practical way to get important bug fixes.  So, yes
> I think the 1.6.1 code ought to pulled into the stable branch (as well as
> trunk).
> 

After reading your reply and also since I'm not a fan of letting new 
features make it into a stable branch, I have taken the time to review 
the list of bug fixes and they should be easy to backport, so I won't do 
a complete upgrade in the 1.4 banch, I'll just apply selected fixes. I 
have created a ticket (my first one!) for this: 
http://trac.osgeo.org/gdal/ticket/1541

Daniel
-- 
Daniel Morissette
http://www.mapgears.com/

From dmorissette at mapgears.com  Fri Mar 30 15:34:16 2007
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: GDAL/OGR 1.4.1 Release Timing
In-Reply-To: <460C7427.7030705@pobox.com>
References: <460C7427.7030705@pobox.com>
Message-ID: <460D6638.5020004@mapgears.com>

Frank Warmerdam wrote:
> ----
> 
> Motion: Frank Warmerdam will lead a GDAL/OGR 1.4.1 stable release with a 
> beta
> released on Thursday April 5th, and a final release on Monday April 9th
> barring an objection from a PSC member at any point before for the final
> release.
> 
> ----

+1 from Daniel

-- 
Daniel Morissette
http://www.mapgears.com/

From hobu at iastate.edu  Fri Mar 30 15:43:41 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: GDAL/OGR 1.4.1 Release Timing
In-Reply-To: <460D6638.5020004@mapgears.com>
References: <460C7427.7030705@pobox.com>
 <460D6638.5020004@mapgears.com>
Message-ID: <6.2.3.4.2.20070330144329.0319c948@hobu.mail.iastate.edu>

At 02:34 PM 3/30/2007, Daniel Morissette wrote:
>Frank Warmerdam wrote:
>>----
>>Motion: Frank Warmerdam will lead a GDAL/OGR 1.4.1 stable release with a beta
>>released on Thursday April 5th, and a final release on Monday April 9th
>>barring an objection from a PSC member at any point before for the final
>>release.
>>----
>
>+1 from Daniel

+1 from Howard 


From hobu at iastate.edu  Fri Mar 30 15:43:56 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Motion: SoC Project Ranking
In-Reply-To: <460CFAB8.3090106@mapgears.com>
References: <460C6D9C.8080806@pobox.com>
 <460CFAB8.3090106@mapgears.com>
Message-ID: <6.2.3.4.2.20070330144350.032807c0@hobu.mail.iastate.edu>

+1 from Howard

At 06:55 AM 3/30/2007, Daniel Morissette wrote:
>+1 from Daniel
>
>
>Frank Warmerdam wrote:
>>Motion: The GDAL PSC ranks it's selection of Google Summer of Code projects
>>as follows, with the indicated mentors.
>>#1) GDAL Raster Driver for PNG/JPG Tile Structure + gdal2tiles utility
>>     Student: Petr Prindal
>>     Mentor: Howard Butler
>>#2) GDAL: KML read support for the existing driver
>>     Student: Jens Oberender
>>     Mentor: Mateusz Loskot
>>#3) A Synthetic Aperture RADAR Processor using GDAL
>>     Student: Philippe Vachon
>>     Mentor: Frank Warmerdam
>>#4) OGC WMS GDAL Driver
>>     Student: Adam Nowaki
>>     Mentor: Daniel Morissette
>>----
>>As part of the application to the Google Summer of Code we need to
>>rank our projects, and assign mentors.  Since Jens is already being ranked
>>for the KML reading project, the GeoRSS driver project he also proposed is
>>being ignored.  The PSC feels that all the above projects are of interest,
>>and that the mentors are capable of supporting the students.
>>The rankings need to be provided to the OSGeo Google Summer of Code admin
>>(aka me) by Monday so voting should start on this now.
>>+1 from Frank
>>Best regards,
>
>
>--
>Daniel Morissette
>http://www.mapgears.com/
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@lists.maptools.org
>http://lists.maptools.org/mailman/listinfo/gdal-dev


From philippe at cowpig.ca  Fri Mar 30 15:58:42 2007
From: philippe at cowpig.ca (Philippe Vachon)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Re: Motion: SoC Project Ranking
In-Reply-To: <C2328E5C.3B55%james.e.hopper@saic.com>
References: <200703300607.l2U67HTA005869@duke.maptools.org>
	<C2328E5C.3B55%james.e.hopper@saic.com>
Message-ID: <20070330195842.GA22048@cowpig.ca>

Hi Jim,

Basically, as Frank has said, the project is dealing with level 0,
post-acquisition, unprocessed imagery, and processing it to be a usable 
image. The products available for this are very commercial (and expensive!), 
so the goal of the project is to create an Open Source implementation of the
Range Doppler algorithm. I've created a wiki page talking about it
(http://wiki.osgeo.org/index.php/GDAL_SoC_Ideas/SAR_Processor) if you're
interested. If you have (or anyone else has) any questions please get in
touch!

Best regards,
Phil

On Fri, Mar 30, 2007 at 09:52:28AM -0400, jim hopper wrote:
> Frank,
> 
> I work in SAR we use visual imagery to create hi quality radar simulation. I
> was curious what this project was supposed to do.
> 
> Thanks jim
> 
> 
> 
> On 3/30/07 2:07 AM, "gdal-dev-request@lists.maptools.org"
> <gdal-dev-request@lists.maptools.org> wrote:
> 
> > #3) A Synthetic Aperture RADAR Processor using GDAL
> >      Student: Philippe Vachon
> >      Mentor: Frank Warmerdam
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev

From jhhal at wmdata.com  Fri Mar 30 16:44:30 2007
From: jhhal at wmdata.com (Hallgren Johan E)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] MapServer, OGR, QueryByAttribute
Message-ID: <D93CFEAA72FA764885CC1FDA94A1D89C02904D2B@WMRI000166.corp.wmdata.net>

Is it possible to query attribute on layers that are using GDAL/OGR
(Oracle Spatial) from Mapserver? Or is it only related to the format
built in to MapServer?

 

/Johan


___________________________________


Johan Hallgren


 

WM-data a LogicaCMG company 

Pelle Bergs backe 3

Box 1938, 791 19 Falun

Tel: 023-547 46 (int: +46-2354746)

Mobil: 070-588 44 28 (int: +46-705884428)

johan.e.hallgren@wmdata.com
<BLOCKED::mailto:johan.e.hallgren@wmdata.com> 

http://www.wmdata.se
<BLOCKED::/exchweb/bin/redir.asp?URL=http://www.wmdata.se/> 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20070330/6519f025/attachment.html
From hobu at iastate.edu  Fri Mar 30 18:01:57 2007
From: hobu at iastate.edu (Howard Butler)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] For SWIG maintainers: Move to SWIG 1.3.31
Message-ID: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>

Ari, Tamas, Andrea, and Charlie (and anyone else if they have an  
interest),

Does anyone have any problem with us using SWIG 1.3.31 on our  
distribution generation machine?  This would mean that all of our  
releases would have their wrapper code generated by SWIG 1.3.31 (I  
believe we're currently using 1.3.29).

Howard 

From szekerest at gmail.com  Fri Mar 30 18:43:40 2007
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] For SWIG maintainers: Move to SWIG 1.3.31
In-Reply-To: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
References: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
Message-ID: <f3b73b7d0703301543i2d4e1280s25358b1dc68b24f9@mail.gmail.com>

+1

Best regards,

Tamas


2007/3/31, Howard Butler <hobu@iastate.edu>:
> Ari, Tamas, Andrea, and Charlie (and anyone else if they have an
> interest),
>
> Does anyone have any problem with us using SWIG 1.3.31 on our
> distribution generation machine?  This would mean that all of our
> releases would have their wrapper code generated by SWIG 1.3.31 (I
> believe we're currently using 1.3.29).
>
> Howard
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev
>

From aaime at openplans.org  Sat Mar 31 03:15:11 2007
From: aaime at openplans.org (Andrea Aime)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] For SWIG maintainers: Move to SWIG 1.3.31
In-Reply-To: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
References: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
Message-ID: <460E0A7F.5010409@openplans.org>

Howard Butler ha scritto:
> Ari, Tamas, Andrea, and Charlie (and anyone else if they have an interest),
> 
> Does anyone have any problem with us using SWIG 1.3.31 on our 
> distribution generation machine?  This would mean that all of our 
> releases would have their wrapper code generated by SWIG 1.3.31 (I 
> believe we're currently using 1.3.29).

+1 for me
Cheers
Andrea

From ari.jolma at tkk.fi  Sat Mar 31 03:59:00 2007
From: ari.jolma at tkk.fi (Ari Jolma)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] For SWIG maintainers: Move to SWIG 1.3.31
In-Reply-To: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
References: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
Message-ID: <460E14C4.9080001@tkk.fi>

Howard Butler kirjoitti:
> Ari, Tamas, Andrea, and Charlie (and anyone else if they have an 
> interest),
>
> Does anyone have any problem with us using SWIG 1.3.31 on our 
> distribution generation machine?  This would mean that all of our 
> releases would have their wrapper code generated by SWIG 1.3.31 (I 
> believe we're currently using 1.3.29).

I don't have a problem with that. What I still have a small problem with 
is the swig-generated wrappers in svn. Since the distribution generation 
machine generates the wrappers, could it also generate them for the 
nightly builds? Could it generate them for the svn?

I made a small addition to the OGR Perl bindigs (Move(dx,dy,dz) method 
Geometry class - I'm currently playing with moving geographic objects). 
I find it a bit distracting and additional thing to remember to update 
also the big generated bindings because of a small change in a .i file.

Cheers,

Ari

>
> Howard_______________________________________________
> Gdal-dev mailing list
> Gdal-dev@lists.maptools.org
> http://lists.maptools.org/mailman/listinfo/gdal-dev


-- 
Prof. Ari Jolma
Geoinformaatio- ja paikannustekniikka
Geoinformation and positioning technology
Teknillinen Korkeakoulu / Helsinki University of Technology
POBox 1200, 02015 TKK, Finland
Email: ari.jolma at tkk.fi URL: http://www.tkk.fi/~jolma


From warmerdam at pobox.com  Sat Mar 31 14:31:57 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] For SWIG maintainers: Move to SWIG 1.3.31
In-Reply-To: <460E14C4.9080001@tkk.fi>
References: <669A8D32-9732-40D0-A8D3-8736935F82BF@iastate.edu>
	<460E14C4.9080001@tkk.fi>
Message-ID: <460EA91D.9090500@pobox.com>

Ari Jolma wrote:
> I don't have a problem with that. What I still have a small problem with 
> is the swig-generated wrappers in svn. Since the distribution generation 
> machine generates the wrappers, could it also generate them for the 
> nightly builds? Could it generate them for the svn?

Ari,

I should note that the mkgdaldist.sh *only* generates csharp bindings.
The rest are used from svn.  This exception for csharp was made at Tamas'
request, but in general the idea is that the binding maintainer should
commit a version of the bindings in SVN that they believe to be working
and stable.  Wasn't it your perl bindings that in the past request some
hand tweaking?

> I made a small addition to the OGR Perl bindigs (Move(dx,dy,dz) method 
> Geometry class - I'm currently playing with moving geographic objects). 
> I find it a bit distracting and additional thing to remember to update 
> also the big generated bindings because of a small change in a .i file.

I can understand that, and if you are quite certain that you would like
the distribute bindings auto-generated you could modify mkgdaldist.sh to
do this.

But really, I encourage you to commit your changes as some folks who might
be interested in using the perl bindings against trunk may not have the
right swig version.  The current approach is intended to make svn accessable
to folks without futzing around with swig.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


From warmerdam at pobox.com  Sat Mar 31 14:34:14 2007
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:50:45 2007
Subject: [Gdal-dev] Make error "libtool: compile: unable to infer tagged
	configuration"
In-Reply-To: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
References: <CA803441152AAE40935609509953BAD20F70FD@s0-ott-x4.nrn.nrcan.gc.ca>
Message-ID: <460EA9A6.4030001@pobox.com>

Patton, Eric wrote:
> Hi,
> 
> I just upgraded my Ubuntu to 7.04 Beta, and I'm re-compiling gdal-1.4.0. configure progresses cleanly with no obvious errors. At the very beginning of make, however, I encounter this error:
> 
> $ sudo make
> (cd port; make)
> make[1]: Entering directory `/usr/local/gdal-1.4.0/port'
> /bin/sh /usr/local/gdal-1.4.0/libtool --mode=compile g++   -DOGR_ENABLED -I/usr/local/gdal-1.4.0/port  -c -o cpl_conv.o cpl_conv.cpp
> libtool: compile: unable to infer tagged configuration
> libtool: compile: specify a tag with `--tag'
> make[1]: *** [cpl_conv.o] Error 1
> make[1]: Leaving directory `/usr/local/gdal-1.4.0/port'
> make: *** [port-target] Error 2
> 
> Any ideas on what this error means and how to correct it?

Eric,

I'm afraid I don't know what causes this.  I'd appreciate it if you could
file a bug on this, and work with Mateusz to try and resolve it before the
1.4.1 release.   Possibly we need to regenerate the libtool stuff with a
newer version?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | President OSGeo, http://osgeo.org


