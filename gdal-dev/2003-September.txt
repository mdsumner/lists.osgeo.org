From dem at acri-st.fr  Mon Sep  1 05:23:10 2003
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Windows OpenEV HDF PB
In-Reply-To: <3F4FA02F.1000900@pobox.com>
References: <5.0.2.1.2.20030829160147.00a4d2a0@mail.acri.fr>
 <5.0.2.1.2.20030829160147.00a4d2a0@mail.acri.fr>
Message-ID: <5.0.2.1.2.20030901111702.00a5e2a0@mail.acri.fr>

Hi,

One of the files who crash my windows openev 1.6.2 can be downloaded here :

ftp.fr-acri.com

user : openev
pass : venepo

filename : S19981822003212.L3m_MC_CHLO.hdf
size : 8 Mo


Thanks in advance for debugging,

All the best,

Julien



At 14:49 29/08/2003 -0400, you wrote:
>Julien Demaria wrote:
>>Hello,
>>
>>I try GDAL today with OpenEV_FW under Windows (OpenEV_FW version 1.6.2) 
>>and Linux (OpenEV_FW version 1.5.4) platforms.
>>I have problems with this HDF4 file only with the Windows version (1.6.2) :
>>[] /users/dem/tmp/openev_FW/bin > gdalinfo 
>>/obe-temp/dem/S19981822003212.L3m_MC_CHLO.hdf
>>Driver: HDF4Image/HDF4 Dataset
>>Size is 4096, 2048
>>Coordinate System is `'
>>Origin = (0.000000,0.000000)
>>Pixel Size = (1.000000,1.000000)
>>Corner Coordinates:
>>Upper Left  (   0.0000000,   0.0000000)
>>Lower Left  (       0.000,    2048.000)
>>Upper Right (    4096.000,       0.000)
>>Lower Right (    4096.000,    2048.000)
>>Center      (    2048.000,    1024.000)
>>Band 1 Block=4096x1 Type=Byte, ColorInterp=Gray
>>[] /users/dem/tmp/openev_FW/bin >
>>
>>under linux all works very well, but on Windows when I try to import or 
>>open the file python.exe fails (I have a Windows popup with "cannot read 
>>memory at ...") and all OpenEV is closed...
>>Maybe it's a bug between 1.5.4 and 1.6.2 version or a GDAL HDF bug under 
>>Windows ?
>
>Julien,
>
>It could be either of those.  Would it be possible to make the file available
>somewhere for Andrey or I to try out?
>
>Best regards,
>
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


From dem at acri-st.fr  Mon Sep  1 10:30:57 2003
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] TIFF Driver & overviews
Message-ID: <5.0.2.1.2.20030901160247.00a5a300@mail.acri.fr>

Hi,


I have some questions about the (Geo)TIFF GDAL driver :

- can we access to multi-directories TIFF ?
- can we access to sub-directories (using SubIFD tag) ?

- can I use existing overviews stored in a separate TIFF file or in the 
sub-directories ?
- In the code I see that the overviews are stored in directories after the 
first (the first is the full resolution image) ;
   can I store them in another place ? (example in another 
multi-directories TIFF file or inside the TIFF file but in the 
corresponding sub-directories of each directory) ?


General questions about overviews :

- do the drivers support not standard overviews ? (example full image 
100x200 and overview  43x17)

- I don't understand in the documentation if for an image 100x200 with 2 
overview 50x100 and 25x50 I can read directly a 30x60 buffer ?
   Is decimation read only allowed with the exact result size of an overview ?
   Can I read directly a 200x400 buffer in this image ?
   If yes can we control the pixels decimation/replication method ?

- for formats that don't support overviews does GDAL always store the 
overviews in another multi-directories TIFF file ?


sorry for the overflow of questions ;-)


Thanks in advance,

Julien


From warmerdam at pobox.com  Mon Sep  1 15:45:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] TIFF Driver & overviews
In-Reply-To: <5.0.2.1.2.20030901160247.00a5a300@mail.acri.fr>
References: <5.0.2.1.2.20030901160247.00a5a300@mail.acri.fr>
Message-ID: <3F53A1DE.2030709@pobox.com>

Julien Demaria wrote:
> Hi,
> 
> 
> I have some questions about the (Geo)TIFF GDAL driver :
> 
> - can we access to multi-directories TIFF ?
> - can we access to sub-directories (using SubIFD tag) ?


Julien,

There was recently a change made so that images within a TIFF file can
be accessed even if they aren't in the first directory.

Use the construct:

  GTIFF_DIR:<n>:<filename>

to access a particular directory (n = 0 is the 1st, n = 1 is the 2nd
and so on).  This only works for directories in the "main chain".
You can also access a directory by byte offset if you happen to have
that available using the dataset naming:

  GTIFF_DIR:off:<n>:<filename>

In this case <n> is a raw byte offset in the file, and could access a
sub-ifd or even a directory not otherwise findable.  I use this mainly
for testing but it is user accessable.

> - can I use existing overviews stored in a separate TIFF file or in the 
> sub-directories ?

Currently external overviews and sub-ifd overviews are not supported by
the GeoTIFF driver, though this behaviour could be altered.  In particular
I would like to add support for sub-IFD overviews since that is really
a cleaner approach to overviews than the current chained approach.

> - In the code I see that the overviews are stored in directories after 
> the first (the first is the full resolution image) ;
>   can I store them in another place ? (example in another 
> multi-directories TIFF file or inside the TIFF file but in the 
> corresponding sub-directories of each directory) ?
> 
> 
> General questions about overviews :
> 
> - do the drivers support not standard overviews ? (example full image 
> 100x200 and overview  43x17)

When you say non-standard, you mean with a different aspect ratio than
the base image?  I think the various drivers that support overviews could
work with odd-aspect ratio overviews, but might well get confused about
what their downsampling factor is for purposes of selecting the optimal
overview. I haven't experimented much with this.  There is no support for
generating overviews with odd aspect ratios.

> - I don't understand in the documentation if for an image 100x200 with 2 
> overview 50x100 and 25x50 I can read directly a 30x60 buffer ?
>   Is decimation read only allowed with the exact result size of an 
> overview ?
>   Can I read directly a 200x400 buffer in this image ?
>   If yes can we control the pixels decimation/replication method ?

You can do all of the above.  That is to say, you can read at resolutions
other the full resolution or any of the overview levels.  GDAL will select
the lowest resolution overview that is at least as high a resolution as
the chunk you have requested.  Differing aspect ratios may confuse this
logic.

You can even load oversampled images by specifying a buffer larger than
the base image.

However, you cannot control the sampling mechanism used for this.
Simple decimation and replication is used (what is sometimes called
nearest neighbour sampling).  If you want control over sampling methods
you need to use the Warp API or do the sampling yourself.

> - for formats that don't support overviews does GDAL always store the 
> overviews in another multi-directories TIFF file ?

That is the normal fallback mechanism.  However, it has to be explicitly
enabled in each format driver, and some format drivers have not done so.
Drivers with dataset names that aren't really filesystem paths won't
generally support this kind of overview since it isn't obvious where to
put it.

> sorry for the overflow of questions ;-)

No problem.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Sep  1 16:15:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Windows OpenEV HDF PB
In-Reply-To: <5.0.2.1.2.20030901111702.00a5e2a0@mail.acri.fr>
References: <5.0.2.1.2.20030829160147.00a4d2a0@mail.acri.fr> <5.0.2.1.2.20030829160147.00a4d2a0@mail.acri.fr> <5.0.2.1.2.20030901111702.00a5e2a0@mail.acri.fr>
Message-ID: <3F53A8F6.7030300@pobox.com>

Julien Demaria wrote:
> Hi,
> 
> One of the files who crash my windows openev 1.6.2 can be downloaded here :
> 
> ftp.fr-acri.com
> 
> user : openev
> pass : venepo
> 
> filename : S19981822003212.L3m_MC_CHLO.hdf
> size : 8 Mo
> 
> 
> Thanks in advance for debugging,

Julien,

I have tried this file on linux and verified it worked fine there.  I will
leave it to Andrey to investigate on Windows.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jeanhri4 at ifrance.com  Tue Sep  2 08:56:23 2003
From: jeanhri4 at ifrance.com (Jean.)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] A conceptual question about inner join.
Message-ID: <200309021256.17cc@th00.opsion.fr>

I want to write a custom OGR driver to access data organized as follow
(the storage is specific) :

1- PointTable
ID(as long) - Point (WKB) - Comment(As text)

2- PathTable
A Path is composed with PointTable.
PathID(as long) - PointID(as long foreign key) - Comment(As text).

An OGRFeature with a geometry of type point is perfect for the first
table. 
However, the second table raises a problem. I don't know how to
represent a join (Path-Point) with an OGR Feature.
I'm not sure that the OpenGIS simple feature specification propose a way
to represent this case. The Path Table contains a geometry through the
PointTable and not itself through a column.

What is the best way to manipulate through OGR a feature composed with
list of feature?

Thanks in advance for your answers,

Jean.


_____________________________________________________________________
MSN Messenger, nouvelle version ! Personnalisez vos messages, jouez en
ligne et communiquez en temps r?el par vid?o! http://ifrance.com/_reloc/m


From warmerdam at pobox.com  Tue Sep  2 09:13:45 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] A conceptual question about inner join.
In-Reply-To: <200309021256.17cc@th00.opsion.fr>
References: <200309021256.17cc@th00.opsion.fr>
Message-ID: <3F549789.9030402@pobox.com>

Jean. wrote:
> I want to write a custom OGR driver to access data organized as follow
> (the storage is specific) :
> 
> 1- PointTable
> ID(as long) - Point (WKB) - Comment(As text)
> 
> 2- PathTable
> A Path is composed with PointTable.
> PathID(as long) - PointID(as long foreign key) - Comment(As text).
> 
> An OGRFeature with a geometry of type point is perfect for the first
> table. 
> However, the second table raises a problem. I don't know how to
> represent a join (Path-Point) with an OGR Feature.
> I'm not sure that the OpenGIS simple feature specification propose a way
> to represent this case. The Path Table contains a geometry through the
> PointTable and not itself through a column.
> 
> What is the best way to manipulate through OGR a feature composed with
> list of feature?

Jean,

First, I would stress that the OGR-SQL does not actually implement any of the
SF SQL extensions.  While that might be an interested direction it is not
one I have attempted yet.

Second, the current OGR SQL join support does not include a mechanism to
do anything with geometry from secondary tables.  It is assumed they are only
used to add extra attribute columns.

Of course, you could do the joining in application code.  If you dataset is
not too large for RAM, you can just read all the features, indexing them
appropriately and do the join yourself.  I have done this a number of times
in Python scripts to form polygon datasets from edge sets for instance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jeanhri4 at ifrance.com  Tue Sep  2 12:18:57 2003
From: jeanhri4 at ifrance.com (jeanhri4)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] OLEDBProvider
Message-ID: <000e01c3716d$eba30810$5100000a@informatiquemer.fr>

I have tested successfully sfcDump on an msJet database containing a
GEOMETRY_COLUMNS table as described in "Open GIS Simple feature
Specification".

I would want to know if any program is provided with OGR to create
OGRFeature in such a msJet database. Indeed, OGR2OGR is only able to
create OGRFeature in the following format :

- "ESRI Shapefile"

- "TIGER"

- "MapInfo File"

- "DGN"

- "GML".

 

Thanks in advance for your answers,

 

Jean.

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030902/e4d82e56/attachment.html
From warmerdam at pobox.com  Tue Sep  2 15:06:21 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] OLEDBProvider
In-Reply-To: <000e01c3716d$eba30810$5100000a@informatiquemer.fr>
References: <000e01c3716d$eba30810$5100000a@informatiquemer.fr>
Message-ID: <3F54EA2D.5010100@pobox.com>

jeanhri4 wrote:
> I have tested successfully sfcDump on an msJet database containing a 
> GEOMETRY_COLUMNS table as described in ?Open GIS Simple feature 
> Specification?.
> 
> I would want to know if any program is provided with OGR to create 
> OGRFeature in such a msJet database. Indeed, OGR2OGR is only able to 
> create OGRFeature in the following format :
> 
> - "ESRI Shapefile"
> 
> - "TIGER"
> 
> - "MapInfo File"
> 
> - "DGN"
> 
> - "GML".

Jean,

The short answer is that I have not done any work on loading tables
via the OLE DB interface.  My work so far has been providing read-only
OLE DB providers, and client side code to read from them.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Tue Sep  2 18:14:05 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
Message-ID: <200309030014.05846.alexamici@tiscali.it>

Frank,

the build system is now close to the point i can start including (optional) 
libtool support.

most of the changes i did up to now were intended to be generally useful 
cleanups. there is still work that can be done, however:

gdal-1.1.9$ find . -name GNUmakefile -o -name GDALmake.opt | xargs wc
 2827  6507 58432 total

gdal-current$ find . -name GNUmakefile -o -name GDALmake.opt | xargs wc
 2290  5095 47873 total

now the libtool specific changes will stat going in.

first of all, in order to proceed with the libtool integration a few files 
need to be added to the topdir, namely:
config.guess
config.sub
ltmain.sh
all files in the 100k+ range :(
furthermore a 200k patch to aclocal.m4 is needed!

all this stuff is distributed with the libtool package and it is intended to 
make the build process independent on the version of libtool that people may 
have installed.

it will take a bit of time before the alternative build will be fully 
fuctional, but those who feel brave enough can try to add --with-libtool to 
the configure command line to see how things are proceding ;)

for the others nothing should change.

cheers,
alessandro


From alexamici at tiscali.it  Tue Sep  2 18:40:31 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309030014.05846.alexamici@tiscali.it>
References: <200309030014.05846.alexamici@tiscali.it>
Message-ID: <200309030040.31692.alexamici@tiscali.it>

oops! i just hit what might be a problem!

On Wednesday 03 September 2003 00:14, Alessandro Amici wrote:
> furthermore a 200k patch to aclocal.m4 is needed!

the aclocal.m4 patch appear to need autoconf 2.50+, but as far as i can say 
gdal is still using autocon 2.13, so there are various alternatives:
- gdal can switch to autoconf 2.50+ (Frank?)
- i can look for an erlier version of libtool (i have 1.5.0a)
- i can try to port the aclocal.m4 to the 2.13

the libtool merge is already on held :(

cheers,
alessandro


From nhv at cape.com  Tue Sep  2 19:02:46 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309030040.31692.alexamici@tiscali.it>
Message-ID: <EKEJIKAILPONGGENMBGAOEHEEJAA.nhv@cape.com>

Alessandro Amici writes:
> 
> oops! i just hit what might be a problem!
> 
> On Wednesday 03 September 2003 00:14, Alessandro Amici wrote:
> > furthermore a 200k patch to aclocal.m4 is needed!
> 
> the aclocal.m4 patch appear to need autoconf 2.50+,

FYI - Cygwin and MingW need 2.52+

Norman

From warmerdam at pobox.com  Tue Sep  2 22:35:01 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309030040.31692.alexamici@tiscali.it>
References: <200309030014.05846.alexamici@tiscali.it> <200309030040.31692.alexamici@tiscali.it>
Message-ID: <3F555355.7090900@pobox.com>

Alessandro Amici wrote:
> oops! i just hit what might be a problem!
> 
> On Wednesday 03 September 2003 00:14, Alessandro Amici wrote:
> 
>>furthermore a 200k patch to aclocal.m4 is needed!
> 
> 
> the aclocal.m4 patch appear to need autoconf 2.50+, but as far as i can say 
> gdal is still using autocon 2.13, so there are various alternatives:
> - gdal can switch to autoconf 2.50+ (Frank?)
> - i can look for an erlier version of libtool (i have 1.5.0a)
> - i can try to port the aclocal.m4 to the 2.13
> 
> the libtool merge is already on held :(

Alessandro,

I suppose we should upgrade. I see I have autoconf 2.53 here on my redhat
system, so something around that version should be fine.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alessandro_amici at telespazio.it  Wed Sep  3 04:19:23 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:54 2007
Subject: R: [Gdal-dev] GNU make build system update
Message-ID: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01>

Frank,

> I suppose we should upgrade. I see I have autoconf 2.53 here on my redhat
> system, so something around that version should be fine.

ok. the latest autoconf release, namely 2.57, is the default on both
platforms
i have access to: debian (unstable) and cygwin. i vote for that.

so i will commit the needed changes and the configure script built with 
autoconf 2.57 later.

cheers,
alessandro

From nhv at cape.com  Wed Sep  3 06:01:08 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01>
Message-ID: <EKEJIKAILPONGGENMBGAAEIJEJAA.nhv@cape.com>

Amici Alessandro writes:
> 
> Frank,
> 
> > I suppose we should upgrade. I see I have autoconf 2.53 here on my redhat
> > system, so something around that version should be fine.
> 
> ok. the latest autoconf release, namely 2.57, is the default on both
> platforms
> i have access to: debian (unstable) and cygwin. i vote for that.
> 
> so i will commit the needed changes and the configure script built with 
> autoconf 2.57 later.

AFAIK no reason to bump it any higher then the minimum required for 
libtool support < 2.52 > as higher numbered versions if installed should
just work :-)

Cheers

Norman
 

From alessandro_amici at telespazio.it  Wed Sep  3 07:11:49 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:54 2007
Subject: R: [Gdal-dev] GNU make build system update
Message-ID: <A183DF60AC72D5119B990002A5749CB304BDC317@ROMADG-MAIL01>

Norman,

> > so i will commit the needed changes and the configure script built with 
> > autoconf 2.57 later.
> 
> AFAIK no reason to bump it any higher then the minimum required for 
> libtool support < 2.52 > as higher numbered versions if installed should
> just work :-)

i'm not sure i understand what you mean.

you don't need autoconf or libtool installed at all for normal
configuration.
you only need autoconf when generating new a configure script and libtool
when 
you want to update the related shipped files to a new libtool release.
that is, you only need them if you hack specific parts of the build system.

if you intend "don't depend on _newer features_ than the ones in 2.52" then
i 
agree. however i intend to use the autoconf 2.57 to produce the shipped 
configure script in order to get the latest bug fixes.

this means:
- if you need a local hack into the configure script you may use autoconf
2.52 
(if it doesn't work we should try to fix it)
- if you are going to check in a new configure script then i'd prefer we
agree 
that this is produced with a specific autoconf version (my vote is for 2.57)

in order to reduce merge loads

cheers,
alessandro

From nhv at cape.com  Wed Sep  3 07:27:31 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304BDC317@ROMADG-MAIL01>
Message-ID: <EKEJIKAILPONGGENMBGAAEINEJAA.nhv@cape.com>

Amici Alessandro writes:
> 
> > > so i will commit the needed changes and the configure script built with 
> > > autoconf 2.57 later.

OK by me :-)

Cheers

Norman

From Doug_Newcomb at fws.gov  Wed Sep  3 17:01:35 2003
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9
Message-ID: <OFDE7A21BC.AEDB7250-ON85256D96.006F9A04@irm.r9.fws.gov>

Hi Folks,
      I'm running into some strangeness with ogr2ogr .  I am reprojecting
the nwi quadrangle shapefiles  (ftp://www.nwi.fws.gov/shapedata ) using
ogr2ogr called in a perl script  in the following fashion.

 ogr2ogr -t_srs "NAD83" -f "ESRI Shapefile" $destnwi  $nwishape

where $nwishape is the name of the input shape file and $destnwi is the
name of the destination directory.
I have the following as output:

shapedir = /gis/import/nwi/athens/aonia_l.prj  #echoing the input filename
quadname=aonia_l                                                  # echoing
the quad filename
deleting /oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp  # delete
the output shape file if it exists

ERROR 4: Failed to open Shapefile
`/oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp'.

ERROR 1: Terminating translation prematurely after failed
translation of layer aonia_l

A single file , aonia_l.shp is created with size 0 (according to ls -al) .

This is on a quad Xeon 1.5 GHz box with 4 GB RAM, 8GB swap, and about 400GB
of free space on the destination drive, using the following kernel

Linux xxx.xxx.xxx 2.4.9-e.27enterprise #1 SMP Tue Aug 5 15:39:21 EDT 2003
i686 unknown

rpm -qa |grep glibc gives:

compat-glibc-6.2-2.1.3.2
glibc-devel-2.2.4-32.8
glibc-2.2.4-32.8
glibc-profile-2.2.4-32.8
glibc-common-2.2.4-32.8

The fun thing is that with gdal 1.1.9 (compiled from source)  it works for
some files and then dies.  With the 9/3/2003 cvs-snapshot, it dies on the
first one.

When I run gdal 1.1.9 ( compiled from source ) on a dual Athlon 2000 MP box
with 2GB RAM Red Hat 9 latest 2.4.20 kernel and glibc (via up2date) in the
same manner ( called from a perl script) ogr2ogr works flawlessly.


It's possible that my abuse of perl and ogr have something to do with the
problem :-) .  I can provide more details if requested for debugging, but I
will be running it on the Red Hat 9 box and moving the data back, so this
is not urgent for me.

Doug Newcomb
USFWS
Raleigh, NC













From matt at matthewharmon.com  Wed Sep  3 15:22:51 2003
From: matt at matthewharmon.com (Matthew Harmon)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] UTM to Lat/Lon
Message-ID: <NEBBKABLCDAEEOGNCNOBOEBBCPAA.matt@matthewharmon.com>

I?m a total newbie, so please excuse me if this is obvious.

I need to create a tool to convert GeoTIFF in UTM to image tiles in
geographic (lat/lon) projection.  It looks like the Warp API will do the
trick for me, but I have a few questions.

-          How do I set up the output coordinate system correctly?  It
appears I need to supply a WKT for the destination coordinate system, but I
don?t know how to set this up for geographic.
-          I?m looking at the ?GDAL Warp API Tutorial? as well as the source
to gdalwarp and gdalwarp test.  Is this the place to be looking?

That should get me going
 however; I have other complicating issues that I?d
love to hear people?s suggestions on.

- The relationship between source GeoTIFF and destination imagery tiles may
be one-to-many or many-to-one.  In other words, one big 500 Meg GeoTIFF may
encompass many destination tiles, or one tile may require many GeoTIFF
images as input.  Is there an alpha channel or ?null? color that can be used
for combining images?

- Is there an ARDG / CADRG input module out there anywhere?

Thanks for any hints/suggestions!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030903/c8613d1f/attachment.html
From TMitchell at lignum.com  Wed Sep  3 18:01:58 2003
From: TMitchell at lignum.com (Tyler Mitchell)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] UTM to Lat/Lon
In-Reply-To: <NEBBKABLCDAEEOGNCNOBOEBBCPAA.matt@matthewharmon.com>
Message-ID: <OF14BBBCC3.1EB70698-ON88256D96.00786D2A-88256D96.0079077B@lignum.com>





Matthew,
I haven't reprojected rasters with gdal before, but I did use the osr.py
python module to reproject some GPS point data from geographic to UTM.  I
can provide an example of this in my python-based GPS->PostGIS conversion
program if you are interested.

That said, I'm not sure that you must use WKT.  If I'm not mistaken, you
could also use EPSG numbers to specify your source and destination
projections.  You need to have the PROJ libraries setup and working, which
is the only dependency I know of.  But I find them so easy to use because
you can simply use a number (i.e. EPSG:4326) to specify your reference
systems, rather than a lengthy hard-to-read WKT method :]

Hope that helps you enjoy the blessing of GDAL.

Tyler

gdal-dev-admin@remotesensing.org wrote on 09/03/2003 12:22:51 PM:

> I?m a total newbie, so please excuse me if this is obvious.
>
> I need to create a tool to convert GeoTIFF in UTM to image tiles in
> geographic (lat/lon) projection.  It looks like the Warp API will do
> the trick for me, but I have a few questions.
>
> -          How do I set up the output coordinate system correctly?
> It appears I need to supply a WKT for the destination coordinate
> system, but I don?t know how to set this up for geographic.
> -          I?m looking at the ?GDAL Warp API Tutorial? as well as
> the source to gdalwarp and gdalwarp test.  Is this the place to be
looking?
>
> That should get me going? however; I have other complicating issues
> that I?d love to hear people?s suggestions on.
>
> - The relationship between source GeoTIFF and destination imagery
> tiles may be one-to-many or many-to-one.  In other words, one big
> 500 Meg GeoTIFF may encompass many destination tiles, or one tile
> may require many GeoTIFF images as input.  Is there an alpha channel
> or ?null? color that can be used for combining images?
>
> - Is there an ARDG / CADRG input module out there anywhere?
>
> Thanks for any hints/suggestions!

From alexamici at tiscali.it  Wed Sep  3 15:01:16 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:54 2007
Subject: R: [Gdal-dev] GNU make build system update
In-Reply-To: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01>
References: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01>
Message-ID: <200309032101.17001.alexamici@tiscali.it>

folks,

On Wednesday 03 September 2003 10:19, Amici Alessandro wrote:
> Frank,
>
> > I suppose we should upgrade. I see I have autoconf 2.53 here on my redhat
> > system, so something around that version should be fine.
>
> ok. the latest autoconf release, namely 2.57, is the default on both
> platforms
> i have access to: debian (unstable) and cygwin. i vote for that.
>
> so i will commit the needed changes and the configure script built with
> autoconf 2.57 later.

done

as a matter of fact, things went smoother than i thought, and we already have 
initial libtool support for gdal!

on linux i could complete the build with:
	$ ./configure --with-libtool --without-python
the light testing i did on the resulting binaries gave no problem.

people with non-linux, non-windows platforms are invited to give the new build 
system a spin and report the problems they find.

in order to avoid the double compile during development and to end up with 
easily debuggable binaries i suggest the developers to use --disable-shared 
as well.

note that a few contrib libs are yet not supported, i.e. libgif.
libtiff and libgeotiff are working thou.

cheers,
alessandro


From jvarga at boulder.net  Thu Sep  4 00:28:39 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] HDF4 and Xerces config questions
Message-ID: <3F56BF77.6040509@boulder.net>

Trying to build GDAL with support for HDF4 and Xerces and have 
encountered problems.  

System basics:
stock Mandrake 9.1using gcc 3.2.2.  Kernel is 2.4.21--0.13mdk.  cpu is 
athlon-tbird although uname -p fails to detect.  Assume that is because 
I'm using stock kernel. 

./configure --with-hdf=/usr/lib

...works fine, but as soon as I add another "--with-PACKAGE" option, 
configure fails to detect hdf libs...

Ichecking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
configure: error: HDF4 support requested with arg /usr/lib, but neither 
hdf4 nor mfhdf lib found

Also, would like to compile in support for GML by using Xerces but not 
sure what to pass as ARG.  Currently using...

./configure --with-xerces 
--with-xerces-inc=/usr/local/xercesc/include/xercesc

.../but that results in...

checking for Xerces C++... requested, but compile or link fails!

g++ -o conftest conftest.cpp -lxerces-c1_6_0 -lpthread -ljasper -lgif 
-ljpeg -lpng -lgrass5 -lz -lm -ldl

conftest.cpp:1:34: util/PlatformUtils.hpp: No such file or directory
conftest.cpp: In function `int main()':
conftest.cpp:2: `XMLPlatformUtils' undeclared (first use this function)
conftest.cpp:2: (Each undeclared identifier is reported only once for 
each function it appears in.)
conftest.cpp:2: parse error before `::' token

That's definitely where its at...

$ file /usr/local/xercesc/include/xercesc/util/PlatformUtils.hpp
/usr/local/xercesc/include/xercesc/util/PlatformUtils.hpp: ASCII C 
program text

-jv





From dron at ak4719.spb.edu  Thu Sep  4 03:22:59 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] UTM to Lat/Lon
In-Reply-To: <NEBBKABLCDAEEOGNCNOBOEBBCPAA.matt@matthewharmon.com>
References: <NEBBKABLCDAEEOGNCNOBOEBBCPAA.matt@matthewharmon.com>
Message-ID: <20030904072259.GA731@ak4719.spb.edu>

On Wed, Sep 03, 2003 at 02:22:51PM -0500, Matthew Harmon wrote:
> I need to create a tool to convert GeoTIFF in UTM to image tiles in
> geographic (lat/lon) projection.  It looks like the Warp API will do
> the trick for me, but I have a few questions.
> 
> -          How do I set up the output coordinate system correctly?  It
> appears I need to supply a WKT for the destination coordinate system,
> but I don?t know how to set this up for geographic.

You can use PROJ.4 style for specifying projections and coordinate systems with -t_srs option. For you it should looks like

 -t_srs "+proj=latlong +datum=WGS84"

> -          I?m looking at the ?GDAL Warp API Tutorial? as well as the
> source to gdalwarp and gdalwarp test.  Is this the place to be
> looking?

Yes, with except that gdalwarp utilizes old warping API. New API with
more flexible design and tuned for speed implementation used in
gdalwarptest, use this utility for your tasks.

> - The relationship between source GeoTIFF and destination imagery
> tiles may be one-to-many or many-to-one.  In other words, one big 500
> Meg GeoTIFF may encompass many destination tiles, or one tile may
> require many GeoTIFF images as input.  Is there an alpha channel or
> ?null? color that can be used for combining images?

Yes, with -srcnodata option you can set one or several (comma separated)
NODATA values. Pixels marked in such way will not be used when warping
into existing image.

-te option (Target Extent) helps you to specify size of target image. It
should be in degrees for LAT/LONG projection.

There is my live session shows how to combine two ASTER DEM images (UTM
projection) into single LAT/LONG one:

$ gdalinfo ASTER_DEM20030819114347.tif
Driver: GTiff/GeoTIFF
Size is 2725, 2649
Coordinate System is:
PROJCS["WGS 84 / UTM zone 36N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",33],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32636"]]
Origin = (324834.000000,6723220.000000)
Pixel Size = (30.000000,-30.000000)
Corner Coordinates:
Upper Left  (  324834.000, 6723220.000) ( 29d47'59.90"E, 60d36'23.32"N)
Lower Left  (  324834.000, 6643750.000) ( 29d52'7.69"E, 59d53'38.45"N)
Upper Right (  406584.000, 6723220.000) ( 31d17'32.31"E, 60d38'1.91"N)
Lower Right (  406584.000, 6643750.000) ( 31d19'44.73"E, 59d55'14.24"N)
Center      (  365709.000, 6683485.000) ( 30d34'21.08"E, 60d15'56.91"N)
Band 1 Block=2725x3 Type=Float32, ColorInterp=Gray

$ gdalinfo ASTER_DEM20030819131301.tif
Driver: GTiff/GeoTIFF
Size is 2726, 2649
Coordinate System is:
PROJCS["WGS 84 / UTM zone 36N",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.2572235630016,
                AUTHORITY["EPSG","7030"]],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["latitude_of_origin",0],
    PARAMETER["central_meridian",33],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",500000],
    PARAMETER["false_northing",0],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]],
    AUTHORITY["EPSG","32636"]]
Origin = (302971.000000,6667033.000000)
Pixel Size = (30.000000,-30.000000)
Corner Coordinates:
Upper Left  (  302971.000, 6667033.000) ( 29d27'23.53"E, 60d 5'34.18"N)
Lower Left  (  302971.000, 6587563.000) ( 29d31'52.33"E, 59d22'49.99"N)
Upper Right (  384751.000, 6667033.000) ( 30d55'32.82"E, 60d 7'26.49"N)
Lower Right (  384751.000, 6587563.000) ( 30d58'10.42"E, 59d24'39.16"N)
Center      (  343861.000, 6627298.000) ( 30d13'14.70"E, 59d45'14.74"N)
Band 1 Block=2726x3 Type=Float32, ColorInterp=Gray

$ ./gdalwarptest -t_srs "+proj=latlong +datum=WGS84" -te 29.4 59.3 31.3 60.7 ASTER_DEM20030819114347.tif out.tif
Creating output file is that 4309P x 3175L.
Upper Left 29.400000, 60.700000
Pixel size: 0.000441, -0.000441
:0...10...20...30...40...50...60...70...80...90...100 - done.

$ ./gdalwarptest -t_srs "+proj=latlong +datum=WGS84" -srcnodata -150 ASTER_DEM20030819131301.tif out.tif
:0...10...20...30...40...50...60...70...80...90...100 - done.


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Thu Sep  4 04:27:04 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] HDF4 and Xerces config questions
In-Reply-To: <3F56BF77.6040509@boulder.net>
References: <3F56BF77.6040509@boulder.net>
Message-ID: <20030904082704.GA12055@ak4719.spb.edu>

On Wed, Sep 03, 2003 at 10:28:39PM -0600, Jack Varga wrote:
> Trying to build GDAL with support for HDF4 and Xerces and have 
> encountered problems.  
> 
> System basics: stock Mandrake 9.1using gcc 3.2.2.  Kernel is
> 2.4.21--0.13mdk.  cpu is athlon-tbird although uname -p fails to
> detect.  Assume that is because I'm using stock kernel. 
> 
> ./configure --with-hdf=/usr/lib

Jack,

You don't need to specify library path when the library installed in
standard place. You even don't need to specify --with-hdf option, it
will be autodetected. But if you want to prepare a binary package it
may be useful.

And finally, there is a mistake in your path. You should use
--with-hdf=/usr so far as library should be searched in /usr/lib
directory and headers in /usr/include, not in /usr/lib/include.


					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From w.blanken at geon.nl  Thu Sep  4 06:14:39 2003
From: w.blanken at geon.nl (Wim Blanken)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] OGR Segmentation Fault with Oracle
Message-ID: <004f01c372cd$60eb6e90$6400a8c0@BLANKEN>

Hello List,

I am experimenting with ogr in combination with oracle and having the following problem.
Using ogrinfo with layers that have been loaded using ogr2ogr is not a problem but existing layers (not loaded with ogr2ogr) are producing segmentation faults. I noticed that the ogr2ogr layers have an OGR_FID column and that the other layers not. Is this the problem. Is there a solutions to this problem? 

Sincerely,

Wim Blanken
w.blanken@geon.nl
    
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030904/05d2d6fb/attachment.html
From w.blanken at geon.nl  Thu Sep  4 06:10:01 2003
From: w.blanken at geon.nl (Wim Blanken)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Oracle OGR Segmentation Fault
Message-ID: <001c01c372cc$c0ba5e40$6400a8c0@BLANKEN>

Hello List,

I am experimenting with ogr in combination with oracle and having the following problem.
Using ogrinfo with layers that have been loaded using ogr2ogr is not a problem but existing layers (not loaded with ogr2ogr) are producing segmentation faults. I noticed that the ogr2ogr layers have an OGR_FID column and that the other layers not. Is this the problem. Is there a solutions to this problem? 

Sincerely,

Wim Blanken
w.blanken@geon.nl

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030904/3e132998/attachment.html
From warmerdam at pobox.com  Thu Sep  4 09:32:31 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] UTM to Lat/Lon
In-Reply-To: <NEBBKABLCDAEEOGNCNOBOEBBCPAA.matt@matthewharmon.com>
References: <NEBBKABLCDAEEOGNCNOBOEBBCPAA.matt@matthewharmon.com>
Message-ID: <3F573EEF.8080000@pobox.com>

Matthew Harmon wrote:
> - The relationship between source GeoTIFF and destination imagery tiles 
> may be one-to-many or many-to-one.  In other words, one big 500 Meg 
> GeoTIFF may encompass many destination tiles, or one tile may require 
> many GeoTIFF images as input.  Is there an alpha channel or ?null? color 
> that can be used for combining images?

Matthew,

Andrey has answered most questions but I would add that there is intended
to be alpha channel support in the new warp api but this is not currently
implemented.  At the programmatic level there are very flexible options for
masking but only limited options available through gdalwarptest at this time.

> - Is there an ARDG / CADRG input module out there anywhere?

Via the OGDI gateway GDAL can read ADRG and CADRG datasets.  Information on
OGDI can be found at:

  http://ogdi.sf.net/

Unfortunately, this doesn't include much detail on how to use the various
format drivers including RPF and ADRG drivers.  If you want to pursue this
angle and can't find enough information on the GDAL OGDI driver page, and the
OGDI pages on sourceforge let me know, and I will prepare examples.

For a quick example, gdalinfo can refer to some CADRG and ADRG data on my
machine using the "filenames":

gltp:/rpf/usr4/mpp1/cadrg/RPF
gltp:/adrg/usr4/mpp1/adrg/TPUS0101

This only works if OGDI support is configured in of course.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Sep  4 09:39:32 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Oracle OGR Segmentation Fault
In-Reply-To: <001c01c372cc$c0ba5e40$6400a8c0@BLANKEN>
References: <001c01c372cc$c0ba5e40$6400a8c0@BLANKEN>
Message-ID: <3F574094.4000106@pobox.com>

Wim Blanken wrote:
> Hello List,
>  
> I am experimenting with ogr in combination with oracle and having the 
> following problem.
> Using ogrinfo with layers that have been loaded using ogr2ogr is not a 
> problem but existing layers (not loaded with ogr2ogr) are producing 
> segmentation faults. I noticed that the ogr2ogr layers have an OGR_FID 
> column and that the other layers not. Is this the problem. Is there a 
> solutions to this problem?

Wim,

Ogrinfo and ogr2ogr are certainly intended to work fine without the OGR_FID
field but I must confess this case is likely tested significantly less than
layers loaded with ogr2ogr itself.  It is quite possible that some more
esoteric field types are not handled well.

If you can provide a set of SQL I can run through sqlplus to prepare a table
that will reproduce the problem then I will look into it, otherwise there
isn't much I can do from my end without access to your system to debug the
issue.  From your end it would be helpful if you could build GDAL/OGR in
debug and produce a traceback of failed access.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Sep  4 09:46:12 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat
 9
In-Reply-To: <OFDE7A21BC.AEDB7250-ON85256D96.006F9A04@irm.r9.fws.gov>
References: <OFDE7A21BC.AEDB7250-ON85256D96.006F9A04@irm.r9.fws.gov>
Message-ID: <3F574224.6020408@pobox.com>

Doug_Newcomb@fws.gov wrote:
> Hi Folks,
>       I'm running into some strangeness with ogr2ogr .  I am reprojecting
> the nwi quadrangle shapefiles  (ftp://www.nwi.fws.gov/shapedata ) using
> ogr2ogr called in a perl script  in the following fashion.
> 
>  ogr2ogr -t_srs "NAD83" -f "ESRI Shapefile" $destnwi  $nwishape
> 
> where $nwishape is the name of the input shape file and $destnwi is the
> name of the destination directory.
> I have the following as output:
> 
> shapedir = /gis/import/nwi/athens/aonia_l.prj  #echoing the input filename
> quadname=aonia_l                                                  # echoing
> the quad filename
> deleting /oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp  # delete
> the output shape file if it exists
> 
> ERROR 4: Failed to open Shapefile
> `/oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp'.
> 
> ERROR 1: Terminating translation prematurely after failed
> translation of layer aonia_l
> 
> A single file , aonia_l.shp is created with size 0 (according to ls -al) .

Doug,

I don't know why this failing, expecially with the error message you are seeing.
If the issue where create permissions for the shapefile, I would expect nothing
to be created.  It might be helpful to set "CPL_DEBUG=ON" in your environment
to get additional information.  Also, if you can run things under valgrind that
might provide some useful information.

I would appreciate anything you can do to narrow down this problem to something
I might be able to reproduce and debug.

PS. You have some nice systems!

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From w.blanken at geon.nl  Thu Sep  4 10:08:14 2003
From: w.blanken at geon.nl (Wim Blanken)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Oracle OGR Segmentation Fault
References: <001c01c372cc$c0ba5e40$6400a8c0@BLANKEN> <3F574094.4000106@pobox.com>
Message-ID: <006b01c372ed$fff68ef0$6400a8c0@BLANKEN>

Hello Frank,

Thank you for your answer. I think I found the problem. The Layers I tried
to access didn't have a gid at all. I used ogrinfo with a layer that was not
imported using ogr2ogr but had a gid. This layer worked allright. So i think
ogr wants a gid with a unique record number.

Regards,

Wim Blanken

> Wim Blanken wrote:
> > Hello List,
> >
> > I am experimenting with ogr in combination with oracle and having the
> > following problem.
> > Using ogrinfo with layers that have been loaded using ogr2ogr is not a
> > problem but existing layers (not loaded with ogr2ogr) are producing
> > segmentation faults. I noticed that the ogr2ogr layers have an OGR_FID
> > column and that the other layers not. Is this the problem. Is there a
> > solutions to this problem?
>
> Wim,
>
> Ogrinfo and ogr2ogr are certainly intended to work fine without the
OGR_FID
> field but I must confess this case is likely tested significantly less
than
> layers loaded with ogr2ogr itself.  It is quite possible that some more
> esoteric field types are not handled well.
>
> If you can provide a set of SQL I can run through sqlplus to prepare a
table
> that will reproduce the problem then I will look into it, otherwise there
> isn't much I can do from my end without access to your system to debug the
> issue.  From your end it would be helpful if you could build GDAL/OGR in
> debug and produce a traceback of failed access.
>
> Best regards,
>
> --
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev
>


From Doug_Newcomb at fws.gov  Thu Sep  4 10:03:35 2003
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9
Message-ID: <OF8D57F7CD.924CB52F-ON85256D97.004C028B@irm.r9.fws.gov>



Frank,


>Doug,

>I don't know why this failing, expecially with the error message you are
seeing.
>If the issue where create permissions for the shapefile, I would expect
nothing
>to be created.  It might be helpful to set "CPL_DEBUG=ON" in your
environment
>to get additional information.  Also, if you can run things under valgrind
that
>might provide some useful information.

I'll try to get you more info .  I've never tried either method, but now is
a good time to start.




>I would appreciate anything you can do to narrow down this problem to
something
>I might be able to reproduce and debug.

>PS. You have some nice systems!

Thanks! I try to buy to last:-).  I put the hardware specs in to indicate
it was not likely a hardware resource issue.


>Best regards,

>--
>---------------------------------------+--------------------------------------

>I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent








From warmerdam at pobox.com  Thu Sep  4 10:55:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Oracle OGR Segmentation Fault
In-Reply-To: <006b01c372ed$fff68ef0$6400a8c0@BLANKEN>
References: <001c01c372cc$c0ba5e40$6400a8c0@BLANKEN> <3F574094.4000106@pobox.com> <006b01c372ed$fff68ef0$6400a8c0@BLANKEN>
Message-ID: <3F575269.1020702@pobox.com>

Wim Blanken wrote:
> Hello Frank,
> 
> Thank you for your answer. I think I found the problem. The Layers I tried
> to access didn't have a gid at all. I used ogrinfo with a layer that was not
> imported using ogr2ogr but had a gid. This layer worked allright. So i think
> ogr wants a gid with a unique record number.

Wim,

I am afraid my limited knowledge of Oracle is already growing rusty.  What is
a gid?  Is this the big oracle object unique id?  I thought every row had an
Oid?  In any event I reviewed the ogrocilayer.cpp code and it does not seem
to have any dependence on having an oid, or a gid.  If the OGR_FID is not
available it just assigns sequential FID's in the OGR features.

Is the gid a geometry id?  If so, I am pretty sure I have correctly returned
geometryless layers in some situations, if only with pass through SQL.

If there is anything you can do to let me reproduce this I am still willing to
try and reproduce and fix it on my Oracle system.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jvarga at boulder.net  Thu Sep  4 15:30:42 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] HDF4 and Xerces config questions
In-Reply-To: <20030904082704.GA12055@ak4719.spb.edu>
References: <3F56BF77.6040509@boulder.net> <20030904082704.GA12055@ak4719.spb.edu>
Message-ID: <3F5792E2.4030909@boulder.net>

Dear Andrey, et al;

Thanks for the clue about ARG set to parent tree, however, my problem 
remains.  HDF4 support absolutely is not found if I don't specify with 
configure command line option.  Everything else seems to be detected as 
you suggest (minus Xerces, ogdi, and beta libtiff 3.6 under /usr/local), 
except hdf4. 

Note configure options and output.  First, with no options...

./configure
<chop>
checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for jpc_decode in -ljasper... yes

Next, with option for hdf4 which is installed under /usr

But first, a `find` do demonstrate they are there (as well as the hdf5 
includes and macros),

$ find /usr/include /usr/lib -name *hdf* -exec ls -l {} \;
-rw-r--r--    1 root     root         4895 Dec  8  2002 /usr/include/hdf.h
-rw-r--r--    1 root     root        16909 Dec  8  2002 /usr/include/hdf.f90
-rw-r--r--    1 root     root        16909 Dec  8  2002 /usr/include/hdf.inc
-rw-r--r--    1 root     root         2110 Dec  8  2002 
/usr/include/hdf2netcdf.h
-rw-r--r--    1 root     root        49675 Dec  8  2002 /usr/include/hdfi.h
-rw-r--r--    1 root     root        26303 Dec  8  2002 /usr/include/mfhdf.h
-rw-r--r--    1 root     root       162318 Dec  8  2002 /usr/lib/libmfhdf.a
lrwxrwxrwx    1 root     root           16 Aug 23 15:56 
/usr/lib/libhdf5.so.0 -> libhdf5.so.0.0.0
-rw-r--r--    1 root     root      1047816 Feb 19  2003 
/usr/lib/libhdf5.so.0.0.0

Second, an RPM query to demonstrate what package each file belongs to...

$ find /usr/include /usr/lib -name *hdf* -exec rpm -q -f {} \;
HDF-4.1r5-5mdk
HDF-4.1r5-5mdk
HDF-4.1r5-5mdk
HDF-4.1r5-5mdk
HDF-4.1r5-5mdk
HDF-4.1r5-5mdk
HDF-4.1r5-5mdk
libhdf5_0-1.4.4-2mdk
libhdf5_0-1.4.4-2mdk

./configure --with-hdf4=/usr

checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... yes
checking for jpc_decode in -ljasper... yes

Finally, if I include the "--with-hdf4" with any other option, once 
again, hdf4 libs and includes are not located and configure exits with 
error...
 
Note:  libtiff is only an example, however I use it to point to beta 
3.6beta. instead of default 3.5.x under /usr

./configure --with-hdf4=/usr --with-libtiff=/usr/local

checking for FMEObjects... no
checking for SDreaddata in -lmfhdf... no
checking for SDreaddata in -lhdf4... no
checking for SDreaddata in -lmfhdf... no
configure: error: HDF4 support requested with arg /usr, but neither hdf4 
nor mfhdf lib found

Jack Varga

Andrey Kiselev wrote:

>On Wed, Sep 03, 2003 at 10:28:39PM -0600, Jack Varga wrote:
>  
>
>>Trying to build GDAL with support for HDF4 and Xerces and have 
>>encountered problems.  
>>
>>System basics: stock Mandrake 9.1using gcc 3.2.2.  Kernel is
>>2.4.21--0.13mdk.  cpu is athlon-tbird although uname -p fails to
>>detect.  Assume that is because I'm using stock kernel. 
>>
>>./configure --with-hdf=/usr/lib
>>    
>>
>
>Jack,
>
>You don't need to specify library path when the library installed in
>standard place. You even don't need to specify --with-hdf option, it
>will be autodetected. But if you want to prepare a binary package it
>may be useful.
>
>And finally, there is a mistake in your path. You should use
>--with-hdf=/usr so far as library should be searched in /usr/lib
>directory and headers in /usr/include, not in /usr/lib/include.
>
>
>					Andrey
>
>  
>


From Doug_Newcomb at fws.gov  Fri Sep  5 09:29:13 2003
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9
Message-ID: <OFB1737565.7038E9E7-ON85256D98.0047FA24@irm.r9.fws.gov>


Frank,
      I ran valgrind on the cvs version and I got the following:
[dnewcomb@r4gis athens]$ valgrind massspogr.pl
==22625== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==22625== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==22625== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==22625== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==22625== Estimated CPU clock rate is 1503 MHz
==22625== For more details, rerun with: -v
==22625==
==22625== Invalid write of size 4
==22625==    at 0x80854ED: S_cl_init (in /usr/bin/perl)
==22625==    by 0x8088245: Perl_pregcomp (in /usr/bin/perl)
==22625==    by 0x807D910: Perl_pmruntime (in /usr/bin/perl)
==22625==    by 0x8078704: Perl_yyparse (in /usr/bin/perl)
==22625==    Address 0xBFFEBB80 is just below %esp.  Possibly a bug in
GCC/G++
==22625==    v 2.96 or 3.0.X.  To suppress, use:
--workaround-gcc296-bugs=yes
==22625==

-------------------------------------------------------------------------------------------------------------------------------------------------------------------------
This was repeated several times  and ended with
shapedir = /gis/import/nwi/athens/aonia_l.prj
prjnam =
quadname=aonia_l
deleting /oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp
ERROR 4: Failed to open Shapefile
`/oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp'.

ERROR 1: Terminating translation prematurely after failed
translation of layer aonia_l

shape project failed at /usr/local/bin/massspogr.pl line 47, <NWILIST> line
1.
==22625==
==22625== ERROR SUMMARY: 222 errors from 24 contexts (suppressed: 3 from 1)
==22625== malloc/free: in use at exit: 314201 bytes in 6533 blocks.
==22625== malloc/free: 12803 allocs, 6270 frees, 745643 bytes allocated.
==22625== For a detailed leak analysis,  rerun with: --leak-check=yes
==22625== For counts of detected errors, rerun with: -v
---------------------------------------------------------------------------------------

So, I reran valgrind with --leak-check=yes and --trace-child=yes and got
the following:

 valgrind --trace-children=yes --leak-check=yes massspogr.pl
==22640== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==22640== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==22640== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==22640== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==22640== Estimated CPU clock rate is 1508 MHz
==22640== For more details, rerun with: -v
==22640==
==22640== Invalid write of size 4
==22640==    at 0x80854ED: S_cl_init (in /usr/bin/perl)
==22640==    by 0x8088245: Perl_pregcomp (in /usr/bin/perl)
==22640==    by 0x807D910: Perl_pmruntime (in /usr/bin/perl)
==22640==    by 0x8078704: Perl_yyparse (in /usr/bin/perl)
==22640==    Address 0xBFFEB3D0 is just below %esp.  Possibly a bug in
GCC/G++
==22640==    v 2.96 or 3.0.X.  To suppress, use:
--workaround-gcc296-bugs=yes
==22640==
-----------------------------------------------------------------------------------
repeated several times and then
-----------------------------------------------------------------------------------
shapedir = /gis/import/nwi/athens/aonia_l.prj
prjnam =
quadname=aonia_l
deleting /oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp
==22641== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==22641== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==22641== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==22641== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==22641== Estimated CPU clock rate is 1509 MHz
==22641== For more details, rerun with: -v
==22641==
==22641== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==22641== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==22641== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==22641== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==22641== Estimated CPU clock rate is 1504 MHz
==22641== For more details, rerun with: -v
==22641==
==22641== FATAL: M_PROCMAP_BUF is too small; increase it and recompile
shape project failed at /usr/local/bin/massspogr.pl line 47, <NWILIST> line
1.
==22640==
==22640== ERROR SUMMARY: 222 errors from 24 contexts (suppressed: 3 from 1)
==22640== malloc/free: in use at exit: 314239 bytes in 6533 blocks.
==22640== malloc/free: 12803 allocs, 6270 frees, 745681 bytes allocated.
==22640== For counts of detected errors, rerun with: -v
==22640== searching for pointers to 6533 not-freed blocks.
==22640== checked 4985440 bytes.
==22640==
==22640== LEAK SUMMARY:
==22640==    definitely lost: 0 bytes in 0 blocks.
==22640==    possibly lost:   0 bytes in 0 blocks.
==22640==    still reachable: 314239 bytes in 6533 blocks.
==22640==         suppressed: 0 bytes in 0 blocks.
==22640== Reachable blocks (those to which a pointer was found) are not
shown.
==22640== To see them, rerun with: --show-reachable=yes
==22640==

I'm not an expert, but it doesn't look like perl is happy.  I see the
M_PROCMAP_BUF is too small message above.  Does that refer to perl or
ogr2ogr?

According to rpm -qa|grep perl, I have the following loaded:

perl-NDBM_File-1.75-26.72.4
perl-MIME-Base64-2.12-6
perl-DB_File-1.75-26.72.4
perl-DateManip-5.39-5
perl-XML-Twig-2.02-2
openssl-perl-0.9.6b-32.7
groff-perl-1.17.2-7.0.2
perl-XML-Grove-0.46alpha-3
gimp-perl-1.2.1-7
perl-CGI-2.752-26.72.4
perl-XML-Encoding-1.01-2
perl-5.6.1-26.72.4
perl-Digest-MD5-2.13-1
perl-libwww-perl-5.53-3
perl-SGMLSpm-1.03ii-4
perl-libnet-1.0703-6
perl-XML-Parser-2.30-7
mod_perl-1.26-2
perl-CPAN-1.59_54-26.72.4
perl-Storable-0.6.11-6
perl-XML-Dumper-0.4-5
perl-DBI-1.18-1
perl-Parse-Yapp-1.04-3
perl-libxml-enno-1.02-5
perl-libxml-perl-0.07-5
perl-URI-1.12-5
perl-HTML-Parser-3.25-2
perl-HTML-Tagset-3.03-3

      This should be the most "up2date" for Red Hat Advanced Server 2.1.

BTW, the Red Hat 9 box bombed on one run in a similar fashion, but I have
been unable to repeat it.

I have attached the complete capture of the valgrind outputs since I
probably generalized too much.


Doug Newcomb
Raleigh, NC


(See attached file: valgrindout.txt)(See attached file:
valgrindoutlchk.txt)









                                                                                                                                  
                      Frank Warmerdam                                                                                             
                      <warmerdam@pobox.com>         To:      gdal-dev@remotesensing.org                                           
                      Sent by:                      cc:                                                                           
                      gdal-dev-admin@remote         Subject: Re: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9  
                      sensing.org                                                                                                 
                                                                                                                                  
                                                                                                                                  
                      09/04/2003 09:46 AM                                                                                         
                      Please respond to                                                                                           
                      gdal-dev                                                                                                    
                                                                                                                                  
                                                                                                                                  




Doug_Newcomb@fws.gov wrote:
> Hi Folks,
>       I'm running into some strangeness with ogr2ogr .  I am reprojecting
> the nwi quadrangle shapefiles  (ftp://www.nwi.fws.gov/shapedata ) using
> ogr2ogr called in a perl script  in the following fashion.
>
>  ogr2ogr -t_srs "NAD83" -f "ESRI Shapefile" $destnwi  $nwishape
>
> where $nwishape is the name of the input shape file and $destnwi is the
> name of the destination directory.
> I have the following as output:
>
> shapedir = /gis/import/nwi/athens/aonia_l.prj  #echoing the input
filename
> quadname=aonia_l                                                  #
echoing
> the quad filename
> deleting /oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp  # delete
> the output shape file if it exists
>
> ERROR 4: Failed to open Shapefile
> `/oracle/data1/gisdata/SERegion/nwi/athens/aonia_l.shp'.
>
> ERROR 1: Terminating translation prematurely after failed
> translation of layer aonia_l
>
> A single file , aonia_l.shp is created with size 0 (according to ls -al)
.

Doug,

I don't know why this failing, expecially with the error message you are
seeing.
If the issue where create permissions for the shapefile, I would expect
nothing
to be created.  It might be helpful to set "CPL_DEBUG=ON" in your
environment
to get additional information.  Also, if you can run things under valgrind
that
might provide some useful information.

I would appreciate anything you can do to narrow down this problem to
something
I might be able to reproduce and debug.

PS. You have some nice systems!

Best regards,

--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev




-------------- next part --------------
A non-text attachment was scrubbed...
Name: valgrindout.txt
Type: application/octet-stream
Size: 11896 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030905/77a2ab11/valgrindout.obj
-------------- next part --------------
A non-text attachment was scrubbed...
Name: valgrindoutlchk.txt
Type: application/octet-stream
Size: 13058 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030905/77a2ab11/valgrindoutlchk.obj
From Doug_Newcomb at fws.gov  Fri Sep  5 10:12:06 2003
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9
Message-ID: <OF51E987E3.C9A08F38-ON85256D98.004BCC1B@irm.r9.fws.gov>

Frank,
      I have repeated the crash on the Red Hat 9 box (using gdal 1.1.9
compiled from source) . Valgrind output as follows:

We seem to have the following pattern repeating
 ==574== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==574== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==574== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==574== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==574== Estimated CPU clock rate is 1672 MHz
==574== For more details, rerun with: -v
==574==
==574== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==574== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==574== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==574== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==574== Estimated CPU clock rate is 1668 MHz
==574== For more details, rerun with: -v
==574==
==574==
==574== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 1)
==574== malloc/free: in use at exit: 29080 bytes in 1310 blocks.
==574== malloc/free: 63255 allocs, 61945 frees, 3901130 bytes allocated.
==574== For counts of detected errors, rerun with: -v
==574== searching for pointers to 1310 not-freed blocks.
==574== checked 10804300 bytes.
==574==
==574== 104 bytes in 2 blocks are definitely lost in loss record 5 of 12
==574==    at 0x4016388E: __builtin_new (in /usr/lib/valgrind/valgrind.so)
==574==    by 0x401638D6: operator new(unsigned) (in
/usr/lib/valgrind/valgrind.so)
==574==    by 0x8049389: main (in /usr/local/bin/ogr2ogr)
==574==    by 0x4060CA46: __libc_start_main (in /lib/libc-2.3.2.so)
==574==
==574== LEAK SUMMARY:
==574==    definitely lost: 104 bytes in 2 blocks.
==574==    possibly lost:   0 bytes in 0 blocks.
==574==    still reachable: 28976 bytes in 1308 blocks.
==574==         suppressed: 0 bytes in 0 blocks.
==574== Reachable blocks (those to which a pointer was found) are not
shown.
==574== To see them, rerun with: --show-reachable=yes
==574==
==576== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==576== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==576== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==576== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==576== Estimated CPU clock rate is 1676 MHz
==576== For more details, rerun with: -v
==576==
==576== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==576== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==576== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==576== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==576== Estimated CPU clock rate is 1680 MHz
==576== For more details, rerun with: -v
==576==
==576==
==576== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 2 from 1)
==576== malloc/free: in use at exit: 29080 bytes in 1310 blocks.
==576== malloc/free: 78550 allocs, 77240 frees, 11075204 bytes allocated.
==576== For counts of detected errors, rerun with: -v
==576== searching for pointers to 1310 not-freed blocks.
==576== checked 10808396 bytes.
==576==
==576== 104 bytes in 2 blocks are definitely lost in loss record 5 of 12
==576==    at 0x4016388E: __builtin_new (in /usr/lib/valgrind/valgrind.so)
==576==    by 0x401638D6: operator new(unsigned) (in
/usr/lib/valgrind/valgrind.so)
==576==    by 0x403333F5:
OGRCreateCoordinateTransformation(OGRSpatialReference*,
OGRSpatialReference*) (in /usr/local/lib/libgdal.1.1.so)
==576==    by 0x804A40C: TranslateLayer(OGRDataSource*, OGRLayer*,
OGRDataSource*, char**, char const*, int, OGRSpatialReference*,
OGRSpatialReference*, char**, int, int) (in /usr/local/bin/ogr2ogr)
==576==
==576== LEAK SUMMARY:
==576==    definitely lost: 104 bytes in 2 blocks.
==576==    possibly lost:   0 bytes in 0 blocks.
==576==    still reachable: 28976 bytes in 1308 blocks.
==576==         suppressed: 0 bytes in 0 blocks.
==576== Reachable blocks (those to which a pointer was found) are not
shown.
==576== To see them, rerun with: --show-reachable=yes
==576==

And then the final crash -

==581== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==581== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==581== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==581== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==581== Estimated CPU clock rate is 1667 MHz
==581== For more details, rerun with: -v
==581==
==581== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==581== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==581== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==581== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==581== Estimated CPU clock rate is 1668 MHz
==581== For more details, rerun with: -v
==581==
==581== FATAL: M_PROCMAP_BUF is too small; increase it and recompile
shape project failed at /home/dnewcomb/bin/ogrprojdd.pl line 51.
==32633== valgrind's libpthread.so: KLUDGED call to: siglongjmp (cleanup
handlers are ignored)
==32633==
==32633== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 2)
==32633== malloc/free: in use at exit: 334460 bytes in 2799 blocks.
==32633== malloc/free: 5782 allocs, 2983 frees, 1640087 bytes allocated.
==32633== For counts of detected errors, rerun with: -v
==32633== searching for pointers to 2799 not-freed blocks.
==32633== checked 5480132 bytes.
==32633==
==32633== 5 bytes in 1 blocks are definitely lost in loss record 1 of 14
==32633==    at 0x40163791: malloc (in /usr/lib/valgrind/valgrind.so)
==32633==    by 0x40284613: Perl_savesharedpv (util.c:797)
==32633==    by 0x40239046: S_init_main_stash (perl.c:2779)
==32633==    by 0x40235494: S_parse_body (perl.c:1126)
==32633==
==32633== 5632 bytes in 2 blocks are definitely lost in loss record 10 of
14
==32633==    at 0x40163D9C: realloc (in /usr/lib/valgrind/valgrind.so)
==32633==    by 0x402833BC: Perl_safesysrealloc (util.c:113)
==32633==    by 0x402C5433: Perl_tmps_grow (scope.c:167)
==32633==    by 0x402AC684: Perl_sv_2mortal (sv.c:6578)
==32633==
==32633== 12012 bytes in 12 blocks are possibly lost in loss record 12 of
14
==32633==    at 0x40163791: malloc (in /usr/lib/valgrind/valgrind.so)
==32633==    by 0x4028323A: Perl_safesysmalloc (util.c:69)
==32633==    by 0x402A1672: S_more_xpviv (sv.c:808)
==32633==    by 0x402A161E: S_new_xpviv (sv.c:783)
==32633==
==32633== 132222 bytes in 11 blocks are definitely lost in loss record 13
of 14
==32633==    at 0x40163791: malloc (in /usr/lib/valgrind/valgrind.so)
==32633==    by 0x4028323A: Perl_safesysmalloc (util.c:69)
==32633==    by 0x402C5062: Perl_new_stackinfo (scope.c:72)
==32633==    by 0x4023A0FD: Perl_init_stacks (perl.c:3429)
==32633==
==32633== LEAK SUMMARY:
==32633==    definitely lost: 137859 bytes in 14 blocks.
==32633==    possibly lost:   12012 bytes in 12 blocks.
==32633==    still reachable: 184589 bytes in 2773 blocks.
==32633==         suppressed: 0 bytes in 0 blocks.
==32633== Reachable blocks (those to which a pointer was found) are not
shown.
==32633== To see them, rerun with: --show-reachable=yes
==32633==

Doug Newcomb
USFWS
Raleigh, NC

P.S.  I had forgotten to mention that the previous message valgrind  was
run against the 9-3-2003 cvs snapshot.  This run was against the 1.1.9
final.





From warmerdam at pobox.com  Fri Sep  5 10:18:58 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat
 9
In-Reply-To: <OFB1737565.7038E9E7-ON85256D98.0047FA24@irm.r9.fws.gov>
References: <OFB1737565.7038E9E7-ON85256D98.0047FA24@irm.r9.fws.gov>
Message-ID: <3F589B52.8030502@pobox.com>

Doug_Newcomb@fws.gov wrote:
> Frank,
>       I ran valgrind on the cvs version and I got the following:
> [dnewcomb@r4gis athens]$ valgrind massspogr.pl

> ==22641== FATAL: M_PROCMAP_BUF is too small; increase it and recompile
> shape project failed at /usr/local/bin/massspogr.pl line 47, <NWILIST> line
> 1.

Doug,

It seems you ran valgrind on the perl script rather than the ogr2ogr program.
I would suggest capturing the exact commandline produced by the perl script
and then executing this by hand with valgrind.

A google search suggests the M_PROCMAP_BUF is some sort of valgrind build
constant.  Presumably we are exceeding some valgrind limit for memory tracking.
I don't think it is necessarily a significant issue unless it still happens
when running valgrind against ogr2ogr.

I would add we don't necessarily need the leak checking.  I am hoping to find
a memory access (illegal write, etc) error that might cause occasional failure.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From Doug_Newcomb at fws.gov  Fri Sep  5 10:55:37 2003
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9
Message-ID: <OFEA16DD42.4B3452D4-ON85256D98.00519BF3@irm.r9.fws.gov>

Ask and ye shall recieve.  This is the Valgrind output from the RH Advanced
Server 2.1 box with the 9-3-2003 cvs snapshot (when run by itself, it
appeared to function normally) :


[xxxxxx@xxxxx athens]$ valgrind --leak-check=yes ogr2ogr -t_srs "NAD83" -f
"ESRI Shapefile" dd /gis/import/nwi/athens/aonia_p.shp
==22843== Memcheck, a.k.a. Valgrind, a memory error detector for x86-linux.
==22843== Copyright (C) 2002, and GNU GPL'd, by Julian Seward.
==22843== Using valgrind-1.9.6, a program instrumentation system for
x86-linux.
==22843== Copyright (C) 2000-2002, and GNU GPL'd, by Julian Seward.
==22843== Estimated CPU clock rate is 1507 MHz
==22843== For more details, rerun with: -v
==22843==
==22843==
==22843== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 4 from 2)
==22843== malloc/free: in use at exit: 5170 bytes in 327 blocks.
==22843== malloc/free: 8815 allocs, 8489 frees, 3646646 bytes allocated.
==22843== For counts of detected errors, rerun with: -v
==22843== searching for pointers to 327 not-freed blocks.
==22843== checked 9708472 bytes.
==22843==
==22843== 40 bytes in 1 blocks are definitely lost in loss record 18 of 26
==22843==    at 0x40169994: __builtin_new (vg_clientfuncs.c:129)
==22843==    by 0x804A064: main (in /usr/local/bin/ogr2ogr)
==22843==    by 0x4059B686: __libc_start_main
(../sysdeps/generic/libc-start.c:129)
==22843==    by 0x8049100: (within /usr/local/bin/ogr2ogr)
==22843==
==22843== 64 bytes in 1 blocks are definitely lost in loss record 19 of 26
==22843==    at 0x40169994: __builtin_new (vg_clientfuncs.c:129)
==22843==    by 0x403D4951:
OGRCreateCoordinateTransformation(OGRSpatialReference *,
OGRSpatialReference *) (in /usr/local/lib/libgdal.1.1.so)
==22843==    by 0x804A577: TranslateLayer(OGRDataSource *, OGRLayer *,
OGRDataSource *, char **, char const *, int, OGRSpatialReference *,
OGRSpatialReference *, char **, int, int) (in /usr/local/bin/ogr2ogr)
==22843==    by 0x804A28E: main (in /usr/local/bin/ogr2ogr)
==22843==
==22843== LEAK SUMMARY:
==22843==    definitely lost: 104 bytes in 2 blocks.
==22843==    possibly lost:   0 bytes in 0 blocks.
==22843==    still reachable: 5066 bytes in 325 blocks.
==22843==         suppressed: 0 bytes in 0 blocks.
==22843== Reachable blocks (those to which a pointer was found) are not
shown.
==22843== To see them, rerun with: --show-reachable=yes
==22843==

Doug Newcomb
USFWS
Raleigh, NC





                                                                                                                                  
                      Frank Warmerdam                                                                                             
                      <warmerdam@pobox.com>         To:      gdal-dev@remotesensing.org                                           
                      Sent by:                      cc:                                                                           
                      gdal-dev-admin@remote         Subject: Re: [Gdal-dev] ogr2ogr on Red Hat Advanced Server 2.1 vs. Red Hat 9  
                      sensing.org                                                                                                 
                                                                                                                                  
                                                                                                                                  
                      09/05/2003 10:18 AM                                                                                         
                      Please respond to                                                                                           
                      gdal-dev                                                                                                    
                                                                                                                                  
                                                                                                                                  




Doug_Newcomb@fws.gov wrote:
> Frank,
>       I ran valgrind on the cvs version and I got the following:
> [dnewcomb@r4gis athens]$ valgrind massspogr.pl

> ==22641== FATAL: M_PROCMAP_BUF is too small; increase it and recompile
> shape project failed at /usr/local/bin/massspogr.pl line 47, <NWILIST>
line
> 1.

Doug,

It seems you ran valgrind on the perl script rather than the ogr2ogr
program.
I would suggest capturing the exact commandline produced by the perl script
and then executing this by hand with valgrind.

A google search suggests the M_PROCMAP_BUF is some sort of valgrind build
constant.  Presumably we are exceeding some valgrind limit for memory
tracking.
I don't think it is necessarily a significant issue unless it still happens
when running valgrind against ogr2ogr.

I would add we don't necessarily need the leak checking.  I am hoping to
find
a memory access (illegal write, etc) error that might cause occasional
failure.

Best regards,

--
---------------------------------------+--------------------------------------

I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev







From dem at acri-st.fr  Fri Sep  5 11:57:55 2003
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] Windows OpenEV HDF PB
In-Reply-To: <5.0.2.1.2.20030829160147.00a4d2a0@mail.acri.fr>
Message-ID: <5.0.2.1.2.20030905175359.00a59d80@mail.acri.fr>

Hi,

I've just tested the problematic file with Windows OpenEV_FW version 1.5.4 
and... it works fine !
If this can help you...

Regards,

Julien



At 16:23 29/08/2003 +0200, you wrote:
>Hello,
>
>
>I try GDAL today with OpenEV_FW under Windows (OpenEV_FW version 1.6.2) 
>and Linux (OpenEV_FW version 1.5.4) platforms.
>
>I have problems with this HDF4 file only with the Windows version (1.6.2) :
>
>[] /users/dem/tmp/openev_FW/bin > gdalinfo 
>/obe-temp/dem/S19981822003212.L3m_MC_CHLO.hdf
>Driver: HDF4Image/HDF4 Dataset
>Size is 4096, 2048
>Coordinate System is `'
>Origin = (0.000000,0.000000)
>Pixel Size = (1.000000,1.000000)
>Corner Coordinates:
>Upper Left  (   0.0000000,   0.0000000)
>Lower Left  (       0.000,    2048.000)
>Upper Right (    4096.000,       0.000)
>Lower Right (    4096.000,    2048.000)
>Center      (    2048.000,    1024.000)
>Band 1 Block=4096x1 Type=Byte, ColorInterp=Gray
>[] /users/dem/tmp/openev_FW/bin >
>
>
>under linux all works very well, but on Windows when I try to import or 
>open the file python.exe fails (I have a Windows popup with "cannot read 
>memory at ...") and all OpenEV is closed...
>
>Maybe it's a bug between 1.5.4 and 1.6.2 version or a GDAL HDF bug under 
>Windows ?
>
>
>
>Thanks in advance for help,
>
>Julien


From alexamici at tiscali.it  Fri Sep  5 18:53:35 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] cross compile problems
Message-ID: <200309060053.35390.alexamici@tiscali.it>

Frank,

during my libtool work i happened to try to cross-compile from linux for 
mingw32 and i hit a couple of problems in the aclocal.m4 macros.
i don't know if you are interested in supporting cross-compiles, if you do, 
then you have to address at least the following  issues:

- all tests that unconditionally try to _run_ a sample program fail,
i.e. the byte-order test breaks on cross-compiles:
"checking whether byte ordering is bigendian... ./configure: line 1: 
./conftest: cannot execute binary file
no"

- i get the following error close to the ld -shared test as well:
"checking for Xerces C++... disabled
conftest2.o: file not recognized: File format not recognized
collect2: ld returned 1 exit status
checking for i586-mingw32msvc-g++ -shared ... no(2)
checking for ld -shared ... no"

- the postgresql check wrongly detected the pg_config program that i have on 
the build system (but i don't have it in the host environment)

- similarly for the python makefiles

cheers,
alessandro


From alexamici at tiscali.it  Fri Sep  5 18:28:52 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309032101.17001.alexamici@tiscali.it>
References: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01> <200309032101.17001.alexamici@tiscali.it>
Message-ID: <200309060028.53052.alexamici@tiscali.it>

folks,

> people with non-linux, non-windows platforms are invited to give the new
> build system a spin and report the problems they find.

i could try libtool support on a couple more targets:
cygwin -> only the static library are produced by libtool and i get a strange 
		warning about possibly unresolved symbols (?)
mingw -> same as cygwin
cross-compile for mingw from linux -> apparently same as mingw

any win32 guru can help me on those?

> note that a few contrib libs are yet not supported, i.e. libgif.
> libtiff and libgeotiff are working thou.

as far as i coulf test the internal version of libpng, libgif and libjpeg now 
work. i'm not sure if all version of GNU make will like the rule i used to 
make them work thou.

as of now, the only major piece of gdal not yet ported to the libtool build is 
the python module. i'll be working on that.

cheers,
alessandro


From alexamici at tiscali.it  Sun Sep  7 15:36:40 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] cross compile problems
In-Reply-To: <200309060053.35390.alexamici@tiscali.it>
References: <200309060053.35390.alexamici@tiscali.it>
Message-ID: <200309072136.40897.alexamici@tiscali.it>

Frank,

> during my libtool work i happened to try to cross-compile from linux for
> mingw32 and i hit a couple of problems in the aclocal.m4 macros.
> i don't know if you are interested in supporting cross-compiles, if you do,
> then you have to address at least the following  issues:
>
> - all tests that unconditionally try to _run_ a sample program fail,
> i.e. the byte-order test breaks on cross-compiles:
> "checking whether byte ordering is bigendian... ./configure: line 1:
> ./conftest: cannot execute binary file
> no"

any argument against the standard autoconf test for bigendianess?

diff -u -r1.66 configure.in
--- configure.in	7 Sep 2003 19:31:36 -0000	1.66
+++ configure.in	7 Sep 2003 19:33:37 -0000
@@ -24,7 +24,7 @@
 AC_CHECK_HEADERS(fcntl.h unistd.h dbmalloc.h dlfcn.h stdint.h limits.h)
 
 dnl Checks for library functions.
-MY_TEST_BIGENDIAN
+AC_C_BIGENDIAN
 AC_FUNC_VPRINTF
 AC_CHECK_FUNC(vsnprintf, AC_DEFINE(HAVE_VSNPRINTF))
 
it is advertized as working with cross compiles too.

cheers,
alessandro


From warmerdam at pobox.com  Mon Sep  8 11:01:04 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] cross compile problems
In-Reply-To: <200309072136.40897.alexamici@tiscali.it>
References: <200309060053.35390.alexamici@tiscali.it> <200309072136.40897.alexamici@tiscali.it>
Message-ID: <3F5C99B0.3090602@pobox.com>

Alessandro Amici wrote:
> Frank,
> 
> 
>>during my libtool work i happened to try to cross-compile from linux for
>>mingw32 and i hit a couple of problems in the aclocal.m4 macros.
>>i don't know if you are interested in supporting cross-compiles, if you do,
>>then you have to address at least the following  issues:
>>
>>- all tests that unconditionally try to _run_ a sample program fail,
>>i.e. the byte-order test breaks on cross-compiles:
>>"checking whether byte ordering is bigendian... ./configure: line 1:
>>./conftest: cannot execute binary file
>>no"
> 
> 
> any argument against the standard autoconf test for bigendianess?
> 
> diff -u -r1.66 configure.in
> --- configure.in	7 Sep 2003 19:31:36 -0000	1.66
> +++ configure.in	7 Sep 2003 19:33:37 -0000
> @@ -24,7 +24,7 @@
>  AC_CHECK_HEADERS(fcntl.h unistd.h dbmalloc.h dlfcn.h stdint.h limits.h)
>  
>  dnl Checks for library functions.
> -MY_TEST_BIGENDIAN
> +AC_C_BIGENDIAN
>  AC_FUNC_VPRINTF
>  AC_CHECK_FUNC(vsnprintf, AC_DEFINE(HAVE_VSNPRINTF))
>  
> it is advertized as working with cross compiles too.

Alessandro,

I ran into situations where AC_C_BIGENDIAN did not work properly, and so I
implemented MY_TEST_BIGENDIAN.  My recollection i that AC_C_BIGENDIAN depended
on some include file which wasn't available on some particularly backward
system or something like that.  However, I am willing to go back to
AC_C_BIGENDIAN for now, and if the problem crops up again we will try to
come up with a solution that fallback to the MY_TEST_BIGENDIAN method only
if AC_C_BIGENDIAN can't figure out things.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dem at acri-st.fr  Mon Sep  8 04:23:18 2003
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GDAL and Kakadu JPEG2000 performances and quality
Message-ID: <5.0.2.1.2.20030908101703.00a4eec0@mail.acri.fr>

Sorry I repost it for the mailing list because my first email has the wrong 
2002 date...

====================

Hi,


I'm testing GDAL JPEG2000 with Kakadu and I have some questions about 
performances and resulting quality :

My test is simple :

INPUT : a simple BMP file RGB 5096x4496 : size : 66 Mo

OUPUT : I want a JP2 file with size near 8 Mo

PLATFORM : Cygwin under Windows NT

First I try with kdu_compress include in binary package ok Kakadu 4.0.3 for 
Windows :
time kdu_compress.exe -i RGB.bmp -o RGB_kakadu_compress.jp2 -rate 
2.85,2.85,2.85
=> 36 seconds

Then I try the same with gdal_translate included in OpenEV_FW_1.6.2 binary 
package :
time gdal_translate.exe -of JP2KAK -co QUALITY=12 win32_executables/RGB.bmp 
RGB_kakadu_gdal.jp2
=> 96 seconds

Do you know why there is this difference of performances ?

In the GDAL 1.1.9 Kakadu source code driver I see that JP2 Kakadu files are 
virtually tiled into 512x128 tiles :

/* -------------------------------------------------------------------- */
/* Use a 512x128 "virtual" block size unless the file is small. */
/* -------------------------------------------------------------------- */
if( nRasterXSize >= 1024 )
nBlockXSize = 512;
else
nBlockXSize = nRasterXSize;
if( nRasterYSize >= 256 )
nBlockYSize = 128;
else
nBlockYSize = nRasterYSize;

Maybe this virtual tiling is the reason ?
(I don't know how kdu_compress write the data...)


When I compared visually the results (with OpenEV without viewer 
interpolation) I see also a big quality difference :
I have attached in the mail a ZIP file with the different snapshots.
The JP2 created with kakadu_compress seems better and I find that the image 
created by GDAL seems have colorimetric degradation (the color of some 
pixels seems surprising (are kakadu and/or gdal compress RGB components 
separately ?)).

How can I obtain the same results with GDAL than with kakadu_compress ?

Sorry I'm newbie about JPEG2000 and Kakadu and GDAL and maybe the cause is 
I didn't pass the good arguments to GDAL and/or kakadu_compress...

Many thanks in advance and sorry for my poor english,

Julien

PS : kakadu_compress print a warning :
"Note:
The default rate control policy for colour images employs visual (CSF)
weighting factors. To minimize MSE instead, specify `-no_weights'."

What is it ?
-------------- next part --------------
A non-text attachment was scrubbed...
Name: comparison_gdal_kakadu.zip
Type: application/zip
Size: 11612 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030908/c34a0217/comparison_gdal_kakadu.zip
From warmerdam at pobox.com  Mon Sep  8 15:16:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:54 2007
Subject: [Gdal-dev] GDAL and Kakadu JPEG2000 performances and quality
In-Reply-To: <5.0.2.1.2.20030908101703.00a4eec0@mail.acri.fr>
References: <5.0.2.1.2.20030908101703.00a4eec0@mail.acri.fr>
Message-ID: <3F5CD57F.3050306@pobox.com>

Julien Demaria wrote:
> First I try with kdu_compress include in binary package ok Kakadu 4.0.3 
> for Windows :
> time kdu_compress.exe -i RGB.bmp -o RGB_kakadu_compress.jp2 -rate 
> 2.85,2.85,2.85
> => 36 seconds

Julien,

I am a bit vague on some of the kdu_compress options, but my understanding
is that -rate 2.85 means produce 2.85 bits per pixel in the compressed file
which would be equivelent to a quality of roughly 35.  Are you sure the
comparison is equivelent?   Could I get the .jp2 files produced with
kdu_compress and gdal_translate?

Another aspect is that kakadu *may* be converting to YCbCr color space
which preserves values better than RGB which is the form GDAL will save
data as.


> Maybe this virtual tiling is the reason ?
> (I don't know how kdu_compress write the data...)

This is a read-side thing, and shouldn't have any effect.  Of course,
there are a huge number of options which can come into play for JPEG2000
compression, and some of the GDAL ones are no doubt different than the
kdu_compress defaults.


> PS : kakadu_compress print a warning :
> "Note:
> The default rate control policy for colour images employs visual (CSF)
> weighting factors. To minimize MSE instead, specify `-no_weights'."
> 
> What is it ?

I don't really know.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jvarga at boulder.net  Mon Sep  8 15:39:38 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Support for GML via Xerces
Message-ID: <3F5CDAFA.3040009@boulder.net>

I'm having no luck finding info on compiling Xerces (C++) XML parser 
into GDAL and was wondering if (a., this is the only way to parse GML 
with GDAL, (b. anyone has had success.  I've downloaded the Linux 
Xerces-C++ ver. 2.3.0 binaries for Linux and installed them in 
/usr/local/xercesc.  I've also downloaded and compiled the same release 
source, (but there is no documentation I could find on how to install 
after compilation, i.e., no make install).  I'm using GDAL 1.1.9

regards,




From warmerdam at pobox.com  Tue Sep  9 09:16:45 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: Sample data
In-Reply-To: <DE8A435707FBA24392E5C67F58E294AA018FC1@dev001_pdc.Dev.cadcorp.net>
References: <DE8A435707FBA24392E5C67F58E294AA018FC1@dev001_pdc.Dev.cadcorp.net>
Message-ID: <3F5DD2BD.7070107@pobox.com>

Martin Daly wrote:
> Frank,
> 
> I'd really, really, really (can you see how much?) like to see a GDAL
> sample data download area.  We spent ages searching for data - to test
> and demonstrate with - for some of the drivers.  We ended up with the
> attached list (apologies for disturbing your delicate Linux
> sensibilities by using DIR output instead of ls, but note the folders
> cunningly named using GDAL driver names), which is way short of the
> possible permutations.
> 
> Obviously there are sensitivity and privacy issues, but on the whole I
> would have thought that it would be possible to get something for most
> drivers.

Martin,

Rather that risk putting my OGC meeting beer supply at risk, I am forced
to comply.  I will start assembling public data samples on the GDAL ftp
site in directories named by driver.

   ftp://ftp.remotesensing.org/gdal/data

It will hopefully automatically get mirrored at:

   http://gdal.maptools.org/dl/data

Sample data of publically redistributable data samples of moderate size
are welcome from all sources.  Please drop them in the incoming directory
at ftp.remotesensing.org and let me know by email.

I will work to populate it as I can.  You are certainly not the first GDAL
user to request comprehensive test data.  Some are even paying customers!

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dem at acri-st.fr  Tue Sep  9 05:45:39 2003
From: dem at acri-st.fr (Julien Demaria)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] GDAL and Kakadu JPEG2000 performances and
  quality
In-Reply-To: <3F5CD57F.3050306@pobox.com>
References: <5.0.2.1.2.20030908101703.00a4eec0@mail.acri.fr>
 <5.0.2.1.2.20030908101703.00a4eec0@mail.acri.fr>
Message-ID: <5.0.2.1.2.20030909110756.00a56d90@mail.acri.fr>

Frank,

>Julien Demaria wrote:
>>First I try with kdu_compress include in binary package ok Kakadu 4.0.3 
>>for Windows :
>>time kdu_compress.exe -i RGB.bmp -o RGB_kakadu_compress.jp2 -rate 
>>2.85,2.85,2.85
>>=> 36 seconds
>
>Julien,
>
>I am a bit vague on some of the kdu_compress options, but my understanding
>is that -rate 2.85 means produce 2.85 bits per pixel in the compressed file
>which would be equivelent to a quality of roughly 35.  Are you sure the
>comparison is equivelent?

Now I have read the kdu_compress help and I understand better the different 
options :

the next 2 commands lines I think are the most equivalent as I can (with 
the actual GDAL KAKADU options) and give me the same compressed size :

gdal_translate.exe -of JP2KAK -co QUALITY=12 -co LAYERS=1 -co Corder=LRCP 
RGB.bmp RGB_kakadu_gdal.jp2
kdu_compress.exe -i win32_executables/RGB.bmp -o RGB_kdu_compress.jp2 -rate 
2.8834698

The results in term of performances and quality as the same : GDAL is 
slower and the JP2 produced by kdu_compress seems visually better...

The only parameters difference I can see is the Cprecincts option which 
isn't used with kdu_compress default options but I can't pass the 
Cuse_precincts=no and don't pass the Cprecincts options to GDAL ... (if I 
have more time I'll recompile GDAL with a hacked code to test this...).


>    Could I get the .jp2 files produced with
>kdu_compress and gdal_translate?

yes :
ftp.fr-acri.com
user : openev
pass : venepo
filenames : RGB_kakadu_gdal.jp2 and RGB_kdu_compress.jp2
size for each : 8 Mo

I'm uploading the 2 files now ; they'll be accessible in 30 minutes I hope.

>Another aspect is that kakadu *may* be converting to YCbCr color space
>which preserves values better than RGB which is the form GDAL will save
>data as.

Is it this option ?

  Cycc[:<T>]={<yes/no>}
        RGB to Luminance-Chrominance conversion?
            [Default is to convert 3 component images]

so for my test this option should be activated by kdu_compress

>>Maybe this virtual tiling is the reason ?
>>(I don't know how kdu_compress write the data...)
>
>This is a read-side thing, and shouldn't have any effect.

oops you're right virtual tiling only affect read... sorry

>   Of course,
>there are a huge number of options which can come into play for JPEG2000
>compression, and some of the GDAL ones are no doubt different than the
>kdu_compress defaults.

Yes I understand.
I'm not a JP2 expert but I see only that for my example the kdu_compress 
defaults seem work (very) better... (but maybe also kdu_compress provide 
some optimizations which aren't provided by the Kakadu library ?)

The parameters differences I can see are :
Clayers : kdu : 1    GDAL : 12
Cprecincts : kdu : no   GDAL : yes : 
{512,512},{256,512},{128,512},{64,512},{32,512},{16,512},{8,512},{4,512},{2,512}
Corder : kdu : LRCP   GDAL : PRCL

I think I can obtain same results with GDAL with some efforts ; maybe I'll 
work on this if I have more time.

All the best,

Julien


From neteler at itc.it  Tue Sep  9 18:30:52 2003
From: neteler at itc.it (Markus Neteler)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] make install problem
In-Reply-To: <20030707230324.A11102@itc.it>; from neteler@itc.it on Mon, Jul 07, 2003 at 11:03:24PM +0200
References: <20030707135249.T4388@itc.it> <20030707230324.A11102@itc.it>
Message-ID: <20030910003052.A22755@itc.it>

Hi,

maybe a known problem, related to current CVS version:

 make install
does not copy any more
 libgdal.1.1.so
to the target directory (although it appears in the install ... command).

 libgdal.a 
*is* copied.

I have tested under Mandrake 9.1 and Redhat 7.3, the machines
are unchanged. Some days/weeks ago it was working well.

Best regards

 Markus

From dron at ak4719.spb.edu  Wed Sep 10 02:17:32 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] make install problem
In-Reply-To: <20030910003052.A22755@itc.it>
References: <20030707135249.T4388@itc.it> <20030707230324.A11102@itc.it> <20030910003052.A22755@itc.it>
Message-ID: <20030910061732.GA11403@ak4719.spb.edu>

On Wed, Sep 10, 2003 at 12:30:52AM +0200, Markus Neteler wrote:
> maybe a known problem, related to current CVS version:
> 
>  make install
> does not copy any more
>  libgdal.1.1.so
> to the target directory (although it appears in the install ... command).
> 
>  libgdal.a 
> *is* copied.
> 
> I have tested under Mandrake 9.1 and Redhat 7.3, the machines
> are unchanged. Some days/weeks ago it was working well.

Alessandro is playing around GDAL build infrastructure. I'm recommend
test his recent libtool additions (./configure --with-libtool). But you
will need to relink all other dependent software with -lgdal instead
of -lgdal1.1.

Old libgdal.1.1.so may be safely removed from system directory after
switching to new mechanism.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From alessandro_amici at telespazio.it  Wed Sep 10 03:55:09 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:55 2007
Subject: R: [Gdal-dev] make install problem
Message-ID: <A183DF60AC72D5119B990002A5749CB304C9A531@ROMADG-MAIL01>

Markus,

> > maybe a known problem, related to current CVS version:
> > 
> >  make install
> > does not copy any more
> >  libgdal.1.1.so

ouch! my mistake.
i thought install-sh would behave like the standard linux install,
which is not true in the case of multiple source files.
i will fix it ASAP.

Andrey,

> Alessandro is playing around GDAL build infrastructure. I'm recommend
> test his recent libtool additions (./configure --with-libtool). But you
> will need to relink all other dependent software with -lgdal instead
> of -lgdal1.1.

the very best way to link against gdal is probably somthing like:

LIBS	:= $(shell gdal-config --libs)

which works with both native and libtool builds and with older gdal versions
as well (hopefully back to may 2000 when gdal-config was first introduced)

cheers,
alessandro

From alexamici at tiscali.it  Tue Sep  9 03:25:36 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309060028.53052.alexamici@tiscali.it>
References: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01> <200309032101.17001.alexamici@tiscali.it> <200309060028.53052.alexamici@tiscali.it>
Message-ID: <200309090925.36299.alexamici@tiscali.it>

uff!

> i could try libtool support on a couple more targets:
> cygwin -> only the static library are produced by libtool and i get a
> strange warning about possibly unresolved symbols (?)
> mingw -> same as cygwin
> cross-compile for mingw from linux -> apparently same as mingw
>
> any win32 guru can help me on those?

after having spent a fair bit of time on the binutils man pages and having 
tried various combinations of tricks, i found out that the following rule 
builds static _and_ shared libraies on my mingw cross-compile environment:

$(LIBGDAL):	$(GDAL_OBJ:.o=.lo)
	$(LD) -o $@ $^ \
	    -rpath $(INST_LIB) \
	    -no-undefined \
	    -version-info $(LIBGDAL_CURRENT):$(LIBGDAL_REVISION):$(LIBGDAL_AGE)

we need the -no-undefined option _and_ to remove $(LIBS).
i need a bit more time in order to check for the correct way to implement the 
configure changes, thou.

unfortunately, however, this is not the end of the story :(.
trying that on a live mingw environment the build exploded on an unexpected 
'ld -r' with the same problem we had a few weeks ago.

after some more digging into the configure scripts this second problem appears 
to be related to the 8k limit on the command size lenght on windows! our 
command line is about 11k in size (!) and libtool trys to build the shareded 
library picewise with the help of a few 'ld -r' before the big 'g++ -shared'.

umpf!

i didn't find a sane workaround for this up to now.

cheers,
alessandro


From warmerdam at pobox.com  Wed Sep 10 15:04:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
Message-ID: <3F5F75A3.8070006@pobox.com>

GDAL Users,

I have been contacted by Maptech and I have been requested to remove the
web page where I talk about the BSB file format, and provide source code for
reading it.

   http://gdal.velocet.ca/projects/bsb/

They seem to be claiming that the BSB file format is copyrighted by them,
though it wasn't my understanding that a file format could be copyrighted.
I am not prepared to comply with their request until they can provide some
sort of supporting information indicating they truely have "ownership" of
the file format and that it is illegal for applications to support reading
that file format for the purposes of interoperability.

Maptech has not requested that anyone stop using the code I distribute;
however, any firms interested in minimizing any possible downstream legal
concerns may want to proactively drop use of the BSB driver from their
GDAL builds.

To that end, I have added a "--without-bsb" configure option on Unix.  Just
add this option when configuring GDAL and no BSB related code will be
included in your builds.  On Windows I added a line to the nmake.opt
file related to BSB support.  If the nmake.opt file does not declare
the BSB_SUPPORTED macro then BSB support and source code will be omitted
from the build.  The changes went in this afternoon and should appear
in tonights nightly snapshot.

For those who are not aware, the BSB format is a compressed raster format
used for distributing government nautical charts from a number of countries
including Canada and the USA.

While for me the BSB format is if no great importance, it is important to
me to be able to write my own code to read file formats.  For that reason
I don't want to immediately cave in till I get some more information on
whether their claims have any validity.

I am interested in any pointers folks can provide on precidents related
to copyrighting file formats, or suggestions of an inexpensive
intellectual property attorney.   Even a student lawyer would help!  I
don't want to break the law, but I don't want to be give up if I am not.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From s.perkins at lanl.gov  Wed Sep 10 15:45:52 2003
From: s.perkins at lanl.gov (Simon Perkins)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <3F5F75A3.8070006@pobox.com>
References: <3F5F75A3.8070006@pobox.com>
Message-ID: <1063223152.1796.23.camel@afreet.lanl.gov>

On Wed, 2003-09-10 at 13:04, Frank Warmerdam wrote:
> They seem to be claiming that the BSB file format is copyrighted by them,
> though it wasn't my understanding that a file format could be copyrighted.
> I am not prepared to comply with their request until they can provide some
> sort of supporting information indicating they truely have "ownership" of
> the file format and that it is illegal for applications to support reading
> that file format for the purposes of interoperability.

Good for you! Lawyers are always trying to stretch the scope of laws to
cover things that they were never intended to cover (or things that
weren't even conceived when the laws were written) and it's important to
stand up to them!

I'm not an expert, but my understanding is along the lines you suggest:
a specific program to read a file format can be copyrighted, as can a
document outlining the specification of that format, but the actual
format surely can't be copyrighted.

See, for example this docurment produced by the US copyright office:

http://lcweb.loc.gov/copyright/circs/circ1.html

In the section on "What is Not Protected by Copyright", it says:

"Ideas, procedures, methods, systems, processes, concepts, principles,
discoveries, or devices, as distinguished from a description,
explanation, or illustration."

A format would come under this category I would think.

It might be possible to patent a format and prevent other people using
it, but there's no suggestion that MapTech has done this is there?

Even if they did, I'm not sure they can stop you writing software that
allows a user to read a file that they have obtained legally, no matter
what the DMCA says. There was a recent case (unfortunately I forget the
details) where a US court ruled that it was not illegal to obtain third
party software that allowed people to read proprietary encrypted media
files that they had obtained legally, i.e. if you had obtained the data
legally, you were not obliged to buy a particular manufacturer's
software in order to read it (anyone remember more details?). Of course
it's a big fuzzy area - just ask the deCSS people...

Good luck!

Sy



From Rich at GreenwoodMap.com  Wed Sep 10 16:09:16 2003
From: Rich at GreenwoodMap.com (Richard Greenwood)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <3F5F75A3.8070006@pobox.com>
Message-ID: <5.2.0.9.0.20030910140730.02519d18@mail.GreenwoodMap.com>

The opendwg.org people might have some relevant experience with this sort 
of issue.

Rich

At 03:04 PM 9/10/2003 -0400, Frank Warmerdam wrote:
>GDAL Users,
>
>I have been contacted by Maptech and I have been requested to remove the
>web page where I talk about the BSB file format, and provide source code for
>reading it.
>
>   http://gdal.velocet.ca/projects/bsb/
>
>They seem to be claiming that the BSB file format is copyrighted by them,
>though it wasn't my understanding that a file format could be copyrighted.
>I am not prepared to comply with their request until they can provide some
>sort of supporting information indicating they truely have "ownership" of
>the file format and that it is illegal for applications to support reading
>that file format for the purposes of interoperability.
>
>Maptech has not requested that anyone stop using the code I distribute;
>however, any firms interested in minimizing any possible downstream legal
>concerns may want to proactively drop use of the BSB driver from their
>GDAL builds.
>
>To that end, I have added a "--without-bsb" configure option on Unix.  Just
>add this option when configuring GDAL and no BSB related code will be
>included in your builds.  On Windows I added a line to the nmake.opt
>file related to BSB support.  If the nmake.opt file does not declare
>the BSB_SUPPORTED macro then BSB support and source code will be omitted
>from the build.  The changes went in this afternoon and should appear
>in tonights nightly snapshot.
>
>For those who are not aware, the BSB format is a compressed raster format
>used for distributing government nautical charts from a number of countries
>including Canada and the USA.
>
>While for me the BSB format is if no great importance, it is important to
>me to be able to write my own code to read file formats.  For that reason
>I don't want to immediately cave in till I get some more information on
>whether their claims have any validity.
>
>I am interested in any pointers folks can provide on precidents related
>to copyrighting file formats, or suggestions of an inexpensive
>intellectual property attorney.   Even a student lawyer would help!  I
>don't want to break the law, but I don't want to be give up if I am not.
>
>Best regards,
>
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev


Richard W. Greenwood, PLS
Greenwood Mapping, Inc.
Rich <at> GreenwoodMap <dot> com
(307) 733-0203
http://www.GreenwoodMap.com 


From alexamici at tiscali.it  Wed Sep 10 18:03:05 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309090925.36299.alexamici@tiscali.it>
References: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01> <200309060028.53052.alexamici@tiscali.it> <200309090925.36299.alexamici@tiscali.it>
Message-ID: <200309110003.06006.alexamici@tiscali.it>


Frank,

> after having spent a fair bit of time on the binutils man pages and having
> tried various combinations of tricks, i found out that the following rule
> builds static _and_ shared libraies on my mingw cross-compile environment:
>
> $(LIBGDAL):	$(GDAL_OBJ:.o=.lo)
> 	$(LD) -o $@ $^ \
> 	    -rpath $(INST_LIB) \
> 	    -no-undefined \
> 	    -version-info $(LIBGDAL_CURRENT):$(LIBGDAL_REVISION):$(LIBGDAL_AGE)
>
> we need the -no-undefined option _and_ to remove $(LIBS).
> i need a bit more time in order to check for the correct way to implement
> the configure changes, thou.
>
> unfortunately, however, this is not the end of the story :(.
> trying that on a live mingw environment the build exploded on an unexpected
> 'ld -r' with the same problem we had a few weeks ago.
>
> after some more digging into the configure scripts this second problem
> appears to be related to the 8k limit on the command size lenght on
> windows! our command line is about 11k in size (!) and libtool trys to
> build the shareded library picewise with the help of a few 'ld -r' before
> the big 'g++ -shared'.

i have no idea if the attached patch has any meaning at all from the point of 
view of the behaviour of the vrt class hierarchy, but... it fix part of the 
'ld -r' build failure on my mingw cross compile!

the problem with partial linking (on win32) appears to be related to the 
missing definition and maybe prototypes of class constructors and 
destructors.
with the attached patch i can partial-link successfully most of the gdal 
objects together:
	$ i586-mingw32msvc-ld -r port/*.o alg/*.o gcore/*.o frmts/o/*.o -o foo.o
	$

Frank, could you please verify whether you need to define (meaningfull!) 
constructors and destructors for the two classes that appear in the patch?

note that fixing the ogr directory will be significantly harder, thou.
	$ i586-mingw32msvc-ld -r ogr/*.o ogr/ogrsf_frmts/o/*.o -o foo.o 2>&1 | wc
	     38     418    5632
that is 19 classes with missing construtor/destructor.

i'm no c++ expert so i can hardly help more that that :(, however if this is 
really the way to solve the wierd 'ld -r' problems the libtool build will 
soon became much more attractive :).

cheers,
alessandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ld-r_fix.diff
Type: text/x-diff
Size: 1893 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030911/0a459c82/ld-r_fix.bin
From alexamici at tiscali.it  Wed Sep 10 18:32:57 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <3F5F75A3.8070006@pobox.com>
References: <3F5F75A3.8070006@pobox.com>
Message-ID: <200309110032.57838.alexamici@tiscali.it>

Frank,

On Wednesday 10 September 2003 21:04, Frank Warmerdam wrote:
> GDAL Users,
>
> I have been contacted by Maptech and I have been requested to remove the
> web page where I talk about the BSB file format, and provide source code
> for reading it.
>
>    http://gdal.velocet.ca/projects/bsb/
>
> They seem to be claiming that the BSB file format is copyrighted by them,

my understatning (mainy as a dayly slashdot reader, so don't get it as the 
golden truth ;) is that reverse engeneering a format or a protocol cannot be 
legally stopped by a company unless it has a patent for the algorithms you 
use in the code.

poor man proofs:
- samba Reverse Engeneered the smb protocol (evil company is microsoft)
- openoffice.org REed the doc format (see above)
both ptojects are still operating and no major problem is on the horizon.

> I am interested in any pointers folks can provide on precidents related
> to copyrighting file formats, or suggestions of an inexpensive
> intellectual property attorney.   Even a student lawyer would help!  I
> don't want to break the law, but I don't want to be give up if I am not.

the one i heard the most is:
http://www.eff.org/

i don't much care for the format either, but it is very depressing anyhow.
alessandro


From warmerdam at pobox.com  Wed Sep 10 18:37:17 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <200309110003.06006.alexamici@tiscali.it>
References: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01> <200309060028.53052.alexamici@tiscali.it> <200309090925.36299.alexamici@tiscali.it> <200309110003.06006.alexamici@tiscali.it>
Message-ID: <3F5FA79D.8020905@pobox.com>

Alessandro Amici wrote:
  > Frank, could you please verify whether you need to define (meaningfull!)
> constructors and destructors for the two classes that appear in the patch?

Alessandro,

The patch looks harmless enough, please feel free to apply it.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From alexamici at tiscali.it  Wed Sep 10 18:38:09 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <200309110032.57838.alexamici@tiscali.it>
References: <3F5F75A3.8070006@pobox.com> <200309110032.57838.alexamici@tiscali.it>
Message-ID: <200309110038.09350.alexamici@tiscali.it>

> poor man proofs:
> - samba Reverse Engeneered the smb protocol (evil company is microsoft)
> - openoffice.org REed the doc format (see above)
> both ptojects are still operating and no major problem is on the horizon.

- gnumeric REed the xls format (MS again)

c'mon if billg hasn't managed to stop the reverse engeneering of their own 
binary formats how can maptech succeed!


From jvarga at boulder.net  Wed Sep 10 19:37:41 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <3F5F75A3.8070006@pobox.com>
References: <3F5F75A3.8070006@pobox.com>
Message-ID: <3F5FB5C5.4040602@boulder.net>

EFF is the place to pose this excellent question.  My belief is their 
request is without merit.  A friend and 3rd year law student 
specializing in IP concurs but is digging further.  Curious though, was 
it truly a "request" or an order for cease and desist?  If it was the 
former, chances are their attorney's have already told them to ask 
nicely as there was not much recourse otherwise. 

I would simply take your original mail (include a reference to 
http://www.maptech.com) and forward to one of the following...

Fred von Lohmann, EFF Senior Intellectual Property Attorney
fred@eff.org <mailto:fred@eff.org?SUBJECT=>

Wendy Seltzer, EFF  Staff Attorney (Fair Use & Intellectual Property)
wendy@eff.org <mailto:wendy@eff.org>

Jason M. Schultz, EFF Staff Attorney (Intellectual Property / reverse 
engineering)
jason@eff.org <mailto:jason@eff.org>

...or...

ask@eff.org

...to let them decide who to forward it to.

The entire staff's bio's are at http://www.eff.org/contact/staff_bios.php

Relatedly, one of the counties here sells certain data (parcels and 
address enhanced street center lines) for $.50 (US) per arc, exported to 
shapefile.  They say that purchasers are constrained legally to "not" 
make the data available to other parties, including web applications.  
However, the information contained within those shapefiles (i.e., 
coordinate info) is essentially public domain. You can't copyright 
coordinate info, so how do the likes of GDT, NavTech, etc., keep their 
data proprietary and protected, yet useful? 

Has anyone run across similar scenarios?

-jv

Frank Warmerdam wrote:

> GDAL Users,
>
> I have been contacted by Maptech and I have been requested to remove the
> web page where I talk about the BSB file format, and provide source 
> code for
> reading it.
>
>   http://gdal.velocet.ca/projects/bsb/
>
> They seem to be claiming that the BSB file format is copyrighted by them,
> though it wasn't my understanding that a file format could be 
> copyrighted.
> I am not prepared to comply with their request until they can provide 
> some
> sort of supporting information indicating they truely have "ownership" of
> the file format and that it is illegal for applications to support 
> reading
> that file format for the purposes of interoperability.
>
> Maptech has not requested that anyone stop using the code I distribute;
> however, any firms interested in minimizing any possible downstream legal
> concerns may want to proactively drop use of the BSB driver from their
> GDAL builds.
>
> To that end, I have added a "--without-bsb" configure option on Unix.  
> Just
> add this option when configuring GDAL and no BSB related code will be
> included in your builds.  On Windows I added a line to the nmake.opt
> file related to BSB support.  If the nmake.opt file does not declare
> the BSB_SUPPORTED macro then BSB support and source code will be omitted
> from the build.  The changes went in this afternoon and should appear
> in tonights nightly snapshot.
>
> For those who are not aware, the BSB format is a compressed raster format
> used for distributing government nautical charts from a number of 
> countries
> including Canada and the USA.
>
> While for me the BSB format is if no great importance, it is important to
> me to be able to write my own code to read file formats.  For that reason
> I don't want to immediately cave in till I get some more information on
> whether their claims have any validity.
>
> I am interested in any pointers folks can provide on precidents related
> to copyrighting file formats, or suggestions of an inexpensive
> intellectual property attorney.   Even a student lawyer would help!  I
> don't want to break the law, but I don't want to be give up if I am not.
>
> Best regards,
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030910/d8dfef8d/attachment.html
From ed at topozone.com  Wed Sep 10 20:17:05 2003
From: ed at topozone.com (Ed McNierney)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
Message-ID: <13858AA1A74F30419F319ACB66A9D1222C01C2@mercator.topozone.com>

Frank et al. -

 

It is dangerous to speculate without good legal advice and specific
precedents.  Having been a CTO for several companies and involved in
several IP issues (as a techie, not a lawyer), I will say that outside
of patent protection the way most companies protect their intellectual
property is through copyright and trade secrets.  If the secret is
disclosed, SOMEONE made a boo-boo.

 

I've never bothered with the format, but your BSB page describes a
patented algorithm that has been "reverse engineered".  It's usually not
necessary to reverse-engineer a patented process, because the patent
itself explains it.  But if it's patented, you can't use it without a
license from the patent holder - as in the Unisys LZW patent, for
example.  Everyone knows how to implement it, but you need a license to
do so legally.

 

EFF might be a good start, but a good legal opinion from someone is
needed here.  Applying "similar" cases is often very unhelpful and
misleading - the EXACT nature of the copyrighted materials, the specific
claims (all of them) in the patent, etc. are all relevant to whether
MapTech's claim has merit.  That's very hard for a non-professional to
determine, although it's VERY easy for a non-professional to engage in
exuberant speculation <g>.

 

-          Ed

 

Ed McNierney

President and Chief Mapmaker

TopoZone.com / Maps a la carte, Inc.

73 Princeton Street, Suite 305

North Chelmsford, MA  01863

Phone: (978) 251-4242  Fax: (978) 251-1396

ed@topozone.com

 

-----Original Message-----
From: Jack Varga [mailto:jvarga@boulder.net] 
Sent: Wednesday, September 10, 2003 7:38 PM
To: gdal-dev@remotesensing.org
Subject: Re: [Gdal-dev] MapTech / BSB Legal Issues

 

EFF is the place to pose this excellent question.  My belief is their
request is without merit.  A friend and 3rd year law student
specializing in IP concurs but is digging further.  Curious though, was
it truly a "request" or an order for cease and desist?  If it was the
former, chances are their attorney's have already told them to ask
nicely as there was not much recourse otherwise.  

I would simply take your original mail (include a reference to
http://www.maptech.com) and forward to one of the following...

Fred von Lohmann, EFF Senior Intellectual Property Attorney
fred@eff.org <mailto:fred@eff.org?SUBJECT=> 

Wendy Seltzer, EFF  Staff Attorney (Fair Use & Intellectual Property)
wendy@eff.org

Jason M. Schultz, EFF Staff Attorney (Intellectual Property / reverse
engineering)
jason@eff.org

...or...

ask@eff.org

...to let them decide who to forward it to.

The entire staff's bio's are at
http://www.eff.org/contact/staff_bios.php

Relatedly, one of the counties here sells certain data (parcels and
address enhanced street center lines) for $.50 (US) per arc, exported to
shapefile.  They say that purchasers are constrained legally to "not"
make the data available to other parties, including web applications.
However, the information contained within those shapefiles (i.e.,
coordinate info) is essentially public domain. You can't copyright
coordinate info, so how do the likes of GDT, NavTech, etc., keep their
data proprietary and protected, yet useful?  

Has anyone run across similar scenarios?

-jv

Frank Warmerdam wrote:



GDAL Users, 

I have been contacted by Maptech and I have been requested to remove the

web page where I talk about the BSB file format, and provide source code
for 
reading it. 

  http://gdal.velocet.ca/projects/bsb/ 

They seem to be claiming that the BSB file format is copyrighted by
them, 
though it wasn't my understanding that a file format could be
copyrighted. 
I am not prepared to comply with their request until they can provide
some 
sort of supporting information indicating they truely have "ownership"
of 
the file format and that it is illegal for applications to support
reading 
that file format for the purposes of interoperability. 

Maptech has not requested that anyone stop using the code I distribute; 
however, any firms interested in minimizing any possible downstream
legal 
concerns may want to proactively drop use of the BSB driver from their 
GDAL builds. 

To that end, I have added a "--without-bsb" configure option on Unix.
Just 
add this option when configuring GDAL and no BSB related code will be 
included in your builds.  On Windows I added a line to the nmake.opt 
file related to BSB support.  If the nmake.opt file does not declare 
the BSB_SUPPORTED macro then BSB support and source code will be omitted

from the build.  The changes went in this afternoon and should appear 
in tonights nightly snapshot. 

For those who are not aware, the BSB format is a compressed raster
format 
used for distributing government nautical charts from a number of
countries 
including Canada and the USA. 

While for me the BSB format is if no great importance, it is important
to 
me to be able to write my own code to read file formats.  For that
reason 
I don't want to immediately cave in till I get some more information on 
whether their claims have any validity. 

I am interested in any pointers folks can provide on precidents related 
to copyrighting file formats, or suggestions of an inexpensive 
intellectual property attorney.   Even a student lawyer would help!  I 
don't want to break the law, but I don't want to be give up if I am not.


Best regards, 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030910/08a7a852/attachment.html
From simon at petrosys.com.au  Wed Sep 10 20:28:09 2003
From: simon at petrosys.com.au (Simon Ronald)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Legal Issues
In-Reply-To: <13858AA1A74F30419F319ACB66A9D1222C01C2@mercator.topozone.c
 om>
Message-ID: <5.1.0.14.0.20030911095606.01623e88@psadl7>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030911/e34ba83b/attachment.html
From warmerdam at pobox.com  Wed Sep 10 21:49:40 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <3F5FB5C5.4040602@boulder.net>
References: <3F5F75A3.8070006@pobox.com> <3F5FB5C5.4040602@boulder.net>
Message-ID: <3F5FD4B4.907@pobox.com>

Folks,

I don't really intend this list (gdal-dev) to become an open forum for
discussing "intellectual property" issues.  I would encourage anyone
with helpful information to send it directly to me.

I would add that:
  o Maptech has not raised the patent issue.  At this time their only
    apparent concern is "copyright" of the cartography and format.  I will
    stick to addressing the specific issues they raise rather than
    broadening the discussion.
  o I am not disputing Maptech's right to license their data, and protect
    it's distribution in any way they are entitled to.
  o I will remove the information they have requested if they can provide
    any reasonably convincing information that I am doing something wrong
    under US or Canadian law.  For now I am just seeking clarification on their
    justification.
  o I will attempt to keep status information available at the link:
    http://gdal.velocet.ca/projects/bsb/ipi.html even if I have to remove
    the source or other information related to the format.

I appreciate all the support and useful information I have received.  Now
lets return to our regular techical tasks. :-)

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From schermer at msu.edu  Wed Sep 10 22:08:37 2003
From: schermer at msu.edu (Eric Schermer)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: BSB /MapTech /BS/Legal Issue
In-Reply-To: <20030910233801.21913.86017.Mailman@yoda.imagelinks.com>
References: <20030910233801.21913.86017.Mailman@yoda.imagelinks.com>
Message-ID: <a05210602bb857fd546a9@[204.39.212.188]>

Frank,

I'm no lawyer but my instinct tells me that Mr E. D. Markham 
President and CEO of MapTech made a huge blunder in threatening you 
before consulting with his lawyers.  If he had any grounds to stand 
on at all it seems to me you would have got a cease and desist order 
from his lawyers and you never would have heard from him directly. I 
can't believe Microsoft, AutoCad and ESRI would allow their 
competitors products to import their formats if MapTech really had a 
legal right to try this.  I think Mr Markham is bluffing.  He 
probably consulted with his lawyers first, was told there is nothing 
they can do, so he's just trying to scare you-stupid on his part.  I 
would talk to a lawyer to see if you can sue for harassment.

The only thing I worry about with this and the SCO v. Linux case, is 
that some company might in the future try to steal open-source code, 
and copyright it.  I don't know that SCO or MapTech did that and I'm 
no Linux fan anyway, but it just seems inevitable that someone will 
try that someday.  Hopefully you all keep a good and complete archive 
of all the work, cvs snapshops, gdal-dev digests, or whatever, so 
that if this does happen in the future, then you have proof of who 
really developed the code first.

I'm so angry at this, I visited maptech.com and saw a waving American 
Flag (animated gif) at the top of their page.  It just sickens me and 
I feel less and less proud to be American after seeing this.

Take care,

Eric



From jvarga at boulder.net  Wed Sep 10 22:40:29 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] MapTech / BSB Legal Issues
In-Reply-To: <3F5FD4B4.907@pobox.com>
References: <3F5F75A3.8070006@pobox.com> <3F5FB5C5.4040602@boulder.net> <3F5FD4B4.907@pobox.com>
Message-ID: <3F5FE09D.7090601@boulder.net>

Ed is right, no point speculating.  Send your post to EFF and keep us 
informed...

> I appreciate all the support and useful information I have received.  Now
> lets return to our regular techical tasks. :-) 


Now, back to this Xerces problem. 


From hamish_nospam at yahoo.com  Thu Sep 11 06:26:54 2003
From: hamish_nospam at yahoo.com (Hamish)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: [GRASSLIST:1184] Re: creating a desktop GIS application using GRASS
In-Reply-To: <3F601375.8040806@d-konstruktors.org>
References: <20030825060312.68531.qmail@web41204.mail.yahoo.com>
	<200308260919.h7Q9JDR18798@janacek.itc.it.>
	<20030826101559.GC4139@intevation.de>
	<200309100931.h8A9Vu009878@janacek.itc.it.>
	<20030910110954.GB21815@intevation.de>
	<3F601375.8040806@d-konstruktors.org>
Message-ID: <20030911222654.4924e16c.hamish_nospam@yahoo.com>

(sort of wide ranging, so cross-posted everywhere. pls cc me as I don't
read all these lists)

> Suggestion: link GRASS to FlightGear.  Use GRASS to create and analyse
> geographic data, then get FlightGear and *FLY* over your info.
> When I told this to some people who work in biogeography, that I
> wanted to fly over my fish distribution data, they went crazy, they
> want that. They want to have the ecosystems mapped in 3d and move fly
> around them. I tried (some on the list may remember) but was too
> difficult, and I have more pressing matters.  But I still want to do
> that.


Has anyone out there actually managed to get this to work?


http://www.terragear.org
  Automated Tools for 3D World Modeling and Mapping

http://www.terragear.org/docs/scenery-tutorial/fg-scenery-tutorial.html
  FlightGear Scenery Tutorial

It seems a bit clunky & daunting; GRASS (maybe d.m or d.dm) would make a
great front end for putting the scenery together. I don't see why most
of the TerraGear stuff couldn't be scripted given GRASS inputs.

First step is to get a GRASS raster into something TerraGear's
"raw2ascii" can read.

Can grass export to US 3arcsec DEMs ASCII format already?
  - is that SDTS tiled binary/ascii ?? sorry I'm a bit confused.

http://www.ngdc.noaa.gov/seg/tools/sdts/grass.shtml
 (nice page to look at in the context of the original thread, BTW.
  sadly most of the links are dead, but we have v.out.sdts already)
  This isn't DEM support though, it's "Topological Vector Profile".


In GRASS we can read in GTOPO30 DEM data with r.in.bin, but not write
with r.out.bin.

FGDC Raster Profile standard:
 http://mcmcweb.er.usgs.gov/sdts/vendor.html
 http://www.fgdc.gov/standards/documents/standards/sdts_pt5/srpe0299.pdf


GDAL supports reading "USGS SDTS DEM (*CATD.DDF)" and "USGS ASCII
DEM (.dem)", but not creation.

Is it better to put the write support into GDAL and not GRASS?

Does that lock us into the x,y resolution of the USGS DEMS?

Maybe GMT grid format would be a good common ground for TerraGear?


A better solution would to be a module which creates flight gear
scenery files directly from a list of rasters, vectors, and sites 
within GRASS, of course.

This could really help out both (all) projects.


If anyone has already done this, some quick instructions/hints please?


sorry, more questions than answers,
Hamish


ps - this is all (theoretically:) possible because of free software.

From ben at vterrain.org  Thu Sep 11 13:08:17 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: [GRASSLIST:1184] Re: creating a desktop GIS application using GRASS
In-Reply-To: <20030911222654.4924e16c.hamish_nospam@yahoo.com>
Message-ID: <00b501c37887$4c6dacc0$f400fe0a@TOPP2>

Hamish and Gustavo,

As an alternative to linking Grass with Flightgear, might i recommend
the VTP software.  It is also free and Free, can import any kind of
geospatial data, and has already been used to do realtime visualization
of biogeography.  It may still be slightly "clunky and daunting", but
less so because GRASS is not required.

-Ben
http://vterrain.org/

> -----Original Message-----
> From: Hamish
> 
> > Suggestion: link GRASS to FlightGear.  Use GRASS to create 
> > and analyse geographic data, then get FlightGear and *FLY*
> > over your info.  When I told this to some people who work in
> > biogeography, that I wanted to fly over my fish distribution
> > data, they went crazy, they want that. They want to have the
> > ecosystems mapped in 3d and move fly around them.

> Has anyone out there actually managed to get this to work?
> 
> It seems a bit clunky & daunting; GRASS (maybe d.m or d.dm) 
> would make a great front end for putting the scenery together.
> 
> First step is to get a GRASS raster into something TerraGear's
> "raw2ascii" can read.
> 
> [...]
> ps - this is all (theoretically:) possible because of free software.


From ben at vterrain.org  Thu Sep 11 13:14:00 2003
From: ben at vterrain.org (Ben Discoe)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] projections and netcdf
In-Reply-To: <Pine.GSO.4.05.10308271145240.22311-100000@galton.uchicago.edu>
Message-ID: <00b601c37888$183d45e0$f400fe0a@TOPP2>

Alexis,

The VTP software will read your netCDF data and reproject it, but we
don't yet support writing back to netCDF.  If you're interested in this
avenue, try the VTP software to confirm that it does read and reproject
your data satisfactorily, then let me know and we can expose support for
writing the format.

-Ben
http://vterrain.org/

> -----Original Message-----
> From: gdal-dev-admin@remotesensing.org 
> [mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Alexis Zubrow
> Sent: Wednesday, August 27, 2003 11:58 AM
> To: gdal-dev@remotesensing.org
> Subject: [Gdal-dev] projections and netcdf
> 
> Hi.
> 
> I am relatively new to gdal.  I have been using OGR to do 
> some coordinate conversions between various projections.
> It has been very useful.
> 
> I have a large dataset that is stored in netCDF format.  I
> want to reproject the data from one coordinate system to
> another.  But I want to maintain the data in netCDF format.
> I've looked through the documentation for OGR and gdal, but I
> haven't found much to help me.  [...]
> 
> Any suggestions would be much appreciated.
> 
> Thanks for your help,
> Alexis


From alexamici at tiscali.it  Thu Sep 11 18:48:43 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] GNU make build system update
In-Reply-To: <3F5FA79D.8020905@pobox.com>
References: <A183DF60AC72D5119B990002A5749CB304BDBEFA@ROMADG-MAIL01> <200309110003.06006.alexamici@tiscali.it> <3F5FA79D.8020905@pobox.com>
Message-ID: <200309120048.43187.alexamici@tiscali.it>


Frank,

On Thursday 11 September 2003 00:37, Frank Warmerdam wrote:
> Alessandro Amici wrote:
>   > Frank, could you please verify whether you need to define
>   > (meaningfull!)
> >
> > constructors and destructors for the two classes that appear in the
> > patch?
>
> The patch looks harmless enough, please feel free to apply it.

i applyed a sligthly larger patch that addresses all the mingw 'ld -r' errors 
that i know of.

apparently i just added few constructors and destructors that were reference 
somwhere in the object files, but were never defined explicitely.
HOWEVER, sometime i needed to add only the contructor, sometime i needed to 
add both and sometime i had to declare the destuctor virtual and some more 
time not... and i have no idea _why_ (i'm no c++ guru).

from my (poor) understanding of c++ class implementation on mingw/cygwin the 
general policy should be: always declare and define constructors and 
destructors.

cheers,
alessandro
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ld-r_fix.diff
Type: text/x-diff
Size: 7488 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030912/6912d1c8/ld-r_fix.bin
From jvarga at boulder.net  Thu Sep 11 20:46:58 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] [Fwd: Re: [GRASSLIST:1175] GDAL support for GML]
Message-ID: <3F611782.8060906@boulder.net>

Frank, et al;

I grabbed the latest (GDAL) source from CVS last night, as well as 
compiled and installed Xerces 1.6.0, (I was using the latest 2.3.0) and 
tried to build GDAL but still have the same problem.  I think I'm 
getting closer after modifying  
'--with-xerces-inc=/usr/local/xerces_2_3_0/include/xerces' as my error 
message different (I can finally find util/PlatformUtils.hpp), bu the 
linker is still choking on something.  I've included error message below.

I was getting ready to submit a bug report when I noticed one had 
already been created describing the exact same problem, although it 
appears I've gotten a bit further.

http://bugzilla.remotesensing.org/show_bug.cgi?id=340

I can add the legwork I've done to the bug report, but not sure how much 
that will help.  My problem is the exact same as the initial 
reporter's.  You made a comment that you've changed the code to work 
with Xerces 2.3.0, but you still needed to rework the configure logic, 
which is apparently where I'm having trouble also. 

One last thought, there have been a couple of mentions of Xerces' 
default location.  In fact if you compile Xerces from source there is 
not default location.  I've been manually relocating the build tree 
(which is the same as the source tree) to /usr/local/xerces-2_3_0 and 
/usr/local/xerces-1_6_0 respectively.  Unfortunately, Xerces is a nasty 
piece and there are many difference between the versions.  For example, 
1.6 has '$XERCESHOME/include' where as 2.3 has 
'$XERCESHOME/include/xercesc' which seems kinda redundant.

configure output...

./configure --with-xerces 
--with-xerces-inc=/usr/local/xerces-c-2_3_0/include/xercesc

<chop)
checking for Xerces C++... requested, but compile or link fails!

g++ -I/usr/local/xerces-c-2_3_0/include/xercesc -DHAVE_JASPER_UUID -o 
conftest conftest.cpp -lxerces-c1_6_0 -lpthread -ljasper -logdi31 -lgif 
-ljpeg -lpng -lcfitsio -lgrass5 -lz -lm -ldl

In file included from conftest.cpp:1:
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:65:41: 
xercesc/util/XMLException.hpp: No such file or directory
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:66:41: 
xercesc/util/PanicHandler.hpp: No such file or directory
In file included from conftest.cpp:1:
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:70: 
syntax error before `;' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:82: 
syntax error before `{' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:91: 
syntax error before `&' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:104: 
syntax error before `{' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:140: 
syntax error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:146: 
syntax error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:191: 
`XMLUni' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:191: 
parse error before `::' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:222: 
parse error before `::' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:242: 
`FileHandle' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:242: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:253: 
`FileHandle' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:253: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:265: 
`FileHandle' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:265: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:277: 
syntax error before `(' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:289: 
syntax error before `(' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:301: 
syntax error before `(' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:313: 
syntax error before `(' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:324: 
syntax error before `(' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:343: 
`FileHandle' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:343: 
parse error before `,' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:364: 
`FileHandle' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:364: 
parse error before `const'
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:377: 
`FileHandle' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:377: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:402: 
syntax error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:421: 
syntax error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:435: 
`XMLCh' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:435: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:446: 
`XMLCh' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:446: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:458: 
`XMLCh' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:458: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:473: 
parse error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:494: 
syntax error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:573: 
syntax error before `*' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:710: 
syntax error before `(' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:769: 
`XMLCh' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:769: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:785: 
parse error before `}' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:788: 
`XMLPlatformUtilsException' was not declared in this scope
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:788: 
parse error before `)' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:803: 
ISO C++ forbids declaration of `MakeXMLException' with no type
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:803: 
initializer list being treated as compound expression
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:803: 
syntax error before `inline'
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:817: 
parse error before `=' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:830: 
syntax error before `::' token
/usr/local/xerces-c-2_3_0/include/xercesc/util/PlatformUtils.hpp:837: 
syntax error before `::' token
conftest.cpp:2: syntax error before `int'

configure: error: Please correct Xerces options, or don't enable Xerces.


-------- Original Message --------
Subject: 	Re: [GRASSLIST:1175] GDAL support for GML
Date: 	Wed, 10 Sep 2003 13:31:07 -0600
From: 	Jack Varga <jvarga@boulder.net>
Organization: 	Frankie's Blue Room
To: 	Frank Warmerdam <warmerdam@pobox.com>
References: 	<3F5F53C1.5040109@boulder.net> <3F5F6A17.30603@pobox.com> 
<3F5F72FC.4040009@boulder.net> <3F5F74AD.7060905@pobox.com>



I suspect there is a problem with the more recent Xerces releases and 
gdal's references to it.  It is actually the simple conftest during 
config that fails.

I thought you might be using 1.6.0 as your example for compling 
includes a reference...

--with-xerces-lib=opts Xerces C++ link option(s)
                            ie. -L/usr/local/lib -lxerces-c1_6_0 -lpthread

...but I wasn't sure where to find reference to the necessary link options.

I'll grab the Xerces 1.6.0 source, retry, and post my results, but 1.6.0 
is five revisions old and several hundred fixes, additions, etc., behind. 

I will dig further and see if I can find out why???

-jv

Frank Warmerdam wrote:

> Jack Varga wrote:
>
>> Frank
>>
>> No worries and thanks.  I know you're a busy guy so I do what I can, 
>> but I suspected you might be the only person who could help.
>> Should I grab source from the tree then and retry?  When you say you 
>> installed Xerces to /usr/local does that mean /usr/local/Xercesc and 
>> everything Xerces (inludes, libs, binaries, etc.) under there?  Did 
>> you compile Xerces or grab the binaries?
>> I didn't spend a  lot of time digging on Xerces, but it seems light 
>> on documentation/detail...
>> Maybe a build direct from the source tree will solve my problem with 
>> HDF4 support as well if you saw my problem with that.
>> best regards,
>
>
> Jack,
>
> I don't honestly remember what I did.  I think there was some kind of 
> funny
> stuff about how xerces was built, but I just followed the guide info that
> came with it.  I would *imagine* there was some sort of default 
> install option
> that I used but I am not sure now.
>
> I see the Readme.html says:
>
>   http://xml.apache.org/xerces-c/build.html
>
>   Just remember, don't jump into the builds without reading the build 
> instructions
>   COMPLETELY.  It will save you lot of sleepless nights.
>
> Hmm, looking over my GDALmake.opt it looks like I am still linking 
> against
> Xerces 1.6.0 though I was using the 2.2.0 for a while.
>
> I guess my general advice is ... good luck muddling through!  It 
> shouldn't
> be rocket science, but I don't remember what I did.  That of course is 
> part
> of why I didn't answer before.
>
> For the source, just grab the last nightly snapshot if you don't want to
> fool with CVS.
>
> Best regards,
>

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030911/c173966a/attachment.html
From warmerdam at pobox.com  Fri Sep 12 16:57:54 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] CPLReadLine() / CPLFGets()
Message-ID: <3F623352.2070703@pobox.com>

Folks,

In late august the CPLFGets() function was implement, and CPLReadLine()
was modified to use it.  The intent, as I recall, was to compartmentalize
the the "newline detection" portion of CPLReadLine() and to add support
for \r newlines as occur sometimes (always?) in MacOS files.

However, the change required that CPLReadLine() only be used with files
opened in binary mode, because of the use of fseek() to restore the file
pointer back when only part of a line should be read.  Many pieces of
code using CPLReadLine() do *not* open their files in binary mode, and
were badly broken on windows (ie. MIF reader, TAB reader, S-57 support)

While we could try to identify all these places and switch to binary mode,
it seems this is a fragile solution and there would likely be future bugs
that only occur on Windows if that approach is taken.   So, instead I have
reviewed CPLFGets() and reimplemented it in a way that I believe is still
stable on files opened in text mode on windows.

I want everyeone to know that any windows GDAL builds since August 25th, 2003
will be badly broken for some things, and encourage folks to upgrade to the
nightly snapshot that comes out tomorrow.

Also, let me know if I have broken things in subtle ways I am not realizing.

Andrey ... could you verify that my new CPLFGets() actually works for the
problem you were trying to solve?  I constructed a pretty pathological
text files to test on and it seemed to work well but I am not sure I
understood your original intent.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From jvarga at boulder.net  Mon Sep 15 00:57:19 2003
From: jvarga at boulder.net (Jack Varga)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: RESOLVED: GDAL support for GML w/ Xerces 2.3.0
In-Reply-To: <3F611782.8060906@boulder.net>
References: <3F611782.8060906@boulder.net>
Message-ID: <3F6546AF.1090703@boulder.net>

 From Xerces C 2.3.0  doc/html/program-others.html#CPPNamespace...

Xerces-C++ 2.3.0 now supports C++ Namespace.

- users' applications must namespace qualified all the Xerces-C++ 
classes/data/variables with "xercesc::" or add the "using namespace 
xercesc" clause.

So I modified configure so it would pass conftest...

$ diff ../clean/configure ..modifiedl/configure
21076,21078c21076,21078
<     LIBS="-lxerces-c1_6_0 -lpthread $LIBS"
<     if test -f /usr/local/lib/libxerces-c1_6_0.so ; then
<       LIBS="-L/usr/local/lib $LIBS"
---
 >     LIBS="-lxerces-c -lpthread $LIBS"         # was  
LIBS="-lxerces-c1_6_0"
 >     if test -f /usr/local/xerces-c-2_3_0/lib/libxerces-c.so.23.0 ; then
 >       LIBS="-L/usr/local/xerces-c-2_3_0/lib $LIBS"
21084,21085c21084,21085
<     if test -d /usr/local/include/xercesc ; then
<       XERCES_INCLUDE="-I/usr/local/include/xercesc"
---
 >     if test -d /usr/local/xerces-c-2_3_0 ; then
 >       XERCES_INCLUDE="-I/usr/local/xerces-c-2_3_0/include"
21091c21091,21096
<   echo '#include <util/PlatformUtils.hpp>' > conftest.cpp
---
 >   # Xerces-C++ 2.3.0 now supports C++ Namespace.
 >   # From doc/html/program-others.html#CPPNamespace
 >   echo '#include <xercesc/util/PlatformUtils.hpp>' > conftest.cpp
 >   echo '#include <xercesc/sax/HandlerBase.hpp>' >> conftest.cpp
 >   echo '#define XERCES_HAS_CPP_NAMESPACE' >> conftest.cpp
 >   echo 'using namespace xercesc;' >> conftest.cpp

I also modified ogr/ogrsf_frmts/gml/gmlreaderp.h  (although not clear 
why this was necessary using namespaces)

diff ../clean/gdal/ogr/ogrsf_frmts/gml/gmlreaderp.h 
../modified/gdal/ogr/ogrsf_frmts/gml/gmlreaderp.h
64,68c64,68
< #include <util/PlatformUtils.hpp>
< #include <sax2/DefaultHandler.hpp>
< #include <sax2/ContentHandler.hpp>
< #include <sax2/SAX2XMLReader.hpp>
< #include <sax2/XMLReaderFactory.hpp>
---
 > #include <xercesc/util/PlatformUtils.hpp>
 > #include <xercesc/sax2/DefaultHandler.hpp>
 > #include <xercesc/sax2/ContentHandler.hpp>
 > #include <xercesc/sax2/SAX2XMLReader.hpp>
 > #include <xercesc/sax2/XMLReaderFactory.hpp>

Not sure all this was necessary, (I'm not a big C++ coder) but its what 
I needed to compile in support for Xerces 2.3.0 and GML and wanted some 
place to document my modifications in the chance it can help someone else...

-jv
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030914/dead3355/attachment.html
From dron at ak4719.spb.edu  Mon Sep 15 04:44:04 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] CPLReadLine() / CPLFGets()
In-Reply-To: <3F623352.2070703@pobox.com>
References: <3F623352.2070703@pobox.com>
Message-ID: <20030915084404.GA30468@ak4719.spb.edu>

On Fri, Sep 12, 2003 at 04:57:54PM -0400, Frank Warmerdam wrote:
> Andrey ... could you verify that my new CPLFGets() actually works for
> the problem you were trying to solve?  I constructed a pretty
> pathological text files to test on and it seemed to work well but I am
> not sure I understood your original intent.

Yes, it works for my samples.

I have finally resurrected my Windows box, so I'm hope there will not be
such problems in the future!

						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From perski at us.edu.pl  Mon Sep 15 12:31:16 2003
From: perski at us.edu.pl (Zbigniew Perski)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Two user's questions
Message-ID: <3F65E954.6060806@us.edu.pl>

Hi all,

I am quite new user of gdal. I am using it within OpenEV and grass but 
recently I have decided to build it fro  source.

During my work with gdal I found a strange think: in all distributions 
which I have tried (debian packages, OpenEV, source) I can not find 
gdaltindex!
What is happend with this tool which is described on the project's web page?


2-nd problem is related to using python modules. After instalation I should:

"In order to run GDAL after installing it is necessary for the shared 
library to be findable. This can often be accomplished by setting 
LD_LIBRARY_PATH to include /usr/local/lib."

I have tried to add a path in .bashrc but it is not working. Does 
anybody can tell me how to correctly do it in linux (debian) ?

Best regards

Zbigniew


From warmerdam at pobox.com  Mon Sep 15 16:59:31 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Two user's questions
In-Reply-To: <3F65E954.6060806@us.edu.pl>
References: <3F65E954.6060806@us.edu.pl>
Message-ID: <3F662833.8060503@pobox.com>

Zbigniew Perski wrote:
> Hi all,
> 
> I am quite new user of gdal. I am using it within OpenEV and grass but 
> recently I have decided to build it fro  source.
> 
> During my work with gdal I found a strange think: in all distributions 
> which I have tried (debian packages, OpenEV, source) I can not find 
> gdaltindex!
> What is happend with this tool which is described on the project's web 
> page?

Zbignew,

gdaltindex is (in my mind) an extra not needed by non-Mapserver users
of GDAL so I don't normally build and install it.  When you are building
yourself just cd into gdal/apps and type "make gdaltindex" to build it.

> 2-nd problem is related to using python modules. After instalation I 
> should:
> 
> "In order to run GDAL after installing it is necessary for the shared 
> library to be findable. This can often be accomplished by setting 
> LD_LIBRARY_PATH to include /usr/local/lib."
> 
> I have tried to add a path in .bashrc but it is not working. Does 
> anybody can tell me how to correctly do it in linux (debian) ?

Normally adding this to your .bashrc or .bash_profile should work.

export LD_LIBRARY_PATH=/usr/local/lib

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From geowiz at shaw.ca  Mon Sep 15 17:11:55 2003
From: geowiz at shaw.ca (Geographic Wizard)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Rotate an image
Message-ID: <00a401c37bcd$fe2c63e0$4bd39044@cs3700a>

Hello, all.

What would be the best way to rotate an image with GDAL / Warp?

Do GeoTransform[ 2 ] and GeoTransform[ 4 ] have any effect on RasterIO ? and are they related to rotation of an image?

Thanks,
Steve
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030915/c97a7b3c/attachment.html
From warmerdam at pobox.com  Mon Sep 15 17:22:08 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Rotate an image
In-Reply-To: <00a401c37bcd$fe2c63e0$4bd39044@cs3700a>
References: <00a401c37bcd$fe2c63e0$4bd39044@cs3700a>
Message-ID: <3F662D80.30001@pobox.com>

Geographic Wizard wrote:
> Hello, all.
>  
> What would be the best way to rotate an image with GDAL / Warp?
>  
> Do GeoTransform[ 2 ] and GeoTransform[ 4 ] have any effect on RasterIO ? 
> and are they related to rotation of an image?

Steve,

The geotransform[2] and [4] are honoured by the georeferencing based warper
so you could construct an input image with a world file with appropriate
rotational coefficients, and then use gdalwarp to "undo" the rotation.

The geotransform does *not* have any effect on raw rasterio calls.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From bmarchand at ara.com  Wed Sep 17 08:53:37 2003
From: bmarchand at ara.com (Brian Marchand)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: Sample data
Message-ID: <B3CB5AFD4126584AB4CF3DD45B267A53B7E606@thorin.sed.ara.com>

This is a great idea! Along these lines I'm really having a hard time
finding NITF examples. Does anyone have one (or more) they'd be willing
to share?

Brian


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, September 09, 2003 9:17 AM
To: gdal-dev
Cc: Martin Daly
Subject: [Gdal-dev] Re: Sample data

Martin Daly wrote:
> Frank,
> 
> I'd really, really, really (can you see how much?) like to see a GDAL
> sample data download area.  We spent ages searching for data - to test
> and demonstrate with - for some of the drivers.  We ended up with the
> attached list (apologies for disturbing your delicate Linux
> sensibilities by using DIR output instead of ls, but note the folders
> cunningly named using GDAL driver names), which is way short of the
> possible permutations.
> 
> Obviously there are sensitivity and privacy issues, but on the whole I
> would have thought that it would be possible to get something for most
> drivers.

Martin,

Rather that risk putting my OGC meeting beer supply at risk, I am forced
to comply.  I will start assembling public data samples on the GDAL ftp
site in directories named by driver.

   ftp://ftp.remotesensing.org/gdal/data

It will hopefully automatically get mirrored at:

   http://gdal.maptools.org/dl/data

Sample data of publically redistributable data samples of moderate size
are welcome from all sources.  Please drop them in the incoming
directory
at ftp.remotesensing.org and let me know by email.

I will work to populate it as I can.  You are certainly not the first
GDAL
user to request comprehensive test data.  Some are even paying
customers!

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Sep 17 10:55:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:55 2007
Subject: [Gdal-dev] Re: Sample data
In-Reply-To: <B3CB5AFD4126584AB4CF3DD45B267A53B7E606@thorin.sed.ara.com>
References: <B3CB5AFD4126584AB4CF3DD45B267A53B7E606@thorin.sed.ara.com>
Message-ID: <3F6875E6.1040709@pobox.com>

Brian Marchand wrote:
> This is a great idea! Along these lines I'm really having a hard time
> finding NITF examples. Does anyone have one (or more) they'd be willing
> to share?

Brian,

I have added an NITF tree on the gdal/data archive.  Most of the files are
the test datasets from the NITF web site, and some of those are not supported
by GDAL.

I also loaded an overview image, and a single tile from a CADRG dataset.  I
would load some other RPF products but I am not sure of the redistributability
of some of them so I am trying to be careful.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gerardo at cadcorp.com  Wed Sep 17 11:06:41 2003
From: gerardo at cadcorp.com (=?iso-8859-1?Q?Gerardo_Oca=F1a-Fuentes?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: Sample data
Message-ID: <37936EEC582B394A9E1AA951991A551601F68F@dev001_pdc.Dev.cadcorp.net>

Hi there,

You can find some samples at 

http://164.214.2.51/ntb/baseline/software/testfile/nitfv2.0/scen_2_0.html

But, I have sampled a few ones in the attached ZIP file.

Regards

Gerardo Ocana

-----Original Message-----
From: Brian Marchand [mailto:bmarchand@ara.com] 
Sent: 17 September 2003 13:54
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Re: Sample data


This is a great idea! Along these lines I'm really having a hard time
finding NITF examples. Does anyone have one (or more) they'd be willing
to share?

Brian


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com] 
Sent: Tuesday, September 09, 2003 9:17 AM
To: gdal-dev
Cc: Martin Daly
Subject: [Gdal-dev] Re: Sample data

Martin Daly wrote:
> Frank,
> 
> I'd really, really, really (can you see how much?) like to see a GDAL
> sample data download area.  We spent ages searching for data - to test
> and demonstrate with - for some of the drivers.  We ended up with the
> attached list (apologies for disturbing your delicate Linux
> sensibilities by using DIR output instead of ls, but note the folders
> cunningly named using GDAL driver names), which is way short of the
> possible permutations.
> 
> Obviously there are sensitivity and privacy issues, but on the whole I
> would have thought that it would be possible to get something for most
> drivers.

Martin,

Rather that risk putting my OGC meeting beer supply at risk, I am forced
to comply.  I will start assembling public data samples on the GDAL ftp
site in directories named by driver.

   ftp://ftp.remotesensing.org/gdal/data

It will hopefully automatically get mirrored at:

   http://gdal.maptools.org/dl/data

Sample data of publically redistributable data samples of moderate size
are welcome from all sources.  Please drop them in the incoming
directory
at ftp.remotesensing.org and let me know by email.

I will work to populate it as I can.  You are certainly not the first
GDAL
user to request comprehensive test data.  Some are even paying
customers!

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: nitfZIP.zip
Type: application/x-zip-compressed
Size: 3776351 bytes
Desc: nitfZIP.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030917/9206b002/nitfZIP.bin
From paul at toolscenter.org  Wed Sep 17 20:04:12 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: Sample data
References: <37936EEC582B394A9E1AA951991A551601F68F@dev001_pdc.Dev.cadcorp.net>
Message-ID: <001001c37d78$661fe660$700201c0@MAPQUEST.local>

Please stop sending large files over the mailing list.

Best regards,
Paul.

----- Original Message ----- 
From: "Gerardo Oca?a-Fuentes" <gerardo@cadcorp.com>
To: <gdal-dev@remotesensing.org>
Sent: Thursday, September 18, 2003 12:06 AM
Subject: RE: [Gdal-dev] Re: Sample data


Hi there,

You can find some samples at

http://164.214.2.51/ntb/baseline/software/testfile/nitfv2.0/scen_2_0.html

But, I have sampled a few ones in the attached ZIP file.

Regards

Gerardo Ocana

-----Original Message-----
From: Brian Marchand [mailto:bmarchand@ara.com]
Sent: 17 September 2003 13:54
To: gdal-dev@remotesensing.org
Subject: RE: [Gdal-dev] Re: Sample data


This is a great idea! Along these lines I'm really having a hard time
finding NITF examples. Does anyone have one (or more) they'd be willing
to share?

Brian


-----Original Message-----
From: Frank Warmerdam [mailto:warmerdam@pobox.com]
Sent: Tuesday, September 09, 2003 9:17 AM
To: gdal-dev
Cc: Martin Daly
Subject: [Gdal-dev] Re: Sample data

Martin Daly wrote:
> Frank,
>
> I'd really, really, really (can you see how much?) like to see a GDAL
> sample data download area.  We spent ages searching for data - to test
> and demonstrate with - for some of the drivers.  We ended up with the
> attached list (apologies for disturbing your delicate Linux
> sensibilities by using DIR output instead of ls, but note the folders
> cunningly named using GDAL driver names), which is way short of the
> possible permutations.
>
> Obviously there are sensitivity and privacy issues, but on the whole I
> would have thought that it would be possible to get something for most
> drivers.

Martin,

Rather that risk putting my OGC meeting beer supply at risk, I am forced
to comply.  I will start assembling public data samples on the GDAL ftp
site in directories named by driver.

   ftp://ftp.remotesensing.org/gdal/data

It will hopefully automatically get mirrored at:

   http://gdal.maptools.org/dl/data

Sample data of publically redistributable data samples of moderate size
are welcome from all sources.  Please drop them in the incoming
directory
at ftp.remotesensing.org and let me know by email.

I will work to populate it as I can.  You are certainly not the first
GDAL
user to request comprehensive test data.  Some are even paying
customers!

Best regards,

-- 
---------------------------------------+--------------------------------
------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev

_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Wed Sep 17 21:18:23 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: Sample data
In-Reply-To: <37936EEC582B394A9E1AA951991A551601F68F@dev001_pdc.Dev.cadcorp.net>
References: <37936EEC582B394A9E1AA951991A551601F68F@dev001_pdc.Dev.cadcorp.net>
Message-ID: <3F6907DF.5060203@pobox.com>

Gerardo Oca?a-Fuentes wrote:
> Hi there,
> 
> You can find some samples at 
> 
> http://164.214.2.51/ntb/baseline/software/testfile/nitfv2.0/scen_2_0.html
> 
> But, I have sampled a few ones in the attached ZIP file.

Folks,

Sorry about that.  Messages over 200K or so in size have to be approved by me,
but I assume this message was up for approval because it was from an unsubscribed
sender ... I didn't notice the reason was size.

If it's any consolation, I have been able to screen out a great deal of spam
directed to gdal-dev in recent weeks.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From paul at toolscenter.org  Thu Sep 18 01:15:23 2003
From: paul at toolscenter.org (Paul Selormey)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] OT: OGC Feature interface specifications
References: <37936EEC582B394A9E1AA951991A551601F68F@dev001_pdc.Dev.cadcorp.net> <001001c37d78$661fe660$700201c0@MAPQUEST.local>
Message-ID: <003a01c37da3$de9258a0$700201c0@MAPQUEST.local>

Hello All,
Which of the OGC specifications clearly documents the OGC Feature
interfaces?
I have being seeing many approaches to the OGC Feature implementations
and there seems to be no compatibility. Some implements FeatureClass, others
FeatureCollection. A document I read talked about FeatureCollection,
QueryableFeatureCollection, FeatureContainer, QueryableFeatureContainer etc.

Best regards,
Paul.


From jlemonnier at earthlink.net  Thu Sep 18 15:44:23 2003
From: jlemonnier at earthlink.net (Joe LeMonnier)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] importing SRTM30
Message-ID: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net>

Forgive my ignorance here but could you tell me how to import the 
SRTM30 in such a way that I can make shaded relief . I am working on a 
Mac and use a few programs for ordinary DEM files. These are: Bryce, 
TopotoImage, MacDem and DemReader. Will any of these work here? How do 
I use Gdal?


Can you help?


Thanks,

Joe LeMonnier


From andrevi at atlas.ucpel.tche.br  Thu Sep 18 22:06:01 2003
From: andrevi at atlas.ucpel.tche.br (=?iso-8859-1?Q?Andr=E9_Vin=EDcius_dos_Santos?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL and C
References: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net>
Message-ID: <000701c37e52$939eecf0$6b07a8c0@andrevi>

Hello !
I would like to know how I can use GDAL functions on C !
If possible somebody help me with exemples.

Thanks !

Andr? Vin?cius
Pelotas, RS, Brasil



From warmerdam at pobox.com  Thu Sep 18 22:28:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL and C
In-Reply-To: <000701c37e52$939eecf0$6b07a8c0@andrevi>
References: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net> <000701c37e52$939eecf0$6b07a8c0@andrevi>
Message-ID: <3F6A69B3.8080805@pobox.com>

Andr? Vin?cius dos Santos wrote:
> Hello !
> I would like to know how I can use GDAL functions on C !
> If possible somebody help me with exemples.

Andre,

There is a C API corresponding pretty closely to the C++ API.  The C API
declarations are available in gdal.h.  The C API docs are available at:

   http://www.remotesensing.org/gdal/gdal_h.html

The gdal_translate.cpp program (in gdal/apps) in written essentially using
the C API.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From andrevi at atlas.ucpel.tche.br  Thu Sep 18 22:55:40 2003
From: andrevi at atlas.ucpel.tche.br (=?iso-8859-1?Q?Andr=E9_Vin=EDcius_dos_Santos?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL and C
References: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net> <000701c37e52$939eecf0$6b07a8c0@andrevi> <3F6A69B3.8080805@pobox.com>
Message-ID: <000d01c37e59$82e794f0$6b07a8c0@andrevi>

Thanks Frank!
But, do you know how I can to open a geotiff image on C ?

Andr? Vin?cus


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Thursday, September 18, 2003 11:28 PM
Subject: Re: [Gdal-dev] GDAL and C


> Andr? Vin?cius dos Santos wrote:
> > Hello !
> > I would like to know how I can use GDAL functions on C !
> > If possible somebody help me with exemples.
>
> Andre,
>
> There is a C API corresponding pretty closely to the C++ API.  The C API
> declarations are available in gdal.h.  The C API docs are available at:
>
>    http://www.remotesensing.org/gdal/gdal_h.html
>
> The gdal_translate.cpp program (in gdal/apps) in written essentially using
> the C API.
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev



From rec at geodesign.com.br  Thu Sep 18 23:29:28 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALWARP Question
Message-ID: <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5>

Hi GDAL Users,

I am planning to use the gdalwarp utility to
geo-reference a number of images in batch.

I would like to know before hand if it can be
utilized to warp (rectify) unprojected images.
That is, can it input raw images with GCPs
and output geo-referenced rectified (warped)
Geotiff images, given that it is also provided
proj, zone, ellps, etc?

Or it can only be used to reproject and warp
images that have already been rectified and are
geometrically correct in a particular projection?

Thanks,

Reinaldo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030919/e7a23b4b/attachment.html
From rec at geodesign.com.br  Thu Sep 18 23:30:26 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALWARP Question
Message-ID: <5.2.0.9.0.20030919003018.00a46850@200.218.161.5>

Hi GDAL Users,

I am planning to use the gdalwarp utility to
geo-reference a number of images in batch.

I would like to know before hand if it can be
utilized to warp (rectify) unprojected images.
That is, can it input raw images with GCPs
and output geo-referenced rectified (warped)
Geotiff images, given that it is also provided
proj, zone, ellps, etc?

Or it can only be used to reproject and warp
images that have already been rectified and are
geometrically correct in a particular projection?

Thanks,

Reinaldo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030919/f4bd064d/attachment.html
From warmerdam at pobox.com  Thu Sep 18 23:30:51 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALWARP Question
In-Reply-To: <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5>
References: <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5>
Message-ID: <3F6A786B.3010804@pobox.com>

Reinaldo Escada Chohfi wrote:
> Hi GDAL Users,
> 
> I am planning to use the gdalwarp utility to
> geo-reference a number of images in batch.
> 
> I would like to know before hand if it can be
> utilized to warp (rectify) unprojected images.
> That is, can it input raw images with GCPs
> and output geo-referenced rectified (warped)
> Geotiff images, given that it is also provided
> proj, zone, ellps, etc?
> 
> Or it can only be used to reproject and warp
> images that have already been rectified and are
> geometrically correct in a particular projection?

Reinaldo,

First, I would advise you to use gdalwarptest, the new generation
warper.

Second, yes, it can rectify raw images, but it can be a bit tricky
currently to supply the GCPs.  Also, currently only polynomial warps
are supported when operating from GCPs, and only up to 3rd order.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Sep 18 23:44:59 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL and C
In-Reply-To: <000d01c37e59$82e794f0$6b07a8c0@andrevi>
References: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net> <000701c37e52$939eecf0$6b07a8c0@andrevi> <3F6A69B3.8080805@pobox.com> <000d01c37e59$82e794f0$6b07a8c0@andrevi>
Message-ID: <3F6A7BBB.1080705@pobox.com>

Andr? Vin?cius dos Santos wrote:
> Thanks Frank!
> But, do you know how I can to open a geotiff image on C ?
> 
> Andr? Vin?cus

Andre,

Yes:

#include "gdal.h"

int main()

{
	GDALDatasetH hDS;

	GDALAllRegister();

	hDS = GDALOpen( "abc.tif", GA_ReadOnly );
}

I really think you need to look at the tutorial material for GDAL
programming, the C API reference docs, gdal_translate.cpp, and gdal.h
before asking more general questions.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rec at geodesign.com.br  Fri Sep 19 01:13:14 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALWARP & GCPs
In-Reply-To: <3F6A786B.3010804@pobox.com>
References: <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5>
 <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5>
Message-ID: <5.2.0.9.0.20030919020404.00a40820@200.218.161.5>

Frank,

Thanks for the prompt reply.
Up to 3rd order polynomial warp is fine for my application.

I'll take a look at gdalwarptest.

I have a few more questions now:

1. How can GCPs be supplied? Is there a write up on it?
2. How many GCPs can be provided?
3. Does the image need to be raw or will it work with .tif too?
4. Earlier write up on gdalwarp mentioned that it supported
     nearest neighbour resampling only.  Does it support bilinear
     or any other methods now?

Thanks,

Reinaldo

At 23:30 18-09-03 -0400, you wrote:
>Reinaldo Escada Chohfi wrote:
>>Hi GDAL Users,
>>I am planning to use the gdalwarp utility to
>>geo-reference a number of images in batch.
>>I would like to know before hand if it can be
>>utilized to warp (rectify) unprojected images.
>>That is, can it input raw images with GCPs
>>and output geo-referenced rectified (warped)
>>Geotiff images, given that it is also provided
>>proj, zone, ellps, etc?
>>Or it can only be used to reproject and warp
>>images that have already been rectified and are
>>geometrically correct in a particular projection?
>
>Reinaldo,
>
>First, I would advise you to use gdalwarptest, the new generation
>warper.
>
>Second, yes, it can rectify raw images, but it can be a bit tricky
>currently to supply the GCPs.  Also, currently only polynomial warps
>are supported when operating from GCPs, and only up to 3rd order.
>
>Best regards,
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030919/9af1c355/attachment.html
From warmerdam at pobox.com  Fri Sep 19 01:31:29 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALWARP & GCPs
In-Reply-To: <5.2.0.9.0.20030919020404.00a40820@200.218.161.5>
References: <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5> <5.2.0.9.0.20030919002919.00a419a0@200.218.161.5> <5.2.0.9.0.20030919020404.00a40820@200.218.161.5>
Message-ID: <3F6A94B1.3090405@pobox.com>

Reinaldo Escada Chohfi wrote:
> Frank,
> 
> Thanks for the prompt reply.
> Up to 3rd order polynomial warp is fine for my application.
> 
> I'll take a look at gdalwarptest.
> 
> I have a few more questions now:
> 
> 1. How can GCPs be supplied? Is there a write up on it?

Reinaldo,

There is some earlier discussion of this on the list.  I suggest
you skim back for it, and/or hassle me to write a "gcp adding" utility.

> 2. How many GCPs can be provided?

Any number.

> 3. Does the image need to be raw or will it work with .tif too?

Any GDAL supported format is fine for input.  Note that raw files will
only work if you find a way to describe them to GDAL (ie. .aux file, or
.hdr file).

> 4. Earlier write up on gdalwarp mentioned that it supported
>     nearest neighbour resampling only.  Does it support bilinear
>     or any other methods now?

The gdalwarptest program supports nearest neighbour, bilinear and two
types of cubic resampling.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rec at geodesign.com.br  Thu Sep 18 22:33:00 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALWARP Question
Message-ID: <5.2.0.9.0.20030918232502.00a3e4f0@200.218.161.5>

Hi GDAL Users,

I am planning to use the gdalwarp utility to
geo-reference a number of images in batch.

I would like to know before hand if it can be
utilized to warp (rectify) unprojected images.
That is, can it input raw images with GCPs
and output geo-referenced rectified (warped)
Geotiff images, given that it is also provided
proj, zone, ellps, etc?

Or it can only be used to reproject and warp
images that have already been rectified and are
geometrically correct in a particular projection?

Thanks,

Reinaldo
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030918/8d073c16/attachment.html
From andrevi at atlas.ucpel.tche.br  Fri Sep 19 08:21:24 2003
From: andrevi at atlas.ucpel.tche.br (=?iso-8859-1?Q?Andr=E9_Vin=EDcius_dos_Santos?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL and C
References: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net> <000701c37e52$939eecf0$6b07a8c0@andrevi> <3F6A69B3.8080805@pobox.com> <000d01c37e59$82e794f0$6b07a8c0@andrevi> <3F6A7BBB.1080705@pobox.com>
Message-ID: <003001c37ea8$903f9f40$6b07a8c0@andrevi>

Very Thanks Frank !

I?ll look with more attention to tutorial.
Great tips!
I apologize because my English errors, but I am studing this language!

Andr? Vin?cius dos Santos
Pelotas,  RS, Brasil


----- Original Message ----- 
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: <gdal-dev@remotesensing.org>
Sent: Friday, September 19, 2003 12:44 AM
Subject: Re: [Gdal-dev] GDAL and C


> Andr? Vin?cius dos Santos wrote:
> > Thanks Frank!
> > But, do you know how I can to open a geotiff image on C ?
> >
> > Andr? Vin?cus
>
> Andre,
>
> Yes:
>
> #include "gdal.h"
>
> int main()
>
> {
> GDALDatasetH hDS;
>
> GDALAllRegister();
>
> hDS = GDALOpen( "abc.tif", GA_ReadOnly );
> }
>
> I really think you need to look at the tutorial material for GDAL
> programming, the C API reference docs, gdal_translate.cpp, and gdal.h
> before asking more general questions.
>
> Best regards,
>
> -- 
> ---------------------------------------+----------------------------------
----
> I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev



From warmerdam at pobox.com  Fri Sep 19 13:16:34 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: Compiling GDAL (with GRASS support) on Mac OS X
In-Reply-To: <20030919165216.B13789@itc.it>
References: <BB8508B3.CFE%bwilkerson@depauw.edu> <20030912184055.M9663@itc.it> <3F61F9DD.90705@pobox.com> <20030919162840.X7444@itc.it> <3F6B1454.7070508@pobox.com> <20030919165216.B13789@itc.it>
Message-ID: <3F6B39F2.8090509@pobox.com>

Markus,

I have fixed up the GDAL configure to ensure that LD_SHARED is "g++ -dynamiclib"
instead of "gcc -dynamiclib" and now the build seems to go much smoother.
Thanks for access to the modern MacOS system.

The changes are in CVS.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Fri Sep 19 15:30:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal_translate can now add GCPs to image, gdalwarptest renamed
Message-ID: <3F6B595D.5000202@pobox.com>

Folks,

I have modified gdal_translate to include a -gcp option for adding
GCPs to an image.

For instance, the following would add 4 GCPs that are sufficient to
rotate an image during the translation process.

gdal_translate -gcp 0 0 100 0 -gcp 512 0 100 100 -gcp 0 512 0 0 -gcp 512 512 0 100 ~/openev/utm.tif out.tif

Then you could use gdalwarp to warp it.

Also, I have renamed gdalwarptest to gdalwarp (the new algorithm is now
the primary warper), and gdalwarp to gdalwarpsimple.  Only gdalwarp is
built and installed by default.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rec at geodesign.com.br  Fri Sep 19 17:44:53 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal_translate can now add GCPs to image,
  gdalwarptest renamed
In-Reply-To: <3F6B595D.5000202@pobox.com>
Message-ID: <5.2.0.9.0.20030919183835.00a40a60@200.218.161.5>

Franks,

This is good news. It should help a lot. Thanks.

I noticed that gdalwarptest has a few more parameters than the
gdalwarp, now gdalwarpsimple.  I could not find a description
of the additional parameters.

I've been experimenting gdal with the openev_fw_1.6.2 pre-built
for Win. Are you going to build a new openev_fw with the new
gdal_translate?

Thanks,

Reinaldo.

At 15:30 19-09-03 -0400, you wrote:
>Folks,
>
>I have modified gdal_translate to include a -gcp option for adding
>GCPs to an image.
>
>For instance, the following would add 4 GCPs that are sufficient to
>rotate an image during the translation process.
>
>gdal_translate -gcp 0 0 100 0 -gcp 512 0 100 100 -gcp 0 512 0 0 -gcp 512 
>512 0 100 ~/openev/utm.tif out.tif
>
>Then you could use gdalwarp to warp it.
>
>Also, I have renamed gdalwarptest to gdalwarp (the new algorithm is now
>the primary warper), and gdalwarp to gdalwarpsimple.  Only gdalwarp is
>built and installed by default.
>
>Best regards,
>
>--
>---------------------------------------+--------------------------------------
>I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
>light and sound - activate the windows | http://pobox.com/~warmerdam
>and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030919/e42d2e5b/attachment.html
From rec at geodesign.com.br  Fri Sep 19 18:30:50 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Running gdal_merge.py
Message-ID: <5.2.0.9.0.20030919192255.00a41810@200.218.161.5>

Hello,

I unziped the openev_fw_1.6.2.zip and made the required change
in the setfw.bat file.

I can run Openev and all the gdal utilities.
However, the gdal_merge.py module code opens in the MS Notepad
when I try to run it.  I see that the icon of the modules are associated
with the Notepad.

I do not know anything about Python.  I've heard of it but never
used it before.

What program do I need to associated the module with in order to
run it, or what is needed to do to run it on Win2k?

Any suggestion is welcomed!

Thanks,

Reinaldo 


From warmerdam at pobox.com  Fri Sep 19 18:28:37 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal_translate can now add GCPs to image,  gdalwarptest
 renamed
In-Reply-To: <5.2.0.9.0.20030919183835.00a40a60@200.218.161.5>
References: <5.2.0.9.0.20030919183835.00a40a60@200.218.161.5>
Message-ID: <3F6B8315.1050602@pobox.com>

Reinaldo Escada Chohfi wrote:
> Franks,
> 
> This is good news. It should help a lot. Thanks.
> 
> I noticed that gdalwarptest has a few more parameters than the
> gdalwarp, now gdalwarpsimple.  I could not find a description
> of the additional parameters.

Reinaldo,

I will work on documenting the additional capabilities.

> I've been experimenting gdal with the openev_fw_1.6.2 pre-built
> for Win. Are you going to build a new openev_fw with the new
> gdal_translate?

Not for a week or two I don't imagine.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From ancona at alexandria.ucsb.edu  Fri Sep 19 18:38:31 2003
From: ancona at alexandria.ucsb.edu (dan ancona)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] RE: [vtp] converting lat/lon to terrain coords (fwd)
Message-ID: <Pine.GSO.4.10.10309191538060.1018-100000@alex2.alexandria.ucsb.edu>

Hi GDALers,

I'm new on the list - the Virtual Terrain Project folks suggested that I
try asking this question here.

I'm trying to convert from some lat/lon coords coming out of our gazetteer
into the projection that the terrain I'm visualizing in VTP is using.  My
code is below, as is the text description of one of the (several) source
projections I've tried, and the target projection (below the code).

The problem is that I seem to be getting weird results out of the
tranformation. (the method returns zero)  This is a typical one...

lat 34.400830 lon -119.738330 -> -2.089828, 0.600408

Inside VTP it looks like the numbers I should be getting are in the
millions - maybe 6.00M for x and 1.97M for y.  Someone suggested that it
looks like I'm just getting the result in radians instead of feet, so I
tried setting the linear units manually (HERE in the code) even though it
looks ok in the text description.  I've tried that and a bunch of
different source projections (both WellKnown and EPSG codes) and all seem
to yield the same results.

Thanks in advance for your help.  I got this far impressively fast - C++
is not my first language and when I get something working as quickly as I
got into this, it means the documentation is good and the architecture is
clean.  Certainly seems true for GDAL.

Dan


void AClient::projectPoints(const vtProjection &targetProj){
	OGRSpatialReference sourceProj;  // will be geog
	OGRSpatialReference targetOGR;
	OGRCoordinateTransformation *trans;
	double x,y;
	DPoint3 p;
	char *ss = NULL;
	char *st = NULL;
	int res = 0;

	targetOGR = (OGRSpatialReference)targetProj;

	res = sourceProj.SetWellKnownGeogCS( "EPSG:4326" ); 
	//res = sourceProj.importFromEPSG(4269);

	// HERE trying to set linear units manually...
	res = targetOGR.SetLinearUnits(SRS_UL_US_FOOT,1.0);

    	sourceProj.exportToWkt(&ss);
	targetOGR.exportToWkt(&st);
	VTLOG("from proj: %s\nto proj:%s\n",ss,st);

	trans = OGRCreateCoordinateTransformation( &sourceProj,
						   &targetOGR);

	if(!trans)
		VTLOG("argh.");

	for (int i=0; i < m_gazList.n; ++i) {
		x = m_gazList.gazItems[i].lon;
		y = m_gazList.gazItems[i].lat;
		int result = trans->Transform(1, &x, &y);
		if (result < 1)
			VTLOG("Transformation failed.\n");
		else {
			p.x = x;	p.y = y;	p.z = 0;
			m_gazList.gazItems[i].pProj = p;
			VTLOG("lat %f lon %f -> %f, %f\n",
				m_gazList.gazItems[i].lat,m_gazList.gazItems[i].lon
				,x,y);
		}
	}
}

source projection
-----------------
GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,
AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]],
PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]]

target projection
-----------------
PROJCS["NAD83 / California zone 5",
GEOGCS["NAD83",
DATUM["North_American_Datum_1983",
SPHEROID["GRS
1980",6378137,298.2572221010002,
AUTHORITY["EPSG","7019"]],
AUTHORITY["EPSG","6269"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4269"]],
UNIT["US survey foot",0.3048006096012192,
AUTHORITY["EPSG","9003"]],AUTHORITY["EPSG","26945"]]



To unsubscribe from this group, send an email to:
vtp-unsubscribe@egroups.com 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 




From sgillies at frii.com  Fri Sep 19 19:35:04 2003
From: sgillies at frii.com (Sean Gillies)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Running gdal_merge.py
In-Reply-To: <5.2.0.9.0.20030919192255.00a41810@200.218.161.5>
Message-ID: <E53DF9C0-EAF9-11D7-8040-000393B98B56@frii.com>

On Friday, September 19, 2003, at 04:30  PM, Reinaldo Escada Chohfi 
wrote:

> Hello,
>
> I unziped the openev_fw_1.6.2.zip and made the required change
> in the setfw.bat file.
>
> I can run Openev and all the gdal utilities.
> However, the gdal_merge.py module code opens in the MS Notepad
> when I try to run it.  I see that the icon of the modules are 
> associated
> with the Notepad.
>
> I do not know anything about Python.  I've heard of it but never
> used it before.
>
> What program do I need to associated the module with in order to
> run it, or what is needed to do to run it on Win2k?
>
> Any suggestion is welcomed!
>
> Thanks,
>
> Reinaldo

There are other distributions of Python for Win2k, but I've only used
this one:

http://www.activestate.com/Products/ActivePython/

There's a download button in the upper left of the page.  Once you've
installed it, you can execute gdal_merge.py like

    python gdal_merge.py

Python is a scripting language (like Perl) and 'python' is the program 
that
interprets the scripts (like the program 'perl').

Python is powerful and very easy to learn, and is the language of
choice for more and more GIS programming projects.  Python's home
page

http://www.python.org

is not so compelling, but is the place to start for tutorials and
language reference.

cheers,
Sean

--
Sean Gillies
sgillies at frii dot com
http://www.frii.com/~sgillies


From rec at geodesign.com.br  Fri Sep 19 22:49:13 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Running gdal_merge.py
In-Reply-To: <E53DF9C0-EAF9-11D7-8040-000393B98B56@frii.com>
References: <5.2.0.9.0.20030919192255.00a41810@200.218.161.5>
Message-ID: <5.2.0.9.0.20030919234138.00a41ec0@200.218.161.5>

Sean,

Thanks for the help. I did not have to download python because
it's already within openev_fw.

I got it working and the results look fine.  I did not have my paths right.

I have to study a bit on python and gdal because we can
come up with very nice tools with them.

I can write fortran, c/c++, tcl/tk and vtk codes/apps, but never
looked into python.  Also, I've had gdal on my computer for
some time and just now that decided to take a look at it.
It's very nice. Thanks Frank!

Anyway, thanks again.

Reinaldo

At 17:35 19-09-03 -0600, you wrote:
>On Friday, September 19, 2003, at 04:30  PM, Reinaldo Escada Chohfi wrote:
>
>>Hello,
>>
>>I unziped the openev_fw_1.6.2.zip and made the required change
>>in the setfw.bat file.
>>
>>I can run Openev and all the gdal utilities.
>>However, the gdal_merge.py module code opens in the MS Notepad
>>when I try to run it.  I see that the icon of the modules are associated
>>with the Notepad.
>>
>>I do not know anything about Python.  I've heard of it but never
>>used it before.
>>
>>What program do I need to associated the module with in order to
>>run it, or what is needed to do to run it on Win2k?
>>
>>Any suggestion is welcomed!
>>
>>Thanks,
>>
>>Reinaldo
>
>There are other distributions of Python for Win2k, but I've only used
>this one:
>
>http://www.activestate.com/Products/ActivePython/
>
>There's a download button in the upper left of the page.  Once you've
>installed it, you can execute gdal_merge.py like
>
>    python gdal_merge.py
>
>Python is a scripting language (like Perl) and 'python' is the program that
>interprets the scripts (like the program 'perl').
>
>Python is powerful and very easy to learn, and is the language of
>choice for more and more GIS programming projects.  Python's home
>page
>
>http://www.python.org
>
>is not so compelling, but is the place to start for tutorials and
>language reference.
>
>cheers,
>Sean
>
>--
>Sean Gillies
>sgillies at frii dot com
>http://www.frii.com/~sgillies
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030919/4626d956/attachment.html
From slepnev_v at newmail.ru  Sat Sep 20 07:28:53 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] ESRI .hdr open bug?
Message-ID: <000001c37f6a$6dfbb820$a580dac3@sst>

Hello,

it seems that ESRI .hdr labelled datasets are not opened correctly - if
opening a 3-band dataset, all 3 bands appear to be identical, which is
wrong.

Also, is support for writing ESRI datasets planned? what about ESRI BIP
and BSQ?

Regards,
Vladimir Slepnev
Programmer, RDC ScanEx


From dron at ak4719.spb.edu  Sat Sep 20 10:25:54 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] importing SRTM30
In-Reply-To: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net>
References: <80F851AE-EA10-11D7-80E3-0003934BFFE8@earthlink.net>
Message-ID: <20030920142554.GA21190@ak4719.spb.edu>

On Thu, Sep 18, 2003 at 03:44:23PM -0400, Joe LeMonnier wrote:
> Forgive my ignorance here but could you tell me how to import the 
> SRTM30 in such a way that I can make shaded relief . I am working on a 
> Mac and use a few programs for ordinary DEM files. These are: Bryce, 
> TopotoImage, MacDem and DemReader. Will any of these work here? How do 
> I use Gdal?

You can use gdal_translate utility to produce output file in the format,
suitable for your processing software. SRTM30 can be imported by the
GDAL without problems.

Also I have made a Python script to produce a shaded relief images
(algorithm was stealed from the corresponding PCI task). See that script
attached, those whop are using CVS tree can find it under /pymod/samples
directory. Script works not too fast, but it can be easily rewritten in C.


						Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517
-------------- next part --------------
#!/usr/bin/env python
###############################################################################
# $Id: rel.py,v 1.1 2003/09/20 11:43:18 dron Exp $
#
# Project:  GDAL Python samples
# Purpose:  Script to produce a shaded relief image from elevation data
# Author:   Andrey Kiselev, dron@remotesensing.org
#
###############################################################################
# Copyright (c) 2003, Andrey Kiselev <dron@remotesensing.org>
# 
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the "Software"),
# to deal in the Software without restriction, including without limitation
# the rights to use, copy, modify, merge, publish, distribute, sublicense,
# and/or sell copies of the Software, and to permit persons to whom the
# Software is furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included
# in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
# DEALINGS IN THE SOFTWARE.
###############################################################################
# 
#  $Log: rel.py,v $
#  Revision 1.1  2003/09/20 11:43:18  dron
#  New.
#
#

import gdal
import gdalnumeric
from gdalconst import *
import Numeric
import sys
from math import *

# =============================================================================
def Usage():
    print 'Usage: rel.py -lsrcaz azimuth -lsrcel elevation [-elstep step]'
    print '       [-dx xsize] [-dy ysize] [-b band] [-ot type] infile outfile'
    print 'Produce a shaded relief image from elevation data'
    print
    print '  -lsrcaz azimuth   Azimuth angle of the diffuse light source (0..360 degrees)'
    print '  -lsrcel elevation Elevation angle of the diffuse light source (0..180 degrees)'
    print '  -elstep step      Elevation change corresponding to a change of one grey level'
    print '                    (default 1)'
    print '  -dx xsize         X and Y dimensions (in metres) of one pixel on the ground'
    print '  -dy ysize         (taken from the geotransform matrix by default)'
    print '  -b band	       Select a band number to convert (default 1)'
    print '  -ot type	       Data type of the output dataset'
    print '                    (Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/'
    print '                     CInt16/CInt32/CFloat32/CFloat64, default is Byte)'
    print '  infile	       Name of the input file'
    print '  outfile	       Name of the output file'
    print
    sys.exit(1)

# =============================================================================

# =============================================================================
def ParseType(type):
    if type == 'Byte':
	return GDT_Byte
    elif type == 'Int16':
	return GDT_Int16
    elif type == 'UInt16':
	return GDT_UInt16
    elif type == 'Int32':
	return GDT_Int32
    elif type == 'UInt32':
	return GDT_UInt32
    elif type == 'Float32':
	return GDT_Float32
    elif type == 'Float64':
	return GDT_Float64
    elif type == 'CInt16':
	return GDT_CInt16
    elif type == 'CInt32':
	return GDT_CInt32
    elif type == 'CFloat32':
	return GDT_CFloat32
    elif type == 'CFloat64':
	return GDT_CFloat64
    else:
	return GDT_Byte
# =============================================================================

infile = None
outfile = None
iBand = 1	    # The first band will be converted by default
format = 'GTiff'
type = GDT_Byte

lsrcaz = None
lsrcel = None
elstep = 1.0
xsize = None
ysize = None

# Parse command line arguments.
i = 1
while i < len(sys.argv):
    arg = sys.argv[i]

    if arg == '-b':
        i += 1
        iBand = int(sys.argv[i])

    elif arg == '-ot':
        i += 1
        type = ParseType(sys.argv[i])

    elif arg == '-lsrcaz':
        i += 1
        lsrcaz = float(sys.argv[i])

    elif arg == '-lsrcel':
        i += 1
        lsrcel = float(sys.argv[i])

    elif arg == '-elstep':
        i += 1
        elstep = float(sys.argv[i])

    elif arg == '-dx':
        i += 1
        xsize = float(sys.argv[i])

    elif arg == '-dy':
        i += 1
        ysize = float(sys.argv[i])

    elif infile is None:
	infile = arg

    elif outfile is None:
	outfile = arg

    else:
	Usage()

    i += 1

if infile is None:
    Usage()
if outfile is None:
    Usage()
if lsrcaz is None:
    Usage()
if lsrcel is None:
    Usage()

# translate angles from degrees to radians
lsrcaz = lsrcaz / 180.0 * pi
lsrcel = lsrcel / 180.0 * pi

lx = -sin(lsrcaz) * cos(lsrcel)
ly =  cos(lsrcaz) * cos(lsrcel)
lz =  sin(lsrcel)

indataset = gdal.Open(infile, GA_ReadOnly)
if indataset == None:
    print 'Cannot open', infile
    sys.exit(2)

out_driver = gdal.GetDriverByName(format)
outdataset = out_driver.Create(outfile, indataset.RasterXSize, indataset.RasterYSize, indataset.RasterCount, type)
outband = outdataset.GetRasterBand(1)

geotransform = indataset.GetGeoTransform()
projection = indataset.GetProjection()

if xsize is None:
    xsize = abs(geotransform[1])
if ysize is None:
    ysize = abs(geotransform[5])

inband = indataset.GetRasterBand(iBand)
if inband == None:
    print 'Cannot load band', iBand, 'from the', infile
    sys.exit(2)

outline = Numeric.zeros((1, inband.XSize), gdalnumeric.GDALTypeCodeToNumericTypeCode(type))

lineprev = inband.ReadAsArray(0, 0, inband.XSize, 1, inband.XSize, 1)
outband.WriteArray(outline, 0, 0)
gdal.TermProgress(0.0)
linecur = inband.ReadAsArray(0, 1, inband.XSize, 1, inband.XSize, 1)
outband.WriteArray(outline, 0, inband.YSize - 1)
gdal.TermProgress(1.0 / inband.YSize)

for i in range(1, inband.YSize - 1):
    linenext = inband.ReadAsArray(0, i + 1, inband.XSize, 1, inband.XSize, 1)

    for j in range(1, inband.XSize - 1):
	dx = 2 * xsize
	dzx = (linecur[0, j - 1] - linecur[0, j + 1]) * elstep
	dy = 2 * ysize
	dzy = (lineprev[0, j] - linenext[0, j]) * elstep
	nx = -dy * dzx
	ny = dx * dzy
	nz = dx * dy
	cosine = (nx*lx + ny*ly + nz*lz) / (sqrt(nx**2+ny**2+nz**2)*sqrt(lx**2+ly**2+lz**2))
	if (cosine < 0):
	    outline[0, j] = 0.0
	else:
	    outline[0, j] = cosine * 255

    lineprev = linecur
    linecur = linenext
    outband.WriteArray(outline, 0, i)

    # Display progress report on terminal
    gdal.TermProgress(float(i + 1) / (inband.YSize - 1))

outdataset.SetGeoTransform(geotransform)
outdataset.SetProjection(projection)

From warmerdam at pobox.com  Sat Sep 20 11:56:15 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] ESRI .hdr open bug?
In-Reply-To: <000001c37f6a$6dfbb820$a580dac3@sst>
References: <000001c37f6a$6dfbb820$a580dac3@sst>
Message-ID: <3F6C789F.8040906@pobox.com>

Vladimir Slepnev wrote:
> Hello,
> 
> it seems that ESRI .hdr labelled datasets are not opened correctly - if
> opening a 3-band dataset, all 3 bands appear to be identical, which is
> wrong.
> 
> Also, is support for writing ESRI datasets planned? what about ESRI BIP
> and BSQ?

Vladimir,

If you can prepare a bug report and attach .hdr files for any datasets giving
problems I will look into improvements.  I don't have any ESRI software I can
use to prepare various combinations.

The ESRI .hdr labelled driver was not developed for a commercial customer, so
it has just evolved as problems have come up.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Sat Sep 20 12:06:15 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal_translate can now add GCPs to image,  gdalwarptest renamed
In-Reply-To: <3F6B8315.1050602@pobox.com>
References: <5.2.0.9.0.20030919183835.00a40a60@200.218.161.5> <3F6B8315.1050602@pobox.com>
Message-ID: <20030920160615.GA4980@ak4719.spb.edu>

On Fri, Sep 19, 2003 at 06:28:37PM -0400, Frank Warmerdam wrote:
> >I noticed that gdalwarptest has a few more parameters than the
> >gdalwarp, now gdalwarpsimple.  I could not find a description
> >of the additional parameters.
> I will work on documenting the additional capabilities.

Frank,

I have made a few updates to gdalwarp documenattion.

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From nhv at cape.com  Sat Sep 20 13:32:02 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] importing SRTM30
In-Reply-To: <20030920142554.GA21190@ak4719.spb.edu>
Message-ID: <EKEJIKAILPONGGENMBGAEELOEMAA.nhv@cape.com>

Andrey Kiselev writes:
> 
> Also I have made a Python script to produce a shaded relief images
> (algorithm was stealed from the corresponding PCI task). See that script
> attached, those whop are using CVS tree can find it under /pymod/samples
> directory. Script works not too fast, but it can be easily rewritten in C.

Neat  :-) 

This should be a little quicker.

Cheers

Norman

-------------- next part --------------
#!/usr/bin/env python
###############################################################################
# $Id: rel.py,v 1.1 2003/09/20 11:43:18 dron Exp $
#
# Project:  GDAL Python samples
# Purpose:  Script to produce a shaded relief image from elevation data
# Author:   Andrey Kiselev, dron@remotesensing.org
#
###############################################################################
# Copyright (c) 2003, Andrey Kiselev <dron@remotesensing.org>
# 
# Permission is hereby granted, free of charge, to any person obtaining a
# copy of this software and associated documentation files (the "Software"),
# to deal in the Software without restriction, including without limitation
# the rights to use, copy, modify, merge, publish, distribute, sublicense,
# and/or sell copies of the Software, and to permit persons to whom the
# Software is furnished to do so, subject to the following conditions:
#
# The above copyright notice and this permission notice shall be included
# in all copies or substantial portions of the Software.
#
# THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS
# OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
# FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL
# THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
# LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
# FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER
# DEALINGS IN THE SOFTWARE.
###############################################################################
#
#  $Log: rel.py,v $
#  Revision 1.2  2003/09/20 13:16:30  nhv
#  remove invariants from inside the loop 
#  use python array operators
#
#  $Log: rel.py,v $
#  Revision 1.1  2003/09/20 11:43:18  dron
#  New.
#
#

import gdal
import gdalnumeric
from gdalconst import *
import Numeric
import sys
from math import *

# =============================================================================
def Usage():
    print 'Usage: rel.py -lsrcaz azimuth -lsrcel elevation [-elstep step]'
    print '       [-dx xsize] [-dy ysize] [-b band] [-ot type] infile outfile'
    print 'Produce a shaded relief image from elevation data'
    print
    print '  -lsrcaz azimuth   Azimuth angle of the diffuse light source (0..360 degrees)'
    print '  -lsrcel elevation Elevation angle of the diffuse light source (0..180 degrees)'
    print '  -elstep step      Elevation change corresponding to a change of one grey level'
    print '                    (default 1)'
    print '  -dx xsize         X and Y dimensions (in metres) of one pixel on the ground'
    print '  -dy ysize         (taken from the geotransform matrix by default)'
    print '  -b band	       Select a band number to convert (default 1)'
    print '  -ot type	       Data type of the output dataset'
    print '                    (Byte/Int16/UInt16/UInt32/Int32/Float32/Float64/'
    print '                     CInt16/CInt32/CFloat32/CFloat64, default is Byte)'
    print '  infile	       Name of the input file'
    print '  outfile	       Name of the output file'
    print
    sys.exit(1)

# =============================================================================

# =============================================================================
def ParseType(type):
    if type == 'Byte':
	return GDT_Byte
    elif type == 'Int16':
	return GDT_Int16
    elif type == 'UInt16':
	return GDT_UInt16
    elif type == 'Int32':
	return GDT_Int32
    elif type == 'UInt32':
	return GDT_UInt32
    elif type == 'Float32':
	return GDT_Float32
    elif type == 'Float64':
	return GDT_Float64
    elif type == 'CInt16':
	return GDT_CInt16
    elif type == 'CInt32':
	return GDT_CInt32
    elif type == 'CFloat32':
	return GDT_CFloat32
    elif type == 'CFloat64':
	return GDT_CFloat64
    else:
	return GDT_Byte
# =============================================================================

infile = None
outfile = None
iBand = 1	    # The first band will be converted by default
format = 'GTiff'
type = GDT_Byte

lsrcaz = None
lsrcel = None
elstep = 1.0
xsize = None
ysize = None

# Parse command line arguments.
i = 1
while i < len(sys.argv):
    arg = sys.argv[i]

    if arg == '-b':
        i += 1
        iBand = int(sys.argv[i])

    elif arg == '-ot':
        i += 1
        type = ParseType(sys.argv[i])

    elif arg == '-lsrcaz':
        i += 1
        lsrcaz = float(sys.argv[i])

    elif arg == '-lsrcel':
        i += 1
        lsrcel = float(sys.argv[i])

    elif arg == '-elstep':
        i += 1
        elstep = float(sys.argv[i])

    elif arg == '-dx':
        i += 1
        xsize = float(sys.argv[i])

    elif arg == '-dy':
        i += 1
        ysize = float(sys.argv[i])

    elif infile is None:
	infile = arg

    elif outfile is None:
	outfile = arg

    else:
	Usage()

    i += 1

if infile is None:
    Usage()
if outfile is None:
    Usage()
if lsrcaz is None:
    Usage()
if lsrcel is None:
    Usage()

# translate angles from degrees to radians
lsrcaz = lsrcaz / 180.0 * pi
lsrcel = lsrcel / 180.0 * pi

lx = -sin(lsrcaz) * cos(lsrcel)
ly =  cos(lsrcaz) * cos(lsrcel)
lz =  sin(lsrcel)
lxyz = sqrt(lx**2+ly**2+lz**2)

indataset = gdal.Open(infile, GA_ReadOnly)
if indataset == None:
    print 'Cannot open', infile
    sys.exit(2)

out_driver = gdal.GetDriverByName(format)
outdataset = out_driver.Create(outfile, indataset.RasterXSize, indataset.RasterYSize, indataset.RasterCount, type)
outband = outdataset.GetRasterBand(1)

geotransform = indataset.GetGeoTransform()
projection = indataset.GetProjection()

if xsize is None:
    xsize = abs(geotransform[1])
if ysize is None:
    ysize = abs(geotransform[5])

inband = indataset.GetRasterBand(iBand)
if inband == None:
    print 'Cannot load band', iBand, 'from the', infile
    sys.exit(2)

mytype = gdalnumeric.GDALTypeCodeToNumericTypeCode(type)    
outline = Numeric.zeros((1, inband.XSize), mytype)

lineprev = inband.ReadAsArray(0, 0, inband.XSize, 1, inband.XSize, 1)
outband.WriteArray(outline, 0, 0)
gdal.TermProgress(0.0)
linecur = inband.ReadAsArray(0, 1, inband.XSize, 1, inband.XSize, 1)
outband.WriteArray(outline, 0, inband.YSize - 1)
gdal.TermProgress(1.0 / inband.YSize)

dx = 2 * xsize
dy = 2 * ysize

for i in range(1, inband.YSize - 1):
    linenext = inband.ReadAsArray(0, i + 1, inband.XSize, 1, inband.XSize, 1)
    cur = linecur[0]
    dzx = (cur[0:-2] - cur[2:]) * elstep
    prev = lineprev[0]
    next = linenext[0]
    dzy = (prev[1:-1] - next[1:-1]) * elstep
    nx = -dy * dzx
    ny = dx * dzy
    nz = dx * dy
    nxyz = nx*nx + ny*ny + nz*nz
    nlxyz = nx*lx + ny*ly + nz*lz
    cosine = 255 * ( nlxyz / (lxyz * Numeric.sqrt(nxyz)))
    cosine = Numeric.clip(cosine,0.0,255.0)
    for j in range(1, inband.XSize - 1):
        outline[0, j] = cosine[j-1]

    lineprev = linecur
    linecur = linenext
    outband.WriteArray(outline, 0, i)

    # Display progress report on terminal
    gdal.TermProgress(float(i + 1) / (inband.YSize - 1))

outdataset.SetGeoTransform(geotransform)
outdataset.SetProjection(projection)

From sbrooks2 at kc.rr.com  Sat Sep 20 13:57:38 2003
From: sbrooks2 at kc.rr.com (Steve Brooks)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Errors in dgnread.cpp
Message-ID: <000301c37fa0$b025fb80$7d01a8c0@pc5120d>

I have found two fatal errors in dgnread.cpp the first one will cause a
crash
when there appears to be attributes on the tcb which inside the 'if'  
psElement->attr_bytes gets setup as a negative number which causes the
CPLMalloc to crash.  If you would like a copy of the dgn file let me know.
My fix was not to go inside the if( psElement->properties & DGNPF_ATTRIBUTES
)
if the element is a tcb.
 
The next change was causing OGRLayer::GetFeature
to not return any features.  When the DGN Index was being built the
offset was being truncated to an invalid offest by the (unsigned char)
cast.
 
My envionment is Windows XP, Microsoft Visual Studio.Net 2003.
 
 
Thanks
Steve Brooks
 
 
----------------------------------------------------------------------------
-----------------------
$ diff clean/dgnread.cpp modified/dgnread.cpp
1093c1093
< if( psElement->properties & DGNPF_ATTRIBUTES )
---
> if( psElement->properties & DGNPF_ATTRIBUTES && psElement->type !=
DGNT_TCB )
1621c1621
< psEI->offset = (unsigned char) nLastOffset;
---
> psEI->offset = (long) nLastOffset;
 
----------------------------------------------------------------------------
---------------------
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030920/72274a0d/attachment.html
From dron at ak4719.spb.edu  Sat Sep 20 14:08:34 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] importing SRTM30
In-Reply-To: <EKEJIKAILPONGGENMBGAEELOEMAA.nhv@cape.com>
References: <20030920142554.GA21190@ak4719.spb.edu> <EKEJIKAILPONGGENMBGAEELOEMAA.nhv@cape.com>
Message-ID: <20030920180834.GA15936@ak4719.spb.edu>

On Sat, Sep 20, 2003 at 01:32:02PM -0400, Norman Vine wrote:
> > Also I have made a Python script to produce a shaded relief images
> > (algorithm was stealed from the corresponding PCI task). See that script
> > attached, those whop are using CVS tree can find it under /pymod/samples
> > directory. Script works not too fast, but it can be easily rewritten in C.
> 
> This should be a little quicker.

Thanks! This is really helps to speed up things.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From roellich at web.de  Sat Sep 20 14:31:33 2003
From: roellich at web.de (=?iso-8859-1?Q? Thorsten=20R=F6llich ?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] s-57 to vrml elevation map?
Message-ID: <200309201831.h8KIVXQ28588@mailgate5.cinetic.de>

Hello,

I'm building a 3D model of a coastal area in Germany and try to use S-57 datasets as a source.
First I used the program SeeMyDEnc from sevencs to open my datasets and it looked fine. By picking a position on the map, the program shows the primitive DEPARE (Depth Area Group) and the corresponding depth (DRVAL1 and DRVAL2).
This seems to be enough information for modeling a (rough) topography.
So I looked for a converter, that fits my needs... (Something, that converts S-57 to VRML elevation map would be ideal)
What I found was the ogr library and the tools ogrinfo and ogr2ogr.
So I will have to write the converter myself..
The plan was to translate S-57 to GML (which is more human readable) using ogr2ogr and parse all Polygons that describe an Area and the corresponding depth. 
The  translation to GML worked fine, but I could not find any depth information in the file. I tried it with many ogr2ogr options, but the 3rd dimension seems always to be lost.

Does anybody have an idea how to translate the topographic information from S-57 files to an elevation map, or how to extract the polygons and the depth of DEPARE fields?
Very thankful for any hints on this. Kindest regards / Thorsten

______________________________________________________________________________
Zwei Mal Platz 1 mit dem jeweils besten Testergebnis! WEB.DE FreeMail
und WEB.DE Club bei Stiftung Warentest! http://f.web.de/?mc=021183


From ancona at alexandria.ucsb.edu  Fri Sep 19 17:53:17 2003
From: ancona at alexandria.ucsb.edu (dan ancona)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] RE: [vtp] converting lat/lon to terrain coords (fwd)
Message-ID: <Pine.GSO.4.10.10309191428450.1018-100000@alex2.alexandria.ucsb.edu>

Hi GDALers,

I'm new on the list - the Virtual Terrain Project folks suggested that I
try asking this question here.

I'm trying to convert from some lat/lon coords coming out of our gazetteer
into the projection that the terrain I'm visualizing in VTP is using.  My
code is below, as is the text description of one of the (several) source
projections I've tried, and the target projection (below the code).

The problem is that I seem to be getting weird results out of the
tranformation. (the method returns zero)  This is a typical one...

lat 34.400830 lon -119.738330 -> -2.089828, 0.600408

Inside VTP it looks like the numbers I should be getting are in the
millions - maybe 6.00M for x and 1.97M for y.  Someone suggested that it
looks like I'm just getting the result in radians instead of feet, so I
tried setting the linear units manually (HERE in the code) even though it
looks ok in the text description.  I've tried that and a bunch of
different source projections (both WellKnown and EPSG codes) and all seem
to yield the same results.

Thanks in advance for your help.  I got this far impressively fast - C++
is not my first language and when I get something working as quickly as I
got into this, it means the documentation is good and the architecture is
clean.  Certainly seems true for GDAL.

Dan


void AClient::projectPoints(const vtProjection &targetProj){
	OGRSpatialReference sourceProj;  // will be geog
	OGRSpatialReference targetOGR;
	OGRCoordinateTransformation *trans;
	double x,y;
	DPoint3 p;
	char *ss = NULL;
	char *st = NULL;
	int res = 0;

	targetOGR = (OGRSpatialReference)targetProj;

	res = sourceProj.SetWellKnownGeogCS( "EPSG:4326" ); 
	//res = sourceProj.importFromEPSG(4269);

	// HERE trying to set linear units manually...
	res = targetOGR.SetLinearUnits(SRS_UL_US_FOOT,1.0);

    	sourceProj.exportToWkt(&ss);
	targetOGR.exportToWkt(&st);
	VTLOG("from proj: %s\nto proj:%s\n",ss,st);

	trans = OGRCreateCoordinateTransformation( &sourceProj,
						   &targetOGR);

	if(!trans)
		VTLOG("argh.");

	for (int i=0; i < m_gazList.n; ++i) {
		x = m_gazList.gazItems[i].lon;
		y = m_gazList.gazItems[i].lat;
		int result = trans->Transform(1, &x, &y);
		if (result < 1)
			VTLOG("Transformation failed.\n");
		else {
			p.x = x;	p.y = y;	p.z = 0;
			m_gazList.gazItems[i].pProj = p;
			VTLOG("lat %f lon %f -> %f, %f\n",
				m_gazList.gazItems[i].lat,m_gazList.gazItems[i].lon
				,x,y);
		}
	}
}

source projection
-----------------
GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.257223563,
AUTHORITY["EPSG","7030"]],
AUTHORITY["EPSG","6326"]],
PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],
UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4326"]]

target projection
-----------------
PROJCS["NAD83 / California zone 5",
GEOGCS["NAD83",
DATUM["North_American_Datum_1983",
SPHEROID["GRS
1980",6378137,298.2572221010002,
AUTHORITY["EPSG","7019"]],
AUTHORITY["EPSG","6269"]],
PRIMEM["Greenwich",0],
UNIT["degree",0.0174532925199433],AUTHORITY["EPSG","4269"]],
UNIT["US survey foot",0.3048006096012192,
AUTHORITY["EPSG","9003"]],AUTHORITY["EPSG","26945"]]



To unsubscribe from this group, send an email to:
vtp-unsubscribe@egroups.com 

Your use of Yahoo! Groups is subject to http://docs.yahoo.com/info/terms/ 



From roellich at web.de  Sat Sep 20 13:49:48 2003
From: roellich at web.de (=?iso-8859-1?Q? Thorsten=20R=F6llich ?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] terrain model from S-57 nautical chart?
Message-ID: <200309201749.h8KHniQ10456@mailgate5.cinetic.de>

Hello,

I'm building a 3D model of a coastal area in Germany and try to use S-57 datasets as a source.
First I used the program SeeMyDEnc from sevencs to open my datasets and it looked fine. By picking a position on the map, the program shows the primitive DEPARE (Depth Area Group) and the corresponding depth (DRVAL1 and DRVAL2).
This seems to be enough information for modeling a (rough) topography.
So I looked for a converter, that fits my needs... (Something, that converts S-57 to VRML elevation map would be ideal)
What I found was the ogr library and the tools ogrinfo and ogr2ogr.
So I will have to write the converter myself..
The plan was to translate S-57 to GML (which is more human readable) using ogr2ogr and parse all Polygons that describe an Area and the corresponding depth. 
The  translation to GML worked fine, but I could not find any depth information in the file. I tried it with many ogr2ogr options, but the 3rd dimension seems always to be lost.

Does anybody have an idea how to translate the topographic information from S-57 files to an elevation map, or how to extract the polygons and the depth of DEPARE fields?
Very thankful for any hints on this. Kindest regards / Thorsten

______________________________________________________________________________
Bestes Testergebnis: Stiftung Warentest Doppelsieg fur WEB.DE FreeMail
und WEB.DE Club. Nur fuer unsere Nutzer! http://f.web.de/?mc=021182


From rec at geodesign.com.br  Sat Sep 20 20:23:59 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal_translation interpolation
Message-ID: <5.2.0.9.0.20030920211704.00a41060@200.218.161.5>

gdal users,

What's  the interpolation method used in gdal_translate
when the size of the input dataset is changed with the
-outsize flag?

Are there different interpolation methods that can be used?
If yes, what are they and the flags to use?

Thanks in advance.

Reinaldo

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030920/af700953/attachment.html
From warmerdam at pobox.com  Sat Sep 20 20:39:38 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Errors in dgnread.cpp
In-Reply-To: <000301c37fa0$b025fb80$7d01a8c0@pc5120d>
References: <000301c37fa0$b025fb80$7d01a8c0@pc5120d>
Message-ID: <3F6CF34A.7050706@pobox.com>

Steve Brooks wrote:
> I have found two fatal errors in dgnread.cpp the first one will cause a 
> crash
> when there appears to be attributes on the tcb which inside the 'if'  
> psElement->attr_bytes gets setup as a negative number which causes the
> CPLMalloc to crash.  If you would like a copy of the dgn file let me know.
> My fix was not to go inside the if( psElement->properties & 
> DGNPF_ATTRIBUTES )
> if the element is a tcb.
>  
> The next change was causing OGRLayer::GetFeature
> to not return any features.  When the DGN Index was being built the
> offset was being truncated to an invalid offest by the (unsigned char)
> cast.
>  
> My envionment is Windows XP, Microsoft Visual Studio.Net 2003.

Steve,

I would appreciate a file to demonstrate the first problem.

The second is a very serious bug introduced in a fit of (apparently improper)
type casting fixes, and apparently breaks any random (rather than sequential)
index based element reads.

I have committed the fix for both but would still like to understand the first
issue better.

I am cc:ing the dgnlib list since it mostly effects people there, and I will
issue a new dgnlib within a couple days once I am happy with the fixes.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Sat Sep 20 21:02:23 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal_translation interpolation
In-Reply-To: <5.2.0.9.0.20030920211704.00a41060@200.218.161.5>
References: <5.2.0.9.0.20030920211704.00a41060@200.218.161.5>
Message-ID: <3F6CF89F.8090408@pobox.com>

Reinaldo Escada Chohfi wrote:
> gdal users,
> 
> What's  the interpolation method used in gdal_translate
> when the size of the input dataset is changed with the
> -outsize flag?
> 
> Are there different interpolation methods that can be used?
> If yes, what are they and the flags to use?

Reinaldo,

gdal_translate uses the resampling done by the core RasterIO() code which is
nearest neighbour (simple replication or decimation).  If you need to
control resampling you could use gdalwarp which also offers bilinear,
and two cubic algorithms.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sbrooks2 at kc.rr.com  Sat Sep 20 21:03:17 2003
From: sbrooks2 at kc.rr.com (Steve Brooks)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Errors in dgnread.cpp
In-Reply-To: <3F6CF34A.7050706@pobox.com>
Message-ID: <000501c37fdc$2c093740$7d01a8c0@pc5120d>

Frank,

  Here is the dgn file.  Its not too big, but forgive me if 
I shouldn't have sent this to the list.

It's a pretty simple dgn file just contours and text.  The
error happens on the first element the (tcb).

Steve.


-----Original Message-----
From: gdal-dev-admin@remotesensing.org
[mailto:gdal-dev-admin@remotesensing.org] On Behalf Of Frank Warmerdam
Sent: Saturday, September 20, 2003 7:40 PM
To: gdal-dev@remotesensing.org
Cc: dgnlib
Subject: Re: [Gdal-dev] Errors in dgnread.cpp


Steve Brooks wrote:
> I have found two fatal errors in dgnread.cpp the first one will cause 
> a
> crash
> when there appears to be attributes on the tcb which inside the 'if'  
> psElement->attr_bytes gets setup as a negative number which causes the
> CPLMalloc to crash.  If you would like a copy of the dgn file let me 
> know. My fix was not to go inside the if( psElement->properties & 
> DGNPF_ATTRIBUTES ) if the element is a tcb.
>  
> The next change was causing OGRLayer::GetFeature
> to not return any features.  When the DGN Index was being built the 
> offset was being truncated to an invalid offest by the (unsigned char) 
> cast.
>  
> My envionment is Windows XP, Microsoft Visual Studio.Net 2003.

Steve,

I would appreciate a file to demonstrate the first problem.

The second is a very serious bug introduced in a fit of (apparently
improper) type casting fixes, and apparently breaks any random (rather than
sequential) index based element reads.

I have committed the fix for both but would still like to understand the
first issue better.

I am cc:ing the dgnlib list since it mostly effects people there, and I will
issue a new dgnlib within a couple days once I am happy with the fixes.

Best regards,
-- 
---------------------------------------+--------------------------------
---------------------------------------+------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev
-------------- next part --------------
A non-text attachment was scrubbed...
Name: test.dgn
Type: image/vnd.dgn
Size: 97280 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030920/ce433c07/test.bin
From nfarah at hotmail.com  Sat Sep 20 21:04:34 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Geosoft Grid eXchange Format and Projection support
Message-ID: <BAY8-F50BoNcu3HDm4a000063a9@hotmail.com>

Hi,

Using gdalinfo.exe on a GeoSoft Grid eXchange File (.gxf) I get the right 
information except the projection information. The projection string is 
empty.

A check on the grid file shows that the file has a projection.

An additional check, now using the source code, shows that the code is 
expecting the projection information to be in one line. The used .gxf file 
have the projection information in three consecutif lines.

Probably this is the source of the problem.

The used gxf file would be available if requested.

Noureddine Farah

_________________________________________________________________
STOP MORE SPAM with the new MSN 8 and get 2 months FREE*   
http://join.msn.com/?page=features/junkmail


From warmerdam at pobox.com  Sat Sep 20 21:10:30 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Geosoft Grid eXchange Format and Projection support
In-Reply-To: <BAY8-F50BoNcu3HDm4a000063a9@hotmail.com>
References: <BAY8-F50BoNcu3HDm4a000063a9@hotmail.com>
Message-ID: <3F6CFA86.4010107@pobox.com>

N. Farah wrote:
> Hi,
> 
> Using gdalinfo.exe on a GeoSoft Grid eXchange File (.gxf) I get the 
> right information except the projection information. The projection 
> string is empty.
> 
> A check on the grid file shows that the file has a projection.
> 
> An additional check, now using the source code, shows that the code is 
> expecting the projection information to be in one line. The used .gxf 
> file have the projection information in three consecutif lines.
> 
> Probably this is the source of the problem.
> 
> The used gxf file would be available if requested.

Noureddine,

Yes, please create a bug report in bugzilla, and attach the file and I
will see what I can do.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From rec at geodesign.com.br  Sun Sep 21 16:15:42 2003
From: rec at geodesign.com.br (Reinaldo Escada Chohfi)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Color/Tone Balancing of Mosaic Tiles
Message-ID: <5.2.0.9.0.20030921171107.00a41400@200.218.161.5>

Gdal Users,

Does anyone happen to know if there is an open source
software/code/lib for doing color/tone balancing of several
images that would make up a mosaic (mosaic tiles)?

Any help is appreciated.  Thanks in advance.

Reinaldo.


From zhang at aero.und.edu  Sun Sep 21 21:09:12 2003
From: zhang at aero.und.edu (Xiaodong Zhang)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] image subsetting for arbitrary polygon
Message-ID: <3F6E4BB8.7080905@aero.und.edu>

Hi,

Does anybody know of an open source code for subsetting an image with an 
area of interest of arbitrary shape. I know GDAL utility offers one 
function for subsetting an image by a rectangle. Thanks

Xiaodong


From warmerdam at pobox.com  Mon Sep 22 01:44:52 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] s-57 to vrml elevation map?
In-Reply-To: <200309201831.h8KIVXQ28588@mailgate5.cinetic.de>
References: <200309201831.h8KIVXQ28588@mailgate5.cinetic.de>
Message-ID: <3F6E8C54.4040802@pobox.com>

Thorsten R?llich wrote:
> Hello,
> 
> I'm building a 3D model of a coastal area in Germany and try to use S-57 datasets as a source.
> First I used the program SeeMyDEnc from sevencs to open my datasets and it looked fine. By picking a position on the map, the program shows the primitive DEPARE (Depth Area Group) and the corresponding depth (DRVAL1 and DRVAL2).
> This seems to be enough information for modeling a (rough) topography.
> So I looked for a converter, that fits my needs... (Something, that converts S-57 to VRML elevation map would be ideal)
> What I found was the ogr library and the tools ogrinfo and ogr2ogr.
> So I will have to write the converter myself..
> The plan was to translate S-57 to GML (which is more human readable) using ogr2ogr and parse all Polygons that describe an Area and the corresponding depth. 
> The  translation to GML worked fine, but I could not find any depth information in the file. I tried it with many ogr2ogr options, but the 3rd dimension seems always to be lost.
> 
> Does anybody have an idea how to translate the topographic information from S-57 files to an elevation map, or how to extract the polygons and the depth of DEPARE fields?
> Very thankful for any hints on this. Kindest regards / Thorsten

Thorsten,

Based on your email I did a test conversion of some features types from
S-57 to GML and discovered some serious holes in my support for 3D GML and
GML "geometry collection" types of geometries.  I have committed patches
for that back to GDAL/OGR.  I think it may have been responsible for some
of your problems.

Now, for instance, the SOUNDG feature class comes through in GML as a
MultiPoint collection of 3D points.

However, for features classes like DEPARE, the elevation is only found in
the attributes.  In the case of DEPARE there are DRVAL1 and DRVAL2 attributes
which appear to be the minimum and maximum depth values in the area.

I don't know what language you were looking to implement the VRML writing
in, but if you want to do it in C, C++ or Python why not just use the
OGR API to read the objects and then concentrate on writing the VRML?

As far as I know (and I am unfortunately no expert) the S-57 data will just
have the depth areas with depth ranges over the whole polygon, and the sounding
point values.  I don't know the best way of turning this into some sort of
mesh or whatever you need in VRML.  Perhaps you would be best off just applying
a point interpolator to the soundings and ignoring the DEPAREs?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From schut at sarvision.com  Mon Sep 22 03:35:45 2003
From: schut at sarvision.com (Vincent Schut)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Color/Tone Balancing of Mosaic Tiles
In-Reply-To: <5.2.0.9.0.20030921171107.00a41400@200.218.161.5>
References: <5.2.0.9.0.20030921171107.00a41400@200.218.161.5>
Message-ID: <20030922073545.GA19773@lowresbox.lan>

Reinaldo,

I seem to remember that a package called 'ossim' would do something like that. Do a google and have a look if it is something to your liking.

Cheers,
Vincent.

On 17:15 Sun 21 Sep     , Reinaldo Escada Chohfi wrote:
> Gdal Users,
> 
> Does anyone happen to know if there is an open source
> software/code/lib for doing color/tone balancing of several
> images that would make up a mosaic (mosaic tiles)?
> 
> Any help is appreciated.  Thanks in advance.
> 
> Reinaldo.
> 
> _______________________________________________
> Gdal-dev mailing list
> Gdal-dev@remotesensing.org
> http://remotesensing.org/mailman/listinfo/gdal-dev

From jeanhri4 at ifrance.com  Mon Sep 22 04:24:07 2003
From: jeanhri4 at ifrance.com (Jean)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Evolution of OGRLayer ?
Message-ID: <200309220824.074a@th00.opsion.fr>

Here is a proposition for OGRLayer

There is two way to access a Feature with an OGRLayer
1 - A sequential access via GetNextFeature.
2 - A direct access via its FeatureID : GetFeature(long aFeatureID).

Some records provider (like ADO for example) bring another type of acess
: GetFeature(long aRecordPositionInCurrentQuery)

I believe that this very access might be sometimes intersting. 
Indeed let's imagine a Grid display, client of an OGRLayer. A grid does
not display the whole range of features but only some of them, from
record n to record n + d, where d is the record's number displays on
screen.

With the 1- feature access, the grid display algorithm could look like
this :

//Move to first Record
OGRLayer->ResetReading();
//Then, move to Record n.
For(long i(0); i < n; i++)
{
 //Note that GetNextFeature, iterate and Get the record data, 
 //wherease a simple iteration would have been enough (no Disk Access
but only a GetCursor from the Dataserver)
 OGRFeature::DestroyFeature(OGRLayer->GetNextFeature());
}
//Here we are
For(long i(n) ; i < n+d; i++)
{
 DoSomethingWith(OGRLayer->GetNextFeature());
}

With the 2- feature access, the grid has to map for each line displayed
its FeatureID (Line position/Feature ID). Indeed, there is no reason for
that Feature ID = Grid Line Position.
Because of this mapping, hhe grid becomes less generic.

So would you be interrested in a public method on OGRLayer to get
aFeature via its Query's position ?

if (OLCRandomRead) is available
OGRFeature* GetFeatureFromPosition(long aRecordPosition); 

Hoping my english is not that bad, 
Thanks in advance,

Jean.

_____________________________________________________________________
MSN Messenger, nouvelle version ! Personnalisez vos messages, jouez en
ligne et communiquez en temps r?el par vid?o! http://ifrance.com/_reloc/m



From dron at ak4719.spb.edu  Mon Sep 22 05:45:26 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] importing SRTM30
In-Reply-To: <EKEJIKAILPONGGENMBGAEELOEMAA.nhv@cape.com>
References: <20030920142554.GA21190@ak4719.spb.edu> <EKEJIKAILPONGGENMBGAEELOEMAA.nhv@cape.com>
Message-ID: <20030922094526.GA29952@ak4719.spb.edu>

On Sat, Sep 20, 2003 at 01:32:02PM -0400, Norman Vine wrote:
> > Also I have made a Python script to produce a shaded relief images
> > (algorithm was stealed from the corresponding PCI task). See that script
> > attached, those whop are using CVS tree can find it under /pymod/samples
> > directory. Script works not too fast, but it can be easily rewritten in C.
> 
> This should be a little quicker.

Norman,

I have commited your changes along with further improvements, so the
scripts now works with a rocket speed.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From warmerdam at pobox.com  Mon Sep 22 08:58:50 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Evolution of OGRLayer ?
In-Reply-To: <200309220824.074a@th00.opsion.fr>
References: <200309220824.074a@th00.opsion.fr>
Message-ID: <3F6EF20A.9040404@pobox.com>

Jean wrote:
> Here is a proposition for OGRLayer
> 
> There is two way to access a Feature with an OGRLayer
> 1 - A sequential access via GetNextFeature.
> 2 - A direct access via its FeatureID : GetFeature(long aFeatureID).
> 
> Some records provider (like ADO for example) bring another type of acess
> : GetFeature(long aRecordPositionInCurrentQuery)
...
> So would you be interrested in a public method on OGRLayer to get
> aFeature via its Query's position ?
> 
> if (OLCRandomRead) is available
> OGRFeature* GetFeatureFromPosition(long aRecordPosition); 

Jean,

I can see your point about why this would be desirable in some
circumstances.  However, it isn't so obvious to me that I could correctly
and efficiently implement such an operation on many of the existing formats
with a reasonable amount of effort.   I would add that it would be even
harder to implement this efficiently if the query is anything other than
"get the whole layer".

I would encourage you to file this as a feature request in bugzilla, but
for the time being I won't be acting on it.

I assume you are interested in implementing such a grid display/editing mode
for large layers where it would be impractical to hold them all in memory?
If the layers to be operated on are not too huge, my first suggestion would
be to load all features into a memory layer and then have the grid display
operate against that.  A "Memory" OGR driver was implemented a few months
ago specifically for high speed access for editing in interactive
applications.

If the layers are likely to be too large to load into RAM, some other
approach would be necessary.   Depending on the format, my suggestion
would be to either make one pass recording the feature id's for subsequent
direct feature requests (cost 4 bytes per feature of RAM, and one pass)
or to basically sequentually read through to the desired area for each
display update, likely keeping a substantial "window" of features in
RAM in the application to avoid having to re-read for refreshes, or small
moves through the result.

> Hoping my english is not that bad, 

Very understandable.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Sep 22 09:55:59 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] image subsetting for arbitrary polygon
In-Reply-To: <3F6E4BB8.7080905@aero.und.edu>
References: <3F6E4BB8.7080905@aero.und.edu>
Message-ID: <3F6EFF6F.2070409@pobox.com>

Xiaodong Zhang wrote:
> Hi,
> 
> Does anybody know of an open source code for subsetting an image with an 
> area of interest of arbitrary shape. I know GDAL utility offers one 
> function for subsetting an image by a rectangle. Thanks
> 
> Xiaodong

Hi,

I am not aware of any such utility.  By arbitrary I assume you mean produce
a rectangular output file, but mask all data outside some polygon or set of
polygons?

Such a thing could be implemented in python using the openev polygon
rasterization and GDAL builtins, but it wouldn't be exactly trivial. :-)

Best regards,


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From sylvain_duclos at yahoo.com  Mon Sep 22 10:26:05 2003
From: sylvain_duclos at yahoo.com (s duclos)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] s-57 to vrml elevation map?
In-Reply-To: <3F6E8C54.4040802@pobox.com>
Message-ID: <20030922142605.68114.qmail@web12507.mail.yahoo.com>

--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Thorsten Rllich wrote:
> > Hello,
> > 
> > I'm building a 3D model of a coastal area in
> Germany and try to use S-57 datasets as a source.
> > First I used the program SeeMyDEnc from sevencs to
> open my datasets and it looked fine. By picking a
> position on the map, the program shows the primitive
> DEPARE (Depth Area Group) and the corresponding
> depth (DRVAL1 and DRVAL2).
> > This seems to be enough information for modeling a
> (rough) topography.
> > So I looked for a converter, that fits my needs...
> (Something, that converts S-57 to VRML elevation map
> would be ideal)
> > What I found was the ogr library and the tools
> ogrinfo and ogr2ogr.
> > So I will have to write the converter myself..
> > The plan was to translate S-57 to GML (which is
> more human readable) using ogr2ogr and parse all
> Polygons that describe an Area and the corresponding
> depth. 
> > The  translation to GML worked fine, but I could
> not find any depth information in the file. I tried
> it with many ogr2ogr options, but the 3rd dimension
> seems always to be lost.
> > 
> > Does anybody have an idea how to translate the
> topographic information from S-57 files to an
> elevation map, or how to extract the polygons and
> the depth of DEPARE fields?
> > Very thankful for any hints on this. Kindest
> regards / Thorsten
> 
> Thorsten,
> 
> Based on your email I did a test conversion of some
> features types from
> S-57 to GML and discovered some serious holes in my
> support for 3D GML and
> GML "geometry collection" types of geometries.  I
> have committed patches
> for that back to GDAL/OGR.  I think it may have been
> responsible for some
> of your problems.
> 
> Now, for instance, the SOUNDG feature class comes
> through in GML as a
> MultiPoint collection of 3D points.
> 
> However, for features classes like DEPARE, the
> elevation is only found in
> the attributes.  In the case of DEPARE there are
> DRVAL1 and DRVAL2 attributes
> which appear to be the minimum and maximum depth
> values in the area.
> 
> I don't know what language you were looking to
> implement the VRML writing
> in, but if you want to do it in C, C++ or Python why
> not just use the
> OGR API to read the objects and then concentrate on
> writing the VRML?
> 
> As far as I know (and I am unfortunately no expert)
> the S-57 data will just
> have the depth areas with depth ranges over the
> whole polygon, and the sounding
> point values.  I don't know the best way of turning
> this into some sort of
> mesh or whatever you need in VRML.  Perhaps you
> would be best off just applying
> a point interpolator to the soundings and ignoring
> the DEPAREs?

Hi,

I would like to add to Frank that DEPARE are used
for geometric primitives AREA and LINE. The latter are
in fact isobath.

You can check at www.s-57.com the catalog of object
class and attribute. For example the attribute DRVAL1
is used in 16 objects (DEPARE been one of them.)


Hope this help,

Sylvain.

__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com

From warmerdam at pobox.com  Mon Sep 22 11:09:49 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GXF and Imagine Fixes
Message-ID: <3F6F10BD.1090404@pobox.com>

Folks,

I have fixed the bug in GXF projections that N. Farah reported.  In doing
so I found a very serious bug in the GXF low level code with images that
are taller than they are wide ... basically memory corruption is likely.
Anyone depending on the GDAL GXF support should look at incorporating this
fix for a long standing bug (in gxfopen.c).  The projection bug was also
fixed but was unrelated.

The second issue is that I discovered I botched hfaband.cpp a few weeks
ago when incorporating better error reporting.  Basically, Erdas Imagine
(HFA) support has been completely broken since September 10th.

While bugs are going into GDAL and being fixed on a regular basis, I will
try to warn of serious ones I discover.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From dron at ak4719.spb.edu  Mon Sep 22 10:06:06 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] image subsetting for arbitrary polygon
In-Reply-To: <3F6E4BB8.7080905@aero.und.edu>
References: <3F6E4BB8.7080905@aero.und.edu>
Message-ID: <20030922140606.GA26687@ak4719.spb.edu>

On Sun, Sep 21, 2003 at 08:09:12PM -0500, Xiaodong Zhang wrote:
> Does anybody know of an open source code for subsetting an image with
> an area of interest of arbitrary shape. I know GDAL utility offers one
> function for subsetting an image by a rectangle. Thanks

It depends on how do you want to specify a region. You can split this
task in to parts:
 - subset input image with rectangular ROI;
 - apply an arbitrary shaped mask to the result.

Mask may be prepared with your region parameters: by rasterizing a
vector map or by converting from a raster.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From g.leej at imyourhandiman.com  Mon Sep 22 07:46:38 2003
From: g.leej at imyourhandiman.com (Gaillard Lee Johnson)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] wont 'make'
Message-ID: <1064231198.19966.5.camel@Handimanstation1>

Hi all..

   normally this just compiles but with 119 i'm getting this:
-------( thx for help anyone..) ;-0)
make[2]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts/bmp'

make[2]: Entering directory `/home/neighborlee/gdal-1.1.9/frmts/gif'
g++ -c  -I../.. -I../../port -I../../gcore -I../../ogr -Wall -fPIC -O2  
gifdataset.cpp -o gifdataset.o
gifdataset.cpp: In constructor
`GIFRasterBand::GIFRasterBand(GIFDataset*, int,
   SavedImage*)':
gifdataset.cpp:202: error: 'struct ExtensionBlock' has no member named '
   Function'
make[2]: *** [gifdataset.o] Error 1
make[2]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts/gif'
make[1]: *** [sub-libs] Error 1
make[1]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts'
make: *** [frmts-target] Error 2



From nfarah at hotmail.com  Mon Sep 22 16:05:03 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GXF and Minimum and Maximum support
Message-ID: <BAY8-F117CHusMjQHtM0000081f@hotmail.com>

Hi,

Thanks Frank for fixing so quickly the projection issue with GXF. More 
important than was i guess the memory leak.

I have another point that I would like to rise. My understanding of a GDAL 
band regarding minimum and maximum value is: if that band is aware of the 
minimum and maximum values, it should basicaly implement/override the get 
methods (GetMinimum(...) and GetMaximum(...)).

As GXF seems to be one band only (not sure though), probably the min and max 
of the band could be implemented and the data fetched direclty from the 
GXFHandle (as thet are already loaded).

Best Regards,

Noureddine Farah

_________________________________________________________________
STOP MORE SPAM with the new MSN 8 and get 2 months FREE*   
http://join.msn.com/?page=features/junkmail


From nfarah at hotmail.com  Mon Sep 22 17:30:30 2003
From: nfarah at hotmail.com (N. Farah)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: GXF and Minimum and Maximum support
Message-ID: <BAY8-F90bSzxdWGHpPn0000bc6f@hotmail.com>

Hi,

I did made the changes on my local file (gxfdataset.cpp) to implement min 
and max functions. I tested the two methods and they are working fine 
(returning the right values).

Just a very tiny contribution:

// Class definition
class GXFRasterBand : public GDALRasterBand
{
.........................................
	virtual double  GetMinimum (int *pbSuccess);
	virtual double  GetMaximum (int *pbSuccess);
};

// Class implementation
double GXFRasterBand::GetMinimum (int *pbSuccess)
{
    GXFDataset	*poODS = (GXFDataset *) poDS;
    GXFInfo_t *gxfInfo = (GXFInfo_t *) poODS->hGXF;

    if( pbSuccess != NULL )
        *pbSuccess = TRUE;

    return gxfInfo->dfZMinimum;
}

double GXFRasterBand::GetMaximum (int *pbSuccess)
{
    GXFDataset	*poODS = (GXFDataset *) poDS;
    GXFInfo_t *gxfInfo = (GXFInfo_t *) poODS->hGXF;

    if( pbSuccess != NULL )
        *pbSuccess = TRUE;

    return gxfInfo->dfZMaximum;
}

_________________________________________________________________
Help STOP SPAM with the new MSN 8 and get 2 months FREE*   
http://join.msn.com/?page=features/junkmail


From roellich at web.de  Tue Sep 23 07:58:37 2003
From: roellich at web.de (=?iso-8859-1?Q? Thorsten=20R=F6llich ?=)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] s-57 to vrml elevation map?
Message-ID: <200309231158.h8NBwbQ02737@mailgate5.cinetic.de>


gdal-dev@remotesensing.org schrieb am 22.09.03 16:28:43:


--- Frank Warmerdam <warmerdam@pobox.com> wrote:
> Thorsten R?llich wrote:
> > Hello,
> > 
> > I'm building a 3D model of a coastal area in
> Germany and try to use S-57 datasets as a source.
> > First I used the program SeeMyDEnc from sevencs to
> open my datasets and it looked fine. By picking a
> position on the map, the program shows the primitive
> DEPARE (Depth Area Group) and the corresponding
> depth (DRVAL1 and DRVAL2).
> > This seems to be enough information for modeling a
> (rough) topography.
> > So I looked for a converter, that fits my needs...
> (Something, that converts S-57 to VRML elevation map
> would be ideal)
> > What I found was the ogr library and the tools
> ogrinfo and ogr2ogr.
> > So I will have to write the converter myself..
> > The plan was to translate S-57 to GML (which is
> more human readable) using ogr2ogr and parse all
> Polygons that describe an Area and the corresponding
> depth. 
> > The translation to GML worked fine, but I could
> not find any depth information in the file. I tried
> it with many ogr2ogr options, but the 3rd dimension
> seems always to be lost.
> > 
> > Does anybody have an idea how to translate the
> topographic information from S-57 files to an
> elevation map, or how to extract the polygons and
> the depth of DEPARE fields?
> > Very thankful for any hints on this. Kindest
> regards / Thorsten
> 
> Thorsten,
> 
> Based on your email I did a test conversion of some
> features types from
> S-57 to GML and discovered some serious holes in my
> support for 3D GML and
> GML "geometry collection" types of geometries. I
> have committed patches
> for that back to GDAL/OGR. I think it may have been
> responsible for some
> of your problems.
> 
> Now, for instance, the SOUNDG feature class comes
> through in GML as a
> MultiPoint collection of 3D points.
> 
> However, for features classes like DEPARE, the
> elevation is only found in
> the attributes. In the case of DEPARE there are
> DRVAL1 and DRVAL2 attributes
> which appear to be the minimum and maximum depth
> values in the area.
> 
> I don't know what language you were looking to
> implement the VRML writing
> in, but if you want to do it in C, C++ or Python why
> not just use the
> OGR API to read the objects and then concentrate on
> writing the VRML?
> 
> As far as I know (and I am unfortunately no expert)
> the S-57 data will just
> have the depth areas with depth ranges over the
> whole polygon, and the sounding
> point values. I don't know the best way of turning
> this into some sort of
> mesh or whatever you need in VRML. Perhaps you
> would be best off just applying
> a point interpolator to the soundings and ignoring
> the DEPAREs?

Hi,

I would like to add to Frank that DEPARE are used
for geometric primitives AREA and LINE. The latter are
in fact isobath.

You can check at www.s-57.com the catalog of object
class and attribute. For example the attribute DRVAL1
is used in 16 objects (DEPARE been one of them.)


Hope this help,

Sylvain.

__________________________________
Do you Yahoo!?
Yahoo! SiteBuilder - Free, easy-to-use web site design software
http://sitebuilder.yahoo.com
_______________________________________________
Gdal-dev mailing list
Gdal-dev@remotesensing.org
http://remotesensing.org/mailman/listinfo/gdal-dev


Thank You, Frank and Sylvain, for your immediate response.
It's working!
I'm using the multipoints from SOUNDG for water areas,
and  the lines from LNDELV (land elevation) and COALNE (coastline) plus their appropriate elevation for land areas.
Then I use an interpolator for all the points, as Frank proposed.
Thorsten



______________________________________________________________________________
Zwei Mal Platz 1 mit dem jeweils besten Testergebnis! WEB.DE FreeMail
und WEB.DE Club bei Stiftung Warentest! http://f.web.de/?mc=021183


From Brian.Mcdonald at ca.com  Tue Sep 23 13:15:59 2003
From: Brian.Mcdonald at ca.com (McDonald, Brian J)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] BIL / BIP
Message-ID: <039E46C3C030AE4E871CEEBC6868063902EDF0D8@usilms24.ca.com>

Hi there,

BIL
BIP

Does GDAL support these formats?  I don't see them in the list of supported formats, but maybe they are masquerading under another name?

thanks

brian

Brian McDonald
brian.mcdonald@ca.com

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030923/d4d7af04/attachment.html
From warmerdam at pobox.com  Tue Sep 23 14:16:12 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] BIL / BIP
In-Reply-To: <039E46C3C030AE4E871CEEBC6868063902EDF0D8@usilms24.ca.com>
References: <039E46C3C030AE4E871CEEBC6868063902EDF0D8@usilms24.ca.com>
Message-ID: <3F708DEC.9050405@pobox.com>

McDonald, Brian J wrote:
> Hi there,
> 
> BIL
> BIP
> 
> Does GDAL support these formats?  I don't see them in the list of 
> supported formats, but maybe they are masquerading under another name?

Brian,

I assume you mean BIL and BIP files with ESRI .hdr files associated?  Or
user described?   It is my general intention to upgrade the ESRI .hdr labelled
"BIL" to support BSQ, BIL and BIP if/when I have examples of them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From heitzso at growthmodels.com  Tue Sep 23 16:58:55 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
Message-ID: <3F70B40F.7020304@growthmodels.com>

First, I want to thank the ogr2ogr author for writing
a tool to digest the tiger files into postgis tables.

I downloaded all GA counties from census site for
tiger 2000 108th congressional district release
(I believe current official release) and crunched
through most of the ogr2ogr features supported.
The following record-type/files and record #
errors were noted by ogr2ogr:

  RECORD TYPE
      RECORD NUMBER
            COUNTY
  RT2  6194 -021
       2941 -023
       4223 -049
      12540 -139
       1805 -201
       7148 -223
  RT5  1013 -001
  RTS  3509 -001
  RT2    40 -001
  RTI 10106 -001

What should I do to correct these?  I'm assuming
the census tiger data files are dirty, but don't
know that.  If it would be of help I could extract
the relevant records noted above and email them
to a developer.

Assuming the census data files are dirty, should
we create a small set of patch files that can
be run against the directory of *RT? files to clean
them up?  Just a thought.

The features I processed into postgis tables:
	("CompleteChain", True),
	("AltName", False),
	("FeatureIds", False),
	("ZipCodes", False),
	("Landmarks", True),
	("AreaLandmarks", False),
	("KeyFeatures", False),
	("Polygon", True),
	("EntityNames", False),
	("IDHistory", False),
	("PolyChainLink", False),
	("PIP", True)
	]

featuresNotProcessed = [
	("ZipPlus4", False)

(note the second parameter controlled whether
a geometry index was created by my crunching script)




Thanks,
Heitzso


From warmerdam at pobox.com  Wed Sep 24 10:14:46 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <3F70B40F.7020304@growthmodels.com>
References: <3F70B40F.7020304@growthmodels.com>
Message-ID: <3F71A6D6.2030407@pobox.com>

Heitzso wrote:
> First, I want to thank the ogr2ogr author for writing
> a tool to digest the tiger files into postgis tables.
> 
> I downloaded all GA counties from census site for
> tiger 2000 108th congressional district release
> (I believe current official release) and crunched
> through most of the ogr2ogr features supported.
> The following record-type/files and record #
> errors were noted by ogr2ogr:
> 
>  RECORD TYPE
>      RECORD NUMBER
>            COUNTY
>  RT2  6194 -021
>       2941 -023
>       4223 -049
>      12540 -139
>       1805 -201
>       7148 -223
>  RT5  1013 -001
>  RTS  3509 -001
>  RT2    40 -001
>  RTI 10106 -001
> 
> What should I do to correct these?  I'm assuming
> the census tiger data files are dirty, but don't
> know that.  If it would be of help I could extract
> the relevant records noted above and email them
> to a developer.
...

Heitzso,

What were the errors you encountered?  Can you give me the direct url to
one of the datasets that had problems (and the layer causing it)?  Does
the problem occur even if converting to Shapefile, or just when converting
to PostGIS?

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Wed Sep 24 11:05:27 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL/GML Xerces Build Problems on Unix
In-Reply-To: <sf7025fb.080@co5.dnr.state.mn.us>
References: <sf7025fb.080@co5.dnr.state.mn.us>
Message-ID: <3F71B2B7.2030506@pobox.com>

Steve Lime wrote:
> Xerces is in /usr/local. Here's what I get from configure:
> 
> checking for Xerces C++... requested, but compile or link fails!
> 
> g++ -I/usr/local/include/xercesc -DHAVE_JASPER_UUID -o conftest
> conftest.cpp -L/usr/local/lib -lxerces-c -lpthread -ljasper -lgif -ljpeg
> -lpng -lz -lm -ldl
> 
> conftest.cpp: In function `int main ()':
> conftest.cpp:2: `XMLPlatformUtils' undeclared (first use this
> function)
> conftest.cpp:2: (Each undeclared identifier is reported only once for 
> each function it appears in.)
> conftest.cpp:2: parse error before `::'
> 
> configure: error: Please correct Xerces options, or don't enable
> Xerces.


Steve,

I owe you and a number of other frustrated builders an apology.  It seems
now that the only place I fixed up support for more recent Xerces libraries
was on windows.  The Unix configure script still had a bunch of stuff that
could only work with Xerces 1.6.  Whats worse is I told everyone (like you)
who ran into problems that I had done it, and they must have just not
installed something properly.

Anyways, I have finally stripped all remenants of 1.6 off my system and fixed
the GDAL configure scripts to work more generally.  The actual driver code
was already fine from my having gotten things working on Windows.

Everything is now checked back into CVS and should be in tomorrows snapshot.

Once again sorry for everyone who has been pulling out their hair.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From heitzso at growthmodels.com  Wed Sep 24 12:21:19 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] A Proposal and Request for Comments
Message-ID: <3F71C47F.2090503@growthmodels.com>

My primary interests in sending out this email ...

- Is anyone interested in working together to
   build a set of open source linux/bash/python scripts
   to auto-download and crunch census sf1/sf3/tiger
   data into ready-to-map digested postgis tables along
   with appropriate indexes?

- (begin advertisement)
   I offered to setup Georgia's 2000 SF1/SF3/Tiger
   data (complete, full granularity) in postgis/mapserver
   for $25,000 based on a javascript/mapscript front end
   that I would write. Or 1990 and 2000 data and providing
   both simple linear growth rate projections and age cohort
   component projections with pop pyrmaids, etc. for $75,000.
   Georgia is not buying because they're at the tail end of
   a $1M+ ESRI system.
   Is anyone interested in such a system or a subset thereof?
   (end of advertisement)

==========================================================

What follows is focused on the United States,
though may be applicable in other countries:

I believe that due to the economies of scale a commercial
interest will eventually provide a google/mapquest style gis site
for the commodity U.S. Census SF1, SF3, and Tiger data.
This site will:

- be very fast (think google) for interactive data mining

- population/race/ethnicity/age data at finest grained level,
   i.e. down to census block, along with all other granularities
   and geo boundaries supported

- all economic and housing data, i.e. _ALL_ SF1/SF3 data

- drill down to population pyramid charts or numeric data tables

- support logon/save/restore session state which allows
   someone to develop a presentation over several
   days using a consistent image size and registration

- support private data access via the same logon mechanism

- support all map image sizes up to 4' by 4'

- include older decennial data, i.e. 1980, 1990

- generate growth rates for map or drill down display

- provide simple linear total pop projections (actually
   statistically one of the more accurate techniques
   for total pop projections, though insufficient
   for planning purposes)

- provide full age cohort-component pop projections at
   sub-county level for individual ethnicity/race groups based on
   '90/'00 SF1 data and mortality/natality tables; and
   present via maps, line charts, pop pyramids or drill
   down to numeric tables

This site will be funded through a combination of:

- Discrete advertising since every government agency planner
   will use this site along with residential and commercial
   developers, banks, and corporations.

- Service fees for mounting private corporate data and granting
   access to this private data via login mechanism.  Using this
   mechanism a corporation can get their data mounted for a
   small fraction of the cost of setting up the equivalent
   capability in house.

Thoughts?

==============================================================

Filling in some blanks ...

I left the CDC last February and am casting around for
either employment or a business model for a product. While
at the CDC's Information Technology Branch I worked on
several projects and am familiar with the problem of complex
data mining user interfaces, sql optimization, etc.

Mid summer, while working with Mapserver/Postgis and some GA
Census block data I had this vision  :)  ... and approached
the State of Georgia with the offer to mount all of 2000
SF1, SF3, and Tiger data using Mapserver/Postgis on one of
their servers for $25,000.  I planned on spending roughly
$7,000 out of that $25,000 on my own server and on making my
investment back by selling the same setup to 4 or 5 states.
By which time it should be possible to pick up even more
states and turn a profit.  The fantasy went further, that
I would return later and pick up another $20K or so for
1990 data, some more for linking the two together with the
Census relationship files and providing the growth rates, etc.

The spoiler is the State of Georgia has already invested
5 years and over $1M on an ESRI solution.  While what I
offered was more value for less money than they will spend
to bring their current project to a close, having made that
major time and money commitment they are not in a position
to change their direction.  I may yet crunch a SF1 1990/2000
subset into SQL and write the age cohort component pop
projection for sub-county areas backend as a web service for
them.  That's still on the table for negotiation.

Let's review the economies of scale that make this work.
Once the user interface and backend structure is setup,
the incremental cost to add a state is, roughly:
- one week to purchase and setup additional hardware (hardware time)
- one week to download/crunch/tune/QA data (db time)
- one week to add or upgrade a user interface feature (code time)
- one week client management time
I estimate a good small two person team could crank it out in one
man month with $7,000 going into hardware and network fees.



Heitzso
GrowthModels
MetaMedia, Inc.


From steve.lime at dnr.state.mn.us  Wed Sep 24 11:30:06 2003
From: steve.lime at dnr.state.mn.us (Steve Lime)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: GDAL/GML Xerces Build Problems on Unix
Message-ID: <sf71724a.075@co5.dnr.state.mn.us>

Don't sweat it, no problem at all. I tend to give up easily. ;-)

I'll try again today from CVS and let you know if I run into
problems...

Steve

>>> Frank Warmerdam <warmerdam@pobox.com> 09/24/03 10:05AM >>>
Steve Lime wrote:
> Xerces is in /usr/local. Here's what I get from configure:
> 
> checking for Xerces C++... requested, but compile or link fails!
> 
> g++ -I/usr/local/include/xercesc -DHAVE_JASPER_UUID -o conftest
> conftest.cpp -L/usr/local/lib -lxerces-c -lpthread -ljasper -lgif
-ljpeg
> -lpng -lz -lm -ldl
> 
> conftest.cpp: In function `int main ()':
> conftest.cpp:2: `XMLPlatformUtils' undeclared (first use this
> function)
> conftest.cpp:2: (Each undeclared identifier is reported only once for

> each function it appears in.)
> conftest.cpp:2: parse error before `::'
> 
> configure: error: Please correct Xerces options, or don't enable
> Xerces.


Steve,

I owe you and a number of other frustrated builders an apology.  It
seems
now that the only place I fixed up support for more recent Xerces
libraries
was on windows.  The Unix configure script still had a bunch of stuff
that
could only work with Xerces 1.6.  Whats worse is I told everyone (like
you)
who ran into problems that I had done it, and they must have just not
installed something properly.

Anyways, I have finally stripped all remenants of 1.6 off my system and
fixed
the GDAL configure scripts to work more generally.  The actual driver
code
was already fine from my having gotten things working on Windows.

Everything is now checked back into CVS and should be in tomorrows
snapshot.

Once again sorry for everyone who has been pulling out their hair.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam@pobox.com 
light and sound - activate the windows | http://pobox.com/~warmerdam 
and watch the world go round - Rush    | Geospatial Programmer for
Rent



From heitzso at growthmodels.com  Wed Sep 24 12:58:47 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <3F71A6D6.2030407@pobox.com>
References: <3F70B40F.7020304@growthmodels.com> <3F71A6D6.2030407@pobox.com>
Message-ID: <3F71CD47.4060603@growthmodels.com>

Frank Warmerdam wrote:
>>
>>  RECORD TYPE
>>      RECORD NUMBER
>>            COUNTY
>>  RT2  6194 -021
>>       2941 -023
>>       4223 -049
>>      12540 -139
>>       1805 -201
>>       7148 -223
>>  RT5  1013 -001
>>  RTS  3509 -001
>>  RT2    40 -001
>>  RTI 10106 -001
>>
> 
> What were the errors you encountered?  Can you give me the direct url to
> one of the datasets that had problems (and the layer causing it)?  Does
> the problem occur even if converting to Shapefile, or just when converting
> to PostGIS?
> 

The files came from census 2000 108th congressional district tiger files
for Georgia and are found at
	ftp://ftp2.census.gov/geo/tiger/tgrcd108/GA
as tgr13___.zip files.  So, from my short table above, the
county '-001' files came from tgr13001.zip.

I didn't try to convert the data into shape files, only directly
into postgis tables.  I'll try now. (pause)

   $ ogr2ogr -f 'ESRI Shapefile' shape tiger FeatureIds
   ERROR 3: Failed to read record 1013 of TGR13001.RT5

In the directory 'tiger' I placed the unpacked tiger
files for 13001 (Georgia, county 001) and ran the above
command.   This corresponds to one of the above error
messages.

Extracting records around 1013 from RT5:
513001    1007  Hamp Cray                     Ln
513001    1008  Solomon                       Trl
513001    1009  Varn Adore                    Ln
513001    1010  Ogden Bk
513001    1011  Griffis                       Rd
513001    1012  Dasher                        Rd
513001    1013  Over                          St
513001    1014  Chad Claxton                  St

This is the first time I've tried to go digging for the
problem.  Using scite's ability to display white space
and end of line I looked at these records and cannot
see anything unusual about record # 1013.

I'm stopping at this point, though will, if requested,
go through all of the supported layers.

Let me know what else you want me to do to help.


Heitzso


From mbp at geomtech.com  Wed Sep 24 13:54:51 2003
From: mbp at geomtech.com (Mark Phillips)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <3F71CD47.4060603@growthmodels.com> (message from Heitzso on Wed,
	24 Sep 2003 12:58:47 -0400)
References: <3F70B40F.7020304@growthmodels.com> <3F71A6D6.2030407@pobox.com> <3F71CD47.4060603@growthmodels.com>
Message-ID: <200309241754.h8OHsp212166@intuition.geomtech.com>

Hi,

I'm the author of the OGR/Tiger driver and I tried this with my copy
(I downloaded tgr13001.zip) and didn't get this error.  Are you using
the latest version of GDAL/OGR?

--Mark

Mark Phillips @ Geometry Technologies LLC
P.O. Box 1170, Black Mountain, NC  28711
Phone: 828-664-1748
mbp@geomtech.com       http://www.geomtech.com


> The files came from census 2000 108th congressional district tiger files
> for Georgia and are found at
> 	ftp://ftp2.census.gov/geo/tiger/tgrcd108/GA
> as tgr13___.zip files.  So, from my short table above, the
> county '-001' files came from tgr13001.zip.
> 
> I didn't try to convert the data into shape files, only directly
> into postgis tables.  I'll try now. (pause)
> 
>    $ ogr2ogr -f 'ESRI Shapefile' shape tiger FeatureIds
>    ERROR 3: Failed to read record 1013 of TGR13001.RT5
> ...

From warmerdam at pobox.com  Wed Sep 24 14:05:39 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <3F71CD47.4060603@growthmodels.com>
References: <3F70B40F.7020304@growthmodels.com> <3F71A6D6.2030407@pobox.com> <3F71CD47.4060603@growthmodels.com>
Message-ID: <3F71DCF3.30500@pobox.com>

Heitzso wrote:
> The files came from census 2000 108th congressional district tiger files
> for Georgia and are found at
>     ftp://ftp2.census.gov/geo/tiger/tgrcd108/GA
> as tgr13___.zip files.  So, from my short table above, the
> county '-001' files came from tgr13001.zip.

Heitzso,

The files in question have a version code of 1002 (October 2002) on the
basis of which I classify them as being in Tiger 2002 format.  Unfortunately,
as you suggest, they are in fact in Tiger 2000 format and so things fail
quite dramatically for some kinds of features, such as the FeatureIds,
where the format differs in substantial ways.

I am not exactly sure what to do about this.  There are definately 2002 files
produced in this version range so I am wondering if it is practical to
determine the version only on the basis of the version code.  It may end up
that I need to inspect the RT5 record length or other similar "hacks" to
determine the correct version code.  Yuck.

I have created a bug report, please feel free to add yourself to the cc:
list.

   http://bugzilla.remotesensing.org/show_bug.cgi?id=400

I will discuss this with Mark Phillips and see if he has any advice.  He did
much of the recent work on OGR's TIGER/Line translator.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From heitzso at growthmodels.com  Wed Sep 24 15:14:50 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <200309241754.h8OHsp212166@intuition.geomtech.com>
References: <3F70B40F.7020304@growthmodels.com> <3F71A6D6.2030407@pobox.com> <3F71CD47.4060603@growthmodels.com> <200309241754.h8OHsp212166@intuition.geomtech.com>
Message-ID: <3F71ED2A.3000903@growthmodels.com>

Hi Mark,

I'm working with gdal 1.1.9.

Should I retry with a cvs or other, perhaps more recent,
flavor?

Let me know if there's a particular command option
to run to display version info.


-- Heitzso



> Hi,
> 
> I'm the author of the OGR/Tiger driver and I tried this with my copy
> (I downloaded tgr13001.zip) and didn't get this error.  Are you using
> the latest version of GDAL/OGR?
> 
> --Mark
> 
>>The files came from census 2000 108th congressional district tiger files
>>for Georgia and are found at
>>	ftp://ftp2.census.gov/geo/tiger/tgrcd108/GA
>>as tgr13___.zip files.  So, from my short table above, the
>>county '-001' files came from tgr13001.zip.
>>
>>I didn't try to convert the data into shape files, only directly
>>into postgis tables.  I'll try now. (pause)
>>
>>   $ ogr2ogr -f 'ESRI Shapefile' shape tiger FeatureIds
>>   ERROR 3: Failed to read record 1013 of TGR13001.RT5



From heitzso at growthmodels.com  Wed Sep 24 15:19:08 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: [postgis-users] A Proposal and Request for Comments
In-Reply-To: <v63cemvz9j.fsf@kechara.flame.org>
References: <3F71C47F.2090503@growthmodels.com> <v63cemvz9j.fsf@kechara.flame.org>
Message-ID: <3F71EE2C.5050705@growthmodels.com>

No problem re unix/sh versus linux/bash.

When the dust settles re folks interested we
can sort out a communication structure.

Thanks,
Heitzso

> Heitzso <heitzso@growthmodels.com> writes:
> 
> 
>>My primary interests in sending out this email ...
>>
>>- Is anyone interested in working together to
>>   build a set of open source linux/bash/python scripts
>>   to auto-download and crunch census sf1/sf3/tiger
>>   data into ready-to-map digested postgis tables along
>>   with appropriate indexes?
> 
> 
> I'd love to see that happen, but please change "linux" into "unix" and
> "bash" into "sh" and we'll get along fine.
> 
> --Michael


From heitzso at growthmodels.com  Wed Sep 24 16:40:15 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <3F71ED2A.3000903@growthmodels.com>
References: <3F70B40F.7020304@growthmodels.com> <3F71A6D6.2030407@pobox.com> <3F71CD47.4060603@growthmodels.com> <200309241754.h8OHsp212166@intuition.geomtech.com> <3F71ED2A.3000903@growthmodels.com>
Message-ID: <3F72012F.5090208@growthmodels.com>

I'm trying to compile gdal from cvs on my debian unstable
system in order to test the tiger file format problem
in ogr2ogr and ...

The make is breaking with undefined references.
What follows is tail end of error sequence.

../libgdal.1.1.so: undefined reference to `OGRLineString::setPoint(int, 
double, double, double)'
../libgdal.1.1.so: undefined reference to 
`GDALColorTable::~GDALColorTable(void)'
../libgdal.1.1.so: undefined reference to `GDALDataset::GetGCPCount(void)'
../libgdal.1.1.so: undefined reference to 
`OGRSpatialReference::SetEckertVI(double, double, double)'
../libgdal.1.1.so: undefined reference to 
`OGRSpatialReference::SetCS(double, double, double, double)'
../libgdal.1.1.so: undefined reference to 
`OGRSpatialReference::SetProjCS(char const *)'
../libgdal.1.1.so: undefined reference to `GDALDataset::Dereference(void)'
../libgdal.1.1.so: undefined reference to 
`OGRSpatialReference::importFromPCI(char const *, char const *, double *)'
../libgdal.1.1.so: undefined reference to 
`OGRSpatialReference::SetNode(char const *, char const *)'
../libgdal.1.1.so: undefined reference to 
`OGRSpatialReference::Clone(void) const'
collect2: ld returned 1 exit status

I've tried with and without the '--with-gnu-ld'
option to configure.

Mark -- what version of ogr2ogr are you using that's
not balking on the conversion of tiger files?

Heitzso

Heitzso wrote:
> Hi Mark,
> 
> I'm working with gdal 1.1.9.
> 
> Should I retry with a cvs or other, perhaps more recent,
> flavor?
> 
> Let me know if there's a particular command option
> to run to display version info.
> 
> 
> -- Heitzso




From heitzso at growthmodels.com  Wed Sep 24 16:44:52 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] census 2000 tiger 108th org2ogr errors
In-Reply-To: <3F71DCF3.30500@pobox.com>
References: <3F70B40F.7020304@growthmodels.com> <3F71A6D6.2030407@pobox.com> <3F71CD47.4060603@growthmodels.com> <3F71DCF3.30500@pobox.com>
Message-ID: <3F720244.9040200@growthmodels.com>

Because the large majority of the data records
were read in without an error message being thrown
I assumed the code was picking up the format okay.

I haven't actually started to work with the postgis
tables generated so cannot say for certain that
the data was loaded into them correctly.

Let me know if there's anything I can do to help.


Heitzso


Frank Warmerdam wrote:
> Heitzso wrote:
> 
>> The files came from census 2000 108th congressional district tiger files
>> for Georgia and are found at
>>     ftp://ftp2.census.gov/geo/tiger/tgrcd108/GA
>> as tgr13___.zip files.  So, from my short table above, the
>> county '-001' files came from tgr13001.zip.
> 
> 
> Heitzso,
> 
> The files in question have a version code of 1002 (October 2002) on the
> basis of which I classify them as being in Tiger 2002 format.  
> Unfortunately,
> as you suggest, they are in fact in Tiger 2000 format and so things fail
> quite dramatically for some kinds of features, such as the FeatureIds,
> where the format differs in substantial ways.
> 
> I am not exactly sure what to do about this.  There are definately 2002 
> files
> produced in this version range so I am wondering if it is practical to
> determine the version only on the basis of the version code.  It may end up
> that I need to inspect the RT5 record length or other similar "hacks" to
> determine the correct version code.  Yuck.
> 
> I have created a bug report, please feel free to add yourself to the cc:
> list.
> 
>   http://bugzilla.remotesensing.org/show_bug.cgi?id=400
> 
> I will discuss this with Mark Phillips and see if he has any advice.  He 
> did
> much of the recent work on OGR's TIGER/Line translator.
> 
> Best regards,
> 



From g.leej at imyourhandiman.com  Wed Sep 24 12:07:46 2003
From: g.leej at imyourhandiman.com (g.leej)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] bad make in linux
Message-ID: <3F71C152.6020307@imyourhandiman.com>

hi..

   I'm unable to compile here in debian unstable with the following 
error output and thx for any assistance you can provide:
---------
make[2]: Entering directory `/home/neighborlee/gdal-1.1.9/frmts/bmp'
make[2]: Nothing to be done for `install-obj'.
make[2]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts/bmp'

make[2]: Entering directory `/home/neighborlee/gdal-1.1.9/frmts/gif'
g++ -c  -I../.. -I../../port -I../../gcore -I../../ogr -Wall -fPIC -O2   
gifdataset.cpp -o gifdataset.o
gifdataset.cpp: In constructor 
`GIFRasterBand::GIFRasterBand(GIFDataset*, int,
   SavedImage*)':
gifdataset.cpp:202: error: 'struct ExtensionBlock' has no member named '
   Function'
make[2]: *** [gifdataset.o] Error 1
make[2]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts/gif'
make[1]: *** [sub-libs] Error 1
make[1]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts'
make: *** [frmts-target] Error 2
neighborlee@Handimanstation1:~/gdal-1.1.9$



From warmerdam at pobox.com  Wed Sep 24 21:36:09 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] bad make in linux
In-Reply-To: <3F71C152.6020307@imyourhandiman.com>
References: <3F71C152.6020307@imyourhandiman.com>
Message-ID: <3F724689.7040609@pobox.com>

g.leej wrote:
> hi..
> 
>   I'm unable to compile here in debian unstable with the following error 
> output and thx for any assistance you can provide:
> ---------
> make[2]: Entering directory `/home/neighborlee/gdal-1.1.9/frmts/bmp'
> make[2]: Nothing to be done for `install-obj'.
> make[2]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts/bmp'
> 
> make[2]: Entering directory `/home/neighborlee/gdal-1.1.9/frmts/gif'
> g++ -c  -I../.. -I../../port -I../../gcore -I../../ogr -Wall -fPIC -O2   
> gifdataset.cpp -o gifdataset.o
> gifdataset.cpp: In constructor 
> `GIFRasterBand::GIFRasterBand(GIFDataset*, int,
>   SavedImage*)':
> gifdataset.cpp:202: error: 'struct ExtensionBlock' has no member named '
>   Function'
> make[2]: *** [gifdataset.o] Error 1
> make[2]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts/gif'
> make[1]: *** [sub-libs] Error 1
> make[1]: Leaving directory `/home/neighborlee/gdal-1.1.9/frmts'
> make: *** [frmts-target] Error 2
> neighborlee@Handimanstation1:~/gdal-1.1.9$

Hi,

It would appear you have an incompatible version of libungif on
your system somehow.  I would suggest re-configuring with
--with-gif=internal or --without-gif.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gillian.walter at atlantis-scientific.com  Thu Sep 25 15:03:47 2003
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal build on solaris
Message-ID: <3F733C13.3030101@atlantis-scientific.com>

Hi,

Configure seems to be a little bit broken for solaris.  I had to add 
"-D_REENTRANT" manually to CXX_OPTFLAGS and C_OPTFLAGS in GDALmake.opt 
after running configure before it would make: on our solaris machine, 
localtime_r (in time.h) is bracketed by:

#if    defined(__EXTENSIONS__) || defined(_REENTRANT) || 
(_POSIX_C_SOURCE - 0 >= 199506L)

This localtime_r function is used by VSILocalTime in cpl_vsisimple.cpp 
if HAVE_LOCALTIME_R is set to 1 during configure (it is on solaris). 
 I'm not sure if REENTRANT was the right define to add though, or if 
configure should have not set HAVE_LOCALTIME_R at all (when I added the 
REENTRANT it compiled, but I don't know if it will have weird side 
effects). 

Gillian



From warmerdam at pobox.com  Thu Sep 25 16:09:28 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: porting of gdal to (optional) libtool build finally completed
In-Reply-To: <200309252127.10466.alexamici@tiscali.it>
References: <200309252127.10466.alexamici@tiscali.it>
Message-ID: <3F734B78.1030604@pobox.com>

Alessandro Amici wrote:
> folks,
> 
> it has taken a good two months, but i'm finally ready to announce that the 
> optional libtool build is now ready for prime time :).
...
> Frank, what's your opinion? isn't it tempting to support all unices with just 
> one set of configure-makefile rules?
> 
> questions, comments and test report on other systems are welcome.

Alessandro,

I concur ... you can make "with libtool" the default, as --without-libtool
works to make things as they are now.  If we don't change the default, it is
unlikely the mechanism will get much testing and I would like it to be the
default for the 1.2.0 release relatively soon.

Good work!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Thu Sep 25 23:21:53 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: porting of gdal to (optional) libtool build finally
 completed
In-Reply-To: <200309252254.53387.alexamici@tiscali.it>
References: <200309252127.10466.alexamici@tiscali.it> <3F734B78.1030604@pobox.com> <200309252254.53387.alexamici@tiscali.it>
Message-ID: <3F73B0D1.8090601@pobox.com>

Alessandro Amici wrote:
>>I concur ... you can make "with libtool" the default, as --without-libtool
>>works to make things as they are now.  If we don't change the default, it
>>is unlikely the mechanism will get much testing and I would like it to be
>>the default for the 1.2.0 release relatively soon.
> 
> 
> will do soon.
> 
> BTW, do you have a timeline for the next release?
> and a list of the must-have, must-fix items?

Alessandro,

I have no particular timeline, but 1.1.9 is falling pretty far behind so
I would like a new release fairly soon.  The only feature I am trying to
ensure is the "updated" handling of shared library building and versioning
which you have done, though I would like to review options for DLL versioning
as well on windows.

I will need to make a pass through outstanding bugs before a release, and
given the substantial changes with shared library versioning, I would
like to have a real beta release for 1.2.0 to shake out problems.  In the
meantime I would encourage the daring to try the nightly snapshots and
report any problems.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From slepnev_v at newmail.ru  Fri Sep 26 02:41:59 2003
From: slepnev_v at newmail.ru (Vladimir Slepnev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] esri .hdr open problem; minor hdf4 channels issue
Message-ID: <000101c383f9$4ac892e0$e406efc3@sst>

Well, here's an ESRI header file for a dataset that is giving us
problems; when reading through GDAL, all channels appear identical to
the first one. Could it be because BANDGAPBYTES==0?

Also, HDF4 datasets with 3D SDS sometimes open blatantly wrong: e.g. a
6000x3x6000 SDS opened as 6000 bands, each of size 3x6000. This one
seems to be pretty easy to correct, here are the changes we've made to
hdf4dataset.cpp:

/* --------------------------------------------------------------------
*/
/*      Select SDS or GR for reading from.
*/
/* --------------------------------------------------------------------
*/ ... 
// Create band information objects. 
switch( poDS->iRank ) { case 2:
  poDS->nBands = 1;
  poDS->iXDim = 1;
  poDS->iYDim = 0;
  break;

case 3:
// BIP
if((poDS->aiDimSizes[0] < poDS->aiDimSizes[1]) &&
   (poDS->aiDimSizes[0] < poDS->aiDimSizes[2]) )
{
  poDS->iBandDim = 0;
  poDS->iYDim    = 1;
  poDS->iXDim    = 2;
}
else
{
  // BIL
  if((poDS->aiDimSizes[1] <= poDS->aiDimSizes[0]) &&
     (poDS->aiDimSizes[1] <= poDS->aiDimSizes[2]) )
  {
    poDS->iYDim    = 0;
    poDS->iBandDim = 1;
    poDS->iXDim    = 2;
  }
  else
  { // BSQ
    poDS->iYDim    = 0;
    poDS->iXDim    = 1;
    poDS->iBandDim = 2;

  }
}

Vladimir Slepnev
Programmer, RDC ScanEx
-------------- next part --------------
NROWS          166
NCOLS          166
NBANDS         3
NBITS          8
BYTEORDER      I
LAYOUT         BIL
SKIPBYTES      0
ULXMAP         0.000
ULYMAP         0.000
XDIM           1.000
YDIM           1.000
BANDROWBYTES   166
TOTALROWBYTES  498
BANDGAPBYTES   0
From heitzso at growthmodels.com  Fri Sep 26 08:53:30 2003
From: heitzso at growthmodels.com (Heitzso)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] tiger 108th glitch?
Message-ID: <3F7436CA.80903@growthmodels.com>

Just following up on the problems I had converting
tiger 2000/108th GA files using ogr2ogr.

The tiger author, I believe, said he didn't get an
error message using current ogr2ogr, but wasn't
clear if 'current' meant stable or a cvs snapshot.

I'm willing to try and help on this, just need some
clues.  Are there any hidden command line parameters
to turn on a debugging level of output?  Or point
me to one or two source code files to play with
where the problem might be, etc.


Heitzso


From warmerdam at pobox.com  Fri Sep 26 10:01:14 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] esri .hdr open problem; minor hdf4 channels issue
In-Reply-To: <000101c383f9$4ac892e0$e406efc3@sst>
References: <000101c383f9$4ac892e0$e406efc3@sst>
Message-ID: <3F7446AA.5000604@pobox.com>

Vladimir Slepnev wrote:
> Well, here's an ESRI header file for a dataset that is giving us
> problems; when reading through GDAL, all channels appear identical to
> the first one. Could it be because BANDGAPBYTES==0?

...
> NROWS          166
> NCOLS          166
> NBANDS         3
> NBITS          8
> BYTEORDER      I
> LAYOUT         BIL
> SKIPBYTES      0
> ULXMAP         0.000
> ULYMAP         0.000
> XDIM           1.000
> YDIM           1.000
> BANDROWBYTES   166
> TOTALROWBYTES  498
> BANDGAPBYTES   0

Vladimir,

The ESRI BIL driver was completely broken for multi-band files.  I have
made some corrections, and committed them to CVS.  Let me know if your problems
persist.  You can add notes to the existing bug report at:

   http://bugzilla.remotesensing.org/show_bug.cgi?id=401

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gagant at hotmail.com  Fri Sep 26 10:53:41 2003
From: gagant at hotmail.com (Gagan Tandon)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALNumeric.SaveArray : Unable to access numpy arrays of typecode "@"
Message-ID: <BAY8-F491pY36jBHIrW0000f899@hotmail.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030926/66152847/attachment.html
From gillian.walter at atlantis-scientific.com  Fri Sep 26 10:50:44 2003
From: gillian.walter at atlantis-scientific.com (Gillian Walter)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALNumeric.SaveArray : Unable to access numpy arrays
 of typecode "@"
In-Reply-To: <BAY8-F491pY36jBHIrW0000f899@hotmail.com>
References: <BAY8-F491pY36jBHIrW0000f899@hotmail.com>
Message-ID: <3F745244.9070806@atlantis-scientific.com>

Hi,

I had the same problem.  This was Frank's response (his -DHAVE_NUMPY 
solution worked for me):

This might be an issue with how GDAL is built on windows.  If GDAL doesn't
"know" how to find Numeric/arrayobject.h to get at the definitions of
the PaArray_Descr and PyArrayObject structures it just falls back to using
internal declarations for these presumably copied from an earlier version
of Python.  To the best of my knowledge the internal (out of date) 
definitions
are always used on windows.

Try adding -DHAVE_NUMPY to OPTFLAGS in nmake.opt and see if things work.

The easiest way to verify you are getting system definitions of the numpy
stuff would be to add a #error directive in the "#ifndef HAVE_NUMPY" 
section
of gdal/pymod/gdal_py.h.

- Gillian

Gagan Tandon wrote:

> Dear Friends,
>
> I am using Numeric 23.0 version and python 2.3 on a windows XP 
> machine. I have build GDAL from MS VC++ and Visual Studio .net and 
> installed on my machine. The GDAL version is 1.1.9.
>
> Basic Problem : I am trying to save a Numpy array(infact the primary 
> issue is to save any 2d array (not just NUMPY) to a "TIF" file) to a 
> TIF file. When I run the following commands, I get an error stating 
> that it cannot access Numpy array of typecode "@"  (weird..??)
>
> DUMP OF PYTHON INTERPRETER.
>
> >>> k = Numeric.zeros((2,2),"f")
>
> >>> k
> array([[ 0.,  0.],
>        [ 0.,  0.]],'f')               // I have tried with array k = 
> array([[1.2, 2.3], [2.5,1.7]],"f")
>
>
> >>> import gdalnumeric
>
> >>> gdalnumeric.SaveArray(k,"k.tif")
> ERROR 1: Unable to access numpy arrays of typecode `@' <mailto:%60@%27>.
>
> Traceback (most recent call last):
>   File "<stdin>", line 1, in ?
>   File "C:\GDAL\pymod\gdalnumeric.py", line 97, in SaveArray
>     return driver.CreateCopy( filename, OpenArray(src_array,prototype) )
>   File "C:\GDAL\pymod\gdal.py", line 330, in CreateCopy
>     target_ds = _gdal.GDALCreateCopy( self._o, filename, source_ds._o,
> AttributeError: 'NoneType' object has no attribute '_o'
>
> ---- END OF PYTHON INTERPRETER
>
> I am wondering whether this is a version problem with Numeric python 
> or is it a problem with the building of GDAL using MS VC++ 7.0  or is 
> it something else. I would be delighted if any one can give me clues 
> on how to save a 2d array to a TIF file, since thats the primary problem.
>
> Thanks
>
> Gagan Tandon
>
> ------------------------------------------------------------------------
> ------------------------------------------------------------------------
>
> Gagan Tandon
> Research Assistant
> GIS and Remote Sensing
> Colorado State University 
>
> ------------------------------------------------------------------------
> ------------------------------------------------------------------------
>
> ------------------------------------------------------------------------
> Attention all artisans! Sell Diwali creations online. Register now! 
> <http://g.msn.com/8HMAENIN/2734??PS=> 
> _______________________________________________ Gdal-dev mailing list 
> Gdal-dev@remotesensing.org 
> http://remotesensing.org/mailman/listinfo/gdal-dev 




From warmerdam at pobox.com  Fri Sep 26 12:03:05 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALNumeric.SaveArray : Unable to access numpy arrays
 of typecode "@"
In-Reply-To: <BAY8-F491pY36jBHIrW0000f899@hotmail.com>
References: <BAY8-F491pY36jBHIrW0000f899@hotmail.com>
Message-ID: <3F746339.9070100@pobox.com>

Gagan Tandon wrote:

> Dear Friends,
> 
> I am using Numeric 23.0 version and python 2.3 on a windows XP machine. 
> I have build GDAL from MS VC++ and Visual Studio .net and installed on 
> my machine. The GDAL version is 1.1.9.
> 
> Basic Problem : I am trying to save a Numpy array(infact the primary 
> issue is to save any 2d array (not just NUMPY) to a "TIF" file) to a TIF 
> file. When I run the following commands, I get an error stating that it 
> cannot access Numpy array of typecode "@"  (weird..??)

Gagan,

As Gillian mentioned this is a problem with using internal definitions for
array structures and enumerations.  The default build on windows was doing
this.

I have changed things around a bit to deal with this better:
  o By default HAVE_NUMPY is now defined in nmake.opt.  If you have python
    but not Numeric includes files on your system, you would need to comment
    this out to build.  This should ensure that we *normally* get the right
    definitions from now on in windows builds.

  o I have modified gdal_py.py to include a more recent list of the numpy
    type codes, which is enough to fix this problem for some situations.

  o I have modified the Open() method of the NUMPY driver to issue a warning
    explaining the issue if we called with an "internal definitions" build.

So, you can update from CVS and rebuild or just do the change that Gillian
suggested.  Hopefully people will stop running into this problem after the
next major release.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gagant at hotmail.com  Fri Sep 26 12:37:41 2003
From: gagant at hotmail.com (Gagan Tandon)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDALNumeric.SaveArray : Unable to access numpy arrays of
 typecode "@"
Message-ID: <BAY8-F101mVBCOWHJVk00000763@hotmail.com>

Gillian,

Thankyou very much..
IT WORKED..!!!

Gagan


>From: Gillian Walter <gillian.walter@atlantis-scientific.com>
>Reply-To: gdal-dev@remotesensing.org
>To: gdal-dev@remotesensing.org
>Subject: Re: [Gdal-dev] GDALNumeric.SaveArray : Unable to access numpy 
>arrays of typecode "@"
>Date: Fri, 26 Sep 2003 10:50:44 -0400
>
>Hi,
>
>I had the same problem.  This was Frank's response (his -DHAVE_NUMPY 
>solution worked for me):
>
>This might be an issue with how GDAL is built on windows.  If GDAL doesn't
>"know" how to find Numeric/arrayobject.h to get at the definitions of
>the PaArray_Descr and PyArrayObject structures it just falls back to using
>internal declarations for these presumably copied from an earlier version
>of Python.  To the best of my knowledge the internal (out of date) 
>definitions
>are always used on windows.
>
>Try adding -DHAVE_NUMPY to OPTFLAGS in nmake.opt and see if things work.
>
>The easiest way to verify you are getting system definitions of the numpy
>stuff would be to add a #error directive in the "#ifndef HAVE_NUMPY" 
>section
>of gdal/pymod/gdal_py.h.
>
>- Gillian
>
>Gagan Tandon wrote:
>
>>Dear Friends,
>>
>>I am using Numeric 23.0 version and python 2.3 on a windows XP machine. I 
>>have build GDAL from MS VC++ and Visual Studio .net and installed on my 
>>machine. The GDAL version is 1.1.9.
>>
>>Basic Problem : I am trying to save a Numpy array(infact the primary issue 
>>is to save any 2d array (not just NUMPY) to a "TIF" file) to a TIF file. 
>>When I run the following commands, I get an error stating that it cannot 
>>access Numpy array of typecode "@"  (weird..??)
>>
>>DUMP OF PYTHON INTERPRETER.
>>
>> >>> k = Numeric.zeros((2,2),"f")
>>
>> >>> k
>>array([[ 0.,  0.],
>>        [ 0.,  0.]],'f')               // I have tried with array k = 
>>array([[1.2, 2.3], [2.5,1.7]],"f")
>>
>>
>> >>> import gdalnumeric
>>
>> >>> gdalnumeric.SaveArray(k,"k.tif")
>>ERROR 1: Unable to access numpy arrays of typecode `@' <mailto:%60@%27>.
>>
>>Traceback (most recent call last):
>>   File "<stdin>", line 1, in ?
>>   File "C:\GDAL\pymod\gdalnumeric.py", line 97, in SaveArray
>>     return driver.CreateCopy( filename, OpenArray(src_array,prototype) )
>>   File "C:\GDAL\pymod\gdal.py", line 330, in CreateCopy
>>     target_ds = _gdal.GDALCreateCopy( self._o, filename, source_ds._o,
>>AttributeError: 'NoneType' object has no attribute '_o'
>>
>>---- END OF PYTHON INTERPRETER
>>
>>I am wondering whether this is a version problem with Numeric python or is 
>>it a problem with the building of GDAL using MS VC++ 7.0  or is it 
>>something else. I would be delighted if any one can give me clues on how 
>>to save a 2d array to a TIF file, since thats the primary problem.
>>
>>Thanks
>>
>>Gagan Tandon
>>
>>------------------------------------------------------------------------
>>------------------------------------------------------------------------
>>
>>Gagan Tandon
>>Research Assistant
>>GIS and Remote Sensing
>>Colorado State University
>>
>>------------------------------------------------------------------------
>>------------------------------------------------------------------------
>>
>>------------------------------------------------------------------------
>>Attention all artisans! Sell Diwali creations online. Register now! 
>><http://g.msn.com/8HMAENIN/2734??PS=> 
>>_______________________________________________ Gdal-dev mailing list 
>>Gdal-dev@remotesensing.org 
>>http://remotesensing.org/mailman/listinfo/gdal-dev
>
>
>
>_______________________________________________
>Gdal-dev mailing list
>Gdal-dev@remotesensing.org
>http://remotesensing.org/mailman/listinfo/gdal-dev







PLEASE SEND ANY HEAVY ATTACHMENT LOADED EMAILS TO THIS EMAIL ID: 
gagan@cs.colostate.edu.
THANKS
Gagan Tandon
Graduate Student                     Research Assistant
Computer Science                   GIS and Remote Sensing
Colorado State University
1500 W Plum Street
Apt 1-I
Fort Collins,CO
ZIP 80521, USA
Phone (R) : (970)-492-9487

_________________________________________________________________
Contact brides & grooms FREE! http://www.shaadi.com/ptnr.php?ptnr=hmltag 
Only on www.shaadi.com. Register now!


From dron at ak4719.spb.edu  Fri Sep 26 16:29:46 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] gdal build on solaris
In-Reply-To: <3F733C13.3030101@atlantis-scientific.com>
References: <3F733C13.3030101@atlantis-scientific.com>
Message-ID: <20030926202946.GA29452@ak4719.spb.edu>

On Thu, Sep 25, 2003 at 03:03:47PM -0400, Gillian Walter wrote:
> Configure seems to be a little bit broken for solaris.  I had to add
> "-D_REENTRANT" manually to CXX_OPTFLAGS and C_OPTFLAGS in GDALmake.opt
> after running configure before it would make: on our solaris machine,
> localtime_r (in time.h) is bracketed by:
> 
> #if    defined(__EXTENSIONS__) || defined(_REENTRANT) ||
> (_POSIX_C_SOURCE - 0 >= 199506L)
> 
> This localtime_r function is used by VSILocalTime in cpl_vsisimple.cpp
> if HAVE_LOCALTIME_R is set to 1 during configure (it is on solaris).
> I'm not sure if REENTRANT was the right define to add though, or if
> configure should have not set HAVE_LOCALTIME_R at all (when I added
> the REENTRANT it compiled, but I don't know if it will have weird side
> effects). 

Gillian,

localtime_r() is a thread safe variant of the localtime() function and
it is defined in glibc without any additional conditions. I haven't
access to the Solaris box, but I can add -D_REENTRANT to the compiling
flags when HAVE_LOCALTIME_R will be switched on.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Fri Sep 26 16:58:33 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] esri .hdr open problem; minor hdf4 channels issue
In-Reply-To: <000101c383f9$4ac892e0$e406efc3@sst>
References: <000101c383f9$4ac892e0$e406efc3@sst>
Message-ID: <20030926205833.GB29452@ak4719.spb.edu>

On Fri, Sep 26, 2003 at 10:41:59AM +0400, Vladimir Slepnev wrote:
> Also, HDF4 datasets with 3D SDS sometimes open blatantly wrong: e.g. a
> 6000x3x6000 SDS opened as 6000 bands, each of size 3x6000. This one
> seems to be pretty easy to correct, here are the changes we've made to
> hdf4dataset.cpp:
...
> case 3:
> // BIP
> if((poDS->aiDimSizes[0] < poDS->aiDimSizes[1]) &&
>    (poDS->aiDimSizes[0] < poDS->aiDimSizes[2]) )
> {
>   poDS->iBandDim = 0;
>   poDS->iYDim    = 1;
>   poDS->iXDim    = 2;
> }
> else
> {
>   // BIL
>   if((poDS->aiDimSizes[1] <= poDS->aiDimSizes[0]) &&
>      (poDS->aiDimSizes[1] <= poDS->aiDimSizes[2]) )
>   {
>     poDS->iYDim    = 0;
>     poDS->iBandDim = 1;
>     poDS->iXDim    = 2;
>   }
>   else
>   { // BSQ
>     poDS->iYDim    = 0;
>     poDS->iXDim    = 1;
>     poDS->iBandDim = 2;
> 
>   }
> }

Vladimir,

I'm not sure it is a good solution... But well, I shall commit proposed
logic into the driver. There is much of unnatural intellect in the HDF4
driver already, not a problem if we add a bit more :-)

					Regards,
					Andrey


-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From dron at ak4719.spb.edu  Fri Sep 26 17:13:36 2003
From: dron at ak4719.spb.edu (Andrey Kiselev)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Re: porting of gdal to (optional) libtool build finally completed
In-Reply-To: <200309252127.10466.alexamici@tiscali.it>
References: <200309252127.10466.alexamici@tiscali.it>
Message-ID: <20030926211336.GC29452@ak4719.spb.edu>

On Thu, Sep 25, 2003 at 09:27:10PM +0200, Alessandro Amici wrote:
> on linux i could successfully test different combination of internal and 
> external help libraries, in particular:
> libz		ext/int
> grass		not tested
> cfitsio	ext
> png		ext/int
> libtiff		int
> geotiff	int
> jpeg		ext/int
> gif		ext/int
> ogdi		not tested
> fme		not tested
> hdf4		ext
> jasper	not tested
> ecw		not tested
> kadaku	not tested*
> mrsid		not tested
> pg		ext
> xerces	not tested
> * judging form the GNUmakefile kadaku support is not going to work.

Alessandro,

I just want to note that I'm using libtool support since your first
announce with JasPer and MrSID support enabled and haven't  fall into
any serious problems (with except of few quick hacks for Python until
your recent commit), so the new infrastructure seems to be quit
working.

					Andrey

-- 
Andrey V. Kiselev
Home phone:  +7 812 5274898  ICQ# 26871517

From sbrooks2 at kc.rr.com  Sun Sep 28 00:38:06 2003
From: sbrooks2 at kc.rr.com (Steve Brooks)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Memory leak fixes in ogrfeaturesytle.cpp
Message-ID: <000f01c3857a$4ff81ab0$7d01a8c0@pc5120d>

Frank,
 
  I ran across several memory leaks in ogrfeaturestyle.cpp
 
with a large input file and querying the feature style string I was
getting several thousand memory leaks.
 
The problem was in two places, first in CreateStyleToolFromStyleString
it was not calling CSLDestroy(papszToken);
 
Then in the destructors of OGRStyleTool subclasses they were
only calling CPLFree(m_pasStyleValue);
 
The problem with this is m_pasStyleValue is a vector like class of
several OGRStyleValue's.  Inside OGRStyleValue can be a pointer to a
heap allocated string in pszValue, which was the leak.
 
Below are the changes that fixed these leaks.
 
Thanks
 
Steve Brooks
 
 
$ diff clean/gdal/ogr/ogrfeaturestyle.cpp
modified/gdal/ogr/ogrfeaturestyle.cpp
432a433
>     OGRStyleTool *poStyleTool = NULL;
434,447c435,447
<     if (CSLCount(papszToken) <2)
<       return NULL;
<
<     if (EQUAL(papszToken[0],"PEN"))
<       return new OGRStylePen();
<     else if (EQUAL(papszToken[0],"BRUSH"))
<       return new OGRStyleBrush();
<     else if (EQUAL(papszToken[0],"SYMBOL"))
<       return new OGRStyleSymbol();
<     else if (EQUAL(papszToken[0],"LABEL"))
<       return new OGRStyleLabel();
<     else
<       return NULL;
<
---
>     if (CSLCount(papszToken) >= 2)
>     {
>       if (EQUAL(papszToken[0],"PEN"))
>          poStyleTool = new OGRStylePen();
>       else if (EQUAL(papszToken[0],"BRUSH"))
>          poStyleTool = new OGRStyleBrush();
>       else if (EQUAL(papszToken[0],"SYMBOL"))
>          poStyleTool = new OGRStyleSymbol();
>       else if (EQUAL(papszToken[0],"LABEL"))
>          poStyleTool = new OGRStyleLabel();
>     }
>     CSLDestroy(papszToken);
>     return poStyleTool;
1394a1395,1402
>    for (int i = 0; i < OGRSTPenLast; i++)
>    {
>       if (m_pasStyleValue[i].pszValue != NULL)
>       {
>          CPLFree(m_pasStyleValue[i].pszValue);
>          m_pasStyleValue[i].pszValue = NULL;
>       }
>    }
1414a1423,1430
>    for (int i = 0; i < OGRSTBrushLast; i++)
>    {
>       if (m_pasStyleValue[i].pszValue != NULL)
>       {
>          CPLFree(m_pasStyleValue[i].pszValue);
>          m_pasStyleValue[i].pszValue = NULL;
>       }
>    }
1434a1451,1458
>    for (int i = 0; i < OGRSTSymbolLast; i++)
>    {
>       if (m_pasStyleValue[i].pszValue != NULL)
>       {
>          CPLFree(m_pasStyleValue[i].pszValue);
>          m_pasStyleValue[i].pszValue = NULL;
>       }
>    }
1455,1456c1479,1490
<     CPLFree(m_pasStyleValue);
<
---
>    if (m_pasStyleValue != NULL)
>    {
>       for (int i = 0; i < OGRSTLabelLast; i++)
>       {
>          if (m_pasStyleValue[i].pszValue != NULL)
>          {
>             CPLFree(m_pasStyleValue[i].pszValue);
>             m_pasStyleValue[i].pszValue = NULL;
>          }
>       }
>    }
>    CPLFree(m_pasStyleValue);
 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030927/5f514d5f/attachment.html
From sbrooks2 at kc.rr.com  Sun Sep 28 12:59:46 2003
From: sbrooks2 at kc.rr.com (Steve Brooks)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Memory leak fix for ogrdgnlayer.cpp
Message-ID: <001c01c385e1$f46fa880$7d01a8c0@pc5120d>

Frank,
 
Below is a memory leak fix for ogrdgnlayer.cpp, when converting
complex linestrings from the dgn the child DGNElement (psChildElement)
wasn't being freed after conversion to the poChildFeature.
 
Steve Brooks
 
 
$ diff clean/ogrdgnlayer.cpp modified/ogrdgnlayer.cpp
587c587,590
<                   poChildFeature = ElementToFeature( psChildElement );
---
>               {
>                  poChildFeature = ElementToFeature( psChildElement );
>                  DGNFreeElement( hDGN, psChildElement );
>               }
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030928/57a3be71/attachment.html
From warmerdam at pobox.com  Mon Sep 29 10:26:03 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Memory leak fix for ogrdgnlayer.cpp
In-Reply-To: <001c01c385e1$f46fa880$7d01a8c0@pc5120d>
References: <001c01c385e1$f46fa880$7d01a8c0@pc5120d>
Message-ID: <3F7840FB.4000805@pobox.com>

Steve Brooks wrote:
> Frank,
>  
> Below is a memory leak fix for ogrdgnlayer.cpp, when converting
> complex linestrings from the dgn the child DGNElement (psChildElement)
> wasn't being freed after conversion to the poChildFeature.
>  
> Steve Brooks
>  
>  
> $ diff clean/ogrdgnlayer.cpp modified/ogrdgnlayer.cpp
> 587c587,590
> <                   poChildFeature = ElementToFeature( psChildElement );
> ---
>  >               {
>  >                  poChildFeature = ElementToFeature( psChildElement );
>  >                  DGNFreeElement( hDGN, psChildElement );
>  >               }

Steve,

I see your point.  Patch applied in CVS.

Thanks,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From warmerdam at pobox.com  Mon Sep 29 11:12:19 2003
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] Memory leak fixes in ogrfeaturesytle.cpp
In-Reply-To: <000f01c3857a$4ff81ab0$7d01a8c0@pc5120d>
References: <000f01c3857a$4ff81ab0$7d01a8c0@pc5120d>
Message-ID: <3F784BD3.3090807@pobox.com>

Steve Brooks wrote:
> Frank,
>  
>   I ran across several memory leaks in ogrfeaturestyle.cpp
>  
> with a large input file and querying the feature style string I was
> getting several thousand memory leaks.
>  
> The problem was in two places, first in CreateStyleToolFromStyleString
> it was not calling CSLDestroy(papszToken);
>  
> Then in the destructors of OGRStyleTool subclasses they were
> only calling CPLFree(m_pasStyleValue);
>  
> The problem with this is m_pasStyleValue is a vector like class of
> several OGRStyleValue's.  Inside OGRStyleValue can be a pointer to a
> heap allocated string in pszValue, which was the leak.
>  
> Below are the changes that fixed these leaks.

Steve,

Both sets of leaks fixed in CVS as per your suggestions.

Thanks!

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent



From gagant at hotmail.com  Mon Sep 29 12:32:03 2003
From: gagant at hotmail.com (Gagan Tandon)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL on windows without building GDAL from VC++
Message-ID: <BAY8-F998cbKTrRVXR0000146b0@hotmail.com>

An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030929/9ff455b3/attachment.html
From alessandro_amici at telespazio.it  Mon Sep 29 13:12:05 2003
From: alessandro_amici at telespazio.it (Amici Alessandro)
Date: Wed Nov 21 11:48:56 2007
Subject: R: [Gdal-dev] GDAL on windows without building GDAL from VC++
Message-ID: <7171FE1C83A6AE4DA93B8099958868073B0BC0@ROMADG-MAIL01>

Gagan,

> We are developing a remote sensing application using GDAL on windows as
part of an > open source project.  The project cannot be called a complete
open source project, > since it would require the users of our remote
sensing application to build GDAL 
> from VC++ ( which users need to buy). 
> So our issues are:
> 1) Can we build GDAL on windows without installing a commercial software
like 
> Visual studio.net

i think we are very close to have a fully working mingw32 port
(http://www.mingw.org/)
this should give you a working alternative to msvs, but i've never tryed
it in the real world.
if you like the idea ping me to fix the remaining bug (and use 'make LIBS='
in the meanwhile)

> 2) OR , can we develop an executable from our application and require
users to just 
> install the executable without requiring the commercial software like
VC++.

you may get the pre-build library from remotesensing.org of just build
your application statically.

gdal is as free as possible!

cheers,
alessandro

From nhv at cape.com  Mon Sep 29 15:49:07 2003
From: nhv at cape.com (Norman Vine)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GDAL on windows without building GDAL from VC++
In-Reply-To: <BAY8-F998cbKTrRVXR0000146b0@hotmail.com>
Message-ID: <EKEJIKAILPONGGENMBGAEECOEOAA.nhv@cape.com>

Gagan Tandon writes:

 1) Can we build GDAL on windows without installing a commercial software
like Visual studio.net

Yes - use gcc  see
http://www.mingw.org
http://www.cygwin.com

HTH

Norman
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20030929/bf3258d2/attachment.html
From scachetti at videotron.ca  Tue Sep 30 10:32:43 2003
From: scachetti at videotron.ca (Ricardo Scachetti Pereira)
Date: Wed Nov 21 11:48:56 2007
Subject: [Gdal-dev] GetProjectionRef() returns different strings in Win and Linux
Message-ID: <3F79940B.5000302@videotron.ca>

    Hello, all.

    I'm having a problem with method GDALDataset::GetProjectionRef() and 
I hope somebody can help me out.
    I'm trying to get the projection string from an ESRI grid and I'm 
getting different results in Linux and Windows (it's a cross-platform 
project).
    In Linux I get the correct projection string while in Windows I get 
an empty string ("", not NULL).
    The prj.adf file is the following:

Projection    GEOGRAPHIC
Datum         WGS84
Spheroid      WGS84
Units         DD
Zunits        NO
Parameters   

    The projection string returned by GDALDataset::GetProjectionRef() in 
Linux is:

GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS 
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AXIS["Lat",NORTH],AXIS["Long",EAST],AUTHORITY["EPSG","4326"]]

    In Windows, the very same call returns an empty string.

    I'm using gdal-1.1.9 in both platforms, MS Visual C++ 6 in Windows 
and gcc 3.2.2 on a RedHat 9.1 Linux box.
    Any ideas about what is going on?
    Any help is greatly appreciated.
    Regards,

Ricardo



From alexamici at tiscali.it  Thu Sep 25 15:27:10 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] porting of gdal to (optional) libtool build finally completed
Message-ID: <200309252127.10466.alexamici@tiscali.it>

folks,

it has taken a good two months, but i'm finally ready to announce that the 
optional libtool build is now ready for prime time :).

this should allow setting proper soname versioning on all supported systems
and as a bonus we should be able to build standard shared libraries on a wide 
variety of previously unsupported unix and unix-like systems. 
in order to try it you just need to append '--with-libtool' to your normal 
configure command line.

in order to test system independece i built gdal on linux, cygwin and a 
cross-compile to mingw32.

on linux i could successfully test different combination of internal and 
external help libraries, in particular:
libz		ext/int
grass		not tested
cfitsio	ext
png		ext/int
libtiff		int
geotiff	int
jpeg		ext/int
gif		ext/int
ogdi		not tested
fme		not tested
hdf4		ext
jasper	not tested
ecw		not tested
kadaku	not tested*
mrsid		not tested
pg		ext
xerces	not tested
* judging form the GNUmakefile kadaku support is not going to work.

last but not least, i tested python support on linux-python2.3.

on cygwin i could verify that most of the raccomandation from Norman on how to 
build and install the libraries are actually automatically taken care by 
libtool.

the mingw32 host needs an annoying work-around (build with 'make LIBS=') in 
order to build the shared library. the static library is always built 
correctly.

now, i know that a few people on the list are no fan of libtool and they 
certainly have good reasons (like a 30% to 300% (!) increase in build time!).
OTOH moving the default build to libtool can simplify substantially the build 
infrastructure. and the portability advantages are also obvious.

a way to keep the advantages of using libtool without incurring in the worse 
disadvantages during development is to move the default build to libtool (so 
normal users will get that) and switch to the native build with a 
--without-libtool configure option (that will be used by developers).

since tha native build is targeted to developers (that is, mainly Frank and 
Andrey AFAIK) we can restrict it to only work on unix/linux with gnu build 
tools.

Frank, what's your opinion? isn't it tempting to support all unices with just 
one set of configure-makefile rules?

questions, comments and test report on other systems are welcome.

cheers,
alessandro


From alexamici at tiscali.it  Thu Sep 25 16:54:53 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Re: porting of gdal to (optional) libtool build finally completed
In-Reply-To: <3F734B78.1030604@pobox.com>
References: <200309252127.10466.alexamici@tiscali.it> <3F734B78.1030604@pobox.com>
Message-ID: <200309252254.53387.alexamici@tiscali.it>

> I concur ... you can make "with libtool" the default, as --without-libtool
> works to make things as they are now.  If we don't change the default, it
> is unlikely the mechanism will get much testing and I would like it to be
> the default for the 1.2.0 release relatively soon.

will do soon.

BTW, do you have a timeline for the next release?
and a list of the must-have, must-fix items?

> Good work!

thanks :)

alessandro

BTW: external xerces compiles fine as well.


From alexamici at tiscali.it  Thu Sep 25 16:54:53 2003
From: alexamici at tiscali.it (Alessandro Amici)
Date: Wed Nov 21 11:48:57 2007
Subject: [Gdal-dev] Re: porting of gdal to (optional) libtool build finally completed
In-Reply-To: <3F734B78.1030604@pobox.com>
References: <200309252127.10466.alexamici@tiscali.it> <3F734B78.1030604@pobox.com>
Message-ID: <200309252254.53387.alexamici@tiscali.it>

> I concur ... you can make "with libtool" the default, as --without-libtool
> works to make things as they are now.  If we don't change the default, it
> is unlikely the mechanism will get much testing and I would like it to be
> the default for the 1.2.0 release relatively soon.

will do soon.

BTW, do you have a timeline for the next release?
and a list of the must-have, must-fix items?

> Good work!

thanks :)

alessandro

BTW: external xerces compiles fine as well.


