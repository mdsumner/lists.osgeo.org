From even.rouault at spatialys.com  Thu Jan  2 06:54:11 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 2 Jan 2025 15:54:11 +0100
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda build
 infrastructure
Message-ID: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>

Hi,

Happy New Year to everyone!

PSC,

GDAL depends on conda-forge builds for a number of its continuous 
integration configurations, as well as offering builds of the master 
branch with the "gdal-master" conda channel 
(https://gdal.org/en/stable/download.html#gdal-master-conda-builds) 
which make them easily testable by users of the most common operating 
systems. We have identified a couple of points in the conda-forge 
infrastructure that are causing inconveniences to maintainers of the 
GDAL build recipe (and that also apply to other software package with 
similar complexity), in particular related to sub-package dependency 
pinning, and got a quote from Quansight to address them.

Motion: approve the use of up to 15,000 USD by Quansight for work on 
Conda build infrastructure, funded through the GDAL Sponsorhip program.

Starting with my +1,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From howard at hobu.co  Thu Jan  2 07:12:06 2025
From: howard at hobu.co (Howard Butler)
Date: Thu, 2 Jan 2025 09:12:06 -0600
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <DC401EED-B3EF-4A72-9BB5-C9A7447D4DDB@hobu.co>



> On Jan 2, 2025, at 8:54?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Hi,
> 
> Happy New Year to everyone!
> 
> PSC,
> 
> GDAL depends on conda-forge builds for a number of its continuous integration configurations, as well as offering builds of the master branch with the "gdal-master" conda channel (https://gdal.org/en/stable/download.html#gdal-master-conda-builds) which make them easily testable by users of the most common operating systems. We have identified a couple of points in the conda-forge infrastructure that are causing inconveniences to maintainers of the GDAL build recipe (and that also apply to other software package with similar complexity), in particular related to sub-package dependency pinning, and got a quote from Quansight to address them.
> 
> Motion: approve the use of up to 15,000 USD by Quansight for work on Conda build infrastructure, funded through the GDAL Sponsorhip program.
> 
> Starting with my +1,

+1 Howard

From dmorissette at mapgears.com  Thu Jan  2 08:08:54 2025
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Thu, 2 Jan 2025 11:08:54 -0500
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <30f2a1fb-1651-4924-9735-4b54a2f8fcbf@mapgears.com>

+1

Daniel


On 2025-01-02 09:54, Even Rouault via gdal-dev wrote:
> Hi,
>
> Happy New Year to everyone!
>
> PSC,
>
> GDAL depends on conda-forge builds for a number of its continuous 
> integration configurations, as well as offering builds of the master 
> branch with the "gdal-master" conda channel 
> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds) 
> which make them easily testable by users of the most common operating 
> systems. We have identified a couple of points in the conda-forge 
> infrastructure that are causing inconveniences to maintainers of the 
> GDAL build recipe (and that also apply to other software package with 
> similar complexity), in particular related to sub-package dependency 
> pinning, and got a quote from Quansight to address them.
>
> Motion: approve the use of up to 15,000 USD by Quansight for work on 
> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>

-- 
Daniel Morissette
Mapgears Inc
T: +1 418-696-5056 #201
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250102/9fac62b0/attachment.htm>

From dbaston at gmail.com  Thu Jan  2 09:43:58 2025
From: dbaston at gmail.com (Daniel Baston)
Date: Thu, 2 Jan 2025 12:43:58 -0500
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <CA+K_q_q_UwdaVgeFrYGURdUHLAXhATYQqKcXcwRiHvt9aEj4sw@mail.gmail.com>

+1

Dan

On Thu, Jan 2, 2025 at 9:54?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Happy New Year to everyone!
>
> PSC,
>
> GDAL depends on conda-forge builds for a number of its continuous
> integration configurations, as well as offering builds of the master
> branch with the "gdal-master" conda channel
> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds)
> which make them easily testable by users of the most common operating
> systems. We have identified a couple of points in the conda-forge
> infrastructure that are causing inconveniences to maintainers of the
> GDAL build recipe (and that also apply to other software package with
> similar complexity), in particular related to sub-package dependency
> pinning, and got a quote from Quansight to address them.
>
> Motion: approve the use of up to 15,000 USD by Quansight for work on
> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250102/4e6198c8/attachment.htm>

From schwehr at gmail.com  Thu Jan  2 08:55:04 2025
From: schwehr at gmail.com (Kurt Schwehr)
Date: Thu, 2 Jan 2025 08:55:04 -0800
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <CACmBxysTx1UBXnZijZ4xRd=6OchJc9UpgPHpFdMac2eAhwnbMw@mail.gmail.com>

+1 KurtS

On Thu, Jan 2, 2025 at 6:54?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Happy New Year to everyone!
>
> PSC,
>
> GDAL depends on conda-forge builds for a number of its continuous
> integration configurations, as well as offering builds of the master
> branch with the "gdal-master" conda channel
> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds)
> which make them easily testable by users of the most common operating
> systems. We have identified a couple of points in the conda-forge
> infrastructure that are causing inconveniences to maintainers of the
> GDAL build recipe (and that also apply to other software package with
> similar complexity), in particular related to sub-package dependency
> pinning, and got a quote from Quansight to address them.
>
> Motion: approve the use of up to 15,000 USD by Quansight for work on
> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250102/fb6b1576/attachment.htm>

From sean.gillies at gmail.com  Thu Jan  2 10:00:12 2025
From: sean.gillies at gmail.com (Sean Gillies)
Date: Thu, 2 Jan 2025 11:00:12 -0700
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <CAOodmJrnbjYWqFT1j_Pqbe0jHbwgBbKSaG2QfAE3a7BtdZOqBw@mail.gmail.com>

+1 and a happy new year to all!.

On Thu, Jan 2, 2025 at 7:54?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Happy New Year to everyone!
>
> PSC,
>
> GDAL depends on conda-forge builds for a number of its continuous
> integration configurations, as well as offering builds of the master
> branch with the "gdal-master" conda channel
> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds)
> which make them easily testable by users of the most common operating
> systems. We have identified a couple of points in the conda-forge
> infrastructure that are causing inconveniences to maintainers of the
> GDAL build recipe (and that also apply to other software package with
> similar complexity), in particular related to sub-package dependency
> pinning, and got a quote from Quansight to address them.
>
> Motion: approve the use of up to 15,000 USD by Quansight for work on
> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250102/ebbbd03f/attachment-0001.htm>

From warmerdam at pobox.com  Thu Jan  2 10:11:20 2025
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu, 2 Jan 2025 13:11:20 -0500
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <CAOodmJrnbjYWqFT1j_Pqbe0jHbwgBbKSaG2QfAE3a7BtdZOqBw@mail.gmail.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
 <CAOodmJrnbjYWqFT1j_Pqbe0jHbwgBbKSaG2QfAE3a7BtdZOqBw@mail.gmail.com>
Message-ID: <CA+YzLBfBPnRzE04j7C-VtDOoG--z7Bff-AbAjF-++jLoOkwo+A@mail.gmail.com>

+1 Frank

On Thu, Jan 2, 2025 at 1:00?PM Sean Gillies via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1 and a happy new year to all!.
>
> On Thu, Jan 2, 2025 at 7:54?AM Even Rouault via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> Hi,
>>
>> Happy New Year to everyone!
>>
>> PSC,
>>
>> GDAL depends on conda-forge builds for a number of its continuous
>> integration configurations, as well as offering builds of the master
>> branch with the "gdal-master" conda channel
>> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds)
>> which make them easily testable by users of the most common operating
>> systems. We have identified a couple of points in the conda-forge
>> infrastructure that are causing inconveniences to maintainers of the
>> GDAL build recipe (and that also apply to other software package with
>> similar complexity), in particular related to sub-package dependency
>> pinning, and got a quote from Quansight to address them.
>>
>> Motion: approve the use of up to 15,000 USD by Quansight for work on
>> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>>
>> Starting with my +1,
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> Butcher of all kinds of standards, open or closed formats. At the end,
>> this is just about bytes.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
> Sean Gillies
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam,
warmerdam at pobox.com
light and sound - activate the windows | USA: +1 650-701-7823
<http://voice.google.com/calls?a=nc,%2B16507017823>
and watch the world go round - Rush    | CAN: +1 343-550-9984
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250102/40a0ac06/attachment.htm>

From norman.barker at gmail.com  Thu Jan  2 10:19:51 2025
From: norman.barker at gmail.com (Norman Barker)
Date: Thu, 2 Jan 2025 12:19:51 -0600
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <CA+YzLBfBPnRzE04j7C-VtDOoG--z7Bff-AbAjF-++jLoOkwo+A@mail.gmail.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
 <CAOodmJrnbjYWqFT1j_Pqbe0jHbwgBbKSaG2QfAE3a7BtdZOqBw@mail.gmail.com>
 <CA+YzLBfBPnRzE04j7C-VtDOoG--z7Bff-AbAjF-++jLoOkwo+A@mail.gmail.com>
Message-ID: <CAN_Dn-H+MkstbH+9jY7aUPuEJh1hoXCzEPMMAi4w6kevXP0Sgg@mail.gmail.com>

+1 Norman

On Thu, Jan 2, 2025 at 12:11?PM Frank Warmerdam via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> +1 Frank
>
> On Thu, Jan 2, 2025 at 1:00?PM Sean Gillies via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
>> +1 and a happy new year to all!.
>>
>> On Thu, Jan 2, 2025 at 7:54?AM Even Rouault via gdal-dev <
>> gdal-dev at lists.osgeo.org> wrote:
>>
>>> Hi,
>>>
>>> Happy New Year to everyone!
>>>
>>> PSC,
>>>
>>> GDAL depends on conda-forge builds for a number of its continuous
>>> integration configurations, as well as offering builds of the master
>>> branch with the "gdal-master" conda channel
>>> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds)
>>> which make them easily testable by users of the most common operating
>>> systems. We have identified a couple of points in the conda-forge
>>> infrastructure that are causing inconveniences to maintainers of the
>>> GDAL build recipe (and that also apply to other software package with
>>> similar complexity), in particular related to sub-package dependency
>>> pinning, and got a quote from Quansight to address them.
>>>
>>> Motion: approve the use of up to 15,000 USD by Quansight for work on
>>> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>>>
>>> Starting with my +1,
>>>
>>> Even
>>>
>>> --
>>> http://www.spatialys.com
>>> My software is free, but my time generally not.
>>> Butcher of all kinds of standards, open or closed formats. At the end,
>>> this is just about bytes.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev at lists.osgeo.org
>>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>> --
>> Sean Gillies
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam at pobox.com
> light and sound - activate the windows | USA: +1 650-701-7823
> <http://voice.google.com/calls?a=nc,%2B16507017823>
> and watch the world go round - Rush    | CAN: +1 343-550-9984
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250102/7b9794b3/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Fri Jan  3 07:46:29 2025
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Fri, 3 Jan 2025 15:46:29 +0000
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <DB9PR09MB688768415224F0C66CA07C5BFD152@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: torstai 2. tammikuuta 2025 16.54
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: approve use of GSP funds for work on Conda build infrastructure

Hi,

Happy New Year to everyone!

PSC,

GDAL depends on conda-forge builds for a number of its continuous integration configurations, as well as offering builds of the master branch with the "gdal-master" conda channel
(https://gdal.org/en/stable/download.html#gdal-master-conda-builds)
which make them easily testable by users of the most common operating systems. We have identified a couple of points in the conda-forge infrastructure that are causing inconveniences to maintainers of the GDAL build recipe (and that also apply to other software package with similar complexity), in particular related to sub-package dependency pinning, and got a quote from Quansight to address them.

Motion: approve the use of up to 15,000 USD by Quansight for work on Conda build infrastructure, funded through the GDAL Sponsorhip program.

Starting with my +1,

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From even.rouault at spatialys.com  Mon Jan  6 07:14:27 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 Jan 2025 16:14:27 +0100
Subject: [gdal-dev] Motion: approve use of GSP funds for work on Conda
 build infrastructure
In-Reply-To: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
References: <4da0d7ac-e0f3-4d48-87b3-d8ef20f4d9e5@spatialys.com>
Message-ID: <febe1565-7403-476c-8c02-4a19e555e6de@spatialys.com>

Hi,

Motion passed with +1 from PSC members HowardB, DanielM, KurtS, DanB, 
SeanG, FrankW, NormanB, JukkaR and me.

Even

Le 02/01/2025 ? 15:54, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Happy New Year to everyone!
>
> PSC,
>
> GDAL depends on conda-forge builds for a number of its continuous 
> integration configurations, as well as offering builds of the master 
> branch with the "gdal-master" conda channel 
> (https://gdal.org/en/stable/download.html#gdal-master-conda-builds) 
> which make them easily testable by users of the most common operating 
> systems. We have identified a couple of points in the conda-forge 
> infrastructure that are causing inconveniences to maintainers of the 
> GDAL build recipe (and that also apply to other software package with 
> similar complexity), in particular related to sub-package dependency 
> pinning, and got a quote from Quansight to address them.
>
> Motion: approve the use of up to 15,000 USD by Quansight for work on 
> Conda build infrastructure, funded through the GDAL Sponsorhip program.
>
> Starting with my +1,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From even.rouault at spatialys.com  Mon Jan  6 09:43:48 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 Jan 2025 18:43:48 +0100
Subject: [gdal-dev] Updating value for Compression tag for JPEGXL in TIFF to
 the one of DNG 1.7 ?
Message-ID: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>

Hi,

Given that communication with Adobe in recent years has been similar to 
expecting to receive a signal from a black hole from outside its event 
horizon, up to now we have unilaterally attributed Compression=50002 to 
mean JPEGXL in TIFF. Recently I saw that the DNG 1.7 specification has 
registered value 52546 to mean JPEGXL in DNG 
(https://helpx.adobe.com/content/dam/help/en/photoshop/pdf/DNG_Spec_1_7_0_0.pdf 
, page 122). DNG is a derivative of the TIFF spec, so I guess/hope Adobe 
makes sure that tag & tag value numbers don't collide between base TIFF 
and DNG. So it would seem to me that switching to using the 52546 value 
would be more future proof than our self-assigned 50002. If so, I'd do 
the change in master to using 52546 on write side and accepting both 
50002 and 52546 on read side, and backport read support for 52546 in 3.10

(this is mostly a GDAL-only topic for now given that the JPEGXL TIFF 
codec is for the internal libtiff copy only)

Thoughts?

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From thomas.bonfort at gmail.com  Mon Jan  6 09:54:21 2025
From: thomas.bonfort at gmail.com (thomas bonfort)
Date: Mon, 6 Jan 2025 18:54:21 +0100
Subject: [gdal-dev] Updating value for Compression tag for JPEGXL in
 TIFF to the one of DNG 1.7 ?
In-Reply-To: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>
References: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>
Message-ID: <CAOM3y2ihBdk0Utm8hiu8KnwPWvu4vRearqZ7V8q+LZJajAWA4A@mail.gmail.com>

sounds good, +1

thanks,
TB

Le lun. 6 janv. 2025, 18:44, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> a ?crit :

> Hi,
>
> Given that communication with Adobe in recent years has been similar to
> expecting to receive a signal from a black hole from outside its event
> horizon, up to now we have unilaterally attributed Compression=50002 to
> mean JPEGXL in TIFF. Recently I saw that the DNG 1.7 specification has
> registered value 52546 to mean JPEGXL in DNG
> (
> https://helpx.adobe.com/content/dam/help/en/photoshop/pdf/DNG_Spec_1_7_0_0.pdf
> , page 122). DNG is a derivative of the TIFF spec, so I guess/hope Adobe
> makes sure that tag & tag value numbers don't collide between base TIFF
> and DNG. So it would seem to me that switching to using the 52546 value
> would be more future proof than our self-assigned 50002. If so, I'd do
> the change in master to using 52546 on write side and accepting both
> 50002 and 52546 on read side, and backport read support for 52546 in 3.10
>
> (this is mostly a GDAL-only topic for now given that the JPEGXL TIFF
> codec is for the internal libtiff copy only)
>
> Thoughts?
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250106/4eedbd01/attachment.htm>

From schwehr at gmail.com  Mon Jan  6 13:03:47 2025
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 6 Jan 2025 13:03:47 -0800
Subject: [gdal-dev] Updating value for Compression tag for JPEGXL in
 TIFF to the one of DNG 1.7 ?
In-Reply-To: <CAOM3y2ihBdk0Utm8hiu8KnwPWvu4vRearqZ7V8q+LZJajAWA4A@mail.gmail.com>
References: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>
 <CAOM3y2ihBdk0Utm8hiu8KnwPWvu4vRearqZ7V8q+LZJajAWA4A@mail.gmail.com>
Message-ID: <CACmBxyvt-a=aW+T_Q+-FCNcXFJro89z957Sv+ebLv1FVmaRcZw@mail.gmail.com>

Sounds good to me too (not that I really have the background to say so).

1. Are there any plans to contribute JPEGXL in tiff to
https://gitlab.com/libtiff/libtiff?
2. And what would one need to do to patch libtiff to use JPEGXL?

Thanks!

On Mon, Jan 6, 2025 at 9:54?AM thomas bonfort via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> sounds good, +1
>
> thanks,
> TB
>
> Le lun. 6 janv. 2025, 18:44, Even Rouault via gdal-dev <
> gdal-dev at lists.osgeo.org> a ?crit :
>
>> Hi,
>>
>> Given that communication with Adobe in recent years has been similar to
>> expecting to receive a signal from a black hole from outside its event
>> horizon, up to now we have unilaterally attributed Compression=50002 to
>> mean JPEGXL in TIFF. Recently I saw that the DNG 1.7 specification has
>> registered value 52546 to mean JPEGXL in DNG
>> (
>> https://helpx.adobe.com/content/dam/help/en/photoshop/pdf/DNG_Spec_1_7_0_0.pdf
>> , page 122). DNG is a derivative of the TIFF spec, so I guess/hope Adobe
>> makes sure that tag & tag value numbers don't collide between base TIFF
>> and DNG. So it would seem to me that switching to using the 52546 value
>> would be more future proof than our self-assigned 50002. If so, I'd do
>> the change in master to using 52546 on write side and accepting both
>> 50002 and 52546 on read side, and backport read support for 52546 in 3.10
>>
>> (this is mostly a GDAL-only topic for now given that the JPEGXL TIFF
>> codec is for the internal libtiff copy only)
>>
>> Thoughts?
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> Butcher of all kinds of standards, open or closed formats. At the end,
>> this is just about bytes.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250106/f51dc2ea/attachment.htm>

From even.rouault at spatialys.com  Mon Jan  6 13:12:06 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 6 Jan 2025 22:12:06 +0100
Subject: [gdal-dev] Updating value for Compression tag for JPEGXL in
 TIFF to the one of DNG 1.7 ?
In-Reply-To: <CACmBxyvt-a=aW+T_Q+-FCNcXFJro89z957Sv+ebLv1FVmaRcZw@mail.gmail.com>
References: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>
 <CAOM3y2ihBdk0Utm8hiu8KnwPWvu4vRearqZ7V8q+LZJajAWA4A@mail.gmail.com>
 <CACmBxyvt-a=aW+T_Q+-FCNcXFJro89z957Sv+ebLv1FVmaRcZw@mail.gmail.com>
Message-ID: <e053df9c-2ee3-460b-8b3a-0822d6d751c4@spatialys.com>


Le 06/01/2025 ? 22:03, Kurt Schwehr a ?crit?:
> Sounds good to me too (not that I really have the background to say so).

master PR: https://github.com/OSGeo/gdal/pull/11586

3.10 partial backport PR: https://github.com/OSGeo/gdal/pull/11587

>
> 1. Are there any plans to contribute JPEGXL in tiff to 
> https://gitlab.com/libtiff/libtiff?
My plan was that we would do this once https://github.com/libjxl/libjxl/ 
has reached a 1.0 milestone, but I'm not sure if/when they'll be at that 
point.
> 2. And what would one need to do to patch libtiff to use JPEGXL?

Copy frmts/gtiff/tif_jxl.c into libtiff sources, register it in 
tif_codec.c and add support for libjxl detection in libtiff autoconf & cmake

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From dklaus at carlsonsw.com  Mon Jan  6 14:53:51 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 6 Jan 2025 17:53:51 -0500
Subject: [gdal-dev] Improving GDAL production in our release
Message-ID: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>

Dear GDAL-DEV Community,

I apologize if this isn?t the right forum for this inquiry. If so, please
feel free to disregard this email.

*Current Problem:*

I am reaching out for advice on streamlining the process my company uses to
produce new versions of GDAL for our releases. Currently, we maintain a
batch file that handles some preliminary setup tasks and then initiates a
custom GDAL build using CMake. Unfortunately, this process has become
overly complex and challenging to maintain. Developers find it cumbersome
and even when the process is followed correctly, it often requires
additional work for each release. This eats up valuable development time
and isn't very fun for our developers.

*Why We Build GDAL Ourselves:*

Our program has a number of unique requirements which we haven't been able
to satisfy through any means besides a custom build. Further we haven't
found a means of generating a custom build besides what I outlined above. A
key example of this is our use of the Proj library.

In our builds, we statically link the Proj library into GDAL. This approach
is necessary because our product integrates with other environments that
often include their own GDAL builds. In the past, dynamically linking the
Proj library caused significant issues: these other environments would
sometimes load their Proj dll in such a way that our GDAL would mistake
their Proj dll for ours and attempt to use it. This mismatch resulted in
crashes for our users.

To address this problem and meet our other requirements, we opted for
custom GDAL builds.

*Any help would be appreciated:*

So, given the challenges of maintaining our current custom build process,
we are exploring simpler alternatives for producing a GDAL that meets our
needs. However, our research hasn't yet yielded actionable improvements. We
would greatly appreciate any advice, recommendations, or insights the
community can offer that might help.

Thank you for your time and assistance,


-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250106/224f1ca2/attachment.htm>

From gdt at lexort.com  Mon Jan  6 15:09:07 2025
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 06 Jan 2025 18:09:07 -0500
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
 (David Klaus via gdal-dev's message of "Mon, 6 Jan 2025 17:53:51
 -0500")
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
Message-ID: <rmi8qrn5ylo.fsf@s1.lexort.com>

David Klaus via gdal-dev <gdal-dev at lists.osgeo.org> writes:

> I am reaching out for advice on streamlining the process my company uses to
> produce new versions of GDAL for our releases. Currently, we maintain a
> batch file that handles some preliminary setup tasks and then initiates a
> custom GDAL build using CMake. Unfortunately, this process has become
> overly complex and challenging to maintain. Developers find it cumbersome
> and even when the process is followed correctly, it often requires
> additional work for each release. 

You didn't explain whether you are doing import/merge and carrying diffs
to the sources, and if so, you didn't give a link where others can look
at them.

You didn't publish a link to the scripts you are using.

You didn't explain the problems you are having, just that it's hard.

I, and probably others, have scripts that basically set up -I/-L/-R for
prereqs and run cmake, to be able to build/install-to-destdir/test
various things.   These are often only 100 lines, 2/3 comments, and
don't cause me trouble.

> This eats up valuable development time and isn't very fun for our
> developers.

I hope you are contributing funds to GDAL!  I know that can be hard in a
corporate environment....


From andrew.bell.ia at gmail.com  Mon Jan  6 15:29:15 2025
From: andrew.bell.ia at gmail.com (Andrew Bell)
Date: Mon, 6 Jan 2025 18:29:15 -0500
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
Message-ID: <CACJ51z1O0SG3eiMpFACnPp_pUU4p1QzH_pB1Pk_Cs63r7P8-0w@mail.gmail.com>

Hi David,

It's not clear what the issues are that you're having. Some specifics
as to the details of your problems would help.

On Mon, Jan 6, 2025 at 6:16?PM David Klaus via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
> Dear GDAL-DEV Community,
>
> I apologize if this isn?t the right forum for this inquiry. If so, please feel free to disregard this email.
>
> Current Problem:
>
> I am reaching out for advice on streamlining the process my company uses to produce new versions of GDAL for our releases. Currently, we maintain a batch file that handles some preliminary setup tasks and then initiates a custom GDAL build using CMake. Unfortunately, this process has become overly complex and challenging to maintain. Developers find it cumbersome and even when the process is followed correctly, it often requires additional work for each release. This eats up valuable development time and isn't very fun for our developers.
>
> Why We Build GDAL Ourselves:
>
> Our program has a number of unique requirements which we haven't been able to satisfy through any means besides a custom build. Further we haven't found a means of generating a custom build besides what I outlined above. A key example of this is our use of the Proj library.
>
> In our builds, we statically link the Proj library into GDAL. This approach is necessary because our product integrates with other environments that often include their own GDAL builds. In the past, dynamically linking the Proj library caused significant issues: these other environments would sometimes load their Proj dll in such a way that our GDAL would mistake their Proj dll for ours and attempt to use it. This mismatch resulted in crashes for our users.
>
> To address this problem and meet our other requirements, we opted for custom GDAL builds.
>
> Any help would be appreciated:
>
> So, given the challenges of maintaining our current custom build process, we are exploring simpler alternatives for producing a GDAL that meets our needs. However, our research hasn't yet yielded actionable improvements. We would greatly appreciate any advice, recommendations, or insights the community can offer that might help.
>
> Thank you for your time and assistance,
>
>
> --
> David Klaus
> Carlson Software
>
>
> Disclaimer
>
> The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev



-- 
Andrew Bell
andrew.bell.ia at gmail.com

From dklaus at carlsonsw.com  Mon Jan  6 15:34:21 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 6 Jan 2025 18:34:21 -0500
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <rmi8qrn5ylo.fsf@s1.lexort.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
 <rmi8qrn5ylo.fsf@s1.lexort.com>
Message-ID: <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>

Greg,

Thank you for your fast response.

Q: You didn't explain whether you are doing import/merge and carrying diffs
to the sources, and if so, you didn't give a link where others can look at
them.

A: I apologize if I misunderstand your questions. I think you are asking
whether or not anyone at our company has modified any of the source GDAL
source files or if we are maintaining our own distribution of the source
code. If this is the question, the answer is no.

Q: You didn't publish a link to the scripts you are using.

A: Personally, I have no problem with sharing the scripts we currently use.
I will speak with my boss on whether it would be acceptable to share those
here.

Q: You didn't explain the problems you are having, just that it's hard.

A: My apologies. The problem is that modifying our current scripts in order
to produce a new build of GDAL takes a significant amount of development
time. For example, I am currently working on building Proj-9.5.1 as part of
our new GDAL build and I'm running into trouble linking "tiff" libraries.
This is not likely irreconcilable but it takes time. I see how this can be
difficult to understand without looking at our current build process. I
will discuss this with my boss.

Q: I hope you are contributing funds to GDAL!  I know that can be hard in a
corporate environment....

A: Of course I have no problem contributing my corporation's money to GDAL.
Unfortunately, that's why I don't get to make those decisions. However, I
will discuss this with my boss. Hopefully, I can persuade him,

P.S. You mention the following:

"I, and probably others, have scripts that basically set up -I/-L/-R for
prereqs and run cmake, to be able to build/install-to-destdir/test various
things.   These are often only 100 lines, 2/3 comments, and don't cause me
trouble."

It sounds like your solution for generating up-to-date GDAL builds is
rather streamlined. Currently we are working on updating our current build
to GDAL 3.10.0. Were you to do the same how long would you estimate this
update would take? Also, is there any chance you could share any of your
scripts so I could compare them to ours?



On Mon, Jan 6, 2025 at 6:09?PM Greg Troxel via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> David Klaus via gdal-dev <gdal-dev at lists.osgeo.org> writes:
>
> > I am reaching out for advice on streamlining the process my company uses
> to
> > produce new versions of GDAL for our releases. Currently, we maintain a
> > batch file that handles some preliminary setup tasks and then initiates a
> > custom GDAL build using CMake. Unfortunately, this process has become
> > overly complex and challenging to maintain. Developers find it cumbersome
> > and even when the process is followed correctly, it often requires
> > additional work for each release.
>
> You didn't explain whether you are doing import/merge and carrying diffs
> to the sources, and if so, you didn't give a link where others can look
> at them.
>
> You didn't publish a link to the scripts you are using.
>
> You didn't explain the problems you are having, just that it's hard.
>
> I, and probably others, have scripts that basically set up -I/-L/-R for
> prereqs and run cmake, to be able to build/install-to-destdir/test
> various things.   These are often only 100 lines, 2/3 comments, and
> don't cause me trouble.
>
> > This eats up valuable development time and isn't very fun for our
> > developers.
>
> I hope you are contributing funds to GDAL!  I know that can be hard in a
> corporate environment....
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>

-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250106/2c9cb93e/attachment-0001.htm>

From schwehr at gmail.com  Mon Jan  6 15:42:18 2025
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 6 Jan 2025 15:42:18 -0800
Subject: [gdal-dev] Updating value for Compression tag for JPEGXL in
 TIFF to the one of DNG 1.7 ?
In-Reply-To: <e053df9c-2ee3-460b-8b3a-0822d6d751c4@spatialys.com>
References: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>
 <CAOM3y2ihBdk0Utm8hiu8KnwPWvu4vRearqZ7V8q+LZJajAWA4A@mail.gmail.com>
 <CACmBxyvt-a=aW+T_Q+-FCNcXFJro89z957Sv+ebLv1FVmaRcZw@mail.gmail.com>
 <e053df9c-2ee3-460b-8b3a-0822d6d751c4@spatialys.com>
Message-ID: <CACmBxyuAUVgmR8r61zdUuRt0FV0iCiShiXfZFiOftLEa85cODw@mail.gmail.com>

Thanks Even!

The overtired me kept overlooking frmts/gtiff/tif_jxl.c.

I will give it a go.

On Mon, Jan 6, 2025 at 1:12?PM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 06/01/2025 ? 22:03, Kurt Schwehr a ?crit :
> > Sounds good to me too (not that I really have the background to say so).
>
> master PR: https://github.com/OSGeo/gdal/pull/11586
>
> 3.10 partial backport PR: https://github.com/OSGeo/gdal/pull/11587
>
> >
> > 1. Are there any plans to contribute JPEGXL in tiff to
> > https://gitlab.com/libtiff/libtiff?
> My plan was that we would do this once https://github.com/libjxl/libjxl/
> has reached a 1.0 milestone, but I'm not sure if/when they'll be at that
> point.
> > 2. And what would one need to do to patch libtiff to use JPEGXL?
>
> Copy frmts/gtiff/tif_jxl.c into libtiff sources, register it in
> tif_codec.c and add support for libjxl detection in libtiff autoconf &
> cmake
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250106/2a241429/attachment.htm>

From gdt at lexort.com  Mon Jan  6 15:52:21 2025
From: gdt at lexort.com (Greg Troxel)
Date: Mon, 06 Jan 2025 18:52:21 -0500
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>
 (David Klaus's message of "Mon, 6 Jan 2025 18:34:21 -0500")
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
 <rmi8qrn5ylo.fsf@s1.lexort.com>
 <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>
Message-ID: <rmiv7ur4i16.fsf@s1.lexort.com>

David Klaus <dklaus at carlsonsw.com> writes:

> Thank you for your fast response.
>
> Q: You didn't explain whether you are doing import/merge and carrying diffs
> to the sources, and if so, you didn't give a link where others can look at
> them.
>
> A: I apologize if I misunderstand your questions. I think you are asking
> whether or not anyone at our company has modified any of the source GDAL
> source files or if we are maintaining our own distribution of the source
> code. If this is the question, the answer is no.

That makes things easier.

> Q: You didn't publish a link to the scripts you are using.
>
> A: Personally, I have no problem with sharing the scripts we currently use.
> I will speak with my boss on whether it would be acceptable to share those
> here.

Having been at a large company, I understand.  But nobody here will be
able to give you advice without reading your script.  And, if you want
help making your build process better under nondisclosure, you'll need a
consultant rather than help from the list.

> Q: You didn't explain the problems you are having, just that it's hard.
>
> A: My apologies. The problem is that modifying our current scripts in order
> to produce a new build of GDAL takes a significant amount of development
> time. For example, I am currently working on building Proj-9.5.1 as part of
> our new GDAL build and I'm running into trouble linking "tiff" libraries.
> This is not likely irreconcilable but it takes time. I see how this can be
> difficult to understand without looking at our current build process. I
> will discuss this with my boss.

My quick guess is that you are reinventing a packaging system and that
the last 10% is hard.  That's a little glib, but it sounds like various
paths.  You might consider using a packaging system, and using a
different prefix than the regulsr /usr.

You may also want to be very rigorous and organized about -I and -L/-R
(-R may be spelled something like -Wl,-rpath).

> Q: I hope you are contributing funds to GDAL!  I know that can be hard in a
> corporate environment....
>
> A: Of course I have no problem contributing my corporation's money to GDAL.
> Unfortunately, that's why I don't get to make those decisions. However, I
> will discuss this with my boss. Hopefully, I can persuade him,

You might consider how much the company would pay annually for a
proprietary license for code of equivalent breadth and quality to gdal,
proj, etc.  You might look at Oracle's fees, or ESRI's.  And then ask
management to take 10% of that and donate annually.  What I have always
found is that companies are ok paying huge amounts of money for
proprietary licenses, but even with free software advocates inside, it's
amazingly difficult to donate.

> P.S. You mention the following:
>
> "I, and probably others, have scripts that basically set up -I/-L/-R for
> prereqs and run cmake, to be able to build/install-to-destdir/test various
> things.   These are often only 100 lines, 2/3 comments, and don't cause me
> trouble."
>
> It sounds like your solution for generating up-to-date GDAL builds is
> rather streamlined. Currently we are working on updating our current build
> to GDAL 3.10.0. Were you to do the same how long would you estimate this
> update would take? Also, is there any chance you could share any of your
> scripts so I could compare them to ours?

This is not baked, and not up to date.  For example it uses python 3.10
for docs, and while pkgsrc can still build that, I'm on 3.12 and
thinking about 3.13.  It is not up to date because I haven't had to run
it lately.  I am the maintainer of gdal in pkgsrc, and I update there,
and if that build works and passes tests, I don't need to build it
outside of pkgsrc.   For a while I was chasing a few portability issues,
and some floating point stuff, but now there's very little trouble.

But, I am not statically linking, and I am living in a world where the
dependencies all come from pkgsrc.  I typically build like this to check
git master for portability bugs that have crept in (test ==, assuming
things not required by POSIX, etc.) and to see if tests still pass (new
tests are added, and floating point is hard :-).

The last part is creating a distfile -- what the project would release
so I can run that through packaging.

Typically, for a new version, there's very little if anything I do.  I'd
say if things build and test with no issues, it's 15 minutes of work.
If there are build/test issues, those dominate the effort and updating
the script is in the noise.

(I have similar scripts for autoconf projects; same concept different
spelling of build commands.)

#!/bin/sh

VERSION=3.6.0.dev0

if [ -d $HOME/bin/ccache ]; then
    echo "enabling ccache"
    ccache -z
    PATH=$HOME/bin/ccache:$PATH
fi

## 

PREFIX=/usr/pkg
LIBDIR=${PREFIX}/lib

# In theory, BSD make is ok.
MAKE=make 

# \todo Debug poppler includes not found.

(rm -rf build destdir &&
     mkdir build &&
     cd build &&
     cmake .. \
	   -LH \
           -DCMAKE_COLOR_MAKEFILE=false \
	   -DCMAKE_INSTALL_PREFIX=${PREFIX} \
	   -DCMAKE_INSTALL_RPATH=${LIBDIR} \
	   > OUT.00.cmake 2>&1 &&
     time ${MAKE} VERBOSE=1  > OUT.10.make 2>&1 &&
     (time ${MAKE} check > OUT.20.check 2>&1 || true) && \
     time ${MAKE} DESTDIR=../destdir install > OUT.30.install 2>&1 && \
     echo BUILD DONE
)

## Create a distfile for pkgsrc testing.

# Set up tool variables.
export MAKE=gmake
export PYTHON=python3.10
export SPHINXBUILD=sphinx-build-3.10
# Remediate use of tools without search or variables.
PATH=/home/gdt/bin/GDAL:$PATH

(time ./mkgdaldist.sh ${VERSION} -url https://github.com/gdt/gdal > OUT.40.mkgdaldist 2>&1 &&
     cp -p gdal-${VERSION}.tar.xz /usr/pkgsrc/distfiles &&
     echo "COPIED DISTFILE")

From andrew at aitchison.me.uk  Mon Jan  6 16:44:40 2025
From: andrew at aitchison.me.uk (Andrew C Aitchison)
Date: Tue, 7 Jan 2025 00:44:40 +0000 (GMT)
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
Message-ID: <df9f4f0c-5542-de00-355e-2a0429dd9926@aitchison.me.uk>

On Mon, 6 Jan 2025, David Klaus via gdal-dev wrote:

> So, given the challenges of maintaining our current custom build process,
> we are exploring simpler alternatives for producing a GDAL that meets our
> needs. However, our research hasn't yet yielded actionable improvements.
> We would greatly appreciate any advice, recommendations, or insights the
> community can offer that might help.

I wonder whether the github build scripts might contain useful hints ?
They can be found in .github/workflows in the gdal github source.

-- 
Andrew C. Aitchison                      Kendal, UK
                    andrew at aitchison.me.uk

From schwehr at gmail.com  Mon Jan  6 18:42:27 2025
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 6 Jan 2025 18:42:27 -0800
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <rmiv7ur4i16.fsf@s1.lexort.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
 <rmi8qrn5ylo.fsf@s1.lexort.com>
 <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>
 <rmiv7ur4i16.fsf@s1.lexort.com>
Message-ID: <CACmBxyt5FXSWAtzX1SrrCczAqAOOhyrF8cR2Eg7QHwssgyrCzQ@mail.gmail.com>

Packaging is hard. There are all sorts of sharp edges. I don't work in the
windows world much at all, so I can't comment on the packaging there, but
there are many package mangers that provide GDAL. And many of us who do
packaging share ideas and fixes across packaging. I personally do bazel
builds that are mostly focused on linux.

(please don't read anything into the order here :)

https://conan.io/center/recipes/gdal
https://anaconda.org/conda-forge/gdal
https://github.com/fink/fink-distributions/blob/master/10.9-libcxx/stable/main/finkinfo/libs/gdal3.info
for MacOSX
https://ports.macports.org/port/gdal/
https://formulae.brew.sh/formula/gdal
https://rpmfind.net/linux/rpm2html/search.php?query=gdal
https://wiki.debian.org/DebianGis
...

Or things that bring in GDAL:

https://rasterio.readthedocs.io/en/stable/installation.html has binary
wheels
https://www.qgis.org/
(and probably some other GIS packages bring along GDAL)
...

I've also collaborated on bash scripts to do custom builds of GDAL. It's a
diverse ecosystem.

-kurt

On Mon, Jan 6, 2025 at 3:52?PM Greg Troxel via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> David Klaus <dklaus at carlsonsw.com> writes:
>
> > Thank you for your fast response.
> >
> > Q: You didn't explain whether you are doing import/merge and carrying
> diffs
> > to the sources, and if so, you didn't give a link where others can look
> at
> > them.
> >
> > A: I apologize if I misunderstand your questions. I think you are asking
> > whether or not anyone at our company has modified any of the source GDAL
> > source files or if we are maintaining our own distribution of the source
> > code. If this is the question, the answer is no.
>
> That makes things easier.
>
> > Q: You didn't publish a link to the scripts you are using.
> >
> > A: Personally, I have no problem with sharing the scripts we currently
> use.
> > I will speak with my boss on whether it would be acceptable to share
> those
> > here.
>
> Having been at a large company, I understand.  But nobody here will be
> able to give you advice without reading your script.  And, if you want
> help making your build process better under nondisclosure, you'll need a
> consultant rather than help from the list.
>
> > Q: You didn't explain the problems you are having, just that it's hard.
> >
> > A: My apologies. The problem is that modifying our current scripts in
> order
> > to produce a new build of GDAL takes a significant amount of development
> > time. For example, I am currently working on building Proj-9.5.1 as part
> of
> > our new GDAL build and I'm running into trouble linking "tiff" libraries.
> > This is not likely irreconcilable but it takes time. I see how this can
> be
> > difficult to understand without looking at our current build process. I
> > will discuss this with my boss.
>
> My quick guess is that you are reinventing a packaging system and that
> the last 10% is hard.  That's a little glib, but it sounds like various
> paths.  You might consider using a packaging system, and using a
> different prefix than the regulsr /usr.
>
> You may also want to be very rigorous and organized about -I and -L/-R
> (-R may be spelled something like -Wl,-rpath).
>
> > Q: I hope you are contributing funds to GDAL!  I know that can be hard
> in a
> > corporate environment....
> >
> > A: Of course I have no problem contributing my corporation's money to
> GDAL.
> > Unfortunately, that's why I don't get to make those decisions. However, I
> > will discuss this with my boss. Hopefully, I can persuade him,
>
> You might consider how much the company would pay annually for a
> proprietary license for code of equivalent breadth and quality to gdal,
> proj, etc.  You might look at Oracle's fees, or ESRI's.  And then ask
> management to take 10% of that and donate annually.  What I have always
> found is that companies are ok paying huge amounts of money for
> proprietary licenses, but even with free software advocates inside, it's
> amazingly difficult to donate.
>
> > P.S. You mention the following:
> >
> > "I, and probably others, have scripts that basically set up -I/-L/-R for
> > prereqs and run cmake, to be able to build/install-to-destdir/test
> various
> > things.   These are often only 100 lines, 2/3 comments, and don't cause
> me
> > trouble."
> >
> > It sounds like your solution for generating up-to-date GDAL builds is
> > rather streamlined. Currently we are working on updating our current
> build
> > to GDAL 3.10.0. Were you to do the same how long would you estimate this
> > update would take? Also, is there any chance you could share any of your
> > scripts so I could compare them to ours?
>
> This is not baked, and not up to date.  For example it uses python 3.10
> for docs, and while pkgsrc can still build that, I'm on 3.12 and
> thinking about 3.13.  It is not up to date because I haven't had to run
> it lately.  I am the maintainer of gdal in pkgsrc, and I update there,
> and if that build works and passes tests, I don't need to build it
> outside of pkgsrc.   For a while I was chasing a few portability issues,
> and some floating point stuff, but now there's very little trouble.
>
> But, I am not statically linking, and I am living in a world where the
> dependencies all come from pkgsrc.  I typically build like this to check
> git master for portability bugs that have crept in (test ==, assuming
> things not required by POSIX, etc.) and to see if tests still pass (new
> tests are added, and floating point is hard :-).
>
> The last part is creating a distfile -- what the project would release
> so I can run that through packaging.
>
> Typically, for a new version, there's very little if anything I do.  I'd
> say if things build and test with no issues, it's 15 minutes of work.
> If there are build/test issues, those dominate the effort and updating
> the script is in the noise.
>
> (I have similar scripts for autoconf projects; same concept different
> spelling of build commands.)
>
> #!/bin/sh
>
> VERSION=3.6.0.dev0
>
> if [ -d $HOME/bin/ccache ]; then
>     echo "enabling ccache"
>     ccache -z
>     PATH=$HOME/bin/ccache:$PATH
> fi
>
> ##
>
> PREFIX=/usr/pkg
> LIBDIR=${PREFIX}/lib
>
> # In theory, BSD make is ok.
> MAKE=make
>
> # \todo Debug poppler includes not found.
>
> (rm -rf build destdir &&
>      mkdir build &&
>      cd build &&
>      cmake .. \
>            -LH \
>            -DCMAKE_COLOR_MAKEFILE=false \
>            -DCMAKE_INSTALL_PREFIX=${PREFIX} \
>            -DCMAKE_INSTALL_RPATH=${LIBDIR} \
>            > OUT.00.cmake 2>&1 &&
>      time ${MAKE} VERBOSE=1  > OUT.10.make 2>&1 &&
>      (time ${MAKE} check > OUT.20.check 2>&1 || true) && \
>      time ${MAKE} DESTDIR=../destdir install > OUT.30.install 2>&1 && \
>      echo BUILD DONE
> )
>
> ## Create a distfile for pkgsrc testing.
>
> # Set up tool variables.
> export MAKE=gmake
> export PYTHON=python3.10
> export SPHINXBUILD=sphinx-build-3.10
> # Remediate use of tools without search or variables.
> PATH=/home/gdt/bin/GDAL:$PATH
>
> (time ./mkgdaldist.sh ${VERSION} -url https://github.com/gdt/gdal >
> OUT.40.mkgdaldist 2>&1 &&
>      cp -p gdal-${VERSION}.tar.xz /usr/pkgsrc/distfiles &&
>      echo "COPIED DISTFILE")
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250106/fdf1a4f2/attachment-0001.htm>

From dg0yt at darc.de  Mon Jan  6 22:23:31 2025
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Tue, 7 Jan 2025 07:23:31 +0100
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
Message-ID: <bacad532-0c44-4bd3-b922-e727991f2e3e@darc.de>

> In our builds, we statically link the Proj library into GDAL. This 
> approach is necessary because our product integrates with other 
> environments that often include their own GDAL builds. In the past, 
> dynamically linking the Proj library caused significant issues: these 
> other environments would sometimes load their Proj dll in such a way 
> that our GDAL would mistake their Proj dll for ours and attempt to use 
> it. This mismatch resulted in crashes for our users.
>
> To address this problem and meet our other requirements, we opted for 
> custom GDAL builds.

Isn't it enough to take a static build of PROJ and let GDAL find the 
exorted CMake config?

FTR in vcpkg, it is possible to override the desired library linkage for 
individual packages (with triplet customization). Basically it should be 
fairly easy to test the desired combination.
(Difficulties would start with (proprietary) formats which are not 
handled in the recipes.)

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250107/8244b58e/attachment.htm>

From robert.coup at koordinates.com  Tue Jan  7 02:28:54 2025
From: robert.coup at koordinates.com (Robert Coup)
Date: Tue, 7 Jan 2025 10:28:54 +0000
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
 <rmi8qrn5ylo.fsf@s1.lexort.com>
 <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>
Message-ID: <CAFLLRp+27LjC25EZAzHTKm0iVG2gjuX_+=j+EJnndHfBS7BOjg@mail.gmail.com>

Hi,

Depending on what you need, I've found using VCPKG (https://vcpkg.io/en/)
can make it straightforward to address the dependencies *of* GDAL, and it's
all driven by CMake underneath, like GDAL's builds. Importantly, it is well
tested and supported on Windows. That means you end up spending your time
on GDAL/PROJ rather than why libpng or another sub-dependency isn't
building properly.

And if you don't need to track GDAL/PROJ super-closely, VCPKG itself mostly
tracks recent releases (eg: right now GDAL 3.10 and PROJ 9.5.1). It does
have a bit of a learning curve though; and things like python bindings add
extra complexity.

HTH,

Rob :)
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250107/eca4ab09/attachment.htm>

From even.rouault at spatialys.com  Tue Jan  7 06:32:29 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Jan 2025 15:32:29 +0100
Subject: [gdal-dev] GDAL 3.10.1 release candidate available
Message-ID: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>

Hi,

I have prepared a GDAL/OGR 3.10.1 release candidate.

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
 ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
 ? https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From scottyh at uw.edu  Tue Jan  7 05:52:37 2025
From: scottyh at uw.edu (Scott Henderson)
Date: Tue, 7 Jan 2025 14:52:37 +0100
Subject: [gdal-dev] Can valid cloud-optimized geotiffs have non-sequential
 tile ordering?
Message-ID: <6C83F1D1-D909-4453-A822-4F1EAFB7C8CC@uw.edu>

I?m accustomed to GeoTiff files having row-wise sequential layout of image tiles (and I was under the impression that GDAL assumes this for merging range requests)?

But I recently noticed a lot of excess GET requests working with SRTM data that passes COG validation scripts:
> https://opentopography.s3.sdsc.edu/raster/SRTM_GL1/SRTM_GL1_srtm/N59W102.tif

These files seem to have TileOffsets scattered about (for example here is excerpt from tiffdump:  TileOffsets (324) LONG (4) 64<2269213 2409502 3485315 2716342 ?)

I believe this odd layout is causing the many GET requests to access this data, for example:
CPL_DEBUG=ON gdal_translate -srcwin 0 0 1024 512 /vsicurl/https://opentopography.s3.sdsc.edu/raster/SRTM_GL1/SRTM_GL1_srtm/N59W102.tif test.tif

Since a key aspect of COGs is efficient network access, shouldn?t this file not be considered a COG? 

------------------------------
Scott Henderson
Research Scientist, Earth & Space Sciences
Data Science Fellow, eScience Institute 
Johnson Hall 251
University of Washington
http://scottyhq.github.io

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250107/84f3a9c0/attachment.htm>

From even.rouault at spatialys.com  Tue Jan  7 08:23:22 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Jan 2025 17:23:22 +0100
Subject: [gdal-dev] Can valid cloud-optimized geotiffs have
 non-sequential tile ordering?
In-Reply-To: <6C83F1D1-D909-4453-A822-4F1EAFB7C8CC@uw.edu>
References: <6C83F1D1-D909-4453-A822-4F1EAFB7C8CC@uw.edu>
Message-ID: <5e74047b-ebaa-4d5d-87bd-e4382254c351@spatialys.com>

Scott,

>
> Since a key aspect of COGs is efficient network access, shouldn?t this 
> file not be considered a COG?

The row-major order (that is tiles are sorted from top-to-bottom, 
left-to-right) used by the GDAL COG driver is one of the many possible 
ways of having spatial contiguity being omewhat reflected in a file 
linear organization. But someone could also possibly use other ordering 
techniques, like Hilbert curves or other space-filling curves 
(https://en.wikipedia.org/wiki/Space-filling_curve), to also achieve 
that purpose. Hence COG hasn't standardized on that. You could possibly 
open an issue related to that at 
https://github.com/opengeospatial/CloudOptimizedGeoTIFF/issues

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From sean.gillies at gmail.com  Tue Jan  7 08:44:47 2025
From: sean.gillies at gmail.com (Sean Gillies)
Date: Tue, 7 Jan 2025 09:44:47 -0700
Subject: [gdal-dev] GDAL 3.10.1 release candidate available
In-Reply-To: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
Message-ID: <CAOodmJocamac=UqWD+UZCAOb1G3ucQQmBs0=qfzorb1DPzWwMQ@mail.gmail.com>

Looks good from the perspective of Rasterio, Even:
https://github.com/rasterio/rasterio/actions/runs/12654697105.

On Tue, Jan 7, 2025 at 8:56?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> I have prepared a GDAL/OGR 3.10.1 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
>    https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
>    https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
>
> The NEWS file is here:
>
>    https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
>
> Best regards,
>
> Even
>

-- 
Sean Gillies
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250107/823eee7c/attachment.htm>

From scottyh at uw.edu  Tue Jan  7 09:33:52 2025
From: scottyh at uw.edu (Scott Henderson)
Date: Tue, 7 Jan 2025 18:33:52 +0100
Subject: [gdal-dev] Can valid cloud-optimized geotiffs have
 non-sequential tile ordering?
In-Reply-To: <5e74047b-ebaa-4d5d-87bd-e4382254c351@spatialys.com>
References: <6C83F1D1-D909-4453-A822-4F1EAFB7C8CC@uw.edu>
 <5e74047b-ebaa-4d5d-87bd-e4382254c351@spatialys.com>
Message-ID: <7E55AAB8-10E6-4147-9CC4-FCBD18E0D9B4@uw.edu>

Thanks for the speedy reply Even! I had not considered alternative tile layouts. I did open an issue here if others want to chime in:
https://github.com/opengeospatial/CloudOptimizedGeoTIFF/issues/37

Scott

> On 7. Jan 2025, at 17:23, Even Rouault <even.rouault at spatialys.com> wrote:
> 
> !-------------------------------------------------------------------|
> This Message Is From an Untrusted Sender
> You have not previously corresponded with this sender.
> See https://itconnect.uw.edu/email-tags for additional information.  Please contact the UW-IT Service Center, help at uw.edu 206.221.5000,
> for assistance.
> |-------------------------------------------------------------------!
> 
> Scott,
> 
>> 
>> Since a key aspect of COGs is efficient network access, shouldn?t this file not be considered a COG?
> 
> The row-major order (that is tiles are sorted from top-to-bottom, left-to-right) used by the GDAL COG driver is one of the many possible ways of having spatial contiguity being omewhat reflected in a file linear organization. But someone could also possibly use other ordering techniques, like Hilbert curves or other space-filling curves (https://urldefense.com/v3/__https://en.wikipedia.org/wiki/Space-filling_curve__;!!K-Hz7m0Vt54!i4fOZAt0f-88naUsZwCsp6e1BdUfWeKREt0dNnZ0vqcPG7bqrDQ1_hFy48k2UpLR2mF9A2VgJw1Ymj-5csiACJY$ ), to also achieve that purpose. Hence COG hasn't standardized on that. You could possibly open an issue related to that at https://urldefense.com/v3/__https://github.com/opengeospatial/CloudOptimizedGeoTIFF/issues__;!!K-Hz7m0Vt54!i4fOZAt0f-88naUsZwCsp6e1BdUfWeKREt0dNnZ0vqcPG7bqrDQ1_hFy48k2UpLR2mF9A2VgJw1Ymj-5bL6VEpU$ 
> Even
> 
> -- 
> https://urldefense.com/v3/__http://www.spatialys.com__;!!K-Hz7m0Vt54!i4fOZAt0f-88naUsZwCsp6e1BdUfWeKREt0dNnZ0vqcPG7bqrDQ1_hFy48k2UpLR2mF9A2VgJw1Ymj-5Cez20D4$ My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
> 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250107/6c5f1f06/attachment-0001.htm>

From edzer.pebesma at uni-muenster.de  Tue Jan  7 11:14:59 2025
From: edzer.pebesma at uni-muenster.de (Edzer Pebesma)
Date: Tue, 7 Jan 2025 20:14:59 +0100
Subject: [gdal-dev] GDAL 3.10.1 release candidate available
In-Reply-To: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
Message-ID: <1cbaff0d-4ba5-4675-be36-c12d224559d0@uni-muenster.de>

Even,

with the file in 
https://github.com/r-spatial/stars/raw/refs/heads/main/inst/nc/bcsd_obs_1999.nc

I had expected that

gdalinfo --config GDAL_NETCDF_REPORT_EXTRA_DIM_VALUES YES 
NETCDF:"bcsd_obs_1999.nc":pr

would output the NETCDF_DIM_time_VALUES metadata tag with the time 
values, but for some reason it doesn't.

Many regards,

On 07/01/2025 15:32, Even Rouault via gdal-dev wrote:
> Hi,
> 
> I have prepared a GDAL/OGR 3.10.1 release candidate.
> 
> Pick up an archive among the following ones (by ascending size):
> 
>  ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
>  ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
>  ? https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
> 
> A snapshot of the gdalautotest suite is also available:
> 
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
> 
> The NEWS file is here:
> 
>  ? https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
> 
> Best regards,
> 
> Even
> 

-- 
Edzer Pebesma (he/him)
Universit?t M?nster, Institute for Geoinformatics
Heisenbergstrasse 2, 48149 M?nster, Germany
Phone: +49 251 8333081


From even.rouault at spatialys.com  Tue Jan  7 12:34:35 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 7 Jan 2025 21:34:35 +0100
Subject: [gdal-dev] GDAL 3.10.1 release candidate available
In-Reply-To: <1cbaff0d-4ba5-4675-be36-c12d224559d0@uni-muenster.de>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
 <1cbaff0d-4ba5-4675-be36-c12d224559d0@uni-muenster.de>
Message-ID: <68bd97ff-d77e-4b3c-ac29-a29edb529e08@spatialys.com>

Hi Edzer,

thanks for the report. Fix in https://github.com/OSGeo/gdal/pull/11602. 
I'll re-issue tomorrow a RC2 with it (the config option should only be 
needed for remote datasets, not local ones, and it wasn't even working 
for local ones due to busted logic)

Even

Le 07/01/2025 ? 20:14, Edzer Pebesma via gdal-dev a ?crit?:
> Even,
>
> with the file in 
> https://github.com/r-spatial/stars/raw/refs/heads/main/inst/nc/bcsd_obs_1999.nc
>
> I had expected that
>
> gdalinfo --config GDAL_NETCDF_REPORT_EXTRA_DIM_VALUES YES 
> NETCDF:"bcsd_obs_1999.nc":pr
>
> would output the NETCDF_DIM_time_VALUES metadata tag with the time 
> values, but for some reason it doesn't.
>
> Many regards,
>
> On 07/01/2025 15:32, Even Rouault via gdal-dev wrote:
>> Hi,
>>
>> I have prepared a GDAL/OGR 3.10.1 release candidate.
>>
>> Pick up an archive among the following ones (by ascending size):
>>
>> ?? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
>> ?? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
>> ?? https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
>>
>> A snapshot of the gdalautotest suite is also available:
>>
>> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
>> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
>>
>> The NEWS file is here:
>>
>> ?? https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
>>
>> Best regards,
>>
>> Even
>>
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From dg0yt at darc.de  Tue Jan  7 20:32:40 2025
From: dg0yt at darc.de (Kai Pastor, DG0YT)
Date: Wed, 8 Jan 2025 05:32:40 +0100
Subject: [gdal-dev] GDAL 3.10.1 release candidate available
In-Reply-To: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
Message-ID: <7b70e987-ac81-4e0c-b07c-10530113eb5a@darc.de>

In vcpkg, I see downstream build errors for pdal, osgearth, gz-common5.
This seems to be related the GDAL_DEBUG changes, 
https://github.com/OSGeo/gdal/pull/11314, in the context of forward 
declarations in non-gdal code. It is probably visible only in debug 
builds. (Vcpkg builds debug and release.)

For pdal, the error is:

FAILED: CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o
/usr/bin/c++ -DGDAL_DEBUG -DH3_PREFIX="" -DH5_BUILT_AS_STATIC_LIB 
-DPROJ_DLL="" -DUNIX -Dpdalcpp_EXPORTS 
-I/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean 
-I/mnt/vcpkg-ci/b/pdal/x64-linux-dbg/include 
-I/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/vendor 
-I/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/vendor/nlohmann 
-I/mnt/vcpkg-ci/installed/x64-linux/include/libxml2 -isystem 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/vendor/kazhdan -isystem 
/mnt/vcpkg-ci/installed/x64-linux/include -isystem 
/mnt/vcpkg-ci/installed/x64-linux/include/eigen3 -isystem 
/mnt/vcpkg-ci/installed/x64-linux/include/utf8cpp -fPIC -g -std=c++17 
-fPIC -Wno-noexcept-type -Wno-class-memaccess -Wno-psabi 
-Wno-implicit-fallthrough -Wno-int-in-bool-context -Wno-dangling-else 
-Wall -Wextra -Wpointer-arith -Wcast-align -Wcast-qual 
-Wno-error=parentheses -Wno-error=cast-qual -Wredundant-decls 
-Wno-unused-parameter -Wno-unused-variable -Wno-long-long 
-Wno-unknown-pragmas -Wno-deprecated-declarations 
-fvisibility-inlines-hidden -fvisibility=hidden -MD -MT 
CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o -MF 
CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o.d -o 
CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o -c 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.cpp
In file included from 
/mnt/vcpkg-ci/installed/x64-linux/include/ogr_spatialref.h:20,
 ???????????????? from 
/mnt/vcpkg-ci/installed/x64-linux/include/ogr_geometry.h:23,
 ???????????????? from 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/private/Point.hpp:38,
 ???????????????? from 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.cpp:44:
/mnt/vcpkg-ci/installed/x64-linux/include/ogr_srs_api.h:430:39: error: 
conflicting declaration ?typedef struct OGRSpatialReferenceHS* 
OGRSpatialReferenceH?
 ? 430 | typedef struct OGRSpatialReferenceHS *OGRSpatialReferenceH;
 ????? |?????????????????????????????????????? ^~~~~~~~~~~~~~~~~~~~
In file included from 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/pdal/Polygon.hpp:39,
 ???????????????? from 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.hpp:41,
 ???????????????? from 
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.cpp:35:
/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/pdal/Geometry.hpp:44:7: 
note: previous declaration as ?using OGRSpatialReferenceH = void*?
 ?? 44 | using OGRSpatialReferenceH = void *;
 ????? |?????? ^~~~~~~~~~~~~~~~~~~~

The latter is from
https://github.com/PDAL/PDAL/blob/master/pdal/Geometry.hpp#L44
It doesn't reflect the impact of the former private DEBUG, now public 
GDAL_DEBUG.

Kai




Am 07.01.25 um 15:32 schrieb Even Rouault via gdal-dev:
> Hi,
>
> I have prepared a GDAL/OGR 3.10.1 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
> https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
> https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
> https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
>
> The NEWS file is here:
>
> https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
>
> Best regards,
>
> Even
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/424b6cc0/attachment.htm>

From even.rouault at spatialys.com  Tue Jan  7 21:00:39 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Jan 2025 06:00:39 +0100
Subject: [gdal-dev] GDAL 3.10.1 release candidate available
In-Reply-To: <7b70e987-ac81-4e0c-b07c-10530113eb5a@darc.de>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
 <7b70e987-ac81-4e0c-b07c-10530113eb5a@darc.de>
Message-ID: <2f2f3d0a-64ac-4f02-8953-e4452e17abd2@spatialys.com>

Hi Kai,

ok, I'm reverting PR 11314 for the 3.10 branch per 
https://github.com/OSGeo/gdal/pull/11608 as the change is obviously too 
invasive for a stable branch (Alessandro mentioned to me a similar issue 
when building QGIS). I'm keeping it in master 3.11.0dev for now. I've 
filed https://github.com/PDAL/PDAL/issues/4607 to PDAL

Even

Le 08/01/2025 ? 05:32, Kai Pastor, DG0YT via gdal-dev a ?crit?:
> In vcpkg, I see downstream build errors for pdal, osgearth, gz-common5.
> This seems to be related the GDAL_DEBUG changes, 
> https://github.com/OSGeo/gdal/pull/11314, in the context of forward 
> declarations in non-gdal code. It is probably visible only in debug 
> builds. (Vcpkg builds debug and release.)
>
> For pdal, the error is:
>
> FAILED: CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o
> /usr/bin/c++ -DGDAL_DEBUG -DH3_PREFIX="" -DH5_BUILT_AS_STATIC_LIB 
> -DPROJ_DLL="" -DUNIX -Dpdalcpp_EXPORTS 
> -I/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean 
> -I/mnt/vcpkg-ci/b/pdal/x64-linux-dbg/include 
> -I/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/vendor 
> -I/mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/vendor/nlohmann 
> -I/mnt/vcpkg-ci/installed/x64-linux/include/libxml2 -isystem 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/vendor/kazhdan 
> -isystem /mnt/vcpkg-ci/installed/x64-linux/include -isystem 
> /mnt/vcpkg-ci/installed/x64-linux/include/eigen3 -isystem 
> /mnt/vcpkg-ci/installed/x64-linux/include/utf8cpp -fPIC -g -std=c++17 
> -fPIC -Wno-noexcept-type -Wno-class-memaccess -Wno-psabi 
> -Wno-implicit-fallthrough -Wno-int-in-bool-context -Wno-dangling-else 
> -Wall -Wextra -Wpointer-arith -Wcast-align -Wcast-qual 
> -Wno-error=parentheses -Wno-error=cast-qual -Wredundant-decls 
> -Wno-unused-parameter -Wno-unused-variable -Wno-long-long 
> -Wno-unknown-pragmas -Wno-deprecated-declarations 
> -fvisibility-inlines-hidden -fvisibility=hidden -MD -MT 
> CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o -MF 
> CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o.d -o 
> CMakeFiles/pdalcpp.dir/filters/CropFilter.cpp.o -c 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.cpp
> In file included from 
> /mnt/vcpkg-ci/installed/x64-linux/include/ogr_spatialref.h:20,
> ???????????????? from 
> /mnt/vcpkg-ci/installed/x64-linux/include/ogr_geometry.h:23,
> ???????????????? from 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/private/Point.hpp:38,
> ???????????????? from 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.cpp:44:
> /mnt/vcpkg-ci/installed/x64-linux/include/ogr_srs_api.h:430:39: error: 
> conflicting declaration ?typedef struct OGRSpatialReferenceHS* 
> OGRSpatialReferenceH?
> ? 430 | typedef struct OGRSpatialReferenceHS *OGRSpatialReferenceH;
> ????? | ^~~~~~~~~~~~~~~~~~~~
> In file included from 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/pdal/Polygon.hpp:39,
> ???????????????? from 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.hpp:41,
> ???????????????? from 
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/filters/CropFilter.cpp:35:
> /mnt/vcpkg-ci/b/pdal/src/2.8.3-5021054830.clean/pdal/Geometry.hpp:44:7: 
> note: previous declaration as ?using OGRSpatialReferenceH = void*?
> ?? 44 | using OGRSpatialReferenceH = void *;
> ????? |?????? ^~~~~~~~~~~~~~~~~~~~
>
> The latter is from
> https://github.com/PDAL/PDAL/blob/master/pdal/Geometry.hpp#L44
> It doesn't reflect the impact of the former private DEBUG, now public 
> GDAL_DEBUG.
>
> Kai
>
>
>
>
> Am 07.01.25 um 15:32 schrieb Even Rouault via gdal-dev:
>> Hi,
>>
>> I have prepared a GDAL/OGR 3.10.1 release candidate.
>>
>> Pick up an archive among the following ones (by ascending size):
>>
>> https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
>> https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
>> https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
>>
>> A snapshot of the gdalautotest suite is also available:
>>
>> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
>> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
>>
>> The NEWS file is here:
>>
>> https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
>>
>> Best regards,
>>
>> Even
>>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From even.rouault at spatialys.com  Wed Jan  8 08:07:12 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Jan 2025 17:07:12 +0100
Subject: [gdal-dev] GDAL 3.10.1 RC2 is available (was Re: GDAL 3.10.1
 release candidate available)
In-Reply-To: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
Message-ID: <6d76e763-c836-455c-9bb6-12f22c76ad23@spatialys.com>

Hi,

Changes since RC1:
- revert "CMake: Export -DGDAL_DEBUG as PUBLIC for debug builds (#11311)"
- gml:CircleByCenterPoint: correctly take into account radius.uom for 
projected CRS
- swig/python/setup.py.in: fix exception when building a RC git tag

Pick up an archive among the following ones (by ascending size):

 ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc2.tar.xz
 ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc2.tar.gz
 ? https://download.osgeo.org/gdal/3.10.1/gdal3101rc2.zip

A snapshot of the gdalautotest suite is also available:

https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc2.tar.gz
https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc2.zip

The NEWS file is here:

 ? https://github.com/OSGeo/gdal/blob/v3.10.1RC2/NEWS.md

Even

Le 07/01/2025 ? 15:32, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> I have prepared a GDAL/OGR 3.10.1 release candidate.
>
> Pick up an archive among the following ones (by ascending size):
>
> ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
> ? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
> ? https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
>
> The NEWS file is here:
>
> ? https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
>
> Best regards,
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From scottyh at uw.edu  Wed Jan  8 08:44:36 2025
From: scottyh at uw.edu (Scott Henderson)
Date: Wed, 8 Jan 2025 17:44:36 +0100
Subject: [gdal-dev] Is it possible to write custom CRS WKTs within a GeoTiff?
Message-ID: <2729FB7D-0BB2-45A5-B209-BEADCEA83916@uw.edu>

Hello gdal-dev,

I?ve looked around for an answer to this one to no avail and would appreciate any insight from those more familiar with the GeoTiff format. I?d like to be able to store a custom WKT *inside GeoTiff metadata* rather than in an external PAM file. I?ve seen some solutions to add custom entries in the PROJ database to accomplish this, but is that really the only way?

Here is a motivating example, using a WKT that specifies a specific WGS84 realization for a given UTM zone:
```
INPUT=https://opentopography.s3.sdsc.edu/raster/COP30/COP30_hh/Copernicus_DSM_10_N38_00_W109_00_DEM.tif
OUTPUT=/tmp/Copernicus_DSM_10_N38_00_W109_00_DEM_UTM.tif

CPL_DEBUG=ON \
 GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR \
 gdalwarp -co GEOTIFF_VERSION=1.1 -overwrite -dstnodata 0 -r bilinear -tap -tr 30.0 30.0 -s_srs EPSG:7661 -t_srs utm12N_wgs1150.wkt $INPUT $OUTPUT
```

Here is the wkt, I?d like for it not to end up in a sidecar file where I might loose it, but embedded in the GTiff:
```
PROJCRS["WGS84 (G1150) / UTM zone 12N",
    BASEGEOGCRS["WGS 84 (G1150)",
        DYNAMIC[
            FRAMEEPOCH[2001]],
        DATUM["World Geodetic System 1984 (G1150)",
            ELLIPSOID["WGS 84",6378137,298.257223563,
                LENGTHUNIT["metre",1]]],
        PRIMEM["Greenwich",0,
            ANGLEUNIT["degree",0.0174532925199433]],
        ID["EPSG",7661]],
    CONVERSION["UTM zone 12N",
        METHOD["Transverse Mercator",
            ID["EPSG",9807]],
        PARAMETER["Latitude of natural origin",0,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8801]],
        PARAMETER["Longitude of natural origin",-111,
            ANGLEUNIT["degree",0.0174532925199433],
            ID["EPSG",8802]],
        PARAMETER["Scale factor at natural origin",0.9996,
            SCALEUNIT["unity",1],
            ID["EPSG",8805]],
        PARAMETER["False easting",500000,
            LENGTHUNIT["metre",1],
            ID["EPSG",8806]],
        PARAMETER["False northing",0,
            LENGTHUNIT["metre",1],
            ID["EPSG",8807]],
        ID["EPSG",16012]],
    CS[Cartesian,3],
        AXIS["(E)",east,
            ORDER[1],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
        AXIS["(N)",north,
            ORDER[2],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
        AXIS["ellipsoidal height (h)",up,
            ORDER[3],
            LENGTHUNIT["metre",1,
                ID["EPSG",9001]]],
    USAGE[
        SCOPE["unknown"],
        AREA["Between 114?W and 108?W, northern hemisphere between equator and 84?N, onshore and offshore. Canada - Alberta; Northwest Territories (NWT); Nunavut; Saskatchewan. Mexico. United States (USA)."],
        BBOX[0,-114,84,-108]],
    REMARK["Custom WKT2 combining UTM_12N with WGS84 (G1150)?]]
```

Cheers,
Scott

From even.rouault at spatialys.com  Wed Jan  8 08:56:21 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Jan 2025 17:56:21 +0100
Subject: [gdal-dev] Is it possible to write custom CRS WKTs within a
 GeoTiff?
In-Reply-To: <2729FB7D-0BB2-45A5-B209-BEADCEA83916@uw.edu>
References: <2729FB7D-0BB2-45A5-B209-BEADCEA83916@uw.edu>
Message-ID: <c80ffc3a-dc0c-429d-85b4-61ab2dc2e5ea@spatialys.com>

Scott,

>   I?d like to be able to store a custom WKT *inside GeoTiff metadata* rather than in an external PAM file.

GeoTIFF CRS encoding is a custom one, and doesn't support WKT (there's 
some hypothetical idea of allowing/mandating WKT2 for an hypothetical 
GeoTIFF 2.0 spec : https://github.com/opengeospatial/geotiff/issues/56 )

If you can sacrifice the ellipsoidal height axis to avoid using a 
Projected 3D CRS, which is a bit of a geodetic dubious object (don't ask 
me more, but minds more enlightned than me question the soundness of 
using an ellipsoidal heights with a projected CRS), then the driver will 
make a quite reasonable effort to encode it into GeoTIFF keys (you'll 
loose the comments, area of use, and DYNAMIC[] node in the process, 
although one could argue that the later should be automatically 
reconstructed by the GeoTIFF reader)

Note: your ending remark uses a non-ASCII ? character, which prevents 
the WKT to be parsed.

So given a test.wkt file with the following:

PROJCRS["WGS84 (G1150) / UTM zone 12N", BASEGEOGCRS["WGS 84 (G1150)", 
DYNAMIC[ FRAMEEPOCH[2001]], DATUM["World Geodetic System 1984 (G1150)", 
ELLIPSOID["WGS 84",6378137,298.257223563, LENGTHUNIT["metre",1]]], 
PRIMEM["Greenwich",0, ANGLEUNIT["degree",0.0174532925199433]], 
ID["EPSG",7661]], CONVERSION["UTM zone 12N", METHOD["Transverse 
Mercator", ID["EPSG",9807]], PARAMETER["Latitude of natural origin",0, 
ANGLEUNIT["degree",0.0174532925199433], ID["EPSG",8801]], 
PARAMETER["Longitude of natural origin",-111, 
ANGLEUNIT["degree",0.0174532925199433], ID["EPSG",8802]], 
PARAMETER["Scale factor at natural origin",0.9996, SCALEUNIT["unity",1], 
ID["EPSG",8805]], PARAMETER["False easting",500000, 
LENGTHUNIT["metre",1], ID["EPSG",8806]], PARAMETER["False northing",0, 
LENGTHUNIT["metre",1], ID["EPSG",8807]], ID["EPSG",16012]], 
CS[Cartesian,2], AXIS["(E)",east, ORDER[1], LENGTHUNIT["metre",1, 
ID["EPSG",9001]]], AXIS["(N)",north, ORDER[2], LENGTHUNIT["metre",1, 
ID["EPSG",9001]]], USAGE[ SCOPE["unknown"], AREA["Between 114?W and 
108?W, northern hemisphere between equator and 84?N, onshore and 
offshore. Canada - Alberta; Northwest Territories (NWT); Nunavut; 
Saskatchewan. Mexico. United States (USA)."], BBOX[0,-114,84,-108]], 
REMARK["Custom WKT2 combining UTM_12N with WGS84 (G1150)"]]

$ gdal_translate in.tif out.tif -a_srs "$(cat test.wkt)"

$ gdalinfo out.tif

PROJCRS["WGS84 (G1150) / UTM zone 12N",
 ??? BASEGEOGCRS["WGS 84 (G1150)",
 ??????? DATUM["World Geodetic System 1984 (G1150)",
 ??????????? ELLIPSOID["WGS 84",6378137,298.257223563,
 ??????????????? LENGTHUNIT["metre",1]]],
 ??????? PRIMEM["Greenwich",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433]],
 ??????? ID["EPSG",7661]],
 ??? CONVERSION["Transverse Mercator",
 ??????? METHOD["Transverse Mercator",
 ??????????? ID["EPSG",9807]],
 ??????? PARAMETER["Latitude of natural origin",0,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8801]],
 ??????? PARAMETER["Longitude of natural origin",-111,
 ??????????? ANGLEUNIT["degree",0.0174532925199433],
 ??????????? ID["EPSG",8802]],
 ??????? PARAMETER["Scale factor at natural origin",0.9996,
 ??????????? SCALEUNIT["unity",1],
 ??????????? ID["EPSG",8805]],
 ??????? PARAMETER["False easting",500000,
 ??????????? LENGTHUNIT["metre",1],
 ??????????? ID["EPSG",8806]],
 ??????? PARAMETER["False northing",0,
 ??????????? LENGTHUNIT["metre",1],
 ??????????? ID["EPSG",8807]]],
 ??? CS[Cartesian,2],
 ??????? AXIS["easting",east,
 ??????????? ORDER[1],
 ??????????? LENGTHUNIT["metre",1,
 ??????????????? ID["EPSG",9001]]],
 ??????? AXIS["northing",north,
 ??????????? ORDER[2],
 ??????????? LENGTHUNIT["metre",1,
 ??????????????? ID["EPSG",9001]]]]

$ listgeo out.tif
[... snip ... ]
 ?? Keyed_Information:
 ????? GTModelTypeGeoKey (Short,1): ModelTypeProjected
 ????? GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
 ????? GTCitationGeoKey (Ascii,29): "WGS84 (G1150) / UTM zone 12N"
 ????? GeographicTypeGeoKey (Short,1): Code-7661 (WGS 84 (G1150))
 ????? GeogCitationGeoKey (Ascii,15): "WGS 84 (G1150)"
 ????? GeogAngularUnitsGeoKey (Short,1): Angular_Degree
 ????? GeogSemiMajorAxisGeoKey (Double,1): 6378137
 ????? GeogInvFlatteningGeoKey (Double,1): 298.257223563
 ????? ProjectedCSTypeGeoKey (Short,1): User-Defined
 ????? ProjectionGeoKey (Short,1): Proj_UTM_zone_12N
 ????? ProjLinearUnitsGeoKey (Short,1): Linear_Meter
 ????? End_Of_Keys.
 ?? End_Of_Geotiff.


>
> Here is a motivating example, using a WKT that specifies a specific WGS84 realization for a given UTM zone:
> ```
> INPUT=https://opentopography.s3.sdsc.edu/raster/COP30/COP30_hh/Copernicus_DSM_10_N38_00_W109_00_DEM.tif
> OUTPUT=/tmp/Copernicus_DSM_10_N38_00_W109_00_DEM_UTM.tif
>
> CPL_DEBUG=ON \
>   GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR \
>   gdalwarp -co GEOTIFF_VERSION=1.1 -overwrite -dstnodata 0 -r bilinear -tap -tr 30.0 30.0 -s_srs EPSG:7661 -t_srs utm12N_wgs1150.wkt $INPUT $OUTPUT
> ```
>
> Here is the wkt, I?d like for it not to end up in a sidecar file where I might loose it, but embedded in the GTiff:
> ```
> PROJCRS["WGS84 (G1150) / UTM zone 12N",
>      BASEGEOGCRS["WGS 84 (G1150)",
>          DYNAMIC[
>              FRAMEEPOCH[2001]],
>          DATUM["World Geodetic System 1984 (G1150)",
>              ELLIPSOID["WGS 84",6378137,298.257223563,
>                  LENGTHUNIT["metre",1]]],
>          PRIMEM["Greenwich",0,
>              ANGLEUNIT["degree",0.0174532925199433]],
>          ID["EPSG",7661]],
>      CONVERSION["UTM zone 12N",
>          METHOD["Transverse Mercator",
>              ID["EPSG",9807]],
>          PARAMETER["Latitude of natural origin",0,
>              ANGLEUNIT["degree",0.0174532925199433],
>              ID["EPSG",8801]],
>          PARAMETER["Longitude of natural origin",-111,
>              ANGLEUNIT["degree",0.0174532925199433],
>              ID["EPSG",8802]],
>          PARAMETER["Scale factor at natural origin",0.9996,
>              SCALEUNIT["unity",1],
>              ID["EPSG",8805]],
>          PARAMETER["False easting",500000,
>              LENGTHUNIT["metre",1],
>              ID["EPSG",8806]],
>          PARAMETER["False northing",0,
>              LENGTHUNIT["metre",1],
>              ID["EPSG",8807]],
>          ID["EPSG",16012]],
>      CS[Cartesian,3],
>          AXIS["(E)",east,
>              ORDER[1],
>              LENGTHUNIT["metre",1,
>                  ID["EPSG",9001]]],
>          AXIS["(N)",north,
>              ORDER[2],
>              LENGTHUNIT["metre",1,
>                  ID["EPSG",9001]]],
>          AXIS["ellipsoidal height (h)",up,
>              ORDER[3],
>              LENGTHUNIT["metre",1,
>                  ID["EPSG",9001]]],
>      USAGE[
>          SCOPE["unknown"],
>          AREA["Between 114?W and 108?W, northern hemisphere between equator and 84?N, onshore and offshore. Canada - Alberta; Northwest Territories (NWT); Nunavut; Saskatchewan. Mexico. United States (USA)."],
>          BBOX[0,-114,84,-108]],
>      REMARK["Custom WKT2 combining UTM_12N with WGS84 (G1150)?]]
> ```
>
> Cheers,
> Scott
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/119cc83a/attachment.htm>

From jesse.r.meyer at nasa.gov  Wed Jan  8 11:13:26 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 8 Jan 2025 19:13:26 +0000
Subject: [gdal-dev] ExecuteSQL method to dependably remove features from
 datasource
Message-ID: <MN2PR09MB59320AC4CECE38EF41A08B13C9122@MN2PR09MB5932.namprd09.prod.outlook.com>

I seem to be able to remove features from a GPKG datasource using ExecuteSQL and ?delete from layer_name where cond? style query with the SQLITE dialect.  For some of our use cases, this is quite a bit nicer than a manual loop in Python.

Are there restrictions or other concerns that I should keep in mind when using this, beyond the recommendation to VACUUM afterwards to shrink the disk file down?

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/da1e1c59/attachment-0001.htm>

From dklaus at carlsonsw.com  Wed Jan  8 11:12:46 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Wed, 8 Jan 2025 14:12:46 -0500
Subject: [gdal-dev] Improving GDAL production in our release
In-Reply-To: <rmiv7ur4i16.fsf@s1.lexort.com>
References: <CAJNrnBXm5y327Qa-J_nNY1wgVvkbL_DeP-ma4czSesB_PXFMvg@mail.gmail.com>
 <rmi8qrn5ylo.fsf@s1.lexort.com>
 <CAJNrnBXP+Kom7HEXuczvRH9_P5HX3XkYrzQMuCCpXx9KM=5pxA@mail.gmail.com>
 <rmiv7ur4i16.fsf@s1.lexort.com>
Message-ID: <CAJNrnBVZwbV4eR8u8cFK3Xt2xDByJiPte1g8XNphcC=h22RxFQ@mail.gmail.com>

All,

On Robert C.'s advice I am currently investigating using vcpkg to fulfill
my company's build requirements. I haven't successfully managed to build
GDAL to our specifications yet. But if I do, I will make sure to post
details to this thread,

On Mon, Jan 6, 2025 at 6:52?PM Greg Troxel <gdt at lexort.com> wrote:

> David Klaus <dklaus at carlsonsw.com> writes:
>
> > Thank you for your fast response.
> >
> > Q: You didn't explain whether you are doing import/merge and carrying
> diffs
> > to the sources, and if so, you didn't give a link where others can look
> at
> > them.
> >
> > A: I apologize if I misunderstand your questions. I think you are asking
> > whether or not anyone at our company has modified any of the source GDAL
> > source files or if we are maintaining our own distribution of the source
> > code. If this is the question, the answer is no.
>
> That makes things easier.
>
> > Q: You didn't publish a link to the scripts you are using.
> >
> > A: Personally, I have no problem with sharing the scripts we currently
> use.
> > I will speak with my boss on whether it would be acceptable to share
> those
> > here.
>
> Having been at a large company, I understand.  But nobody here will be
> able to give you advice without reading your script.  And, if you want
> help making your build process better under nondisclosure, you'll need a
> consultant rather than help from the list.
>
> > Q: You didn't explain the problems you are having, just that it's hard.
> >
> > A: My apologies. The problem is that modifying our current scripts in
> order
> > to produce a new build of GDAL takes a significant amount of development
> > time. For example, I am currently working on building Proj-9.5.1 as part
> of
> > our new GDAL build and I'm running into trouble linking "tiff" libraries.
> > This is not likely irreconcilable but it takes time. I see how this can
> be
> > difficult to understand without looking at our current build process. I
> > will discuss this with my boss.
>
> My quick guess is that you are reinventing a packaging system and that
> the last 10% is hard.  That's a little glib, but it sounds like various
> paths.  You might consider using a packaging system, and using a
> different prefix than the regulsr /usr.
>
> You may also want to be very rigorous and organized about -I and -L/-R
> (-R may be spelled something like -Wl,-rpath).
>
> > Q: I hope you are contributing funds to GDAL!  I know that can be hard
> in a
> > corporate environment....
> >
> > A: Of course I have no problem contributing my corporation's money to
> GDAL.
> > Unfortunately, that's why I don't get to make those decisions. However, I
> > will discuss this with my boss. Hopefully, I can persuade him,
>
> You might consider how much the company would pay annually for a
> proprietary license for code of equivalent breadth and quality to gdal,
> proj, etc.  You might look at Oracle's fees, or ESRI's.  And then ask
> management to take 10% of that and donate annually.  What I have always
> found is that companies are ok paying huge amounts of money for
> proprietary licenses, but even with free software advocates inside, it's
> amazingly difficult to donate.
>
> > P.S. You mention the following:
> >
> > "I, and probably others, have scripts that basically set up -I/-L/-R for
> > prereqs and run cmake, to be able to build/install-to-destdir/test
> various
> > things.   These are often only 100 lines, 2/3 comments, and don't cause
> me
> > trouble."
> >
> > It sounds like your solution for generating up-to-date GDAL builds is
> > rather streamlined. Currently we are working on updating our current
> build
> > to GDAL 3.10.0. Were you to do the same how long would you estimate this
> > update would take? Also, is there any chance you could share any of your
> > scripts so I could compare them to ours?
>
> This is not baked, and not up to date.  For example it uses python 3.10
> for docs, and while pkgsrc can still build that, I'm on 3.12 and
> thinking about 3.13.  It is not up to date because I haven't had to run
> it lately.  I am the maintainer of gdal in pkgsrc, and I update there,
> and if that build works and passes tests, I don't need to build it
> outside of pkgsrc.   For a while I was chasing a few portability issues,
> and some floating point stuff, but now there's very little trouble.
>
> But, I am not statically linking, and I am living in a world where the
> dependencies all come from pkgsrc.  I typically build like this to check
> git master for portability bugs that have crept in (test ==, assuming
> things not required by POSIX, etc.) and to see if tests still pass (new
> tests are added, and floating point is hard :-).
>
> The last part is creating a distfile -- what the project would release
> so I can run that through packaging.
>
> Typically, for a new version, there's very little if anything I do.  I'd
> say if things build and test with no issues, it's 15 minutes of work.
> If there are build/test issues, those dominate the effort and updating
> the script is in the noise.
>
> (I have similar scripts for autoconf projects; same concept different
> spelling of build commands.)
>
> #!/bin/sh
>
> VERSION=3.6.0.dev0
>
> if [ -d $HOME/bin/ccache ]; then
>     echo "enabling ccache"
>     ccache -z
>     PATH=$HOME/bin/ccache:$PATH
> fi
>
> ##
>
> PREFIX=/usr/pkg
> LIBDIR=${PREFIX}/lib
>
> # In theory, BSD make is ok.
> MAKE=make
>
> # \todo Debug poppler includes not found.
>
> (rm -rf build destdir &&
>      mkdir build &&
>      cd build &&
>      cmake .. \
>            -LH \
>            -DCMAKE_COLOR_MAKEFILE=false \
>            -DCMAKE_INSTALL_PREFIX=${PREFIX} \
>            -DCMAKE_INSTALL_RPATH=${LIBDIR} \
>            > OUT.00.cmake 2>&1 &&
>      time ${MAKE} VERBOSE=1  > OUT.10.make 2>&1 &&
>      (time ${MAKE} check > OUT.20.check 2>&1 || true) && \
>      time ${MAKE} DESTDIR=../destdir install > OUT.30.install 2>&1 && \
>      echo BUILD DONE
> )
>
> ## Create a distfile for pkgsrc testing.
>
> # Set up tool variables.
> export MAKE=gmake
> export PYTHON=python3.10
> export SPHINXBUILD=sphinx-build-3.10
> # Remediate use of tools without search or variables.
> PATH=/home/gdt/bin/GDAL:$PATH
>
> (time ./mkgdaldist.sh ${VERSION} -url
> https://github.com/gdt/gdal
> > OUT.40.mkgdaldist 2>&1 &&
>      cp -p gdal-${VERSION}.tar.xz /usr/pkgsrc/distfiles &&
>      echo "COPIED DISTFILE")
>
>

-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/31cbcf5b/attachment.htm>

From even.rouault at spatialys.com  Wed Jan  8 11:28:11 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Wed, 8 Jan 2025 20:28:11 +0100
Subject: [gdal-dev] ExecuteSQL method to dependably remove features from
 datasource
In-Reply-To: <MN2PR09MB59320AC4CECE38EF41A08B13C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB59320AC4CECE38EF41A08B13C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <b9b87005-c917-4716-ab96-cb90d4a472d9@spatialys.com>

Jesse,

> I seem to be able to remove features from a GPKG datasource using 
> ExecuteSQL and ?delete from layer_name where cond? style query with 
> the SQLITE dialect.? For some of our use cases, this is quite a bit 
> nicer than a manual loop in Python.
>
> Are there restrictions or other concerns that I should keep in mind 
> when using this, beyond the recommendation to VACUUM afterwards to 
> shrink the disk file down?
>
That is perfectly fine. There are triggers to update the spatial index 
and the feature count.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/77bf4e70/attachment.htm>

From jesse.r.meyer at nasa.gov  Wed Jan  8 12:53:41 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 8 Jan 2025 20:53:41 +0000
Subject: [gdal-dev] Seeking SQL wizardry
Message-ID: <MN2PR09MB59322C57BBC440DDAA039A57C9122@MN2PR09MB5932.namprd09.prod.outlook.com>

BTW If this question is too specific to SQL and I should seek aid elsewhere, please let me know.

I am able to return a layer of rowids associated with features whose geotiff band value at the centroid location is above a particular threshold.  I then turn back around and delete all such features manually in Python.  But it would be nice to do this with a delete from query.

The working select query is: select rowid, gdal_get_pixel_value(path/to/raster.tif, ndvi_band_num, ?georef?, ST_X(cnt), ST_Y(cent)) as ndvi from (select ST_Centroid(geom) as cnt from layer_name) where ndvi < 600

So, collect feature centroids as a subexpression so gdal_get_pixel_value() has the inputs it needs.

Unfortunately, attempts to mutate this into a delete from query has failed.
    sql_query = f"delete from {label_name} where ndvi < 600 from \
        (gdal_get_pixel_value('{raster_fp}', {ndvi_band_num}, 'georef', ST_X(cnt), ST_Y(cnt)) as ndvi from \
            (select ST_Centroid(geom) as cnt from {label_name}))"

Per tradition, the SQL parser doesn?t provide much insight, merely ?near "from": syntax error?.

Simpler queries like ?delete from layer_name where ST_Area(GEOMETRY)? just work, without needing to pass through rowids around from subexpressions.  So I hope it is just a matter of SQL spellcraft on my side that?s lacking, but I do know some database engines don?t allow deleting from tables that source that table in subexpressions, so AFAIK this may just not be possible.

Ideas?

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/36214e77/attachment.htm>

From P.OToole at uwyo.edu  Wed Jan  8 13:49:33 2025
From: P.OToole at uwyo.edu (P O'Toole)
Date: Wed, 8 Jan 2025 21:49:33 +0000
Subject: [gdal-dev] Seeking SQL wizardry
In-Reply-To: <MN2PR09MB59322C57BBC440DDAA039A57C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB59322C57BBC440DDAA039A57C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <MWHPR05MB340653D04F9265B2818778A4F8122@MWHPR05MB3406.namprd05.prod.outlook.com>

Hi, Jesse,

I assume you're working in SQLAlchemy or something, so there may be more to this than I'm thinking, but if the parsing errors are actually coming from the Postgres server(?), there should be plenty of ways around your issue, one way or another. Before you try to get especially fancy, I would try something simple like this, cutting down on the amount of aliasing and cross-referencing you're doing to just find the rows to kill:

??????DELETE FROM some_table WHERE some_table.row_id = ( SELECT rowid FROM some_table WHERE gdal_get_pixel_value('raster.tif', ndvi_band_num, 'georef', ST_X(ST_Centroid(geom)), ST_Y(ST_Centroid(geom)) < 600);

I may have a few details wrong because I don't have your SQL schema in front of me, but you essentially just want to find a simple SELECT-query that will return the desired row-IDs. You'll then just slap that into subquery inside the WHERE-clause of your DELETE statement. You can fool around with the SELECT statement on its own until you know that's right first. If you're doing additional processing on these rows before you delete, I'd consider using a transaction so any analysis you do happens on the exact same rows as those you're deleting.

Hope that helps.

- Patrick O'Toole
Full-Stack Developer
Wyoming Natural Diversity Database
University of Wyoming
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Wednesday, January 8, 2025 1:53 PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Seeking SQL wizardry


? This message was sent from a non-UWYO address. Please exercise caution when clicking links or opening attachments from external sources.


BTW If this question is too specific to SQL and I should seek aid elsewhere, please let me know.



I am able to return a layer of rowids associated with features whose geotiff band value at the centroid location is above a particular threshold.  I then turn back around and delete all such features manually in Python.  But it would be nice to do this with a delete from query.



The working select query is: select rowid, gdal_get_pixel_value(path/to/raster.tif, ndvi_band_num, ?georef?, ST_X(cnt), ST_Y(cent)) as ndvi from (select ST_Centroid(geom) as cnt from layer_name) where ndvi < 600



So, collect feature centroids as a subexpression so gdal_get_pixel_value() has the inputs it needs.



Unfortunately, attempts to mutate this into a delete from query has failed.

    sql_query = f"delete from {label_name} where ndvi < 600 from \

        (gdal_get_pixel_value('{raster_fp}', {ndvi_band_num}, 'georef', ST_X(cnt), ST_Y(cnt)) as ndvi from \

            (select ST_Centroid(geom) as cnt from {label_name}))"



Per tradition, the SQL parser doesn?t provide much insight, merely ?near "from": syntax error?.



Simpler queries like ?delete from layer_name where ST_Area(GEOMETRY)? just work, without needing to pass through rowids around from subexpressions.  So I hope it is just a matter of SQL spellcraft on my side that?s lacking, but I do know some database engines don?t allow deleting from tables that source that table in subexpressions, so AFAIK this may just not be possible.



Ideas?



Best,

Jesse



Lead Computer Scientist

Science Systems and Applications, Inc.

Dr Compton Tucker Team

NASA Goddard Space Flight Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/c9837f85/attachment-0001.htm>

From jesse.r.meyer at nasa.gov  Wed Jan  8 14:12:12 2025
From: jesse.r.meyer at nasa.gov (Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC])
Date: Wed, 8 Jan 2025 22:12:12 +0000
Subject: [gdal-dev] [EXTERNAL] Re: Seeking SQL wizardry
In-Reply-To: <MWHPR05MB340653D04F9265B2818778A4F8122@MWHPR05MB3406.namprd05.prod.outlook.com>
References: <MN2PR09MB59322C57BBC440DDAA039A57C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
 <MWHPR05MB340653D04F9265B2818778A4F8122@MWHPR05MB3406.namprd05.prod.outlook.com>
Message-ID: <MN2PR09MB5932C24A85A2395C3643250FC9122@MN2PR09MB5932.namprd09.prod.outlook.com>

Hi Patrick,

I?m working with a GeoPackage database file, using the SQLITE dialect, and submitting the query through the ExecuteSQL interface on the database object in Python.  This makes the art of crafting SQL queries a bit tricky because ontop of SQL concerns there?s also the abstraction OGR must also maintain.

Looks like:
delete from layer_name where gdal_get_pixel_value(?) < 600

Gets me further along, with your advice, thanks!  I originally put the centroid determination in a subexpression because I hesitated with the thought that the SQL engine couldn?t / wouldn?t cache the result for the parameters (and our geometries can be quite dense).  But I?ll worry about that later, and I think SQLite can optimize this case.  That sent me down a needlessly complicated path I think.

Best,
Jesse

Lead Computer Scientist
Science Systems and Applications, Inc.
Dr Compton Tucker Team
NASA Goddard Space Flight Center

From: P O'Toole <P.OToole at uwyo.edu>
Date: Wednesday, January 8, 2025 at 4:49?PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] <jesse.r.meyer at nasa.gov>
Subject: [EXTERNAL] Re: Seeking SQL wizardry
CAUTION: This email originated from outside of NASA.  Please take care when clicking links or opening attachments.  Use the "Report Message" button to report suspicious messages to the NASA SOC.


Hi, Jesse,

I assume you're working in SQLAlchemy or something, so there may be more to this than I'm thinking, but if the parsing errors are actually coming from the Postgres server(?), there should be plenty of ways around your issue, one way or another. Before you try to get especially fancy, I would try something simple like this, cutting down on the amount of aliasing and cross-referencing you're doing to just find the rows to kill:

??????DELETE FROM some_table WHERE some_table.row_id = ( SELECT rowid FROM some_table WHERE gdal_get_pixel_value('raster.tif', ndvi_band_num, 'georef', ST_X(ST_Centroid(geom)), ST_Y(ST_Centroid(geom)) < 600);

I may have a few details wrong because I don't have your SQL schema in front of me, but you essentially just want to find a simple SELECT-query that will return the desired row-IDs. You'll then just slap that into subquery inside the WHERE-clause of your DELETE statement. You can fool around with the SELECT statement on its own until you know that's right first. If you're doing additional processing on these rows before you delete, I'd consider using a transaction so any analysis you do happens on the exact same rows as those you're deleting.

Hope that helps.

- Patrick O'Toole
Full-Stack Developer
Wyoming Natural Diversity Database
University of Wyoming
________________________________
From: gdal-dev <gdal-dev-bounces at lists.osgeo.org> on behalf of Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND APPLICATIONS INC] via gdal-dev <gdal-dev at lists.osgeo.org>
Sent: Wednesday, January 8, 2025 1:53 PM
To: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: [gdal-dev] Seeking SQL wizardry


? This message was sent from a non-UWYO address. Please exercise caution when clicking links or opening attachments from external sources.


BTW If this question is too specific to SQL and I should seek aid elsewhere, please let me know.



I am able to return a layer of rowids associated with features whose geotiff band value at the centroid location is above a particular threshold.  I then turn back around and delete all such features manually in Python.  But it would be nice to do this with a delete from query.



The working select query is: select rowid, gdal_get_pixel_value(path/to/raster.tif, ndvi_band_num, ?georef?, ST_X(cnt), ST_Y(cent)) as ndvi from (select ST_Centroid(geom) as cnt from layer_name) where ndvi < 600



So, collect feature centroids as a subexpression so gdal_get_pixel_value() has the inputs it needs.



Unfortunately, attempts to mutate this into a delete from query has failed.

    sql_query = f"delete from {label_name} where ndvi < 600 from \

        (gdal_get_pixel_value('{raster_fp}', {ndvi_band_num}, 'georef', ST_X(cnt), ST_Y(cnt)) as ndvi from \

            (select ST_Centroid(geom) as cnt from {label_name}))"



Per tradition, the SQL parser doesn?t provide much insight, merely ?near "from": syntax error?.



Simpler queries like ?delete from layer_name where ST_Area(GEOMETRY)? just work, without needing to pass through rowids around from subexpressions.  So I hope it is just a matter of SQL spellcraft on my side that?s lacking, but I do know some database engines don?t allow deleting from tables that source that table in subexpressions, so AFAIK this may just not be possible.



Ideas?



Best,

Jesse



Lead Computer Scientist

Science Systems and Applications, Inc.

Dr Compton Tucker Team

NASA Goddard Space Flight Center
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/6c4e7f3c/attachment-0001.htm>

From dshean at uw.edu  Wed Jan  8 11:50:27 2025
From: dshean at uw.edu (David Shean)
Date: Wed, 8 Jan 2025 11:50:27 -0800
Subject: [gdal-dev] Is it possible to write custom CRS WKTs within a
 GeoTiff?
In-Reply-To: <c80ffc3a-dc0c-429d-85b4-61ab2dc2e5ea@spatialys.com>
References: <2729FB7D-0BB2-45A5-B209-BEADCEA83916@uw.edu>
 <c80ffc3a-dc0c-429d-85b4-61ab2dc2e5ea@spatialys.com>
Message-ID: <A27C4EEC-5D7E-4068-B6EA-F1FF0515AC85@uw.edu>

Thanks Even, and appreciate pointer to the GeoTIFF 2.0 spec discussion.

> "If you can sacrifice the ellipsoidal height axis to avoid using a Projected 3D CRS, which is a bit of a geodetic dubious object (don't ask me more, but minds more enlightned than me question the soundness of using an ellipsoidal heights with a projected CRS)?


I won?t ask you more :) but maybe this can be discussed further with those enlightened minds, perhaps on PROJ mailing list or a GH issue?  

We?ve been exploring approaches to embed custom 3D CRS (both Geographic and Projected, with dynamic frame epoch definition), vertical datum information (essential), and data acquisition epoch for geotiff elevation products, with the hope of eliminating metadata ambiguity for future downstream integration and analysis.  But then we?ve also mistakenly failed to bundle/transfer the aux.xml sidecar files with some geotiffs, leading to downstream issues and confusion.

Would be great to hear any other thoughts on best practices and options using current and future versions of GDAL/PROJ/GeoTIFF.



--
David Shean
Civil and Environmental Engineering
University of Washington
https://www.ce.washington.edu/facultyfinder/david-shean

201 More Hall, Box 352700
3760 E. Stevens Way NE
Seattle, WA 98195-2700
Office: (206) 543-3105, Wilcox Hall 265
Pronouns: he, him, his

> On Jan 8, 2025, at 8:56?AM, Even Rouault via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> Scott,
> 
>>  I?d like to be able to store a custom WKT *inside GeoTiff metadata* rather than in an external PAM file.
> GeoTIFF CRS encoding is a custom one, and doesn't support WKT  (there's some hypothetical idea of allowing/mandating WKT2 for an hypothetical GeoTIFF 2.0 spec : https://github.com/opengeospatial/geotiff/issues/56 <https://urldefense.com/v3/__https://github.com/opengeospatial/geotiff/issues/56__;!!K-Hz7m0Vt54!l1HH4-dmmtyU4CPsIRtDt1Zf3CKzVUwtIc5gEfUTGVSyawjmrWKSW2tTag1LjZRzNGr5WklsndhfJJQDy10$> )
> 
> If you can sacrifice the ellipsoidal height axis to avoid using a Projected 3D CRS, which is a bit of a geodetic dubious object (don't ask me more, but minds more enlightned than me question the soundness of using an ellipsoidal heights with a projected CRS), then the driver will make a quite reasonable effort to encode it into GeoTIFF keys (you'll loose the comments, area of use, and DYNAMIC[] node in the process, although one could argue that the later should be automatically reconstructed by the GeoTIFF reader)
> 
> Note: your ending remark uses a non-ASCII ? character, which prevents the WKT to be parsed.
> 
> So given a test.wkt file with the following:
> 
> PROJCRS["WGS84 (G1150) / UTM zone 12N",
>     BASEGEOGCRS["WGS 84 (G1150)",
>         DYNAMIC[
>             FRAMEEPOCH[2001]],
>         DATUM["World Geodetic System 1984 (G1150)",
>             ELLIPSOID["WGS 84",6378137,298.257223563,
>                 LENGTHUNIT["metre",1]]],
>         PRIMEM["Greenwich",0,
>             ANGLEUNIT["degree",0.0174532925199433]],
>         ID["EPSG",7661]],
>     CONVERSION["UTM zone 12N",
>         METHOD["Transverse Mercator",
>             ID["EPSG",9807]],
>         PARAMETER["Latitude of natural origin",0,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8801]],
>         PARAMETER["Longitude of natural origin",-111,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8802]],
>         PARAMETER["Scale factor at natural origin",0.9996,
>             SCALEUNIT["unity",1],
>             ID["EPSG",8805]],
>         PARAMETER["False easting",500000,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8806]],
>         PARAMETER["False northing",0,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8807]],
>         ID["EPSG",16012]],
>     CS[Cartesian,2],
>         AXIS["(E)",east,
>             ORDER[1],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]],
>         AXIS["(N)",north,
>             ORDER[2],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]],
>     USAGE[
>         SCOPE["unknown"],
>         AREA["Between 114?W and 108?W, northern hemisphere between equator and 84?N, onshore and offshore. Canada - Alberta; Northwest Territories (NWT); Nunavut; Saskatchewan. Mexico. United States (USA)."],
>         BBOX[0,-114,84,-108]],
>     REMARK["Custom WKT2 combining UTM_12N with WGS84 (G1150)"]]
> 
> $ gdal_translate in.tif out.tif -a_srs "$(cat test.wkt)"
> 
> $ gdalinfo out.tif
> 
> PROJCRS["WGS84 (G1150) / UTM zone 12N",
>     BASEGEOGCRS["WGS 84 (G1150)",
>         DATUM["World Geodetic System 1984 (G1150)",
>             ELLIPSOID["WGS 84",6378137,298.257223563,
>                 LENGTHUNIT["metre",1]]],
>         PRIMEM["Greenwich",0,
>             ANGLEUNIT["degree",0.0174532925199433]],
>         ID["EPSG",7661]],
>     CONVERSION["Transverse Mercator",
>         METHOD["Transverse Mercator",
>             ID["EPSG",9807]],
>         PARAMETER["Latitude of natural origin",0,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8801]],
>         PARAMETER["Longitude of natural origin",-111,
>             ANGLEUNIT["degree",0.0174532925199433],
>             ID["EPSG",8802]],
>         PARAMETER["Scale factor at natural origin",0.9996,
>             SCALEUNIT["unity",1],
>             ID["EPSG",8805]],
>         PARAMETER["False easting",500000,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8806]],
>         PARAMETER["False northing",0,
>             LENGTHUNIT["metre",1],
>             ID["EPSG",8807]]],
>     CS[Cartesian,2],
>         AXIS["easting",east,
>             ORDER[1],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]],
>         AXIS["northing",north,
>             ORDER[2],
>             LENGTHUNIT["metre",1,
>                 ID["EPSG",9001]]]]
> 
> $ listgeo out.tif
> [... snip ... ]
>    Keyed_Information:
>       GTModelTypeGeoKey (Short,1): ModelTypeProjected
>       GTRasterTypeGeoKey (Short,1): RasterPixelIsArea
>       GTCitationGeoKey (Ascii,29): "WGS84 (G1150) / UTM zone 12N"
>       GeographicTypeGeoKey (Short,1): Code-7661 (WGS 84 (G1150))
>       GeogCitationGeoKey (Ascii,15): "WGS 84 (G1150)"
>       GeogAngularUnitsGeoKey (Short,1): Angular_Degree
>       GeogSemiMajorAxisGeoKey (Double,1): 6378137          
>       GeogInvFlatteningGeoKey (Double,1): 298.257223563    
>       ProjectedCSTypeGeoKey (Short,1): User-Defined
>       ProjectionGeoKey (Short,1): Proj_UTM_zone_12N
>       ProjLinearUnitsGeoKey (Short,1): Linear_Meter
>       End_Of_Keys.
>    End_Of_Geotiff.
> 
> 
> 
>> 
>> Here is a motivating example, using a WKT that specifies a specific WGS84 realization for a given UTM zone:
>> ```
>> INPUT=https://opentopography.s3.sdsc.edu/raster/COP30/COP30_hh/Copernicus_DSM_10_N38_00_W109_00_DEM.tif <https://urldefense.com/v3/__https://opentopography.s3.sdsc.edu/raster/COP30/COP30_hh/Copernicus_DSM_10_N38_00_W109_00_DEM.tif__;!!K-Hz7m0Vt54!l1HH4-dmmtyU4CPsIRtDt1Zf3CKzVUwtIc5gEfUTGVSyawjmrWKSW2tTag1LjZRzNGr5WklsndhfYx7Qu_8$>
>> OUTPUT=/tmp/Copernicus_DSM_10_N38_00_W109_00_DEM_UTM.tif
>> 
>> CPL_DEBUG=ON \
>>  GDAL_DISABLE_READDIR_ON_OPEN=EMPTY_DIR \
>>  gdalwarp -co GEOTIFF_VERSION=1.1 -overwrite -dstnodata 0 -r bilinear -tap -tr 30.0 30.0 -s_srs EPSG:7661 -t_srs utm12N_wgs1150.wkt $INPUT $OUTPUT
>> ```
>> 
>> Here is the wkt, I?d like for it not to end up in a sidecar file where I might loose it, but embedded in the GTiff:
>> ```
>> PROJCRS["WGS84 (G1150) / UTM zone 12N",
>>     BASEGEOGCRS["WGS 84 (G1150)",
>>         DYNAMIC[
>>             FRAMEEPOCH[2001]],
>>         DATUM["World Geodetic System 1984 (G1150)",
>>             ELLIPSOID["WGS 84",6378137,298.257223563,
>>                 LENGTHUNIT["metre",1]]],
>>         PRIMEM["Greenwich",0,
>>             ANGLEUNIT["degree",0.0174532925199433]],
>>         ID["EPSG",7661]],
>>     CONVERSION["UTM zone 12N",
>>         METHOD["Transverse Mercator",
>>             ID["EPSG",9807]],
>>         PARAMETER["Latitude of natural origin",0,
>>             ANGLEUNIT["degree",0.0174532925199433],
>>             ID["EPSG",8801]],
>>         PARAMETER["Longitude of natural origin",-111,
>>             ANGLEUNIT["degree",0.0174532925199433],
>>             ID["EPSG",8802]],
>>         PARAMETER["Scale factor at natural origin",0.9996,
>>             SCALEUNIT["unity",1],
>>             ID["EPSG",8805]],
>>         PARAMETER["False easting",500000,
>>             LENGTHUNIT["metre",1],
>>             ID["EPSG",8806]],
>>         PARAMETER["False northing",0,
>>             LENGTHUNIT["metre",1],
>>             ID["EPSG",8807]],
>>         ID["EPSG",16012]],
>>     CS[Cartesian,3],
>>         AXIS["(E)",east,
>>             ORDER[1],
>>             LENGTHUNIT["metre",1,
>>                 ID["EPSG",9001]]],
>>         AXIS["(N)",north,
>>             ORDER[2],
>>             LENGTHUNIT["metre",1,
>>                 ID["EPSG",9001]]],
>>         AXIS["ellipsoidal height (h)",up,
>>             ORDER[3],
>>             LENGTHUNIT["metre",1,
>>                 ID["EPSG",9001]]],
>>     USAGE[
>>         SCOPE["unknown"],
>>         AREA["Between 114?W and 108?W, northern hemisphere between equator and 84?N, onshore and offshore. Canada - Alberta; Northwest Territories (NWT); Nunavut; Saskatchewan. Mexico. United States (USA)."],
>>         BBOX[0,-114,84,-108]],
>>     REMARK["Custom WKT2 combining UTM_12N with WGS84 (G1150)?]]
>> ```
>> 
>> Cheers,
>> Scott
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev at lists.osgeo.org <mailto:gdal-dev at lists.osgeo.org>
>> https://lists.osgeo.org/mailman/listinfo/gdal-dev <https://urldefense.com/v3/__https://lists.osgeo.org/mailman/listinfo/gdal-dev__;!!K-Hz7m0Vt54!l1HH4-dmmtyU4CPsIRtDt1Zf3CKzVUwtIc5gEfUTGVSyawjmrWKSW2tTag1LjZRzNGr5Wklsndhflk8ZnOQ$>
> -- 
> http://www.spatialys.com <https://urldefense.com/v3/__http://www.spatialys.com__;!!K-Hz7m0Vt54!l1HH4-dmmtyU4CPsIRtDt1Zf3CKzVUwtIc5gEfUTGVSyawjmrWKSW2tTag1LjZRzNGr5WklsndhfQhOfbpw$>
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://urldefense.com/v3/__https://lists.osgeo.org/mailman/listinfo/gdal-dev__;!!K-Hz7m0Vt54!l1HH4-dmmtyU4CPsIRtDt1Zf3CKzVUwtIc5gEfUTGVSyawjmrWKSW2tTag1LjZRzNGr5Wklsndhflk8ZnOQ$

-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/95b37cdf/attachment-0001.htm>

From public at postholer.com  Wed Jan  8 15:09:28 2025
From: public at postholer.com (Scott)
Date: Wed, 8 Jan 2025 15:09:28 -0800
Subject: [gdal-dev] Seeking SQL wizardry
In-Reply-To: <MN2PR09MB59322C57BBC440DDAA039A57C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
References: <MN2PR09MB59322C57BBC440DDAA039A57C9122@MN2PR09MB5932.namprd09.prod.outlook.com>
Message-ID: <288d098f-5f8a-4e01-b697-32d616aa4c6e@postholer.com>

Hey Jesse,

I *think* I simplified your query a bit. Untested, but it may work.

delete from {label_name}
where gdal_get_pixel_value('{raster_fp}', {ndvi_band_num}, 'georef', 
ST_X(st_centroid(geom)), ST_Y(st_centroid(geom))) < 600

Scott

On 1/8/25 12:53, Meyer, Jesse R. (GSFC-618.0)[SCIENCE SYSTEMS AND 
APPLICATIONS INC] via gdal-dev wrote:
> BTW If this question is too specific to SQL and I should seek aid 
> elsewhere, please let me know.
> 
> I am able to return a layer of rowids associated with features whose 
> geotiff band value at the centroid location is above a particular 
> threshold.? I then turn back around and delete all such features 
> manually in Python.? But it would be nice to do this with a delete from 
> query.
> 
> The working select query is: select rowid, gdal_get_pixel_value(path/to/ 
> raster.tif, ndvi_band_num, ?georef?, ST_X(cnt), ST_Y(cent)) as ndvi from 
> (select ST_Centroid(geom) as cnt from layer_name) where ndvi < 600
> 
> So, collect feature centroids as a subexpression so 
> gdal_get_pixel_value() has the inputs it needs.
> 
> Unfortunately, attempts to mutate this into a delete from query has failed.
> 
>  ??? sql_query = f"delete from {label_name} where ndvi < 600 from \
> 
>  ??????? (gdal_get_pixel_value('{raster_fp}', {ndvi_band_num}, 'georef', 
> ST_X(cnt), ST_Y(cnt)) as ndvi from \
> 
>  ??????????? (select ST_Centroid(geom) as cnt from {label_name}))"
> 
> Per tradition, the SQL parser doesn?t provide much insight, merely ?near 
> "from": syntax error?.
> 
> Simpler queries like ?delete from layer_name where ST_Area(GEOMETRY)? 
> just work, without needing to pass through rowids around from 
> subexpressions.? So I hope it is just a matter of SQL spellcraft on my 
> side that?s lacking, but I do know some database engines don?t allow 
> deleting from tables that source that table in subexpressions, so AFAIK 
> this may just not be possible.
> 
> Ideas?
> 
> Best,
> 
> Jesse
> 
> Lead Computer Scientist
> 
> Science Systems and Applications, Inc.
> 
> Dr Compton Tucker Team
> 
> NASA Goddard Space Flight Center
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From schwehr at gmail.com  Wed Jan  8 17:14:31 2025
From: schwehr at gmail.com (Kurt Schwehr)
Date: Wed, 8 Jan 2025 17:14:31 -0800
Subject: [gdal-dev] Updating value for Compression tag for JPEGXL in
 TIFF to the one of DNG 1.7 ?
In-Reply-To: <CACmBxyuAUVgmR8r61zdUuRt0FV0iCiShiXfZFiOftLEa85cODw@mail.gmail.com>
References: <c0aa6871-061b-41e3-95d0-c6845a44c46a@spatialys.com>
 <CAOM3y2ihBdk0Utm8hiu8KnwPWvu4vRearqZ7V8q+LZJajAWA4A@mail.gmail.com>
 <CACmBxyvt-a=aW+T_Q+-FCNcXFJro89z957Sv+ebLv1FVmaRcZw@mail.gmail.com>
 <e053df9c-2ee3-460b-8b3a-0822d6d751c4@spatialys.com>
 <CACmBxyuAUVgmR8r61zdUuRt0FV0iCiShiXfZFiOftLEa85cODw@mail.gmail.com>
Message-ID: <CACmBxyvNhRuCHdnzNq-JDXQEQ_BUSx505tY3BiKrJ-JhrsgMww@mail.gmail.com>

Here is the patch that I applied to my local //third_party/tiff copy of
libtiff. My local libtiff and gdal are both at upstream head. I'm using
bazel for building, so I don't have any autoconf or cmake patches. In case
folks want, here is what I have. Suggestions welcome if I did anything
wrong or missing something.

https://gist.github.com/schwehr/b4b30e1896b14aa3dea7d44e34265965

I have only tried it with gdalinfo and tiffinfo for the two test files in
autotest and it seems to work!

-Kurt

Without:

gdalinfo ~/src/gdal/autotest/gcore/data/gtiff/byte_jxl_dng_1_7_52546.tif
ERROR 1: byte_jxl_dng_1_7_52546.tif: Cannot open TIFF file due to missing
codec of code 52546.
gdalinfo failed - unable to open
'/home/schwehr/src/gdal/autotest/gcore/data/gtiff/byte_jxl_dng_1_7_52546.tif'.

With:

gdalinfo  ~/src/gdal/autotest/gcore/data/gtiff/byte_jxl_deprecated_50002.tif

Driver: GTiff/GeoTIFF
Files:
/usr/local/google/home/schwehr/src/gdal/autotest/gcore/data/gtiff/byte_jxl_deprecated_50002.tif
Size is 20, 20
Coordinate System is:
PROJCRS["NAD27 / UTM zone 11N",

[SNIP]

    ID["EPSG",26711]]
Data axis to CRS axis mapping: 1,2
Origin = (440720.000000000000000,3751320.000000000000000)
Pixel Size = (60.000000000000000,-60.000000000000000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  COMPRESSION=JXL
  INTERLEAVE=BAND
  COMPRESSION_REVERSIBILITY=LOSSLESS
  JXL_EFFORT=5
Corner Coordinates:
Upper Left  (  440720.000, 3751320.000) (117d38'28.21"W, 33d54' 8.47"N)
Lower Left  (  440720.000, 3750120.000) (117d38'27.92"W, 33d53'29.51"N)
Upper Right (  441920.000, 3751320.000) (117d37'41.48"W, 33d54' 8.71"N)
Lower Right (  441920.000, 3750120.000) (117d37'41.20"W, 33d53'29.75"N)
Center      (  441320.000, 3750720.000) (117d38' 4.70"W, 33d53'49.11"N)
Band 1 Block=20x20 Type=Byte, ColorInterp=Gray

tiffinfo ~/src/gdal/autotest/gcore/data/gtiff/byte_jxl_deprecated_50002.tif
=== TIFF directory 0 ===
TIFF Directory at offset 0x8 (8)
  Image Width: 20 Image Length: 20
  Bits/Sample: 8
  Sample Format: unsigned integer
  Compression Scheme: JXL
  Photometric Interpretation: min-is-black
  Samples/Pixel: 1
  Rows/Strip: 20
  Planar Configuration: single image plane
  Tag 33550: 60.000000,60.000000,0.000000
  Tag 33922:
0.000000,0.000000,0.000000,440720.000000,3751320.000000,0.000000
  Tag 34735:
1,1,0,7,1024,0,1,1,1025,0,1,1,1026,34737,21,0,2049,34737,6,21,2054,0,1,9102,3072,0,1,26711,3076,0,1,9001
  Tag 34737: NAD27 / UTM zone 11N|NAD27|
  GDAL Metadata: <GDALMetadata>
  <Item name="COMPRESSION_REVERSIBILITY"
domain="IMAGE_STRUCTURE">LOSSLESS</Item>
  <Item name="JXL_EFFORT" domain="IMAGE_STRUCTURE">5</Item>
</GDALMetadata>



On Mon, Jan 6, 2025 at 3:42?PM Kurt Schwehr <schwehr at gmail.com> wrote:

> Thanks Even!
>
> The overtired me kept overlooking frmts/gtiff/tif_jxl.c.
>
> I will give it a go.
>
> On Mon, Jan 6, 2025 at 1:12?PM Even Rouault <even.rouault at spatialys.com>
> wrote:
>
>>
>> Le 06/01/2025 ? 22:03, Kurt Schwehr a ?crit :
>> > Sounds good to me too (not that I really have the background to say so).
>>
>> master PR: https://github.com/OSGeo/gdal/pull/11586
>>
>> 3.10 partial backport PR: https://github.com/OSGeo/gdal/pull/11587
>>
>> >
>> > 1. Are there any plans to contribute JPEGXL in tiff to
>> > https://gitlab.com/libtiff/libtiff?
>> My plan was that we would do this once https://github.com/libjxl/libjxl/
>> has reached a 1.0 milestone, but I'm not sure if/when they'll be at that
>> point.
>> > 2. And what would one need to do to patch libtiff to use JPEGXL?
>>
>> Copy frmts/gtiff/tif_jxl.c into libtiff sources, register it in
>> tif_codec.c and add support for libjxl detection in libtiff autoconf &
>> cmake
>>
>> Even
>>
>> --
>> http://www.spatialys.com
>> My software is free, but my time generally not.
>> Butcher of all kinds of standards, open or closed formats. At the end,
>> this is just about bytes.
>>
>>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250108/6cfefb0d/attachment.htm>

From m.zdila at gmail.com  Thu Jan  9 00:20:06 2025
From: m.zdila at gmail.com (=?UTF-8?Q?Martin_=C5=BDdila?=)
Date: Thu, 9 Jan 2025 09:20:06 +0100
Subject: [gdal-dev] Issue with Custom Transformation Pipeline in
 GDALReprojectImage
Message-ID: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>

Dear GDAL developers and users,

I am facing an issue where a custom transformation pipeline defined using
PROJ's +proj=pipeline is not being applied when using GDALReprojectImage.
The pipeline appears in the debug logs (PROJ_TRACE), but the output image
does not reflect the expected transformation.

I have described the issue in detail on StackOverflow, including my code
and debugging observations:
https://stackoverflow.com/questions/79341829/why-is-my-custom-transformation-pipeline-not-applied-with-gdalreprojectimage

If anyone has insights into what might be going wrong or how to resolve
this, I would greatly appreciate your help.

Thank you!
Best regards,
-- 
Martin ?dila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/1c4472c3/attachment.htm>

From even.rouault at spatialys.com  Thu Jan  9 04:11:55 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 13:11:55 +0100
Subject: [gdal-dev] Issue with Custom Transformation Pipeline in
 GDALReprojectImage
In-Reply-To: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>
References: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>
Message-ID: <c033f97e-a245-45e6-992f-45574ad40399@spatialys.com>

Martin,

GDALReprojectImage() expects that a correct geotransform is already set 
on the target dataset.

You may use GDALSuggestedWarpOutput2() to get a guessed geotransform

Otherwise for full automated way, you may also using the C function 
GDALWarp().

By the way, your below pipeline looks wrong

|+proj=pipeline +step +inv +proj=krovak +lat_0=49.5 
+lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 
+ellps=bessel +step +inv +proj=hgridshift 
+grids=Slovakia_JTSK03_to_JTSK.gsb +step +proj=krovak +lat_0=49.5 
+lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 
+ellps=bessel +step +proj=webmerc |

After the 3rd step (+proj=krovak), you are in projected coordinate 
space. Applying +proj=webmerc afterwards doesn't make any sense since 
the later expects geographic coordinates. You probably want to omit the 
3rd step

Even

Le 09/01/2025 ? 09:20, Martin ?dila via gdal-dev a ?crit?:
> Dear GDAL developers and users,
>
> I am facing an issue where a custom transformation pipeline defined 
> using PROJ's +proj=pipeline is not being applied when using 
> GDALReprojectImage. The pipeline appears in the debug logs 
> (PROJ_TRACE), but the output image does not reflect the expected 
> transformation.
>
> I have described the issue in detail on StackOverflow, including my 
> code and debugging observations:
> https://stackoverflow.com/questions/79341829/why-is-my-custom-transformation-pipeline-not-applied-with-gdalreprojectimage
>
> If anyone has insights into what might be going wrong or how to 
> resolve this, I would greatly appreciate your help.
>
> Thank you!
> Best regards,
> -- 
> Martin ?dila
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/b684a0b3/attachment.htm>

From even.rouault at spatialys.com  Thu Jan  9 04:13:59 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 13:13:59 +0100
Subject: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
Message-ID: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>

Hi,

Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release

Starting with my +1

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From j1 at jimenezshaw.com  Thu Jan  9 04:43:10 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Thu, 9 Jan 2025 13:43:10 +0100
Subject: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
In-Reply-To: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
References: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
Message-ID: <CADRrdKsrEhp1hDUiSEP8WqNVistcUNrQ9f4UCAgB6JP4CHQ8tA@mail.gmail.com>

+1 Javier

On Thu, 9 Jan 2025 at 13:14, Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/47149d96/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Thu Jan  9 05:24:30 2025
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Thu, 9 Jan 2025 13:24:30 +0000
Subject: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
In-Reply-To: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
References: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
Message-ID: <DB9PR09MB6887A335BB5DF0E6EB24B1A5FD132@DB9PR09MB6887.eurprd09.prod.outlook.com>

+1

-Jukka Rahkonen-

-----Alkuper?inen viesti-----
L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
L?hetetty: torstai 9. tammikuuta 2025 14.14
Vastaanottaja: gdal-dev at lists.osgeo.org
Aihe: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release

Hi,

Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release

Starting with my +1

Even

--
http://www.spatialys.com/
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.

_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org
https://lists.osgeo.org/mailman/listinfo/gdal-dev

From runette at gmail.com  Thu Jan  9 05:29:04 2025
From: runette at gmail.com (Paul Harwood)
Date: Thu, 9 Jan 2025 13:29:04 +0000
Subject: [gdal-dev] Is it possible to write custom CRS WKTs within a
 GeoTiff?
In-Reply-To: <A27C4EEC-5D7E-4068-B6EA-F1FF0515AC85@uw.edu>
References: <2729FB7D-0BB2-45A5-B209-BEADCEA83916@uw.edu>
 <c80ffc3a-dc0c-429d-85b4-61ab2dc2e5ea@spatialys.com>
 <A27C4EEC-5D7E-4068-B6EA-F1FF0515AC85@uw.edu>
Message-ID: <CAE8nN5N-eaaCQpkkQgPaFtFSAP-iYNqFjftHeNb4qwKW1jazUQ@mail.gmail.com>

"If you can sacrifice the ellipsoidal height axis to avoid using a
> Projected 3D CRS, which is a bit of a geodetic dubious object (don't ask me
> more, but minds more enlightned than me question the soundness of using an
> ellipsoidal heights with a projected CRS)?
>
>
> I won?t ask you more :) but maybe this can be discussed further with those
> enlightened minds, perhaps on PROJ mailing list or a GH issue?
>
> I would also be very interested in the background to this comment - in a
different thread.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/2df5341a/attachment.htm>

From even.rouault at spatialys.com  Thu Jan  9 05:56:06 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 14:56:06 +0100
Subject: [gdal-dev] Is it possible to write custom CRS WKTs within a
 GeoTiff?
In-Reply-To: <CAE8nN5N-eaaCQpkkQgPaFtFSAP-iYNqFjftHeNb4qwKW1jazUQ@mail.gmail.com>
References: <2729FB7D-0BB2-45A5-B209-BEADCEA83916@uw.edu>
 <c80ffc3a-dc0c-429d-85b4-61ab2dc2e5ea@spatialys.com>
 <A27C4EEC-5D7E-4068-B6EA-F1FF0515AC85@uw.edu>
 <CAE8nN5N-eaaCQpkkQgPaFtFSAP-iYNqFjftHeNb4qwKW1jazUQ@mail.gmail.com>
Message-ID: <59cadb88-a260-4db4-9981-a65bd9e2fd86@spatialys.com>


Le 09/01/2025 ? 14:29, Paul Harwood a ?crit?:
>
>
>>     "If you can sacrifice the ellipsoidal height axis to avoid using
>>     a Projected 3D CRS, which is a bit of a geodetic dubious object
>>     (don't ask me more, but minds more enlightned than me question
>>     the soundness of using an ellipsoidal heights with a projected CRS)?
>
>     I won?t ask you more :) but maybe this can be discussed further
>     with those enlightened minds, perhaps on PROJ mailing list or a GH
>     issue?
>
> I would also be very interested in the background to this comment - in 
> a different thread.
If I remember well:? the issue comes from the fact that the axis 
definition for a projected CRS is a Cartesian coordinate system, which 
is fine for the 2D part of it. But when you add the ellipsoidal height 
into that picture, the axis of the ellipsoidal height is perpendicular 
to the surface of the ellipsoid, but the surface of the ellipsoid is not 
(exactly) the plane of the projected CRS. Towards the projection center, 
if the scale factor is 1 or close to 1, then both surfaces can probably 
be considered as close enough, but the farther you go from the 
projection center, the less this approximation is valid.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/a0c2192b/attachment.htm>

From howard at hobu.co  Thu Jan  9 07:13:29 2025
From: howard at hobu.co (Howard Butler)
Date: Thu, 9 Jan 2025 09:13:29 -0600
Subject: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
In-Reply-To: <DB9PR09MB6887A335BB5DF0E6EB24B1A5FD132@DB9PR09MB6887.eurprd09.prod.outlook.com>
References: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
 <DB9PR09MB6887A335BB5DF0E6EB24B1A5FD132@DB9PR09MB6887.eurprd09.prod.outlook.com>
Message-ID: <B215B48C-73C0-4258-90D1-21C2BA4A215C@hobu.co>

+1

Howard

> On Jan 9, 2025, at 7:24?AM, Rahkonen Jukka via gdal-dev <gdal-dev at lists.osgeo.org> wrote:
> 
> +1
> 
> -Jukka Rahkonen-
> 
> -----Alkuper?inen viesti-----
> L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Even Rouault via gdal-dev
> L?hetetty: torstai 9. tammikuuta 2025 14.14
> Vastaanottaja: gdal-dev at lists.osgeo.org
> Aihe: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
> 
> Hi,
> 
> Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
> 
> Starting with my +1
> 
> Even
> 
> --
> http://www.spatialys.com/
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev


From m.zdila at gmail.com  Thu Jan  9 07:37:53 2025
From: m.zdila at gmail.com (=?UTF-8?Q?Martin_=C5=BDdila?=)
Date: Thu, 9 Jan 2025 16:37:53 +0100
Subject: [gdal-dev] Issue with Custom Transformation Pipeline in
 GDALReprojectImage
In-Reply-To: <c033f97e-a245-45e6-992f-45574ad40399@spatialys.com>
References: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>
 <c033f97e-a245-45e6-992f-45574ad40399@spatialys.com>
Message-ID: <CAL520RnmMcURvWjzD4aJgRaU8hxMwsR-faTSkcrw5+TB2wVpag@mail.gmail.com>

Thank you Even,

I went more low-level and successfully used GDALChunkAndWarpImage
<https://github.com/FreemapSlovakia/freemap-tiler/blob/8e1650b62fe2ca6a784870234810410284bd8263/src/main.rs#L344>.
I also posted answer on SO <https://stackoverflow.com/a/79342516/289827>.

Regarding the pipeline, it could be a bad copy-paste or garbled by
ChatGPT ?.

Best regards

On Thu, Jan 9, 2025 at 1:11?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> GDALReprojectImage() expects that a correct geotransform is already set on
> the target dataset.
>
> You may use GDALSuggestedWarpOutput2() to get a guessed geotransform
>
> Otherwise for full automated way, you may also using the C function
> GDALWarp().
>
> By the way, your below pipeline looks wrong
>
> +proj=pipeline
> +step +inv +proj=krovak +lat_0=49.5 +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel
> +step +inv +proj=hgridshift +grids=Slovakia_JTSK03_to_JTSK.gsb
> +step +proj=krovak +lat_0=49.5 +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel
> +step +proj=webmerc
>
> After the 3rd step (+proj=krovak), you are in projected coordinate space.
> Applying +proj=webmerc afterwards doesn't make any sense since the later
> expects geographic coordinates. You probably want to omit the 3rd step
>
-- 
Martin ?dila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/1b901264/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan  9 07:53:28 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 16:53:28 +0100
Subject: [gdal-dev] Issue with Custom Transformation Pipeline in
 GDALReprojectImage
In-Reply-To: <CAL520RnmMcURvWjzD4aJgRaU8hxMwsR-faTSkcrw5+TB2wVpag@mail.gmail.com>
References: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>
 <c033f97e-a245-45e6-992f-45574ad40399@spatialys.com>
 <CAL520RnmMcURvWjzD4aJgRaU8hxMwsR-faTSkcrw5+TB2wVpag@mail.gmail.com>
Message-ID: <19ed7176-e52f-487b-9131-1d68770761b2@spatialys.com>


>
> Regarding the pipeline, it could be a bad copy-paste or garbled by 
> ChatGPT??.

I wouldn't trust ChatGPT to come with geodesic-relevant pipelines... If 
you aren't really sure about what you are doing, you'd better let PROJ 
infer a reasonable pipeline.

I'm also questioning the use of the grid Slovakia_JTSK03_to_JTSK to go 
from JTSK03 to WGS 84, since the shift between JTSK03 and JTSK is really 
small compared to the one between JTSK03 and ETRS89

$ echo 48 20 0 | PROJ_NETWORK=ON cs2cs -d 8 "S-JTSK [JTSK03]" "S-JTSK"?? 
(uses the grid)
48.00000488??? 19.99999497 0.00000000

$ echo 48 20 0 | PROJ_NETWORK=ON cs2cs -d 8 "S-JTSK [JTSK03]" "ETRS89"? 
(uses an Helmert transformation)
47.99966528??? 19.99834773 0.00000000

$ echo 48 20 0 | PROJ_NETWORK=ON cs2cs -d 8 "S-JTSK [JTSK03]" "WGS 84"? 
(uses the same Helmert transformation as above, assuming WGS84 ~= ETRS89)
47.99966527??? 19.99834773 0.00000000

And more generally, people posting issues/questions written partially or 
totally written by generative "IA" should really mention it to set 
expectations to readers

-- 

http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From m.zdila at gmail.com  Thu Jan  9 08:49:33 2025
From: m.zdila at gmail.com (=?UTF-8?Q?Martin_=C5=BDdila?=)
Date: Thu, 9 Jan 2025 17:49:33 +0100
Subject: [gdal-dev] Issue with Custom Transformation Pipeline in
 GDALReprojectImage
In-Reply-To: <19ed7176-e52f-487b-9131-1d68770761b2@spatialys.com>
References: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>
 <c033f97e-a245-45e6-992f-45574ad40399@spatialys.com>
 <CAL520RnmMcURvWjzD4aJgRaU8hxMwsR-faTSkcrw5+TB2wVpag@mail.gmail.com>
 <19ed7176-e52f-487b-9131-1d68770761b2@spatialys.com>
Message-ID: <CAL520Rk_8zcWq_AYoU0PnzkLnAauG1C4RmUkhmazaSB4zzkbPg@mail.gmail.com>

On Thu, Jan 9, 2025 at 4:53?PM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> > Regarding the pipeline, it could be a bad copy-paste or garbled by
> > ChatGPT ?.
>
> I wouldn't trust ChatGPT to come with geodesic-relevant pipelines... If
> you aren't really sure about what you are doing, you'd better let PROJ
> infer a reasonable pipeline.
>

Actually it was not ChatGPT what created this pipeline. I pasted a proper
pipeline to it and it helped me to generate SO question, so it may have
garbled it.

Anyway a proper pipeline I use for years is:

+proj=pipeline +step +inv +proj=krovak +lat_0=49.5 +lon_0=24.8333333333333
+alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +step +inv
+proj=hgridshift +grids=Slovakia_JTSK03_to_JTSK.gsb +step +proj=krovak
+lat_0=49.5 +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999
+x_0=0 +y_0=0 +ellps=bessel +step +inv +proj=krovak +lat_0=49.5
+lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0
+ellps=bessel +step +proj=push +v_3 +step +proj=cart +ellps=bessel +step
+proj=helmert +x=485.021 +y=169.465 +z=483.839 +rx=-7.786342 +ry=-4.397554
+rz=-4.102655 +s=0 +convention=coordinate_frame +step +inv +proj=cart
+ellps=WGS84 +step +proj=pop +v_3 +step +proj=webmerc +lat_0=0 +lon_0=0
+x_0=0 +y_0=0 +ellps=WGS84

It is the official pipeline provided by our national cartography office,
together with Slovakia_JTSK03_to_JTSK.gsb file. Without this pipeline the
offset varies up to more than 10 meters. With the pipeline the transformed
geotata matches that from state office's WMS ?

BTW ChatGPT helped me in solving this problem a lot. Without it I would
maybe just gave it up as it is a hobby project.

And more generally, people posting issues/questions written partially or
> totally written by generative "IA" should really mention it to set
> expectations to readers
>

Thank you. I've just learned that even the pipeline was not the cause (but
could be) ?

-- 
Martin ?dila
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/5d0ba264/attachment.htm>

From even.rouault at spatialys.com  Thu Jan  9 09:02:31 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 18:02:31 +0100
Subject: [gdal-dev] Issue with Custom Transformation Pipeline in
 GDALReprojectImage
In-Reply-To: <CAL520Rk_8zcWq_AYoU0PnzkLnAauG1C4RmUkhmazaSB4zzkbPg@mail.gmail.com>
References: <CAL520RkNCOTpyyJEJtvZ6yz5Ttan-WbwUZg8TD=GuRO+eEcovA@mail.gmail.com>
 <c033f97e-a245-45e6-992f-45574ad40399@spatialys.com>
 <CAL520RnmMcURvWjzD4aJgRaU8hxMwsR-faTSkcrw5+TB2wVpag@mail.gmail.com>
 <19ed7176-e52f-487b-9131-1d68770761b2@spatialys.com>
 <CAL520Rk_8zcWq_AYoU0PnzkLnAauG1C4RmUkhmazaSB4zzkbPg@mail.gmail.com>
Message-ID: <fef5e63a-0c6c-4d81-9329-3665fa0c6c90@spatialys.com>


> Anyway a proper pipeline I use for years is:
>
> +proj=pipeline +step +inv +proj=krovak +lat_0=49.5 
> +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 
> +y_0=0 +ellps=bessel +step +inv +proj=hgridshift 
> +grids=Slovakia_JTSK03_to_JTSK.gsb +step +proj=krovak +lat_0=49.5 
> +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 
> +y_0=0 +ellps=bessel +step +inv +proj=krovak +lat_0=49.5 
> +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 +x_0=0 
> +y_0=0 +ellps=bessel +step +proj=push +v_3 +step +proj=cart 
> +ellps=bessel +step +proj=helmert +x=485.021 +y=169.465 +z=483.839 
> +rx=-7.786342 +ry=-4.397554 +rz=-4.102655 +s=0 
> +convention=coordinate_frame +step +inv +proj=cart +ellps=WGS84 +step 
> +proj=pop +v_3 +step +proj=webmerc +lat_0=0 +lon_0=0 +x_0=0 +y_0=0 
> +ellps=WGS84
>
> It is the official pipeline provided by our national cartography 
> office, together with?Slovakia_JTSK03_to_JTSK.gsb file. Without this 
> pipeline the offset varies up to more than 10 meters. With the 
> pipeline the transformed geotata matches that from state office's WMS??

It makes slightly more sense, but still seems dubious to me

The part "+step +inv +proj=krovak +lat_0=49.5 +lon_0=24.8333333333333 
+alpha=30.2881397527778 +k=0.9999 +x_0=0 +y_0=0 +ellps=bessel +step +inv 
+proj=hgridshift +grids=Slovakia_JTSK03_to_JTSK.gsb +step +proj=krovak 
+lat_0=49.5 +lon_0=24.8333333333333 +alpha=30.2881397527778 +k=0.9999 
+x_0=0 +y_0=0 +ellps=bessel" is what you would want to apply to go 
*from* "S-JTSK / Krovak East North"?? to? "S-JTSK [JTSK03] / Krovak East 
North"

and then the second part uses the expected Helmert tranformation from 
"S-JTSK [JTSK03] / Krovak East North" to WGS 84, so this pipeline is to 
go from "S-JTSK / Krovak East North" to WebMercator WGS 84.

Perhaps your dataset is mislabelled as being in "S-JTSK [JTSK03] / 
Krovak East North"? whereas it is in "S-JTSK / Krovak East North"? ?


-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/c5d01e98/attachment.htm>

From dbaston at gmail.com  Thu Jan  9 11:08:32 2025
From: dbaston at gmail.com (Daniel Baston)
Date: Thu, 9 Jan 2025 14:08:32 -0500
Subject: [gdal-dev] GDAL 3.10.1 RC2 is available (was Re: GDAL 3.10.1
 release candidate available)
In-Reply-To: <6d76e763-c836-455c-9bb6-12f22c76ad23@spatialys.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
 <6d76e763-c836-455c-9bb6-12f22c76ad23@spatialys.com>
Message-ID: <CA+K_q_qxwQwLbFrPy1_Zv7giidYDt=z067s6KM1yKBcx+HZW3A@mail.gmail.com>

It looks like the packaged gdalautotest snapshot does not include a
pytest.ini, which causes many warnings to be generated
(PytestUnknownMarkWarning) and also some collection errors such as this
one.

????????????????????????????????????????????????? ERROR collecting
gdrivers/data/s104/generate_test.py
??????????????????????????????????????????????????
import file mismatch:
imported module 'generate_test' has this __file__ attribute:

/home/dan/Downloads/gdalautotest-3.10.1/gdrivers/data/s102/generate_test.py
which is not the same as the test file we want to collect:

/home/dan/Downloads/gdalautotest-3.10.1/gdrivers/data/s104/generate_test.py
HINT: remove __pycache__ / .pyc files and/or use a unique basename for your
test file modules

On Wed, Jan 8, 2025 at 11:07?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Changes since RC1:
> - revert "CMake: Export -DGDAL_DEBUG as PUBLIC for debug builds (#11311)"
> - gml:CircleByCenterPoint: correctly take into account radius.uom for
> projected CRS
> - swig/python/setup.py.in: fix exception when building a RC git tag
>
> Pick up an archive among the following ones (by ascending size):
>
>    https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc2.tar.xz
>    https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc2.tar.gz
>    https://download.osgeo.org/gdal/3.10.1/gdal3101rc2.zip
>
> A snapshot of the gdalautotest suite is also available:
>
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc2.tar.gz
> https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc2.zip
>
> The NEWS file is here:
>
>    https://github.com/OSGeo/gdal/blob/v3.10.1RC2/NEWS.md
>
> Even
>
> Le 07/01/2025 ? 15:32, Even Rouault via gdal-dev a ?crit :
> > Hi,
> >
> > I have prepared a GDAL/OGR 3.10.1 release candidate.
> >
> > Pick up an archive among the following ones (by ascending size):
> >
> >   https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.xz
> >   https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1rc1.tar.gz
> >   https://download.osgeo.org/gdal/3.10.1/gdal3101rc1.zip
> >
> > A snapshot of the gdalautotest suite is also available:
> >
> > https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.tar.gz
> > https://download.osgeo.org/gdal/3.10.1/gdalautotest-3.10.1rc1.zip
> >
> > The NEWS file is here:
> >
> >   https://github.com/OSGeo/gdal/blob/v3.10.1RC1/NEWS.md
> >
> > Best regards,
> >
> > Even
> >
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/679bacd6/attachment-0001.htm>

From even.rouault at spatialys.com  Thu Jan  9 11:24:12 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 20:24:12 +0100
Subject: [gdal-dev] GDAL 3.10.1 RC2 is available (was Re: GDAL 3.10.1
 release candidate available)
In-Reply-To: <CA+K_q_qxwQwLbFrPy1_Zv7giidYDt=z067s6KM1yKBcx+HZW3A@mail.gmail.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
 <6d76e763-c836-455c-9bb6-12f22c76ad23@spatialys.com>
 <CA+K_q_qxwQwLbFrPy1_Zv7giidYDt=z067s6KM1yKBcx+HZW3A@mail.gmail.com>
Message-ID: <fa8a64a6-33d9-49f0-a338-4834960dde24@spatialys.com>


Le 09/01/2025 ? 20:08, Daniel Baston a ?crit?:
> It looks like the packaged gdalautotest snapshot does not include a 
> pytest.ini, which causes many warnings to be generated 
> (PytestUnknownMarkWarning) and also some collection errors such as 
> this one.

Not sure anyone has done that exercice before ;-) I believe you need to 
unzip it in a "gdalautotest" directory under the GDAL source tree, to 
replicate the exact layout of the git repository, and then run cmake so 
that a $build/gdalautotest directory with the generated pytest.ini file 
is created.


-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From joe at aidash.com  Thu Jan  9 11:27:54 2025
From: joe at aidash.com (Joe  McGlinchy)
Date: Thu, 9 Jan 2025 19:27:54 +0000
Subject: [gdal-dev] pansharpen subset of multispectral bands
Message-ID: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>

Hello,

I'm wanting to pansharpen only a subset of multispectral bands I have available. Say for instance I have blue-green-red-nir, and a panchromatic band, I can calculate the relative weights to specify when using `gdal_pansharpen` on the full multispectral dataset. If I want to only pansharpen, for example, the red and NIR bands, is it best to perform the pansharpening on the full dataset and only retain the bands I need? Or can i provide only the weights specific to the bands I want to pansharpen? If I can do the latter (which I can, given the parameter set to `gdal_pansharpen`), do I need to recalculate those weights, or only provide the subset of weights for those specific bands?

Many thanks,
Joe


-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/b3850988/attachment.htm>

From dbaston at gmail.com  Thu Jan  9 11:33:28 2025
From: dbaston at gmail.com (Daniel Baston)
Date: Thu, 9 Jan 2025 14:33:28 -0500
Subject: [gdal-dev] GDAL 3.10.1 RC2 is available (was Re: GDAL 3.10.1
 release candidate available)
In-Reply-To: <fa8a64a6-33d9-49f0-a338-4834960dde24@spatialys.com>
References: <b30286c2-7ac9-426b-8741-99c46026ccd1@spatialys.com>
 <6d76e763-c836-455c-9bb6-12f22c76ad23@spatialys.com>
 <CA+K_q_qxwQwLbFrPy1_Zv7giidYDt=z067s6KM1yKBcx+HZW3A@mail.gmail.com>
 <fa8a64a6-33d9-49f0-a338-4834960dde24@spatialys.com>
Message-ID: <CA+K_q_pAdDmhqm85+14yMi0bvKR6rkD28U76g3S00eZ5_PKq0Q@mail.gmail.com>

Yes, this works (with a directory name of "autotest").

On Thu, Jan 9, 2025 at 2:24?PM Even Rouault <even.rouault at spatialys.com>
wrote:

>
> Le 09/01/2025 ? 20:08, Daniel Baston a ?crit :
> > It looks like the packaged gdalautotest snapshot does not include a
> > pytest.ini, which causes many warnings to be generated
> > (PytestUnknownMarkWarning) and also some collection errors such as
> > this one.
>
> Not sure anyone has done that exercice before ;-) I believe you need to
> unzip it in a "gdalautotest" directory under the GDAL source tree, to
> replicate the exact layout of the git repository, and then run cmake so
> that a $build/gdalautotest directory with the generated pytest.ini file
> is created.
>
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/091e7c9f/attachment.htm>

From dbaston at gmail.com  Thu Jan  9 11:34:29 2025
From: dbaston at gmail.com (Daniel Baston)
Date: Thu, 9 Jan 2025 14:34:29 -0500
Subject: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
In-Reply-To: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
References: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
Message-ID: <CA+K_q_qXdF-Bf+q-+XNo1xd59_5+PhCUXUiMaE92D9ef3wLUxQ@mail.gmail.com>

+1 Dan

On Thu, Jan 9, 2025 at 7:14?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
>
> Starting with my +1
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end,
> this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/423836d8/attachment.htm>

From even.rouault at spatialys.com  Thu Jan  9 12:24:06 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 21:24:06 +0100
Subject: [gdal-dev] pansharpen subset of multispectral bands
In-Reply-To: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
References: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
Message-ID: <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>


Le 09/01/2025 ? 20:27, Joe McGlinchy via gdal-dev a ?crit?:
> Hello,
>
> I'm wanting to pansharpen only a subset of multispectral bands I have 
> available. Say for instance I have blue-green-red-nir, and a 
> panchromatic band, I can calculate the relative weights to specify 
> when using `gdal_pansharpen` on the full multispectral dataset. If I 
> want to only pansharpen, for example, the red and NIR bands, is it 
> best to perform the pansharpening on the full dataset and only retain 
> the bands I need? Or can i provide only the weights specific to the 
> bands I want to pansharpen? If I can do the latter (which I can, given 
> the parameter set to `gdal_pansharpen`), do I need to recalculate 
> those weights, or only provide the subset of weights for those 
> specific bands?

Given the formula at 
https://gdal.org/en/stable/drivers/raster/vrt.html#gdal-vrttut-pansharpen

pseudo_panchro[pixel]  =  sum(weight[i]  *  spectral[pixel][i]  for  i=0  to  nb_spectral_bands-1)
ratio  =  panchro[pixel]  /  pseudo_panchro[pixel]
for  i=0  to  nb_spectral_bands-1:
     output_value[pixel][i]  =  input_value[pixel][i]  *  ratio


if you only provide a subset of the input spectral bands, you won't be 
able to reconstruct a plausible pseudo_panchro values, hence the scaling 
ratio will not be accurate.


If your spectral dataset has bands in the R,G,B,NIR order, you can 
achieve what you want with:


$ gdal_pansharpen panchro.tif rgbnir.tif,band=1 rgbnir.tif,band=2 
rgbnir.tif,band=3 rgbnir.tif,band=4 out.tif -b 1 -b 4

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/74a6aa33/attachment.htm>

From joe at aidash.com  Thu Jan  9 12:49:18 2025
From: joe at aidash.com (Joe  McGlinchy)
Date: Thu, 9 Jan 2025 20:49:18 +0000
Subject: [gdal-dev] pansharpen subset of multispectral bands
In-Reply-To: <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
References: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
 <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
Message-ID: <MW6PR04MB88717664E74882766D46530BC3132@MW6PR04MB8871.namprd04.prod.outlook.com>

Thank you, Even!

In the event that we are provided only 4 bands, but from an 8-band system, will this still hold? It is what we have to work with, unfortunately or not.

-Joe
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, January 9, 2025 13:24
To: Joe McGlinchy <joe at aidash.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] pansharpen subset of multispectral bands


EXTERNAL SENDER. DO NOT click links, or open attachments, if the sender is unknown, or the message seems suspicious in any way. DO NOT provide your user ID or Password.






Le 09/01/2025 ? 20:27, Joe McGlinchy via gdal-dev a ?crit :
Hello,

I'm wanting to pansharpen only a subset of multispectral bands I have available. Say for instance I have blue-green-red-nir, and a panchromatic band, I can calculate the relative weights to specify when using `gdal_pansharpen` on the full multispectral dataset. If I want to only pansharpen, for example, the red and NIR bands, is it best to perform the pansharpening on the full dataset and only retain the bands I need? Or can i provide only the weights specific to the bands I want to pansharpen? If I can do the latter (which I can, given the parameter set to `gdal_pansharpen`), do I need to recalculate those weights, or only provide the subset of weights for those specific bands?

Given the formula at https://gdal.org/en/stable/drivers/raster/vrt.html#gdal-vrttut-pansharpen

pseudo_panchro[pixel] = sum(weight[i] * spectral[pixel][i] for i=0 to nb_spectral_bands-1)
ratio = panchro[pixel] / pseudo_panchro[pixel]
for i=0 to nb_spectral_bands-1:
    output_value[pixel][i] = input_value[pixel][i] * ratio



if you only provide a subset of the input spectral bands, you won't be able to reconstruct a plausible pseudo_panchro values, hence the scaling ratio will not be accurate.


If your spectral dataset has bands in the R,G,B,NIR order, you can achieve what you want with:


$ gdal_pansharpen panchro.tif rgbnir.tif,band=1 rgbnir.tif,band=2 rgbnir.tif,band=3 rgbnir.tif,band=4 out.tif -b 1 -b 4


Even

--
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/24819042/attachment.htm>

From bdezonia at gmail.com  Thu Jan  9 13:04:48 2025
From: bdezonia at gmail.com (Barry DeZonia)
Date: Thu, 9 Jan 2025 15:04:48 -0600
Subject: [gdal-dev] pansharpen subset of multispectral bands
In-Reply-To: <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
References: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
 <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
Message-ID: <CAKcvfuTyk9x-FGsPv8SUTTt6GzfLeJGz_0+9eKsHPcBjU+Ws8g@mail.gmail.com>

Does that snippet of code need to be that way? It seems it could
pretty easily be changed to work a band at a time and a weight of zero
would contribute nothing. Now I do not know the domain at all and
maybe that violates some assumptions. Curious as to what you think.

On Thu, Jan 9, 2025 at 2:36?PM Even Rouault via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
>
> Le 09/01/2025 ? 20:27, Joe McGlinchy via gdal-dev a ?crit :
>
> Hello,
>
> I'm wanting to pansharpen only a subset of multispectral bands I have available. Say for instance I have blue-green-red-nir, and a panchromatic band, I can calculate the relative weights to specify when using `gdal_pansharpen` on the full multispectral dataset. If I want to only pansharpen, for example, the red and NIR bands, is it best to perform the pansharpening on the full dataset and only retain the bands I need? Or can i provide only the weights specific to the bands I want to pansharpen? If I can do the latter (which I can, given the parameter set to `gdal_pansharpen`), do I need to recalculate those weights, or only provide the subset of weights for those specific bands?
>
> Given the formula at https://gdal.org/en/stable/drivers/raster/vrt.html#gdal-vrttut-pansharpen
>
> pseudo_panchro[pixel] = sum(weight[i] * spectral[pixel][i] for i=0 to nb_spectral_bands-1)
> ratio = panchro[pixel] / pseudo_panchro[pixel]
> for i=0 to nb_spectral_bands-1:
>     output_value[pixel][i] = input_value[pixel][i] * ratio
>
>
> if you only provide a subset of the input spectral bands, you won't be able to reconstruct a plausible pseudo_panchro values, hence the scaling ratio will not be accurate.
>
>
> If your spectral dataset has bands in the R,G,B,NIR order, you can achieve what you want with:
>
>
> $ gdal_pansharpen panchro.tif rgbnir.tif,band=1 rgbnir.tif,band=2 rgbnir.tif,band=3 rgbnir.tif,band=4 out.tif -b 1 -b 4
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

From joe at aidash.com  Thu Jan  9 13:21:03 2025
From: joe at aidash.com (Joe  McGlinchy)
Date: Thu, 9 Jan 2025 21:21:03 +0000
Subject: [gdal-dev] pansharpen subset of multispectral bands
In-Reply-To: <CAKcvfuTyk9x-FGsPv8SUTTt6GzfLeJGz_0+9eKsHPcBjU+Ws8g@mail.gmail.com>
References: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
 <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
 <CAKcvfuTyk9x-FGsPv8SUTTt6GzfLeJGz_0+9eKsHPcBjU+Ws8g@mail.gmail.com>
Message-ID: <MW6PR04MB88716A210D0AE5C1FA6687E2C3132@MW6PR04MB8871.namprd04.prod.outlook.com>

There is a band_nums parameter (and weights) you can provide to gdal_pansharpen, which led to me thinking about this question in the first place.


band_nums: Optional[Sequence[int]] = None

weights: Optional[Sequence[float]] = None

So, providing either band_nums=[1,2,3,4] along with weights and extracting bands 1 and 4 after-the-fact, or band_nums=[1,4] and providing the corresponding weights for those bands, in my mind should produce something similar? I haven't tried it just yet.
________________________________
From: Barry DeZonia <bdezonia at gmail.com>
Sent: Thursday, January 9, 2025 14:04
To: Even Rouault <even.rouault at spatialys.com>
Cc: Joe McGlinchy <joe at aidash.com>; gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] pansharpen subset of multispectral bands

EXTERNAL SENDER. DO NOT click links, or open attachments, if the sender is unknown, or the message seems suspicious in any way. DO NOT provide your user ID or Password.





Does that snippet of code need to be that way? It seems it could
pretty easily be changed to work a band at a time and a weight of zero
would contribute nothing. Now I do not know the domain at all and
maybe that violates some assumptions. Curious as to what you think.

On Thu, Jan 9, 2025 at 2:36?PM Even Rouault via gdal-dev
<gdal-dev at lists.osgeo.org> wrote:
>
>
> Le 09/01/2025 ? 20:27, Joe McGlinchy via gdal-dev a ?crit :
>
> Hello,
>
> I'm wanting to pansharpen only a subset of multispectral bands I have available. Say for instance I have blue-green-red-nir, and a panchromatic band, I can calculate the relative weights to specify when using `gdal_pansharpen` on the full multispectral dataset. If I want to only pansharpen, for example, the red and NIR bands, is it best to perform the pansharpening on the full dataset and only retain the bands I need? Or can i provide only the weights specific to the bands I want to pansharpen? If I can do the latter (which I can, given the parameter set to `gdal_pansharpen`), do I need to recalculate those weights, or only provide the subset of weights for those specific bands?
>
> Given the formula at https://gdal.org/en/stable/drivers/raster/vrt.html#gdal-vrttut-pansharpen
>
> pseudo_panchro[pixel] = sum(weight[i] * spectral[pixel][i] for i=0 to nb_spectral_bands-1)
> ratio = panchro[pixel] / pseudo_panchro[pixel]
> for i=0 to nb_spectral_bands-1:
>     output_value[pixel][i] = input_value[pixel][i] * ratio
>
>
> if you only provide a subset of the input spectral bands, you won't be able to reconstruct a plausible pseudo_panchro values, hence the scaling ratio will not be accurate.
>
>
> If your spectral dataset has bands in the R,G,B,NIR order, you can achieve what you want with:
>
>
> $ gdal_pansharpen panchro.tif rgbnir.tif,band=1 rgbnir.tif,band=2 rgbnir.tif,band=3 rgbnir.tif,band=4 out.tif -b 1 -b 4
>
> Even
>
> --
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/257ac975/attachment.htm>

From even.rouault at spatialys.com  Thu Jan  9 13:49:18 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Thu, 9 Jan 2025 22:49:18 +0100
Subject: [gdal-dev] pansharpen subset of multispectral bands
In-Reply-To: <MW6PR04MB88716A210D0AE5C1FA6687E2C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
References: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
 <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
 <CAKcvfuTyk9x-FGsPv8SUTTt6GzfLeJGz_0+9eKsHPcBjU+Ws8g@mail.gmail.com>
 <MW6PR04MB88716A210D0AE5C1FA6687E2C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
Message-ID: <86bd2250-3147-4b89-92f8-d7ca9364382d@spatialys.com>

 > in the event that we are provided only 4 bands, but from an 8-band 
system, will this still hold? It is what we have to work with, 
unfortunately or not.

Yes, obviously, the example generalizes to other number of bands.

> So, providing either |band_nums=[1,2,3,4]|?along with weights and 
> extracting bands 1 and 4 after-the-fact, or |band_nums=[1,4] and 
> ||providing the corresponding weights for those bands, in my mind 
> should produce something similar? I haven't tried it just yet.|

No.

Let's consider the minimum example:

A = 10, weightA = 0.7

B = 20, weightB = 0.3

P = 30

PseudoPanchro = 10 * 0.7 + 20 * 0.3 = 13

then A_pansharpened = A / PseudoPanchro * Panchro = 10. / 13 * 30 = 23.08

and? B_pansharpened= B / PseudoPanchro * Panchro = 20. / 13 * 30 = 46.15

If you ignore B, than A_pansharpened = 10. / (10 * 0.7) * 30 = 42.85

And, even if you rebalance the reduced set of weights so its sum is 
still 1, which makes much more sense, that still won't work, because 
that would in that example just give the value of P.

https://github.com/mapbox/rio-pansharpen/blob/master/docs/pansharpening_methods.rst#brovey 
: "It assumes that the spectral range spanned by the panchromatic image 
is the same as that covered by the multispectral channels."?? If you 
ignore multispectral channels in the computation of the pseudo panchro 
value, then the assumption no longer holds true. Or you need some magic 
to generate a reference panchromatic image that only takes into account 
the subset of bands you are interested in.

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/7cf0b159/attachment.htm>

From joe at aidash.com  Thu Jan  9 14:01:31 2025
From: joe at aidash.com (Joe  McGlinchy)
Date: Thu, 9 Jan 2025 22:01:31 +0000
Subject: [gdal-dev] pansharpen subset of multispectral bands
In-Reply-To: <86bd2250-3147-4b89-92f8-d7ca9364382d@spatialys.com>
References: <MW6PR04MB887175123CA3077AF03288C4C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
 <dcf2e7df-6a47-4a64-b16c-f045b77a1762@spatialys.com>
 <CAKcvfuTyk9x-FGsPv8SUTTt6GzfLeJGz_0+9eKsHPcBjU+Ws8g@mail.gmail.com>
 <MW6PR04MB88716A210D0AE5C1FA6687E2C3132@MW6PR04MB8871.namprd04.prod.outlook.com>
 <86bd2250-3147-4b89-92f8-d7ca9364382d@spatialys.com>
Message-ID: <MW6PR04MB88712D5D8816CA495D8CA40AC3132@MW6PR04MB8871.namprd04.prod.outlook.com>

Thanks for that explanation, Even. Is this to say, if i have a panchromatic band that spans coastal-blue-green-red-rededge1-rededge2-rededge2-nir, and I only have blue-green-red-NIR, that pansharpening is invalid? The math works out, but it may not be a spectrally consistent result.

I'm able to calculate the weights for the full band set given a data provider's RSR data. But sometimes we do not get the full multispectral product due to ordering specifics. The pseudo-code suggests that I'd be producing a pseudo-panchromatic value using the bands I provide, regardless of if I have the full multispectral band set or not. This works out math-wise, but in terms of image interpretation, it would be preferable to use the full multispectral band set. In the event that I do not, such as having a 4-band subset that is still within the spectral bandwidth of the panchromatic band, it seems the pansharpening operation should still hold. Or am I misreading something? Please advise.

Thanks for your help!
Joe
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Thursday, January 9, 2025 14:49
To: Joe McGlinchy <joe at aidash.com>; Barry DeZonia <bdezonia at gmail.com>
Cc: gdal-dev at lists.osgeo.org <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] pansharpen subset of multispectral bands


EXTERNAL SENDER. DO NOT click links, or open attachments, if the sender is unknown, or the message seems suspicious in any way. DO NOT provide your user ID or Password.





> in the event that we are provided only 4 bands, but from an 8-band system, will this still hold? It is what we have to work with, unfortunately or not.

Yes, obviously, the example generalizes to other number of bands.

So, providing either band_nums=[1,2,3,4] along with weights and extracting bands 1 and 4 after-the-fact, or band_nums=[1,4] and providing the corresponding weights for those bands, in my mind should produce something similar? I haven't tried it just yet.

No.

Let's consider the minimum example:

A = 10, weightA = 0.7

B = 20, weightB = 0.3

P = 30

PseudoPanchro = 10 * 0.7 + 20 * 0.3 = 13

then A_pansharpened = A / PseudoPanchro * Panchro = 10. / 13 * 30 = 23.08

and  B_pansharpened= B / PseudoPanchro * Panchro = 20. / 13 * 30 = 46.15

If you ignore B, than A_pansharpened = 10. / (10 * 0.7) * 30 = 42.85

And, even if you rebalance the reduced set of weights so its sum is still 1, which makes much more sense, that still won't work, because that would in that example just give the value of P.

https://github.com/mapbox/rio-pansharpen/blob/master/docs/pansharpening_methods.rst#brovey : "It assumes that the spectral range spanned by the panchromatic image is the same as that covered by the multispectral channels."   If you ignore multispectral channels in the computation of the pseudo panchro value, then the assumption no longer holds true. Or you need some magic to generate a reference panchromatic image that only takes into account the subset of bands you are interested in.

--
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250109/bed7bfba/attachment-0001.htm>

From rupestre.campos at gmail.com  Fri Jan 10 08:49:37 2025
From: rupestre.campos at gmail.com (ky)
Date: Fri, 10 Jan 2025 13:49:37 -0300
Subject: [gdal-dev] Vector area calculation
Message-ID: <CAAvXUUrupFo=adKma0LhavoanPF5_t1kVV0GxsD7XZOhnT63hA@mail.gmail.com>

Hello all, hope you are well

Got some unexpected results computing area using GDAL==3.4.1 and official
Brazilian projection, where results are about half of what is reported as
correct. Does anyone knows what is causing it ?

Just to compare shapely/geopandas yields correct results using same
projections.

code can be found on this gist:
https://gist.github.com/rupestre-campos/a82a1403cb47a8153f07c775d7902f50

the linked scrip outputs
Area ha farm: 6.0
Area ha calculated (gdal): 3.23
Area ha calculated (geopandas): 6.0
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250110/14672f79/attachment.htm>

From even.rouault at spatialys.com  Fri Jan 10 08:52:56 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Fri, 10 Jan 2025 17:52:56 +0100
Subject: [gdal-dev] Vector area calculation
In-Reply-To: <CAAvXUUrupFo=adKma0LhavoanPF5_t1kVV0GxsD7XZOhnT63hA@mail.gmail.com>
References: <CAAvXUUrupFo=adKma0LhavoanPF5_t1kVV0GxsD7XZOhnT63hA@mail.gmail.com>
Message-ID: <0abdc98d-1e1a-42d0-bf9d-419b0a5cba3e@spatialys.com>

Hi,

I suspect you are running into 
https://gdal.org/en/stable/tutorials/osr_api_tut.html#crs-and-axis-order

Concretely try adding:

source_srs.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER)

at line 34.

Even


Le 10/01/2025 ? 17:49, ky via gdal-dev a ?crit?:
> Hello all, hope you are well
>
> Got some unexpected results computing area using GDAL==3.4.1 and 
> official Brazilian projection, where results are about half of what is 
> reported as correct. Does anyone knows what is causing it ?
>
> Just to compare shapely/geopandas yields correct results using same 
> projections.
>
> code can be found on this gist: 
> https://gist.github.com/rupestre-campos/a82a1403cb47a8153f07c775d7902f50
>
> the linked scrip outputs
> Area ha farm: 6.0
> Area ha calculated (gdal): 3.23
> Area ha calculated (geopandas): 6.0
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250110/192ce70c/attachment.htm>

From rupestre.campos at gmail.com  Fri Jan 10 08:56:49 2025
From: rupestre.campos at gmail.com (ky)
Date: Fri, 10 Jan 2025 13:56:49 -0300
Subject: [gdal-dev] Vector area calculation
In-Reply-To: <0abdc98d-1e1a-42d0-bf9d-419b0a5cba3e@spatialys.com>
References: <CAAvXUUrupFo=adKma0LhavoanPF5_t1kVV0GxsD7XZOhnT63hA@mail.gmail.com>
 <0abdc98d-1e1a-42d0-bf9d-419b0a5cba3e@spatialys.com>
Message-ID: <CAAvXUUrQ3MYK1wNbfnGTx+zHAhD9rnUSP8rkvFMx+Q6Z6i4+nA@mail.gmail.com>

Hi Even,

Thank's so much for your help! Indeed with this option it yields the
expected result :

Area ha farm: 6.0
Area ha calculated (gdal): 6.0
Area ha calculated (geopandas): 6.0



On Fri, Jan 10, 2025 at 1:52?PM Even Rouault <even.rouault at spatialys.com>
wrote:

> Hi,
>
> I suspect you are running into
> https://gdal.org/en/stable/tutorials/osr_api_tut.html#crs-and-axis-order
>
> Concretely try adding:
>
> source_srs.SetAxisMappingStrategy(osr.OAMS_TRADITIONAL_GIS_ORDER)
>
> at line 34.
>
> Even
>
>
> Le 10/01/2025 ? 17:49, ky via gdal-dev a ?crit :
>
> Hello all, hope you are well
>
> Got some unexpected results computing area using GDAL==3.4.1 and official
> Brazilian projection, where results are about half of what is reported as
> correct. Does anyone knows what is causing it ?
>
> Just to compare shapely/geopandas yields correct results using same
> projections.
>
> code can be found on this gist:
> https://gist.github.com/rupestre-campos/a82a1403cb47a8153f07c775d7902f50
>
> the linked scrip outputs
> Area ha farm: 6.0
> Area ha calculated (gdal): 3.23
> Area ha calculated (geopandas): 6.0
>
>
>
> _______________________________________________
> gdal-dev mailing listgdal-dev at lists.osgeo.orghttps://lists.osgeo.org/mailman/listinfo/gdal-dev
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250110/baab2470/attachment.htm>

From sharma1981 at outlook.com  Sun Jan 12 20:40:55 2025
From: sharma1981 at outlook.com (Parveen Sharma)
Date: Mon, 13 Jan 2025 04:40:55 +0000
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
Message-ID: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>

Hello

I am trying to build from GDAL from source using v3.9.3 tag

I plan to use "PDFium" library for building GDAL PDF Dynamic driver and have below 3 questions


Ques 1) Are below a right combination of CMAKE options?

<arg value="-DGDAL_ENABLE_DRIVER_PDF=ON"/>
<arg value="-DGDAL_USE_POPPLER=OFF"/>
<arg value="-DGDAL_USE_PDFIUM=ON"/>
<arg value="-DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON"/>


In addition I will set option PDFIUM_INCLUDE_DIR to point to Path to an include directory with the ``public/fpdfview.h`` header file and option PDFIUM_LIBRARY to point to

Path to a shared or static library file.

Ques 2) Should I be building PDFium from the "master" branch of below fork by Even Rouault to work with GDAL v3.9.3 ?

https://github.com/rouault/pdfium_build_gdal_3_1

Ques 3) If the answer to (2) point is yes, then can I use above branch for both Windows and Linux?

Please suggest and assist.

Best Regards
Parveen




-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/a8fab0f4/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 13 07:22:35 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Jan 2025 16:22:35 +0100
Subject: [gdal-dev] Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
In-Reply-To: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
References: <87e028b5-0359-4bfb-9704-b5f3a442d5b8@spatialys.com>
Message-ID: <5d3c0f78-4e2b-4be5-8b11-dd6b48ace4cf@spatialys.com>

Hi,

motion passed with +1 from PSC members JavierJS, JukkaR, HowardB, DanB, 
and me.

Even

Le 09/01/2025 ? 13:13, Even Rouault via gdal-dev a ?crit?:
> Hi,
>
> Motion: approve GDAL 3.10.1 RC2 as 3.10.1 release
>
> Starting with my +1
>
> Even
>
-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From dklaus at carlsonsw.com  Mon Jan 13 07:34:16 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 13 Jan 2025 10:34:16 -0500
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
In-Reply-To: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>

Parveen,

A couple of years ago my company used the following options to generate a
GDAL PDF dynamic driver for GDAL 3.7.0:

-DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON
-DGDAL_USE_PDFIUM=ON
-DPDFIUM_INCLUDE_DIR="%~dp0ExtractPDFium\install\include\pdfium"
-DPDFIUM_LIBRARY="%~dp0ExtractPDFium\install\lib\pdfium.lib"

Obviously the include directory and library paths will depend on your
specific folder structure, so you might need to adjust those on your
system. But we were successful in building 3.7.0 with GDAL PDF via dll
using these options and perhaps they will work for you as well. Hopefully
this reply is helpful to you. Best of luck,



On Sun, Jan 12, 2025 at 11:41?PM Parveen Sharma via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hello
>
> I am trying to build from *GDAL from source using v3.9.3 tag*
>
> I plan to use "PDFium" library for building GDAL PDF Dynamic driver and
> have below 3 questions
>
>
> *Ques 1*) Are below a right combination of CMAKE options?
>
> <arg value="-D*GDAL_ENABLE_DRIVER_PDF=ON*"/>
> <arg value="-D*GDAL_USE_POPPLER=**OFF*"/>
> <arg value="-D*GDAL_USE_PDFIUM*=ON"/>
> <arg value="-D*GDAL_ENABLE_DRIVER_PDF_PLUGIN=ON*"/>
>
>
> In addition I will set option *PDFIUM_INCLUDE_DIR *to point to Path to an
> include directory with the ``public/fpdfview.h`` header file and option *PDFIUM_LIBRARY
> *to point to
>
> Path to a shared or static library file.
>
>
> *Ques 2*) Should I be building PDFium from the "*master*" branch of below
> fork by Even Rouault to work with GDAL *v3.9.3 ?*
>
> https://github.com/rouault/pdfium_build_gdal_3_1
> <https://github.com/rouault/pdfium_build_gdal_3_1>
>
> *Ques 3*) If the answer to (2) point is yes, then can I use above branch
> for both Windows and Linux?
>
> Please suggest and assist.
>
> Best Regards
> Parveen
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
>
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>


-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/c8b6934b/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 13 07:40:27 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Jan 2025 16:40:27 +0100
Subject: [gdal-dev] GDAL 3.10.1 is released
Message-ID: <822f40db-fd4a-47b4-b63a-5018242054f2@spatialys.com>

Hi,

On behalf of the GDAL/OGR development team, I am pleased to announce the 
release of the GDAL/OGR 3.10.1 bug fix version.

Consult the release notes for the list of issues addressed:
 ??? https://github.com/OSGeo/gdal/blob/v3.10.1/NEWS.md

The sources are available at:

 ??? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1.tar.xz
 ??? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1.tar.xz.md5
 ??? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1.tar.xz.sig

or

 ??? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1.tar.gz
 ??? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1.tar.gz.md5
 ??? https://download.osgeo.org/gdal/3.10.1/gdal-3.10.1.tar.gz.sig

or

 ??? https://download.osgeo.org/gdal/3.10.1/gdal3101.zip
 ??? https://download.osgeo.org/gdal/3.10.1/gdal3101.zip.md5
 ??? https://download.osgeo.org/gdal/3.10.1/gdal3101.zip.sig

Best regards,

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.


From even.rouault at spatialys.com  Mon Jan 13 07:43:48 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Mon, 13 Jan 2025 16:43:48 +0100
Subject: [gdal-dev] Call for review on RFC 105: Add and use safe path
 manipulation functions
Message-ID: <002bb187-ea9e-432c-8154-759bcf253733@spatialys.com>

Hi,

nothing exciting, just robustness/enhanced security.

RFC 105 text: Add and use safe path manipulation functions: 
https://github.com/OSGeo/gdal/pull/11640

Summary:

This RFC adds safe versions, for use by C++ code, of all functions of 
cpl_path.cpp (such as CPLGetPath(), CPLGetDirname(), CPLGetBasename(), 
CPLGetExtension(), CPLGetFormFilename(), CPLGetFormCIFilename(), etc.), 
that returns a result stored in more or less ephemeral storage, to avoid 
potential security issues related to their mis-use. It also covers 
converting most of the code base to the safer alternatives.

Even

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/333777f8/attachment.htm>

From schwehr at gmail.com  Mon Jan 13 14:45:01 2025
From: schwehr at gmail.com (Kurt Schwehr)
Date: Mon, 13 Jan 2025 14:45:01 -0800
Subject: [gdal-dev] Call for review on RFC 105: Add and use safe path
 manipulation functions
In-Reply-To: <002bb187-ea9e-432c-8154-759bcf253733@spatialys.com>
References: <002bb187-ea9e-432c-8154-759bcf253733@spatialys.com>
Message-ID: <CACmBxysF+6K1QYyVUwE09E6Rsc2MYh4GKoVd=v-inc2dLEGuQg@mail.gmail.com>

While not exciting, definitely important. I didn't see anything to comment
on in the RFC.

Thanks for working on this!

-Kurt

On Mon, Jan 13, 2025 at 7:57?AM Even Rouault via gdal-dev <
gdal-dev at lists.osgeo.org> wrote:

> Hi,
>
> nothing exciting, just robustness/enhanced security.
>
> RFC 105 text: Add and use safe path manipulation functions:
> https://github.com/OSGeo/gdal/pull/11640
>
> Summary:
>
> This RFC adds safe versions, for use by C++ code, of all functions of
> cpl_path.cpp (such as CPLGetPath(), CPLGetDirname(), CPLGetBasename(),
> CPLGetExtension(), CPLGetFormFilename(), CPLGetFormCIFilename(), etc.),
> that returns a result stored in more or less ephemeral storage, to avoid
> potential security issues related to their mis-use. It also covers
> converting most of the code base to the safer alternatives.
>
> Even
>
> -- http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/95f04b13/attachment.htm>

From afernandez at odyhpc.com  Mon Jan 13 14:36:50 2025
From: afernandez at odyhpc.com (afernandez)
Date: Mon, 13 Jan 2025 22:36:50 +0000
Subject: [gdal-dev] Issue with Robinson projection
Message-ID: <60dd785d2a744.fd524c120f669@odyhpc.com>

Hello,
The following snippet works fine
# epsg = 54030 
epsg = 4326 
srs = osr.SpatialReference()
srs.ImportFromEPSG(epsg)
However, and when I switch epsg to 54030 (which I believe it's the value 
for the Robinson projection), it generates the error:
File "/usr/lib/python3/dist-packages/osgeo/osr.py", line 772, in 
ImportFromEPSG
return _osr.SpatialReference_ImportFromEPSG(self, *args)
RuntimeError: PROJ: proj_create_from_database: crs not found
Thanks.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/fb5d85b8/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 13 15:08:44 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Jan 2025 00:08:44 +0100
Subject: [gdal-dev] Issue with Robinson projection
In-Reply-To: <60dd785d2a744.fd524c120f669@odyhpc.com>
References: <60dd785d2a744.fd524c120f669@odyhpc.com>
Message-ID: <6a066e8b-fcd4-496e-a837-32666f66344f@spatialys.com>


Le 13/01/2025 ? 23:36, afernandez via gdal-dev a ?crit?:
> Hello,
> The following snippet works fine
> #? ? ? ? epsg = 54030
> ? ? ? ? epsg = 4326
> ? ? ? ? srs = osr.SpatialReference()
> ? ? ? ? srs.ImportFromEPSG(epsg)
> However, and when I switch epsg to 54030 (which I believe it's the 
> value for the Robinson projection), it generates the error:
> ? File "/usr/lib/python3/dist-packages/osgeo/osr.py", line 772, in 
> ImportFromEPSG
> ? ? return _osr.SpatialReference_ImportFromEPSG(self, *args)
> RuntimeError: PROJ: proj_create_from_database: crs not found

54030 is not a EPSG CRS but a ESRI one, so use 
srs.SetFromUserInput("ESRI:54030")

Even

-- 

http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/b94d710c/attachment.htm>

From j1 at jimenezshaw.com  Mon Jan 13 15:09:21 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 14 Jan 2025 00:09:21 +0100
Subject: [gdal-dev] Issue with Robinson projection
In-Reply-To: <60dd785d2a744.fd524c120f669@odyhpc.com>
References: <60dd785d2a744.fd524c120f669@odyhpc.com>
Message-ID: <CADRrdKtK4_LvNv1rH-8+NbZzGoEzY+WogdJhUfgsbZrK4YHVnw@mail.gmail.com>

54030 is definitely not a valid CRS in epsg

Do you mean this one?
https://epsg.org/crs_23328/NAD83-2011-ICS83-Robinson-ftUS.html

On Tue, 14 Jan 2025, 00:02 afernandez via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

> Hello,
> The following snippet works fine
> #        epsg = 54030
>         epsg = 4326
>         srs = osr.SpatialReference()
>         srs.ImportFromEPSG(epsg)
> However, and when I switch epsg to 54030 (which I believe it's the value
> for the Robinson projection), it generates the error:
>   File "/usr/lib/python3/dist-packages/osgeo/osr.py", line 772, in
> ImportFromEPSG
>     return _osr.SpatialReference_ImportFromEPSG(self, *args)
> RuntimeError: PROJ: proj_create_from_database: crs not found
> Thanks.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/b681cdaa/attachment.htm>

From j1 at jimenezshaw.com  Mon Jan 13 15:10:57 2025
From: j1 at jimenezshaw.com (Javier Jimenez Shaw)
Date: Tue, 14 Jan 2025 00:10:57 +0100
Subject: [gdal-dev] Issue with Robinson projection
In-Reply-To: <6a066e8b-fcd4-496e-a837-32666f66344f@spatialys.com>
References: <60dd785d2a744.fd524c120f669@odyhpc.com>
 <6a066e8b-fcd4-496e-a837-32666f66344f@spatialys.com>
Message-ID: <CADRrdKuRD+WqWdcbbfU15Gf5CeW1RdFwrFZd0Qosck8tqt2xLA@mail.gmail.com>

https://spatialreference.org/ref/esri/54030/

On Tue, 14 Jan 2025, 00:08 Even Rouault via gdal-dev, <
gdal-dev at lists.osgeo.org> wrote:

>
> Le 13/01/2025 ? 23:36, afernandez via gdal-dev a ?crit :
>
> Hello,
> The following snippet works fine
> #        epsg = 54030
>         epsg = 4326
>         srs = osr.SpatialReference()
>         srs.ImportFromEPSG(epsg)
> However, and when I switch epsg to 54030 (which I believe it's the value
> for the Robinson projection), it generates the error:
>   File "/usr/lib/python3/dist-packages/osgeo/osr.py", line 772, in
> ImportFromEPSG
>     return _osr.SpatialReference_ImportFromEPSG(self, *args)
> RuntimeError: PROJ: proj_create_from_database: crs not found
>
> 54030 is not a EPSG CRS but a ESRI one, so use
> srs.SetFromUserInput("ESRI:54030")
>
> Even
>
> --
>
> http://www.spatialys.com
> My software is free, but my time generally not.
> Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/3e0c94ad/attachment.htm>

From sharma1981 at outlook.com  Mon Jan 13 15:26:54 2025
From: sharma1981 at outlook.com (Parveen Sharma)
Date: Mon, 13 Jan 2025 23:26:54 +0000
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
In-Reply-To: <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>
References: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>
Message-ID: <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>

Thanks

What about the PDFium git repo which I mentioned? Do I need to build PDFium using that git repo only?

________________________________
From: David Klaus <dklaus at carlsonsw.com>
Sent: Monday, January 13, 2025 11:34 PM
To: Parveen Sharma <sharma1981 at outlook.com>
Cc: Micha? Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Build GDAL PDF Driver with PDFium

Parveen,

A couple of years ago my company used the following options to generate a GDAL PDF dynamic driver for GDAL 3.7.0:

-DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON
-DGDAL_USE_PDFIUM=ON
-DPDFIUM_INCLUDE_DIR="%~dp0ExtractPDFium\install\include\pdfium"
-DPDFIUM_LIBRARY="%~dp0ExtractPDFium\install\lib\pdfium.lib"

Obviously the include directory and library paths will depend on your specific folder structure, so you might need to adjust those on your system. But we were successful in building 3.7.0 with GDAL PDF via dll using these options and perhaps they will work for you as well. Hopefully this reply is helpful to you. Best of luck,



On Sun, Jan 12, 2025 at 11:41?PM Parveen Sharma via gdal-dev <gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>> wrote:
Hello

I am trying to build from GDAL from source using v3.9.3 tag

I plan to use "PDFium" library for building GDAL PDF Dynamic driver and have below 3 questions


Ques 1) Are below a right combination of CMAKE options?

<arg value="-DGDAL_ENABLE_DRIVER_PDF=ON"/>
<arg value="-DGDAL_USE_POPPLER=OFF"/>
<arg value="-DGDAL_USE_PDFIUM=ON"/>
<arg value="-DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON"/>


In addition I will set option PDFIUM_INCLUDE_DIR to point to Path to an include directory with the ``public/fpdfview.h`` header file and option PDFIUM_LIBRARY to point to

Path to a shared or static library file.

Ques 2) Should I be building PDFium from the "master" branch of below fork by Even Rouault to work with GDAL v3.9.3 ?

https://github.com/rouault/pdfium_build_gdal_3_1

Ques 3) If the answer to (2) point is yes, then can I use above branch for both Windows and Linux?

Please suggest and assist.

Best Regards
Parveen




_______________________________________________
gdal-dev mailing list
gdal-dev at lists.osgeo.org<mailto:gdal-dev at lists.osgeo.org>
https://lists.osgeo.org/mailman/listinfo/gdal-dev


--
David Klaus
Carlson Software



Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/533a80cf/attachment-0001.htm>

From dklaus at carlsonsw.com  Mon Jan 13 15:38:07 2025
From: dklaus at carlsonsw.com (David Klaus)
Date: Mon, 13 Jan 2025 18:38:07 -0500
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
In-Reply-To: <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>
 <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <CAJNrnBUD0ptQaMHKDTxN4AYwvTWgcyOPhMUuNGdOZZkqXFFYKA@mail.gmail.com>

Parveen,

I apologize, but that I can't confirm. I only have the information I gave
you. I hope someone else is able to weigh in though, as I am interested in
this information as well,

On Mon, Jan 13, 2025 at 6:27?PM Parveen Sharma <sharma1981 at outlook.com>
wrote:

> Thanks
>
> What about the PDFium git repo which I mentioned? Do I need to build
> PDFium using that git repo only?
>
> ------------------------------
> *From:* David Klaus <dklaus at carlsonsw.com>
> *Sent:* Monday, January 13, 2025 11:34 PM
> *To:* Parveen Sharma <sharma1981 at outlook.com>
> *Cc:* Micha? Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
> *Subject:* Re: [gdal-dev] Build GDAL PDF Driver with PDFium
>
> Parveen,
>
> A couple of years ago my company used the following options to generate a
> GDAL PDF dynamic driver for GDAL 3.7.0:
>
> -DGDAL_ENABLE_DRIVER_PDF_PLUGIN=ON
> -DGDAL_USE_PDFIUM=ON
> -DPDFIUM_INCLUDE_DIR="%~dp0ExtractPDFium\install\include\pdfium"
> -DPDFIUM_LIBRARY="%~dp0ExtractPDFium\install\lib\pdfium.lib"
>
> Obviously the include directory and library paths will depend on your
> specific folder structure, so you might need to adjust those on your
> system. But we were successful in building 3.7.0 with GDAL PDF via dll
> using these options and perhaps they will work for you as well. Hopefully
> this reply is helpful to you. Best of luck,
>
>
>
> On Sun, Jan 12, 2025 at 11:41?PM Parveen Sharma via gdal-dev <
> gdal-dev at lists.osgeo.org> wrote:
>
> Hello
>
> I am trying to build from *GDAL from source using v3.9.3 tag*
>
> I plan to use "PDFium" library for building GDAL PDF Dynamic driver and
> have below 3 questions
>
>
> *Ques 1*) Are below a right combination of CMAKE options?
>
> <arg value="-D*GDAL_ENABLE_DRIVER_PDF=ON*"/>
> <arg value="-D*GDAL_USE_POPPLER=**OFF*"/>
> <arg value="-D*GDAL_USE_PDFIUM*=ON"/>
> <arg value="-D*GDAL_ENABLE_DRIVER_PDF_PLUGIN=ON*"/>
>
>
> In addition I will set option *PDFIUM_INCLUDE_DIR *to point to Path to an
> include directory with the ``public/fpdfview.h`` header file and option *PDFIUM_LIBRARY
> *to point to
>
> Path to a shared or static library file.
>
>
> *Ques 2*) Should I be building PDFium from the "*master*" branch of below
> fork by Even Rouault to work with GDAL *v3.9.3 ?*
>
> https://github.com/rouault/pdfium_build_gdal_3_1
> <https://github.com/rouault/pdfium_build_gdal_3_1>
>
> *Ques 3*) If the answer to (2) point is yes, then can I use above branch
> for both Windows and Linux?
>
> Please suggest and assist.
>
> Best Regards
> Parveen
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev at lists.osgeo.org
> https://lists.osgeo.org/mailman/listinfo/gdal-dev
> <https://lists.osgeo.org/mailman/listinfo/gdal-dev>
>
>
>
> --
> David Klaus
> Carlson Software
>
>
> *Disclaimer*
>
> The information contained in this communication from the sender is
> confidential. It is intended solely for use by the recipient and others
> authorized to receive it. If you are not the recipient, you are hereby
> notified that any disclosure, copying, distribution or taking action in
> relation of the contents of this information is strictly prohibited and may
> be unlawful.
>


-- 
David Klaus
Carlson Software

Disclaimer

The information contained in this communication from the sender is confidential. It is intended solely for use by the recipient and others authorized to receive it. If you are not the recipient, you are hereby notified that any disclosure, copying, distribution or taking action in relation of the contents of this information is strictly prohibited and may be unlawful.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250113/91d25e8a/attachment.htm>

From even.rouault at spatialys.com  Mon Jan 13 16:03:48 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Jan 2025 01:03:48 +0100
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
In-Reply-To: <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>
 <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <0b9215fa-9783-472e-8e7c-705f7c2631ca@spatialys.com>


Le 14/01/2025 ? 00:26, Parveen Sharma via gdal-dev a ?crit?:
> Thanks
>
> What about the PDFium git repo which I mentioned? Do I need to build 
> PDFium using that git repo only?

yes, as documented in 
https://gdal.org/en/stable/drivers/raster/pdf.html#pdfium. There are 
multiple patches needed on top of upstream PDFium to get it compatible 
with the GDAL PDF driver

-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/3bad501f/attachment.htm>

From sharma1981 at outlook.com  Mon Jan 13 16:23:05 2025
From: sharma1981 at outlook.com (Parveen Sharma)
Date: Tue, 14 Jan 2025 00:23:05 +0000
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
In-Reply-To: <0b9215fa-9783-472e-8e7c-705f7c2631ca@spatialys.com>
References: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>
 <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <0b9215fa-9783-472e-8e7c-705f7c2631ca@spatialys.com>
Message-ID: <SYZP282MB31894DEFDCFF02704820B9C7D9182@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>

Thanks Even

As i am building GDAL 3.9.3, so i will use the scripts in the https://github.com/rouault/pdfium_build_gdal_3_9 repository to build a patched version of PDFium.

Would you recommend using the "master" OR the "pdfium_6309_v1" branch of the above repository? I need to build GDAL with PDF Dynamic driver  in both Windows and Linux.


Best regards,
Parveen
________________________________
From: Even Rouault <even.rouault at spatialys.com>
Sent: Tuesday, January 14, 2025 8:03 AM
To: Parveen Sharma <sharma1981 at outlook.com>; David Klaus <dklaus at carlsonsw.com>
Cc: Micha? Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
Subject: Re: [gdal-dev] Build GDAL PDF Driver with PDFium



Le 14/01/2025 ? 00:26, Parveen Sharma via gdal-dev a ?crit :
Thanks

What about the PDFium git repo which I mentioned? Do I need to build PDFium using that git repo only?

yes, as documented in https://gdal.org/en/stable/drivers/raster/pdf.html#pdfium. There are multiple patches needed on top of upstream PDFium to get it compatible with the GDAL PDF driver

--
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/bdee56b9/attachment-0001.htm>

From even.rouault at spatialys.com  Mon Jan 13 16:32:41 2025
From: even.rouault at spatialys.com (Even Rouault)
Date: Tue, 14 Jan 2025 01:32:41 +0100
Subject: [gdal-dev] Build GDAL PDF Driver with PDFium
In-Reply-To: <SYZP282MB31894DEFDCFF02704820B9C7D9182@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <SYZP282MB31894B60656F2FAFCA27562ED91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <CAJNrnBWh51e6Csj_p36KotvE7ATcpAbHF8Vduu_L3-ronVA+kg@mail.gmail.com>
 <SYZP282MB318989168D8047CE16024971D91F2@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
 <0b9215fa-9783-472e-8e7c-705f7c2631ca@spatialys.com>
 <SYZP282MB31894DEFDCFF02704820B9C7D9182@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <b06c5328-e8eb-4b6f-b60e-c73ba331f524@spatialys.com>


Le 14/01/2025 ? 01:23, Parveen Sharma a ?crit?:
> Thanks Even
>
> As i am building GDAL 3.9.3, so i will use the scripts in the 
> https://github.com/rouault/pdfium_build_gdal_3_9 
> <https://github.com/rouault/pdfium_build_gdal_3_9>?repository to build 
> a patched version of PDFium.
>
> Would you recommend using the "master" OR the "pdfium_6309_v1" branch 
> of the above repository? I need to build GDAL with PDF Dynamic driver? 
> in both Windows and Linux.

They're the same (except an edit in the readme file that doesn't matter 
as far as doing builds is concerned)


-- 
http://www.spatialys.com
My software is free, but my time generally not.
Butcher of all kinds of standards, open or closed formats. At the end, this is just about bytes.
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/dcffb855/attachment.htm>

From sharma1981 at outlook.com  Mon Jan 13 18:33:01 2025
From: sharma1981 at outlook.com (Parveen Sharma)
Date: Tue, 14 Jan 2025 02:33:01 +0000
Subject: [gdal-dev] Removal of gdalwarpsimple app
Message-ID: <SYZP282MB3189613D77AA8C74B7646905D9182@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>

Hello

Any reason for removing the gdalwarpsimple from the list of apps? I see that it was removed as part of below commit

https://github.com/OSGeo/gdal/commit/88f06a8854a634759b14c78e5a08370063680a10#diff-0778a790f0646d59a4fedd05e433d14a24d3982e0f909c7e4a61f44e18c1670a

Best regards,
Parveen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/db24980c/attachment.htm>

From jukka.rahkonen at maanmittauslaitos.fi  Mon Jan 13 23:06:56 2025
From: jukka.rahkonen at maanmittauslaitos.fi (Rahkonen Jukka)
Date: Tue, 14 Jan 2025 07:06:56 +0000
Subject: [gdal-dev] Removal of gdalwarpsimple app
In-Reply-To: <SYZP282MB3189613D77AA8C74B7646905D9182@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
References: <SYZP282MB3189613D77AA8C74B7646905D9182@SYZP282MB3189.AUSP282.PROD.OUTLOOK.COM>
Message-ID: <DB9PR09MB68876315883AB97785EC4D35FD182@DB9PR09MB6887.eurprd09.prod.outlook.com>

Hi,

Maybe there was not any reason to keep that historical relict, originally called Mapinfo Image Warper from 2002, because gdalwarp exists.

* Project:  Mapinfo Image Warper
* Purpose:  Commandline program for doing a variety of image warps, including
 * image reprojection.
* Author:   Frank Warmerdam warmerdam at pobox.com<mailto:warmerdam at pobox.com>
* Copyright (c) 2002, i3 - information integration and imaging
* Fort Collin, CO

The remove was triggered by this ticket
https://github.com/OSGeo/gdal/issues/10001
with a comment "gdal.ReprojectImage() is to be considered legacy / superseded at that point"
and then resolved by https://github.com/OSGeo/gdal/pull/10003
"Doc: mark GDALSimpleImageWarp() and GDALReprojectImage() as superseded per GDALWarp()"

-Jukka Rahkonen-

L?hett?j?: gdal-dev <gdal-dev-bounces at lists.osgeo.org> Puolesta Parveen Sharma via gdal-dev
L?hetetty: tiistai 14. tammikuuta 2025 4.33
Vastaanottaja: Micha? Kowalczuk via gdal-dev <gdal-dev at lists.osgeo.org>
Aihe: [gdal-dev] Removal of gdalwarpsimple app

Hello

Any reason for removing the gdalwarpsimple from the list of apps? I see that it was removed as part of below commit
https://github.com/OSGeo/gdal/commit/88f06a8854a634759b14c78e5a08370063680a10#diff-0778a790f0646d59a4fedd05e433d14a24d3982e0f909c7e4a61f44e18c1670a

Best regards,
Parveen
-------------- next part --------------
An HTML attachment was scrubbed...
URL: <http://lists.osgeo.org/pipermail/gdal-dev/attachments/20250114/8d07471b/attachment-0001.htm>

