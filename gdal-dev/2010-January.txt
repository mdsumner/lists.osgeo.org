From chaitanya.ch at gmail.com  Fri Jan  1 13:51:38 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Fri Jan  1 13:51:41 2010
Subject: [gdal-dev] Maintenance Report from Oct 28, 2009 to Jan 1, 2010
Message-ID: <eb502d881001011051j4ef5d1c9v8c23270282e01812@mail.gmail.com>

Hi,

I updated my GDAL maintenance report at
http://trac.osgeo.org/gdal/wiki/MaintenanceReportsByChaitanya
I am also attaching a copy.

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
GDAL Maintenance Reports by Chaitanya kumar CH.

Duration: Oct 28, 2009 to Jan 1, 2010

#3148: Patch to make frmts/gtiff/tifvsi.cpp compile under VC++ 9.0

#3154: Configure snippet is not truly able to manage both netcdf3 and netcdf4

#3166: can't make large/64-bit netCDF file

#2270: Patch for HDF5 block size recognition

#2948: GML read failure for GDAL 1.6+

#3213: ESRI ArcInfo ASCII driver not Mac-compatible

#3242: Northwood/VerticalMapper driver isn't big endian compatible

#2991: OGR PGeo driver's GetGeometryRef() returns NULL for lines/polygons with Z coordinates

#1918: PGEO: Missing geometry types (ie. type 9/19/29)

#3100: Type 51 of geometry in Personal Geodatabase/shape

#2842: Unable to delete colormap from HFA

#2221: OGR SQL limits table name and column name character set

#1999: Slowness of CPLReadLine() function on Windows

#1367: PGEO driver should not force MDB Tools on Unix platforms

#3259: GeoTiff driver problem with JPEG Encoded Images

#3260: like in ticket #2643 where shape type 50 PGeodatabases are not recognized, 51 seems to be the same issue

#1540: Minor memory leaks in gmlreader.cpp

#3202: BURN_VALUE_FROM option for GDALRasterizeGeometries

#2304: Failed test in ogr_mysql.py

#3247: Shapefile driver truncated field names, sometimes causing duplicates

#3237: Northwood/VerticalMapper Driver Contribution

#3161: Enhancements proposal for gdal_merge.py

#3236: Ogr2ogr stops appending to .shp file at 2 GB

#3129: Contour orientation

Compiler warnings in MS Windows

--
Chaitanya kumar CH
chaitanyach@gmail.com
From even.rouault at mines-paris.org  Fri Jan  1 15:30:45 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan  1 15:30:58 2010
Subject: [gdal-dev] IAU 2000 Coordinate System Dictionary
In-Reply-To: <4B3D0D4D.4040904@pobox.com>
References: <4B3D0D4D.4040904@pobox.com>
Message-ID: <4B3E5B75.8020909@mines-paris.org>

Frank,

once compressed in a .tar.gz or a .zip, it only weights 24 KB, so it 
won't be a problem if you want to include it into core GDAL distribution.

Best regards,
Even

> Folks,
>
> I have received a request from Trent Hare to include support for the IAU
> (International Astronomical Union) set of planetary coordinate systems 
> with
> GDAL.  I have distributed this in the past with FWTools, but had 
> hesitated
> to include it in the core GDAL distribution since it amounts to nearly 
> 1MB
> of text uncompressed.  The dictionary is at:
>
>   http://home.gdal.org/tmp/IAU2000.wkt
>
> I'm interested in feedback on whether this would be a good idea to 
> include,
> or if there are practical other mechanisms to make them available.
>
> Best regards,


From cgacke at usgs.gov  Mon Jan  4 09:24:29 2010
From: cgacke at usgs.gov (Carolyn Gacke)
Date: Mon Jan  4 09:24:32 2010
Subject: [gdal-dev] gdalwarp use of Michigan Oblique Mercator
Message-ID: <OFC689850B.91C42CA4-ON862576A1.004DEFFC-862576A1.004F25DC@usgs.gov>

Hello-
Is anyone aware of the use of gdalwarp on GeoTIFF files; projecting from 
Michigan Oblique Mercator  (epsg 3078) to WGS84 (epsg 4326)?  ls
EXAMPLE: gdalwarp -t_srs EPSG:4326 085_r3c25.tif 085_r3c25warp.tif

We end up NE of Alaska, where as the original tifs overlay just fine in 
Michigan when using ArcMap 9.3.1 

These are tifs of high resolution orhto flown in 2006 over Lake County MI; 
the MI projection info appears correct in the tags.

We have quite a bit of high res ortho datasets; at times we have to modify 
tfws/tags, however this one has us stumped(!)

Here is the gdalinfo of the original GTIFF;  it also interprets the xys to 
lat/longs in Alaska:

TIF: gdalinfo 085_r3c25.tif
Driver: GTiff/GeoTIFF
Size is 1619, 1708
Coordinate System is:
PROJCS[" Projection Name = Oblique Mercator (Hotine) Units = meters 
GeoTIFF Units = meters",
    GEOGCS["NAD83",
        DATUM["North_American_Datum_1983",
            SPHEROID["GRS 1980",6378137,298.2572221010042,
                AUTHORITY["EPSG","7019"]],
            AUTHORITY["EPSG","6269"]],
        PRIMEM["Greenwich",0],
        UNIT["degree",0.0174532925199433],
        AUTHORITY["EPSG","4269"]],
    PROJECTION["Hotine_Oblique_Mercator"],
    PARAMETER["latitude_of_center",45.3091667],
    PARAMETER["longitude_of_center",-86],
    PARAMETER["azimuth",337.25556],
    PARAMETER["rectified_grid_angle",90],
    PARAMETER["scale_factor",0.9996],
    PARAMETER["false_easting",2546731.496],
    PARAMETER["false_northing",-4354009.816],
    UNIT["metre",1,
        AUTHORITY["EPSG","9001"]]]
Origin = (519086.028692,400863.870183)
Pixel Size = (0.60960000,-0.60960000)
Metadata:
  AREA_OR_POINT=Area
Corner Coordinates:
Upper Left  (  519086.029,  400863.870) (173d36'53.89"W, 73d28'19.77"N)
Lower Left  (  519086.029,  399822.673) (173d34'57.28"W, 73d28'14.49"N)
Upper Right (  520072.971,  400863.870) (173d36'36.33"W, 73d28'51.24"N)
Lower Right (  520072.971,  399822.673) (173d34'39.66"W, 73d28'45.96"N)
Center      (  519579.500,  400343.272) (173d35'46.79"W, 73d28'32.87"N)
Band 1 Block=1619x5 Type=Byte, ColorInterp=Gray

TFW:  cgacke@edclxs84> more 085_r3c25.tfw
0.609600000000000030
0.0
0.0
-0.609600000000000030
519086.33349170600
400863.56538265612


Any advice or suggestions would be greatly appreciated!

Carolyn Gacke
SGT Inc.
Contractor to the USGS EROS
Sioux Falls SD
Email:     cgacke@usgs.gov
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100104/25d68b63/attachment.html
From chaitanya.ch at gmail.com  Mon Jan  4 09:46:29 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan  4 09:46:32 2010
Subject: [gdal-dev] gdalwarp use of Michigan Oblique Mercator
In-Reply-To: <OFC689850B.91C42CA4-ON862576A1.004DEFFC-862576A1.004F25DC@usgs.gov>
References: <OFC689850B.91C42CA4-ON862576A1.004DEFFC-862576A1.004F25DC@usgs.gov>
Message-ID: <eb502d881001040646g41ad3f2bnc6853c89578c390a@mail.gmail.com>

Carolyn,

There seems to be a problem with EPSG:3078.

There was a similar report on this list (
http://lists.osgeo.org/pipermail/gdal-dev/2009-June/020981.html )
where the target and source projections were reversed.

Could you file a ticket at http://trac.osgeo.org/gdal/newticket with
some sample data in EPSG:3078 projection?

On Mon, Jan 4, 2010 at 2:24 PM, Carolyn Gacke <cgacke@usgs.gov> wrote:
>
> Hello-
> Is anyone aware of the use of gdalwarp on GeoTIFF files; projecting from
> Michigan Oblique Mercator ?(epsg 3078) to WGS84 (epsg 4326)? ?ls
> EXAMPLE: gdalwarp -t_srs EPSG:4326 085_r3c25.tif 085_r3c25warp.tif
>
> We end up NE of Alaska, where as the original tifs overlay just fine in
> Michigan when using ArcMap 9.3.1
>
> These are tifs of high resolution orhto flown in 2006 over Lake County MI;
> the MI projection info appears correct in the tags.
>
> We have quite a bit of high res ortho datasets; at times we have to modify
> tfws/tags, however this one has us stumped(!)
>
> Here is the gdalinfo of the original GTIFF; ?it also interprets the xys to
> lat/longs in Alaska:
>
> TIF: gdalinfo 085_r3c25.tif
> Driver: GTiff/GeoTIFF
> Size is 1619, 1708
> Coordinate System is:
> PROJCS[" Projection Name = Oblique Mercator (Hotine) Units = meters GeoTIFF
> Units = meters",
> ? ? GEOGCS["NAD83",
> ? ? ? ? DATUM["North_American_Datum_1983",
> ? ? ? ? ? ? SPHEROID["GRS 1980",6378137,298.2572221010042,
> ? ? ? ? ? ? ? ? AUTHORITY["EPSG","7019"]],
> ? ? ? ? ? ? AUTHORITY["EPSG","6269"]],
> ? ? ? ? PRIMEM["Greenwich",0],
> ? ? ? ? UNIT["degree",0.0174532925199433],
> ? ? ? ? AUTHORITY["EPSG","4269"]],
> ? ? PROJECTION["Hotine_Oblique_Mercator"],
> ? ? PARAMETER["latitude_of_center",45.3091667],
> ? ? PARAMETER["longitude_of_center",-86],
> ? ? PARAMETER["azimuth",337.25556],
> ? ? PARAMETER["rectified_grid_angle",90],
> ? ? PARAMETER["scale_factor",0.9996],
> ? ? PARAMETER["false_easting",2546731.496],
> ? ? PARAMETER["false_northing",-4354009.816],
> ? ? UNIT["metre",1,
> ? ? ? ? AUTHORITY["EPSG","9001"]]]
> Origin = (519086.028692,400863.870183)
> Pixel Size = (0.60960000,-0.60960000)
> Metadata:
> ? AREA_OR_POINT=Area
> Corner Coordinates:
> Upper Left ?( ?519086.029, ?400863.870) (173d36'53.89"W, 73d28'19.77"N)
> Lower Left ?( ?519086.029, ?399822.673) (173d34'57.28"W, 73d28'14.49"N)
> Upper Right ( ?520072.971, ?400863.870) (173d36'36.33"W, 73d28'51.24"N)
> Lower Right ( ?520072.971, ?399822.673) (173d34'39.66"W, 73d28'45.96"N)
> Center ? ? ?( ?519579.500, ?400343.272) (173d35'46.79"W, 73d28'32.87"N)
> Band 1 Block=1619x5 Type=Byte, ColorInterp=Gray
>
> TFW: ?cgacke@edclxs84> more 085_r3c25.tfw
> 0.609600000000000030
> 0.0
> 0.0
> -0.609600000000000030
> 519086.33349170600
> 400863.56538265612
>
>
> Any advice or suggestions would be greatly appreciated!
>
> Carolyn Gacke
> SGT Inc.
> Contractor to the USGS EROS
> Sioux Falls SD
> Email: ? ? cgacke@usgs.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From Doug_Newcomb at fws.gov  Mon Jan  4 11:58:13 2010
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Mon Jan  4 11:58:31 2010
Subject: [gdal-dev] gdalwarp use of Michigan Oblique Mercator
In-Reply-To: <OFC689850B.91C42CA4-ON862576A1.004DEFFC-862576A1.004F25DC@usgs.gov>
Message-ID: <OFD3B4224B.C8864C53-ON852576A1.005D03F6-852576A1.005D38CC@fws.gov>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: graycol.gif
Type: image/gif
Size: 105 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100104/2e1e4edf/graycol-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pic22888.gif
Type: image/gif
Size: 1255 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100104/2e1e4edf/pic22888-0001.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ecblank.gif
Type: image/gif
Size: 45 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100104/2e1e4edf/ecblank-0001.gif
From gregcoats at mac.com  Mon Jan  4 12:29:35 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jan  4 12:29:39 2010
Subject: [gdal-dev] gdalbuildvrt -init 255
In-Reply-To: <4B3E5B75.8020909@mines-paris.org>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
Message-ID: <F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>

By default, gdal_merge.py starts by creating an output image with all black pixels, and then replaces these black pixels with pixels from the images being read in. Passing to gdal_merge.py -init 255 pre-initializes the output image to all white, instead of all black, pixels.
Similar to gdal_merge.py, gdalbuildvrt fills with black pixels. I am seeking for gdalbuildvrt, the -init 255 option that gdal_merge.py supports, but do not see -init 255 as a supported option on the gdalbuildvrt man page. In GDAL 1.7.0, will gdalbuildvrt support -init 255? If not, then in GAL 1.7.0 can the option -vrtnodata be used in a way similar to how gdal_merge.py supports -init 255? I need areas where there is no image to be white, rather than the black that gdalbuildvrt is by default setting them to be.
Greg

gdal_merge.py man page
http://www.gdal.org/gdal_merge.html
gdalbuildvrt man page
http://www.gdal.org/gdalbuildvrt.html
gdalbuild_black image
http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
gdalbuildvrt_white image (simulated)
http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png

From jctoney at yahoo.com  Mon Jan  4 15:03:43 2010
From: jctoney at yahoo.com (Chris Toney)
Date: Mon Jan  4 15:10:26 2010
Subject: [gdal-dev] gdalwarp use of Michigan Oblique Mercator
In-Reply-To: <20100104165834.67467E0150A@lists.osgeo.org>
References: <20100104165834.67467E0150A@lists.osgeo.org>
Message-ID: <389707.37483.qm@web32905.mail.mud.yahoo.com>

Carolyn, Chaitanya-
There is a related ticket (3038) from the earlier report on this issue.

http://trac.osgeo.org/gdal/ticket/3038

Chris 


----- Original Message ----
Date: Mon, 4 Jan 2010 14:46:29 +0000
From: Chaitanya kumar CH <chaitanya.ch@gmail.com>
Subject: Re: [gdal-dev] gdalwarp use of Michigan Oblique Mercator
To: Carolyn Gacke <cgacke@usgs.gov>
Cc: gdal-dev@lists.osgeo.org
Message-ID:
    <eb502d881001040646g41ad3f2bnc6853c89578c390a@mail.gmail.com>
Content-Type: text/plain; charset=UTF-8

Carolyn,

There seems to be a problem with EPSG:3078.

There was a similar report on this list (
http://lists.osgeo.org/pipermail/gdal-dev/2009-June/020981.html )
where the target and source projections were reversed.

Could you file a ticket at http://trac.osgeo.org/gdal/newticket with
some sample data in EPSG:3078 projection?


      
From even.rouault at mines-paris.org  Mon Jan  4 16:08:03 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  4 16:08:10 2010
Subject: [gdal-dev] gdalbuildvrt -init 255
In-Reply-To: <F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
Message-ID: <4B4258B3.3020603@mines-paris.org>

Greg,

I don't think the issue is really about black or white, but more about 
setting nodata appropriately. Basically, if I've well understood your 
needs, you want to make some black padding in images transparent. 
Assuming that your imagery is RGB, you could try adding -srcnodata 0 to 
the gdalbuildvrt command line, so that pixels with value 0 in source 
imaginery are not drawn in the VRT buffer. You will also need to specify 
a -vrtnodata XXX (which is about like -init XXX of gdal_merge.py, but 
does more than -init as it sets that value as nodata), where XXX can be 
255 if you want it to be nodata white, but 0 should also do, but the 
value should not matter much to QGIS : it should just ignore the pixels 
matching the nodata value whichever it is.

You must be aware of the limitation of the nodata concept when working 
with RGB imagery however. Nodata is considered band per band, and not as 
a triplet. I mean if you have a blue pixel (0,0,255), and you set a 
nodata value of 255 for each of the 3 bands, the blue component of 
(0,0,255) being 255, it will be considered as nodata for that 
component... The only proper way to deal with that is to work with RGBA 
imagery.

Best regards,

Even
> By default, gdal_merge.py starts by creating an output image with all black pixels, and then replaces these black pixels with pixels from the images being read in. Passing to gdal_merge.py -init 255 pre-initializes the output image to all white, instead of all black, pixels.
> Similar to gdal_merge.py, gdalbuildvrt fills with black pixels. I am seeking for gdalbuildvrt, the -init 255 option that gdal_merge.py supports, but do not see -init 255 as a supported option on the gdalbuildvrt man page. In GDAL 1.7.0, will gdalbuildvrt support -init 255? If not, then in GAL 1.7.0 can the option -vrtnodata be used in a way similar to how gdal_merge.py supports -init 255? I need areas where there is no image to be white, rather than the black that gdalbuildvrt is by default setting them to be.
> Greg
>
> gdal_merge.py man page
> http://www.gdal.org/gdal_merge.html
> gdalbuildvrt man page
> http://www.gdal.org/gdalbuildvrt.html
> gdalbuild_black image
> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
> gdalbuildvrt_white image (simulated)
> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
>   


From gregcoats at mac.com  Mon Jan  4 17:24:58 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jan  4 17:25:03 2010
Subject: [gdal-dev] gdalbuildvrt -init 255
In-Reply-To: <4B4258B3.3020603@mines-paris.org>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
	<4B4258B3.3020603@mines-paris.org>
Message-ID: <2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>

I do not think I want the black, opaque areas that gdalbuildvrt is making up for areas where there is no imagery to become transparent and remain black, I want them to be white and opaque. Surely, there are many places in the RGB images where one or more bands is already set to the value 255, and I do not want to change any legit 255 R, G, B values in the imagery. I do not want to convert the 1699 RGB images to RGBA. Essentially, I want for gdalbuildvrt what -init 255 does for gdal_merge.py. But, for now there does not seem to be a way to do that? Greg

On Jan 4, 2010, at 4:08 PM, Even Rouault wrote:

> Greg,
> 
> I don't think the issue is really about black or white, but more about setting nodata appropriately. Basically, if I've well understood your needs, you want to make some black padding in images transparent. Assuming that your imagery is RGB, you could try adding -srcnodata 0 to the gdalbuildvrt command line, so that pixels with value 0 in source imaginery are not drawn in the VRT buffer. You will also need to specify a -vrtnodata XXX (which is about like -init XXX of gdal_merge.py, but does more than -init as it sets that value as nodata), where XXX can be 255 if you want it to be nodata white, but 0 should also do, but the value should not matter much to QGIS : it should just ignore the pixels matching the nodata value whichever it is.
> 
> You must be aware of the limitation of the nodata concept when working with RGB imagery however. Nodata is considered band per band, and not as a triplet. I mean if you have a blue pixel (0,0,255), and you set a nodata value of 255 for each of the 3 bands, the blue component of (0,0,255) being 255, it will be considered as nodata for that component... The only proper way to deal with that is to work with RGBA imagery.
> 
> Best regards,
> 
> Even
>> By default, gdal_merge.py starts by creating an output image with all black pixels, and then replaces these black pixels with pixels from the images being read in. Passing to gdal_merge.py -init 255 pre-initializes the output image to all white, instead of all black, pixels.
>> Similar to gdal_merge.py, gdalbuildvrt fills with black pixels. I am seeking for gdalbuildvrt, the -init 255 option that gdal_merge.py supports, but do not see -init 255 as a supported option on the gdalbuildvrt man page. In GDAL 1.7.0, will gdalbuildvrt support -init 255? If not, then in GAL 1.7.0 can the option -vrtnodata be used in a way similar to how gdal_merge.py supports -init 255? I need areas where there is no image to be white, rather than the black that gdalbuildvrt is by default setting them to be.
>> Greg
>> 
>> gdal_merge.py man page
>> http://www.gdal.org/gdal_merge.html
>> gdalbuildvrt man page
>> http://www.gdal.org/gdalbuildvrt.html
>> gdalbuild_black image
>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
>> gdalbuildvrt_white image (simulated)
>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png
From even.rouault at mines-paris.org  Mon Jan  4 17:59:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  4 17:59:14 2010
Subject: [gdal-dev] gdalbuildvrt -init 255
In-Reply-To: <2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
	<4B4258B3.3020603@mines-paris.org>
	<2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>
Message-ID: <4B4272B9.20206@mines-paris.org>

Greg Coats a ?crit :
> I do not think I want the black, opaque areas that gdalbuildvrt is making up for areas where there is no imagery to become transparent and remain black, I want them to be white and opaque. Surely, there are many places in the RGB images where one or more bands is already set to the value 255, and I do not want to change any legit 255 R, G, B values in the imagery. I do not want to convert the 1699 RGB images to RGBA. Essentially, I want for gdalbuildvrt what -init 255 does for gdal_merge.py. But, for now there does not seem to be a way to do that? Greg
>   
No, basically there's no support in the VRT driver for initializing the 
buffer to a non-zero value except if you set a nodata value. I don't see 
a theoretical difficulty in extenting but that woud require an addition 
to the XML VRT syntax.

I was a bit confused by what your 2 screenshots showed. I know suppose 
that they show 2 VRTs layers. So, if I were you, I'd begin by setting 
the vrtnodata to 255 and see if the result match your expectations. You 
can already do that by manually editing the VRT and adding a 
<NoDataValue>255</NoDataValue> just after each <VrtRasterBand> element. 
If you blend the result onto a white background, I think this should not 
alter visually the result.

There's another workaround I'm just thinking about, but it is a bit more 
involved and may lower performance when displaying the VRT. You can 
create a totally white GeoTIFF that has the extent of the whole VRT, and 
add it first in the VRT. Something like this python script :

import gdal
ds = gdal.Open('source.vrt')
wkt = ds.GetProjectionRef()
gt = ds.GetGeoTransform()
xsize = ds.RasterXSize
ysize = ds.RasterYSize

ds_white = gdal.GetDriverByName('GTiff').Create('white.tif', xsize, 
ysize, 3, options = ['TILED=YES', 'COMPRESS=LZW'])
ds_white.SetGeoTransform(gt)
ds_white.SetProjection(wkt)
ds_white.GetRasterBand(1).Fill(255)
ds_white.GetRasterBand(2).Fill(255)
ds_white.GetRasterBand(3).Fill(255)
ds_white = None

If you use a QGIS version that relies on GDAL 1.7.0, you can replace the 
creation of the white dataset by :

ds_white = gdal.GetDriverByName('GTiff').Create('white.tif', xsize, 
ysize, 3, options = ['TILED=YES', 'SPARSE_OK=YES'])
ds_white.SetGeoTransform(gt)
ds_white.SetProjection(wkt)
ds_white.GetRasterBand(1).SetNoDataValue(255)
ds_white = None

This will create a sparse GeoTIFF that should be very small and when 
reading it, GDAL 1.7.0 will initialize the empty blocks with the nodata 
value (previous GDAL version would initialize with 0). The rendering of 
a VRT referencing that file should be much faster than with the white 
geotiff produced by the first solution.

> On Jan 4, 2010, at 4:08 PM, Even Rouault wrote:
>
>   
>> Greg,
>>
>> I don't think the issue is really about black or white, but more about setting nodata appropriately. Basically, if I've well understood your needs, you want to make some black padding in images transparent. Assuming that your imagery is RGB, you could try adding -srcnodata 0 to the gdalbuildvrt command line, so that pixels with value 0 in source imaginery are not drawn in the VRT buffer. You will also need to specify a -vrtnodata XXX (which is about like -init XXX of gdal_merge.py, but does more than -init as it sets that value as nodata), where XXX can be 255 if you want it to be nodata white, but 0 should also do, but the value should not matter much to QGIS : it should just ignore the pixels matching the nodata value whichever it is.
>>
>> You must be aware of the limitation of the nodata concept when working with RGB imagery however. Nodata is considered band per band, and not as a triplet. I mean if you have a blue pixel (0,0,255), and you set a nodata value of 255 for each of the 3 bands, the blue component of (0,0,255) being 255, it will be considered as nodata for that component... The only proper way to deal with that is to work with RGBA imagery.
>>
>> Best regards,
>>
>> Even
>>     
>>> By default, gdal_merge.py starts by creating an output image with all black pixels, and then replaces these black pixels with pixels from the images being read in. Passing to gdal_merge.py -init 255 pre-initializes the output image to all white, instead of all black, pixels.
>>> Similar to gdal_merge.py, gdalbuildvrt fills with black pixels. I am seeking for gdalbuildvrt, the -init 255 option that gdal_merge.py supports, but do not see -init 255 as a supported option on the gdalbuildvrt man page. In GDAL 1.7.0, will gdalbuildvrt support -init 255? If not, then in GAL 1.7.0 can the option -vrtnodata be used in a way similar to how gdal_merge.py supports -init 255? I need areas where there is no image to be white, rather than the black that gdalbuildvrt is by default setting them to be.
>>> Greg
>>>
>>> gdal_merge.py man page
>>> http://www.gdal.org/gdal_merge.html
>>> gdalbuildvrt man page
>>> http://www.gdal.org/gdalbuildvrt.html
>>> gdalbuild_black image
>>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
>>> gdalbuildvrt_white image (simulated)
>>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png
>>>       
>
>
>
>   


From even.rouault at mines-paris.org  Mon Jan  4 18:10:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan  4 18:10:15 2010
Subject: [gdal-dev] gdalbuildvrt -init 255
In-Reply-To: <4B4272B9.20206@mines-paris.org>
References: <4B3D0D4D.4040904@pobox.com>
	<4B3E5B75.8020909@mines-paris.org>	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>	<4B4258B3.3020603@mines-paris.org>	<2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>
	<4B4272B9.20206@mines-paris.org>
Message-ID: <4B427552.6010008@mines-paris.org>

Even Rouault a ?crit :

Well, actually, I can propose a 3rd solution that should work with any 
recent GDAL version to produce a white & small raster.

1) Copy your source.vrt as white.vrt
2) Add a <NoDataValue>255</NoDataValue>  line after each <VrtRasterBand>
3) Remove all existing <SimpleSource> content

So basically you get something as simple as that :

<VRTDataset rasterXSize="20" rasterYSize="20">
  <SRS>PROJCS[&quot;NAD27 / UTM zone 
11N&quot;,GEOGCS[&quot;NAD27&quot;,DATUM[&q
uot;North_American_Datum_1927&quot;,SPHEROID[&quot;Clarke 
1866&quot;,6378206.4,2
94.9786982138982,AUTHORITY[&quot;EPSG&quot;,&quot;7008&quot;]],AUTHORITY[&quot;E
PSG&quot;,&quot;6267&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&q
uot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4267&quot;]],PROJECTIO
N[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],P
ARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0
.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northin
g&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]
],AUTHORITY[&quot;EPSG&quot;,&quot;26711&quot;]]</SRS>
  <GeoTransform> 4.4072000000000000e+005, 6.0000000000000000e+001, 
0.00000000000
00000e+000, 3.7513200000000000e+006, 
0.0000000000000000e+000,-6.0000000000000000
e+001</GeoTransform>
  <VRTRasterBand dataType="Byte" band="1">
    <NoDataValue>255</NoDataValue>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="2">
    <NoDataValue>255</NoDataValue>
  </VRTRasterBand>
  <VRTRasterBand dataType="Byte" band="3">
    <NoDataValue>255</NoDataValue>
  </VRTRasterBand>
</VRTDataset>

Then recreate your main VRT by adding white.vrt as the first dataset 
(with GDAL 1.7.0 gdalbuildvrt, you would need to specify -srcnodata None 
so that the nodatavalue of white.vrt is just considered as white and not 
processed as a nodata value by the rendering layer of the main VRT... of 
course !)

> Greg Coats a ?crit :
>> I do not think I want the black, opaque areas that gdalbuildvrt is 
>> making up for areas where there is no imagery to become transparent 
>> and remain black, I want them to be white and opaque. Surely, there 
>> are many places in the RGB images where one or more bands is already 
>> set to the value 255, and I do not want to change any legit 255 R, G, 
>> B values in the imagery. I do not want to convert the 1699 RGB images 
>> to RGBA. Essentially, I want for gdalbuildvrt what -init 255 does for 
>> gdal_merge.py. But, for now there does not seem to be a way to do 
>> that? Greg
>>   
> No, basically there's no support in the VRT driver for initializing 
> the buffer to a non-zero value except if you set a nodata value. I 
> don't see a theoretical difficulty in extenting but that woud require 
> an addition to the XML VRT syntax.
>
> I was a bit confused by what your 2 screenshots showed. I know suppose 
> that they show 2 VRTs layers. So, if I were you, I'd begin by setting 
> the vrtnodata to 255 and see if the result match your expectations. 
> You can already do that by manually editing the VRT and adding a 
> <NoDataValue>255</NoDataValue> just after each <VrtRasterBand> 
> element. If you blend the result onto a white background, I think this 
> should not alter visually the result.
>
> There's another workaround I'm just thinking about, but it is a bit 
> more involved and may lower performance when displaying the VRT. You 
> can create a totally white GeoTIFF that has the extent of the whole 
> VRT, and add it first in the VRT. Something like this python script :
>
> import gdal
> ds = gdal.Open('source.vrt')
> wkt = ds.GetProjectionRef()
> gt = ds.GetGeoTransform()
> xsize = ds.RasterXSize
> ysize = ds.RasterYSize
>
> ds_white = gdal.GetDriverByName('GTiff').Create('white.tif', xsize, 
> ysize, 3, options = ['TILED=YES', 'COMPRESS=LZW'])
> ds_white.SetGeoTransform(gt)
> ds_white.SetProjection(wkt)
> ds_white.GetRasterBand(1).Fill(255)
> ds_white.GetRasterBand(2).Fill(255)
> ds_white.GetRasterBand(3).Fill(255)
> ds_white = None
>
> If you use a QGIS version that relies on GDAL 1.7.0, you can replace 
> the creation of the white dataset by :
>
> ds_white = gdal.GetDriverByName('GTiff').Create('white.tif', xsize, 
> ysize, 3, options = ['TILED=YES', 'SPARSE_OK=YES'])
> ds_white.SetGeoTransform(gt)
> ds_white.SetProjection(wkt)
> ds_white.GetRasterBand(1).SetNoDataValue(255)
> ds_white = None
>
> This will create a sparse GeoTIFF that should be very small and when 
> reading it, GDAL 1.7.0 will initialize the empty blocks with the 
> nodata value (previous GDAL version would initialize with 0). The 
> rendering of a VRT referencing that file should be much faster than 
> with the white geotiff produced by the first solution.
>
>> On Jan 4, 2010, at 4:08 PM, Even Rouault wrote:
>>
>>  
>>> Greg,
>>>
>>> I don't think the issue is really about black or white, but more 
>>> about setting nodata appropriately. Basically, if I've well 
>>> understood your needs, you want to make some black padding in images 
>>> transparent. Assuming that your imagery is RGB, you could try adding 
>>> -srcnodata 0 to the gdalbuildvrt command line, so that pixels with 
>>> value 0 in source imaginery are not drawn in the VRT buffer. You 
>>> will also need to specify a -vrtnodata XXX (which is about like 
>>> -init XXX of gdal_merge.py, but does more than -init as it sets that 
>>> value as nodata), where XXX can be 255 if you want it to be nodata 
>>> white, but 0 should also do, but the value should not matter much to 
>>> QGIS : it should just ignore the pixels matching the nodata value 
>>> whichever it is.
>>>
>>> You must be aware of the limitation of the nodata concept when 
>>> working with RGB imagery however. Nodata is considered band per 
>>> band, and not as a triplet. I mean if you have a blue pixel 
>>> (0,0,255), and you set a nodata value of 255 for each of the 3 
>>> bands, the blue component of (0,0,255) being 255, it will be 
>>> considered as nodata for that component... The only proper way to 
>>> deal with that is to work with RGBA imagery.
>>>
>>> Best regards,
>>>
>>> Even
>>>    
>>>> By default, gdal_merge.py starts by creating an output image with 
>>>> all black pixels, and then replaces these black pixels with pixels 
>>>> from the images being read in. Passing to gdal_merge.py -init 255 
>>>> pre-initializes the output image to all white, instead of all 
>>>> black, pixels.
>>>> Similar to gdal_merge.py, gdalbuildvrt fills with black pixels. I 
>>>> am seeking for gdalbuildvrt, the -init 255 option that 
>>>> gdal_merge.py supports, but do not see -init 255 as a supported 
>>>> option on the gdalbuildvrt man page. In GDAL 1.7.0, will 
>>>> gdalbuildvrt support -init 255? If not, then in GAL 1.7.0 can the 
>>>> option -vrtnodata be used in a way similar to how gdal_merge.py 
>>>> supports -init 255? I need areas where there is no image to be 
>>>> white, rather than the black that gdalbuildvrt is by default 
>>>> setting them to be.
>>>> Greg
>>>>
>>>> gdal_merge.py man page
>>>> http://www.gdal.org/gdal_merge.html
>>>> gdalbuildvrt man page
>>>> http://www.gdal.org/gdalbuildvrt.html
>>>> gdalbuild_black image
>>>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
>>>> gdalbuildvrt_white image (simulated)
>>>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png
>>>>       
>>
>>
>>
>>   
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


From gregcoats at mac.com  Mon Jan  4 19:09:54 2010
From: gregcoats at mac.com (Greg Coats)
Date: Mon Jan  4 19:10:03 2010
Subject: [gdal-dev] gdalbuildvrt -init 255
In-Reply-To: <4B4272B9.20206@mines-paris.org>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
	<4B4258B3.3020603@mines-paris.org>
	<2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>
	<4B4272B9.20206@mines-paris.org>
Message-ID: <E9BE38B4-7E45-471E-8731-5BEFED1EA532@mac.com>

The black image shows the result of the gdalbuildvrt. Please note the large black areas near the western edge of the canvas, which are created as a result of the gdalbuildvrt, and not being able to specify -init 255 for a white canvas. The white image shows how it would look if I could pass -init 255 for a white canvas to gdalbuildvrt, as I do to gdal_merge.py. Greg

gdalbuildvrt black image
http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
gdalbuildvrtwhite image (simulated)
http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png

On Jan 4, 2010, at 5:59 PM, Even Rouault wrote:

> I was a bit confused by what your 2 screenshots showed. I know suppose that they show 2 VRTs layers.


On Jan 4, 2010, at 5:59 PM, Even Rouault wrote:

> Greg Coats a ?crit :
>> I do not think I want the black, opaque areas that gdalbuildvrt is making up for areas where there is no imagery to become transparent and remain black, I want them to be white and opaque. Surely, there are many places in the RGB images where one or more bands is already set to the value 255, and I do not want to change any legit 255 R, G, B values in the imagery. I do not want to convert the 1699 RGB images to RGBA. Essentially, I want for gdalbuildvrt what -init 255 does for gdal_merge.py. But, for now there does not seem to be a way to do that? Greg
>>  
> No, basically there's no support in the VRT driver for initializing the buffer to a non-zero value except if you set a nodata value. I don't see a theoretical difficulty in extenting but that woud require an addition to the XML VRT syntax.
> 
> I was a bit confused by what your 2 screenshots showed. I know suppose that they show 2 VRTs layers. So, if I were you, I'd begin by setting the vrtnodata to 255 and see if the result match your expectations. You can already do that by manually editing the VRT and adding a <NoDataValue>255</NoDataValue> just after each <VrtRasterBand> element. If you blend the result onto a white background, I think this should not alter visually the result.
> 
> There's another workaround I'm just thinking about, but it is a bit more involved and may lower performance when displaying the VRT. You can create a totally white GeoTIFF that has the extent of the whole VRT, and add it first in the VRT. Something like this python script :
> 
> import gdal
> ds = gdal.Open('source.vrt')
> wkt = ds.GetProjectionRef()
> gt = ds.GetGeoTransform()
> xsize = ds.RasterXSize
> ysize = ds.RasterYSize
> 
> ds_white = gdal.GetDriverByName('GTiff').Create('white.tif', xsize, ysize, 3, options = ['TILED=YES', 'COMPRESS=LZW'])
> ds_white.SetGeoTransform(gt)
> ds_white.SetProjection(wkt)
> ds_white.GetRasterBand(1).Fill(255)
> ds_white.GetRasterBand(2).Fill(255)
> ds_white.GetRasterBand(3).Fill(255)
> ds_white = None
> 
> If you use a QGIS version that relies on GDAL 1.7.0, you can replace the creation of the white dataset by :
> 
> ds_white = gdal.GetDriverByName('GTiff').Create('white.tif', xsize, ysize, 3, options = ['TILED=YES', 'SPARSE_OK=YES'])
> ds_white.SetGeoTransform(gt)
> ds_white.SetProjection(wkt)
> ds_white.GetRasterBand(1).SetNoDataValue(255)
> ds_white = None
> 
> This will create a sparse GeoTIFF that should be very small and when reading it, GDAL 1.7.0 will initialize the empty blocks with the nodata value (previous GDAL version would initialize with 0). The rendering of a VRT referencing that file should be much faster than with the white geotiff produced by the first solution.
> 
>> On Jan 4, 2010, at 4:08 PM, Even Rouault wrote:
>> 
>>  
>>> Greg,
>>> 
>>> I don't think the issue is really about black or white, but more about setting nodata appropriately. Basically, if I've well understood your needs, you want to make some black padding in images transparent. Assuming that your imagery is RGB, you could try adding -srcnodata 0 to the gdalbuildvrt command line, so that pixels with value 0 in source imaginery are not drawn in the VRT buffer. You will also need to specify a -vrtnodata XXX (which is about like -init XXX of gdal_merge.py, but does more than -init as it sets that value as nodata), where XXX can be 255 if you want it to be nodata white, but 0 should also do, but the value should not matter much to QGIS : it should just ignore the pixels matching the nodata value whichever it is.
>>> 
>>> You must be aware of the limitation of the nodata concept when working with RGB imagery however. Nodata is considered band per band, and not as a triplet. I mean if you have a blue pixel (0,0,255), and you set a nodata value of 255 for each of the 3 bands, the blue component of (0,0,255) being 255, it will be considered as nodata for that component... The only proper way to deal with that is to work with RGBA imagery.
>>> 
>>> Best regards,
>>> 
>>> Even
>>>    
>>>> By default, gdal_merge.py starts by creating an output image with all black pixels, and then replaces these black pixels with pixels from the images being read in. Passing to gdal_merge.py -init 255 pre-initializes the output image to all white, instead of all black, pixels.
>>>> Similar to gdal_merge.py, gdalbuildvrt fills with black pixels. I am seeking for gdalbuildvrt, the -init 255 option that gdal_merge.py supports, but do not see -init 255 as a supported option on the gdalbuildvrt man page. In GDAL 1.7.0, will gdalbuildvrt support -init 255? If not, then in GAL 1.7.0 can the option -vrtnodata be used in a way similar to how gdal_merge.py supports -init 255? I need areas where there is no image to be white, rather than the black that gdalbuildvrt is by default setting them to be.
>>>> Greg
>>>> 
>>>> gdal_merge.py man page
>>>> http://www.gdal.org/gdal_merge.html
>>>> gdalbuildvrt man page
>>>> http://www.gdal.org/gdalbuildvrt.html
>>>> gdalbuild_black image
>>>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_black.png
>>>> gdalbuildvrt_white image (simulated)
>>>> http://homepage.mac.com/gregcoats/jp2/images/gdalbuildvrt_white.png
>>>>      
>> 
>> 
>> 
>>  
> 
> 

From gregcoats at mac.com  Tue Jan  5 18:11:39 2010
From: gregcoats at mac.com (Greg Coats)
Date: Tue Jan  5 18:12:00 2010
Subject: [gdal-dev] gdalbuildvrt absolute path work, relative paths do not work
In-Reply-To: <4B427552.6010008@mines-paris.org>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
	<4B4258B3.3020603@mines-paris.org>
	<2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>
	<4B4272B9.20206@mines-paris.org> <4B427552.6010008@mines-paris.org>
Message-ID: <D1E0FE2C-C610-494A-90B8-42D17E02A213@mac.com>

I am running the 31 Dec 2009, Qgis version 1.4.0 Enceladus, code revision 12644, compiled for Mac OS X 10.6, downloaded from http://www.kyngchaos.com

The problem I am having is that while files created by GDAL 1.6.3, released 2009/11/19 gdalbuildvrt that include in the .vrt file absolute paths work fine
/Users/gregcoats/gis/dcuatest/GeoJPEG2000/18stj/18stj715050.jp2
when relative paths are used in the .vrt file, then the images are not found, and instead all black is drawn
../../GeoJPEG2000/18stj/18stj715050.jp2
Qgis accepts relative paths for images not in the gdalbuildvrt .vrt file.
I am seeking a work around solution for this problem.
Greg
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100105/d5227095/attachment.html
From even.rouault at mines-paris.org  Tue Jan  5 19:04:51 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan  5 19:05:01 2010
Subject: [gdal-dev] gdalbuildvrt absolute path work, relative paths do
	not work
In-Reply-To: <D1E0FE2C-C610-494A-90B8-42D17E02A213@mac.com>
References: <4B3D0D4D.4040904@pobox.com>
	<4B3E5B75.8020909@mines-paris.org>	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>	<4B4258B3.3020603@mines-paris.org>	<2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>	<4B4272B9.20206@mines-paris.org>
	<4B427552.6010008@mines-paris.org>
	<D1E0FE2C-C610-494A-90B8-42D17E02A213@mac.com>
Message-ID: <4B43D3A3.4060603@mines-paris.org>

Greg,

I doubt this is QGIS related, because QGIS has no idea of what is inside 
the VRT itself ! So you should be able to reproduce only with gdal 
utilities. A gdalinfo -checksum on the VRT would emit an error message 
and output 0 as the checksum value if he cannot find the source rasters.

You should check that the 'relativeToVRT' attribute in your VRT is set 
to 1. I strongly suspect the failure is due to 'relativeToVRT' being set 
to 0 in your case, thus GDAL interprets the path as an absolute path. 
This might happen in some situations where GDAL cannot figure out how 
the VRT and the source rasters path relate to each other. Read carefully 
http://lists.osgeo.org/pipermail/gdal-dev/2009-October/022358.html for a 
detailed explanation. I suspect you just hit case number 1) when 
building your VRT, which has been fixed in GDAL 1.7.0dev

Otherwise check your tree structure and that the VRT is correctly 
located for ../../GeoJPEG2000/18stj/18stj715050.jp2 being valid.

I've tested the following simple VRT (let's call it 'byte.vrt') and 
provided that the hierarchy is like :

/a/b/c/byte.tif
/a/b/c/subdirectory/byte.vrt

from any working directory, gdalinfo -checksum 
/a/b/c/subdirectory/byte.vrt  --> works
from /a/b/c/, gdalinfo -checksum subdirectory/byte.vrt -> works
from /a/b/c/subdirectory, gdalinfo -checksum byte.vrt -> works


<VRTDataset rasterXSize="20" rasterYSize="20">
  <SRS>PROJCS[&quot;NAD27 / UTM zone 
11N&quot;,GEOGCS[&quot;NAD27&quot;,DATUM[&q
uot;North_American_Datum_1927&quot;,SPHEROID[&quot;Clarke 
1866&quot;,6378206.4,2
94.9786982138982,AUTHORITY[&quot;EPSG&quot;,&quot;7008&quot;]],AUTHORITY[&quot;E
PSG&quot;,&quot;6267&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&q
uot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4267&quot;]],PROJECTIO
N[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],P
ARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0
.9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northin
g&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]
],AUTHORITY[&quot;EPSG&quot;,&quot;26711&quot;]]</SRS>
  <GeoTransform> 4.4072000000000000e+005, 6.0000000000000000e+001, 
0.00000000000
00000e+000, 3.7513200000000000e+006, 
0.0000000000000000e+000,-6.0000000000000000
e+001</GeoTransform>
  <VRTRasterBand dataType="Byte" band="1">
    <ColorInterp>Gray</ColorInterp>
    <SimpleSource>
      <SourceFilename relativeToVRT="1">../byte.tif</SourceFilename>
      <SourceBand>1</SourceBand>
      <SourceProperties RasterXSize="20" RasterYSize="20" 
DataType="Byte" BlockX
Size="20" BlockYSize="20"/>
      <SrcRect xOff="0" yOff="0" xSize="20" ySize="20"/>
      <DstRect xOff="0" yOff="0" xSize="20" ySize="20"/>
    </SimpleSource>
  </VRTRasterBand>
</VRTDataset>


Greg Coats a ?crit :
> I am running the 31 Dec 2009, Qgis version 1.4.0 Enceladus, code 
> revision 12644, compiled for Mac OS X 10.6, downloaded 
> from http://www.kyngchaos.com <http://www.kyngchaos.com/>
>
> The problem I am having is that while files created by GDAL 1.6.3, 
> released 2009/11/19 gdalbuildvrt that include in the .vrt file 
> absolute paths work fine
> /Users/gregcoats/gis/dcuatest/GeoJPEG2000/18stj/18stj715050.jp2
> when relative paths are used in the .vrt file, then the images are not 
> found, and instead all black is drawn
> ../../GeoJPEG2000/18stj/18stj715050.jp2
> Qgis accepts relative paths for images not in the gdalbuildvrt .vrt file.
> I am seeking a work around solution for this problem.
> Greg
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From gregcoats at mac.com  Tue Jan  5 20:00:08 2010
From: gregcoats at mac.com (Greg Coats)
Date: Tue Jan  5 20:00:41 2010
Subject: [gdal-dev] gdalbuildvrt absolute path work,
	relative paths do not work
In-Reply-To: <4B43D3A3.4060603@mines-paris.org>
References: <4B3D0D4D.4040904@pobox.com> <4B3E5B75.8020909@mines-paris.org>
	<F6B75440-02B6-4FCB-8425-DA0230673995@mac.com>
	<4B4258B3.3020603@mines-paris.org>
	<2D6150C4-FFAC-46DE-AF5E-873A1AD2EF12@mac.com>
	<4B4272B9.20206@mines-paris.org> <4B427552.6010008@mines-paris.org>
	<D1E0FE2C-C610-494A-90B8-42D17E02A213@mac.com>
	<4B43D3A3.4060603@mines-paris.org>
Message-ID: <A8BC78AD-D2F6-4911-952F-423CD458FCF5@mac.com>

I see <SourceFilename relativeToVRT="0">. I will try again after first changing that to<SourceFilename relativeToVRT="1">. I did not know about relativeToVRT. Thank you very much. Greg

On Jan 5, 2010, at 7:04 PM, Even Rouault wrote:

> Greg,
> 
> I doubt this is QGIS related, because QGIS has no idea of what is inside the VRT itself ! So you should be able to reproduce only with gdal utilities. A gdalinfo -checksum on the VRT would emit an error message and output 0 as the checksum value if he cannot find the source rasters.
> 
> You should check that the 'relativeToVRT' attribute in your VRT is set to 1. I strongly suspect the failure is due to 'relativeToVRT' being set to 0 in your case, thus GDAL interprets the path as an absolute path. This might happen in some situations where GDAL cannot figure out how the VRT and the source rasters path relate to each other. Read carefully http://lists.osgeo.org/pipermail/gdal-dev/2009-October/022358.html for a detailed explanation. I suspect you just hit case number 1) when building your VRT, which has been fixed in GDAL 1.7.0dev
> 
> Otherwise check your tree structure and that the VRT is correctly located for ../../GeoJPEG2000/18stj/18stj715050.jp2 being valid.
> 
> I've tested the following simple VRT (let's call it 'byte.vrt') and provided that the hierarchy is like :
> 
> /a/b/c/byte.tif
> /a/b/c/subdirectory/byte.vrt
> 
> from any working directory, gdalinfo -checksum /a/b/c/subdirectory/byte.vrt  --> works
> from /a/b/c/, gdalinfo -checksum subdirectory/byte.vrt -> works
> from /a/b/c/subdirectory, gdalinfo -checksum byte.vrt -> works
> 
> 
> <VRTDataset rasterXSize="20" rasterYSize="20">
> <SRS>PROJCS[&quot;NAD27 / UTM zone 11N&quot;,GEOGCS[&quot;NAD27&quot;,DATUM[&q
> uot;North_American_Datum_1927&quot;,SPHEROID[&quot;Clarke 1866&quot;,6378206.4,2
> 94.9786982138982,AUTHORITY[&quot;EPSG&quot;,&quot;7008&quot;]],AUTHORITY[&quot;E
> PSG&quot;,&quot;6267&quot;]],PRIMEM[&quot;Greenwich&quot;,0],UNIT[&quot;degree&q
> uot;,0.0174532925199433],AUTHORITY[&quot;EPSG&quot;,&quot;4267&quot;]],PROJECTIO
> N[&quot;Transverse_Mercator&quot;],PARAMETER[&quot;latitude_of_origin&quot;,0],P
> ARAMETER[&quot;central_meridian&quot;,-117],PARAMETER[&quot;scale_factor&quot;,0
> .9996],PARAMETER[&quot;false_easting&quot;,500000],PARAMETER[&quot;false_northin
> g&quot;,0],UNIT[&quot;metre&quot;,1,AUTHORITY[&quot;EPSG&quot;,&quot;9001&quot;]
> ],AUTHORITY[&quot;EPSG&quot;,&quot;26711&quot;]]</SRS>
> <GeoTransform> 4.4072000000000000e+005, 6.0000000000000000e+001, 0.00000000000
> 00000e+000, 3.7513200000000000e+006, 0.0000000000000000e+000,-6.0000000000000000
> e+001</GeoTransform>
> <VRTRasterBand dataType="Byte" band="1">
>   <ColorInterp>Gray</ColorInterp>
>   <SimpleSource>
>     <SourceFilename relativeToVRT="1">../byte.tif</SourceFilename>
>     <SourceBand>1</SourceBand>
>     <SourceProperties RasterXSize="20" RasterYSize="20" DataType="Byte" BlockX
> Size="20" BlockYSize="20"/>
>     <SrcRect xOff="0" yOff="0" xSize="20" ySize="20"/>
>     <DstRect xOff="0" yOff="0" xSize="20" ySize="20"/>
>   </SimpleSource>
> </VRTRasterBand>
> </VRTDataset>
> 
> 
> Greg Coats a ?crit :
>> I am running the 31 Dec 2009, Qgis version 1.4.0 Enceladus, code revision 12644, compiled for Mac OS X 10.6, downloaded from http://www.kyngchaos.com <http://www.kyngchaos.com/>
>> 
>> The problem I am having is that while files created by GDAL 1.6.3, released 2009/11/19 gdalbuildvrt that include in the .vrt file absolute paths work fine
>> /Users/gregcoats/gis/dcuatest/GeoJPEG2000/18stj/18stj715050.jp2
>> when relative paths are used in the .vrt file, then the images are not found, and instead all black is drawn
>> ../../GeoJPEG2000/18stj/18stj715050.jp2
>> Qgis accepts relative paths for images not in the gdalbuildvrt .vrt file.
>> I am seeking a work around solution for this problem.
>> Greg
>> ------------------------------------------------------------------------
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

From mdsumner at gmail.com  Wed Jan  6 00:35:36 2010
From: mdsumner at gmail.com (Michael Sumner)
Date: Wed Jan  6 00:43:28 2010
Subject: [gdal-dev] (article) social organization of the open source R
	project
In-Reply-To: <522664f81001052036u3c83977fpc2a52d375b8ade4b@mail.gmail.com>
References: <522664f81001052036u3c83977fpc2a52d375b8ade4b@mail.gmail.com>
Message-ID: <522664f81001052135i7330cd15rdc307ce3af2abeb1@mail.gmail.com>

Hello,

I thought this article would be of interest to the gdal-dev community:

See page 5, "Aspects of the Social Organization and Trajectory of the
R Project".

http://journal.r-project.org/archive/2009-2/RJournal_2009-2.pdf

In particular I found this interesting:

"Many open-source projects, such as the Linux operating system, have
strongly hierarchical structures, and some, such as Perl, revolve
around a central individual. . . . Although I haven?t formally
surveyed the many existing open source projects, the R Project is
apparently unusual in its flat formal organization of independent
volunteers. This structure has attracted a remarkably talented and
competent group of individuals, but, as I will argue later in this
aper, it poses challenges for moving the R Project forward."

Regards, Mike.
From simon.hewitt at keynetix.com  Wed Jan  6 06:03:50 2010
From: simon.hewitt at keynetix.com (Simon Hewitt)
Date: Wed Jan  6 06:11:46 2010
Subject: [gdal-dev] gdalwarp and tif rotation parameters
In-Reply-To: <32897398.9411262775519824.JavaMail.root@zimbra.keynetix.com>
Message-ID: <11564863.9431262775830890.JavaMail.root@zimbra.keynetix.com>

Hey,

I was wondering if it was possible to use gdalwarp to convert a .tif file and .tfw file into a plain .tif file. I'm looking to use the rotation parameters in the .tfw file to rotate the image itself. I've managed to do this with a gif and gfw file into both gif and tif formats, however it doesn't seem quite as straightforward using a tif file as the source.

I'm using this command to create the tif from 1.gif + 1.gfw:

gdalwarp -s_srs EPSG:4326 -t_srs EPSG:4326 1.gif 1.tif

Any help would be appreciated.

Simon
From j.l.h.hartmann at uva.nl  Wed Jan  6 06:52:16 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Jan  6 06:52:25 2010
Subject: [gdal-dev] (article) social organization of the open source R
	project
In-Reply-To: <522664f81001052135i7330cd15rdc307ce3af2abeb1@mail.gmail.com>
References: <522664f81001052036u3c83977fpc2a52d375b8ade4b@mail.gmail.com>
	<522664f81001052135i7330cd15rdc307ce3af2abeb1@mail.gmail.com>
Message-ID: <4B447970.8020907@uva.nl>

I would everyone advise to read

Frederick P. Brooks: The Mythical Man-Month. Essays on Software Engineering

Brooks was manager of IBM's OS/360, the classical mammoth operating 
system of the nineteen-sixties. He wrote this book in 1975 (it is still 
in print) about what can go wrong in designing large software systems. 
Characteristically, the cover shows a few dinosaurs slowly sinking under 
in a morass. He also advises about how software projects *should* be 
organised, and it is eery to see how Open Software projects work exactly 
along these lines nowadays. Some quotes from the 1995 reprint:

(p. 30) Very good professional programmers are *ten times* as productive 
as ordinary ones at the same training and two-year experience level.

(p. 32) Software projects should be organized like a surgical team 
rather than a hog-butchering team, that is, instead of each member 
cutting away on the problem, one does the cutting and the others give hm 
every support that will enhance his effectiveness and productivity. A 
small sharp core team is best.

(p. 44) Conceptual integrity is *the* most important consideration in 
system design. It dictates that the design must proceed from one mind, 
or from a very small number of agreeing resonant minds

(p. 62) The manual is the *external* specification of the product. It 
describes and prescribes every detail of what the user sees. As such, it 
is the chief product of the architect (software engineer)

(p. 111) Writing decisions down is essential

(p. 169) Make your programs self-documenting

(p. 231) Good cooking takes time; some tasks cannot be hurried without 
spoiling the result..

(p. 234) The project manager's best friend is his daily adversary, the 
independent product-testing organisation (nowadays the mailing list).

(p. 257) Conceptual integrity is central to product quality. Having  a 
system architect is the most important single step toward conceptual 
integrity

Last but not least, the book is beautifully written. Everyone who wants 
to learn writing good essayistic English should have a long, thoughtful 
look at it.

Jan

On 6-1-2010 6:35, Michael Sumner wrote:
> Hello,
>
> I thought this article would be of interest to the gdal-dev community:
>
> See page 5, "Aspects of the Social Organization and Trajectory of the
> R Project".
>
> http://journal.r-project.org/archive/2009-2/RJournal_2009-2.pdf
>
> In particular I found this interesting:
>
> "Many open-source projects, such as the Linux operating system, have
> strongly hierarchical structures, and some, such as Perl, revolve
> around a central individual. . . . Although I haven?t formally
> surveyed the many existing open source projects, the R Project is
> apparently unusual in its flat formal organization of independent
> volunteers. This structure has attracted a remarkably talented and
> competent group of individuals, but, as I will argue later in this
> aper, it poses challenges for moving the R Project forward."
>
> Regards, Mike.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>    
From landa.martin at gmail.com  Wed Jan  6 08:58:36 2010
From: landa.martin at gmail.com (Martin Landa)
Date: Wed Jan  6 08:58:40 2010
Subject: [gdal-dev] ogr vfk and write access
In-Reply-To: <f8fe65c40912261358n7f4117c8pa598b2c7e779b312@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
	<4B2BD644.5010002@mines-paris.org>
	<f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>
	<f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>
	<4B368048.2010708@mines-paris.org>
	<f8fe65c40912261358n7f4117c8pa598b2c7e779b312@mail.gmail.com>
Message-ID: <f8fe65c41001060558u30bf5a70g19154f32ab71665d@mail.gmail.com>

Hi all,

2009/12/26 Martin Landa <landa.martin@gmail.com>:
> 2009/12/26 Even Rouault <even.rouault@mines-paris.org>:
>> As 1.7.0 release should happen soon, the top priority is to be careful not
>> to break GDAL building. You can have a look at the various slavebots at
>> http://buildbot.osgeo.org:8500/waterfall to check that everything is OK.
>
> probably I should wait for releasing 1.7.0 [1] and after that add new
> VFK driver. What do you think?

I would like to ask you about status of 1.7 [1] or better to say if
it's better to include VFK driver now or later...

Thanks in advance, Martin

[1] http://trac.osgeo.org/gdal/wiki/ReleasePlan17

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From warmerdam at pobox.com  Wed Jan  6 11:47:01 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  6 11:47:19 2010
Subject: [gdal-dev] gdalwarp and tif rotation parameters
In-Reply-To: <11564863.9431262775830890.JavaMail.root@zimbra.keynetix.com>
References: <11564863.9431262775830890.JavaMail.root@zimbra.keynetix.com>
Message-ID: <4B44BE85.8080908@pobox.com>

Simon Hewitt wrote:
> Hey,
> 
> I was wondering if it was possible to use gdalwarp to convert a .tif file
> and .tfw file into a plain .tif file. I'm looking to use the rotation
> parameters in the .tfw file to rotate the image itself. I've managed to do
> this with a gif and gfw file into both gif and tif formats, however it
> doesn't seem quite as straightforward using a tif file as the source.
>

Simon,

It should work similarly with a TIFF file, the only caveat is that the
.tfw file is only used if there are no internal geotiff tags for
georeferencing.  If you are creating the TIFF with GDAL you might
want to use the creation option "-co PROFILE=BASELINE" to avoid
writing geotiff tags.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From gregcoats at mac.com  Wed Jan  6 13:50:04 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Jan  6 13:50:15 2010
Subject: [gdal-dev] gdal_translate
In-Reply-To: <4B44BE85.8080908@pobox.com>
References: <11564863.9431262775830890.JavaMail.root@zimbra.keynetix.com>
	<4B44BE85.8080908@pobox.com>
Message-ID: <647DC96C-C503-4B1C-B029-E9ED5FEC28F8@mac.com>

image_in1.tif is a .tif without georeferencing info. image_in2.tif is a .tif with georeferencing info. What do I add to the gdal_translate command below so that the output image_out3.tif, whose pixels will be identical to the pixels in image_in1.tif, will include the georeferencing info in image_in2.tif?
gdal_translate -ot Byte -of GTiff image_in1.tif image_out3.tif
Greg
From even.rouault at mines-paris.org  Wed Jan  6 14:27:35 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  6 14:27:41 2010
Subject: [gdal-dev] ogr vfk and write access - Updates on 1.7.0 release
	plan
In-Reply-To: <f8fe65c41001060558u30bf5a70g19154f32ab71665d@mail.gmail.com>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>	
	<f3b73b7d0912180602y2cd52b26xf40235b39da24675@mail.gmail.com>	
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>	
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>	
	<4B2BD644.5010002@mines-paris.org>	
	<f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>	
	<f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>	
	<4B368048.2010708@mines-paris.org>	
	<f8fe65c40912261358n7f4117c8pa598b2c7e779b312@mail.gmail.com>
	<f8fe65c41001060558u30bf5a70g19154f32ab71665d@mail.gmail.com>
Message-ID: <4B44E427.7080804@mines-paris.org>

Martin,

we are obviously late on the initial schedule... We aim at issuing 
1.7.0-beta2 very soon, but as it is not issued yet, it still gives you 
the opportunity to commit the driver if you're confident enough it won't 
cause too much build problems. If so, please commit the code very soon. 
Otherwise the next timeframe will likely be after the creation of the 
1.7 maintenance branch, which would occur in, well, 2 weeks ?, after we 
have issued the release candidates. At that point, trunk will then be 
considered as 1.8dev and proper again for adding new features. (For the 
period after beta2 and before 1.7 maintenance branch creation, I think 
the policy is "feature freeze - fix only"). The 1.7.0 version should be 
officialy released before end of January if everything goes well.

Best regards,

Even
> Hi all,
>
> 2009/12/26 Martin Landa <landa.martin@gmail.com>:
>   
>> 2009/12/26 Even Rouault <even.rouault@mines-paris.org>:
>>     
>>> As 1.7.0 release should happen soon, the top priority is to be careful not
>>> to break GDAL building. You can have a look at the various slavebots at
>>> http://buildbot.osgeo.org:8500/waterfall to check that everything is OK.
>>>       
>> probably I should wait for releasing 1.7.0 [1] and after that add new
>> VFK driver. What do you think?
>>     
>
> I would like to ask you about status of 1.7 [1] or better to say if
> it's better to include VFK driver now or later...
>
> Thanks in advance, Martin
>
> [1] http://trac.osgeo.org/gdal/wiki/ReleasePlan17
>
>   


From warmerdam at pobox.com  Wed Jan  6 15:15:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan  6 15:15:39 2010
Subject: [gdal-dev] gdal_translate
In-Reply-To: <647DC96C-C503-4B1C-B029-E9ED5FEC28F8@mac.com>
References: <11564863.9431262775830890.JavaMail.root@zimbra.keynetix.com>
	<4B44BE85.8080908@pobox.com>
	<647DC96C-C503-4B1C-B029-E9ED5FEC28F8@mac.com>
Message-ID: <4B44EF5D.5000303@pobox.com>

Greg Coats wrote:
> image_in1.tif is a .tif without georeferencing info. image_in2.tif is a .tif with georeferencing info. What do I add to the gdal_translate command below so that the output image_out3.tif, whose pixels will be identical to the pixels in image_in1.tif, will include the georeferencing info in image_in2.tif?
> gdal_translate -ot Byte -of GTiff image_in1.tif image_out3.tif
>

Greg,

gdal_translate will not do what you want unassisted.

But you could do:

gdal_translate -of VRT image_in2.tif georef.vrt

then edit georef.vrt and change all occurances of "image_in2.tif" to
"image_in1.tif" and then do:

gdal_translate georef.vrt -ot Byte image_out.tif

I am assuming that image_in1.tif and image_in2.tif are of the same
configuration (size, number of bands, etc).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ahmettemiz88 at gmail.com  Wed Jan  6 15:26:26 2010
From: ahmettemiz88 at gmail.com (ahmet temiz)
Date: Wed Jan  6 15:26:28 2010
Subject: [gdal-dev] displaying data in browse mode
Message-ID: <37ee0091001061226i1ea47b6au4dff843f06404cea@mail.gmail.com>

hello

how can I get the data with ogrinfo in browse mode ?

regards

Ahmet Temiz
From sjahputerao at missouri.edu  Wed Jan  6 15:36:02 2010
From: sjahputerao at missouri.edu (Ozy Sjahputera)
Date: Wed Jan  6 15:37:06 2010
Subject: [gdal-dev] Setting metadata in newly created NITF image via create
	options
Message-ID: <4B44F432.5060900@missouri.edu>

Folks,

I need to create a new NITF image and set some RPC parameters I grabbed 
from another NITF file. According to the online documentation 
(http://www.gdal.org/frmt_nitf.html):

 "Most file header, imagery header metadata and security fields can be 
set with appropriate *creation options* (although they are reported as 
metadata item, but must not be set as metadata)."

So I did the following:

1   char **create_options = NULL;
2   GDALDataset* ds = (GDALDataset*) GDALOpen( existing_nitf_file, 
GA_ReadOnly );
3   create_options = CSLSetNameValue( create_options, "RPC_LINE_OFF", 
ds->GetMetadataItem( "LINE_OFF", "RPC"  ) );
4   GDALDriver *driver = GetGDALDriverManager()->GetDriverByName("NITF");
5   GDALDataset* out_ds=  driver->Create( new_nitf_file, width, height, 
bandCount(), GDT_UInt16, create_options );

During execution, I am getting the following warning message:

Warning 6: Driver NITF does not support RPC_LINE_OFF creation option

I also tried using "LINE_OFF" in line 2 as the metadata key and still 
getting the same warning.

When I processed the newly created nitf file, calling 
GetMetadataItem("RPC_LINE_OFF",NULL) or GetMedataItem("LINE_OFF", "RPC") 
returns NULL. So the metadata was not set.

Did I misunderstood the documentation above that talks about setting 
imagery header metadata via create options?

I use GDAL v.1.6.3.

Thanks
Ozy


From arb at sat.dundee.ac.uk  Wed Jan  6 15:42:46 2010
From: arb at sat.dundee.ac.uk (Andrew Brooks)
Date: Wed Jan  6 15:43:08 2010
Subject: [gdal-dev] gdal_translate
In-Reply-To: <4B44EF5D.5000303@pobox.com>
References: <11564863.9431262775830890.JavaMail.root@zimbra.keynetix.com> 
	<4B44BE85.8080908@pobox.com>
	<647DC96C-C503-4B1C-B029-E9ED5FEC28F8@mac.com> 
	<4B44EF5D.5000303@pobox.com>
Message-ID: <4a27540a1001061242q43ae4dffjd9e3d16cfbca9ae9@mail.gmail.com>

2010/1/6 Frank Warmerdam <warmerdam@pobox.com>:
> Greg Coats wrote:
>>
>> image_in1.tif is a .tif without georeferencing info. image_in2.tif is a
>> .tif with georeferencing info. What do I add to the gdal_translate command
>> below so that the output image_out3.tif, whose pixels will be identical to
>> the pixels in image_in1.tif, will include the georeferencing info in
>> image_in2.tif?
>
> gdal_translate will not do what you want unassisted.

Isn't this what the geotifcp and applygeo programs are for?

Andrew
From even.rouault at mines-paris.org  Wed Jan  6 16:51:05 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan  6 16:51:07 2010
Subject: [gdal-dev] Setting metadata in newly created NITF image via create
	options
In-Reply-To: <4B44F432.5060900@missouri.edu>
References: <4B44F432.5060900@missouri.edu>
Message-ID: <4B4505C9.7020106@mines-paris.org>

Ozy,

You can't set the RPC parameters this way as they are not contained in 
the main file header or imagery header, but they are derived from the 
RPC00A or RPC00B TRE. So you could set them by using the 
TRE=RPC00A=xxxxxx or TRE=RPC00B=xxxxxxxx creation options. You can get 
the xxxxxx value from src_ds->GetMetataItem("RPC00A", "TRE") (or 
"RPC00B" depending on your NITF source file)

> Folks,
>
> I need to create a new NITF image and set some RPC parameters I 
> grabbed from another NITF file. According to the online documentation 
> (http://www.gdal.org/frmt_nitf.html):
>
> "Most file header, imagery header metadata and security fields can be 
> set with appropriate *creation options* (although they are reported as 
> metadata item, but must not be set as metadata)."
>
> So I did the following:
>
> 1   char **create_options = NULL;
> 2   GDALDataset* ds = (GDALDataset*) GDALOpen( existing_nitf_file, 
> GA_ReadOnly );
> 3   create_options = CSLSetNameValue( create_options, "RPC_LINE_OFF", 
> ds->GetMetadataItem( "LINE_OFF", "RPC"  ) );
> 4   GDALDriver *driver = GetGDALDriverManager()->GetDriverByName("NITF");
> 5   GDALDataset* out_ds=  driver->Create( new_nitf_file, width, 
> height, bandCount(), GDT_UInt16, create_options );
>
> During execution, I am getting the following warning message:
>
> Warning 6: Driver NITF does not support RPC_LINE_OFF creation option
>
> I also tried using "LINE_OFF" in line 2 as the metadata key and still 
> getting the same warning.
>
> When I processed the newly created nitf file, calling 
> GetMetadataItem("RPC_LINE_OFF",NULL) or GetMedataItem("LINE_OFF", 
> "RPC") returns NULL. So the metadata was not set.
>
> Did I misunderstood the documentation above that talks about setting 
> imagery header metadata via create options?
>
> I use GDAL v.1.6.3.
>
> Thanks
> Ozy
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


From Bob.Bruce at shaw.ca  Wed Jan  6 19:44:02 2010
From: Bob.Bruce at shaw.ca (Bob Bruce)
Date: Wed Jan  6 19:44:05 2010
Subject: [gdal-dev] DigitalGlobe Image Not Displaying Correctly
Message-ID: <cf25fdf1186b4.4b44d9f2@shaw.ca>

Hi:     when we try and display a DigitalGlobe?image in QGIS?we only see a dark green land mass and a slightly lighter green water area. The JPG?image that came with it showed a lot of variation in colour. Could someone please have a look at the GDALINFO?listing of the image below and help me with ideas of how to make this image work with our packages?Help would be much appreciated, the only thing unusual that I can find with this image is that on the lines at the end that list the bands, the values "x96" appear whereas with my other colour GeoTIFF?images they have "x1" in each band.Is there some way to use GDAL?to convert this image to a more useable?form?thanks,            Bob BruceD:\>gdalinfo 02AUG25172538-S2AS-052024713010_01_P001.TIF<BR>Driver: GTiff/GeoTIFF<BR>Files: 02AUG25172538-S2AS-052024713010_01_P001.TIF<BR>Size is 10834, 15440<BR>Coordinate System is:<BR>PROJCS["NAD83 / UTM zone 14N",<BR>    GEOGCS["NAD83",<BR>        DATUM["North_American_Datum_1983",<BR>            SPHEROID["GRS 1980",6378137,298.2572221009903,<BR>                AUTHORITY["EPSG","7019"]],<BR>            AUTHORITY["EPSG","6269"]],<BR>        PRIMEM["Greenwich",0],<BR>        UNIT["degree",0.0174532925199433],<BR>        AUTHORITY["EPSG","4269"]],<BR>    PROJECTION["Transverse_Mercator"],<BR>    PARAMETER["latitude_of_origin",0],<BR>    PARAMETER["central_meridian",-99],<BR>    PARAMETER["scale_factor",0.9996],<BR>    PARAMETER["false_easting",500000],<BR>    PARAMETER["false_northing",0],<BR>    UNIT["metre",1,<BR>        AUTHORITY["EPSG","9001"]],<BR>    AUTHORITY["EPSG","26914"]]<BR>Origin = (685515.000000000000000,5635990.200000000200000)<BR>Pixel Size = (0.600000000000000,-0.600000000000000)<BR>Metadata:<BR>  AREA_OR_POINT=Area<BR>  TIFFTAG_IMAGEDESCRIPTION={<BR>  bandList =<BR>  [<BR>    3;<BR>    2;<BR>    1;<BR>  ]<BR>}<BR>  TIFFTAG_DATETIME=2008:06:26 16:19:24<BR>  TIFFTAG_COPYRIGHT=(C) COPYRIGHT 2008 DigitalGlobe, Inc., Longmont CO USA 80503<BR>  TIFFTAG_MINSAMPLEVALUE=0<BR>  TIFFTAG_MAXSAMPLEVALUE=140<BR>Image Structure Metadata:<BR>  INTERLEAVE=BAND<BR>Corner Coordinates:<BR>Upper Left  (  685515.000, 5635990.200) ( 96d21'53.02"W, 50d50'44.99"N)<BR>Lower Left  (  685515.000, 5626726.200) ( 96d22'9.87"W, 50d45'45.39"N)<BR>Upper Right (  692015.400, 5635990.200) ( 96d16'20.99"W, 50d50'37.35"N)<BR>Lower Right (  692015.400, 5626726.200) ( 96d16'38.43"W, 50d45'37.78"N)<BR>Center      (  688765.200, 5631358.200) ( 96d19'15.58"W, 50d48'11.41"N)<BR>Band 1 Block=10834x96 Type=Byte, ColorInterp=Red<BR>Band 2 Block=10834x96 Type=Byte, ColorInterp=Green<BR>Band 3 Block=10834x96 Type=Byte, ColorInterp=Blue
From Bob.Bruce at shaw.ca  Wed Jan  6 19:46:44 2010
From: Bob.Bruce at shaw.ca (Bob Bruce)
Date: Wed Jan  6 19:46:50 2010
Subject: [gdal-dev] DigitalGlobe Image Not Displaying Correctly
Message-ID: <cffe98561fe3a.4b44da94@shaw.ca>

undefined
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100106/6a03b4d0/attachment-0001.html
From gregcoats at mac.com  Wed Jan  6 20:43:30 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Jan  6 20:43:34 2010
Subject: [gdal-dev] from georeferenced raster to georeferenced vector
In-Reply-To: <cffe98561fe3a.4b44da94@shaw.ca>
References: <cffe98561fe3a.4b44da94@shaw.ca>
Message-ID: <35E32ADD-A5B8-43DF-AFFB-5C19D5FC07C8@mac.com>

I have a simple .tif, created in Photoshop, that consists of a horizontal line, a vertical line, and some text, and that (thanks to Frank) is now a georeferenced GeoTIFF. Is there a command line tool that will read in the georeferenced GeoTIFF and write out a georeferenced vector file, likely a .shp file? Greg
From chaitanya.ch at gmail.com  Thu Jan  7 01:20:01 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  7 01:25:21 2010
Subject: [gdal-dev] from georeferenced raster to georeferenced vector
In-Reply-To: <35E32ADD-A5B8-43DF-AFFB-5C19D5FC07C8@mac.com>
References: <cffe98561fe3a.4b44da94@shaw.ca>
	<35E32ADD-A5B8-43DF-AFFB-5C19D5FC07C8@mac.com>
Message-ID: <eb502d881001062220n38c836f8xaf91a0996e5c7082@mail.gmail.com>

Greg,

Try the gdal_polygonize.py program from http://gdal.org/gdal_utilities.html
You may have to do some post processing on the shapefile.

On Thu, Jan 7, 2010 at 7:13 AM, Greg Coats <gregcoats@mac.com> wrote:
> I have a simple .tif, created in Photoshop, that consists of a horizontal line, a vertical line, and some text, and that (thanks to Frank) is now a georeferenced GeoTIFF. Is there a command line tool that will read in the georeferenced GeoTIFF and write out a georeferenced vector file, likely a .shp file? Greg
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From simon.hewitt at keynetix.com  Thu Jan  7 03:41:35 2010
From: simon.hewitt at keynetix.com (Simon Hewitt)
Date: Thu Jan  7 03:42:59 2010
Subject: [gdal-dev] gdalwarp and tif rotation parameters
In-Reply-To: <6640992.11681262853663975.JavaMail.root@zimbra.keynetix.com>
Message-ID: <4134357.11701262853695081.JavaMail.root@zimbra.keynetix.com>

Frank,

That was the problem, the geotiff had internal tags that were overwriting the tfw. The -co PROFILE=BASELINE option fixed the issue.

Thanks for your help!

Simon

----- Original Message -----
From: "Frank Warmerdam" <warmerdam@pobox.com>
To: "Simon Hewitt" <simon.hewitt@keynetix.com>
Cc: gdal-dev@lists.osgeo.org
Sent: Wednesday, 6 January, 2010 16:47:01 GMT +00:00 GMT Britain, Ireland, Portugal
Subject: Re: [gdal-dev] gdalwarp and tif rotation parameters

Simon Hewitt wrote:
> Hey,
> 
> I was wondering if it was possible to use gdalwarp to convert a .tif file
> and .tfw file into a plain .tif file. I'm looking to use the rotation
> parameters in the .tfw file to rotate the image itself. I've managed to do
> this with a gif and gfw file into both gif and tif formats, however it
> doesn't seem quite as straightforward using a tif file as the source.
>

Simon,

It should work similarly with a TIFF file, the only caveat is that the
.tfw file is only used if there are no internal geotiff tags for
georeferencing.  If you are creating the TIFF with GDAL you might
want to use the creation option "-co PROFILE=BASELINE" to avoid
writing geotiff tags.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent


From matthew.riek at gmail.com  Thu Jan  7 06:46:12 2010
From: matthew.riek at gmail.com (mriek)
Date: Thu Jan  7 06:46:14 2010
Subject: [Gdal-dev] Help with converting ASTER GDEM using GDAL
Message-ID: <1262864772829-4266027.post@n2.nabble.com>


Hi All,

I am trying to get a high resolution heightmap (hopefully tens of gigabytes)
to demonstrate a streaming terrain system.

I have downloaded the granules of the ASTER GDEM, which are in a geotiff
format.  I would like to convert all of these at full resolution into a
custom surface database as tiles that join into one large heightmap image.

The terrain system is for viewing virtual worlds, so I don't usually need to
deal with the warping / mapping from spherical data to an "unwrapped" image
- so I would appreciate any help or links to tutorials, or suggestions of
existing tools/scripts that acheive what I am trying to do.  Even if they
build an image into a different database store that would then allow me to
transfer it to my custom database.

As I have limited knowledge in dealing with this kind of real world data, If
what I am trying to do cannot be done quickly, I will demonstrate the
terrain system with synthetic data - but I'd love to know what I'm up
against.

Best regards and thanks for any help you can offer,

Matt Riek.
-- 
View this message in context: http://n2.nabble.com/Help-with-converting-ASTER-GDEM-using-GDAL-tp4266027p4266027.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From radim.blazek at gmail.com  Thu Jan  7 06:53:47 2010
From: radim.blazek at gmail.com (Radim Blazek)
Date: Thu Jan  7 06:53:50 2010
Subject: [gdal-dev] GRASS driver crash after MAPSET unset
Message-ID: <340505ef1001070353w21753be8k247f9dc7913a694e@mail.gmail.com>

I have created a ticket http://trac.osgeo.org/gdal/ticket/3313 with
patch attached.

May I submit the patch to svn?

Radim
From landa.martin at gmail.com  Thu Jan  7 08:12:14 2010
From: landa.martin at gmail.com (Martin Landa)
Date: Thu Jan  7 08:12:17 2010
Subject: [gdal-dev] buiding gdal with Visual C++ 2008
Message-ID: <f8fe65c41001070512n440c1bf8h1e3d43f2916e55d2@mail.gmail.com>

Hi,

I am trying to build GDAL with Visual C++ 2008 Express, I am getting
the following error

ren jdsample.c jdsample12.c
File already exists or cannot be found.
NMAKE : fatal error U1077: 'ren' : return code '0x1'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\bin\nmake.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\bin\nmake.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: 'for' : return code '0x1'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\bin\nmake.EXE"' : return code '0x2'
Stop.
Project : error PRJ0019: A tool returned an error code from
"Performing Makefile project actions"

I am not sure what is wrong (no experience with VC compiler...). Thanks, Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From landa.martin at gmail.com  Thu Jan  7 08:44:43 2010
From: landa.martin at gmail.com (Martin Landa)
Date: Thu Jan  7 08:44:47 2010
Subject: [gdal-dev] ogr vfk and write access - Updates on 1.7.0 release 
	plan
In-Reply-To: <4B44E427.7080804@mines-paris.org>
References: <f8fe65c40912180504w23f54469g3b2ef437c827ae96@mail.gmail.com>
	<f8fe65c40912180621r32880d61oa957e186dd3b2c33@mail.gmail.com>
	<f8fe65c40912180954p60d6bd38i424263099de76db8@mail.gmail.com>
	<4B2BD644.5010002@mines-paris.org>
	<f8fe65c40912260714p44995752m1c60d46dd284c8c@mail.gmail.com>
	<f8fe65c40912261212v6a5315afn8dbc9736c62de213@mail.gmail.com>
	<4B368048.2010708@mines-paris.org>
	<f8fe65c40912261358n7f4117c8pa598b2c7e779b312@mail.gmail.com>
	<f8fe65c41001060558u30bf5a70g19154f32ab71665d@mail.gmail.com>
	<4B44E427.7080804@mines-paris.org>
Message-ID: <f8fe65c41001070544q1682ecd6ve2aeb9902f2cf173@mail.gmail.com>

Hi,

2010/1/6 Even Rouault <even.rouault@mines-paris.org>:
> 1.7.0-beta2 very soon, but as it is not issued yet, it still gives you the
> opportunity to commit the driver if you're confident enough it won't cause
> too much build problems. If so, please commit the code very soon. Otherwise

I committed the code in r18449. The driver is not compiled by default.
Tested on GNU/Linux with
g++ 4.3.4, compilation using VC compiler in progress.

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From chaitanya.ch at gmail.com  Thu Jan  7 09:47:41 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan  7 09:47:43 2010
Subject: [gdal-dev] buiding gdal with Visual C++ 2008
In-Reply-To: <f8fe65c41001070512n440c1bf8h1e3d43f2916e55d2@mail.gmail.com>
References: <f8fe65c41001070512n440c1bf8h1e3d43f2916e55d2@mail.gmail.com>
Message-ID: <eb502d881001070647n5dedcb4bi6a970d7aeba02730@mail.gmail.com>

Martin,

This is more of a VS problem. I had similar, but not the same,
problems on my system.
Try to do a 'rebuild' instead of 'build'.
If this doesn't solve the problem, just follow the error messages or
google "File already exists or cannot be found." or other error
messages.

On Thu, Jan 7, 2010 at 6:42 PM, Martin Landa <landa.martin@gmail.com> wrote:
> Hi,
>
> I am trying to build GDAL with Visual C++ 2008 Express, I am getting
> the following error
>
> ren jdsample.c jdsample12.c
> File already exists or cannot be found.
> NMAKE : fatal error U1077: 'ren' : return code '0x1'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 9.0\VC\bin\nmake.EXE"' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 9.0\VC\bin\nmake.EXE"' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: 'for' : return code '0x1'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 9.0\VC\bin\nmake.EXE"' : return code '0x2'
> Stop.
> Project : error PRJ0019: A tool returned an error code from
> "Performing Makefile project actions"
>
> I am not sure what is wrong (no experience with VC compiler...). Thanks, Martin
>
> --
> Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From even.rouault at mines-paris.org  Thu Jan  7 10:40:40 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan  7 10:41:11 2010
Subject: [gdal-dev] Re: buiding gdal with Visual C++ 2008
Message-ID: <1262878840.4b46007823ec9@imp.free.fr>

Martin, Chaitanya,

The error about 'ren' might be caused by my yesterday commit
http://trac.osgeo.org/gdal/changeset/18448 that changed 'rename' to 'ren'. If
you revert it in your local tree (change ren to rename in
frmts/jpeg/libjpeg12/makefile.vc ), does it help going on further ? If so,
please notify me and I'll commit the revert changeset.

Martin,

For the Win32 support of your driver, I've observed a typo in the makefile.vc :
the objects extensions should be .obj, not .o. Otherwise I feel like you might
have missed a few additions in a few files in ogr/ subtree. A pragrmatic way is
to issue "grep -r dxf ogr/" to see all places where the DXF driver was
referenced. You likely need to add support for your VFK driver in the same files
similarly to what is done for DXF. ogr/ogrsf_frmts/makefile.vc is one of the
file for example that comes to mind.

Best regards,

Even
From landa.martin at gmail.com  Thu Jan  7 11:08:26 2010
From: landa.martin at gmail.com (Martin Landa)
Date: Thu Jan  7 11:08:29 2010
Subject: [gdal-dev] Re: buiding gdal with Visual C++ 2008
In-Reply-To: <1262878840.4b46007823ec9@imp.free.fr>
References: <1262878840.4b46007823ec9@imp.free.fr>
Message-ID: <f8fe65c41001070808l167ab07ei93fed792cd0a6a21@mail.gmail.com>

Hi,

2010/1/7 Even Rouault <even.rouault@mines-paris.org>:
> The error about 'ren' might be caused by my yesterday commit
> http://trac.osgeo.org/gdal/changeset/18448 that changed 'rename' to 'ren'. If
> you revert it in your local tree (change ren to rename in
> frmts/jpeg/libjpeg12/makefile.vc ), does it help going on further ? If so,
> please notify me and I'll commit the revert changeset.

yes, it helped. Unfortunately building process failed with

vb6_support.cpp
vb6_support.cpp(35) : fatal error C1083: Cannot open include file:
'atlbase.h': No such file or directory
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\bin\cl.EXE"' : return code '0x2'
Stop.
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
9.0\VC\bin\nmake.EXE"' : return code '0x2'
Stop.

even I set up

MSVC_VER=1500

in nmake.opt.

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From landa.martin at gmail.com  Thu Jan  7 11:41:37 2010
From: landa.martin at gmail.com (Martin Landa)
Date: Thu Jan  7 11:41:42 2010
Subject: [gdal-dev] Re: buiding gdal with Visual C++ 2008
In-Reply-To: <1262878840.4b46007823ec9@imp.free.fr>
References: <1262878840.4b46007823ec9@imp.free.fr>
Message-ID: <f8fe65c41001070841l1aabaf35k13a9b1620660d3cc@mail.gmail.com>

Hi,

2010/1/7 Even Rouault <even.rouault@mines-paris.org>:

[...]

> For the Win32 support of your driver, I've observed a typo in the makefile.vc :
> the objects extensions should be .obj, not .o. Otherwise I feel like you might
> have missed a few additions in a few files in ogr/ subtree. A pragrmatic way is
> to issue "grep -r dxf ogr/" to see all places where the DXF driver was
> referenced. You likely need to add support for your VFK driver in the same files
> similarly to what is done for DXF. ogr/ogrsf_frmts/makefile.vc is one of the
> file for example that comes to mind.

hopefully fixed in r18453 & r18454 (untested due to my problems with
building GDAL using VC).

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From Gary.Smart at goodrich.com  Thu Jan  7 13:25:10 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Thu Jan  7 13:40:16 2010
Subject: [gdal-dev] geoTransforms and OGRSpatialTransforms
Message-ID: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>

1)       Can anyone tell me why the following program returns a
GetProjectionRef as 'empty string' (not NULL) from some files and not
others (even though openEv seems to be able to open them and
georeference them all fine?)  I am looking at geotiffs from the
MapServer tutorial directory.

2)       Can anyone offer an explanation as to why - even with a valid
projectionRef, I can never create the OGRSpatialReference

 

I am using Linux SLES10 SP2, gdal-svn-trunk-2009.12.14 and
proj4-4.7.0-1.1 (well - at least I think I am - can someone tell me a
good way to test this?)

 

// g++ -Wno-deprecated -m64 -g -o georef georef.c++ -lgdal

#include <proj_api.h>
#include <gdal.h>
#include <gdal_priv.h>
#include <ogr_spatialref.h>

/* Using from the MapServer tutorial ...data/raster/shdrlfi020l_ugl.tif
file.  
   This file opens fine in 'openev' and gives easting/northing readouts
OK.  
   However - this program fails to manage to create either a pixel->geo
transform OR
   a UTM to Lat/Long transform!  Output from this program is...

Driver: GTiff/GeoTIFF
Input has no ProjectionRef!
No geo transform!
ERROR 1: No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.
!!!FAILED! Cannot create transform from input space   to WGS84
*/

/* Using the MapServer tutorial
...data/raster/mod09a12003161_ugl_ll_8bit.tif file.
   This file opens fine in 'openev' and gives Lat/Long readouts OK.  
   This program does get a geoTransform but fails to create the 

   UTM to Lat/Long transform too!  Output from this program is...

Driver: GTiff/GeoTIFF
ProjectionRef is 'GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.2572235630016,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG"
,"6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHOR
ITY["EPSG","4326"]]'
Origin = (-97.374337,49.415919)
Pixel Size = (0.004733,-0.004733)
ERROR 1: No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.
!!!FAILED! Cannot create transform from input space GEOGCS["WGS
84",DATUM["WGS_1984",SPHEROID["WGS
84",6378137,298.2572235630016,AUTHORITY["EPSG","7030"]],AUTHORITY["EPSG"
,"6326"]],PRIMEM["Greenwich",0],UNIT["degree",0.0174532925199433],AUTHOR
ITY["EPSG","4326"]]  to WGS84
*/

int main(int argc, char **argv)
{
  GDALDataset  *poDataset;

  GDALAllRegister();

  poDataset = (GDALDataset *) GDALOpen( argv[1], GA_ReadOnly );
  if( poDataset == NULL )
  {
    fprintf(stderr, "!!!poDataset was NULL\n");
    exit(-1);
  }
  double adfGeoTransform[6];

  fprintf(stderr, "Driver: %s/%s\n",
          poDataset->GetDriver()->GetDescription(), 
          poDataset->GetDriver()->GetMetadataItem( GDAL_DMD_LONGNAME )
);

  const char *proj_ref = poDataset->GetProjectionRef();
  if( proj_ref != NULL && strlen(proj_ref))
      fprintf(stderr, "ProjectionRef is '%s'\n",
poDataset->GetProjectionRef() );
  else
    fprintf(stderr, "Input has no ProjectionRef!\n");

  if( poDataset->GetGeoTransform( adfGeoTransform ) == CE_None )
  {
      fprintf(stderr, "Origin = (%.6f,%.6f)\n",
              adfGeoTransform[0], adfGeoTransform[3] );

      fprintf(stderr, "Pixel Size = (%.6f,%.6f)\n",
              adfGeoTransform[1], adfGeoTransform[5] );
  }
  else
    fprintf(stderr, "No geo transform!\n");

  // We have to convert from native input file 
  // geospace to our standard WGS84 space so create a transform here.

  // First create a spatial reference in the input space
  OGRSpatialReference iref;
  char *tmp = NULL;
  if (proj_ref)
  {
    tmp = (char *)malloc(strlen(proj_ref)+1);
    iref.importFromWkt(&tmp);
    //iref.SetWellKnownGeogCS("WGS84");

    // Create a spatial reference in WGS84 lat/long space and
    // create a transform object between input and output space
    OGRSpatialReference oref;
    oref.SetWellKnownGeogCS("WGS84");
    OGRCoordinateTransformation *coord_transform
      = OGRCreateCoordinateTransformation(&iref, &oref);
    if (!coord_transform)
    {
      fprintf(stderr, "!!!FAILED! Cannot create converter from %s "
              " to WGS84\n", proj_ref);

    } // end case default
    free(tmp);

  } // end if got projection ref
} // end main
 

Gary

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100107/cef5a12d/attachment.html
From even.rouault at mines-paris.org  Thu Jan  7 16:06:13 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan  7 16:06:23 2010
Subject: [gdal-dev] Re: buiding gdal with Visual C++ 2008
In-Reply-To: <f8fe65c41001070808l167ab07ei93fed792cd0a6a21@mail.gmail.com>
References: <1262878840.4b46007823ec9@imp.free.fr>
	<f8fe65c41001070808l167ab07ei93fed792cd0a6a21@mail.gmail.com>
Message-ID: <4B464CC5.9080306@mines-paris.org>

Martin,

A few things :

1) I've finally reverted the 'rename' -> 'ren' stuff to be 
'ren'->'rename' again, although I'm not clear why one is better than the 
other one...
2) I don't know why you get this build error. Looking at the very first 
lines of /makefile.vc, it seems that the VB6 support code should not be 
compiled. You could try to remove those lines in your local tree and see 
what happens, although I'd think that for some reason MSVC_VER=1500 is 
not set as you would like.
3) I've done a few commits to enable Win32 support of the VFK driver and 
the tests pass :-)
4) I've changed the configure.in logic to enable it on Unix platforms by 
default. I saw no reason for not enabling it by default as there are no 
external dependencies.
5) We have reverted your regeneration of configure done with autconf 
2.65 to re-update it with autoconf 2.61, which is the current "official" 
version of the GDAL project for updating autoconf from autoconf.in. If 
you need to update it in the future, please do it with that one (well, 
look at the comment in the header of current configure to check that 
this is still the current version ;-))
6) I've created ticket http://trac.osgeo.org/gdal/ticket/3314 with a few 
errors detected by Valgrind

Best regards,

Even
> Hi,
>
> 2010/1/7 Even Rouault <even.rouault@mines-paris.org>:
>   
>> The error about 'ren' might be caused by my yesterday commit
>> http://trac.osgeo.org/gdal/changeset/18448 that changed 'rename' to 'ren'. If
>> you revert it in your local tree (change ren to rename in
>> frmts/jpeg/libjpeg12/makefile.vc ), does it help going on further ? If so,
>> please notify me and I'll commit the revert changeset.
>>     
>
> yes, it helped. Unfortunately building process failed with
>
> vb6_support.cpp
> vb6_support.cpp(35) : fatal error C1083: Cannot open include file:
> 'atlbase.h': No such file or directory
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 9.0\VC\bin\cl.EXE"' : return code '0x2'
> Stop.
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio
> 9.0\VC\bin\nmake.EXE"' : return code '0x2'
> Stop.
>
> even I set up
>
> MSVC_VER=1500
>
> in nmake.opt.
>
> Martin
>
>   


From landa.martin at gmail.com  Thu Jan  7 16:47:33 2010
From: landa.martin at gmail.com (Martin Landa)
Date: Thu Jan  7 16:47:39 2010
Subject: [gdal-dev] Re: buiding gdal with Visual C++ 2008
In-Reply-To: <4B464CC5.9080306@mines-paris.org>
References: <1262878840.4b46007823ec9@imp.free.fr>
	<f8fe65c41001070808l167ab07ei93fed792cd0a6a21@mail.gmail.com>
	<4B464CC5.9080306@mines-paris.org>
Message-ID: <f8fe65c41001071347p23a73a5av89622aa6d95563b5@mail.gmail.com>

Hi,

2010/1/7 Even Rouault <even.rouault@mines-paris.org>:
> 3) I've done a few commits to enable Win32 support of the VFK driver and the
> tests pass :-)

thanks...

> 4) I've changed the configure.in logic to enable it on Unix platforms by
> default. I saw no reason for not enabling it by default as there are no
> external dependencies.

Right, I was thinking about that.

> 5) We have reverted your regeneration of configure done with autconf 2.65 to
> re-update it with autoconf 2.61, which is the current "official" version of
> the GDAL project for updating autoconf from autoconf.in. If you need to
> update it in the future, please do it with that one (well, look at the
> comment in the header of current configure to check that this is still the
> current version ;-))

OK.

> 6) I've created ticket http://trac.osgeo.org/gdal/ticket/3314 with a few
> errors detected by Valgrind

[...]

Martin

-- 
Martin Landa <landa.martin gmail.com> * http://gama.fsv.cvut.cz/~landa
From srweal at gmail.com  Fri Jan  8 00:41:56 2010
From: srweal at gmail.com (srweal)
Date: Fri Jan  8 00:41:58 2010
Subject: [Gdal-dev] ECW Hanging
Message-ID: <1262929316343-4270724.post@n2.nabble.com>


Hi,

I'm experiencing intermittent problems running the FWTools 2.2.6 version of
GDAL, including ECW support.  

I'm using the library to render maps (or map tiles) produced using the
SharpMap library, an open-source mapping library written in C#.NET. 
SharpMap access the standard GDAL operations via a wrapper, but this is not
where the problem lies.

I am rendering the ECW maps/tiles out through a web application running
under IIS6.0 and this works fine most of the time, but there are times when
the ECW library hangs.

I've identified this using Process Monitor, which shows that when all is
going well and the ECW files are being read, the calls to GDAL run an
IRP_MJ_CREATE operation on the system kernel to open the files
NCSUtil_fw.dll, NCSEcw_fw.dll.  Then the process seems to read from the
source ECW using gdal_fw.dll.

However, when the rendering hangs and I investigate Process Monitor, all
that gets listed is a 'Thread Create' which runs NCSUtil_fw.dll.  There is
no subsequent references to NCSEcw_fw.dll, gdal_fw.dll or anything similar. 
Instead, this thread stays open and every 40 seconds there are other threads
opened and then closed that just refer to main kernel files (i.e. no ECW
references in them).  This hangs indefinitely, which in turn causes my web
apps to hang (and because no error gets thrown or the process is completely
inactive, automatically rebooting them is tricky). 

I'm trying to understand what is happening when this occurs and would
appreciate some further guidance on what the issue might be here and a
potential way around it.  I had thought it was an issue with using a 64bit
operating system, but have moved all my applications onto 32bit and have
just discovered this problem is still occurring (but not as frequently as on
the 64bit system).  

I would love to hear from anyone who's had issues with the ECW library in a
similar way and got around them (or avoided them somehow).  Unfortunately,
due to file sizes, other file formats like TIF are not feasible.  

Thanks, Steve
-- 
View this message in context: http://n2.nabble.com/ECW-Hanging-tp4270724p4270724.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Fri Jan  8 02:21:33 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan  8 02:22:09 2010
Subject: [Gdal-dev] ECW Hanging
In-Reply-To: <1262929316343-4270724.post@n2.nabble.com>
References: <1262929316343-4270724.post@n2.nabble.com>
Message-ID: <4B46DCFD.1060001@pobox.com>

srweal wrote:
> Hi,
> 
> I'm experiencing intermittent problems running the FWTools 2.2.6 version of
> GDAL, including ECW support.  

Steve,

Generally speaking, I have also had problems with the ECW support in
FWTools.  FWTools is built with a sort of custom copy of the ECW SDK
I hacked together a build for.  I think that may relate to the problem.

I would encourage you to try using OSGeo4W with the ECW plugin instead.
It uses the ECW SDK as distributed by Leica and hopefully will be more
stable.

   http://trac.osgeo.org/osgeo4w/wiki/pkg-gdal-ecw

Also of possible interest, but unlikely related to your particular problem
is this bug I worked on just this week.

   http://trac.osgeo.org/mapserver/ticket/3245

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From szekerest at gmail.com  Fri Jan  8 08:23:47 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Fri Jan  8 08:23:51 2010
Subject: [Gdal-dev] ECW Hanging
In-Reply-To: <1262929316343-4270724.post@n2.nabble.com>
References: <1262929316343-4270724.post@n2.nabble.com>
Message-ID: <f3b73b7d1001080523p318cb9cfx81f52d8db111caa8@mail.gmail.com>

Steve,

As far as I remember there have been a couple of mysterius problems with the
ECW SDK interfacing with gdal and mapserver which haven't yet been solved,
and the current ms4w distribution doesn't even include ECW support because
of such reason.

I have an impression that many of these issues could be better investigated
by compiling the ECW SDK in debug mode. Once the application is hanging you
may attach a debugger and inspect the call stack for each thread which would
probably help in localizing the problem.

Compiling the SDK in debug mode is pretty straightforward which is included
as an option in the Visual Studio solution (in Source\NCSBuildQmake).
If you have this debug version then you could recompile gdal easily by using
the corresponding build package available from here:
http://vbkto.dyndns.org/sdk/

You may also inspect the precompiled packages from the location above which
all provided with the ECW plugin to test with.

Unfortunately it seems like these problems are falling pretty much out of
scope of our current activities in gdal to spend much time in debugging into
external libraries like ECW and fix their problems externally. If you feel
enough willingness to do so, we greatly accept any contribution to improve
our gdal binary distributions.


Best regards,

Tamas





2010/1/8 srweal <srweal@gmail.com>

>
> Hi,
>
> I'm experiencing intermittent problems running the FWTools 2.2.6 version of
> GDAL, including ECW support.
>
> I'm using the library to render maps (or map tiles) produced using the
> SharpMap library, an open-source mapping library written in C#.NET.
> SharpMap access the standard GDAL operations via a wrapper, but this is not
> where the problem lies.
>
> I am rendering the ECW maps/tiles out through a web application running
> under IIS6.0 and this works fine most of the time, but there are times when
> the ECW library hangs.
>
> I've identified this using Process Monitor, which shows that when all is
> going well and the ECW files are being read, the calls to GDAL run an
> IRP_MJ_CREATE operation on the system kernel to open the files
> NCSUtil_fw.dll, NCSEcw_fw.dll.  Then the process seems to read from the
> source ECW using gdal_fw.dll.
>
> However, when the rendering hangs and I investigate Process Monitor, all
> that gets listed is a 'Thread Create' which runs NCSUtil_fw.dll.  There is
> no subsequent references to NCSEcw_fw.dll, gdal_fw.dll or anything similar.
> Instead, this thread stays open and every 40 seconds there are other
> threads
> opened and then closed that just refer to main kernel files (i.e. no ECW
> references in them).  This hangs indefinitely, which in turn causes my web
> apps to hang (and because no error gets thrown or the process is completely
> inactive, automatically rebooting them is tricky).
>
> I'm trying to understand what is happening when this occurs and would
> appreciate some further guidance on what the issue might be here and a
> potential way around it.  I had thought it was an issue with using a 64bit
> operating system, but have moved all my applications onto 32bit and have
> just discovered this problem is still occurring (but not as frequently as
> on
> the 64bit system).
>
> I would love to hear from anyone who's had issues with the ECW library in a
> similar way and got around them (or avoided them somehow).  Unfortunately,
> due to file sizes, other file formats like TIF are not feasible.
>
> Thanks, Steve
> --
> View this message in context:
> http://n2.nabble.com/ECW-Hanging-tp4270724p4270724.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100108/0cc93cfb/attachment.html
From gregcoats at mac.com  Fri Jan  8 12:46:45 2010
From: gregcoats at mac.com (Greg Coats)
Date: Fri Jan  8 12:47:10 2010
Subject: [Gdal-dev] ECW Hanging
In-Reply-To: <1262929316343-4270724.post@n2.nabble.com>
References: <1262929316343-4270724.post@n2.nabble.com>
Message-ID: <7EE05D1C-E2C4-4CB4-ACF1-F346E0B0A241@mac.com>

Since GDAL supports BigTiff, there is no practical limit on GDAL .tif file size. Also, with Kakadu JPEG2000 there is no practical limit on .jp2 file size. Greg

On Jan 8, 2010, at 12:41 AM, srweal wrote:

> Unfortunately, due to file sizes, other file formats like TIF are not feasible.  

From mateusz at loskot.net  Sat Jan  9 10:36:35 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan  9 10:36:52 2010
Subject: [gdal-dev] JasPer issues on Ubuntu 9.10
Message-ID: <4B48A283.9090900@loskot.net>

Folks,

Users of Ubuntu 9.10 who use JasPer runtime may be interested of
bug report asking to backport fix for GeoJP2 problem  to Ubuntu 9.10
(in development Lynx it seems to be fixed):

https://bugs.launchpad.net/ubuntu/+source/jasper/+bug/505173

I have no idea what is Ubuntu policy regarding this,
but may be the patch will be fixed (perhaps Ubuntu/GIS
community response would help in this)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Sat Jan  9 15:19:31 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan  9 15:19:39 2010
Subject: [gdal-dev] Simplifying malloc'action with simple templates
Message-ID: <4B48E4D3.2060808@loskot.net>

Folks,

The CPLMalloc and related functions are widely settled, but as
wrappers on std::malloc, they do not make it simpler to use in C++
files, so GDAL code could be more readable. These functions
still require explicit casts.

It is possible to simplify use of them, at least in source files
compiled in C++ mode, by introducing some

/// Option 1 ///////////////////////////////////////////////////////

template <typename T>
T* CPLMallocT(std::size_t const size)
{
    // sizeof(T) * size or al size
    return static_cast<T*>(CPLMalloc(size(T) * size));
}

It's usage gets rid of cast, but still requires type
specified explicitly:

T* p = CPLMallocT<T>(20);

Another variation if flexibility of size of allocation is needed:

template <typename T>
T* CPLMallocT(std::size_t const n, std::size_t const size = sizeof(T))
{
    return static_cast<T*>(CPLMalloc(n * size));
}

int* p1 = CPLMallocT<int>(10);
int* p2 = CPLMallocT<int>(10, 4);

// Option 2 ///////////////////////////////////////////////////////

template <typename T>
void CPLMallocT(T*& ptr, std::size_t const size)
{
    ptr = static_cast<T*>(CPLMalloc(sizeof(T) * size));
}


It removes cast as well as type is resolved by compiler

CPLMallocT(p, 10);


// Option 3 ///////////////////////////////////////////////////////

template <typename T>
T*& CPLMallocT(T*& ptr, std::size_t const size)
{
    ptr = static_cast<T*>(std::malloc(sizeof(T) * size));
    return ptr;
}

This one works as combination of the two above,
removes cast, resolves type, but here pointer is passed
as extra argument to the function:

T* p = 0;

p = CPLMallocT(p, 10);

or

CPLMallocT(p, 10);


IMHO, such functions simplify allocation call, make code more readable,
prevent from spreading large number of casts around by keeping it in
single place. It also may simplify further maintenance, if option 3 is
used, because if T changes, it enough to type of pointer in place of its
declaration, i.e. float* to double* for array.



Yet another version CPLMallocT could take no argument but type only:

template <typename T>
T* CPLMallocT()
{
    return static_cast<T*>(CPLMalloc(size(T)));
}

then allocation like this:

cur = (GDALProxyPoolCacheEntry*) CPLMalloc(sizeof(GDALProxyPoolCacheEntry));

becomes

cur = CPLMallocT<GDALProxyPoolCacheEntry>();


The latter is simpler and intentions are more obvious to
reader - allocate memory for single of object of given type.

If there would be interest in such utilities, I can commit it to
trunk and refactor code.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Sat Jan  9 16:12:34 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan  9 16:12:46 2010
Subject: [gdal-dev] Simplifying malloc'action with simple templates
In-Reply-To: <155EC83A-4363-4F37-AE02-93B70977014C@cowpig.ca>
References: <4B48E4D3.2060808@loskot.net>
	<155EC83A-4363-4F37-AE02-93B70977014C@cowpig.ca>
Message-ID: <4B48F142.2030804@loskot.net>

Philippe Vachon wrote:
> Hi Mateusz,
> 
> I would actually wonder if a solution like this would work:
> 
> /// @brief Allocate memory on the heap and return a pointer of type T.
> /// @param ptr pointer to be populated to the allocated memory
> /// @param size the size of a single object to be allocated (or of the entire region)
> /// @param nmemb optional, the number of regions to be allocated. The resulting region would be size * nmemb.
> /// ...
> template <typename T>
> T *CPLMallocT(T*& ptr, std::size_t const size = sizeof(T), std::size_t const nmemb = 1) { ... }
> 
> This would enable replacing the VSIMalloc* routines (the ones that check for
> argument wraparound) with a single unified interface,
> and implicitly enable the last version of CPLMallocT that you
> proposed. So long as malloc() is still used under the hood,
> I presume {VSI,CPL}Free() will still behave as before.

Yes, it would work, or as this version:

template <typename T>
T* CPLMallocT(std::size_t const n = 1, std::size_t const size = sizeof(T))
{
   return static_cast<T*>(CPLMalloc(n * size));
}

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From philippe at cowpig.ca  Sat Jan  9 16:05:00 2010
From: philippe at cowpig.ca (Philippe Vachon)
Date: Sat Jan  9 16:30:40 2010
Subject: [gdal-dev] Simplifying malloc'action with simple templates
In-Reply-To: <4B48E4D3.2060808@loskot.net>
References: <4B48E4D3.2060808@loskot.net>
Message-ID: <155EC83A-4363-4F37-AE02-93B70977014C@cowpig.ca>

Hi Mateusz,

I would actually wonder if a solution like this would work:

/// @brief Allocate memory on the heap and return a pointer of type T.
/// @param ptr pointer to be populated to the allocated memory
/// @param size the size of a single object to be allocated (or of the entire region)
/// @param nmemb optional, the number of regions to be allocated. The resulting region would be size * nmemb.
/// ...
template <typename T>
T *CPLMallocT(T*& ptr, std::size_t const size = sizeof(T), std::size_t const nmemb = 1) { ... }

This would enable replacing the VSIMalloc* routines (the ones that check for argument wraparound) with a single unified interface, and implicitly enable the last version of CPLMallocT that you proposed. So long as malloc() is still used under the hood, I presume {VSI,CPL}Free() will still behave as before.

Cheers,
Phil

On 2010-01-09, at 3:19 PM, Mateusz Loskot wrote:

> Folks,
> 
> The CPLMalloc and related functions are widely settled, but as
> wrappers on std::malloc, they do not make it simpler to use in C++
> files, so GDAL code could be more readable. These functions
> still require explicit casts.
> 
> It is possible to simplify use of them, at least in source files
> compiled in C++ mode, by introducing some
> 
> /// Option 1 ///////////////////////////////////////////////////////
> 
> template <typename T>
> T* CPLMallocT(std::size_t const size)
> {
>    // sizeof(T) * size or al size
>    return static_cast<T*>(CPLMalloc(size(T) * size));
> }
> 
> It's usage gets rid of cast, but still requires type
> specified explicitly:
> 
> T* p = CPLMallocT<T>(20);
> 
> Another variation if flexibility of size of allocation is needed:
> 
> template <typename T>
> T* CPLMallocT(std::size_t const n, std::size_t const size = sizeof(T))
> {
>    return static_cast<T*>(CPLMalloc(n * size));
> }
> 
> int* p1 = CPLMallocT<int>(10);
> int* p2 = CPLMallocT<int>(10, 4);
> 
> // Option 2 ///////////////////////////////////////////////////////
> 
> template <typename T>
> void CPLMallocT(T*& ptr, std::size_t const size)
> {
>    ptr = static_cast<T*>(CPLMalloc(sizeof(T) * size));
> }
> 
> 
> It removes cast as well as type is resolved by compiler
> 
> CPLMallocT(p, 10);
> 
> 
> // Option 3 ///////////////////////////////////////////////////////
> 
> template <typename T>
> T*& CPLMallocT(T*& ptr, std::size_t const size)
> {
>    ptr = static_cast<T*>(std::malloc(sizeof(T) * size));
>    return ptr;
> }
> 
> This one works as combination of the two above,
> removes cast, resolves type, but here pointer is passed
> as extra argument to the function:
> 
> T* p = 0;
> 
> p = CPLMallocT(p, 10);
> 
> or
> 
> CPLMallocT(p, 10);
> 
> 
> IMHO, such functions simplify allocation call, make code more readable,
> prevent from spreading large number of casts around by keeping it in
> single place. It also may simplify further maintenance, if option 3 is
> used, because if T changes, it enough to type of pointer in place of its
> declaration, i.e. float* to double* for array.
> 
> 
> 
> Yet another version CPLMallocT could take no argument but type only:
> 
> template <typename T>
> T* CPLMallocT()
> {
>    return static_cast<T*>(CPLMalloc(size(T)));
> }
> 
> then allocation like this:
> 
> cur = (GDALProxyPoolCacheEntry*) CPLMalloc(sizeof(GDALProxyPoolCacheEntry));
> 
> becomes
> 
> cur = CPLMallocT<GDALProxyPoolCacheEntry>();
> 
> 
> The latter is simpler and intentions are more obvious to
> reader - allocate memory for single of object of given type.
> 
> If there would be interest in such utilities, I can commit it to
> trunk and refactor code.
> 
> Best regards,
> -- 
> Mateusz Loskot, http://mateusz.loskot.net
> Charter Member of OSGeo, http://osgeo.org
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mitchelljj98 at gmail.com  Sun Jan 10 10:47:54 2010
From: mitchelljj98 at gmail.com (John Mitchell)
Date: Sun Jan 10 10:47:57 2010
Subject: [gdal-dev] Is their a way by using the bounding box and the png to
	convert it into a geotiff?
Message-ID: <fa2ac0581001100747o4630400cq210cafdefc8c83ab@mail.gmail.com>

When trying to convert a png to geotiff which is listed below:

*gdalwarp -s_srs epsg:4326 -t_srs
 epsg:4326 "C:\Documents and
Settings\jmitchell.INSEQUENCE2\Desktop\ows2121.png"
 "C:\Documents and Settings\jmitchell.INSEQUENCE2\Desktop\ows2121.tif"*

I get the following error:

*ERROR 1: Unable to compute a transformation between pixel/line
and georeferenced coordinates for C:\Documents and
Settings\jmitchell.INSEQUENCE
2\Desktop\ows2121.png.
There is no affine transformation and no GCPs.*

I have the coordinate bounding box that was used to create the original png.

Is their a way by using the bounding box and the png to convert it into a
geotiff?

Thanks,

John




-- 
John J. Mitchell
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100110/aba55802/attachment.html
From mateusz at loskot.net  Sun Jan 10 10:58:39 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jan 10 10:59:11 2010
Subject: [gdal-dev] Is their a way by using the bounding box and the 
	png to convert it into a geotiff?
In-Reply-To: <fa2ac0581001100747o4630400cq210cafdefc8c83ab@mail.gmail.com>
References: <fa2ac0581001100747o4630400cq210cafdefc8c83ab@mail.gmail.com>
Message-ID: <36841.94.5.42.225.1263139119.squirrel@loskot.net>

John Mitchell wrote:
> When trying to convert a png to geotiff which is listed below:
>
> *gdalwarp -s_srs epsg:4326 -t_srs
>  epsg:4326 "C:\Documents and
> Settings\jmitchell.INSEQUENCE2\Desktop\ows2121.png"
>  "C:\Documents and Settings\jmitchell.INSEQUENCE2\Desktop\ows2121.tif"*
>
> I get the following error:
>
> *ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for C:\Documents and
> Settings\jmitchell.INSEQUENCE
> 2\Desktop\ows2121.png.
> There is no affine transformation and no GCPs.*
>
> I have the coordinate bounding box that was used to create the original
> png.

Try this command:

http://trac.osgeo.org/gdal/wiki/FAQRaster#HowtomakeGeoTIFFfromTIFF

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From even.rouault at mines-paris.org  Sun Jan 10 11:02:09 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sun Jan 10 11:02:11 2010
Subject: [gdal-dev] Is their a way by using the bounding box and the png
	to	convert it into a geotiff?
In-Reply-To: <fa2ac0581001100747o4630400cq210cafdefc8c83ab@mail.gmail.com>
References: <fa2ac0581001100747o4630400cq210cafdefc8c83ab@mail.gmail.com>
Message-ID: <4B49FA01.5010100@mines-paris.org>

John,

You should rather use "gdal_translate -a_srs EPSG:4326 -a_ullr ulx uly 
lrx lry src.png dst.tif" to set the coordinates of the upper left (ulx, 
uly) and lower right corners (lrx,lry) of your PNG. See 
http://gdal.org/gdal_translate.html

John Mitchell a ?crit :
> When trying to convert a png to geotiff which is listed below:
>
> /gdalwarp -s_srs epsg:4326 -t_srs
>  epsg:4326 "C:\Documents and 
> Settings\jmitchell.INSEQUENCE2\Desktop\ows2121.png"
>  "C:\Documents and Settings\jmitchell.INSEQUENCE2\Desktop\ows2121.tif"/
>
> I get the following error:
>
> /ERROR 1: Unable to compute a transformation between pixel/line
> and georeferenced coordinates for C:\Documents and 
> Settings\jmitchell.INSEQUENCE
> 2\Desktop\ows2121.png.
> There is no affine transformation and no GCPs./
>
> I have the coordinate bounding box that was used to create the 
> original png.
>
> Is their a way by using the bounding box and the png to convert it 
> into a geotiff?
>
> Thanks,
>
> John
>
>
>
>
> -- 
> John J. Mitchell
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Mon Jan 11 00:26:01 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 00:26:00 2010
Subject: [gdal-dev] GDAL/OGR 1.7.0 beta 2 packaged for testing.
Message-ID: <4B4AB669.1040509@pobox.com>

Folks,

I have packaged GDAL/OGR 1.7.0 beta2 for testing.

   http://download.osgeo.org/gdal/gdal-1.7.0b2.tar.gz
   http://download.osgeo.org/gdal/gdal170b2.zip
   http://download.osgeo.org/gdal/gdalautotest-1.7.0b2.zip

The NEWS file is at:

   http://svn.osgeo.org/gdal/trunk/gdal/NEWS

Feedback as tickets or otherwise is welcome.  It is my personal hope
to finalize the 1.7.0 release before the end of the month.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From vvvjjj0 at yahoo.co.in  Mon Jan 11 07:00:42 2010
From: vvvjjj0 at yahoo.co.in (vvv jjj)
Date: Mon Jan 11 07:07:31 2010
Subject: [gdal-dev] Distance Measurement
Message-ID: <307608.81531.qm@web95213.mail.in2.yahoo.com>

Hi,

How do I compute distance between 2 points in a GeoTiff Image using GDAL. To be more specific I have a GeoTiff image file and 2 points (x, y position which tell about the image position points). Can I get the distance between the 2 points (for the given projection of input file) using GDAL in mts. I'm new to projection related stuff so could not be that clear in explaining my question. Let me know if I missed anything.

Thanks and Regards
J.Viswanath


      The INTERNET now has a personality. YOURS! See your Yahoo! Homepage. http://in.yahoo.com/
From Gary.Smart at goodrich.com  Mon Jan 11 12:50:08 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Mon Jan 11 13:09:02 2010
Subject: [gdal-dev] geoTransforms and OGRSpatialTransforms
In-Reply-To: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>
Message-ID: <F52876411F027A4FA646577165F65C16112A36@NHC2EX13.goodrich.root.local>

Well, part of the problem seems to be that I was addressing a symbolic
link to the file and not the actual file itself.

Now that I'm addressing the file directly, BOTH files manage to create
the geo transform BUT NEITHER can generate the coordinate transformation
object (OGRCoordinateTransformation) .  Can anyone tell me why both
files give me the following message...?

 

ERROR 1:  No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.

 

I am using Linux SLES10 SP2, gdal-svn-trunk-2009.12.14 and
proj4-4.7.0-1.

 

Gary 

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Smart, Gary
Sent: 07 January 2010 18:25
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] geoTransforms and OGRSpatialTransforms

 

  // First create a spatial reference in the input space
  OGRSpatialReference iref;
  char *tmp = NULL;
  if (proj_ref)
  {
    tmp = (char *)malloc(strlen(proj_ref)+1);
    iref.importFromWkt(&tmp);
    //iref.SetWellKnownGeogCS("WGS84");

    // Create a spatial reference in WGS84 lat/long space and
    // create a transform object between input and output space
    OGRSpatialReference oref;
    oref.SetWellKnownGeogCS("WGS84");
    OGRCoordinateTransformation *coord_transform
      = OGRCreateCoordinateTransformation(&iref, &oref);
    if (!coord_transform)
    {
      fprintf(stderr, "!!!FAILED! Cannot create converter from %s "
              " to WGS84\n", proj_ref);

    } // end case default
    free(tmp);



 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100111/7fa0035d/attachment.html
From ekkehart at gmx.de  Mon Jan 11 15:11:43 2010
From: ekkehart at gmx.de (NopMap)
Date: Mon Jan 11 15:11:44 2010
Subject: [Gdal-dev] Problem with gdal_translate
Message-ID: <1263240703167-4287843.post@n2.nabble.com>



Hi!

I am trying to make a GeoTiff a little bit smaller with gdal_translate.

Gdalinfo shows that the TIF has the following size:
Upper Left  ( 1102062.959, 6818226.972) (  9d54'0.00"E, 52d 6'0.00"N)
Lower Right ( 1692080.162, 6257943.762) ( 15d12'0.77"E, 48d54'0.71"N)

I call
gdal_translate -projwin 9.91 52.09 15.19 48.91 in.tif out.tif

The coordinates should be within the bounds of the TIF, but I get the error
Input file size is 7719, 7330
Computed -srcwin -14417 89199 0 0 from projected window.
Computed -srcwin falls outside raster size of 7719x7330.

What am I doing wrong?
Is there another/better way to do this?

thanks
              Nop


-- 
View this message in context: http://n2.nabble.com/Problem-with-gdal-translate-tp4287843p4287843.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Mon Jan 11 15:24:28 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 15:24:30 2010
Subject: [Gdal-dev] Problem with gdal_translate
In-Reply-To: <1263240703167-4287843.post@n2.nabble.com>
References: <1263240703167-4287843.post@n2.nabble.com>
Message-ID: <4B4B88FC.4020006@pobox.com>

NopMap wrote:
> 
> Hi!
> 
> I am trying to make a GeoTiff a little bit smaller with gdal_translate.
> 
> Gdalinfo shows that the TIF has the following size:
> Upper Left  ( 1102062.959, 6818226.972) (  9d54'0.00"E, 52d 6'0.00"N)
> Lower Right ( 1692080.162, 6257943.762) ( 15d12'0.77"E, 48d54'0.71"N)
> 
> I call
> gdal_translate -projwin 9.91 52.09 15.19 48.91 in.tif out.tif
> 
> The coordinates should be within the bounds of the TIF, but I get the error
> Input file size is 7719, 7330
> Computed -srcwin -14417 89199 0 0 from projected window.
> Computed -srcwin falls outside raster size of 7719x7330.
> 
> What am I doing wrong?
> Is there another/better way to do this?

Nop,

You need to specify the corners in the coordinate system of the
image.  So the values should be the meter based projected coordinates
like 1102062,6818226.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ekkehart at gmx.de  Mon Jan 11 15:29:56 2010
From: ekkehart at gmx.de (NopMap)
Date: Mon Jan 11 15:29:58 2010
Subject: [Gdal-dev] Problem with gdal_translate
In-Reply-To: <4B4B88FC.4020006@pobox.com>
References: <1263240703167-4287843.post@n2.nabble.com>
	<4B4B88FC.4020006@pobox.com>
Message-ID: <1263241796383-4287956.post@n2.nabble.com>



Hi!


Frank Warmerdam wrote:
> 
> You need to specify the corners in the coordinate system of the
> image.  So the values should be the meter based projected coordinates
> like 1102062,6818226.
> 

Is this also true for -projwin? From the documentation I got the impression
that -srcwin requires meters while -projwin accepted the coordinates in
lat/lon??

bye
          Nop

-- 
View this message in context: http://n2.nabble.com/Problem-with-gdal-translate-tp4287843p4287956.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From warmerdam at pobox.com  Mon Jan 11 15:33:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 15:33:55 2010
Subject: [Gdal-dev] Problem with gdal_translate
In-Reply-To: <1263241796383-4287956.post@n2.nabble.com>
References: <1263240703167-4287843.post@n2.nabble.com>
	<4B4B88FC.4020006@pobox.com> <1263241796383-4287956.post@n2.nabble.com>
Message-ID: <4B4B8B35.1090802@pobox.com>

NopMap wrote:
> 
> Hi!
> 
> 
> Frank Warmerdam wrote:
>> You need to specify the corners in the coordinate system of the
>> image.  So the values should be the meter based projected coordinates
>> like 1102062,6818226.
>>
> 
> Is this also true for -projwin? From the documentation I got the impression
> that -srcwin requires meters while -projwin accepted the coordinates in
> lat/lon??

Nop,

-srcwin takes the locations in pixel/line coordinate system.  -projwin
takes it in the coordinate system of the image, which might be projected
or geographic depending on the image.  But from the gdalinfo report I can
see your image is projected.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mgdenno at gmail.com  Mon Jan 11 16:09:45 2010
From: mgdenno at gmail.com (Matthew Denno)
Date: Mon Jan 11 16:09:47 2010
Subject: [gdal-dev] Optional Arguments in Function
Message-ID: <633be2251001111309ycc7a8a1rf31403c26f8630ba@mail.gmail.com>

Hello,

I have a question about writing a function which uses OGR and I am
hoping someone can point me in the right direction.

I am trying to write a function that takes a few OGRFeatures as
arguments.  However I want one of them to be optional.  I was hoping
to do something like the following but it does not appear to be valid:

int add_to_dt(OGRFeature &inputFeature, OGRFeature &optionalMask = NULL)
{
      if ( ! optionalMask == NULL)
      {
            //use mask
      }
      else
      {
            //don't use mask
      }
}

What would be the proper way to do something like this?

Thanks,

Matt
From ramirogonzalez at suremptec.com.ar  Mon Jan 11 16:31:38 2010
From: ramirogonzalez at suremptec.com.ar (Ramiro Gonzalez)
Date: Mon Jan 11 16:31:41 2010
Subject: [gdal-dev] Check if a vector is open by other application
Message-ID: <38b082f61001111331h7dfbc7ack14fc657d5af090fc@mail.gmail.com>

Hello

I am using OGR to open "ESRI Shapefiles" and show the content of the .dbf
file. If the file is already open by other application(ie: Excel) and I ask
for the number of fields:

....
int fieldcount = layer->GetLayerDefn()->GetFieldCount();
I get 'fieldcount == 0'.

I`d like to know if there is a way to know if the .dbf is already open by
other application.

Thanks

OS: WinXp
COMPILER:  mingw
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100111/25188beb/attachment-0001.html
From ekkehart at gmx.de  Mon Jan 11 17:09:03 2010
From: ekkehart at gmx.de (NopMap)
Date: Mon Jan 11 17:09:05 2010
Subject: [Gdal-dev] Problem with gdal_translate
In-Reply-To: <4B4B8B35.1090802@pobox.com>
References: <1263240703167-4287843.post@n2.nabble.com>
	<4B4B88FC.4020006@pobox.com>
	<1263241796383-4287956.post@n2.nabble.com>
	<4B4B8B35.1090802@pobox.com>
Message-ID: <1263247743796-4288482.post@n2.nabble.com>



Hi!


Frank Warmerdam wrote:
> 
> NopMap wrote:
>> Is this also true for -projwin? From the documentation I got the
>> impression
>> that -srcwin requires meters while -projwin accepted the coordinates in
>> lat/lon??
> 
> -srcwin takes the locations in pixel/line coordinate system.  -projwin
> takes it in the coordinate system of the image, which might be projected
> or geographic depending on the image.  But from the gdalinfo report I can
> see your image is projected.
> 

Ah, I understand. Now it is working. Thank you.

          Nop

-- 
View this message in context: http://n2.nabble.com/Problem-with-gdal-translate-tp4287843p4288482.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jason.roberts at duke.edu  Mon Jan 11 17:32:18 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Mon Jan 11 17:33:52 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
Message-ID: <005201ca930d$efb5afc0$cf210f40$@roberts@duke.edu>

Dear geospatial software experts,

 

By integrating with GEOS, OGR can perform various spatial operations on
individual geometries, such as buffer, intersection, union, and so on. Is
there a library that efficiently performs these kinds of operations on
entire OGRLayers? For example, this library would have functions that would
buffer all of the features in a layer, or intersect all of the features in
one layer with all of those in another. Basically, I am looking for an open
source technology that replicates the "geoprocessing tools" found in ArcGIS
and other GIS packages. These tools traditionally operate on one or more
layers as input and produce one or more layers as output.

 

If such a library does not exist, does the OGR team envision that they might
add such capabilities to OGR in the future? From software design and
performance points of view, would it be appropriate to extend OGR to include
functions for spatial operations on entire layers, or is this best left to
other libraries? I can see rudimentary ways to implement such tools (e.g.
for intersecting layers: loop over all features in both layers, calling
OGRGeometry::Touches on all combinations, or something similar). But I am
not a geometry expert and do not know if OGRLayer's cursor-based design is
compatible with such capabilities; I do not know about spatial indexing, for
example.

 

I develop open source geoprocessing tools that help with spatial ecology
problems. At the moment, my tools depend on heavily on ArcGIS for these
operations with vector layers. I would like to remove this dependency, and,
if possible, develop a toolbox that exposes the same ecology tools to
several GIS packages. Many GIS packages, such as ArcGIS, QGIS, MapWindow,
and OpenJump, support plugin extensions. I am wondering whether how
difficult it would be to develop a package of tools that does not depend on
a specific GIS package but exposes them to several packages via the
package-specific plugin mechanisms. For this to work, I'd have to find a
library that can do the kind of geoprocessing with layers that ArcGIS can
do, or write my own. Writing it myself sounds daunting and am hoping that
there are existing projects to draw from.

 

Thank you very much for any comments you can provide.

 

Jason

 

 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100111/43e9e059/attachment.html
From warmerdam at pobox.com  Mon Jan 11 18:00:03 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 18:00:01 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <005201ca930d$efb5afc0$cf210f40$@roberts@duke.edu>
References: <005201ca930d$efb5afc0$cf210f40$@roberts@duke.edu>
Message-ID: <4B4BAD73.9060003@pobox.com>

Jason Roberts wrote:
> Dear geospatial software experts,
> 
>  
> 
> By integrating with GEOS, OGR can perform various spatial operations on 
> individual geometries, such as buffer, intersection, union, and so on. 
> Is there a library that efficiently performs these kinds of operations 
> on entire OGRLayers? For example, this library would have functions that 
> would buffer all of the features in a layer, or intersect all of the 
> features in one layer with all of those in another. Basically, I am 
> looking for an open source technology that replicates the "geoprocessing 
> tools" found in ArcGIS and other GIS packages. These tools traditionally 
> operate on one or more layers as input and produce one or more layers as 
> output.

Jason,

I'd like to see something along this line happen.  I to do it efficiently
it would be necessary to dig into GEOS past the C interface so that
a spatial index on a collection of features can be maintained over time
rather than created and discarded for each pairwise test of two geometries.

I am somewhat hesitant to have this sort of processing go into GDAL/OGR
itself, especially as an extensive set of methods on OGRLayer.  I think
it could be done as a layered processing library without any noticable
loss of performance.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From apachemaven0 at gmail.com  Mon Jan 11 20:58:06 2010
From: apachemaven0 at gmail.com (maven apache)
Date: Mon Jan 11 20:58:10 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
Message-ID: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>

Hi:
I have some hdf5 data and I want to change the subdataset to geotiff, and I
use gdalinfo to get the subdataset name and then I use "gdal_translate
subdatasetname result.tif".
However  I found that the crs of the generated tif is not recognized by the
arcgis,then I want to know why so I create a new tif by arcgis(here it is
named arcgis.tif,and the coordinate system is wgs84). Then I use gdalinfo
command to get the metadata of the arcgis.tif and compare it with the tif
generated by gdal(here I call it gdal.tif). Then I found that the Coordinate
are the same as the following:
--------------------------
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235630016,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
------------------------------
the difference is the *Corner Coordinates*:
the arcgis.tif is :
-------------------
Corner Coordinates:
Upper Left  ( 103.8438587,  28.6769083) (103d50'37.89"E, 28d40'36.87"N)
Lower Left  ( 103.8438587,  28.6668077) (103d50'37.89"E, 28d40'0.51"N)
Upper Right ( 103.8546032,  28.6769083) (103d51'16.57"E, 28d40'36.87"N)
Lower Right ( 103.8546032,  28.6668077) (103d51'16.57"E, 28d40'0.51"N)
Center      ( 103.8492310,  28.6718580) (103d50'57.23"E, 28d40'18.69"N)
------------------
the gdal.tif is :
----------------
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  720.0)
Upper Right ( 1440.0,    0.0)
Lower Right ( 1440.0,  720.0)
Center      (  720.0,  360.0)
------------------------
It seems that the bbox is defined by different manner , the arcgis.tif is by
Degrees minutes and seconds and the gdal.tif is by grid of some other?

I wonder how to solve this problem?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/507377eb/attachment.html
From warmerdam at pobox.com  Mon Jan 11 21:25:45 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 21:25:40 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
Message-ID: <4B4BDDA9.3090804@pobox.com>

maven apache wrote:
> the gdal.tif is :
> ----------------
> Corner Coordinates:
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  720.0)
> Upper Right ( 1440.0,    0.0)
> Lower Right ( 1440.0,  720.0)
> Center      (  720.0,  360.0)
> ------------------------
> It seems that the bbox is defined by different manner , the arcgis.tif 
> is by Degrees minutes and seconds and the gdal.tif is by grid of some other?
> 
> I wonder how to solve this problem?

Hi,

It appears that the gdal.tif file is not georeferenced.  The
values you see are just pixel/line coordinates.  Did the
subdataset appear to have reasonable georeferencing in
the HDF file?  I presume there is some problem with the hdf
driver extracting the georeferencing properly for this
particular dataset.

Bestregards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From apachemaven0 at gmail.com  Mon Jan 11 21:50:04 2010
From: apachemaven0 at gmail.com (maven apache)
Date: Mon Jan 11 21:50:08 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <4B4BDDA9.3090804@pobox.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
Message-ID: <b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>

2010/1/12 Frank Warmerdam <warmerdam@pobox.com>

> maven apache wrote:
> > the gdal.tif is :
> > ----------------
> > Corner Coordinates:
> > Upper Left  (    0.0,    0.0)
> > Lower Left  (    0.0,  720.0)
> > Upper Right ( 1440.0,    0.0)
> > Lower Right ( 1440.0,  720.0)
> > Center      (  720.0,  360.0)
> > ------------------------
> > It seems that the bbox is defined by different manner , the arcgis.tif
> > is by Degrees minutes and seconds and the gdal.tif is by grid of some
> other?
> >
> > I wonder how to solve this problem?
>
> Hi,
>
> It appears that the gdal.tif file is not georeferenced.  The
> values you see are just pixel/line coordinates.  Did the
> subdataset appear to have reasonable georeferencing in
> the HDF file?  I presume there is some problem with the hdf
> driver extracting the georeferencing properly for this
> particular dataset.
>
> :(.
I just check the hdf5 file and I found that the  Corner Coordinates of one
subdataset is not the same as that of the hdf5 file.

I use "gdalinfo aa.he5" and the coordinate is :
----------------------------
 Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  512.0)
Upper Right (  512.0,    0.0)
Lower Right (  512.0,  512.0)
Center      (  256.0,  256.0)
--------------------------------
and one of the subdatasets if named
[HDF5:"d24.he5"://HDFEOS/GRIDS/ColumnAmountO3/Data_Fields/GhostColumnAmountO3].
Then I got its coordinate is :
---------------------------
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  720.0)
Upper Right ( 1440.0,    0.0)
Lower Right ( 1440.0,  720.0)
Center      (  720.0,  360.0)
---------------------------
 Does that mean the gdal can not handle the hdf5 data?

> Bestregards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/c0ed0b27/attachment-0001.html
From warmerdam at pobox.com  Mon Jan 11 21:56:05 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 21:56:02 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
	<b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
Message-ID: <4B4BE4C5.7030309@pobox.com>

maven apache wrote:
> Then I got its coordinate is :
> ---------------------------
> Upper Left  (    0.0,    0.0)
> Lower Left  (    0.0,  720.0)
> Upper Right ( 1440.0,    0.0)
> Lower Right ( 1440.0,  720.0)
> Center      (  720.0,  360.0)
> ---------------------------
>  Does that mean the gdal can not handle the hdf5 data?

It suggests that GDAL is not recognising the georeferencing of the
data.  The actual pixel values will hopefully still be accessed properly.

I would actually need to see the whole gdalinfo report on the subdataset
to be certain that GDAL is not finding another form of georeferencing,
like GCPs or geolocation arrays.  These will not be reflected in the
corner coordinates report (unfortunately).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From apachemaven0 at gmail.com  Mon Jan 11 22:09:10 2010
From: apachemaven0 at gmail.com (maven apache)
Date: Mon Jan 11 22:09:12 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <4B4BE4C5.7030309@pobox.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
	<b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
	<4B4BE4C5.7030309@pobox.com>
Message-ID: <b6ae15041001111909x74b259b4kff15116142dd222@mail.gmail.com>

2010/1/12 Frank Warmerdam <warmerdam@pobox.com>

> maven apache wrote:
>
>> Then I got its coordinate is :
>> ---------------------------
>> Upper Left  (    0.0,    0.0)
>> Lower Left  (    0.0,  720.0)
>> Upper Right ( 1440.0,    0.0)
>> Lower Right ( 1440.0,  720.0)
>> Center      (  720.0,  360.0)
>> ---------------------------
>>  Does that mean the gdal can not handle the hdf5 data?
>>
>
> It suggests that GDAL is not recognising the georeferencing of the
> data.  The actual pixel values will hopefully still be accessed properly.
>
> I would actually need to see the whole gdalinfo report on the subdataset
> to be certain that GDAL is not finding another form of georeferencing,
> like GCPs or geolocation arrays.  These will not be reflected in the
> corner coordinates report (unfortunately).
>
Thank you very much , I will paste the result.
The whole gdalinfo metadata can be found here: http://dpaste.com/143948/
And the info of  SUBDATASET_4_NAME  can be found here:
http://dpaste.com/143949/

Hope you can check it . :)

>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/87e05be3/attachment.html
From warmerdam at pobox.com  Mon Jan 11 22:20:14 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 22:20:16 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <b6ae15041001111909x74b259b4kff15116142dd222@mail.gmail.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
	<b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
	<4B4BE4C5.7030309@pobox.com>
	<b6ae15041001111909x74b259b4kff15116142dd222@mail.gmail.com>
Message-ID: <4B4BEA6E.3080300@pobox.com>

maven apache wrote:
>     It suggests that GDAL is not recognising the georeferencing of the
>     data.  The actual pixel values will hopefully still be accessed
>     properly.
> 
>     I would actually need to see the whole gdalinfo report on the subdataset
>     to be certain that GDAL is not finding another form of georeferencing,
>     like GCPs or geolocation arrays.  These will not be reflected in the
>     corner coordinates report (unfortunately).
> 
> Thank you very much , I will paste the result.
> The whole gdalinfo metadata can be found here: http://dpaste.com/143948/
> And the info of  SUBDATASET_4_NAME  can be found here: 
> http://dpaste.com/143949/

"Maven",

It seems that GDAL does not recognise the metadata on this file that
contains the georeferencing.  However, you can fairly easily apply the
georeferencing as part of the translation something like this:

gdal_translate \
   HDF5:"d23.he5"://HDFEOS/GRIDS/ColumnAmountO3/Data_Fields/ColumnAmountO3 \
   -a_ullr -180 90 180 -90

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From apachemaven0 at gmail.com  Mon Jan 11 22:29:44 2010
From: apachemaven0 at gmail.com (maven apache)
Date: Mon Jan 11 22:29:47 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <4B4BEA6E.3080300@pobox.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
	<b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
	<4B4BE4C5.7030309@pobox.com>
	<b6ae15041001111909x74b259b4kff15116142dd222@mail.gmail.com>
	<4B4BEA6E.3080300@pobox.com>
Message-ID: <b6ae15041001111929g68b9fbf9ma3aef82fb878b02b@mail.gmail.com>

2010/1/12 Frank Warmerdam <warmerdam@pobox.com>

> maven apache wrote:
>
>>    It suggests that GDAL is not recognising the georeferencing of the
>>    data.  The actual pixel values will hopefully still be accessed
>>    properly.
>>
>>    I would actually need to see the whole gdalinfo report on the
>> subdataset
>>    to be certain that GDAL is not finding another form of georeferencing,
>>    like GCPs or geolocation arrays.  These will not be reflected in the
>>    corner coordinates report (unfortunately).
>>
>> Thank you very much , I will paste the result.
>> The whole gdalinfo metadata can be found here: http://dpaste.com/143948/
>> And the info of  SUBDATASET_4_NAME  can be found here:
>> http://dpaste.com/143949/
>>
>
> "Maven",
>
> It seems that GDAL does not recognise the metadata on this file that
> contains the georeferencing.  However, you can fairly easily apply the
> georeferencing as part of the translation something like this:
>
> gdal_translate \
>  HDF5:"d23.he5"://HDFEOS/GRIDS/ColumnAmountO3/Data_Fields/ColumnAmountO3 \
>  -a_ullr -180 90 180 -90
>
> Oh thanks, it works!
But I have two questions:
1) how do you know the -a_ullr parameter?
2) Since some part of the tiff is blank, it is not scanned by the sensor. so
I want fill them manually,so I wonder the gdal library can do it ? Also I
want to add some new tags to the tif and I want to use java to implement it/

>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/3aa2276a/attachment.html
From warmerdam at pobox.com  Mon Jan 11 22:40:28 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 11 22:40:25 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <b6ae15041001111929g68b9fbf9ma3aef82fb878b02b@mail.gmail.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
	<b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
	<4B4BE4C5.7030309@pobox.com>
	<b6ae15041001111909x74b259b4kff15116142dd222@mail.gmail.com>
	<4B4BEA6E.3080300@pobox.com>
	<b6ae15041001111929g68b9fbf9ma3aef82fb878b02b@mail.gmail.com>
Message-ID: <4B4BEF2C.2090501@pobox.com>

maven apache wrote:
> 
> 
> 2010/1/12 Frank Warmerdam <warmerdam@pobox.com <mailto:warmerdam@pobox.com>>
> 
>     maven apache wrote:
> 
>            It suggests that GDAL is not recognising the georeferencing
>         of the
>            data.  The actual pixel values will hopefully still be accessed
>            properly.
> 
>            I would actually need to see the whole gdalinfo report on the
>         subdataset
>            to be certain that GDAL is not finding another form of
>         georeferencing,
>            like GCPs or geolocation arrays.  These will not be reflected
>         in the
>            corner coordinates report (unfortunately).
> 
>         Thank you very much , I will paste the result.
>         The whole gdalinfo metadata can be found here:
>         http://dpaste.com/143948/
>         And the info of  SUBDATASET_4_NAME  can be found here:
>         http://dpaste.com/143949/
> 
> 
>     "Maven",
> 
>     It seems that GDAL does not recognise the metadata on this file that
>     contains the georeferencing.  However, you can fairly easily apply the
>     georeferencing as part of the translation something like this:
> 
>     gdal_translate \
>      HDF5:"d23.he5"://HDFEOS/GRIDS/ColumnAmountO3/Data_Fields/ColumnAmountO3
>     \
>      -a_ullr -180 90 180 -90
> 
> Oh thanks, it works!
> But I have two questions:
> 1) how do you know the -a_ullr parameter?

Maven,

I read through the metadata reported by gdalinfo:

   ColumnAmountO3:GCTPProjectionCode=0
   ColumnAmountO3:Projection=Geographic
   ColumnAmountO3:GridOrigin=Center
   ColumnAmountO3:GridSpacing=(0.25,0.25)
   ColumnAmountO3:GridSpacingUnit=deg
   ColumnAmountO3:GridSpan=(-180,180,-90,90)
   ColumnAmountO3:GridSpanUnit=deg
   ColumnAmountO3:NumberOfLongitudesInGrid=1440
   ColumnAmountO3:NumberOfLatitudesInGrid=720
   HDFEOS INFORMATION:HDFEOSVersion=HDFEOS_5.1.9

This makes it pretty clear the image is a fullworld image
in geographic coordinates.  If this is a common metadata
format the driver could be updated to recognise it automatically.
Unfortunately there seem to be a variety of ways of storing
georeferencing for different HDF5 products.

> 2) Since some part of the tiff is blank, it is not scanned by the 
> sensor. so I want fill them manually,so I wonder the gdal library can do 
> it ? Also I want to add some new tags to the tif and I want to use java 
> to implement it/

Are you wanting to interpolate these nodata areas from nearby valid
data?  There are many ways of doing this, but gdal_nodatafill.py may
prove helpful to you as a utility.  If you want to do it from Java
you will need to call the FillNodata() function which should be
available in the GDAL Java bindings.  More info on this function at:

   http://www.gdal.org/gdal__alg_8h.html#0a079afef61968f224b159d48423d1c6
   http://www.gdal.org/gdal_fillnodata.html

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From apachemaven0 at gmail.com  Mon Jan 11 23:00:51 2010
From: apachemaven0 at gmail.com (maven apache)
Date: Mon Jan 11 23:00:54 2010
Subject: [gdal-dev] hdf5 data to geotiff(the coordinates)
In-Reply-To: <4B4BEF2C.2090501@pobox.com>
References: <b6ae15041001111758p66106bbake767085567ee955@mail.gmail.com>
	<4B4BDDA9.3090804@pobox.com>
	<b6ae15041001111850j3dd94b42x39fa76a3b2454456@mail.gmail.com>
	<4B4BE4C5.7030309@pobox.com>
	<b6ae15041001111909x74b259b4kff15116142dd222@mail.gmail.com>
	<4B4BEA6E.3080300@pobox.com>
	<b6ae15041001111929g68b9fbf9ma3aef82fb878b02b@mail.gmail.com>
	<4B4BEF2C.2090501@pobox.com>
Message-ID: <b6ae15041001112000p5e8e0722r44b5af170aea00cd@mail.gmail.com>

2010/1/12 Frank Warmerdam <warmerdam@pobox.com>

> maven apache wrote:
>
>>
>>
>> 2010/1/12 Frank Warmerdam <warmerdam@pobox.com <mailto:
>> warmerdam@pobox.com>>
>>
>>
>>    maven apache wrote:
>>
>>           It suggests that GDAL is not recognising the georeferencing
>>        of the
>>           data.  The actual pixel values will hopefully still be accessed
>>           properly.
>>
>>           I would actually need to see the whole gdalinfo report on the
>>        subdataset
>>           to be certain that GDAL is not finding another form of
>>        georeferencing,
>>           like GCPs or geolocation arrays.  These will not be reflected
>>        in the
>>           corner coordinates report (unfortunately).
>>
>>        Thank you very much , I will paste the result.
>>        The whole gdalinfo metadata can be found here:
>>        http://dpaste.com/143948/
>>        And the info of  SUBDATASET_4_NAME  can be found here:
>>        http://dpaste.com/143949/
>>
>>
>>    "Maven",
>>
>>    It seems that GDAL does not recognise the metadata on this file that
>>    contains the georeferencing.  However, you can fairly easily apply the
>>    georeferencing as part of the translation something like this:
>>
>>    gdal_translate \
>>
>> HDF5:"d23.he5"://HDFEOS/GRIDS/ColumnAmountO3/Data_Fields/ColumnAmountO3
>>    \
>>     -a_ullr -180 90 180 -90
>>
>> Oh thanks, it works!
>> But I have two questions:
>> 1) how do you know the -a_ullr parameter?
>>
>
> Maven,
>
> I read through the metadata reported by gdalinfo:
>
>  ColumnAmountO3:GCTPProjectionCode=0
>  ColumnAmountO3:Projection=Geographic
>  ColumnAmountO3:GridOrigin=Center
>  ColumnAmountO3:GridSpacing=(0.25,0.25)
>  ColumnAmountO3:GridSpacingUnit=deg
>  ColumnAmountO3:GridSpan=(-180,180,-90,90)
>  ColumnAmountO3:GridSpanUnit=deg
>  ColumnAmountO3:NumberOfLongitudesInGrid=1440
>  ColumnAmountO3:NumberOfLatitudesInGrid=720
>  HDFEOS INFORMATION:HDFEOSVersion=HDFEOS_5.1.9
>
> This makes it pretty clear the image is a fullworld image
> in geographic coordinates.  If this is a common metadata
> format the driver could be updated to recognise it automatically.
> Unfortunately there seem to be a variety of ways of storing
> georeferencing for different HDF5 products.
>
>
>  2) Since some part of the tiff is blank, it is not scanned by the sensor.
>> so I want fill them manually,so I wonder the gdal library can do it ? Also I
>> want to add some new tags to the tif and I want to use java to implement it/
>>
>
> Are you wanting to interpolate these nodata areas from nearby valid
> data?  There are many ways of doing this, but gdal_nodatafill.py may
> prove helpful to you as a utility.  If you want to do it from Java
> you will need to call the FillNodata() function which should be
> available in the GDAL Java bindings.  More info on this function at:
>
Thanks, this is just what I want. However I have visite the website of gdal
and the docs, I can not find the gdal java library.
Is it not opened?

>
>  http://www.gdal.org/gdal__alg_8h.html#0a079afef61968f224b159d48423d1c6
>  http://www.gdal.org/gdal_fillnodata.html
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/b65b7203/attachment-0001.html
From mateusz at loskot.net  Tue Jan 12 08:20:43 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan 12 08:16:13 2010
Subject: [gdal-dev] When GDAL 1.7.0 branch?
Message-ID: <4B4C772B.5090200@loskot.net>

Hi,

When the upcoming 1.7.0 will get its own branch in SVN?

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From taviroquai at gmail.com  Tue Jan 12 09:02:15 2010
From: taviroquai at gmail.com (Marco Afonso)
Date: Tue Jan 12 09:02:18 2010
Subject: [gdal-dev] gdal_translate JPEG to GeoTiff
In-Reply-To: <6701f59a1001061643ta3f9732jd0bb006576b1a88e@mail.gmail.com>
References: <6701f59a1001061643ta3f9732jd0bb006576b1a88e@mail.gmail.com>
Message-ID: <6701f59a1001120602vf47d0ai1699d92901544748@mail.gmail.com>

Hi all,

I'm new to gdal tools.

I'm trying to transform a JPEG world image to GeoTiff.

My jpeg world map image is cropped to fit on -180.0, -59.1, 180, 90 (minx,
miny, maxx, maxy - EPSG:4326).

Here are the steps:

% gdal_translate -of GTiff -a_srs EPSG:4326 -co "TILED=YES" -co
"JPEG_QUALITY=100" worldmap_hires2.jpg worldmap2.tif
Input file size is 15000, 6225
0...10...20...30...40...50...60...70...80...90...100 - done.
% sudo gdalinfo worldmap2.tif
Driver: GTiff/GeoTIFF
Files: worldmap2.tif
Size is 15000, 6225
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.017964071749986,59.117964071850004)
Pixel Size = (0.035928143500000,-0.035928143700000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-180.0179641,  59.1179641) (180d 1'4.67"W, 59d 7'4.67"N)
Lower Left  (    -180.018,    -164.535) (180d 1'4.67"W,164d32'5.03"S)
Upper Right (     358.904,      59.118) (358d54'15.08"E, 59d 7'4.67"N)
Lower Right (     358.904,    -164.535) (358d54'15.08"E,164d32'5.03"S)
Center      (  89.4431122, -52.7083832) ( 89d26'35.20"E, 52d42'30.18"S)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

Corners are not what i want. I would like to obtain -180.0, -59.1, 180, 90
(minx, miny, maxx, maxy).

I'm using ubuntu 9.10 and the package gdal-bin 1.6.3-1

It there any problem with my image? What should I do?

Thanks in advance,
Marco



-- 
_______________________________________
Search the future inside of your mind!
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/190cb424/attachment.html
From sjahputerao at gmail.com  Tue Jan 12 10:57:42 2010
From: sjahputerao at gmail.com (ozy sjahputera)
Date: Tue Jan 12 10:57:47 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
Message-ID: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>

I was trying to make a copy of a very large NITF image (about 40Kx100K
pixels) using GDALDriver::CreateCopy(). The new file was set to have
different block-size (input was a scanline image, output is to have a
128x128 blocksize). The program keeps getting killed by the system (Linux).
I monitor the memory use of the program as it was executing CreateCopy and
the memory use was steadily increasing as the progress indicator from
CreateCopy was moving forward.

Why does CreateCopy() use so much memory? I have not perused the source code
of CreateCopy() yet, but I am guessing it employs RasterIO() to perform the
read/write?

I was trying different sizes for GDAL  cache from 64MB, 256MB, 512MB, 1GB,
and 2GB. The program got killed in all these cache sizes. In fact, my Linux
box became unresponsive when I set GDALSetCacheMax() to 64MB.

Thank you.
Ozy
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/12de21aa/attachment.html
From ksshannon at gmail.com  Tue Jan 12 11:59:05 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Jan 12 11:59:24 2010
Subject: [gdal-dev] Projection issue with a netcdf file
Message-ID: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com>

I am downloading a netcdf file from a thredds data server.  It contains 4
grib datasets of weather data.  When I run gdalinfo on one of these
subdatasets, the standard parallels in the netCDF metadata (marked by
astrisks) differs from the standard parallels in the reported Coordinate
system:

kyle@kyle-fs-laptop:~/Desktop$ gdalinfo
NETCDF:"NDFD_TEMP.NC":Maximum_temperature

Driver: netCDF/Network Common Data Format
Files: NDFD_TEMP.NC
Size is 6, 7
Coordinate System is:
PROJCS["unnamed",
    GEOGCS["WGS 84",
        DATUM["WGS_1984",
            SPHEROID["WGS 84",6378137,298.257223563,
                AUTHORITY["EPSG","7030"]],
            TOWGS84[0,0,0,0,0,0,0],
            AUTHORITY["EPSG","6326"]],
        PRIMEM["Greenwich",0,
            AUTHORITY["EPSG","8901"]],
        UNIT["degree",0.0174532925199433,
            AUTHORITY["EPSG","9108"]],
        AUTHORITY["EPSG","4326"]],
    PROJECTION["Lambert_Conformal_Conic_2SP"],
    PARAMETER["standard_parallel_1",0],
    PARAMETER["standard_parallel_2",0],
    PARAMETER["latitude_of_origin",25],
    PARAMETER["central_meridian",0],
    PARAMETER["false_easting",0],
    PARAMETER["false_northing",0]]
Origin = (-1592.424266064417225,2268.326251018509083)
Pixel Size = (5.079361328124969,-5.079472167968713)
Metadata:
  NC_GLOBAL#Conventions=CF-1.0
  NC_GLOBAL#Originating_center=US National Weather Service (NCEP) subcenter
= 5
  NC_GLOBAL#Generating_Process_or_Model=Forecast
  NC_GLOBAL#Product_Status=Operational products
  NC_GLOBAL#Product_Type=Forecast products
  NC_GLOBAL#cdm_data_type=GRID
  NC_GLOBAL#creator_name=US National Weather Service (NCEP) subcenter = 5
  NC_GLOBAL#file_format=GRIB-2
  NC_GLOBAL#History=Translated to CF-1.0 Conventions by Netcdf-Java CDM
(NetcdfCFWriter)
Original Dataset = NDFD-CONUS_5km_best.ncd; Translation Date = Tue Jan 05
10:22:42 MST 2010
  NC_GLOBAL#_CoordinateModelBaseDate=2009-11-21T12:00:00Z
  Maximum_temperature#long_name=Maximum_temperature @ height_above_ground
  Maximum_temperature#units=K
  Maximum_temperature#missing_value=nan

...

time1#_CoordinateAxisType=Time
  Lambert_Conformal#grid_mapping_name=lambert_conformal_conic
  Lambert_Conformal#standard_parallel=25
  Lambert_Conformal#longitude_of_central_meridian=265
  Lambert_Conformal#latitude_of_projection_origin=25
  Lambert_Conformal#earth_shape=Earth spherical with radius specified by
producer
  Lambert_Conformal#spherical_earth_radius_meters=6.3712e+06
  Lambert_Conformal#GRIB_param_Dx=5079.36
  Lambert_Conformal#GRIB_param_Dy=5079.47
  Lambert_Conformal#GRIB_param_GDSkey=801839731
  Lambert_Conformal#GRIB_param_La1=20.192
  Lambert_Conformal#GRIB_param_LaD=25
**
  Lambert_Conformal#GRIB_param_Latin1=25
  Lambert_Conformal#GRIB_param_Latin2=25
**
  Lambert_Conformal#GRIB_param_Lo1=238.446
  Lambert_Conformal#GRIB_param_LoV=265
  Lambert_Conformal#GRIB_param_NpProj=true
  Lambert_Conformal#GRIB_param_Nx=1073
  Lambert_Conformal#GRIB_param_Ny=689
  Lambert_Conformal#GRIB_param_ProjFlag=0
  Lambert_Conformal#GRIB_param_Quasi=false
  Lambert_Conformal#GRIB_param_ResCompFlag=8
  Lambert_Conformal#GRIB_param_SpLat=-90
  Lambert_Conformal#GRIB_param_SpLon=0
  Lambert_Conformal#GRIB_param_VectorComponentFlag=gridRelative
  Lambert_Conformal#GRIB_param_Winds=Relative
  Lambert_Conformal#GRIB_param_grid_name=Lambert_Conformal
  Lambert_Conformal#GRIB_param_grid_radius_spherical_earth=6.3712e+06
  Lambert_Conformal#GRIB_param_grid_shape=Earth spherical with radius
specified by producer
  Lambert_Conformal#GRIB_param_grid_shape_code=1
  Lambert_Conformal#GRIB_param_grid_type=30
  Lambert_Conformal#GRIB_param_grid_units=m
  Lambert_Conformal#_CoordinateTransformType=Projection
  Lambert_Conformal#_CoordinateAxisTypes=GeoX GeoY
Corner Coordinates:
Upper Left  (   -1592.424,    2268.326)
Lower Left  (   -1592.424,    2232.770)
Upper Right (   -1561.948,    2268.326)
Lower Right (   -1561.948,    2232.770)
Center      (   -1577.186,    2250.548)
Band 1 Block=6x1 Type=Float32, ColorInterp=Undefined

...

I am curious where this discrepancy is taking place.  I kind of think it is
a typo or a mistake from the data server, but I can't peg it down.  Any
thoughts?  Thanks.

kss

# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)646-6577
kshannon@fs.fed.us
ksshannon@gmail.com
# ===================
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/685b95b7/attachment.html
From jason.roberts at duke.edu  Tue Jan 12 12:08:22 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 12 12:08:31 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4BAD73.9060003@pobox.com>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4BAD73.9060003@pobox.com>
Message-ID: <00ed01ca93a9$d9b2cbd0$8d186370$@roberts@duke.edu>

Frank,

Thanks for your thoughts on this.

> I'd like to see something along this line happen.  I to do it efficiently
> it would be necessary to dig into GEOS past the C interface so that
> a spatial index on a collection of features can be maintained over time
> rather than created and discarded for each pairwise test of two
geometries.
> 
> I am somewhat hesitant to have this sort of processing go into GDAL/OGR
> itself, especially as an extensive set of methods on OGRLayer.  I think
> it could be done as a layered processing library without any noticable
> loss of performance.

Do you know of anyone working on such a library?

It sounds like such a library would sit on top of GDAL/OGR, to leverage the
abstraction of data sources and layers. Although I am not yet familiar with
efficient algorithms for operations with layers, I suspect that library
would need spatial index support from OGR. The underlying data sources often
maintain spatial indexes. OGR would either need to expose these via a new
abstraction (new methods on OGRLayer, for example). Or if the underlying
source did not support spatial indexes, perhaps OGR could loop through the
layer, build an index with GEOS, and expose that via the same abstraction.
Is that similar to what you were thinking?

It sounds like there is not presently an open source project that provides
this "geoprocessing with layers" functionality. If not, I will still have to
use ArcGIS for my own project, but I would like to hide ArcGIS behind an
abstraction that is likely to be architecturally compatible with a future
library, so that maybe I could swap it in at some future point. This is why
I am probing for more details on what you envision, even if those ideas are
still somewhat distant.

Thanks,

Jason

From Doug_Newcomb at fws.gov  Tue Jan 12 12:28:57 2010
From: Doug_Newcomb at fws.gov (Doug_Newcomb@fws.gov)
Date: Tue Jan 12 12:29:27 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <005201ca930d$efb5afc0$cf210f40$@roberts@duke.edu>
Message-ID: <OF7F33AA67.F779FC14-ON852576A9.005F0B67-852576A9.006008D5@fws.gov>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: graycol.gif
Type: image/gif
Size: 105 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/53272a95/graycol.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: pic14932.gif
Type: image/gif
Size: 1255 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/53272a95/pic14932.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: ecblank.gif
Type: image/gif
Size: 45 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/53272a95/ecblank.gif
From ksshannon at gmail.com  Tue Jan 12 12:41:56 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Jan 12 12:42:13 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <4B4CADB1.90001@noaa.gov>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com> 
	<4B4CADB1.90001@noaa.gov>
Message-ID: <c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com>

ncdump -h reports the same correct standard parallels (25) whereas
Coordinate System reports 0 for both standard parallels.  It appears the
projection is a Lambert Conformal Conic with 2 standard parallels, but they
are the same effectively making it a lcc with 1 standard parallel.

# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)646-6577
kshannon@fs.fed.us
ksshannon@gmail.com
# ===================


On Tue, Jan 12, 2010 at 10:13 AM, Christopher Barker
<Chris.Barker@noaa.gov>wrote:

> Kyle Shannon wrote:
>
>> I am downloading a netcdf file from a thredds data server.  It contains 4
>> grib datasets of weather data.  When I run gdalinfo on one of these
>> subdatasets, the standard parallels in the netCDF metadata (marked by
>> astrisks) differs from the standard parallels in the reported Coordinate
>> system:
>>
>
>  I am curious where this discrepancy is taking place.  I kind of think it
>> is a typo or a mistake from the data server, but I can't peg it down.  Any
>> thoughts?
>>
>
> have you run ncdump on the netcdf file? That should tell you what's int eh
> file, so you can determine if the thredds server is doing the right thing:
>
> ncdump -h name_of_file.nc
>
> (the -h) means you only want the header info -- not all the data.
>
> -Chris
>
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/9df3ad92/attachment.html
From Chris.Barker at noaa.gov  Tue Jan 12 12:13:21 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jan 12 13:10:41 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com>
Message-ID: <4B4CADB1.90001@noaa.gov>

Kyle Shannon wrote:
> I am downloading a netcdf file from a thredds data server.  It contains 
> 4 grib datasets of weather data.  When I run gdalinfo on one of these 
> subdatasets, the standard parallels in the netCDF metadata (marked by 
> astrisks) differs from the standard parallels in the reported Coordinate 
> system:

> I am curious where this discrepancy is taking place.  I kind of think it 
> is a typo or a mistake from the data server, but I can't peg it down.  
> Any thoughts?

have you run ncdump on the netcdf file? That should tell you what's int 
eh file, so you can determine if the thredds server is doing the right 
thing:

ncdump -h name_of_file.nc

(the -h) means you only want the header info -- not all the data.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From Chris.Barker at noaa.gov  Tue Jan 12 13:26:06 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Tue Jan 12 13:23:26 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com>
	<4B4CADB1.90001@noaa.gov>
	<c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com>
Message-ID: <4B4CBEBE.7060400@noaa.gov>

Kyle Shannon wrote:
> ncdump -h reports the same correct standard parallels (25) whereas 
> Coordinate System reports 0 for both standard parallels.  It appears the 
> projection is a Lambert Conformal Conic with 2 standard parallels, but 
> they are the same effectively making it a lcc with 1 standard parallel.

It looks like GDAL doesn't understand those parameters:

from: http://www.gdal.org/frmt_netcdf.html:

"""
Georeference
There is no universal way of storing georeferencing in netCDF files. The 
driver first tries to follow the CF-1 Convention from UNIDATA looking 
for the Metadata named "grid_mapping". If "grid_mapping" is not present, 
the driver will try to find an lat/lon grid array to set geotransform 
array. The NetCDF driver verifies that the Lat/Lon array is equally space.

If those 2 methods fail, NetCDF driver will try to read the following 
metadata directly and set up georefenrencing.

     * spatial_ref (Well Known Text)
...
"""

So to get the spatial reference right, the netcdf file needs a proper 
spatial_ref parameter in WKT format. What does ncdump tell you it has? 
If it's not right, you can either get whoever is running your server to 
fix it, or you can fix it yourself by processing the nc file with something:
   ncdump-> filter -> ncgen
   NCO utilitites
   python (or perl, or ???) scripts.


good luck!

-Chris








-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From emiliomayorga at gmail.com  Tue Jan 12 13:25:59 2010
From: emiliomayorga at gmail.com (Emilio Mayorga)
Date: Tue Jan 12 13:26:01 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <-4960383989358044144@unknownmsgid>
References: <-4960383989358044144@unknownmsgid>
Message-ID: <b0d146421001121025o1230e8d5h1845b02218436b7a@mail.gmail.com>

Hi Jason,

This may not be quite what you have in mind, but check out the PySAL
(Open Source Python Library for Spatial Analytical Functions) project:
http://geodacenter.asu.edu/pysal

I've never used it, and have only looked at a recent presentation
(http://conference.scipy.org/static/wiki/rey_pysal.pdf). It's not
clear that it includes or even aims to include the traditional spatial
operators provided by GEOS. I also have no idea if it uses OGR for its
vector data access. But the developers have done some terrific work in
spatial analysis tools in the past.

BTW, I'd love to see your marine spatial ecology tools moved to an
open source, platform neutral code base!

Cheers,

-Emilio Mayorga
Applied Physics Laboratory
University of Washington
Box 355640
Seattle, WA 98105-6698  USA


On Mon, Jan 11, 2010 at 2:32 PM, Jason Roberts <jason.roberts@duke.edu> wrote:
> Dear geospatial software experts,
>
>
>
> By integrating with GEOS, OGR can perform various spatial operations on
> individual geometries, such as buffer, intersection, union, and so on. Is
> there a library that efficiently performs these kinds of operations on
> entire OGRLayers? For example, this library would have functions that would
> buffer all of the features in a layer, or intersect all of the features in
> one layer with all of those in another. Basically, I am looking for an open
> source technology that replicates the "geoprocessing tools" found in ArcGIS
> and other GIS packages. These tools traditionally operate on one or more
> layers as input and produce one or more layers as output.
>
>
>
> If such a library does not exist, does the OGR team envision that they might
> add such capabilities to OGR in the future? From software design and
> performance points of view, would it be appropriate to extend OGR to include
> functions for spatial operations on entire layers, or is this best left to
> other libraries? I can see rudimentary ways to implement such tools (e.g.
> for intersecting layers: loop over all features in both layers, calling
> OGRGeometry::Touches on all combinations, or something similar). But I am
> not a geometry expert and do not know if OGRLayer's cursor-based design is
> compatible with such capabilities; I do not know about spatial indexing, for
> example.
>
>
>
> I develop open source geoprocessing tools that help with spatial ecology
> problems. At the moment, my tools depend on heavily on ArcGIS for these
> operations with vector layers. I would like to remove this dependency, and,
> if possible, develop a toolbox that exposes the same ecology tools to
> several GIS packages. Many GIS packages, such as ArcGIS, QGIS, MapWindow,
> and OpenJump, support plugin extensions. I am wondering whether how
> difficult it would be to develop a package of tools that does not depend on
> a specific GIS package but exposes them to several packages via the
> package-specific plugin mechanisms. For this to work, I'd have to find a
> library that can do the kind of geoprocessing with layers that ArcGIS can
> do, or write my own. Writing it myself sounds daunting and am hoping that
> there are existing projects to draw from.
>
>
>
> Thank you very much for any comments you can provide.
>
>
>
> Jason
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From SGONG at mdacorporation.com  Tue Jan 12 14:20:29 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Tue Jan 12 14:21:35 2010
Subject: [gdal-dev] get projection zone and datum using gdal functions
Message-ID: <5F76F80A436C1146A7C04C6F844026FB061045F9@VMXYVR2.ds.mda.ca>

Hi list,

I use gdal2tiles.py to generate KML for Google Earth.

gdal2tiles.py requires gdal_translate and gdalwarp to convert images to EPSG:4326
If an optical image is in UTM, then "gdalwarp -s_srs '+proj=utm +zone=## ...'

Has anybody extracted projection info using Gdal Python function? I can "img_ds.GetProjection()" and then parse the projection string, but this is tedious. 
Are there Python functions I can call to get the UTM zone and datum?

Thanks,
Shawn


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/ee8c1912/attachment.html
From warmerdam at pobox.com  Tue Jan 12 14:40:16 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 12 14:40:11 2010
Subject: [gdal-dev] When GDAL 1.7.0 branch?
In-Reply-To: <4B4C772B.5090200@loskot.net>
References: <4B4C772B.5090200@loskot.net>
Message-ID: <4B4CD020.9020402@pobox.com>

Mateusz Loskot wrote:
> Hi,
> 
> When the upcoming 1.7.0 will get its own branch in SVN?

Mateusz,

My normal practice is to produce a 1.7 branch at the point the first
RC is prepared.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Tue Jan 12 14:43:54 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan 12 14:44:05 2010
Subject: [gdal-dev] When GDAL 1.7.0 branch?
In-Reply-To: <4B4CD020.9020402@pobox.com>
References: <4B4C772B.5090200@loskot.net> <4B4CD020.9020402@pobox.com>
Message-ID: <4B4CD0FA.9010609@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> Hi,
>>
>> When the upcoming 1.7.0 will get its own branch in SVN?
> 
> Mateusz,
> 
> My normal practice is to produce a 1.7 branch at the point the first
> RC is prepared.

Frank,

Great. Thanks!

By the way, 1.7.0b2 successfully tested with basic set of drivers
on Linux 32-bit (Ubuntu 9.10)

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From ksshannon at gmail.com  Tue Jan 12 15:38:24 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Tue Jan 12 15:38:47 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <4B4CBEBE.7060400@noaa.gov>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com> 
	<4B4CADB1.90001@noaa.gov>
	<c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com> 
	<4B4CBEBE.7060400@noaa.gov>
Message-ID: <c28f2e141001121238g2f5520aat7aa32ea5f8a9412f@mail.gmail.com>

After a little digging, it appears that the netCDF driver does not support
the tag:

Lambert_Conformal:standard_parallel

it supports:
Lambert_Conformal:standard_parallel_1
and:
Lambert_Conformal:standard_parallel_2

I am not sure if the tag is out of specification, or if the driver needs to
be updated.  I also notice OGRSpatialReference has a separate function for
setting a Lambert Conformal Conic with single parallel:

OGRErr SetLCC1SP( *double* dfCenterLat, *double* dfCenterLong, ...

but this is not referenced in the netCDF driver.

So, my next question is:
Can you specify the value of SP_1 and SP_2 as the same parallel in the
standard LCC, or do you have to set LCC1SP

Thanks everyone for your patience,

kss

# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406)646-6577
kshannon@fs.fed.us
ksshannon@gmail.com
# ===================


On Tue, Jan 12, 2010 at 11:26 AM, Christopher Barker
<Chris.Barker@noaa.gov>wrote:

> Kyle Shannon wrote:
>
>> ncdump -h reports the same correct standard parallels (25) whereas
>> Coordinate System reports 0 for both standard parallels.  It appears the
>> projection is a Lambert Conformal Conic with 2 standard parallels, but they
>> are the same effectively making it a lcc with 1 standard parallel.
>>
>
> It looks like GDAL doesn't understand those parameters:
>
> from: http://www.gdal.org/frmt_netcdf.html:
>
> """
> Georeference
> There is no universal way of storing georeferencing in netCDF files. The
> driver first tries to follow the CF-1 Convention from UNIDATA looking for
> the Metadata named "grid_mapping". If "grid_mapping" is not present, the
> driver will try to find an lat/lon grid array to set geotransform array. The
> NetCDF driver verifies that the Lat/Lon array is equally space.
>
> If those 2 methods fail, NetCDF driver will try to read the following
> metadata directly and set up georefenrencing.
>
>    * spatial_ref (Well Known Text)
> ...
> """
>
> So to get the spatial reference right, the netcdf file needs a proper
> spatial_ref parameter in WKT format. What does ncdump tell you it has? If
> it's not right, you can either get whoever is running your server to fix it,
> or you can fix it yourself by processing the nc file with something:
>  ncdump-> filter -> ncgen
>  NCO utilitites
>  python (or perl, or ???) scripts.
>
>
> good luck!
>
>
> -Chris
>
>
>
>
>
>
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R            (206) 526-6959   voice
> 7600 Sand Point Way NE   (206) 526-6329   fax
> Seattle, WA  98115       (206) 526-6317   main reception
>
> Chris.Barker@noaa.gov
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/d1c7cee8/attachment.html
From warmerdam at pobox.com  Tue Jan 12 15:57:20 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 12 15:57:18 2010
Subject: [gdal-dev] Projection issue with a netcdf file
In-Reply-To: <c28f2e141001121238g2f5520aat7aa32ea5f8a9412f@mail.gmail.com>
References: <c28f2e141001120859x4112e4acge1141c2c444b73d5@mail.gmail.com> 
	<4B4CADB1.90001@noaa.gov>
	<c28f2e141001120941q47a2d5f0r49e27a2f0757f563@mail.gmail.com> 
	<4B4CBEBE.7060400@noaa.gov>
	<c28f2e141001121238g2f5520aat7aa32ea5f8a9412f@mail.gmail.com>
Message-ID: <4B4CE230.4050203@pobox.com>

Kyle Shannon wrote:
> After a little digging, it appears that the netCDF driver does not 
> support the tag:
> 
> Lambert_Conformal:standard_parallel
> 
> it supports:
> Lambert_Conformal:standard_parallel_1
> and:
> Lambert_Conformal:standard_parallel_2
> 
> I am not sure if the tag is out of specification, or if the driver needs 
> to be updated.  I also notice OGRSpatialReference has a separate 
> function for setting a Lambert Conformal Conic with single parallel:
> 
> OGRErr SetLCC1SP( *double* dfCenterLat, *double* dfCenterLong, ...
> 
> but this is not referenced in the netCDF driver.
> 
> So, my next question is:
> Can you specify the value of SP_1 and SP_2 as the same parallel in the 
> standard LCC, or do you have to set LCC1SP
> 
> Thanks everyone for your patience,

Kyle,

Good investigating.  I'd suggest filing a ticket, ideally referencing
an example file.  It should be fairly easily added.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jason.roberts at duke.edu  Tue Jan 12 17:25:40 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 12 17:25:50 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <OF7F33AA67.F779FC14-ON852576A9.005F0B67-852576A9.006008D5@fws.gov>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<OF7F33AA67.F779FC14-ON852576A9.005F0B67-852576A9.006008D5@fws.gov>
Message-ID: <002d01ca93d6$2d18b9c0$874a2d40$@roberts@duke.edu>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/gif
Size: 105 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/68f7ae04/attachment.gif
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 168 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/68f7ae04/attachment.png
-------------- next part --------------
A non-text attachment was scrubbed...
Name: not available
Type: image/png
Size: 166 bytes
Desc: not available
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/68f7ae04/attachment-0001.png
From jason.roberts at duke.edu  Tue Jan 12 17:41:52 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 12 17:42:01 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <b0d146421001121025o1230e8d5h1845b02218436b7a@mail.gmail.com>
References: <-4960383989358044144@unknownmsgid>
	<b0d146421001121025o1230e8d5h1845b02218436b7a@mail.gmail.com>
Message-ID: <003901ca93d8$6f89eed0$4e9dcc70$@roberts@duke.edu>

Emilio,

Thanks for the suggestion of pysal. It does look interesting, but as you
speculated, it seems to not aim to include the traditional spatial
operators. Instead it looks like a collection of various interesting
algorithms, implemented in Python on top of SciPy, NumPy, spatialindex, and
Rtree. This might be useful for specific problems, but I need a more
comprehensive library of the traditional stuff.

> BTW, I'd love to see your marine spatial ecology tools moved to an
> open source, platform neutral code base!

Yes, we would love that too. At the moment, I am evaluating whether we
should develop our next batch of tools under our existing framework which
depends heavily on ArcGIS, or take a time-out to rework the framework to
eliminate that dependency. I have already done pieces of it, here and there,
but this vector geoprocessing functionality is a key blocker that remains
unresolved.

Best,

Jason

-----Original Message-----
From: Emilio Mayorga [mailto:emiliomayorga@gmail.com] 
Sent: Tuesday, January 12, 2010 1:26 PM
To: Jason Roberts
Cc: gdal-dev
Subject: Re: [gdal-dev] Open source vector geoprocessing libraries?

Hi Jason,

This may not be quite what you have in mind, but check out the PySAL
(Open Source Python Library for Spatial Analytical Functions) project:
http://geodacenter.asu.edu/pysal

I've never used it, and have only looked at a recent presentation
(http://conference.scipy.org/static/wiki/rey_pysal.pdf). It's not
clear that it includes or even aims to include the traditional spatial
operators provided by GEOS. I also have no idea if it uses OGR for its
vector data access. But the developers have done some terrific work in
spatial analysis tools in the past.

BTW, I'd love to see your marine spatial ecology tools moved to an
open source, platform neutral code base!

Cheers,

-Emilio Mayorga
Applied Physics Laboratory
University of Washington
Box 355640
Seattle, WA 98105-6698  USA


On Mon, Jan 11, 2010 at 2:32 PM, Jason Roberts <jason.roberts@duke.edu>
wrote:
> Dear geospatial software experts,
>
>
>
> By integrating with GEOS, OGR can perform various spatial operations on
> individual geometries, such as buffer, intersection, union, and so on. Is
> there a library that efficiently performs these kinds of operations on
> entire OGRLayers? For example, this library would have functions that
would
> buffer all of the features in a layer, or intersect all of the features in
> one layer with all of those in another. Basically, I am looking for an
open
> source technology that replicates the "geoprocessing tools" found in
ArcGIS
> and other GIS packages. These tools traditionally operate on one or more
> layers as input and produce one or more layers as output.
>
>
>
> If such a library does not exist, does the OGR team envision that they
might
> add such capabilities to OGR in the future? From software design and
> performance points of view, would it be appropriate to extend OGR to
include
> functions for spatial operations on entire layers, or is this best left to
> other libraries? I can see rudimentary ways to implement such tools (e.g.
> for intersecting layers: loop over all features in both layers, calling
> OGRGeometry::Touches on all combinations, or something similar). But I am
> not a geometry expert and do not know if OGRLayer's cursor-based design is
> compatible with such capabilities; I do not know about spatial indexing,
for
> example.
>
>
>
> I develop open source geoprocessing tools that help with spatial ecology
> problems. At the moment, my tools depend on heavily on ArcGIS for these
> operations with vector layers. I would like to remove this dependency,
and,
> if possible, develop a toolbox that exposes the same ecology tools to
> several GIS packages. Many GIS packages, such as ArcGIS, QGIS, MapWindow,
> and OpenJump, support plugin extensions. I am wondering whether how
> difficult it would be to develop a package of tools that does not depend
on
> a specific GIS package but exposes them to several packages via the
> package-specific plugin mechanisms. For this to work, I'd have to find a
> library that can do the kind of geoprocessing with layers that ArcGIS can
> do, or write my own. Writing it myself sounds daunting and am hoping that
> there are existing projects to draw from.
>
>
>
> Thank you very much for any comments you can provide.
>
>
>
> Jason
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From woodbri at swoodbridge.com  Tue Jan 12 17:45:13 2010
From: woodbri at swoodbridge.com (Stephen Woodbridge)
Date: Tue Jan 12 17:45:03 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <002d01ca93d6$2d18b9c0$874a2d40$@roberts@duke.edu>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<OF7F33AA67.F779FC14-ON852576A9.005F0B67-852576A9.006008D5@fws.gov>
	<002d01ca93d6$2d18b9c0$874a2d40$@roberts@duke.edu>
Message-ID: <4B4CFB79.2050805@swoodbridge.com>

Jason Roberts wrote:
> Doug,
> 
>  
> 
> Thanks for these suggestions. It looks like PostGIS and SpatialLite both 
> provide a SQL-based approach for accomplishing what I need. Both look 
> promising and I will dig into them in more detail.
> 
>  
> 
> It might be less than optimal to load data into one of these, execute 
> the desired spatial query, and export data back out. But there is 
> probably no suitable alternative that provides a complete set of spatial 
> operators that is any faster. I'm sure a big part of executing efficient 
> spatial queries is having a spatial index. Even OGR does not appear to 
> expose spatial indexes that may be maintained by the underlying data 
> sources. Thus any geoprocessing library that sits on OGR or a similar 
> API must already retrieve all records, build a spatial index, then 
> execute the spatial query. This is basically the same thing as loading 
> data into PostGIS or SpatialLite and then executing the query.
> 
>  
> 
> I have tons of questions but will resist asking all but one: do you know 
> how well these systems can be embedded in other software? In my 
> collection of tools, I want the infrastructure that supports them to be 
> hidden and config-less. Although I have not used SQLite, I know it is 
> designed explicitly for easy embedding, so it seems promising. What 
> about Postgres? In my past experience, it appeared to be much more of a 
> full-blown enterprise database system, designed to run as a service or 
> daemon, listen for connections, etc. If it can be easily embedded, I 
> might prefer to use it, as PostGIS appears to provide a richer set of 
> spatial operators.

I have used SQLite in a bunch of tools. It is easy and straight forward. 
You can do any config stuff in your code so it is config-less from the 
users point of view.

I also use PostGIS for a lot of stuff, but you are right that you need 
to setup a server and have your tools connect to it. Once the server is 
setup and running the client applications just need to have valid login 
to the server to do whatever they want.

For Perl I tend to use PostGIS and for C code I tend to use SQLite. I 
have looked at the SpatiaLite extensions but have not really used them yet.

If you are building a system where you don't want to deal with a 
database server, I would have not qualms using SQLite and SaptiaLite for 
building an embedded solution.

-Steve
  http://imaptools.com/

> Jason
> 
>  
> 
> *From:* Doug_Newcomb@fws.gov [mailto:Doug_Newcomb@fws.gov]
> *Sent:* Tuesday, January 12, 2010 12:29 PM
> *To:* Jason Roberts
> *Cc:* 'gdal-dev'; gdal-dev-bounces@lists.osgeo.org
> *Subject:* Re: [gdal-dev] Open source vector geoprocessing libraries?
> 
>  
> 
> Jason,
> If you're working with vector data, why not throw the data into 
> Postgresql/Postgis, http://postgis.refractions.net, and use the spatial 
> operators there to select/buffer/intersect the vector geometries as you 
> describe. 
> http://postgis.refractions.net/documentation/manual-1.4/ch07.html for 
> geoprocessing operations. Your application can pass SQL commands to the 
> database. You can use ogr to load data /export your finished product 
> to/from postgresql/postgis .
> 
> You might be able to similar things in spatialite, 
> http://www.gaia-gis.it/spatialite/spatialite-tutorial-2.3.1.html#t4.
> 
> Doug
> 
> Doug Newcomb
> USFWS
> Raleigh, NC
> 919-856-4520 ext. 14 doug_newcomb@fws.gov
> ---------------------------------------------------------------------------------------------------------
> The opinions I express are my own and are not representative of the 
> official policy of the U.S.Fish and Wildlife Service or Dept. of the 
> Interior. Life is too short for undocumented, proprietary data formats.
> Inactive hide details for "Jason Roberts" <jason.roberts@duke.edu>"Jason 
> Roberts" <jason.roberts@duke.edu>
> 
> *"Jason Roberts" <jason.roberts@duke.edu>*
> Sent by: gdal-dev-bounces@lists.osgeo.org
> 
> 01/11/2010 05:32 PM
> 
> 	
> 
> To
> 
> 	
> 
> 
> "'gdal-dev'" <gdal-dev@lists.osgeo.org>
> 
> cc
> 
> 	
> 
> Subject
> 
> 	
> 
> 
> [gdal-dev] Open source vector geoprocessing libraries?
> 
>  
> 
> 	
> 
> 
> Dear geospatial software experts,
> 
> By integrating with GEOS, OGR can perform various spatial operations on 
> individual geometries, such as buffer, intersection, union, and so on. 
> Is there a library that efficiently performs these kinds of operations 
> on entire OGRLayers? For example, this library would have functions that 
> would buffer all of the features in a layer, or intersect all of the 
> features in one layer with all of those in another. Basically, I am 
> looking for an open source technology that replicates the "geoprocessing 
> tools" found in ArcGIS and other GIS packages. These tools traditionally 
> operate on one or more layers as input and produce one or more layers as 
> output.
> 
> If such a library does not exist, does the OGR team envision that they 
> might add such capabilities to OGR in the future? From software design 
> and performance points of view, would it be appropriate to extend OGR to 
> include functions for spatial operations on entire layers, or is this 
> best left to other libraries? I can see rudimentary ways to implement 
> such tools (e.g. for intersecting layers: loop over all features in both 
> layers, calling OGRGeometry::Touches on all combinations, or something 
> similar). But I am not a geometry expert and do not know if OGRLayer's 
> cursor-based design is compatible with such capabilities; I do not know 
> about spatial indexing, for example.
> 
> I develop open source geoprocessing tools that help with spatial ecology 
> problems. At the moment, my tools depend on heavily on ArcGIS for these 
> operations with vector layers. I would like to remove this dependency, 
> and, if possible, develop a toolbox that exposes the same ecology tools 
> to several GIS packages. Many GIS packages, such as ArcGIS, QGIS, 
> MapWindow, and OpenJump, support plugin extensions. I am wondering 
> whether how difficult it would be to develop a package of tools that 
> does not depend on a specific GIS package but exposes them to several 
> packages via the package-specific plugin mechanisms. For this to work, 
> I'd have to find a library that can do the kind of geoprocessing with 
> layers that ArcGIS can do, or write my own. Writing it myself sounds 
> daunting and am hoping that there are existing projects to draw from.
> 
> Thank you very much for any comments you can provide.
> 
> Jason
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 
> ------------------------------------------------------------------------
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Tue Jan 12 17:51:14 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan 12 17:51:21 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <005201ca930d$efb5afc0$cf210f40$@roberts@duke.edu>
References: <005201ca930d$efb5afc0$cf210f40$@roberts@duke.edu>
Message-ID: <4B4CFCE2.3020509@loskot.net>

Jason Roberts wrote:
> By integrating with GEOS, OGR can perform various spatial operations on
> individual geometries, such as buffer, intersection, union, and so on. Is
> there a library that efficiently performs these kinds of operations on
> entire OGRLayers? For example, this library would have functions that would
> buffer all of the features in a layer, or intersect all of the features in
> one layer with all of those in another. Basically, I am looking for an open
> source technology that replicates the "geoprocessing tools" found in ArcGIS
> and other GIS packages. These tools traditionally operate on one or more
> layers as input and produce one or more layers as output.

What prevents you from calling GEOS and process all features in a layer?

I've used GEOS processing layers of large number of features
in similar manner as PostGIS would, but programmatically (C++).

For example, generating buffer from tens of polygons
or performing boolean operations like cookie-cutting
layer of 1000-2000 polygons with one polygon.

IMHO, I can't see much point making a new library.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From even.rouault at mines-paris.org  Tue Jan 12 18:38:56 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 12 18:38:50 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
Message-ID: <4B4D0810.7060201@mines-paris.org>

Ozy,

Did you try with gdal_translate -of NITF src.tif output.tif -co 
BLOCKSIZE=128 ? Does it give similar results ?

I'm a bit surprised that you even managed to read a 40Kx100K large NITF 
file organized as scanlines. There was a limit until very recently that 
prevented to read blocks whose one dimension was bigger than 9999. This 
was fixed recently in trunk ( see ticket 
http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it has 
not yet been released to an officially released version. So which GDAL 
version are you using ?

Does the output of gdalinfo on your scanline oriented input NITF gives 
something like :
Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray

Is your input NITF compressed or uncompressed ?

Anyway, with latest trunk, I've simulated creating a similarly large 
NITF image with the following python snippet :

import gdal
ds = gdal.GetDriverByName('NITF').Create('scanline.ntf', 40000, 100000)
ds = None

and then creating the tiled NITF :

gdal_translate -of NITF scanline.ntf tiled.ntf -co BLOCKSIZE=128

The memory consumption is very reasonnable (less than 50 MB : the 
default block cache size of 40 MB + temporary buffers ), so I'm not 
clear why you would have a problem of increasing memory use.

ozy sjahputera a ?crit :
> I was trying to make a copy of a very large NITF image (about 40Kx100K 
> pixels) using GDALDriver::CreateCopy(). The new file was set to have 
> different block-size (input was a scanline image, output is to have a 
> 128x128 blocksize). The program keeps getting killed by the system 
> (Linux). I monitor the memory use of the program as it was executing 
> CreateCopy and the memory use was steadily increasing as the progress 
> indicator from CreateCopy was moving forward.
>
> Why does CreateCopy() use so much memory? I have not perused the 
> source code of CreateCopy() yet, but I am guessing it employs 
> RasterIO() to perform the read/write?
>
> I was trying different sizes for GDAL  cache from 64MB, 256MB, 512MB, 
> 1GB, and 2GB. The program got killed in all these cache sizes. In 
> fact, my Linux box became unresponsive when I set GDALSetCacheMax() to 
> 64MB.
>
> Thank you.
> Ozy
>
>  
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jason.roberts at duke.edu  Tue Jan 12 19:44:32 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Tue Jan 12 19:44:40 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4CFCE2.3020509@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
Message-ID: <004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>

Mateusz,

I'm not an expert in this area, but I think that big performance gains can
be obtained by using a spatial index. For example, consider a situation
where you want to clip out a study region from the full resolution GSHHS
shoreline database, a polygon layer. The shoreline polygons have very large,
complicated geometries. It would be expensive to loop over every polygon,
loading its full geometry and calling GEOS. Instead, you would use the
spatial index to isolate the polygons that are likely to overlap with the
study region, then loop over just those ones. I do not know much about
spatial indexes yet, but I suspect they do something like store the
rectangular envelope of each feature, which can then be quickly compared to
other envelopes to determine whether it is possible for features to overlap.

If OGR takes advantage of spatial indexes internally (e.g. if the data
source drivers can tell the core about these indexes, and the core can use
them when OGRLayer::SetSpatialFilter is called), then many scenarios could
be efficiently implemented by just OGR and GEOS alone. Of course, it might
get more complicated when you have two layers to perform the operation on,
rather than one layer and a single feature. I'm sure that others have done a
lot of thinking about how to optimize the different scenarios, while I
haven't done much. This is why I wondered if there was another library for
doing this kind of thing.

If not, then your suggestion may be as fast as any other. For example, the
idea of loading the features in to PostGIS or SpatiaLite will require
loading all of the full geometries, passing them to another database system,
etc, etc. It may be that shuffling all of the data around will be hugely
expensive and that just using OGR functions with simple approaches like
calling GEOS from nested loops will be faster than shuffling the data to a
system that implements a more efficient approach once the data gets there.
Is that basically what you are saying? Or have I totally missed the point?

Thanks for your thoughts,

Jason

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Tuesday, January 12, 2010 5:51 PM
To: Jason Roberts
Cc: 'gdal-dev'
Subject: Re: [gdal-dev] Open source vector geoprocessing libraries?

Jason Roberts wrote:
> By integrating with GEOS, OGR can perform various spatial operations on
> individual geometries, such as buffer, intersection, union, and so on. Is
> there a library that efficiently performs these kinds of operations on
> entire OGRLayers? For example, this library would have functions that
would
> buffer all of the features in a layer, or intersect all of the features in
> one layer with all of those in another. Basically, I am looking for an
open
> source technology that replicates the "geoprocessing tools" found in
ArcGIS
> and other GIS packages. These tools traditionally operate on one or more
> layers as input and produce one or more layers as output.

What prevents you from calling GEOS and process all features in a layer?

I've used GEOS processing layers of large number of features
in similar manner as PostGIS would, but programmatically (C++).

For example, generating buffer from tens of polygons
or performing boolean operations like cookie-cutting
layer of 1000-2000 polygons with one polygon.

IMHO, I can't see much point making a new library.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org

From gregcoats at mac.com  Tue Jan 12 20:13:17 2010
From: gregcoats at mac.com (Greg Coats)
Date: Tue Jan 12 20:13:43 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <4B4D0810.7060201@mines-paris.org>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
Message-ID: <90477A57-0EA0-4545-A794-D077C9A2CBDA@mac.com>

I find that GDAL version 1.6.3, released 2009/11/19, gdal_translate fully supports reading and writing a 150 GB GeoTiff image 260,000 columns by 195,000 rows by RGB. Greg

$ tiffinfo dcua0002_BigTiffYES.tif 
  Image Width: 260000 Image Length: 195000
  Tile Width: 512 Tile Length: 512
  Resolution: 800, 800 pixels/cm
  Bits/Sample: 8
  Compression Scheme: None
  Photometric Interpretation: RGB color
  Samples/Pixel: 3

On Jan 12, 2010, at 6:38 PM, Even Rouault wrote:

> I'm a bit surprised that you even managed to read a 40Kx100K large NITF file organized as scanlines. There was a limit until very recently that prevented to read blocks whose one dimension was bigger than 9999. This was fixed recently in trunk ( see ticket http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it has not yet been released to an officially released version. So which GDAL version are you using ?

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100112/112ac59b/attachment.html
From mateusz at loskot.net  Tue Jan 12 20:33:15 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan 12 20:33:23 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
Message-ID: <4B4D22DB.6080108@loskot.net>

Jason Roberts wrote:
> Mateusz,
> 
> I'm not an expert in this area, but I think that big performance 
> gains can be obtained by using a spatial index.

Yes, likely true.

> For example, consider a situation where you want to clip out a study 
> region from the full resolution GSHHS shoreline database, a polygon 
> layer. The shoreline polygons have very large, complicated 
> geometries. It would be expensive to loop over every polygon, loading
>  its full geometry and calling GEOS. Instead, you would use the 
> spatial index to isolate the polygons that are likely to overlap with
>  the study region, then loop over just those ones.

GEOS as JTS provides support of various spatial indexes.
It is possible to index data and optimise it in this manner as you
mention. In fact, GEOS uses index internally in various operations.
The problem is that such index is not persistent, not serialised
anywhere, so happens in memory only. In fact, there are much more
problems than this one.

BTW, PostGIS is an index serialisation.

OGR does not provide any spatial indexing layer common to various
vector datasets. For many simple formats it performs the brute-force
selection.

Alternative is to try to divide the tasks:
1. Query features from data source using spatial index capability of
data source.
2. Having only subject features selected, apply geometric processing.

I did it that way, actually.

> If OGR takes advantage of spatial indexes internally (e.g. if the 
> data source drivers can tell the core about these indexes, and the 
> core can use them when OGRLayer::SetSpatialFilter is called), then 
> many scenarios could be efficiently implemented by just OGR and GEOS 
> alone.

The problem with OGR and GEOS is cost of translation from OGR geometry
to GEOS geometry. It can be a bottleneck.

However, if such processing functionality would be considered as
built in to OGR, that would make sense, but I still see limitations:

Let's brainstom a bit and assume it implements operation:

OGRLayer OGR::SymDifference(OGRLayer layer1, OGRLayer layer2);

Depending on data source, OGR could exploit its capabilities.,
If both layers sit in the same PostGIS (or other spatial)
database, OGR just delegates the processing to PostGIS
where ST_SymDifference is executed and OGR only grabs the
results and generates OGRLayer.

What if layer1 is a Shapefile and layer2 is Oracle table?
Let's assume Shapefile has .qix file with spatial index
and Oracle has its own index. What does OGR do?

Loads .qix to memory, then grabs layer2 and decides which features to
select form layer1?
Loads the whole Shapefile to memory and uses Oracle index to select
features from layer2 "masked" by layer1?
How to calculate cost which one to transfer in which direction, etc.

Certainly, it depends on number of elements, what algorithm is used,
direction of application of algorithm (who is subject, who is object),
and many more.

It's plenty of combinations and my point is that if performance (it's
not only in terms of speed, but any resource) is critical, it would be
extremely difficult to provide efficient  implementation of such
features in OGR with guaranteed or even determinable degree of
complexity. Without these guarantees, I see little of use of
such solution.

Given that, depending on needs, write a specialised application using
available tools like OGR and GEOS, that is optimised according to
specifics of datasets, type of processing, system requirements, etc.

> If not, then your suggestion may be as fast as any other. For 
> example, the idea of loading the features in to PostGIS or SpatiaLite
>  will require loading all of the full geometries, passing them to 
> another database system, etc, etc. It may be that shuffling all of 
> the data around will be hugely expensive and that just using OGR 
> functions with simple approaches like calling GEOS from nested loops 
> will be faster than shuffling the data to a system that implements a 
> more efficient approach once the data gets there.

It's never "just using". Performance is usualy a concern regarding large
datasets. Large datasets are unlikely to be stored in a simple
format, but in proper spatial data storage, like PostGIS.
It nicely combines all the elements necessary to perform geometrical
processing in usable and optimised form, with index.

> Is that basically what you are saying?

It is.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From P.Halls at york.ac.uk  Wed Jan 13 02:32:57 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Jan 13 03:04:32 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4D22DB.6080108@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>
Message-ID: <4B4D7729.50402@york.ac.uk>

Jason,

    are you constrained to retaining your data in an ArcGIS compatible format? 
If so and if you do not have ArcSDE, then what follows may not be much help.

Otherwise, I think it likely that you will find using a DBMS as your data 
repository advantageous for many reasons.  Apart from the built in indexing and 
index based operations, it is *very* much easier to share data between users, 
retaining a single copy and all user having effective access.  Until the File 
Geodatabase format is published (later this year?) and someone has the effort to 
build an OGR interface, the DBMS route is probably the best route to 
compatibility.  We happen to be a corporate Oracle site, but PostGres is pretty 
similar.  PostGres is supported by ESRI with ArcSDE, so it is possible to retain 
ArcGIS compatibility this way.

Many years ago, I had a Simula class for performing many of these basic spatial 
operations, however now my data is all in Oracle: I am able to use the Oracle 
functions and no longer have to worry about building and rebuilding indexes, 
etc. - other than USER_SDO_GEOM_METADATA which, unfortunately, OGR only writes 
to at table creation and does not update.  Frankly, life (and maintenance) is 
much easier now and, certainly with Oracle, I think there have been performance 
gains.

Just my ha'pence-worth.

Peter

Mateusz Loskot wrote:
> Jason Roberts wrote:
>> Mateusz,
>>
>> I'm not an expert in this area, but I think that big performance 
>> gains can be obtained by using a spatial index.
> 
> Yes, likely true.
> 
>> For example, consider a situation where you want to clip out a study 
>> region from the full resolution GSHHS shoreline database, a polygon 
>> layer. The shoreline polygons have very large, complicated 
>> geometries. It would be expensive to loop over every polygon, loading
>>  its full geometry and calling GEOS. Instead, you would use the 
>> spatial index to isolate the polygons that are likely to overlap with
>>  the study region, then loop over just those ones.
> 
> GEOS as JTS provides support of various spatial indexes.
> It is possible to index data and optimise it in this manner as you
> mention. In fact, GEOS uses index internally in various operations.
> The problem is that such index is not persistent, not serialised
> anywhere, so happens in memory only. In fact, there are much more
> problems than this one.
> 
> BTW, PostGIS is an index serialisation.
> 
> OGR does not provide any spatial indexing layer common to various
> vector datasets. For many simple formats it performs the brute-force
> selection.
> 
> Alternative is to try to divide the tasks:
> 1. Query features from data source using spatial index capability of
> data source.
> 2. Having only subject features selected, apply geometric processing.
> 
> I did it that way, actually.
> 
>> If OGR takes advantage of spatial indexes internally (e.g. if the 
>> data source drivers can tell the core about these indexes, and the 
>> core can use them when OGRLayer::SetSpatialFilter is called), then 
>> many scenarios could be efficiently implemented by just OGR and GEOS 
>> alone.
> 
> The problem with OGR and GEOS is cost of translation from OGR geometry
> to GEOS geometry. It can be a bottleneck.
> 
> However, if such processing functionality would be considered as
> built in to OGR, that would make sense, but I still see limitations:
> 
> Let's brainstom a bit and assume it implements operation:
> 
> OGRLayer OGR::SymDifference(OGRLayer layer1, OGRLayer layer2);
> 
> Depending on data source, OGR could exploit its capabilities.,
> If both layers sit in the same PostGIS (or other spatial)
> database, OGR just delegates the processing to PostGIS
> where ST_SymDifference is executed and OGR only grabs the
> results and generates OGRLayer.
> 
> What if layer1 is a Shapefile and layer2 is Oracle table?
> Let's assume Shapefile has .qix file with spatial index
> and Oracle has its own index. What does OGR do?
> 
> Loads .qix to memory, then grabs layer2 and decides which features to
> select form layer1?
> Loads the whole Shapefile to memory and uses Oracle index to select
> features from layer2 "masked" by layer1?
> How to calculate cost which one to transfer in which direction, etc.
> 
> Certainly, it depends on number of elements, what algorithm is used,
> direction of application of algorithm (who is subject, who is object),
> and many more.
> 
> It's plenty of combinations and my point is that if performance (it's
> not only in terms of speed, but any resource) is critical, it would be
> extremely difficult to provide efficient  implementation of such
> features in OGR with guaranteed or even determinable degree of
> complexity. Without these guarantees, I see little of use of
> such solution.
> 
> Given that, depending on needs, write a specialised application using
> available tools like OGR and GEOS, that is optimised according to
> specifics of datasets, type of processing, system requirements, etc.
> 
>> If not, then your suggestion may be as fast as any other. For 
>> example, the idea of loading the features in to PostGIS or SpatiaLite
>>  will require loading all of the full geometries, passing them to 
>> another database system, etc, etc. It may be that shuffling all of 
>> the data around will be hugely expensive and that just using OGR 
>> functions with simple approaches like calling GEOS from nested loops 
>> will be faster than shuffling the data to a system that implements a 
>> more efficient approach once the data gets there.
> 
> It's never "just using". Performance is usualy a concern regarding large
> datasets. Large datasets are unlikely to be stored in a simple
> format, but in proper spatial data storage, like PostGIS.
> It nicely combines all the elements necessary to perform geometrical
> processing in usable and optimised form, with index.
> 
>> Is that basically what you are saying?
> 
> It is.
> 
> Best regards,

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From jukka.rahkonen at mmmtike.fi  Wed Jan 13 03:04:38 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Wed Jan 13 03:05:05 2010
Subject: [gdal-dev] Re: Memory use in GDALDriver::CreateCopy()
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
	<90477A57-0EA0-4545-A794-D077C9A2CBDA@mac.com>
Message-ID: <loom.20100113T085417-273@post.gmane.org>

Greg Coats <gregcoats <at> mac.com> writes:

> I find that GDAL version 1.6.3, released 2009/11/19, gdal_translate fully
supports reading and writing a 150 GB GeoTiff image 260,000 columns by 195,000
rows by RGB. Greg

Hi,

The problem is not not the image size itself.  It may be related to, as
mentioned earlier, image organised by scanlines and having blocks wider that
9999 pixels. Your image is tiled

> ??Tile Width: 512 Tile Length: 512
while the file in question has 40000 pixel wide blocks.
> Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray

-Jukka Rahkonen-


From chapmanm at pixia.com  Wed Jan 13 04:10:44 2010
From: chapmanm at pixia.com (Martin Chapman)
Date: Wed Jan 13 04:20:48 2010
Subject: [gdal-dev] NITF JPEG2000 compression and Kakadu
Message-ID: <241B7A26A6184570B5A90C82F9823742@chapmanm64>

Frank,

 

In the file NITFDatasetCreate.cpp in the function NITFDatasetCreate() if the
compression option is set to C8 (JPEG2000) it looks like you:

 

1.	get a handle to an installed J2K driver if available.
2.	test for metadata creation capability.
3.	create the nitf file.
4.	open a new handle to the nitf file on disk.
5.	setup a j2k subfile option based on the new nitf file segment
offset.
6.	call create on the j2k driver with the j2k_subfile option.
7.	return an open handle to the new nitf file.

 

It seems to me that I could hack my version of GDAL to include support for
doing this with my copy of Kakadu with the exception that I would have to
first create a VRT dataset of my output J2K file and then use CreateCopy()
on the Kakadu driver instead of Create().

 

Do you think I am missing something here and that it is more difficult then
that?  Does the Kakadu library not have some feature I would need to do
this?

 

If it can be done, would my approach of using a VRT dataset work?

 

I only want to create single dataset output.

 

Best regards,

Martin.

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100113/93e47b90/attachment.html
From DCarreira at edia.pt  Wed Jan 13 04:54:26 2010
From: DCarreira at edia.pt (Duarte Carreira)
Date: Wed Jan 13 05:30:11 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <b0d146421001121025o1230e8d5h1845b02218436b7a@mail.gmail.com>
References: <-4960383989358044144@unknownmsgid>,
	<b0d146421001121025o1230e8d5h1845b02218436b7a@mail.gmail.com>
Message-ID: <58C383B0A191E747BE79503F3EEA22BF4BB8AA879E@beja012.edia.pt>

Jason,

Have you looked at GeoKettle [1]? And recently I found GearScape [2], which seemed very interesting to me. Though neither is based on python...

Duarte Carreira

[1] - http://sourceforge.net/projects/geokettle/
[2] - http://www.fergonco.es/gearscape/index.php
________________________________________
De: Emilio Mayorga [emiliomayorga@gmail.com]
Enviado: ter?a-feira, 12 de Janeiro de 2010 18:25
Para: Jason Roberts
Cc: gdal-dev
Assunto: Re: [gdal-dev] Open source vector geoprocessing libraries?

Hi Jason,

This may not be quite what you have in mind, but check out the PySAL
(Open Source Python Library for Spatial Analytical Functions) project:
http://geodacenter.asu.edu/pysal

I've never used it, and have only looked at a recent presentation
(http://conference.scipy.org/static/wiki/rey_pysal.pdf). It's not
clear that it includes or even aims to include the traditional spatial
operators provided by GEOS. I also have no idea if it uses OGR for its
vector data access. But the developers have done some terrific work in
spatial analysis tools in the past.

BTW, I'd love to see your marine spatial ecology tools moved to an
open source, platform neutral code base!

Cheers,

-Emilio Mayorga
Applied Physics Laboratory
University of Washington
Box 355640
Seattle, WA 98105-6698  USA


On Mon, Jan 11, 2010 at 2:32 PM, Jason Roberts <jason.roberts@duke.edu> wrote:
> Dear geospatial software experts,
>
>
>
> By integrating with GEOS, OGR can perform various spatial operations on
> individual geometries, such as buffer, intersection, union, and so on. Is
> there a library that efficiently performs these kinds of operations on
> entire OGRLayers? For example, this library would have functions that would
> buffer all of the features in a layer, or intersect all of the features in
> one layer with all of those in another. Basically, I am looking for an open
> source technology that replicates the "geoprocessing tools" found in ArcGIS
> and other GIS packages. These tools traditionally operate on one or more
> layers as input and produce one or more layers as output.
>
>
>
> If such a library does not exist, does the OGR team envision that they might
> add such capabilities to OGR in the future? From software design and
> performance points of view, would it be appropriate to extend OGR to include
> functions for spatial operations on entire layers, or is this best left to
> other libraries? I can see rudimentary ways to implement such tools (e.g.
> for intersecting layers: loop over all features in both layers, calling
> OGRGeometry::Touches on all combinations, or something similar). But I am
> not a geometry expert and do not know if OGRLayer's cursor-based design is
> compatible with such capabilities; I do not know about spatial indexing, for
> example.
>
>
>
> I develop open source geoprocessing tools that help with spatial ecology
> problems. At the moment, my tools depend on heavily on ArcGIS for these
> operations with vector layers. I would like to remove this dependency, and,
> if possible, develop a toolbox that exposes the same ecology tools to
> several GIS packages. Many GIS packages, such as ArcGIS, QGIS, MapWindow,
> and OpenJump, support plugin extensions. I am wondering whether how
> difficult it would be to develop a package of tools that does not depend on
> a specific GIS package but exposes them to several packages via the
> package-specific plugin mechanisms. For this to work, I'd have to find a
> library that can do the kind of geoprocessing with layers that ArcGIS can
> do, or write my own. Writing it myself sounds daunting and am hoping that
> there are existing projects to draw from.
>
>
>
> Thank you very much for any comments you can provide.
>
>
>
> Jason
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From j.l.h.hartmann at uva.nl  Wed Jan 13 07:23:57 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Jan 13 07:24:05 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4D22DB.6080108@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>
Message-ID: <4B4DBB5D.6020804@uva.nl>



On 13-1-2010 2:33, Mateusz Loskot wrote:
>
> OGR does not provide any spatial indexing layer common to various
> vector datasets. For many simple formats it performs the brute-force
> selection.
>    
>
Just curious, would it make sense / be possible to implement indexing in 
OGR, something like a
generalized version of Mapserver's shptree, the "quadtree-based spatial 
index for a shapefiles"?

http://mapserver.org/utilities/shptree.html

Jan
From ari.jolma at gmail.com  Wed Jan 13 09:49:02 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Jan 13 09:49:09 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4DBB5D.6020804@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>
	<4B4DBB5D.6020804@uva.nl>
Message-ID: <4B4DDD5E.2060900@gmail.com>

Jan Hartmann wrote:
>
>
> On 13-1-2010 2:33, Mateusz Loskot wrote:
>>
>> OGR does not provide any spatial indexing layer common to various
>> vector datasets. For many simple formats it performs the brute-force
>> selection.
>>   
> Just curious, would it make sense / be possible to implement indexing 
> in OGR, something like a
> generalized version of Mapserver's shptree, the "quadtree-based 
> spatial index for a shapefiles"?
>
> http://mapserver.org/utilities/shptree.html

It could make sense to have a in-memory index for in-memory geometries. 
Pehaps use GiST library(1) (I don't know whether it can use in-memory 
indexes) for geometries in an OGRGeometryCollection  or OGRMemLayer if 
it's available.

For other formats it might not make sense because OGR is not responsible 
for the actual geometries. As have been said, one should use PostGIS 
format, which has this functionality built-in, for larger and more 
static datasets.

Just my quick thoughts.

Ari

(1) http://www.sai.msu.su/~megera/postgres/gist/

>
> Jan
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From jason.roberts at duke.edu  Wed Jan 13 10:13:11 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Jan 13 10:13:19 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4D22DB.6080108@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$%roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>
Message-ID: <007c01ca9462$ebc0fe00$c342fa00$@roberts@duke.edu>

Mateusz,

Thank you very much for your insight. I have a few more questions I'm hoping
you could answer.

> Alternative is to try to divide the tasks:
> 1. Query features from data source using spatial index capability of
> data source.
> 2. Having only subject features selected, apply geometric processing.

That sounds like a reasonable approach. Considering just the simpler
scenarios, such as the one I mentioned, is it possible to implement
efficiently it with OGR compiled with GEOS? I believe OGR can pass through
SQL directly to the data source driver, allowing the caller to submit SQL
containing spatial operators. In principle, one could submit a spatial query
to PostGIS or SpatiaLite and efficiently get back the features (including
geometry) that could possibly intersect a bounding box. Then one could use
the GEOS functions on OGRGeometry to do the actual intersecting. Is that
what you were suggesting?

Of course, it may be that PostGIS or SpatiaLite can handle both steps 1 and
2 in a single query. If so, would it be best to do it that way?

It appears that the OGR shapefile driver supports a spatial indexing scheme
(.qix file) that is respected by OGRLayer::SetSpatialFilter. The
documentation says that "Currently this test is may be inaccurately
implemented, but it is guaranteed that all features who's envelope (as
returned by OGRGeometry::getEnvelope()) overlaps the envelope of the spatial
filter will be returned." Therefore, it appears that the shapefile driver
can implement step 1 but not step 2. Is that correct?

> The problem with OGR and GEOS is cost of translation from OGR geometry
> to GEOS geometry. It can be a bottleneck.

Is it correct that this cost would only be incurred when you call OGR
functions implemented by GEOS, such as OGRGeometry::Intersects,
OGRGeometry::Disjoint, etc? 

> It's plenty of combinations and my point is that if performance (it's
> not only in terms of speed, but any resource) is critical, it would be
> extremely difficult to provide efficient  implementation of such
> features in OGR with guaranteed or even determinable degree of
> complexity. Without these guarantees, I see little of use of
> such solution.

Yes, I see what you mean. But I suggest to the open source community that
there is still value in implementing such features, either as part of OGR or
another library, even if optimal performance cannot be guaranteed in all
scenarios. The reason is that ArcGIS provides such generic tools (e.g.
intersect/union/symdiff layers, regardless of underlying storage). These
geoprocessing tools are considered the most basic capabilities of ArcGIS,
available in the cheapest versions of the software. IMHO, if the open source
community wants to win over a large number of ArcGIS users to open GIS
systems, I believe the community needs to provide parity with these basic
tools.

Thanks again,

Jason

-----Original Message-----
From: Mateusz Loskot [mailto:mateusz@loskot.net] 
Sent: Tuesday, January 12, 2010 8:33 PM
To: Jason Roberts
Cc: 'gdal-dev'
Subject: Re: [gdal-dev] Open source vector geoprocessing libraries?

Jason Roberts wrote:
> Mateusz,
> 
> I'm not an expert in this area, but I think that big performance 
> gains can be obtained by using a spatial index.

Yes, likely true.

> For example, consider a situation where you want to clip out a study 
> region from the full resolution GSHHS shoreline database, a polygon 
> layer. The shoreline polygons have very large, complicated 
> geometries. It would be expensive to loop over every polygon, loading
>  its full geometry and calling GEOS. Instead, you would use the 
> spatial index to isolate the polygons that are likely to overlap with
>  the study region, then loop over just those ones.

GEOS as JTS provides support of various spatial indexes.
It is possible to index data and optimise it in this manner as you
mention. In fact, GEOS uses index internally in various operations.
The problem is that such index is not persistent, not serialised
anywhere, so happens in memory only. In fact, there are much more
problems than this one.

BTW, PostGIS is an index serialisation.

OGR does not provide any spatial indexing layer common to various
vector datasets. For many simple formats it performs the brute-force
selection.

Alternative is to try to divide the tasks:
1. Query features from data source using spatial index capability of
data source.
2. Having only subject features selected, apply geometric processing.

I did it that way, actually.

> If OGR takes advantage of spatial indexes internally (e.g. if the 
> data source drivers can tell the core about these indexes, and the 
> core can use them when OGRLayer::SetSpatialFilter is called), then 
> many scenarios could be efficiently implemented by just OGR and GEOS 
> alone.

The problem with OGR and GEOS is cost of translation from OGR geometry
to GEOS geometry. It can be a bottleneck.

However, if such processing functionality would be considered as
built in to OGR, that would make sense, but I still see limitations:

Let's brainstom a bit and assume it implements operation:

OGRLayer OGR::SymDifference(OGRLayer layer1, OGRLayer layer2);

Depending on data source, OGR could exploit its capabilities.,
If both layers sit in the same PostGIS (or other spatial)
database, OGR just delegates the processing to PostGIS
where ST_SymDifference is executed and OGR only grabs the
results and generates OGRLayer.

What if layer1 is a Shapefile and layer2 is Oracle table?
Let's assume Shapefile has .qix file with spatial index
and Oracle has its own index. What does OGR do?

Loads .qix to memory, then grabs layer2 and decides which features to
select form layer1?
Loads the whole Shapefile to memory and uses Oracle index to select
features from layer2 "masked" by layer1?
How to calculate cost which one to transfer in which direction, etc.

Certainly, it depends on number of elements, what algorithm is used,
direction of application of algorithm (who is subject, who is object),
and many more.

It's plenty of combinations and my point is that if performance (it's
not only in terms of speed, but any resource) is critical, it would be
extremely difficult to provide efficient  implementation of such
features in OGR with guaranteed or even determinable degree of
complexity. Without these guarantees, I see little of use of
such solution.

Given that, depending on needs, write a specialised application using
available tools like OGR and GEOS, that is optimised according to
specifics of datasets, type of processing, system requirements, etc.

> If not, then your suggestion may be as fast as any other. For 
> example, the idea of loading the features in to PostGIS or SpatiaLite
>  will require loading all of the full geometries, passing them to 
> another database system, etc, etc. It may be that shuffling all of 
> the data around will be hugely expensive and that just using OGR 
> functions with simple approaches like calling GEOS from nested loops 
> will be faster than shuffling the data to a system that implements a 
> more efficient approach once the data gets there.

It's never "just using". Performance is usualy a concern regarding large
datasets. Large datasets are unlikely to be stored in a simple
format, but in proper spatial data storage, like PostGIS.
It nicely combines all the elements necessary to perform geometrical
processing in usable and optimised form, with index.

> Is that basically what you are saying?

It is.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org

From j.l.h.hartmann at uva.nl  Wed Jan 13 10:14:40 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Wed Jan 13 10:14:51 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4DDD5E.2060900@gmail.com>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>
	<4B4DBB5D.6020804@uva.nl> <4B4DDD5E.2060900@gmail.com>
Message-ID: <4B4DE360.6050708@uva.nl>



On 13-1-2010 15:49, Ari Jolma wrote:
> Jan Hartmann wrote:
>>
>>
>> Just curious, would it make sense / be possible to implement indexing 
>> in OGR, something like a
>> generalized version of Mapserver's shptree, the "quadtree-based 
>> spatial index for a shapefiles"?
>>
>> http://mapserver.org/utilities/shptree.html
>
> It could make sense to have a in-memory index for in-memory 
> geometries. Pehaps use GiST library(1) (I don't know whether it can 
> use in-memory indexes) for geometries in an OGRGeometryCollection  or 
> OGRMemLayer if it's available.
>
> For other formats it might not make sense because OGR is not 
> responsible for the actual geometries. As have been said, one should 
> use PostGIS format, which has this functionality built-in, for larger 
> and more static datasets.
>
Is that so? Reading the OGR API tutorial 
(http://www.gdal.org/ogr/ogr_apitut.html), I see that all geometries, 
frowm whatever input source, are represented internally as a generic 
OGRGeometry pointer, which is a virtual base class for all real geometry 
classes (http://www.gdal.org/ogr/classOGRGeometry.html). Most of the 
GEOS functionality can be implemented on OGRGeometries, so in principle 
the same could be done with indexing libraries (GIST, b-tree, quadtree, 
etc). Such indices should be written out to disk to be of any use at 
all, of course, like shptree does.

Mind, I agree that this sort of thing is much better done with PostGIS, 
it's just that not everyone has a PostGIS database at his disposal, and 
even when you have one, it sometimes is easier to use flat files. For 
some projects I (have to) use SQLite instead of PostgreSQL, and the same 
would be true for an indexed OGR-functionality.

Again, I really don't know how difficult/desirable this would be to 
implement.

Jan
From jason.roberts at duke.edu  Wed Jan 13 10:27:43 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Jan 13 10:27:51 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4D7729.50402@york.ac.uk>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$%roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4D7729.50402@york.ac.uk>
Message-ID: <008001ca9464$f4059f10$dc10dd30$@roberts@duke.edu>

Peter,

> are you constrained to retaining your data in an ArcGIS compatible format?


We are attempting to build tools that can work with data stored in a variety
of formats. Our current user community uses mostly shapefiles, ArcGIS
personal geodatabases, and ArcGIS file geodatabases. Many of them are
ecologists who do not have the interest or skills to deploy a real DBMS
system. Thus we are hoping to provide tools that can work without one. This
is one reason I was exploring how embeddable PostGIS and SpatiaLite might be
in the other fork of this thread.

> Until the File 
> Geodatabase format is published (later this year?) and someone has the
effort to 
> build an OGR interface, the DBMS route is probably the best route to 
> compatibility.

It would be really great for that to happen, but I'm not holding my breath.
If it does get published, I would seriously contemplate building an OGR
driver.

I have contemplated building an ArcObjects- or arcgisscripting-based driver.
This would at least allow people who have ArcGIS to use OGR to access any
ArcGIS layer, including those created by ArcGIS's tools for joining
arbitrary layers, etc. That would handle file geodatabases, as well as ALL
formats accessible from ArcGIS. If such a driver existed, then we could use
OGR as the base interface inside our application. But creating such a driver
would be a lot of work and have funky dependencies because it either needs
to use Windows COM (for ArcObjects) or Python (for arcgisscripting) to call
the ArcGIS APIs. I am certainly capable of implementing it but because most
of our code is in Python, it is probably easier for me to wrap OGR and
arcgisscripting behind a common abstraction, and then have our tools work
against that abstraction rather than OGR directly.

At any rate, I'm sure it is nice being able to do all your work in a
spatially-enabled DBMS...

Best,
Jason

-----Original Message-----
From: Peter J Halls [mailto:P.Halls@york.ac.uk] 
Sent: Wednesday, January 13, 2010 2:33 AM
To: Mateusz Loskot
Cc: Jason Roberts; 'gdal-dev'
Subject: Re: [gdal-dev] Open source vector geoprocessing libraries?

Jason,

    are you constrained to retaining your data in an ArcGIS compatible
format? 
If so and if you do not have ArcSDE, then what follows may not be much help.

Otherwise, I think it likely that you will find using a DBMS as your data 
repository advantageous for many reasons.  Apart from the built in indexing
and 
index based operations, it is *very* much easier to share data between
users, 
retaining a single copy and all user having effective access.  Until the
File 
Geodatabase format is published (later this year?) and someone has the
effort to 
build an OGR interface, the DBMS route is probably the best route to 
compatibility.  We happen to be a corporate Oracle site, but PostGres is
pretty 
similar.  PostGres is supported by ESRI with ArcSDE, so it is possible to
retain 
ArcGIS compatibility this way.

Many years ago, I had a Simula class for performing many of these basic
spatial 
operations, however now my data is all in Oracle: I am able to use the
Oracle 
functions and no longer have to worry about building and rebuilding indexes,

etc. - other than USER_SDO_GEOM_METADATA which, unfortunately, OGR only
writes 
to at table creation and does not update.  Frankly, life (and maintenance)
is 
much easier now and, certainly with Oracle, I think there have been
performance 
gains.

Just my ha'pence-worth.

Peter

Mateusz Loskot wrote:
> Jason Roberts wrote:
>> Mateusz,
>>
>> I'm not an expert in this area, but I think that big performance 
>> gains can be obtained by using a spatial index.
> 
> Yes, likely true.
> 
>> For example, consider a situation where you want to clip out a study 
>> region from the full resolution GSHHS shoreline database, a polygon 
>> layer. The shoreline polygons have very large, complicated 
>> geometries. It would be expensive to loop over every polygon, loading
>>  its full geometry and calling GEOS. Instead, you would use the 
>> spatial index to isolate the polygons that are likely to overlap with
>>  the study region, then loop over just those ones.
> 
> GEOS as JTS provides support of various spatial indexes.
> It is possible to index data and optimise it in this manner as you
> mention. In fact, GEOS uses index internally in various operations.
> The problem is that such index is not persistent, not serialised
> anywhere, so happens in memory only. In fact, there are much more
> problems than this one.
> 
> BTW, PostGIS is an index serialisation.
> 
> OGR does not provide any spatial indexing layer common to various
> vector datasets. For many simple formats it performs the brute-force
> selection.
> 
> Alternative is to try to divide the tasks:
> 1. Query features from data source using spatial index capability of
> data source.
> 2. Having only subject features selected, apply geometric processing.
> 
> I did it that way, actually.
> 
>> If OGR takes advantage of spatial indexes internally (e.g. if the 
>> data source drivers can tell the core about these indexes, and the 
>> core can use them when OGRLayer::SetSpatialFilter is called), then 
>> many scenarios could be efficiently implemented by just OGR and GEOS 
>> alone.
> 
> The problem with OGR and GEOS is cost of translation from OGR geometry
> to GEOS geometry. It can be a bottleneck.
> 
> However, if such processing functionality would be considered as
> built in to OGR, that would make sense, but I still see limitations:
> 
> Let's brainstom a bit and assume it implements operation:
> 
> OGRLayer OGR::SymDifference(OGRLayer layer1, OGRLayer layer2);
> 
> Depending on data source, OGR could exploit its capabilities.,
> If both layers sit in the same PostGIS (or other spatial)
> database, OGR just delegates the processing to PostGIS
> where ST_SymDifference is executed and OGR only grabs the
> results and generates OGRLayer.
> 
> What if layer1 is a Shapefile and layer2 is Oracle table?
> Let's assume Shapefile has .qix file with spatial index
> and Oracle has its own index. What does OGR do?
> 
> Loads .qix to memory, then grabs layer2 and decides which features to
> select form layer1?
> Loads the whole Shapefile to memory and uses Oracle index to select
> features from layer2 "masked" by layer1?
> How to calculate cost which one to transfer in which direction, etc.
> 
> Certainly, it depends on number of elements, what algorithm is used,
> direction of application of algorithm (who is subject, who is object),
> and many more.
> 
> It's plenty of combinations and my point is that if performance (it's
> not only in terms of speed, but any resource) is critical, it would be
> extremely difficult to provide efficient  implementation of such
> features in OGR with guaranteed or even determinable degree of
> complexity. Without these guarantees, I see little of use of
> such solution.
> 
> Given that, depending on needs, write a specialised application using
> available tools like OGR and GEOS, that is optimised according to
> specifics of datasets, type of processing, system requirements, etc.
> 
>> If not, then your suggestion may be as fast as any other. For 
>> example, the idea of loading the features in to PostGIS or SpatiaLite
>>  will require loading all of the full geometries, passing them to 
>> another database system, etc, etc. It may be that shuffling all of 
>> the data around will be hugely expensive and that just using OGR 
>> functions with simple approaches like calling GEOS from nested loops 
>> will be faster than shuffling the data to a system that implements a 
>> more efficient approach once the data gets there.
> 
> It's never "just using". Performance is usualy a concern regarding large
> datasets. Large datasets are unlikely to be stored in a simple
> format, but in proper spatial data storage, like PostGIS.
> It nicely combines all the elements necessary to perform geometrical
> processing in usable and optimised form, with index.
> 
>> Is that basically what you are saying?
> 
> It is.
> 
> Best regards,

-- 
----------------------------------------------------------------------------
----
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
----------------------------------------------------------------------------
----

From ari.jolma at gmail.com  Wed Jan 13 10:32:47 2010
From: ari.jolma at gmail.com (Ari Jolma)
Date: Wed Jan 13 10:32:53 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4DE360.6050708@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>
	<4B4DBB5D.6020804@uva.nl> <4B4DDD5E.2060900@gmail.com>
	<4B4DE360.6050708@uva.nl>
Message-ID: <4B4DE79F.6020807@gmail.com>

Jan Hartmann wrote:
>
> On 13-1-2010 15:49, Ari Jolma wrote:
>> Jan Hartmann wrote:
>>>
>>>
>>> Just curious, would it make sense / be possible to implement 
>>> indexing in OGR, something like a
>>> generalized version of Mapserver's shptree, the "quadtree-based 
>>> spatial index for a shapefiles"?
>>>
>>> http://mapserver.org/utilities/shptree.html
>>
>> It could make sense to have a in-memory index for in-memory 
>> geometries. Pehaps use GiST library(1) (I don't know whether it can 
>> use in-memory indexes) for geometries in an OGRGeometryCollection  or 
>> OGRMemLayer if it's available.
>>
>> For other formats it might not make sense because OGR is not 
>> responsible for the actual geometries. As have been said, one should 
>> use PostGIS format, which has this functionality built-in, for larger 
>> and more static datasets.
>>
> Is that so? Reading the OGR API tutorial 
> (http://www.gdal.org/ogr/ogr_apitut.html), I see that all geometries, 
> frowm whatever input source, are represented internally as a generic 
> OGRGeometry pointer, which is a virtual base class for all real 
> geometry classes (http://www.gdal.org/ogr/classOGRGeometry.html). Most 
> of the GEOS functionality can be implemented on OGRGeometries, so in 
> principle the same could be done with indexing libraries (GIST, 
> b-tree, quadtree, etc). Such indices should be written out to disk to 
> be of any use at all, of course, like shptree does.
>

What I meant is that with other formats than the in-memory format, the 
features are stored on disk (possibly even on remote servers) and only 
available for indexing when retrieved. When they are retrieved, they are 
of course OGR objects and accessable through the generic OGR API. Maybe 
it's possible but it would probably mean that the library would need to 
retrieve and go through all the features, and prepare and store into 
some local(?) file the index. Thus I think that for those formats, it's 
up to the format itself to provide the indexing or not.

Ari

From jason.roberts at duke.edu  Wed Jan 13 10:44:00 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Wed Jan 13 10:44:08 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <58C383B0A191E747BE79503F3EEA22BF4BB8AA879E@beja012.edia.pt>
References: <-4960383989358044144@unknownmsgid>
	<b0d146421001121025o1230e8d5h1845b02218436b7a@mail.gmail.com>
	<58C383B0A191E747BE79503F3EEA22BF4BB8AA879E@beja012.edia.pt>
Message-ID: <008101ca9467$3a5e4780$af1ad680$@roberts@duke.edu>

Hi Duarte,

Thanks for the suggestions.

I took a look at GeoKettle. Here are some relevant excerpts from a document:

"GeoKettle is a ... powerful, metadata?driven spatial ETL tool dedicated to the integration of different spatial data sources for building/updating geospatial data warehouses. At present, Oracle spatial, PostgreSQL/PostGIS and MySQL DBMS and the ESRI shapefiles are natively supported in read and write modes. Spatial Reference Systems management and coordinates transformations have been fully implemented. It is possible to access Geometry objects in JavaScript and define custom transformation steps (?Modified JavaScript Value? step). Topological predicates (Intersects, crosses, etc.) have all been implemented."

It looks interesting, but oriented to server applications. We are building a set of desktop GIS analysis tools. It would probably not be practical to try to embed GeoKettle in our application.

GearScape also looks interesting, with SQL-oriented geoprocessing, but it is more of an extensible GIS program than a geospatial library. Again, probably not practical to embed it in our app.

Best regards,

Jason

-----Original Message-----
From: Duarte Carreira [mailto:DCarreira@edia.pt] 
Sent: Wednesday, January 13, 2010 4:54 AM
To: Jason Roberts
Cc: gdal-dev
Subject: RE: [gdal-dev] Open source vector geoprocessing libraries?

Jason,

Have you looked at GeoKettle [1]? And recently I found GearScape [2], which seemed very interesting to me. Though neither is based on python...

Duarte Carreira

[1] - http://sourceforge.net/projects/geokettle/
[2] - http://www.fergonco.es/gearscape/index.php
________________________________________
De: Emilio Mayorga [emiliomayorga@gmail.com]
Enviado: ter?a-feira, 12 de Janeiro de 2010 18:25
Para: Jason Roberts
Cc: gdal-dev
Assunto: Re: [gdal-dev] Open source vector geoprocessing libraries?

Hi Jason,

This may not be quite what you have in mind, but check out the PySAL
(Open Source Python Library for Spatial Analytical Functions) project:
http://geodacenter.asu.edu/pysal

I've never used it, and have only looked at a recent presentation
(http://conference.scipy.org/static/wiki/rey_pysal.pdf). It's not
clear that it includes or even aims to include the traditional spatial
operators provided by GEOS. I also have no idea if it uses OGR for its
vector data access. But the developers have done some terrific work in
spatial analysis tools in the past.

BTW, I'd love to see your marine spatial ecology tools moved to an
open source, platform neutral code base!

Cheers,

-Emilio Mayorga
Applied Physics Laboratory
University of Washington
Box 355640
Seattle, WA 98105-6698  USA


On Mon, Jan 11, 2010 at 2:32 PM, Jason Roberts <jason.roberts@duke.edu> wrote:
> Dear geospatial software experts,
>
>
>
> By integrating with GEOS, OGR can perform various spatial operations on
> individual geometries, such as buffer, intersection, union, and so on. Is
> there a library that efficiently performs these kinds of operations on
> entire OGRLayers? For example, this library would have functions that would
> buffer all of the features in a layer, or intersect all of the features in
> one layer with all of those in another. Basically, I am looking for an open
> source technology that replicates the "geoprocessing tools" found in ArcGIS
> and other GIS packages. These tools traditionally operate on one or more
> layers as input and produce one or more layers as output.
>
>
>
> If such a library does not exist, does the OGR team envision that they might
> add such capabilities to OGR in the future? From software design and
> performance points of view, would it be appropriate to extend OGR to include
> functions for spatial operations on entire layers, or is this best left to
> other libraries? I can see rudimentary ways to implement such tools (e.g.
> for intersecting layers: loop over all features in both layers, calling
> OGRGeometry::Touches on all combinations, or something similar). But I am
> not a geometry expert and do not know if OGRLayer's cursor-based design is
> compatible with such capabilities; I do not know about spatial indexing, for
> example.
>
>
>
> I develop open source geoprocessing tools that help with spatial ecology
> problems. At the moment, my tools depend on heavily on ArcGIS for these
> operations with vector layers. I would like to remove this dependency, and,
> if possible, develop a toolbox that exposes the same ecology tools to
> several GIS packages. Many GIS packages, such as ArcGIS, QGIS, MapWindow,
> and OpenJump, support plugin extensions. I am wondering whether how
> difficult it would be to develop a package of tools that does not depend on
> a specific GIS package but exposes them to several packages via the
> package-specific plugin mechanisms. For this to work, I'd have to find a
> library that can do the kind of geoprocessing with layers that ArcGIS can
> do, or write my own. Writing it myself sounds daunting and am hoping that
> there are existing projects to draw from.
>
>
>
> Thank you very much for any comments you can provide.
>
>
>
> Jason
>
>
>
>
>
>
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>

From P.Halls at york.ac.uk  Wed Jan 13 10:44:03 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Wed Jan 13 10:44:22 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <008001ca9464$f4059f10$dc10dd30$@roberts@duke.edu>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$%roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4D7729.50402@york.ac.uk>
	<008001ca9464$f4059f10$dc10dd30$@roberts@duke.edu>
Message-ID: <4B4DEA43.20303@york.ac.uk>

Jason,

Jason Roberts wrote:
> Peter,
> 
>> are you constrained to retaining your data in an ArcGIS compatible format?
> 
> 
> We are attempting to build tools that can work with data stored in a variety
> of formats. Our current user community uses mostly shapefiles, ArcGIS
> personal geodatabases, and ArcGIS file geodatabases. Many of them are
> ecologists who do not have the interest or skills to deploy a real DBMS
> system. Thus we are hoping to provide tools that can work without one. This
> is one reason I was exploring how embeddable PostGIS and SpatiaLite might be
> in the other fork of this thread.

I wonder how many users are aware that ESRI have announced the file geodatabase 
as replacing the (Access) personal geodatabase?  They have not, as yet, 
announced a cut off for this format, but its many limitations as a result of 
Access capabilities may make this sooner rather than later.

> 
>> Until the File 
>> Geodatabase format is published (later this year?) and someone has the
> effort to 
>> build an OGR interface, the DBMS route is probably the best route to 
>> compatibility.
> 
> It would be really great for that to happen, but I'm not holding my breath.
> If it does get published, I would seriously contemplate building an OGR
> driver.

ESRI announced publication would be alongside the release of ArcGIS 9.4 at the 
EMEA User Conference in November 2008 (London).  They said that they see the 
file geodatabase replacing both the personal geodatabase and shapefiles.  I 
believe 9.4 to currently be in beta test.

> 
> I have contemplated building an ArcObjects- or arcgisscripting-based driver.
> This would at least allow people who have ArcGIS to use OGR to access any
> ArcGIS layer, including those created by ArcGIS's tools for joining
> arbitrary layers, etc. That would handle file geodatabases, as well as ALL
> formats accessible from ArcGIS. If such a driver existed, then we could use
> OGR as the base interface inside our application. But creating such a driver
> would be a lot of work and have funky dependencies because it either needs
> to use Windows COM (for ArcObjects) or Python (for arcgisscripting) to call
> the ArcGIS APIs. I am certainly capable of implementing it but because most
> of our code is in Python, it is probably easier for me to wrap OGR and
> arcgisscripting behind a common abstraction, and then have our tools work
> against that abstraction rather than OGR directly.

GDAL, including OGR, is actually embedded in ArcGIS: however I do not know quite 
what ESRI use it for.

> 
> At any rate, I'm sure it is nice being able to do all your work in a
> spatially-enabled DBMS...

Also an attraction of PostGres, of course.

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From gregcoats at mac.com  Wed Jan 13 10:48:07 2010
From: gregcoats at mac.com (Greg Coats)
Date: Wed Jan 13 10:48:12 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <4B4D0810.7060201@mines-paris.org>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
Message-ID: <21DB2303-D758-421C-8DD5-EF9E48A67730@mac.com>

As a practical matter, I do not see this 9999 restriction in GDAL. On Thu 21 Sep 2006, I created with gdal_merge.py a 3 GB .tif having 18,400 columns by 52,800 rows by RGB. On Thu 11 Dec 2009, gdal_translate processed a 150 GB untiled .tif to a tiled .tif with 260,000 columns by 195,000 rows. Greg

On Jan 12, 2010, at 6:38 PM, Even Rouault wrote:

> I'm a bit surprised that you even managed to read a 40Kx100K large NITF file organized as scanlines. There was a limit until very recently that prevented to read blocks whose one dimension was bigger than 9999. This was fixed recently in trunk ( see ticket http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it has not yet been released to an officially released version. So which GDAL version are you using ?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100113/31f1166d/attachment.html
From warmerdam at pobox.com  Wed Jan 13 10:57:28 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 13 10:57:16 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4DE360.6050708@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4DDD5E.2060900@gmail.com> <4B4DE360.6050708@uva.nl>
Message-ID: <4B4DED68.1060408@pobox.com>

Jan Hartmann wrote:
> Is that so? Reading the OGR API tutorial 
> (http://www.gdal.org/ogr/ogr_apitut.html), I see that all geometries, 
> frowm whatever input source, are represented internally as a generic 
> OGRGeometry pointer, which is a virtual base class for all real geometry 
> classes (http://www.gdal.org/ogr/classOGRGeometry.html). Most of the 
> GEOS functionality can be implemented on OGRGeometries, so in principle 
> the same could be done with indexing libraries (GIST, b-tree, quadtree, 
> etc). Such indices should be written out to disk to be of any use at 
> all, of course, like shptree does.

Jan,

I have had trouble keeping up with this spirited discussion, but I wanted
to note that it is not intended that alternate implementations of geometries
would be derived by OGRGeometry.  There are many places for instance that
assume an OGRGeometry can be cast to OGRLineString if it's type is
wkbLineString.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Wed Jan 13 11:47:12 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 13 11:47:02 2010
Subject: [gdal-dev] Re: NITF JPEG2000 compression and Kakadu
In-Reply-To: <241B7A26A6184570B5A90C82F9823742@chapmanm64>
References: <241B7A26A6184570B5A90C82F9823742@chapmanm64>
Message-ID: <4B4DF910.2020607@pobox.com>

Martin Chapman wrote:
> Frank,
> 
>  
> 
> In the file NITFDatasetCreate.cpp in the function NITFDatasetCreate() if 
> the compression option is set to C8 (JPEG2000) it looks like you:
> 
>    1. get a handle to an installed J2K driver if available.
>    2. test for metadata creation capability.
>    3. create the nitf file.
>    4. open a new handle to the nitf file on disk.
>    5. setup a j2k subfile option based on the new nitf file segment offset.
>    6. call create on the j2k driver with the j2k_subfile option.
>    7. return an open handle to the new nitf file.
> 
> It seems to me that I could hack my version of GDAL to include support 
> for doing this with my copy of Kakadu with the exception that I would 
> have to first create a VRT dataset of my output J2K file and then use 
> CreateCopy() on the Kakadu driver instead of Create().
> 
> Do you think I am missing something here and that it is more difficult 
> then that?  Does the Kakadu library not have some feature I would need 
> to do this?
> 
> If it can be done, would my approach of using a VRT dataset work?
> 
> I only want to create single dataset output.

Martin,

I have skimmed NITFCreateCopy() in nitfdataset.cpp, and I was somewhat
surprised to find it does not already support using the JP2KAK (kakadu)
driver to write jpeg2000 encoded nitf files.

I *think* it could be trivially extended to support JP2KAK with a case
similar to the one for JasPer with the filename encoded using the
/vsisubfile/ mechanism.

I must confess I'm not clear on why you are bringing VRT files or the
Create() method into the discussion.  Hmm, rereading your email...

I assume you are referring to the function NITFDatasetCreate() in
nitfdataset.cpp (not NITFDatasetCreate.cpp which I don't think exists).
I see it utilizes some special hacks taking advantage of the fact that
the JP2ECW driver supports create+write as long as the application writes
in a very specific top down order.  I had forgetting about this hack
which was implemented (somewhat against my better judgement) for
ERMapper.

Do you have a compelling need to support imperative creation via
Create() instead of CreateCopy()?  Feel free to give me a call at
+1 613 754-2041 if that would expedite this discussion.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From sjahputerao at gmail.com  Wed Jan 13 12:14:36 2010
From: sjahputerao at gmail.com (ozy sjahputera)
Date: Wed Jan 13 12:14:38 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <4B4D0810.7060201@mines-paris.org>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
Message-ID: <f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>

Hi Even,

yes, I tried:
gdal_translate -of "NITF" -co "ICORDS=G" -co "BLOCKXSIZE=128" -co
"BLOCKYSIZE=128"  NITF_IM:0:input.ntf output.ntf

I monitored the memory use using top and it was steadily increasing till it
reached 98.4% (I have 8GB of RAM and 140 GB of local disk for swap etc.)
before the node died (not just the program, but the whole system just
stopped responding).

My GDAL version is 1.6.2.

gdalinfo on this image shows the raster size of (37504, 98772) and
Block=37504x1.
The image is compressed using JPEG2000 option and contains two subdatasets
(data and cloud data ~ I used only the data for gdal_translate test).

Band info from gdalinfo:
Band 1 Block=37504x1 Type=UInt16, ColorInterp=Gray

Ozy

On Tue, Jan 12, 2010 at 5:38 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Ozy,
>
> Did you try with gdal_translate -of NITF src.tif output.tif -co
> BLOCKSIZE=128 ? Does it give similar results ?
>
> I'm a bit surprised that you even managed to read a 40Kx100K large NITF
> file organized as scanlines. There was a limit until very recently that
> prevented to read blocks whose one dimension was bigger than 9999. This
> was fixed recently in trunk ( see ticket
> http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it has
> not yet been released to an officially released version. So which GDAL
> version are you using ?
>
> Does the output of gdalinfo on your scanline oriented input NITF gives
> something like :
> Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray
>
> Is your input NITF compressed or uncompressed ?
>
> Anyway, with latest trunk, I've simulated creating a similarly large
> NITF image with the following python snippet :
>
> import gdal
> ds = gdal.GetDriverByName('NITF').Create('scanline.ntf', 40000, 100000)
> ds = None
>
> and then creating the tiled NITF :
>
> gdal_translate -of NITF scanline.ntf tiled.ntf -co BLOCKSIZE=128
>
> The memory consumption is very reasonnable (less than 50 MB : the
> default block cache size of 40 MB + temporary buffers ), so I'm not
> clear why you would have a problem of increasing memory use.
>
> ozy sjahputera a ?crit :
> > I was trying to make a copy of a very large NITF image (about 40Kx100K
> > pixels) using GDALDriver::CreateCopy(). The new file was set to have
> > different block-size (input was a scanline image, output is to have a
> > 128x128 blocksize). The program keeps getting killed by the system
> > (Linux). I monitor the memory use of the program as it was executing
> > CreateCopy and the memory use was steadily increasing as the progress
> > indicator from CreateCopy was moving forward.
> >
> > Why does CreateCopy() use so much memory? I have not perused the
> > source code of CreateCopy() yet, but I am guessing it employs
> > RasterIO() to perform the read/write?
> >
> > I was trying different sizes for GDAL  cache from 64MB, 256MB, 512MB,
> > 1GB, and 2GB. The program got killed in all these cache sizes. In
> > fact, my Linux box became unresponsive when I set GDALSetCacheMax() to
> > 64MB.
> >
> > Thank you.
> > Ozy
> >
> >
> > ------------------------------------------------------------------------
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100113/6b468a8f/attachment.html
From sjahputerao at gmail.com  Wed Jan 13 12:18:50 2010
From: sjahputerao at gmail.com (ozy sjahputera)
Date: Wed Jan 13 12:18:53 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
	<f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>
Message-ID: <f97ce99d1001130918u68877243y8799855735dc100c@mail.gmail.com>

Update:

after more than 20 minutes of being non-responsive, the OS finally regained
functionality and promptly killed gdal_translate after about 80% into the
process.


On Wed, Jan 13, 2010 at 11:14 AM, ozy sjahputera <sjahputerao@gmail.com>wrote:

> Hi Even,
>
> yes, I tried:
> gdal_translate -of "NITF" -co "ICORDS=G" -co "BLOCKXSIZE=128" -co
> "BLOCKYSIZE=128"  NITF_IM:0:input.ntf output.ntf
>
> I monitored the memory use using top and it was steadily increasing till it
> reached 98.4% (I have 8GB of RAM and 140 GB of local disk for swap etc.)
> before the node died (not just the program, but the whole system just
> stopped responding).
>
> My GDAL version is 1.6.2.
>
> gdalinfo on this image shows the raster size of (37504, 98772) and
> Block=37504x1.
> The image is compressed using JPEG2000 option and contains two subdatasets
> (data and cloud data ~ I used only the data for gdal_translate test).
>
> Band info from gdalinfo:
> Band 1 Block=37504x1 Type=UInt16, ColorInterp=Gray
>
> Ozy
>
>
> On Tue, Jan 12, 2010 at 5:38 PM, Even Rouault <
> even.rouault@mines-paris.org> wrote:
>
>> Ozy,
>>
>> Did you try with gdal_translate -of NITF src.tif output.tif -co
>> BLOCKSIZE=128 ? Does it give similar results ?
>>
>> I'm a bit surprised that you even managed to read a 40Kx100K large NITF
>> file organized as scanlines. There was a limit until very recently that
>> prevented to read blocks whose one dimension was bigger than 9999. This
>> was fixed recently in trunk ( see ticket
>> http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it has
>> not yet been released to an officially released version. So which GDAL
>> version are you using ?
>>
>> Does the output of gdalinfo on your scanline oriented input NITF gives
>> something like :
>> Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray
>>
>> Is your input NITF compressed or uncompressed ?
>>
>> Anyway, with latest trunk, I've simulated creating a similarly large
>> NITF image with the following python snippet :
>>
>> import gdal
>> ds = gdal.GetDriverByName('NITF').Create('scanline.ntf', 40000, 100000)
>> ds = None
>>
>> and then creating the tiled NITF :
>>
>> gdal_translate -of NITF scanline.ntf tiled.ntf -co BLOCKSIZE=128
>>
>> The memory consumption is very reasonnable (less than 50 MB : the
>> default block cache size of 40 MB + temporary buffers ), so I'm not
>> clear why you would have a problem of increasing memory use.
>>
>> ozy sjahputera a ?crit :
>> > I was trying to make a copy of a very large NITF image (about 40Kx100K
>> > pixels) using GDALDriver::CreateCopy(). The new file was set to have
>> > different block-size (input was a scanline image, output is to have a
>> > 128x128 blocksize). The program keeps getting killed by the system
>> > (Linux). I monitor the memory use of the program as it was executing
>> > CreateCopy and the memory use was steadily increasing as the progress
>> > indicator from CreateCopy was moving forward.
>> >
>> > Why does CreateCopy() use so much memory? I have not perused the
>> > source code of CreateCopy() yet, but I am guessing it employs
>> > RasterIO() to perform the read/write?
>> >
>> > I was trying different sizes for GDAL  cache from 64MB, 256MB, 512MB,
>> > 1GB, and 2GB. The program got killed in all these cache sizes. In
>> > fact, my Linux box became unresponsive when I set GDALSetCacheMax() to
>> > 64MB.
>> >
>> > Thank you.
>> > Ozy
>> >
>> >
>> > ------------------------------------------------------------------------
>> >
>> > _______________________________________________
>> > gdal-dev mailing list
>> > gdal-dev@lists.osgeo.org
>> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100113/99d3f81c/attachment.html
From warmerdam at pobox.com  Wed Jan 13 12:51:24 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 13 12:51:08 2010
Subject: [gdal-dev] Motion: Paid Maintainer Contract with Chaitanya
Message-ID: <4B4E081C.1020408@pobox.com>

Motion: Frank Warmerdam is authorized to negotiate a paid maintainer
contract with Chaitanya Kumar CH for up to $9360 USD at $13USD/hr over
six months, and would be acting as supervisor, operating under the terms
of RFC 9 (GDAL Paid Maintainer Guidelines).

---

Folks,

Chaitanya's current paid maintainer contract ended and the end of December
and he has invoiced for the hours worked.  Both he and I are interested in
his continuing in the role, which has been helpful in resolving a number
of issues and moving the project forward.

I have not done a detailed analysis of our financial position as a project,
but I am confident we can cover the above amount for the first half of this
year.  It may be that Chaitanya will not be able to work the full number of
hours proposed (1560) as he has activities with OSGeo India that he is also
pursuing, so the above really establishes an upper bound.

In the coming weeks I hope to review our income from sponsorship renewals,
and our expenses to see what our financial position is.  Depending on how
that goes we might consider looking for another paid maintainer in
addition to Chaitanya, but I'll leave that till after the financial review.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Wed Jan 13 12:52:49 2010
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Wed Jan 13 12:52:56 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
Message-ID: <738927441001130952p139ec295oa5f962a9f4d2ba4d@mail.gmail.com>

>
> Date: Wed, 13 Jan 2010 10:27:43 -0500
> From: "Jason Roberts" <jason.roberts@duke.edu>
> Subject: RE: [gdal-dev] Open source vector geoprocessing libraries?
> To: "'Peter J Halls'" <P.Halls@york.ac.uk>
> Cc: 'gdal-dev' <gdal-dev@lists.osgeo.org>
> Message-ID: <008001ca9464$f4059f10$dc10dd30$@roberts@duke.edu>
> Content-Type: text/plain;       charset="US-ASCII"
>
> Peter,
>
> > are you constrained to retaining your data in an ArcGIS compatible
> format?
>
>
> We are attempting to build tools that can work with data stored in a
> variety
> of formats. Our current user community uses mostly shapefiles, ArcGIS
> personal geodatabases, and ArcGIS file geodatabases. Many of them are
> ecologists who do not have the interest or skills to deploy a real DBMS
> system. Thus we are hoping to provide tools that can work without one. This
> is one reason I was exploring how embeddable PostGIS and SpatiaLite might
> be
> in the other fork of this thread.
>
> > Until the File
> > Geodatabase format is published (later this year?) and someone has the
> effort to
> > build an OGR interface, the DBMS route is probably the best route to
> > compatibility.
>
> It would be really great for that to happen, but I'm not holding my breath.
> If it does get published, I would seriously contemplate building an OGR
> driver.
>
> I have contemplated building an ArcObjects- or arcgisscripting-based
> driver.
> This would at least allow people who have ArcGIS to use OGR to access any
> ArcGIS layer, including those created by ArcGIS's tools for joining
> arbitrary layers, etc. That would handle file geodatabases, as well as ALL
> formats accessible from ArcGIS. If such a driver existed, then we could use
> OGR as the base interface inside our application. But creating such a
> driver
> would be a lot of work and have funky dependencies because it either needs
> to use Windows COM (for ArcObjects) or Python (for arcgisscripting) to call
> the ArcGIS APIs. I am certainly capable of implementing it but because most
> of our code is in Python, it is probably easier for me to wrap OGR and
> arcgisscripting behind a common abstraction, and then have our tools work
> against that abstraction rather than OGR directly.
>
>
I find it very amusing you mention this right now.

Why?

I asked Frank if there was an ArcObjects based OGR driver this very past
Thursday and he said "not that I know of". What I wanted was, among other
things, to get data out of FileGDB to PostGIS with one shot and add some
custom behavior for a client of mine. So I spent the past three days looking
at OGR drivers and wrote an ArcObjects based one. I got it working
yesterday.

- Right now I only instantiate 3 factories (Enterprise GDB aka ArcSDE,
AccessDB and FileGDB). This means it reads FileGDB just fine. If you want
more factories, the driver only has to be modified with one line to add any
other factories and everything else would just work.

- I only implemented the parts that I needed, so it is readonly (should be
straight forward to expand if need be).

- Although, it can read other GeoDatabase abstractions (Topology, Geometric
Networks, Annotations, Cadastral Fabrics, etc), currently I am explicitly
filtering for FeatureClasses and FeatureDatasets.

- It is a ATL / COM / C++ based one, so it will only compile on Windows. It
can be modified to use the cross platform ArcEngine SDK since all the COM
Objects that I use are called the same and behave the same way... I just did
not have an ArcEngine SDK installer, so I could not test this.

Anyway, if you are interested in the source code, let me know. Perhaps we
can add it as an ogr driver contribution (what is the process for that
anyway?). I may not respond fast enough to e-mail, since the next 4 weeks
are pretty crazy for me.

- Ragi Burhum
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100113/bd5bfa6b/attachment-0001.html
From even.rouault at mines-paris.org  Wed Jan 13 14:12:15 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan 13 14:12:02 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <21DB2303-D758-421C-8DD5-EF9E48A67730@mac.com>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>	<4B4D0810.7060201@mines-paris.org>
	<21DB2303-D758-421C-8DD5-EF9E48A67730@mac.com>
Message-ID: <4B4E1B0F.3080301@mines-paris.org>

Greg,

You've probably missed that the issue raised by Ozy was with NITF, not 
with GeoTIFF....

> As a practical matter, I do not see this 9999 restriction in GDAL. On 
> Thu 21 Sep 2006, I created with gdal_merge.py a 3 GB .tif having 
> 18,400 columns by 52,800 rows by RGB. On Thu 11 Dec 
> 2009, gdal_translate processed a 150 GB untiled .tif to a tiled .tif 
> with 260,000 columns by 195,000 rows. Greg
>
> On Jan 12, 2010, at 6:38 PM, Even Rouault wrote:
>
>> I'm a bit surprised that you even managed to read a 40Kx100K large 
>> NITF file organized as scanlines. There was a limit until very 
>> recently that prevented to read blocks whose one dimension was bigger 
>> than 9999. This was fixed recently in trunk ( see 
>> ticket http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but 
>> it has not yet been released to an officially released version. So 
>> which GDAL version are you using ?
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From even.rouault at mines-paris.org  Wed Jan 13 14:46:22 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Wed Jan 13 14:46:10 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>	
	<4B4D0810.7060201@mines-paris.org>
	<f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>
Message-ID: <4B4E230E.1060507@mines-paris.org>

Ozy,

The interesting info is that your input image is JPEG2000 compressed. 
This explains why you were able to read a scanline oriented NITF with 
blockwidth > 9999. My guess would be that the leak is in the JPEG2000 
driver in question, so this may be more a problem on the reading part 
than on the writing part. You can check that by running : gdalinfo 
-checksum NITF_IM:0:input.ntf. If you see the memory increasing again 
and again, there's definitely a problem. In case you have GDAL 
configured with several JPEG2000 drivers, you'll have to find which one 
is used : JP2KAK (Kakadu based), JP2ECW (ECW SDK based), JPEG2000 
(Jasper based, but I doubt you're using it with such a big dataset), 
JP2MRSID. Normally, they are selected in the order I've described 
(JP2KAK first, etc). As you're on Linux, it might be interesting that 
you run valgrind to see if it reports leaks. As it might very slow on 
such a big dataset, you could try translating just a smaller window of 
your input dataset, like

valgrind --leak-check=full gdal_translate NITF_IM:0:input.ntf output.tif 
-srcwin 0 0 37504 128

I've selected TIF as output format as it shouldn't matter if you confirm 
that the problem is in the reading part. As far as the window size is 
concerned, it's difficult to guess which value will show the leak.

Filing a ticket with your findings on GDAL Trac might be appropriate.

It might be good trying with GDAL trunk first though, in case the leak 
might have been fixed since 1.6.2. The beta2 source zip are to be found 
here : http://download.osgeo.org/gdal/gdal-1.7.0b2.tar.gz

Best regards,

Even

ozy sjahputera a ?crit :
> Hi Even,
>
> yes, I tried:
> gdal_translate -of "NITF" -co "ICORDS=G" -co "BLOCKXSIZE=128" -co 
> "BLOCKYSIZE=128"  NITF_IM:0:input.ntf output.ntf
>
> I monitored the memory use using top and it was steadily increasing 
> till it reached 98.4% (I have 8GB of RAM and 140 GB of local disk for 
> swap etc.) before the node died (not just the program, but the whole 
> system just stopped responding).
>
> My GDAL version is 1.6.2.
>
> gdalinfo on this image shows the raster size of (37504, 98772) and 
> Block=37504x1. 
> The image is compressed using JPEG2000 option and contains two 
> subdatasets (data and cloud data ~ I used only the data for 
> gdal_translate test).
>
> Band info from gdalinfo:
> Band 1 Block=37504x1 Type=UInt16, ColorInterp=Gray
>
> Ozy
>
> On Tue, Jan 12, 2010 at 5:38 PM, Even Rouault 
> <even.rouault@mines-paris.org <mailto:even.rouault@mines-paris.org>> 
> wrote:
>
>     Ozy,
>
>     Did you try with gdal_translate -of NITF src.tif output.tif -co
>     BLOCKSIZE=128 ? Does it give similar results ?
>
>     I'm a bit surprised that you even managed to read a 40Kx100K large
>     NITF
>     file organized as scanlines. There was a limit until very recently
>     that
>     prevented to read blocks whose one dimension was bigger than 9999.
>     This
>     was fixed recently in trunk ( see ticket
>     http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it has
>     not yet been released to an officially released version. So which GDAL
>     version are you using ?
>
>     Does the output of gdalinfo on your scanline oriented input NITF gives
>     something like :
>     Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray
>
>     Is your input NITF compressed or uncompressed ?
>
>     Anyway, with latest trunk, I've simulated creating a similarly large
>     NITF image with the following python snippet :
>
>     import gdal
>     ds = gdal.GetDriverByName('NITF').Create('scanline.ntf', 40000,
>     100000)
>     ds = None
>
>     and then creating the tiled NITF :
>
>     gdal_translate -of NITF scanline.ntf tiled.ntf -co BLOCKSIZE=128
>
>     The memory consumption is very reasonnable (less than 50 MB : the
>     default block cache size of 40 MB + temporary buffers ), so I'm not
>     clear why you would have a problem of increasing memory use.
>
>     ozy sjahputera a ?crit :
>     > I was trying to make a copy of a very large NITF image (about
>     40Kx100K
>     > pixels) using GDALDriver::CreateCopy(). The new file was set to have
>     > different block-size (input was a scanline image, output is to
>     have a
>     > 128x128 blocksize). The program keeps getting killed by the system
>     > (Linux). I monitor the memory use of the program as it was executing
>     > CreateCopy and the memory use was steadily increasing as the
>     progress
>     > indicator from CreateCopy was moving forward.
>     >
>     > Why does CreateCopy() use so much memory? I have not perused the
>     > source code of CreateCopy() yet, but I am guessing it employs
>     > RasterIO() to perform the read/write?
>     >
>     > I was trying different sizes for GDAL  cache from 64MB, 256MB,
>     512MB,
>     > 1GB, and 2GB. The program got killed in all these cache sizes. In
>     > fact, my Linux box became unresponsive when I set
>     GDALSetCacheMax() to
>     > 64MB.
>     >
>     > Thank you.
>     > Ozy
>     >
>     >
>     >
>     ------------------------------------------------------------------------
>     >
>     > _______________________________________________
>     > gdal-dev mailing list
>     > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>


From mateusz at loskot.net  Wed Jan 13 15:19:50 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jan 13 15:20:00 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4DBB5D.6020804@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
Message-ID: <4B4E2AE6.1080707@loskot.net>

Jan Hartmann wrote:
> On 13-1-2010 2:33, Mateusz Loskot wrote:
>> 
>> OGR does not provide any spatial indexing layer common to various 
>> vector datasets. For many simple formats it performs the 
>> brute-force selection.
>> 
> Just curious, would it make sense / be possible to implement indexing
>  in OGR, something like a generalized version of Mapserver's shptree,
>  the "quadtree-based spatial index for a shapefiles"?

This implementation of index comes from Shapelib made by Frank.
The very same bits of Shapelib are used in MapServer and OGR,
namely .qix spatial index file support.
So, it's already there but for Shapefiles only.

Back to the question, I'm personally sceptic.
Recalling example with processing two layers, one from DBMS and one from
file-based data source, how it would be supposed to work?
...common .qix file generated for DBMS data source?

In my opinion, this kind of functionality is out of scope of OGR.
I see OGR as a data provider. OGR is basically a translation library
that reads from one data source and writes to another data source
providing set of reasonably limited features to process data during
translation - a common denominator for popular vector spatial
data formats.

IMHO, it's misunderstanding to consider OGR fully featured data model
and I/O engine to read, write, process and analyse spatial vector data,
especially if performance is a critical factor. IMHO, there are too many
compromises in OGR.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From mateusz at loskot.net  Wed Jan 13 15:59:25 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jan 13 15:59:32 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <007c01ca9462$ebc0fe00$c342fa00$@roberts@duke.edu>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$%roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>
	<007c01ca9462$ebc0fe00$c342fa00$@roberts@duke.edu>
Message-ID: <4B4E342D.4060205@loskot.net>

Jason Roberts wrote:
> Mateusz,
> 
> Thank you very much for your insight. I have a few more questions I'm
> hoping you could answer.
> 
>> Alternative is to try to divide the tasks: 1. Query features from
>> data source using spatial index capability of data source. 2.
>> Having only subject features selected, apply geometric processing.
> 
> That sounds like a reasonable approach. Considering just the simpler 
> scenarios, such as the one I mentioned, is it possible to implement 
> efficiently it with OGR compiled with GEOS?

Should be, but OGRGeometry -> geos::Geometry translation may be an overhead.

> I believe OGR can pass through SQL directly to the data source
> driver, allowing the caller to submit SQL containing spatial
> operators. In principle, one could submit a spatial query to PostGIS
> or SpatiaLite and efficiently get back the features (including 
> geometry) that could possibly intersect a bounding box. Then one
> could use the GEOS functions on OGRGeometry to do the actual
> intersecting. Is that what you were suggesting?

Yes, that's the concept

> Of course, it may be that PostGIS or SpatiaLite can handle both steps
> 1 and 2 in a single query. If so, would it be best to do it that way?
> 
It's usually a good idea to let the DBMS engine to do as much as
possible, so looks like a good idea to me.

> It appears that the OGR shapefile driver supports a spatial indexing
> scheme (.qix file) that is respected by OGRLayer::SetSpatialFilter.
> The documentation says that "Currently this test is may be
> inaccurately implemented, but it is guaranteed that all features
> who's envelope (as returned by OGRGeometry::getEnvelope()) overlaps
> the envelope of the spatial filter will be returned." Therefore, it
> appears that the shapefile driver can implement step 1 but not step
> 2. Is that correct?

Yes.

>> The problem with OGR and GEOS is cost of translation from OGR
>> geometry to GEOS geometry. It can be a bottleneck.
> 
> Is it correct that this cost would only be incurred when you call OGR
>  functions implemented by GEOS, such as OGRGeometry::Intersects, 
> OGRGeometry::Disjoint, etc?

Yes.

Namely, here potential cost takes place:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrgeometry.cpp#L333

>> It's plenty of combinations and my point is that if performance
>> (it's not only in terms of speed, but any resource) is critical, it
>> would be extremely difficult to provide efficient  implementation
>> of such features in OGR with guaranteed or even determinable degree
>> of complexity. Without these guarantees, I see little of use of 
>> such solution.
> 
> Yes, I see what you mean. But I suggest to the open source community
> that there is still value in implementing such features, either as
> part of OGR or another library, even if optimal performance cannot be
> guaranteed in all scenarios.

Perhaps you'll find these inspiring:

http://trac.osgeo.org/qgis/browser/trunk/qgis/src/analysis/vector

Look at the Java camp too.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From sjahputerao at gmail.com  Wed Jan 13 17:52:01 2010
From: sjahputerao at gmail.com (ozy sjahputera)
Date: Wed Jan 13 17:52:10 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <4B4E230E.1060507@mines-paris.org>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
	<f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>
	<4B4E230E.1060507@mines-paris.org>
Message-ID: <f97ce99d1001131452i55cfa0f6vad1138c39d6e6118@mail.gmail.com>

Even,

We use the JP2ECW driver.

I did the valgrind test and did not see any reported leak. Here is some of
the outputs from valgrind:

==11469== Invalid free() / delete / delete[]
==11469==    at 0x4C2222E: free (in
/usr/lib64/valgrind/amd64-linux/vgpreload_memcheck.so)
==11469==    by 0x95D1CDA: (within /lib64/libc-2.9.so)
==11469==    by 0x95D1879: (within /lib64/libc-2.9.so)
==11469==    by 0x4A1D60C: _vgnU_freeres (in
/usr/lib64/valgrind/amd64-linux/vgpreload_core.so)
==11469==    by 0x950AB98: exit (in /lib64/libc-2.9.so)
==11469==    by 0x94F55EA: (below main) (in /lib64/libc-2.9.so)
==11469==  Address 0x40366f0 is not stack'd, malloc'd or (recently) free'd
==11469==
==11469== ERROR SUMMARY: 13177 errors from 14 contexts (suppressed: 0 from
0)
==11469== malloc/free: in use at exit: 376 bytes in 9 blocks.
==11469== malloc/free: 8,856,910 allocs, 8,856,902 frees, 5,762,693,361
bytes allocated.
==11469== For counts of detected errors, rerun with: -v
==11469== Use --track-origins=yes to see where uninitialised values come
from
==11469== searching for pointers to 9 not-freed blocks.
==11469== checked 1,934,448 bytes.
==11469==
==11469== LEAK SUMMARY:
==11469==    definitely lost: 0 bytes in 0 blocks.
==11469==      possibly lost: 0 bytes in 0 blocks.
==11469==    still reachable: 376 bytes in 9 blocks.
==11469==         suppressed: 0 bytes in 0 blocks.
==11469== Reachable blocks (those to which a pointer was found) are not
shown.

I will check gdal trunk, but we are looking forward to an upgrade to 1.7.
For now, I try to find a scanline and uncompressed NITF image and perform
the same gdal_translate operation on it. If the memory use does not climb
when operating on uncompressed image, then we can say with more certainty
that the problems lay with JPG2000 drivers. I'll let you know.

Thanks.
Ozy

On Wed, Jan 13, 2010 at 1:46 PM, Even Rouault
<even.rouault@mines-paris.org>wrote:

> Ozy,
>
> The interesting info is that your input image is JPEG2000 compressed.
> This explains why you were able to read a scanline oriented NITF with
> blockwidth > 9999. My guess would be that the leak is in the JPEG2000
> driver in question, so this may be more a problem on the reading part
> than on the writing part. You can check that by running : gdalinfo
> -checksum NITF_IM:0:input.ntf. If you see the memory increasing again
> and again, there's definitely a problem. In case you have GDAL
> configured with several JPEG2000 drivers, you'll have to find which one
> is used : JP2KAK (Kakadu based), JP2ECW (ECW SDK based), JPEG2000
> (Jasper based, but I doubt you're using it with such a big dataset),
> JP2MRSID. Normally, they are selected in the order I've described
> (JP2KAK first, etc). As you're on Linux, it might be interesting that
> you run valgrind to see if it reports leaks. As it might very slow on
> such a big dataset, you could try translating just a smaller window of
> your input dataset, like
>
> valgrind --leak-check=full gdal_translate NITF_IM:0:input.ntf output.tif
> -srcwin 0 0 37504 128
>
> I've selected TIF as output format as it shouldn't matter if you confirm
> that the problem is in the reading part. As far as the window size is
> concerned, it's difficult to guess which value will show the leak.
>
> Filing a ticket with your findings on GDAL Trac might be appropriate.
>
> It might be good trying with GDAL trunk first though, in case the leak
> might have been fixed since 1.6.2. The beta2 source zip are to be found
> here : http://download.osgeo.org/gdal/gdal-1.7.0b2.tar.gz
>
> Best regards,
>
> Even
>
> ozy sjahputera a ?crit :
> > Hi Even,
> >
> > yes, I tried:
> > gdal_translate -of "NITF" -co "ICORDS=G" -co "BLOCKXSIZE=128" -co
> > "BLOCKYSIZE=128"  NITF_IM:0:input.ntf output.ntf
> >
> > I monitored the memory use using top and it was steadily increasing
> > till it reached 98.4% (I have 8GB of RAM and 140 GB of local disk for
> > swap etc.) before the node died (not just the program, but the whole
> > system just stopped responding).
> >
> > My GDAL version is 1.6.2.
> >
> > gdalinfo on this image shows the raster size of (37504, 98772) and
> > Block=37504x1.
> > The image is compressed using JPEG2000 option and contains two
> > subdatasets (data and cloud data ~ I used only the data for
> > gdal_translate test).
> >
> > Band info from gdalinfo:
> > Band 1 Block=37504x1 Type=UInt16, ColorInterp=Gray
> >
> > Ozy
> >
> > On Tue, Jan 12, 2010 at 5:38 PM, Even Rouault
> > <even.rouault@mines-paris.org <mailto:even.rouault@mines-paris.org>>
> > wrote:
> >
> >     Ozy,
> >
> >     Did you try with gdal_translate -of NITF src.tif output.tif -co
> >     BLOCKSIZE=128 ? Does it give similar results ?
> >
> >     I'm a bit surprised that you even managed to read a 40Kx100K large
> >     NITF
> >     file organized as scanlines. There was a limit until very recently
> >     that
> >     prevented to read blocks whose one dimension was bigger than 9999.
> >     This
> >     was fixed recently in trunk ( see ticket
> >     http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it
> has
> >     not yet been released to an officially released version. So which
> GDAL
> >     version are you using ?
> >
> >     Does the output of gdalinfo on your scanline oriented input NITF
> gives
> >     something like :
> >     Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray
> >
> >     Is your input NITF compressed or uncompressed ?
> >
> >     Anyway, with latest trunk, I've simulated creating a similarly large
> >     NITF image with the following python snippet :
> >
> >     import gdal
> >     ds = gdal.GetDriverByName('NITF').Create('scanline.ntf', 40000,
> >     100000)
> >     ds = None
> >
> >     and then creating the tiled NITF :
> >
> >     gdal_translate -of NITF scanline.ntf tiled.ntf -co BLOCKSIZE=128
> >
> >     The memory consumption is very reasonnable (less than 50 MB : the
> >     default block cache size of 40 MB + temporary buffers ), so I'm not
> >     clear why you would have a problem of increasing memory use.
> >
> >     ozy sjahputera a ?crit :
> >     > I was trying to make a copy of a very large NITF image (about
> >     40Kx100K
> >     > pixels) using GDALDriver::CreateCopy(). The new file was set to
> have
> >     > different block-size (input was a scanline image, output is to
> >     have a
> >     > 128x128 blocksize). The program keeps getting killed by the system
> >     > (Linux). I monitor the memory use of the program as it was
> executing
> >     > CreateCopy and the memory use was steadily increasing as the
> >     progress
> >     > indicator from CreateCopy was moving forward.
> >     >
> >     > Why does CreateCopy() use so much memory? I have not perused the
> >     > source code of CreateCopy() yet, but I am guessing it employs
> >     > RasterIO() to perform the read/write?
> >     >
> >     > I was trying different sizes for GDAL  cache from 64MB, 256MB,
> >     512MB,
> >     > 1GB, and 2GB. The program got killed in all these cache sizes. In
> >     > fact, my Linux box became unresponsive when I set
> >     GDALSetCacheMax() to
> >     > 64MB.
> >     >
> >     > Thank you.
> >     > Ozy
> >     >
> >     >
> >     >
> >
> ------------------------------------------------------------------------
> >     >
> >     > _______________________________________________
> >     > gdal-dev mailing list
> >     > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
> >     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
> >
> >
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100113/69d5fcc7/attachment-0001.html
From mateusz at loskot.net  Wed Jan 13 18:17:12 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jan 13 18:17:14 2010
Subject: [Gdal-dev] When GDAL 1.7.0 branch?
In-Reply-To: <4B4CD0FA.9010609@loskot.net>
References: <4B4C772B.5090200@loskot.net> <4B4CD020.9020402@pobox.com>
	<4B4CD0FA.9010609@loskot.net>
Message-ID: <1263424632699-4385486.post@n2.nabble.com>



Mateusz Loskot wrote:
> 
> Frank Warmerdam wrote:
>> Mateusz Loskot wrote:
>>> Hi,
>>>
>>> When the upcoming 1.7.0 will get its own branch in SVN?
>> 
>> Mateusz,
>> 
>> My normal practice is to produce a 1.7 branch at the point the first
>> RC is prepared.
> 
> Frank,
> 
> Great. Thanks!
> 

Frank,

One more thing if I may, the Wiki/Roadmap say the RC1 is planned on Dec 15,
2009.
I understand the schedule has changed. Would you have new date of RC1?

Best regards,

-----
-- 
Mateusz Loskot
http://mateusz.loskot.net
-- 
View this message in context: http://n2.nabble.com/When-GDAL-1-7-0-branch-tp4291455p4385486.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mrxonx at hotmail.com  Wed Jan 13 22:48:16 2010
From: mrxonx at hotmail.com (ogr user)
Date: Wed Jan 13 22:48:20 2010
Subject: [gdal-dev] UTF8/Wide chars in path
Message-ID: <4B4E9400.1090302@hotmail.com>

Dear all,

 I've been looking around GDAL codebase and I can't see anything that
would deal with wide/multybyte characters for file names/paths on
Windows. Would you please confirm that on Windows GDAL will only be able
to open files with pure ASCII names, not international charset?

-M
From j.l.h.hartmann at uva.nl  Thu Jan 14 04:01:46 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Thu Jan 14 04:02:02 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4E2AE6.1080707@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net>
Message-ID: <4B4EDD7A.6080204@uva.nl>



On 13-1-2010 21:19, Mateusz Loskot wrote:
>
> IMHO, it's misunderstanding to consider OGR fully featured data model
> and I/O engine to read, write, process and analyse spatial vector data,
> especially if performance is a critical factor. IMHO, there are too many
> compromises in OGR.
>
>    
OK, that is a very clear statement. I must say that I always thought of 
OGR as an independant GIS data model, the most encompassing of all, and 
that it could (in principle anyway) be used in some sort of stand-alone 
fashion.. I certainly can imagine, however, that for real applications 
it is not as optimal as more specialized formats.

Jan
From taviroquai at gmail.com  Thu Jan 14 06:04:21 2010
From: taviroquai at gmail.com (Marco Afonso)
Date: Thu Jan 14 06:04:24 2010
Subject: [gdal-dev] gdal_translate JPEG to GeoTiff (help! no one answered...)
Message-ID: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>

Hi all,

I'm new to gdal tools.

I'm trying to transform a JPEG world image to GeoTiff.

My jpeg world map image is cropped to fit on -180.0, -59.1, 180, 90 (minx,
miny, maxx, maxy - EPSG:4326).

Here are the steps:

% gdal_translate -of GTiff -a_srs EPSG:4326 -co "TILED=YES" -co
"JPEG_QUALITY=100" worldmap_hires2.jpg worldmap2.tif
Input file size is 15000, 6225
0...10...20...30...40...50...60...70...80...90...100 - done.
% sudo gdalinfo worldmap2.tif
Driver: GTiff/GeoTIFF
Files: worldmap2.tif
Size is 15000, 6225
Coordinate System is:
GEOGCS["WGS 84",
    DATUM["WGS_1984",
        SPHEROID["WGS 84",6378137,298.2572235629972,
            AUTHORITY["EPSG","7030"]],
        AUTHORITY["EPSG","6326"]],
    PRIMEM["Greenwich",0],
    UNIT["degree",0.0174532925199433],
    AUTHORITY["EPSG","4326"]]
Origin = (-180.017964071749986,59.117964071850004)
Pixel Size = (0.035928143500000,-0.035928143700000)
Metadata:
  AREA_OR_POINT=Area
Image Structure Metadata:
  INTERLEAVE=PIXEL
Corner Coordinates:
Upper Left  (-180.0179641,  59.1179641) (180d 1'4.67"W, 59d 7'4.67"N)
Lower Left  (    -180.018,    -164.535) (180d 1'4.67"W,164d32'5.03"S)
Upper Right (     358.904,      59.118) (358d54'15.08"E, 59d 7'4.67"N)
Lower Right (     358.904,    -164.535) (358d54'15.08"E,164d32'5.03"S)
Center      (  89.4431122, -52.7083832) ( 89d26'35.20"E, 52d42'30.18"S)
Band 1 Block=256x256 Type=Byte, ColorInterp=Red
Band 2 Block=256x256 Type=Byte, ColorInterp=Green
Band 3 Block=256x256 Type=Byte, ColorInterp=Blue

Corners are not what i want. I would like to obtain -180.0, -59.1, 180, 90
(minx, miny, maxx, maxy).

I'm using ubuntu 9.10 and the package gdal-bin 1.6.3-1

It there any problem with my image? What should I do?

Thanks in advance,
Marco



-- 
Best regards,
Marco Afonso
___________________________________
The soul is much more than the sum of all body parts
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100114/5e0c3e09/attachment.html
From mateusz at loskot.net  Thu Jan 14 06:59:55 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jan 14 06:55:23 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4EDD7A.6080204@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
Message-ID: <4B4F073B.20406@loskot.net>

Jan Hartmann wrote:
> On 13-1-2010 21:19, Mateusz Loskot wrote:
>>
>> IMHO, it's misunderstanding to consider OGR fully featured data model
>> and I/O engine to read, write, process and analyse spatial vector data,
>> especially if performance is a critical factor. IMHO, there are too many
>> compromises in OGR.
>>
>>    
> OK, that is a very clear statement.

Please, notice the IMHO at the beginning of my sentence.

Best regards.
-- 
Mateusz Loskot, http://mateusz.loskot.net
From chaitanya.ch at gmail.com  Thu Jan 14 07:18:43 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 14 07:18:47 2010
Subject: [gdal-dev] gdal_translate JPEG to GeoTiff (help! no one 
	answered...)
In-Reply-To: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>
References: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>
Message-ID: <eb502d881001140418g3cf59630y4b630b8b537a635d@mail.gmail.com>

Marco,

Please provide the gdalinfo of the source image.

On Thu, Jan 14, 2010 at 4:34 PM, Marco Afonso <taviroquai@gmail.com> wrote:

>
> Hi all,
>
> I'm new to gdal tools.
>
> I'm trying to transform a JPEG world image to GeoTiff.
>
> My jpeg world map image is cropped to fit on -180.0, -59.1, 180, 90 (minx,
> miny, maxx, maxy - EPSG:4326).
>
> Here are the steps:
>
> % gdal_translate -of GTiff -a_srs EPSG:4326 -co "TILED=YES" -co
> "JPEG_QUALITY=100" worldmap_hires2.jpg worldmap2.tif
> Input file size is 15000, 6225
> 0...10...20...30...40...50...60...70...80...90...100 - done.
> % sudo gdalinfo worldmap2.tif
> Driver: GTiff/GeoTIFF
> Files: worldmap2.tif
> Size is 15000, 6225
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.2572235629972,
>             AUTHORITY["EPSG","7030"]],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0],
>     UNIT["degree",0.0174532925199433],
>     AUTHORITY["EPSG","4326"]]
> Origin = (-180.017964071749986,59.117964071850004)
> Pixel Size = (0.035928143500000,-0.035928143700000)
> Metadata:
>   AREA_OR_POINT=Area
> Image Structure Metadata:
>   INTERLEAVE=PIXEL
> Corner Coordinates:
> Upper Left  (-180.0179641,  59.1179641) (180d 1'4.67"W, 59d 7'4.67"N)
> Lower Left  (    -180.018,    -164.535) (180d 1'4.67"W,164d32'5.03"S)
> Upper Right (     358.904,      59.118) (358d54'15.08"E, 59d 7'4.67"N)
> Lower Right (     358.904,    -164.535) (358d54'15.08"E,164d32'5.03"S)
> Center      (  89.4431122, -52.7083832) ( 89d26'35.20"E, 52d42'30.18"S)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Red
> Band 2 Block=256x256 Type=Byte, ColorInterp=Green
> Band 3 Block=256x256 Type=Byte, ColorInterp=Blue
>
> Corners are not what i want. I would like to obtain -180.0, -59.1, 180, 90
> (minx, miny, maxx, maxy).
>
> I'm using ubuntu 9.10 and the package gdal-bin 1.6.3-1
>
> It there any problem with my image? What should I do?
>
> Thanks in advance,
> Marco
>
>
>
> --
> Best regards,
> Marco Afonso
> ___________________________________
> The soul is much more than the sum of all body parts
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100114/650dc0b9/attachment.html
From frodewj at gmail.com  Thu Jan 14 08:25:31 2010
From: frodewj at gmail.com (=?UTF-8?Q?Frode_Wiseth_J=C3=B8rgensen?=)
Date: Thu Jan 14 08:25:33 2010
Subject: [Gdal-dev] OGR WFS driver
In-Reply-To: <491DA393.3040002@archivideo.com>
References: <491C5E94.60105@archivideo.com> <491C673F.2010704@pobox.com>
	<25bc040b0811131529l39a9e667x1eead69e3c0fd076@mail.gmail.com>
	<491DA393.3040002@archivideo.com>
Message-ID: <1263475531128-4392451.post@n2.nabble.com>


Hello

Was WFS support in OGR implemented?
I can't find any docs about it?


Regards
Frode Wiseth J?rgensen



Johan Nouvel wrote:
> 
> Hello,
> 
> Some informations about our driver :
> - It uses existing OGR GML driver to parse WFS server message and knows
> only gml 1.0 answer, so you must specified 
> answer in gml 1.0 in your requests to the server. It should not be
> difficult to add zipped gml, but for another format 
> (such as shape) it will be a more complex thing to do.
> - A specific request is done to get capabilities of a wfs server and a
> xerces parser is used to scan the answer
> - curl is directly used, no call to cpl_http.h, sorry.
> - It does not understand WFS style tag.
> - In fact, it is used to do geometric request on layers and parse the
> answer to produce ogr data.
> 
> Next week, I will try to build it directly in ogr (for gdal 1.5.3 release)
> and look into cpl_http.h.
> 
> As for being a commiter, I'm sorry but I can't do that during my working
> time.
> 
> Regards,
> Johan.
> 
> 
> -- 
> Johan Nouvel, R&D Engineer
> http://www.archivideo.com
> tel : +33 (0)2 99 86 30 20
> ARCHIVIDEO, 40 rue des Veyettes, 35000 RENNES, FRANCE
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
> 
> 

-- 
View this message in context: http://n2.nabble.com/OGR-WFS-driver-tp2035815p4392451.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From jason.roberts at duke.edu  Thu Jan 14 09:40:10 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan 14 09:40:21 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <738927441001130952p139ec295oa5f962a9f4d2ba4d@mail.gmail.com>
References: <738927441001130952p139ec295oa5f962a9f4d2ba4d@mail.gmail.com>
Message-ID: <001a01ca9527$798d0a70$6ca71f50$@roberts@duke.edu>

Ragi,

 

Nicely done. That is pretty funny. I'm sure there's a few others lurking on
the list who have thought of such a thing as well. Could you please send me
the code? Thanks!

 

Do you know if it would work if invoked from Python-based geoprocessing
tools? We expose a lot of our work to ArcGIS as those. An interesting
feature of these is that they can access layers created at run time by the
user in the ArcGIS applications. They can also run both in and out of the
ArcGIS process. The arcgisscripting Python API (and
esriGeoprocessing.GPDispatch COM object) use named pipes to communicate with
the application, or something like that. I am wondering if your driver would
have to initialize ArcObjects in a special way to somehow integrate with
that. I have never seen documentation from ESRI on how to use ArcObjects
from a "script-based" geoprocessing tool (only from a "function-based"
geoprocessing tool, which always runs in process and always uses
ArcObjects).

 

What is the startup cost like? I have written a lot of standalone Python
geoprocessing scripts that you run from the command line. These always take
a long time to initialize the geoprocessor (several 5 to 20 seconds,
depending on ArcGIS version) before I can call any APIs. I don't know if it
is because the geoprocessor is internally allocating an ArcObjects
"application" object, or if it is due to the license system (doesn't matter
if you use a local or remote license server). In any case, it would be great
if your driver did not suffer from this. I have not written any ArcObjects
programs that run outside of ArcGIS applications, so I don't know if it
would suffer this. (Sadly, I am betting yes.)

 

I do not know the process for submitting an OGR driver but the team seems
very receptive to user contributions. I would be happy to review the code
and offer comments (I'm also busy this month, so this might take some time).
Based on some thinking I've done in the past 24 hours, I'm not sure that I
will end up using it in my final application, but it would certainly be
valuable. There are periodic inquiries to gdal-dev about reading file
geodatabases, and your driver would solve that one.

 

There are precedents for other drivers that depend on other software (e.g.
Oracle, I think), so I don't think anyone will strenuously object to your
driver being dependent on COM and ArcObjects. Obviously it would have to be
an optional driver. It would be good to write some tests for it; that may be
a requirement from the GDAL team, although I doubt they are in a position to
run them as part of a normal GDAL release, as I don't think any of them have
ArcGIS.

 

A possible issue is that you'd probably need to recompile it every time a
different version of ArcGIS came out. Ideally, you would maintain versions
of it for each release of ArcGIS. The driver documentation should point out
to the user that they must obtain the right version. Alternatively you might
be able to craft one driver that dynamically determines the ArcGIS version
and does the right thing.

 

Best,

 

Jason

 

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Ragi Y. Burhum
Sent: Wednesday, January 13, 2010 12:53 PM
To: gdal-dev@lists.osgeo.org
Subject: RE: [gdal-dev] Open source vector geoprocessing libraries?

 

Date: Wed, 13 Jan 2010 10:27:43 -0500
From: "Jason Roberts" <jason.roberts@duke.edu>
Subject: RE: [gdal-dev] Open source vector geoprocessing libraries?
To: "'Peter J Halls'" <P.Halls@york.ac.uk>
Cc: 'gdal-dev' <gdal-dev@lists.osgeo.org>
Message-ID: <008001ca9464$f4059f10$dc10dd30$@roberts@duke.edu>
Content-Type: text/plain;       charset="US-ASCII"

Peter,

> are you constrained to retaining your data in an ArcGIS compatible format?


We are attempting to build tools that can work with data stored in a variety
of formats. Our current user community uses mostly shapefiles, ArcGIS
personal geodatabases, and ArcGIS file geodatabases. Many of them are
ecologists who do not have the interest or skills to deploy a real DBMS
system. Thus we are hoping to provide tools that can work without one. This
is one reason I was exploring how embeddable PostGIS and SpatiaLite might be
in the other fork of this thread.

> Until the File
> Geodatabase format is published (later this year?) and someone has the
effort to
> build an OGR interface, the DBMS route is probably the best route to
> compatibility.

It would be really great for that to happen, but I'm not holding my breath.
If it does get published, I would seriously contemplate building an OGR
driver.

I have contemplated building an ArcObjects- or arcgisscripting-based driver.
This would at least allow people who have ArcGIS to use OGR to access any
ArcGIS layer, including those created by ArcGIS's tools for joining
arbitrary layers, etc. That would handle file geodatabases, as well as ALL
formats accessible from ArcGIS. If such a driver existed, then we could use
OGR as the base interface inside our application. But creating such a driver
would be a lot of work and have funky dependencies because it either needs
to use Windows COM (for ArcObjects) or Python (for arcgisscripting) to call
the ArcGIS APIs. I am certainly capable of implementing it but because most
of our code is in Python, it is probably easier for me to wrap OGR and
arcgisscripting behind a common abstraction, and then have our tools work
against that abstraction rather than OGR directly.

 

I find it very amusing you mention this right now. 

 

Why?

 

I asked Frank if there was an ArcObjects based OGR driver this very past
Thursday and he said "not that I know of". What I wanted was, among other
things, to get data out of FileGDB to PostGIS with one shot and add some
custom behavior for a client of mine. So I spent the past three days looking
at OGR drivers and wrote an ArcObjects based one. I got it working
yesterday.

 

- Right now I only instantiate 3 factories (Enterprise GDB aka ArcSDE,
AccessDB and FileGDB). This means it reads FileGDB just fine. If you want
more factories, the driver only has to be modified with one line to add any
other factories and everything else would just work.

 

- I only implemented the parts that I needed, so it is readonly (should be
straight forward to expand if need be). 

 

- Although, it can read other GeoDatabase abstractions (Topology, Geometric
Networks, Annotations, Cadastral Fabrics, etc), currently I am explicitly
filtering for FeatureClasses and FeatureDatasets.

 

- It is a ATL / COM / C++ based one, so it will only compile on Windows. It
can be modified to use the cross platform ArcEngine SDK since all the COM
Objects that I use are called the same and behave the same way... I just did
not have an ArcEngine SDK installer, so I could not test this.

 

Anyway, if you are interested in the source code, let me know. Perhaps we
can add it as an ogr driver contribution (what is the process for that
anyway?). I may not respond fast enough to e-mail, since the next 4 weeks
are pretty crazy for me.

 

- Ragi Burhum

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100114/174cb91f/attachment-0001.html
From jason.roberts at duke.edu  Thu Jan 14 10:02:13 2010
From: jason.roberts at duke.edu (Jason Roberts)
Date: Thu Jan 14 10:02:21 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4E342D.4060205@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$%roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>
	<007c01ca9462$ebc0fe00$c342fa00$%roberts@duke.edu>
	<4B4E342D.4060205@loskot.net>
Message-ID: <002501ca952a$8e5635a0$ab02a0e0$@roberts@duke.edu>

> > Yes, I see what you mean. But I suggest to the open source community
> > that there is still value in implementing such features, either as
> > part of OGR or another library, even if optimal performance cannot be
> > guaranteed in all scenarios.
>
> Perhaps you'll find these inspiring:
>
> http://trac.osgeo.org/qgis/browser/trunk/qgis/src/analysis/vector

Thanks for the pointer. Yes those are inspiring, and also an example of what
prompted me to raise this topic in the beginning. Those are examples of how
QGIS implemented some basic geoprocessing with layers, e.g. intersect two
layers, symdiff two layers, and so on. My reason for raising the topic is
that each GIS has to reimplement those, and a lot of effort could be saved
if there were a common library of such functions. I was hoping such a
library already existed, and that I could draw from it (or even contribute
to it) for some spatial ecology tools that my team will be implementing,
with the goal of exposing these tools to multiple GIS programs, not just
ArcGIS as we currently do.

Many GIS projects support extensions. The authors realized the power of
contributions from the community. This can get very powerful when the
community converges on one program. For example, the R project has 2000
user-contributed packages. ArcGIS has thousands of user-contributed scripts
and tools. The open GIS community has many different GISes. This is a good
thing for various reasons, but it makes it hard for tool contributors to
reach lots of users: they must reimplement their tool for each different
GIS. If I pick QGIS then some users say "why not MapWindow"? Etc. It would
be great if there was a library, similar to the R CRAN project, that I could
contribute tools to without having to worry too much about all the
interoperability plumbing required to get the tool working with multiple
GISes. Perhaps I will try to start one. I'm already going to have to develop
that plumbing for my own project anyway.

Alternatively, is there one open source GIS that is accumulating all of the
market share, so to speak? If QGIS, for example, is becoming the most
popular then perhaps I could just pick it and ArcGIS, and not worry about
the others.

Anyway, thanks very much for your comments. They were very helpful.

Jason


From chaitanya.ch at gmail.com  Thu Jan 14 10:46:33 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 14 10:46:36 2010
Subject: [gdal-dev] gdal_translate JPEG to GeoTiff (help! no one 
	answered...)
In-Reply-To: <6701f59a1001140426o3f7a7dcdyfec7332ca214efd4@mail.gmail.com>
References: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>
	<eb502d881001140418g3cf59630y4b630b8b537a635d@mail.gmail.com>
	<6701f59a1001140426o3f7a7dcdyfec7332ca214efd4@mail.gmail.com>
Message-ID: <eb502d881001140746v1a01d1cam16f5a9d5e5b32714@mail.gmail.com>

Marco,

You mentioned that you cropped the original image. I guess you left
the meta-data containing the projection info intact. See if you get
the correct locations on the map with the original uncropped image.
Better yet, check the original image using the '-projwin' option in
gdal_translate.

On Thu, Jan 14, 2010 at 5:56 PM, Marco Afonso <taviroquai@gmail.com> wrote:
>
> Thanks for answering!
>
> Did not know that gdalinfo could give information about jpeg files.
> I thought that only files with geo-reference information, like GeoTiff, could give results.
>
> Here is:
>
> Driver: JPEG/JPEG JFIF
> Files: worldmap_hires2.jpg
> Size is 15000, 6225
> Coordinate System is `'
> Origin = (-180.017964071749986,59.117964071850004)
> Pixel Size = (0.035928143500000,-0.035928143700000)
> Image Structure Metadata:
> ? SOURCE_COLOR_SPACE=YCbCr
> ? INTERLEAVE=PIXEL
> ? COMPRESSION=JPEG
> Corner Coordinates:
> Upper Left? (-180.0179641,? 59.1179641)
> Lower Left? (??? -180.018,??? -164.535)
> Upper Right (???? 358.904,????? 59.118)
> Lower Right (???? 358.904,??? -164.535)
> Center????? (? 89.4431122, -52.7083832)
> Band 1 Block=15000x1 Type=Byte, ColorInterp=Red
> ? Image Structure Metadata:
> ??? COMPRESSION=JPEG
> Band 2 Block=15000x1 Type=Byte, ColorInterp=Green
> ? Image Structure Metadata:
> ??? COMPRESSION=JPEG
> Band 3 Block=15000x1 Type=Byte, ColorInterp=Blue
> ? Image Structure Metadata:
> ??? COMPRESSION=JPEG
>
> Ahh... I see the corners...
>
> What should i do to change the corners? I would like to obtain -180.0, -59.1, 180, 90 (minx, miny, maxx, maxy).
>
> --
> Best regards,
> Marco Afonso
> ___________________________________
> The soul is much more than the sum of all body parts


--
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From chaitanya.ch at gmail.com  Thu Jan 14 12:08:09 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 14 12:08:13 2010
Subject: [gdal-dev] gdal_translate JPEG to GeoTiff (help! no one 
	answered...)
In-Reply-To: <6701f59a1001140842v790137fmd81871eebf1baaa3@mail.gmail.com>
References: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>
	<eb502d881001140418g3cf59630y4b630b8b537a635d@mail.gmail.com>
	<6701f59a1001140426o3f7a7dcdyfec7332ca214efd4@mail.gmail.com>
	<eb502d881001140746v1a01d1cam16f5a9d5e5b32714@mail.gmail.com>
	<6701f59a1001140842v790137fmd81871eebf1baaa3@mail.gmail.com>
Message-ID: <eb502d881001140908y3e21ffb1u34b19a0f29bf0f30@mail.gmail.com>

Marco,

Check out the '-srcwin' and '-projwin' options in
http://www.gdal.org/gdal_translate.html

On Thu, Jan 14, 2010 at 10:12 PM, Marco Afonso <taviroquai@gmail.com> wrote:
> Hmm... I think I did more than just crop... I will check original images.
>
> Anyway... can i change the corners of this jpeg?
>
> After that, may I request your help again on this email?
>
> Thanks!
>
> 2010/1/14 Chaitanya kumar CH <chaitanya.ch@gmail.com>
>>
>> Marco,
>>
>> You mentioned that you cropped the original image. I guess you left
>> the meta-data containing the projection info intact. See if you get
>> the correct locations on the map with the original uncropped image.
>> Better yet, check the original image using the '-projwin' option in
>> gdal_translate.
>>
>> On Thu, Jan 14, 2010 at 5:56 PM, Marco Afonso <taviroquai@gmail.com>
>> wrote:
>> >
>> > Thanks for answering!
>> >
>> > Did not know that gdalinfo could give information about jpeg files.
>> > I thought that only files with geo-reference information, like GeoTiff,
>> > could give results.
>> >
>> > Here is:
>> >
>> > Driver: JPEG/JPEG JFIF
>> > Files: worldmap_hires2.jpg
>> > Size is 15000, 6225
>> > Coordinate System is `'
>> > Origin = (-180.017964071749986,59.117964071850004)
>> > Pixel Size = (0.035928143500000,-0.035928143700000)
>> > Image Structure Metadata:
>> > ? SOURCE_COLOR_SPACE=YCbCr
>> > ? INTERLEAVE=PIXEL
>> > ? COMPRESSION=JPEG
>> > Corner Coordinates:
>> > Upper Left? (-180.0179641,? 59.1179641)
>> > Lower Left? (??? -180.018,??? -164.535)
>> > Upper Right (???? 358.904,????? 59.118)
>> > Lower Right (???? 358.904,??? -164.535)
>> > Center????? (? 89.4431122, -52.7083832)
>> > Band 1 Block=15000x1 Type=Byte, ColorInterp=Red
>> > ? Image Structure Metadata:
>> > ??? COMPRESSION=JPEG
>> > Band 2 Block=15000x1 Type=Byte, ColorInterp=Green
>> > ? Image Structure Metadata:
>> > ??? COMPRESSION=JPEG
>> > Band 3 Block=15000x1 Type=Byte, ColorInterp=Blue
>> > ? Image Structure Metadata:
>> > ??? COMPRESSION=JPEG
>> >
>> > Ahh... I see the corners...
>> >
>> > What should i do to change the corners? I would like to obtain -180.0,
>> > -59.1, 180, 90 (minx, miny, maxx, maxy).
>> >
>> > --
>> > Best regards,
>> > Marco Afonso
>> > ___________________________________
>> > The soul is much more than the sum of all body parts
>>
>>
>> --
>> Best regards,
>> Chaitanya kumar CH.
>> /t?a???nj?/ /k?m?r/
>> +91-9848167848
>> 17.241582N 80.142635E
>
>
>
> --
> Best regards,
> Marco Afonso
> ___________________________________
> The soul is much more than the sum of all body parts
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
From warmerdam at pobox.com  Thu Jan 14 12:43:38 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 14 12:43:19 2010
Subject: [Gdal-dev] OGR WFS driver
In-Reply-To: <1263475531128-4392451.post@n2.nabble.com>
References: <491C5E94.60105@archivideo.com> <491C673F.2010704@pobox.com>
	<25bc040b0811131529l39a9e667x1eead69e3c0fd076@mail.gmail.com>
	<491DA393.3040002@archivideo.com>
	<1263475531128-4392451.post@n2.nabble.com>
Message-ID: <4B4F57CA.4080807@pobox.com>

Frode,

I'm not sure where the email from Johan came from.  Perhaps it was on
the list some time ago?

I am not aware of Johan, or anyone else, having contributed a WFS driver
to OGR. I do think it would be an interesting thing to have, and I have
contemplated doing one from time to time.

Best regards,

Frode Wiseth J?rgensen wrote:
> Hello
> 
> Was WFS support in OGR implemented?
> I can't find any docs about it?
> 
> 
> Regards
> Frode Wiseth J?rgensen
> 
> 
> 
> Johan Nouvel wrote:
>> Hello,
>>
>> Some informations about our driver :
>> - It uses existing OGR GML driver to parse WFS server message and knows
>> only gml 1.0 answer, so you must specified 
>> answer in gml 1.0 in your requests to the server. It should not be
>> difficult to add zipped gml, but for another format 
>> (such as shape) it will be a more complex thing to do.
>> - A specific request is done to get capabilities of a wfs server and a
>> xerces parser is used to scan the answer
>> - curl is directly used, no call to cpl_http.h, sorry.
>> - It does not understand WFS style tag.
>> - In fact, it is used to do geometric request on layers and parse the
>> answer to produce ogr data.
>>
>> Next week, I will try to build it directly in ogr (for gdal 1.5.3 release)
>> and look into cpl_http.h.
>>
>> As for being a commiter, I'm sorry but I can't do that during my working
>> time.
>>
>> Regards,
>> Johan.
>>
>>
>> -- 
>> Johan Nouvel, R&D Engineer
>> http://www.archivideo.com
>> tel : +33 (0)2 99 86 30 20
>> ARCHIVIDEO, 40 rue des Veyettes, 35000 RENNES, FRANCE
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>>
> 


-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From mateusz at loskot.net  Thu Jan 14 12:52:11 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jan 14 12:47:42 2010
Subject: [Gdal-dev] OGR WFS driver
In-Reply-To: <4B4F57CA.4080807@pobox.com>
References: <491C5E94.60105@archivideo.com>
	<491C673F.2010704@pobox.com>	<25bc040b0811131529l39a9e667x1eead69e3c0fd076@mail.gmail.com>	<491DA393.3040002@archivideo.com>	<1263475531128-4392451.post@n2.nabble.com>
	<4B4F57CA.4080807@pobox.com>
Message-ID: <4B4F59CB.2020204@loskot.net>

Frank Warmerdam wrote:
> Frode,
> 
> I'm not sure where the email from Johan came from.  Perhaps it was on
> the list some time ago?

Frank,

Yes, it's an old message:

http://lists.osgeo.org/pipermail/gdal-dev/2008-November/018946.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From warmerdam at pobox.com  Thu Jan 14 13:02:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 14 13:02:04 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4EDD7A.6080204@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
Message-ID: <4B4F5C2F.1070501@pobox.com>

Jan Hartmann wrote:
> 
> 
> On 13-1-2010 21:19, Mateusz Loskot wrote:
>>
>> IMHO, it's misunderstanding to consider OGR fully featured data model
>> and I/O engine to read, write, process and analyse spatial vector data,
>> especially if performance is a critical factor. IMHO, there are too many
>> compromises in OGR.
>>
>>    
> OK, that is a very clear statement. I must say that I always thought of 
> OGR as an independant GIS data model, the most encompassing of all, and 
> that it could (in principle anyway) be used in some sort of stand-alone 
> fashion.. I certainly can imagine, however, that for real applications 
> it is not as optimal as more specialized formats.

Folks,

My position would be that OGR attempts to address the simple features
data model well, but it is very lacking when you take a small step beyond
that.  For instance, there is no way to recognise relations between layers,
no standard way to understand non-simple features geometry models like
topological layers, and no metadata beyond the coordinate system.

Also, as I think Mateusz is suggesting, the performance characteristics
of different OGR drivers varies greatly.  That said, I think for many
applications OGR does a pretty good job of exposing the underlying
file formats / repositories in as efficient a means as is practical.
For instance, it is possible to pass SQL queries through to underlying
database where available for efficient evaluation, and there is a
mechanism to do fast (simple) spatial queries where the data store
supports it.

There is of course some non-trivial overhead converting underlying features
into OGRFeatures, and as was noted there is some performance impedance
between OGR and GEOS due to the need to translate geometries frequently.

I do still think it would be better to treat a geoprocessing library as
something built on top of OGR and GEOS rather than baked-in to OGR
but in part I think that because I'm not very comfortable that the
approaches are well enough understood to bake them in safely.

As I've mentioned before, I might make lots of mistakes with GDAL/OGR
but at least I don't fix them.  By that I mean once something is
baked into the API and the data model I try not to alter them in a
disruptive fashion.  That means, among other things, that some caution
is necessary before adding a lot of new functionality or extending the
model in a big way.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From even.rouault at mines-paris.org  Thu Jan 14 13:41:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 14 13:40:56 2010
Subject: [gdal-dev] Motion: Paid Maintainer Contract with Chaitanya
In-Reply-To: <4B4E081C.1020408@pobox.com>
References: <4B4E081C.1020408@pobox.com>
Message-ID: <4B4F6546.50707@mines-paris.org>

+1

Best regards,

Even

Frank Warmerdam a ?crit :
> Motion: Frank Warmerdam is authorized to negotiate a paid maintainer
> contract with Chaitanya Kumar CH for up to $9360 USD at $13USD/hr over
> six months, and would be acting as supervisor, operating under the terms
> of RFC 9 (GDAL Paid Maintainer Guidelines).
>
> ---
>
> Folks,
>
> Chaitanya's current paid maintainer contract ended and the end of 
> December
> and he has invoiced for the hours worked.  Both he and I are 
> interested in
> his continuing in the role, which has been helpful in resolving a number
> of issues and moving the project forward.
>
> I have not done a detailed analysis of our financial position as a 
> project,
> but I am confident we can cover the above amount for the first half of 
> this
> year.  It may be that Chaitanya will not be able to work the full 
> number of
> hours proposed (1560) as he has activities with OSGeo India that he is 
> also
> pursuing, so the above really establishes an upper bound.
>
> In the coming weeks I hope to review our income from sponsorship 
> renewals,
> and our expenses to see what our financial position is.  Depending on how
> that goes we might consider looking for another paid maintainer in
> addition to Chaitanya, but I'll leave that till after the financial 
> review.
>
> Best regards,


From hobu.inc at gmail.com  Thu Jan 14 14:17:27 2010
From: hobu.inc at gmail.com (Howard Butler)
Date: Thu Jan 14 14:22:05 2010
Subject: [gdal-dev] Motion: Paid Maintainer Contract with Chaitanya
In-Reply-To: <4B4F6546.50707@mines-paris.org>
References: <4B4E081C.1020408@pobox.com> <4B4F6546.50707@mines-paris.org>
Message-ID: <EB92982D-6561-4279-BFFE-6E1DFEAF1AFB@gmail.com>

+1 

Howard

On Jan 14, 2010, at 12:41 PM, Even Rouault wrote:

> +1
> 
> Best regards,
> 
> Even
> 
> Frank Warmerdam a ?crit :
>> Motion: Frank Warmerdam is authorized to negotiate a paid maintainer
>> contract with Chaitanya Kumar CH for up to $9360 USD at $13USD/hr over
>> six months, and would be acting as supervisor, operating under the terms
>> of RFC 9 (GDAL Paid Maintainer Guidelines).
>> 
>> ---
>> 
>> Folks,
>> 
>> Chaitanya's current paid maintainer contract ended and the end of December
>> and he has invoiced for the hours worked.  Both he and I are interested in
>> his continuing in the role, which has been helpful in resolving a number
>> of issues and moving the project forward.
>> 
>> I have not done a detailed analysis of our financial position as a project,
>> but I am confident we can cover the above amount for the first half of this
>> year.  It may be that Chaitanya will not be able to work the full number of
>> hours proposed (1560) as he has activities with OSGeo India that he is also
>> pursuing, so the above really establishes an upper bound.
>> 
>> In the coming weeks I hope to review our income from sponsorship renewals,
>> and our expenses to see what our financial position is.  Depending on how
>> that goes we might consider looking for another paid maintainer in
>> addition to Chaitanya, but I'll leave that till after the financial review.
>> 
>> Best regards,
> 
> 
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Thu Jan 14 14:42:56 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Thu Jan 14 14:43:31 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B4F5C2F.1070501@pobox.com>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
Message-ID: <46696.94.8.38.159.1263498176.squirrel@loskot.net>

Frank Warmerdam wrote:
> Jan Hartmann wrote:
>> On 13-1-2010 21:19, Mateusz Loskot wrote:
>>>
>>> IMHO, it's misunderstanding to consider OGR fully featured data model
>>> and I/O engine to read, write, process and analyse spatial vector data,
>>> especially if performance is a critical factor. IMHO, there are too
>>> many
>>> compromises in OGR.
>>>
>>>
>> OK, that is a very clear statement. I must say that I always thought of
>> OGR as an independant GIS data model, the most encompassing of all, and
>> that it could (in principle anyway) be used in some sort of stand-alone
>> fashion.. I certainly can imagine, however, that for real applications
>> it is not as optimal as more specialized formats.
>
> [...]
> Also, as I think Mateusz is suggesting, the performance characteristics
> of different OGR drivers varies greatly.

Yes. Also, most applications I've seen using OGR do define their own
data models and translate OGRFeature to features of their own types.
Perhaps it would be interesting to know why they don't use OGRFeature
as a part of their data model, what's missing...

> There is of course some non-trivial overhead converting underlying
> features into OGRFeatures, and as was noted there is some performance
> impedance between OGR and GEOS due to the need to translate
> geometries frequently.

There usually is yet another step (cost), it is translation from
OGRFeature to feature of application's data model.

An example:

http://trac.osgeo.org/qgis/browser/trunk/qgis/src/providers/ogr/

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From Chris.Barker at noaa.gov  Thu Jan 14 16:08:46 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan 14 16:05:58 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
Message-ID: <4B4F87DE.2060107@noaa.gov>

Hi folks,

I'm trying to use gdal(ogr) to read NGA vector nautical charts, which 
are in the vector product format. However, I"m having no luck.

I tried this a while ago (and posted to this list) but gave up before I 
got it workign then. Here is that thread:

http://n2.nabble.com/OGR-and-VPF-td2033115.html

I have gotten a chart from:

http://www.nga.mil/portal/site/dnc/

It looks like have the right directory stgructure after unpacking it:

$ ls -l A1611290/
total 32
-r--r--r--    1 cbarker  cbarker  1117 Jan 15  2009 CAT
dr-xr-xr-x   50 cbarker  cbarker  1700 Jan 15  2009 CUL
dr-xr-xr-x   22 cbarker  cbarker   748 Jan 15  2009 DQY
dr-xr-xr-x   44 cbarker  cbarker  1496 Jan 15  2009 ECR
dr-xr-xr-x   18 cbarker  cbarker   612 Jan 15  2009 ENV
-r--r--r--    1 cbarker  cbarker   848 Jan 15  2009 GRT
dr-xr-xr-x   39 cbarker  cbarker  1326 Jan 15  2009 HYD
dr-xr-xr-x   33 cbarker  cbarker  1122 Jan 15  2009 IWY
dr-xr-xr-x   29 cbarker  cbarker   986 Jan 15  2009 LCR
-r--r--r--    1 cbarker  cbarker  1214 Jan 15  2009 LHT
dr-xr-xr-x    9 cbarker  cbarker   306 Jan 15  2009 LIBREF
dr-xr-xr-x   54 cbarker  cbarker  1836 Jan 15  2009 LIM
-r--r--r--    1 cbarker  cbarker   188 Jan 15  2009 LINEAGE.DOC
dr-xr-xr-x   29 cbarker  cbarker   986 Jan 15  2009 NAV
dr-xr-xr-x   45 cbarker  cbarker  1530 Jan 15  2009 OBS
dr-xr-xr-x   29 cbarker  cbarker   986 Jan 15  2009 POR
dr-xr-xr-x   22 cbarker  cbarker   748 Jan 15  2009 REL
dr-xr-xr-x   13 cbarker  cbarker   442 Jan 15  2009 TILEREF


but I can't get orginfo to recognize it:

$ ogrinfo A1611290/
FAILURE:
Unable to open datasource `A1611290/' with the following drivers.
...
   -> OGDI

so I do have the OGDI driver installed (I'm using teh Kyng Chaos build 
on OS-X)

I've also tried all of these:

$ ogrinfo gltp:/vrf/A1611290
$ ogrinfo gltp:/vrf/A1611290/
$ ogrinfo gltp:/vrf/A1611290/DAT

$ ogrinfo gltp:/vrf/a1611110
  note that I lower-cased that one

If I try gdalinfo, I get the following error:

$ gdalinfo gltp:/vrf/a1611110
ERROR 1: Can't open CAT file, invalid VRF database
gdalinfo failed - unable to open 'gltp:/vrf/a1611110'.

there is indeed a CAT file there.

Any ideas?

Thanks,

-Chris

PS: I can send you that chart as a 644kb zip file, if anyone wants to 
try it.

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From chapmanm at pixia.com  Thu Jan 14 16:04:48 2010
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 14 16:09:37 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <4B4F87DE.2060107@noaa.gov>
References: <4B4F87DE.2060107@noaa.gov>
Message-ID: <1357184277-1263503309-cardhu_decombobulator_blackberry.rim.net-525646153-@bda664.bisx.prod.on.blackberry>

Do you have the OGDI driver built and configured into GDAL?

Martin
-----Original Message-----
From: Christopher Barker <Chris.Barker@noaa.gov>
Date: Thu, 14 Jan 2010 13:08:46 
To: 'gdal-dev'<gdal-dev@lists.osgeo.org>
Subject: [gdal-dev] reading VPF format NGA DNCs

Hi folks,

I'm trying to use gdal(ogr) to read NGA vector nautical charts, which 
are in the vector product format. However, I"m having no luck.

I tried this a while ago (and posted to this list) but gave up before I 
got it workign then. Here is that thread:

http://n2.nabble.com/OGR-and-VPF-td2033115.html

I have gotten a chart from:

http://www.nga.mil/portal/site/dnc/

It looks like have the right directory stgructure after unpacking it:

$ ls -l A1611290/
total 32
-r--r--r--    1 cbarker  cbarker  1117 Jan 15  2009 CAT
dr-xr-xr-x   50 cbarker  cbarker  1700 Jan 15  2009 CUL
dr-xr-xr-x   22 cbarker  cbarker   748 Jan 15  2009 DQY
dr-xr-xr-x   44 cbarker  cbarker  1496 Jan 15  2009 ECR
dr-xr-xr-x   18 cbarker  cbarker   612 Jan 15  2009 ENV
-r--r--r--    1 cbarker  cbarker   848 Jan 15  2009 GRT
dr-xr-xr-x   39 cbarker  cbarker  1326 Jan 15  2009 HYD
dr-xr-xr-x   33 cbarker  cbarker  1122 Jan 15  2009 IWY
dr-xr-xr-x   29 cbarker  cbarker   986 Jan 15  2009 LCR
-r--r--r--    1 cbarker  cbarker  1214 Jan 15  2009 LHT
dr-xr-xr-x    9 cbarker  cbarker   306 Jan 15  2009 LIBREF
dr-xr-xr-x   54 cbarker  cbarker  1836 Jan 15  2009 LIM
-r--r--r--    1 cbarker  cbarker   188 Jan 15  2009 LINEAGE.DOC
dr-xr-xr-x   29 cbarker  cbarker   986 Jan 15  2009 NAV
dr-xr-xr-x   45 cbarker  cbarker  1530 Jan 15  2009 OBS
dr-xr-xr-x   29 cbarker  cbarker   986 Jan 15  2009 POR
dr-xr-xr-x   22 cbarker  cbarker   748 Jan 15  2009 REL
dr-xr-xr-x   13 cbarker  cbarker   442 Jan 15  2009 TILEREF


but I can't get orginfo to recognize it:

$ ogrinfo A1611290/
FAILURE:
Unable to open datasource `A1611290/' with the following drivers.
...
   -> OGDI

so I do have the OGDI driver installed (I'm using teh Kyng Chaos build 
on OS-X)

I've also tried all of these:

$ ogrinfo gltp:/vrf/A1611290
$ ogrinfo gltp:/vrf/A1611290/
$ ogrinfo gltp:/vrf/A1611290/DAT

$ ogrinfo gltp:/vrf/a1611110
  note that I lower-cased that one

If I try gdalinfo, I get the following error:

$ gdalinfo gltp:/vrf/a1611110
ERROR 1: Can't open CAT file, invalid VRF database
gdalinfo failed - unable to open 'gltp:/vrf/a1611110'.

there is indeed a CAT file there.

Any ideas?

Thanks,

-Chris

PS: I can send you that chart as a 644kb zip file, if anyone wants to 
try it.

-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From Chris.Barker at noaa.gov  Thu Jan 14 16:21:51 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan 14 16:19:04 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <1357184277-1263503309-cardhu_decombobulator_blackberry.rim.net-525646153-@bda664.bisx.prod.on.blackberry>
References: <4B4F87DE.2060107@noaa.gov>
	<1357184277-1263503309-cardhu_decombobulator_blackberry.rim.net-525646153-@bda664.bisx.prod.on.blackberry>
Message-ID: <4B4F8AEF.3020904@noaa.gov>

Martin Chapman wrote:
> Do you have the OGDI driver built and configured into GDAL?

well, orginfo tells me:

FAILURE:
Unable to open datasource `gltp:/vrf/a1611110' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> DGN
   -> VRT
   -> REC
   -> Memory
   -> BNA
   -> CSV
   -> GML
   -> GPX
   -> KML
   -> GeoJSON
   -> Interlis 1
   -> Interlis 2
   -> GMT
   -> SQLite
   -> DODS
   -> ODBC
   -> PGeo
   -> OGDI
   -> PostgreSQL
   -> MySQL
   -> XPlane
   -> AVCBin
   -> AVCE00
   -> Geoconcept

OGDI is in there -- so I assume that it's built in -- how else can I tell?

thanks,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From chapmanm at pixia.com  Thu Jan 14 16:26:57 2010
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 14 16:30:44 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
Message-ID: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>

Looks to me like your gltp string is incorrect but I am not the authority on this. I have made it work before with vpf but as I remember you needed to get that gltp string right and I thought you needed to specify the layer with an @ sign. Look at the vpf / ogdi docs under ogr for an example.

Martin
------Original Message------
From: Christopher Barker
To: chapmanm@pixia.com
Cc: 'gdal-dev'
Subject: Re: [gdal-dev] reading VPF format NGA DNCs
Sent: Jan 14, 2010 2:21 PM

Martin Chapman wrote:
> Do you have the OGDI driver built and configured into GDAL?

well, orginfo tells me:

FAILURE:
Unable to open datasource `gltp:/vrf/a1611110' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> DGN
   -> VRT
   -> REC
   -> Memory
   -> BNA
   -> CSV
   -> GML
   -> GPX
   -> KML
   -> GeoJSON
   -> Interlis 1
   -> Interlis 2
   -> GMT
   -> SQLite
   -> DODS
   -> ODBC
   -> PGeo
   -> OGDI
   -> PostgreSQL
   -> MySQL
   -> XPlane
   -> AVCBin
   -> AVCE00
   -> Geoconcept

OGDI is in there -- so I assume that it's built in -- how else can I tell?

thanks,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From chapmanm at pixia.com  Thu Jan 14 16:44:00 2010
From: chapmanm at pixia.com (Martin Chapman)
Date: Thu Jan 14 16:45:13 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <4B4F8AEF.3020904@noaa.gov>
References: <4B4F87DE.2060107@noaa.gov>
	<1357184277-1263503309-cardhu_decombobulator_blackberry.rim.net-525646153-@bda664.bisx.prod.on.blackberry>
	<4B4F8AEF.3020904@noaa.gov>
Message-ID: <CD32EE5B957E457CA49377DB760E71C1@chapmanm64>

Chris,

Here is what the ogr docs say.  Look in the directory structure of the VPF
to see what layer names and family names you have:

gltp:[//<hostname>]/<driver_name>/<dataset_name>:<layer_name>:<family>

Where <layer_name> is the OGDI Layer name, and <family> is one of: "line",
"area", "point", or "text".

Usage example 'ogrinfo':

ogrinfo gltp:/vrf/usr4/mpp1/v0eur/vmaplv0/eurnasia 'watrcrsl@hydro(*)_line'

In the dataset name 'gltp:/vrf/usr4/mpp1/v0eur/vmaplv0/eurnasia' the
gltp:/vrf part is not really in the filesystem, but has to be added. The VPF
data was at /usr4/mpp1/v0eur/. The 'eurnasia' directory should be at the
same level as the dht. and lat. files. The 'hydro' reference is a
subdirectory of 'eurnasia/' where watrcrsl.* is found.

Usage examples VMAP0 to SHAPE conversion with 'ogr2ogr':

ogr2ogr watrcrsl.shp gltp:/vrf/usr4/mpp1/v0eur/vmaplv0/eurnasia
'watrcrsl@hydro(*)_line'

ogr2ogr polbnda.shp  gltp:/vrf/usr4/mpp1/v0eur/vmaplv0/eurnasia
'polbnda@bnd(*)_area'

An OGR SQL query against a VMAP dataset. Again, note the careful quoting of
the layer name.

ogrinfo -ro gltp:/vrf/usr4/mpp1/v0noa/vmaplv0/noamer \
           -sql 'select * from "polbndl@bnd(*)_line" where use=26'

Martin 

-----Original Message-----
From: Christopher Barker [mailto:Chris.Barker@noaa.gov] 
Sent: Thursday, January 14, 2010 2:22 PM
To: chapmanm@pixia.com
Cc: 'gdal-dev'
Subject: Re: [gdal-dev] reading VPF format NGA DNCs

Martin Chapman wrote:
> Do you have the OGDI driver built and configured into GDAL?

well, orginfo tells me:

FAILURE:
Unable to open datasource `gltp:/vrf/a1611110' with the following drivers.
   -> ESRI Shapefile
   -> MapInfo File
   -> UK .NTF
   -> SDTS
   -> TIGER
   -> S57
   -> DGN
   -> VRT
   -> REC
   -> Memory
   -> BNA
   -> CSV
   -> GML
   -> GPX
   -> KML
   -> GeoJSON
   -> Interlis 1
   -> Interlis 2
   -> GMT
   -> SQLite
   -> DODS
   -> ODBC
   -> PGeo
   -> OGDI
   -> PostgreSQL
   -> MySQL
   -> XPlane
   -> AVCBin
   -> AVCE00
   -> Geoconcept

OGDI is in there -- so I assume that it's built in -- how else can I tell?

thanks,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov

From warmerdam at pobox.com  Thu Jan 14 16:56:44 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 14 16:56:25 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>
References: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>
Message-ID: <4B4F931C.7000605@pobox.com>

Martin Chapman wrote:
> Looks to me like your gltp string is incorrect but I am not the authority on this. I have made it work before with vpf but as I remember you needed to get that gltp string right and I thought you needed to specify the layer with an @ sign. Look at the vpf / ogdi docs under ogr for an example.
> 
> Martin
> ------Original Message------
> From: Christopher Barker

Christopher,

For what it's worth, the connection string I use is:

   gltp:/vrf/home/warmerda/data/vpf/dnc13/h1316010

Within the h1316010 directory I have files in lower case:

warmerda@gdal64[105]% ls h1316010/
cat  dqy  env  hyd  lcr  libref  lineage.doc  obs  rel
cul  ecr  grt  iwy  lht  lim     nav          por  tileref

The driver is (I believe) case sensitive on linux/unix.  I can't
actually easily test this now as I don't have OGDI built into my development
build.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From rbuenger at aerometric.com  Thu Jan 14 18:06:17 2010
From: rbuenger at aerometric.com (Richard Buenger)
Date: Thu Jan 14 18:06:20 2010
Subject: [gdal-dev] suppressing libtiff warnings
Message-ID: <674f8afe1001141506t37e63c9ew6be1649cbe00b2f4@mail.gmail.com>

Is there some way to turn off libtiff warning messages generated by GDAL
calls?
How do I tell GDAL to set the libtiff warning handler to null?

using c# gdal wrapper in .NET

Thank you,

Richard
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100114/580bfe13/attachment.html
From Chris.Barker at noaa.gov  Thu Jan 14 18:33:19 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan 14 18:30:32 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <4B4F931C.7000605@pobox.com>
References: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>
	<4B4F931C.7000605@pobox.com>
Message-ID: <4B4FA9BF.3030000@noaa.gov>

Frank Warmerdam wrote:
> For what it's worth, the connection string I use is:
> 
>   gltp:/vrf/home/warmerda/data/vpf/dnc13/h1316010
> 
> Within the h1316010 directory I have files in lower case:
> 
> warmerda@gdal64[105]% ls h1316010/
> cat  dqy  env  hyd  lcr  libref  lineage.doc  obs  rel
> cul  ecr  grt  iwy  lht  lim     nav          por  tileref
> 
> The driver is (I believe) case sensitive on linux/unix.

That would explain it those are all upper-case on my machine -- I'll try 
lower-casing everything and see what I get.

thanks,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From Chris.Barker at noaa.gov  Thu Jan 14 19:04:01 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan 14 19:01:13 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <4B4FA9BF.3030000@noaa.gov>
References: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>
	<4B4F931C.7000605@pobox.com> <4B4FA9BF.3030000@noaa.gov>
Message-ID: <4B4FB0F1.403@noaa.gov>

Christopher Barker wrote:
> Frank Warmerdam wrote:
>> For what it's worth, the connection string I use is:
>>
>>   gltp:/vrf/home/warmerda/data/vpf/dnc13/h1316010
>>
>> Within the h1316010 directory I have files in lower case:
>>
>> warmerda@gdal64[105]% ls h1316010/
>> cat  dqy  env  hyd  lcr  libref  lineage.doc  obs  rel
>> cul  ecr  grt  iwy  lht  lim     nav          por  tileref
>>
>> The driver is (I believe) case sensitive on linux/unix.
> 
> That would explain it those are all upper-case on my machine -- I'll try 
> lower-casing everything and see what I get.

no luck.

However, when I give the full path:

ogrinfo gltp:/vrf/Users/cbarker/Temp/DNC/DNC16/A1611290/

I get:


vpf_open_table: error opening </Users/cbarker/Temp/DNC/DNC16/A1611290/LAT>

vpf_open_table: error opening </Users/cbarker/Temp/DNC/DNC16/A1611290/LAT>

which is a little better -- and indeed there is no "LAT" or "lat" in 
there -- maybe I don't have a fell set? Though I just downloaded it, and 
it sure looks like everything is there. Not that I"m sure what everythig 
is supposed to be.

Maybe I'll try on Windows...

Thanks,
-Chris




-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Thu Jan 14 19:15:43 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 14 19:16:02 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <4B4FB0F1.403@noaa.gov>
References: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>
	<4B4F931C.7000605@pobox.com> <4B4FA9BF.3030000@noaa.gov>
	<4B4FB0F1.403@noaa.gov>
Message-ID: <4B4FB3AF.1080701@pobox.com>

Christopher Barker wrote:
> vpf_open_table: error opening </Users/cbarker/Temp/DNC/DNC16/A1611290/LAT>
> 
> vpf_open_table: error opening </Users/cbarker/Temp/DNC/DNC16/A1611290/LAT>
> 
> which is a little better -- and indeed there is no "LAT" or "lat" in 
> there -- maybe I don't have a fell set? Though I just downloaded it, and 
> it sure looks like everything is there. Not that I"m sure what everythig 
> is supposed to be.

Chris,

I have a LAT file one above the product directory:

warmerda@gdal64[119]% pwd
/usr3/data/vpf/dnc13
warmerda@gdal64[120]% ls
a1316080  browse  dht  h1316010  lat

> Maybe I'll try on Windows...

That might at least avoid uppercase/lowercase issues.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From Chris.Barker at noaa.gov  Thu Jan 14 19:20:45 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Thu Jan 14 19:18:00 2010
Subject: [gdal-dev] reading VPF format NGA DNCs
In-Reply-To: <4B4FB0F1.403@noaa.gov>
References: <597584925-1263504634-cardhu_decombobulator_blackberry.rim.net-817213284-@bda664.bisx.prod.on.blackberry>
	<4B4F931C.7000605@pobox.com> <4B4FA9BF.3030000@noaa.gov>
	<4B4FB0F1.403@noaa.gov>
Message-ID: <4B4FB4DD.9010906@noaa.gov>

Christopher Barker wrote:
> However, when I give the full path:
> 
> ogrinfo gltp:/vrf/Users/cbarker/Temp/DNC/DNC16/A1611290/

aarrgg! got it! I have to take the last slash off! Darn this is picky!


In short, you need the full path, and you can't have a slash at the end.

It seems to work OK (so far) with the upper case names.

Thanks,

-Chris


-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From lzzgeo at yahoo.cn  Thu Jan 14 22:03:23 2010
From: lzzgeo at yahoo.cn (=?gb2312?B?wfXW0ta+ICA=?=)
Date: Thu Jan 14 22:10:10 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <20100114194337.945C8E01FB0@lists.osgeo.org>
Message-ID: <409851.37326.qm@web15001.mail.cnb.yahoo.com>

maybe we can check the source codes, and promoted that.
for example: when we get a feature from a layer , not create a new one every time, just return the same feature, but change the coordinate of features. 



      ___________________________________________________________ 
   
http://card.mail.cn.yahoo.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100115/94fe6b82/attachment.html
From P.Halls at york.ac.uk  Fri Jan 15 03:10:08 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Jan 15 03:10:18 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <46696.94.8.38.159.1263498176.squirrel@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>
	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>
	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
Message-ID: <4B5022E0.8090505@york.ac.uk>

Dear All,

Mateusz Loskot wrote:
%< Snip
> 
> Yes. Also, most applications I've seen using OGR do define their own
> data models and translate OGRFeature to features of their own types.
> Perhaps it would be interesting to know why they don't use OGRFeature
> as a part of their data model, what's missing...

Thinking about this in terms of my own programs, I think that it is not 
necessarily that OGRFeature is missing anything but rather that my program data 
structures (objects) are designed for some specific task.  So, for example, I 
have a program that reads from a GPS and creates OGRFeatures for storage 
somewhere using OGR; another uses OGR to read data of some format and then 
builds a Green & Sibson neighbourhood structure from the OGRFeatures in order to 
measure neighbourhood characteristics and writes or updates attribute tables; 
and so on.  These simple OGC-type features are, for me, ideal input into or 
output from what are primarily research models.  Indeed, were the data structure 
more complex, I should probably have to unpick it into a more simple structure, 
like OGRFeature, in order to build appropriate data structures for whatever it 
was I was doing.

Note: I am not using OGR as a component of a GIS, rather my programs are either 
extensions to GIS methodology (eg neighbours and cluster detection) or are 
designed to model the behaviour of some phenomenon.  I use OGR for format 
independent spatial object IO because it is easy to map OGR objects to my 
objects.  This means that I use my own object methods for tasks like 
intersection detection, etc, when needed.

Having said that, do I want more?  There are times when geometric topology is, 
or could be, very useful.  Currently, if I really want that, I create an ESRI 
'coverage' dataset and use that as input via infolib: its not necessarily ideal 
and I have no idea how long that format will persist, but it serves my needs 
well.  I do not think I would expect OGR to offer topology functions, though: I 
think I would expect to use a separate but related library to build topology 
from OGRFeatures.

> 
>> There is of course some non-trivial overhead converting underlying
>> features into OGRFeatures, and as was noted there is some performance
>> impedance between OGR and GEOS due to the need to translate
>> geometries frequently.
> 
> There usually is yet another step (cost), it is translation from
> OGRFeature to feature of application's data model.

This is very true and is probably inevitable, unless one is inventing the wheel 
yet again.  Of course, the overhead can be minimised by the use of appropriate 
structures and avoiding repetition.

Dunno how useful that is to anyone else, but if it is, then great.

Best wishes,

Peter

--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From j.l.h.hartmann at uva.nl  Fri Jan 15 05:04:12 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Jan 15 05:04:33 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B5022E0.8090505@york.ac.uk>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk>
Message-ID: <4B503D9C.1040802@uva.nl>

I was thinking along the same lines, but more in the direction of OGR as 
an archival standard.  I have been working with archives and stored maps 
all my life and am now busy with lots of digital historical maps. For 
raster maps the best storing format is Geotiff, from which all other 
formats can be derived if you want something small or quick for high 
performance purposes. For vector maps there is no such standard. Most 
vector maps are exchanged as shapefiles, but this is certainly not 
optimal. Some sort of file-based OGR format could perhaps fill this gap; 
conceptually, it certainly is the best model there is. For archival 
purposes however, there should be three additional options:

1) If a map is converted to OGR and converted back, there should be an 
option of getting it back byte-identical. Law #1 of archiving: always 
make sure that you can get back the original
2) For long term archival purposes, there should be an ascii format (XML 
or GeoJSON) associated with OGR. I have had to converted binary files 
from a 60-bits Cyber long ago, so I know what I am talking about. God 
knows what a computer word will look like in the age of quark-computers.
3) There should be some sort of lossless compression scheme associated 
with OGR

As to additional functionality, it wouldn't take first place for me, but 
it would be nice to have it, perhaps not baked into the format but as 
additional libraries and an API to be linked in:

1) Most of the time I do not need optimization for speed. I find it more 
important to create a work-flow with as few copying steps as possible 
(always a gigantic source of errors). Only at the last moment, e.g. for 
setting up a high performance server, I create the necessary production 
files, optimized for speed or memory space.
2) IMHO large vector maps are useless without indices. It would be nice 
to have an indexing scheme for these OGR maps, perhaps as standalone 
files, comparable to the OVR raster files used by gdaladdo.
3) Topology would be nice too. What to think about the way ArcGIS does 
it nowadays? It uses some sort of shapefiles as base maps, but computes 
the topology (you can choose different criteria) and puts it in separate 
files. There is work going on for topology in the PostGIS, I believe, 
but it is a horribly difficult subject, of course.
4) Regular GIS functions are already available via the GEOS library.
5) I am not a big fan of Metadata. Most maps are from governmental 
organisations, and my experience with Metadata is that those 
bureaucratic offices want to put the complete structure of their 
specific organisation into the definition of the map. It is impossible 
to get all these definitions into one overarching metadata system. The 
nice thing about maps is that every map can be combined with every 
other. The problem with (governmental) organisations is that they create 
their own small universums, which aren't compatible with other 
universums, and even don't know about each other's existence. It's like 
combining Euclidean and non-Euclidean universums, don't try it! There 
should be documentation associated with a map, of course, but that is 
different from the basic definition of a map in terms of points, lines 
polygons and projections.

Again and again, I am not asking for this functionality or even 
commenting on the ongoing work on OGR; I don't know enough about its 
internals or the way people are working on it to be in any way qualified 
for that. These are just the thoughts of a long-term (and very happy) 
GDAL/OGR user from an historical/archival point of view.

Jan

On 15-1-2010 9:10, Peter J Halls wrote:
> Dear All,
>
> Mateusz Loskot wrote:
> %< Snip
>>
>> Yes. Also, most applications I've seen using OGR do define their own
>> data models and translate OGRFeature to features of their own types.
>> Perhaps it would be interesting to know why they don't use OGRFeature
>> as a part of their data model, what's missing...
>
> Thinking about this in terms of my own programs, I think that it is 
> not necessarily that OGRFeature is missing anything but rather that my 
> program data structures (objects) are designed for some specific 
> task.  So, for example, I have a program that reads from a GPS and 
> creates OGRFeatures for storage somewhere using OGR; another uses OGR 
> to read data of some format and then builds a Green & Sibson 
> neighbourhood structure from the OGRFeatures in order to measure 
> neighbourhood characteristics and writes or updates attribute tables; 
> and so on.  These simple OGC-type features are, for me, ideal input 
> into or output from what are primarily research models.  Indeed, were 
> the data structure more complex, I should probably have to unpick it 
> into a more simple structure, like OGRFeature, in order to build 
> appropriate data structures for whatever it was I was doing.
>
> Note: I am not using OGR as a component of a GIS, rather my programs 
> are either extensions to GIS methodology (eg neighbours and cluster 
> detection) or are designed to model the behaviour of some phenomenon.  
> I use OGR for format independent spatial object IO because it is easy 
> to map OGR objects to my objects.  This means that I use my own object 
> methods for tasks like intersection detection, etc, when needed.
>
> Having said that, do I want more?  There are times when geometric 
> topology is, or could be, very useful.  Currently, if I really want 
> that, I create an ESRI 'coverage' dataset and use that as input via 
> infolib: its not necessarily ideal and I have no idea how long that 
> format will persist, but it serves my needs well.  I do not think I 
> would expect OGR to offer topology functions, though: I think I would 
> expect to use a separate but related library to build topology from 
> OGRFeatures.
>
>>
>>> There is of course some non-trivial overhead converting underlying
>>> features into OGRFeatures, and as was noted there is some performance
>>> impedance between OGR and GEOS due to the need to translate
>>> geometries frequently.
>>
>> There usually is yet another step (cost), it is translation from
>> OGRFeature to feature of application's data model.
>
> This is very true and is probably inevitable, unless one is inventing 
> the wheel yet again.  Of course, the overhead can be minimised by the 
> use of appropriate structures and avoiding repetition.
>
> Dunno how useful that is to anyone else, but if it is, then great.
>
> Best wishes,
>
> Peter
>
> -------------------------------------------------------------------------------- 
>
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806     Fax: 01904 433740
> Snail mail: Computing Service, University of York, Heslington, York 
> YO10 5DD
> This message has the status of a private and personal communication
> -------------------------------------------------------------------------------- 
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
From P.Halls at york.ac.uk  Fri Jan 15 06:25:10 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Fri Jan 15 06:25:16 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B503D9C.1040802@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
Message-ID: <4B505096.7010508@york.ac.uk>

Jan,

    for a vector archival format, surely GML is the nearest equivalent to 
Geotiff?  That should preserve all information; be vendor neutral; and it be 
possible to retrieve all information in the future.

Peter

Jan Hartmann wrote:
> I was thinking along the same lines, but more in the direction of OGR as 
> an archival standard.  I have been working with archives and stored maps 
> all my life and am now busy with lots of digital historical maps. For 
> raster maps the best storing format is Geotiff, from which all other 
> formats can be derived if you want something small or quick for high 
> performance purposes. For vector maps there is no such standard. Most 
> vector maps are exchanged as shapefiles, but this is certainly not 
> optimal. Some sort of file-based OGR format could perhaps fill this gap; 
> conceptually, it certainly is the best model there is. For archival 
> purposes however, there should be three additional options:
> 
> 1) If a map is converted to OGR and converted back, there should be an 
> option of getting it back byte-identical. Law #1 of archiving: always 
> make sure that you can get back the original
> 2) For long term archival purposes, there should be an ascii format (XML 
> or GeoJSON) associated with OGR. I have had to converted binary files 
> from a 60-bits Cyber long ago, so I know what I am talking about. God 
> knows what a computer word will look like in the age of quark-computers.
> 3) There should be some sort of lossless compression scheme associated 
> with OGR
> 
> As to additional functionality, it wouldn't take first place for me, but 
> it would be nice to have it, perhaps not baked into the format but as 
> additional libraries and an API to be linked in:
> 
> 1) Most of the time I do not need optimization for speed. I find it more 
> important to create a work-flow with as few copying steps as possible 
> (always a gigantic source of errors). Only at the last moment, e.g. for 
> setting up a high performance server, I create the necessary production 
> files, optimized for speed or memory space.
> 2) IMHO large vector maps are useless without indices. It would be nice 
> to have an indexing scheme for these OGR maps, perhaps as standalone 
> files, comparable to the OVR raster files used by gdaladdo.
> 3) Topology would be nice too. What to think about the way ArcGIS does 
> it nowadays? It uses some sort of shapefiles as base maps, but computes 
> the topology (you can choose different criteria) and puts it in separate 
> files. There is work going on for topology in the PostGIS, I believe, 
> but it is a horribly difficult subject, of course.
> 4) Regular GIS functions are already available via the GEOS library.
> 5) I am not a big fan of Metadata. Most maps are from governmental 
> organisations, and my experience with Metadata is that those 
> bureaucratic offices want to put the complete structure of their 
> specific organisation into the definition of the map. It is impossible 
> to get all these definitions into one overarching metadata system. The 
> nice thing about maps is that every map can be combined with every 
> other. The problem with (governmental) organisations is that they create 
> their own small universums, which aren't compatible with other 
> universums, and even don't know about each other's existence. It's like 
> combining Euclidean and non-Euclidean universums, don't try it! There 
> should be documentation associated with a map, of course, but that is 
> different from the basic definition of a map in terms of points, lines 
> polygons and projections.
> 
> Again and again, I am not asking for this functionality or even 
> commenting on the ongoing work on OGR; I don't know enough about its 
> internals or the way people are working on it to be in any way qualified 
> for that. These are just the thoughts of a long-term (and very happy) 
> GDAL/OGR user from an historical/archival point of view.
> 
> Jan
> 
> On 15-1-2010 9:10, Peter J Halls wrote:
>> Dear All,
>>
>> Mateusz Loskot wrote:
>> %< Snip
>>>
>>> Yes. Also, most applications I've seen using OGR do define their own
>>> data models and translate OGRFeature to features of their own types.
>>> Perhaps it would be interesting to know why they don't use OGRFeature
>>> as a part of their data model, what's missing...
>>
>> Thinking about this in terms of my own programs, I think that it is 
>> not necessarily that OGRFeature is missing anything but rather that my 
>> program data structures (objects) are designed for some specific 
>> task.  So, for example, I have a program that reads from a GPS and 
>> creates OGRFeatures for storage somewhere using OGR; another uses OGR 
>> to read data of some format and then builds a Green & Sibson 
>> neighbourhood structure from the OGRFeatures in order to measure 
>> neighbourhood characteristics and writes or updates attribute tables; 
>> and so on.  These simple OGC-type features are, for me, ideal input 
>> into or output from what are primarily research models.  Indeed, were 
>> the data structure more complex, I should probably have to unpick it 
>> into a more simple structure, like OGRFeature, in order to build 
>> appropriate data structures for whatever it was I was doing.
>>
>> Note: I am not using OGR as a component of a GIS, rather my programs 
>> are either extensions to GIS methodology (eg neighbours and cluster 
>> detection) or are designed to model the behaviour of some phenomenon.  
>> I use OGR for format independent spatial object IO because it is easy 
>> to map OGR objects to my objects.  This means that I use my own object 
>> methods for tasks like intersection detection, etc, when needed.
>>
>> Having said that, do I want more?  There are times when geometric 
>> topology is, or could be, very useful.  Currently, if I really want 
>> that, I create an ESRI 'coverage' dataset and use that as input via 
>> infolib: its not necessarily ideal and I have no idea how long that 
>> format will persist, but it serves my needs well.  I do not think I 
>> would expect OGR to offer topology functions, though: I think I would 
>> expect to use a separate but related library to build topology from 
>> OGRFeatures.
>>
>>>
>>>> There is of course some non-trivial overhead converting underlying
>>>> features into OGRFeatures, and as was noted there is some performance
>>>> impedance between OGR and GEOS due to the need to translate
>>>> geometries frequently.
>>>
>>> There usually is yet another step (cost), it is translation from
>>> OGRFeature to feature of application's data model.
>>
>> This is very true and is probably inevitable, unless one is inventing 
>> the wheel yet again.  Of course, the overhead can be minimised by the 
>> use of appropriate structures and avoiding repetition.
>>
>> Dunno how useful that is to anyone else, but if it is, then great.
>>
>> Best wishes,
>>
>> Peter
>>
>> -------------------------------------------------------------------------------- 
>>
>> Peter J Halls, GIS Advisor, University of York
>> Telephone: 01904 433806     Fax: 01904 433740
>> Snail mail: Computing Service, University of York, Heslington, York 
>> YO10 5DD
>> This message has the status of a private and personal communication
>> -------------------------------------------------------------------------------- 
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From j.l.h.hartmann at uva.nl  Fri Jan 15 06:59:31 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Fri Jan 15 06:59:47 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B505096.7010508@york.ac.uk>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B505096.7010508@york.ac.uk>
Message-ID: <4B5058A3.6040403@uva.nl>

Personally, I find GML far too complex to be of practical use (for my 
own purposes, mind). The GML 3.1 specification is 595 pages of small 
print, almost none of which are part of existing datasets. I just want 
to store existing datasets in a system-independent way, and preferably, 
to be able to read them directly into my applications. Perhaps GML is 
the future for new datasets in large governmental or international 
organisations, although I have my doubts about that, but for the job of 
archiving what already exists it is certainly overkill. I prefer a 
small, conceptually clear standard like OGR, that already can process 
everything that exists under the sun, and can be handled by individuals 
or small companies. I really dislike standards that require massive 
bureaucracies to get implemented. We've got enough of those here in 
Europe. Again IMHO.

Oh, and OGR already includes a subset of GML 2.0. Is this comparable 
with WCS/GDAL for raster maps?

http://www.gdal.org/ogr/drv_gml.html

Jan

On 15-1-2010 12:25, Peter J Halls wrote:
> Jan,
>
>    for a vector archival format, surely GML is the nearest equivalent 
> to Geotiff?  That should preserve all information; be vendor neutral; 
> and it be possible to retrieve all information in the future.
>
> Peter
>
> Jan Hartmann wrote:
>> I was thinking along the same lines, but more in the direction of OGR 
>> as an archival standard.  I have been working with archives and 
>> stored maps all my life and am now busy with lots of digital 
>> historical maps. For raster maps the best storing format is Geotiff, 
>> from which all other formats can be derived if you want something 
>> small or quick for high performance purposes. For vector maps there 
>> is no such standard. Most vector maps are exchanged as shapefiles, 
>> but this is certainly not optimal. Some sort of file-based OGR format 
>> could perhaps fill this gap; conceptually, it certainly is the best 
>> model there is. For archival purposes however, there should be three 
>> additional options:
>>
>> 1) If a map is converted to OGR and converted back, there should be 
>> an option of getting it back byte-identical. Law #1 of archiving: 
>> always make sure that you can get back the original
>> 2) For long term archival purposes, there should be an ascii format 
>> (XML or GeoJSON) associated with OGR. I have had to converted binary 
>> files from a 60-bits Cyber long ago, so I know what I am talking 
>> about. God knows what a computer word will look like in the age of 
>> quark-computers.
>> 3) There should be some sort of lossless compression scheme 
>> associated with OGR
>>
>> As to additional functionality, it wouldn't take first place for me, 
>> but it would be nice to have it, perhaps not baked into the format 
>> but as additional libraries and an API to be linked in:
>>
>> 1) Most of the time I do not need optimization for speed. I find it 
>> more important to create a work-flow with as few copying steps as 
>> possible (always a gigantic source of errors). Only at the last 
>> moment, e.g. for setting up a high performance server, I create the 
>> necessary production files, optimized for speed or memory space.
>> 2) IMHO large vector maps are useless without indices. It would be 
>> nice to have an indexing scheme for these OGR maps, perhaps as 
>> standalone files, comparable to the OVR raster files used by gdaladdo.
>> 3) Topology would be nice too. What to think about the way ArcGIS 
>> does it nowadays? It uses some sort of shapefiles as base maps, but 
>> computes the topology (you can choose different criteria) and puts it 
>> in separate files. There is work going on for topology in the 
>> PostGIS, I believe, but it is a horribly difficult subject, of course.
>> 4) Regular GIS functions are already available via the GEOS library.
>> 5) I am not a big fan of Metadata. Most maps are from governmental 
>> organisations, and my experience with Metadata is that those 
>> bureaucratic offices want to put the complete structure of their 
>> specific organisation into the definition of the map. It is 
>> impossible to get all these definitions into one overarching metadata 
>> system. The nice thing about maps is that every map can be combined 
>> with every other. The problem with (governmental) organisations is 
>> that they create their own small universums, which aren't compatible 
>> with other universums, and even don't know about each other's 
>> existence. It's like combining Euclidean and non-Euclidean 
>> universums, don't try it! There should be documentation associated 
>> with a map, of course, but that is different from the basic 
>> definition of a map in terms of points, lines polygons and projections.
>>
>> Again and again, I am not asking for this functionality or even 
>> commenting on the ongoing work on OGR; I don't know enough about its 
>> internals or the way people are working on it to be in any way 
>> qualified for that. These are just the thoughts of a long-term (and 
>> very happy) GDAL/OGR user from an historical/archival point of view.
>>
>> Jan
>>
>> On 15-1-2010 9:10, Peter J Halls wrote:
>>> Dear All,
>>>
>>> Mateusz Loskot wrote:
>>> %< Snip
>>>>
>>>> Yes. Also, most applications I've seen using OGR do define their own
>>>> data models and translate OGRFeature to features of their own types.
>>>> Perhaps it would be interesting to know why they don't use OGRFeature
>>>> as a part of their data model, what's missing...
>>>
>>> Thinking about this in terms of my own programs, I think that it is 
>>> not necessarily that OGRFeature is missing anything but rather that 
>>> my program data structures (objects) are designed for some specific 
>>> task.  So, for example, I have a program that reads from a GPS and 
>>> creates OGRFeatures for storage somewhere using OGR; another uses 
>>> OGR to read data of some format and then builds a Green & Sibson 
>>> neighbourhood structure from the OGRFeatures in order to measure 
>>> neighbourhood characteristics and writes or updates attribute 
>>> tables; and so on.  These simple OGC-type features are, for me, 
>>> ideal input into or output from what are primarily research models.  
>>> Indeed, were the data structure more complex, I should probably have 
>>> to unpick it into a more simple structure, like OGRFeature, in order 
>>> to build appropriate data structures for whatever it was I was doing.
>>>
>>> Note: I am not using OGR as a component of a GIS, rather my programs 
>>> are either extensions to GIS methodology (eg neighbours and cluster 
>>> detection) or are designed to model the behaviour of some 
>>> phenomenon.  I use OGR for format independent spatial object IO 
>>> because it is easy to map OGR objects to my objects.  This means 
>>> that I use my own object methods for tasks like intersection 
>>> detection, etc, when needed.
>>>
>>> Having said that, do I want more?  There are times when geometric 
>>> topology is, or could be, very useful.  Currently, if I really want 
>>> that, I create an ESRI 'coverage' dataset and use that as input via 
>>> infolib: its not necessarily ideal and I have no idea how long that 
>>> format will persist, but it serves my needs well.  I do not think I 
>>> would expect OGR to offer topology functions, though: I think I 
>>> would expect to use a separate but related library to build topology 
>>> from OGRFeatures.
>>>
>>>>
>>>>> There is of course some non-trivial overhead converting underlying
>>>>> features into OGRFeatures, and as was noted there is some performance
>>>>> impedance between OGR and GEOS due to the need to translate
>>>>> geometries frequently.
>>>>
>>>> There usually is yet another step (cost), it is translation from
>>>> OGRFeature to feature of application's data model.
>>>
>>> This is very true and is probably inevitable, unless one is 
>>> inventing the wheel yet again.  Of course, the overhead can be 
>>> minimised by the use of appropriate structures and avoiding repetition.
>>>
>>> Dunno how useful that is to anyone else, but if it is, then great.
>>>
>>> Best wishes,
>>>
>>> Peter
>>>
>>> -------------------------------------------------------------------------------- 
>>>
>>> Peter J Halls, GIS Advisor, University of York
>>> Telephone: 01904 433806     Fax: 01904 433740
>>> Snail mail: Computing Service, University of York, Heslington, York 
>>> YO10 5DD
>>> This message has the status of a private and personal communication
>>> -------------------------------------------------------------------------------- 
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From daniel.victoria at gmail.com  Fri Jan 15 07:36:43 2010
From: daniel.victoria at gmail.com (Daniel Victoria)
Date: Fri Jan 15 07:36:45 2010
Subject: [gdal-dev] Gdal / Python / Win7 crash with ReadAsArray()
Message-ID: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>

Hi,

I'm trying to use Gdal in a python program in Win7 (32 bit - portuguese).
I have python 2.6.2 and installed the gdal libraries following the
instructions in this page:
http://pypi.python.org/pypi/GDAL/
That is, I have the GDAL 1.6.1 python extension
(GDAL-1.6.1.win32-py2.6.exe) and installed Gdal 1.6
(gdalwin32exe160.zip).

I can open datasets and check their projection info with
GetProjection() but, if I try to read data from the dataset using
ReadAsArray() python crashes. Then windows gives the following error
message.

Anyone knows what could be wrong? The same installation procedure works on WinXP

Daniel

--------------------------  Error
---------------------------------------------------
Assinatura do problema:
  Nome do Evento de Problema:	APPCRASH
  Nome do Aplicativo:	python.exe
  Vers?o do Aplicativo:	0.0.0.0
  Carimbo de Data/Hora do Aplicativo:	49e4f549
  Nome do M?dulo de Falhas:	ntdll.dll
  Vers?o do M?dulo de Falhas:	6.1.7600.16385
  Carimbo de Data/Hora do M?dulo de Falhas:	4a5bdadb
  C?digo de Exce??o:	c0000005
  Deslocamento de Exce??o:	00051ffe
  Vers?o do sistema operacional:	6.1.7600.2.0.0.256.48
  Identifica??o da Localidade:	1046
  Informa??es Adicionais 1:	0a9e
  Informa??es Adicionais 2:	0a9e372d3b4ad19135b953a78882e789
  Informa??es Adicionais 3:	0a9e
  Informa??es Adicionais 4:	0a9e372d3b4ad19135b953a78882e789
From joelodom at gmail.com  Fri Jan 15 09:20:09 2010
From: joelodom at gmail.com (Joel Odom)
Date: Fri Jan 15 09:20:13 2010
Subject: [gdal-dev] Locking of Open Shapefile
Message-ID: <d422b4501001150620v36b09cacl7af718c611a07ca1@mail.gmail.com>

I've discovered that when I use OGRSFDriverRegistrar::Open to open a
Shapefile, the file remains locked so that another process can't open the
file until after I've called OGRDataSource::DestroyDataSource.  Is there any
way to prevent the file from being locked?  Thanks!


-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100115/82ad2bac/attachment.html
From guido at gps.nl  Fri Jan 15 09:33:33 2010
From: guido at gps.nl (gpsguido)
Date: Fri Jan 15 09:33:35 2010
Subject: [Gdal-dev] gdal_translate .tif to .ecw
Message-ID: <1263566013142-4399028.post@n2.nabble.com>


I want to convert .tif to .ecw . I use FWtools shell.
Would like to run it in batch so I have following:

for %f in (*.tif) do gdal_translate -of ECW -co "TARGET=92" -expand rgb -co
"DATUM=RD" -co "PROJ=DUTCHNEW" %f %f.ecw

with result in :

gdal_translate -of ECW -co "TARGET=92" -expand rgb -co "DATUM=RD" -co
"PROJ=DUTC
HNEW" 28a-25d-2009.tif 28a-25d-2009.tif.ecw

the problem is that the ecw is output in .tif.ecw , how can I make this work
with a output in only .ecw

I'm almost there just the last part.

guido 
-- 
View this message in context: http://n2.nabble.com/gdal-translate-tif-to-ecw-tp4399028p4399028.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From klokan at klokan.cz  Fri Jan 15 11:01:47 2010
From: klokan at klokan.cz (=?ISO-8859-2?Q?Klokan_Petr_P=F8idal?=)
Date: Fri Jan 15 11:02:08 2010
Subject: [gdal-dev] OziExplorer OZF binary format specification
Message-ID: <6e41d95b1001150801w27828ba1o3c9d91dc84b89b06@mail.gmail.com>

Hi folks!

I published at https://svn.osgeo.org/gdal/sandbox/klokan/ozf/ the
description, sample files and links to existing implementation of the
popular OziExplorers OZF2 and OZFx3 binary formats done by "hnedka"
user of the Global Mapper Forum.

The description is derived from the code of
http://code.google.com/p/ozex/ and http://code.google.com/p/swampex/.

If anybody is interested in implementing a driver for this format then
just go ahead!

More info at:
http://blog.klokan.cz/2010/01/oziexplorer-ozf-format-specification.html

Best regards,

Klokan Petr Pridal
--
http://blog.klokan.cz/
http://www.maptiler.org/
http://www.oldmapsonline.org/
From isaac.ullah at asu.edu  Fri Jan 15 13:13:06 2010
From: isaac.ullah at asu.edu (Isaac Ullah)
Date: Fri Jan 15 13:13:11 2010
Subject: [gdal-dev] error about gdal shared libraries from within GRASS
Message-ID: <4f33f75e1001151013n201a4d91ub87f02946d9a3807@mail.gmail.com>

Hi list,

    I have recently been trying to compile and install 64 bit GRASS7 with 64
bit GDAL1.6.3 on 64 bit Ubuntu 9.10. I have successfully compiled both
packages (with no errors), but am getting this error upon GRASS startup when
the GRASS gui loads and first tries to access GDAL:
g.list: error while loading shared libraries: libgdal.so.1: cannot open
shared object file: No such file or directory

I have that library installed in a standard location:
> whereis libgdal.so.1
libgdal.so: /usr/lib/libgdal.so.1 /usr/lib64/libgdal.so.1
/usr/local/lib/libgdal.so /usr/local/lib/libgdal.so.1

and even have made gdal.conf:
> cat /etc/ld.so.conf.d/gdal.conf
/usr/local/lib

And also, this file IS 64 bit:
> file /usr/local/lib/libgdal.so.1.13.3
/usr/local/lib/libgdal.so.1.13.3: ELF 64-bit LSB shared object, x86-64,
version 1 (SYSV), dynamically linked, not stripped

Even after explicitly setting
LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib before grass startup,
libgdal.so.1 is not found, even though echo $LD_LIBRARY_PATH produces:
/usr/local/grass7.0.svn-i686-pc-linux-gnu-28_11_2009/lib:/usr/local/lib

Result of ldd /usr/local/grass7.0.svn-28_11_2009/bin/g.list shows the only
problem: libgdal.so.1 => not found.

Here are some additional ldd responses:
ldd `which gdalinfo`
    linux-vdso.so.1 =>  (0x00007fff207ff000)
    libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00007fc141b91000)
    libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0x00007fc141975000)
    libgeos-3.2.0.so => /usr/local/lib/libgeos-3.2.0.so (0x00007fc1415fa000)
    libsqlite3.so.0 => /usr/lib/libsqlite3.so.0 (0x00007fc141372000)
    libodbc.so.1 => /usr/lib/libodbc.so.1 (0x00007fc141112000)
    libodbcinst.so.1 => /usr/lib/libodbcinst.so.1 (0x00007fc140f05000)
    libltdl.so.7 => /usr/lib/libltdl.so.7 (0x00007fc140cfb000)
    libexpat.so.1 => /lib/libexpat.so.1 (0x00007fc140ad2000)
    libxerces-c.so.28 => /usr/lib/libxerces-c.so.28 (0x00007fc1404ff000)
    libjasper.so.1 => /usr/lib/libjasper.so.1 (0x00007fc1402a8000)
    libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x00007fc140083000)
    libhdf5-1.6.6.so.0 => /usr/lib/libhdf5-1.6.6.so.0 (0x00007fc13fd60000)
    libz.so.1 => /lib/libz.so.1 (0x00007fc13fb49000)
    libmfhdf.so.4 => /usr/lib/libmfhdf.so.4 (0x00007fc13f921000)
    libdf.so.4 => /usr/lib/libdf.so.4 (0x00007fc13f66f000)
    libnetcdf.so.4 => /usr/lib/libnetcdf.so.4 (0x00007fc13f43c000)
    libpq.so.5 => /usr/lib/libpq.so.5 (0x00007fc13f214000)
    libpthread.so.0 => /lib/libpthread.so.0 (0x00007fc13eff8000)
    librt.so.1 => /lib/librt.so.1 (0x00007fc13edf0000)
    libdl.so.2 => /lib/libdl.so.2 (0x00007fc13ebec000)
    libcurl-gnutls.so.4 => /usr/lib/libcurl-gnutls.so.4 (0x00007fc13e9aa000)
    libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00007fc13e69a000)
    libm.so.6 => /lib/libm.so.6 (0x00007fc13e416000)
    libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007fc13e1ff000)
    libc.so.6 => /lib/libc.so.6 (0x00007fc13de90000)
    libicuuc.so.40 => /usr/lib/libicuuc.so.40 (0x00007fc13db48000)
    libicudata.so.40 => /usr/lib/libicudata.so.40 (0x00007fc13cc03000)
    libssl.so.0.9.8 => /lib/libssl.so.0.9.8 (0x00007fc13c9b5000)
    libcrypto.so.0.9.8 => /lib/libcrypto.so.0.9.8 (0x00007fc13c62e000)
    libkrb5.so.3 => /usr/lib/libkrb5.so.3 (0x00007fc13c376000)
    libcom_err.so.2 => /lib/libcom_err.so.2 (0x00007fc13c172000)
    libgssapi_krb5.so.2 => /usr/lib/libgssapi_krb5.so.2 (0x00007fc13bf44000)
    libcrypt.so.1 => /lib/libcrypt.so.1 (0x00007fc13bd0b000)
    libldap_r-2.4.so.2 => /usr/lib/libldap_r-2.4.so.2 (0x00007fc13bac2000)
    /lib64/ld-linux-x86-64.so.2 (0x00007fc142692000)
    libidn.so.11 => /usr/lib/libidn.so.11 (0x00007fc13b88f000)
    liblber-2.4.so.2 => /usr/lib/liblber-2.4.so.2 (0x00007fc13b681000)
    libgnutls.so.26 => /usr/lib/libgnutls.so.26 (0x00007fc13b3df000)
    libgcrypt.so.11 => /lib/libgcrypt.so.11 (0x00007fc13b167000)
    libk5crypto.so.3 => /usr/lib/libk5crypto.so.3 (0x00007fc13af3c000)
    libkrb5support.so.0 => /usr/lib/libkrb5support.so.0 (0x00007fc13ad34000)
    libkeyutils.so.1 => /lib/libkeyutils.so.1 (0x00007fc13ab31000)
    libresolv.so.2 => /lib/libresolv.so.2 (0x00007fc13a918000)
    libsasl2.so.2 => /usr/lib/libsasl2.so.2 (0x00007fc13a6fe000)
    libtasn1.so.3 => /usr/lib/libtasn1.so.3 (0x00007fc13a4ed000)
    libgpg-error.so.0 => /lib/libgpg-error.so.0 (0x00007fc13a2e9000)


I have asked on the GRASS dev list, but everyone is stumped there and feel
that it is soemthing to do with how Ihave installed GDAL on my system rather
than a GRASS thing. Do any of you have any idea why gdal libraries seem to
be invisible to GRASS on my system? Oh, and yes, I do run ldconfig every
time I fool with libraries or conf files.

Any help will be greatly appreciated,

Cheers,
-- 
Isaac I Ullah, M.A.

Archaeology PhD Candidate,
ASU School of Evolution and Social Change

Research Assistant,
Mediterranean Landscape Dynamics Project
***************************************************
isaac.ullah@asu.edu
ullah@archaeologist.com

http://www.public.asu.edu/~iullah
***************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100115/fe7eb032/attachment.html
From hellik at web.de  Fri Jan 15 13:14:42 2010
From: hellik at web.de (Helmut Kudrnovsky)
Date: Fri Jan 15 13:35:27 2010
Subject: [gdal-dev] gdal + ace2-data
Message-ID: <19328307.7508.1263579283288.JavaMail.fmail@fmcert01.dlan.cinetic.de>

hi,

has anyone information if gdal is able to read "ACE - Altimeter Corrected Elevations"-DEM-data from ESA?

overview ace2-data
http://www.cse.dmu.ac.uk/EAPRS/products_ace_overview.html

3 SECOND DATASET - Data_Format_and_Source_3S
http://tethys.eaprs.cse.dmu.ac.uk/ACE2/docs/Data_Format_and_Source_3S.doc

best regards
Helmut
______________________________________________________
GRATIS f?r alle WEB.DE-Nutzer: Die maxdome Movie-FLAT!
Jetzt freischalten unter http://movieflat.web.de

-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/pkcs7-signature
Size: 1747 bytes
Desc: S/MIME Cryptographic Signature
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100115/bbdba8e2/smime.bin
From even.rouault at mines-paris.org  Fri Jan 15 15:48:40 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 15 15:48:51 2010
Subject: [gdal-dev] gdal + ace2-data
In-Reply-To: <19328307.7508.1263579283288.JavaMail.fmail@fmcert01.dlan.cinetic.de>
References: <19328307.7508.1263579283288.JavaMail.fmail@fmcert01.dlan.cinetic.de>
Message-ID: <4B50D4A8.3090507@mines-paris.org>

Helmut,

 From the doc, the ACE tiles are just raw files. So this is the perfect 
use case for using VRT descriptions for raw files : 
http://www.gdal.org/gdal_vrttut.html#gdal_vrttut_vrt

For example, for the 30N000E.ACE file, you can create a 30N000E.VRT 
description file

<VRTDataset rasterXSize="1800" rasterYSize="1800">
  <SRS>GEOGCS[&quot;WGS 
84&quot;,DATUM[&quot;WGS_1984&quot;,SPHEROID[&quot;WGS 
84&quot;,6378137,298.257223563,AUTHORITY[&quot;EPSG&quot;,&quot;7030&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;6326&quot;]],PRIMEM[&quot;Greenwich&quot;,0,AUTHORITY[&quot;EPSG&quot;,&quot;8901&quot;]],UNIT[&quot;degree&quot;,0.01745329251994328,AUTHORITY[&quot;EPSG&quot;,&quot;9122&quot;]],AUTHORITY[&quot;EPSG&quot;,&quot;4326&quot;]]</SRS>
  <GeoTransform>0, 0.0083333333333333332, 0.0, 45, 0.0, 
-0.0083333333333333332</GeoTransform>
  <VRTRasterBand dataType="Int16" band="1" subClass="VRTRawRasterBand">
    <SourceFilename relativetoVRT="1">30N000E.ACE</SourceFilename>
    <NoDataValue>-500.0</NoDataValue>
    <ImageOffset>0</ImageOffset>
    <PixelOffset>2</PixelOffset>
    <LineOffset>3600</LineOffset>
    <ByteOrder>LSB</ByteOrder>
  </VRTRasterBand>
</VRTDataset>

This VRT file can then be used as a regular GDAL dataset.

After having created all the VRT for each tile, you can generate a 
global VRT file which is the mosaic of all tiles

I've created a section on my page http://even.rouault.free.fr/ with the 
source code to generate all the .VRT files for each tile. There's also a 
.ZIP with all the VRTs and the global VRT already generated.

Best regards,

Even


Helmut Kudrnovsky a ?crit :
> hi,
>
> has anyone information if gdal is able to read "ACE - Altimeter Corrected Elevations"-DEM-data from ESA?
>
> overview ace2-data
> http://www.cse.dmu.ac.uk/EAPRS/products_ace_overview.html
>
> 3 SECOND DATASET - Data_Format_and_Source_3S
> http://tethys.eaprs.cse.dmu.ac.uk/ACE2/docs/Data_Format_and_Source_3S.doc
>
> best regards
> Helmut
> ______________________________________________________
> GRATIS f?r alle WEB.DE-Nutzer: Die maxdome Movie-FLAT!
> Jetzt freischalten unter http://movieflat.web.de
>
>   
> ------------------------------------------------------------------------
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From Chris.Barker at noaa.gov  Fri Jan 15 16:43:27 2010
From: Chris.Barker at noaa.gov (Christopher Barker)
Date: Fri Jan 15 16:40:37 2010
Subject: [gdal-dev] Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
Message-ID: <4B50E17F.9000204@noaa.gov>

Daniel Victoria wrote:
> I'm trying to use Gdal in a python program in Win7 (32 bit - portuguese).
> I have python 2.6.2 and installed the gdal libraries following the
> instructions in this page:
> http://pypi.python.org/pypi/GDAL/
> That is, I have the GDAL 1.6.1 python extension
> (GDAL-1.6.1.win32-py2.6.exe) and installed Gdal 1.6
> (gdalwin32exe160.zip).

what numpy version are you using (though I'm not sure what numpy version 
that exe was built against). That may be an issue.

-Chris



-- 
Christopher Barker, Ph.D.
Oceanographer

Emergency Response Division
NOAA/NOS/OR&R            (206) 526-6959   voice
7600 Sand Point Way NE   (206) 526-6329   fax
Seattle, WA  98115       (206) 526-6317   main reception

Chris.Barker@noaa.gov
From warmerdam at pobox.com  Fri Jan 15 20:40:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 15 20:40:51 2010
Subject: [gdal-dev] Locking of Open Shapefile
In-Reply-To: <d422b4501001150620v36b09cacl7af718c611a07ca1@mail.gmail.com>
References: <d422b4501001150620v36b09cacl7af718c611a07ca1@mail.gmail.com>
Message-ID: <4B51190F.9070704@pobox.com>

Joel Odom wrote:
> I've discovered that when I use OGRSFDriverRegistrar::Open to open a 
> Shapefile, the file remains locked so that another process can't open 
> the file until after I've called OGRDataSource::DestroyDataSource.  Is 
> there any way to prevent the file from being locked?  Thanks!

Joel,

Modern versions of GDAL/OGR route the open request for .shp and .dbf
files through VSIFOpenL().  The Win32 implmentation calls CreateFile()
with the sharing flags:

   FILE_SHARE_READ | FILE_SHARE_WRITE

As far as I know, this means that any other application which also tries
to open the files allowing shared access should be ok.  Is it possible
you are using quite an old version of GDAL/OGR?  Or that the other
application is requesting exclusive access?

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan 15 21:01:24 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 15 21:01:44 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B503D9C.1040802@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
Message-ID: <4B511DF4.3070906@pobox.com>

Jan Hartmann wrote:
> 1) If a map is converted to OGR and converted back, there should be an 
> option of getting it back byte-identical. Law #1 of archiving: always 
> make sure that you can get back the original

Jan,

I think this is generally impractical with most OGR formats.  In
most cases "ogr2ogr" from a  file to a new file of the same file
format will not be byte identical.

Instead, if this is a goal of archiving, I'd suggest archiving
the original data (in a possibly arcane format), and a copy in
a more accessable format likely to still be usable decades later.

> 2) For long term archival purposes, there should be an ascii format (XML 
> or GeoJSON) associated with OGR. I have had to converted binary files 
> from a 60-bits Cyber long ago, so I know what I am talking about. God 
> knows what a computer word will look like in the age of quark-computers.

It would be relatively easy to have an XML format which is a lossless
dump of what OGR knows through it's data model.  However, it might
be unlikely that any application not built on OGR would ever support
it.

The OGR VRT driver already captures most of this with my recent
addition of schema support.  It could be extended to actually be
a feature store.

Alternatively, we could look at improving the GML driver to support
capture of everything that OGR can represent.  This would have the
benefit of being useful in non-OGR applications.

> 3) There should be some sort of lossless compression scheme associated 
> with OGR

With Even's work, it is not possible for many drivers to to
transparently access compressed files using the /vsigzip/ mechanism.

> 3) Topology would be nice too. What to think about the way ArcGIS does 
> it nowadays? It uses some sort of shapefiles as base maps, but computes 
> the topology (you can choose different criteria) and puts it in separate 
> files. There is work going on for topology in the PostGIS, I believe, 
> but it is a horribly difficult subject, of course.

Note that the OGR Arc/Info binary coverage (and I think a few
others drivers) do capture and represent topological relationships
with features.  However, different drivers do this in slightly
different ways since there is no well defined way of doing this
in the OGR data model.

There are no tools to build topology in GDAL but perhaps this
could be a GRASS task.

Of course, OGR does nothing to update topologies cleanly.  Currently
it really just allows access to existing topological datasets.

> The problem with (governmental) organisations is that they create 
> their own small universums, which aren't compatible with other 
> universums, and even don't know about each other's existence. 

Very true, and to some extent this can also happen to software
projects (open source and proprietary).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan 15 22:38:32 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 15 22:38:47 2010
Subject: [gdal-dev] suppressing libtiff warnings
In-Reply-To: <674f8afe1001141506t37e63c9ew6be1649cbe00b2f4@mail.gmail.com>
References: <674f8afe1001141506t37e63c9ew6be1649cbe00b2f4@mail.gmail.com>
Message-ID: <4B5134B8.2070407@pobox.com>

Richard Buenger wrote:
> Is there some way to turn off libtiff warning messages generated by GDAL 
> calls?
> How do I tell GDAL to set the libtiff warning handler to null?
> 
> using c# gdal wrapper in .NET

Richard,

I think you can call gdal.PushErrorHandler( "CPLQuietErrorHandler" ) to
supress all error reports, including libtiff ones.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From joelodom at gmail.com  Fri Jan 15 22:41:05 2010
From: joelodom at gmail.com (Joel Odom)
Date: Fri Jan 15 22:41:09 2010
Subject: [gdal-dev] Locking of Open Shapefile
In-Reply-To: <4B51190F.9070704@pobox.com>
References: <d422b4501001150620v36b09cacl7af718c611a07ca1@mail.gmail.com>
	<4B51190F.9070704@pobox.com>
Message-ID: <d422b4501001151941l66754614sa67286ef7553e4ab@mail.gmail.com>

Thanks, Frank.  I'll check source code of the FalconView Shapefile overlay
and see if it is requesting exclusive access.  That could be the problem and
I could change that as there is no need for FalconView to have exclusive
access when it is only reading.



On Fri, Jan 15, 2010 at 8:40 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Joel Odom wrote:
>
>> I've discovered that when I use OGRSFDriverRegistrar::Open to open a
>> Shapefile, the file remains locked so that another process can't open the
>> file until after I've called OGRDataSource::DestroyDataSource.  Is there any
>> way to prevent the file from being locked?  Thanks!
>>
>
> Joel,
>
> Modern versions of GDAL/OGR route the open request for .shp and .dbf
> files through VSIFOpenL().  The Win32 implmentation calls CreateFile()
> with the sharing flags:
>
>  FILE_SHARE_READ | FILE_SHARE_WRITE
>
> As far as I know, this means that any other application which also tries
> to open the files allowing shared access should be ok.  Is it possible
> you are using quite an old version of GDAL/OGR?  Or that the other
> application is requesting exclusive access?
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>


-- 
http://giscoder.blogspot.com/
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100115/075f6357/attachment.html
From warmerdam at pobox.com  Fri Jan 15 22:41:00 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 15 22:41:18 2010
Subject: [Gdal-dev] When GDAL 1.7.0 branch?
In-Reply-To: <1263424632699-4385486.post@n2.nabble.com>
References: <4B4C772B.5090200@loskot.net> <4B4CD020.9020402@pobox.com>
	<4B4CD0FA.9010609@loskot.net>
	<1263424632699-4385486.post@n2.nabble.com>
Message-ID: <4B51354C.6060904@pobox.com>

Mateusz Loskot wrote:
> One more thing if I may, the Wiki/Roadmap say the RC1 is planned on Dec 15,
> 2009.
> I understand the schedule has changed. Would you have new date of RC1?

Mateusz,

I'd like to issue RC1 by January 19th.

Are there things any of the developers are wanting to get in before final
release?  The only thing I can think of needing before release is some
resolution to vertical datum issues in gdal/frmts/gtiff.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Fri Jan 15 22:49:39 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 15 22:49:53 2010
Subject: [gdal-dev] UTF8/Wide chars in path
In-Reply-To: <4B4E9400.1090302@hotmail.com>
References: <4B4E9400.1090302@hotmail.com>
Message-ID: <4B513753.4000405@pobox.com>

ogr user wrote:
> Dear all,
> 
>  I've been looking around GDAL codebase and I can't see anything that
> would deal with wide/multybyte characters for file names/paths on
> Windows. Would you please confirm that on Windows GDAL will only be able
> to open files with pure ASCII names, not international charset?

Mr. Xonx,

You are correct - there is no special handling for multibyte characters.
On some operating systems the underlying file open functions support
UTF-8 filenames, but I believe this is not the case for windows where
we mostly use CreateFile() in the non-wide character form.

I had hoped to hack something in to address this for 1.7.0 but I never
got to it.  It hasn't been a priority for any of my clients so far.

On the good side, an adjustment in gdal/port/cpl_vsil_win32.cpp could
fairly easily enable support for UTF-8 filenames for most drivers.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From EAdam at co.lincoln.or.us  Fri Jan 15 22:45:05 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Fri Jan 15 23:06:10 2010
Subject: [gdal-dev] Mosaic to vrt format with gdalwarp
Message-ID: <4B50C5C0.4F75.00CE.0@co.lincoln.or.us>

Hi all,
     I'm having some trouble using gdalwarp to mosaic ArcInfo Binary Grid files to vrt.

Here is what I want to do and works in .tif.  I mosaic the three grids be... to test2.tif:
gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata "0 0 0" -dstnodata "0 0 0" -of GTIFF be44123g8b be44123g8c be44123g8a test2.tif
Creating output file that is 11039P x 15191L.
Processing input file be44123g8b.
0...10...20...30...40...50...60...70...80...90...100 - done.
Processing input file be44123g8c.
0...10...20...30...40...50...60...70...80...90...100 - done.
Processing input file be44123g8a.
0...10...20...30...40...50...60...70...80...90...100 - done.
test2.tif looks fine with gdalinfo and in OpenEV.


That works how I want.  However, I have many more than 3 grids and can't create an output file that large.  So I use vrt which has been very useful to me in the past:
gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata "0 0 0" -dstnodata "0 0 0" -of VRT be44123g8b be44123g8c be44123g8a test2.vrt
Creating output file that is 11039P x 15191L.
Processing input file be44123g8b.
test2.vrt looks fine with gdalinfo but not in OpenEv.  Also, when I look in the .vrt file itself, I only see one reference to the 1 grid and not to the other 2 grids:
 <SourceDataset relativeToVRT="1">be44123g8b</SourceDataset>

I also notice that when processing to tif each of the 3 grids are listed.  When processing to .vrt only 1 grid is listed.

I read up on vrt here, http://www.gdal.org/gdal_vrttut.html to try and manually create/edit a vrt file but my preliminary tries weren't successful.  

Let me know if you need any additional information on this or have any ideas.

Thanks, Eli


From warmerdam at pobox.com  Fri Jan 15 23:29:31 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 15 23:29:45 2010
Subject: [gdal-dev] Mosaic to vrt format with gdalwarp
In-Reply-To: <4B50C5C0.4F75.00CE.0@co.lincoln.or.us>
References: <4B50C5C0.4F75.00CE.0@co.lincoln.or.us>
Message-ID: <4B5140AB.7070208@pobox.com>

Eli Adam wrote:
> Hi all, I'm having some trouble using gdalwarp to mosaic ArcInfo Binary Grid
> files to vrt.
> 
> Here is what I want to do and works in .tif.  I mosaic the three grids be...
> to test2.tif: gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata "0 0
> 0" -dstnodata "0 0 0" -of GTIFF be44123g8b be44123g8c be44123g8a test2.tif 
> Creating output file that is 11039P x 15191L. Processing input file
> be44123g8b. 0...10...20...30...40...50...60...70...80...90...100 - done. 
> Processing input file be44123g8c. 
> 0...10...20...30...40...50...60...70...80...90...100 - done. Processing
> input file be44123g8a. 0...10...20...30...40...50...60...70...80...90...100
> - done. test2.tif looks fine with gdalinfo and in OpenEV.
> 
> 
> That works how I want.  However, I have many more than 3 grids and can't
> create an output file that large.  So I use vrt which has been very useful
> to me in the past: gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata
> "0 0 0" -dstnodata "0 0 0" -of VRT be44123g8b be44123g8c be44123g8a
> test2.vrt Creating output file that is 11039P x 15191L. Processing input
> file be44123g8b. test2.vrt looks fine with gdalinfo but not in OpenEv.
> Also, when I look in the .vrt file itself, I only see one reference to the 1
> grid and not to the other 2 grids: <SourceDataset
> relativeToVRT="1">be44123g8b</SourceDataset>
> 
> I also notice that when processing to tif each of the 3 grids are listed.
> When processing to .vrt only 1 grid is listed.
> 
> I read up on vrt here, http://www.gdal.org/gdal_vrttut.html to try and
> manually create/edit a vrt file but my preliminary tries weren't successful.
> 
> 
> Let me know if you need any additional information on this or have any
> ideas.

Eli,

I am afraid that gdalwarp just doesn't support producing VRTs containing 
multiple source files. It would, I think, be reasonably challenging to
correct  - not just a quick bug fix.  You could file a ticket on it.

You could do two steps, gdalwarp each independently to TIFF, and then
use something like gdalbuildvrt to build a mosaic vrt.  Or if the source
files are all in the same coordinate system, perhaps you could build a
mosaic vrt, and then use gdalwarp to produce a corresponding warped vrt.

I will say that this is pushing the VRT mechanism fairly far and the
efficiency of the resulting layers of vrt may not be that great.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jctull at gmail.com  Sat Jan 16 00:30:58 2010
From: jctull at gmail.com (John C. Tull)
Date: Sat Jan 16 00:31:05 2010
Subject: [gdal-dev] Mosaic to vrt format with gdalwarp
In-Reply-To: <4B5140AB.7070208@pobox.com>
References: <4B50C5C0.4F75.00CE.0@co.lincoln.or.us>
	<4B5140AB.7070208@pobox.com>
Message-ID: <FA7290CB-5AF3-4193-96AC-B004E0B6BC1A@gmail.com>

On Jan 15, 2010, at 8:29 PM, Frank Warmerdam wrote:

> Eli Adam wrote:
>> Hi all, I'm having some trouble using gdalwarp to mosaic ArcInfo Binary Grid
>> files to vrt.
>> Here is what I want to do and works in .tif.  I mosaic the three grids be...
>> to test2.tif: gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata "0 0
>> 0" -dstnodata "0 0 0" -of GTIFF be44123g8b be44123g8c be44123g8a test2.tif Creating output file that is 11039P x 15191L. Processing input file
>> be44123g8b. 0...10...20...30...40...50...60...70...80...90...100 - done. Processing input file be44123g8c. 0...10...20...30...40...50...60...70...80...90...100 - done. Processing
>> input file be44123g8a. 0...10...20...30...40...50...60...70...80...90...100
>> - done. test2.tif looks fine with gdalinfo and in OpenEV.
>> That works how I want.  However, I have many more than 3 grids and can't
>> create an output file that large.  So I use vrt which has been very useful
>> to me in the past: gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata
>> "0 0 0" -dstnodata "0 0 0" -of VRT be44123g8b be44123g8c be44123g8a
>> test2.vrt Creating output file that is 11039P x 15191L. Processing input
>> file be44123g8b. test2.vrt looks fine with gdalinfo but not in OpenEv.
>> Also, when I look in the .vrt file itself, I only see one reference to the 1
>> grid and not to the other 2 grids: <SourceDataset
>> relativeToVRT="1">be44123g8b</SourceDataset>
>> I also notice that when processing to tif each of the 3 grids are listed.
>> When processing to .vrt only 1 grid is listed.
>> I read up on vrt here, http://www.gdal.org/gdal_vrttut.html to try and
>> manually create/edit a vrt file but my preliminary tries weren't successful.
>> Let me know if you need any additional information on this or have any
>> ideas.
> 
> Eli,
> 
> I am afraid that gdalwarp just doesn't support producing VRTs containing multiple source files. It would, I think, be reasonably challenging to
> correct  - not just a quick bug fix.  You could file a ticket on it.
> 
> You could do two steps, gdalwarp each independently to TIFF, and then
> use something like gdalbuildvrt to build a mosaic vrt.  Or if the source
> files are all in the same coordinate system, perhaps you could build a
> mosaic vrt, and then use gdalwarp to produce a corresponding warped vrt.
> 
> I will say that this is pushing the VRT mechanism fairly far and the
> efficiency of the resulting layers of vrt may not be that great.

I would simply second Frank's final comment. When using a warped vrt, your computer has to go through the computational requirements to do the warp every time you load the vrt in a GIS or spatial data viewing software. This will grow tiresome real quickly. I have tried this myself before and determined that sacrificing hard drive space was preferable to sacrificing cpu cycles repeatedly.

Regards,
John

From EAdam at co.lincoln.or.us  Sat Jan 16 01:00:41 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Sat Jan 16 01:01:10 2010
Subject: [gdal-dev] Mosaic to vrt format with gdalwarp
In-Reply-To: <FA7290CB-5AF3-4193-96AC-B004E0B6BC1A@gmail.com>
References: <4B50C5C0.4F75.00CE.0@co.lincoln.or.us>
	<4B5140AB.7070208@pobox.com>
	<FA7290CB-5AF3-4193-96AC-B004E0B6BC1A@gmail.com>
Message-ID: <4B50E587.4F75.00CE.0@co.lincoln.or.us>

Frank and John,

Thanks for the suggestions.  I did take the advice to use gdalbuildvrt and then warp that:

gdalbuildvrt gdalbuildvrt.vrt be44123g8a be44123g8b be44123g8c be44123h7 be44123h8a be44123h8b be44124g1 be44124h1 be45123a7 be45123a8 be45124a1

gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -of VRT gdalbuildvrt.vrt gdalbuildvrt2994.vrt

I forgot to mention this in the first email, but the step I was wanting to do next was to tile it with gdal_translate (although on different tiles than the original tiles): 
gdal_translate -projwin 7288440 446648 7306569 429923 gdalbuildvrt2994.vrt NewTile.tif
etc...

So the performance hit is well worth it for letting it run slowly through vrt once.  This does exactly what I want and having to add the gdalbuildvrt step is not much additional effort.  The only thing that it didn't do that I wanted was -srcnodata and -dstnodata, however, it looks like that will be available in 1.7, right around the corner.

I also opened a ticket on this in case someone else looks for it.
http://trac.osgeo.org/gdal/ticket/3328

Thanks, Eli



>>> "John C. Tull" <jctull@gmail.com> 1/15/2010 9:30 PM >>>
On Jan 15, 2010, at 8:29 PM, Frank Warmerdam wrote:

> Eli Adam wrote:
>> Hi all, I'm having some trouble using gdalwarp to mosaic ArcInfo Binary Grid
>> files to vrt.
>> Here is what I want to do and works in .tif.  I mosaic the three grids be...
>> to test2.tif: gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata "0 0
>> 0" -dstnodata "0 0 0" -of GTIFF be44123g8b be44123g8c be44123g8a test2.tif Creating output file that is 11039P x 15191L. Processing input file
>> be44123g8b. 0...10...20...30...40...50...60...70...80...90...100 - done. Processing input file be44123g8c. 0...10...20...30...40...50...60...70...80...90...100 - done. Processing
>> input file be44123g8a. 0...10...20...30...40...50...60...70...80...90...100
>> - done. test2.tif looks fine with gdalinfo and in OpenEV.
>> That works how I want.  However, I have many more than 3 grids and can't
>> create an output file that large.  So I use vrt which has been very useful
>> to me in the past: gdalwarp -t_srs "EPSG:2913" -s_srs "EPSG:2994" -srcnodata
>> "0 0 0" -dstnodata "0 0 0" -of VRT be44123g8b be44123g8c be44123g8a
>> test2.vrt Creating output file that is 11039P x 15191L. Processing input
>> file be44123g8b. test2.vrt looks fine with gdalinfo but not in OpenEv.
>> Also, when I look in the .vrt file itself, I only see one reference to the 1
>> grid and not to the other 2 grids: <SourceDataset
>> relativeToVRT="1">be44123g8b</SourceDataset>
>> I also notice that when processing to tif each of the 3 grids are listed.
>> When processing to .vrt only 1 grid is listed.
>> I read up on vrt here, http://www.gdal.org/gdal_vrttut.html to try and
>> manually create/edit a vrt file but my preliminary tries weren't successful.
>> Let me know if you need any additional information on this or have any
>> ideas.
> 
> Eli,
> 
> I am afraid that gdalwarp just doesn't support producing VRTs containing multiple source files. It would, I think, be reasonably challenging to
> correct  - not just a quick bug fix.  You could file a ticket on it.
> 
> You could do two steps, gdalwarp each independently to TIFF, and then
> use something like gdalbuildvrt to build a mosaic vrt.  Or if the source
> files are all in the same coordinate system, perhaps you could build a
> mosaic vrt, and then use gdalwarp to produce a corresponding warped vrt.
> 
> I will say that this is pushing the VRT mechanism fairly far and the
> efficiency of the resulting layers of vrt may not be that great.

I would simply second Frank's final comment. When using a warped vrt, your computer has to go through the computational requirements to do the warp every time you load the vrt in a GIS or spatial data viewing software. This will grow tiresome real quickly. I have tried this myself before and determined that sacrificing hard drive space was preferable to sacrificing cpu cycles repeatedly.

Regards,
John

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org 
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From even.rouault at mines-paris.org  Sat Jan 16 06:33:09 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 16 06:33:18 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B511DF4.3070906@pobox.com>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>	<4B5022E0.8090505@york.ac.uk>
	<4B503D9C.1040802@uva.nl> <4B511DF4.3070906@pobox.com>
Message-ID: <4B51A3F5.9050506@mines-paris.org>

I think Frank meant
>
> With Even's work, it is *now* possible for many drivers to to
> transparently access compressed files using the /vsigzip/ mechanism.


From j.l.h.hartmann at uva.nl  Sat Jan 16 06:45:31 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Jan 16 06:45:38 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B511DF4.3070906@pobox.com>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B511DF4.3070906@pobox.com>
Message-ID: <4B51A6DB.6070601@uva.nl>


On 16-1-2010 3:01, Frank Warmerdam wrote:
>
> Instead, if this is a goal of archiving, I'd suggest archiving
> the original data (in a possibly arcane format), and a copy in
> a more accessable format likely to still be usable decades later.
>
That's what we are doing now. It's OK for practical purposes.
>
> The OGR VRT driver already captures most of this with my recent
> addition of schema support.  It could be extended to actually be
> a feature store.
>
> Alternatively, we could look at improving the GML driver to support
> capture of everything that OGR can represent.  This would have the
> benefit of being useful in non-OGR applications.
>
Both very good propositions, especially the GML one. I guess such a GML 
dump could be read back into OGR without problems? I'm not proposing a 
RFC (don't know how much work it is), but perhaps you could keep this in 
the back of your head ...


Jan
From j.l.h.hartmann at uva.nl  Sat Jan 16 06:46:05 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Jan 16 06:46:13 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B51A3F5.9050506@mines-paris.org>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>	<4B5022E0.8090505@york.ac.uk>
	<4B503D9C.1040802@uva.nl> <4B511DF4.3070906@pobox.com>
	<4B51A3F5.9050506@mines-paris.org>
Message-ID: <4B51A6FD.3020208@uva.nl>

Oh, that makes a difference indeed! When I read Frank's long answer, 
this was the only point I didn't like. How does this mechanism work?

Jan

On 16-1-2010 12:33, Even Rouault wrote:
> I think Frank meant
>>
>> With Even's work, it is *now* possible for many drivers to to
>> transparently access compressed files using the /vsigzip/ mechanism.
>
>
From even.rouault at mines-paris.org  Sat Jan 16 07:52:10 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 16 07:52:18 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B51A6FD.3020208@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>	<4B5022E0.8090505@york.ac.uk>
	<4B503D9C.1040802@uva.nl> <4B511DF4.3070906@pobox.com>
	<4B51A3F5.9050506@mines-paris.org> <4B51A6FD.3020208@uva.nl>
Message-ID: <4B51B67A.8080804@mines-paris.org>

Jan,

Some GDAL and OGR drivers use a specific API, the VSI File Large API, to 
access files. That API mimics the semantics of standard C library IO API :

fopen -> VSIFOpenL
fread -> VSIFReadL
fseek -> VSIFSeekL
....

Usually that API enables access to large files (> 4 GB) on Unix and 
Windows. But there are a few 'plugins' for specific purposes. For 
example, if you pass /vsigzip/pass/to/your/file.gz to VSIFOpenL, the 
calls will go through a plug-in that will do on-the-fly decompression of 
a GZip compressed file (compression support added by Frank in 1.7.0). 
This is used internally by the GDAL R driver, or by the OGR GTM driver. 
We can also use the /vsimem/ prefix to read or write into in-memory 
files (used internally in GDAL in some drivers and algorithms, used by 
MapServer to generate the output image and avoid creating a temporary 
file on the file system, etc...). Or /vsisubfile/ to access to a file 
embedded within another file (used to decompress JPEG2000 or JPEG 
streams in some formats like NITF).

Here are a few links for further reading on the subject :
http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
http://gdal.org/cpl__vsi_8h.html

Best regards,

Even

> Oh, that makes a difference indeed! When I read Frank's long answer, 
> this was the only point I didn't like. How does this mechanism work?
>
> Jan
>
> On 16-1-2010 12:33, Even Rouault wrote:
>> I think Frank meant
>>>
>>> With Even's work, it is *now* possible for many drivers to to
>>> transparently access compressed files using the /vsigzip/ mechanism.
>>
>>
>
>
>


From mateusz at loskot.net  Sat Jan 16 07:54:22 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan 16 07:54:37 2010
Subject: [Gdal-dev] When GDAL 1.7.0 branch?
In-Reply-To: <4B51354C.6060904@pobox.com>
References: <4B4C772B.5090200@loskot.net> <4B4CD020.9020402@pobox.com>
	<4B4CD0FA.9010609@loskot.net>
	<1263424632699-4385486.post@n2.nabble.com>
	<4B51354C.6060904@pobox.com>
Message-ID: <48006.94.8.85.169.1263646462.squirrel@loskot.net>

Frank Warmerdam wrote:
> Mateusz Loskot wrote:
>> One more thing if I may, the Wiki/Roadmap say the RC1 is planned on Dec
>> 15, 2009.
>> I understand the schedule has changed. Would you have new date of RC1?
>
> Mateusz,
>
> I'd like to issue RC1 by January 19th.

Frank,

It's perfect, thanks

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From j.l.h.hartmann at uva.nl  Sat Jan 16 08:37:26 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Jan 16 08:37:34 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B51B67A.8080804@mines-paris.org>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>	<4B4CFCE2.3020509@loskot.net>	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>	<4B4D22DB.6080108@loskot.net>	<4B4DBB5D.6020804@uva.nl>	<4B4E2AE6.1080707@loskot.net>	<4B4EDD7A.6080204@uva.nl>	<4B4F5C2F.1070501@pobox.com>	<46696.94.8.38.159.1263498176.squirrel@loskot.net>	<4B5022E0.8090505@york.ac.uk>
	<4B503D9C.1040802@uva.nl> <4B511DF4.3070906@pobox.com>
	<4B51A3F5.9050506@mines-paris.org> <4B51A6FD.3020208@uva.nl>
	<4B51B67A.8080804@mines-paris.org>
Message-ID: <4B51C116.80005@uva.nl>

Yes, that is clear, thanks. I see that at the moment only raster files 
are supported. Would it make sense to do this for vector formats too? I 
am thinking of a dump from a large PostGIS database I had to upgrade 
from a 32 to a 64 bits server. I didn't like the pgdump format, as I got 
in all sorts of trouble with system tables and libraries, and the 
dumpfile got really big. If I had thought about it, I would have 
extracted all schemas with OGR, and I am certainly going to archive and 
gzip my PostGIS vector files that way. It would be nice if ogrinfo could 
give information about vector files within a (g)zip archive, and, of 
course, it would be ideal if the files within that archive would be in 
some sort of GML that could be translated back to a binary OGR format. 
That would make a perfect data storage and archive medium, but 
meanwhile, thanks to this conversation, I already have found a nice way 
to backup and archive my maps. Thanks.

Jan

On 16-1-2010 13:52, Even Rouault wrote:
> Jan,
>
> Some GDAL and OGR drivers use a specific API, the VSI File Large API, 
> to access files. That API mimics the semantics of standard C library 
> IO API :
>
> fopen -> VSIFOpenL
> fread -> VSIFReadL
> fseek -> VSIFSeekL
> ....
>
> Usually that API enables access to large files (> 4 GB) on Unix and 
> Windows. But there are a few 'plugins' for specific purposes. For 
> example, if you pass /vsigzip/pass/to/your/file.gz to VSIFOpenL, the 
> calls will go through a plug-in that will do on-the-fly decompression 
> of a GZip compressed file (compression support added by Frank in 
> 1.7.0). This is used internally by the GDAL R driver, or by the OGR 
> GTM driver. We can also use the /vsimem/ prefix to read or write into 
> in-memory files (used internally in GDAL in some drivers and 
> algorithms, used by MapServer to generate the output image and avoid 
> creating a temporary file on the file system, etc...). Or /vsisubfile/ 
> to access to a file embedded within another file (used to decompress 
> JPEG2000 or JPEG streams in some formats like NITF).
>
> Here are a few links for further reading on the subject :
> http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip
> http://gdal.org/cpl__vsi_8h.html
>
> Best regards,
>
> Even
>
>> Oh, that makes a difference indeed! When I read Frank's long answer, 
>> this was the only point I didn't like. How does this mechanism work?
>>
>> Jan
>>
>> On 16-1-2010 12:33, Even Rouault wrote:
>>> I think Frank meant
>>>>
>>>> With Even's work, it is *now* possible for many drivers to to
>>>> transparently access compressed files using the /vsigzip/ mechanism.
>>>
>>>
>>
>>
>>
>
>
From mateusz at loskot.net  Sat Jan 16 10:03:59 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sat Jan 16 10:04:20 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B51C116.80005@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B511DF4.3070906@pobox.com> <4B51A3F5.9050506@mines-paris.org>
	<4B51A6FD.3020208@uva.nl> <4B51B67A.8080804@mines-paris.org>
	<4B51C116.80005@uva.nl>
Message-ID: <42753.94.8.85.169.1263654239.squirrel@loskot.net>

Jan Hartmann wrote:
> Yes, that is clear, thanks. I see that at the moment only raster files
> are supported.
> Would it make sense to do this for vector formats too?

The VSI layer is available to all parts of GDAL and OGR.
If you scan source code of OGR drivers, you'll find that this feature
is already used by, for example, GTM driver:

http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gtm/gtm.cpp?rev=17612#L339

IOW, VSI layer is available and not dependant on GDAL or OGR format,
it's a separate library of common functions.

Best regards,
-- 
Mateusz Loskot
http://mateusz.loskot.net

From daniel.victoria at gmail.com  Sat Jan 16 12:16:04 2010
From: daniel.victoria at gmail.com (Daniel Victoria)
Date: Sat Jan 16 12:16:06 2010
Subject: [gdal-dev] Gdal / Python / Win7 crash with ReadAsArray()
In-Reply-To: <4B50E17F.9000204@noaa.gov>
References: <e7d9427f1001150436s4c513b9ch7b6416bf31fafefc@mail.gmail.com>
	<4B50E17F.9000204@noaa.gov>
Message-ID: <e7d9427f1001160916y3d8e960elef63af9d22970b09@mail.gmail.com>

Python(x,y) comes with Numpy 1.3.0.

Some more info. ReadRaster() will sometimes work but sometimes not
(crashes). gdalinfo -checksum on the dataset works with no problem
whatsoever. And again, the same install on a XP machine works as
expected...

daniel

On Fri, Jan 15, 2010 at 7:43 PM, Christopher Barker
<Chris.Barker@noaa.gov> wrote:
> Daniel Victoria wrote:
>>
>> I'm trying to use Gdal in a python program in Win7 (32 bit - portuguese).
>> I have python 2.6.2 and installed the gdal libraries following the
>> instructions in this page:
>> http://pypi.python.org/pypi/GDAL/
>> That is, I have the GDAL 1.6.1 python extension
>> (GDAL-1.6.1.win32-py2.6.exe) and installed Gdal 1.6
>> (gdalwin32exe160.zip).
>
> what numpy version are you using (though I'm not sure what numpy version
> that exe was built against). That may be an issue.
>
> -Chris
>
>
>
> --
> Christopher Barker, Ph.D.
> Oceanographer
>
> Emergency Response Division
> NOAA/NOS/OR&R ? ? ? ? ? ?(206) 526-6959 ? voice
> 7600 Sand Point Way NE ? (206) 526-6329 ? fax
> Seattle, WA ?98115 ? ? ? (206) 526-6317 ? main reception
>
> Chris.Barker@noaa.gov
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
From j.l.h.hartmann at uva.nl  Sat Jan 16 13:38:17 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Jan 16 13:38:24 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <42753.94.8.85.169.1263654239.squirrel@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B511DF4.3070906@pobox.com> <4B51A3F5.9050506@mines-paris.org>
	<4B51A6FD.3020208@uva.nl> <4B51B67A.8080804@mines-paris.org>
	<4B51C116.80005@uva.nl>
	<42753.94.8.85.169.1263654239.squirrel@loskot.net>
Message-ID: <4B520799.8020908@uva.nl>



On 16-1-2010 16:03, Mateusz Loskot wrote:
> Jan Hartmann wrote:
>    
>> Yes, that is clear, thanks. I see that at the moment only raster files
>> are supported.
>> Would it make sense to do this for vector formats too?
>>      
> The VSI layer is available to all parts of GDAL and OGR.
> If you scan source code of OGR drivers, you'll find that this feature
> is already used by, for example, GTM driver:
>
> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gtm/gtm.cpp?rev=17612#L339
>
> IOW, VSI layer is available and not dependant on GDAL or OGR format,
> it's a separate library of common functions.
>
> Best regards,
>    

Does that mean that I can use ogrinfo on a gzipped archive, like 
gdalinfo (http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip)? This page 
says:

"The fact that this new capability is implemented as virtual file 
systems imply that it will only work for GDAL drivers supporting the 
"large file API""

It would be a nice archive functionality. At the moment I store my 
raster files in a directory tree and retrieve information on some or all 
of them with small scripts calling gdalinfo and filtering the results. I 
know now that I can put the files in a gzip archive, while still be able 
to do the same queries. If the same would be possible for vector maps, I 
could store everything in one large file for backup.

Jan
From randre at gmail.com  Sat Jan 16 15:48:42 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Sat Jan 16 15:48:45 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM
	format?
Message-ID: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>

Hi All,

I'd like to know if I can take the results of a MapServer Python mapscript
'mapImage.getBytes()' operation, and feed it into GDAL as a data source for
an in-memory raster?  The MapServer docs state that the results of
'getBytes' in Python is a "string of binary data".  I'm not sure if GDAL can
open this sort of object though.

For background purposes, the reason I would like to do this is so that I can
try replacing PIL with GDAL in TileCache for the cutting of metatiles.  PIL
isn't properly saving the image formats generated by MapServer, whereas GDAL
replicates them perfectly.

Thanks,

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100116/783ec7ce/attachment.html
From randre at gmail.com  Sat Jan 16 15:53:35 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Sat Jan 16 15:53:38 2010
Subject: [gdal-dev] error about gdal shared libraries from within GRASS
In-Reply-To: <4f33f75e1001151013n201a4d91ub87f02946d9a3807@mail.gmail.com>
References: <4f33f75e1001151013n201a4d91ub87f02946d9a3807@mail.gmail.com>
Message-ID: <9c2015091001161253w18101c29wc52f1c08152d0eb5@mail.gmail.com>

Hi Isaac,

I see that you've updated LD_LIBRARY_PATH already, but perhaps you could try
adding the lib location to ls.so.conf as well.  See below for how I dealt
with similar error in the past.

------------------
$ gdalinfo --formats
gdalinfo: error while loading shared libraries: libgdal.so.1: cannot open
shared object file: No such file or directory

--> ruh roh
$ /sbin/ldconfig -p | grep gdal

-->nuffin...  Let's try adding the path to libgdal.so.1 in /etc/ld.so.conf

$ find /usr -name libgdal.so.1
/usr/local/lib/libgdal.so.1

$ sudo vi /etc/ld.so.conf
--> add
/usr/local/lib

$ ldconfig

$ /sbin/ldconfig -p | grep gdal
    libgdal.so.1 (libc6) => /usr/local/lib/libgdal.so.1
    libgdal.so (libc6) => /usr/local/lib/libgdal.so

--> alright, so what about gdalinfo?
$ gdalinfo
Usage: gdalinfo [--help-general] [-mm] [-stats] [-nogcp] [-nomd]
                [-noct] [-checksum] [-mdd domain]* datasetname
--------------------

Best of luck,

Roger
--


On Fri, Jan 15, 2010 at 10:13 AM, Isaac Ullah <isaac.ullah@asu.edu> wrote:

> Hi list,
>
>     I have recently been trying to compile and install 64 bit GRASS7 with
> 64 bit GDAL1.6.3 on 64 bit Ubuntu 9.10. I have successfully compiled both
> packages (with no errors), but am getting this error upon GRASS startup when
> the GRASS gui loads and first tries to access GDAL:
> g.list: error while loading shared libraries: libgdal.so.1: cannot open
> shared object file: No such file or directory
>
> I have that library installed in a standard location:
> > whereis libgdal.so.1
> libgdal.so: /usr/lib/libgdal.so.1 /usr/lib64/libgdal.so.1
> /usr/local/lib/libgdal.so /usr/local/lib/libgdal.so.1
>
> and even have made gdal.conf:
> > cat /etc/ld.so.conf.d/gdal.conf
> /usr/local/lib
>
> And also, this file IS 64 bit:
> > file /usr/local/lib/libgdal.so.1.13.3
> /usr/local/lib/libgdal.so.1.13.3: ELF 64-bit LSB shared object, x86-64,
> version 1 (SYSV), dynamically linked, not stripped
>
> Even after explicitly setting
> LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib before grass startup,
> libgdal.so.1 is not found, even though echo $LD_LIBRARY_PATH produces:
> /usr/local/grass7.0.svn-i686-pc-linux-gnu-28_11_2009/lib:/usr/local/lib
>
> Result of ldd /usr/local/grass7.0.svn-28_11_2009/bin/g.list shows the only
> problem: libgdal.so.1 => not found.
>
> Here are some additional ldd responses:
> ldd `which gdalinfo`
>     linux-vdso.so.1 =>  (0x00007fff207ff000)
>     libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00007fc141b91000)
>     libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0x00007fc141975000)
>     libgeos-3.2.0.so => /usr/local/lib/libgeos-3.2.0.so(0x00007fc1415fa000)
>      libsqlite3.so.0 => /usr/lib/libsqlite3.so.0 (0x00007fc141372000)
>     libodbc.so.1 => /usr/lib/libodbc.so.1 (0x00007fc141112000)
>     libodbcinst.so.1 => /usr/lib/libodbcinst.so.1 (0x00007fc140f05000)
>     libltdl.so.7 => /usr/lib/libltdl.so.7 (0x00007fc140cfb000)
>     libexpat.so.1 => /lib/libexpat.so.1 (0x00007fc140ad2000)
>     libxerces-c.so.28 => /usr/lib/libxerces-c.so.28 (0x00007fc1404ff000)
>     libjasper.so.1 => /usr/lib/libjasper.so.1 (0x00007fc1402a8000)
>      libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x00007fc140083000)
>     libhdf5-1.6.6.so.0 => /usr/lib/libhdf5-1.6.6.so.0 (0x00007fc13fd60000)
>     libz.so.1 => /lib/libz.so.1 (0x00007fc13fb49000)
>     libmfhdf.so.4 => /usr/lib/libmfhdf.so.4 (0x00007fc13f921000)
>      libdf.so.4 => /usr/lib/libdf.so.4 (0x00007fc13f66f000)
>     libnetcdf.so.4 => /usr/lib/libnetcdf.so.4 (0x00007fc13f43c000)
>     libpq.so.5 => /usr/lib/libpq.so.5 (0x00007fc13f214000)
>     libpthread.so.0 => /lib/libpthread.so.0 (0x00007fc13eff8000)
>      librt.so.1 => /lib/librt.so.1 (0x00007fc13edf0000)
>     libdl.so.2 => /lib/libdl.so.2 (0x00007fc13ebec000)
>     libcurl-gnutls.so.4 => /usr/lib/libcurl-gnutls.so.4
> (0x00007fc13e9aa000)
>     libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00007fc13e69a000)
>      libm.so.6 => /lib/libm.so.6 (0x00007fc13e416000)
>     libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007fc13e1ff000)
>     libc.so.6 => /lib/libc.so.6 (0x00007fc13de90000)
>     libicuuc.so.40 => /usr/lib/libicuuc.so.40 (0x00007fc13db48000)
>      libicudata.so.40 => /usr/lib/libicudata.so.40 (0x00007fc13cc03000)
>     libssl.so.0.9.8 => /lib/libssl.so.0.9.8 (0x00007fc13c9b5000)
>     libcrypto.so.0.9.8 => /lib/libcrypto.so.0.9.8 (0x00007fc13c62e000)
>     libkrb5.so.3 => /usr/lib/libkrb5.so.3 (0x00007fc13c376000)
>     libcom_err.so.2 => /lib/libcom_err.so.2 (0x00007fc13c172000)
>     libgssapi_krb5.so.2 => /usr/lib/libgssapi_krb5.so.2
> (0x00007fc13bf44000)
>     libcrypt.so.1 => /lib/libcrypt.so.1 (0x00007fc13bd0b000)
>     libldap_r-2.4.so.2 => /usr/lib/libldap_r-2.4.so.2 (0x00007fc13bac2000)
>     /lib64/ld-linux-x86-64.so.2 (0x00007fc142692000)
>     libidn.so.11 => /usr/lib/libidn.so.11 (0x00007fc13b88f000)
>      liblber-2.4.so.2 => /usr/lib/liblber-2.4.so.2 (0x00007fc13b681000)
>     libgnutls.so.26 => /usr/lib/libgnutls.so.26 (0x00007fc13b3df000)
>     libgcrypt.so.11 => /lib/libgcrypt.so.11 (0x00007fc13b167000)
>     libk5crypto.so.3 => /usr/lib/libk5crypto.so.3 (0x00007fc13af3c000)
>     libkrb5support.so.0 => /usr/lib/libkrb5support.so.0
> (0x00007fc13ad34000)
>     libkeyutils.so.1 => /lib/libkeyutils.so.1 (0x00007fc13ab31000)
>     libresolv.so.2 => /lib/libresolv.so.2 (0x00007fc13a918000)
>     libsasl2.so.2 => /usr/lib/libsasl2.so.2 (0x00007fc13a6fe000)
>     libtasn1.so.3 => /usr/lib/libtasn1.so.3 (0x00007fc13a4ed000)
>     libgpg-error.so.0 => /lib/libgpg-error.so.0 (0x00007fc13a2e9000)
>
>
> I have asked on the GRASS dev list, but everyone is stumped there and feel
> that it is soemthing to do with how Ihave installed GDAL on my system rather
> than a GRASS thing. Do any of you have any idea why gdal libraries seem to
> be invisible to GRASS on my system? Oh, and yes, I do run ldconfig every
> time I fool with libraries or conf files.
>
> Any help will be greatly appreciated,
>
> Cheers,
> --
> Isaac I Ullah, M.A.
>
> Archaeology PhD Candidate,
> ASU School of Evolution and Social Change
>
> Research Assistant,
> Mediterranean Landscape Dynamics Project
> ***************************************************
> isaac.ullah@asu.edu
> ullah@archaeologist.com
>
> http://www.public.asu.edu/~iullah <http://www.public.asu.edu/%7Eiullah>
> ***************************************************
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100116/c34c636d/attachment-0001.html
From warmerdam at pobox.com  Sat Jan 16 16:26:44 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 16 16:26:58 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM
	format?
In-Reply-To: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
References: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
Message-ID: <4B522F14.7030902@pobox.com>

Roger Andr? wrote:
> Hi All,
> 
> I'd like to know if I can take the results of a MapServer Python 
> mapscript 'mapImage.getBytes()' operation, and feed it into GDAL as a 
> data source for an in-memory raster?  The MapServer docs state that the 
> results of 'getBytes' in Python is a "string of binary data".  I'm not 
> sure if GDAL can open this sort of object though.
> 
> For background purposes, the reason I would like to do this is so that I 
> can try replacing PIL with GDAL in TileCache for the cutting of 
> metatiles.  PIL isn't properly saving the image formats generated by 
> MapServer, whereas GDAL replicates them perfectly.

Roger,

I am not aware of a way to utilize a raw buffer as a mem dataset from
Python (though this is doable from C++).  However, you can just write
the buffer to a mem dataset.  This code snippet from the autotest suite
shows something like this:

     #######################################################
     # Setup dataset
     drv = gdal.GetDriverByName('MEM')
     gdaltest.mem_ds = drv.Create( 'mem_1.mem', 50, 3, gdal.GDT_Int32, 1 )
     ds = gdaltest.mem_ds

     raw_data = array.array('f',list(range(150))).tostring()
     ds.WriteRaster( 0, 0, 50, 3, raw_data,
                     buf_type = gdal.GDT_Float32,
                     band_list = [1] )

It is slightly more tricky with what I assume is a pixel interleaved 3
band image you would have.  Without having tested it, something like this
might work:

   mem_ds = gdal.GetDriverByName('MEM').Create('x',200,300,gdal.GDT_Byte,3)
   mem_ds.WriteRaster( 0, 0, 200, 300,
                       mapImage.getBytes(), 200, 300, gdal.GDT_Byte,
                       band_list=[1,2,3],
                       buf_pixel_space=3,
                       buf_line_space=3*200,
                       buf_band_space=1)

Good luck,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From j.l.h.hartmann at uva.nl  Sat Jan 16 16:29:08 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Sat Jan 16 16:29:20 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B522748.2090306@pobox.com>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B511DF4.3070906@pobox.com> <4B51A3F5.9050506@mines-paris.org>
	<4B51A6FD.3020208@uva.nl> <4B51B67A.8080804@mines-paris.org>
	<4B51C116.80005@uva.nl>
	<42753.94.8.85.169.1263654239.squirrel@loskot.net>
	<4B520799.8020908@uva.nl> <4B522748.2090306@pobox.com>
Message-ID: <4B522FA4.8030507@uva.nl>

Thanks Frank, I'll try and let you know.

BTW: Perhaps your idea of GML-output for OGR would solve the 
Metadata-problem for OGR. Everyone can add whatever data they want to 
the GML-file, as long as OGR knows what parts to retrieve to reconstruct 
the vector map.

Jan

On 16-Jan-10 21:53, Frank Warmerdam wrote:
>
> Some OGR drivers (and some GDAL drivers) will support this capability.
> It depends on which ones go through the VSI*L API.  On the GDAL side we
> now have a technique to keep track of this in an organized way, while 
> this
> does not yet exist on the OGR side.  Buy you can just try it to know 
> for a
> particular driver.
>
> Best regards,
From randre at gmail.com  Sat Jan 16 17:05:38 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Sat Jan 16 17:05:40 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM 
	format?
In-Reply-To: <4B522F14.7030902@pobox.com>
References: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
	<4B522F14.7030902@pobox.com>
Message-ID: <9c2015091001161405k177ee0f4k36a22d3ed6d12aa4@mail.gmail.com>

Hi Frank,

Thanks for the example.  How can I specify alpha in that, for one of the
quantized 8-bit PNG's (with alpha) that MapServer produces?

They look like this:

Metadata:
  Software=UMN Mapserver
Corner Coordinates:
Upper Left  (    0.0,    0.0)
Lower Left  (    0.0,  256.0)
Upper Right (  256.0,    0.0)
Lower Right (  256.0,  256.0)
Center      (  128.0,  128.0)
Band 1 Block=256x1 Type=Byte, ColorInterp=Palette
  NoData Value=0
  Color Table (RGB with 85 entries)
    0: 0,0,0,0
    1: 251,0,0,64
    2: 250,0,0,54
    3: 253,0,0,114
    4: 254,0,0,176
    5: 254,0,0,224
    6: 254,0,0,228
    7: 254,0,0,252
    8: 253,0,0,168
    9: 254,0,0,170
   10: 254,0,0,234
   11: 254,0,0,246
   12: 254,0,0,230
   13: 252,0,0,194
   14: 253,0,0,232
   15: 254,0,0,248
   16: 254,0,0,226
   17: 253,0,0,252
   18: 254,0,0,244
   19: 254,0,0,240
   20: 253,0,0,248
   21: 254,0,0,192
   22: 250,0,0,98
   23: 252,0,0,98
   24: 253,0,0,236
   25: 251,0,0,144
   26: 253,0,0,208
   27: 252,0,0,252
   28: 253,0,0,250
   29: 253,0,0,226
   30: 254,0,0,212
   31: 253,0,0,242
   32: 250,0,0,112
   33: 253,0,0,238
   34: 253,0,0,222
   35: 254,0,0,208
   36: 253,0,0,234
   37: 254,0,0,236
   38: 254,0,0,232
   39: 252,0,0,150
   40: 253,0,0,240
   41: 251,0,0,114
   42: 253,0,0,244
   43: 254,0,0,222
   44: 231,0,0,255
   45: 202,0,0,255
   46: 249,0,0,255
   47: 96,0,0,255
   48: 63,0,0,255
   49: 229,0,0,255
   50: 89,0,0,255
   51: 248,0,0,255
   52: 192,0,0,255
   53: 230,0,0,255
   54: 88,0,0,255
   55: 176,0,0,255
   56: 225,0,0,255
   57: 206,0,0,255
   58: 64,0,0,255
   59: 53,0,0,255
   60: 113,0,0,255
   61: 169,0,0,255
   62: 183,0,0,255
   63: 252,0,0,255
   64: 184,0,0,255
   65: 251,0,0,255
   66: 247,0,0,255
   67: 189,0,0,255
   68: 224,0,0,255
   69: 250,0,0,255
   70: 244,0,0,255
   71: 243,0,0,255
   72: 227,0,0,255
   73: 241,0,0,255
   74: 253,0,0,255
   75: 246,0,0,255
   76: 167,0,0,255
   77: 168,0,0,255
   78: 254,0,0,255
   79: 242,0,0,255
   80: 245,0,0,255
   81: 44,0,0,255
   82: 161,0,0,255
   83: 0,0,0,255
   84: 255,0,0,255


Roger
--

On Sat, Jan 16, 2010 at 1:26 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Roger Andr? wrote:
>
>> Hi All,
>>
>> I'd like to know if I can take the results of a MapServer Python mapscript
>> 'mapImage.getBytes()' operation, and feed it into GDAL as a data source for
>> an in-memory raster?  The MapServer docs state that the results of
>> 'getBytes' in Python is a "string of binary data".  I'm not sure if GDAL can
>> open this sort of object though.
>>
>> For background purposes, the reason I would like to do this is so that I
>> can try replacing PIL with GDAL in TileCache for the cutting of metatiles.
>>  PIL isn't properly saving the image formats generated by MapServer, whereas
>> GDAL replicates them perfectly.
>>
>
> Roger,
>
> I am not aware of a way to utilize a raw buffer as a mem dataset from
> Python (though this is doable from C++).  However, you can just write
> the buffer to a mem dataset.  This code snippet from the autotest suite
> shows something like this:
>
>    #######################################################
>    # Setup dataset
>    drv = gdal.GetDriverByName('MEM')
>    gdaltest.mem_ds = drv.Create( 'mem_1.mem', 50, 3, gdal.GDT_Int32, 1 )
>    ds = gdaltest.mem_ds
>
>    raw_data = array.array('f',list(range(150))).tostring()
>    ds.WriteRaster( 0, 0, 50, 3, raw_data,
>                    buf_type = gdal.GDT_Float32,
>                    band_list = [1] )
>
> It is slightly more tricky with what I assume is a pixel interleaved 3
> band image you would have.  Without having tested it, something like this
> might work:
>
>  mem_ds = gdal.GetDriverByName('MEM').Create('x',200,300,gdal.GDT_Byte,3)
>  mem_ds.WriteRaster( 0, 0, 200, 300,
>                      mapImage.getBytes(), 200, 300, gdal.GDT_Byte,
>                      band_list=[1,2,3],
>                      buf_pixel_space=3,
>                      buf_line_space=3*200,
>                      buf_band_space=1)
>
> Good luck,
>
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100116/b29a78e0/attachment.html
From edward.hyer.ctr at nrlmry.navy.mil  Sat Jan 16 17:22:43 2010
From: edward.hyer.ctr at nrlmry.navy.mil (Hyer, Dr. Edward)
Date: Sat Jan 16 17:23:51 2010
Subject: [gdal-dev] Help: convert WGS84 to SAD69 coordinates +
	troubleshooting cs2cs
Message-ID: <27E9A4902ED9624E87D483E362A5E0AA2C45D1@pallas.w2k.nrlmry.navy.mil>

I have this command, which I might have gotten from this list a few
years ago, for how to do this:

cs2cs 
+proj=latlong 
+datum=WGS84 
+to 
+proj=latlong 
+ellps=GRS67 
+towgs84=-57,1.0,-41,0,0,0,0 
+no_defs 
-f "%.5f" 
-w5


Not sure I understand all of that, but anyway, I set it up and test it
and I get 

Rel. 4.6.0, 21 Dec 2007
<cs2cs>: 
Sys errno: 2: <system mess. texts unavail.>

This is on a 64-bit machine running Linux.

What are the steps for troubleshooting this?

Thanks in advance,

--Edward H.
From warmerdam at pobox.com  Sat Jan 16 17:34:30 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 16 17:34:42 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM
	format?
In-Reply-To: <9c2015091001161405k177ee0f4k36a22d3ed6d12aa4@mail.gmail.com>
References: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
	<4B522F14.7030902@pobox.com>
	<9c2015091001161405k177ee0f4k36a22d3ed6d12aa4@mail.gmail.com>
Message-ID: <4B523EF6.5090703@pobox.com>

Roger Andr? wrote:
> Hi Frank,
> 
> Thanks for the example.  How can I specify alpha in that, for one of the 
> quantized 8-bit PNG's (with alpha) that MapServer produces? 

Roger,

In a way this is simplier.  It is just a one band GDT_Byte file, so more
like the first example I gave.  The palette can be handled separately,
and assigned to the MEM dataset a bit like:

     gdaltest.test_ct_data = [ (255,0,0), (0,255,0), (0,0,255), (255,255,255,0)]

     gdaltest.test_ct = gdal.ColorTable()
     for i in range(len(gdaltest.test_ct_data)):
         gdaltest.test_ct.SetColorEntry( i, gdaltest.test_ct_data[i] )
     mem_ds.GetRasterBand(1).SetColorTable( gdaltest.test_ct )

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Sat Jan 16 18:34:23 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Sat Jan 16 18:34:26 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM 
	format?
In-Reply-To: <4B523EF6.5090703@pobox.com>
References: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
	<4B522F14.7030902@pobox.com>
	<9c2015091001161405k177ee0f4k36a22d3ed6d12aa4@mail.gmail.com>
	<4B523EF6.5090703@pobox.com>
Message-ID: <9c2015091001161534i4d2b5839kec19070822da03df@mail.gmail.com>

Hi Frank,

Ok, that makes sense.  So for this to work, I will have to know (somehow)
what type of image mapserver is sending, and then instantiate a MEM dataset
with the correct parameters.  Problem with that is that I can't think of a
good way to read what those parameters are out of the binary string.  It's
no problem when I know exactly what data is coming in, as is the case for my
very specific need, but it means that swapping in GDAL for PIL as a general
solution might not be possible.

I'll play around with the examples you've sent, and will investigate whether
there are ways to read the string and determine what data type it is.

One last question. How does a utility like gdal_translate figure out what
the input data type is?

Thanks again,

Roger
--


On Sat, Jan 16, 2010 at 2:34 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Roger Andr? wrote:
>
>> Hi Frank,
>>
>> Thanks for the example.  How can I specify alpha in that, for one of the
>> quantized 8-bit PNG's (with alpha) that MapServer produces?
>>
>
> Roger,
>
> In a way this is simplier.  It is just a one band GDT_Byte file, so more
> like the first example I gave.  The palette can be handled separately,
> and assigned to the MEM dataset a bit like:
>
>    gdaltest.test_ct_data = [ (255,0,0), (0,255,0), (0,0,255),
> (255,255,255,0)]
>
>    gdaltest.test_ct = gdal.ColorTable()
>    for i in range(len(gdaltest.test_ct_data)):
>        gdaltest.test_ct.SetColorEntry( i, gdaltest.test_ct_data[i] )
>    mem_ds.GetRasterBand(1).SetColorTable( gdaltest.test_ct )
>
> Best regards,
>
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100116/ef8075ef/attachment-0001.html
From kyleqian at gmail.com  Sat Jan 16 20:07:50 2010
From: kyleqian at gmail.com (=?GB2312?B?x67P/sP3?=)
Date: Sat Jan 16 20:15:48 2010
Subject: [gdal-dev] Does OGR support M values?
Message-ID: <accc71d1001161707x7d5c3c75t107c95b6213718df@mail.gmail.com>

I find that OGR does not support M value in Geometry? So there is no way to
read M values in ESRI Shapefile? If I want, how can I handle this?
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100117/a9fa3e48/attachment.html
From warmerdam at pobox.com  Sat Jan 16 20:45:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 16 20:45:45 2010
Subject: [gdal-dev] Does OGR support M values?
In-Reply-To: <accc71d1001161707x7d5c3c75t107c95b6213718df@mail.gmail.com>
References: <accc71d1001161707x7d5c3c75t107c95b6213718df@mail.gmail.com>
Message-ID: <4B526BBE.4010307@pobox.com>

??? wrote:
> I find that OGR does not support M value in Geometry? So there is no way 
> to read M values in ESRI Shapefile? If I want, how can I handle this?

Kyle,

I believe that OGR does not support reading M values from shapefiles
at this time.  There has been discussion of providing a mechanism to read
it in place of Z or perhaps as a "list" attribute on the feature but
to the best of my knowledge neither of those approaches has been
implemented.

It is anticipated that at some point in the future OGR will advance to
the new OGC/ISO geometry model which includes "M" values for geometries.
I don't know when that might be though.

Shapelib does support reading M values if you are willing to program
against it's C API.

   http://shapelib.maptools.org/

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sat Jan 16 20:57:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 16 20:57:26 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM
	format?
In-Reply-To: <9c2015091001161534i4d2b5839kec19070822da03df@mail.gmail.com>
References: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
	<4B522F14.7030902@pobox.com>
	<9c2015091001161405k177ee0f4k36a22d3ed6d12aa4@mail.gmail.com>
	<4B523EF6.5090703@pobox.com>
	<9c2015091001161534i4d2b5839kec19070822da03df@mail.gmail.com>
Message-ID: <4B526E79.9000008@pobox.com>

Roger Andr? wrote:
> Hi Frank,
> 
> Ok, that makes sense.  So for this to work, I will have to know 
> (somehow) what type of image mapserver is sending, and then instantiate 
> a MEM dataset with the correct parameters.  Problem with that is that I 
> can't think of a good way to read what those parameters are out of the 
> binary string.  It's no problem when I know exactly what data is coming 
> in, as is the case for my very specific need, but it means that swapping 
> in GDAL for PIL as a general solution might not be possible.

Roger,

I was confused about what you were using before, and now I realize you
are calling imageObj.getBytes() in mapscript (as you did explain!).

Reading the docs for this function:
     /*
     -------------------------------------------------------------------------
     getBytes returns a gdBuffer structure (defined in mapscript.i) which must
     be typemapped to an object appropriate to the target language.  This
     typemap must also gdFree the data member of the gdBuffer.  See the type-
     maps in java/javamodule.i and python/pymodule.i for examples.

     contributed by Jerry Pisk, jerry.pisk@gmail.com
     -------------------------------------------------------------------------
     */

it seems it may be difficult to do alot with the result.  Hmm, in fact
looking at the code:

     gdBuffer getBytes()
     {
         gdBuffer buffer;

         buffer.owns_data = MS_TRUE;

         buffer.data = msSaveImageBuffer(self, &buffer.size, self->format);

         if( buffer.data == NULL || buffer.size == 0 )
         {
             buffer.data = NULL;
             msSetError(MS_MISCERR, "Failed to get image buffer", "getBytes");
             return buffer;
         }

         return buffer;
     }

it isn't doing what is suggested by the comments.  It is actually encoding
it into whatever the format selected was (perhaps jpeg or png) and returning
the raw bytes of that.

My approach before depended on the image being a raw image (uncompressed,
without any format specific headers).  What you need is a way of opening
a supported file format, but from a memory buffer.

This sequence from autotest/gcore/tiff_read.py gives a clue how this might
be done in the GDAL Python bindings:

     content = open('data/byte.tif', mode='rb').read()

     # Create in-memory file
     gdal.FileFromMemBuffer('/vsimem/tiffinmem', content)

     ds = gdal.Open('/vsimem/tiffinmem', gdal.GA_Update)

You won't need to worry about copying palettes or anything.

> One last question. How does a utility like gdal_translate figure out 
> what the input data type is?

gdal.Open() reads a small chunk from the beginning of the file, and
then, in sequence, passes this to the Open method of each driver along
with the filename and some other info.  Each Open() has to decide if the
referenced file is in it's format by whatever mechanism is appropriate.
Usually this is done by looking for "magic" bytes for that format at
the beginning of the file.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From ragi at burhum.com  Sun Jan 17 03:14:46 2010
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Sun Jan 17 03:14:52 2010
Subject: [gdal-dev] OGR ArcObjects driver
Message-ID: <738927441001170014i781fbaeel7ccc5f14d656d7bb@mail.gmail.com>

I changed the subject, since we were getting out of topic.

Answers inline.

On Thu, Jan 14, 2010 at 6:40 AM, Jason Roberts <jason.roberts@duke.edu>wrote:

>  Ragi,
>
>
>
> Nicely done. That is pretty funny. I'm sure there's a few others lurking on
> the list who have thought of such a thing as well. Could you please send me
> the code? Thanks!
>
>
I submitted a Trac tickets with a patch that includes the source code. Feel
free to download it from there. http://trac.osgeo.org/gdal/ticket/3332


>
>
> Do you know if it would work if invoked from Python-based geoprocessing
> tools?
>
If you are using the OGR bindings, then the answer is yes (although I have
not tried this myself, I don't foresee any problems).

We expose a lot of our work to ArcGIS as those. An interesting feature of
> these is that they can access layers created at run time by the user in the
> ArcGIS applications. They can also run both in and out of the ArcGIS
> process. The arcgisscripting Python API (and esriGeoprocessing.GPDispatch
> COM object) use named pipes to communicate with the application, or
> something like that.
>
I don't expose the internal ArcObjects to python, so you would have to use
the standard OGR python bindings. And yes, they can run inside and outside
any application.

 I am wondering if your driver would have to initialize ArcObjects in a
> special way to somehow integrate with that. I have never seen documentation
> from ESRI on how to use ArcObjects from a "script-based" geoprocessing tool
> (only from a "function-based" geoprocessing tool, which always runs in
> process and always uses ArcObjects).
>
 What is the startup cost like?
>
There are two main things that have to be done: The COM subsystem and the
ESRI licensing checkout. The startup cost in my machine is around 1s for
those two things combined.


> I have written a lot of standalone Python geoprocessing scripts that you
> run from the command line. These always take a long time to initialize the
> geoprocessor (several 5 to 20 seconds, depending on ArcGIS version) before I
> can call any APIs. I don't know if it is because the geoprocessor is
> internally allocating an ArcObjects "application" object, or if it is due to
> the license system (doesn't matter if you use a local or remote license
> server). In any case, it would be great if your driver did not suffer from
> this. I have not written any ArcObjects programs that run outside of ArcGIS
> applications, so I don't know if it would suffer this. (Sadly, I am betting
> yes?)
>
>
>
5 to 20s?!?! Wow. That sounds high!

I am only consuming the System, Geometry and Geodatabase API, so I don't
have to pay for such high costs.

> I do not know the process for submitting an OGR driver but the team seems
> very receptive to user contributions. I would be happy to review the code
> and offer comments (I'm also busy this month, so this might take some time).
> Based on some thinking I've done in the past 24 hours, I'm not sure that I
> will end up using it in my final application, but it would certainly be
> valuable. There are periodic inquiries to gdal-dev about reading file
> geodatabases, and your driver would solve that one.
>
>
>
The reason I wrote this driver was to be able to load data from FileGDB to
PostGIS directly without having to create intermediate shapefiles and such.
I have been using it like this, and it seems to be working fine.

> There are precedents for other drivers that depend on other software (e.g.
> Oracle, I think), so I don't think anyone will strenuously object to your
> driver being dependent on COM and ArcObjects. Obviously it would have to be
> an optional driver. It would be good to write some tests for it; that may be
> a requirement from the GDAL team, although I doubt they are in a position to
> run them as part of a normal GDAL release, as I don't think any of them have
> ArcGIS.
>
>
>
Yep, tests would be good. And also documentation :)

> A possible issue is that you'd probably need to recompile it every time a
> different version of ArcGIS came out. Ideally, you would maintain versions
> of it for each release of ArcGIS. The driver documentation should point out
> to the user that they must obtain the right version. Alternatively you might
> be able to craft one driver that dynamically determines the ArcGIS version
> and does the right thing.
>
>
>
Are you volunteering for some help with the documentation? That would be
nice ha ha.

Anyway, I don't suffer from being version dependent as long as ESRI does not
change the CLSIDs of the COM objects I am using (they **rarely** do this and
I cannot think of one example where they actually did change something *I*
use). Being version dependent is true for .NET components, scripting and
other languages that are tightly coupled with particular versions of dlls.
This is not the case here.

Editing, Blob and timestamp fields are not implemented yet, but reading has
been working fine for me.

I hope having FileGDB read support (even if it requires an ArcView or better
license) will help some people.

Best Regards,

Ragi Yaser Burhum

*From:* gdal-dev-bounces@lists.osgeo.org [mailto:
> gdal-dev-bounces@lists.osgeo.org] *On Behalf Of *Ragi Y. Burhum
> *Sent:* Wednesday, January 13, 2010 12:53 PM
> *To:* gdal-dev@lists.osgeo.org
>
> *Subject:* RE: [gdal-dev] Open source vector geoprocessing libraries?
>
>
>
> Date: Wed, 13 Jan 2010 10:27:43 -0500
> From: "Jason Roberts" <jason.roberts@duke.edu>
> Subject: RE: [gdal-dev] Open source vector geoprocessing libraries?
> To: "'Peter J Halls'" <P.Halls@york.ac.uk>
> Cc: 'gdal-dev' <gdal-dev@lists.osgeo.org>
> Message-ID: <008001ca9464$f4059f10$dc10dd30$@roberts@duke.edu>
> Content-Type: text/plain;       charset="US-ASCII"
>
> Peter,
>
> > are you constrained to retaining your data in an ArcGIS compatible
> format?
>
>
> We are attempting to build tools that can work with data stored in a
> variety
> of formats. Our current user community uses mostly shapefiles, ArcGIS
> personal geodatabases, and ArcGIS file geodatabases. Many of them are
> ecologists who do not have the interest or skills to deploy a real DBMS
> system. Thus we are hoping to provide tools that can work without one. This
> is one reason I was exploring how embeddable PostGIS and SpatiaLite might
> be
> in the other fork of this thread.
>
> > Until the File
> > Geodatabase format is published (later this year?) and someone has the
> effort to
> > build an OGR interface, the DBMS route is probably the best route to
> > compatibility.
>
> It would be really great for that to happen, but I'm not holding my breath.
> If it does get published, I would seriously contemplate building an OGR
> driver.
>
> I have contemplated building an ArcObjects- or arcgisscripting-based
> driver.
> This would at least allow people who have ArcGIS to use OGR to access any
> ArcGIS layer, including those created by ArcGIS's tools for joining
> arbitrary layers, etc. That would handle file geodatabases, as well as ALL
> formats accessible from ArcGIS. If such a driver existed, then we could use
> OGR as the base interface inside our application. But creating such a
> driver
> would be a lot of work and have funky dependencies because it either needs
> to use Windows COM (for ArcObjects) or Python (for arcgisscripting) to call
> the ArcGIS APIs. I am certainly capable of implementing it but because most
> of our code is in Python, it is probably easier for me to wrap OGR and
> arcgisscripting behind a common abstraction, and then have our tools work
> against that abstraction rather than OGR directly.
>
>
>
> I find it very amusing you mention this right now.
>
>
>
> Why?
>
>
>
> I asked Frank if there was an ArcObjects based OGR driver this very past
> Thursday and he said "not that I know of". What I wanted was, among other
> things, to get data out of FileGDB to PostGIS with one shot and add some
> custom behavior for a client of mine. So I spent the past three days looking
> at OGR drivers and wrote an ArcObjects based one. I got it working
> yesterday.
>
>
>
> - Right now I only instantiate 3 factories (Enterprise GDB aka ArcSDE,
> AccessDB and FileGDB). This means it reads FileGDB just fine. If you want
> more factories, the driver only has to be modified with one line to add any
> other factories and everything else would just work.
>
>
>
> - I only implemented the parts that I needed, so it is readonly (should be
> straight forward to expand if need be).
>
>
>
> - Although, it can read other GeoDatabase abstractions (Topology, Geometric
> Networks, Annotations, Cadastral Fabrics, etc), currently I am explicitly
> filtering for FeatureClasses and FeatureDatasets.
>
>
>
> - It is a ATL / COM / C++ based one, so it will only compile on Windows. It
> can be modified to use the cross platform ArcEngine SDK since all the COM
> Objects that I use are called the same and behave the same way... I just did
> not have an ArcEngine SDK installer, so I could not test this.
>
>
>
> Anyway, if you are interested in the source code, let me know. Perhaps we
> can add it as an ogr driver contribution (what is the process for that
> anyway?). I may not respond fast enough to e-mail, since the next 4 weeks
> are pretty crazy for me.
>
>
>
> - Ragi Burhum
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100117/e1d6aad3/attachment-0001.html
From mateusz at loskot.net  Sun Jan 17 16:02:52 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jan 17 16:03:02 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B520799.8020908@uva.nl>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B511DF4.3070906@pobox.com> <4B51A3F5.9050506@mines-paris.org>
	<4B51A6FD.3020208@uva.nl> <4B51B67A.8080804@mines-paris.org>
	<4B51C116.80005@uva.nl>
	<42753.94.8.85.169.1263654239.squirrel@loskot.net>
	<4B520799.8020908@uva.nl>
Message-ID: <4B537AFC.7010507@loskot.net>

Jan Hartmann wrote:
> On 16-1-2010 16:03, Mateusz Loskot wrote:
>> Jan Hartmann wrote:
>>   
>>> Yes, that is clear, thanks. I see that at the moment only raster files
>>> are supported.
>>> Would it make sense to do this for vector formats too?
>>>      
>> The VSI layer is available to all parts of GDAL and OGR.
>> If you scan source code of OGR drivers, you'll find that this feature
>> is already used by, for example, GTM driver:
>>
>> http://trac.osgeo.org/gdal/browser/trunk/gdal/ogr/ogrsf_frmts/gtm/gtm.cpp?rev=17612#L339
>>
>>
>> IOW, VSI layer is available and not dependant on GDAL or OGR format,
>> it's a separate library of common functions.
>>
>> Best regards,
>>    
> 
> Does that mean that I can use ogrinfo on a gzipped archive, like
> gdalinfo (http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip)?


Yes, it does but...as long as OGR driver performs filesystem
operations using VSI*L API. The problem is that only few of them use VSI*L.

As an example, I just updated OGR GeoJSON driver to use VSI*L API:

http://trac.osgeo.org/gdal/changeset/18573

As you can see, it is not a complex task, but may be time consuming and
tedious, and requires quite a lot of testing.

After these changes are applied, it is possible to (un)gzip GeoJSON
datasets:

1) Translate Shapefile to GeoJSON file compressed using GZip:

$ ogr2ogr -f GeoJSON /vsigzip/./points.geojson.gz points.shp

2) Read GZip compressed GeoJSON dataset:

$ ogrinfo /vsigzip/./points.geojson.gz

$ ogrinfo /vsigzip/./points.geojson.gz OGRGeoJSON


> This page says:
> 
> "The fact that this new capability is implemented as virtual file
> systems imply that it will only work for GDAL drivers supporting the
> "large file API""

Apparently, the Wiki needs to be updated.

> It would be a nice archive functionality. 

Yes, indeed.

The work requires to step in to each OGR driver directory,
grep .cpp files for VSI verify what VSI API is used.driver:

For example, OGR Shapefile driver would, in theory, need to get
updated VSI calls in about 50 places:

$ grep VSI *.cpp | wc -ls
47

I'm quite sure volunteers would be appreciated.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From rdewit.list at somethingspatial.com.au  Mon Jan 18 00:32:47 2010
From: rdewit.list at somethingspatial.com.au (Roald de Wit)
Date: Mon Jan 18 00:50:23 2010
Subject: [gdal-dev] Writing to SQLite is very slow
Message-ID: <4B53F27F.1060704@somethingspatial.com.au>

Hi list,

Whilst trying to mimic ogr2ogr functionality in Python, I stumbled upon 
an issue with writing to SQLite: it works, but it's painfully slow 
(minutes instead of seconds).

The link below points to an example that can be used for reproducing the 
behaviour:
http://rdewit.pastebin.com/f73c9b3c0

Outputting to ESRI Shapefile, or another CSV is very fast. It's only 
SQLite that seems to be slow.

Any idea what I'm doing wrong?

Regards, Roald

From even.rouault at mines-paris.org  Mon Jan 18 01:41:12 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan 18 01:41:30 2010
Subject: [gdal-dev] Writing to SQLite is very slow
In-Reply-To: <4B53F27F.1060704@somethingspatial.com.au>
References: <4B53F27F.1060704@somethingspatial.com.au>
Message-ID: <201001180741.14291.even.rouault@mines-paris.org>

Roald,

You should try using transactions as suggested on IRC. This does make a lot of 
difference for SQLite.

if 'lyr' is the Python object for your SQLite layer :

lyr.StartTransaction()

... insert features ....

lyr.CommitTransaction()

Best regards,

Even

Le Monday 18 January 2010 06:32:47 Roald de Wit, vous avez ?crit?:
> Hi list,
>
> Whilst trying to mimic ogr2ogr functionality in Python, I stumbled upon
> an issue with writing to SQLite: it works, but it's painfully slow
> (minutes instead of seconds).
>
> The link below points to an example that can be used for reproducing the
> behaviour:
> http://rdewit.pastebin.com/f73c9b3c0
>
> Outputting to ESRI Shapefile, or another CSV is very fast. It's only
> SQLite that seems to be slow.
>
> Any idea what I'm doing wrong?
>
> Regards, Roald
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From jjknoops at netscape.net  Mon Jan 18 01:54:27 2010
From: jjknoops at netscape.net (jjknoops@netscape.net)
Date: Mon Jan 18 01:59:56 2010
Subject: [Gdal-dev] gdal_translate .tif to .ecw
In-Reply-To: <1263566013142-4399028.post@n2.nabble.com>
References: <1263566013142-4399028.post@n2.nabble.com>
Message-ID: <8CC6622365D6AF7-C20-5017@webmail-d056.sysops.aol.com>


 Hi Guido,


Try changing "%f.ecw" to"%~n1.ecw"

Jaap


 


 

 

-----Original Message-----
From: gpsguido <guido@gps.nl>
To: gdal-dev@lists.osgeo.org
Sent: Fri, Jan 15, 2010 3:33 pm
Subject: [Gdal-dev] gdal_translate .tif to .ecw



I want to convert .tif to .ecw . I use FWtools shell.
Would like to run it in batch so I have following:

for %f in (*.tif) do gdal_translate -of ECW -co "TARGET=92" -expand rgb -co
"DATUM=RD" -co "PROJ=DUTCHNEW" %f %f.ecw

with result in :

gdal_translate -of ECW -co "TARGET=92" -expand rgb -co "DATUM=RD" -co
"PROJ=DUTC
HNEW" 28a-25d-2009.tif 28a-25d-2009.tif.ecw

the problem is that the ecw is output in .tif.ecw , how can I make this work
with a output in only .ecw

I'm almost there just the last part.

guido 
-- 
View this message in context: http://n2.nabble.com/gdal-translate-tif-to-ecw-tp4399028p4399028.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev

 
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100118/3c53e590/attachment.html
From j.l.h.hartmann at uva.nl  Mon Jan 18 05:38:23 2010
From: j.l.h.hartmann at uva.nl (Jan Hartmann)
Date: Mon Jan 18 05:38:31 2010
Subject: [gdal-dev] Open source vector geoprocessing libraries?
In-Reply-To: <4B537AFC.7010507@loskot.net>
References: <005201ca930d$efb5afc0$cf210f40$%roberts@duke.edu>
	<4B4CFCE2.3020509@loskot.net>
	<004401ca93e9$92f4cbe0$b8de63a0$@roberts@duke.edu>
	<4B4D22DB.6080108@loskot.net> <4B4DBB5D.6020804@uva.nl>
	<4B4E2AE6.1080707@loskot.net> <4B4EDD7A.6080204@uva.nl>
	<4B4F5C2F.1070501@pobox.com>
	<46696.94.8.38.159.1263498176.squirrel@loskot.net>
	<4B5022E0.8090505@york.ac.uk> <4B503D9C.1040802@uva.nl>
	<4B511DF4.3070906@pobox.com> <4B51A3F5.9050506@mines-paris.org>
	<4B51A6FD.3020208@uva.nl> <4B51B67A.8080804@mines-paris.org>
	<4B51C116.80005@uva.nl>
	<42753.94.8.85.169.1263654239.squirrel@loskot.net>
	<4B520799.8020908@uva.nl> <4B537AFC.7010507@loskot.net>
Message-ID: <4B543A1F.8010308@uva.nl>



On 17-1-2010 22:02, Mateusz Loskot wrote:
> Does that mean that I can use ogrinfo on a gzipped archive, like
>> gdalinfo (http://trac.osgeo.org/gdal/wiki/UserDocs/ReadInZip)?
>>      
>
> Yes, it does but...as long as OGR driver performs filesystem
> operations using VSI*L API. The problem is that only few of them use VSI*L.
>
> As an example, I just updated OGR GeoJSON driver to use VSI*L API:
>
> http://trac.osgeo.org/gdal/changeset/18573
>
> As you can see, it is not a complex task, but may be time consuming and
> tedious, and requires quite a lot of testing.
>
> After these changes are applied, it is possible to (un)gzip GeoJSON
> datasets:
>
> 1) Translate Shapefile to GeoJSON file compressed using GZip:
>
> $ ogr2ogr -f GeoJSON /vsigzip/./points.geojson.gz points.shp
>
> 2) Read GZip compressed GeoJSON dataset:
>
> $ ogrinfo /vsigzip/./points.geojson.gz
>
> $ ogrinfo /vsigzip/./points.geojson.gz OGRGeoJSON
>
>    

>> It would be a nice archive functionality.
>>      
> Yes, indeed.
>
> The work requires to step in to each OGR driver directory,
> grep .cpp files for VSI verify what VSI API is used.driver:
>
> For example, OGR Shapefile driver would, in theory, need to get
> updated VSI calls in about 50 places:
>
> $ grep VSI *.cpp | wc -ls
> 47
>
> I'm quite sure volunteers would be appreciated.
>
>    

Thanks Mateusz. I am going to look at GeoJSON as an ASCII data archiving 
format, as long as long as a full-fledged GML driver isn't available I 
have always liked JSON more then XML.

Jan
From rdewit.list at somethingspatial.com.au  Mon Jan 18 06:23:07 2010
From: rdewit.list at somethingspatial.com.au (Roald de Wit)
Date: Mon Jan 18 06:23:13 2010
Subject: [gdal-dev] Writing to SQLite is very slow
In-Reply-To: <201001180741.14291.even.rouault@mines-paris.org>
References: <4B53F27F.1060704@somethingspatial.com.au>
	<201001180741.14291.even.rouault@mines-paris.org>
Message-ID: <4B54449B.6050105@somethingspatial.com.au>

Hi Even,

Thanks for this. Crschmidt *did* mention the transactions and I guess it 
would work if I were to create an empty layer and walk through the 
features one by one.
I was hoping to use the 'CopyLayer' method of a DataSource (for 
simplicity's sake). It seems that you can provide options to it. Is 
there an option to tell it to use transactions?

Regards, Roald

Even Rouault wrote:
> Roald,
>
> You should try using transactions as suggested on IRC. This does make a lot of 
> difference for SQLite.
>
> if 'lyr' is the Python object for your SQLite layer :
>
> lyr.StartTransaction()
>
> ... insert features ....
>
> lyr.CommitTransaction()
>
> Best regards,
>
> Even
>
> Le Monday 18 January 2010 06:32:47 Roald de Wit, vous avez ?crit :
>   
>> Hi list,
>>
>> Whilst trying to mimic ogr2ogr functionality in Python, I stumbled upon
>> an issue with writing to SQLite: it works, but it's painfully slow
>> (minutes instead of seconds).
>>
>> The link below points to an example that can be used for reproducing the
>> behaviour:
>> http://rdewit.pastebin.com/f73c9b3c0
>>
>> Outputting to ESRI Shapefile, or another CSV is very fast. It's only
>> SQLite that seems to be slow.
>>
>> Any idea what I'm doing wrong?
>>
>> Regards, Roald
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>     
>
>
>   

From warmerdam at pobox.com  Mon Jan 18 09:23:49 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 18 09:23:55 2010
Subject: [gdal-dev] Writing to SQLite is very slow
In-Reply-To: <4B54449B.6050105@somethingspatial.com.au>
References: <4B53F27F.1060704@somethingspatial.com.au>
	<201001180741.14291.even.rouault@mines-paris.org>
	<4B54449B.6050105@somethingspatial.com.au>
Message-ID: <4B546EF5.5040200@pobox.com>

Roald de Wit wrote:
> Hi Even,
> 
> Thanks for this. Crschmidt *did* mention the transactions and I guess it 
> would work if I were to create an empty layer and walk through the 
> features one by one.
> I was hoping to use the 'CopyLayer' method of a DataSource (for 
> simplicity's sake). It seems that you can provide options to it. Is 
> there an option to tell it to use transactions?

Roald,

Would you mind filing a ticket on this?  I think the CopyLayer() method ought
to use transactions in a manner similar to ogr2ogr.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Mon Jan 18 15:28:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 18 15:28:33 2010
Subject: [gdal-dev] Motion: Paid Maintainer Contract with Chaitanya
In-Reply-To: <4B4E081C.1020408@pobox.com>
References: <4B4E081C.1020408@pobox.com>
Message-ID: <4B54C473.5030701@pobox.com>

Frank Warmerdam wrote:
> Motion: Frank Warmerdam is authorized to negotiate a paid maintainer
> contract with Chaitanya Kumar CH for up to $9360 USD at $13USD/hr over
> six months, and would be acting as supervisor, operating under the terms
> of RFC 9 (GDAL Paid Maintainer Guidelines).

Folks,

I declare this motion passed with support from myself, Howard and Even.
I will proceed to negotiating an arrangement with Chaitanya.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From randre at gmail.com  Mon Jan 18 15:54:20 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Mon Jan 18 15:54:24 2010
Subject: [gdal-dev] Can GDAL open binary buffer contents as input for MEM 
	format?
In-Reply-To: <4B526E79.9000008@pobox.com>
References: <9c2015091001161248p6dc23d40haa8d7c6c245432f6@mail.gmail.com>
	<4B522F14.7030902@pobox.com>
	<9c2015091001161405k177ee0f4k36a22d3ed6d12aa4@mail.gmail.com>
	<4B523EF6.5090703@pobox.com>
	<9c2015091001161534i4d2b5839kec19070822da03df@mail.gmail.com>
	<4B526E79.9000008@pobox.com>
Message-ID: <9c2015091001181254r754f501coe87a851dc8ab26af@mail.gmail.com>

Hi Frank,

Ok, I agree with you that the MapServer doc says that the getBytes()
function "Returns the image contents as a binary buffer".  And I see in
tiff_read.py that tiff_vsimem() function is supposed to "# Test reading a
tiff from a memory buffer (#2931)", but there must be a difference between
the binary buffer that MS returns, and the memory buffer that tiff_vsimem is
reading as input.

I implemented your recommendation in the code below, and I am getting an
error when I try to open the buffer as it is done in the tiff_read code,
"TypeError: fileio() argument 1 must be encoded string without NULL bytes,
not str"

#! /usr/bin/python

from mapscript import mapObj
from osgeo import gdal

def getImageData():
  mapobject = mapObj('basemap.map')
  mapimage = mapobject.draw()
  image_data = mapimage.getBytes()
  return image_data

def cropImage(image_data):
  open(image_data, mode='rb').read()

def main():
  image_data = getImageData()
  cropImage(image_data)


if __name__ == "__main__":
    main()

I'm trying to figure out how to manipulate the getBytes() buffer in such a
way that "open" will work on it, but so far am not having any luck.

Roger
--



On Sat, Jan 16, 2010 at 5:57 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> Roger Andr? wrote:
>
>> Hi Frank,
>>
>> Ok, that makes sense.  So for this to work, I will have to know (somehow)
>> what type of image mapserver is sending, and then instantiate a MEM dataset
>> with the correct parameters.  Problem with that is that I can't think of a
>> good way to read what those parameters are out of the binary string.  It's
>> no problem when I know exactly what data is coming in, as is the case for my
>> very specific need, but it means that swapping in GDAL for PIL as a general
>> solution might not be possible.
>>
>
> Roger,
>
> I was confused about what you were using before, and now I realize you
> are calling imageObj.getBytes() in mapscript (as you did explain!).
>
> Reading the docs for this function:
>    /*
>
>  -------------------------------------------------------------------------
>    getBytes returns a gdBuffer structure (defined in mapscript.i) which
> must
>    be typemapped to an object appropriate to the target language.  This
>    typemap must also gdFree the data member of the gdBuffer.  See the type-
>    maps in java/javamodule.i and python/pymodule.i for examples.
>
>    contributed by Jerry Pisk, jerry.pisk@gmail.com
>
>  -------------------------------------------------------------------------
>    */
>
> it seems it may be difficult to do alot with the result.  Hmm, in fact
> looking at the code:
>
>    gdBuffer getBytes()
>    {
>        gdBuffer buffer;
>
>        buffer.owns_data = MS_TRUE;
>
>        buffer.data = msSaveImageBuffer(self, &buffer.size, self->format);
>
>        if( buffer.data == NULL || buffer.size == 0 )
>        {
>            buffer.data = NULL;
>            msSetError(MS_MISCERR, "Failed to get image buffer",
> "getBytes");
>            return buffer;
>        }
>
>        return buffer;
>    }
>
> it isn't doing what is suggested by the comments.  It is actually encoding
> it into whatever the format selected was (perhaps jpeg or png) and
> returning
> the raw bytes of that.
>
> My approach before depended on the image being a raw image (uncompressed,
> without any format specific headers).  What you need is a way of opening
> a supported file format, but from a memory buffer.
>
> This sequence from autotest/gcore/tiff_read.py gives a clue how this might
> be done in the GDAL Python bindings:
>
>    content = open('data/byte.tif', mode='rb').read()
>
>    # Create in-memory file
>    gdal.FileFromMemBuffer('/vsimem/tiffinmem', content)
>
>    ds = gdal.Open('/vsimem/tiffinmem', gdal.GA_Update)
>
> You won't need to worry about copying palettes or anything.
>
>
>  One last question. How does a utility like gdal_translate figure out what
>> the input data type is?
>>
>
> gdal.Open() reads a small chunk from the beginning of the file, and
> then, in sequence, passes this to the Open method of each driver along
> with the filename and some other info.  Each Open() has to decide if the
> referenced file is in it's format by whatever mechanism is appropriate.
> Usually this is done by looking for "magic" bytes for that format at
> the beginning of the file.
>
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100118/53a00d97/attachment.html
From rdewit.list at somethingspatial.com.au  Mon Jan 18 16:48:26 2010
From: rdewit.list at somethingspatial.com.au (Roald de Wit)
Date: Mon Jan 18 16:48:32 2010
Subject: [gdal-dev] Writing to SQLite is very slow
In-Reply-To: <4B546EF5.5040200@pobox.com>
References: <4B53F27F.1060704@somethingspatial.com.au>
	<201001180741.14291.even.rouault@mines-paris.org>
	<4B54449B.6050105@somethingspatial.com.au>
	<4B546EF5.5040200@pobox.com>
Message-ID: <4B54D72A.1050600@somethingspatial.com.au>

On 19/01/10 01:23, Frank Warmerdam wrote:
> Roald,
>
> Would you mind filing a ticket on this?  I think the CopyLayer() 
> method ought
> to use transactions in a manner similar to ogr2ogr.
>
> Best regards,

Hi Frank,

Done: http://trac.osgeo.org/gdal/ticket/3335

Thanks, Roald
From randre at gmail.com  Mon Jan 18 19:59:42 2010
From: randre at gmail.com (=?UTF-8?B?Um9nZXIgQW5kcsOp?=)
Date: Mon Jan 18 19:59:44 2010
Subject: [gdal-dev] Using RasterIO in Python to crop images
Message-ID: <9c2015091001181659t72415654nb22a3f7483b8a350@mail.gmail.com>

Hi all,

I'd like to do some cropping based on pixel coordinates in a script I'm
writing.  I'm familiar with using the srcwin option to gdal_translate, but
have not done this using the API before.  Reading the API docs and some of
the previous postings to this list, it appears that the RasterIO function is
exposed in the Python API via band.ReadRaster().  I'd like some confirmation
that I'm understanding the docs correctly.

Assuming that I have an 8bit, paletted image named "foo.png", if I wanted to
extract a 50 x 50 pixel tile that had it's origin at pixel coords (0,0), I
would do something like this:

in_ds = gdal.Open('foo.png')
band = dataset.GetRasterBand(1)
tile_data = band.ReadRaster( 0, 0, 50, 50, 2500, 1, GDT_Byte )

and then I would imagine I have to create the output dataset and write
tile_data to it.

Is there a way to do specify the output dataset in such a way that it
matches all the params of the input data, but just contains the smaller data
area?

Roger
--
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100118/cefd95b5/attachment.html
From SriRam.PrasadBhasker at rmsi.com  Tue Jan 19 05:26:56 2010
From: SriRam.PrasadBhasker at rmsi.com (SriRam.PrasadBhasker@rmsi.com)
Date: Tue Jan 19 05:25:21 2010
Subject: [gdal-dev] gdalwarp query
Message-ID: <OF70B058CA.F72646AB-ON652576B0.003945DE-652576B0.003921FD@rmsi.com>


Hi.

GDAL Warp generates a Resampled Output Image along with a TFW for a
provided set of GCP's

My question is .. is there any Parameter by which we keep the raw image
untouched & generate only the TFW.

By Adjusting the TFW parameters we can position the raw image @
geopositioned Location..

Any guidance would help immensely.

Bhasker

From chaitanya.ch at gmail.com  Tue Jan 19 07:41:26 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Tue Jan 19 07:41:30 2010
Subject: [gdal-dev] gdalwarp query
In-Reply-To: <OF70B058CA.F72646AB-ON652576B0.003945DE-652576B0.003921FD@rmsi.com>
References: <OF70B058CA.F72646AB-ON652576B0.003945DE-652576B0.003921FD@rmsi.com>
Message-ID: <eb502d881001190441w51a9f7et42b6e521e4becfca@mail.gmail.com>

Prasad,

gdalwarp stretches the image to fit to the GCPs.

The situation you described is only possible if the GCPs can be located with
a first order polynomial. There will be no need to touch the image file
except to read its filename and the dimensions. In that case you just need a
small script to generate the world file.

gdalwarp may not be the solution to your problem. IMO, there is very little
code overlap to integrate this into gdalwarp.cpp

On Tue, Jan 19, 2010 at 3:56 PM, <SriRam.PrasadBhasker@rmsi.com> wrote:

>
> Hi.
>
> GDAL Warp generates a Resampled Output Image along with a TFW for a
> provided set of GCP's
>
> My question is .. is there any Parameter by which we keep the raw image
> untouched & generate only the TFW.
>
> By Adjusting the TFW parameters we can position the raw image @
> geopositioned Location..
>
> Any guidance would help immensely.
>
> Bhasker
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100119/cbb5152c/attachment-0001.html
From Gary.Smart at goodrich.com  Tue Jan 19 08:36:16 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Tue Jan 19 08:51:38 2010
Subject: [gdal-dev] No PROJ.4 translation for source SRS
References: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>
Message-ID: <F52876411F027A4FA646577165F65C161130D5@NHC2EX13.goodrich.root.local>

I still can't get to the bottom of this message - can anyone explain
it...

 

ERROR 1:  No PROJ.4 translation for source SRS, coordinate
transformation initialization has failed.

 

I'm trying to convert the native coordinates in a file into WGS84
lat/longs.  

However, when I create the OGRCoordinateTransformation (using the
importFromWkt for input source and setWellKnownGeogCS("WGS84") for
output) I get the above PROG.4 error.  

 

NOTE - if I use the proj.4 library directly, it seems possible to
convert coords (e.g. converting WGS84 UTM  to WGS84 LatLong):

Proj4 code is something like...

projIn = pj_init_plus("+prof=utm +north +ellps=WGS84");

projOut = pj_init_plus("+prof=latlong +ellps=WGS84");

pj_transform(projIn, projOut, blah blah);

 

NOTE also that an old openEv executable I have, seems to be able to
georeference these files fine.

 

I am using Linux SLES10 SP2, gdal-svn-trunk-2009.12.14 and
proj4-4.7.0-1.

 

Any help welcome

Gary

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100119/b3a2fd1a/attachment.html
From warmerdam at pobox.com  Tue Jan 19 10:30:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 19 10:30:32 2010
Subject: [gdal-dev] No PROJ.4 translation for source SRS
In-Reply-To: <F52876411F027A4FA646577165F65C161130D5@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>
	<F52876411F027A4FA646577165F65C161130D5@NHC2EX13.goodrich.root.local>
Message-ID: <4B55D01B.7050503@pobox.com>

Smart, Gary wrote:
> I still can?t get to the bottom of this message ? can anyone explain it?
> 
>  
> 
> *ERROR 1:  No PROJ.4 translation for source SRS, coordinate 
> transformation initialization has failed*.
> 
>  
> 
> I?m trying to convert the native coordinates in a file into WGS84 
> lat/longs. 
> 
> However, when I create the OGRCoordinateTransformation (using the 
> importFromWkt for input source and setWellKnownGeogCS(?WGS84?) for 
> output) I get the above PROG.4 error. 

Gary,

I'm afraid I never looked into the original problem because your reference
to the files in question ("tiff files from the mapserver tutorial") was too
inconvenient to follow up on.  Can you provide a more direct reference to them?
What does gdalinfo report for one of the problem files?

The message means that the code used to translate WKT coordinate system
descriptions into PROJ.4 coordinate system descriptions does not know how
to do it for the provided coordinate system.  This might be for a reason
as simple as the coordinate system string being empty (unavailable).

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From harsh.govind at spadac.com  Tue Jan 19 10:42:01 2010
From: harsh.govind at spadac.com (Harsh Govind)
Date: Tue Jan 19 10:45:07 2010
Subject: [gdal-dev] No PROJ.4 translation for source SRS
In-Reply-To: <4B55D01B.7050503@pobox.com>
References: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>
	<F52876411F027A4FA646577165F65C161130D5@NHC2EX13.goodrich.root.local>,
	<4B55D01B.7050503@pobox.com>
Message-ID: <4B3B3C35D34C9345BC8914C199882E2817ED3355A8@SPATCEX003.spadac.com>

I have a feeling that you are missing GDAL_DATA environment variable with path to directory containing coordinate information. I have usually seen such errors in that case.

Regards,
Harsh Govind
________________________________________
From: gdal-dev-bounces@lists.osgeo.org [gdal-dev-bounces@lists.osgeo.org] On Behalf Of Frank Warmerdam [warmerdam@pobox.com]
Sent: Tuesday, January 19, 2010 10:30 AM
To: Smart, Gary
Cc: gdal-dev@lists.osgeo.org
Subject: Re: [gdal-dev] No PROJ.4 translation for source SRS

Smart, Gary wrote:
> I still can?t get to the bottom of this message ? can anyone explain it?
>
>
>
> *ERROR 1:  No PROJ.4 translation for source SRS, coordinate
> transformation initialization has failed*.
>
>
>
> I?m trying to convert the native coordinates in a file into WGS84
> lat/longs.
>
> However, when I create the OGRCoordinateTransformation (using the
> importFromWkt for input source and setWellKnownGeogCS(?WGS84?) for
> output) I get the above PROG.4 error.

Gary,

I'm afraid I never looked into the original problem because your reference
to the files in question ("tiff files from the mapserver tutorial") was too
inconvenient to follow up on.  Can you provide a more direct reference to them?
What does gdalinfo report for one of the problem files?

The message means that the code used to translate WKT coordinate system
descriptions into PROJ.4 coordinate system descriptions does not know how
to do it for the provided coordinate system.  This might be for a reason
as simple as the coordinate system string being empty (unavailable).

Best regards,
--
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

_______________________________________________
gdal-dev mailing list
gdal-dev@lists.osgeo.org
http://lists.osgeo.org/mailman/listinfo/gdal-dev
From warmerdam at pobox.com  Tue Jan 19 11:58:51 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 19 11:58:52 2010
Subject: [gdal-dev] gdalwarp query
In-Reply-To: <OF70B058CA.F72646AB-ON652576B0.003945DE-652576B0.003921FD@rmsi.com>
References: <OF70B058CA.F72646AB-ON652576B0.003945DE-652576B0.003921FD@rmsi.com>
Message-ID: <4B55E4CB.8040003@pobox.com>

SriRam.PrasadBhasker@rmsi.com wrote:
> Hi.
> 
> GDAL Warp generates a Resampled Output Image along with a TFW for a
> provided set of GCP's
> 
> My question is .. is there any Parameter by which we keep the raw image
> untouched & generate only the TFW.
> 
> By Adjusting the TFW parameters we can position the raw image @
> geopositioned Location..
> 
> Any guidance would help immensely.

Bhasker,

In the C API there is a function GDALGCPsToGeoTransform() which can be used
to compute an approximate geotransform for a set of GCPs. This could then
be written to a world file.

There is no mechanism I am aware of in the swig API or with user tools to
do this.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jaadfoo at gmail.com  Tue Jan 19 12:10:24 2010
From: jaadfoo at gmail.com (Jamie Adams)
Date: Tue Jan 19 12:10:27 2010
Subject: [gdal-dev] No PROJ.4 translation for source SRS
In-Reply-To: <F52876411F027A4FA646577165F65C161130D5@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C161127DB@NHC2EX13.goodrich.root.local>
	<F52876411F027A4FA646577165F65C161130D5@NHC2EX13.goodrich.root.local>
Message-ID: <f4339511001190910lf734533id605da39564e836a@mail.gmail.com>

There is no UTM zone specified in the input proj string.  Is that the issue?

On Tue, Jan 19, 2010 at 5:36 AM, Smart, Gary <Gary.Smart@goodrich.com>wrote:

>  I still can?t get to the bottom of this message ? can anyone explain it?
>
>
>
> *ERROR 1:  No PROJ.4 translation for source SRS, coordinate transformation
> initialization has failed*.
>
>
>
> I?m trying to convert the native coordinates in a file into WGS84
> lat/longs.
>
> However, when I create the OGRCoordinateTransformation (using the
> importFromWkt for input source and setWellKnownGeogCS(?WGS84?) for output) I
> get the above PROG.4 error.
>
>
>
> NOTE ? if I use the proj.4 library directly, it seems possible to convert
> coords (e.g. converting WGS84 UTM  to WGS84 LatLong):
>
> Proj4 code is something like?
>
> projIn = pj_init_plus(?+prof=utm +north +ellps=WGS84?);
>
> projOut = pj_init_plus(?+prof=latlong +ellps=WGS84?);
>
> pj_transform(projIn, projOut, blah blah);
>
>
>
> NOTE also that an old openEv executable I have, seems to be able to
> georeference these files fine.
>
>
>
> I am using Linux SLES10 SP2, gdal-svn-trunk-2009.12.14 and proj4-4.7.0-1.
>
>
>
> Any help welcome
>
> Gary
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100119/3e281468/attachment.html
From isaac.ullah at asu.edu  Tue Jan 19 12:31:39 2010
From: isaac.ullah at asu.edu (Isaac Ullah)
Date: Tue Jan 19 12:32:00 2010
Subject: [gdal-dev] error about gdal shared libraries from within GRASS
In-Reply-To: <9c2015091001161253w18101c29wc52f1c08152d0eb5@mail.gmail.com>
References: <4f33f75e1001151013n201a4d91ub87f02946d9a3807@mail.gmail.com>
	<9c2015091001161253w18101c29wc52f1c08152d0eb5@mail.gmail.com>
Message-ID: <4f33f75e1001190931n37d35cd2y5dcd41fe8dd8a2cd@mail.gmail.com>

Hi Roger,

   Thanks for the tips! Unfortunately, I think my problem is somehow
different than what yours was. My GDAL installation is perfectly fine:
$ gdalinfo --formats
Supported Formats:
  VRT (rw+): Virtual Raster
  GTiff (rw+): GeoTIFF
  NITF (rw+): National Imagery Transmission Format
  ... etc ...

 and libgdal.so.1 is indeed found in the ld.so.conf files:
  $ /sbin/ldconfig -p | grep gdal
    libgdal1.5.0.so.1 (libc6,x86-64) => /usr/lib/libgdal1.5.0.so.1
    libgdal.so.1 (libc6,x86-64) => /usr/local/lib/libgdal.so.1
    libgdal.so (libc6,x86-64) => /usr/local/lib/libgdal.so

The only problem I am experiencing (and it's a BIG one) is that my GDAL
installation seems to be invisible to GRASS!

Has anyone else has an experience like this? (ie. GDAL is working and
installed properly, but apparently not visible by another outside routine?)

ANY help will be greatly appreciated.

~Isaac


On Sat, Jan 16, 2010 at 1:53 PM, Roger Andr? <randre@gmail.com> wrote:

> Hi Isaac,
>
> I see that you've updated LD_LIBRARY_PATH already, but perhaps you could
> try adding the lib location to ls.so.conf as well.  See below for how I
> dealt with similar error in the past.
>
> ------------------
> $ gdalinfo --formats
> gdalinfo: error while loading shared libraries: libgdal.so.1: cannot open
> shared object file: No such file or directory
>
> --> ruh roh
> $ /sbin/ldconfig -p | grep gdal
>
> -->nuffin...  Let's try adding the path to libgdal.so.1 in /etc/ld.so.conf
>
> $ find /usr -name libgdal.so.1
>
> /usr/local/lib/libgdal.so.1
>
> $ sudo vi /etc/ld.so.conf
> --> add
> /usr/local/lib
>
> $ ldconfig
>
> $ /sbin/ldconfig -p | grep gdal
>     libgdal.so.1 (libc6) => /usr/local/lib/libgdal.so.1
>     libgdal.so (libc6) => /usr/local/lib/libgdal.so
>
> --> alright, so what about gdalinfo?
> $ gdalinfo
> Usage: gdalinfo [--help-general] [-mm] [-stats] [-nogcp] [-nomd]
>                 [-noct] [-checksum] [-mdd domain]* datasetname
> --------------------
>
> Best of luck,
>
> Roger
> --
>
>
> On Fri, Jan 15, 2010 at 10:13 AM, Isaac Ullah <isaac.ullah@asu.edu> wrote:
>
>> Hi list,
>>
>>     I have recently been trying to compile and install 64 bit GRASS7 with
>> 64 bit GDAL1.6.3 on 64 bit Ubuntu 9.10. I have successfully compiled both
>> packages (with no errors), but am getting this error upon GRASS startup when
>> the GRASS gui loads and first tries to access GDAL:
>> g.list: error while loading shared libraries: libgdal.so.1: cannot open
>> shared object file: No such file or directory
>>
>> I have that library installed in a standard location:
>> > whereis libgdal.so.1
>> libgdal.so: /usr/lib/libgdal.so.1 /usr/lib64/libgdal.so.1
>> /usr/local/lib/libgdal.so /usr/local/lib/libgdal.so.1
>>
>> and even have made gdal.conf:
>> > cat /etc/ld.so.conf.d/gdal.conf
>> /usr/local/lib
>>
>> And also, this file IS 64 bit:
>> > file /usr/local/lib/libgdal.so.1.13.3
>> /usr/local/lib/libgdal.so.1.13.3: ELF 64-bit LSB shared object, x86-64,
>> version 1 (SYSV), dynamically linked, not stripped
>>
>> Even after explicitly setting
>> LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/usr/local/lib before grass startup,
>> libgdal.so.1 is not found, even though echo $LD_LIBRARY_PATH produces:
>> /usr/local/grass7.0.svn-i686-pc-linux-gnu-28_11_2009/lib:/usr/local/lib
>>
>> Result of ldd /usr/local/grass7.0.svn-28_11_2009/bin/g.list shows the
>> only problem: libgdal.so.1 => not found.
>>
>> Here are some additional ldd responses:
>> ldd `which gdalinfo`
>>     linux-vdso.so.1 =>  (0x00007fff207ff000)
>>     libgdal.so.1 => /usr/local/lib/libgdal.so.1 (0x00007fc141b91000)
>>     libgeos_c.so.1 => /usr/local/lib/libgeos_c.so.1 (0x00007fc141975000)
>>     libgeos-3.2.0.so => /usr/local/lib/libgeos-3.2.0.so(0x00007fc1415fa000)
>>      libsqlite3.so.0 => /usr/lib/libsqlite3.so.0 (0x00007fc141372000)
>>     libodbc.so.1 => /usr/lib/libodbc.so.1 (0x00007fc141112000)
>>     libodbcinst.so.1 => /usr/lib/libodbcinst.so.1 (0x00007fc140f05000)
>>     libltdl.so.7 => /usr/lib/libltdl.so.7 (0x00007fc140cfb000)
>>     libexpat.so.1 => /lib/libexpat.so.1 (0x00007fc140ad2000)
>>     libxerces-c.so.28 => /usr/lib/libxerces-c.so.28 (0x00007fc1404ff000)
>>     libjasper.so.1 => /usr/lib/libjasper.so.1 (0x00007fc1402a8000)
>>      libjpeg.so.62 => /usr/lib/libjpeg.so.62 (0x00007fc140083000)
>>     libhdf5-1.6.6.so.0 => /usr/lib/libhdf5-1.6.6.so.0 (0x00007fc13fd60000)
>>     libz.so.1 => /lib/libz.so.1 (0x00007fc13fb49000)
>>     libmfhdf.so.4 => /usr/lib/libmfhdf.so.4 (0x00007fc13f921000)
>>      libdf.so.4 => /usr/lib/libdf.so.4 (0x00007fc13f66f000)
>>     libnetcdf.so.4 => /usr/lib/libnetcdf.so.4 (0x00007fc13f43c000)
>>     libpq.so.5 => /usr/lib/libpq.so.5 (0x00007fc13f214000)
>>     libpthread.so.0 => /lib/libpthread.so.0 (0x00007fc13eff8000)
>>      librt.so.1 => /lib/librt.so.1 (0x00007fc13edf0000)
>>     libdl.so.2 => /lib/libdl.so.2 (0x00007fc13ebec000)
>>     libcurl-gnutls.so.4 => /usr/lib/libcurl-gnutls.so.4
>> (0x00007fc13e9aa000)
>>     libstdc++.so.6 => /usr/lib/libstdc++.so.6 (0x00007fc13e69a000)
>>      libm.so.6 => /lib/libm.so.6 (0x00007fc13e416000)
>>     libgcc_s.so.1 => /lib/libgcc_s.so.1 (0x00007fc13e1ff000)
>>     libc.so.6 => /lib/libc.so.6 (0x00007fc13de90000)
>>     libicuuc.so.40 => /usr/lib/libicuuc.so.40 (0x00007fc13db48000)
>>      libicudata.so.40 => /usr/lib/libicudata.so.40 (0x00007fc13cc03000)
>>     libssl.so.0.9.8 => /lib/libssl.so.0.9.8 (0x00007fc13c9b5000)
>>     libcrypto.so.0.9.8 => /lib/libcrypto.so.0.9.8 (0x00007fc13c62e000)
>>     libkrb5.so.3 => /usr/lib/libkrb5.so.3 (0x00007fc13c376000)
>>     libcom_err.so.2 => /lib/libcom_err.so.2 (0x00007fc13c172000)
>>     libgssapi_krb5.so.2 => /usr/lib/libgssapi_krb5.so.2
>> (0x00007fc13bf44000)
>>     libcrypt.so.1 => /lib/libcrypt.so.1 (0x00007fc13bd0b000)
>>     libldap_r-2.4.so.2 => /usr/lib/libldap_r-2.4.so.2 (0x00007fc13bac2000)
>>     /lib64/ld-linux-x86-64.so.2 (0x00007fc142692000)
>>     libidn.so.11 => /usr/lib/libidn.so.11 (0x00007fc13b88f000)
>>      liblber-2.4.so.2 => /usr/lib/liblber-2.4.so.2 (0x00007fc13b681000)
>>     libgnutls.so.26 => /usr/lib/libgnutls.so.26 (0x00007fc13b3df000)
>>     libgcrypt.so.11 => /lib/libgcrypt.so.11 (0x00007fc13b167000)
>>     libk5crypto.so.3 => /usr/lib/libk5crypto.so.3 (0x00007fc13af3c000)
>>     libkrb5support.so.0 => /usr/lib/libkrb5support.so.0
>> (0x00007fc13ad34000)
>>     libkeyutils.so.1 => /lib/libkeyutils.so.1 (0x00007fc13ab31000)
>>     libresolv.so.2 => /lib/libresolv.so.2 (0x00007fc13a918000)
>>     libsasl2.so.2 => /usr/lib/libsasl2.so.2 (0x00007fc13a6fe000)
>>     libtasn1.so.3 => /usr/lib/libtasn1.so.3 (0x00007fc13a4ed000)
>>     libgpg-error.so.0 => /lib/libgpg-error.so.0 (0x00007fc13a2e9000)
>>
>>
>> I have asked on the GRASS dev list, but everyone is stumped there and feel
>> that it is soemthing to do with how Ihave installed GDAL on my system rather
>> than a GRASS thing. Do any of you have any idea why gdal libraries seem to
>> be invisible to GRASS on my system? Oh, and yes, I do run ldconfig every
>> time I fool with libraries or conf files.
>>
>> Any help will be greatly appreciated,
>>
>> Cheers,
>> --
>> Isaac I Ullah, M.A.
>>
>> Archaeology PhD Candidate,
>> ASU School of Evolution and Social Change
>>
>> Research Assistant,
>> Mediterranean Landscape Dynamics Project
>> ***************************************************
>> isaac.ullah@asu.edu
>> ullah@archaeologist.com
>>
>> http://www.public.asu.edu/~iullah <http://www.public.asu.edu/%7Eiullah>
>> ***************************************************
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>
>
>


-- 
Isaac I Ullah, M.A.

Archaeology PhD Candidate,
ASU School of Evolution and Social Change

Research Assistant,
Mediterranean Landscape Dynamics Project
***************************************************
isaac.ullah@asu.edu
ullah@archaeologist.com

http://www.public.asu.edu/~iullah
***************************************************
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100119/8a692f52/attachment-0001.html
From SGONG at mdacorporation.com  Tue Jan 19 15:58:12 2010
From: SGONG at mdacorporation.com (Shawn GONG)
Date: Tue Jan 19 15:58:16 2010
Subject: [gdal-dev] scale in gdal_translate
Message-ID: <5F76F80A436C1146A7C04C6F844026FB06104610@VMXYVR2.ds.mda.ca>

hi Frank and list,

Does gdal_translate do individual band scaling ?
i.e. gdal_translate -b 1 -scale [min1 max1] -b 2 -scale [min2 max2] -b 3 -scale [min3 max3] 


Thanks,
Shawn

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100119/ab2e30ce/attachment.html
From warmerdam at pobox.com  Tue Jan 19 16:53:03 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 19 16:52:59 2010
Subject: [gdal-dev] scale in gdal_translate
In-Reply-To: <5F76F80A436C1146A7C04C6F844026FB06104610@VMXYVR2.ds.mda.ca>
References: <5F76F80A436C1146A7C04C6F844026FB06104610@VMXYVR2.ds.mda.ca>
Message-ID: <4B5629BF.80605@pobox.com>

Shawn GONG wrote:
> hi Frank and list,
> 
> Does gdal_translate do individual band scaling ?
> i.e. gdal_translate -b 1 -scale [min1 max1] -b 2 -scale [min2 max2] -b 3 
> -scale [min3 max3]

Shawn,

No, you would need to scale them to individual files, and then restack them.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Tue Jan 19 23:46:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 19 23:46:18 2010
Subject: [gdal-dev] GDAL/OGR 1.7.0 RC1 Available
Message-ID: <4B568AA1.4060602@pobox.com>

Folks,

I have prepared a first release candidate for the GDAL/OGR 1.7.0 release.

   http://download.osgeo.org/gdal/gdal-1.7.0RC1.tar.gz
   http://download.osgeo.org/gdal/gdal170RC1.zip

News at:

   http://svn.osgeo.org/gdal/trunk/gdal/NEWS

Also docs and autotest suite:

   http://download.osgeo.org/gdal/gdal170doc.zip
   http://download.osgeo.org/gdal/gdalautotest-1.7.0.tar.gz
   http://download.osgeo.org/gdal/gdalautotest-1.7.0.zip

The docs file now contains the Java docs (http://www.gdal.org/java)
which I'm embarrassed to admit I did not know existed.

I have also branched 1.7.  So new development can recommence in trunk, and
bug fixes should potentially be backported to the 1.7 and 1.6 branches
depending on severity and needs.

I would appreciate testing in the next few days, and I will hopefully call
for a vote to promote this RC to final release by early next week if no
serious problems show up shortly.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From jgomezdans at gmail.com  Wed Jan 20 07:49:28 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed Jan 20 07:49:31 2010
Subject: [gdal-dev] Using RasterIO in Python to crop images
In-Reply-To: <9c2015091001181659t72415654nb22a3f7483b8a350@mail.gmail.com>
References: <9c2015091001181659t72415654nb22a3f7483b8a350@mail.gmail.com>
Message-ID: <91d218431001200449m693494b4u7da377831801aa97@mail.gmail.com>

Hi,

2010/1/19 Roger Andr? <randre@gmail.com>

> Assuming that I have an 8bit, paletted image named "foo.png", if I wanted
> to extract a 50 x 50 pixel tile that had it's origin at pixel coords (0,0),
> I would do something like this:
>
> in_ds = gdal.Open('foo.png')
> band = dataset.GetRasterBand(1)
> tile_data = band.ReadRaster( 0, 0, 50, 50, 2500, 1, GDT_Byte )
>
> and then I would imagine I have to create the output dataset and write
> tile_data to it.
>

Couldn't you just use

tile_data = band.ReadAsArray()[0:51, 0:51]

or even simpler (if it's an RGBA PNG)
g  = gdal.Open("foo.png")
T = g.ReadAsArray () [:, 0:50, 0:50 ]
T.shape is now (4, 50, 50)

?

J
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100120/377f0961/attachment.html
From vadivelan_gi at yahoo.co.in  Wed Jan 20 07:59:29 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Wed Jan 20 07:59:30 2010
Subject: [gdal-dev] ERROR 1: Unable to create Xerces C++ based GML reader,
 Xerces support
Message-ID: <1263992369191-4426334.post@n2.nabble.com>


Hi,

i am trying to execute the Programe which is given in the
"http://www.gdal.org/ogr/ogr_apitut.html" site...

in that pgm instead of "OGRRegisterAll();" function i am using
"RegisterOGRGML();" to read GML File and to export into comma sepearted
file...
I am not getting any compilation errors, but while executing the program its
throwing the follwing errors:

ERROR 1: Unable to create Xerces C++ based GML reader, Xerces support
not configured into GDAL/OGR.
ERROR 1: File D:\out.gml appears to be GML but the GML
reader can't
be instantiated, likely because Xerces support wasn't
configured in.

To get these Xerces support what file to be included and let me know where i
can download these.

Thanks.


-- 
View this message in context: http://n2.nabble.com/ERROR-1-Unable-to-create-Xerces-C-based-GML-reader-Xerces-support-tp4426334p4426334.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From Gary.Smart at Goodrich.com  Wed Jan 20 07:44:26 2010
From: Gary.Smart at Goodrich.com (Smart, Gary)
Date: Wed Jan 20 07:59:34 2010
Subject: [gdal-dev] No PROJ.4 translation for source SRS
Message-ID: <F52876411F027A4FA646577165F65C16113218@NHC2EX13.goodrich.root.local>

Skipped content of type multipart/alternative-------------- next part --------------
A non-text attachment was scrubbed...
Name: tiny.zip
Type: application/x-zip-compressed
Size: 3263 bytes
Desc: tiny.zip
Url : http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100120/450c2061/tiny-0001.bin
From antonio.rocha at deimos.com.pt  Wed Jan 20 12:37:22 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Wed Jan 20 12:37:21 2010
Subject: [gdal-dev] Supported Remote Sensing instruments/satellites
Message-ID: <4B573F52.4060800@deimos.com.pt>

Greetings all

I'm a GRASS user and, following a few emails from Franz Schiller in 
GRASS users mailing list, I decided to send an email to GDAL mailing 
list regarding the following question:
Which native Remote Sensing instruments/satellites data formats are 
supported by GDAL? I mean, some instruments/satellites are distributed 
in standard formats (e.g. N1, Geotiff) but others not really. So my 
question is if you have a table, just like this 
(http://www.gdal.org/formats_list.html), but instead of being organized 
by formats it's by Satellites/nstruments?

Thanks

Best regards,
Antonio


__________ Information from ESET NOD32 Antivirus, version of virus signature database 4790 (20100120) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From jgomezdans at gmail.com  Wed Jan 20 13:20:16 2010
From: jgomezdans at gmail.com (Jose Gomez-Dans)
Date: Wed Jan 20 13:26:13 2010
Subject: [gdal-dev] Convert raster from [0,360] to [-180,180]
Message-ID: <91d218431001201020g5d7845f7g522623af239cf274@mail.gmail.com>

Hi,
I have some raster files spanning the globe from 0 to 360 degrees longitude.
However, I would rather they be in the -180 to 180 degree range. While I can
do this converting into VRTs and playing around with the SimpleSource
element, I also saw a posting on this list that suggests that one can easily
use gdalwarp for this <
http://lists.osgeo.org/pipermail/gdal-dev/2006-June/009293.html>. The
suggested command is

gdalwarp --config CENTER_LONG 180 openev/utm.tif ll.tif -t_srs WGS84

I have tried this command on my file (which is initially in WGS84 0 to 360),
set the value of CENTER_LONG to 0, but I basically get my old raster back,
with the longitudes going from 0 to 360.

Anything other than scripting/VRT editing?

Thanks!
Jose
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100120/2ce0d24b/attachment.html
From Luke.Pinner at environment.gov.au  Wed Jan 20 19:21:47 2010
From: Luke.Pinner at environment.gov.au (Pinner, Luke)
Date: Wed Jan 20 19:29:41 2010
Subject: [gdal-dev] Convert raster from [0,360] to [-180,180]
In-Reply-To: <91d218431001201020g5d7845f7g522623af239cf274@mail.gmail.com>
References: <91d218431001201020g5d7845f7g522623af239cf274@mail.gmail.com>
Message-ID: <64102B2FB850C345B04D09C82018F45F0273EBC7@ACT01VEXCCL04.internal.govt>

Something like the following perhaps?

gdal_translate -projwin 0 90 180 -90 g0-360.tif g0-180.tif
gdal_translate -projwin 180 90 360 -90 -a_ullr -180 90 0 -90 g0-360.tif
g-180-0.tif
gdal_merge[.py] -o g-180-180.tif g0-180.tif  g-180-0.tif

Regards
Luke
________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Jose Gomez-Dans
Sent: Thursday, 21 January 2010 5:20 AM
To: gdal-dev
Subject: [gdal-dev] Convert raster from [0,360] to [-180,180]


Hi,
I have some raster files spanning the globe from 0 to 360 degrees
longitude. However, I would rather they be in the -180 to 180 degree
range. While I can do this converting into VRTs and playing around with
the SimpleSource element, I also saw a posting on this list that
suggests that one can easily use gdalwarp for this
<http://lists.osgeo.org/pipermail/gdal-dev/2006-June/009293.html>. The
suggested command is

gdalwarp --config CENTER_LONG 180 openev/utm.tif ll.tif -t_srs WGS84

I have tried this command on my file (which is initially in WGS84 0 to
360), set the value of CENTER_LONG to 0, but I basically get my old
raster back, with the longitudes going from 0 to 360.

Anything other than scripting/VRT editing?

Thanks!
Jose



------
If you have received this transmission in error please notify us immediately by return e-mail and delete all copies. If this e-mail or any attachments have been sent to you in error, that error does not constitute waiver of any confidentiality, privilege or copyright in respect of information in the e-mail or attachments. 



Please consider the environment before printing this email.

------

From Gary.Smart at goodrich.com  Thu Jan 21 05:20:20 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Thu Jan 21 05:35:37 2010
Subject: FW: RE: [gdal-dev] No PROJ.4 translation for source SRS
Message-ID: <F52876411F027A4FA646577165F65C16113351@NHC2EX13.goodrich.root.local>

OK - this has been sorted.  A simple misused pointer.

Thanks to all contributors.

 

> -----Original Message-----

> From: Frank Warmerdam [mailto:warmerdam@pobox.com]

> Sent: 19 January 2010 15:31

> To: Smart, Gary

> Cc: gdal-dev@lists.osgeo.org

> Subject: Re: [gdal-dev] No PROJ.4 translation for source SRS

> 

> Smart, Gary wrote:

> > I still can't get to the bottom of this message - can anyone explain


> > it...

> >

> >

> >

> > *ERROR 1:  No PROJ.4 translation for source SRS, coordinate 

> > transformation initialization has failed*.

> >

> >

> >

> > I'm trying to convert the native coordinates in a file into WGS84 

> > lat/longs.

> >

> > However, when I create the OGRCoordinateTransformation (using the 

> > importFromWkt for input source and setWellKnownGeogCS("WGS84") for

> > output) I get the above PROG.4 error.

> 

> Gary,

> 

> I'm afraid I never looked into the original problem because your 

> reference to the files in question ("tiff files from the mapserver 

> tutorial") was too inconvenient to follow up on.  Can you provide a 

> more direct reference to them?

> What does gdalinfo report for one of the problem files?

> 

> The message means that the code used to translate WKT coordinate 

> system descriptions into PROJ.4 coordinate system descriptions does 

> not know how to do it for the provided coordinate system.  This might 

> be for a reason as simple as the coordinate system string being empty
(unavailable).

> 

> Best regards,

> --

 

Thanks for all your responses in this matter.

 

I have tried setting GDAL_DATA to the appropriate directory and this
made no difference.

 

Regarding the actual georeference information in the file - I don't
think the specifics of the coordinate system are the problem here.  I
get the same PROG4 error for every georeferenced file I look at.
Attached is a tiny fragment of geotif on which gdalinfo reports all
salient coordinate info correctly.  However, I still can't set up the
coordinate transform for this tile.  I think its something to do with
importFromWkt.  If I use the setWellKnownGeogCS for both input and
output (e.g. WGS72 in, WGS84 out) then the transform is created OK.
What does GDAL do in the importFromWkt?  Is there some data table or
other which could be missing, or some parser or something?

 

I have reinstalled gdal now - returning to the svn-stable-2009.12.14
(without any difference in the symptoms).

 

Regards Gary

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100121/898ef4ed/attachment-0001.html
From vadivelan_gi at yahoo.co.in  Thu Jan 21 08:04:05 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Thu Jan 21 08:04:07 2010
Subject: [gdal-dev] How to get Xerces Library support for OGR GML
Message-ID: <1264079045657-4433471.post@n2.nabble.com>


Hi, 

I am trying to execute the Program which is given in the
"http://www.gdal.org/ogr/ogr_apitut.html" site... 

In that program instead of "OGRRegisterAll();" function I am using
"RegisterOGRGML();" to read GML File and to export into comma sepearted
file... 

Initally, while executing i was getting follwing errors: 

ERROR 1: Unable to create Xerces C++ based GML reader, Xerces support not
configured into GDAL/OGR. 
ERROR 1: File D:\out.gml appears to be GML but the GML reader can't be
instantiated, likely because Xerces support wasn't configured in. 

Later I came to know that we have to include Xerces Library support to
overcome above error.

I included "xerces-c_3.lib" library and defined the Macro "HAVE_XERCES" in
Preprocessor option in VC++ 2008 Express IDE.

However, still I am getting 7 linking errors :

1>gmlreader.obj : error LNK2001: unresolved external symbol "public: virtual
int __thiscall GMLReader::ParseXSD(char const *)"
(?ParseXSD@GMLReader@@UAEHPBD@Z)

1>gmlreader.obj : error LNK2019: unresolved external symbol "public:
__thiscall GMLReadState::GMLReadState(void)" (??0GMLReadState@@QAE@XZ)
referenced in function __catch$?SetupParser@GMLReader@@AAEHXZ$0
.
.
.
.
.etc.

It seems that, i am still missing some library to be added for above
functions, Please let me know the missing Library.

Thanks. 

-- 
View this message in context: http://n2.nabble.com/How-to-get-Xerces-Library-support-for-OGR-GML-tp4433471p4433471.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From chaitanya.ch at gmail.com  Thu Jan 21 08:21:30 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 21 08:21:33 2010
Subject: [gdal-dev] How to get Xerces Library support for OGR GML
In-Reply-To: <1264079045657-4433471.post@n2.nabble.com>
References: <1264079045657-4433471.post@n2.nabble.com>
Message-ID: <eb502d881001210521m5d957ba6sc5a1a399e16e4b0a@mail.gmail.com>

Vadivelan,

Edit the gdal/nmake.opt file to point to the xerces library.

On Thu, Jan 21, 2010 at 6:34 PM, vadi_nabble <vadivelan_gi@yahoo.co.in>wrote:

>
> Hi,
>
> I am trying to execute the Program which is given in the
> "http://www.gdal.org/ogr/ogr_apitut.html" site...
>
> In that program instead of "OGRRegisterAll();" function I am using
> "RegisterOGRGML();" to read GML File and to export into comma sepearted
> file...
>
> Initally, while executing i was getting follwing errors:
>
> ERROR 1: Unable to create Xerces C++ based GML reader, Xerces support not
> configured into GDAL/OGR.
> ERROR 1: File D:\out.gml appears to be GML but the GML reader can't be
> instantiated, likely because Xerces support wasn't configured in.
>
> Later I came to know that we have to include Xerces Library support to
> overcome above error.
>
> I included "xerces-c_3.lib" library and defined the Macro "HAVE_XERCES" in
> Preprocessor option in VC++ 2008 Express IDE.
>
> However, still I am getting 7 linking errors :
>
> 1>gmlreader.obj : error LNK2001: unresolved external symbol "public:
> virtual
> int __thiscall GMLReader::ParseXSD(char const *)"
> (?ParseXSD@GMLReader@@UAEHPBD@Z)
>
> 1>gmlreader.obj : error LNK2019: unresolved external symbol "public:
> __thiscall GMLReadState::GMLReadState(void)" (??0GMLReadState@@QAE@XZ)
> referenced in function __catch$?SetupParser@GMLReader@@AAEHXZ$0
> .
> .
> .
> .
> .etc.
>
> It seems that, i am still missing some library to be added for above
> functions, Please let me know the missing Library.
>
> Thanks.
>
> --
> View this message in context:
> http://n2.nabble.com/How-to-get-Xerces-Library-support-for-OGR-GML-tp4433471p4433471.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100121/6e837a72/attachment.html
From kevin.chiou at progeny.net  Thu Jan 21 19:06:49 2010
From: kevin.chiou at progeny.net (Chiou, Kevin)
Date: Thu Jan 21 19:22:04 2010
Subject: [gdal-dev] Problem with GDAL NITF Image Compression
Message-ID: <3F87AA6367687C43A854B8E7073CDF8C0BD968@es-108a.paxriver.progeny.net>

I just realized if I compress a NITF file with GDAL, the compressed
image file cannot be opened by other NITF image viewers.  I tested with
ELT, ArcMap, and Opticks, all reports some type of error when trying to
open a GDAL compressed NITF file.  GDAL seems to be the only driver that
is capable of reopen a GDAL compressed NITF file.

I tried both C3 and M3 compression options ( JPEG compression), and
neither of them works.  I also ran NITF validation tool on the
compressed file and following error is shown:
'The combination of Image Representation(IREP) = "YCbCr601" and Image
Compression(IC) = "M3" does not allow Image Mode(IMODE) = "B".' 
And if you look at appendix A of NITF specification (2500C), it does not
list those parameters as a possible combination.  But at the same time I
don't know if the incorrect header supposes affect how other NITF viewer
opens the file or not.

I haven't deal with JPEG format much before.  So any suggestion on what
might went wrong, or anything else I can try is greatly appreciated.  

-Kevin

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100121/ca837fc4/attachment.html
From warmerdam at pobox.com  Thu Jan 21 20:30:43 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Thu Jan 21 20:30:50 2010
Subject: [gdal-dev] Convert raster from [0,360] to [-180,180]
In-Reply-To: <91d218431001201020g5d7845f7g522623af239cf274@mail.gmail.com>
References: <91d218431001201020g5d7845f7g522623af239cf274@mail.gmail.com>
Message-ID: <931f8ea91001211730u67652233yd79214fb96a1c5ac@mail.gmail.com>

Jose,

If you file a ticket with details/data on how to reproduce this
problem, I'd be willing to look into it briefly.  I had sort of hoped
the approach you mention would have worked.


On Wed, Jan 20, 2010 at 1:20 PM, Jose Gomez-Dans <jgomezdans@gmail.com> wrote:
> Hi,
> I have some raster files spanning the globe from 0 to 360 degrees longitude.
> However, I would rather they be in the -180 to 180 degree range. While I can
> do this converting into VRTs and playing around with the SimpleSource
> element, I also saw a posting on this list that suggests that one can easily
> use gdalwarp for this
> <http://lists.osgeo.org/pipermail/gdal-dev/2006-June/009293.html>. The
> suggested command is
>
> gdalwarp --config CENTER_LONG 180 openev/utm.tif ll.tif -t_srs WGS84
>
> I have tried this command on my file (which is initially in WGS84 0 to 360),
> set the value of CENTER_LONG to 0, but I basically get my old raster back,
> with the longitudes going from 0 to 360.
>
> Anything other than scripting/VRT editing?
>
> Thanks!
> Jose
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Fri Jan 22 01:14:17 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Fri Jan 22 01:14:20 2010
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release
Message-ID: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>

Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release.

---

Not having heard any significant immediate problems with the RC1,
I am moving to adopt it as the official 1.7 release.  I hope PSC
members would do some testing before voting.  I have done some
preliminary testing on 32bit linux and found no serious issues.
I will try to do some more testing on windows before I vote.

I'm in China for a bit, and I'm a little confused about what will count
as two business days in the west but I imagine the vote will close
roughly on Tuesday.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From jluis at ualg.pt  Sat Jan 23 10:04:58 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sat Jan 23 10:05:12 2010
Subject: [gdal-dev] OGRFree(pszSrcWKT) can crash Matlab
Message-ID: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>

Hi,

I have a serious crash in one of my Matlab MEXs caused by a call to  
OGRFree() with an argument of size one (possibly the  null terminator).
This happens on OSX SL (64 bits) but not on Windows (where I still  
build at 32 bits)

Here is, as far as I could trace it, what is happening (SVN version of  
the same age as GDAL1.7RC1)

mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);

That prints

---- GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS  
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS  
84",DATUM["WGS_1984",SPHEROID["WGS  
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]


Next the code does:

	GDALClose( hSrcDS );
mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);

and now pszSrcWKT is empty. See

---- 
PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS  
84",DATUM["WGS_1984",SPHEROID["WGS  
84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]

If I make it print the size of pszSrcWKT  with strlen(pszSrcWKT) the  
answer is 1 and finally the MEX (and the entire MATLAB) crash on the  
call

OGRFree(pszSrcWKT);


Joaquim Luis

----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From chaitanya.ch at gmail.com  Sat Jan 23 10:47:52 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jan 23 10:47:54 2010
Subject: [gdal-dev] OGRFree(pszSrcWKT) can crash Matlab
In-Reply-To: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
References: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
Message-ID: <eb502d881001230747t61631582y368a6fe76ac67d9@mail.gmail.com>

 Joaquim,

I understand that printing the contents of pszSrcWKT gave different results
before and after the call to GDALClose( hSrcDS ).
There seems to be some code you left in the mail. Can you paste the
neighbouring code at http://pastebin.ca ?

On Sat, Jan 23, 2010 at 8:34 PM, <jluis@ualg.pt> wrote:

> Hi,
>
> I have a serious crash in one of my Matlab MEXs caused by a call to
> OGRFree() with an argument of size one (possibly the  null terminator).
> This happens on OSX SL (64 bits) but not on Windows (where I still build at
> 32 bits)
>
> Here is, as far as I could trace it, what is happening (SVN version of the
> same age as GDAL1.7RC1)
>
> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>
> That prints
>
> ---- GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]]
> PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>
>
> Next the code does:
>
>        GDALClose( hSrcDS );
> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>
> and now pszSrcWKT is empty. See
>
> ---- PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNIT["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","4326"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PARAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["false_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>
> If I make it print the size of pszSrcWKT  with strlen(pszSrcWKT) the answer
> is 1 and finally the MEX (and the entire MATLAB) crash on the call
>
> OGRFree(pszSrcWKT);
>
>
> Joaquim Luis
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100123/d9090bf5/attachment.html
From even.rouault at mines-paris.org  Sat Jan 23 11:19:50 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 23 11:20:04 2010
Subject: [gdal-dev] OGRFree(pszSrcWKT) can crash Matlab
In-Reply-To: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
References: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
Message-ID: <201001231719.51668.even.rouault@mines-paris.org>

Joaquim,

you don't provide enough code to really see what's wrong, but my guess is that you misuse GDAL API.

If you get pszSrcWKT, with

pszSrcWKT = GDALGetProjectionRef(hDS);

The pszSrcWKT string is owned by the hDS object, so as soon as you destroy the hDS object with GDALClose(), the pointer becomes invalid and points to arbitrary data.

For the same reason, you should never free the string returned by GDALGetProjectionRef() with OGRFree() or any other free() call.

See http://gdal.org/classGDALDataset.html :

GDALDataset::GetProjectionRef() :

returns:
a pointer to an internal reference string. It should not be altered, freed or expected to last for long.

Best regards,

Even

Le Saturday 23 January 2010 16:04:58 jluis@ualg.pt, vous avez ?crit?:
> Hi,
>
> I have a serious crash in one of my Matlab MEXs caused by a call to
> OGRFree() with an argument of size one (possibly the  null terminator).
> This happens on OSX SL (64 bits) but not on Windows (where I still
> build at 32 bits)
>
> Here is, as far as I could trace it, what is happening (SVN version of
> the same age as GDAL1.7RC1)
>
> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>
> That prints
>
> ---- GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>26"]] PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>
>
> Next the code does:
>
> 	GDALClose( hSrcDS );
> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>
> and now pszSrcWKT is empty. See
>
> ---- 
> PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
> 84",DATUM["WGS_1984",SPHEROID["WGS
> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>
> If I make it print the size of pszSrcWKT  with strlen(pszSrcWKT) the
> answer is 1 and finally the MEX (and the entire MATLAB) crash on the
> call
>
> OGRFree(pszSrcWKT);
>
>
> Joaquim Luis
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100123/d91f43a4/attachment.html
From jluis at ualg.pt  Sat Jan 23 12:47:53 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sat Jan 23 12:47:59 2010
Subject: [gdal-dev] OGRFree(pszSrcWKT) can crash Matlab
In-Reply-To: <201001231719.51668.even.rouault@mines-paris.org>
References: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
	<201001231719.51668.even.rouault@mines-paris.org>
Message-ID: <20100123184753.86761uxqyo2s3328@wmail.ualg.pt>

Quoting Even Rouault <even.rouault@mines-paris.org>:

> Joaquim,
>
> you don't provide enough code to really see what's wrong, but my  
> guess is that you misuse GDAL API.

Even

Quite possible the first and I was trying to summarize what happens


>
> If you get pszSrcWKT, with
>
> pszSrcWKT = GDALGetProjectionRef(hDS);


No, I got it from oSrcSRS.exportToWkt( &pszSrcWKT );

See lines 325 & 329 of

code.google.com/p/mirone/source/browse/trunk/mex/gdalwarp_mex.cpp

Joaquim


>
> The pszSrcWKT string is owned by the hDS object, so as soon as you  
> destroy the hDS object with GDALClose(), the pointer becomes invalid  
> and points to arbitrary data.
>
> For the same reason, you should never free the string returned by  
> GDALGetProjectionRef() with OGRFree() or any other free() call.
>
> See http://gdal.org/classGDALDataset.html :
>
> GDALDataset::GetProjectionRef() :
>
> returns:
> a pointer to an internal reference string. It should not be altered,  
> freed or expected to last for long.
>
> Best regards,
>
> Even
>
> Le Saturday 23 January 2010 16:04:58 jluis@ualg.pt, vous avez ?crit?:
>> Hi,
>>
>> I have a serious crash in one of my Matlab MEXs caused by a call to
>> OGRFree() with an argument of size one (possibly the  null terminator).
>> This happens on OSX SL (64 bits) but not on Windows (where I still
>> build at 32 bits)
>>
>> Here is, as far as I could trace it, what is happening (SVN version of
>> the same age as GDAL1.7RC1)
>>
>> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>>
>> That prints
>>
>> ---- GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>> 26"]] PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
>> 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>> RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>> alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>>
>>
>> Next the code does:
>>
>> 	GDALClose( hSrcDS );
>> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>>
>> and now pszSrcWKT is empty. See
>>
>> ---- 
>> PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
>> 84",DATUM["WGS_1984",SPHEROID["WGS
>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>> RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>> alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>>
>> If I make it print the size of pszSrcWKT  with strlen(pszSrcWKT) the
>> answer is 1 and finally the MEX (and the entire MATLAB) crash on the
>> call
>>
>> OGRFree(pszSrcWKT);
>>
>>
>> Joaquim Luis
>>
>> ----------------------------------------------------------------
>> This message was sent using IMP, the Internet Messaging Program.
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From chaitanya.ch at gmail.com  Sat Jan 23 13:07:28 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Sat Jan 23 13:07:30 2010
Subject: [gdal-dev] OGRFree(pszSrcWKT) can crash Matlab
In-Reply-To: <20100123184753.86761uxqyo2s3328@wmail.ualg.pt>
References: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
	<201001231719.51668.even.rouault@mines-paris.org>
	<20100123184753.86761uxqyo2s3328@wmail.ualg.pt>
Message-ID: <eb502d881001231007q138560ebj8f28c6cbc8ed834e@mail.gmail.com>

Joaquim,

You did change pszSrcWkt (
http://code.google.com/p/mirone/source/browse/trunk/mex/gdalwarp_mex.cpp#385
).

You should remove line 385 and move the line 386 to 330.

On Sat, Jan 23, 2010 at 11:17 PM, <jluis@ualg.pt> wrote:

> Quoting Even Rouault <even.rouault@mines-paris.org>:
>
>  Joaquim,
>>
>> you don't provide enough code to really see what's wrong, but my guess is
>> that you misuse GDAL API.
>>
>
> Even
>
> Quite possible the first and I was trying to summarize what happens
>
>
>
>> If you get pszSrcWKT, with
>>
>> pszSrcWKT = GDALGetProjectionRef(hDS);
>>
>
>
> No, I got it from oSrcSRS.exportToWkt( &pszSrcWKT );
>
> See lines 325 & 329 of
>
> code.google.com/p/mirone/source/browse/trunk/mex/gdalwarp_mex.cpp
>
> Joaquim
>
>
>
>> The pszSrcWKT string is owned by the hDS object, so as soon as you destroy
>> the hDS object with GDALClose(), the pointer becomes invalid and points to
>> arbitrary data.
>>
>> For the same reason, you should never free the string returned by
>> GDALGetProjectionRef() with OGRFree() or any other free() call.
>>
>> See http://gdal.org/classGDALDataset.html :
>>
>> GDALDataset::GetProjectionRef() :
>>
>> returns:
>> a pointer to an internal reference string. It should not be altered, freed
>> or expected to last for long.
>>
>> Best regards,
>>
>> Even
>>
>> Le Saturday 23 January 2010 16:04:58 jluis@ualg.pt, vous avez ?crit :
>>
>>> Hi,
>>>
>>> I have a serious crash in one of my Matlab MEXs caused by a call to
>>> OGRFree() with an argument of size one (possibly the  null terminator).
>>> This happens on OSX SL (64 bits) but not on Windows (where I still
>>> build at 32 bits)
>>>
>>> Here is, as far as I could trace it, what is happening (SVN version of
>>> the same age as GDAL1.7RC1)
>>>
>>> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>>>
>>> That prints
>>>
>>> ---- GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>>>
>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>>>
>>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>>>
>>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>>> 26"]] PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
>>> 84",DATUM["WGS_1984",SPHEROID["WGS
>>>
>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>>>
>>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>>>
>>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>>>
>>> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>>>
>>> RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>>> alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>>>
>>>
>>> Next the code does:
>>>
>>>        GDALClose( hSrcDS );
>>> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>>>
>>> and now pszSrcWKT is empty. See
>>>
>>> ---- PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
>>> 84",DATUM["WGS_1984",SPHEROID["WGS
>>>
>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>>>
>>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>>>
>>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>>>
>>> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>>>
>>> RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>>> alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>>>
>>> If I make it print the size of pszSrcWKT  with strlen(pszSrcWKT) the
>>> answer is 1 and finally the MEX (and the entire MATLAB) crash on the
>>> call
>>>
>>> OGRFree(pszSrcWKT);
>>>
>>>
>>> Joaquim Luis
>>>
>>> ----------------------------------------------------------------
>>> This message was sent using IMP, the Internet Messaging Program.
>>>
>>> _______________________________________________
>>> gdal-dev mailing list
>>> gdal-dev@lists.osgeo.org
>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>
>>
>>
>>
>>
>
>
> ----------------------------------------------------------------
> This message was sent using IMP, the Internet Messaging Program.
>
>


-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100123/aeee37bd/attachment.html
From jluis at ualg.pt  Sat Jan 23 13:17:20 2010
From: jluis at ualg.pt (jluis@ualg.pt)
Date: Sat Jan 23 13:17:27 2010
Subject: [gdal-dev] OGRFree(pszSrcWKT) can crash Matlab
In-Reply-To: <eb502d881001231007q138560ebj8f28c6cbc8ed834e@mail.gmail.com>
References: <20100123160458.85251xofgrbfphk0@wmail.ualg.pt>
	<201001231719.51668.even.rouault@mines-paris.org>
	<20100123184753.86761uxqyo2s3328@wmail.ualg.pt>
	<eb502d881001231007q138560ebj8f28c6cbc8ed834e@mail.gmail.com>
Message-ID: <20100123191720.16554qnk9rjvb2m8@wmail.ualg.pt>

Quoting Chaitanya kumar CH <chaitanya.ch@gmail.com>:

> Joaquim,
>
> You did change pszSrcWkt (
> http://code.google.com/p/mirone/source/browse/trunk/mex/gdalwarp_mex.cpp#385
> ).
>
> You should remove line 385 and move the line 386 to 330.


Ok, thank you guys.

Joaquim


>
> On Sat, Jan 23, 2010 at 11:17 PM, <jluis@ualg.pt> wrote:
>
>> Quoting Even Rouault <even.rouault@mines-paris.org>:
>>
>>  Joaquim,
>>>
>>> you don't provide enough code to really see what's wrong, but my guess is
>>> that you misuse GDAL API.
>>>
>>
>> Even
>>
>> Quite possible the first and I was trying to summarize what happens
>>
>>
>>
>>> If you get pszSrcWKT, with
>>>
>>> pszSrcWKT = GDALGetProjectionRef(hDS);
>>>
>>
>>
>> No, I got it from oSrcSRS.exportToWkt( &pszSrcWKT );
>>
>> See lines 325 & 329 of
>>
>> code.google.com/p/mirone/source/browse/trunk/mex/gdalwarp_mex.cpp
>>
>> Joaquim
>>
>>
>>
>>> The pszSrcWKT string is owned by the hDS object, so as soon as you destroy
>>> the hDS object with GDALClose(), the pointer becomes invalid and points to
>>> arbitrary data.
>>>
>>> For the same reason, you should never free the string returned by
>>> GDALGetProjectionRef() with OGRFree() or any other free() call.
>>>
>>> See http://gdal.org/classGDALDataset.html :
>>>
>>> GDALDataset::GetProjectionRef() :
>>>
>>> returns:
>>> a pointer to an internal reference string. It should not be altered, freed
>>> or expected to last for long.
>>>
>>> Best regards,
>>>
>>> Even
>>>
>>> Le Saturday 23 January 2010 16:04:58 jluis@ualg.pt, vous avez ?crit :
>>>
>>>> Hi,
>>>>
>>>> I have a serious crash in one of my Matlab MEXs caused by a call to
>>>> OGRFree() with an argument of size one (possibly the  null terminator).
>>>> This happens on OSX SL (64 bits) but not on Windows (where I still
>>>> build at 32 bits)
>>>>
>>>> Here is, as far as I could trace it, what is happening (SVN version of
>>>> the same age as GDAL1.7RC1)
>>>>
>>>> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>>>>
>>>> That prints
>>>>
>>>> ---- GEOGCS["WGS 84",DATUM["WGS_1984",SPHEROID["WGS
>>>>
>>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>>>>
>>>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>>>>
>>>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>>>> 26"]] PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
>>>> 84",DATUM["WGS_1984",SPHEROID["WGS
>>>>
>>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>>>>
>>>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>>>>
>>>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>>>>
>>>> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>>>>
>>>> RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>>>> alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>>>>
>>>>
>>>> Next the code does:
>>>>
>>>>        GDALClose( hSrcDS );
>>>> mexPrintf("---- %s\n%s\n", pszSrcWKT,pszDstWKT);
>>>>
>>>> and now pszSrcWKT is empty. See
>>>>
>>>> ---- PROJCS["UTM Zone 29, Northern Hemisphere",GEOGCS["WGS
>>>> 84",DATUM["WGS_1984",SPHEROID["WGS
>>>>
>>>> 84",6378137,298.257223563,AUTHORITY["EPSG","7030"]],TOWGS84[0,0,0,0,0,0,0],
>>>>
>>>> AUTHORITY["EPSG","6326"]],PRIMEM["Greenwich",0,AUTHORITY["EPSG","8901"]],UNI
>>>>
>>>> T["degree",0.0174532925199433,AUTHORITY["EPSG","9108"]],AUTHORITY["EPSG","43
>>>>
>>>> 26"]],PROJECTION["Transverse_Mercator"],PARAMETER["latitude_of_origin",0],PA
>>>>
>>>> RAMETER["central_meridian",-9],PARAMETER["scale_factor",0.9996],PARAMETER["f
>>>> alse_easting",500000],PARAMETER["false_northing",0],UNIT["Meter",1]]
>>>>
>>>> If I make it print the size of pszSrcWKT  with strlen(pszSrcWKT) the
>>>> answer is 1 and finally the MEX (and the entire MATLAB) crash on the
>>>> call
>>>>
>>>> OGRFree(pszSrcWKT);
>>>>
>>>>
>>>> Joaquim Luis
>>>>
>>>> ----------------------------------------------------------------
>>>> This message was sent using IMP, the Internet Messaging Program.
>>>>
>>>> _______________________________________________
>>>> gdal-dev mailing list
>>>> gdal-dev@lists.osgeo.org
>>>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>>>>
>>>
>>>
>>>
>>>
>>
>>
>> ----------------------------------------------------------------
>> This message was sent using IMP, the Internet Messaging Program.
>>
>>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>



----------------------------------------------------------------
This message was sent using IMP, the Internet Messaging Program.

From vadivelan_gi at yahoo.co.in  Mon Jan 25 08:30:45 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Mon Jan 25 08:30:48 2010
Subject: [gdal-dev] Runtime error on executing "OGRRegisterAll()" function.
Message-ID: <1264426245484-4453903.post@n2.nabble.com>


Hi,
 I have build "gdal1.6.3" solution under VC++ 2008 Pro. Edition, and using
its "gdal.lib" file for one another application.

In the other Application, I am using OGR APIs "OGRRegisterAll". I am able to
build the application but on executing the program i am getting a Run Time
errror "Unhandled exception at 0x10264e35 (msvcr90d.dll) in
OGR_API_Tutorial.exe: 0xC0000005: Access violation reading location
0x6973762f."

On debugging, what I found is, something is going wrong when
VSIInstallGZipFileHandler() function gets called.

I think, I am missing some of the setting in nmake.opt file or some
configuration. Also I don't know how to enable HAVE_LIBZ macro.

Please, help me out to Run my program.

Thanks,
Vadivelan

-- 
View this message in context: http://n2.nabble.com/Runtime-error-on-executing-OGRRegisterAll-function-tp4453903p4453903.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From vadivelan_gi at yahoo.co.in  Mon Jan 25 08:32:55 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Mon Jan 25 08:32:58 2010
Subject: [gdal-dev] How to get Xerces Library support for OGR GML
In-Reply-To: <eb502d881001210521m5d957ba6sc5a1a399e16e4b0a@mail.gmail.com>
References: <1264079045657-4433471.post@n2.nabble.com>
	<eb502d881001210521m5d957ba6sc5a1a399e16e4b0a@mail.gmail.com>
Message-ID: <1264426375926-4453912.post@n2.nabble.com>


Thanks, Now I am able to get Xerces Library support.. after commenting few
lines in nmake.opt file.
-- 
View this message in context: http://n2.nabble.com/How-to-get-Xerces-Library-support-for-OGR-GML-tp4433471p4453912.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From dmorissette at mapgears.com  Mon Jan 25 09:50:12 2010
From: dmorissette at mapgears.com (Daniel Morissette)
Date: Mon Jan 25 09:50:18 2010
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release
In-Reply-To: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
References: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
Message-ID: <4B5DAFA4.1030007@mapgears.com>

Frank Warmerdam wrote:
> Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release.
> 

+1

(Tested with FGS, on two different Linux machines/build environments, 
all looks good)

-- 
Daniel Morissette
http://www.mapgears.com/
From peder at axensten.se  Mon Jan 25 11:04:26 2010
From: peder at axensten.se (Peder Axensten)
Date: Mon Jan 25 11:15:18 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
Message-ID: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>

I need a tool to add images together and I also need a tool to rescale the values of an image. So I have this idea of a tool that can add images together, where each may have its own weight. For example:
    gdal_muladd.py -o result_file *2.2 file1 *-1 file2 file3
would multiply the values of file with 2.2 and add them with -1 times the values of file2 etc.

I have something (based on gdal_merge.py) that seems to work, but still needs some work to handle no_data.

Is there any interest to add this to the gdal collection of tools?

Regards,

Peder Axensten
Research engineer

Swedish University of Agricultural Sciences
Forest Resource Management
Remote Sensing Laboratory

From chaitanya.ch at gmail.com  Mon Jan 25 11:40:38 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Mon Jan 25 11:40:40 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
Message-ID: <eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>

Peder,

At present, we can get that functionality using the GDAL Virtual Format. (
http://www.gdal.org/gdal_vrttut.html )
There are <ScaleOffset> and <ScaleRatio> values that can be specified within
the <ComplexSource>.

This .vrt file can be used as it is or translated to other formats.

On Mon, Jan 25, 2010 at 9:34 PM, Peder Axensten <peder@axensten.se> wrote:

> I need a tool to add images together and I also need a tool to rescale the
> values of an image. So I have this idea of a tool that can add images
> together, where each may have its own weight. For example:
>    gdal_muladd.py -o result_file *2.2 file1 *-1 file2 file3
> would multiply the values of file with 2.2 and add them with -1 times the
> values of file2 etc.
>
> I have something (based on gdal_merge.py) that seems to work, but still
> needs some work to handle no_data.
>
> Is there any interest to add this to the gdal collection of tools?
>
> Regards,
>
> Peder Axensten
> Research engineer
>
> Swedish University of Agricultural Sciences
> Forest Resource Management
> Remote Sensing Laboratory
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100125/dc96ae7b/attachment.html
From even.rouault at mines-paris.org  Mon Jan 25 18:08:47 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Mon Jan 25 18:09:46 2010
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release
In-Reply-To: <4B5DAFA4.1030007@mapgears.com>
References: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
	<4B5DAFA4.1030007@mapgears.com>
Message-ID: <201001260008.56405.even.rouault@mines-paris.org>

> Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release.

+1 

Tested/compiled (1.7.0RC1 or a few revisions before) on various Linux 32 
distros (Ubuntu 8.04 & 9.10 , Debian Lenny, Fedora 12, OpenSuse 11.1, 
Mandriva 2009.1, Centos 3.9, Centos 4.7, Centos 5.4), FreeBSD 8.0 32 bit and 
Ubuntu 8.04 64bit.

Since the 1.7.0RC1 tag, I've fixed in the 1.7 branch a bug in the new 
Rasterlite driver - in the createcopy/overview creation code (#3339) - that 
could randomly lead to crashes especially on 32 bit environment. Probably not 
critical enough to postpone the release though.

Best regards,

Even

Le Monday 25 January 2010 15:50:12 Daniel Morissette, vous avez ?crit?:
> Frank Warmerdam wrote:
> > Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release.
>
> +1
>
> (Tested with FGS, on two different Linux machines/build environments,
> all looks good)


From szekerest at gmail.com  Mon Jan 25 18:40:45 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Mon Jan 25 18:40:48 2010
Subject: [gdal-dev] Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release
In-Reply-To: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
References: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
Message-ID: <f3b73b7d1001251540p7404e882i6dce74e48a1276b4@mail.gmail.com>

+1

It looks OK with MSVC71/80/90 on win32 and win64


Best regards,

Tamas



2010/1/22 Frank Warmerdam <warmerdam@pobox.com>

> Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release.
>
> ---
>
> Not having heard any significant immediate problems with the RC1,
> I am moving to adopt it as the official 1.7 release.  I hope PSC
> members would do some testing before voting.  I have done some
> preliminary testing on 32bit linux and found no serious issues.
> I will try to do some more testing on windows before I vote.
>
> I'm in China for a bit, and I'm a little confused about what will count
> as two business days in the west but I imagine the vote will close
> roughly on Tuesday.
>
> Best regards,
> --
>
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> and watch the world go round - Rush    | Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100126/cd6827fe/attachment.html
From JAMES.E.HOPPER at saic.com  Mon Jan 25 20:12:41 2010
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Mon Jan 25 20:27:20 2010
Subject: [gdal-dev] Reading jpeg 2000 compressed nitfs
In-Reply-To: <20100125170027.13E4EE01B3E@lists.osgeo.org>
Message-ID: <C783ABB9.13144%james.e.hopper@saic.com>

I read the item about lack of support for the J2K_SUBFILE mechanism using
jasper, and that it requires one of the commercial jpeg2000 drivers.  Is
that still the case, or Is there a way to read jpeg2k nitfs with open source
jpeg2k libraries?

Best jim

From warmerdam at pobox.com  Mon Jan 25 21:38:13 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 25 21:38:15 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
Message-ID: <931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>

Chaitanya,

I don't think the VRT approach supports actually adding
different images together, only overlaying and rescaling.

Peder, such a script would be welcome initially in
the gdal/swig/python/samples directory which are
often "proof of concept" level scripts rather than being
as polished as the supported scripts in the /scripts
directory.

Best regards,

On Tue, Jan 26, 2010 at 12:40 AM, Chaitanya kumar CH
<chaitanya.ch@gmail.com> wrote:
> Peder,
>
> At present, we can get that functionality using the GDAL Virtual Format. (
> http://www.gdal.org/gdal_vrttut.html )
> There are <ScaleOffset> and <ScaleRatio> values that can be specified within
> the <ComplexSource>.
>
> This .vrt file can be used as it is or translated to other formats.
>
> On Mon, Jan 25, 2010 at 9:34 PM, Peder Axensten <peder@axensten.se> wrote:
>>
>> I need a tool to add images together and I also need a tool to rescale the
>> values of an image. So I have this idea of a tool that can add images
>> together, where each may have its own weight. For example:
>> ? ?gdal_muladd.py -o result_file *2.2 file1 *-1 file2 file3
>> would multiply the values of file with 2.2 and add them with -1 times the
>> values of file2 etc.
>>
>> I have something (based on gdal_merge.py) that seems to work, but still
>> needs some work to handle no_data.
>>
>> Is there any interest to add this to the gdal collection of tools?
>>
>> Regards,
>>
>> Peder Axensten
>> Research engineer
>>
>> Swedish University of Agricultural Sciences
>> Forest Resource Management
>> Remote Sensing Laboratory
>>
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From matt at klaric.com  Mon Jan 25 21:57:58 2010
From: matt at klaric.com (Matt Klaric)
Date: Mon Jan 25 21:58:03 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
Message-ID: <eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>

On Mon, Jan 25, 2010 at 8:38 PM, Frank Warmerdam <warmerdam@pobox.com>wrote:

> I don't think the VRT approach supports actually adding
> different images together, only overlaying and rescaling.
>
>
However, pixel functions could be used in a VRT file to accomplish the
desired outcome.

--matt
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100125/ef6fe671/attachment.html
From warmerdam at pobox.com  Mon Jan 25 21:59:34 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 25 22:04:44 2010
Subject: [gdal-dev] Re: Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release
In-Reply-To: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
References: <931f8ea91001212214h5df17fb0r6fc3b5e080f56cae@mail.gmail.com>
Message-ID: <931f8ea91001251859y19c55493n6486e34a7b5a8eb7@mail.gmail.com>

On Fri, Jan 22, 2010 at 2:14 PM, Frank Warmerdam <warmerdam@pobox.com> wrote:
> Motion: Adopt GDAL/OGR 1.7.0RC1 as Final Release.

Folks,

There have been a number of fixes since the RC1
was prepared, but in my opinion none of them are
particularly significant with the possible exception of
the "producing legal NITF with JPEG compression"
issue, but we can role that into a 1.7.1 in a month or
so.

So with support from FrankW, EvenR, TamasS, and
DanielM I declare the motion passed.  I will proceed to
promoting it to a full release and sending out the release
announcements.

A little late, but I think quite solid!

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Mon Jan 25 23:28:59 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Mon Jan 25 23:29:02 2010
Subject: [gdal-dev] Reading jpeg 2000 compressed nitfs
In-Reply-To: <C783ABB9.13144%james.e.hopper@saic.com>
References: <20100125170027.13E4EE01B3E@lists.osgeo.org>
	<C783ABB9.13144%james.e.hopper@saic.com>
Message-ID: <931f8ea91001252028w6e1143f3r1879bc423d1ded01@mail.gmail.com>

James,

I have reviewed nitfdataset.cpp and jpeg2000dataset.cpp
(the JasPer driver) and I believe they are now compatible.
That is, nitf now uses the /vsisubfile/ mechanism to
operate on the jpeg2000 data stream and I see the
JasPer driver now uses the VSI*L API needed to support
the /vsisubfile/ mechanism.

However, most NITF files I have worked with that
had jpeg2000 compression had single large
compressed images, not many small tiles.
The JasPer library does *not* provide an effective
mechanism to read subareas so for a large image
it tends to use as much as 10 times as much memory
as would be needed to hold the decoded image.
This makes it impractical for many geospatial
applications.

So I am still dubious about using it.

Best regards,

On Tue, Jan 26, 2010 at 9:12 AM, jim hopper <JAMES.E.HOPPER@saic.com> wrote:
> I read the item about lack of support for the J2K_SUBFILE mechanism using
> jasper, and that it requires one of the commercial jpeg2000 drivers. ?Is
> that still the case, or Is there a way to read jpeg2k nitfs with open source
> jpeg2k libraries?
>
> Best jim
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From mateusz at loskot.net  Tue Jan 26 07:33:44 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Tue Jan 26 07:33:46 2010
Subject: [gdal-dev] Runtime error on executing "OGRRegisterAll()" function.
In-Reply-To: <1264426245484-4453903.post@n2.nabble.com>
References: <1264426245484-4453903.post@n2.nabble.com>
Message-ID: <4B5EE128.3020806@loskot.net>

vadi_nabble wrote:
> Hi, I have build "gdal1.6.3" solution under VC++ 2008 Pro. Edition,
> and using its "gdal.lib" file for one another application.
> 
> In the other Application, I am using OGR APIs "OGRRegisterAll". I am
> able to build the application but on executing the program i am
> getting a Run Time errror "Unhandled exception at 0x10264e35
> (msvcr90d.dll) in OGR_API_Tutorial.exe: 0xC0000005: Access violation
> reading location 0x6973762f."
> 
> On debugging, what I found is, something is going wrong when 
> VSIInstallGZipFileHandler() function gets called.
> 
> I think, I am missing some of the setting in nmake.opt file or some 
> configuration. Also I don't know how to enable HAVE_LIBZ macro.

You are suffering of a well-known problem.
I documented it recently in the Trac ticket:

http://trac.osgeo.org/gdal/ticket/3346

GDAL debug build links against non-debug Microsoft C/C++ Run-time
libraries - /MD flag is forced in nmake.opt. However, when you make
debug build of your application, by default your project links against
debug version (see in error msvcr90d.dll)

I fix this problem myself by configuring GDAL debug build to use
/MDd flags - I replace /MD with /MDd in nmake.opt.


Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From craig.leat at gmail.com  Tue Jan 26 07:42:25 2010
From: craig.leat at gmail.com (Craig Leat)
Date: Tue Jan 26 07:42:29 2010
Subject: [gdal-dev] Altering the GeoTransform matrix with World files and
	VRT files
Message-ID: <1fef7d9b1001260442t5cf8cff7uefb32387386efd61@mail.gmail.com>

Hi,

I have a collection of MrSid images with embedded georeferencing
information and accompanying world files. The world files have correct
geotransform values, but the information embedded in the sid files is
incorrect. My installation of gdal 1.7 gives precedence to the
embedded georeferencing over the world file. Based on this mail [1], I
understand that this order of precedence was a gdal design decision
and I need to use a vrt file to alter the geotransform. Since I have
many files and I don't expect that the government supplier will
correct the data for me I have started writing a script to generate
the vrt files and then alter the geotransform in the vrt based on
values found in the world file.

Before I proceed much further I wish to pose two questions:
1. Is there a gdal environment variable I may have missed that can be
used to give precedence to the world file?
2. Is there any freely available software that will modify the
metadata tags in a sid file?

PS I would rather not translate from sid to tif.

Much thanks,

Craig

[1] http://n2.nabble.com/Georeferencing-Mrsid-raster-file-with-a-world-file-td1994277.html#a1994280
From massimo.costantini at gmail.com  Tue Jan 26 10:46:23 2010
From: massimo.costantini at gmail.com (massimo costantini)
Date: Tue Jan 26 10:46:26 2010
Subject: [gdal-dev] Support for GML 3
Message-ID: <f75e91521001260746p3fec1012jd4a88e9878a9e16@mail.gmail.com>

Hi,
I'd like to know, the state of the art for the GML3 data format
support in ogr2ogr.

Thanks
From jukka.rahkonen at mmmtike.fi  Tue Jan 26 10:58:15 2010
From: jukka.rahkonen at mmmtike.fi (Jukka Rahkonen)
Date: Tue Jan 26 10:58:42 2010
Subject: [gdal-dev] Re: Altering the GeoTransform matrix with World files
	and	VRT files
References: <1fef7d9b1001260442t5cf8cff7uefb32387386efd61@mail.gmail.com>
Message-ID: <loom.20100126T165510-213@post.gmane.org>

Craig Leat <craig.leat <at> gmail.com> writes:

> 
>
> 
> Before I proceed much further I wish to pose two questions:
> 1. Is there a gdal environment variable I may have missed that can be
> used to give precedence to the world file?
> 2. Is there any freely available software that will modify the
> metadata tags in a sid file?
>

Hi,

With Mapserver you can use:
PROCESSING "EXTENT_PRIORITY=WORLDFILE

More reading at
http://n2.nabble.com/
AGG-output-with-mapscript-C-5-2-problem-td1973340.html

I do not know how this feature could be utilised directly with gdal, 
but it exists.

-Jukka Rahkonen-

From bruceraup at gmail.com  Tue Jan 26 13:22:12 2010
From: bruceraup at gmail.com (Bruce Raup)
Date: Tue Jan 26 13:22:20 2010
Subject: [gdal-dev] geolocation info in netCDF: "northernmost_northing" etc.
	not universal
Message-ID: <1464295a1001261022s67c360feibd3ff3c7b48683cb@mail.gmail.com>

GDAL developers,

I am working with netCDF files and GDAL, and we are in the process of
determining the exact format of the netCDF files we will produce for
the public to use.  We are aware of the CF conventions for storing map
parameters in the file, but what seems less well defined is how to
represent the extent of the data in grid coordinates.

The netCDF driver in GDAL appears to use the terms

northernmost_northing
southernmost_northing
westernmost_easting
easternmost_easting

to supply grid boundary coordinates, and I understand the information
in these is redundant with the information stored in the attribute
"GeoRef".

My question is, what would be the impacts of changing these terms to
something that makes sense more universally?  These terms make no
sense (are actually very confusing) in some situations, such as a
south-up map near the south pole.

We propose using terms such as

grid_top_boundary_projected_y
grid_bottom_boundary_projected_y
grid_left_boundary_projected_x
grid_right_boundary_projected_x

Alternatively, grid corner coordinates could be used.

What would the impacts of such a change of names in our files be?  If
the GeoRef field is also in the file, would it break existing software
for being able to navigate (geolocate) the data?  And, would the
community consider the adoption of more universal terms more generally
(i.e. in GDAL itself)?

Thanks,
Bruce Raup
From even.rouault at mines-paris.org  Tue Jan 26 14:22:36 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Tue Jan 26 14:22:48 2010
Subject: [gdal-dev] Support for GML 3
In-Reply-To: <f75e91521001260746p3fec1012jd4a88e9878a9e16@mail.gmail.com>
References: <f75e91521001260746p3fec1012jd4a88e9878a9e16@mail.gmail.com>
Message-ID: <201001262022.37874.even.rouault@mines-paris.org>

Massimo,

it depends on if you're interested by the read side or the write side of the 
GML driver !
* For the read side, it's designed for GML2 but some GML3 support has been 
added . I see there's at least some support for the <pos> and <posList> 
elements. The best is to try and see if it supports what you're interested 
in !
* For the write side, GML2 only.

Best regards,

Even

Le Tuesday 26 January 2010 16:46:23 massimo costantini, vous avez ?crit?:
> Hi,
> I'd like to know, the state of the art for the GML3 data format
> support in ogr2ogr.
>
> Thanks
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev


From warmerdam at pobox.com  Tue Jan 26 20:50:48 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Tue Jan 26 20:50:50 2010
Subject: [gdal-dev] Altering the GeoTransform matrix with World files and 
	VRT files
In-Reply-To: <1fef7d9b1001260442t5cf8cff7uefb32387386efd61@mail.gmail.com>
References: <1fef7d9b1001260442t5cf8cff7uefb32387386efd61@mail.gmail.com>
Message-ID: <931f8ea91001261750n9e85c99t7f7826f7f37c2fa2@mail.gmail.com>

Craig,

The mechanism that Jukka mentions is MapServer-only.
Reviewing the code, it appears that shapefiles are still
just a fallback if no georeferencing is found internally.

I am not aware of software for overriding mrsid georeferencing
in the file.

Best regards,

On Tue, Jan 26, 2010 at 8:42 PM, Craig Leat <craig.leat@gmail.com> wrote:
> Hi,
>
> I have a collection of MrSid images with embedded georeferencing
> information and accompanying world files. The world files have correct
> geotransform values, but the information embedded in the sid files is
> incorrect. My installation of gdal 1.7 gives precedence to the
> embedded georeferencing over the world file. Based on this mail [1], I
> understand that this order of precedence was a gdal design decision
> and I need to use a vrt file to alter the geotransform. Since I have
> many files and I don't expect that the government supplier will
> correct the data for me I have started writing a script to generate
> the vrt files and then alter the geotransform in the vrt based on
> values found in the world file.
>
> Before I proceed much further I wish to pose two questions:
> 1. Is there a gdal environment variable I may have missed that can be
> used to give precedence to the world file?
> 2. Is there any freely available software that will modify the
> metadata tags in a sid file?
>
> PS I would rather not translate from sid to tif.
>
> Much thanks,
>
> Craig
>
> [1] http://n2.nabble.com/Georeferencing-Mrsid-raster-file-with-a-world-file-td1994277.html#a1994280
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From craig.leat at gmail.com  Wed Jan 27 03:12:03 2010
From: craig.leat at gmail.com (Craig Leat)
Date: Wed Jan 27 03:12:12 2010
Subject: [gdal-dev] Altering the GeoTransform matrix with World files and 
	VRT files
In-Reply-To: <931f8ea91001261750n9e85c99t7f7826f7f37c2fa2@mail.gmail.com>
References: <1fef7d9b1001260442t5cf8cff7uefb32387386efd61@mail.gmail.com>
	<931f8ea91001261750n9e85c99t7f7826f7f37c2fa2@mail.gmail.com>
Message-ID: <1fef7d9b1001270012s263dcaf5jc4df6016698babd@mail.gmail.com>

Hi Frank,

Frank Warmerdam wrote:
> The mechanism that Jukka mentions is MapServer-only.
> Reviewing the code, it appears that shapefiles are still
> just a fallback if no georeferencing is found internally.
>
> I am not aware of software for overriding mrsid georeferencing
> in the file.

Would it be considered too cheeky if I opened an enhancement ticket
for an environment variable (WORLDFILE_PRIORITY)? If the variable is
set a driver should use the worldfile instead of the internal
georeferencing.

Regards,

Craig
From massimo.costantini at gmail.com  Wed Jan 27 04:59:42 2010
From: massimo.costantini at gmail.com (massimo costantini)
Date: Wed Jan 27 05:06:43 2010
Subject: [gdal-dev] Support for GML 3
In-Reply-To: <201001262022.37874.even.rouault@mines-paris.org>
References: <f75e91521001260746p3fec1012jd4a88e9878a9e16@mail.gmail.com>
	<201001262022.37874.even.rouault@mines-paris.org>
Message-ID: <f75e91521001270159s6a169744u9df9195a4f41c3ba@mail.gmail.com>

Thank's a lot,
someone know if GML3 support for writing is under costruction or not?

On Tue, Jan 26, 2010 at 8:22 PM, Even Rouault
<even.rouault@mines-paris.org> wrote:
> Massimo,
>
> it depends on if you're interested by the read side or the write side of the
> GML driver !
> * For the read side, it's designed for GML2 but some GML3 support has been
> added . I see there's at least some support for the <pos> and <posList>
> elements. The best is to try and see if it supports what you're interested
> in !
> * For the write side, GML2 only.
>
> Best regards,
>
> Even
>
> Le Tuesday 26 January 2010 16:46:23 massimo costantini, vous avez ?crit?:
>> Hi,
>> I'd like to know, the state of the art for the GML3 data format
>> support in ogr2ogr.
>>
>> Thanks
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
From vadivelan_gi at yahoo.co.in  Wed Jan 27 07:55:58 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Wed Jan 27 07:56:01 2010
Subject: [gdal-dev] Runtime error on executing "OGRRegisterAll()" function.
In-Reply-To: <4B5EE128.3020806@loskot.net>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
Message-ID: <1264596958438-4466974.post@n2.nabble.com>


Hi Mateusz,
 First of all I would like to thank you for giving a proper solution to my
problem.
 My issue has got resolved after making changes as suggested by you. Its has
been over a week I was struggling on this issue.

Thanks a lot.
Vadivelan
-- 
View this message in context: http://n2.nabble.com/Runtime-error-on-executing-OGRRegisterAll-function-tp4453903p4466974.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From vadivelan_gi at yahoo.co.in  Wed Jan 27 08:17:04 2010
From: vadivelan_gi at yahoo.co.in (vadi_nabble)
Date: Wed Jan 27 08:17:06 2010
Subject: [gdal-dev] Building GDAL Application gdal1.6.3 on VC++2008 Pro
 Edition Document
Message-ID: <1264598224514-4467057.post@n2.nabble.com>


Hi,
 Last 2 weeks I was trying to build a GDAL application "gdal1.6.3" on VC++
2008 Pro Edition.
 However, I was getting some compilation and Run time error on building and
Running.
 What I found is I need to set namke.opt file properly for successfull
compilation and exection.
 
  I have created on document which describes step by step procedure for
building GDAL application and another application to use OGR APIs.

Thanks,
Vadivelan
http://n2.nabble.com/file/n4467057/GDAL%2BBuilding%2Band%2BExecution%2BSteps.doc
GDAL+Building+and+Execution+Steps.doc 
-- 
View this message in context: http://n2.nabble.com/Building-GDAL-Application-gdal1-6-3-on-VC-2008-Pro-Edition-Document-tp4467057p4467057.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From szekerest at gmail.com  Wed Jan 27 08:34:47 2010
From: szekerest at gmail.com (Tamas Szekeres)
Date: Wed Jan 27 08:34:50 2010
Subject: [gdal-dev] Building GDAL Application gdal1.6.3 on VC++2008 Pro 
	Edition Document
In-Reply-To: <1264598224514-4467057.post@n2.nabble.com>
References: <1264598224514-4467057.post@n2.nabble.com>
Message-ID: <f3b73b7d1001270534j4ea2605fnab8c219869253d45@mail.gmail.com>

Hi Vadivelan,

The GDAL build instructions should normally go to
http://trac.osgeo.org/gdal/wiki/BuildHints
If you see something missing here, feel free to edit the wiki with your
additional information.

Best regards,

Tamas



2010/1/27 vadi_nabble <vadivelan_gi@yahoo.co.in>

>
> Hi,
>  Last 2 weeks I was trying to build a GDAL application "gdal1.6.3" on VC++
> 2008 Pro Edition.
>  However, I was getting some compilation and Run time error on building and
> Running.
>  What I found is I need to set namke.opt file properly for successfull
> compilation and exection.
>
>  I have created on document which describes step by step procedure for
> building GDAL application and another application to use OGR APIs.
>
> Thanks,
> Vadivelan
>
> http://n2.nabble.com/file/n4467057/GDAL%2BBuilding%2Band%2BExecution%2BSteps.doc
> GDAL+Building+and+Execution+Steps.doc
> --
> View this message in context:
> http://n2.nabble.com/Building-GDAL-Application-gdal1-6-3-on-VC-2008-Pro-Edition-Document-tp4467057p4467057.html
> Sent from the GDAL - Dev mailing list archive at Nabble.com.
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100127/b1b532e4/attachment.html
From mschulz at webgis.de  Wed Jan 27 08:58:38 2010
From: mschulz at webgis.de (Michael Schulz)
Date: Wed Jan 27 08:58:42 2010
Subject: [gdal-dev] Building gdal with dxf support?
Message-ID: <e750b12e1001270558t20823959i5015fe51849b9f39@mail.gmail.com>

Hi,

I just tried downloading and building the latest gdal, version 1.7.0.
I wanted to build it with the new dxf support. The dxf dir is present
in the source tree. While making ogr it enters the dxf dir but does
nothing:

make -C dxf
make[1]: Entering directory `/usr/local/src/gdal-1.7.0/ogr/ogrsf_frmts/dxf'
make[1]: F??r das Ziel ??default?? ist nichts zu tun. "nothing to be
done for target default"
make[1]: Leaving directory `/usr/local/src/gdal-1.7.0/ogr/ogrsf_frmts/dxf'

Am I missing a configure option or sth. like that?

Cheers, Michael


-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Aufwind durch Wissen!

Qualifizierte Open Source Schulungen bei der
http://www.foss-akademie.de/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-----------------------------------------------------------
Michael Schulz
mschulz@webgis.de

in medias res
Gesellschaft f?r Informationstechnologie mbH

+++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++

Schwimmbadstra?e 2
D-79100  Freiburg i. Br.

Tel:  +49 (0)761 705798-102
Tel:  +49 (0)761 705798-0
Fax: +49 (0)761 705798-09

+++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++

http://www.webgis.de / http://www.zopecms.de
--------------------------------------------------------------
Gesch?ftsf?hrer: Stefan Giese, Dr. Christof Lindenbeck
Eingetragen im Handelsregister HRB 5930 beim Amtsgericht Freiburg
From chaitanya.ch at gmail.com  Wed Jan 27 09:21:50 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Wed Jan 27 09:21:55 2010
Subject: [gdal-dev] Building gdal with dxf support?
In-Reply-To: <e750b12e1001270558t20823959i5015fe51849b9f39@mail.gmail.com>
References: <e750b12e1001270558t20823959i5015fe51849b9f39@mail.gmail.com>
Message-ID: <eb502d881001270621t2aaa1c5djac144ec0f1906be8@mail.gmail.com>

Micheal,

Try the 'touch' command on the files in the dxf directory to update the
timestamps.

2010/1/27 Michael Schulz <mschulz@webgis.de>

> Hi,
>
> I just tried downloading and building the latest gdal, version 1.7.0.
> I wanted to build it with the new dxf support. The dxf dir is present
> in the source tree. While making ogr it enters the dxf dir but does
> nothing:
>
> make -C dxf
> make[1]: Entering directory `/usr/local/src/gdal-1.7.0/ogr/ogrsf_frmts/dxf'
> make[1]: F??r das Ziel ??default?? ist nichts zu tun. "nothing to be
> done for target default"
> make[1]: Leaving directory `/usr/local/src/gdal-1.7.0/ogr/ogrsf_frmts/dxf'
>
> Am I missing a configure option or sth. like that?
>
> Cheers, Michael
>
>
> --
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
> Aufwind durch Wissen!
>
> Qualifizierte Open Source Schulungen bei der
> http://www.foss-akademie.de/
> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>
> -----------------------------------------------------------
> Michael Schulz
> mschulz@webgis.de
>
> in medias res
> Gesellschaft f?r Informationstechnologie mbH
>
> +++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++
>
> Schwimmbadstra?e 2
> D-79100  Freiburg i. Br.
>
> Tel:  +49 (0)761 705798-102
> Tel:  +49 (0)761 705798-0
> Fax: +49 (0)761 705798-09
>
> +++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++
>
> http://www.webgis.de / http://www.zopecms.de
> --------------------------------------------------------------
> Gesch?ftsf?hrer: Stefan Giese, Dr. Christof Lindenbeck
> Eingetragen im Handelsregister HRB 5930 beim Amtsgericht Freiburg
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100127/bd32fac8/attachment.html
From mschulz at webgis.de  Wed Jan 27 09:28:43 2010
From: mschulz at webgis.de (Michael Schulz)
Date: Wed Jan 27 09:28:49 2010
Subject: [gdal-dev] Building gdal with dxf support?
In-Reply-To: <eb502d881001270621t2aaa1c5djac144ec0f1906be8@mail.gmail.com>
References: <e750b12e1001270558t20823959i5015fe51849b9f39@mail.gmail.com>
	<eb502d881001270621t2aaa1c5djac144ec0f1906be8@mail.gmail.com>
Message-ID: <e750b12e1001270628j2d68aba9h5038a0fb261b662c@mail.gmail.com>

Hi,

thanks, this solved it.

Michael


2010/1/27 Chaitanya kumar CH <chaitanya.ch@gmail.com>:
> Micheal,
>
> Try the 'touch' command on the files in the dxf directory to update the
> timestamps.
>
> 2010/1/27 Michael Schulz <mschulz@webgis.de>
>>
>> Hi,
>>
>> I just tried downloading and building the latest gdal, version 1.7.0.
>> I wanted to build it with the new dxf support. The dxf dir is present
>> in the source tree. While making ogr it enters the dxf dir but does
>> nothing:
>>
>> make -C dxf
>> make[1]: Entering directory
>> `/usr/local/src/gdal-1.7.0/ogr/ogrsf_frmts/dxf'
>> make[1]: F??r das Ziel ??default?? ist nichts zu tun. "nothing to be
>> done for target default"
>> make[1]: Leaving directory `/usr/local/src/gdal-1.7.0/ogr/ogrsf_frmts/dxf'
>>
>> Am I missing a configure option or sth. like that?
>>
>> Cheers, Michael
>>
>>
>> --
>> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>> Aufwind durch Wissen!
>>
>> Qualifizierte Open Source Schulungen bei der
>> http://www.foss-akademie.de/
>> ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
>>
>> -----------------------------------------------------------
>> Michael Schulz
>> mschulz@webgis.de
>>
>> in medias res
>> Gesellschaft f?r Informationstechnologie mbH
>>
>> +++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++
>>
>> Schwimmbadstra?e 2
>> D-79100 ?Freiburg i. Br.
>>
>> Tel: ?+49 (0)761 705798-102
>> Tel: ?+49 (0)761 705798-0
>> Fax: +49 (0)761 705798-09
>>
>> +++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++
>>
>> http://www.webgis.de / http://www.zopecms.de
>> --------------------------------------------------------------
>> Gesch?ftsf?hrer: Stefan Giese, Dr. Christof Lindenbeck
>> Eingetragen im Handelsregister HRB 5930 beim Amtsgericht Freiburg
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
>
>
> --
> Best regards,
> Chaitanya kumar CH.
> /t?a???nj?/ /k?m?r/
> +91-9848167848
> 17.241582N 80.142635E
>



-- 
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Aufwind durch Wissen!

Qualifizierte Open Source Schulungen bei der
http://www.foss-akademie.de/
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

-----------------------------------------------------------
Michael Schulz
mschulz@webgis.de

in medias res
Gesellschaft f?r Informationstechnologie mbH

+++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++

Schwimmbadstra?e 2
D-79100  Freiburg i. Br.

Tel:  +49 (0)761 705798-102
Tel:  +49 (0)761 705798-0
Fax: +49 (0)761 705798-09

+++ Bitte beachten Sie unsere neue Adresse und Durchwahl +++

http://www.webgis.de / http://www.zopecms.de
--------------------------------------------------------------
Gesch?ftsf?hrer: Stefan Giese, Dr. Christof Lindenbeck
Eingetragen im Handelsregister HRB 5930 beim Amtsgericht Freiburg
From Gary.Smart at goodrich.com  Wed Jan 27 06:20:45 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Wed Jan 27 10:12:46 2010
Subject: [gdal-dev] Projection for OSGB36
Message-ID: <F52876411F027A4FA646577165F65C1617875B@NHC2EX13.goodrich.root.local>

I have a series of OS map TIF files with associated tfw files.  However,
the tif files contain no information about the projection.  I understand
that these files are using OSGB36 AIRY1830

 

Can anyone tell me the precise text specification I need to be able to
set up this projection.  

 

An example tfw file is:

2.5

0

0

-2.5

215000

254000 

 

I tried to importFromWkt with the string from the gdal/data/ecw_cs.wkt
but this did not seem to work.  I don't believe that OSGB36 is one of
the WellKnownGeogCS either.

 

Gary

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100127/eb373888/attachment.html
From jmckenna at gatewaygeomatics.com  Wed Jan 27 10:59:21 2010
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed Jan 27 10:59:28 2010
Subject: [gdal-dev] 1.7.0 compile with MSVC 2008 fails on NITF
Message-ID: <4B6062D9.6090903@gatewaygeomatics.com>

Hello all,

I am trying to compile GDAL 1.7.0 with MSVC 2008, but for some reason my 
compile fails, when it seems to get to the 'nitf' format:

**********************
nitfwritejpeg_12.cpp
d:\build\mapserver-buildkit-2008\gdal_1_7_0\frmts\nitf\nitfwritejpeg.cpp(40) 
: fatal error
  C1083: Cannot open include file: '../../jpeg/libjpeg12/jpeglib.h': No 
such file or direct
ory
NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
9.0\VC\BIN\cl.EXE"'
: return code '0x2'
Stop.
**********************

As the error states, the file jpeg/libjpeg12/jpeglib.h' does not exist 
(that directory only contains 2 files).

I also don't see a "NITF" section in the /gdal/nmake.opt file.

Anyone have any ideas what I am doing wrong?

-jeff


-- 
Jeff McKenna
FOSS4G Consulting and Training Services
http://www.gatewaygeomatics.com/




From yassefa at dmsolutions.ca  Wed Jan 27 11:36:43 2010
From: yassefa at dmsolutions.ca (Yewondwossen Assefa)
Date: Wed Jan 27 11:46:32 2010
Subject: [gdal-dev] 1.7.0 compile with MSVC 2008 fails on NITF
In-Reply-To: <4B6062D9.6090903@gatewaygeomatics.com>
References: <4B6062D9.6090903@gatewaygeomatics.com>
Message-ID: <4B606B9B.1050300@dmsolutions.ca>

Jeff,

 I run into the same issue and my quick fix was to:
  - cd gdal-1.7.0/frmts/jpeg
  - nmake -f makefile.vc
  and come back to the the main gdal-1.7.0/ and continue with the build

The problem comes from the fact that jpeg12 needs to be build before 
nitf (that is where files such as jpeglib.h are copied into the jpeg12 
directory).

You could do that until it is fixed properly in the makefiles.

regards,

Jeff McKenna wrote:
> Hello all,
>
> I am trying to compile GDAL 1.7.0 with MSVC 2008, but for some reason 
> my compile fails, when it seems to get to the 'nitf' format:
>
> **********************
> nitfwritejpeg_12.cpp
> d:\build\mapserver-buildkit-2008\gdal_1_7_0\frmts\nitf\nitfwritejpeg.cpp(40) 
> : fatal error
>  C1083: Cannot open include file: '../../jpeg/libjpeg12/jpeglib.h': No 
> such file or direct
> ory
> NMAKE : fatal error U1077: '"C:\Program Files\Microsoft Visual Studio 
> 9.0\VC\BIN\cl.EXE"'
> : return code '0x2'
> Stop.
> **********************
>
> As the error states, the file jpeg/libjpeg12/jpeglib.h' does not exist 
> (that directory only contains 2 files).
>
> I also don't see a "NITF" section in the /gdal/nmake.opt file.
>
> Anyone have any ideas what I am doing wrong?
>
> -jeff
>
>


-- 
----------------------------------------------------------------
Assefa Yewondwossen           
Software Analyst   

Email: assefa@dmsolutions.ca    
http://www.dmsolutions.ca/

Phone: (613) 565-5056 (ext 14)
Fax:   (613) 565-0925
----------------------------------------------------------------


From SnapeM at rpsgroup.com  Wed Jan 27 11:57:00 2010
From: SnapeM at rpsgroup.com (Matthew Snape)
Date: Wed Jan 27 12:07:07 2010
Subject: [gdal-dev] grid from point dataset without interpolation
Message-ID: <605F55D8070C094AA2E2A9CBA2767A3C06F2AB91@EXMB1.eur.rpsgroup.com>

Hi,
 
I have a set of points in a shapefile that represent gridded height
data.  I would like to convert them to a raster without using any
interpolation, merely using each point as the centre of a cell.  I have
tried using gdal_grid with the nearest algorithm but this appears very
slow.  Is there a better way?
 
my current command is:
 
gdal_grid -a nearest -txe 420000 640000 -tye 240000 460000 -outsize 4400
4400 -of "GTiff" -ot Int16 -co "COMPRESS=LZW" -zfield HEIGHT -l all
all.shp all.tif
 
Thanks, Matthew

 

This e-mail message and any attached file is the property of the sender and is sent in confidence to the addressee only.
Internet communications are not secure and RPS is not responsible for their abuse by third parties, any alteration or corruption in transmission or for any loss or damage caused by a virus or by other means.
 
Any advice contained in this e-mail is for information purposes only.

RPS Planning and Development Limited, company number: 02947164 (England). Registered office: Centurion Court, 85 Milton Park Abingdon Oxfordshire OX14 4RY.
RPS Group Plc web link: <http://www.rpsgroup.com>
From jmckenna at gatewaygeomatics.com  Wed Jan 27 12:09:52 2010
From: jmckenna at gatewaygeomatics.com (Jeff McKenna)
Date: Wed Jan 27 12:09:58 2010
Subject: [gdal-dev] 1.7.0 compile with MSVC 2008 fails on NITF
In-Reply-To: <4B606B9B.1050300@dmsolutions.ca>
References: <4B6062D9.6090903@gatewaygeomatics.com>
	<4B606B9B.1050300@dmsolutions.ca>
Message-ID: <4B607360.9090708@gatewaygeomatics.com>

Yewondwossen Assefa wrote:
> Jeff,
> 
> I run into the same issue and my quick fix was to:
>  - cd gdal-1.7.0/frmts/jpeg
>  - nmake -f makefile.vc
>  and come back to the the main gdal-1.7.0/ and continue with the build
> 
> The problem comes from the fact that jpeg12 needs to be build before 
> nitf (that is where files such as jpeglib.h are copied into the jpeg12 
> directory).
> 
> You could do that until it is fixed properly in the makefiles.

Thanks Assefa, that quick fix works.

-jeff


-- 
Jeff McKenna
FOSS4G Consulting and Training Services
http://www.gatewaygeomatics.com/


From JAMES.E.HOPPER at saic.com  Wed Jan 27 12:10:13 2010
From: JAMES.E.HOPPER at saic.com (jim hopper)
Date: Wed Jan 27 12:10:04 2010
Subject: [gdal-dev] Reading jpeg 2000 compressed nitfs
In-Reply-To: <931f8ea91001252028w6e1143f3r1879bc423d1ded01@mail.gmail.com>
Message-ID: <C785DDA5.131EA%james.e.hopper@saic.com>

Thanks.

If I build gdal with kadaku will that support it?

Best jim



On 1/25/10 11:28 PM, "Frank Warmerdam" <warmerdam@pobox.com> wrote:

> James,
> 
> I have reviewed nitfdataset.cpp and jpeg2000dataset.cpp
> (the JasPer driver) and I believe they are now compatible.
> That is, nitf now uses the /vsisubfile/ mechanism to
> operate on the jpeg2000 data stream and I see the
> JasPer driver now uses the VSI*L API needed to support
> the /vsisubfile/ mechanism.
> 
> However, most NITF files I have worked with that
> had jpeg2000 compression had single large
> compressed images, not many small tiles.
> The JasPer library does *not* provide an effective
> mechanism to read subareas so for a large image
> it tends to use as much as 10 times as much memory
> as would be needed to hold the decoded image.
> This makes it impractical for many geospatial
> applications.
> 
> So I am still dubious about using it.
> 
> Best regards,
> 
> On Tue, Jan 26, 2010 at 9:12 AM, jim hopper <JAMES.E.HOPPER@saic.com> wrote:
>> I read the item about lack of support for the J2K_SUBFILE mechanism using
>> jasper, and that it requires one of the commercial jpeg2000 drivers. ?Is
>> that still the case, or Is there a way to read jpeg2k nitfs with open source
>> jpeg2k libraries?
>> 
>> Best jim
>> 
>> _______________________________________________
>> gdal-dev mailing list
>> gdal-dev@lists.osgeo.org
>> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> 
> 
> 

From EAdam at co.lincoln.or.us  Wed Jan 27 12:25:31 2010
From: EAdam at co.lincoln.or.us (Eli Adam)
Date: Wed Jan 27 12:25:44 2010
Subject: [gdal-dev] Re: gdal-dev Digest, Vol 68, Issue 56
In-Reply-To: <20100127170044.B01C2E01D8F@lists.osgeo.org>
References: <20100127170044.B01C2E01D8F@lists.osgeo.org>
Message-ID: <4B60068B.4F75.00CE.0@co.lincoln.or.us>

Gary, 
      I don't know that projection or the specifics with your tfw.  This website might help you research the projection and get the proper parameters.  I'm not sure if this is the projection that you are after but it is similar.
http://spatialreference.org/ref/epsg/7405/

Regards, Eli

   3. Projection for OSGB36 (Smart, Gary)

------------------------------

Message: 3
Date: Wed, 27 Jan 2010 11:20:45 -0000
From: "Smart, Gary" <Gary.Smart@goodrich.com>
Subject: [gdal-dev] Projection for OSGB36
To: <gdal-dev@lists.osgeo.org>
Message-ID:
	<F52876411F027A4FA646577165F65C1617875B@NHC2EX13.goodrich.root.local>
Content-Type: text/plain; charset="us-ascii"

I have a series of OS map TIF files with associated tfw files.  However,
the tif files contain no information about the projection.  I understand
that these files are using OSGB36 AIRY1830

 

Can anyone tell me the precise text specification I need to be able to
set up this projection.  

 

An example tfw file is:

2.5

0

0

-2.5

215000

254000 

 

I tried to importFromWkt with the string from the gdal/data/ecw_cs.wkt
but this did not seem to work.  I don't believe that OSGB36 is one of
the WellKnownGeogCS either.

 

Gary

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100127/eb373888/attachment-0001.html 

------------------------------


From Gary.Smart at goodrich.com  Wed Jan 27 13:01:21 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Wed Jan 27 13:04:08 2010
Subject: [gdal-dev] Re-aligning maps from grid north to true north
Message-ID: <F52876411F027A4FA646577165F65C16178842@NHC2EX13.goodrich.root.local>

We have tif maps which are OSGB grid aligned, but we need them aligned
to true-north.  I presume this could be achieved by gdalwarp.  Can
anyone give me a clue how to do this?  Am I right in thinking that
simply setting the correct s_srs and t_srs would achieve everything I
need?  If so - what part of the WKT would relate to Grid vs True?

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100127/e7b648bd/attachment.html
From Gary.Smart at goodrich.com  Wed Jan 27 12:55:00 2010
From: Gary.Smart at goodrich.com (Smart, Gary)
Date: Wed Jan 27 13:10:35 2010
Subject: [gdal-dev] Projection for OSGB36
Message-ID: <F52876411F027A4FA646577165F65C16178841@NHC2EX13.goodrich.root.local>

OK - have imported the OSGB36 GEOGCS using the line from the ecw_cs.wkt
file (with first field removed! Oops)

Now I need to transform from OSGB36 to WGS84.  I have set up the
OGRSpatialReference of the input using importFromWkt and the output
using setWellKnownGeogCS("WGS84").  The OGR Transform appears to be
working but the numbers returned are evidently Northings/Eastings
comparable to the numbers in the tfw file.  

 

How can I insist that they come back as Lat/Long?

 

Gary

________________________________

From: gdal-dev-bounces@lists.osgeo.org
[mailto:gdal-dev-bounces@lists.osgeo.org] On Behalf Of Smart, Gary
Sent: 27 January 2010 11:21
To: gdal-dev@lists.osgeo.org
Subject: [gdal-dev] Projection for OSGB36

 

I have a series of OS map TIF files with associated tfw files.  However,
the tif files contain no information about the projection.  I understand
that these files are using OSGB36 AIRY1830

 

Can anyone tell me the precise text specification I need to be able to
set up this projection.  

 

An example tfw file is:

2.5

0

0

-2.5

215000

254000 

 

I tried to importFromWkt with the string from the gdal/data/ecw_cs.wkt
but this did not seem to work.  I don't believe that OSGB36 

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100127/eb9f8bfa/attachment.html
From warmerdam at pobox.com  Wed Jan 27 19:44:36 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 27 19:44:41 2010
Subject: [gdal-dev] geolocation info in netCDF: "northernmost_northing" 
	etc. not universal
In-Reply-To: <1464295a1001261022s67c360feibd3ff3c7b48683cb@mail.gmail.com>
References: <1464295a1001261022s67c360feibd3ff3c7b48683cb@mail.gmail.com>
Message-ID: <931f8ea91001271644k3554cd76kdab90e9bed8716b5@mail.gmail.com>

On Wed, Jan 27, 2010 at 2:22 AM, Bruce Raup <bruceraup@gmail.com> wrote:

> We propose using terms such as
>
> grid_top_boundary_projected_y
> grid_bottom_boundary_projected_y
> grid_left_boundary_projected_x
> grid_right_boundary_projected_x
>
> Alternatively, grid corner coordinates could be used.
>
> What would the impacts of such a change of names in our files be? ?If
> the GeoRef field is also in the file, would it break existing software
> for being able to navigate (geolocate) the data? ?And, would the
> community consider the adoption of more universal terms more generally
> (i.e. in GDAL itself)?

Bruce,

I am not really an expert on the GDAL netcdf driver, but
I will attempt to respond.

First, I think it would be better to just document that the
existing tag names (eg. northernmost_northing) should
just be interpreted with the new definitions
(grid_top_boundary_projected_y) rather than trying
to change the actual tag names in order to gain some
possibly clarity in less common situations.

I have reviewed the GDAL netcdf driver and it seems to
look for two things.  First a GeoTransform value (which I
think is only a GDAL convention).  If that is not found it
looks for northernmost_northing, etc.  I presume these are
part of the CF conventions, though I don't know for sure.

I do no see any reference to a "GeoRef" tag.

So if you make the planned change, and if you do not
also provide the GeoTransform then older versions of
GDAL would not be able to read the georeferencing of
the files.  I presume this might also be the case of
almost all other software, even if you did support
GeoTransform.

However, if you do go ahead with this convention, then
please file  ticket with a small sample file so we can add
support for it.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From mateusz at loskot.net  Wed Jan 27 20:03:55 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Wed Jan 27 20:04:02 2010
Subject: [gdal-dev] Runtime error on executing "OGRRegisterAll()" function.
In-Reply-To: <1264596958438-4466974.post@n2.nabble.com>
References: <1264426245484-4453903.post@n2.nabble.com>	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com>
Message-ID: <4B60E27B.40704@loskot.net>

vadi_nabble wrote:
> Hi Mateusz, First of all I would like to thank you for giving a
> proper solution to my problem.

I'm glad you got it fixed.

> My issue has got resolved after making changes as suggested by you.
> Its has been over a week I was struggling on this issue.

By the way, makefile.vc of PCIDISK SDK [1] pulled from external location
to frmts/pcidsk/sdk override the flags specified in nmake.opt
and explicitly set to /MD

This may also potentially cause problems while you'll be debugging your
program. So, depending on configuration of GDAL drivers you build, you
may need to change /MD to /MDd (for debug only!).

[1] https://svn.osgeo.org/gdal/sandbox/warmerdam/pcidsk/src/Makefile.vc

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From warmerdam at pobox.com  Wed Jan 27 20:15:23 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 27 20:15:26 2010
Subject: [gdal-dev] Altering the GeoTransform matrix with World files and 
	VRT files
In-Reply-To: <1fef7d9b1001270012s263dcaf5jc4df6016698babd@mail.gmail.com>
References: <1fef7d9b1001260442t5cf8cff7uefb32387386efd61@mail.gmail.com>
	<931f8ea91001261750n9e85c99t7f7826f7f37c2fa2@mail.gmail.com>
	<1fef7d9b1001270012s263dcaf5jc4df6016698babd@mail.gmail.com>
Message-ID: <931f8ea91001271715g7eae5802r7a8150ac26c93c87@mail.gmail.com>

On Wed, Jan 27, 2010 at 4:12 PM, Craig Leat <craig.leat@gmail.com> wrote:
> Hi Frank,
>
> Frank Warmerdam wrote:
>> The mechanism that Jukka mentions is MapServer-only.
>> Reviewing the code, it appears that shapefiles are still
>> just a fallback if no georeferencing is found internally.
>>
>> I am not aware of software for overriding mrsid georeferencing
>> in the file.
>
> Would it be considered too cheeky if I opened an enhancement ticket
> for an environment variable (WORLDFILE_PRIORITY)? If the variable is
> set a driver should use the worldfile instead of the internal
> georeferencing.

Craig,

Perhaps it would not be cheeky, but that doesn't mean it
would be acted on.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Wed Jan 27 21:27:12 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 27 21:27:14 2010
Subject: [gdal-dev] grid from point dataset without interpolation
In-Reply-To: <605F55D8070C094AA2E2A9CBA2767A3C06F2AB91@EXMB1.eur.rpsgroup.com>
References: <605F55D8070C094AA2E2A9CBA2767A3C06F2AB91@EXMB1.eur.rpsgroup.com>
Message-ID: <931f8ea91001271827o62e73fder41e75eb1df7650fe@mail.gmail.com>

Matthew,

I am not aware of a utility that reads ascii point data
and directly creates a grid file without any attempt
to interpolate.  You could take a couple approaches.

One is to write a script in a language like Python
that will do the task and write the result out to a
GDAL supported grid format.  This is not particularly
complicated, but it would be hard if you are not
a programmer.

The other is to restructure the data somewhat into
an accepted format, like arc/info ascii grid.  This
format is fairly simple but it assumes a regular
grid of data and you would need to restructure your
data appropriately.  An example small grid is:

ncols        5
nrows        7
xllcorner    440720.000000000000
yllcorner    3751020.000000000000
cellsize     60.000000000000
NODATA_value 132
 107 123 132 115 132
 115 132 132 123 123
 115 132 140 132 123
 148 132 123 123 123
 156 156 156 140 132
 156 100 156 101 102
 156 156 156 103 103

Best regards,

On Thu, Jan 28, 2010 at 12:57 AM, Matthew Snape <SnapeM@rpsgroup.com> wrote:
> Hi,
>
> I have a set of points in a shapefile that represent gridded height
> data. ?I would like to convert them to a raster without using any
> interpolation, merely using each point as the centre of a cell. ?I have
> tried using gdal_grid with the nearest algorithm but this appears very
> slow. ?Is there a better way?
>
> my current command is:
>
> gdal_grid -a nearest -txe 420000 640000 -tye 240000 460000 -outsize 4400
> 4400 -of "GTiff" -ot Int16 -co "COMPRESS=LZW" -zfield HEIGHT -l all
> all.shp all.tif

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Wed Jan 27 21:34:57 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 27 21:35:00 2010
Subject: [gdal-dev] Re-aligning maps from grid north to true north
In-Reply-To: <F52876411F027A4FA646577165F65C16178842@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C16178842@NHC2EX13.goodrich.root.local>
Message-ID: <931f8ea91001271834k1c28c535xb6a4be7ab2dd982@mail.gmail.com>

On Thu, Jan 28, 2010 at 2:01 AM, Smart, Gary <Gary.Smart@goodrich.com> wrote:
> We have tif maps which are OSGB grid aligned, but we need them aligned to
> true-north.? I presume this could be achieved by gdalwarp.? Can anyone give
> me a clue how to do this?? Am I right in thinking that simply setting the
> correct s_srs and t_srs would achieve everything I need? ?If so ? what part
> of the WKT would relate to Grid vs True?

Gary,

It sounds like you want to reproject into a coordinate
system that is aligned with the geographic lines of
longitude.  The most obvious candidate coordinate
system is geographic coordinates themselves.  If
your existing grids are properly recognised as OSGB
British National Grid, then it would be sufficient to do
something like:

  gdalwarp -t_srs WGS84 in.tif out.tif

If your input files do not have the coordinate system
set properly, but *do* have georeferencing set in
terms of british national grid meters, then you could
force gdalwarp to understand the input coordinate system
like this:

  gdalwarp -s_srs EPSG:27700 -t_srs WGS84 in.tif out.tif

There are some other projected coordinate systems
which are also aligned with the lines of longitude,
including Mercator.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Wed Jan 27 21:36:25 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 27 21:36:27 2010
Subject: [gdal-dev] Projection for OSGB36
In-Reply-To: <F52876411F027A4FA646577165F65C1617875B@NHC2EX13.goodrich.root.local>
References: <F52876411F027A4FA646577165F65C1617875B@NHC2EX13.goodrich.root.local>
Message-ID: <931f8ea91001271836y11d8eb23vaf9ec7a95b4af567@mail.gmail.com>

On Wed, Jan 27, 2010 at 7:20 PM, Smart, Gary <Gary.Smart@goodrich.com> wrote:
> I have a series of OS map TIF files with associated tfw files.? However, the
> tif files contain no information about the projection.? I understand that
> these files are using OSGB36 AIRY1830
>
>
>
> Can anyone tell me the precise text specification I need to be able to set
> up this projection.
>
>
>
> An example tfw file is:
>
> 2.5
>
> 0
>
> 0
>
> -2.5
>
> 215000
>
> 254000

Gary,

I would suggest importFromEPSG() and using the
code 27700 which is OSGB 1936 / British National Grid.

Good luck,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From warmerdam at pobox.com  Wed Jan 27 22:35:14 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Wed Jan 27 22:35:18 2010
Subject: [gdal-dev] Runtime error on executing "OGRRegisterAll()" 
	function.
In-Reply-To: <4B60E27B.40704@loskot.net>
References: <1264426245484-4453903.post@n2.nabble.com>
	<4B5EE128.3020806@loskot.net>
	<1264596958438-4466974.post@n2.nabble.com> <4B60E27B.40704@loskot.net>
Message-ID: <931f8ea91001271935s109e927v28358c148742f09b@mail.gmail.com>

On Thu, Jan 28, 2010 at 9:03 AM, Mateusz Loskot <mateusz@loskot.net> wrote:
> By the way, makefile.vc of PCIDISK SDK [1] pulled from external location
> to frmts/pcidsk/sdk override the flags specified in nmake.opt
> and explicitly set to /MD
>
> This may also potentially cause problems while you'll be debugging your
> program. So, depending on configuration of GDAL drivers you build, you
> may need to change /MD to /MDd (for debug only!).
>
> [1] https://svn.osgeo.org/gdal/sandbox/warmerdam/pcidsk/src/Makefile.vc

Mateusz,

I think this is incorrect.  I believe that the makefiles that come
with the PCIDSK SDK are ignored when PCIDSK it built
internally within GDAL.  Instead the gdal/frmts/pcidsk/makefile.vc
is used which utilizes the normal flags from ../../nmake.opt.

Correct me with details if I am wrong.

Best regards,

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent
From P.Halls at york.ac.uk  Thu Jan 28 02:24:35 2010
From: P.Halls at york.ac.uk (Peter J Halls)
Date: Thu Jan 28 02:26:02 2010
Subject: [gdal-dev] Re-aligning maps from grid north to true north
In-Reply-To: <931f8ea91001271834k1c28c535xb6a4be7ab2dd982@mail.gmail.com>
References: <F52876411F027A4FA646577165F65C16178842@NHC2EX13.goodrich.root.local>
	<931f8ea91001271834k1c28c535xb6a4be7ab2dd982@mail.gmail.com>
Message-ID: <4B613BB3.7050002@york.ac.uk>

Gary,

    what do you mean by 'true north'?

    OSGB36 is a Transverse Mercator projection: it is, therefore, automatically 
aligned with a (reference) line of longitude, its central meridian.  It is not 
aligned to magnetic north: those little diagrams on the maps show the offset to 
magnetic north, which is constantly changing; assuming true north to be 90 
degrees, where all the lines of longitude meet, then there is no need for a 
change in alignment, as the northings of the OSGB36 grid are aligned with their 
central meridian.  There is, indeed, a slight error as one moves to the east or 
west of the central meridian, but this is so small within the latitudes of Great 
Britain that any correction would be too small to notice: this is a design 
feature of OSGB36.  It is this error that requires Ireland to have its own 
projection: it is sufficiently far west that the error is noticeable there.

    Everything that has been said on this list is correct for reprojection: my 
query is whether you actually need to re-project these data.

Best wishes,

Peter

Frank Warmerdam wrote:
> On Thu, Jan 28, 2010 at 2:01 AM, Smart, Gary <Gary.Smart@goodrich.com> wrote:
>> We have tif maps which are OSGB grid aligned, but we need them aligned to
>> true-north.  I presume this could be achieved by gdalwarp.  Can anyone give
>> me a clue how to do this?  Am I right in thinking that simply setting the
>> correct s_srs and t_srs would achieve everything I need?  If so ? what part
>> of the WKT would relate to Grid vs True?
> 
> Gary,
> 
> It sounds like you want to reproject into a coordinate
> system that is aligned with the geographic lines of
> longitude.  The most obvious candidate coordinate
> system is geographic coordinates themselves.  If
> your existing grids are properly recognised as OSGB
> British National Grid, then it would be sufficient to do
> something like:
> 
>   gdalwarp -t_srs WGS84 in.tif out.tif
> 
> If your input files do not have the coordinate system
> set properly, but *do* have georeferencing set in
> terms of british national grid meters, then you could
> force gdalwarp to understand the input coordinate system
> like this:
> 
>   gdalwarp -s_srs EPSG:27700 -t_srs WGS84 in.tif out.tif
> 
> There are some other projected coordinate systems
> which are also aligned with the lines of longitude,
> including Mercator.
> 
> Best regards,
> 

-- 
--------------------------------------------------------------------------------
Peter J Halls, GIS Advisor, University of York
Telephone: 01904 433806     Fax: 01904 433740
Snail mail: Computing Service, University of York, Heslington, York YO10 5DD
This message has the status of a private and personal communication
--------------------------------------------------------------------------------
From peder at axensten.se  Thu Jan 28 03:13:14 2010
From: peder at axensten.se (Peder Axensten)
Date: Thu Jan 28 03:13:28 2010
Subject: [gdal-dev] gdal_merge on large files
Message-ID: <91627C8A-2C59-4FF0-9A3B-7C6D682BC522@axensten.se>

I want to run gdal_merge (and another program I made, based on gdal_merge) on rather large files -- typically 3-7 Gbytes. Not surprisingly I run into problems. I'm not very experienced in Python, but am I right to assume that the error below probably is an indication on a size problem? What is the raster size restrictions in gdal/numpy?

If this is a size problem, I thought I'd modify gdal_merge to process big rasters by parts, probably stealing ideas from gdal_calc3 by Chris Yesson. 

Sorry if I'm not very specific, I'd appreciate any ideas from you experienced guys.

Best regards,

Peder Axensten
Research engineer

Swedish University of Agricultural Sciences
Forest Resource Management
Remote Sensing Laboratory





mosaic$ gdal_merge.py -o test.img -n 65565 sverige_VolumeBirch.img sverige_VolumeBeech.img sverige_VolumeOak.img
ERROR 2: Invalid dimensions : 27989 x 62863
Traceback (most recent call last):
  File "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py", line 431, in <module>
    fi.copy_into( t_fh, band, band, nodata )
  File "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py", line 228, in copy_into
    nodata_arg )
  File "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py", line 48, in raster_copy
    nodata )
  File "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py", line 84, in raster_copy_with_nodata
    t_xsize, t_ysize )
  File "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/osgeo/gdal.py", line 835, in ReadAsArray
    buf_xsize, buf_ysize, buf_obj )
  File "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/osgeo/gdal_array.py", line 140, in BandReadAsArray
    ar = numpy.reshape(ar, [buf_ysize,buf_xsize])
  File "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/numpy/core/fromnumeric.py", line 152, in reshape
    return reshape(newshape, order=order)
ValueError: total size of new array must be unchanged

From antonio.rocha at deimos.com.pt  Thu Jan 28 04:43:52 2010
From: antonio.rocha at deimos.com.pt (=?ISO-8859-1?Q?Ant=F3nio_Rocha?=)
Date: Thu Jan 28 04:43:47 2010
Subject: [gdal-dev] Supported Remote Sensing instruments/satellites
In-Reply-To: <4B573F52.4060800@deimos.com.pt>
References: <4B573F52.4060800@deimos.com.pt>
Message-ID: <4B615C58.60804@deimos.com.pt>

Greetings all

I'm a GRASS user and, following a few emails from Franz Schiller in 
GRASS users mailing list, I decided to send an email to GDAL mailing 
list regarding the following question:
Which native Remote Sensing instruments/satellites data formats are 
supported by GDAL? I mean, some instruments/satellites are distributed 
in standard formats (e.g. N1, Geotiff) but others not really. So my 
question is if you have a table, just like this 
(http://www.gdal.org/formats_list.html), but instead of being organized 
by formats it's by Satellites/nstruments?

Thanks

Best regards,
Antonio
>
>
>



__________ Information from ESET NOD32 Antivirus, version of virus signature database 4812 (20100128) __________

The message was checked by ESET NOD32 Antivirus.

http://www.eset.com


From neteler at osgeo.org  Thu Jan 28 05:17:35 2010
From: neteler at osgeo.org (Markus Neteler)
Date: Thu Jan 28 05:17:58 2010
Subject: [gdal-dev] Supported Remote Sensing instruments/satellites
In-Reply-To: <4B615C58.60804@deimos.com.pt>
References: <4B573F52.4060800@deimos.com.pt> <4B615C58.60804@deimos.com.pt>
Message-ID: <86782b611001280217j4e575a18g229433899167ea4@mail.gmail.com>

2010/1/28 Ant?nio Rocha <antonio.rocha@deimos.com.pt>:
> Greetings all
>
> I'm a GRASS user and, following a few emails from Franz Schiller in GRASS
> users mailing list, I decided to send an email to GDAL mailing list
> regarding the following question:
> Which native Remote Sensing instruments/satellites data formats are
> supported by GDAL? I mean, some instruments/satellites are distributed in
> standard formats (e.g. N1, Geotiff) but others not really. So my question is
> if you have a table, just like this (http://www.gdal.org/formats_list.html),
> but instead of being organized by formats it's by Satellites/nstruments?

Hi,

a perfect place would be the GDAL-trac wiki - if you start, I'll contribute.
Just now I have converted ALOS-PALSAR data in ERSDAC CEOS format :) [1]

cheers
Markus

[1] http://www.osgeo.jp/wiki/index.php/Introduction_to_Radar_data_processing#GRASS_GIS_usage_on_PALSAR
(work in progress)
From Gary.Smart at Goodrich.com  Thu Jan 28 06:39:17 2010
From: Gary.Smart at Goodrich.com (Smart, Gary)
Date: Thu Jan 28 06:39:25 2010
Subject: [gdal-dev] Projection for OSGB36
In-Reply-To: <931f8ea91001271836y11d8eb23vaf9ec7a95b4af567@mail.gmail.com>
References: <F52876411F027A4FA646577165F65C1617875B@NHC2EX13.goodrich.root.local>
	<931f8ea91001271836y11d8eb23vaf9ec7a95b4af567@mail.gmail.com>
Message-ID: <F52876411F027A4FA646577165F65C161788BF@NHC2EX13.goodrich.root.local>

> -----Original Message-----
> From: fwarmerdam@gmail.com [mailto:fwarmerdam@gmail.com] On Behalf Of
> Frank Warmerdam
> Sent: 28 January 2010 02:36
> To: Smart, Gary
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Projection for OSGB36
> 
> On Wed, Jan 27, 2010 at 7:20 PM, Smart, Gary <Gary.Smart@goodrich.com>
> wrote:
> > I have a series of OS map TIF files with associated tfw files.? However,
> the
> > tif files contain no information about the projection.? I understand
> that
> > these files are using OSGB36 AIRY1830
> >
> >
> >
> > Can anyone tell me the precise text specification I need to be able to
> set
> > up this projection.
> >
> >
> >
> > An example tfw file is:
> >
> > 2.5
> >
> > 0
> >
> > 0
> >
> > -2.5
> >
> > 215000
> >
> > 254000
> 
> Gary,
> 
> I would suggest importFromEPSG() and using the
> code 27700 which is OSGB 1936 / British National Grid.
> 
> Good luck,
> --

Thanks for that - ALL SORTED!!! 
Regards, Gary
From Gary.Smart at Goodrich.com  Thu Jan 28 06:30:44 2010
From: Gary.Smart at Goodrich.com (Smart, Gary)
Date: Thu Jan 28 06:45:48 2010
Subject: [gdal-dev] Re-aligning maps from grid north to true north
In-Reply-To: <4B613BB3.7050002@york.ac.uk>
References: <F52876411F027A4FA646577165F65C16178842@NHC2EX13.goodrich.root.local>
	<931f8ea91001271834k1c28c535xb6a4be7ab2dd982@mail.gmail.com>
	<4B613BB3.7050002@york.ac.uk>
Message-ID: <F52876411F027A4FA646577165F65C161788B9@NHC2EX13.goodrich.root.local>


Its true that the grid is only slightly divergent from true north over
the width of the UK.  However, we are stitching all the map tiles
together and need North to always be straight up the image.

I shall experiment with the gdal warp params suggest by Frank and see
how bad the warp is.

> -----Original Message-----
> From: Peter J Halls [mailto:P.Halls@york.ac.uk]
> Sent: 28 January 2010 07:25
> To: Smart, Gary
> Cc: gdal-dev@lists.osgeo.org
> Subject: Re: [gdal-dev] Re-aligning maps from grid north to true north
> 
> Gary,
> 
>     what do you mean by 'true north'?
> 
>     OSGB36 is a Transverse Mercator projection: it is, therefore,
> automatically
> aligned with a (reference) line of longitude, its central meridian.
It is
> not
> aligned to magnetic north: those little diagrams on the maps show the
> offset to
> magnetic north, which is constantly changing; assuming true north to
be 90
> degrees, where all the lines of longitude meet, then there is no need
for
> a
> change in alignment, as the northings of the OSGB36 grid are aligned
with
> their
> central meridian.  There is, indeed, a slight error as one moves to
the
> east or
> west of the central meridian, but this is so small within the
latitudes of
> Great
> Britain that any correction would be too small to notice: this is a
design
> feature of OSGB36.  It is this error that requires Ireland to have its
own
> projection: it is sufficiently far west that the error is noticeable
> there.
> 
>     Everything that has been said on this list is correct for
> reprojection: my
> query is whether you actually need to re-project these data.
> 
> Best wishes,
> 
> Peter
> 
> Frank Warmerdam wrote:
> > On Thu, Jan 28, 2010 at 2:01 AM, Smart, Gary
<Gary.Smart@goodrich.com>
> wrote:
> >> We have tif maps which are OSGB grid aligned, but we need them
aligned
> to
> >> true-north.  I presume this could be achieved by gdalwarp.  Can
anyone
> give
> >> me a clue how to do this?  Am I right in thinking that simply
setting
> the
> >> correct s_srs and t_srs would achieve everything I need?  If so -
what
> part
> >> of the WKT would relate to Grid vs True?
> >
> > Gary,
> >
> > It sounds like you want to reproject into a coordinate
> > system that is aligned with the geographic lines of
> > longitude.  The most obvious candidate coordinate
> > system is geographic coordinates themselves.  If
> > your existing grids are properly recognised as OSGB
> > British National Grid, then it would be sufficient to do
> > something like:
> >
> >   gdalwarp -t_srs WGS84 in.tif out.tif
> >
> > If your input files do not have the coordinate system
> > set properly, but *do* have georeferencing set in
> > terms of british national grid meters, then you could
> > force gdalwarp to understand the input coordinate system
> > like this:
> >
> >   gdalwarp -s_srs EPSG:27700 -t_srs WGS84 in.tif out.tif
> >
> > There are some other projected coordinate systems
> > which are also aligned with the lines of longitude,
> > including Mercator.
> >
> > Best regards,
> >
> 
> --
>
------------------------------------------------------------------------
--
> ------
> Peter J Halls, GIS Advisor, University of York
> Telephone: 01904 433806     Fax: 01904 433740
> Snail mail: Computing Service, University of York, Heslington, York
YO10
> 5DD
> This message has the status of a private and personal communication
>
------------------------------------------------------------------------
--
> ------
From gregcoats at mac.com  Thu Jan 28 11:49:18 2010
From: gregcoats at mac.com (Greg Coats)
Date: Thu Jan 28 11:49:48 2010
Subject: [gdal-dev] gdal_merge on large files
In-Reply-To: <91627C8A-2C59-4FF0-9A3B-7C6D682BC522@axensten.se>
References: <91627C8A-2C59-4FF0-9A3B-7C6D682BC522@axensten.se>
Message-ID: <D68DDA82-91B3-4BF8-8D59-D9C91BECD87E@mac.com>

On Jan 28, 2010, at 3:13 AM, Peder Axensten wrote:

> What is the raster size restrictions in gdal/numpy?

I have successfully used gdal_merge.py to create a 142 GB .tif file, on a computer with only 3 GB RAM, under Apple Mac OS X 10.6. Greg

tiffinfo dcua0002.tif
  Image Width: 260000 Image Length: 195000
  Tile Width: 512 Tile Length: 512
  Bits/Sample: 8
  Compression Scheme: None
  Photometric Interpretation: RGB color
  Samples/Pixel: 3

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100128/5da09652/attachment.html
From chaitanya.ch at gmail.com  Thu Jan 28 13:17:05 2010
From: chaitanya.ch at gmail.com (Chaitanya kumar CH)
Date: Thu Jan 28 13:25:36 2010
Subject: [gdal-dev] gdal_merge on large files
In-Reply-To: <91627C8A-2C59-4FF0-9A3B-7C6D682BC522@axensten.se>
References: <91627C8A-2C59-4FF0-9A3B-7C6D682BC522@axensten.se>
Message-ID: <eb502d881001281017h306c36d2g864f58e7768a86f7@mail.gmail.com>

Peder,

The problem here is the lack of or very large tiles/blocks in the image.
BandReadAsArray() was asked to read a whole 27989 x 62863 block into memory.
That's 1.76 Giga pixels. Too big.

Greg Coats' tiff file had tiles of 512 x 512 size.

Creating tiled tiffs is a good place to start. Use the -co TILED=YES option
in gdal_translate to create tiled tiffs.

Try Tim Sutton's page
http://linfiniti.com/2009/09/image-mosaicking-with-gdal/ on his experience
in image mosaicing.

On Thu, Jan 28, 2010 at 1:43 PM, Peder Axensten <peder@axensten.se> wrote:

> I want to run gdal_merge (and another program I made, based on gdal_merge)
> on rather large files -- typically 3-7 Gbytes. Not surprisingly I run into
> problems. I'm not very experienced in Python, but am I right to assume that
> the error below probably is an indication on a size problem? What is the
> raster size restrictions in gdal/numpy?
>
> If this is a size problem, I thought I'd modify gdal_merge to process big
> rasters by parts, probably stealing ideas from gdal_calc3 by Chris Yesson.
>
> Sorry if I'm not very specific, I'd appreciate any ideas from you
> experienced guys.
>
> Best regards,
>
> Peder Axensten
> Research engineer
>
> Swedish University of Agricultural Sciences
> Forest Resource Management
> Remote Sensing Laboratory
>
>
>
> mosaic$ gdal_merge.py -o test.img -n 65565 sverige_VolumeBirch.img
> sverige_VolumeBeech.img sverige_VolumeOak.img
> ERROR 2: Invalid dimensions : 27989 x 62863
> Traceback (most recent call last):
>  File
> "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py",
> line 431, in <module>
>    fi.copy_into( t_fh, band, band, nodata )
>  File
> "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py",
> line 228, in copy_into
>    nodata_arg )
>  File
> "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py",
> line 48, in raster_copy
>    nodata )
>  File
> "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gdal_merge.py",
> line 84, in raster_copy_with_nodata
>    t_xsize, t_ysize )
>  File
> "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/osgeo/gdal.py",
> line 835, in ReadAsArray
>    buf_xsize, buf_ysize, buf_obj )
>  File
> "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/osgeo/gdal_array.py",
> line 140, in BandReadAsArray
>    ar = numpy.reshape(ar, [buf_ysize,buf_xsize])
>  File
> "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/numpy/core/fromnumeric.py",
> line 152, in reshape
>    return reshape(newshape, order=order)
> ValueError: total size of new array must be unchanged
>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Best regards,
Chaitanya kumar CH.
/t?a???nj?/ /k?m?r/
+91-9848167848
17.241582N 80.142635E
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100128/b4c1fed8/attachment.html
From even.rouault at mines-paris.org  Thu Jan 28 14:19:58 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Thu Jan 28 14:20:09 2010
Subject: [gdal-dev] gdal_merge on large files
In-Reply-To: <eb502d881001281017h306c36d2g864f58e7768a86f7@mail.gmail.com>
References: <91627C8A-2C59-4FF0-9A3B-7C6D682BC522@axensten.se>
	<eb502d881001281017h306c36d2g864f58e7768a86f7@mail.gmail.com>
Message-ID: <201001282019.58881.even.rouault@mines-paris.org>

Peter,

In fact, tiling the input or output won't help for the issue. The main 
limitation of gdal_merge.py is that it ingests each input file in one gulp. 
So the limit is on the dimensions of the input files. The buffer must hold in 
RAM and be smaller than 2GB (the maximum size of a 32bit integer).

You should be able to generate a huge output file provided that each of your 
input files are reasonnably of modest dimensions. Likely the case for what 
Greg reported.

You might want to try gdalwarp or (gdalbuildvrt + gdal_translate) instead that 
have similar potential to gdal_merge.py but not that limitation.

Best regards,

Even

Le Thursday 28 January 2010 19:17:05 Chaitanya kumar CH, vous avez ?crit?:
> Peder,
>
> The problem here is the lack of or very large tiles/blocks in the image.
> BandReadAsArray() was asked to read a whole 27989 x 62863 block into
> memory. That's 1.76 Giga pixels. Too big.
>
> Greg Coats' tiff file had tiles of 512 x 512 size.
>
> Creating tiled tiffs is a good place to start. Use the -co TILED=YES option
> in gdal_translate to create tiled tiffs.
>
> Try Tim Sutton's page
> http://linfiniti.com/2009/09/image-mosaicking-with-gdal/ on his experience
> in image mosaicing.
>
> On Thu, Jan 28, 2010 at 1:43 PM, Peder Axensten <peder@axensten.se> wrote:
> > I want to run gdal_merge (and another program I made, based on
> > gdal_merge) on rather large files -- typically 3-7 Gbytes. Not
> > surprisingly I run into problems. I'm not very experienced in Python, but
> > am I right to assume that the error below probably is an indication on a
> > size problem? What is the raster size restrictions in gdal/numpy?
> >
> > If this is a size problem, I thought I'd modify gdal_merge to process big
> > rasters by parts, probably stealing ideas from gdal_calc3 by Chris
> > Yesson.
> >
> > Sorry if I'm not very specific, I'd appreciate any ideas from you
> > experienced guys.
> >
> > Best regards,
> >
> > Peder Axensten
> > Research engineer
> >
> > Swedish University of Agricultural Sciences
> > Forest Resource Management
> > Remote Sensing Laboratory
> >
> >
> >
> > mosaic$ gdal_merge.py -o test.img -n 65565 sverige_VolumeBirch.img
> > sverige_VolumeBeech.img sverige_VolumeOak.img
> > ERROR 2: Invalid dimensions : 27989 x 62863
> > Traceback (most recent call last):
> >  File
> > "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gd
> >al_merge.py", line 431, in <module>
> >    fi.copy_into( t_fh, band, band, nodata )
> >  File
> > "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gd
> >al_merge.py", line 228, in copy_into
> >    nodata_arg )
> >  File
> > "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gd
> >al_merge.py", line 48, in raster_copy
> >    nodata )
> >  File
> > "/Library/Frameworks/Python.framework/general-site-packages/gdal-tools/gd
> >al_merge.py", line 84, in raster_copy_with_nodata
> >    t_xsize, t_ysize )
> >  File
> > "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/osg
> >eo/gdal.py", line 835, in ReadAsArray
> >    buf_xsize, buf_ysize, buf_obj )
> >  File
> > "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/osg
> >eo/gdal_array.py", line 140, in BandReadAsArray
> >    ar = numpy.reshape(ar, [buf_ysize,buf_xsize])
> >  File
> > "/Library/Frameworks/GDAL.framework/Versions/1.6/Python/site-packages/num
> >py/core/fromnumeric.py", line 152, in reshape
> >    return reshape(newshape, order=order)
> > ValueError: total size of new array must be unchanged
> >
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev


From bruceraup at gmail.com  Thu Jan 28 17:52:23 2010
From: bruceraup at gmail.com (Bruce Raup)
Date: Thu Jan 28 17:52:40 2010
Subject: [gdal-dev] geolocation info in netCDF: "northernmost_northing" 
	etc. not universal
In-Reply-To: <931f8ea91001271644k3554cd76kdab90e9bed8716b5@mail.gmail.com>
References: <1464295a1001261022s67c360feibd3ff3c7b48683cb@mail.gmail.com>
	<931f8ea91001271644k3554cd76kdab90e9bed8716b5@mail.gmail.com>
Message-ID: <1464295a1001281452x680b2f51x16b1ba3e94f9e194@mail.gmail.com>

Frank,

Thanks for the reply.  I mistakenly said GeoRef when I meant to say
GeoTransform.  Your description of what would happen if we make the
change confirms what we thought.

I think we will go ahead and make the change, and file a ticket.  Lots
of data are in polar projections, and it seems like a small amount of
work now could save a lot of confusion in the future.

Best regards,
Bruce


On Wed, Jan 27, 2010 at 17:44, Frank Warmerdam <warmerdam@pobox.com> wrote:
> On Wed, Jan 27, 2010 at 2:22 AM, Bruce Raup <bruceraup@gmail.com> wrote:
>
>> We propose using terms such as
>>
>> grid_top_boundary_projected_y
>> grid_bottom_boundary_projected_y
>> grid_left_boundary_projected_x
>> grid_right_boundary_projected_x
>>
>> Alternatively, grid corner coordinates could be used.
>>
>> What would the impacts of such a change of names in our files be? ?If
>> the GeoRef field is also in the file, would it break existing software
>> for being able to navigate (geolocate) the data? ?And, would the
>> community consider the adoption of more universal terms more generally
>> (i.e. in GDAL itself)?
>
> Bruce,
>
> I am not really an expert on the GDAL netcdf driver, but
> I will attempt to respond.
>
> First, I think it would be better to just document that the
> existing tag names (eg. northernmost_northing) should
> just be interpreted with the new definitions
> (grid_top_boundary_projected_y) rather than trying
> to change the actual tag names in order to gain some
> possibly clarity in less common situations.
>
> I have reviewed the GDAL netcdf driver and it seems to
> look for two things. ?First a GeoTransform value (which I
> think is only a GDAL convention). ?If that is not found it
> looks for northernmost_northing, etc. ?I presume these are
> part of the CF conventions, though I don't know for sure.
>
> I do no see any reference to a "GeoRef" tag.
>
> So if you make the planned change, and if you do not
> also provide the GeoTransform then older versions of
> GDAL would not be able to read the georeferencing of
> the files. ?I presume this might also be the case of
> almost all other software, even if you did support
> GeoTransform.
>
> However, if you do go ahead with this convention, then
> please file ?ticket with a small sample file so we can add
> support for it.
>
> Best regards,
> --
> ---------------------------------------+--------------------------------------
> I set the clouds in motion - turn up ? | Frank Warmerdam, warmerdam@pobox.com
> light and sound - activate the windows | http://pobox.com/~warmerdam
> and watch the world go round - Rush ? ?| Geospatial Programmer for Rent
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>



-- 
Bruce Raup
http://cires.colorado.edu/~braup/
From ragi at burhum.com  Thu Jan 28 22:06:01 2010
From: ragi at burhum.com (Ragi Y. Burhum)
Date: Thu Jan 28 22:06:03 2010
Subject: [gdal-dev] ArcObjects OGR driver binaries - reads FileGDB with
	ArcView license
Message-ID: <738927441001281906y2b3374edo20f69bf37fdb2f0@mail.gmail.com>

Some of you have e-mailed me directly asking for windows binaries of this
arcobjects driver so I decided to e-mail the mailing list in case other
people were also interested.

You can download them from http://bit.ly/clDrmd

Some questions that I was asked:

1.- What are the requirements?

- An ArcView license (the cheapest of the ESRI licenses) - I know, most
people here won't have it.
- The ESRI libraries installed. This typically happens if you have ArcEngine
or ArcGIS Desktop or Server installed.


2.- So what can you do with this?


A) Connect to many of the ESRI Datasources (using the same code ESRI uses to
connect):

 a) FileGDB
 b) Enterprise Geodatabase (aka ArcSDE) - note this regularly requires
ArcEditor - but this driver manages a connection with only ArcView.
 c) AccessDB. Wow, big deal, we were able to do that before hand :)


B) Read Feature Classes (write not implemented).

   These include 'Normal' Feature Classes, Annotation Classes, Dimension
Classes, Representation Classes, Network Features, etc etc

3.- Why would I use this connect to Enterprise Geodatabase or AccessDB
instead of the other OGR equivalent drivers (namely ESRI ArcSDE or ESRI
Personal GeoDatabase)?

It's your choice. If you have an ESRI ArcView license, you can use these.
The advantage is that this driver will allow you to open some of the ESRI
Complex FeatureClasses
since it is going through ESRI's data access layer. The disadvantage is that
it is going through ESRI's data access layer ;-)

4.- Why did you write this?

- I wanted to load data in one shot into a PostGIS and one of my customers
did not have an ArcEditor nor ArcGIS Server license. The FileGDBs we were
using were 100GB+ in size and I was tired of trying to do magic to manage
the 60+shapefiles exported everytime to then call another command to load
them into PostGIS.
Keeping track of which features were failing was a pain since I had to
preserve IDs across my exports. Now I can do it all with one shot.

5.- How do you use it?

Prefix the Datasource with "AO:"

Example:

- Read from FileGDB and load into PostGIS

ogr2ogr -overwrite -skipfailures -f "PostgreSQL" PG:"host=myhost
user=myuser dbname=mydb password=mypass" AO:"C:\somefolder\BigFileGDB.gdb"
"MyFeatureClass"


- Get detailed info of Personal GeoDatabase:


ogrinfo -al AO:"C:\somefolder\PersonalGDB.mdb"


- Get detailed info of Enterprise GeoDatabase (.sde contains target version
to connect to):


ogrinfo -al AO:"C:\somefolder\MySDEConnection.sde"


6.- What about *nix?


This code should compile using the ArcEngine Unix SDK, I just did not have
access to it to test this.


7.- Questions/Known issues?


- Date and blob fields have not been implemented. It is probably just a few
lines of code, I just have not had time to do it.

- This version is a little bit more up to date than the patch that was
submitted to GDAL. Once that patch gets committed, I'll submit the couple of
bug fixes this binary has.

- This version is alpha, so pardon any obvious mistakes :)


If there are any issues, submit them to the GDAL Trac and contact me.



Best wishes,


- Ragi Burhum
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100128/c432676e/attachment-0001.html
From dejan.gregor at GMAIL.COM  Fri Jan 29 03:01:48 2010
From: dejan.gregor at GMAIL.COM (Dejan Gregor)
Date: Fri Jan 29 03:01:57 2010
Subject: [gdal-dev] Adding TIFFTAG_XRESOLUTION and TIFFTAG_RESOLUTIONUNIT
 values to GeoTIFF
Message-ID: <1264752108724-4478777.post@n2.nabble.com>


I would like to know, how I can set the following tag values via GDAL to the
output GeoTIFF?

TIFFTAG_XRESOLUTION
TIFFTAG_RESOLUTIONUNIT
TIFFTAG_XRESOLUTION
TIFFTAG_SOFTWARE
AREA_OR_POINT=Area

Coordinate System is:
LOCAL_CS[" Geocoding information not available Projection Name = Unknown
Units =
 other GeoTIFF Units = other",
    UNIT["unknown",1]]

Thanks!
Dejan

-----

Dejan Gregor, MSc 
GISc Researcher and Consultant 

http://www.linkedin.com/in/dgregor 
-- 
View this message in context: http://n2.nabble.com/Adding-TIFFTAG-XRESOLUTION-and-TIFFTAG-RESOLUTIONUNIT-values-to-GeoTIFF-tp4478777p4478777.html
Sent from the GDAL - Dev mailing list archive at Nabble.com.
From mateusz at loskot.net  Fri Jan 29 04:35:59 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Fri Jan 29 04:36:42 2010
Subject: [gdal-dev] ArcObjects OGR driver binaries - reads FileGDB with
	ArcView license
In-Reply-To: <738927441001281906y2b3374edo20f69bf37fdb2f0@mail.gmail.com>
References: <738927441001281906y2b3374edo20f69bf37fdb2f0@mail.gmail.com>
Message-ID: <4B62ABFF.7080506@loskot.net>

Ragi Y. Burhum wrote:
> 5.- How do you use it?
> 
> Prefix the Datasource with "AO:"
> 
 > [...]

Would be good to put this to frmt_arcobjects.html

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
From ksshannon at gmail.com  Fri Jan 29 12:32:35 2010
From: ksshannon at gmail.com (Kyle Shannon)
Date: Fri Jan 29 12:32:55 2010
Subject: [gdal-dev] geolocation info in netCDF: "northernmost_northing" 
	etc. not universal
In-Reply-To: <1464295a1001281452x680b2f51x16b1ba3e94f9e194@mail.gmail.com>
References: <1464295a1001261022s67c360feibd3ff3c7b48683cb@mail.gmail.com> 
	<931f8ea91001271644k3554cd76kdab90e9bed8716b5@mail.gmail.com> 
	<1464295a1001281452x680b2f51x16b1ba3e94f9e194@mail.gmail.com>
Message-ID: <c28f2e141001290932y273f49d3l516ea9ac69ce4ff8@mail.gmail.com>

I am also using the netCDF driver to read weather data from a thredds
server.  I am curious how the tag names for the metadata were defined in the
driver.  For example, the CF convention for the central meridian is
"longitude_of_central_meridian" and in the netCDF driver it is
"central_meridian".  This causes the true value to be skipped and set to a
default value of 0.0 in my case.

regards,

# ===================
Kyle Shannon
Physical Science Technician
RMRS Fire Sciences Lab
Fire, Fuels & Smoke - RWU 4405
5775 Highway 10 W.
Missoula, MT 59808
(406) 829-6954
kshannon@fs.fed.us
# ===================


On Thu, Jan 28, 2010 at 3:52 PM, Bruce Raup <bruceraup@gmail.com> wrote:

> Frank,
>
> Thanks for the reply.  I mistakenly said GeoRef when I meant to say
> GeoTransform.  Your description of what would happen if we make the
> change confirms what we thought.
>
> I think we will go ahead and make the change, and file a ticket.  Lots
> of data are in polar projections, and it seems like a small amount of
> work now could save a lot of confusion in the future.
>
> Best regards,
> Bruce
>
>
> On Wed, Jan 27, 2010 at 17:44, Frank Warmerdam <warmerdam@pobox.com>
> wrote:
> > On Wed, Jan 27, 2010 at 2:22 AM, Bruce Raup <bruceraup@gmail.com> wrote:
> >
> >> We propose using terms such as
> >>
> >> grid_top_boundary_projected_y
> >> grid_bottom_boundary_projected_y
> >> grid_left_boundary_projected_x
> >> grid_right_boundary_projected_x
> >>
> >> Alternatively, grid corner coordinates could be used.
> >>
> >> What would the impacts of such a change of names in our files be?  If
> >> the GeoRef field is also in the file, would it break existing software
> >> for being able to navigate (geolocate) the data?  And, would the
> >> community consider the adoption of more universal terms more generally
> >> (i.e. in GDAL itself)?
> >
> > Bruce,
> >
> > I am not really an expert on the GDAL netcdf driver, but
> > I will attempt to respond.
> >
> > First, I think it would be better to just document that the
> > existing tag names (eg. northernmost_northing) should
> > just be interpreted with the new definitions
> > (grid_top_boundary_projected_y) rather than trying
> > to change the actual tag names in order to gain some
> > possibly clarity in less common situations.
> >
> > I have reviewed the GDAL netcdf driver and it seems to
> > look for two things.  First a GeoTransform value (which I
> > think is only a GDAL convention).  If that is not found it
> > looks for northernmost_northing, etc.  I presume these are
> > part of the CF conventions, though I don't know for sure.
> >
> > I do no see any reference to a "GeoRef" tag.
> >
> > So if you make the planned change, and if you do not
> > also provide the GeoTransform then older versions of
> > GDAL would not be able to read the georeferencing of
> > the files.  I presume this might also be the case of
> > almost all other software, even if you did support
> > GeoTransform.
> >
> > However, if you do go ahead with this convention, then
> > please file  ticket with a small sample file so we can add
> > support for it.
> >
> > Best regards,
> > --
> >
> ---------------------------------------+--------------------------------------
> > I set the clouds in motion - turn up   | Frank Warmerdam,
> warmerdam@pobox.com
> > light and sound - activate the windows | http://pobox.com/~warmerdam<http://pobox.com/%7Ewarmerdam>
> > and watch the world go round - Rush    | Geospatial Programmer for Rent
> > _______________________________________________
> > gdal-dev mailing list
> > gdal-dev@lists.osgeo.org
> > http://lists.osgeo.org/mailman/listinfo/gdal-dev
> >
>
>
>
> --
> Bruce Raup
> http://cires.colorado.edu/~braup/ <http://cires.colorado.edu/%7Ebraup/>
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100129/75d20449/attachment.html
From dboyd at data-tactics.com  Fri Jan 29 13:55:48 2010
From: dboyd at data-tactics.com (David Boyd)
Date: Fri Jan 29 14:02:09 2010
Subject: [gdal-dev] 64 bit linux format support
Message-ID: <4B632F34.1050206@data-tactics.com>

All:
   Sorry for the newbie question.  I have searched archives and not
seen an answer.

   I am setting up a Geoserver system on 64 bit Linux (CENTOS) and
need support for NITF formats.  I installed the lastest imageioext
binaries but none of the additional GDAL formats show up.

I have verified all the paths (LD_LIBRARY_PATH) and such but but

According to the 2.0 docs I should see DTED, EHdr, ERDASImg the MrSID
and NITF formats when I create a new data store.  I downloaded the ECW
version of the libraries.

I have looked all through the docs and the only thing I can figure is
that MrSID support is needed to support NITF and a number of
other formats. That only seems to be available in the 32 bit
versions.

Any ideas/help on where to look or what I might have done
wrong would be appreciated.
-- 
========= mailto:dboyd@data-tactics.com ============
David W. Boyd
Director, Engineering, Research and Development
Data Tactics Corporation
7901 Jones Branch, Suite 240
Mclean, VA 22102
office:   +1-703-506-3735, ext 308
fax:     +1-703-506-6703
cell:     +1-703-402-7908
============== http://www.data-tactics.com/ ============


The information contained in this message may be privileged
and/or confidential and protected from disclosure.
If the reader of this message is not the intended recipient
or an employee or agent responsible for delivering this message
to the intended recipient, you are hereby notified that any
dissemination, distribution or copying of this communication
is strictly prohibited.  If you have received this communication
in error, please notify the sender immediately by replying to
this message and deleting the material from any computer.


From even.rouault at mines-paris.org  Fri Jan 29 15:13:59 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 29 15:14:11 2010
Subject: [gdal-dev] 64 bit linux format support
In-Reply-To: <4B632F34.1050206@data-tactics.com>
References: <4B632F34.1050206@data-tactics.com>
Message-ID: <201001292114.01044.even.rouault@mines-paris.org>

David,

If you just need reading uncompressed or JPEG compressed NITF, you don't have 
to bother with MrSID or ECW. Those formats are totally unrelated. Except if 
you want to read JPEG2000 compressed NITF files, in which case you need to 
have a GDAL build with a JPEG2000 capable driver (Kakadu, MrSID or ECW).

See http://trac.osgeo.org/gdal/wiki/BuildHints that has some information 
specific to how building with those drivers.

Best reagards,

Even

> All:
>    Sorry for the newbie question.  I have searched archives and not
> seen an answer.
>
>    I am setting up a Geoserver system on 64 bit Linux (CENTOS) and
> need support for NITF formats.  I installed the lastest imageioext
> binaries but none of the additional GDAL formats show up.
>
> I have verified all the paths (LD_LIBRARY_PATH) and such but but
>
> According to the 2.0 docs I should see DTED, EHdr, ERDASImg the MrSID
> and NITF formats when I create a new data store.  I downloaded the ECW
> version of the libraries.
>
> I have looked all through the docs and the only thing I can figure is
> that MrSID support is needed to support NITF and a number of
> other formats. That only seems to be available in the 32 bit
> versions.
>
> Any ideas/help on where to look or what I might have done
> wrong would be appreciated.


From dboyd at data-tactics.com  Fri Jan 29 17:02:59 2010
From: dboyd at data-tactics.com (David Boyd)
Date: Fri Jan 29 17:03:05 2010
Subject: [gdal-dev] 64 bit linux format support
In-Reply-To: <201001292114.01044.even.rouault@mines-paris.org>
References: <4B632F34.1050206@data-tactics.com>
	<201001292114.01044.even.rouault@mines-paris.org>
Message-ID: <4B635B13.5060905@data-tactics.com>

Even:
   Thanks.  I found part of the issue.  Apparently
I had the ECW version of the library (instead of the base
one) and was getting a unresolved dynamic link error.

Now NITF is an available option.  Unfortunatly, I can still
not get it to load.  Now I am getting an error in the log about
an IllegalArgumentException.  The attached is the log file.
Below is the output from gdalinfo on the file.

I am using 1.0.5 of the imageio ext.  In my googling about
I saw something about Geoserver 2.0RC1 using 1.0.4.  I have
version 2.0.1 of Geoserver.
Could that be the difference?

> [jboss@dt-demo-geo imageiolibs]$ ./gdalinfo /mapdata/CADRG/centcom/rpf/cdrgxgnc
> jncn_13/rpf/cjnc/cjncz01/0004r023.jn1.ntf
> Driver: NITF/National Imagery Transmission Format
> Size is 1536, 1536
> Coordinate System is:
> GEOGCS["WGS 84",
>     DATUM["WGS_1984",
>         SPHEROID["WGS 84",6378137,298.257223563,
>             AUTHORITY["EPSG","7030"]],
>         TOWGS84[0,0,0,0,0,0,0],
>         AUTHORITY["EPSG","6326"]],
>     PRIMEM["Greenwich",0,
>         AUTHORITY["EPSG","8901"]],
>     UNIT["degree",0.0174532925199433,
>         AUTHORITY["EPSG","9108"]],
>     AXIS["Lat",NORTH],
>     AXIS["Long",EAST],
>     AUTHORITY["EPSG","4326"]]
> Origin = (179.251559251559286,8.307692307692307)
> Pixel Size = (0.002923596673597,-0.002704326923077)
> Metadata:
>   NITF_FHDR=NITF02.00
>   NITF_CLEVEL=03
>   NITF_STYPE=
>   NITF_OSTAID=DMA
>   NITF_FDT=24160004ZJAN02
>   NITF_FTITLE=0004R023.JN1
>   NITF_FSCLAS=U
>   NITF_FSCODE=
>   NITF_FSCTLH=
>   NITF_FSREL=
>   NITF_FSCAUT=
>   NITF_FSCTLN=
>   NITF_FSDWNG=
>   NITF_FSCOP=00000
>   NITF_FSCPYS=00000
>   NITF_ENCRYP=0
>   NITF_ONAME=DMA Primary Site
>   NITF_OPHONE=
>   NITF_IID1=CADRG
>   NITF_IDATIM=
>   NITF_TGTID=
>   NITF_ITITLE=0004R023.JN1
>   NITF_ISCLAS=U
>   NITF_ISCODE=
>   NITF_ISCTLH=
>   NITF_ISREL=
>   NITF_ISCAUT=
>   NITF_ISCTLN=
>   NITF_ISDWNG=
>   NITF_ISORCE=
>   NITF_PVTYPE=INT
>   NITF_IREP=RGB/LUT
>   NITF_ICAT=MAP
>   NITF_ABPP=08
>   NITF_PJUST=R
>   NITF_IC=M4
>   NITF_IMODE=B
> Image Structure Metadata:
>   COMPRESSION=VECTOR QUANTIZATION
> Corner Coordinates:
> Upper Left  ( 179.2515593,   8.3076923)
> Lower Left  ( 179.2515593,   4.1538462)
> Upper Right (     183.742,       8.308)
> Lower Right (     183.742,       4.154)
> Center      (     181.497,       6.231)
> Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
>   Color Table (RGB with 216 entries)
>     0: 7,23,178,255
>     1: 247,245,245,255
>     2: 124,137,224,255
>     3: 245,237,226,255
>     4: 154,162,228,255




Even Rouault wrote:
> David,
> 
> If you just need reading uncompressed or JPEG compressed NITF, you don't have 
> to bother with MrSID or ECW. Those formats are totally unrelated. Except if 
> you want to read JPEG2000 compressed NITF files, in which case you need to 
> have a GDAL build with a JPEG2000 capable driver (Kakadu, MrSID or ECW).
> 
> See http://trac.osgeo.org/gdal/wiki/BuildHints that has some information 
> specific to how building with those drivers.
> 
> Best reagards,
> 
> Even
> 
>> All:
>>    Sorry for the newbie question.  I have searched archives and not
>> seen an answer.
>>
>>    I am setting up a Geoserver system on 64 bit Linux (CENTOS) and
>> need support for NITF formats.  I installed the lastest imageioext
>> binaries but none of the additional GDAL formats show up.
>>
>> I have verified all the paths (LD_LIBRARY_PATH) and such but but
>>
>> According to the 2.0 docs I should see DTED, EHdr, ERDASImg the MrSID
>> and NITF formats when I create a new data store.  I downloaded the ECW
>> version of the libraries.
>>
>> I have looked all through the docs and the only thing I can figure is
>> that MrSID support is needed to support NITF and a number of
>> other formats. That only seems to be available in the 32 bit
>> versions.
>>
>> Any ideas/help on where to look or what I might have done
>> wrong would be appreciated.
> 
> 
> 
> 

-- 
========= mailto:dboyd@data-tactics.com ============
David W. Boyd
Director, Engineering, Research and Development
Data Tactics Corporation
7901 Jones Branch, Suite 240
Mclean, VA 22102
office:   +1-703-506-3735, ext 308
fax:     +1-703-506-6703
cell:     +1-703-402-7908
============== http://www.data-tactics.com/ ============


The information contained in this message may be privileged
and/or confidential and protected from disclosure.
If the reader of this message is not the intended recipient
or an employee or agent responsible for delivering this message
to the intended recipient, you are hereby notified that any
dissemination, distribution or copying of this communication
is strictly prohibited.  If you have received this communication
in error, please notify the sender immediately by replying to
this message and deleting the material from any computer.


-------------- next part --------------
2010-01-29 21:39:33,693 ERROR [org.vfny.geoserver.global] - 
----------------------------------
- GEOSERVER_DATA_DIR: /mapdata
----------------------------------
2010-01-29 21:39:34,500 INFO [org.geoserver] - Loaded style 'point'
2010-01-29 21:39:34,502 INFO [org.geoserver] - Loaded style 'green'
2010-01-29 21:39:34,503 INFO [org.geoserver] - Loaded style 'simple_streams'
2010-01-29 21:39:34,504 INFO [org.geoserver] - Loaded style 'polygon'
2010-01-29 21:39:34,505 INFO [org.geoserver] - Loaded style 'burg'
2010-01-29 21:39:34,506 INFO [org.geoserver] - Loaded style 'flags'
2010-01-29 21:39:34,507 INFO [org.geoserver] - Loaded style 'simple_roads'
2010-01-29 21:39:34,508 INFO [org.geoserver] - Loaded style 'restricted'
2010-01-29 21:39:34,509 INFO [org.geoserver] - Loaded style 'dem'
2010-01-29 21:39:34,510 INFO [org.geoserver] - Loaded style 'raster'
2010-01-29 21:39:34,511 INFO [org.geoserver] - Loaded style 'cite_lakes'
2010-01-29 21:39:34,512 INFO [org.geoserver] - Loaded style 'pophatch'
2010-01-29 21:39:34,513 INFO [org.geoserver] - Loaded style 'giant_polygon'
2010-01-29 21:39:34,514 INFO [org.geoserver] - Loaded style 'tiger_roads'
2010-01-29 21:39:34,515 INFO [org.geoserver] - Loaded style 'population'
2010-01-29 21:39:34,517 INFO [org.geoserver] - Loaded style 'grass'
2010-01-29 21:39:34,518 INFO [org.geoserver] - Loaded style 'rain'
2010-01-29 21:39:34,519 INFO [org.geoserver] - Loaded style 'poly_landmarks'
2010-01-29 21:39:34,520 INFO [org.geoserver] - Loaded style 'poi'
2010-01-29 21:39:34,521 INFO [org.geoserver] - Loaded style 'capitals'
2010-01-29 21:39:34,522 INFO [org.geoserver] - Loaded style 'concat'
2010-01-29 21:39:34,523 INFO [org.geoserver] - Loaded style 'line'
2010-01-29 21:39:34,525 INFO [org.geoserver] - Loaded default workspace sf
2010-01-29 21:39:34,534 INFO [org.geoserver] - Loaded workspace 'sf'
2010-01-29 21:39:34,537 INFO [org.geoserver] - Loaded workspace 'cite'
2010-01-29 21:39:34,540 INFO [org.geoserver] - Loaded workspace 'topp'
2010-01-29 21:39:34,543 INFO [org.geoserver] - Loaded workspace 'nurc'
2010-01-29 21:39:34,545 INFO [org.geoserver] - Loaded workspace 'tiger'
2010-01-29 21:39:34,548 INFO [org.geoserver] - Loaded workspace 'sde'
2010-01-29 21:39:34,551 INFO [org.geoserver] - Loaded workspace 'it.geosolutions'
2010-01-29 21:39:34,554 INFO [org.geoserver] - Loaded workspace 'dt'
2010-01-29 21:39:34,570 INFO [org.geoserver] - Loaded store 'mosaic', enabled
2010-01-29 21:39:34,572 INFO [org.geoserver] - Loaded coverage store 'mosaic'
2010-01-29 21:39:34,627 TRACE [org.geotools.resource] - Loaded resources for English from bundle "org.geotools.resources.i18n".
2010-01-29 21:39:35,989 TRACE [org.geotools.resource] - Loaded resources for English from bundle "org.geotools.resources.i18n".
2010-01-29 21:39:36,010 INFO [org.geotools.factory] - Factory implementations for category CRSFactory:
  org.geotools.referencing.factory.ReferencingObjectFactory
2010-01-29 21:39:36,018 INFO [org.geotools.factory] - Factory implementations for category DatumFactory:
  org.geotools.referencing.factory.ReferencingObjectFactory
  org.geotools.referencing.factory.DatumAliases
2010-01-29 21:39:36,041 INFO [org.geotools.factory] - Factory implementations for category MathTransformFactory:
  org.geotools.referencing.operation.DefaultMathTransformFactory
2010-01-29 21:39:36,128 DEBUG [org.geotools.referencing.factory] - Loading datum aliases from "vfszip:/usr/local/jboss-5.1.0.GA/server/default/deploy/geoserver.war/WEB-INF/lib/gt-referencing-2.6.1.jar/org/geotools/referencing/factory/DatumAliasesTable.txt".
2010-01-29 21:39:36,248 INFO [org.geotools.factory] - Factory implementations for category CSFactory:
  org.geotools.referencing.factory.ReferencingObjectFactory
2010-01-29 21:39:36,329 INFO [org.geotools.factory] - Factory implementations for category CRSAuthorityFactory:
  org.geotools.referencing.factory.epsg.DefaultFactory
  org.geotools.referencing.factory.epsg.FactoryUsingWKT
  org.geotools.referencing.factory.epsg.LongitudeFirstFactory
  org.geotools.referencing.factory.wms.AutoCRSFactory
  org.geotools.referencing.factory.wms.WebCRSFactory
  org.geotools.referencing.factory.URN_AuthorityFactory
  org.geotools.referencing.factory.HTTP_AuthorityFactory
  org.geotools.referencing.factory.epsg.LongitudeFirstEpsgDecorator
  org.geotools.referencing.factory.epsg.ThreadedHsqlEpsgFactory
  org.vfny.geoserver.crs.GeoserverCustomWKTFactory
  org.vfny.geoserver.crs.GeoserverOverridingWKTFactory
2010-01-29 21:39:36,331 INFO [org.geotools.referencing.factory] - Using "/usr/local/jboss-5.1.0.GA/server/default/deploy/geoserver.war/WEB-INF/lib/main-2.0.1.jar/org/vfny/geoserver/crs/override_epsg.properties" as EPSG factory.
2010-01-29 21:39:36,516 INFO [org.geotools.referencing.factory] - Connected to EPSG database "jdbc:hsqldb:file:/tmp/Geotools/Databases/HSQL/v7.4.0/EPSG" on "HSQL Database Engine".
2010-01-29 21:39:36,579 TRACE [org.geotools.resource] - Loaded resources for English from bundle "org.geotools.resources.i18n".
2010-01-29 21:39:36,582 INFO [org.geotools.referencing.factory] - Using "/mapdata/user_projections/epsg.properties" as EPSG factory.
2010-01-29 21:39:36,600 WARN [org.geotools.referencing.factory] - Axis elements found in a wkt definition, the force longitude first axis order hint might not be respected:
PROJCS["WGS84 / Simple Mercator", GEOGCS["WGS 84", DATUM["WGS_1984", SPHEROID["WGS_1984", 6378137.0, 298.257223563]], PRIMEM["Greenwich", 0.0], UNIT["degree", 0.017453292519943295]], PROJECTION["Mercator_1SP_Google"], PARAMETER["latitude_of_origin", 0.0], PARAMETER["central_meridian", 0.0], PARAMETER["scale_factor", 1.0], PARAMETER["false_easting", 0.0], PARAMETER["false_northing", 0.0], UNIT["m", 1.0], AXIS["x", EAST], AXIS["y", NORTH], AUTHORITY["EPSG","54004"]]
2010-01-29 21:39:36,648 DEBUG [org.geotools.referencing.factory] - Failure in the primary factory: No code "EPSG:4326" from authority "European Petroleum Survey Group" found for object of type "IdentifiedObject". Now trying the fallback factory...
2010-01-29 21:39:36,883 INFO [org.geoserver] - Loaded coverage 'mosaic', enabled
2010-01-29 21:39:36,887 INFO [org.geoserver] - Loaded coverage 'mosaic'
2010-01-29 21:39:36,922 INFO [org.geoserver] - Loaded layer 'mosaic'
2010-01-29 21:39:36,925 INFO [org.geoserver] - Loaded store 'img_sample2', enabled
2010-01-29 21:39:36,925 INFO [org.geoserver] - Loaded coverage store 'img_sample2'
2010-01-29 21:39:37,094 INFO [org.geotools.factory] - Factory implementations for category MathTransformProvider:
  org.geotools.referencing.operation.transform.LogarithmicTransform1D$Provider
  org.geotools.referencing.operation.transform.ExponentialTransform1D$Provider
  org.geotools.referencing.operation.transform.ProjectiveTransform$ProviderAffine
  org.geotools.referencing.operation.transform.ProjectiveTransform$ProviderLongitudeRotation
  org.geotools.referencing.operation.transform.GeocentricTranslation$Provider
  org.geotools.referencing.operation.transform.GeocentricTranslation$ProviderSevenParam
  org.geotools.referencing.operation.transform.GeocentricTranslation$ProviderFrameRotation
  org.geotools.referencing.operation.transform.GeocentricTransform$Provider
  org.geotools.referencing.operation.transform.GeocentricTransform$ProviderInverse
  org.geotools.referencing.operation.transform.MolodenskiTransform$Provider
  org.geotools.referencing.operation.transform.MolodenskiTransform$ProviderAbridged
  org.geotools.referencing.operation.transform.NADCONTransform$Provider
  org.geotools.referencing.operation.transform.WarpTransform2D$Provider
  org.geotools.referencing.operation.projection.EquidistantCylindrical$Provider
  org.geotools.referencing.operation.projection.EquidistantCylindrical$SphericalProvider
  org.geotools.referencing.operation.projection.PlateCarree$Provider
  org.geotools.referencing.operation.projection.Mercator1SP$Provider
  org.geotools.referencing.operation.projection.Mercator2SP$Provider
  org.geotools.referencing.operation.projection.MercatorPseudoProvider
  org.geotools.referencing.operation.projection.TransverseMercator$Provider
  org.geotools.referencing.operation.projection.TransverseMercator$Provider_SouthOrientated
  org.geotools.referencing.operation.projection.ObliqueMercator$Provider
  org.geotools.referencing.operation.projection.ObliqueMercator$Provider_TwoPoint
  org.geotools.referencing.operation.projection.HotineObliqueMercator$Provider
  org.geotools.referencing.operation.projection.HotineObliqueMercator$Provider_TwoPoint
  org.geotools.referencing.operation.projection.AlbersEqualArea$Provider
  org.geotools.referencing.operation.projection.LambertConformal1SP$Provider
  org.geotools.referencing.operation.projection.LambertConformal2SP$Provider
  org.geotools.referencing.operation.projection.LambertConformalBelgium$Provider
  org.geotools.referencing.operation.projection.LambertAzimuthalEqualArea$Provider
  org.geotools.referencing.operation.projection.Orthographic$Provider
  org.geotools.referencing.operation.projection.Stereographic$Provider
  org.geotools.referencing.operation.projection.ObliqueStereographic$Provider
  org.geotools.referencing.operation.projection.PolarStereographic$ProviderA
  org.geotools.referencing.operation.projection.PolarStereographic$ProviderB
  org.geotools.referencing.operation.projection.PolarStereographic$ProviderNorth
  org.geotools.referencing.operation.projection.PolarStereographic$ProviderSouth
  org.geotools.referencing.operation.projection.NewZealandMapGrid$Provider
  org.geotools.referencing.operation.projection.Krovak$Provider
  org.geotools.referencing.operation.projection.CassiniSoldner$Provider
  org.geotools.referencing.operation.projection.EquidistantConic$Provider
  org.geotools.referencing.operation.projection.Polyconic$Provider
  org.geotools.referencing.operation.projection.Mercator1SPGoogle$Provider
2010-01-29 21:39:37,132 DEBUG [org.geotools.referencing.factory] - Failure in the primary factory: No code "EPSG:32633" from authority "European Petroleum Survey Group" found for object of type "IdentifiedObject". Now trying the fallback factory...
2010-01-29 21:39:38,007 INFO [org.geoserver] - Loaded coverage 'Pk50095', enabled
2010-01-29 21:39:38,008 INFO [org.geoserver] - Loaded coverage 'img_sample2'
2010-01-29 21:39:38,010 INFO [org.geoserver] - Loaded layer 'Pk50095'
2010-01-29 21:39:38,012 INFO [org.geoserver] - Loaded store 'arcGridSample', enabled
2010-01-29 21:39:38,012 INFO [org.geoserver] - Loaded coverage store 'arcGridSample'
2010-01-29 21:39:38,064 INFO [org.geoserver] - Loaded coverage 'Arc_Sample', enabled
2010-01-29 21:39:38,065 INFO [org.geoserver] - Loaded coverage 'arcGridSample'
2010-01-29 21:39:38,067 INFO [org.geoserver] - Loaded layer 'Arc_Sample'
2010-01-29 21:39:38,069 INFO [org.geoserver] - Loaded store 'worldImageSample', enabled
2010-01-29 21:39:38,069 INFO [org.geoserver] - Loaded coverage store 'worldImageSample'
2010-01-29 21:39:38,086 INFO [org.geoserver] - Loaded coverage 'Img_Sample', enabled
2010-01-29 21:39:38,087 INFO [org.geoserver] - Loaded coverage 'worldImageSample'
2010-01-29 21:39:38,089 INFO [org.geoserver] - Loaded layer 'Img_Sample'
2010-01-29 21:39:38,092 INFO [org.geoserver] - Loaded store 'test', enabled
2010-01-29 21:39:38,093 INFO [org.geoserver] - Loaded coverage store 'test'
2010-01-29 21:39:38,099 INFO [org.geoserver] - Loaded coverage 'TerraColor_Baghdad_IQ_15m', enabled
2010-01-29 21:39:38,099 INFO [org.geoserver] - Loaded coverage 'test'
2010-01-29 21:39:38,101 INFO [org.geoserver] - Loaded layer 'TerraColor_Baghdad_IQ_15m'
2010-01-29 21:39:38,677 INFO [org.geoserver] - Loaded service 'wms', enabled
2010-01-29 21:39:38,732 INFO [org.geoserver] - Loaded service 'wfs', enabled
2010-01-29 21:39:38,748 INFO [org.geoserver] - Loaded service 'wcs', enabled
2010-01-29 21:39:38,767 INFO [org.geotools.image.ja] - Native acceleration disabled for "Mosaic" operation.
2010-01-29 21:39:40,258 WARN [org.geotools.gce.imagemosai] - Unable to set ordering between tiff readers spi
2010-01-29 21:39:40,287 ERROR [org.geowebcache.config.XMLConfiguration] - Configuration file cannot be read or does not exist!
2010-01-29 21:39:40,308 ERROR [org.geowebcache.layer.TileLayerDispatcher] - Configuration /usr/local/jboss-5.1.0.GA/server/default/deploy/geoserver.war/../resources contained no layers.
2010-01-29 21:39:40,311 ERROR [org.geowebcache.layer.TileLayerDispatcher] - Error reading service information from /usr/local/jboss-5.1.0.GA/server/default/deploy/geoserver.war/../resources: Error parsing file /usr/local/jboss-5.1.0.GA/server/default/deploy/geoserver.war/../resources/geowebcache.xml
2010-01-29 21:39:40,315 WARNING [it.geosolutions.util] - Native library load failed.java.lang.UnsatisfiedLinkError: no kdu_jni in java.library.path
2010-01-29 21:39:40,347 DEBUG [org.geotools.coverageio.gdal.jp2ecw] - JP2ECWFormatFactory is not availaible.
2010-01-29 21:39:40,352 DEBUG [org.geotools.coverageio.gdal.jp2mrisd] - JP2MrSIDFormatFactory is not availaible.
2010-01-29 21:39:40,356 DEBUG [org.geotools.coverageio.gdal.jp2k] - JP2KFormatFactory is not availaible.
2010-01-29 21:39:40,375 INFO [org.geotools.factory] - Factory implementations for category GridFormatFactorySpi:
  org.geotools.gce.gtopo30.GTopo30FormatFactory
  org.geotools.gce.imagemosaic.jdbc.ImageMosaicJDBCFormatFactory
  org.geotools.gce.imagepyramid.ImagePyramidFormatFactory
  org.geotools.gce.geotiff.GeoTiffFormatFactorySpi
  org.geotools.gce.arcgrid.ArcGridFormatFactory
  org.geotools.arcsde.ArcSDERasterFormatFactory
  org.geotools.gce.image.WorldImageFormatFactory
  org.geotools.gce.imagemosaic.ImageMosaicFormatFactory
  org.geotools.coverageio.gdal.mrsid.MrSIDFormatFactory
  org.geotools.coverageio.gdal.jp2kak.JP2KFormatFactory
  org.geotools.coverageio.gdal.jp2mrsid.JP2MrSIDFormatFactory
  org.geotools.coverageio.gdal.jp2ecw.JP2ECWFormatFactory
  org.geotools.coverageio.gdal.ecw.ECWFormatFactory
  org.geotools.coverageio.gdal.dted.DTEDFormatFactory
  org.geotools.coverageio.gdal.erdasimg.ErdasImgFormatFactory
  org.geotools.coverageio.gdal.nitf.NITFFormatFactory
  org.geotools.coverageio.gdal.ehdr.EsriHdrFormatFactory
2010-01-29 21:39:40,380 DEBUG [org.geotools.coverageio.gdal.erdasimg] - NITFFormatFactory is availaible.
2010-01-29 21:39:40,384 DEBUG [org.geotools.coverageio.gdal.mrsid] - MrSIDFormatFactory is not availaible.
2010-01-29 21:39:40,384 DEBUG [org.geotools.coverageio.gdal.jp2ecw] - JP2ECWFormatFactory is not availaible.
2010-01-29 21:39:40,386 DEBUG [org.geotools.coverageio.gdal.dted] - DTEDFormatFactory is availaible.
2010-01-29 21:39:40,409 INFO [org.geotools.factory] - Factory implementations for category CoordinateOperationFactory:
  org.geotools.referencing.operation.DefaultCoordinateOperationFactory
  org.geotools.referencing.operation.AuthorityBackedFactory
  org.geotools.referencing.operation.BufferedCoordinateOperationFactory
2010-01-29 21:39:40,413 INFO [org.geotools.factory] - Factory implementations for category CoordinateOperationAuthorityFactory:
  org.geotools.referencing.factory.epsg.ThreadedHsqlEpsgFactory
  org.geotools.referencing.factory.epsg.DefaultFactory
  org.geotools.referencing.factory.epsg.LongitudeFirstFactory
  org.geotools.referencing.factory.URN_AuthorityFactory
  org.geotools.referencing.factory.HTTP_AuthorityFactory
  org.geotools.referencing.factory.epsg.LongitudeFirstEpsgDecorator
2010-01-29 21:39:40,415 DEBUG [org.geotools.coverageio.gdal.jp2k] - JP2KFormatFactory is not availaible.
2010-01-29 21:39:40,420 DEBUG [org.geotools.coverageio.gdal.ecw] - ECWFormatFactory is not availaible.
2010-01-29 21:39:40,422 DEBUG [org.geotools.coverageio.gdal.ehdr] - EsriHdrFormatFactory is availaible.
2010-01-29 21:39:40,424 DEBUG [org.geotools.gce.arcgrid] - ArcGridFormatFactory is availaible.
2010-01-29 21:39:40,424 DEBUG [org.geotools.coverageio.gdal.jp2mrisd] - JP2MrSIDFormatFactory is not availaible.
2010-01-29 21:39:40,427 DEBUG [org.geotools.coverageio.gdal.erdasimg] - ErdasImgFormatFactory is availaible.
2010-01-29 21:39:40,430 DEBUG [org.geotools.arcsde.ArcSDERasterFormatFactory] - Checking availability of ArcSDE Jars.
2010-01-29 21:39:40,463 DEBUG [org.geotools.arcsde.ArcSDERasterFormatFactory] - com.esri.sde.sdk.client.SeConnection is in place.
2010-01-29 21:39:40,469 DEBUG [org.geotools.arcsde.ArcSDERasterFormatFactory] - com.esri.sde.sdk.pe.PeCoordinateSystem is in place.
2010-01-29 21:39:40,477 DEBUG [org.geotools.referencing.factory] - Failure in the primary factory: No code "EPSG:4326" from authority "European Petroleum Survey Group" found for object of type "IdentifiedObject". Now trying the fallback factory...
2010-01-29 21:39:40,481 DEBUG [org.geotools.coverageio.gdal.ehdr] - Creating a new EsriHdrFormat.
2010-01-29 21:39:40,486 DEBUG [org.geotools.coverageio.gdal.nitf] - Creating a new NITFFormat.
2010-01-29 21:39:40,495 DEBUG [org.geotools.gce.arcgrid] - Creating a new ArcGriFormat.
2010-01-29 21:39:40,502 DEBUG [org.geotools.coverageio.gdal.dted] - Creating a new DTEDFormat.
2010-01-29 21:39:40,507 DEBUG [org.geotools.coverageio.gdal.erdasimg] - Creating a new ErdasImgFormat.
2010-01-29 21:39:40,978 INFO [org.geotools.factory] - Factory implementations for category FilterFactory:
  org.geotools.filter.FilterFactoryImpl
2010-01-29 21:39:40,982 INFO [org.geotools.factory] - Factory implementations for category StyleFactory:
  org.geotools.styling.StyleFactoryImpl
2010-01-29 21:40:37,988 DEBUG [org.geotools.arcsde.ArcSDEDataStoreFactory] - Using ArcSDE API version 9.2 (or higher)
2010-01-29 21:40:37,994 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.client.SeConnection is in place.
2010-01-29 21:40:37,994 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.pe.PeCoordinateSystem is in place.
2010-01-29 21:40:37,996 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.client.SeConnection is in place.
2010-01-29 21:40:37,996 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.pe.PeCoordinateSystem is in place.
2010-01-29 21:40:38,074 INFO [org.geotools.factory] - Factory implementations for category DataStoreFactorySpi:
  org.geotools.arcsde.ArcSDEDataStoreFactory
  org.geotools.arcsde.ArcSDEJNDIDataStoreFactory
  org.geotools.data.vpf.VPFDataStoreFactory
  org.geotools.data.postgis.PostgisNGDataStoreFactory
  org.geotools.data.postgis.PostgisNGJNDIDataStoreFactory
  org.geotools.data.wfs.WFSDataStoreFactory
  org.geotools.data.oracle.OracleNGDataStoreFactory
  org.geotools.data.oracle.OracleNGJNDIDataStoreFactory
  org.geotools.data.oracle.OracleNGOCIDataStoreFactory
  org.geotools.data.shapefile.ShapefileDataStoreFactory
  org.geotools.data.property.PropertyDataStoreFactory
  org.geotools.data.directory.DirectoryDataStoreFactory
2010-01-29 21:40:38,074 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.client.SeConnection is in place.
2010-01-29 21:40:38,074 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.pe.PeCoordinateSystem is in place.
2010-01-29 21:40:38,082 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.client.SeConnection is in place.
2010-01-29 21:40:38,094 TRACE [org.geotools.arcsde.ArcSDEDataStoreFactory] - com.esri.sde.sdk.pe.PeCoordinateSystem is in place.
2010-01-29 21:40:38,100 DEBUG [org.geotools.coverageio.gdal.erdasimg] - NITFFormatFactory is availaible.
2010-01-29 21:40:38,100 DEBUG [org.geotools.coverageio.gdal.jp2ecw] - JP2ECWFormatFactory is not availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.mrsid] - MrSIDFormatFactory is not availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.dted] - DTEDFormatFactory is availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.jp2k] - JP2KFormatFactory is not availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.ecw] - ECWFormatFactory is not availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.ehdr] - EsriHdrFormatFactory is availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.gce.arcgrid] - ArcGridFormatFactory is availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.jp2mrisd] - JP2MrSIDFormatFactory is not availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.coverageio.gdal.erdasimg] - ErdasImgFormatFactory is availaible.
2010-01-29 21:40:38,101 DEBUG [org.geotools.arcsde.ArcSDERasterFormatFactory] - Checking availability of ArcSDE Jars.
2010-01-29 21:40:38,101 DEBUG [org.geotools.arcsde.ArcSDERasterFormatFactory] - com.esri.sde.sdk.client.SeConnection is in place.
2010-01-29 21:40:38,101 DEBUG [org.geotools.arcsde.ArcSDERasterFormatFactory] - com.esri.sde.sdk.pe.PeCoordinateSystem is in place.
2010-01-29 21:40:38,102 DEBUG [org.geotools.coverageio.gdal.ehdr] - Creating a new EsriHdrFormat.
2010-01-29 21:40:38,102 DEBUG [org.geotools.coverageio.gdal.nitf] - Creating a new NITFFormat.
2010-01-29 21:40:38,102 DEBUG [org.geotools.gce.arcgrid] - Creating a new ArcGriFormat.
2010-01-29 21:40:38,102 DEBUG [org.geotools.coverageio.gdal.dted] - Creating a new DTEDFormat.
2010-01-29 21:40:38,102 DEBUG [org.geotools.coverageio.gdal.erdasimg] - Creating a new ErdasImgFormat.
2010-01-29 21:40:55,494 WARN [org.geoserver.we] - NewLayerPage does not have a title set
2010-01-29 21:40:55,580 INFO [org.geotools.factory] - Factory implementations for category GridCoverageFactory:
  org.geotools.coverage.grid.GridCoverageFactory
2010-01-29 21:40:55,599 INFO [org.geoserver.we] - Getting list of coverages for saved store file:CADRG/centcom/rpf/cdrgxgncjncn_13/rpf/cjnc/cjncz01/0004r023.jn1.ntf
java.lang.RuntimeException: Could not list layers for this store, an error occurred retrieving them: Incorrect input type!
	at org.geoserver.web.data.layer.NewLayerPageProvider.getItems(NewLayerPageProvider.java:92)
	at org.geoserver.web.wicket.GeoServerDataProvider.getFilteredItems(GeoServerDataProvider.java:162)
	at org.geoserver.web.data.layer.NewLayerPageProvider.getFilteredItems(NewLayerPageProvider.java:108)
	at org.geoserver.web.wicket.GeoServerDataProvider.size(GeoServerDataProvider.java:177)
	at org.geoserver.web.wicket.GeoServerTablePanel$Pager.first(GeoServerTablePanel.java:478)
	at org.geoserver.web.wicket.GeoServerTablePanel$Pager.updateMatched(GeoServerTablePanel.java:468)
	at org.geoserver.web.wicket.GeoServerTablePanel$Pager.<init>(GeoServerTablePanel.java:443)
	at org.geoserver.web.wicket.GeoServerTablePanel.<init>(GeoServerTablePanel.java:188)
	at org.geoserver.web.wicket.GeoServerTablePanel.<init>(GeoServerTablePanel.java:82)
	at org.geoserver.web.data.layer.NewLayerPage$1.<init>(NewLayerPage.java:92)
	at org.geoserver.web.data.layer.NewLayerPage.<init>(NewLayerPage.java:92)
	at org.geoserver.web.data.store.CoverageStoreNewPage.onSave(CoverageStoreNewPage.java:71)
	at org.geoserver.web.data.store.AbstractCoverageStorePage$1.onSubmit(AbstractCoverageStorePage.java:114)
	at org.apache.wicket.ajax.markup.html.form.AjaxSubmitLink$1.onSubmit(AjaxSubmitLink.java:94)
	at org.apache.wicket.ajax.form.AjaxFormSubmitBehavior.onEvent(AjaxFormSubmitBehavior.java:128)
	at org.apache.wicket.ajax.AjaxEventBehavior.respond(AjaxEventBehavior.java:163)
	at org.apache.wicket.ajax.AbstractDefaultAjaxBehavior.onRequest(AbstractDefaultAjaxBehavior.java:297)
	at org.apache.wicket.request.target.component.listener.BehaviorRequestTarget.processEvents(BehaviorRequestTarget.java:104)
	at org.apache.wicket.request.AbstractRequestCycleProcessor.processEvents(AbstractRequestCycleProcessor.java:91)
	at org.apache.wicket.RequestCycle.processEventsAndRespond(RequestCycle.java:1239)
	at org.apache.wicket.RequestCycle.step(RequestCycle.java:1316)
	at org.apache.wicket.RequestCycle.steps(RequestCycle.java:1418)
	at org.apache.wicket.RequestCycle.request(RequestCycle.java:532)
	at org.apache.wicket.protocol.http.WicketFilter.doGet(WicketFilter.java:356)
	at org.apache.wicket.protocol.http.WicketServlet.doPost(WicketServlet.java:145)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	at org.springframework.web.servlet.mvc.ServletWrappingController.handleRequestInternal(ServletWrappingController.java:158)
	at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
	at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:875)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:809)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:571)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:511)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.vfny.geoserver.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:265)
	at org.acegisecurity.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:107)
	at org.acegisecurity.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:72)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.ui.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:124)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.providers.anonymous.AnonymousProcessingFilter.doFilter(AnonymousProcessingFilter.java:125)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.ui.rememberme.RememberMeProcessingFilter.doFilter(RememberMeProcessingFilter.java:142)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.wrapper.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:81)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.ui.AbstractProcessingFilter.doFilter(AbstractProcessingFilter.java:271)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.ui.logout.LogoutFilter.doFilter(LogoutFilter.java:110)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.context.HttpSessionContextIntegrationFilter.doFilter(HttpSessionContextIntegrationFilter.java:249)
	at org.acegisecurity.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:275)
	at org.acegisecurity.util.FilterChainProxy.doFilter(FilterChainProxy.java:149)
	at org.acegisecurity.util.FilterToBeanProxy.doFilter(FilterToBeanProxy.java:98)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.geoserver.filters.LoggingFilter.doFilter(LoggingFilter.java:73)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.geoserver.filters.ReverseProxyFilter.doFilter(ReverseProxyFilter.java:183)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.geoserver.filters.GZIPFilter.doFilter(GZIPFilter.java:41)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.jboss.web.tomcat.filters.ReplyHeaderFilter.doFilter(ReplyHeaderFilter.java:96)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:235)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
	at org.jboss.web.tomcat.security.SecurityAssociationValve.invoke(SecurityAssociationValve.java:190)
	at org.jboss.web.tomcat.security.JaccContextValve.invoke(JaccContextValve.java:92)
	at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.process(SecurityContextEstablishmentValve.java:126)
	at org.jboss.web.tomcat.security.SecurityContextEstablishmentValve.invoke(SecurityContextEstablishmentValve.java:70)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
	at org.jboss.web.tomcat.service.jca.CachedConnectionValve.invoke(CachedConnectionValve.java:158)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:330)
	at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:829)
	at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:598)
	at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:447)
	at java.lang.Thread.run(Thread.java:619)
Caused by: java.lang.IllegalArgumentException: Incorrect input type!
	at javax.imageio.ImageReader.setInput(ImageReader.java:290)
	at it.geosolutions.imageio.gdalframework.GDALImageReader.setInput(GDALImageReader.java:795)
	at javax.imageio.ImageReader.setInput(ImageReader.java:363)
	at org.geotools.coverageio.BaseGridCoverage2DReader.<init>(BaseGridCoverage2DReader.java:196)
	at org.geotools.coverageio.gdal.BaseGDALGridCoverage2DReader.<init>(BaseGDALGridCoverage2DReader.java:81)
	at org.geotools.coverageio.gdal.nitf.NITFReader.<init>(NITFReader.java:64)
	at org.geotools.coverageio.gdal.nitf.NITFFormat.getReader(NITFFormat.java:92)
	at org.geotools.coverageio.gdal.nitf.NITFFormat.getReader(NITFFormat.java:42)
	at org.geoserver.catalog.ResourcePool.getGridCoverageReader(ResourcePool.java:836)
	at org.geoserver.catalog.CatalogBuilder.buildCoverage(CatalogBuilder.java:572)
	at org.geoserver.web.data.layer.NewLayerPageProvider.getItems(NewLayerPageProvider.java:72)
	... 89 more
From even.rouault at mines-paris.org  Fri Jan 29 17:09:51 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 29 17:10:02 2010
Subject: [gdal-dev] 64 bit linux format support
In-Reply-To: <4B635B13.5060905@data-tactics.com>
References: <4B632F34.1050206@data-tactics.com>
	<201001292114.01044.even.rouault@mines-paris.org>
	<4B635B13.5060905@data-tactics.com>
Message-ID: <201001292309.52896.even.rouault@mines-paris.org>

As your GDAL installation looks to work OK, you might get better help by the 
GeoServer/ImageIOExt community as it might be more related to the 
ImageIOExt/GDAL integration itself.

Le Friday 29 January 2010 23:02:59 David Boyd, vous avez ?crit?:
> Even:
>    Thanks.  I found part of the issue.  Apparently
> I had the ECW version of the library (instead of the base
> one) and was getting a unresolved dynamic link error.
>
> Now NITF is an available option.  Unfortunatly, I can still
> not get it to load.  Now I am getting an error in the log about
> an IllegalArgumentException.  The attached is the log file.
> Below is the output from gdalinfo on the file.
>
> I am using 1.0.5 of the imageio ext.  In my googling about
> I saw something about Geoserver 2.0RC1 using 1.0.4.  I have
> version 2.0.1 of Geoserver.
> Could that be the difference?
>
> > [jboss@dt-demo-geo imageiolibs]$ ./gdalinfo
> > /mapdata/CADRG/centcom/rpf/cdrgxgnc
> > jncn_13/rpf/cjnc/cjncz01/0004r023.jn1.ntf
> > Driver: NITF/National Imagery Transmission Format
> > Size is 1536, 1536
> > Coordinate System is:
> > GEOGCS["WGS 84",
> >     DATUM["WGS_1984",
> >         SPHEROID["WGS 84",6378137,298.257223563,
> >             AUTHORITY["EPSG","7030"]],
> >         TOWGS84[0,0,0,0,0,0,0],
> >         AUTHORITY["EPSG","6326"]],
> >     PRIMEM["Greenwich",0,
> >         AUTHORITY["EPSG","8901"]],
> >     UNIT["degree",0.0174532925199433,
> >         AUTHORITY["EPSG","9108"]],
> >     AXIS["Lat",NORTH],
> >     AXIS["Long",EAST],
> >     AUTHORITY["EPSG","4326"]]
> > Origin = (179.251559251559286,8.307692307692307)
> > Pixel Size = (0.002923596673597,-0.002704326923077)
> > Metadata:
> >   NITF_FHDR=NITF02.00
> >   NITF_CLEVEL=03
> >   NITF_STYPE=
> >   NITF_OSTAID=DMA
> >   NITF_FDT=24160004ZJAN02
> >   NITF_FTITLE=0004R023.JN1
> >   NITF_FSCLAS=U
> >   NITF_FSCODE=
> >   NITF_FSCTLH=
> >   NITF_FSREL=
> >   NITF_FSCAUT=
> >   NITF_FSCTLN=
> >   NITF_FSDWNG=
> >   NITF_FSCOP=00000
> >   NITF_FSCPYS=00000
> >   NITF_ENCRYP=0
> >   NITF_ONAME=DMA Primary Site
> >   NITF_OPHONE=
> >   NITF_IID1=CADRG
> >   NITF_IDATIM=
> >   NITF_TGTID=
> >   NITF_ITITLE=0004R023.JN1
> >   NITF_ISCLAS=U
> >   NITF_ISCODE=
> >   NITF_ISCTLH=
> >   NITF_ISREL=
> >   NITF_ISCAUT=
> >   NITF_ISCTLN=
> >   NITF_ISDWNG=
> >   NITF_ISORCE=
> >   NITF_PVTYPE=INT
> >   NITF_IREP=RGB/LUT
> >   NITF_ICAT=MAP
> >   NITF_ABPP=08
> >   NITF_PJUST=R
> >   NITF_IC=M4
> >   NITF_IMODE=B
> > Image Structure Metadata:
> >   COMPRESSION=VECTOR QUANTIZATION
> > Corner Coordinates:
> > Upper Left  ( 179.2515593,   8.3076923)
> > Lower Left  ( 179.2515593,   4.1538462)
> > Upper Right (     183.742,       8.308)
> > Lower Right (     183.742,       4.154)
> > Center      (     181.497,       6.231)
> > Band 1 Block=256x256 Type=Byte, ColorInterp=Palette
> >   Color Table (RGB with 216 entries)
> >     0: 7,23,178,255
> >     1: 247,245,245,255
> >     2: 124,137,224,255
> >     3: 245,237,226,255
> >     4: 154,162,228,255
>
> Even Rouault wrote:
> > David,
> >
> > If you just need reading uncompressed or JPEG compressed NITF, you don't
> > have to bother with MrSID or ECW. Those formats are totally unrelated.
> > Except if you want to read JPEG2000 compressed NITF files, in which case
> > you need to have a GDAL build with a JPEG2000 capable driver (Kakadu,
> > MrSID or ECW).
> >
> > See http://trac.osgeo.org/gdal/wiki/BuildHints that has some information
> > specific to how building with those drivers.
> >
> > Best reagards,
> >
> > Even
> >
> >> All:
> >>    Sorry for the newbie question.  I have searched archives and not
> >> seen an answer.
> >>
> >>    I am setting up a Geoserver system on 64 bit Linux (CENTOS) and
> >> need support for NITF formats.  I installed the lastest imageioext
> >> binaries but none of the additional GDAL formats show up.
> >>
> >> I have verified all the paths (LD_LIBRARY_PATH) and such but but
> >>
> >> According to the 2.0 docs I should see DTED, EHdr, ERDASImg the MrSID
> >> and NITF formats when I create a new data store.  I downloaded the ECW
> >> version of the libraries.
> >>
> >> I have looked all through the docs and the only thing I can figure is
> >> that MrSID support is needed to support NITF and a number of
> >> other formats. That only seems to be available in the 32 bit
> >> versions.
> >>
> >> Any ideas/help on where to look or what I might have done
> >> wrong would be appreciated.


From sriddell at geocue.com  Fri Jan 29 18:17:42 2010
From: sriddell at geocue.com (Steve Riddell)
Date: Fri Jan 29 18:24:16 2010
Subject: [gdal-dev] OGR projections - towgs84 issue
Message-ID: <02a401caa139$41f9acd0$c5ed0670$@com>

When trying to transform a projected coordinate (UTM 14) from WGS84 to
NAD83, using the  OGRCoordinateTransformation class, my transformed output
point exactly matches my input point, even though I have specified valid,
non-zero +towgs84 parameters for the NAD83 coordinate system.

 

If I do the same task directly using cs2cs, I get the expected ~2 meter
shift.

 

Using cs2cs:

cs2cs +proj=utm +zone=14 +ellps=WGS84 +datum=WGS84 +units=m 

  +to +proj=utm +zone=14 +ellps=GRS80 +datum=NAD83 +units=m
+towgs84=0.9910,-1.9072,-0.5129,0.0258,0.0097,0.0117,0.0000

 

Input -> 500000 3500000 100

Output-> 499998.20       3500002.08 98.80

 

Using GDAL (C#):

.

SpatialReference src = new SpatialReference("");

src.ImportFromProj4("+proj=utm +zone=14 + ellps=WGS84 +datum=WGS84
+units=m");

SpatialReference dst = new SpatialReference("");

dst.ImportFromProj4("+proj=utm +zone=14 + ellps=GRS80 +datum=NAD83 +units=m
+towgs84=0.9910,-1.9072,-0.5129,0.0258,0.0097,0.0117,0.0000");

CoordinateTransformation ct = new CoordinateTransformation(src, dst);

double[] p = new double[3] { 500000, 3500000, 100 };

ct.TransformPoint(p);

Console.WriteLine("x:" + p[0] + " y:" + p[1] + " z:" + p[2]);

 

Output-> x:500000 y:3499999.99990104 z:100

 

 

It appears that the towgs84 parameters were ignored, resulting in WGS84 and
NAD83 being treated as identical. I'm new to using GDAL, so perhaps I'm
missing something? Any help appeciated.

 

Thanks,

Steve

 

-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100129/ef37542f/attachment.html
From even.rouault at mines-paris.org  Fri Jan 29 18:45:35 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Fri Jan 29 18:45:48 2010
Subject: [gdal-dev] OGR projections - towgs84 issue
In-Reply-To: <02a401caa139$41f9acd0$c5ed0670$@com>
References: <02a401caa139$41f9acd0$c5ed0670$@com>
Message-ID: <201001300045.36057.even.rouault@mines-paris.org>

Steve,

when you specify a proj.4 string to GDAL/OGR, it doesn't keep it verbatim but 
translates it into its internal SRS model (based on WKT format). When it must 
pass a SRS back to proj.4, it translates from this model.

During this translation, if it detects an explicit datum known by PROJ.4, such 
as NAD83, it just omits the towgs84 parameter.

+datum is a shortcut for specifying both +ellps and +towgs84. See this thread 
http://n2.nabble.com/How-to-use-towgs84-td2393158.html where this was 
debated.

So just remove the "+datum=NAD83" parameter. The +ellps and +towgs84 will then 
be passed to PROJ.4.

Best regards,

Even
From even.rouault at mines-paris.org  Sat Jan 30 07:11:34 2010
From: even.rouault at mines-paris.org (Even Rouault)
Date: Sat Jan 30 07:11:49 2010
Subject: [gdal-dev] Adding TIFFTAG_XRESOLUTION and TIFFTAG_RESOLUTIONUNIT
	values to GeoTIFF
In-Reply-To: <1264752108724-4478777.post@n2.nabble.com>
References: <1264752108724-4478777.post@n2.nabble.com>
Message-ID: <201001301311.36285.even.rouault@mines-paris.org>

Dejan,

I've realized that the GeoTIFF driver documentation did not say much about 
that. Should be better now :
http://trac.osgeo.org/gdal/changeset/18689
http://trac.osgeo.org/gdal/changeset/18690

Basically if you use gdal_translate you can specify the tag values as metadata 
item:

gdal_translate in.whatever out.tif -mo TIFFTAG_XRESOLUTION=XXX -mo 
TIFFTAG_YRESOLUTION=YYY -mo TIFFTAG_RESOLUTIONUNIT=1, 2 or 3 -mo 
AREA_OR_POINT=Area

AREA_OR_POINT is not stictly speaking a TIFF tag, but a GeoTIFF key of the 
TIFFTAG_GEOKEYDIRECTORY tag.

Best regards,

Even

Le Friday 29 January 2010 09:01:48 Dejan Gregor, vous avez ?crit?:
> I would like to know, how I can set the following tag values via GDAL to
> the output GeoTIFF?
>
> TIFFTAG_XRESOLUTION
> TIFFTAG_RESOLUTIONUNIT
> TIFFTAG_XRESOLUTION
> TIFFTAG_SOFTWARE
> AREA_OR_POINT=Area
>
> Coordinate System is:
> LOCAL_CS[" Geocoding information not available Projection Name = Unknown
> Units =
>  other GeoTIFF Units = other",
>     UNIT["unknown",1]]
>
> Thanks!
> Dejan
>
> -----
>
> Dejan Gregor, MSc
> GISc Researcher and Consultant
>
> http://www.linkedin.com/in/dgregor


From jrepetto at free.fr  Sat Jan 30 10:46:43 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Sat Jan 30 10:46:56 2010
Subject: [gdal-dev] gdal_translate JPEG to GeoTiff (help! no one
	answered...)
In-Reply-To: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>
References: <6701f59a1001140304y1ea296bfse4a9b5e68271516a@mail.gmail.com>
Message-ID: <4B645463.7050407@free.fr>

Marco Afonso a ?crit :
> 
> I'm trying to transform a JPEG world image to GeoTiff.
> 
> My jpeg world map image is cropped to fit on -180.0, -59.1, 180, 90 
> (minx, miny, maxx, maxy - EPSG:4326).
> 
> Here are the steps:
> 
> % gdal_translate -of GTiff -a_srs EPSG:4326 -co "TILED=YES" -co 
> "JPEG_QUALITY=100" worldmap_hires2.jpg worldmap2.tif
> Input file size is 15000, 6225
> 0...10...20...30...40...50...60...70...80...90...100 - done.

> Corners are not what i want. I would like to obtain -180.0, -59.1, 180, 
> 90 (minx, miny, maxx, maxy).
> 

Hi Marco,

How did you enter the corner coordinates ? It does not appear in the 
command lines above.

Jean-Claude


From sjahputerao at gmail.com  Sat Jan 30 12:42:10 2010
From: sjahputerao at gmail.com (ozy sjahputera)
Date: Sat Jan 30 12:42:13 2010
Subject: [gdal-dev] Memory use in GDALDriver::CreateCopy()
In-Reply-To: <f97ce99d1001131452i55cfa0f6vad1138c39d6e6118@mail.gmail.com>
References: <f97ce99d1001120757k6b8ce497w9bbd8e2d3612477@mail.gmail.com>
	<4B4D0810.7060201@mines-paris.org>
	<f97ce99d1001130914t2372a8e1h57244d5995ed6994@mail.gmail.com>
	<4B4E230E.1060507@mines-paris.org>
	<f97ce99d1001131452i55cfa0f6vad1138c39d6e6118@mail.gmail.com>
Message-ID: <f97ce99d1001300942v58d5aa6dh57e88e614ec507f3@mail.gmail.com>

Even,

we just upgraded to gdal 1.7. I tested gdal_translate and CreateCopy() again
and it still dies with similar conditions.

Since valgrind did not detect any memory leak related to CreateCopy(), I
suspect this problem is caused by poor memory management in doing
CreateCopy(). It seems to be continuously allocating memory as it progresses
in the copy process. Think of it like a ever growing linked-list or some
similar data structure. This memory in the data structure will be properly
released after the copy process is done (thus valgrind does not see this as
a leak). But for a large file, the data structure might grow beyond the
available memory and swap.

In my test, gdal_translate operates on a 40Kx100K 16-bit image (NITF,
JPEG2000 compressed) used up all the swap (8GB) and up to 98.5% resident mem
(8GB) before the system killed it. When this happened the progress indicator
shows 80% completion.

Ozy

On Wed, Jan 13, 2010 at 4:52 PM, ozy sjahputera <sjahputerao@gmail.com>wrote:

> Even,
>
> We use the JP2ECW driver.
>
> I did the valgrind test and did not see any reported leak. Here is some of
> the outputs from valgrind:
>
> ==11469== Invalid free() / delete / delete[]
> ==11469==    at 0x4C2222E: free (in
> /usr/lib64/valgrind/amd64-linux/vgpreload_memcheck.so)
> ==11469==    by 0x95D1CDA: (within /lib64/libc-2.9.so)
> ==11469==    by 0x95D1879: (within /lib64/libc-2.9.so)
> ==11469==    by 0x4A1D60C: _vgnU_freeres (in
> /usr/lib64/valgrind/amd64-linux/vgpreload_core.so)
> ==11469==    by 0x950AB98: exit (in /lib64/libc-2.9.so)
> ==11469==    by 0x94F55EA: (below main) (in /lib64/libc-2.9.so)
> ==11469==  Address 0x40366f0 is not stack'd, malloc'd or (recently) free'd
> ==11469==
> ==11469== ERROR SUMMARY: 13177 errors from 14 contexts (suppressed: 0 from
> 0)
> ==11469== malloc/free: in use at exit: 376 bytes in 9 blocks.
> ==11469== malloc/free: 8,856,910 allocs, 8,856,902 frees, 5,762,693,361
> bytes allocated.
> ==11469== For counts of detected errors, rerun with: -v
> ==11469== Use --track-origins=yes to see where uninitialised values come
> from
> ==11469== searching for pointers to 9 not-freed blocks.
> ==11469== checked 1,934,448 bytes.
> ==11469==
> ==11469== LEAK SUMMARY:
> ==11469==    definitely lost: 0 bytes in 0 blocks.
> ==11469==      possibly lost: 0 bytes in 0 blocks.
> ==11469==    still reachable: 376 bytes in 9 blocks.
> ==11469==         suppressed: 0 bytes in 0 blocks.
> ==11469== Reachable blocks (those to which a pointer was found) are not
> shown.
>
> I will check gdal trunk, but we are looking forward to an upgrade to 1.7.
> For now, I try to find a scanline and uncompressed NITF image and perform
> the same gdal_translate operation on it. If the memory use does not climb
> when operating on uncompressed image, then we can say with more certainty
> that the problems lay with JPG2000 drivers. I'll let you know.
>
> Thanks.
> Ozy
>
>
> On Wed, Jan 13, 2010 at 1:46 PM, Even Rouault <
> even.rouault@mines-paris.org> wrote:
>
>> Ozy,
>>
>> The interesting info is that your input image is JPEG2000 compressed.
>> This explains why you were able to read a scanline oriented NITF with
>> blockwidth > 9999. My guess would be that the leak is in the JPEG2000
>> driver in question, so this may be more a problem on the reading part
>> than on the writing part. You can check that by running : gdalinfo
>> -checksum NITF_IM:0:input.ntf. If you see the memory increasing again
>> and again, there's definitely a problem. In case you have GDAL
>> configured with several JPEG2000 drivers, you'll have to find which one
>> is used : JP2KAK (Kakadu based), JP2ECW (ECW SDK based), JPEG2000
>> (Jasper based, but I doubt you're using it with such a big dataset),
>> JP2MRSID. Normally, they are selected in the order I've described
>> (JP2KAK first, etc). As you're on Linux, it might be interesting that
>> you run valgrind to see if it reports leaks. As it might very slow on
>> such a big dataset, you could try translating just a smaller window of
>> your input dataset, like
>>
>> valgrind --leak-check=full gdal_translate NITF_IM:0:input.ntf output.tif
>> -srcwin 0 0 37504 128
>>
>> I've selected TIF as output format as it shouldn't matter if you confirm
>> that the problem is in the reading part. As far as the window size is
>> concerned, it's difficult to guess which value will show the leak.
>>
>> Filing a ticket with your findings on GDAL Trac might be appropriate.
>>
>> It might be good trying with GDAL trunk first though, in case the leak
>> might have been fixed since 1.6.2. The beta2 source zip are to be found
>> here : http://download.osgeo.org/gdal/gdal-1.7.0b2.tar.gz
>>
>> Best regards,
>>
>> Even
>>
>> ozy sjahputera a ?crit :
>> > Hi Even,
>> >
>> > yes, I tried:
>> > gdal_translate -of "NITF" -co "ICORDS=G" -co "BLOCKXSIZE=128" -co
>> > "BLOCKYSIZE=128"  NITF_IM:0:input.ntf output.ntf
>> >
>> > I monitored the memory use using top and it was steadily increasing
>> > till it reached 98.4% (I have 8GB of RAM and 140 GB of local disk for
>> > swap etc.) before the node died (not just the program, but the whole
>> > system just stopped responding).
>> >
>> > My GDAL version is 1.6.2.
>> >
>> > gdalinfo on this image shows the raster size of (37504, 98772) and
>> > Block=37504x1.
>> > The image is compressed using JPEG2000 option and contains two
>> > subdatasets (data and cloud data ~ I used only the data for
>> > gdal_translate test).
>> >
>> > Band info from gdalinfo:
>> > Band 1 Block=37504x1 Type=UInt16, ColorInterp=Gray
>> >
>> > Ozy
>> >
>> > On Tue, Jan 12, 2010 at 5:38 PM, Even Rouault
>> > <even.rouault@mines-paris.org <mailto:even.rouault@mines-paris.org>>
>> > wrote:
>> >
>> >     Ozy,
>> >
>> >     Did you try with gdal_translate -of NITF src.tif output.tif -co
>> >     BLOCKSIZE=128 ? Does it give similar results ?
>> >
>> >     I'm a bit surprised that you even managed to read a 40Kx100K large
>> >     NITF
>> >     file organized as scanlines. There was a limit until very recently
>> >     that
>> >     prevented to read blocks whose one dimension was bigger than 9999.
>> >     This
>> >     was fixed recently in trunk ( see ticket
>> >     http://trac.osgeo.org/gdal/ticket/3263 ) and branches/1.6, but it
>> has
>> >     not yet been released to an officially released version. So which
>> GDAL
>> >     version are you using ?
>> >
>> >     Does the output of gdalinfo on your scanline oriented input NITF
>> gives
>> >     something like :
>> >     Band 1 Block=40000x1 Type=Byte, ColorInterp=Gray
>> >
>> >     Is your input NITF compressed or uncompressed ?
>> >
>> >     Anyway, with latest trunk, I've simulated creating a similarly large
>> >     NITF image with the following python snippet :
>> >
>> >     import gdal
>> >     ds = gdal.GetDriverByName('NITF').Create('scanline.ntf', 40000,
>> >     100000)
>> >     ds = None
>> >
>> >     and then creating the tiled NITF :
>> >
>> >     gdal_translate -of NITF scanline.ntf tiled.ntf -co BLOCKSIZE=128
>> >
>> >     The memory consumption is very reasonnable (less than 50 MB : the
>> >     default block cache size of 40 MB + temporary buffers ), so I'm not
>> >     clear why you would have a problem of increasing memory use.
>> >
>> >     ozy sjahputera a ?crit :
>> >     > I was trying to make a copy of a very large NITF image (about
>> >     40Kx100K
>> >     > pixels) using GDALDriver::CreateCopy(). The new file was set to
>> have
>> >     > different block-size (input was a scanline image, output is to
>> >     have a
>> >     > 128x128 blocksize). The program keeps getting killed by the system
>> >     > (Linux). I monitor the memory use of the program as it was
>> executing
>> >     > CreateCopy and the memory use was steadily increasing as the
>> >     progress
>> >     > indicator from CreateCopy was moving forward.
>> >     >
>> >     > Why does CreateCopy() use so much memory? I have not perused the
>> >     > source code of CreateCopy() yet, but I am guessing it employs
>> >     > RasterIO() to perform the read/write?
>> >     >
>> >     > I was trying different sizes for GDAL  cache from 64MB, 256MB,
>> >     512MB,
>> >     > 1GB, and 2GB. The program got killed in all these cache sizes. In
>> >     > fact, my Linux box became unresponsive when I set
>> >     GDALSetCacheMax() to
>> >     > 64MB.
>> >     >
>> >     > Thank you.
>> >     > Ozy
>> >     >
>> >     >
>> >     >
>> >
>> ------------------------------------------------------------------------
>> >     >
>> >     > _______________________________________________
>> >     > gdal-dev mailing list
>> >     > gdal-dev@lists.osgeo.org <mailto:gdal-dev@lists.osgeo.org>
>> >     > http://lists.osgeo.org/mailman/listinfo/gdal-dev
>> >
>> >
>> >
>>
>>
>>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100130/167c733e/attachment.html
From jrepetto at free.fr  Sat Jan 30 13:38:58 2010
From: jrepetto at free.fr (Jean-Claude REPETTO)
Date: Sat Jan 30 13:39:08 2010
Subject: [gdal-dev] OziExplorer .MAP support in GDAL 1.7
Message-ID: <4B647CC2.7020407@free.fr>

I have noticed that GDAL 1.7 can read OziExplorer .MAP files :

GIF driver :
  * Read projection and georeferencing from OziExplorer .MAP file if 
possible.

Why has this support been implemented in the GIF driver ? .MAP files are 
text files containing georeferencing information, and they can be used 
with other graphics formats, such as JPEG, ECW or OZFx.

Jean-Claude

From andywood.home at gmail.com  Sat Jan 30 13:52:42 2010
From: andywood.home at gmail.com (Andrew Wood)
Date: Sat Jan 30 13:52:45 2010
Subject: [gdal-dev] advice on using the moving average command
Message-ID: <4e0154af1001301052i967694fkcf12b719ffbdb157@mail.gmail.com>

Dear List members,

I am requesting help again on the problem below.  If anyone has used the
moving average functionality in gdal_grid, it would be great to see your
example, especially if you have produced outputs that either are netcdf or
ascii grids, or could be converted to them via gdal_translate or imagemagik
convert.

Regards,
-Andy

On Tue, Jan 26, 2010 at 11:10 AM, Andy Wood <awood@3tier.com> wrote:

> Dear List,
>
> I'm a novice to gdal and have been trying to apply the moving average
> algorithm to CSV (or gridded) data to produce grids in either ESRI arc/info
> Ascii or NetCDF format.  I've tried a range of command variations with no
> success (just get the usage message).
>
> A typical attempt looks like the following:
>
> > gdal_grid -a
> average:radius1=2.0:radius2=2.0:angle=0.0:min_points=4:nodata=-99.0 -outsize
> 48 48 -txe -107.5 -104.5 -tye 22.5 25.5 -of AAIGrid -l robf robf.m2.csv
> robf.m2.MA.asc
>
> with the CSV data file (robf.m2.csv) looking like:
>
> -104.53125,22.53125,4.631
> -104.59375,22.53125,3.988
> -104.65625,22.53125,2.785
> -104.71875,22.53125,2.660
> ...
>
> The grid I'm trying to create would be in a geographic (decimal degree)
> projection; I'm not sure if that matters.  I'm working on mac osx.
>
> I don't think I have the basic syntax down, and if anyone could help me
> with it, I think that would get me past the hump and open up all the other
> commands as well.
>
> Thanks in advance,
> -Andy
>
>
>
>
>
>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: http://lists.osgeo.org/pipermail/gdal-dev/attachments/20100130/ea1e5c6a/attachment-0001.html
From warmerdam at pobox.com  Sat Jan 30 14:22:08 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sat Jan 30 14:22:32 2010
Subject: [gdal-dev] GDAL/OGR 1.7.0 Released
Message-ID: <4B6486E0.2070702@pobox.com>

The GDAL/OGR Project is pleased to announce the release of GDAL/OGR 1.7.0.
This is the first major new release since the 1.6.0 release approximately
one year ago, though there have been a number of 1.6.x bug fixes releases
during that period.  The 1.7.0 release brings many new features, including
a number of new raster and vector drivers as well as many improvements to
existing drivers, and limited extentions to the GDAL API.

  * New Raster Drivers: BAG, EPSILON, Northwood/VerticalMapper, R, Rasterlite,
    SAGA GIS Binary, SRP (USRP/ASRP), EarthWatch .TIL, WKT Raster
  * GDAL PCIDSK driver using the new PCIDSK SDK by default
  * New Vector drivers : DXF, GeoRSS, GTM, PCIDSK and VFK
  * New utilities: gdaldem, gdalbuildvrt now compiled by default
  * Add support for Python 3.X. Compatibility with Python 2.X preserved
  * Remove old-generation Python bindings.
  * Significantly improved raster drivers: GeoRaster, GeoTIFF, HFA,
    JPEG2000 JasPer, JPEG2000 Kakadu, NITF
  * Significantly improved vector drivers: CSV, KML, SQLite/SpataiLite, VRT

Full release news is available at:

   http://trac.osgeo.org/gdal/wiki/Release/1.7.0-News

The source code, documentation and test suite can be downloaded from:

Source:
   http://download.osgeo.org/gdal/gdal-1.7.0.tar.gz
   http://download.osgeo.org/gdal/gdal170.zip

Documentation:
   http://download.osgeo.org/gdal/gdal170doc.zip

Test Suite:
   http://download.osgeo.org/gdal/gdalautotest-1.7.0.tar.gz
   http://download.osgeo.org/gdal/gdalautotest-1.7.0.zip

-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From warmerdam at pobox.com  Sun Jan 31 01:03:35 2010
From: warmerdam at pobox.com (Frank Warmerdam)
Date: Sun Jan 31 01:03:49 2010
Subject: [gdal-dev] OziExplorer .MAP support in GDAL 1.7
In-Reply-To: <4B647CC2.7020407@free.fr>
References: <4B647CC2.7020407@free.fr>
Message-ID: <4B651D37.1040602@pobox.com>

Jean-Claude REPETTO wrote:
> I have noticed that GDAL 1.7 can read OziExplorer .MAP files :
> 
> GIF driver :
>  * Read projection and georeferencing from OziExplorer .MAP file if 
> possible.
> 
> Why has this support been implemented in the GIF driver ? .MAP files are 
> text files containing georeferencing information, and they can be used 
> with other graphics formats, such as JPEG, ECW or OZFx.

Jean-Claude,

I see that there is a GDALReadOziMapFile() function that could be
utilized in other drivers too.  I presume in 1.7 Andrey implemented
use of it in the GIF driver because that is where he needed it.

I'm hesitant to spread all the possible supporting information formats
(.aux, world files, ozi map files, mapinfo files) in all drivers.  One
reason is the amount of code involved, which we could reduce by some
more generic mechanism to lookup supporting information.  The other reason
is that probing for so many supporting files may have noticable effects
on performance in some cases.

I am however open to improvements in consistency and approach if there is
broad support.

Best regards,
-- 
---------------------------------------+--------------------------------------
I set the clouds in motion - turn up   | Frank Warmerdam, warmerdam@pobox.com
light and sound - activate the windows | http://pobox.com/~warmerdam
and watch the world go round - Rush    | Geospatial Programmer for Rent

From antonio.valentino at tiscali.it  Sun Jan 31 12:18:53 2010
From: antonio.valentino at tiscali.it (Antonio Valentino)
Date: Sun Jan 31 12:20:20 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
Message-ID: <20100131181853.3698af47@mac1.local.net>

Hi Matt,

Il giorno Mon, 25 Jan 2010 20:57:58 -0600
Matt Klaric <matt@klaric.com> ha scritto:

> On Mon, Jan 25, 2010 at 8:38 PM, Frank Warmerdam
> <warmerdam@pobox.com>wrote:
> 
> > I don't think the VRT approach supports actually adding
> > different images together, only overlaying and rescaling.
> >
> >
> However, pixel functions could be used in a VRT file to accomplish the
> desired outcome.
> 
> --matt

Indeed, it would require a pixel function for sum and the ScaleRatio
property of ComplexSource.

I have just submitted a patch 

http://trac.osgeo.org/gdal/ticket/3367

that provides a set of standard pixel functions, including sum (of 2
or more raster bands).

Using this set of functions it should be quite easy to write a python
program that performs generic bands arithmetic.

Best regards.

-- 
Antonio Valentino
From alexander.bruy at gmail.com  Sun Jan 31 13:40:22 2010
From: alexander.bruy at gmail.com (Alexander Bruy)
Date: Sun Jan 31 13:41:29 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
Message-ID: <20100131204022.22b9c933.alexander.bruy@gmail.com>

Hi all

I want to write a raster calculator and have two problems with Python
and GDAL.

My first problem: when calculating a difference between two raster bands I
get a wrong results. Raster in ERDAS IMAGINE format (HFA) and bands extracted
correctly. When I print each band and subtraction result I get something
similar to this

BAND 1
[[ 118  121  121 ...,  111  108  107]....]]
BAND 5
[[ 156  162  159 ...,  148  145  142]....]]
DIFFERENCE
[[218 215 218 ..., 219 219 221]....]]

But when calculate difference between two separate TIFFs (each band in
separate file) - result is ok

RASTER 1
[[ 118.  121.  121. ...,  111.  108.  107.]....]]
RASTER 5
[[ 156.  162.  159. ...,  148.  145.  142.]....]]
DIFFERENCE
[[-38. -41. -38. ..., -37. -37. -35.]....]]

Here is my code and sample files http://www.4shared.com/file/212381308/a3e3f140/gdal_numpytar.html.
Run examples as:
 - bands subtraction: test_bands.py landsat-6bands/s1986-06-12-163.img
 - files subtraction: test_files.py landsat-separate-files/band1.tif landsat-separate-files/band5.tif 

Can anyone help? What is wrong in my code?

Second problem: processing large rasters. I get error

File "C:/Documents and Settings/alex/.qgis//python/plugins\rastercalc\rastercalcutils.py", line 162, in layerAsArray
    array = gdalData.ReadAsArray()
File "C:\OSGeo4W\apps\gdal-16\pymod\osgeo\gdal.py", line 603, in ReadAsArray
    return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize, ysize )
File "C:\OSGeo4W\apps\gdal-16\pymod\osgeo\gdal_array.py", line 108, in DatasetReadAsArray
    return numpy.concatenate( array_list )
MemoryError

Large rasters is landsats with 6 bands, 30m/pixel, scene size is aprox. 185x185 km, aprox. 9000x9000 pixels. On disk one file occupied ~500-700 Mb. Some files
can be larger, up to 15000x15000 pix. and more.
Is it possible to work with large files? Maybe it is possible to process
small pieces of this files and then merge this pieces into one large file?
Where I can found more information about this?

Thanks

P.S.: sorry for my English, I'm Ukrainian

-- 
Alexander Bruy
alexander.bruy@gmail.com
From gregcoats at mac.com  Sun Jan 31 14:58:19 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sun Jan 31 14:58:41 2010
Subject: [gdal-dev] Proposal: gdal_muladd.py
In-Reply-To: <20100131181853.3698af47@mac1.local.net>
References: <2DB710A4-6972-4298-9798-C4ABD201E848@axensten.se>
	<eb502d881001250840r1c2a51d1l17fdb67fca10208f@mail.gmail.com>
	<931f8ea91001251838w1c427827r61fb9cf2f8a27852@mail.gmail.com>
	<eba00f2b1001251857o109f5dafh66d224f22f967a1f@mail.gmail.com>
	<20100131181853.3698af47@mac1.local.net>
Message-ID: <9520510A-60F1-4C74-8DBE-458A8B37C229@mac.com>

Regarding the diff function
"diff": computes the difference between 2 raster bands (b1 - b2)
Since the result of diff could be a negative number, for example 99-150=-51, I suggest that there be an additional function that provides the absolute value of diff, which would be 51 in this example.
Greg

On Jan 31, 2010, at 12:18 PM, Antonio Valentino wrote:

> Hi Matt,
> 
> Il giorno Mon, 25 Jan 2010 20:57:58 -0600
> Matt Klaric <matt@klaric.com> ha scritto:
> 
>> On Mon, Jan 25, 2010 at 8:38 PM, Frank Warmerdam
>> <warmerdam@pobox.com>wrote:
>> 
>>> I don't think the VRT approach supports actually adding
>>> different images together, only overlaying and rescaling.
>>> 
>>> 
>> However, pixel functions could be used in a VRT file to accomplish the
>> desired outcome.
>> 
>> --matt
> 
> Indeed, it would require a pixel function for sum and the ScaleRatio
> property of ComplexSource.
> 
> I have just submitted a patch 
> 
> http://trac.osgeo.org/gdal/ticket/3367
> 
> that provides a set of standard pixel functions, including sum (of 2
> or more raster bands).
> 
> Using this set of functions it should be quite easy to write a python
> program that performs generic bands arithmetic.
> 
> Best regards.
> 
> -- 
> Antonio Valentino
> _______________________________________________
> gdal-dev mailing list
> gdal-dev@lists.osgeo.org
> http://lists.osgeo.org/mailman/listinfo/gdal-dev

From mateusz at loskot.net  Sun Jan 31 19:17:04 2010
From: mateusz at loskot.net (Mateusz Loskot)
Date: Sun Jan 31 19:17:16 2010
Subject: [gdal-dev] Runtime error on executing "OGRRegisterAll()" function.
In-Reply-To: <931f8ea91001271935s109e927v28358c148742f09b@mail.gmail.com>
References: <1264426245484-4453903.post@n2.nabble.com>	
	<4B5EE128.3020806@loskot.net>	
	<1264596958438-4466974.post@n2.nabble.com>
	<4B60E27B.40704@loskot.net>
	<931f8ea91001271935s109e927v28358c148742f09b@mail.gmail.com>
Message-ID: <4B661D80.2090008@loskot.net>

Frank Warmerdam wrote:
> On Thu, Jan 28, 2010 at 9:03 AM, Mateusz Loskot <mateusz@loskot.net> wrote:
>> By the way, makefile.vc of PCIDISK SDK [1] pulled from external location
>> to frmts/pcidsk/sdk override the flags specified in nmake.opt
>> and explicitly set to /MD
>>
>> This may also potentially cause problems while you'll be debugging your
>> program. So, depending on configuration of GDAL drivers you build, you
>> may need to change /MD to /MDd (for debug only!).
>>
>> [1] https://svn.osgeo.org/gdal/sandbox/warmerdam/pcidsk/src/Makefile.vc
> 
> Mateusz,
> 
> I think this is incorrect.  I believe that the makefiles that come
> with the PCIDSK SDK are ignored when PCIDSK it built
> internally within GDAL.  Instead the gdal/frmts/pcidsk/makefile.vc
> is used which utilizes the normal flags from ../../nmake.opt.
> 
> Correct me with details if I am wrong.

Frank,

Yes, you are perfectly right. Sorry for confusion.

Best regards,
-- 
Mateusz Loskot, http://mateusz.loskot.net
Charter Member of OSGeo, http://osgeo.org
From gregcoats at mac.com  Sun Jan 31 19:58:43 2010
From: gregcoats at mac.com (Greg Coats)
Date: Sun Jan 31 19:58:48 2010
Subject: [gdal-dev] Raster algebra with Gdal and Python
In-Reply-To: <20100131204022.22b9c933.alexander.bruy@gmail.com>
References: <20100131204022.22b9c933.alexander.bruy@gmail.com>
Message-ID: <BAC54A9C-91AC-410F-8997-019A4969C5D2@mac.com>

Yes, GDAL can successfully process images with 15,000 columns by 15,000 rows. I have used GDAL on a computer with only 3 GB RAM to process an image with Image Width: 260,000 Image Length: 195,000. What version of GAL are you using? Are you using GDAL 1.7.0? What operating system are you using? How much RAM is available to GDAL? Greg

On Jan 31, 2010, at 1:40 PM, Alexander Bruy wrote:

> Second problem: processing large rasters. I get error
> 
> File "C:/Documents and Settings/alex/.qgis//python/plugins\rastercalc\rastercalcutils.py", line 162, in layerAsArray
>    array = gdalData.ReadAsArray()
> File "C:\OSGeo4W\apps\gdal-16\pymod\osgeo\gdal.py", line 603, in ReadAsArray
>    return gdalnumeric.DatasetReadAsArray( self, xoff, yoff, xsize, ysize )
> File "C:\OSGeo4W\apps\gdal-16\pymod\osgeo\gdal_array.py", line 108, in DatasetReadAsArray
>    return numpy.concatenate( array_list )
> MemoryError
> 
> Large rasters is landsats with 6 bands, 30m/pixel, scene size is aprox. 185x185 km, aprox. 9000x9000 pixels. On disk one file occupied ~500-700 Mb. Some files
> can be larger, up to 15000x15000 pix. and more.
> Is it possible to work with large files?

